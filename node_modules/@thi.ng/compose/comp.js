import { illegalArity } from "@thi.ng/errors/illegal-arity";
function comp(...fns) {
  let [a, b, c, d, e, f, g, h, i, j] = fns;
  switch (fns.length) {
    case 0:
      illegalArity(0);
    case 1:
      return a;
    case 2:
      return (...xs) => a(b(...xs));
    case 3:
      return (...xs) => a(b(c(...xs)));
    case 4:
      return (...xs) => a(b(c(d(...xs))));
    case 5:
      return (...xs) => a(b(c(d(e(...xs)))));
    case 6:
      return (...xs) => a(b(c(d(e(f(...xs))))));
    case 7:
      return (...xs) => a(b(c(d(e(f(g(...xs)))))));
    case 8:
      return (...xs) => a(b(c(d(e(f(g(h(...xs))))))));
    case 9:
      return (...xs) => a(b(c(d(e(f(g(h(i(...xs)))))))));
    case 10:
    default:
      const fn = (...xs) => a(b(c(d(e(f(g(h(i(j(...xs))))))))));
      return fns.length === 10 ? fn : comp(fn, ...fns.slice(10));
  }
}
function compLeft(...fns) {
  return comp.apply(null, fns.reverse());
}
const compL = compLeft;
function compAsync(...fns) {
  return async (...xs) => {
    let n = fns.length - 1;
    let res = fns[n](...xs);
    while (n-- > 0) {
      res = await fns[n](res);
    }
    return res;
  };
}
export {
  comp,
  compAsync,
  compL,
  compLeft
};
