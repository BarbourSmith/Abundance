var wte=Object.defineProperty;var Ste=(n,e,t)=>e in n?wte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var pk=(n,e,t)=>(Ste(n,typeof e!="symbol"?e+"":e,t),t);import{Octokit as mu}from"https://esm.sh/octokit@2.0.19";function _te(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function so(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Ete(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var j7={exports:{}},v_={},q7={exports:{}},yn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0=Symbol.for("react.element"),Mte=Symbol.for("react.portal"),Cte=Symbol.for("react.fragment"),Ate=Symbol.for("react.strict_mode"),Tte=Symbol.for("react.profiler"),Dte=Symbol.for("react.provider"),Nte=Symbol.for("react.context"),Pte=Symbol.for("react.forward_ref"),Rte=Symbol.for("react.suspense"),Ote=Symbol.for("react.memo"),Ite=Symbol.for("react.lazy"),mk=Symbol.iterator;function kte(n){return n===null||typeof n!="object"?null:(n=mk&&n[mk]||n["@@iterator"],typeof n=="function"?n:null)}var X7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y7=Object.assign,K7={};function dm(n,e,t){this.props=n,this.context=e,this.refs=K7,this.updater=t||X7}dm.prototype.isReactComponent={};dm.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};dm.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Z7(){}Z7.prototype=dm.prototype;function pN(n,e,t){this.props=n,this.context=e,this.refs=K7,this.updater=t||X7}var mN=pN.prototype=new Z7;mN.constructor=pN;Y7(mN,dm.prototype);mN.isPureReactComponent=!0;var gk=Array.isArray,J7=Object.prototype.hasOwnProperty,gN={current:null},Q7={key:!0,ref:!0,__self:!0,__source:!0};function e$(n,e,t){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)J7.call(e,r)&&!Q7.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in o=n.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Y0,type:n,key:s,ref:a,props:i,_owner:gN.current}}function Lte(n,e){return{$$typeof:Y0,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function vN(n){return typeof n=="object"&&n!==null&&n.$$typeof===Y0}function Fte(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var vk=/\/+/g;function l2(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Fte(""+n.key):e.toString(36)}function Bb(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Y0:case Mte:a=!0}}if(a)return a=n,i=i(a),n=r===""?"."+l2(a,0):r,gk(i)?(t="",n!=null&&(t=n.replace(vk,"$&/")+"/"),Bb(i,e,t,"",function(u){return u})):i!=null&&(vN(i)&&(i=Lte(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(vk,"$&/")+"/")+n)),e.push(i)),1;if(a=0,r=r===""?".":r+":",gk(n))for(var o=0;o<n.length;o++){s=n[o];var l=r+l2(s,o);a+=Bb(s,e,t,l,i)}else if(l=kte(n),typeof l=="function")for(n=l.call(n),o=0;!(s=n.next()).done;)s=s.value,l=r+l2(s,o++),a+=Bb(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function A1(n,e,t){if(n==null)return n;var r=[],i=0;return Bb(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Bte(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ts={current:null},zb={transition:null},zte={ReactCurrentDispatcher:Ts,ReactCurrentBatchConfig:zb,ReactCurrentOwner:gN};yn.Children={map:A1,forEach:function(n,e,t){A1(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return A1(n,function(){e++}),e},toArray:function(n){return A1(n,function(e){return e})||[]},only:function(n){if(!vN(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};yn.Component=dm;yn.Fragment=Cte;yn.Profiler=Tte;yn.PureComponent=pN;yn.StrictMode=Ate;yn.Suspense=Rte;yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zte;yn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Y7({},n.props),i=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=gN.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)J7.call(e,l)&&!Q7.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Y0,type:n.type,key:i,ref:s,props:r,_owner:a}};yn.createContext=function(n){return n={$$typeof:Nte,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Dte,_context:n},n.Consumer=n};yn.createElement=e$;yn.createFactory=function(n){var e=e$.bind(null,n);return e.type=n,e};yn.createRef=function(){return{current:null}};yn.forwardRef=function(n){return{$$typeof:Pte,render:n}};yn.isValidElement=vN;yn.lazy=function(n){return{$$typeof:Ite,_payload:{_status:-1,_result:n},_init:Bte}};yn.memo=function(n,e){return{$$typeof:Ote,type:n,compare:e===void 0?null:e}};yn.startTransition=function(n){var e=zb.transition;zb.transition={};try{n()}finally{zb.transition=e}};yn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};yn.useCallback=function(n,e){return Ts.current.useCallback(n,e)};yn.useContext=function(n){return Ts.current.useContext(n)};yn.useDebugValue=function(){};yn.useDeferredValue=function(n){return Ts.current.useDeferredValue(n)};yn.useEffect=function(n,e){return Ts.current.useEffect(n,e)};yn.useId=function(){return Ts.current.useId()};yn.useImperativeHandle=function(n,e,t){return Ts.current.useImperativeHandle(n,e,t)};yn.useInsertionEffect=function(n,e){return Ts.current.useInsertionEffect(n,e)};yn.useLayoutEffect=function(n,e){return Ts.current.useLayoutEffect(n,e)};yn.useMemo=function(n,e){return Ts.current.useMemo(n,e)};yn.useReducer=function(n,e,t){return Ts.current.useReducer(n,e,t)};yn.useRef=function(n){return Ts.current.useRef(n)};yn.useState=function(n){return Ts.current.useState(n)};yn.useSyncExternalStore=function(n,e,t){return Ts.current.useSyncExternalStore(n,e,t)};yn.useTransition=function(){return Ts.current.useTransition()};yn.version="18.2.0";q7.exports=yn;var z=q7.exports;const Ae=so(z),Mw=_te({__proto__:null,default:Ae},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ute=z,$te=Symbol.for("react.element"),Vte=Symbol.for("react.fragment"),Hte=Object.prototype.hasOwnProperty,Wte=Ute.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gte={key:!0,ref:!0,__self:!0,__source:!0};function t$(n,e,t){var r,i={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Hte.call(e,r)&&!Gte.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$te,type:n,key:s,ref:a,props:i,_owner:Wte.current}}v_.Fragment=Vte;v_.jsx=t$;v_.jsxs=t$;j7.exports=v_;var le=j7.exports,PA={},n$={exports:{}},Ma={},r$={exports:{}},i$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e($,L){var X=$.length;$.push(L);e:for(;0<X;){var Z=X-1>>>1,Q=$[Z];if(0<i(Q,L))$[Z]=L,$[X]=Q,X=Z;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var L=$[0],X=$.pop();if(X!==L){$[0]=X;e:for(var Z=0,Q=$.length,K=Q>>>1;Z<K;){var re=2*(Z+1)-1,ce=$[re],ue=re+1,me=$[ue];if(0>i(ce,X))ue<Q&&0>i(me,ce)?($[Z]=me,$[ue]=X,Z=ue):($[Z]=ce,$[re]=X,Z=re);else if(ue<Q&&0>i(me,X))$[Z]=me,$[ue]=X,Z=ue;else break e}}return L}function i($,L){var X=$.sortIndex-L.sortIndex;return X!==0?X:$.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,f=null,d=3,h=!1,p=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b($){for(var L=t(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=$)r(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=t(u)}}function g($){if(v=!1,b($),!p)if(t(l)!==null)p=!0,D(w);else{var L=t(u);L!==null&&O(g,L.startTime-$)}}function w($,L){p=!1,v&&(v=!1,m(A),A=-1),h=!0;var X=d;try{for(b(L),f=t(l);f!==null&&(!(f.expirationTime>L)||$&&!T());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,d=f.priorityLevel;var Q=Z(f.expirationTime<=L);L=n.unstable_now(),typeof Q=="function"?f.callback=Q:f===t(l)&&r(l),b(L)}else r(l);f=t(l)}if(f!==null)var K=!0;else{var re=t(u);re!==null&&O(g,re.startTime-L),K=!1}return K}finally{f=null,d=X,h=!1}}var x=!1,M=null,A=-1,N=5,C=-1;function T(){return!(n.unstable_now()-C<N)}function R(){if(M!==null){var $=n.unstable_now();C=$;var L=!0;try{L=M(!0,$)}finally{L?U():(x=!1,M=null)}}else x=!1}var U;if(typeof S=="function")U=function(){S(R)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,B=F.port2;F.port1.onmessage=R,U=function(){B.postMessage(null)}}else U=function(){y(R,0)};function D($){M=$,x||(x=!0,U())}function O($,L){A=y(function(){$(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){p||h||(p=!0,D(w))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function($){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var X=d;d=L;try{return $()}finally{d=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,L){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=d;d=$;try{return L()}finally{d=X}},n.unstable_scheduleCallback=function($,L,X){var Z=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Z+X:Z):X=Z,$){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=X+Q,$={id:c++,callback:L,priorityLevel:$,startTime:X,expirationTime:Q,sortIndex:-1},X>Z?($.sortIndex=X,e(u,$),t(l)===null&&$===t(u)&&(v?(m(A),A=-1):v=!0,O(g,X-Z))):($.sortIndex=Q,e(l,$),p||h||(p=!0,D(w))),$},n.unstable_shouldYield=T,n.unstable_wrapCallback=function($){var L=d;return function(){var X=d;d=L;try{return $.apply(this,arguments)}finally{d=X}}}})(i$);r$.exports=i$;var jte=r$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s$=z,Sa=jte;function ut(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a$=new Set,Dv={};function Od(n,e){Bp(n,e),Bp(n+"Capture",e)}function Bp(n,e){for(Dv[n]=e,n=0;n<e.length;n++)a$.add(e[n])}var gu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),RA=Object.prototype.hasOwnProperty,qte=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yk={},xk={};function Xte(n){return RA.call(xk,n)?!0:RA.call(yk,n)?!1:qte.test(n)?xk[n]=!0:(yk[n]=!0,!1)}function Yte(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Kte(n,e,t,r){if(e===null||typeof e>"u"||Yte(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ds(n,e,t,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ki={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ki[n]=new Ds(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ki[e]=new Ds(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ki[n]=new Ds(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ki[n]=new Ds(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ki[n]=new Ds(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ki[n]=new Ds(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ki[n]=new Ds(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ki[n]=new Ds(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ki[n]=new Ds(n,5,!1,n.toLowerCase(),null,!1,!1)});var yN=/[\-:]([a-z])/g;function xN(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(yN,xN);ki[e]=new Ds(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(yN,xN);ki[e]=new Ds(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(yN,xN);ki[e]=new Ds(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ki[n]=new Ds(n,1,!1,n.toLowerCase(),null,!1,!1)});ki.xlinkHref=new Ds("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ki[n]=new Ds(n,1,!1,n.toLowerCase(),null,!0,!0)});function bN(n,e,t,r){var i=ki.hasOwnProperty(e)?ki[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Kte(e,t,i,r)&&(t=null),r||i===null?Xte(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ru=s$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T1=Symbol.for("react.element"),Yh=Symbol.for("react.portal"),Kh=Symbol.for("react.fragment"),wN=Symbol.for("react.strict_mode"),OA=Symbol.for("react.profiler"),o$=Symbol.for("react.provider"),l$=Symbol.for("react.context"),SN=Symbol.for("react.forward_ref"),IA=Symbol.for("react.suspense"),kA=Symbol.for("react.suspense_list"),_N=Symbol.for("react.memo"),rc=Symbol.for("react.lazy"),u$=Symbol.for("react.offscreen"),bk=Symbol.iterator;function ug(n){return n===null||typeof n!="object"?null:(n=bk&&n[bk]||n["@@iterator"],typeof n=="function"?n:null)}var _r=Object.assign,u2;function Wg(n){if(u2===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);u2=e&&e[1]||""}return`
`+u2+n}var c2=!1;function f2(n,e){if(!n||c2)return"";c2=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{c2=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Wg(n):""}function Zte(n){switch(n.tag){case 5:return Wg(n.type);case 16:return Wg("Lazy");case 13:return Wg("Suspense");case 19:return Wg("SuspenseList");case 0:case 2:case 15:return n=f2(n.type,!1),n;case 11:return n=f2(n.type.render,!1),n;case 1:return n=f2(n.type,!0),n;default:return""}}function LA(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Kh:return"Fragment";case Yh:return"Portal";case OA:return"Profiler";case wN:return"StrictMode";case IA:return"Suspense";case kA:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case l$:return(n.displayName||"Context")+".Consumer";case o$:return(n._context.displayName||"Context")+".Provider";case SN:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case _N:return e=n.displayName||null,e!==null?e:LA(n.type)||"Memo";case rc:e=n._payload,n=n._init;try{return LA(n(e))}catch{}}return null}function Jte(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return LA(e);case 8:return e===wN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function c$(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Qte(n){var e=c$(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function D1(n){n._valueTracker||(n._valueTracker=Qte(n))}function f$(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=c$(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Cw(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function FA(n,e){var t=e.checked;return _r({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function wk(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Bc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function d$(n,e){e=e.checked,e!=null&&bN(n,"checked",e,!1)}function BA(n,e){d$(n,e);var t=Bc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?zA(n,e.type,t):e.hasOwnProperty("defaultValue")&&zA(n,e.type,Bc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Sk(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function zA(n,e,t){(e!=="number"||Cw(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Gg=Array.isArray;function yp(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Bc(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function UA(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ut(91));return _r({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function _k(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ut(92));if(Gg(t)){if(1<t.length)throw Error(ut(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Bc(t)}}function h$(n,e){var t=Bc(e.value),r=Bc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Ek(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function p$(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $A(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?p$(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var N1,m$=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(N1=N1||document.createElement("div"),N1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=N1.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Nv(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var av={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ene=["Webkit","ms","Moz","O"];Object.keys(av).forEach(function(n){ene.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),av[e]=av[n]})});function g$(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||av.hasOwnProperty(n)&&av[n]?(""+e).trim():e+"px"}function v$(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=g$(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var tne=_r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function VA(n,e){if(e){if(tne[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ut(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ut(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ut(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ut(62))}}function HA(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WA=null;function EN(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var GA=null,xp=null,bp=null;function Mk(n){if(n=J0(n)){if(typeof GA!="function")throw Error(ut(280));var e=n.stateNode;e&&(e=S_(e),GA(n.stateNode,n.type,e))}}function y$(n){xp?bp?bp.push(n):bp=[n]:xp=n}function x$(){if(xp){var n=xp,e=bp;if(bp=xp=null,Mk(n),e)for(n=0;n<e.length;n++)Mk(e[n])}}function b$(n,e){return n(e)}function w$(){}var d2=!1;function S$(n,e,t){if(d2)return n(e,t);d2=!0;try{return b$(n,e,t)}finally{d2=!1,(xp!==null||bp!==null)&&(w$(),x$())}}function Pv(n,e){var t=n.stateNode;if(t===null)return null;var r=S_(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ut(231,e,typeof t));return t}var jA=!1;if(gu)try{var cg={};Object.defineProperty(cg,"passive",{get:function(){jA=!0}}),window.addEventListener("test",cg,cg),window.removeEventListener("test",cg,cg)}catch{jA=!1}function nne(n,e,t,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var ov=!1,Aw=null,Tw=!1,qA=null,rne={onError:function(n){ov=!0,Aw=n}};function ine(n,e,t,r,i,s,a,o,l){ov=!1,Aw=null,nne.apply(rne,arguments)}function sne(n,e,t,r,i,s,a,o,l){if(ine.apply(this,arguments),ov){if(ov){var u=Aw;ov=!1,Aw=null}else throw Error(ut(198));Tw||(Tw=!0,qA=u)}}function Id(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function _$(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Ck(n){if(Id(n)!==n)throw Error(ut(188))}function ane(n){var e=n.alternate;if(!e){if(e=Id(n),e===null)throw Error(ut(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Ck(i),n;if(s===r)return Ck(i),e;s=s.sibling}throw Error(ut(188))}if(t.return!==r.return)t=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,r=s;break}if(o===r){a=!0,r=i,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,r=i;break}if(o===r){a=!0,r=s,t=i;break}o=o.sibling}if(!a)throw Error(ut(189))}}if(t.alternate!==r)throw Error(ut(190))}if(t.tag!==3)throw Error(ut(188));return t.stateNode.current===t?n:e}function E$(n){return n=ane(n),n!==null?M$(n):null}function M$(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=M$(n);if(e!==null)return e;n=n.sibling}return null}var C$=Sa.unstable_scheduleCallback,Ak=Sa.unstable_cancelCallback,one=Sa.unstable_shouldYield,lne=Sa.unstable_requestPaint,$r=Sa.unstable_now,une=Sa.unstable_getCurrentPriorityLevel,MN=Sa.unstable_ImmediatePriority,A$=Sa.unstable_UserBlockingPriority,Dw=Sa.unstable_NormalPriority,cne=Sa.unstable_LowPriority,T$=Sa.unstable_IdlePriority,y_=null,pl=null;function fne(n){if(pl&&typeof pl.onCommitFiberRoot=="function")try{pl.onCommitFiberRoot(y_,n,void 0,(n.current.flags&128)===128)}catch{}}var _o=Math.clz32?Math.clz32:pne,dne=Math.log,hne=Math.LN2;function pne(n){return n>>>=0,n===0?32:31-(dne(n)/hne|0)|0}var P1=64,R1=4194304;function jg(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Nw(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?r=jg(o):(s&=a,s!==0&&(r=jg(s)))}else a=t&~i,a!==0?r=jg(a):s!==0&&(r=jg(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-_o(e),i=1<<t,r|=n[t],e&=~i;return r}function mne(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gne(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-_o(s),o=1<<a,l=i[a];l===-1?(!(o&t)||o&r)&&(i[a]=mne(o,e)):l<=e&&(n.expiredLanes|=o),s&=~o}}function XA(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function D$(){var n=P1;return P1<<=1,!(P1&4194240)&&(P1=64),n}function h2(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function K0(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-_o(e),n[e]=t}function vne(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-_o(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function CN(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-_o(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Vn=0;function N$(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var P$,AN,R$,O$,I$,YA=!1,O1=[],_c=null,Ec=null,Mc=null,Rv=new Map,Ov=new Map,uc=[],yne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tk(n,e){switch(n){case"focusin":case"focusout":_c=null;break;case"dragenter":case"dragleave":Ec=null;break;case"mouseover":case"mouseout":Mc=null;break;case"pointerover":case"pointerout":Rv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ov.delete(e.pointerId)}}function fg(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=J0(e),e!==null&&AN(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function xne(n,e,t,r,i){switch(e){case"focusin":return _c=fg(_c,n,e,t,r,i),!0;case"dragenter":return Ec=fg(Ec,n,e,t,r,i),!0;case"mouseover":return Mc=fg(Mc,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Rv.set(s,fg(Rv.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ov.set(s,fg(Ov.get(s)||null,n,e,t,r,i)),!0}return!1}function k$(n){var e=jf(n.target);if(e!==null){var t=Id(e);if(t!==null){if(e=t.tag,e===13){if(e=_$(t),e!==null){n.blockedOn=e,I$(n.priority,function(){R$(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ub(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=KA(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);WA=r,t.target.dispatchEvent(r),WA=null}else return e=J0(t),e!==null&&AN(e),n.blockedOn=t,!1;e.shift()}return!0}function Dk(n,e,t){Ub(n)&&t.delete(e)}function bne(){YA=!1,_c!==null&&Ub(_c)&&(_c=null),Ec!==null&&Ub(Ec)&&(Ec=null),Mc!==null&&Ub(Mc)&&(Mc=null),Rv.forEach(Dk),Ov.forEach(Dk)}function dg(n,e){n.blockedOn===e&&(n.blockedOn=null,YA||(YA=!0,Sa.unstable_scheduleCallback(Sa.unstable_NormalPriority,bne)))}function Iv(n){function e(i){return dg(i,n)}if(0<O1.length){dg(O1[0],n);for(var t=1;t<O1.length;t++){var r=O1[t];r.blockedOn===n&&(r.blockedOn=null)}}for(_c!==null&&dg(_c,n),Ec!==null&&dg(Ec,n),Mc!==null&&dg(Mc,n),Rv.forEach(e),Ov.forEach(e),t=0;t<uc.length;t++)r=uc[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<uc.length&&(t=uc[0],t.blockedOn===null);)k$(t),t.blockedOn===null&&uc.shift()}var wp=Ru.ReactCurrentBatchConfig,Pw=!0;function wne(n,e,t,r){var i=Vn,s=wp.transition;wp.transition=null;try{Vn=1,TN(n,e,t,r)}finally{Vn=i,wp.transition=s}}function Sne(n,e,t,r){var i=Vn,s=wp.transition;wp.transition=null;try{Vn=4,TN(n,e,t,r)}finally{Vn=i,wp.transition=s}}function TN(n,e,t,r){if(Pw){var i=KA(n,e,t,r);if(i===null)_2(n,e,r,Rw,t),Tk(n,r);else if(xne(i,n,e,t,r))r.stopPropagation();else if(Tk(n,r),e&4&&-1<yne.indexOf(n)){for(;i!==null;){var s=J0(i);if(s!==null&&P$(s),s=KA(n,e,t,r),s===null&&_2(n,e,r,Rw,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else _2(n,e,r,null,t)}}var Rw=null;function KA(n,e,t,r){if(Rw=null,n=EN(r),n=jf(n),n!==null)if(e=Id(n),e===null)n=null;else if(t=e.tag,t===13){if(n=_$(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Rw=n,null}function L$(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(une()){case MN:return 1;case A$:return 4;case Dw:case cne:return 16;case T$:return 536870912;default:return 16}default:return 16}}var hc=null,DN=null,$b=null;function F$(){if($b)return $b;var n,e=DN,t=e.length,r,i="value"in hc?hc.value:hc.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var a=t-n;for(r=1;r<=a&&e[t-r]===i[s-r];r++);return $b=i.slice(n,1<r?1-r:void 0)}function Vb(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function I1(){return!0}function Nk(){return!1}function Ca(n){function e(t,r,i,s,a){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?I1:Nk,this.isPropagationStopped=Nk,this}return _r(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=I1)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=I1)},persist:function(){},isPersistent:I1}),e}var hm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},NN=Ca(hm),Z0=_r({},hm,{view:0,detail:0}),_ne=Ca(Z0),p2,m2,hg,x_=_r({},Z0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:PN,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hg&&(hg&&n.type==="mousemove"?(p2=n.screenX-hg.screenX,m2=n.screenY-hg.screenY):m2=p2=0,hg=n),p2)},movementY:function(n){return"movementY"in n?n.movementY:m2}}),Pk=Ca(x_),Ene=_r({},x_,{dataTransfer:0}),Mne=Ca(Ene),Cne=_r({},Z0,{relatedTarget:0}),g2=Ca(Cne),Ane=_r({},hm,{animationName:0,elapsedTime:0,pseudoElement:0}),Tne=Ca(Ane),Dne=_r({},hm,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Nne=Ca(Dne),Pne=_r({},hm,{data:0}),Rk=Ca(Pne),Rne={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},One={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ine={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kne(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Ine[n])?!!e[n]:!1}function PN(){return kne}var Lne=_r({},Z0,{key:function(n){if(n.key){var e=Rne[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Vb(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?One[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:PN,charCode:function(n){return n.type==="keypress"?Vb(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Vb(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fne=Ca(Lne),Bne=_r({},x_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ok=Ca(Bne),zne=_r({},Z0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:PN}),Une=Ca(zne),$ne=_r({},hm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vne=Ca($ne),Hne=_r({},x_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Wne=Ca(Hne),Gne=[9,13,27,32],RN=gu&&"CompositionEvent"in window,lv=null;gu&&"documentMode"in document&&(lv=document.documentMode);var jne=gu&&"TextEvent"in window&&!lv,B$=gu&&(!RN||lv&&8<lv&&11>=lv),Ik=" ",kk=!1;function z$(n,e){switch(n){case"keyup":return Gne.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U$(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Zh=!1;function qne(n,e){switch(n){case"compositionend":return U$(e);case"keypress":return e.which!==32?null:(kk=!0,Ik);case"textInput":return n=e.data,n===Ik&&kk?null:n;default:return null}}function Xne(n,e){if(Zh)return n==="compositionend"||!RN&&z$(n,e)?(n=F$(),$b=DN=hc=null,Zh=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return B$&&e.locale!=="ko"?null:e.data;default:return null}}var Yne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lk(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Yne[n.type]:e==="textarea"}function $$(n,e,t,r){y$(r),e=Ow(e,"onChange"),0<e.length&&(t=new NN("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var uv=null,kv=null;function Kne(n){J$(n,0)}function b_(n){var e=ep(n);if(f$(e))return n}function Zne(n,e){if(n==="change")return e}var V$=!1;if(gu){var v2;if(gu){var y2="oninput"in document;if(!y2){var Fk=document.createElement("div");Fk.setAttribute("oninput","return;"),y2=typeof Fk.oninput=="function"}v2=y2}else v2=!1;V$=v2&&(!document.documentMode||9<document.documentMode)}function Bk(){uv&&(uv.detachEvent("onpropertychange",H$),kv=uv=null)}function H$(n){if(n.propertyName==="value"&&b_(kv)){var e=[];$$(e,kv,n,EN(n)),S$(Kne,e)}}function Jne(n,e,t){n==="focusin"?(Bk(),uv=e,kv=t,uv.attachEvent("onpropertychange",H$)):n==="focusout"&&Bk()}function Qne(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return b_(kv)}function ere(n,e){if(n==="click")return b_(e)}function tre(n,e){if(n==="input"||n==="change")return b_(e)}function nre(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ao=typeof Object.is=="function"?Object.is:nre;function Lv(n,e){if(Ao(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!RA.call(e,i)||!Ao(n[i],e[i]))return!1}return!0}function zk(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Uk(n,e){var t=zk(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=zk(t)}}function W$(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?W$(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function G$(){for(var n=window,e=Cw();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Cw(n.document)}return e}function ON(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function rre(n){var e=G$(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&W$(t.ownerDocument.documentElement,t)){if(r!==null&&ON(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Uk(t,s);var a=Uk(t,r);i&&a&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ire=gu&&"documentMode"in document&&11>=document.documentMode,Jh=null,ZA=null,cv=null,JA=!1;function $k(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;JA||Jh==null||Jh!==Cw(r)||(r=Jh,"selectionStart"in r&&ON(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cv&&Lv(cv,r)||(cv=r,r=Ow(ZA,"onSelect"),0<r.length&&(e=new NN("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Jh)))}function k1(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Qh={animationend:k1("Animation","AnimationEnd"),animationiteration:k1("Animation","AnimationIteration"),animationstart:k1("Animation","AnimationStart"),transitionend:k1("Transition","TransitionEnd")},x2={},j$={};gu&&(j$=document.createElement("div").style,"AnimationEvent"in window||(delete Qh.animationend.animation,delete Qh.animationiteration.animation,delete Qh.animationstart.animation),"TransitionEvent"in window||delete Qh.transitionend.transition);function w_(n){if(x2[n])return x2[n];if(!Qh[n])return n;var e=Qh[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in j$)return x2[n]=e[t];return n}var q$=w_("animationend"),X$=w_("animationiteration"),Y$=w_("animationstart"),K$=w_("transitionend"),Z$=new Map,Vk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ef(n,e){Z$.set(n,e),Od(e,[n])}for(var b2=0;b2<Vk.length;b2++){var w2=Vk[b2],sre=w2.toLowerCase(),are=w2[0].toUpperCase()+w2.slice(1);ef(sre,"on"+are)}ef(q$,"onAnimationEnd");ef(X$,"onAnimationIteration");ef(Y$,"onAnimationStart");ef("dblclick","onDoubleClick");ef("focusin","onFocus");ef("focusout","onBlur");ef(K$,"onTransitionEnd");Bp("onMouseEnter",["mouseout","mouseover"]);Bp("onMouseLeave",["mouseout","mouseover"]);Bp("onPointerEnter",["pointerout","pointerover"]);Bp("onPointerLeave",["pointerout","pointerover"]);Od("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Od("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Od("onBeforeInput",["compositionend","keypress","textInput","paste"]);Od("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Od("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Od("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ore=new Set("cancel close invalid load scroll toggle".split(" ").concat(qg));function Hk(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,sne(r,e,void 0,n),n.currentTarget=null}function J$(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Hk(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Hk(i,o,u),s=l}}}if(Tw)throw n=qA,Tw=!1,qA=null,n}function sr(n,e){var t=e[rT];t===void 0&&(t=e[rT]=new Set);var r=n+"__bubble";t.has(r)||(Q$(e,n,2,!1),t.add(r))}function S2(n,e,t){var r=0;e&&(r|=4),Q$(t,n,r,e)}var L1="_reactListening"+Math.random().toString(36).slice(2);function Fv(n){if(!n[L1]){n[L1]=!0,a$.forEach(function(t){t!=="selectionchange"&&(ore.has(t)||S2(t,!1,n),S2(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[L1]||(e[L1]=!0,S2("selectionchange",!1,e))}}function Q$(n,e,t,r){switch(L$(e)){case 1:var i=wne;break;case 4:i=Sne;break;default:i=TN}t=i.bind(null,e,t,n),i=void 0,!jA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function _2(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=jf(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}S$(function(){var u=s,c=EN(t),f=[];e:{var d=Z$.get(n);if(d!==void 0){var h=NN,p=n;switch(n){case"keypress":if(Vb(t)===0)break e;case"keydown":case"keyup":h=Fne;break;case"focusin":p="focus",h=g2;break;case"focusout":p="blur",h=g2;break;case"beforeblur":case"afterblur":h=g2;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Pk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Mne;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Une;break;case q$:case X$:case Y$:h=Tne;break;case K$:h=Vne;break;case"scroll":h=_ne;break;case"wheel":h=Wne;break;case"copy":case"cut":case"paste":h=Nne;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Ok}var v=(e&4)!==0,y=!v&&n==="scroll",m=v?d!==null?d+"Capture":null:d;v=[];for(var S=u,b;S!==null;){b=S;var g=b.stateNode;if(b.tag===5&&g!==null&&(b=g,m!==null&&(g=Pv(S,m),g!=null&&v.push(Bv(S,g,b)))),y)break;S=S.return}0<v.length&&(d=new h(d,p,null,t,c),f.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",h=n==="mouseout"||n==="pointerout",d&&t!==WA&&(p=t.relatedTarget||t.fromElement)&&(jf(p)||p[vu]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=t.relatedTarget||t.toElement,h=u,p=p?jf(p):null,p!==null&&(y=Id(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(v=Pk,g="onMouseLeave",m="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(v=Ok,g="onPointerLeave",m="onPointerEnter",S="pointer"),y=h==null?d:ep(h),b=p==null?d:ep(p),d=new v(g,S+"leave",h,t,c),d.target=y,d.relatedTarget=b,g=null,jf(c)===u&&(v=new v(m,S+"enter",p,t,c),v.target=b,v.relatedTarget=y,g=v),y=g,h&&p)t:{for(v=h,m=p,S=0,b=v;b;b=oh(b))S++;for(b=0,g=m;g;g=oh(g))b++;for(;0<S-b;)v=oh(v),S--;for(;0<b-S;)m=oh(m),b--;for(;S--;){if(v===m||m!==null&&v===m.alternate)break t;v=oh(v),m=oh(m)}v=null}else v=null;h!==null&&Wk(f,d,h,v,!1),p!==null&&y!==null&&Wk(f,y,p,v,!0)}}e:{if(d=u?ep(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=Zne;else if(Lk(d))if(V$)w=tre;else{w=Qne;var x=Jne}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=ere);if(w&&(w=w(n,u))){$$(f,w,t,c);break e}x&&x(n,d,u),n==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&zA(d,"number",d.value)}switch(x=u?ep(u):window,n){case"focusin":(Lk(x)||x.contentEditable==="true")&&(Jh=x,ZA=u,cv=null);break;case"focusout":cv=ZA=Jh=null;break;case"mousedown":JA=!0;break;case"contextmenu":case"mouseup":case"dragend":JA=!1,$k(f,t,c);break;case"selectionchange":if(ire)break;case"keydown":case"keyup":$k(f,t,c)}var M;if(RN)e:{switch(n){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Zh?z$(n,t)&&(A="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(A="onCompositionStart");A&&(B$&&t.locale!=="ko"&&(Zh||A!=="onCompositionStart"?A==="onCompositionEnd"&&Zh&&(M=F$()):(hc=c,DN="value"in hc?hc.value:hc.textContent,Zh=!0)),x=Ow(u,A),0<x.length&&(A=new Rk(A,n,null,t,c),f.push({event:A,listeners:x}),M?A.data=M:(M=U$(t),M!==null&&(A.data=M)))),(M=jne?qne(n,t):Xne(n,t))&&(u=Ow(u,"onBeforeInput"),0<u.length&&(c=new Rk("onBeforeInput","beforeinput",null,t,c),f.push({event:c,listeners:u}),c.data=M))}J$(f,e)})}function Bv(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ow(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Pv(n,t),s!=null&&r.unshift(Bv(n,s,i)),s=Pv(n,e),s!=null&&r.push(Bv(n,s,i))),n=n.return}return r}function oh(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Wk(n,e,t,r,i){for(var s=e._reactName,a=[];t!==null&&t!==r;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Pv(t,s),l!=null&&a.unshift(Bv(t,l,o))):i||(l=Pv(t,s),l!=null&&a.push(Bv(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var lre=/\r\n?/g,ure=/\u0000|\uFFFD/g;function Gk(n){return(typeof n=="string"?n:""+n).replace(lre,`
`).replace(ure,"")}function F1(n,e,t){if(e=Gk(e),Gk(n)!==e&&t)throw Error(ut(425))}function Iw(){}var QA=null,eT=null;function tT(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nT=typeof setTimeout=="function"?setTimeout:void 0,cre=typeof clearTimeout=="function"?clearTimeout:void 0,jk=typeof Promise=="function"?Promise:void 0,fre=typeof queueMicrotask=="function"?queueMicrotask:typeof jk<"u"?function(n){return jk.resolve(null).then(n).catch(dre)}:nT;function dre(n){setTimeout(function(){throw n})}function E2(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Iv(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Iv(e)}function Cc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function qk(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var pm=Math.random().toString(36).slice(2),sl="__reactFiber$"+pm,zv="__reactProps$"+pm,vu="__reactContainer$"+pm,rT="__reactEvents$"+pm,hre="__reactListeners$"+pm,pre="__reactHandles$"+pm;function jf(n){var e=n[sl];if(e)return e;for(var t=n.parentNode;t;){if(e=t[vu]||t[sl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=qk(n);n!==null;){if(t=n[sl])return t;n=qk(n)}return e}n=t,t=n.parentNode}return null}function J0(n){return n=n[sl]||n[vu],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ep(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ut(33))}function S_(n){return n[zv]||null}var iT=[],tp=-1;function tf(n){return{current:n}}function lr(n){0>tp||(n.current=iT[tp],iT[tp]=null,tp--)}function rr(n,e){tp++,iT[tp]=n.current,n.current=e}var zc={},ns=tf(zc),js=tf(!1),md=zc;function zp(n,e){var t=n.type.contextTypes;if(!t)return zc;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function qs(n){return n=n.childContextTypes,n!=null}function kw(){lr(js),lr(ns)}function Xk(n,e,t){if(ns.current!==zc)throw Error(ut(168));rr(ns,e),rr(js,t)}function eV(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ut(108,Jte(n)||"Unknown",i));return _r({},t,r)}function Lw(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||zc,md=ns.current,rr(ns,n),rr(js,js.current),!0}function Yk(n,e,t){var r=n.stateNode;if(!r)throw Error(ut(169));t?(n=eV(n,e,md),r.__reactInternalMemoizedMergedChildContext=n,lr(js),lr(ns),rr(ns,n)):lr(js),rr(js,t)}var Kl=null,__=!1,M2=!1;function tV(n){Kl===null?Kl=[n]:Kl.push(n)}function mre(n){__=!0,tV(n)}function nf(){if(!M2&&Kl!==null){M2=!0;var n=0,e=Vn;try{var t=Kl;for(Vn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Kl=null,__=!1}catch(i){throw Kl!==null&&(Kl=Kl.slice(n+1)),C$(MN,nf),i}finally{Vn=e,M2=!1}}return null}var np=[],rp=0,Fw=null,Bw=0,$a=[],Va=0,gd=null,tu=1,nu="";function Of(n,e){np[rp++]=Bw,np[rp++]=Fw,Fw=n,Bw=e}function nV(n,e,t){$a[Va++]=tu,$a[Va++]=nu,$a[Va++]=gd,gd=n;var r=tu;n=nu;var i=32-_o(r)-1;r&=~(1<<i),t+=1;var s=32-_o(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,tu=1<<32-_o(e)+i|t<<i|r,nu=s+n}else tu=1<<s|t<<i|r,nu=n}function IN(n){n.return!==null&&(Of(n,1),nV(n,1,0))}function kN(n){for(;n===Fw;)Fw=np[--rp],np[rp]=null,Bw=np[--rp],np[rp]=null;for(;n===gd;)gd=$a[--Va],$a[Va]=null,nu=$a[--Va],$a[Va]=null,tu=$a[--Va],$a[Va]=null}var ya=null,ga=null,dr=!1,xo=null;function rV(n,e){var t=ja(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Kk(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ya=n,ga=Cc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ya=n,ga=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=gd!==null?{id:tu,overflow:nu}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ja(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ya=n,ga=null,!0):!1;default:return!1}}function sT(n){return(n.mode&1)!==0&&(n.flags&128)===0}function aT(n){if(dr){var e=ga;if(e){var t=e;if(!Kk(n,e)){if(sT(n))throw Error(ut(418));e=Cc(t.nextSibling);var r=ya;e&&Kk(n,e)?rV(r,t):(n.flags=n.flags&-4097|2,dr=!1,ya=n)}}else{if(sT(n))throw Error(ut(418));n.flags=n.flags&-4097|2,dr=!1,ya=n}}}function Zk(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ya=n}function B1(n){if(n!==ya)return!1;if(!dr)return Zk(n),dr=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!tT(n.type,n.memoizedProps)),e&&(e=ga)){if(sT(n))throw iV(),Error(ut(418));for(;e;)rV(n,e),e=Cc(e.nextSibling)}if(Zk(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ut(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ga=Cc(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ga=null}}else ga=ya?Cc(n.stateNode.nextSibling):null;return!0}function iV(){for(var n=ga;n;)n=Cc(n.nextSibling)}function Up(){ga=ya=null,dr=!1}function LN(n){xo===null?xo=[n]:xo.push(n)}var gre=Ru.ReactCurrentBatchConfig;function go(n,e){if(n&&n.defaultProps){e=_r({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var zw=tf(null),Uw=null,ip=null,FN=null;function BN(){FN=ip=Uw=null}function zN(n){var e=zw.current;lr(zw),n._currentValue=e}function oT(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Sp(n,e){Uw=n,FN=ip=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Vs=!0),n.firstContext=null)}function Qa(n){var e=n._currentValue;if(FN!==n)if(n={context:n,memoizedValue:e,next:null},ip===null){if(Uw===null)throw Error(ut(308));ip=n,Uw.dependencies={lanes:0,firstContext:n}}else ip=ip.next=n;return e}var qf=null;function UN(n){qf===null?qf=[n]:qf.push(n)}function sV(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,UN(e)):(t.next=i.next,i.next=t),e.interleaved=t,yu(n,r)}function yu(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ic=!1;function $N(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aV(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function lu(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ac(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,An&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,yu(n,t)}return i=r.interleaved,i===null?(e.next=e,UN(r)):(e.next=i.next,i.next=e),r.interleaved=e,yu(n,t)}function Hb(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,CN(n,t)}}function Jk(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function $w(n,e,t,r){var i=n.updateQueue;ic=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=n.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;a=0,c=u=l=null,o=s;do{var d=o.lane,h=o.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=n,v=o;switch(d=e,h=t,v.tag){case 1:if(p=v.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=_r({},f,d);break e;case 2:ic=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[o]:d.push(o))}else h={eventTime:h,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,a|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;d=o,o=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);yd|=a,n.lanes=a,n.memoizedState=f}}function Qk(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(ut(191,i));i.call(r)}}}var oV=new s$.Component().refs;function lT(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:_r({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var E_={isMounted:function(n){return(n=n._reactInternals)?Id(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=bs(),i=Dc(n),s=lu(r,i);s.payload=e,t!=null&&(s.callback=t),e=Ac(n,s,i),e!==null&&(Eo(e,n,i,r),Hb(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=bs(),i=Dc(n),s=lu(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ac(n,s,i),e!==null&&(Eo(e,n,i,r),Hb(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=bs(),r=Dc(n),i=lu(t,r);i.tag=2,e!=null&&(i.callback=e),e=Ac(n,i,r),e!==null&&(Eo(e,n,r,t),Hb(e,n,r))}};function eL(n,e,t,r,i,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Lv(t,r)||!Lv(i,s):!0}function lV(n,e,t){var r=!1,i=zc,s=e.contextType;return typeof s=="object"&&s!==null?s=Qa(s):(i=qs(e)?md:ns.current,r=e.contextTypes,s=(r=r!=null)?zp(n,i):zc),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=E_,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function tL(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&E_.enqueueReplaceState(e,e.state,null)}function uT(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=oV,$N(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Qa(s):(s=qs(e)?md:ns.current,i.context=zp(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(lT(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&E_.enqueueReplaceState(i,i.state,null),$w(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function pg(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ut(309));var r=t.stateNode}if(!r)throw Error(ut(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;o===oV&&(o=i.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(ut(284));if(!t._owner)throw Error(ut(290,n))}return n}function z1(n,e){throw n=Object.prototype.toString.call(e),Error(ut(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function nL(n){var e=n._init;return e(n._payload)}function uV(n){function e(m,S){if(n){var b=m.deletions;b===null?(m.deletions=[S],m.flags|=16):b.push(S)}}function t(m,S){if(!n)return null;for(;S!==null;)e(m,S),S=S.sibling;return null}function r(m,S){for(m=new Map;S!==null;)S.key!==null?m.set(S.key,S):m.set(S.index,S),S=S.sibling;return m}function i(m,S){return m=Nc(m,S),m.index=0,m.sibling=null,m}function s(m,S,b){return m.index=b,n?(b=m.alternate,b!==null?(b=b.index,b<S?(m.flags|=2,S):b):(m.flags|=2,S)):(m.flags|=1048576,S)}function a(m){return n&&m.alternate===null&&(m.flags|=2),m}function o(m,S,b,g){return S===null||S.tag!==6?(S=R2(b,m.mode,g),S.return=m,S):(S=i(S,b),S.return=m,S)}function l(m,S,b,g){var w=b.type;return w===Kh?c(m,S,b.props.children,g,b.key):S!==null&&(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===rc&&nL(w)===S.type)?(g=i(S,b.props),g.ref=pg(m,S,b),g.return=m,g):(g=Yb(b.type,b.key,b.props,null,m.mode,g),g.ref=pg(m,S,b),g.return=m,g)}function u(m,S,b,g){return S===null||S.tag!==4||S.stateNode.containerInfo!==b.containerInfo||S.stateNode.implementation!==b.implementation?(S=O2(b,m.mode,g),S.return=m,S):(S=i(S,b.children||[]),S.return=m,S)}function c(m,S,b,g,w){return S===null||S.tag!==7?(S=id(b,m.mode,g,w),S.return=m,S):(S=i(S,b),S.return=m,S)}function f(m,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return S=R2(""+S,m.mode,b),S.return=m,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case T1:return b=Yb(S.type,S.key,S.props,null,m.mode,b),b.ref=pg(m,null,S),b.return=m,b;case Yh:return S=O2(S,m.mode,b),S.return=m,S;case rc:var g=S._init;return f(m,g(S._payload),b)}if(Gg(S)||ug(S))return S=id(S,m.mode,b,null),S.return=m,S;z1(m,S)}return null}function d(m,S,b,g){var w=S!==null?S.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:o(m,S,""+b,g);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case T1:return b.key===w?l(m,S,b,g):null;case Yh:return b.key===w?u(m,S,b,g):null;case rc:return w=b._init,d(m,S,w(b._payload),g)}if(Gg(b)||ug(b))return w!==null?null:c(m,S,b,g,null);z1(m,b)}return null}function h(m,S,b,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return m=m.get(b)||null,o(S,m,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case T1:return m=m.get(g.key===null?b:g.key)||null,l(S,m,g,w);case Yh:return m=m.get(g.key===null?b:g.key)||null,u(S,m,g,w);case rc:var x=g._init;return h(m,S,b,x(g._payload),w)}if(Gg(g)||ug(g))return m=m.get(b)||null,c(S,m,g,w,null);z1(S,g)}return null}function p(m,S,b,g){for(var w=null,x=null,M=S,A=S=0,N=null;M!==null&&A<b.length;A++){M.index>A?(N=M,M=null):N=M.sibling;var C=d(m,M,b[A],g);if(C===null){M===null&&(M=N);break}n&&M&&C.alternate===null&&e(m,M),S=s(C,S,A),x===null?w=C:x.sibling=C,x=C,M=N}if(A===b.length)return t(m,M),dr&&Of(m,A),w;if(M===null){for(;A<b.length;A++)M=f(m,b[A],g),M!==null&&(S=s(M,S,A),x===null?w=M:x.sibling=M,x=M);return dr&&Of(m,A),w}for(M=r(m,M);A<b.length;A++)N=h(M,m,A,b[A],g),N!==null&&(n&&N.alternate!==null&&M.delete(N.key===null?A:N.key),S=s(N,S,A),x===null?w=N:x.sibling=N,x=N);return n&&M.forEach(function(T){return e(m,T)}),dr&&Of(m,A),w}function v(m,S,b,g){var w=ug(b);if(typeof w!="function")throw Error(ut(150));if(b=w.call(b),b==null)throw Error(ut(151));for(var x=w=null,M=S,A=S=0,N=null,C=b.next();M!==null&&!C.done;A++,C=b.next()){M.index>A?(N=M,M=null):N=M.sibling;var T=d(m,M,C.value,g);if(T===null){M===null&&(M=N);break}n&&M&&T.alternate===null&&e(m,M),S=s(T,S,A),x===null?w=T:x.sibling=T,x=T,M=N}if(C.done)return t(m,M),dr&&Of(m,A),w;if(M===null){for(;!C.done;A++,C=b.next())C=f(m,C.value,g),C!==null&&(S=s(C,S,A),x===null?w=C:x.sibling=C,x=C);return dr&&Of(m,A),w}for(M=r(m,M);!C.done;A++,C=b.next())C=h(M,m,A,C.value,g),C!==null&&(n&&C.alternate!==null&&M.delete(C.key===null?A:C.key),S=s(C,S,A),x===null?w=C:x.sibling=C,x=C);return n&&M.forEach(function(R){return e(m,R)}),dr&&Of(m,A),w}function y(m,S,b,g){if(typeof b=="object"&&b!==null&&b.type===Kh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case T1:e:{for(var w=b.key,x=S;x!==null;){if(x.key===w){if(w=b.type,w===Kh){if(x.tag===7){t(m,x.sibling),S=i(x,b.props.children),S.return=m,m=S;break e}}else if(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===rc&&nL(w)===x.type){t(m,x.sibling),S=i(x,b.props),S.ref=pg(m,x,b),S.return=m,m=S;break e}t(m,x);break}else e(m,x);x=x.sibling}b.type===Kh?(S=id(b.props.children,m.mode,g,b.key),S.return=m,m=S):(g=Yb(b.type,b.key,b.props,null,m.mode,g),g.ref=pg(m,S,b),g.return=m,m=g)}return a(m);case Yh:e:{for(x=b.key;S!==null;){if(S.key===x)if(S.tag===4&&S.stateNode.containerInfo===b.containerInfo&&S.stateNode.implementation===b.implementation){t(m,S.sibling),S=i(S,b.children||[]),S.return=m,m=S;break e}else{t(m,S);break}else e(m,S);S=S.sibling}S=O2(b,m.mode,g),S.return=m,m=S}return a(m);case rc:return x=b._init,y(m,S,x(b._payload),g)}if(Gg(b))return p(m,S,b,g);if(ug(b))return v(m,S,b,g);z1(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,S!==null&&S.tag===6?(t(m,S.sibling),S=i(S,b),S.return=m,m=S):(t(m,S),S=R2(b,m.mode,g),S.return=m,m=S),a(m)):t(m,S)}return y}var $p=uV(!0),cV=uV(!1),Q0={},ml=tf(Q0),Uv=tf(Q0),$v=tf(Q0);function Xf(n){if(n===Q0)throw Error(ut(174));return n}function VN(n,e){switch(rr($v,e),rr(Uv,n),rr(ml,Q0),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$A(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=$A(e,n)}lr(ml),rr(ml,e)}function Vp(){lr(ml),lr(Uv),lr($v)}function fV(n){Xf($v.current);var e=Xf(ml.current),t=$A(e,n.type);e!==t&&(rr(Uv,n),rr(ml,t))}function HN(n){Uv.current===n&&(lr(ml),lr(Uv))}var yr=tf(0);function Vw(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var C2=[];function WN(){for(var n=0;n<C2.length;n++)C2[n]._workInProgressVersionPrimary=null;C2.length=0}var Wb=Ru.ReactCurrentDispatcher,A2=Ru.ReactCurrentBatchConfig,vd=0,wr=null,Qr=null,mi=null,Hw=!1,fv=!1,Vv=0,vre=0;function Hi(){throw Error(ut(321))}function GN(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ao(n[t],e[t]))return!1;return!0}function jN(n,e,t,r,i,s){if(vd=s,wr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wb.current=n===null||n.memoizedState===null?wre:Sre,n=t(r,i),fv){s=0;do{if(fv=!1,Vv=0,25<=s)throw Error(ut(301));s+=1,mi=Qr=null,e.updateQueue=null,Wb.current=_re,n=t(r,i)}while(fv)}if(Wb.current=Ww,e=Qr!==null&&Qr.next!==null,vd=0,mi=Qr=wr=null,Hw=!1,e)throw Error(ut(300));return n}function qN(){var n=Vv!==0;return Vv=0,n}function tl(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?wr.memoizedState=mi=n:mi=mi.next=n,mi}function eo(){if(Qr===null){var n=wr.alternate;n=n!==null?n.memoizedState:null}else n=Qr.next;var e=mi===null?wr.memoizedState:mi.next;if(e!==null)mi=e,Qr=n;else{if(n===null)throw Error(ut(310));Qr=n,n={memoizedState:Qr.memoizedState,baseState:Qr.baseState,baseQueue:Qr.baseQueue,queue:Qr.queue,next:null},mi===null?wr.memoizedState=mi=n:mi=mi.next=n}return mi}function Hv(n,e){return typeof e=="function"?e(n):e}function T2(n){var e=eo(),t=e.queue;if(t===null)throw Error(ut(311));t.lastRenderedReducer=n;var r=Qr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((vd&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,a=r):l=l.next=f,wr.lanes|=c,yd|=c}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,Ao(r,e.memoizedState)||(Vs=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,wr.lanes|=s,yd|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function D2(n){var e=eo(),t=e.queue;if(t===null)throw Error(ut(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do s=n(s,a.action),a=a.next;while(a!==i);Ao(s,e.memoizedState)||(Vs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function dV(){}function hV(n,e){var t=wr,r=eo(),i=e(),s=!Ao(r.memoizedState,i);if(s&&(r.memoizedState=i,Vs=!0),r=r.queue,XN(gV.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||mi!==null&&mi.memoizedState.tag&1){if(t.flags|=2048,Wv(9,mV.bind(null,t,r,i,e),void 0,null),vi===null)throw Error(ut(349));vd&30||pV(t,e,i)}return i}function pV(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function mV(n,e,t,r){e.value=t,e.getSnapshot=r,vV(e)&&yV(n)}function gV(n,e,t){return t(function(){vV(e)&&yV(n)})}function vV(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ao(n,t)}catch{return!0}}function yV(n){var e=yu(n,1);e!==null&&Eo(e,n,1,-1)}function rL(n){var e=tl();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hv,lastRenderedState:n},e.queue=n,n=n.dispatch=bre.bind(null,wr,n),[e.memoizedState,n]}function Wv(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function xV(){return eo().memoizedState}function Gb(n,e,t,r){var i=tl();wr.flags|=n,i.memoizedState=Wv(1|e,t,void 0,r===void 0?null:r)}function M_(n,e,t,r){var i=eo();r=r===void 0?null:r;var s=void 0;if(Qr!==null){var a=Qr.memoizedState;if(s=a.destroy,r!==null&&GN(r,a.deps)){i.memoizedState=Wv(e,t,s,r);return}}wr.flags|=n,i.memoizedState=Wv(1|e,t,s,r)}function iL(n,e){return Gb(8390656,8,n,e)}function XN(n,e){return M_(2048,8,n,e)}function bV(n,e){return M_(4,2,n,e)}function wV(n,e){return M_(4,4,n,e)}function SV(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function _V(n,e,t){return t=t!=null?t.concat([n]):null,M_(4,4,SV.bind(null,e,n),t)}function YN(){}function EV(n,e){var t=eo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&GN(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function MV(n,e){var t=eo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&GN(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function CV(n,e,t){return vd&21?(Ao(t,e)||(t=D$(),wr.lanes|=t,yd|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Vs=!0),n.memoizedState=t)}function yre(n,e){var t=Vn;Vn=t!==0&&4>t?t:4,n(!0);var r=A2.transition;A2.transition={};try{n(!1),e()}finally{Vn=t,A2.transition=r}}function AV(){return eo().memoizedState}function xre(n,e,t){var r=Dc(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},TV(n))DV(e,t);else if(t=sV(n,e,t,r),t!==null){var i=bs();Eo(t,n,r,i),NV(t,e,r)}}function bre(n,e,t){var r=Dc(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(TV(n))DV(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(i.hasEagerState=!0,i.eagerState=o,Ao(o,a)){var l=e.interleaved;l===null?(i.next=i,UN(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=sV(n,e,i,r),t!==null&&(i=bs(),Eo(t,n,r,i),NV(t,e,r))}}function TV(n){var e=n.alternate;return n===wr||e!==null&&e===wr}function DV(n,e){fv=Hw=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function NV(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,CN(n,t)}}var Ww={readContext:Qa,useCallback:Hi,useContext:Hi,useEffect:Hi,useImperativeHandle:Hi,useInsertionEffect:Hi,useLayoutEffect:Hi,useMemo:Hi,useReducer:Hi,useRef:Hi,useState:Hi,useDebugValue:Hi,useDeferredValue:Hi,useTransition:Hi,useMutableSource:Hi,useSyncExternalStore:Hi,useId:Hi,unstable_isNewReconciler:!1},wre={readContext:Qa,useCallback:function(n,e){return tl().memoizedState=[n,e===void 0?null:e],n},useContext:Qa,useEffect:iL,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Gb(4194308,4,SV.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Gb(4194308,4,n,e)},useInsertionEffect:function(n,e){return Gb(4,2,n,e)},useMemo:function(n,e){var t=tl();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=tl();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=xre.bind(null,wr,n),[r.memoizedState,n]},useRef:function(n){var e=tl();return n={current:n},e.memoizedState=n},useState:rL,useDebugValue:YN,useDeferredValue:function(n){return tl().memoizedState=n},useTransition:function(){var n=rL(!1),e=n[0];return n=yre.bind(null,n[1]),tl().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=wr,i=tl();if(dr){if(t===void 0)throw Error(ut(407));t=t()}else{if(t=e(),vi===null)throw Error(ut(349));vd&30||pV(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,iL(gV.bind(null,r,s,n),[n]),r.flags|=2048,Wv(9,mV.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=tl(),e=vi.identifierPrefix;if(dr){var t=nu,r=tu;t=(r&~(1<<32-_o(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Vv++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=vre++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Sre={readContext:Qa,useCallback:EV,useContext:Qa,useEffect:XN,useImperativeHandle:_V,useInsertionEffect:bV,useLayoutEffect:wV,useMemo:MV,useReducer:T2,useRef:xV,useState:function(){return T2(Hv)},useDebugValue:YN,useDeferredValue:function(n){var e=eo();return CV(e,Qr.memoizedState,n)},useTransition:function(){var n=T2(Hv)[0],e=eo().memoizedState;return[n,e]},useMutableSource:dV,useSyncExternalStore:hV,useId:AV,unstable_isNewReconciler:!1},_re={readContext:Qa,useCallback:EV,useContext:Qa,useEffect:XN,useImperativeHandle:_V,useInsertionEffect:bV,useLayoutEffect:wV,useMemo:MV,useReducer:D2,useRef:xV,useState:function(){return D2(Hv)},useDebugValue:YN,useDeferredValue:function(n){var e=eo();return Qr===null?e.memoizedState=n:CV(e,Qr.memoizedState,n)},useTransition:function(){var n=D2(Hv)[0],e=eo().memoizedState;return[n,e]},useMutableSource:dV,useSyncExternalStore:hV,useId:AV,unstable_isNewReconciler:!1};function Hp(n,e){try{var t="",r=e;do t+=Zte(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function N2(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function cT(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Ere=typeof WeakMap=="function"?WeakMap:Map;function PV(n,e,t){t=lu(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){jw||(jw=!0,bT=r),cT(n,e)},t}function RV(n,e,t){t=lu(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){cT(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){cT(n,e),typeof r!="function"&&(Tc===null?Tc=new Set([this]):Tc.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function sL(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Ere;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Bre.bind(null,n,e,t),e.then(n,n))}function aL(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function oL(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=lu(-1,1),e.tag=2,Ac(t,e,1))),t.lanes|=1),n)}var Mre=Ru.ReactCurrentOwner,Vs=!1;function hs(n,e,t,r){e.child=n===null?cV(e,null,t,r):$p(e,n.child,t,r)}function lL(n,e,t,r,i){t=t.render;var s=e.ref;return Sp(e,i),r=jN(n,e,t,r,s,i),t=qN(),n!==null&&!Vs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,xu(n,e,i)):(dr&&t&&IN(e),e.flags|=1,hs(n,e,r,i),e.child)}function uL(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!rP(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,OV(n,e,s,r,i)):(n=Yb(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:Lv,t(a,r)&&n.ref===e.ref)return xu(n,e,i)}return e.flags|=1,n=Nc(s,r),n.ref=e.ref,n.return=e,e.child=n}function OV(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Lv(s,r)&&n.ref===e.ref)if(Vs=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Vs=!0);else return e.lanes=n.lanes,xu(n,e,i)}return fT(n,e,t,r,i)}function IV(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rr(ap,oa),oa|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,rr(ap,oa),oa|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,rr(ap,oa),oa|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,rr(ap,oa),oa|=r;return hs(n,e,i,t),e.child}function kV(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function fT(n,e,t,r,i){var s=qs(t)?md:ns.current;return s=zp(e,s),Sp(e,i),t=jN(n,e,t,r,s,i),r=qN(),n!==null&&!Vs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,xu(n,e,i)):(dr&&r&&IN(e),e.flags|=1,hs(n,e,t,i),e.child)}function cL(n,e,t,r,i){if(qs(t)){var s=!0;Lw(e)}else s=!1;if(Sp(e,i),e.stateNode===null)jb(n,e),lV(e,t,r),uT(e,t,r,i),r=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=Qa(u):(u=qs(t)?md:ns.current,u=zp(e,u));var c=t.getDerivedStateFromProps,f=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&tL(e,a,r,u),ic=!1;var d=e.memoizedState;a.state=d,$w(e,r,a,i),l=e.memoizedState,o!==r||d!==l||js.current||ic?(typeof c=="function"&&(lT(e,t,c,r),l=e.memoizedState),(o=ic||eL(e,t,o,r,d,l,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,aV(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:go(e.type,o),a.props=u,f=e.pendingProps,d=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Qa(l):(l=qs(t)?md:ns.current,l=zp(e,l));var h=t.getDerivedStateFromProps;(c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||d!==l)&&tL(e,a,r,l),ic=!1,d=e.memoizedState,a.state=d,$w(e,r,a,i);var p=e.memoizedState;o!==f||d!==p||js.current||ic?(typeof h=="function"&&(lT(e,t,h,r),p=e.memoizedState),(u=ic||eL(e,t,u,r,d,p,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return dT(n,e,t,r,s,i)}function dT(n,e,t,r,i,s){kV(n,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Yk(e,t,!1),xu(n,e,s);r=e.stateNode,Mre.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&a?(e.child=$p(e,n.child,null,s),e.child=$p(e,null,o,s)):hs(n,e,o,s),e.memoizedState=r.state,i&&Yk(e,t,!0),e.child}function LV(n){var e=n.stateNode;e.pendingContext?Xk(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Xk(n,e.context,!1),VN(n,e.containerInfo)}function fL(n,e,t,r,i){return Up(),LN(i),e.flags|=256,hs(n,e,t,r),e.child}var hT={dehydrated:null,treeContext:null,retryLane:0};function pT(n){return{baseLanes:n,cachePool:null,transitions:null}}function FV(n,e,t){var r=e.pendingProps,i=yr.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),rr(yr,i&1),n===null)return aT(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,n=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=T_(a,r,0,null),n=id(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=pT(t),e.memoizedState=hT,n):KN(e,a));if(i=n.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Cre(n,e,a,r,o,i,t);if(s){s=r.fallback,a=e.mode,i=n.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Nc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Nc(o,s):(s=id(s,a,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=n.child.memoizedState,a=a===null?pT(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~t,e.memoizedState=hT,r}return s=n.child,n=s.sibling,r=Nc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function KN(n,e){return e=T_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function U1(n,e,t,r){return r!==null&&LN(r),$p(e,n.child,null,t),n=KN(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Cre(n,e,t,r,i,s,a){if(t)return e.flags&256?(e.flags&=-257,r=N2(Error(ut(422))),U1(n,e,a,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=T_({mode:"visible",children:r.children},i,0,null),s=id(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$p(e,n.child,null,a),e.child.memoizedState=pT(a),e.memoizedState=hT,s);if(!(e.mode&1))return U1(n,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(ut(419)),r=N2(s,r,void 0),U1(n,e,a,r)}if(o=(a&n.childLanes)!==0,Vs||o){if(r=vi,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,yu(n,i),Eo(r,n,i,-1))}return nP(),r=N2(Error(ut(421))),U1(n,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=zre.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ga=Cc(i.nextSibling),ya=e,dr=!0,xo=null,n!==null&&($a[Va++]=tu,$a[Va++]=nu,$a[Va++]=gd,tu=n.id,nu=n.overflow,gd=e),e=KN(e,r.children),e.flags|=4096,e)}function dL(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),oT(n.return,e,t)}function P2(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function BV(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(hs(n,e,r.children,t),r=yr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&dL(n,t,e);else if(n.tag===19)dL(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(rr(yr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Vw(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),P2(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Vw(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}P2(e,!0,t,null,s);break;case"together":P2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jb(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function xu(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),yd|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ut(153));if(e.child!==null){for(n=e.child,t=Nc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Nc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Are(n,e,t){switch(e.tag){case 3:LV(e),Up();break;case 5:fV(e);break;case 1:qs(e.type)&&Lw(e);break;case 4:VN(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;rr(zw,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rr(yr,yr.current&1),e.flags|=128,null):t&e.child.childLanes?FV(n,e,t):(rr(yr,yr.current&1),n=xu(n,e,t),n!==null?n.sibling:null);rr(yr,yr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return BV(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rr(yr,yr.current),r)break;return null;case 22:case 23:return e.lanes=0,IV(n,e,t)}return xu(n,e,t)}var zV,mT,UV,$V;zV=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};mT=function(){};UV=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Xf(ml.current);var s=null;switch(t){case"input":i=FA(n,i),r=FA(n,r),s=[];break;case"select":i=_r({},i,{value:void 0}),r=_r({},r,{value:void 0}),s=[];break;case"textarea":i=UA(n,i),r=UA(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Iw)}VA(t,r);var a;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Dv.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Dv.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&sr("scroll",n),s||o===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};$V=function(n,e,t,r){t!==r&&(e.flags|=4)};function mg(n,e){if(!dr)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Wi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Tre(n,e,t){var r=e.pendingProps;switch(kN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wi(e),null;case 1:return qs(e.type)&&kw(),Wi(e),null;case 3:return r=e.stateNode,Vp(),lr(js),lr(ns),WN(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(B1(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xo!==null&&(_T(xo),xo=null))),mT(n,e),Wi(e),null;case 5:HN(e);var i=Xf($v.current);if(t=e.type,n!==null&&e.stateNode!=null)UV(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ut(166));return Wi(e),null}if(n=Xf(ml.current),B1(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[sl]=e,r[zv]=s,n=(e.mode&1)!==0,t){case"dialog":sr("cancel",r),sr("close",r);break;case"iframe":case"object":case"embed":sr("load",r);break;case"video":case"audio":for(i=0;i<qg.length;i++)sr(qg[i],r);break;case"source":sr("error",r);break;case"img":case"image":case"link":sr("error",r),sr("load",r);break;case"details":sr("toggle",r);break;case"input":wk(r,s),sr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},sr("invalid",r);break;case"textarea":_k(r,s),sr("invalid",r)}VA(t,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&F1(r.textContent,o,n),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&F1(r.textContent,o,n),i=["children",""+o]):Dv.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&sr("scroll",r)}switch(t){case"input":D1(r),Sk(r,s,!0);break;case"textarea":D1(r),Ek(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Iw)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=p$(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=a.createElement(t,{is:r.is}):(n=a.createElement(t),t==="select"&&(a=n,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):n=a.createElementNS(n,t),n[sl]=e,n[zv]=r,zV(n,e,!1,!1),e.stateNode=n;e:{switch(a=HA(t,r),t){case"dialog":sr("cancel",n),sr("close",n),i=r;break;case"iframe":case"object":case"embed":sr("load",n),i=r;break;case"video":case"audio":for(i=0;i<qg.length;i++)sr(qg[i],n);i=r;break;case"source":sr("error",n),i=r;break;case"img":case"image":case"link":sr("error",n),sr("load",n),i=r;break;case"details":sr("toggle",n),i=r;break;case"input":wk(n,r),i=FA(n,r),sr("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=_r({},r,{value:void 0}),sr("invalid",n);break;case"textarea":_k(n,r),i=UA(n,r),sr("invalid",n);break;default:i=r}VA(t,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?v$(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&m$(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Nv(n,l):typeof l=="number"&&Nv(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Dv.hasOwnProperty(s)?l!=null&&s==="onScroll"&&sr("scroll",n):l!=null&&bN(n,s,l,a))}switch(t){case"input":D1(n),Sk(n,r,!1);break;case"textarea":D1(n),Ek(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Bc(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?yp(n,!!r.multiple,s,!1):r.defaultValue!=null&&yp(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Iw)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wi(e),null;case 6:if(n&&e.stateNode!=null)$V(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ut(166));if(t=Xf($v.current),Xf(ml.current),B1(e)){if(r=e.stateNode,t=e.memoizedProps,r[sl]=e,(s=r.nodeValue!==t)&&(n=ya,n!==null))switch(n.tag){case 3:F1(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&F1(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[sl]=e,e.stateNode=r}return Wi(e),null;case 13:if(lr(yr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(dr&&ga!==null&&e.mode&1&&!(e.flags&128))iV(),Up(),e.flags|=98560,s=!1;else if(s=B1(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(ut(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ut(317));s[sl]=e}else Up(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wi(e),s=!1}else xo!==null&&(_T(xo),xo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||yr.current&1?ri===0&&(ri=3):nP())),e.updateQueue!==null&&(e.flags|=4),Wi(e),null);case 4:return Vp(),mT(n,e),n===null&&Fv(e.stateNode.containerInfo),Wi(e),null;case 10:return zN(e.type._context),Wi(e),null;case 17:return qs(e.type)&&kw(),Wi(e),null;case 19:if(lr(yr),s=e.memoizedState,s===null)return Wi(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)mg(s,!1);else{if(ri!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=Vw(n),a!==null){for(e.flags|=128,mg(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return rr(yr,yr.current&1|2),e.child}n=n.sibling}s.tail!==null&&$r()>Wp&&(e.flags|=128,r=!0,mg(s,!1),e.lanes=4194304)}else{if(!r)if(n=Vw(a),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),mg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!dr)return Wi(e),null}else 2*$r()-s.renderingStartTime>Wp&&t!==1073741824&&(e.flags|=128,r=!0,mg(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$r(),e.sibling=null,t=yr.current,rr(yr,r?t&1|2:t&1),e):(Wi(e),null);case 22:case 23:return tP(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?oa&1073741824&&(Wi(e),e.subtreeFlags&6&&(e.flags|=8192)):Wi(e),null;case 24:return null;case 25:return null}throw Error(ut(156,e.tag))}function Dre(n,e){switch(kN(e),e.tag){case 1:return qs(e.type)&&kw(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Vp(),lr(js),lr(ns),WN(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return HN(e),null;case 13:if(lr(yr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ut(340));Up()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return lr(yr),null;case 4:return Vp(),null;case 10:return zN(e.type._context),null;case 22:case 23:return tP(),null;case 24:return null;default:return null}}var $1=!1,Ki=!1,Nre=typeof WeakSet=="function"?WeakSet:Set,Et=null;function sp(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Dr(n,e,r)}else t.current=null}function gT(n,e,t){try{t()}catch(r){Dr(n,e,r)}}var hL=!1;function Pre(n,e){if(QA=Pw,n=G$(),ON(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,c=0,f=n,d=null;t:for(;;){for(var h;f!==t||i!==0&&f.nodeType!==3||(o=a+i),f!==s||r!==0&&f.nodeType!==3||(l=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===n)break t;if(d===t&&++u===i&&(o=a),d===s&&++c===r&&(l=a),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(eT={focusedElem:n,selectionRange:t},Pw=!1,Et=e;Et!==null;)if(e=Et,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Et=n;else for(;Et!==null;){e=Et;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,y=p.memoizedState,m=e.stateNode,S=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:go(e.type,v),y);m.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(g){Dr(e,e.return,g)}if(n=e.sibling,n!==null){n.return=e.return,Et=n;break}Et=e.return}return p=hL,hL=!1,p}function dv(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&gT(e,t,s)}i=i.next}while(i!==r)}}function C_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function vT(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function VV(n){var e=n.alternate;e!==null&&(n.alternate=null,VV(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[sl],delete e[zv],delete e[rT],delete e[hre],delete e[pre])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function HV(n){return n.tag===5||n.tag===3||n.tag===4}function pL(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||HV(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function yT(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Iw));else if(r!==4&&(n=n.child,n!==null))for(yT(n,e,t),n=n.sibling;n!==null;)yT(n,e,t),n=n.sibling}function xT(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(xT(n,e,t),n=n.sibling;n!==null;)xT(n,e,t),n=n.sibling}var Ei=null,yo=!1;function ju(n,e,t){for(t=t.child;t!==null;)WV(n,e,t),t=t.sibling}function WV(n,e,t){if(pl&&typeof pl.onCommitFiberUnmount=="function")try{pl.onCommitFiberUnmount(y_,t)}catch{}switch(t.tag){case 5:Ki||sp(t,e);case 6:var r=Ei,i=yo;Ei=null,ju(n,e,t),Ei=r,yo=i,Ei!==null&&(yo?(n=Ei,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ei.removeChild(t.stateNode));break;case 18:Ei!==null&&(yo?(n=Ei,t=t.stateNode,n.nodeType===8?E2(n.parentNode,t):n.nodeType===1&&E2(n,t),Iv(n)):E2(Ei,t.stateNode));break;case 4:r=Ei,i=yo,Ei=t.stateNode.containerInfo,yo=!0,ju(n,e,t),Ei=r,yo=i;break;case 0:case 11:case 14:case 15:if(!Ki&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&gT(t,e,a),i=i.next}while(i!==r)}ju(n,e,t);break;case 1:if(!Ki&&(sp(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){Dr(t,e,o)}ju(n,e,t);break;case 21:ju(n,e,t);break;case 22:t.mode&1?(Ki=(r=Ki)||t.memoizedState!==null,ju(n,e,t),Ki=r):ju(n,e,t);break;default:ju(n,e,t)}}function mL(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Nre),e.forEach(function(r){var i=Ure.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function fo(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ei=o.stateNode,yo=!1;break e;case 3:Ei=o.stateNode.containerInfo,yo=!0;break e;case 4:Ei=o.stateNode.containerInfo,yo=!0;break e}o=o.return}if(Ei===null)throw Error(ut(160));WV(s,a,i),Ei=null,yo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Dr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GV(e,n),e=e.sibling}function GV(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(fo(e,n),Yo(n),r&4){try{dv(3,n,n.return),C_(3,n)}catch(v){Dr(n,n.return,v)}try{dv(5,n,n.return)}catch(v){Dr(n,n.return,v)}}break;case 1:fo(e,n),Yo(n),r&512&&t!==null&&sp(t,t.return);break;case 5:if(fo(e,n),Yo(n),r&512&&t!==null&&sp(t,t.return),n.flags&32){var i=n.stateNode;try{Nv(i,"")}catch(v){Dr(n,n.return,v)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,a=t!==null?t.memoizedProps:s,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&d$(i,s),HA(o,a);var u=HA(o,s);for(a=0;a<l.length;a+=2){var c=l[a],f=l[a+1];c==="style"?v$(i,f):c==="dangerouslySetInnerHTML"?m$(i,f):c==="children"?Nv(i,f):bN(i,c,f,u)}switch(o){case"input":BA(i,s);break;case"textarea":h$(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?yp(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?yp(i,!!s.multiple,s.defaultValue,!0):yp(i,!!s.multiple,s.multiple?[]:"",!1))}i[zv]=s}catch(v){Dr(n,n.return,v)}}break;case 6:if(fo(e,n),Yo(n),r&4){if(n.stateNode===null)throw Error(ut(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(v){Dr(n,n.return,v)}}break;case 3:if(fo(e,n),Yo(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Iv(e.containerInfo)}catch(v){Dr(n,n.return,v)}break;case 4:fo(e,n),Yo(n);break;case 13:fo(e,n),Yo(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(QN=$r())),r&4&&mL(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(Ki=(u=Ki)||c,fo(e,n),Ki=u):fo(e,n),Yo(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(Et=n,c=n.child;c!==null;){for(f=Et=c;Et!==null;){switch(d=Et,h=d.child,d.tag){case 0:case 11:case 14:case 15:dv(4,d,d.return);break;case 1:sp(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){Dr(r,t,v)}}break;case 5:sp(d,d.return);break;case 22:if(d.memoizedState!==null){vL(f);continue}}h!==null?(h.return=d,Et=h):vL(f)}c=c.sibling}e:for(c=null,f=n;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=g$("display",a))}catch(v){Dr(n,n.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Dr(n,n.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fo(e,n),Yo(n),r&4&&mL(n);break;case 21:break;default:fo(e,n),Yo(n)}}function Yo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(HV(t)){var r=t;break e}t=t.return}throw Error(ut(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Nv(i,""),r.flags&=-33);var s=pL(n);xT(n,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=pL(n);yT(n,o,a);break;default:throw Error(ut(161))}}catch(l){Dr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Rre(n,e,t){Et=n,jV(n)}function jV(n,e,t){for(var r=(n.mode&1)!==0;Et!==null;){var i=Et,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||$1;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Ki;o=$1;var u=Ki;if($1=a,(Ki=l)&&!u)for(Et=i;Et!==null;)a=Et,l=a.child,a.tag===22&&a.memoizedState!==null?yL(i):l!==null?(l.return=a,Et=l):yL(i);for(;s!==null;)Et=s,jV(s),s=s.sibling;Et=i,$1=o,Ki=u}gL(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Et=s):gL(n)}}function gL(n){for(;Et!==null;){var e=Et;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ki||C_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ki)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:go(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Qk(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Qk(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Iv(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ut(163))}Ki||e.flags&512&&vT(e)}catch(d){Dr(e,e.return,d)}}if(e===n){Et=null;break}if(t=e.sibling,t!==null){t.return=e.return,Et=t;break}Et=e.return}}function vL(n){for(;Et!==null;){var e=Et;if(e===n){Et=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Et=t;break}Et=e.return}}function yL(n){for(;Et!==null;){var e=Et;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{C_(4,e)}catch(l){Dr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Dr(e,i,l)}}var s=e.return;try{vT(e)}catch(l){Dr(e,s,l)}break;case 5:var a=e.return;try{vT(e)}catch(l){Dr(e,a,l)}}}catch(l){Dr(e,e.return,l)}if(e===n){Et=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Et=o;break}Et=e.return}}var Ore=Math.ceil,Gw=Ru.ReactCurrentDispatcher,ZN=Ru.ReactCurrentOwner,Ya=Ru.ReactCurrentBatchConfig,An=0,vi=null,qr=null,Ii=0,oa=0,ap=tf(0),ri=0,Gv=null,yd=0,A_=0,JN=0,hv=null,Bs=null,QN=0,Wp=1/0,Yl=null,jw=!1,bT=null,Tc=null,V1=!1,pc=null,qw=0,pv=0,wT=null,qb=-1,Xb=0;function bs(){return An&6?$r():qb!==-1?qb:qb=$r()}function Dc(n){return n.mode&1?An&2&&Ii!==0?Ii&-Ii:gre.transition!==null?(Xb===0&&(Xb=D$()),Xb):(n=Vn,n!==0||(n=window.event,n=n===void 0?16:L$(n.type)),n):1}function Eo(n,e,t,r){if(50<pv)throw pv=0,wT=null,Error(ut(185));K0(n,t,r),(!(An&2)||n!==vi)&&(n===vi&&(!(An&2)&&(A_|=t),ri===4&&cc(n,Ii)),Xs(n,r),t===1&&An===0&&!(e.mode&1)&&(Wp=$r()+500,__&&nf()))}function Xs(n,e){var t=n.callbackNode;gne(n,e);var r=Nw(n,n===vi?Ii:0);if(r===0)t!==null&&Ak(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Ak(t),e===1)n.tag===0?mre(xL.bind(null,n)):tV(xL.bind(null,n)),fre(function(){!(An&6)&&nf()}),t=null;else{switch(N$(r)){case 1:t=MN;break;case 4:t=A$;break;case 16:t=Dw;break;case 536870912:t=T$;break;default:t=Dw}t=eH(t,qV.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function qV(n,e){if(qb=-1,Xb=0,An&6)throw Error(ut(327));var t=n.callbackNode;if(_p()&&n.callbackNode!==t)return null;var r=Nw(n,n===vi?Ii:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Xw(n,r);else{e=r;var i=An;An|=2;var s=YV();(vi!==n||Ii!==e)&&(Yl=null,Wp=$r()+500,rd(n,e));do try{Lre();break}catch(o){XV(n,o)}while(!0);BN(),Gw.current=s,An=i,qr!==null?e=0:(vi=null,Ii=0,e=ri)}if(e!==0){if(e===2&&(i=XA(n),i!==0&&(r=i,e=ST(n,i))),e===1)throw t=Gv,rd(n,0),cc(n,r),Xs(n,$r()),t;if(e===6)cc(n,r);else{if(i=n.current.alternate,!(r&30)&&!Ire(i)&&(e=Xw(n,r),e===2&&(s=XA(n),s!==0&&(r=s,e=ST(n,s))),e===1))throw t=Gv,rd(n,0),cc(n,r),Xs(n,$r()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(ut(345));case 2:If(n,Bs,Yl);break;case 3:if(cc(n,r),(r&130023424)===r&&(e=QN+500-$r(),10<e)){if(Nw(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){bs(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=nT(If.bind(null,n,Bs,Yl),e);break}If(n,Bs,Yl);break;case 4:if(cc(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var a=31-_o(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=$r()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ore(r/1960))-r,10<r){n.timeoutHandle=nT(If.bind(null,n,Bs,Yl),r);break}If(n,Bs,Yl);break;case 5:If(n,Bs,Yl);break;default:throw Error(ut(329))}}}return Xs(n,$r()),n.callbackNode===t?qV.bind(null,n):null}function ST(n,e){var t=hv;return n.current.memoizedState.isDehydrated&&(rd(n,e).flags|=256),n=Xw(n,e),n!==2&&(e=Bs,Bs=t,e!==null&&_T(e)),n}function _T(n){Bs===null?Bs=n:Bs.push.apply(Bs,n)}function Ire(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Ao(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cc(n,e){for(e&=~JN,e&=~A_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-_o(e),r=1<<t;n[t]=-1,e&=~r}}function xL(n){if(An&6)throw Error(ut(327));_p();var e=Nw(n,0);if(!(e&1))return Xs(n,$r()),null;var t=Xw(n,e);if(n.tag!==0&&t===2){var r=XA(n);r!==0&&(e=r,t=ST(n,r))}if(t===1)throw t=Gv,rd(n,0),cc(n,e),Xs(n,$r()),t;if(t===6)throw Error(ut(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,If(n,Bs,Yl),Xs(n,$r()),null}function eP(n,e){var t=An;An|=1;try{return n(e)}finally{An=t,An===0&&(Wp=$r()+500,__&&nf())}}function xd(n){pc!==null&&pc.tag===0&&!(An&6)&&_p();var e=An;An|=1;var t=Ya.transition,r=Vn;try{if(Ya.transition=null,Vn=1,n)return n()}finally{Vn=r,Ya.transition=t,An=e,!(An&6)&&nf()}}function tP(){oa=ap.current,lr(ap)}function rd(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,cre(t)),qr!==null)for(t=qr.return;t!==null;){var r=t;switch(kN(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kw();break;case 3:Vp(),lr(js),lr(ns),WN();break;case 5:HN(r);break;case 4:Vp();break;case 13:lr(yr);break;case 19:lr(yr);break;case 10:zN(r.type._context);break;case 22:case 23:tP()}t=t.return}if(vi=n,qr=n=Nc(n.current,null),Ii=oa=e,ri=0,Gv=null,JN=A_=yd=0,Bs=hv=null,qf!==null){for(e=0;e<qf.length;e++)if(t=qf[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}t.pending=r}qf=null}return n}function XV(n,e){do{var t=qr;try{if(BN(),Wb.current=Ww,Hw){for(var r=wr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Hw=!1}if(vd=0,mi=Qr=wr=null,fv=!1,Vv=0,ZN.current=null,t===null||t.return===null){ri=1,Gv=e,qr=null;break}e:{var s=n,a=t.return,o=t,l=e;if(e=Ii,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=aL(a);if(h!==null){h.flags&=-257,oL(h,a,o,s,e),h.mode&1&&sL(s,u,e),e=h,l=u;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){sL(s,u,e),nP();break e}l=Error(ut(426))}}else if(dr&&o.mode&1){var y=aL(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),oL(y,a,o,s,e),LN(Hp(l,o));break e}}s=l=Hp(l,o),ri!==4&&(ri=2),hv===null?hv=[s]:hv.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=PV(s,l,e);Jk(s,m);break e;case 1:o=l;var S=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Tc===null||!Tc.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var g=RV(s,o,e);Jk(s,g);break e}}s=s.return}while(s!==null)}ZV(t)}catch(w){e=w,qr===t&&t!==null&&(qr=t=t.return);continue}break}while(!0)}function YV(){var n=Gw.current;return Gw.current=Ww,n===null?Ww:n}function nP(){(ri===0||ri===3||ri===2)&&(ri=4),vi===null||!(yd&268435455)&&!(A_&268435455)||cc(vi,Ii)}function Xw(n,e){var t=An;An|=2;var r=YV();(vi!==n||Ii!==e)&&(Yl=null,rd(n,e));do try{kre();break}catch(i){XV(n,i)}while(!0);if(BN(),An=t,Gw.current=r,qr!==null)throw Error(ut(261));return vi=null,Ii=0,ri}function kre(){for(;qr!==null;)KV(qr)}function Lre(){for(;qr!==null&&!one();)KV(qr)}function KV(n){var e=QV(n.alternate,n,oa);n.memoizedProps=n.pendingProps,e===null?ZV(n):qr=e,ZN.current=null}function ZV(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Dre(t,e),t!==null){t.flags&=32767,qr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ri=6,qr=null;return}}else if(t=Tre(t,e,oa),t!==null){qr=t;return}if(e=e.sibling,e!==null){qr=e;return}qr=e=n}while(e!==null);ri===0&&(ri=5)}function If(n,e,t){var r=Vn,i=Ya.transition;try{Ya.transition=null,Vn=1,Fre(n,e,t,r)}finally{Ya.transition=i,Vn=r}return null}function Fre(n,e,t,r){do _p();while(pc!==null);if(An&6)throw Error(ut(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ut(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(vne(n,s),n===vi&&(qr=vi=null,Ii=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||V1||(V1=!0,eH(Dw,function(){return _p(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ya.transition,Ya.transition=null;var a=Vn;Vn=1;var o=An;An|=4,ZN.current=null,Pre(n,t),GV(t,n),rre(eT),Pw=!!QA,eT=QA=null,n.current=t,Rre(t),lne(),An=o,Vn=a,Ya.transition=s}else n.current=t;if(V1&&(V1=!1,pc=n,qw=i),s=n.pendingLanes,s===0&&(Tc=null),fne(t.stateNode),Xs(n,$r()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(jw)throw jw=!1,n=bT,bT=null,n;return qw&1&&n.tag!==0&&_p(),s=n.pendingLanes,s&1?n===wT?pv++:(pv=0,wT=n):pv=0,nf(),null}function _p(){if(pc!==null){var n=N$(qw),e=Ya.transition,t=Vn;try{if(Ya.transition=null,Vn=16>n?16:n,pc===null)var r=!1;else{if(n=pc,pc=null,qw=0,An&6)throw Error(ut(331));var i=An;for(An|=4,Et=n.current;Et!==null;){var s=Et,a=s.child;if(Et.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Et=u;Et!==null;){var c=Et;switch(c.tag){case 0:case 11:case 15:dv(8,c,s)}var f=c.child;if(f!==null)f.return=c,Et=f;else for(;Et!==null;){c=Et;var d=c.sibling,h=c.return;if(VV(c),c===u){Et=null;break}if(d!==null){d.return=h,Et=d;break}Et=h}}}var p=s.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}Et=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Et=a;else e:for(;Et!==null;){if(s=Et,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dv(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Et=m;break e}Et=s.return}}var S=n.current;for(Et=S;Et!==null;){a=Et;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,Et=b;else e:for(a=S;Et!==null;){if(o=Et,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:C_(9,o)}}catch(w){Dr(o,o.return,w)}if(o===a){Et=null;break e}var g=o.sibling;if(g!==null){g.return=o.return,Et=g;break e}Et=o.return}}if(An=i,nf(),pl&&typeof pl.onPostCommitFiberRoot=="function")try{pl.onPostCommitFiberRoot(y_,n)}catch{}r=!0}return r}finally{Vn=t,Ya.transition=e}}return!1}function bL(n,e,t){e=Hp(t,e),e=PV(n,e,1),n=Ac(n,e,1),e=bs(),n!==null&&(K0(n,1,e),Xs(n,e))}function Dr(n,e,t){if(n.tag===3)bL(n,n,t);else for(;e!==null;){if(e.tag===3){bL(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tc===null||!Tc.has(r))){n=Hp(t,n),n=RV(e,n,1),e=Ac(e,n,1),n=bs(),e!==null&&(K0(e,1,n),Xs(e,n));break}}e=e.return}}function Bre(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=bs(),n.pingedLanes|=n.suspendedLanes&t,vi===n&&(Ii&t)===t&&(ri===4||ri===3&&(Ii&130023424)===Ii&&500>$r()-QN?rd(n,0):JN|=t),Xs(n,e)}function JV(n,e){e===0&&(n.mode&1?(e=R1,R1<<=1,!(R1&130023424)&&(R1=4194304)):e=1);var t=bs();n=yu(n,e),n!==null&&(K0(n,e,t),Xs(n,t))}function zre(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),JV(n,t)}function Ure(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(ut(314))}r!==null&&r.delete(e),JV(n,t)}var QV;QV=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||js.current)Vs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Vs=!1,Are(n,e,t);Vs=!!(n.flags&131072)}else Vs=!1,dr&&e.flags&1048576&&nV(e,Bw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jb(n,e),n=e.pendingProps;var i=zp(e,ns.current);Sp(e,t),i=jN(null,e,r,n,i,t);var s=qN();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qs(r)?(s=!0,Lw(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$N(e),i.updater=E_,e.stateNode=i,i._reactInternals=e,uT(e,r,n,t),e=dT(null,e,r,!0,s,t)):(e.tag=0,dr&&s&&IN(e),hs(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(jb(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Vre(r),n=go(r,n),i){case 0:e=fT(null,e,r,n,t);break e;case 1:e=cL(null,e,r,n,t);break e;case 11:e=lL(null,e,r,n,t);break e;case 14:e=uL(null,e,r,go(r.type,n),t);break e}throw Error(ut(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:go(r,i),fT(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:go(r,i),cL(n,e,r,i,t);case 3:e:{if(LV(e),n===null)throw Error(ut(387));r=e.pendingProps,s=e.memoizedState,i=s.element,aV(n,e),$w(e,r,null,t);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Hp(Error(ut(423)),e),e=fL(n,e,r,t,i);break e}else if(r!==i){i=Hp(Error(ut(424)),e),e=fL(n,e,r,t,i);break e}else for(ga=Cc(e.stateNode.containerInfo.firstChild),ya=e,dr=!0,xo=null,t=cV(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Up(),r===i){e=xu(n,e,t);break e}hs(n,e,r,t)}e=e.child}return e;case 5:return fV(e),n===null&&aT(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,a=i.children,tT(r,i)?a=null:s!==null&&tT(r,s)&&(e.flags|=32),kV(n,e),hs(n,e,a,t),e.child;case 6:return n===null&&aT(e),null;case 13:return FV(n,e,t);case 4:return VN(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=$p(e,null,r,t):hs(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:go(r,i),lL(n,e,r,i,t);case 7:return hs(n,e,e.pendingProps,t),e.child;case 8:return hs(n,e,e.pendingProps.children,t),e.child;case 12:return hs(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,rr(zw,r._currentValue),r._currentValue=a,s!==null)if(Ao(s.value,a)){if(s.children===i.children&&!js.current){e=xu(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=lu(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),oT(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ut(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),oT(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}hs(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Sp(e,t),i=Qa(i),r=r(i),e.flags|=1,hs(n,e,r,t),e.child;case 14:return r=e.type,i=go(r,e.pendingProps),i=go(r.type,i),uL(n,e,r,i,t);case 15:return OV(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:go(r,i),jb(n,e),e.tag=1,qs(r)?(n=!0,Lw(e)):n=!1,Sp(e,t),lV(e,r,i),uT(e,r,i,t),dT(null,e,r,!0,n,t);case 19:return BV(n,e,t);case 22:return IV(n,e,t)}throw Error(ut(156,e.tag))};function eH(n,e){return C$(n,e)}function $re(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ja(n,e,t,r){return new $re(n,e,t,r)}function rP(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Vre(n){if(typeof n=="function")return rP(n)?1:0;if(n!=null){if(n=n.$$typeof,n===SN)return 11;if(n===_N)return 14}return 2}function Nc(n,e){var t=n.alternate;return t===null?(t=ja(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Yb(n,e,t,r,i,s){var a=2;if(r=n,typeof n=="function")rP(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Kh:return id(t.children,i,s,e);case wN:a=8,i|=8;break;case OA:return n=ja(12,t,e,i|2),n.elementType=OA,n.lanes=s,n;case IA:return n=ja(13,t,e,i),n.elementType=IA,n.lanes=s,n;case kA:return n=ja(19,t,e,i),n.elementType=kA,n.lanes=s,n;case u$:return T_(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case o$:a=10;break e;case l$:a=9;break e;case SN:a=11;break e;case _N:a=14;break e;case rc:a=16,r=null;break e}throw Error(ut(130,n==null?n:typeof n,""))}return e=ja(a,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function id(n,e,t,r){return n=ja(7,n,r,e),n.lanes=t,n}function T_(n,e,t,r){return n=ja(22,n,r,e),n.elementType=u$,n.lanes=t,n.stateNode={isHidden:!1},n}function R2(n,e,t){return n=ja(6,n,null,e),n.lanes=t,n}function O2(n,e,t){return e=ja(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Hre(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=h2(0),this.expirationTimes=h2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h2(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function iP(n,e,t,r,i,s,a,o,l){return n=new Hre(n,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ja(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},$N(s),n}function Wre(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yh,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function tH(n){if(!n)return zc;n=n._reactInternals;e:{if(Id(n)!==n||n.tag!==1)throw Error(ut(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ut(171))}if(n.tag===1){var t=n.type;if(qs(t))return eV(n,t,e)}return e}function nH(n,e,t,r,i,s,a,o,l){return n=iP(t,r,!0,n,i,s,a,o,l),n.context=tH(null),t=n.current,r=bs(),i=Dc(t),s=lu(r,i),s.callback=e??null,Ac(t,s,i),n.current.lanes=i,K0(n,i,r),Xs(n,r),n}function D_(n,e,t,r){var i=e.current,s=bs(),a=Dc(i);return t=tH(t),e.context===null?e.context=t:e.pendingContext=t,e=lu(s,a),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Ac(i,e,a),n!==null&&(Eo(n,i,a,s),Hb(n,i,a)),a}function Yw(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function wL(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function sP(n,e){wL(n,e),(n=n.alternate)&&wL(n,e)}function Gre(){return null}var rH=typeof reportError=="function"?reportError:function(n){console.error(n)};function aP(n){this._internalRoot=n}N_.prototype.render=aP.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ut(409));D_(n,e,null,null)};N_.prototype.unmount=aP.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;xd(function(){D_(null,n,null,null)}),e[vu]=null}};function N_(n){this._internalRoot=n}N_.prototype.unstable_scheduleHydration=function(n){if(n){var e=O$();n={blockedOn:null,target:n,priority:e};for(var t=0;t<uc.length&&e!==0&&e<uc[t].priority;t++);uc.splice(t,0,n),t===0&&k$(n)}};function oP(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function P_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function SL(){}function jre(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Yw(a);s.call(u)}}var a=nH(e,r,n,0,null,!1,!1,"",SL);return n._reactRootContainer=a,n[vu]=a.current,Fv(n.nodeType===8?n.parentNode:n),xd(),a}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Yw(l);o.call(u)}}var l=iP(n,0,!1,null,null,!1,!1,"",SL);return n._reactRootContainer=l,n[vu]=l.current,Fv(n.nodeType===8?n.parentNode:n),xd(function(){D_(e,l,t,r)}),l}function R_(n,e,t,r,i){var s=t._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Yw(a);o.call(l)}}D_(e,a,n,i)}else a=jre(t,e,n,i,r);return Yw(a)}P$=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=jg(e.pendingLanes);t!==0&&(CN(e,t|1),Xs(e,$r()),!(An&6)&&(Wp=$r()+500,nf()))}break;case 13:xd(function(){var r=yu(n,1);if(r!==null){var i=bs();Eo(r,n,1,i)}}),sP(n,1)}};AN=function(n){if(n.tag===13){var e=yu(n,134217728);if(e!==null){var t=bs();Eo(e,n,134217728,t)}sP(n,134217728)}};R$=function(n){if(n.tag===13){var e=Dc(n),t=yu(n,e);if(t!==null){var r=bs();Eo(t,n,e,r)}sP(n,e)}};O$=function(){return Vn};I$=function(n,e){var t=Vn;try{return Vn=n,e()}finally{Vn=t}};GA=function(n,e,t){switch(e){case"input":if(BA(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=S_(r);if(!i)throw Error(ut(90));f$(r),BA(r,i)}}}break;case"textarea":h$(n,t);break;case"select":e=t.value,e!=null&&yp(n,!!t.multiple,e,!1)}};b$=eP;w$=xd;var qre={usingClientEntryPoint:!1,Events:[J0,ep,S_,y$,x$,eP]},gg={findFiberByHostInstance:jf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Xre={bundleType:gg.bundleType,version:gg.version,rendererPackageName:gg.rendererPackageName,rendererConfig:gg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ru.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=E$(n),n===null?null:n.stateNode},findFiberByHostInstance:gg.findFiberByHostInstance||Gre,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var H1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!H1.isDisabled&&H1.supportsFiber)try{y_=H1.inject(Xre),pl=H1}catch{}}Ma.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qre;Ma.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oP(e))throw Error(ut(200));return Wre(n,e,null,t)};Ma.createRoot=function(n,e){if(!oP(n))throw Error(ut(299));var t=!1,r="",i=rH;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=iP(n,1,!1,null,null,t,!1,r,i),n[vu]=e.current,Fv(n.nodeType===8?n.parentNode:n),new aP(e)};Ma.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ut(188)):(n=Object.keys(n).join(","),Error(ut(268,n)));return n=E$(e),n=n===null?null:n.stateNode,n};Ma.flushSync=function(n){return xd(n)};Ma.hydrate=function(n,e,t){if(!P_(e))throw Error(ut(200));return R_(null,n,e,!0,t)};Ma.hydrateRoot=function(n,e,t){if(!oP(n))throw Error(ut(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",a=rH;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=nH(e,null,n,1,t??null,i,!1,s,a),n[vu]=e.current,Fv(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new N_(e)};Ma.render=function(n,e,t){if(!P_(e))throw Error(ut(200));return R_(null,n,e,!1,t)};Ma.unmountComponentAtNode=function(n){if(!P_(n))throw Error(ut(40));return n._reactRootContainer?(xd(function(){R_(null,null,n,!1,function(){n._reactRootContainer=null,n[vu]=null})}),!0):!1};Ma.unstable_batchedUpdates=eP;Ma.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!P_(t))throw Error(ut(200));if(n==null||n._reactInternals===void 0)throw Error(ut(38));return R_(n,e,t,!1,r)};Ma.version="18.2.0-next-9e3b772b8-20220608";function iH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iH)}catch(n){console.error(n)}}iH(),n$.exports=Ma;var mm=n$.exports;const sH=so(mm);var _L=mm;PA.createRoot=_L.createRoot,PA.hydrateRoot=_L.hydrateRoot;function W1(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aH={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,s){function a(u,c){if(!i[u]){if(!r[u]){var f=typeof W1=="function"&&W1;if(!c&&f)return f(u,!0);if(o)return o(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(p){var v=r[u][1][p];return a(v||p)},h,h.exports,t,r,i,s)}return i[u].exports}for(var o=typeof W1=="function"&&W1,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(t,r,i){r.exports={oauthd_url:"https://oauth.io",oauthd_api:"https://oauth.io/api",version:"web-0.6.1",options:{}}},{}],2:[function(t,r,i){r.exports=function(s){var a,o;return a=s.getJquery(),o=function(l){return function(u,c,f){var d,h,p;return h=a.Deferred(),d=s.getOAuthdURL(),p={url:d+c,type:u},u==="post"||u==="put"?(p.dataType="json",p.contentType="application/json",p.data=JSON.stringify(f)):p.data=f,a.ajax(p).then(function(v){return h.resolve(v)},function(v){return h.reject(v&&v.responseJSON)}),h.promise()}}(),{get:function(l){return function(u,c){return o("get",u,c)}}(),post:function(l){return function(u,c){return o("post",u,c)}}(),put:function(l){return function(u,c){return o("put",u,c)}}(),del:function(l){return function(u,c){return o("delete",u,c)}}()}}},{}],3:[function(t,r,i){var s,a,o,l,u,c;l=t("../config"),a=t("../tools/url"),s=t("../tools/location_operations"),u=t("../tools/cookies"),c=t("../tools/lstorage"),o=t("../tools/cache"),r.exports=function(f,d,h,p){var v,y;return a=a(d),v=s(d),y=c.active()&&c||u,u.init(l,d),o.init(y,l),{initialize:function(m,S){var b;if(l.key=m,S)for(b in S)l.options[b]=S[b]},setOAuthdURL:function(m){l.oauthd_url=m,l.oauthd_base=a.getAbsUrl(l.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0]},getOAuthdURL:function(){return l.oauthd_url},getVersion:function(){return l.version},extend:function(m,S){return this[m]=S(this)},getConfig:function(){return l},getWindow:function(){return f},getDocument:function(){return d},getNavigator:function(){return p},getJquery:function(){return h},getUrl:function(){return a},getCache:function(){return o},getStorage:function(){return y},getLocationOperations:function(){return v}}}},{"../config":1,"../tools/cache":9,"../tools/cookies":10,"../tools/location_operations":12,"../tools/lstorage":13,"../tools/url":15}],4:[function(t,r,i){var s,a,o;s=t("../tools/cookies"),a=t("./request"),o=t("../tools/sha1"),r.exports=function(l){var u,c,f,d,h,p,v,y,m,S,b,g;return c=l.getUrl(),h=l.getConfig(),p=l.getDocument(),g=l.getWindow(),u=l.getJquery(),f=l.getCache(),b=t("./providers")(l),h.oauthd_base=c.getAbsUrl(h.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0],d=[],m=void 0,function(){var w,x;x=/[\\#&]oauthio=([^&]*)/.exec(p.location.hash),x&&(p.location.hash=p.location.hash.replace(/&?oauthio=[^&]*/,""),m=decodeURIComponent(x[1].replace(/\+/g," ")),w=s.read("oauthio_state"),w&&(d.push(w),s.erase("oauthio_state")))}(),v=l.getLocationOperations(),S={request:a(l,d,b)},y={initialize:function(w,x){return l.initialize(w,x)},setOAuthdURL:function(w){h.oauthd_url=w,h.oauthd_base=c.getAbsUrl(h.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0]},create:function(w,x,M){var A,N,C;if(!x)return f.tryCache(y,w,!0);typeof M!="object"&&b.fetchDescription(w),N=function(T){return S.request.mkHttp(w,x,M,T)},C={};for(A in x)C[A]=x[A];return C.toJson=function(){var T;return T={},C.access_token!=null&&(T.access_token=C.access_token),C.oauth_token!=null&&(T.oauth_token=C.oauth_token),C.oauth_token_secret!=null&&(T.oauth_token_secret=C.oauth_token_secret),C.expires_in!=null&&(T.expires_in=C.expires_in),C.token_type!=null&&(T.token_type=C.token_type),C.id_token!=null&&(T.id_token=C.id_token),C.provider!=null&&(T.provider=C.provider),C.email!=null&&(T.email=C.email),T},C.get=N("GET"),C.post=N("POST"),C.put=N("PUT"),C.patch=N("PATCH"),C.del=N("DELETE"),C.me=S.request.mkHttpMe(w,x,M,"GET"),C},popup:function(w,x,M){var A,N,C,T,R,U,F,B,D,O,$;return T=!1,C=function(L){if(!T){if(L.origin!==h.oauthd_base)return;try{B.close()}catch{}return x.data=L.data,S.request.sendCallback(x,A),T=!0}},B=void 0,N=void 0,D=void 0,A=u.Deferred(),x=x||{},h.key?(arguments.length===2&&typeof x=="function"&&(M=x,x={}),f.cacheEnabled(x.cache)&&(U=f.tryCache(y,w,x.cache))?(A!=null&&A.resolve(U),M?M(null,U):A.promise()):(x.state||(x.state=o.create_hash(),x.state_type="client"),d.push(x.state),F=h.oauthd_url+"/auth/"+w+"?k="+h.key,F+="&d="+encodeURIComponent(c.getAbsUrl("/")),x&&(F+="&opts="+encodeURIComponent(JSON.stringify(x))),x.wnd_settings?($=x.wnd_settings,delete x.wnd_settings):$={width:Math.floor(.8*g.outerWidth),height:Math.floor(.5*g.outerHeight)},$.width<1e3&&($.width=1e3),$.height<630&&($.height=630),$.left=Math.floor(g.screenX+(g.outerWidth-$.width)/2),$.top=Math.floor(g.screenY+(g.outerHeight-$.height)/8),O="width="+$.width+",height="+$.height,O+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0",O+=",left="+$.left+",top="+$.top,x={provider:w,cache:x.cache},x.callback=function(L,X){return g.removeEventListener?g.removeEventListener("message",C,!1):g.detachEvent?g.detachEvent("onmessage",C):p.detachEvent&&p.detachEvent("onmessage",C),x.callback=function(){},D&&(clearTimeout(D),D=void 0),M?M(L,X):void 0},g.attachEvent?g.attachEvent("onmessage",C):p.attachEvent?p.attachEvent("onmessage",C):g.addEventListener&&g.addEventListener("message",C,!1),typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessageExternal&&chrome.runtime.onMessageExternal.addListener(function(L,X,Z){return L.origin=X.url.match(/^.{2,5}:\/\/[^\/]+/)[0],C(L)}),!N&&(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0)&&(N=p.createElement("iframe"),N.src=h.oauthd_url+"/auth/iframe?d="+encodeURIComponent(c.getAbsUrl("/")),N.width=0,N.height=0,N.frameBorder=0,N.style.visibility="hidden",p.body.appendChild(N)),D=setTimeout(function(){A!=null&&A.reject(new Error("Authorization timed out")),x.callback&&typeof x.callback=="function"&&x.callback(new Error("Authorization timed out"));try{B.close()}catch{}},12e5),B=g.open(F,"Authorization",O),B?(B.focus(),R=g.setInterval(function(){return B!==null&&!B.closed||(g.clearInterval(R),T||(A!=null&&A.reject(new Error("The popup was closed")),!x.callback||typeof x.callback!="function"))?void 0:x.callback(new Error("The popup was closed"))},500)):(A!=null&&A.reject(new Error("Could not open a popup")),x.callback&&typeof x.callback=="function"&&x.callback(new Error("Could not open a popup"))),A!=null?A.promise():void 0)):(A!=null&&A.reject(new Error("OAuth object must be initialized")),M==null?A.promise():M(new Error("OAuth object must be initialized")))},redirect:function(w,x,M){var A;if(arguments.length===2&&(M=x,x={}),typeof M!="string")throw new Error("You must specify an url");return f.cacheEnabled(x.cache)&&f.tryCache(y,w,x.cache)?(M=c.getAbsUrl(M)+(M.indexOf("#")===-1?"#":"&")+"oauthio=cache:"+w,v.changeHref(M),void v.reload()):(x.state||(x.state=o.create_hash(),x.state_type="client"),s.create("oauthio_state",x.state),A=encodeURIComponent(c.getAbsUrl(M)),M=h.oauthd_url+"/auth/"+w+"?k="+h.key,M+="&redirect_uri="+A,x&&(M+="&opts="+encodeURIComponent(JSON.stringify(x))),void v.changeHref(M))},isRedirect:function(w){var x,M;if(m==null)return!1;if((m!=null?m.substr(0,6):void 0)==="cache:")return x=m!=null?m.substr(6):void 0,w?x.toLowerCase()===w.toLowerCase():x;try{M=JSON.parse(m)}catch{return!1}return w?M.provider.toLowerCase()===w.toLowerCase():M.provider},callback:function(w,x,M){var A,N,C;if(A=u.Deferred(),arguments.length===1&&typeof w=="function"&&(M=w,w=void 0,x={}),arguments.length===1&&typeof w=="string"&&(x={}),arguments.length===2&&typeof x=="function"&&(M=x,x={}),f.cacheEnabled(x!=null?x.cache:void 0)||(m!=null?m.substr(0,6):void 0)==="cache:"){if(w||(m!=null?m.substr(0,6):void 0)!=="cache:"||(w=m.substr(6)),C=f.tryCache(y,w,!0)){if(!M)return A!=null&&A.resolve(C),A!=null?A.promise():void 0;if(C)return M(null,C)}else if((m!=null?m.substr(0,6):void 0)==="cache:")return N=new Error("Could not fetch data from cache"),M?M(N):(A!=null&&A.reject(N),A!=null?A.promise():void 0)}return m?(S.request.sendCallback({data:m,provider:w,cache:x!=null?x.cache:void 0,expires:x!=null?x.expires:void 0,callback:M},A),A!=null?A.promise():void 0):void 0},clearCache:function(w){return f.clearCache(w)},http_me:function(w){S.request.http_me&&S.request.http_me(w)},http:function(w){S.request.http&&S.request.http(w)},getVersion:function(){return l.getVersion.apply(this)}}}},{"../tools/cookies":10,"../tools/sha1":14,"./providers":5,"./request":6}],5:[function(t,r,i){var s;s=t("../config"),r.exports=function(a){var o,l,u,c;return o=a.getJquery(),c={},u={},l={execProvidersCb:function(f,d,h){var p,v;if(u[f]){p=u[f],delete u[f];for(v in p)p[v](d,h)}},fetchDescription:function(f){c[f]||(c[f]=!0,o.ajax({url:s.oauthd_api+"/providers/"+f,data:{extend:!0},dataType:"json"}).done(function(d){c[f]=d.data,l.execProvidersCb(f,null,d.data)}).always(function(){typeof c[f]!="object"&&(delete c[f],l.execProvidersCb(f,new Error("Unable to fetch request description")))}))},getDescription:function(f,d,h){return d=d||{},typeof c[f]=="object"?h(null,c[f]):(c[f]||l.fetchDescription(f),d.wait?(u[f]=u[f]||[],void u[f].push(h)):h(null,{}))}}}},{"../config":1}],6:[function(t,r,i){var s,a=[].indexOf||function(o){for(var l=0,u=this.length;u>l;l++)if(l in this&&this[l]===o)return l;return-1};s=t("../tools/url")(),r.exports=function(o,l,u){var c,f,d,h,p;return c=o.getJquery(),d=o.getConfig(),f=o.getCache(),h=[],p=!1,{retrieveMethods:function(){var v;return v=c.Deferred(),p?v.resolve(h):c.ajax(d.oauthd_url+"/api/extended-endpoints").then(function(y){return h=y.data,p=!0,v.resolve()}).fail(function(y){return p=!0,v.reject(y)}),v.promise()},generateMethods:function(v,y,m){var S,b,g,w,x,M,A,N,C;if(h!=null){for(A=[],b=S=0,w=h.length;w>S;b=++S)N=h[b],x=N.name.split("."),M=v,A.push((function(){var T,R,U;for(U=[],g=T=0,R=x.length;R>T;g=++T)C=x[g],g<x.length-1?(M[C]==null&&(M[C]={}),U.push(M=M[C])):U.push(M[C]=this.mkHttpAll(m,y,N,arguments));return U}).apply(this,arguments));return A}},http:function(v){var y,m,S,b,g;S=function(){var w,x,M,A;if(A=g.oauthio.request||{},!A.cors){g.url=encodeURIComponent(g.url),g.url[0]!=="/"&&(g.url="/"+g.url),g.url=d.oauthd_url+"/request/"+g.oauthio.provider+g.url,g.headers=g.headers||{},g.headers.oauthio="k="+d.key,g.oauthio.tokens.oauth_token&&g.oauthio.tokens.oauth_token_secret&&(g.headers.oauthio+="&oauthv=1");for(x in g.oauthio.tokens)g.headers.oauthio+="&"+encodeURIComponent(x)+"="+encodeURIComponent(g.oauthio.tokens[x]);return delete g.oauthio,c.ajax(g)}if(g.oauthio.tokens){if(g.oauthio.tokens.access_token&&(g.oauthio.tokens.token=g.oauthio.tokens.access_token),g.url.match(/^[a-z]{2,16}:\/\//)||(g.url[0]!=="/"&&(g.url="/"+g.url),g.url=A.url+g.url),g.url=s.replaceParam(g.url,g.oauthio.tokens,A.parameters),A.query){M=[];for(w in A.query)M.push(encodeURIComponent(w)+"="+encodeURIComponent(s.replaceParam(A.query[w],g.oauthio.tokens,A.parameters)));a.call(g.url,"?")>=0?g.url+="&"+M:g.url+="?"+M}if(A.headers){g.headers=g.headers||{};for(w in A.headers)g.headers[w]=s.replaceParam(A.headers[w],g.oauthio.tokens,A.parameters)}return delete g.oauthio,c.ajax(g)}},g={},b=void 0;for(b in v)g[b]=v[b];return g.oauthio.request&&g.oauthio.request!==!0?S():(m={wait:!!g.oauthio.request},y=c.Deferred(),u.getDescription(g.oauthio.provider,m,function(w,x){return w?y.reject(w):(g.oauthio.tokens.oauth_token&&g.oauthio.tokens.oauth_token_secret?g.oauthio.request=x.oauth1&&x.oauth1.request:g.oauthio.request=x.oauth2&&x.oauth2.request,void y.resolve())}),y.then(S))},http_me:function(v){var y,m,S,b,g;S=function(){var w,x,M;w=c.Deferred(),g.oauthio.request,g.url=d.oauthd_url+"/auth/"+g.oauthio.provider+"/me",g.headers=g.headers||{},g.headers.oauthio="k="+d.key,g.oauthio.tokens.oauth_token&&g.oauthio.tokens.oauth_token_secret&&(g.headers.oauthio+="&oauthv=1");for(x in g.oauthio.tokens)g.headers.oauthio+="&"+encodeURIComponent(x)+"="+encodeURIComponent(g.oauthio.tokens[x]);return delete g.oauthio,M=c.ajax(g),c.when(M).done(function(A){w.resolve(A.data)}).fail(function(A){A.responseJSON?w.reject(A.responseJSON.data):w.reject(new Error("An error occured while trying to access the resource"))}),w.promise()},g={};for(b in v)g[b]=v[b];return g.oauthio.request&&g.oauthio.request!==!0?S():(m={wait:!!g.oauthio.request},y=c.Deferred(),u.getDescription(g.oauthio.provider,m,function(w,x){return w?y.reject(w):(g.oauthio.tokens.oauth_token&&g.oauthio.tokens.oauth_token_secret?g.oauthio.request=x.oauth1&&x.oauth1.request:g.oauthio.request=x.oauth2&&x.oauth2.request,void y.resolve())}),y.then(S))},http_all:function(v,y,m){return function(){var S,b,g;S=c.Deferred(),v.oauthio.request,v.headers=v.headers||{},v.headers.oauthio="k="+d.key,v.oauthio.tokens.oauth_token&&v.oauthio.tokens.oauth_token_secret&&(v.headers.oauthio+="&oauthv=1");for(b in v.oauthio.tokens)v.headers.oauthio+="&"+encodeURIComponent(b)+"="+encodeURIComponent(v.oauthio.tokens[b]);return delete v.oauthio,g=c.ajax(v),c.when(g).done(function(w){if(typeof w.data=="string")try{w.data=JSON.parse(w.data)}catch{w.data=w.data}finally{S.resolve(w.data)}}).fail(function(w){w.responseJSON?S.reject(w.responseJSON.data):S.reject(new Error("An error occured while trying to access the resource"))}),S.promise()}()},mkHttp:function(v,y,m,S){var b;return b=this,function(g,w){var x,M;if(M={},typeof g=="string"){if(typeof w=="object")for(x in w)M[x]=w[x];M.url=g}else if(typeof g=="object")for(x in g)M[x]=g[x];return M.type=M.type||S,M.oauthio={provider:v,tokens:y,request:m},b.http(M)}},mkHttpMe:function(v,y,m,S){var b;return b=this,function(g){var w;return w={},w.type=w.type||S,w.oauthio={provider:v,tokens:y,request:m},w.data=w.data||{},g&&(w.data.filter=g.join(",")),b.http_me(w)}},mkHttpAll:function(v,y,m){var S;return S=this,function(){var b,g,w,x;g={},g.type=m.method,g.url=d.oauthd_url+m.endpoint.replace(":provider",v),g.oauthio={provider:v,tokens:y},g.data={};for(b in arguments)x=arguments[b],w=m.params[b],w!=null&&(g.data[w.name]=x);return g.data=g.data||{},S.http_all(g,m,arguments)}},sendCallback:function(v,y){var m,S,b,g,w,x,M,A;m=this,S=void 0,b=void 0;try{S=JSON.parse(v.data)}catch{return y.reject(new Error("Error while parsing result")),v.callback(new Error("Error while parsing result"))}if(S&&S.provider){if(v.provider&&S.provider.toLowerCase()!==v.provider.toLowerCase())return b=new Error("Returned provider name does not match asked provider"),y.reject(b),v.callback&&typeof v.callback=="function"?v.callback(b):void 0;if(S.status==="error"||S.status==="fail")return b=new Error(S.message),b.body=S.data,y.reject(b),v.callback&&typeof v.callback=="function"?v.callback(b):void 0;if(S.status!=="success"||!S.data)return b=new Error,b.body=S.data,y.reject(b),v.callback&&typeof v.callback=="function"?v.callback(b):void 0;for(S.state=S.state.replace(/\s+/g,""),g=0;g<l.length;)l[g]=l[g].replace(/\s+/g,""),g++;if(!S.state||l.indexOf(S.state)===-1)return y.reject(new Error("State is not matching")),v.callback&&typeof v.callback=="function"?v.callback(new Error("State is not matching")):void 0;if(v.provider||(S.data.provider=S.provider),M=S.data,M.provider=S.provider.toLowerCase(),f.cacheEnabled(v.cache)&&M&&(v.expires&&!M.expires_in&&(M.expires_in=v.expires),f.storeCache(S.provider,M)),x=M.request,delete M.request,A=void 0,M.access_token?A={access_token:M.access_token}:M.oauth_token&&M.oauth_token_secret&&(A={oauth_token:M.oauth_token,oauth_token_secret:M.oauth_token_secret}),!x)return y.resolve(M),v.callback&&typeof v.callback=="function"?v.callback(null,M):void 0;if(x.required)for(g in x.required)A[x.required[g]]=M[x.required[g]];return w=function(N){return m.mkHttp(S.provider,A,x,N)},M.toJson=function(){var N;return N={},M.access_token!=null&&(N.access_token=M.access_token),M.oauth_token!=null&&(N.oauth_token=M.oauth_token),M.oauth_token_secret!=null&&(N.oauth_token_secret=M.oauth_token_secret),M.expires_in!=null&&(N.expires_in=M.expires_in),M.token_type!=null&&(N.token_type=M.token_type),M.id_token!=null&&(N.id_token=M.id_token),M.provider!=null&&(N.provider=M.provider),M.email!=null&&(N.email=M.email),N},M.get=w("GET"),M.post=w("POST"),M.put=w("PUT"),M.patch=w("PATCH"),M.del=w("DELETE"),M.me=m.mkHttpMe(S.provider,A,x,"GET"),this.retrieveMethods().then(function(N){return function(){return N.generateMethods(M,A,S.provider),y.resolve(M),v.callback&&typeof v.callback=="function"?v.callback(null,M):void 0}}(this)).fail(function(N){return function(C){return console.log("Could not retrieve methods",C),y.resolve(M),v.callback&&typeof v.callback=="function"?v.callback(null,M):void 0}}())}}}}},{"../tools/url":15}],7:[function(t,r,i){r.exports=function(s){var a,o,l,u,c;return a=s.getJquery(),l=s.getConfig(),c=s.getStorage(),u=null,o=function(){function f(d){this.token=d.token,this.data=d.user,this.providers=d.providers,u=this.getEditableData()}return f.prototype.getEditableData=function(){var d,h;d=[];for(h in this.data)["id","email"].indexOf(h)===-1&&d.push({key:h,value:this.data[h]});return d},f.prototype.save=function(){var d,h,p,v,y,m,S,b;for(h={},p=0,m=u.length;m>p;p++)d=u[p],this.data[d.key]!==d.value&&(h[d.key]=this.data[d.key]),this.data[d.key]===null&&delete this.data[d.key];for(y=function(g){var w,x,M;for(w=0,x=u.length;x>w;w++)if(M=u[w],M.key===g)return!0;return!1},b=this.getEditableData(),v=0,S=b.length;S>v;v++)d=b[v],y(d.key)||(h[d.key]=this.data[d.key]);return this.saveLocal(),s.API.put("/api/usermanagement/user?k="+l.key+"&token="+this.token,h)},f.prototype.select=function(d){return null},f.prototype.saveLocal=function(){var d;return d={token:this.token,user:this.data,providers:this.providers},c.erase("oio_auth"),c.create("oio_auth",JSON.stringify(d),21600)},f.prototype.hasProvider=function(d){return!!this.providers&&this.providers.indexOf(d)!==-1},f.prototype.getProviders=function(){var d;return d=a.Deferred(),s.API.get("/api/usermanagement/user/providers?k="+l.key+"&token="+this.token).done(function(h){return function(p){return h.providers=p.data,h.saveLocal(),d.resolve(h.providers)}}(this)).fail(function(h){return d.reject(h)}),d.promise()},f.prototype.addProvider=function(d){var h;return h=a.Deferred(),typeof d.toJson=="function"&&(d=d.toJson()),d.email=this.data.email,this.providers||(this.providers=[]),this.providers.push(d.provider),s.API.post("/api/usermanagement/user/providers?k="+l.key+"&token="+this.token,d).done(function(p){return function(v){return p.data=v.data,p.saveLocal(),h.resolve()}}(this)).fail(function(p){return function(v){return p.providers.splice(p.providers.indexOf(d.provider),1),h.reject(v)}}(this)),h.promise()},f.prototype.removeProvider=function(d){var h;return h=a.Deferred(),this.providers.splice(this.providers.indexOf(d),1),s.API.del("/api/usermanagement/user/providers/"+d+"?k="+l.key+"&token="+this.token).done(function(p){return function(v){return p.saveLocal(),h.resolve(v)}}(this)).fail(function(p){return function(v){return p.providers.push(d),h.reject(v)}}(this)),h.promise()},f.prototype.changePassword=function(d,h){return s.API.post("/api/usermanagement/user/password?k="+l.key+"&token="+this.token,{password:h})},f.prototype.isLoggued=function(){return s.User.isLogged()},f.prototype.isLogged=function(){return s.User.isLogged()},f.prototype.logout=function(){var d;return d=a.Deferred(),c.erase("oio_auth"),s.API.post("/api/usermanagement/user/logout?k="+l.key+"&token="+this.token).done(function(){return d.resolve()}).fail(function(h){return d.reject(h)}),d.promise()},f}(),{initialize:function(f,d){return s.initialize(f,d)},setOAuthdURL:function(f){return s.setOAuthdURL(f)},signup:function(f){var d;return d=a.Deferred(),typeof f.toJson=="function"&&(f=f.toJson()),s.API.post("/api/usermanagement/signup?k="+l.key,f).done(function(h){return c.create("oio_auth",JSON.stringify(h.data),h.data.expires_in||21600),d.resolve(new o(h.data))}).fail(function(h){return d.reject(h)}),d.promise()},signin:function(f,d){var h,p;return h=a.Deferred(),typeof f=="string"||d?s.API.post("/api/usermanagement/signin?k="+l.key,{email:f,password:d}).done(function(v){return c.create("oio_auth",JSON.stringify(v.data),v.data.expires_in||21600),h.resolve(new o(v.data))}).fail(function(v){return h.reject(v)}):(p=f,typeof p.toJson=="function"&&(p=p.toJson()),s.API.post("/api/usermanagement/signin?k="+l.key,p).done(function(v){return c.create("oio_auth",JSON.stringify(v.data),v.data.expires_in||21600),h.resolve(new o(v.data))}).fail(function(v){return h.reject(v)})),h.promise()},confirmResetPassword:function(f,d){return s.API.post("/api/usermanagement/user/password?k="+l.key,{password:f,token:d})},resetPassword:function(f,d){return s.API.post("/api/usermanagement/user/password/reset?k="+l.key,{email:f})},refreshIdentity:function(){var f;return f=a.Deferred(),s.API.get("/api/usermanagement/user?k="+l.key+"&token="+JSON.parse(c.read("oio_auth")).token).done(function(d){return f.resolve(new o(d.data))}).fail(function(d){return f.reject(d)}),f.promise()},getIdentity:function(){var f;return f=c.read("oio_auth"),f?new o(JSON.parse(f)):null},isLogged:function(){var f;return f=c.read("oio_auth"),!!f}}}},{}],8:[function(t,r,i){(function(){var s,a;return a=t("./tools/jquery-lite.js"),s=t("./lib/core")(window,document,a,navigator),s.extend("OAuth",t("./lib/oauth")),s.extend("API",t("./lib/api")),s.extend("User",t("./lib/user")),typeof angular<"u"&&angular!==null&&angular.module("oauthio",[]).factory("OAuth",[function(){return s.OAuth}]).factory("User",[function(){return s.User}]),i.OAuthio=s,window.User=i.User=i.OAuthio.User,window.OAuth=i.OAuth=i.OAuthio.OAuth,typeof r<"u"&&r!==null&&r.exports&&(r.exports=i),i})()},{"./lib/api":2,"./lib/core":3,"./lib/oauth":4,"./lib/user":7,"./tools/jquery-lite.js":11}],9:[function(t,r,i){r.exports={init:function(s,a){return this.config=a,this.storage=s},tryCache:function(s,a,o){var l,u;if(this.cacheEnabled(o)){if(o=this.storage.read("oauthio_provider_"+a),!o)return!1;o=decodeURIComponent(o)}if(typeof o=="string")try{o=JSON.parse(o)}catch{return!1}if(typeof o=="object"){u={};for(l in o)l!=="request"&&typeof o[l]!="function"&&(u[l]=o[l]);return s.create(a,u,o.request)}return!1},storeCache:function(s,a){var o;o=3600,a.expires_in?o=a.expires_in:(this.config.options.expires||this.config.options.expires===!1)&&(o=this.config.options.expires),this.storage.create("oauthio_provider_"+s,encodeURIComponent(JSON.stringify(a)),o)},cacheEnabled:function(s){return typeof s>"u"?this.config.options.cache:s},clearCache:function(s){s?this.storage.erase("oauthio_provider_"+s):this.storage.eraseFrom("oauthio_provider_")}}},{}],10:[function(t,r,i){r.exports={init:function(s,a){return this.config=s,this.document=a},create:function(s,a,o){var l;this.erase(s),l=new Date,o?l.setTime(l.getTime()+1e3*(o||1200)):l.setFullYear(l.getFullYear()+3),o="; expires="+l.toGMTString(),this.document.cookie=s+"="+a+o+"; path=/"},read:function(s){var a,o,l,u;for(u=s+"=",o=this.document.cookie.split(";"),l=0;l<o.length;){for(a=o[l];a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(u)===0)return a.substring(u.length,a.length);l++}return null},erase:function(s){var a;a=new Date,a.setTime(a.getTime()-864e5),this.document.cookie=s+"=; expires="+a.toGMTString()+"; path=/"},eraseFrom:function(s){var a,o,l,u,c;for(l=this.document.cookie.split(";"),u=0,c=l.length;c>u;u++)o=l[u],a=o.split("=")[0].trim(),a.substr(0,s.length)===s&&this.erase(a)}}},{}],11:[function(t,r,i){(function(s,a){typeof r=="object"&&typeof r.exports=="object"?r.exports=s.document?a(s,!0):function(o){if(!o.document)throw new Error("jQuery requires a window with a document");return a(o)}:a(s)})(typeof window<"u"?window:this,function(s,a){function o(H){var ee=H.length,oe=D.type(H);return oe==="function"||D.isWindow(H)?!1:H.nodeType===1&&ee?!0:oe==="array"||ee===0||typeof ee=="number"&&ee>0&&ee-1 in H}function l(H){var ee=ue[H]={};return D.each(H.match(ce)||[],function(oe,ye){ee[ye]=!0}),ee}function u(){F.removeEventListener("DOMContentLoaded",u,!1),s.removeEventListener("load",u,!1),D.ready()}function c(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=D.expando+Math.random()}function f(H,ee,oe){var ye;if(oe===void 0&&H.nodeType===1)if(ye="data-"+ee.replace(De,"-$1").toLowerCase(),oe=H.getAttribute(ye),typeof oe=="string"){try{oe=oe==="true"?!0:oe==="false"?!1:oe==="null"?null:+oe+""===oe?+oe:Te.test(oe)?D.parseJSON(oe):oe}catch{}data_user.set(H,ee,oe)}else oe=void 0;return oe}function d(){return!0}function h(){return!1}function p(){try{return F.activeElement}catch{}}function v(H){return function(ee,oe){typeof ee!="string"&&(oe=ee,ee="*");var ye,_e=0,Pe=ee.toLowerCase().match(ce)||[];if(D.isFunction(oe))for(;ye=Pe[_e++];)ye[0]==="+"?(ye=ye.slice(1)||"*",(H[ye]=H[ye]||[]).unshift(oe)):(H[ye]=H[ye]||[]).push(oe)}}function y(H,ee,oe,ye){function _e(Xe){var tt;return Pe[Xe]=!0,D.each(H[Xe]||[],function(ht,Dt){var rt=Dt(ee,oe,ye);return typeof rt!="string"||$e||Pe[rt]?$e?!(tt=rt):void 0:(ee.dataTypes.unshift(rt),_e(rt),!1)}),tt}var Pe={},$e=H===He;return _e(ee.dataTypes[0])||!Pe["*"]&&_e("*")}function m(H,ee){var oe,ye,_e=D.ajaxSettings.flatOptions||{};for(oe in ee)ee[oe]!==void 0&&((_e[oe]?H:ye||(ye={}))[oe]=ee[oe]);return ye&&D.extend(!0,H,ye),H}function S(H,ee,oe){for(var ye,_e,Pe,$e,Xe=H.contents,tt=H.dataTypes;tt[0]==="*";)tt.shift(),ye===void 0&&(ye=H.mimeType||ee.getResponseHeader("Content-Type"));if(ye){for(_e in Xe)if(Xe[_e]&&Xe[_e].test(ye)){tt.unshift(_e);break}}if(tt[0]in oe)Pe=tt[0];else{for(_e in oe){if(!tt[0]||H.converters[_e+" "+tt[0]]){Pe=_e;break}$e||($e=_e)}Pe=Pe||$e}return Pe?(Pe!==tt[0]&&tt.unshift(Pe),oe[Pe]):void 0}function b(H,ee,oe,ye){var _e,Pe,$e,Xe,tt,ht={},Dt=H.dataTypes.slice();if(Dt[1])for($e in H.converters)ht[$e.toLowerCase()]=H.converters[$e];for(Pe=Dt.shift();Pe;)if(H.responseFields[Pe]&&(oe[H.responseFields[Pe]]=ee),!tt&&ye&&H.dataFilter&&(ee=H.dataFilter(ee,H.dataType)),tt=Pe,Pe=Dt.shift()){if(Pe==="*")Pe=tt;else if(tt!=="*"&&tt!==Pe){if($e=ht[tt+" "+Pe]||ht["* "+Pe],!$e){for(_e in ht)if(Xe=_e.split(" "),Xe[1]===Pe&&($e=ht[tt+" "+Xe[0]]||ht["* "+Xe[0]])){$e===!0?$e=ht[_e]:ht[_e]!==!0&&(Pe=Xe[0],Dt.unshift(Xe[1]));break}}if($e!==!0)if($e&&H.throws)ee=$e(ee);else try{ee=$e(ee)}catch(rt){return{state:"parsererror",error:$e?rt:"No conversion from "+tt+" to "+Pe}}}}return{state:"success",data:ee}}function g(H,ee,oe,ye){var _e;if(D.isArray(ee))D.each(ee,function(Pe,$e){oe||qe.test(H)?ye(H,$e):g(H+"["+(typeof $e=="object"?Pe:"")+"]",$e,oe,ye)});else if(oe||D.type(ee)!=="object")ye(H,ee);else for(_e in ee)g(H+"["+_e+"]",ee[_e],oe,ye)}var w=[],x=w.slice,M=w.concat,A=w.push,N=w.indexOf,C={},T=C.toString,R=C.hasOwnProperty,U={},F=s.document,B="2.1.1 -attributes,-attributes/attr,-attributes/classes,-attributes/prop,-attributes/support,-attributes/val,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var,-css/var/cssExpand,-css/var/getStyles,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-css,-effects,-effects/Tween,-effects/animatedSelector,-dimensions,-offset,-data/var/data_user,-deprecated,-event/alias,-event/support,-intro,-manipulation/_evalUrl,-manipulation/support,-manipulation/var,-manipulation/var/rcheckableType,-manipulation,-outro,-queue,-queue/delay,-selector-native,-selector-sizzle,-sizzle/dist,-sizzle/dist/sizzle,-sizzle/dist/min,-sizzle/test,-sizzle/test/jquery,-traversing,-traversing/findFilter,-traversing/var/rneedsContext,-traversing/var,-wrap,-exports,-exports/amd",D=function(H,ee){return new D.fn.init(H,ee)},O=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,$=/^-ms-/,L=/-([\da-z])/gi,X=function(H,ee){return ee.toUpperCase()};D.fn=D.prototype={jquery:B,constructor:D,selector:"",length:0,toArray:function(){return x.call(this)},get:function(H){return H!=null?0>H?this[H+this.length]:this[H]:x.call(this)},pushStack:function(H){var ee=D.merge(this.constructor(),H);return ee.prevObject=this,ee.context=this.context,ee},each:function(H,ee){return D.each(this,H,ee)},map:function(H){return this.pushStack(D.map(this,function(ee,oe){return H.call(ee,oe,ee)}))},slice:function(){return this.pushStack(x.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(H){var ee=this.length,oe=+H+(0>H?ee:0);return this.pushStack(oe>=0&&ee>oe?[this[oe]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:A,sort:w.sort,splice:w.splice},D.extend=D.fn.extend=function(){var H,ee,oe,ye,_e,Pe,$e=arguments[0]||{},Xe=1,tt=arguments.length,ht=!1;for(typeof $e=="boolean"&&(ht=$e,$e=arguments[Xe]||{},Xe++),typeof $e=="object"||D.isFunction($e)||($e={}),Xe===tt&&($e=this,Xe--);tt>Xe;Xe++)if((H=arguments[Xe])!=null)for(ee in H)oe=$e[ee],ye=H[ee],$e!==ye&&(ht&&ye&&(D.isPlainObject(ye)||(_e=D.isArray(ye)))?(_e?(_e=!1,Pe=oe&&D.isArray(oe)?oe:[]):Pe=oe&&D.isPlainObject(oe)?oe:{},$e[ee]=D.extend(ht,Pe,ye)):ye!==void 0&&($e[ee]=ye));return $e},D.extend({expando:"jQuery"+(B+Math.random()).replace(/\D/g,""),isReady:!0,error:function(H){throw new Error(H)},noop:function(){},isFunction:function(H){return D.type(H)==="function"},isArray:Array.isArray,isWindow:function(H){return H!=null&&H===H.window},isNumeric:function(H){return!D.isArray(H)&&H-parseFloat(H)>=0},isPlainObject:function(H){return D.type(H)!=="object"||H.nodeType||D.isWindow(H)?!1:!H.constructor||R.call(H.constructor.prototype,"isPrototypeOf")},isEmptyObject:function(H){var ee;for(ee in H)return!1;return!0},type:function(H){return H==null?H+"":typeof H=="object"||typeof H=="function"?C[T.call(H)]||"object":typeof H},globalEval:function(H){var ee,oe=eval;H=D.trim(H),H&&(H.indexOf("use strict")===1?(ee=F.createElement("script"),ee.text=H,F.head.appendChild(ee).parentNode.removeChild(ee)):oe(H))},camelCase:function(H){return H.replace($,"ms-").replace(L,X)},nodeName:function(H,ee){return H.nodeName&&H.nodeName.toLowerCase()===ee.toLowerCase()},each:function(H,ee,oe){var ye,_e=0,Pe=H.length,$e=o(H);if(oe){if($e)for(;Pe>_e&&(ye=ee.apply(H[_e],oe),ye!==!1);_e++);else for(_e in H)if(ye=ee.apply(H[_e],oe),ye===!1)break}else if($e)for(;Pe>_e&&(ye=ee.call(H[_e],_e,H[_e]),ye!==!1);_e++);else for(_e in H)if(ye=ee.call(H[_e],_e,H[_e]),ye===!1)break;return H},trim:function(H){return H==null?"":(H+"").replace(O,"")},makeArray:function(H,ee){var oe=ee||[];return H!=null&&(o(Object(H))?D.merge(oe,typeof H=="string"?[H]:H):A.call(oe,H)),oe},inArray:function(H,ee,oe){return ee==null?-1:N.call(ee,H,oe)},merge:function(H,ee){for(var oe=+ee.length,ye=0,_e=H.length;oe>ye;ye++)H[_e++]=ee[ye];return H.length=_e,H},grep:function(H,ee,oe){for(var ye,_e=[],Pe=0,$e=H.length,Xe=!oe;$e>Pe;Pe++)ye=!ee(H[Pe],Pe),ye!==Xe&&_e.push(H[Pe]);return _e},map:function(H,ee,oe){var ye,_e=0,Pe=H.length,$e=o(H),Xe=[];if($e)for(;Pe>_e;_e++)ye=ee(H[_e],_e,oe),ye!=null&&Xe.push(ye);else for(_e in H)ye=ee(H[_e],_e,oe),ye!=null&&Xe.push(ye);return M.apply([],Xe)},guid:1,proxy:function(H,ee){var oe,ye,_e;return typeof ee=="string"&&(oe=H[ee],ee=H,H=oe),D.isFunction(H)?(ye=x.call(arguments,2),_e=function(){return H.apply(ee||this,ye.concat(x.call(arguments)))},_e.guid=H.guid=H.guid||D.guid++,_e):void 0},now:Date.now,support:U}),D.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(H,ee){C["[object "+ee+"]"]=ee.toLowerCase()});var Z,Q=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,re=D.fn.init=function(H,ee){var oe,ye;if(!H)return this;if(typeof H=="string"){if(oe=H[0]==="<"&&H[H.length-1]===">"&&H.length>=3?[null,H,null]:K.exec(H),!oe||!oe[1]&&ee)return!ee||ee.jquery?(ee||Z).find(H):this.constructor(ee).find(H);if(oe[1]){if(ee=ee instanceof D?ee[0]:ee,D.merge(this,D.parseHTML(oe[1],ee&&ee.nodeType?ee.ownerDocument||ee:F,!0)),Q.test(oe[1])&&D.isPlainObject(ee))for(oe in ee)D.isFunction(this[oe])?this[oe](ee[oe]):this.attr(oe,ee[oe]);return this}return ye=F.getElementById(oe[2]),ye&&ye.parentNode&&(this.length=1,this[0]=ye),this.context=F,this.selector=H,this}return H.nodeType?(this.context=this[0]=H,this.length=1,this):D.isFunction(H)?typeof Z.ready<"u"?Z.ready(H):H(D):(H.selector!==void 0&&(this.selector=H.selector,this.context=H.context),D.makeArray(H,this))};re.prototype=D.fn,Z=D(F);var ce=/\S+/g,ue={};D.Callbacks=function(H){H=typeof H=="string"?ue[H]||l(H):D.extend({},H);var ee,oe,ye,_e,Pe,$e,Xe=[],tt=!H.once&&[],ht=function(rt){for(ee=H.memory&&rt,oe=!0,$e=_e||0,_e=0,Pe=Xe.length,ye=!0;Xe&&Pe>$e;$e++)if(Xe[$e].apply(rt[0],rt[1])===!1&&H.stopOnFalse){ee=!1;break}ye=!1,Xe&&(tt?tt.length&&ht(tt.shift()):ee?Xe=[]:Dt.disable())},Dt={add:function(){if(Xe){var rt=Xe.length;(function _t(Vt){D.each(Vt,function(Ir,Mr){var Jn=D.type(Mr);Jn==="function"?H.unique&&Dt.has(Mr)||Xe.push(Mr):Mr&&Mr.length&&Jn!=="string"&&_t(Mr)})})(arguments),ye?Pe=Xe.length:ee&&(_e=rt,ht(ee))}return this},remove:function(){return Xe&&D.each(arguments,function(rt,_t){for(var Vt;(Vt=D.inArray(_t,Xe,Vt))>-1;)Xe.splice(Vt,1),ye&&(Pe>=Vt&&Pe--,$e>=Vt&&$e--)}),this},has:function(rt){return rt?D.inArray(rt,Xe)>-1:!(!Xe||!Xe.length)},empty:function(){return Xe=[],Pe=0,this},disable:function(){return Xe=tt=ee=void 0,this},disabled:function(){return!Xe},lock:function(){return tt=void 0,ee||Dt.disable(),this},locked:function(){return!tt},fireWith:function(rt,_t){return!Xe||oe&&!tt||(_t=_t||[],_t=[rt,_t.slice?_t.slice():_t],ye?tt.push(_t):ht(_t)),this},fire:function(){return Dt.fireWith(this,arguments),this},fired:function(){return!!oe}};return Dt},D.extend({Deferred:function(H){var ee=[["resolve","done",D.Callbacks("once memory"),"resolved"],["reject","fail",D.Callbacks("once memory"),"rejected"],["notify","progress",D.Callbacks("memory")]],oe="pending",ye={state:function(){return oe},always:function(){return _e.done(arguments).fail(arguments),this},then:function(){var Pe=arguments;return D.Deferred(function($e){D.each(ee,function(Xe,tt){var ht=D.isFunction(Pe[Xe])&&Pe[Xe];_e[tt[1]](function(){var Dt=ht&&ht.apply(this,arguments);Dt&&D.isFunction(Dt.promise)?Dt.promise().done($e.resolve).fail($e.reject).progress($e.notify):$e[tt[0]+"With"](this===ye?$e.promise():this,ht?[Dt]:arguments)})}),Pe=null}).promise()},promise:function(Pe){return Pe!=null?D.extend(Pe,ye):ye}},_e={};return ye.pipe=ye.then,D.each(ee,function(Pe,$e){var Xe=$e[2],tt=$e[3];ye[$e[1]]=Xe.add,tt&&Xe.add(function(){oe=tt},ee[1^Pe][2].disable,ee[2][2].lock),_e[$e[0]]=function(){return _e[$e[0]+"With"](this===_e?ye:this,arguments),this},_e[$e[0]+"With"]=Xe.fireWith}),ye.promise(_e),H&&H.call(_e,_e),_e},when:function(H){var ee,oe,ye,_e=0,Pe=x.call(arguments),$e=Pe.length,Xe=$e!==1||H&&D.isFunction(H.promise)?$e:0,tt=Xe===1?H:D.Deferred(),ht=function(Dt,rt,_t){return function(Vt){rt[Dt]=this,_t[Dt]=arguments.length>1?x.call(arguments):Vt,_t===ee?tt.notifyWith(rt,_t):--Xe||tt.resolveWith(rt,_t)}};if($e>1)for(ee=new Array($e),oe=new Array($e),ye=new Array($e);$e>_e;_e++)Pe[_e]&&D.isFunction(Pe[_e].promise)?Pe[_e].promise().done(ht(_e,ye,Pe)).fail(tt.reject).progress(ht(_e,oe,ee)):--Xe;return Xe||tt.resolveWith(ye,Pe),tt.promise()}});var me;D.fn.ready=function(H){return D.ready.promise().done(H),this},D.extend({isReady:!1,readyWait:1,holdReady:function(H){H?D.readyWait++:D.ready(!0)},ready:function(H){(H===!0?--D.readyWait:D.isReady)||(D.isReady=!0,H!==!0&&--D.readyWait>0||(me.resolveWith(F,[D]),D.fn.triggerHandler&&(D(F).triggerHandler("ready"),D(F).off("ready"))))}}),D.ready.promise=function(H){return me||(me=D.Deferred(),F.readyState==="complete"?setTimeout(D.ready):(F.addEventListener("DOMContentLoaded",u,!1),s.addEventListener("load",u,!1))),me.promise(H)},D.ready.promise();var Ee=D.access=function(H,ee,oe,ye,_e,Pe,$e){var Xe=0,tt=H.length,ht=oe==null;if(D.type(oe)==="object"){_e=!0;for(Xe in oe)D.access(H,ee,Xe,oe[Xe],!0,Pe,$e)}else if(ye!==void 0&&(_e=!0,D.isFunction(ye)||($e=!0),ht&&($e?(ee.call(H,ye),ee=null):(ht=ee,ee=function(Dt,rt,_t){return ht.call(D(Dt),_t)})),ee))for(;tt>Xe;Xe++)ee(H[Xe],oe,$e?ye:ye.call(H[Xe],Xe,ee(H[Xe],oe)));return _e?H:ht?ee.call(H):tt?ee(H[0],oe):Pe};D.acceptData=function(H){return H.nodeType===1||H.nodeType===9||!+H.nodeType},c.uid=1,c.accepts=D.acceptData,c.prototype={key:function(H){if(!c.accepts(H))return 0;var ee={},oe=H[this.expando];if(!oe){oe=c.uid++;try{ee[this.expando]={value:oe},Object.defineProperties(H,ee)}catch{ee[this.expando]=oe,D.extend(H,ee)}}return this.cache[oe]||(this.cache[oe]={}),oe},set:function(H,ee,oe){var ye,_e=this.key(H),Pe=this.cache[_e];if(typeof ee=="string")Pe[ee]=oe;else if(D.isEmptyObject(Pe))D.extend(this.cache[_e],ee);else for(ye in ee)Pe[ye]=ee[ye];return Pe},get:function(H,ee){var oe=this.cache[this.key(H)];return ee===void 0?oe:oe[ee]},access:function(H,ee,oe){var ye;return ee===void 0||ee&&typeof ee=="string"&&oe===void 0?(ye=this.get(H,ee),ye!==void 0?ye:this.get(H,D.camelCase(ee))):(this.set(H,ee,oe),oe!==void 0?oe:ee)},remove:function(H,ee){var oe,ye,_e,Pe=this.key(H),$e=this.cache[Pe];if(ee===void 0)this.cache[Pe]={};else for(D.isArray(ee)?ye=ee.concat(ee.map(D.camelCase)):(_e=D.camelCase(ee),ee in $e?ye=[ee,_e]:(ye=_e,ye=ye in $e?[ye]:ye.match(ce)||[])),oe=ye.length;oe--;)delete $e[ye[oe]]},hasData:function(H){return!D.isEmptyObject(this.cache[H[this.expando]]||{})},discard:function(H){H[this.expando]&&delete this.cache[H[this.expando]]}};var xe=new c,Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,De=/([A-Z])/g;D.extend({hasData:function(H){return data_user.hasData(H)||xe.hasData(H)},data:function(H,ee,oe){return data_user.access(H,ee,oe)},removeData:function(H,ee){data_user.remove(H,ee)},_data:function(H,ee,oe){return xe.access(H,ee,oe)},_removeData:function(H,ee){xe.remove(H,ee)}}),D.fn.extend({data:function(H,ee){var oe,ye,_e,Pe=this[0],$e=Pe&&Pe.attributes;if(H===void 0){if(this.length&&(_e=data_user.get(Pe),Pe.nodeType===1&&!xe.get(Pe,"hasDataAttrs"))){for(oe=$e.length;oe--;)$e[oe]&&(ye=$e[oe].name,ye.indexOf("data-")===0&&(ye=D.camelCase(ye.slice(5)),f(Pe,ye,_e[ye])));xe.set(Pe,"hasDataAttrs",!0)}return _e}return typeof H=="object"?this.each(function(){data_user.set(this,H)}):Ee(this,function(Xe){var tt,ht=D.camelCase(H);if(Pe&&Xe===void 0){if(tt=data_user.get(Pe,H),tt!==void 0||(tt=data_user.get(Pe,ht),tt!==void 0)||(tt=f(Pe,ht,void 0),tt!==void 0))return tt}else this.each(function(){var Dt=data_user.get(this,ht);data_user.set(this,ht,Xe),H.indexOf("-")!==-1&&Dt!==void 0&&data_user.set(this,H,Xe)})},null,ee,arguments.length>1,null,!0)},removeData:function(H){return this.each(function(){data_user.remove(this,H)})}});var ie="undefined",Ie=/^key/,ke=/^(?:mouse|pointer|contextmenu)|click/,te=/^(?:focusinfocus|focusoutblur)$/,ne=/^([^.]*)(?:\.(.+)|)$/;D.event={global:{},add:function(H,ee,oe,ye,_e){var Pe,$e,Xe,tt,ht,Dt,rt,_t,Vt,Ir,Mr,Jn=xe.get(H);if(Jn)for(oe.handler&&(Pe=oe,oe=Pe.handler,_e=Pe.selector),oe.guid||(oe.guid=D.guid++),(tt=Jn.events)||(tt=Jn.events={}),($e=Jn.handle)||($e=Jn.handle=function(zo){return typeof D!==ie&&D.event.triggered!==zo.type?D.event.dispatch.apply(H,arguments):void 0}),ee=(ee||"").match(ce)||[""],ht=ee.length;ht--;)Xe=ne.exec(ee[ht])||[],Vt=Mr=Xe[1],Ir=(Xe[2]||"").split(".").sort(),Vt&&(rt=D.event.special[Vt]||{},Vt=(_e?rt.delegateType:rt.bindType)||Vt,rt=D.event.special[Vt]||{},Dt=D.extend({type:Vt,origType:Mr,data:ye,handler:oe,guid:oe.guid,selector:_e,needsContext:_e&&D.expr.match.needsContext.test(_e),namespace:Ir.join(".")},Pe),(_t=tt[Vt])||(_t=tt[Vt]=[],_t.delegateCount=0,rt.setup&&rt.setup.call(H,ye,Ir,$e)!==!1||H.addEventListener&&H.addEventListener(Vt,$e,!1)),rt.add&&(rt.add.call(H,Dt),Dt.handler.guid||(Dt.handler.guid=oe.guid)),_e?_t.splice(_t.delegateCount++,0,Dt):_t.push(Dt),D.event.global[Vt]=!0)},remove:function(H,ee,oe,ye,_e){var Pe,$e,Xe,tt,ht,Dt,rt,_t,Vt,Ir,Mr,Jn=xe.hasData(H)&&xe.get(H);if(Jn&&(tt=Jn.events)){for(ee=(ee||"").match(ce)||[""],ht=ee.length;ht--;)if(Xe=ne.exec(ee[ht])||[],Vt=Mr=Xe[1],Ir=(Xe[2]||"").split(".").sort(),Vt){for(rt=D.event.special[Vt]||{},Vt=(ye?rt.delegateType:rt.bindType)||Vt,_t=tt[Vt]||[],Xe=Xe[2]&&new RegExp("(^|\\.)"+Ir.join("\\.(?:.*\\.|)")+"(\\.|$)"),$e=Pe=_t.length;Pe--;)Dt=_t[Pe],!_e&&Mr!==Dt.origType||oe&&oe.guid!==Dt.guid||Xe&&!Xe.test(Dt.namespace)||ye&&ye!==Dt.selector&&(ye!=="**"||!Dt.selector)||(_t.splice(Pe,1),Dt.selector&&_t.delegateCount--,rt.remove&&rt.remove.call(H,Dt));$e&&!_t.length&&(rt.teardown&&rt.teardown.call(H,Ir,Jn.handle)!==!1||D.removeEvent(H,Vt,Jn.handle),delete tt[Vt])}else for(Vt in tt)D.event.remove(H,Vt+ee[ht],oe,ye,!0);D.isEmptyObject(tt)&&(delete Jn.handle,xe.remove(H,"events"))}},trigger:function(H,ee,oe,ye){var _e,Pe,$e,Xe,tt,ht,Dt,rt=[oe||F],_t=R.call(H,"type")?H.type:H,Vt=R.call(H,"namespace")?H.namespace.split("."):[];if(Pe=$e=oe=oe||F,oe.nodeType!==3&&oe.nodeType!==8&&!te.test(_t+D.event.triggered)&&(_t.indexOf(".")>=0&&(Vt=_t.split("."),_t=Vt.shift(),Vt.sort()),tt=_t.indexOf(":")<0&&"on"+_t,H=H[D.expando]?H:new D.Event(_t,typeof H=="object"&&H),H.isTrigger=ye?2:3,H.namespace=Vt.join("."),H.namespace_re=H.namespace?new RegExp("(^|\\.)"+Vt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,H.result=void 0,H.target||(H.target=oe),ee=ee==null?[H]:D.makeArray(ee,[H]),Dt=D.event.special[_t]||{},ye||!Dt.trigger||Dt.trigger.apply(oe,ee)!==!1)){if(!ye&&!Dt.noBubble&&!D.isWindow(oe)){for(Xe=Dt.delegateType||_t,te.test(Xe+_t)||(Pe=Pe.parentNode);Pe;Pe=Pe.parentNode)rt.push(Pe),$e=Pe;$e===(oe.ownerDocument||F)&&rt.push($e.defaultView||$e.parentWindow||s)}for(_e=0;(Pe=rt[_e++])&&!H.isPropagationStopped();)H.type=_e>1?Xe:Dt.bindType||_t,ht=(xe.get(Pe,"events")||{})[H.type]&&xe.get(Pe,"handle"),ht&&ht.apply(Pe,ee),ht=tt&&Pe[tt],ht&&ht.apply&&D.acceptData(Pe)&&(H.result=ht.apply(Pe,ee),H.result===!1&&H.preventDefault());return H.type=_t,ye||H.isDefaultPrevented()||Dt._default&&Dt._default.apply(rt.pop(),ee)!==!1||!D.acceptData(oe)||tt&&D.isFunction(oe[_t])&&!D.isWindow(oe)&&($e=oe[tt],$e&&(oe[tt]=null),D.event.triggered=_t,oe[_t](),D.event.triggered=void 0,$e&&(oe[tt]=$e)),H.result}},dispatch:function(H){H=D.event.fix(H);var ee,oe,ye,_e,Pe,$e=[],Xe=x.call(arguments),tt=(xe.get(this,"events")||{})[H.type]||[],ht=D.event.special[H.type]||{};if(Xe[0]=H,H.delegateTarget=this,!ht.preDispatch||ht.preDispatch.call(this,H)!==!1){for($e=D.event.handlers.call(this,H,tt),ee=0;(_e=$e[ee++])&&!H.isPropagationStopped();)for(H.currentTarget=_e.elem,oe=0;(Pe=_e.handlers[oe++])&&!H.isImmediatePropagationStopped();)H.namespace_re&&!H.namespace_re.test(Pe.namespace)||(H.handleObj=Pe,H.data=Pe.data,ye=((D.event.special[Pe.origType]||{}).handle||Pe.handler).apply(_e.elem,Xe),ye!==void 0&&(H.result=ye)===!1&&(H.preventDefault(),H.stopPropagation()));return ht.postDispatch&&ht.postDispatch.call(this,H),H.result}},handlers:function(H,ee){var oe,ye,_e,Pe,$e=[],Xe=ee.delegateCount,tt=H.target;if(Xe&&tt.nodeType&&(!H.button||H.type!=="click")){for(;tt!==this;tt=tt.parentNode||this)if(tt.disabled!==!0||H.type!=="click"){for(ye=[],oe=0;Xe>oe;oe++)Pe=ee[oe],_e=Pe.selector+" ",ye[_e]===void 0&&(ye[_e]=Pe.needsContext?D(_e,this).index(tt)>=0:D.find(_e,this,null,[tt]).length),ye[_e]&&ye.push(Pe);ye.length&&$e.push({elem:tt,handlers:ye})}}return Xe<ee.length&&$e.push({elem:this,handlers:ee.slice(Xe)}),$e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(H,ee){return H.which==null&&(H.which=ee.charCode!=null?ee.charCode:ee.keyCode),H}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(H,ee){var oe,ye,_e,Pe=ee.button;return H.pageX==null&&ee.clientX!=null&&(oe=H.target.ownerDocument||F,ye=oe.documentElement,_e=oe.body,H.pageX=ee.clientX+(ye&&ye.scrollLeft||_e&&_e.scrollLeft||0)-(ye&&ye.clientLeft||_e&&_e.clientLeft||0),H.pageY=ee.clientY+(ye&&ye.scrollTop||_e&&_e.scrollTop||0)-(ye&&ye.clientTop||_e&&_e.clientTop||0)),H.which||Pe===void 0||(H.which=1&Pe?1:2&Pe?3:4&Pe?2:0),H}},fix:function(H){if(H[D.expando])return H;var ee,oe,ye,_e=H.type,Pe=H,$e=this.fixHooks[_e];for($e||(this.fixHooks[_e]=$e=ke.test(_e)?this.mouseHooks:Ie.test(_e)?this.keyHooks:{}),ye=$e.props?this.props.concat($e.props):this.props,H=new D.Event(Pe),ee=ye.length;ee--;)oe=ye[ee],H[oe]=Pe[oe];return H.target||(H.target=F),H.target.nodeType===3&&(H.target=H.target.parentNode),$e.filter?$e.filter(H,Pe):H},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==p()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return this.type==="checkbox"&&this.click&&D.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(H){return D.nodeName(H.target,"a")}},beforeunload:{postDispatch:function(H){H.result!==void 0&&H.originalEvent&&(H.originalEvent.returnValue=H.result)}}},simulate:function(H,ee,oe,ye){var _e=D.extend(new D.Event,oe,{type:H,isSimulated:!0,originalEvent:{}});ye?D.event.trigger(_e,null,ee):D.event.dispatch.call(ee,_e),_e.isDefaultPrevented()&&oe.preventDefault()}},D.removeEvent=function(H,ee,oe){H.removeEventListener&&H.removeEventListener(ee,oe,!1)},D.Event=function(H,ee){return this instanceof D.Event?(H&&H.type?(this.originalEvent=H,this.type=H.type,this.isDefaultPrevented=H.defaultPrevented||H.defaultPrevented===void 0&&H.returnValue===!1?d:h):this.type=H,ee&&D.extend(this,ee),this.timeStamp=H&&H.timeStamp||D.now(),void(this[D.expando]=!0)):new D.Event(H,ee)},D.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var H=this.originalEvent;this.isDefaultPrevented=d,H&&H.preventDefault&&H.preventDefault()},stopPropagation:function(){var H=this.originalEvent;this.isPropagationStopped=d,H&&H.stopPropagation&&H.stopPropagation()},stopImmediatePropagation:function(){var H=this.originalEvent;this.isImmediatePropagationStopped=d,H&&H.stopImmediatePropagation&&H.stopImmediatePropagation(),this.stopPropagation()}},D.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(H,ee){D.event.special[H]={delegateType:ee,bindType:ee,handle:function(oe){var ye,_e=this,Pe=oe.relatedTarget,$e=oe.handleObj;return Pe&&(Pe===_e||D.contains(_e,Pe))||(oe.type=$e.origType,ye=$e.handler.apply(this,arguments),oe.type=ee),ye}}}),U.focusinBubbles||D.each({focus:"focusin",blur:"focusout"},function(H,ee){var oe=function(ye){D.event.simulate(ee,ye.target,D.event.fix(ye),!0)};D.event.special[ee]={setup:function(){var ye=this.ownerDocument||this,_e=xe.access(ye,ee);_e||ye.addEventListener(H,oe,!0),xe.access(ye,ee,(_e||0)+1)},teardown:function(){var ye=this.ownerDocument||this,_e=xe.access(ye,ee)-1;_e?xe.access(ye,ee,_e):(ye.removeEventListener(H,oe,!0),xe.remove(ye,ee))}}}),D.fn.extend({on:function(H,ee,oe,ye,_e){var Pe,$e;if(typeof H=="object"){typeof ee!="string"&&(oe=oe||ee,ee=void 0);for($e in H)this.on($e,ee,oe,H[$e],_e);return this}if(oe==null&&ye==null?(ye=ee,oe=ee=void 0):ye==null&&(typeof ee=="string"?(ye=oe,oe=void 0):(ye=oe,oe=ee,ee=void 0)),ye===!1)ye=h;else if(!ye)return this;return _e===1&&(Pe=ye,ye=function(Xe){return D().off(Xe),Pe.apply(this,arguments)},ye.guid=Pe.guid||(Pe.guid=D.guid++)),this.each(function(){D.event.add(this,H,ye,oe,ee)})},one:function(H,ee,oe,ye){return this.on(H,ee,oe,ye,1)},off:function(H,ee,oe){var ye,_e;if(H&&H.preventDefault&&H.handleObj)return ye=H.handleObj,D(H.delegateTarget).off(ye.namespace?ye.origType+"."+ye.namespace:ye.origType,ye.selector,ye.handler),this;if(typeof H=="object"){for(_e in H)this.off(_e,ee,H[_e]);return this}return ee!==!1&&typeof ee!="function"||(oe=ee,ee=void 0),oe===!1&&(oe=h),this.each(function(){D.event.remove(this,H,oe,ee)})},trigger:function(H,ee){return this.each(function(){D.event.trigger(H,ee,this)})},triggerHandler:function(H,ee){var oe=this[0];return oe?D.event.trigger(H,ee,oe,!0):void 0}});var Ce=D.now(),se=/\?/;D.parseJSON=function(H){return JSON.parse(H+"")},D.parseXML=function(H){var ee,oe;if(!H||typeof H!="string")return null;try{oe=new DOMParser,ee=oe.parseFromString(H,"text/xml")}catch{ee=void 0}return ee&&!ee.getElementsByTagName("parsererror").length||D.error("Invalid XML: "+H),ee};var j,G,fe=/#.*$/,Me=/([?&])_=[^&]*/,q=/^(.*?):[ \t]*([^\r\n]*)$/gm,J=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,be=/^(?:GET|HEAD)$/,Se=/^\/\//,Ne=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Fe={},He={},Oe="*/".concat("*");try{G=location.href}catch{G=F.createElement("a"),G.href="",G=G.href}j=Ne.exec(G.toLowerCase())||[],D.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:G,type:"GET",isLocal:J.test(j[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":D.parseJSON,"text xml":D.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(H,ee){return ee?m(m(H,D.ajaxSettings),ee):m(D.ajaxSettings,H)},ajaxPrefilter:v(Fe),ajaxTransport:v(He),ajax:function(H,ee){function oe(Ue,Ve,Ge,yt){var wt,It,ft,St,Bt,Rt=Ve;bi!==2&&(bi=2,Xe&&clearTimeout(Xe),ye=void 0,Pe=yt||"",Le.readyState=Ue>0?4:0,wt=Ue>=200&&300>Ue||Ue===304,Ge&&(St=S(rt,Le,Ge)),St=b(rt,St,Le,wt),wt?(rt.ifModified&&(Bt=Le.getResponseHeader("Last-Modified"),Bt&&(D.lastModified[_e]=Bt),Bt=Le.getResponseHeader("etag"),Bt&&(D.etag[_e]=Bt)),Ue===204||rt.type==="HEAD"?Rt="nocontent":Ue===304?Rt="notmodified":(Rt=St.state,It=St.data,ft=St.error,wt=!ft)):(ft=Rt,!Ue&&Rt||(Rt="error",0>Ue&&(Ue=0))),Le.status=Ue,Le.statusText=(Ve||Rt)+"",wt?Ir.resolveWith(_t,[It,Rt,Le]):Ir.rejectWith(_t,[Le,Rt,ft]),Le.statusCode(Jn),Jn=void 0,ht&&Vt.trigger(wt?"ajaxSuccess":"ajaxError",[Le,rt,wt?It:ft]),Mr.fireWith(_t,[Le,Rt]),ht&&(Vt.trigger("ajaxComplete",[Le,rt]),--D.active||D.event.trigger("ajaxStop")))}typeof H=="object"&&(ee=H,H=void 0),ee=ee||{};var ye,_e,Pe,$e,Xe,tt,ht,Dt,rt=D.ajaxSetup({},ee),_t=rt.context||rt,Vt=rt.context&&(_t.nodeType||_t.jquery)?D(_t):D.event,Ir=D.Deferred(),Mr=D.Callbacks("once memory"),Jn=rt.statusCode||{},zo={},Fu={},bi=0,he="canceled",Le={readyState:0,getResponseHeader:function(Ue){var Ve;if(bi===2){if(!$e)for($e={};Ve=q.exec(Pe);)$e[Ve[1].toLowerCase()]=Ve[2];Ve=$e[Ue.toLowerCase()]}return Ve??null},getAllResponseHeaders:function(){return bi===2?Pe:null},setRequestHeader:function(Ue,Ve){var Ge=Ue.toLowerCase();return bi||(Ue=Fu[Ge]=Fu[Ge]||Ue,zo[Ue]=Ve),this},overrideMimeType:function(Ue){return bi||(rt.mimeType=Ue),this},statusCode:function(Ue){var Ve;if(Ue)if(2>bi)for(Ve in Ue)Jn[Ve]=[Jn[Ve],Ue[Ve]];else Le.always(Ue[Le.status]);return this},abort:function(Ue){var Ve=Ue||he;return ye&&ye.abort(Ve),oe(0,Ve),this}};if(Ir.promise(Le).complete=Mr.add,Le.success=Le.done,Le.error=Le.fail,rt.url=((H||rt.url||G)+"").replace(fe,"").replace(Se,j[1]+"//"),rt.type=ee.method||ee.type||rt.method||rt.type,rt.dataTypes=D.trim(rt.dataType||"*").toLowerCase().match(ce)||[""],rt.crossDomain==null&&(tt=Ne.exec(rt.url.toLowerCase()),rt.crossDomain=!(!tt||tt[1]===j[1]&&tt[2]===j[2]&&(tt[3]||(tt[1]==="http:"?"80":"443"))===(j[3]||(j[1]==="http:"?"80":"443")))),rt.data&&rt.processData&&typeof rt.data!="string"&&(rt.data=D.param(rt.data,rt.traditional)),y(Fe,rt,ee,Le),bi===2)return Le;ht=rt.global,ht&&D.active++===0&&D.event.trigger("ajaxStart"),rt.type=rt.type.toUpperCase(),rt.hasContent=!be.test(rt.type),_e=rt.url,rt.hasContent||(rt.data&&(_e=rt.url+=(se.test(_e)?"&":"?")+rt.data,delete rt.data),rt.cache===!1&&(rt.url=Me.test(_e)?_e.replace(Me,"$1_="+Ce++):_e+(se.test(_e)?"&":"?")+"_="+Ce++)),rt.ifModified&&(D.lastModified[_e]&&Le.setRequestHeader("If-Modified-Since",D.lastModified[_e]),D.etag[_e]&&Le.setRequestHeader("If-None-Match",D.etag[_e])),(rt.data&&rt.hasContent&&rt.contentType!==!1||ee.contentType)&&Le.setRequestHeader("Content-Type",rt.contentType),Le.setRequestHeader("Accept",rt.dataTypes[0]&&rt.accepts[rt.dataTypes[0]]?rt.accepts[rt.dataTypes[0]]+(rt.dataTypes[0]!=="*"?", "+Oe+"; q=0.01":""):rt.accepts["*"]);for(Dt in rt.headers)Le.setRequestHeader(Dt,rt.headers[Dt]);if(rt.beforeSend&&(rt.beforeSend.call(_t,Le,rt)===!1||bi===2))return Le.abort();he="abort";for(Dt in{success:1,error:1,complete:1})Le[Dt](rt[Dt]);if(ye=y(He,rt,ee,Le)){Le.readyState=1,ht&&Vt.trigger("ajaxSend",[Le,rt]),rt.async&&rt.timeout>0&&(Xe=setTimeout(function(){Le.abort("timeout")},rt.timeout));try{bi=1,ye.send(zo,oe)}catch(Ue){if(!(2>bi))throw Ue;oe(-1,Ue)}}else oe(-1,"No Transport");return Le},getJSON:function(H,ee,oe){return D.get(H,ee,oe,"json")},getScript:function(H,ee){return D.get(H,void 0,ee,"script")}}),D.each(["get","post"],function(H,ee){D[ee]=function(oe,ye,_e,Pe){return D.isFunction(ye)&&(Pe=Pe||_e,_e=ye,ye=void 0),D.ajax({url:oe,type:ee,dataType:Pe,data:ye,success:_e})}}),D.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(H,ee){D.fn[ee]=function(oe){return this.on(ee,oe)}});var Je=/%20/g,qe=/\[\]$/,lt=/\r?\n/g,at=/^(?:submit|button|image|reset|file)$/i,ge=/^(?:input|select|textarea|keygen)/i;D.param=function(H,ee){var oe,ye=[],_e=function(Pe,$e){$e=D.isFunction($e)?$e():$e??"",ye[ye.length]=encodeURIComponent(Pe)+"="+encodeURIComponent($e)};if(ee===void 0&&(ee=D.ajaxSettings&&D.ajaxSettings.traditional),D.isArray(H)||H.jquery&&!D.isPlainObject(H))D.each(H,function(){_e(this.name,this.value)});else for(oe in H)g(oe,H[oe],ee,_e);return ye.join("&").replace(Je,"+")},D.fn.extend({serialize:function(){return D.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var H=D.prop(this,"elements");return H?D.makeArray(H):this}).filter(function(){var H=this.type;return this.name&&!D(this).is(":disabled")&&ge.test(this.nodeName)&&!at.test(H)&&(this.checked||!rcheckableType.test(H))}).map(function(H,ee){var oe=D(this).val();return oe==null?null:D.isArray(oe)?D.map(oe,function(ye){return{name:ee.name,value:ye.replace(lt,`\r
`)}}):{name:ee.name,value:oe.replace(lt,`\r
`)}}).get()}}),D.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch{}};var We=0,W={},pe={0:200,1223:204},Re=D.ajaxSettings.xhr();s.ActiveXObject&&D(s).on("unload",function(){for(var H in W)W[H]()}),U.cors=!!Re&&"withCredentials"in Re,U.ajax=Re=!!Re,D.ajaxTransport(function(H){var ee;return U.cors||Re&&!H.crossDomain?{send:function(oe,ye){var _e,Pe=H.xhr(),$e=++We;if(Pe.open(H.type,H.url,H.async,H.username,H.password),H.xhrFields)for(_e in H.xhrFields)Pe[_e]=H.xhrFields[_e];H.mimeType&&Pe.overrideMimeType&&Pe.overrideMimeType(H.mimeType),H.crossDomain||oe["X-Requested-With"]||(oe["X-Requested-With"]="XMLHttpRequest");for(_e in oe)Pe.setRequestHeader(_e,oe[_e]);ee=function(Xe){return function(){ee&&(delete W[$e],ee=Pe.onload=Pe.onerror=null,Xe==="abort"?Pe.abort():Xe==="error"?ye(Pe.status,Pe.statusText):ye(pe[Pe.status]||Pe.status,Pe.statusText,typeof Pe.responseText=="string"?{text:Pe.responseText}:void 0,Pe.getAllResponseHeaders()))}},Pe.onload=ee(),Pe.onerror=ee("error"),ee=W[$e]=ee("abort");try{Pe.send(H.hasContent&&H.data||null)}catch(Xe){if(ee)throw Xe}},abort:function(){ee&&ee()}}:void 0}),D.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(H){return D.globalEval(H),H}}}),D.ajaxPrefilter("script",function(H){H.cache===void 0&&(H.cache=!1),H.crossDomain&&(H.type="GET")}),D.ajaxTransport("script",function(H){if(H.crossDomain){var ee,oe;return{send:function(ye,_e){ee=D("<script>").prop({async:!0,charset:H.scriptCharset,src:H.url}).on("load error",oe=function(Pe){ee.remove(),oe=null,Pe&&_e(Pe.type==="error"?404:200,Pe.type)}),F.head.appendChild(ee[0])},abort:function(){oe&&oe()}}}});var Ye=[],de=/(=)\?(?=&|$)|\?\?/;D.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var H=Ye.pop()||D.expando+"_"+Ce++;return this[H]=!0,H}}),D.ajaxPrefilter("json jsonp",function(H,ee,oe){var ye,_e,Pe,$e=H.jsonp!==!1&&(de.test(H.url)?"url":typeof H.data=="string"&&!(H.contentType||"").indexOf("application/x-www-form-urlencoded")&&de.test(H.data)&&"data");return $e||H.dataTypes[0]==="jsonp"?(ye=H.jsonpCallback=D.isFunction(H.jsonpCallback)?H.jsonpCallback():H.jsonpCallback,$e?H[$e]=H[$e].replace(de,"$1"+ye):H.jsonp!==!1&&(H.url+=(se.test(H.url)?"&":"?")+H.jsonp+"="+ye),H.converters["script json"]=function(){return Pe||D.error(ye+" was not called"),Pe[0]},H.dataTypes[0]="json",_e=s[ye],s[ye]=function(){Pe=arguments},oe.always(function(){s[ye]=_e,H[ye]&&(H.jsonpCallback=ee.jsonpCallback,Ye.push(ye)),Pe&&D.isFunction(_e)&&_e(Pe[0]),Pe=_e=void 0}),"script"):void 0}),D.parseHTML=function(H,ee,oe){if(!H||typeof H!="string")return null;typeof ee=="boolean"&&(oe=ee,ee=!1),ee=ee||F;var ye=Q.exec(H),_e=!oe&&[];return ye?[ee.createElement(ye[1])]:(ye=D.buildFragment([H],ee,_e),_e&&_e.length&&D(_e).remove(),D.merge([],ye.childNodes))};var Ze=D.fn.load;return D.fn.load=function(H,ee,oe){if(typeof H!="string"&&Ze)return Ze.apply(this,arguments);var ye,_e,Pe,$e=this,Xe=H.indexOf(" ");return Xe>=0&&(ye=D.trim(H.slice(Xe)),H=H.slice(0,Xe)),D.isFunction(ee)?(oe=ee,ee=void 0):ee&&typeof ee=="object"&&(_e="POST"),$e.length>0&&D.ajax({url:H,type:_e,dataType:"html",data:ee}).done(function(tt){Pe=arguments,$e.html(ye?D("<div>").append(D.parseHTML(tt)).find(ye):tt)}).complete(oe&&function(tt,ht){$e.each(oe,Pe||[tt.responseText,ht,tt])}),this},D.noConflict=function(){},D})},{}],12:[function(t,r,i){r.exports=function(s){return{reload:function(){return s.location.reload()},getHash:function(){return s.location.hash},setHash:function(a){return s.location.hash=a},changeHref:function(a){return s.location.href=a}}}},{}],13:[function(t,r,i){var s;s=function(a){var o;return o=localStorage.getItem("oauthio_cache"),o=o?JSON.parse(o):{},a(o,function(){return localStorage.setItem("oauthio_cache",JSON.stringify(o))})},r.exports={init:function(a,o){return this.config=a,this.document=o},active:function(){return typeof localStorage<"u"&&localStorage!==null},create:function(a,o,l){var u;this.erase(a),u=new Date,localStorage.setItem(a,o),s(function(c,f){return c[a]=l?u.getTime()+1e3*(l||1200):!1,f()})},read:function(a){return s(function(o,l){return o[a]==null?null:o[a]===!1?localStorage.getItem(a):new Date().getTime()>o[a]?(localStorage.removeItem(a),delete o[a],l(),null):localStorage.getItem(a)})},erase:function(a){return s(function(o,l){return localStorage.removeItem(a),delete o[a],l()})},eraseFrom:function(a){s(function(o,l){var u,c,f,d;for(u=Object.keys(o),c=0,f=u.length;f>c;c++)d=u[c],d.substr(0,a.length)===a&&(localStorage.removeItem(d),delete o[d]);return l()})}}},{}],14:[function(t,r,i){var s,a;a=0,s="",r.exports={hex_sha1:function(o){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(o)))},b64_sha1:function(o){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(o)))},any_sha1:function(o,l){return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(o)),l)},hex_hmac_sha1:function(o,l){return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(o),this.str2rstr_utf8(l)))},b64_hmac_sha1:function(o,l){return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(o),this.str2rstr_utf8(l)))},any_hmac_sha1:function(o,l,u){return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(o),this.str2rstr_utf8(l)),u)},sha1_vm_test:function(){return thishex_sha1("abc").toLowerCase()==="a9993e364706816aba3e25717850c26c9cd0d89d"},rstr_sha1:function(o){return this.binb2rstr(this.binb_sha1(this.rstr2binb(o),8*o.length))},rstr_hmac_sha1:function(o,l){var u,c,f,d,h;for(u=this.rstr2binb(o),u.length>16&&(u=this.binb_sha1(u,8*o.length)),d=Array(16),h=Array(16),f=0;16>f;)d[f]=909522486^u[f],h[f]=1549556828^u[f],f++;return c=this.binb_sha1(d.concat(this.rstr2binb(l)),512+8*l.length),this.binb2rstr(this.binb_sha1(h.concat(c),672))},rstr2hex:function(o){var l,u,c,f;for(l=a?"0123456789ABCDEF":"0123456789abcdef",c="",f=void 0,u=0;u<o.length;)f=o.charCodeAt(u),c+=l.charAt(f>>>4&15)+l.charAt(15&f),u++;return c},rstr2b64:function(o){var l,u,c,f,d,h;for(d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="",c=o.length,l=0;c>l;){for(h=o.charCodeAt(l)<<16|(c>l+1?o.charCodeAt(l+1)<<8:0)|(c>l+2?o.charCodeAt(l+2):0),u=0;4>u;)f+=8*l+6*u>8*o.length?s:d.charAt(h>>>6*(3-u)&63),u++;l+=3}return f},rstr2any:function(o,l){var u,c,f,d,h,p,v,y,m;for(c=l.length,y=Array(),d=void 0,p=void 0,m=void 0,v=void 0,u=Array(Math.ceil(o.length/2)),d=0;d<u.length;)u[d]=o.charCodeAt(2*d)<<8|o.charCodeAt(2*d+1),d++;for(;u.length>0;){for(v=Array(),m=0,d=0;d<u.length;)m=(m<<16)+u[d],p=Math.floor(m/c),m-=p*c,(v.length>0||p>0)&&(v[v.length]=p),d++;y[y.length]=m,u=v}for(h="",d=y.length-1;d>=0;)h+=l.charAt(y[d]),d--;for(f=Math.ceil(8*o.length/(Math.log(l.length)/Math.log(2))),d=h.length;f>d;)h=l[0]+h,d++;return h},str2rstr_utf8:function(o){var l,u,c,f;for(u="",l=-1,c=void 0,f=void 0;++l<o.length;)c=o.charCodeAt(l),f=l+1<o.length?o.charCodeAt(l+1):0,c>=55296&&56319>=c&&f>=56320&&57343>=f&&(c=65536+((1023&c)<<10)+(1023&f),l++),127>=c?u+=String.fromCharCode(c):2047>=c?u+=String.fromCharCode(192|c>>>6&31,128|63&c):65535>=c?u+=String.fromCharCode(224|c>>>12&15,128|c>>>6&63,128|63&c):2097151>=c&&(u+=String.fromCharCode(240|c>>>18&7,128|c>>>12&63,128|c>>>6&63,128|63&c));return u},str2rstr_utf16le:function(o){var l,u;for(u="",l=0;l<o.length;)u+=String.fromCharCode(255&o.charCodeAt(l),o.charCodeAt(l)>>>8&255),l++;return u},str2rstr_utf16be:function(o){var l,u;for(u="",l=0;l<o.length;)u+=String.fromCharCode(o.charCodeAt(l)>>>8&255,255&o.charCodeAt(l)),l++;return u},rstr2binb:function(o){var l,u;for(u=Array(o.length>>2),l=0;l<u.length;)u[l]=0,l++;for(l=0;l<8*o.length;)u[l>>5]|=(255&o.charCodeAt(l/8))<<24-l%32,l+=8;return u},binb2rstr:function(o){var l,u;for(u="",l=0;l<32*o.length;)u+=String.fromCharCode(o[l>>5]>>>24-l%32&255),l+=8;return u},binb_sha1:function(o,l){var u,c,f,d,h,p,v,y,m,S,b,g,w,x;for(o[l>>5]|=128<<24-l%32,o[(l+64>>9<<4)+15]=l,x=Array(80),u=1732584193,c=-271733879,f=-1732584194,d=271733878,h=-1009589776,p=0;p<o.length;){for(y=u,m=c,S=f,b=d,g=h,v=0;80>v;)16>v?x[v]=o[p+v]:x[v]=this.bit_rol(x[v-3]^x[v-8]^x[v-14]^x[v-16],1),w=this.safe_add(this.safe_add(this.bit_rol(u,5),this.sha1_ft(v,c,f,d)),this.safe_add(this.safe_add(h,x[v]),this.sha1_kt(v))),h=d,d=f,f=this.bit_rol(c,30),c=u,u=w,v++;u=this.safe_add(u,y),c=this.safe_add(c,m),f=this.safe_add(f,S),d=this.safe_add(d,b),h=this.safe_add(h,g),p+=16}return Array(u,c,f,d,h)},sha1_ft:function(o,l,u,c){return 20>o?l&u|~l&c:40>o?l^u^c:60>o?l&u|l&c|u&c:l^u^c},sha1_kt:function(o){return 20>o?1518500249:40>o?1859775393:60>o?-1894007588:-899497514},safe_add:function(o,l){var u,c;return u=(65535&o)+(65535&l),c=(o>>16)+(l>>16)+(u>>16),c<<16|65535&u},bit_rol:function(o,l){return o<<l|o>>>32-l},create_hash:function(){var o;return o=this.b64_sha1(new Date().getTime()+":"+Math.floor(9999999*Math.random())),o.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}}},{}],15:[function(t,r,i){r.exports=function(s){return{getAbsUrl:function(a){var o;return a.match(/^.{2,5}:\/\//)?a:a[0]==="/"?s.location.protocol+"//"+s.location.host+a:(o=s.location.protocol+"//"+s.location.host+s.location.pathname,o[o.length-1]!=="/"&&a[0]!=="#"?o+"/"+a:o+a)},replaceParam:function(a,o,l){return a=a.replace(/\{\{(.*?)\}\}/g,function(u,c){return o[c]||""}),l&&(a=a.replace(/\{(.*?)\}/g,function(u,c){return l[c]||""})),a}}}},{}]},{},[8])(8)})})(aH);var I2=aH.exports;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jv(){return jv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jv.apply(this,arguments)}var mc;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(mc||(mc={}));const EL="popstate";function Yre(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return ET("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Kw(i)}return Zre(e,t,null,n)}function Yr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function oH(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Kre(){return Math.random().toString(36).substr(2,8)}function ML(n,e){return{usr:n.state,key:n.key,idx:e}}function ET(n,e,t,r){return t===void 0&&(t=null),jv({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?gm(e):e,{state:t,key:e&&e.key||r||Kre()})}function Kw(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gm(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function Zre(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=mc.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(jv({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function f(){o=mc.Pop;let y=c(),m=y==null?null:y-u;u=y,l&&l({action:o,location:v.location,delta:m})}function d(y,m){o=mc.Push;let S=ET(v.location,y,m);u=c()+1;let b=ML(S,u),g=v.createHref(S);try{a.pushState(b,"",g)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(g)}s&&l&&l({action:o,location:v.location,delta:1})}function h(y,m){o=mc.Replace;let S=ET(v.location,y,m);u=c();let b=ML(S,u),g=v.createHref(S);a.replaceState(b,"",g),s&&l&&l({action:o,location:v.location,delta:0})}function p(y){let m=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof y=="string"?y:Kw(y);return S=S.replace(/ $/,"%20"),Yr(m,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,m)}let v={get action(){return o},get location(){return n(i,a)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(EL,f),l=y,()=>{i.removeEventListener(EL,f),l=null}},createHref(y){return e(i,y)},createURL:p,encodeLocation(y){let m=p(y);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:d,replace:h,go(y){return a.go(y)}};return v}var CL;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(CL||(CL={}));function Jre(n,e,t){t===void 0&&(t="/");let r=typeof e=="string"?gm(e):e,i=lP(r.pathname||"/",t);if(i==null)return null;let s=lH(n);Qre(s);let a=null;for(let o=0;a==null&&o<s.length;++o){let l=fie(i);a=lie(s[o],l)}return a}function lH(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Yr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Pc([r,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(Yr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),lH(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:aie(u,s.index),routesMeta:c})};return n.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of uH(s.path))i(s,a,l)}),e}function uH(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=uH(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function Qre(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:oie(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const eie=/^:[\w-]+$/,tie=3,nie=2,rie=1,iie=10,sie=-2,AL=n=>n==="*";function aie(n,e){let t=n.split("/"),r=t.length;return t.some(AL)&&(r+=sie),e&&(r+=nie),t.filter(i=>!AL(i)).reduce((i,s)=>i+(eie.test(s)?tie:s===""?rie:iie),r)}function oie(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function lie(n,e){let{routesMeta:t}=n,r={},i="/",s=[];for(let a=0;a<t.length;++a){let o=t[a],l=a===t.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=uie({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let f=o.route;s.push({params:r,pathname:Pc([i,c.pathname]),pathnameBase:mie(Pc([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Pc([i,c.pathnameBase]))}return s}function uie(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=cie(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let v=o[f]||"";a=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const p=o[f];return h&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:n}}function cie(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),oH(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function fie(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oH(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function lP(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function die(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?gm(n):n;return{pathname:t?t.startsWith("/")?t:hie(t,e):e,search:gie(r),hash:vie(i)}}function hie(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function k2(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pie(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cH(n,e){let t=pie(n);return e?t.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function fH(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=gm(n):(i=jv({},n),Yr(!i.pathname||!i.pathname.includes("?"),k2("?","pathname","search",i)),Yr(!i.pathname||!i.pathname.includes("#"),k2("#","pathname","hash",i)),Yr(!i.search||!i.search.includes("#"),k2("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let f=e.length-1;if(!r&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}o=f>=0?e[f]:"/"}let l=die(i,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Pc=n=>n.join("/").replace(/\/\/+/g,"/"),mie=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),gie=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,vie=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function yie(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const dH=["post","put","patch","delete"];new Set(dH);const xie=["get",...dH];new Set(xie);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qv(){return qv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qv.apply(this,arguments)}const uP=z.createContext(null),bie=z.createContext(null),kd=z.createContext(null),O_=z.createContext(null),rf=z.createContext({outlet:null,matches:[],isDataRoute:!1}),hH=z.createContext(null);function wie(n,e){let{relative:t}=e===void 0?{}:e;ey()||Yr(!1);let{basename:r,navigator:i}=z.useContext(kd),{hash:s,pathname:a,search:o}=gH(n,{relative:t}),l=a;return r!=="/"&&(l=a==="/"?r:Pc([r,a])),i.createHref({pathname:l,search:o,hash:s})}function ey(){return z.useContext(O_)!=null}function I_(){return ey()||Yr(!1),z.useContext(O_).location}function pH(n){z.useContext(kd).static||z.useLayoutEffect(n)}function vm(){let{isDataRoute:n}=z.useContext(rf);return n?Iie():Sie()}function Sie(){ey()||Yr(!1);let n=z.useContext(uP),{basename:e,future:t,navigator:r}=z.useContext(kd),{matches:i}=z.useContext(rf),{pathname:s}=I_(),a=JSON.stringify(cH(i,t.v7_relativeSplatPath)),o=z.useRef(!1);return pH(()=>{o.current=!0}),z.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let f=fH(u,JSON.parse(a),s,c.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Pc([e,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[e,r,a,s,n])}function mH(){let{matches:n}=z.useContext(rf),e=n[n.length-1];return e?e.params:{}}function gH(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=z.useContext(kd),{matches:i}=z.useContext(rf),{pathname:s}=I_(),a=JSON.stringify(cH(i,r.v7_relativeSplatPath));return z.useMemo(()=>fH(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function _ie(n,e){return Eie(n,e)}function Eie(n,e,t,r){ey()||Yr(!1);let{navigator:i}=z.useContext(kd),{matches:s}=z.useContext(rf),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=I_(),c;if(e){var f;let y=typeof e=="string"?gm(e):e;l==="/"||(f=y.pathname)!=null&&f.startsWith(l)||Yr(!1),c=y}else c=u;let d=c.pathname||"/",h=d;if(l!=="/"){let y=l.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=Jre(n,{pathname:h}),v=Die(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:Pc([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Pc([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,t,r);return e&&v?z.createElement(O_.Provider,{value:{location:qv({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:mc.Pop}},v):v}function Mie(){let n=Oie(),e=yie(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:i},t):null,null)}const Cie=z.createElement(Mie,null);class Aie extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?z.createElement(rf.Provider,{value:this.props.routeContext},z.createElement(hH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tie(n){let{routeContext:e,match:t,children:r}=n,i=z.useContext(uP);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(rf.Provider,{value:e},r)}function Die(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if((s=t)!=null&&s.errors)n=t.matches;else return null}let a=n,o=(i=t)==null?void 0:i.errors;if(o!=null){let c=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);c>=0||Yr(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let f=a[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:d,errors:h}=t,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,f,d)=>{let h,p=!1,v=null,y=null;t&&(h=o&&f.route.id?o[f.route.id]:void 0,v=f.route.errorElement||Cie,l&&(u<0&&d===0?(p=!0,y=null):u===d&&(p=!0,y=f.route.hydrateFallbackElement||null)));let m=e.concat(a.slice(0,d+1)),S=()=>{let b;return h?b=v:p?b=y:f.route.Component?b=z.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,z.createElement(Tie,{match:f,routeContext:{outlet:c,matches:m,isDataRoute:t!=null},children:b})};return t&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?z.createElement(Aie,{location:t.location,revalidation:t.revalidation,component:v,error:h,children:S(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):S()},null)}var vH=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(vH||{}),Zw=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Zw||{});function Nie(n){let e=z.useContext(uP);return e||Yr(!1),e}function Pie(n){let e=z.useContext(bie);return e||Yr(!1),e}function Rie(n){let e=z.useContext(rf);return e||Yr(!1),e}function yH(n){let e=Rie(),t=e.matches[e.matches.length-1];return t.route.id||Yr(!1),t.route.id}function Oie(){var n;let e=z.useContext(hH),t=Pie(Zw.UseRouteError),r=yH(Zw.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Iie(){let{router:n}=Nie(vH.UseNavigateStable),e=yH(Zw.UseNavigateStable),t=z.useRef(!1);return pH(()=>{t.current=!0}),z.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,qv({fromRouteId:e},s)))},[n,e])}function Kb(n){Yr(!1)}function kie(n){let{basename:e="/",children:t=null,location:r,navigationType:i=mc.Pop,navigator:s,static:a=!1,future:o}=n;ey()&&Yr(!1);let l=e.replace(/^\/*/,"/"),u=z.useMemo(()=>({basename:l,navigator:s,static:a,future:qv({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=gm(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,v=z.useMemo(()=>{let y=lP(c,l);return y==null?null:{location:{pathname:y,search:f,hash:d,state:h,key:p},navigationType:i}},[l,c,f,d,h,p,i]);return v==null?null:z.createElement(kd.Provider,{value:u},z.createElement(O_.Provider,{children:t,value:v}))}function Lie(n){let{children:e,location:t}=n;return _ie(MT(e),t)}new Promise(()=>{});function MT(n,e){e===void 0&&(e=[]);let t=[];return z.Children.forEach(n,(r,i)=>{if(!z.isValidElement(r))return;let s=[...e,i];if(r.type===z.Fragment){t.push.apply(t,MT(r.props.children,s));return}r.type!==Kb&&Yr(!1),!r.props.index||!r.props.children||Yr(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=MT(r.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function CT(){return CT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},CT.apply(this,arguments)}function Fie(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Bie(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function zie(n,e){return n.button===0&&(!e||e==="_self")&&!Bie(n)}const Uie=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],$ie="6";try{window.__reactRouterVersion=$ie}catch{}const Vie="startTransition",TL=Mw[Vie];function Hie(n){let{basename:e,children:t,future:r,window:i}=n,s=z.useRef();s.current==null&&(s.current=Yre({window:i,v5Compat:!0}));let a=s.current,[o,l]=z.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},c=z.useCallback(f=>{u&&TL?TL(()=>l(f)):l(f)},[l,u]);return z.useLayoutEffect(()=>a.listen(c),[a,c]),z.createElement(kie,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:r})}const Wie=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xv=z.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,unstable_viewTransition:f}=e,d=Fie(e,Uie),{basename:h}=z.useContext(kd),p,v=!1;if(typeof u=="string"&&Gie.test(u)&&(p=u,Wie))try{let b=new URL(window.location.href),g=u.startsWith("//")?new URL(b.protocol+u):new URL(u),w=lP(g.pathname,h);g.origin===b.origin&&w!=null?u=w+g.search+g.hash:v=!0}catch{}let y=wie(u,{relative:i}),m=jie(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:f});function S(b){r&&r(b),b.defaultPrevented||m(b)}return z.createElement("a",CT({},d,{href:p||y,onClick:v||s?r:S,ref:t,target:l}))});var DL;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(DL||(DL={}));var NL;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(NL||(NL={}));function jie(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,unstable_viewTransition:o}=e===void 0?{}:e,l=vm(),u=I_(),c=gH(n,{relative:a});return z.useCallback(f=>{if(zie(f,t)){f.preventDefault();let d=r!==void 0?r:Kw(u)===Kw(c);l(n,{replace:d,state:i,preventScrollReset:s,relative:a,unstable_viewTransition:o})}},[u,l,c,r,i,t,n,s,a,o])}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xH=Symbol("Comlink.proxy"),qie=Symbol("Comlink.endpoint"),Xie=Symbol("Comlink.releaseProxy"),L2=Symbol("Comlink.finalizer"),Zb=Symbol("Comlink.thrown"),bH=n=>typeof n=="object"&&n!==null||typeof n=="function",Yie={canHandle:n=>bH(n)&&n[xH],serialize(n){const{port1:e,port2:t}=new MessageChannel;return SH(n,e),[t,[t]]},deserialize(n){return n.start(),EH(n)}},Kie={canHandle:n=>bH(n)&&Zb in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},wH=new Map([["proxy",Yie],["throw",Kie]]);function Zie(n,e){for(const t of n)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function SH(n,e=globalThis,t=["*"]){e.addEventListener("message",function r(i){if(!i||!i.data)return;if(!Zie(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:s,type:a,path:o}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(zf);let u;try{const c=o.slice(0,-1).reduce((d,h)=>d[h],n),f=o.reduce((d,h)=>d[h],n);switch(a){case"GET":u=f;break;case"SET":c[o.slice(-1)[0]]=zf(i.data.value),u=!0;break;case"APPLY":u=f.apply(c,l);break;case"CONSTRUCT":{const d=new f(...l);u=rse(d)}break;case"ENDPOINT":{const{port1:d,port2:h}=new MessageChannel;SH(n,h),u=nse(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[Zb]:0}}Promise.resolve(u).catch(c=>({value:c,[Zb]:0})).then(c=>{const[f,d]=eS(c);e.postMessage(Object.assign(Object.assign({},f),{id:s}),d),a==="RELEASE"&&(e.removeEventListener("message",r),_H(e),L2 in n&&typeof n[L2]=="function"&&n[L2]())}).catch(c=>{const[f,d]=eS({value:new TypeError("Unserializable return value"),[Zb]:0});e.postMessage(Object.assign(Object.assign({},f),{id:s}),d)})}),e.start&&e.start()}function Jie(n){return n.constructor.name==="MessagePort"}function _H(n){Jie(n)&&n.close()}function EH(n,e){return AT(n,[],e)}function G1(n){if(n)throw new Error("Proxy has been released and is not useable")}function MH(n){return Wh(n,{type:"RELEASE"}).then(()=>{_H(n)})}const Jw=new WeakMap,Qw="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{const e=(Jw.get(n)||0)-1;Jw.set(n,e),e===0&&MH(n)});function Qie(n,e){const t=(Jw.get(e)||0)+1;Jw.set(e,t),Qw&&Qw.register(n,e,n)}function ese(n){Qw&&Qw.unregister(n)}function AT(n,e=[],t=function(){}){let r=!1;const i=new Proxy(t,{get(s,a){if(G1(r),a===Xie)return()=>{ese(i),MH(n),r=!0};if(a==="then"){if(e.length===0)return{then:()=>i};const o=Wh(n,{type:"GET",path:e.map(l=>l.toString())}).then(zf);return o.then.bind(o)}return AT(n,[...e,a])},set(s,a,o){G1(r);const[l,u]=eS(o);return Wh(n,{type:"SET",path:[...e,a].map(c=>c.toString()),value:l},u).then(zf)},apply(s,a,o){G1(r);const l=e[e.length-1];if(l===qie)return Wh(n,{type:"ENDPOINT"}).then(zf);if(l==="bind")return AT(n,e.slice(0,-1));const[u,c]=PL(o);return Wh(n,{type:"APPLY",path:e.map(f=>f.toString()),argumentList:u},c).then(zf)},construct(s,a){G1(r);const[o,l]=PL(a);return Wh(n,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:o},l).then(zf)}});return Qie(i,n),i}function tse(n){return Array.prototype.concat.apply([],n)}function PL(n){const e=n.map(eS);return[e.map(t=>t[0]),tse(e.map(t=>t[1]))]}const CH=new WeakMap;function nse(n,e){return CH.set(n,e),n}function rse(n){return Object.assign(n,{[xH]:!0})}function eS(n){for(const[e,t]of wH)if(t.canHandle(n)){const[r,i]=t.serialize(n);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:n},CH.get(n)||[]]}function zf(n){switch(n.type){case"HANDLER":return wH.get(n.name).deserialize(n.value);case"RAW":return n.value}}function Wh(n,e,t){return new Promise(r=>{const i=ise();n.addEventListener("message",function s(a){!a.data||!a.data.id||a.data.id!==i||(n.removeEventListener("message",s),r(a.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:i},e),t)})}function ise(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function ot(){return ot=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ot.apply(null,arguments)}var AH={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function tn(n){return typeof n=="number"}function Jt(n){return!n||typeof n!="object"||typeof n.constructor!="function"?!1:n.isBigNumber===!0&&typeof n.constructor.prototype=="object"&&n.constructor.prototype.isBigNumber===!0||typeof n.constructor.isDecimal=="function"&&n.constructor.isDecimal(n)===!0}function Mo(n){return n&&typeof n=="object"&&Object.getPrototypeOf(n).isComplex===!0||!1}function Ld(n){return n&&typeof n=="object"&&Object.getPrototypeOf(n).isFraction===!0||!1}function zs(n){return n&&n.constructor.prototype.isUnit===!0||!1}function Ai(n){return typeof n=="string"}var _n=Array.isArray;function Ut(n){return n&&n.constructor.prototype.isMatrix===!0||!1}function _a(n){return Array.isArray(n)||Ut(n)}function Yv(n){return n&&n.isDenseMatrix&&n.constructor.prototype.isMatrix===!0||!1}function gc(n){return n&&n.isSparseMatrix&&n.constructor.prototype.isMatrix===!0||!1}function k_(n){return n&&n.constructor.prototype.isRange===!0||!1}function ty(n){return n&&n.constructor.prototype.isIndex===!0||!1}function TH(n){return typeof n=="boolean"}function DH(n){return n&&n.constructor.prototype.isResultSet===!0||!1}function cP(n){return n&&n.constructor.prototype.isHelp===!0||!1}function NH(n){return typeof n=="function"}function PH(n){return n instanceof Date}function RH(n){return n instanceof RegExp}function ny(n){return!!(n&&typeof n=="object"&&n.constructor===Object&&!Mo(n)&&!Ld(n))}function OH(n){return n===null}function IH(n){return n===void 0}function Uc(n){return n&&n.isAccessorNode===!0&&n.constructor.prototype.isNode===!0||!1}function ua(n){return n&&n.isArrayNode===!0&&n.constructor.prototype.isNode===!0||!1}function kH(n){return n&&n.isAssignmentNode===!0&&n.constructor.prototype.isNode===!0||!1}function LH(n){return n&&n.isBlockNode===!0&&n.constructor.prototype.isNode===!0||!1}function FH(n){return n&&n.isConditionalNode===!0&&n.constructor.prototype.isNode===!0||!1}function vn(n){return n&&n.isConstantNode===!0&&n.constructor.prototype.isNode===!0||!1}function TT(n){return vn(n)||Br(n)&&n.args.length===1&&vn(n.args[0])&&"-+~".includes(n.op)}function ym(n){return n&&n.isFunctionAssignmentNode===!0&&n.constructor.prototype.isNode===!0||!1}function bu(n){return n&&n.isFunctionNode===!0&&n.constructor.prototype.isNode===!0||!1}function Fd(n){return n&&n.isIndexNode===!0&&n.constructor.prototype.isNode===!0||!1}function In(n){return n&&n.isNode===!0&&n.constructor.prototype.isNode===!0||!1}function ry(n){return n&&n.isObjectNode===!0&&n.constructor.prototype.isNode===!0||!1}function Br(n){return n&&n.isOperatorNode===!0&&n.constructor.prototype.isNode===!0||!1}function wl(n){return n&&n.isParenthesisNode===!0&&n.constructor.prototype.isNode===!0||!1}function BH(n){return n&&n.isRangeNode===!0&&n.constructor.prototype.isNode===!0||!1}function zH(n){return n&&n.isRelationalNode===!0&&n.constructor.prototype.isNode===!0||!1}function ii(n){return n&&n.isSymbolNode===!0&&n.constructor.prototype.isNode===!0||!1}function fP(n){return n&&n.constructor.prototype.isChain===!0||!1}function $n(n){var e=typeof n;return e==="object"?n===null?"null":Jt(n)?"BigNumber":n.constructor&&n.constructor.name?n.constructor.name:"Object":e}function Xt(n){var e=typeof n;if(e==="number"||e==="string"||e==="boolean"||n===null||n===void 0)return n;if(typeof n.clone=="function")return n.clone();if(Array.isArray(n))return n.map(function(t){return Xt(t)});if(n instanceof Date)return new Date(n.valueOf());if(Jt(n))return n;if(ny(n))return Xg(n,Xt);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(n,")"))}function Xg(n,e){var t={};for(var r in n)gt(n,r)&&(t[r]=e(n[r]));return t}function UH(n,e){for(var t in e)gt(e,t)&&(n[t]=e[t]);return n}function $H(n,e){if(Array.isArray(e))throw new TypeError("Arrays are not supported by deepExtend");for(var t in e)if(gt(e,t)&&!(t in Object.prototype)&&!(t in Function.prototype))if(e[t]&&e[t].constructor===Object)n[t]===void 0&&(n[t]={}),n[t]&&n[t].constructor===Object?$H(n[t],e[t]):n[t]=e[t];else{if(Array.isArray(e[t]))throw new TypeError("Arrays are not supported by deepExtend");n[t]=e[t]}return n}function bd(n,e){var t,r,i;if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(r=0,i=n.length;r<i;r++)if(!bd(n[r],e[r]))return!1;return!0}else{if(typeof n=="function")return n===e;if(n instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in n)if(!(t in e)||!bd(n[t],e[t]))return!1;for(t in e)if(!(t in n))return!1;return!0}else return n===e}}function sse(n){var e={};return VH(n,e),e}function VH(n,e){for(var t in n)if(gt(n,t)){var r=n[t];typeof r=="object"&&r!==null?VH(r,e):e[t]=r}}function Jb(n,e,t){var r=!0,i;Object.defineProperty(n,e,{get:function(){return r&&(i=t(),r=!1),i},set:function(a){i=a,r=!1},configurable:!0,enumerable:!0})}function gt(n,e){return n&&Object.hasOwnProperty.call(n,e)}function ase(n){return n&&typeof n.factory=="function"}function ose(n,e){for(var t={},r=0;r<e.length;r++){var i=e[r],s=n[i];s!==void 0&&(t[i]=s)}return t}var RL=["Matrix","Array"],OL=["number","BigNumber","Fraction"];function lse(n,e){function t(r){if(r){var i=Xg(n,Xt);IL(r,"matrix",RL),IL(r,"number",OL),$H(n,r);var s=Xg(n,Xt),a=Xg(r,Xt);return e("config",s,i,a),s}else return Xg(n,Xt)}return t.MATRIX_OPTIONS=RL,t.NUMBER_OPTIONS=OL,Object.keys(AH).forEach(r=>{Object.defineProperty(t,r,{get:()=>n[r],enumerable:!0,configurable:!0})}),t}function IL(n,e,t){n[e]!==void 0&&!t.includes(n[e])&&console.warn('Warning: Unknown value "'+n[e]+'" for configuration option "'+e+'". Available options: '+t.map(r=>JSON.stringify(r)).join(", ")+".")}function kL(){return!0}function za(){return!1}function lh(){}const LL="Argument is not a typed-function.";function HH(){function n(q){return typeof q=="object"&&q!==null&&q.constructor===Object}const e=[{name:"number",test:function(q){return typeof q=="number"}},{name:"string",test:function(q){return typeof q=="string"}},{name:"boolean",test:function(q){return typeof q=="boolean"}},{name:"Function",test:function(q){return typeof q=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(q){return q instanceof Date}},{name:"RegExp",test:function(q){return q instanceof RegExp}},{name:"Object",test:n},{name:"null",test:function(q){return q===null}},{name:"undefined",test:function(q){return q===void 0}}],t={name:"any",test:kL,isAny:!0};let r,i,s=0,a={createCount:0};function o(q){const J=r.get(q);if(J)return J;let be='Unknown type "'+q+'"';const Se=q.toLowerCase();let Ne;for(Ne of i)if(Ne.toLowerCase()===Se){be+='. Did you mean "'+Ne+'" ?';break}throw new TypeError(be)}function l(q){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const be=J?o(J).index:i.length,Se=[];for(let Fe=0;Fe<q.length;++Fe){if(!q[Fe]||typeof q[Fe].name!="string"||typeof q[Fe].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const He=q[Fe].name;if(r.has(He))throw new TypeError('Duplicate type name "'+He+'"');Se.push(He),r.set(He,{name:He,test:q[Fe].test,isAny:q[Fe].isAny,index:be+Fe,conversionsTo:[]})}const Ne=i.slice(be);i=i.slice(0,be).concat(Se).concat(Ne);for(let Fe=be+Se.length;Fe<i.length;++Fe)r.get(i[Fe]).index=Fe}function u(){r=new Map,i=[],s=0,l([t],!1)}u(),l(e);function c(){let q;for(q of i)r.get(q).conversionsTo=[];s=0}function f(q){const J=i.filter(be=>{const Se=r.get(be);return!Se.isAny&&Se.test(q)});return J.length?J:["any"]}function d(q){return q&&typeof q=="function"&&"_typedFunctionData"in q}function h(q,J,be){if(!d(q))throw new TypeError(LL);const Se=be&&be.exact,Ne=Array.isArray(J)?J.join(","):J,Fe=g(Ne),He=y(Fe);if(!Se||He in q.signatures){const lt=q._typedFunctionData.signatureMap.get(He);if(lt)return lt}const Oe=Fe.length;let Je;if(Se){Je=[];let lt;for(lt in q.signatures)Je.push(q._typedFunctionData.signatureMap.get(lt))}else Je=q._typedFunctionData.signatures;for(let lt=0;lt<Oe;++lt){const at=Fe[lt],ge=[];let We;for(We of Je){const W=A(We.params,lt);if(!(!W||at.restParam&&!W.restParam)){if(!W.hasAny){const pe=b(W);if(at.types.some(Re=>!pe.has(Re.name)))continue}ge.push(We)}}if(Je=ge,Je.length===0)break}let qe;for(qe of Je)if(qe.params.length<=Oe)return qe;throw new TypeError("Signature not found (signature: "+(q.name||"unnamed")+"("+y(Fe,", ")+"))")}function p(q,J,be){return h(q,J,be).implementation}function v(q,J){const be=o(J);if(be.test(q))return q;const Se=be.conversionsTo;if(Se.length===0)throw new Error("There are no conversions to "+J+" defined.");for(let Ne=0;Ne<Se.length;Ne++)if(o(Se[Ne].from).test(q))return Se[Ne].convert(q);throw new Error("Cannot convert "+q+" to "+J)}function y(q){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return q.map(be=>be.name).join(J)}function m(q){const J=q.indexOf("...")===0,Se=(J?q.length>3?q.slice(3):"any":q).split("|").map(Oe=>o(Oe.trim()));let Ne=!1,Fe=J?"...":"";return{types:Se.map(function(Oe){return Ne=Oe.isAny||Ne,Fe+=Oe.name+"|",{name:Oe.name,typeIndex:Oe.index,test:Oe.test,isAny:Oe.isAny,conversion:null,conversionIndex:-1}}),name:Fe.slice(0,-1),hasAny:Ne,hasConversion:!1,restParam:J}}function S(q){const J=q.types.map(He=>He.name),be=O(J);let Se=q.hasAny,Ne=q.name;const Fe=be.map(function(He){const Oe=o(He.from);return Se=Oe.isAny||Se,Ne+="|"+He.from,{name:He.from,typeIndex:Oe.index,test:Oe.test,isAny:Oe.isAny,conversion:He,conversionIndex:He.index}});return{types:q.types.concat(Fe),name:Ne,hasAny:Se,hasConversion:Fe.length>0,restParam:q.restParam}}function b(q){return q.typeSet||(q.typeSet=new Set,q.types.forEach(J=>q.typeSet.add(J.name))),q.typeSet}function g(q){const J=[];if(typeof q!="string")throw new TypeError("Signatures must be strings");const be=q.trim();if(be==="")return J;const Se=be.split(",");for(let Ne=0;Ne<Se.length;++Ne){const Fe=m(Se[Ne].trim());if(Fe.restParam&&Ne!==Se.length-1)throw new SyntaxError('Unexpected rest parameter "'+Se[Ne]+'": only allowed for the last parameter');if(Fe.types.length===0)return null;J.push(Fe)}return J}function w(q){const J=xe(q);return J?J.restParam:!1}function x(q){if(!q||q.types.length===0)return kL;if(q.types.length===1)return o(q.types[0].name).test;if(q.types.length===2){const J=o(q.types[0].name).test,be=o(q.types[1].name).test;return function(Ne){return J(Ne)||be(Ne)}}else{const J=q.types.map(function(be){return o(be.name).test});return function(Se){for(let Ne=0;Ne<J.length;Ne++)if(J[Ne](Se))return!0;return!1}}}function M(q){let J,be,Se;if(w(q)){J=Ee(q).map(x);const Ne=J.length,Fe=x(xe(q)),He=function(Oe){for(let Je=Ne;Je<Oe.length;Je++)if(!Fe(Oe[Je]))return!1;return!0};return function(Je){for(let qe=0;qe<J.length;qe++)if(!J[qe](Je[qe]))return!1;return He(Je)&&Je.length>=Ne+1}}else return q.length===0?function(Fe){return Fe.length===0}:q.length===1?(be=x(q[0]),function(Fe){return be(Fe[0])&&Fe.length===1}):q.length===2?(be=x(q[0]),Se=x(q[1]),function(Fe){return be(Fe[0])&&Se(Fe[1])&&Fe.length===2}):(J=q.map(x),function(Fe){for(let He=0;He<J.length;He++)if(!J[He](Fe[He]))return!1;return Fe.length===J.length})}function A(q,J){return J<q.length?q[J]:w(q)?xe(q):null}function N(q,J){const be=A(q,J);return be?b(be):new Set}function C(q){return q.conversion===null||q.conversion===void 0}function T(q,J){const be=new Set;return q.forEach(Se=>{const Ne=N(Se.params,J);let Fe;for(Fe of Ne)be.add(Fe)}),be.has("any")?["any"]:Array.from(be)}function R(q,J,be){let Se,Ne;const Fe=q||"unnamed";let He=be,Oe;for(Oe=0;Oe<J.length;Oe++){const at=[];if(He.forEach(ge=>{const We=A(ge.params,Oe),W=x(We);(Oe<ge.params.length||w(ge.params))&&W(J[Oe])&&at.push(ge)}),at.length===0){if(Ne=T(He,Oe),Ne.length>0){const ge=f(J[Oe]);return Se=new TypeError("Unexpected type of argument in function "+Fe+" (expected: "+Ne.join(" or ")+", actual: "+ge.join(" | ")+", index: "+Oe+")"),Se.data={category:"wrongType",fn:Fe,index:Oe,actual:ge,expected:Ne},Se}}else He=at}const Je=He.map(function(at){return w(at.params)?1/0:at.params.length});if(J.length<Math.min.apply(null,Je))return Ne=T(He,Oe),Se=new TypeError("Too few arguments in function "+Fe+" (expected: "+Ne.join(" or ")+", index: "+J.length+")"),Se.data={category:"tooFewArgs",fn:Fe,index:J.length,expected:Ne},Se;const qe=Math.max.apply(null,Je);if(J.length>qe)return Se=new TypeError("Too many arguments in function "+Fe+" (expected: "+qe+", actual: "+J.length+")"),Se.data={category:"tooManyArgs",fn:Fe,index:J.length,expectedLength:qe},Se;const lt=[];for(let at=0;at<J.length;++at)lt.push(f(J[at]).join("|"));return Se=new TypeError('Arguments of type "'+lt.join(", ")+'" do not match any of the defined signatures of function '+Fe+"."),Se.data={category:"mismatch",actual:lt},Se}function U(q){let J=i.length+1;for(let be=0;be<q.types.length;be++)C(q.types[be])&&(J=Math.min(J,q.types[be].typeIndex));return J}function F(q){let J=s+1;for(let be=0;be<q.types.length;be++)C(q.types[be])||(J=Math.min(J,q.types[be].conversionIndex));return J}function B(q,J){if(q.hasAny){if(!J.hasAny)return 1}else if(J.hasAny)return-1;if(q.restParam){if(!J.restParam)return 1}else if(J.restParam)return-1;if(q.hasConversion){if(!J.hasConversion)return 1}else if(J.hasConversion)return-1;const be=U(q)-U(J);if(be<0)return-1;if(be>0)return 1;const Se=F(q)-F(J);return Se<0?-1:Se>0?1:0}function D(q,J){const be=q.params,Se=J.params,Ne=xe(be),Fe=xe(Se),He=w(be),Oe=w(Se);if(He&&Ne.hasAny){if(!Oe||!Fe.hasAny)return 1}else if(Oe&&Fe.hasAny)return-1;let Je=0,qe=0,lt;for(lt of be)lt.hasAny&&++Je,lt.hasConversion&&++qe;let at=0,ge=0;for(lt of Se)lt.hasAny&&++at,lt.hasConversion&&++ge;if(Je!==at)return Je-at;if(He&&Ne.hasConversion){if(!Oe||!Fe.hasConversion)return 1}else if(Oe&&Fe.hasConversion)return-1;if(qe!==ge)return qe-ge;if(He){if(!Oe)return 1}else if(Oe)return-1;const We=(be.length-Se.length)*(He?-1:1);if(We!==0)return We;const W=[];let pe=0;for(let Ye=0;Ye<be.length;++Ye){const de=B(be[Ye],Se[Ye]);W.push(de),pe+=de}if(pe!==0)return pe;let Re;for(Re of W)if(Re!==0)return Re;return 0}function O(q){if(q.length===0)return[];const J=q.map(o);q.length>1&&J.sort((Ne,Fe)=>Ne.index-Fe.index);let be=J[0].conversionsTo;if(q.length===1)return be;be=be.concat([]);const Se=new Set(q);for(let Ne=1;Ne<J.length;++Ne){let Fe;for(Fe of J[Ne].conversionsTo)Se.has(Fe.from)||(be.push(Fe),Se.add(Fe.from))}return be}function $(q,J){let be=J;if(q.some(Ne=>Ne.hasConversion)){const Ne=w(q),Fe=q.map(L);be=function(){const Oe=[],Je=Ne?arguments.length-1:arguments.length;for(let qe=0;qe<Je;qe++)Oe[qe]=Fe[qe](arguments[qe]);return Ne&&(Oe[Je]=arguments[Je].map(Fe[Je])),J.apply(this,Oe)}}let Se=be;if(w(q)){const Ne=q.length-1;Se=function(){return be.apply(this,Te(arguments,0,Ne).concat([Te(arguments,Ne)]))}}return Se}function L(q){let J,be,Se,Ne;const Fe=[],He=[];switch(q.types.forEach(function(Oe){Oe.conversion&&(Fe.push(o(Oe.conversion.from).test),He.push(Oe.conversion.convert))}),He.length){case 0:return function(Je){return Je};case 1:return J=Fe[0],Se=He[0],function(Je){return J(Je)?Se(Je):Je};case 2:return J=Fe[0],be=Fe[1],Se=He[0],Ne=He[1],function(Je){return J(Je)?Se(Je):be(Je)?Ne(Je):Je};default:return function(Je){for(let qe=0;qe<He.length;qe++)if(Fe[qe](Je))return He[qe](Je);return Je}}}function X(q){function J(be,Se,Ne){if(Se<be.length){const Fe=be[Se];let He=[];if(Fe.restParam){const Oe=Fe.types.filter(C);Oe.length<Fe.types.length&&He.push({types:Oe,name:"..."+Oe.map(Je=>Je.name).join("|"),hasAny:Oe.some(Je=>Je.isAny),hasConversion:!1,restParam:!0}),He.push(Fe)}else He=Fe.types.map(function(Oe){return{types:[Oe],name:Oe.name,hasAny:Oe.isAny,hasConversion:Oe.conversion,restParam:!1}});return ie(He,function(Oe){return J(be,Se+1,Ne.concat([Oe]))})}else return[Ne]}return J(q,0,[])}function Z(q,J){const be=Math.max(q.length,J.length);for(let Oe=0;Oe<be;Oe++){const Je=N(q,Oe),qe=N(J,Oe);let lt=!1,at;for(at of qe)if(Je.has(at)){lt=!0;break}if(!lt)return!1}const Se=q.length,Ne=J.length,Fe=w(q),He=w(J);return Fe?He?Se===Ne:Ne>=Se:He?Se>=Ne:Se===Ne}function Q(q){return q.map(J=>Ce(J)?te(J.referToSelf.callback):ne(J)?ke(J.referTo.references,J.referTo.callback):J)}function K(q,J,be){const Se=[];let Ne;for(Ne of q){let Fe=be[Ne];if(typeof Fe!="number")throw new TypeError('No definition for referenced signature "'+Ne+'"');if(Fe=J[Fe],typeof Fe!="function")return!1;Se.push(Fe)}return Se}function re(q,J,be){const Se=Q(q),Ne=new Array(Se.length).fill(!1);let Fe=!0;for(;Fe;){Fe=!1;let He=!0;for(let Oe=0;Oe<Se.length;++Oe){if(Ne[Oe])continue;const Je=Se[Oe];if(Ce(Je))Se[Oe]=Je.referToSelf.callback(be),Se[Oe].referToSelf=Je.referToSelf,Ne[Oe]=!0,He=!1;else if(ne(Je)){const qe=K(Je.referTo.references,Se,J);qe?(Se[Oe]=Je.referTo.callback.apply(this,qe),Se[Oe].referTo=Je.referTo,Ne[Oe]=!0,He=!1):Fe=!0}}if(He&&Fe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return Se}function ce(q){const J=/\bthis(\(|\.signatures\b)/;Object.keys(q).forEach(be=>{const Se=q[be];if(J.test(Se.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ue(q,J){if(a.createCount++,Object.keys(J).length===0)throw new SyntaxError("No signatures provided");a.warnAgainstDeprecatedThis&&ce(J);const be=[],Se=[],Ne={},Fe=[];let He;for(He in J){if(!Object.prototype.hasOwnProperty.call(J,He))continue;const ft=g(He);if(!ft)continue;be.forEach(function(Ln){if(Z(Ln,ft))throw new TypeError('Conflicting signatures "'+y(Ln)+'" and "'+y(ft)+'".')}),be.push(ft);const St=Se.length;Se.push(J[He]);const Bt=ft.map(S);let Rt;for(Rt of X(Bt)){const Ln=y(Rt);Fe.push({params:Rt,name:Ln,fn:St}),Rt.every(Kr=>!Kr.hasConversion)&&(Ne[Ln]=St)}}Fe.sort(D);const Oe=re(Se,Ne,It);let Je;for(Je in Ne)Object.prototype.hasOwnProperty.call(Ne,Je)&&(Ne[Je]=Oe[Ne[Je]]);const qe=[],lt=new Map;for(Je of Fe)lt.has(Je.name)||(Je.fn=Oe[Je.fn],qe.push(Je),lt.set(Je.name,Je));const at=qe[0]&&qe[0].params.length<=2&&!w(qe[0].params),ge=qe[1]&&qe[1].params.length<=2&&!w(qe[1].params),We=qe[2]&&qe[2].params.length<=2&&!w(qe[2].params),W=qe[3]&&qe[3].params.length<=2&&!w(qe[3].params),pe=qe[4]&&qe[4].params.length<=2&&!w(qe[4].params),Re=qe[5]&&qe[5].params.length<=2&&!w(qe[5].params),Ye=at&&ge&&We&&W&&pe&&Re;for(let ft=0;ft<qe.length;++ft)qe[ft].test=M(qe[ft].params);const de=at?x(qe[0].params[0]):za,Ze=ge?x(qe[1].params[0]):za,H=We?x(qe[2].params[0]):za,ee=W?x(qe[3].params[0]):za,oe=pe?x(qe[4].params[0]):za,ye=Re?x(qe[5].params[0]):za,_e=at?x(qe[0].params[1]):za,Pe=ge?x(qe[1].params[1]):za,$e=We?x(qe[2].params[1]):za,Xe=W?x(qe[3].params[1]):za,tt=pe?x(qe[4].params[1]):za,ht=Re?x(qe[5].params[1]):za;for(let ft=0;ft<qe.length;++ft)qe[ft].implementation=$(qe[ft].params,qe[ft].fn);const Dt=at?qe[0].implementation:lh,rt=ge?qe[1].implementation:lh,_t=We?qe[2].implementation:lh,Vt=W?qe[3].implementation:lh,Ir=pe?qe[4].implementation:lh,Mr=Re?qe[5].implementation:lh,Jn=at?qe[0].params.length:-1,zo=ge?qe[1].params.length:-1,Fu=We?qe[2].params.length:-1,bi=W?qe[3].params.length:-1,he=pe?qe[4].params.length:-1,Le=Re?qe[5].params.length:-1,Ue=Ye?6:0,Ve=qe.length,Ge=qe.map(ft=>ft.test),yt=qe.map(ft=>ft.implementation),wt=function(){for(let St=Ue;St<Ve;St++)if(Ge[St](arguments))return yt[St].apply(this,arguments);return a.onMismatch(q,arguments,qe)};function It(ft,St){return arguments.length===Jn&&de(ft)&&_e(St)?Dt.apply(this,arguments):arguments.length===zo&&Ze(ft)&&Pe(St)?rt.apply(this,arguments):arguments.length===Fu&&H(ft)&&$e(St)?_t.apply(this,arguments):arguments.length===bi&&ee(ft)&&Xe(St)?Vt.apply(this,arguments):arguments.length===he&&oe(ft)&&tt(St)?Ir.apply(this,arguments):arguments.length===Le&&ye(ft)&&ht(St)?Mr.apply(this,arguments):wt.apply(this,arguments)}try{Object.defineProperty(It,"name",{value:q})}catch{}return It.signatures=Ne,It._typedFunctionData={signatures:qe,signatureMap:lt},It}function me(q,J,be){throw R(q,J,be)}function Ee(q){return Te(q,0,q.length-1)}function xe(q){return q[q.length-1]}function Te(q,J,be){return Array.prototype.slice.call(q,J,be)}function De(q,J){for(let be=0;be<q.length;be++)if(J(q[be]))return q[be]}function ie(q,J){return Array.prototype.concat.apply([],q.map(J))}function Ie(){const q=Ee(arguments).map(be=>y(g(be))),J=xe(arguments);if(typeof J!="function")throw new TypeError("Callback function expected as last argument");return ke(q,J)}function ke(q,J){return{referTo:{references:q,callback:J}}}function te(q){if(typeof q!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:q}}}function ne(q){return q&&typeof q.referTo=="object"&&Array.isArray(q.referTo.references)&&typeof q.referTo.callback=="function"}function Ce(q){return q&&typeof q.referToSelf=="object"&&typeof q.referToSelf.callback=="function"}function se(q,J){if(!q)return J;if(J&&J!==q){const be=new Error("Function names do not match (expected: "+q+", actual: "+J+")");throw be.data={actual:J,expected:q},be}return q}function j(q){let J;for(const be in q)Object.prototype.hasOwnProperty.call(q,be)&&(d(q[be])||typeof q[be].signature=="string")&&(J=se(J,q[be].name));return J}function G(q,J){let be;for(be in J)if(Object.prototype.hasOwnProperty.call(J,be)){if(be in q&&J[be]!==q[be]){const Se=new Error('Signature "'+be+'" is defined twice');throw Se.data={signature:be,sourceFunction:J[be],destFunction:q[be]},Se}q[be]=J[be]}}const fe=a;a=function(q){const J=typeof q=="string",be=J?1:0;let Se=J?q:"";const Ne={};for(let Fe=be;Fe<arguments.length;++Fe){const He=arguments[Fe];let Oe={},Je;if(typeof He=="function"?(Je=He.name,typeof He.signature=="string"?Oe[He.signature]=He:d(He)&&(Oe=He.signatures)):n(He)&&(Oe=He,J||(Je=j(He))),Object.keys(Oe).length===0){const qe=new TypeError("Argument to 'typed' at index "+Fe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw qe.data={index:Fe,argument:He},qe}J||(Se=se(Se,Je)),G(Ne,Oe)}return ue(Se||"",Ne)},a.create=HH,a.createCount=fe.createCount,a.onMismatch=me,a.throwMismatchError=me,a.createError=R,a.clear=u,a.clearConversions=c,a.addTypes=l,a._findType=o,a.referTo=Ie,a.referToSelf=te,a.convert=v,a.findSignature=h,a.find=p,a.isTypedFunction=d,a.warnAgainstDeprecatedThis=!0,a.addType=function(q,J){let be="any";J!==!1&&r.has("Object")&&(be="Object"),a.addTypes([q],be)};function Me(q){if(!q||typeof q.from!="string"||typeof q.to!="string"||typeof q.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(q.to===q.from)throw new SyntaxError('Illegal to define conversion from "'+q.from+'" to itself.')}return a.addConversion=function(q){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Me(q);const be=o(q.to),Se=be.conversionsTo.find(Ne=>Ne.from===q.from);if(Se)if(J&&J.override)a.removeConversion({from:Se.from,to:q.to,convert:Se.convert});else throw new Error('There is already a conversion from "'+q.from+'" to "'+be.name+'"');be.conversionsTo.push({from:q.from,convert:q.convert,index:s++})},a.addConversions=function(q,J){q.forEach(be=>a.addConversion(be,J))},a.removeConversion=function(q){Me(q);const J=o(q.to),be=De(J.conversionsTo,Ne=>Ne.from===q.from);if(!be)throw new Error("Attempt to remove nonexistent conversion from "+q.from+" to "+q.to);if(be.convert!==q.convert)throw new Error("Conversion to remove does not match existing conversion");const Se=J.conversionsTo.indexOf(be);J.conversionsTo.splice(Se,1)},a.resolve=function(q,J){if(!d(q))throw new TypeError(LL);const be=q._typedFunctionData.signatures;for(let Se=0;Se<be.length;++Se)if(be[Se].test(J))return be[Se];return null},a}const Yf=HH();function Ot(n){return typeof n=="boolean"?!0:isFinite(n)?n===Math.round(n):!1}var vc=Math.sign||function(n){return n>0?1:n<0?-1:0},use=Math.log2||function(e){return Math.log(e)/Math.LN2},cse=Math.log10||function(e){return Math.log(e)/Math.LN10},fse=Math.log1p||function(n){return Math.log(n+1)},dse=Math.cbrt||function(e){if(e===0)return e;var t=e<0,r;return t&&(e=-e),isFinite(e)?(r=Math.exp(Math.log(e)/3),r=(e/(r*r)+2*r)/3):r=e,t?-r:r},hse=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function F2(n,e,t){var r={2:"0b",8:"0o",16:"0x"},i=r[e],s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Ot(t))throw new Error("size must be an integer");if(n>2**(t-1)-1||n<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!Ot(n))throw new Error("Value must be an integer");n<0&&(n=n+2**t),s="i".concat(t)}var a="";return n<0&&(n=-n,a="-"),"".concat(a).concat(i).concat(n.toString(e)).concat(s)}function sd(n,e){if(typeof e=="function")return e(n);if(n===1/0)return"Infinity";if(n===-1/0)return"-Infinity";if(isNaN(n))return"NaN";var{notation:t,precision:r,wordSize:i}=WH(e);switch(t){case"fixed":return GH(n,r);case"exponential":return jH(n,r);case"engineering":return pse(n,r);case"bin":return F2(n,2,i);case"oct":return F2(n,8,i);case"hex":return F2(n,16,i);case"auto":return mse(n,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],a=arguments[4];return s!=="."?s+a:a});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function WH(n){var e="auto",t,r;if(n!==void 0)if(tn(n))t=n;else if(Jt(n))t=n.toNumber();else if(ny(n))n.precision!==void 0&&(t=FL(n.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),n.wordSize!==void 0&&(r=FL(n.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),n.notation&&(e=n.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:r}}function iy(n){var e=String(n).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+n);var t=e[1],r=e[2],i=parseFloat(e[4]||"0"),s=r.indexOf(".");i+=s!==-1?s-1:r.length-1;var a=r.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return a.length===0&&(a.push(0),i++),{sign:t,coefficients:a,exponent:i}}function pse(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=iy(n),r=L_(t,e),i=r.exponent,s=r.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(tn(e))for(;e>s.length||i-a+1>s.length;)s.push(0);else for(var o=Math.abs(i-a)-(s.length-1),l=0;l<o;l++)s.push(0);for(var u=Math.abs(i-a),c=1;u>0;)c++,u--;var f=s.slice(c).join(""),d=tn(e)&&f.length||f.match(/[1-9]/)?"."+f:"",h=s.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+a.toString();return r.sign+h}function GH(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=iy(n),r=typeof e=="number"?L_(t,t.exponent+1+e):t,i=r.coefficients,s=r.exponent+1,a=s+(e||0);return i.length<a&&(i=i.concat(Ep(a-i.length))),s<0&&(i=Ep(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),r.sign+i.join("")}function jH(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=iy(n),r=e?L_(t,e):t,i=r.coefficients,s=r.exponent;i.length<e&&(i=i.concat(Ep(e-i.length)));var a=i.shift();return r.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function mse(n,e,t){if(isNaN(n)||!isFinite(n))return String(n);var r=BL(t==null?void 0:t.lowerExp,-3),i=BL(t==null?void 0:t.upperExp,5),s=iy(n),a=e?L_(s,e):s;if(a.exponent<r||a.exponent>=i)return jH(n,e);var o=a.coefficients,l=a.exponent;o.length<e&&(o=o.concat(Ep(e-o.length))),o=o.concat(Ep(l-o.length+1+(o.length<e?e-o.length:0))),o=Ep(-l).concat(o);var u=l>0?l:0;return u<o.length-1&&o.splice(u+1,0,"."),a.sign+o.join("")}function L_(n,e){for(var t={sign:n.sign,coefficients:n.coefficients,exponent:n.exponent},r=t.coefficients;e<=0;)r.unshift(0),t.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var s=e-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),t.exponent++,s++),s--,r[s]++}}return t}function Ep(n){for(var e=[],t=0;t<n;t++)e.push(0);return e}function gse(n){return n.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var vse=Number.EPSILON||2220446049250313e-31;function Cs(n,e,t){if(t==null)return n===e;if(n===e)return!0;if(isNaN(n)||isNaN(e))return!1;if(isFinite(n)&&isFinite(e)){var r=Math.abs(n-e);return r<=vse?!0:r<=Math.max(Math.abs(n),Math.abs(e))*t}return!1}var yse=Math.acosh||function(n){return Math.log(Math.sqrt(n*n-1)+n)},xse=Math.asinh||function(n){return Math.log(Math.sqrt(n*n+1)+n)},bse=Math.atanh||function(n){return Math.log((1+n)/(1-n))/2},wse=Math.cosh||function(n){return(Math.exp(n)+Math.exp(-n))/2},Sse=Math.sinh||function(n){return(Math.exp(n)-Math.exp(-n))/2},_se=Math.tanh||function(n){var e=Math.exp(2*n);return(e-1)/(e+1)};function Ese(n,e){var t=!0,r=e>0?!0:e<0?!1:1/e===1/0;return t^r?-n:n}function FL(n,e){if(tn(n))return n;if(Jt(n))return n.toNumber();e()}function BL(n,e){return tn(n)?n:Jt(n)?n.toNumber():e}function ae(n,e,t,r){function i(s){var a=ose(s,e.map(qH));return Mse(n,e,s),t(a)}return i.isFactory=!0,i.fn=n,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function mv(n){return typeof n=="function"&&typeof n.fn=="string"&&Array.isArray(n.dependencies)}function Mse(n,e,t){var r=e.filter(s=>!Cse(s)).every(s=>t[s]!==void 0);if(!r){var i=e.filter(s=>t[s]===void 0);throw new Error('Cannot create function "'.concat(n,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function Cse(n){return n&&n[0]==="?"}function qH(n){return n&&n[0]==="?"?n.slice(1):n}function ws(n,e){if(YH(n)&&XH(n,e))return n[e];throw typeof n[e]=="function"&&dP(n,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Gp(n,e,t){if(YH(n)&&XH(n,e))return n[e]=t,t;throw new Error('No access to property "'+e+'"')}function Ase(n,e){return e in n}function XH(n,e){return!n||typeof n!="object"?!1:gt(Dse,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Tse(n,e){if(!dP(n,e))throw new Error('No access to method "'+e+'"');return n[e]}function dP(n,e){return n==null||typeof n[e]!="function"||gt(n,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(n)?!1:gt(Nse,e)?!0:!(e in Object.prototype||e in Function.prototype)}function YH(n){return typeof n=="object"&&n&&n.constructor===Object}var Dse={length:!0,name:!0},Nse={toString:!0,valueOf:!0,toLocaleString:!0};class F_{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(e){return ws(this.wrappedObject,e)}set(e,t){return Gp(this.wrappedObject,e,t),this}has(e){return Ase(this.wrappedObject,e)}entries(){return ZH(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class KH{constructor(e,t,r){this.a=e,this.b=t,this.bKeys=r,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return ZH(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function ZH(n,e){return{next:()=>{var t=n.next();return t.done?t:{value:e(t.value),done:!1}}}}function Kv(){return new Map}function Mp(n){if(!n)return Kv();if(JH(n))return n;if(ny(n))return new F_(n);throw new Error("createMap can create maps from objects or Maps")}function Pse(n){if(n instanceof F_)return n.wrappedObject;var e={};for(var t of n.keys()){var r=n.get(t);Gp(e,t,r)}return e}function JH(n){return n?n instanceof Map||n instanceof F_||typeof n.set=="function"&&typeof n.get=="function"&&typeof n.keys=="function"&&typeof n.has=="function":!1}var QH=function(){return QH=Yf.create,Yf},Rse=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Ose=ae("typed",Rse,function(e){var{BigNumber:t,Complex:r,DenseMatrix:i,Fraction:s}=e,a=QH();return a.clear(),a.addTypes([{name:"number",test:tn},{name:"Complex",test:Mo},{name:"BigNumber",test:Jt},{name:"Fraction",test:Ld},{name:"Unit",test:zs},{name:"identifier",test:o=>Ai&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:Ai},{name:"Chain",test:fP},{name:"Array",test:_n},{name:"Matrix",test:Ut},{name:"DenseMatrix",test:Yv},{name:"SparseMatrix",test:gc},{name:"Range",test:k_},{name:"Index",test:ty},{name:"boolean",test:TH},{name:"ResultSet",test:DH},{name:"Help",test:cP},{name:"function",test:NH},{name:"Date",test:PH},{name:"RegExp",test:RH},{name:"null",test:OH},{name:"undefined",test:IH},{name:"AccessorNode",test:Uc},{name:"ArrayNode",test:ua},{name:"AssignmentNode",test:kH},{name:"BlockNode",test:LH},{name:"ConditionalNode",test:FH},{name:"ConstantNode",test:vn},{name:"FunctionNode",test:bu},{name:"FunctionAssignmentNode",test:ym},{name:"IndexNode",test:Fd},{name:"Node",test:In},{name:"ObjectNode",test:ry},{name:"OperatorNode",test:Br},{name:"ParenthesisNode",test:wl},{name:"RangeNode",test:BH},{name:"RelationalNode",test:zH},{name:"SymbolNode",test:ii},{name:"Map",test:JH},{name:"Object",test:ny}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(t||B2(l),gse(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new t(l)}},{from:"number",to:"Complex",convert:function(l){return r||j1(l),new r(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return r||j1(l),new r(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return r||j1(l),new r(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){s||z2(l);var u=new s(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){t||B2(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){s||z2(l);try{return new s(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){r||j1(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return t||B2(l),new t(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return s||z2(l),new s(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||Ise(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),a.onMismatch=(o,l,u)=>{var c=a.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&_a(l[0])&&u.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},a.onMismatch=(o,l,u)=>{var c=a.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&_a(l[0])&&u.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},a});function B2(n){throw new Error("Cannot convert value ".concat(n," into a BigNumber: no class 'BigNumber' provided"))}function j1(n){throw new Error("Cannot convert value ".concat(n," into a Complex number: no class 'Complex' provided"))}function Ise(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function z2(n){throw new Error("Cannot convert value ".concat(n," into a Fraction, no class 'Fraction' provided."))}var kse="ResultSet",Lse=[],Fse=ae(kse,Lse,()=>{function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return n.prototype.type="ResultSet",n.prototype.isResultSet=!0,n.prototype.valueOf=function(){return this.entries},n.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},n.fromJSON=function(e){return new n(e.entries)},n},{isClass:!0});/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var op=9e15,sf=1e9,DT="0123456789abcdef",tS="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",nS="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",NT={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-op,maxE:op,crypto:!1},eW,ru,Qt=!0,B_="[DecimalError] ",$c=B_+"Invalid argument: ",tW=B_+"Precision limit exceeded",nW=B_+"crypto unavailable",rW="[object Decimal]",rs=Math.floor,ei=Math.pow,Bse=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,zse=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Use=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,iW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Co=1e7,qt=7,$se=9007199254740991,Vse=tS.length-1,PT=nS.length-1,st={toStringTag:rW};st.absoluteValue=st.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Ft(n)};st.ceil=function(){return Ft(new this.constructor(this),this.e+1,2)};st.clampedTo=st.clamp=function(n,e){var t,r=this,i=r.constructor;if(n=new i(n),e=new i(e),!n.s||!e.s)return new i(NaN);if(n.gt(e))throw Error($c+e);return t=r.cmp(n),t<0?n:r.cmp(e)>0?e:new i(r)};st.comparedTo=st.cmp=function(n){var e,t,r,i,s=this,a=s.d,o=(n=new s.constructor(n)).d,l=s.s,u=n.s;if(!a||!o)return!l||!u?NaN:l!==u?l:a===o?0:!a^l<0?1:-1;if(!a[0]||!o[0])return a[0]?l:o[0]?-u:0;if(l!==u)return l;if(s.e!==n.e)return s.e>n.e^l<0?1:-1;for(r=a.length,i=o.length,e=0,t=r<i?r:i;e<t;++e)if(a[e]!==o[e])return a[e]>o[e]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1};st.cosine=st.cos=function(){var n,e,t=this,r=t.constructor;return t.d?t.d[0]?(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+qt,r.rounding=1,t=Hse(r,uW(r,t)),r.precision=n,r.rounding=e,Ft(ru==2||ru==3?t.neg():t,n,e,!0)):new r(1):new r(NaN)};st.cubeRoot=st.cbrt=function(){var n,e,t,r,i,s,a,o,l,u,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Qt=!1,s=c.s*ei(c.s*c,1/3),!s||Math.abs(s)==1/0?(t=Ri(c.d),n=c.e,(s=(n-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=ei(t,1/3),n=rs((n+1)/3)-(n%3==(n<0?-1:2)),s==1/0?t="5e"+n:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),r=new f(t),r.s=c.s):r=new f(s.toString()),a=(n=f.precision)+3;;)if(o=r,l=o.times(o).times(o),u=l.plus(c),r=Zn(u.plus(c).times(o),u.plus(l),a+2,1),Ri(o.d).slice(0,a)===(t=Ri(r.d)).slice(0,a))if(t=t.slice(a-3,a+1),t=="9999"||!i&&t=="4999"){if(!i&&(Ft(o,n+1,0),o.times(o).times(o).eq(c))){r=o;break}a+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ft(r,n+1,1),e=!r.times(r).times(r).eq(c));break}return Qt=!0,Ft(r,n,f.rounding,e)};st.decimalPlaces=st.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-rs(this.e/qt))*qt,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};st.dividedBy=st.div=function(n){return Zn(this,new this.constructor(n))};st.dividedToIntegerBy=st.divToInt=function(n){var e=this,t=e.constructor;return Ft(Zn(e,new t(n),0,1,1),t.precision,t.rounding)};st.equals=st.eq=function(n){return this.cmp(n)===0};st.floor=function(){return Ft(new this.constructor(this),this.e+1,3)};st.greaterThan=st.gt=function(n){return this.cmp(n)>0};st.greaterThanOrEqualTo=st.gte=function(n){var e=this.cmp(n);return e==1||e===0};st.hyperbolicCosine=st.cosh=function(){var n,e,t,r,i,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;t=a.precision,r=a.rounding,a.precision=t+Math.max(s.e,s.sd())+4,a.rounding=1,i=s.d.length,i<32?(n=Math.ceil(i/3),e=(1/U_(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),s=jp(a,1,s.times(e),new a(1),!0);for(var l,u=n,c=new a(8);u--;)l=s.times(s),s=o.minus(l.times(c.minus(l.times(c))));return Ft(s,a.precision=t,a.rounding=r,!0)};st.hyperbolicSine=st.sinh=function(){var n,e,t,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=jp(s,2,i,i,!0);else{n=1.4*Math.sqrt(r),n=n>16?16:n|0,i=i.times(1/U_(5,n)),i=jp(s,2,i,i,!0);for(var a,o=new s(5),l=new s(16),u=new s(20);n--;)a=i.times(i),i=i.times(o.plus(a.times(l.times(a).plus(u))))}return s.precision=e,s.rounding=t,Ft(i,e,t,!0)};st.hyperbolicTangent=st.tanh=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+7,r.rounding=1,Zn(t.sinh(),t.cosh(),r.precision=n,r.rounding=e)):new r(t.s)};st.inverseCosine=st.acos=function(){var n,e=this,t=e.constructor,r=e.abs().cmp(1),i=t.precision,s=t.rounding;return r!==-1?r===0?e.isNeg()?So(t,i,s):new t(0):new t(NaN):e.isZero()?So(t,i+4,s).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),n=So(t,i+4,s).times(.5),t.precision=i,t.rounding=s,n.minus(e))};st.inverseHyperbolicCosine=st.acosh=function(){var n,e,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(n=r.precision,e=r.rounding,r.precision=n+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,Qt=!1,t=t.times(t).minus(1).sqrt().plus(t),Qt=!0,r.precision=n,r.rounding=e,t.ln()):new r(t)};st.inverseHyperbolicSine=st.asinh=function(){var n,e,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,Qt=!1,t=t.times(t).plus(1).sqrt().plus(t),Qt=!0,r.precision=n,r.rounding=e,t.ln())};st.inverseHyperbolicTangent=st.atanh=function(){var n,e,t,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(n=s.precision,e=s.rounding,r=i.sd(),Math.max(r,n)<2*-i.e-1?Ft(new s(i),n,e,!0):(s.precision=t=r-i.e,i=Zn(i.plus(1),new s(1).minus(i),t+n,1),s.precision=n+4,s.rounding=1,i=i.ln(),s.precision=n,s.rounding=e,i.times(.5))):new s(NaN)};st.inverseSine=st.asin=function(){var n,e,t,r,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),t=s.precision,r=s.rounding,e!==-1?e===0?(n=So(s,t+4,r).times(.5),n.s=i.s,n):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=r,i.times(2)))};st.inverseTangent=st.atan=function(){var n,e,t,r,i,s,a,o,l,u=this,c=u.constructor,f=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&f+4<=PT)return a=So(c,f+4,d).times(.25),a.s=u.s,a}else{if(!u.s)return new c(NaN);if(f+4<=PT)return a=So(c,f+4,d).times(.5),a.s=u.s,a}for(c.precision=o=f+10,c.rounding=1,t=Math.min(28,o/qt+2|0),n=t;n;--n)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Qt=!1,e=Math.ceil(o/qt),r=1,l=u.times(u),a=new c(u),i=u;n!==-1;)if(i=i.times(l),s=a.minus(i.div(r+=2)),i=i.times(l),a=s.plus(i.div(r+=2)),a.d[e]!==void 0)for(n=e;a.d[n]===s.d[n]&&n--;);return t&&(a=a.times(2<<t-1)),Qt=!0,Ft(a,c.precision=f,c.rounding=d,!0)};st.isFinite=function(){return!!this.d};st.isInteger=st.isInt=function(){return!!this.d&&rs(this.e/qt)>this.d.length-2};st.isNaN=function(){return!this.s};st.isNegative=st.isNeg=function(){return this.s<0};st.isPositive=st.isPos=function(){return this.s>0};st.isZero=function(){return!!this.d&&this.d[0]===0};st.lessThan=st.lt=function(n){return this.cmp(n)<0};st.lessThanOrEqualTo=st.lte=function(n){return this.cmp(n)<1};st.logarithm=st.log=function(n){var e,t,r,i,s,a,o,l,u=this,c=u.constructor,f=c.precision,d=c.rounding,h=5;if(n==null)n=new c(10),e=!0;else{if(n=new c(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new c(NaN);e=n.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new c(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(i=t[0];i%10===0;)i/=10;s=i!==1}if(Qt=!1,o=f+h,a=yc(u,o),r=e?rS(c,o+10):yc(n,o),l=Zn(a,r,o,1),Zv(l.d,i=f,d))do if(o+=10,a=yc(u,o),r=e?rS(c,o+10):yc(n,o),l=Zn(a,r,o,1),!s){+Ri(l.d).slice(i+1,i+15)+1==1e14&&(l=Ft(l,f+1,0));break}while(Zv(l.d,i+=10,d));return Qt=!0,Ft(l,f,d)};st.minus=st.sub=function(n){var e,t,r,i,s,a,o,l,u,c,f,d,h=this,p=h.constructor;if(n=new p(n),!h.d||!n.d)return!h.s||!n.s?n=new p(NaN):h.d?n.s=-n.s:n=new p(n.d||h.s!==n.s?h:NaN),n;if(h.s!=n.s)return n.s=-n.s,h.plus(n);if(u=h.d,d=n.d,o=p.precision,l=p.rounding,!u[0]||!d[0]){if(d[0])n.s=-n.s;else if(u[0])n=new p(h);else return new p(l===3?-0:0);return Qt?Ft(n,o,l):n}if(t=rs(n.e/qt),c=rs(h.e/qt),u=u.slice(),s=c-t,s){for(f=s<0,f?(e=u,s=-s,a=d.length):(e=d,t=c,a=u.length),r=Math.max(Math.ceil(o/qt),a)+2,s>r&&(s=r,e.length=1),e.reverse(),r=s;r--;)e.push(0);e.reverse()}else{for(r=u.length,a=d.length,f=r<a,f&&(a=r),r=0;r<a;r++)if(u[r]!=d[r]){f=u[r]<d[r];break}s=0}for(f&&(e=u,u=d,d=e,n.s=-n.s),a=u.length,r=d.length-a;r>0;--r)u[a++]=0;for(r=d.length;r>s;){if(u[--r]<d[r]){for(i=r;i&&u[--i]===0;)u[i]=Co-1;--u[i],u[r]+=Co}u[r]-=d[r]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(n.d=u,n.e=z_(u,t),Qt?Ft(n,o,l):n):new p(l===3?-0:0)};st.modulo=st.mod=function(n){var e,t=this,r=t.constructor;return n=new r(n),!t.d||!n.s||n.d&&!n.d[0]?new r(NaN):!n.d||t.d&&!t.d[0]?Ft(new r(t),r.precision,r.rounding):(Qt=!1,r.modulo==9?(e=Zn(t,n.abs(),0,3,1),e.s*=n.s):e=Zn(t,n,0,r.modulo,1),e=e.times(n),Qt=!0,t.minus(e))};st.naturalExponential=st.exp=function(){return RT(this)};st.naturalLogarithm=st.ln=function(){return yc(this)};st.negated=st.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Ft(n)};st.plus=st.add=function(n){var e,t,r,i,s,a,o,l,u,c,f=this,d=f.constructor;if(n=new d(n),!f.d||!n.d)return!f.s||!n.s?n=new d(NaN):f.d||(n=new d(n.d||f.s===n.s?f:NaN)),n;if(f.s!=n.s)return n.s=-n.s,f.minus(n);if(u=f.d,c=n.d,o=d.precision,l=d.rounding,!u[0]||!c[0])return c[0]||(n=new d(f)),Qt?Ft(n,o,l):n;if(s=rs(f.e/qt),r=rs(n.e/qt),u=u.slice(),i=s-r,i){for(i<0?(t=u,i=-i,a=c.length):(t=c,r=s,a=u.length),s=Math.ceil(o/qt),a=s>a?s+1:a+1,i>a&&(i=a,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(a=u.length,i=c.length,a-i<0&&(i=a,t=c,c=u,u=t),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/Co|0,u[i]%=Co;for(e&&(u.unshift(e),++r),a=u.length;u[--a]==0;)u.pop();return n.d=u,n.e=z_(u,r),Qt?Ft(n,o,l):n};st.precision=st.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error($c+n);return t.d?(e=sW(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};st.round=function(){var n=this,e=n.constructor;return Ft(new e(n),n.e+1,e.rounding)};st.sine=st.sin=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+qt,r.rounding=1,t=Gse(r,uW(r,t)),r.precision=n,r.rounding=e,Ft(ru>2?t.neg():t,n,e,!0)):new r(NaN)};st.squareRoot=st.sqrt=function(){var n,e,t,r,i,s,a=this,o=a.d,l=a.e,u=a.s,c=a.constructor;if(u!==1||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(Qt=!1,u=Math.sqrt(+a),u==0||u==1/0?(e=Ri(o),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=rs((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),r=new c(e)):r=new c(u.toString()),t=(l=c.precision)+3;;)if(s=r,r=s.plus(Zn(a,s,t+2,1)).times(.5),Ri(s.d).slice(0,t)===(e=Ri(r.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ft(s,l+1,0),s.times(s).eq(a))){r=s;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ft(r,l+1,1),n=!r.times(r).eq(a));break}return Qt=!0,Ft(r,l,c.rounding,n)};st.tangent=st.tan=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+10,r.rounding=1,t=t.sin(),t.s=1,t=Zn(t,new r(1).minus(t.times(t)).sqrt(),n+10,0),r.precision=n,r.rounding=e,Ft(ru==2||ru==4?t.neg():t,n,e,!0)):new r(NaN)};st.times=st.mul=function(n){var e,t,r,i,s,a,o,l,u,c=this,f=c.constructor,d=c.d,h=(n=new f(n)).d;if(n.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!n.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?n.s/0:n.s*0);for(t=rs(c.e/qt)+rs(n.e/qt),l=d.length,u=h.length,l<u&&(s=d,d=h,h=s,a=l,l=u,u=a),s=[],a=l+u,r=a;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)o=s[i]+h[r]*d[i-r-1]+e,s[i--]=o%Co|0,e=o/Co|0;s[i]=(s[i]+e)%Co|0}for(;!s[--a];)s.pop();return e?++t:s.shift(),n.d=s,n.e=z_(s,t),Qt?Ft(n,f.precision,f.rounding):n};st.toBinary=function(n,e){return hP(this,2,n,e)};st.toDecimalPlaces=st.toDP=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(Ys(n,0,sf),e===void 0?e=r.rounding:Ys(e,0,8),Ft(t,n+t.e+1,e))};st.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Sl(r,!0):(Ys(n,0,sf),e===void 0?e=i.rounding:Ys(e,0,8),r=Ft(new i(r),n+1,e),t=Sl(r,!0,n+1)),r.isNeg()&&!r.isZero()?"-"+t:t};st.toFixed=function(n,e){var t,r,i=this,s=i.constructor;return n===void 0?t=Sl(i):(Ys(n,0,sf),e===void 0?e=s.rounding:Ys(e,0,8),r=Ft(new s(i),n+i.e+1,e),t=Sl(r,!1,n+r.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};st.toFraction=function(n){var e,t,r,i,s,a,o,l,u,c,f,d,h=this,p=h.d,v=h.constructor;if(!p)return new v(h);if(u=t=new v(1),r=l=new v(0),e=new v(r),s=e.e=sW(p)-h.e-1,a=s%qt,e.d[0]=ei(10,a<0?qt+a:a),n==null)n=s>0?e:u;else{if(o=new v(n),!o.isInt()||o.lt(u))throw Error($c+o);n=o.gt(e)?s>0?e:u:o}for(Qt=!1,o=new v(Ri(p)),c=v.precision,v.precision=s=p.length*qt*2;f=Zn(o,e,0,1,1),i=t.plus(f.times(r)),i.cmp(n)!=1;)t=r,r=i,i=u,u=l.plus(f.times(i)),l=i,i=e,e=o.minus(f.times(i)),o=i;return i=Zn(n.minus(t),r,0,1,1),l=l.plus(i.times(u)),t=t.plus(i.times(r)),l.s=u.s=h.s,d=Zn(u,r,s,1).minus(h).abs().cmp(Zn(l,t,s,1).minus(h).abs())<1?[u,r]:[l,t],v.precision=c,Qt=!0,d};st.toHexadecimal=st.toHex=function(n,e){return hP(this,16,n,e)};st.toNearest=function(n,e){var t=this,r=t.constructor;if(t=new r(t),n==null){if(!t.d)return t;n=new r(1),e=r.rounding}else{if(n=new r(n),e===void 0?e=r.rounding:Ys(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(Qt=!1,t=Zn(t,n,0,e,1).times(n),Qt=!0,Ft(t)):(n.s=t.s,t=n),t};st.toNumber=function(){return+this};st.toOctal=function(n,e){return hP(this,8,n,e)};st.toPower=st.pow=function(n){var e,t,r,i,s,a,o=this,l=o.constructor,u=+(n=new l(n));if(!o.d||!n.d||!o.d[0]||!n.d[0])return new l(ei(+o,u));if(o=new l(o),o.eq(1))return o;if(r=l.precision,s=l.rounding,n.eq(1))return Ft(o,r,s);if(e=rs(n.e/qt),e>=n.d.length-1&&(t=u<0?-u:u)<=$se)return i=aW(l,o,t,r),n.s<0?new l(1).div(i):Ft(i,r,s);if(a=o.s,a<0){if(e<n.d.length-1)return new l(NaN);if(n.d[e]&1||(a=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=a,o}return t=ei(+o,u),e=t==0||!isFinite(t)?rs(u*(Math.log("0."+Ri(o.d))/Math.LN10+o.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?a/0:0):(Qt=!1,l.rounding=o.s=1,t=Math.min(12,(e+"").length),i=RT(n.times(yc(o,r+t)),r),i.d&&(i=Ft(i,r+5,1),Zv(i.d,r,s)&&(e=r+10,i=Ft(RT(n.times(yc(o,e+t)),e),e+5,1),+Ri(i.d).slice(r+1,r+15)+1==1e14&&(i=Ft(i,r+1,0)))),i.s=a,Qt=!0,l.rounding=s,Ft(i,r,s))};st.toPrecision=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Sl(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Ys(n,1,sf),e===void 0?e=i.rounding:Ys(e,0,8),r=Ft(new i(r),n,e),t=Sl(r,n<=r.e||r.e<=i.toExpNeg,n)),r.isNeg()&&!r.isZero()?"-"+t:t};st.toSignificantDigits=st.toSD=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(Ys(n,1,sf),e===void 0?e=r.rounding:Ys(e,0,8)),Ft(new r(t),n,e)};st.toString=function(){var n=this,e=n.constructor,t=Sl(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};st.truncated=st.trunc=function(){return Ft(new this.constructor(this),this.e+1,1)};st.valueOf=st.toJSON=function(){var n=this,e=n.constructor,t=Sl(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function Ri(n){var e,t,r,i=n.length-1,s="",a=n[0];if(i>0){for(s+=a,e=1;e<i;e++)r=n[e]+"",t=qt-r.length,t&&(s+=sc(t)),s+=r;a=n[e],r=a+"",t=qt-r.length,t&&(s+=sc(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function Ys(n,e,t){if(n!==~~n||n<e||n>t)throw Error($c+n)}function Zv(n,e,t,r){var i,s,a,o;for(s=n[0];s>=10;s/=10)--e;return--e<0?(e+=qt,i=0):(i=Math.ceil((e+1)/qt),e%=qt),s=ei(10,qt-e),o=n[i]%s|0,r==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),a=t<4&&o==99999||t>3&&o==49999||o==5e4||o==0):a=(t<4&&o+1==s||t>3&&o+1==s/2)&&(n[i+1]/s/100|0)==ei(10,e-2)-1||(o==s/2||o==0)&&(n[i+1]/s/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),a=(r||t<4)&&o==9999||!r&&t>3&&o==4999):a=((r||t<4)&&o+1==s||!r&&t>3&&o+1==s/2)&&(n[i+1]/s/1e3|0)==ei(10,e-3)-1,a}function Qb(n,e,t){for(var r,i=[0],s,a=0,o=n.length;a<o;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=DT.indexOf(n.charAt(a++)),r=0;r<i.length;r++)i[r]>t-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/t|0,i[r]%=t)}return i.reverse()}function Hse(n,e){var t,r,i;if(e.isZero())return e;r=e.d.length,r<32?(t=Math.ceil(r/3),i=(1/U_(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),n.precision+=t,e=jp(n,1,e.times(i),new n(1));for(var s=t;s--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return n.precision-=t,e}var Zn=function(){function n(r,i,s){var a,o=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+o,r[l]=a%s|0,o=a/s|0;return o&&r.unshift(o),r}function e(r,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function t(r,i,s,a){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*a+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a,o,l){var u,c,f,d,h,p,v,y,m,S,b,g,w,x,M,A,N,C,T,R,U=r.constructor,F=r.s==i.s?1:-1,B=r.d,D=i.d;if(!B||!B[0]||!D||!D[0])return new U(!r.s||!i.s||(B?D&&B[0]==D[0]:!D)?NaN:B&&B[0]==0||!D?F*0:F/0);for(l?(h=1,c=r.e-i.e):(l=Co,h=qt,c=rs(r.e/h)-rs(i.e/h)),T=D.length,N=B.length,m=new U(F),S=m.d=[],f=0;D[f]==(B[f]||0);f++);if(D[f]>(B[f]||0)&&c--,s==null?(x=s=U.precision,a=U.rounding):o?x=s+(r.e-i.e)+1:x=s,x<0)S.push(1),p=!0;else{if(x=x/h+2|0,f=0,T==1){for(d=0,D=D[0],x++;(f<N||d)&&x--;f++)M=d*l+(B[f]||0),S[f]=M/D|0,d=M%D|0;p=d||f<N}else{for(d=l/(D[0]+1)|0,d>1&&(D=n(D,d,l),B=n(B,d,l),T=D.length,N=B.length),A=T,b=B.slice(0,T),g=b.length;g<T;)b[g++]=0;R=D.slice(),R.unshift(0),C=D[0],D[1]>=l/2&&++C;do d=0,u=e(D,b,T,g),u<0?(w=b[0],T!=g&&(w=w*l+(b[1]||0)),d=w/C|0,d>1?(d>=l&&(d=l-1),v=n(D,d,l),y=v.length,g=b.length,u=e(v,b,y,g),u==1&&(d--,t(v,T<y?R:D,y,l))):(d==0&&(u=d=1),v=D.slice()),y=v.length,y<g&&v.unshift(0),t(b,v,g,l),u==-1&&(g=b.length,u=e(D,b,T,g),u<1&&(d++,t(b,T<g?R:D,g,l))),g=b.length):u===0&&(d++,b=[0]),S[f++]=d,u&&b[0]?b[g++]=B[A]||0:(b=[B[A]],g=1);while((A++<N||b[0]!==void 0)&&x--);p=b[0]!==void 0}S[0]||S.shift()}if(h==1)m.e=c,eW=p;else{for(f=1,d=S[0];d>=10;d/=10)f++;m.e=f+c*h-1,Ft(m,o?s+m.e+1:s,a,p)}return m}}();function Ft(n,e,t,r){var i,s,a,o,l,u,c,f,d,h=n.constructor;e:if(e!=null){if(f=n.d,!f)return n;for(i=1,o=f[0];o>=10;o/=10)i++;if(s=e-i,s<0)s+=qt,a=e,c=f[d=0],l=c/ei(10,i-a-1)%10|0;else if(d=Math.ceil((s+1)/qt),o=f.length,d>=o)if(r){for(;o++<=d;)f.push(0);c=l=0,i=1,s%=qt,a=s-qt+1}else break e;else{for(c=o=f[d],i=1;o>=10;o/=10)i++;s%=qt,a=s-qt+i,l=a<0?0:c/ei(10,i-a-1)%10|0}if(r=r||e<0||f[d+1]!==void 0||(a<0?c:c%ei(10,i-a-1)),u=t<4?(l||r)&&(t==0||t==(n.s<0?3:2)):l>5||l==5&&(t==4||r||t==6&&(s>0?a>0?c/ei(10,i-a):0:f[d-1])%10&1||t==(n.s<0?8:7)),e<1||!f[0])return f.length=0,u?(e-=n.e+1,f[0]=ei(10,(qt-e%qt)%qt),n.e=-e||0):f[0]=n.e=0,n;if(s==0?(f.length=d,o=1,d--):(f.length=d+1,o=ei(10,qt-s),f[d]=a>0?(c/ei(10,i-a)%ei(10,a)|0)*o:0),u)for(;;)if(d==0){for(s=1,a=f[0];a>=10;a/=10)s++;for(a=f[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(n.e++,f[0]==Co&&(f[0]=1));break}else{if(f[d]+=o,f[d]!=Co)break;f[d--]=0,o=1}for(s=f.length;f[--s]===0;)f.pop()}return Qt&&(n.e>h.maxE?(n.d=null,n.e=NaN):n.e<h.minE&&(n.e=0,n.d=[0])),n}function Sl(n,e,t){if(!n.isFinite())return lW(n);var r,i=n.e,s=Ri(n.d),a=s.length;return e?(t&&(r=t-a)>0?s=s.charAt(0)+"."+s.slice(1)+sc(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(n.e<0?"e":"e+")+n.e):i<0?(s="0."+sc(-i-1)+s,t&&(r=t-a)>0&&(s+=sc(r))):i>=a?(s+=sc(i+1-a),t&&(r=t-i-1)>0&&(s=s+"."+sc(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),t&&(r=t-a)>0&&(i+1===a&&(s+="."),s+=sc(r))),s}function z_(n,e){var t=n[0];for(e*=qt;t>=10;t/=10)e++;return e}function rS(n,e,t){if(e>Vse)throw Qt=!0,t&&(n.precision=t),Error(tW);return Ft(new n(tS),e,1,!0)}function So(n,e,t){if(e>PT)throw Error(tW);return Ft(new n(nS),e,t,!0)}function sW(n){var e=n.length-1,t=e*qt+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function sc(n){for(var e="";n--;)e+="0";return e}function aW(n,e,t,r){var i,s=new n(1),a=Math.ceil(r/qt+4);for(Qt=!1;;){if(t%2&&(s=s.times(e),UL(s.d,a)&&(i=!0)),t=rs(t/2),t===0){t=s.d.length-1,i&&s.d[t]===0&&++s.d[t];break}e=e.times(e),UL(e.d,a)}return Qt=!0,s}function zL(n){return n.d[n.d.length-1]&1}function oW(n,e,t){for(var r,i=new n(e[0]),s=0;++s<e.length;)if(r=new n(e[s]),r.s)i[t](r)&&(i=r);else{i=r;break}return i}function RT(n,e){var t,r,i,s,a,o,l,u=0,c=0,f=0,d=n.constructor,h=d.rounding,p=d.precision;if(!n.d||!n.d[0]||n.e>17)return new d(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(Qt=!1,l=p):l=e,o=new d(.03125);n.e>-2;)n=n.times(o),f+=5;for(r=Math.log(ei(2,f))/Math.LN10*2+5|0,l+=r,t=s=a=new d(1),d.precision=l;;){if(s=Ft(s.times(n),l,1),t=t.times(++c),o=a.plus(Zn(s,t,l,1)),Ri(o.d).slice(0,l)===Ri(a.d).slice(0,l)){for(i=f;i--;)a=Ft(a.times(a),l,1);if(e==null)if(u<3&&Zv(a.d,l-r,h,u))d.precision=l+=10,t=s=o=new d(1),c=0,u++;else return Ft(a,d.precision=p,h,Qt=!0);else return d.precision=p,a}a=o}}function yc(n,e){var t,r,i,s,a,o,l,u,c,f,d,h=1,p=10,v=n,y=v.d,m=v.constructor,S=m.rounding,b=m.precision;if(v.s<0||!y||!y[0]||!v.e&&y[0]==1&&y.length==1)return new m(y&&!y[0]?-1/0:v.s!=1?NaN:y?0:v);if(e==null?(Qt=!1,c=b):c=e,m.precision=c+=p,t=Ri(y),r=t.charAt(0),Math.abs(s=v.e)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)v=v.times(n),t=Ri(v.d),r=t.charAt(0),h++;s=v.e,r>1?(v=new m("0."+t),s++):v=new m(r+"."+t.slice(1))}else return u=rS(m,c+2,b).times(s+""),v=yc(new m(r+"."+t.slice(1)),c-p).plus(u),m.precision=b,e==null?Ft(v,b,S,Qt=!0):v;for(f=v,l=a=v=Zn(v.minus(1),v.plus(1),c,1),d=Ft(v.times(v),c,1),i=3;;){if(a=Ft(a.times(d),c,1),u=l.plus(Zn(a,new m(i),c,1)),Ri(u.d).slice(0,c)===Ri(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(rS(m,c+2,b).times(s+""))),l=Zn(l,new m(h),c,1),e==null)if(Zv(l.d,c-p,S,o))m.precision=c+=p,u=a=v=Zn(f.minus(1),f.plus(1),c,1),d=Ft(v.times(v),c,1),i=o=1;else return Ft(l,m.precision=b,S,Qt=!0);else return m.precision=b,l;l=u,i+=2}}function lW(n){return String(n.s*n.s/0)}function OT(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,n.e=t=t-r-1,n.d=[],r=(t+1)%qt,t<0&&(r+=qt),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=qt;r<i;)n.d.push(+e.slice(r,r+=qt));e=e.slice(r),r=qt-e.length}else r-=i;for(;r--;)e+="0";n.d.push(+e),Qt&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function Wse(n,e){var t,r,i,s,a,o,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),iW.test(e))return OT(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(zse.test(e))t=16,e=e.toLowerCase();else if(Bse.test(e))t=2;else if(Use.test(e))t=8;else throw Error($c+e);for(s=e.search(/p/i),s>0?(l=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),a=s>=0,r=n.constructor,a&&(e=e.replace(".",""),o=e.length,s=o-s,i=aW(r,new r(t),s,s*2)),u=Qb(e,t,Co),c=u.length-1,s=c;u[s]===0;--s)u.pop();return s<0?new r(n.s*0):(n.e=z_(u,c),n.d=u,Qt=!1,a&&(n=Zn(n,i,o*4)),l&&(n=n.times(Math.abs(l)<54?ei(2,l):Vc.pow(2,l))),Qt=!0,n)}function Gse(n,e){var t,r=e.d.length;if(r<3)return e.isZero()?e:jp(n,2,e,e);t=1.4*Math.sqrt(r),t=t>16?16:t|0,e=e.times(1/U_(5,t)),e=jp(n,2,e,e);for(var i,s=new n(5),a=new n(16),o=new n(20);t--;)i=e.times(e),e=e.times(s.plus(i.times(a.times(i).minus(o))));return e}function jp(n,e,t,r,i){var s,a,o,l,u=n.precision,c=Math.ceil(u/qt);for(Qt=!1,l=t.times(t),o=new n(r);;){if(a=Zn(o.times(l),new n(e++*e++),u,1),o=i?r.plus(a):r.minus(a),r=Zn(a.times(l),new n(e++*e++),u,1),a=o.plus(r),a.d[c]!==void 0){for(s=c;a.d[s]===o.d[s]&&s--;);if(s==-1)break}s=o,o=r,r=a,a=s}return Qt=!0,a.d.length=c+1,a}function U_(n,e){for(var t=n;--e;)t*=n;return t}function uW(n,e){var t,r=e.s<0,i=So(n,n.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return ru=r?4:1,e;if(t=e.divToInt(i),t.isZero())ru=r?3:2;else{if(e=e.minus(t.times(i)),e.lte(s))return ru=zL(t)?r?2:3:r?4:1,e;ru=zL(t)?r?1:4:r?3:2}return e.minus(i).abs()}function hP(n,e,t,r){var i,s,a,o,l,u,c,f,d,h=n.constructor,p=t!==void 0;if(p?(Ys(t,1,sf),r===void 0?r=h.rounding:Ys(r,0,8)):(t=h.precision,r=h.rounding),!n.isFinite())c=lW(n);else{for(c=Sl(n),a=c.indexOf("."),p?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,a>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-a,d.d=Qb(Sl(d),10,i),d.e=d.d.length),f=Qb(c,10,i),s=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(a<0?s--:(n=new h(n),n.d=f,n.e=s,n=Zn(n,d,t,r,0,i),f=n.d,s=n.e,u=eW),a=f[t],o=i/2,u=u||f[t+1]!==void 0,u=r<4?(a!==void 0||u)&&(r===0||r===(n.s<0?3:2)):a>o||a===o&&(r===4||u||r===6&&f[t-1]&1||r===(n.s<0?8:7)),f.length=t,u)for(;++f[--t]>i-1;)f[t]=0,t||(++s,f.unshift(1));for(l=f.length;!f[l-1];--l);for(a=0,c="";a<l;a++)c+=DT.charAt(f[a]);if(p){if(l>1)if(e==16||e==8){for(a=e==16?4:3,--l;l%a;l++)c+="0";for(f=Qb(c,i,e),l=f.length;!f[l-1];--l);for(a=1,c="1.";a<l;a++)c+=DT.charAt(f[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return n.s<0?"-"+c:c}function UL(n,e){if(n.length>e)return n.length=e,!0}function jse(n){return new this(n).abs()}function qse(n){return new this(n).acos()}function Xse(n){return new this(n).acosh()}function Yse(n,e){return new this(n).plus(e)}function Kse(n){return new this(n).asin()}function Zse(n){return new this(n).asinh()}function Jse(n){return new this(n).atan()}function Qse(n){return new this(n).atanh()}function eae(n,e){n=new this(n),e=new this(e);var t,r=this.precision,i=this.rounding,s=r+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=So(this,s,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?So(this,r,i):new this(0),t.s=n.s):!n.d||e.isZero()?(t=So(this,s,1).times(.5),t.s=n.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(Zn(n,e,s,1)),e=So(this,s,1),this.precision=r,this.rounding=i,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(Zn(n,e,s,1)),t}function tae(n){return new this(n).cbrt()}function nae(n){return Ft(n=new this(n),n.e+1,2)}function rae(n,e,t){return new this(n).clamp(e,t)}function iae(n){if(!n||typeof n!="object")throw Error(B_+"Object expected");var e,t,r,i=n.defaults===!0,s=["precision",1,sf,"rounding",0,8,"toExpNeg",-op,0,"toExpPos",0,op,"maxE",0,op,"minE",-op,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],i&&(this[t]=NT[t]),(r=n[t])!==void 0)if(rs(r)===r&&r>=s[e+1]&&r<=s[e+2])this[t]=r;else throw Error($c+t+": "+r);if(t="crypto",i&&(this[t]=NT[t]),(r=n[t])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(nW);else this[t]=!1;else throw Error($c+t+": "+r);return this}function sae(n){return new this(n).cos()}function aae(n){return new this(n).cosh()}function cW(n){var e,t,r;function i(s){var a,o,l,u=this;if(!(u instanceof i))return new i(s);if(u.constructor=i,$L(s)){u.s=s.s,Qt?!s.d||s.e>i.maxE?(u.e=NaN,u.d=null):s.e<i.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(a=0,o=s;o>=10;o/=10)a++;Qt?a>i.maxE?(u.e=NaN,u.d=null):a<i.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[s]):(u.e=a,u.d=[s]);return}else if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return OT(u,s.toString())}else if(l!=="string")throw Error($c+s);return(o=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(o===43&&(s=s.slice(1)),u.s=1),iW.test(s)?OT(u,s):Wse(u,s)}if(i.prototype=st,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=iae,i.clone=cW,i.isDecimal=$L,i.abs=jse,i.acos=qse,i.acosh=Xse,i.add=Yse,i.asin=Kse,i.asinh=Zse,i.atan=Jse,i.atanh=Qse,i.atan2=eae,i.cbrt=tae,i.ceil=nae,i.clamp=rae,i.cos=sae,i.cosh=aae,i.div=oae,i.exp=lae,i.floor=uae,i.hypot=cae,i.ln=fae,i.log=dae,i.log10=pae,i.log2=hae,i.max=mae,i.min=gae,i.mod=vae,i.mul=yae,i.pow=xae,i.random=bae,i.round=wae,i.sign=Sae,i.sin=_ae,i.sinh=Eae,i.sqrt=Mae,i.sub=Cae,i.sum=Aae,i.tan=Tae,i.tanh=Dae,i.trunc=Nae,n===void 0&&(n={}),n&&n.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function oae(n,e){return new this(n).div(e)}function lae(n){return new this(n).exp()}function uae(n){return Ft(n=new this(n),n.e+1,3)}function cae(){var n,e,t=new this(0);for(Qt=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Qt=!0,new this(1/0);t=e}return Qt=!0,t.sqrt()}function $L(n){return n instanceof Vc||n&&n.toStringTag===rW||!1}function fae(n){return new this(n).ln()}function dae(n,e){return new this(n).log(e)}function hae(n){return new this(n).log(2)}function pae(n){return new this(n).log(10)}function mae(){return oW(this,arguments,"lt")}function gae(){return oW(this,arguments,"gt")}function vae(n,e){return new this(n).mod(e)}function yae(n,e){return new this(n).mul(e)}function xae(n,e){return new this(n).pow(e)}function bae(n){var e,t,r,i,s=0,a=new this(1),o=[];if(n===void 0?n=this.precision:Ys(n,1,sf),r=Math.ceil(n/qt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));s<r;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);s<r;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(o.push(i%1e7),s+=4);s=r/4}else throw Error(nW);else for(;s<r;)o[s++]=Math.random()*1e7|0;for(r=o[--s],n%=qt,r&&n&&(i=ei(10,qt-n),o[s]=(r/i|0)*i);o[s]===0;s--)o.pop();if(s<0)t=0,o=[0];else{for(t=-1;o[0]===0;t-=qt)o.shift();for(r=1,i=o[0];i>=10;i/=10)r++;r<qt&&(t-=qt-r)}return a.e=t,a.d=o,a}function wae(n){return Ft(n=new this(n),n.e+1,this.rounding)}function Sae(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function _ae(n){return new this(n).sin()}function Eae(n){return new this(n).sinh()}function Mae(n){return new this(n).sqrt()}function Cae(n,e){return new this(n).sub(e)}function Aae(){var n=0,e=arguments,t=new this(e[n]);for(Qt=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return Qt=!0,Ft(t,this.precision,this.rounding)}function Tae(n){return new this(n).tan()}function Dae(n){return new this(n).tanh()}function Nae(n){return Ft(n=new this(n),n.e+1,1)}st[Symbol.for("nodejs.util.inspect.custom")]=st.toString;st[Symbol.toStringTag]="Decimal";var Vc=st.constructor=cW(NT);tS=new Vc(tS);nS=new Vc(nS);var Pae="BigNumber",Rae=["?on","config"],Oae=ae(Pae,Rae,n=>{var{on:e,config:t}=n,r=Vc.clone({precision:t.precision,modulo:Vc.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,s){i.precision!==s.precision&&r.config({precision:i.precision})}),r},{isClass:!0}),fW={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(n,e){(function(t){var r=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},s=function(f){var d=Math.PI/4;if(-d>f||f>d)return Math.cos(f)-1;var h=f*f;return h*(h*(h*(h*(h*(h*(h*(h/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},a=function(f,d){var h=Math.abs(f),p=Math.abs(d);return h<3e3&&p<3e3?Math.sqrt(h*h+p*p):(h<p?(h=p,p=f/d):p=d/f,h*Math.sqrt(1+p*p))},o=function(){throw SyntaxError("Invalid Param")};function l(f,d){var h=Math.abs(f),p=Math.abs(d);return f===0?Math.log(p):d===0?Math.log(h):h<3e3&&p<3e3?Math.log(f*f+d*d)*.5:(f=f/2,d=d/2,.5*Math.log(f*f+d*d)+Math.LN2)}var u=function(f,d){var h={re:0,im:0};if(f==null)h.re=h.im=0;else if(d!==void 0)h.re=f,h.im=d;else switch(typeof f){case"object":if("im"in f&&"re"in f)h.re=f.re,h.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;h.re=f.abs*Math.cos(f.arg),h.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;h.re=f.r*Math.cos(f.phi),h.im=f.r*Math.sin(f.phi)}else f.length===2?(h.re=f[0],h.im=f[1]):o();break;case"string":h.im=h.re=0;var p=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,y=0;p===null&&o();for(var m=0;m<p.length;m++){var S=p[m];S===" "||S==="	"||S===`
`||(S==="+"?v++:S==="-"?y++:S==="i"||S==="I"?(v+y===0&&o(),p[m+1]!==" "&&!isNaN(p[m+1])?(h.im+=parseFloat((y%2?"-":"")+p[m+1]),m++):h.im+=parseFloat((y%2?"-":"")+"1"),v=y=0):((v+y===0||isNaN(S))&&o(),p[m+1]==="i"||p[m+1]==="I"?(h.im+=parseFloat((y%2?"-":"")+S),m++):h.re+=parseFloat((y%2?"-":"")+S),v=y=0))}v+y>0&&o();break;case"number":h.im=0,h.re=f;break;default:o()}return isNaN(h.re)||isNaN(h.im),h};function c(f,d){if(!(this instanceof c))return new c(f,d);var h=u(f,d);this.re=h.re,this.im=h.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re+h.re,this.im+h.im)},sub:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re-h.re,this.im-h.im)},mul:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isZero()||this.isZero()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:h.im===0&&this.im===0?new c(this.re*h.re,0):new c(this.re*h.re-this.im*h.im,this.re*h.im+this.im*h.re)},div:function(f,d){var h=new c(f,d);if(this.isZero()&&h.isZero()||this.isInfinite()&&h.isInfinite())return c.NAN;if(this.isInfinite()||h.isZero())return c.INFINITY;if(this.isZero()||h.isInfinite())return c.ZERO;f=this.re,d=this.im;var p=h.re,v=h.im,y,m;return v===0?new c(f/p,d/p):Math.abs(p)<Math.abs(v)?(m=p/v,y=p*m+v,new c((f*m+d)/y,(d*m-f)/y)):(m=v/p,y=v*m+p,new c((f+d*m)/y,(d-f*m)/y))},pow:function(f,d){var h=new c(f,d);if(f=this.re,d=this.im,h.isZero())return c.ONE;if(h.im===0){if(d===0&&f>0)return new c(Math.pow(f,h.re),0);if(f===0)switch((h.re%4+4)%4){case 0:return new c(Math.pow(d,h.re),0);case 1:return new c(0,Math.pow(d,h.re));case 2:return new c(-Math.pow(d,h.re),0);case 3:return new c(0,-Math.pow(d,h.re))}}if(f===0&&d===0&&h.re>0&&h.im>=0)return c.ZERO;var p=Math.atan2(d,f),v=l(f,d);return f=Math.exp(h.re*v-h.im*p),d=h.im*v+h.re*p,new c(f*Math.cos(d),f*Math.sin(d))},sqrt:function(){var f=this.re,d=this.im,h=this.abs(),p,v;if(f>=0){if(d===0)return new c(Math.sqrt(f),0);p=.5*Math.sqrt(2*(h+f))}else p=Math.abs(d)/Math.sqrt(2*(h-f));return f<=0?v=.5*Math.sqrt(2*(h-f)):v=Math.abs(d)/Math.sqrt(2*(h+f)),new c(p,d<0?-v:v)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,d=this.im;return new c(Math.expm1(f)*Math.cos(d)+s(d),Math.exp(f)*Math.sin(d))},log:function(){var f=this.re,d=this.im;return new c(l(f,d),Math.atan2(d,f))},abs:function(){return a(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,d=this.im;return new c(Math.sin(f)*r(d),Math.cos(f)*i(d))},cos:function(){var f=this.re,d=this.im;return new c(Math.cos(f)*r(d),-Math.sin(f)*i(d))},tan:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)+r(d);return new c(Math.sin(f)/h,i(d)/h)},cot:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)-r(d);return new c(-Math.sin(f)/h,i(d)/h)},sec:function(){var f=this.re,d=this.im,h=.5*r(2*d)+.5*Math.cos(2*f);return new c(Math.cos(f)*r(d)/h,Math.sin(f)*i(d)/h)},csc:function(){var f=this.re,d=this.im,h=.5*r(2*d)-.5*Math.cos(2*f);return new c(Math.sin(f)*r(d)/h,-Math.cos(f)*i(d)/h)},asin:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),p=new c(h.re-d,h.im+f).log();return new c(p.im,-p.re)},acos:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),p=new c(h.re-d,h.im+f).log();return new c(Math.PI/2-p.im,p.re)},atan:function(){var f=this.re,d=this.im;if(f===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var h=f*f+(1-d)*(1-d),p=new c((1-d*d-f*f)/h,-2*f/h).log();return new c(-.5*p.im,.5*p.re)},acot:function(){var f=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,f),0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atan():new c(f!==0?f/0:0,d!==0?-d/0:0).atan()},asec:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acos():new c(f!==0?f/0:0,d!==0?-d/0:0).acos()},acsc:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(Math.PI/2,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asin():new c(f!==0?f/0:0,d!==0?-d/0:0).asin()},sinh:function(){var f=this.re,d=this.im;return new c(i(f)*Math.cos(d),r(f)*Math.sin(d))},cosh:function(){var f=this.re,d=this.im;return new c(r(f)*Math.cos(d),i(f)*Math.sin(d))},tanh:function(){var f=2*this.re,d=2*this.im,h=r(f)+Math.cos(d);return new c(i(f)/h,Math.sin(d)/h)},coth:function(){var f=2*this.re,d=2*this.im,h=r(f)-Math.cos(d);return new c(i(f)/h,-Math.sin(d)/h)},csch:function(){var f=this.re,d=this.im,h=Math.cos(2*d)-r(2*f);return new c(-2*i(f)*Math.cos(d)/h,2*r(f)*Math.sin(d)/h)},sech:function(){var f=this.re,d=this.im,h=Math.cos(2*d)+r(2*f);return new c(2*r(f)*Math.cos(d)/h,-2*i(f)*Math.sin(d)/h)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var d=this.asin();return this.re=-this.im,this.im=f,f=d.re,d.re=-d.im,d.im=f,d},acosh:function(){var f=this.acos();if(f.im<=0){var d=f.re;f.re=-f.im,f.im=d}else{var d=f.im;f.im=-f.re,f.re=d}return f},atanh:function(){var f=this.re,d=this.im,h=f>1&&d===0,p=1-f,v=1+f,y=p*p+d*d,m=y!==0?new c((v*p-d*d)/y,(d*p+v*d)/y):new c(f!==-1?f/0:0,d!==0?d/0:0),S=m.re;return m.re=l(m.re,m.im)/2,m.im=Math.atan2(m.im,S)/2,h&&(m.im=-m.im),m},acoth:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,Math.PI/2);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atanh():new c(f!==0?f/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var f=this.re,d=this.im;if(d===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asinh():new c(f!==0?f/0:0,d!==0?-d/0:0).asinh()},asech:function(){var f=this.re,d=this.im;if(this.isZero())return c.INFINITY;var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acosh():new c(f!==0?f/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,d=this.im,h=f*f+d*d;return new c(f/h,-d/h)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,d){var h=new c(f,d);return Math.abs(h.re-this.re)<=c.EPSILON&&Math.abs(h.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,d=this.im,h="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?h+f:(f!==0?(h+=f,h+=" ",d<0?(d=-d,h+="-"):h+="+",h+=" "):d<0&&(d=-d,h+="-"),d!==1&&(h+=d),h+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,n.exports=c})()})(fW);var Iae=fW.exports;const _i=so(Iae);var kae="Complex",Lae=[],Fae=ae(kae,Lae,()=>(Object.defineProperty(_i,"name",{value:"Complex"}),_i.prototype.constructor=_i,_i.prototype.type="Complex",_i.prototype.isComplex=!0,_i.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},_i.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},_i.prototype.format=function(n){var e="",t=this.im,r=this.re,i=sd(this.re,n),s=sd(this.im,n),a=tn(n)?n:n?n.precision:null;if(a!==null){var o=Math.pow(10,-a);Math.abs(r/t)<o&&(r=0),Math.abs(t/r)<o&&(t=0)}return t===0?e=i:r===0?t===1?e="i":t===-1?e="-i":e=s+"i":t<0?t===-1?e=i+" - i":e=i+" - "+s.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+s+"i",e},_i.fromPolar=function(n){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return _i(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],r=arguments[1];if(tn(t)){if(zs(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),tn(r))return new _i({r:t,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},_i.prototype.valueOf=_i.prototype.toString,_i.fromJSON=function(n){return new _i(n)},_i.compare=function(n,e){return n.re>e.re?1:n.re<e.re?-1:n.im>e.im?1:n.im<e.im?-1:0},_i),{isClass:!0}),dW={exports:{}};/**
 * @license Fraction.js v4.3.0 20/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(n,e){(function(t){var r=2e3,i={s:1,n:0,d:1};function s(m,S){if(isNaN(m=parseInt(m,10)))throw v();return m*S}function a(m,S){if(S===0)throw p();var b=Object.create(h.prototype);b.s=m<0?-1:1,m=m<0?-m:m;var g=d(m,S);return b.n=m/g,b.d=S/g,b}function o(m){for(var S={},b=m,g=2,w=4;w<=b;){for(;b%g===0;)b/=g,S[g]=(S[g]||0)+1;w+=1+2*g++}return b!==m?b>1&&(S[b]=(S[b]||0)+1):S[m]=(S[m]||0)+1,S}var l=function(m,S){var b=0,g=1,w=1,x=0,M=0,A=0,N=1,C=1,T=0,R=1,U=1,F=1,B=1e7,D;if(m!=null)if(S!==void 0){if(b=m,g=S,w=b*g,b%1!==0||g%1!==0)throw y()}else switch(typeof m){case"object":{if("d"in m&&"n"in m)b=m.n,g=m.d,"s"in m&&(b*=m.s);else if(0 in m)b=m[0],1 in m&&(g=m[1]);else throw v();w=b*g;break}case"number":{if(m<0&&(w=m,m=-m),m%1===0)b=m;else if(m>0){for(m>=1&&(C=Math.pow(10,Math.floor(1+Math.log(m)/Math.LN10)),m/=C);R<=B&&F<=B;)if(D=(T+U)/(R+F),m===D){R+F<=B?(b=T+U,g=R+F):F>R?(b=U,g=F):(b=T,g=R);break}else m>D?(T+=U,R+=F):(U+=T,F+=R),R>B?(b=U,g=F):(b=T,g=R);b*=C}else(isNaN(m)||isNaN(S))&&(g=b=NaN);break}case"string":{if(R=m.match(/\d+|./g),R===null)throw v();if(R[T]==="-"?(w=-1,T++):R[T]==="+"&&T++,R.length===T+1?M=s(R[T++],w):R[T+1]==="."||R[T]==="."?(R[T]!=="."&&(x=s(R[T++],w)),T++,(T+1===R.length||R[T+1]==="("&&R[T+3]===")"||R[T+1]==="'"&&R[T+3]==="'")&&(M=s(R[T],w),N=Math.pow(10,R[T].length),T++),(R[T]==="("&&R[T+2]===")"||R[T]==="'"&&R[T+2]==="'")&&(A=s(R[T+1],w),C=Math.pow(10,R[T+1].length)-1,T+=3)):R[T+1]==="/"||R[T+1]===":"?(M=s(R[T],w),N=s(R[T+2],1),T+=3):R[T+3]==="/"&&R[T+1]===" "&&(x=s(R[T],w),M=s(R[T+2],w),N=s(R[T+4],1),T+=5),R.length<=T){g=N*C,w=b=A+g*x+C*M;break}}default:throw v()}if(g===0)throw p();i.s=w<0?-1:1,i.n=Math.abs(b),i.d=Math.abs(g)};function u(m,S,b){for(var g=1;S>0;m=m*m%b,S>>=1)S&1&&(g=g*m%b);return g}function c(m,S){for(;S%2===0;S/=2);for(;S%5===0;S/=5);if(S===1)return 0;for(var b=10%S,g=1;b!==1;g++)if(b=b*10%S,g>r)return 0;return g}function f(m,S,b){for(var g=1,w=u(10,b,S),x=0;x<300;x++){if(g===w)return x;g=g*10%S,w=w*10%S}return 0}function d(m,S){if(!m)return S;if(!S)return m;for(;;){if(m%=S,!m)return S;if(S%=m,!S)return m}}function h(m,S){if(l(m,S),this instanceof h)m=d(i.d,i.n),this.s=i.s,this.n=i.n/m,this.d=i.d/m;else return a(i.s*i.n,i.d)}var p=function(){return new Error("Division by Zero")},v=function(){return new Error("Invalid argument")},y=function(){return new Error("Parameters must be integer")};h.prototype={s:1,n:0,d:1,abs:function(){return a(this.n,this.d)},neg:function(){return a(-this.s*this.n,this.d)},add:function(m,S){return l(m,S),a(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(m,S){return l(m,S),a(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(m,S){return l(m,S),a(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(m,S){return l(m,S),a(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return a(this.s*this.n,this.d)},mod:function(m,S){if(isNaN(this.n)||isNaN(this.d))return new h(NaN);if(m===void 0)return a(this.s*this.n%this.d,1);if(l(m,S),i.n===0&&this.d===0)throw p();return a(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(m,S){return l(m,S),a(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(m,S){return l(m,S),i.n===0&&this.n===0?a(0,1):a(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(m){return m=Math.pow(10,m||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):a(Math.ceil(m*this.s*this.n/this.d),m)},floor:function(m){return m=Math.pow(10,m||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):a(Math.floor(m*this.s*this.n/this.d),m)},round:function(m){return m=Math.pow(10,m||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):a(Math.round(m*this.s*this.n/this.d),m)},inverse:function(){return a(this.s*this.d,this.n)},pow:function(m,S){if(l(m,S),i.d===1)return i.s<0?a(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):a(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var b=o(this.n),g=o(this.d),w=1,x=1;for(var M in b)if(M!=="1"){if(M==="0"){w=0;break}if(b[M]*=i.n,b[M]%i.d===0)b[M]/=i.d;else return null;w*=Math.pow(M,b[M])}for(var M in g)if(M!=="1"){if(g[M]*=i.n,g[M]%i.d===0)g[M]/=i.d;else return null;x*=Math.pow(M,g[M])}return i.s<0?a(x,w):a(w,x)},equals:function(m,S){return l(m,S),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(m,S){l(m,S);var b=this.s*this.n*i.d-i.s*i.n*this.d;return(0<b)-(b<0)},simplify:function(m){if(isNaN(this.n)||isNaN(this.d))return this;m=m||.001;for(var S=this.abs(),b=S.toContinued(),g=1;g<b.length;g++){for(var w=a(b[g-1],1),x=g-2;x>=0;x--)w=w.inverse().add(b[x]);if(Math.abs(w.sub(S).valueOf())<m)return w.mul(this.s)}return this},divisible:function(m,S){return l(m,S),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(m){var S,b="",g=this.n,w=this.d;return this.s<0&&(b+="-"),w===1?b+=g:(m&&(S=Math.floor(g/w))>0&&(b+=S,b+=" ",g%=w),b+=g,b+="/",b+=w),b},toLatex:function(m){var S,b="",g=this.n,w=this.d;return this.s<0&&(b+="-"),w===1?b+=g:(m&&(S=Math.floor(g/w))>0&&(b+=S,g%=w),b+="\\frac{",b+=g,b+="}{",b+=w,b+="}"),b},toContinued:function(){var m,S=this.n,b=this.d,g=[];if(isNaN(S)||isNaN(b))return g;do g.push(Math.floor(S/b)),m=S%b,S=b,b=m;while(S!==1);return g},toString:function(m){var S=this.n,b=this.d;if(isNaN(S)||isNaN(b))return"NaN";m=m||15;var g=c(S,b),w=f(S,b,g),x=this.s<0?"-":"";if(x+=S/b|0,S%=b,S*=10,S&&(x+="."),g){for(var M=w;M--;)x+=S/b|0,S%=b,S*=10;x+="(";for(var M=g;M--;)x+=S/b|0,S%=b,S*=10;x+=")"}else for(var M=m;S&&M--;)x+=S/b|0,S%=b,S*=10;return x}},Object.defineProperty(h,"__esModule",{value:!0}),h.default=h,h.Fraction=h,n.exports=h})()})(dW);var Bae=dW.exports;const Ul=so(Bae);var zae="Fraction",Uae=[],$ae=ae(zae,Uae,()=>(Object.defineProperty(Ul,"name",{value:"Fraction"}),Ul.prototype.constructor=Ul,Ul.prototype.type="Fraction",Ul.prototype.isFraction=!0,Ul.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Ul.fromJSON=function(n){return new Ul(n)},Ul),{isClass:!0}),Vae="Range",Hae=[],Wae=ae(Vae,Hae,()=>{function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,s=t!=null,a=r!=null;if(i){if(Jt(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(s){if(Jt(t))t=t.toNumber();else if(typeof t!="number")throw new TypeError("Parameter end must be a number")}if(a){if(Jt(r))r=r.toNumber();else if(typeof r!="number")throw new TypeError("Parameter step must be a number")}this.start=i?parseFloat(e):0,this.end=s?parseFloat(t):0,this.step=a?parseFloat(r):1}return n.prototype.type="Range",n.prototype.isRange=!0,n.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),r=t.map(function(s){return parseFloat(s)}),i=r.some(function(s){return isNaN(s)});if(i)return null;switch(r.length){case 2:return new n(r[0],r[1]);case 3:return new n(r[0],r[2],r[1]);default:return null}},n.prototype.clone=function(){return new n(this.start,this.end,this.step)},n.prototype.size=function(){var e=0,t=this.start,r=this.step,i=this.end,s=i-t;return vc(r)===vc(s)?e=Math.ceil(s/r):s===0&&(e=0),isNaN(e)&&(e=0),[e]},n.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},n.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},n.prototype.forEach=function(e){var t=this.start,r=this.step,i=this.end,s=0;if(r>0)for(;t<i;)e(t,[s],this),t+=r,s++;else if(r<0)for(;t>i;)e(t,[s],this),t+=r,s++},n.prototype.map=function(e){var t=[];return this.forEach(function(r,i,s){t[i[0]]=e(r,i,s)}),t},n.prototype.toArray=function(){var e=[];return this.forEach(function(t,r){e[r[0]]=t}),e},n.prototype.valueOf=function(){return this.toArray()},n.prototype.format=function(e){var t=sd(this.start,e);return this.step!==1&&(t+=":"+sd(this.step,e)),t+=":"+sd(this.end,e),t},n.prototype.toString=function(){return this.format()},n.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},n.fromJSON=function(e){return new n(e.start,e.end,e.step)},n},{isClass:!0}),Gae="Matrix",jae=[],qae=ae(Gae,jae,()=>{function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator")}return n.prototype.type="Matrix",n.prototype.isMatrix=!0,n.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},n.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},n.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},n.prototype.subset=function(e,t,r){throw new Error("Cannot invoke subset on a Matrix interface")},n.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},n.prototype.set=function(e,t,r){throw new Error("Cannot invoke set on a Matrix interface")},n.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},n.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},n.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},n.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},n.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},n.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},n.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},n.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},n.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},n.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},n.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},n},{isClass:!0});function U2(n,e,t){var r=n.constructor,i=new r(2),s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Ot(t))throw new Error("size must be an integer");if(n.greaterThan(i.pow(t-1).sub(1))||n.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!n.isInteger())throw new Error("Value must be an integer");n.lessThan(0)&&(n=n.add(i.pow(t))),s="i".concat(t)}switch(e){case 2:return"".concat(n.toBinary()).concat(s);case 8:return"".concat(n.toOctal()).concat(s);case 16:return"".concat(n.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function Xae(n,e){if(typeof e=="function")return e(n);if(!n.isFinite())return n.isNaN()?"NaN":n.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:r,wordSize:i}=WH(e);switch(t){case"fixed":return Kae(n,r);case"exponential":return VL(n,r);case"engineering":return Yae(n,r);case"bin":return U2(n,2,i);case"oct":return U2(n,8,i);case"hex":return U2(n,16,i);case"auto":{var s=HL(e==null?void 0:e.lowerExp,-3),a=HL(e==null?void 0:e.upperExp,5);if(n.isZero())return"0";var o,l=n.toSignificantDigits(r),u=l.e;return u>=s&&u<a?o=l.toFixed():o=VL(n,r),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Yae(n,e){var t=n.e,r=t%3===0?t:t<0?t-3-t%3:t-t%3,i=n.mul(Math.pow(10,-r)),s=i.toPrecision(e);if(s.includes("e")){var a=n.constructor;s=new a(s).toFixed()}return s+"e"+(t>=0?"+":"")+r.toString()}function VL(n,e){return e!==void 0?n.toExponential(e-1):n.toExponential()}function Kae(n,e){return n.toFixed(e)}function HL(n,e){return tn(n)?n:Jt(n)?n.toNumber():e}function Zae(n,e){var t=n.length-e.length,r=n.length;return n.substring(t,r)===e}function un(n,e){var t=Jae(n,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function Jae(n,e){if(typeof n=="number")return sd(n,e);if(Jt(n))return Xae(n,e);if(Qae(n))return!e||e.fraction!=="decimal"?n.s*n.n+"/"+n.d:n.toString();if(Array.isArray(n))return hW(n,e);if(Ai(n))return lp(n);if(typeof n=="function")return n.syntax?String(n.syntax):"function";if(n&&typeof n=="object"){if(typeof n.format=="function")return n.format(e);if(n&&n.toString(e)!=={}.toString())return n.toString(e);var t=Object.keys(n).map(r=>lp(r)+": "+un(n[r],e));return"{"+t.join(", ")+"}"}return String(n)}function lp(n){for(var e=String(n),t="",r=0;r<e.length;){var i=e.charAt(r);t+=i in WL?WL[i]:i,r++}return'"'+t+'"'}var WL={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Wa(n){var e=String(n);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function hW(n,e){if(Array.isArray(n)){for(var t="[",r=n.length,i=0;i<r;i++)i!==0&&(t+=", "),t+=hW(n[i],e);return t+="]",t}else return un(n,e)}function Qae(n){return n&&typeof n=="object"&&typeof n.s=="number"&&typeof n.n=="number"&&typeof n.d=="number"||!1}function IT(n,e){if(!Ai(n))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+$n(n)+", index: 0)");if(!Ai(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+$n(e)+", index: 1)");return n===e?0:n>e?1:-1}function on(n,e,t){if(!(this instanceof on))throw new SyntaxError("Constructor must be called with the new operator");this.actual=n,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(n)?"["+n.join(", ")+"]":n)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}on.prototype=new RangeError;on.prototype.constructor=RangeError;on.prototype.name="DimensionError";on.prototype.isDimensionError=!0;function ao(n,e,t){if(!(this instanceof ao))throw new SyntaxError("Constructor must be called with the new operator");this.index=n,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}ao.prototype=new RangeError;ao.prototype.constructor=RangeError;ao.prototype.name="IndexError";ao.prototype.isIndexError=!0;function nn(n){for(var e=[];Array.isArray(n);)e.push(n.length),n=n[0];return e}function pW(n,e,t){var r,i=n.length;if(i!==e[t])throw new on(i,e[t]);if(t<e.length-1){var s=t+1;for(r=0;r<i;r++){var a=n[r];if(!Array.isArray(a))throw new on(e.length-1,e.length,"<");pW(n[r],e,s)}}else for(r=0;r<i;r++)if(Array.isArray(n[r]))throw new on(e.length+1,e.length,">")}function GL(n,e){var t=e.length===0;if(t){if(Array.isArray(n))throw new on(n.length,0)}else pW(n,e,0)}function iS(n,e){var t=n.isMatrix?n._size:nn(n),r=e._sourceSize;r.forEach((i,s)=>{if(i!==null&&i!==t[s])throw new on(i,t[s])})}function Fn(n,e){if(n!==void 0){if(!tn(n)||!Ot(n))throw new TypeError("Index must be an integer (value: "+n+")");if(n<0||typeof e=="number"&&n>=e)throw new ao(n,e)}}function qp(n){for(var e=0;e<n._dimensions.length;++e){var t=n._dimensions[e];if(t._data&&_n(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(Ai(t)&&t.length===0)return!0}return!1}function Xp(n,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!tn(i)||!Ot(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+un(e)+")")}),(tn(n)||Jt(n))&&(n=[n]);var r=t!==void 0?t:0;return kT(n,e,0,r),n}function kT(n,e,t,r){var i,s,a=n.length,o=e[t],l=Math.min(a,o);if(n.length=o,t<e.length-1){var u=t+1;for(i=0;i<l;i++)s=n[i],Array.isArray(s)||(s=[s],n[i]=s),kT(s,e,u,r);for(i=l;i<o;i++)s=[],n[i]=s,kT(s,e,u,r)}else{for(i=0;i<l;i++)for(;Array.isArray(n[i]);)n[i]=n[i][0];for(i=l;i<o;i++)n[i]=r}}function pP(n,e){var t=wn(n),r=t.length;if(!Array.isArray(n)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new on(0,r,"!=");e=mP(e,r);var i=mW(e);if(r!==i)throw new on(i,r,"!=");try{return eoe(t,e)}catch(s){throw s instanceof on?new on(i,r,"!="):s}}function mP(n,e){var t=mW(n),r=n.slice(),i=-1,s=n.indexOf(i),a=n.indexOf(i,s+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var o=s>=0,l=e%t===0;if(o)if(l)r[s]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return r}function mW(n){return n.reduce((e,t)=>e*t,1)}function eoe(n,e){for(var t=n,r,i=e.length-1;i>0;i--){var s=e[i];r=[];for(var a=t.length/s,o=0;o<a;o++)r.push(t.slice(o*s,(o+1)*s));t=r}return t}function sS(n,e){for(var t=nn(n);Array.isArray(n)&&n.length===1;)n=n[0],t.shift();for(var r=t.length;t[r-1]===1;)r--;return r<t.length&&(n=gW(n,r,0),t.length=r),n}function gW(n,e,t){var r,i;if(t<e){var s=t+1;for(r=0,i=n.length;r<i;r++)n[r]=gW(n[r],e,s)}else for(;Array.isArray(n);)n=n[0];return n}function vW(n,e,t,r){var i=r||nn(n);if(t)for(var s=0;s<t;s++)n=[n],i.unshift(1);for(n=yW(n,e,0);i.length<e;)i.push(1);return n}function yW(n,e,t){var r,i;if(Array.isArray(n)){var s=t+1;for(r=0,i=n.length;r<i;r++)n[r]=yW(n[r],e,s)}else for(var a=t;a<e;a++)n=[n];return n}function wn(n){if(!Array.isArray(n))return n;var e=[];return n.forEach(function t(r){Array.isArray(r)?r.forEach(t):e.push(r)}),e}function uu(n,e){return Array.prototype.map.call(n,e)}function $_(n,e){Array.prototype.forEach.call(n,e)}function xW(n,e){if(nn(n).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(n,e)}function aS(n,e){if(nn(n).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(n,t=>e.test(t))}function jL(n,e){return Array.prototype.join.call(n,e)}function Yp(n){if(!Array.isArray(n))throw new TypeError("Array input expected");if(n.length===0)return n;var e=[],t=0;e[0]={value:n[0],identifier:0};for(var r=1;r<n.length;r++)n[r]===n[r-1]?t++:t=0,e.push({value:n[r],identifier:t});return e}function oS(n){if(!Array.isArray(n))throw new TypeError("Array input expected");if(n.length===0)return n;for(var e=[],t=0;t<n.length;t++)e.push(n[t].value);return e}function Jv(n,e){for(var t,r=0,i=0;i<n.length;i++){var s=n[i],a=Array.isArray(s);if(i===0&&a&&(r=s.length),a&&s.length!==r)return;var o=a?Jv(s,e):e(s);if(t===void 0)t=o;else if(t!==o)return"mixed"}return t}function bW(n,e,t,r){if(r<t){if(n.length!==e.length)throw new on(n.length,e.length);for(var i=[],s=0;s<n.length;s++)i[s]=bW(n[s],e[s],t,r+1);return i}else return n.concat(e)}function wW(){var n=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(n.length===1)return n[0];if(n.length>1)return n.slice(1).reduce(function(t,r){return bW(t,r,e,0)},n[0]);throw new Error("Wrong number of arguments in function concat")}function toe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];for(var r=e.map(d=>d.length),i=Math.max(...r),s=new Array(i).fill(null),a=0;a<e.length;a++)for(var o=e[a],l=r[a],u=0;u<l;u++){var c=i-l+u;o[u]>s[c]&&(s[c]=o[u])}for(var f=0;f<e.length;f++)lS(e[f],s);return s}function lS(n,e){for(var t=e.length,r=n.length,i=0;i<r;i++){var s=t-r+i;if(n[i]<e[s]&&n[i]>1||n[i]>e[s])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(n,") not possible to broadcast dimension ").concat(r," with size ").concat(n[i]," to size ").concat(e[s]))}}function qL(n,e){var t=nn(n);if(bd(t,e))return n;lS(t,e);var r=toe(t,e),i=r.length,s=[...Array(i-t.length).fill(1),...t],a=roe(n);t.length<i&&(a=pP(a,s),t=nn(a));for(var o=0;o<i;o++)t[o]<r[o]&&(a=noe(a,r[o],o),t=nn(a));return a}function noe(n,e,t){return wW(...Array(e).fill(n),t)}function roe(n){return ot([],n)}function ioe(n){var e=0,t=1,r=Object.create(null),i=Object.create(null),s=0,a=function(l){var u=i[l];if(u&&(delete r[u],delete i[l],--e,t===u)){if(!e){s=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++t););}};return n=Math.abs(n),{hit:function(l){var u=i[l],c=++s;if(r[c]=l,i[l]=c,!u)return++e,e<=n?void 0:(l=r[t],a(l),l);if(delete r[u],t===u)for(;!Object.prototype.hasOwnProperty.call(r,++t););},delete:a,clear:function(){e=s=0,t=1,r=Object.create(null),i=Object.create(null)}}}function sy(n){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:ioe(t||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=e(i);if(r.cache.values.has(a))return r.cache.lru.hit(a),r.cache.values.get(a);var o=n.apply(n,i);return r.cache.values.set(a,o),r.cache.values.delete(r.cache.lru.hit(a)),o}}function SW(n){return Object.keys(n.signatures||{}).reduce(function(e,t){var r=(t.match(/,/g)||[]).length+1;return Math.max(e,r)},-1)}var soe="DenseMatrix",aoe=["Matrix"],ooe=ae(soe,aoe,n=>{var{Matrix:e}=n;function t(c,f){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Ai(f))throw new Error("Invalid datatype: "+f);if(Ut(c))c.type==="DenseMatrix"?(this._data=Xt(c._data),this._size=Xt(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&_n(c.data)&&_n(c.size))this._data=c.data,this._size=c.size,GL(this._data,this._size),this._datatype=f||c.datatype;else if(_n(c))this._data=u(c),this._size=nn(this._data),GL(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+$n(c)+")");this._data=[],this._size=[0],this._datatype=f}}t.prototype=new e,t.prototype.createDenseMatrix=function(c,f){return new t(c,f)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return Jv(this._data,$n)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(c,f){return new t(c,f)},t.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(c){if(!_n(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new on(c.length,this._size.length);for(var f=0;f<c.length;f++)Fn(c[f],this._size[f]);for(var d=this._data,h=0,p=c.length;h<p;h++){var v=c[h];Fn(v,d.length),d=d[v]}return d},t.prototype.set=function(c,f,d){if(!_n(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new on(c.length,this._size.length,"<");var h,p,v,y=c.map(function(S){return S+1});l(this,y,d);var m=this._data;for(h=0,p=c.length-1;h<p;h++)v=c[h],Fn(v,m.length),m=m[v];return v=c[c.length-1],Fn(v,m.length),m[v]=f,this};function r(c,f){if(!ty(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new on(h.length,c._size.length);for(var p=f.min(),v=f.max(),y=0,m=c._size.length;y<m;y++)Fn(p[y],c._size[y]),Fn(v[y],c._size[y]);return new t(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var p=h===d-1,v=f.dimension(h);return p?v.map(function(y){return Fn(y,c.length),c[y]}).valueOf():v.map(function(y){Fn(y,c.length);var m=c[y];return i(m,f,d,h+1)}).valueOf()}function s(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var p=f.size(),v=f.isScalar(),y;if(Ut(d)?(y=d.size(),d=d.valueOf()):y=nn(d),v){if(y.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!bd(y,p))try{y.length===0?d=qL([d],p):d=qL(d,p),y=nn(d)}catch{}if(p.length<c._size.length)throw new on(p.length,c._size.length,"<");if(y.length<p.length){for(var m=0,S=0;p[m]===1&&y[m]===1;)m++;for(;p[m]===1;)S++,m++;d=vW(d,p.length,S,y)}if(!bd(p,y))throw new on(p,y,">");var b=f.max().map(function(x){return x+1});l(c,b,h);var g=p.length,w=0;a(c._data,f,d,g,w)}return c}function a(c,f,d,h,p){var v=p===h-1,y=f.dimension(p);v?y.forEach(function(m,S){Fn(m),c[m]=d[S[0]]}):y.forEach(function(m,S){Fn(m),a(c[m],f,d[S[0]],h,p+1)})}t.prototype.resize=function(c,f,d){if(!_a(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),p=d?this.clone():this;return o(p,h,f)};function o(c,f,d){if(f.length===0){for(var h=c._data;_n(h);)h=h[0];return h}return c._size=f.slice(0),c._data=Xp(c._data,c._size,d),c}t.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=pP(d._data,c);var h=d._size.reduce((p,v)=>p*v);return d._size=mP(c,h),d};function l(c,f,d){for(var h=c._size.slice(0),p=!1;h.length<f.length;)h.push(0),p=!0;for(var v=0,y=f.length;v<y;v++)f[v]>h[v]&&(h[v]=f[v],p=!0);p&&o(c,h,d)}t.prototype.clone=function(){var c=new t({data:Xt(this._data),size:Xt(this._size),datatype:this._datatype});return c},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(c){var f=this,d=SW(c),h=function y(m,S){return _n(m)?m.map(function(b,g){return y(b,S.concat(g))}):d===1?c(m):d===2?c(m,S):c(m,S,f)},p=h(this._data,[]),v=this._datatype!==void 0?Jv(p,$n):void 0;return new t(p,v)},t.prototype.forEach=function(c){var f=this,d=function h(p,v){_n(p)?p.forEach(function(y,m){h(y,v.concat(m))}):c(p,v,f)};d(this._data,[])},t.prototype[Symbol.iterator]=function*(){var c=function*f(d,h){if(_n(d))for(var p=0;p<d.length;p++)yield*f(d[p],h.concat(p));else yield{value:d,index:h}};yield*c(this._data,[])},t.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new t([h],this._datatype));return c},t.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,p=function(m){var S=h.map(b=>[b[m]]);f.push(new t(S,c._datatype))},v=0;v<d[1];v++)p(v);return f},t.prototype.toArray=function(){return Xt(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(c){return un(this._data,c)},t.prototype.toString=function(){return un(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(c){if(c){if(Jt(c)&&(c=c.toNumber()),!tn(c)||!Ot(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],p=this._size[1],v=Math.min(h-d,p-f),y=[],m=0;m<v;m++)y[m]=this._data[m+d][m+f];return new t({data:y,size:[v],datatype:this._datatype})},t.diagonal=function(c,f,d,h){if(!_n(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(M){if(Jt(M)&&(M=M.toNumber()),!tn(M)||!Ot(M)||M<1)throw new Error("Size values must be positive integers");return M}),d){if(Jt(d)&&(d=d.toNumber()),!tn(d)||!Ot(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var p=d>0?d:0,v=d<0?-d:0,y=c[0],m=c[1],S=Math.min(y-v,m-p),b;if(_n(f)){if(f.length!==S)throw new Error("Invalid value array length");b=function(A){return f[A]}}else if(Ut(f)){var g=f.size();if(g.length!==1||g[0]!==S)throw new Error("Invalid matrix length");b=function(A){return f.get([A])}}else b=function(){return f};h||(h=Jt(b(0))?b(0).mul(0):0);var w=[];if(c.length>0){w=Xp(w,c,h);for(var x=0;x<S;x++)w[x+v][x+p]=b(x)}return new t({data:w,size:[y,m]})},t.fromJSON=function(c){return new t(c)},t.prototype.swapRows=function(c,f){if(!tn(c)||!Ot(c)||!tn(f)||!Ot(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Fn(c,this._size[0]),Fn(f,this._size[0]),t._swapRows(c,f,this._data),this},t._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function u(c){return Ut(c)?u(c.valueOf()):_n(c)?c.map(u):c}return t},{isClass:!0}),XL="clone",loe=["typed"],uoe=ae(XL,loe,n=>{var{typed:e}=n;return e(XL,{any:Xt})});function _W(n){var e=n.length,t=n[0].length,r,i,s=[];for(i=0;i<t;i++){var a=[];for(r=0;r<e;r++)a.push(n[r][i]);s.push(a)}return s}function xm(n){for(var e=0;e<n.length;e++)if(_a(n[e]))return!0;return!1}function wu(n,e){Ut(n)&&(n=n.valueOf());for(var t=0,r=n.length;t<r;t++){var i=n[t];Array.isArray(i)?wu(i,e):e(i)}}function cn(n,e,t){return n&&typeof n.map=="function"?n.map(function(r){return cn(r,e)}):e(n)}function V_(n,e,t){var r=Array.isArray(n)?nn(n):n.size();if(e<0||e>=r.length)throw new ao(e,r.length);return Ut(n)?n.create(uS(n.valueOf(),e,t)):uS(n,e,t)}function uS(n,e,t){var r,i,s,a;if(e<=0)if(Array.isArray(n[0])){for(a=_W(n),i=[],r=0;r<a.length;r++)i[r]=uS(a[r],e-1,t);return i}else{for(s=n[0],r=1;r<n.length;r++)s=t(s,n[r]);return s}else{for(i=[],r=0;r<n.length;r++)i[r]=uS(n[r],e-1,t);return i}}function YL(n,e,t,r,i,s,a,o,l,u,c){var f=n._values,d=n._index,h=n._ptr,p,v,y,m;if(r)for(v=h[e],y=h[e+1],p=v;p<y;p++)m=d[p],t[m]!==s?(t[m]=s,a.push(m),r[m]=f[p]):(r[m]=o(r[m],f[p]),i[m]=s);else for(v=h[e],y=h[e+1],p=v;p<y;p++)m=d[p],t[m]!==s?(t[m]=s,a.push(m)):i[m]=s}var KL="isInteger",coe=["typed"],foe=ae(KL,coe,n=>{var{typed:e}=n;return e(KL,{number:Ot,BigNumber:function(r){return r.isInt()},Fraction:function(r){return r.d===1&&isFinite(r.n)},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),Ro="number",bm="number, number";function EW(n){return Math.abs(n)}EW.signature=Ro;function MW(n,e){return n+e}MW.signature=bm;function CW(n,e){return n-e}CW.signature=bm;function AW(n,e){return n*e}AW.signature=bm;function TW(n){return-n}TW.signature=Ro;function DW(n){return n}DW.signature=Ro;function Yg(n){return dse(n)}Yg.signature=Ro;function NW(n){return n*n*n}NW.signature=Ro;function PW(n){return Math.exp(n)}PW.signature=Ro;function RW(n){return hse(n)}RW.signature=Ro;function OW(n,e){if(!Ot(n)||!Ot(e))throw new Error("Parameters in function lcm must be integer numbers");if(n===0||e===0)return 0;for(var t,r=n*e;e!==0;)t=e,e=n%t,n=t;return Math.abs(r/n)}OW.signature=bm;function doe(n,e){return Math.log(n)}function IW(n){return cse(n)}IW.signature=Ro;function kW(n){return use(n)}kW.signature=Ro;function ZL(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(n<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(n===0)return t?1/0:0;if(!isFinite(n))return t?0:n;var r=Math.pow(Math.abs(n),1/e);return r=n<0?-r:r,t?1/r:r}function LT(n){return vc(n)}LT.signature=Ro;function LW(n){return n*n}LW.signature=Ro;function FW(n,e){var t,r,i,s=0,a=1,o=1,l=0;if(!Ot(n)||!Ot(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)r=Math.floor(n/e),i=n-r*e,t=s,s=a-r*s,a=t,t=o,o=l-r*o,l=t,n=e,e=i;var u;return n<0?u=[-n,-a,-l]:u=[n,n?a:0,l],u}FW.signature=bm;function BW(n,e){return n*n<1&&e===1/0||n*n>1&&e===-1/0?0:Math.pow(n,e)}BW.signature=bm;function vg(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!Ot(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(GH(n,e))}var hoe="number",wm="number, number";function zW(n,e){if(!Ot(n)||!Ot(e))throw new Error("Integers expected in function bitAnd");return n&e}zW.signature=wm;function UW(n){if(!Ot(n))throw new Error("Integer expected in function bitNot");return~n}UW.signature=hoe;function $W(n,e){if(!Ot(n)||!Ot(e))throw new Error("Integers expected in function bitOr");return n|e}$W.signature=wm;function VW(n,e){if(!Ot(n)||!Ot(e))throw new Error("Integers expected in function bitXor");return n^e}VW.signature=wm;function HW(n,e){if(!Ot(n)||!Ot(e))throw new Error("Integers expected in function leftShift");return n<<e}HW.signature=wm;function WW(n,e){if(!Ot(n)||!Ot(e))throw new Error("Integers expected in function rightArithShift");return n>>e}WW.signature=wm;function GW(n,e){if(!Ot(n)||!Ot(e))throw new Error("Integers expected in function rightLogShift");return n>>>e}GW.signature=wm;function iu(n,e){if(e<n)return 1;if(e===n)return e;var t=e+n>>1;return iu(n,t)*iu(t+1,e)}function jW(n,e){if(!Ot(n)||n<0)throw new TypeError("Positive integer value expected in function combinations");if(!Ot(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>n)throw new TypeError("k must be less than or equal to n");for(var t=n-e,r=1,i=e<t?t+1:e+1,s=2,a=e<t?e:t,o=i;o<=n;++o)for(r*=o;s<=a&&r%s===0;)r/=s,++s;return s<=a&&(r/=iu(s,a)),r}jW.signature="number, number";var poe=Math.PI,moe=2*Math.PI,goe=Math.E,voe=1.618033988749895,yoe="number",gP="number, number";function qW(n){return!n}qW.signature=yoe;function XW(n,e){return!!(n||e)}XW.signature=gP;function YW(n,e){return!!n!=!!e}YW.signature=gP;function KW(n,e){return!!(n&&e)}KW.signature=gP;function cS(n){var e;if(Ot(n))return n<=0?isFinite(n)?1/0:NaN:n>171?1/0:iu(1,n-1);if(n<.5)return Math.PI/(Math.sin(Math.PI*n)*cS(1-n));if(n>=171.35)return 1/0;if(n>85){var t=n*n,r=t*n,i=r*n,s=i*n;return Math.sqrt(2*Math.PI/n)*Math.pow(n/Math.E,n)*(1+1/(12*n)+1/(288*t)-139/(51840*r)-571/(2488320*i)+163879/(209018880*s)+5246819/(75246796800*s*n))}--n,e=Cp[0];for(var a=1;a<Cp.length;++a)e+=Cp[a]/(n+a);var o=n+ZW+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,n+.5)*Math.exp(-o)*e}cS.signature="number";var ZW=4.7421875,Cp=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],JW=.9189385332046728,xoe=5,boe=7,JL=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function fS(n){if(n<0)return NaN;if(n===0)return 1/0;if(!isFinite(n))return n;if(n<.5)return Math.log(Math.PI/Math.sin(Math.PI*n))-fS(1-n);n=n-1;for(var e=n+xoe+.5,t=JL[0],r=boe-1;r>=1;r--)t+=JL[r]/(n+r);return JW+(n+.5)*Math.log(e)-e+Math.log(t)}fS.signature="number";var ss="number";function QW(n){return yse(n)}QW.signature=ss;function eG(n){return Math.atan(1/n)}eG.signature=ss;function tG(n){return isFinite(n)?(Math.log((n+1)/n)+Math.log(n/(n-1)))/2:0}tG.signature=ss;function nG(n){return Math.asin(1/n)}nG.signature=ss;function rG(n){var e=1/n;return Math.log(e+Math.sqrt(e*e+1))}rG.signature=ss;function iG(n){return Math.acos(1/n)}iG.signature=ss;function sG(n){var e=1/n,t=Math.sqrt(e*e-1);return Math.log(t+e)}sG.signature=ss;function aG(n){return xse(n)}aG.signature=ss;function oG(n){return bse(n)}oG.signature=ss;function lG(n){return 1/Math.tan(n)}lG.signature=ss;function uG(n){var e=Math.exp(2*n);return(e+1)/(e-1)}uG.signature=ss;function cG(n){return 1/Math.sin(n)}cG.signature=ss;function fG(n){return n===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(n)-Math.exp(-n)))*vc(n)}fG.signature=ss;function dG(n){return 1/Math.cos(n)}dG.signature=ss;function hG(n){return 2/(Math.exp(n)+Math.exp(-n))}hG.signature=ss;function pG(n){return Sse(n)}pG.signature=ss;var H_="number";function mG(n){return n<0}mG.signature=H_;function gG(n){return n>0}gG.signature=H_;function vG(n){return n===0}vG.signature=H_;function yG(n){return Number.isNaN(n)}yG.signature=H_;var QL="isNegative",woe=["typed"],Soe=ae(QL,woe,n=>{var{typed:e}=n;return e(QL,{number:mG,BigNumber:function(r){return r.isNeg()&&!r.isZero()&&!r.isNaN()},Fraction:function(r){return r.s<0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),eF="isNumeric",_oe=["typed"],Eoe=ae(eF,_oe,n=>{var{typed:e}=n;return e(eF,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),tF="hasNumericValue",Moe=["typed","isNumeric"],Coe=ae(tF,Moe,n=>{var{typed:e,isNumeric:t}=n;return e(tF,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return t(i)}})}),nF="isPositive",Aoe=["typed"],Toe=ae(nF,Aoe,n=>{var{typed:e}=n;return e(nF,{number:gG,BigNumber:function(r){return!r.isNeg()&&!r.isZero()&&!r.isNaN()},Fraction:function(r){return r.s>0&&r.n>0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),rF="isZero",Doe=["typed"],Noe=ae(rF,Doe,n=>{var{typed:e}=n;return e(rF,{number:vG,BigNumber:function(r){return r.isZero()},Complex:function(r){return r.re===0&&r.im===0},Fraction:function(r){return r.d===1&&r.n===0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),iF="isNaN",Poe=["typed"],Roe=ae(iF,Poe,n=>{var{typed:e}=n;return e(iF,{number:yG,BigNumber:function(r){return r.isNaN()},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),sF="typeOf",Ooe=["typed"],Ioe=ae(sF,Ooe,n=>{var{typed:e}=n;return e(sF,{any:$n})});function to(n,e,t){if(t==null)return n.eq(e);if(n.eq(e))return!0;if(n.isNaN()||e.isNaN())return!1;if(n.isFinite()&&e.isFinite()){var r=n.minus(e).abs();if(r.isZero())return!0;var i=n.constructor.max(n.abs(),e.abs());return r.lte(i.times(t))}return!1}function koe(n,e,t){return Cs(n.re,e.re,t)&&Cs(n.im,e.im,t)}var Sm=ae("compareUnits",["typed"],n=>{var{typed:e}=n;return{"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[r.valueType(),i.valueType()])(r.value,i.value)})}}),dS="equalScalar",Loe=["typed","config"],Foe=ae(dS,Loe,n=>{var{typed:e,config:t}=n,r=Sm({typed:e});return e(dS,{"boolean, boolean":function(s,a){return s===a},"number, number":function(s,a){return Cs(s,a,t.epsilon)},"BigNumber, BigNumber":function(s,a){return s.eq(a)||to(s,a,t.epsilon)},"Fraction, Fraction":function(s,a){return s.equals(a)},"Complex, Complex":function(s,a){return koe(s,a,t.epsilon)}},r)});ae(dS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(dS,{"number, number":function(i,s){return Cs(i,s,t.epsilon)}})});var Boe="SparseMatrix",zoe=["typed","equalScalar","Matrix"],Uoe=ae(Boe,zoe,n=>{var{typed:e,equalScalar:t,Matrix:r}=n;function i(v,y){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(y&&!Ai(y))throw new Error("Invalid datatype: "+y);if(Ut(v))s(this,v,y);else if(v&&_n(v.index)&&_n(v.ptr)&&_n(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=y||v.datatype;else if(_n(v))a(this,v,y);else{if(v)throw new TypeError("Unsupported type of data ("+$n(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=y}}function s(v,y,m){y.type==="SparseMatrix"?(v._values=y._values?Xt(y._values):void 0,v._index=Xt(y._index),v._ptr=Xt(y._ptr),v._size=Xt(y._size),v._datatype=m||y._datatype):a(v,y.valueOf(),m||y._datatype)}function a(v,y,m){v._values=[],v._index=[],v._ptr=[],v._datatype=m;var S=y.length,b=0,g=t,w=0;if(Ai(m)&&(g=e.find(t,[m,m])||t,w=e.convert(0,m)),S>0){var x=0;do{v._ptr.push(v._index.length);for(var M=0;M<S;M++){var A=y[M];if(_n(A)){if(x===0&&b<A.length&&(b=A.length),x<A.length){var N=A[x];g(N,w)||(v._values.push(N),v._index.push(M))}}else x===0&&b<1&&(b=1),g(A,w)||(v._values.push(A),v._index.push(M))}x++}while(x<b)}v._ptr.push(v._index.length),v._size=[S,b]}i.prototype=new r,i.prototype.createSparseMatrix=function(v,y){return new i(v,y)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Jv(this._values,$n)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,y){return new i(v,y)},i.prototype.density=function(){var v=this._size[0],y=this._size[1];return v!==0&&y!==0?this._index.length/(v*y):0},i.prototype.subset=function(v,y,m){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,v);case 2:case 3:return l(this,v,y,m);default:throw new SyntaxError("Wrong number of arguments")}};function o(v,y){if(!ty(y))throw new TypeError("Invalid index");var m=y.isScalar();if(m)return v.get(y.min());var S=y.size();if(S.length!==v._size.length)throw new on(S.length,v._size.length);var b,g,w,x,M=y.min(),A=y.max();for(b=0,g=v._size.length;b<g;b++)Fn(M[b],v._size[b]),Fn(A[b],v._size[b]);var N=v._values,C=v._index,T=v._ptr,R=y.dimension(0),U=y.dimension(1),F=[],B=[];R.forEach(function(L,X){B[L]=X[0],F[L]=!0});var D=N?[]:void 0,O=[],$=[];return U.forEach(function(L){for($.push(O.length),w=T[L],x=T[L+1];w<x;w++)b=C[w],F[b]===!0&&(O.push(B[b]),D&&D.push(N[w]))}),$.push(O.length),new i({values:D,index:O,ptr:$,size:S,datatype:v._datatype})}function l(v,y,m,S){if(!y||y.isIndex!==!0)throw new TypeError("Invalid index");var b=y.size(),g=y.isScalar(),w;if(Ut(m)?(w=m.size(),m=m.toArray()):w=nn(m),g){if(w.length!==0)throw new TypeError("Scalar expected");v.set(y.min(),m,S)}else{if(b.length!==1&&b.length!==2)throw new on(b.length,v._size.length,"<");if(w.length<b.length){for(var x=0,M=0;b[x]===1&&w[x]===1;)x++;for(;b[x]===1;)M++,x++;m=vW(m,b.length,M,w)}if(!bd(b,w))throw new on(b,w,">");if(b.length===1){var A=y.dimension(0);A.forEach(function(T,R){Fn(T),v.set([T,0],m[R[0]],S)})}else{var N=y.dimension(0),C=y.dimension(1);N.forEach(function(T,R){Fn(T),C.forEach(function(U,F){Fn(U),v.set([T,U],m[R[0]][F[0]],S)})})}}return v}i.prototype.get=function(v){if(!_n(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new on(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var y=v[0],m=v[1];Fn(y,this._size[0]),Fn(m,this._size[1]);var S=u(y,this._ptr[m],this._ptr[m+1],this._index);return S<this._ptr[m+1]&&this._index[S]===y?this._values[S]:0},i.prototype.set=function(v,y,m){if(!_n(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new on(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var S=v[0],b=v[1],g=this._size[0],w=this._size[1],x=t,M=0;Ai(this._datatype)&&(x=e.find(t,[this._datatype,this._datatype])||t,M=e.convert(0,this._datatype)),(S>g-1||b>w-1)&&(d(this,Math.max(S+1,g),Math.max(b+1,w),m),g=this._size[0],w=this._size[1]),Fn(S,g),Fn(b,w);var A=u(S,this._ptr[b],this._ptr[b+1],this._index);return A<this._ptr[b+1]&&this._index[A]===S?x(y,M)?c(A,b,this._values,this._index,this._ptr):this._values[A]=y:x(y,M)||f(A,S,b,y,this._values,this._index,this._ptr),this};function u(v,y,m,S){if(m-y===0)return m;for(var b=y;b<m;b++)if(S[b]===v)return b;return y}function c(v,y,m,S,b){m.splice(v,1),S.splice(v,1);for(var g=y+1;g<b.length;g++)b[g]--}function f(v,y,m,S,b,g,w){b.splice(v,0,S),g.splice(v,0,y);for(var x=m+1;x<w.length;x++)w[x]++}i.prototype.resize=function(v,y,m){if(!_a(v))throw new TypeError("Array or Matrix expected");var S=v.valueOf().map(g=>Array.isArray(g)&&g.length===1?g[0]:g);if(S.length!==2)throw new Error("Only two dimensions matrix are supported");S.forEach(function(g){if(!tn(g)||!Ot(g)||g<0)throw new TypeError("Invalid size, must contain positive integers (size: "+un(S)+")")});var b=m?this.clone():this;return d(b,S[0],S[1],y)};function d(v,y,m,S){var b=S||0,g=t,w=0;Ai(v._datatype)&&(g=e.find(t,[v._datatype,v._datatype])||t,w=e.convert(0,v._datatype),b=e.convert(b,v._datatype));var x=!g(b,w),M=v._size[0],A=v._size[1],N,C,T;if(m>A){for(C=A;C<m;C++)if(v._ptr[C]=v._values.length,x)for(N=0;N<M;N++)v._values.push(b),v._index.push(N);v._ptr[m]=v._values.length}else m<A&&(v._ptr.splice(m+1,A-m),v._values.splice(v._ptr[m],v._values.length),v._index.splice(v._ptr[m],v._index.length));if(A=m,y>M){if(x){var R=0;for(C=0;C<A;C++){v._ptr[C]=v._ptr[C]+R,T=v._ptr[C+1]+R;var U=0;for(N=M;N<y;N++,U++)v._values.splice(T+U,0,b),v._index.splice(T+U,0,N),R++}v._ptr[A]=v._values.length}}else if(y<M){var F=0;for(C=0;C<A;C++){v._ptr[C]=v._ptr[C]-F;var B=v._ptr[C],D=v._ptr[C+1]-F;for(T=B;T<D;T++)N=v._index[T],N>y-1&&(v._values.splice(T,1),v._index.splice(T,1),F++)}v._ptr[C]=v._values.length}return v._size[0]=y,v._size[1]=m,v}i.prototype.reshape=function(v,y){if(!_n(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(L){if(!tn(L)||!Ot(L)||L<=-2||L===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+un(v)+")")});var m=this._size[0]*this._size[1];v=mP(v,m);var S=v[0]*v[1];if(m!==S)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=y?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return b;for(var g=[],w=0;w<b._ptr.length;w++)for(var x=0;x<b._ptr[w+1]-b._ptr[w];x++)g.push(w);for(var M=b._values.slice(),A=b._index.slice(),N=0;N<b._index.length;N++){var C=A[N],T=g[N],R=C*b._size[1]+T;g[N]=R%v[1],A[N]=Math.floor(R/v[1])}b._values.length=0,b._index.length=0,b._ptr.length=v[1]+1,b._size=v.slice();for(var U=0;U<b._ptr.length;U++)b._ptr[U]=0;for(var F=0;F<M.length;F++){var B=A[F],D=g[F],O=M[F],$=u(B,b._ptr[D],b._ptr[D+1],b._index);f($,B,D,O,b._values,b._index,b._ptr)}return b},i.prototype.clone=function(){var v=new i({values:this._values?Xt(this._values):void 0,index:Xt(this._index),ptr:Xt(this._ptr),size:Xt(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,y){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var m=this,S=this._size[0],b=this._size[1],g=SW(v),w=function(M,A,N){return g===1?v(M):g===2?v(M,[A,N]):v(M,[A,N],m)};return h(this,0,S-1,0,b-1,w,y)};function h(v,y,m,S,b,g,w){var x=[],M=[],A=[],N=t,C=0;Ai(v._datatype)&&(N=e.find(t,[v._datatype,v._datatype])||t,C=e.convert(0,v._datatype));for(var T=function(K,re,ce){K=g(K,re,ce),N(K,C)||(x.push(K),M.push(re))},R=S;R<=b;R++){A.push(x.length);var U=v._ptr[R],F=v._ptr[R+1];if(w)for(var B=U;B<F;B++){var D=v._index[B];D>=y&&D<=m&&T(v._values[B],D-y,R-S)}else{for(var O={},$=U;$<F;$++){var L=v._index[$];O[L]=v._values[$]}for(var X=y;X<=m;X++){var Z=X in O?O[X]:0;T(Z,X-y,R-S)}}}return A.push(x.length),new i({values:x,index:M,ptr:A,size:[m-y+1,b-S+1]})}i.prototype.forEach=function(v,y){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var m=this,S=this._size[0],b=this._size[1],g=0;g<b;g++){var w=this._ptr[g],x=this._ptr[g+1];if(y)for(var M=w;M<x;M++){var A=this._index[M];v(this._values[M],[A,g],m)}else{for(var N={},C=w;C<x;C++){var T=this._index[C];N[T]=this._values[C]}for(var R=0;R<S;R++){var U=R in N?N[R]:0;v(U,[R,g],m)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],y=0;y<v;y++)for(var m=this._ptr[y],S=this._ptr[y+1],b=m;b<S;b++){var g=this._index[b];yield{value:this._values[b],index:[g,y]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(v,y,m,S,b){var g=S[0],w=S[1],x=[],M,A;for(M=0;M<g;M++)for(x[M]=[],A=0;A<w;A++)x[M][A]=0;for(A=0;A<w;A++)for(var N=m[A],C=m[A+1],T=N;T<C;T++)M=y[T],x[M][A]=v?b?Xt(v[T]):v[T]:1;return x}return i.prototype.format=function(v){for(var y=this._size[0],m=this._size[1],S=this.density(),b="Sparse Matrix ["+un(y,v)+" x "+un(m,v)+"] density: "+un(S,v)+`
`,g=0;g<m;g++)for(var w=this._ptr[g],x=this._ptr[g+1],M=w;M<x;M++){var A=this._index[M];b+=`
    (`+un(A,v)+", "+un(g,v)+") ==> "+(this._values?un(this._values[M],v):"X")}return b},i.prototype.toString=function(){return un(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Jt(v)&&(v=v.toNumber()),!tn(v)||!Ot(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var y=v>0?v:0,m=v<0?-v:0,S=this._size[0],b=this._size[1],g=Math.min(S-m,b-y),w=[],x=[],M=[];M[0]=0;for(var A=y;A<b&&w.length<g;A++)for(var N=this._ptr[A],C=this._ptr[A+1],T=N;T<C;T++){var R=this._index[T];if(R===A-y+m){w.push(this._values[T]),x[w.length-1]=R-m;break}}return M.push(w.length),new i({values:w,index:x,ptr:M,size:[g,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,y,m,S,b){if(!_n(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(L){if(Jt(L)&&(L=L.toNumber()),!tn(L)||!Ot(L)||L<1)throw new Error("Size values must be positive integers");return L}),m){if(Jt(m)&&(m=m.toNumber()),!tn(m)||!Ot(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var g=t,w=0;Ai(b)&&(g=e.find(t,[b,b])||t,w=e.convert(0,b));var x=m>0?m:0,M=m<0?-m:0,A=v[0],N=v[1],C=Math.min(A-M,N-x),T;if(_n(y)){if(y.length!==C)throw new Error("Invalid value array length");T=function(X){return y[X]}}else if(Ut(y)){var R=y.size();if(R.length!==1||R[0]!==C)throw new Error("Invalid matrix length");T=function(X){return y.get([X])}}else T=function(){return y};for(var U=[],F=[],B=[],D=0;D<N;D++){B.push(U.length);var O=D-x;if(O>=0&&O<C){var $=T(O);g($,w)||(F.push(O+M),U.push($))}}return B.push(U.length),new i({values:U,index:F,ptr:B,size:[A,N]})},i.prototype.swapRows=function(v,y){if(!tn(v)||!Ot(v)||!tn(y)||!Ot(y))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Fn(v,this._size[0]),Fn(y,this._size[0]),i._swapRows(v,y,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,y,m,S,b){for(var g=S[v],w=S[v+1],x=g;x<w;x++)b(m[x],y[x])},i._swapRows=function(v,y,m,S,b,g){for(var w=0;w<m;w++){var x=g[w],M=g[w+1],A=u(v,x,M,b),N=u(y,x,M,b);if(A<M&&N<M&&b[A]===v&&b[N]===y){if(S){var C=S[A];S[A]=S[N],S[N]=C}continue}if(A<M&&b[A]===v&&(N>=M||b[N]!==y)){var T=S?S[A]:void 0;b.splice(N,0,y),S&&S.splice(N,0,T),b.splice(N<=A?A+1:A,1),S&&S.splice(N<=A?A+1:A,1);continue}if(N<M&&b[N]===y&&(A>=M||b[A]!==v)){var R=S?S[N]:void 0;b.splice(A,0,v),S&&S.splice(A,0,R),b.splice(A<=N?N+1:N,1),S&&S.splice(A<=N?N+1:N,1)}}},i},{isClass:!0}),$oe="number",Voe=["typed"];function Hoe(n){var e=n.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],i=e[3];return{input:n,radix:t,integerPart:r,fractionalPart:i}}else return null}function Woe(n){for(var e=parseInt(n.integerPart,n.radix),t=0,r=0;r<n.fractionalPart.length;r++){var i=parseInt(n.fractionalPart[r],n.radix);t+=i/Math.pow(n.radix,r+1)}var s=e+t;if(isNaN(s))throw new SyntaxError('String "'+n.input+'" is not a valid number');return s}var Goe=ae($oe,Voe,n=>{var{typed:e}=n,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=Hoe(i);if(s)return Woe(s);var a=0,o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(a=Number(o[2]),i=o[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is not a valid number');if(o){if(l>2**a-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(a-1)&&(l=l-2**a)}return l},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))});return t.fromJSON=function(r){return parseFloat(r.value)},t}),aF="string",joe=["typed"],qoe=ae(aF,joe,n=>{var{typed:e}=n;return e(aF,{"":function(){return""},number:sd,null:function(r){return"null"},boolean:function(r){return r+""},string:function(r){return r},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t)),any:function(r){return String(r)}})}),oF="boolean",Xoe=["typed"],Yoe=ae(oF,Xoe,n=>{var{typed:e}=n;return e(oF,{"":function(){return!1},boolean:function(r){return r},number:function(r){return!!r},null:function(r){return!1},BigNumber:function(r){return!r.isZero()},string:function(r){var i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var s=Number(r);if(r!==""&&!isNaN(s))return!!s;throw new Error('Cannot convert "'+r+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),Koe="bignumber",Zoe=["typed","BigNumber"],Joe=ae(Koe,Zoe,n=>{var{typed:e,BigNumber:t}=n;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var a=s[2],o=t(s[1]),l=new t(2).pow(Number(a));if(o.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new t(2).pow(Number(a)-1);return o.gte(u)?o.sub(l):o}return new t(i)},BigNumber:function(i){return i},Unit:e.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Fraction:function(i){return new t(i.n).div(i.d).times(i.s)},null:function(i){return new t(0)},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),Qoe="complex",ele=["typed","Complex"],tle=ae(Qoe,ele,n=>{var{typed:e,Complex:t}=n;return e("complex",{"":function(){return t.ZERO},number:function(i){return new t(i,0)},"number, number":function(i,s){return new t(i,s)},"BigNumber, BigNumber":function(i,s){return new t(i.toNumber(),s.toNumber())},Fraction:function(i){return new t(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return t(i)},null:function(i){return t(0)},Object:function(i){if("re"in i&&"im"in i)return new t(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new t(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),nle="fraction",rle=["typed","Fraction"],ile=ae(nle,rle,n=>{var{typed:e,Fraction:t}=n;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,s){return new t(i,s)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Object:function(i){return new t(i)},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),lF="matrix",sle=["typed","Matrix","DenseMatrix","SparseMatrix"],ale=ae(lF,sle,n=>{var{typed:e,Matrix:t,DenseMatrix:r,SparseMatrix:i}=n;return e(lF,{"":function(){return s([])},string:function(o){return s([],o)},"string, string":function(o,l){return s([],o,l)},Array:function(o){return s(o)},Matrix:function(o){return s(o,o.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(a,o,l){if(o==="dense"||o==="default"||o===void 0)return new r(a,l);if(o==="sparse")return new i(a,l);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),uF="matrixFromFunction",ole=["typed","matrix","isZero"],lle=ae(uF,ole,n=>{var{typed:e,matrix:t,isZero:r}=n;return e(uF,{"Array | Matrix, function, string, string":function(a,o,l,u){return i(a,o,l,u)},"Array | Matrix, function, string":function(a,o,l){return i(a,o,l)},"Matrix, function":function(a,o){return i(a,o,"dense")},"Array, function":function(a,o){return i(a,o,"dense").toArray()},"Array | Matrix, string, function":function(a,o,l){return i(a,l,o)},"Array | Matrix, string, string, function":function(a,o,l,u){return i(a,u,o,l)}});function i(s,a,o,l){var u;return l!==void 0?u=t(o,l):u=t(o),u.resize(s),u.forEach(function(c,f){var d=a(f);r(d)||u.set(f,d)}),u}}),cF="matrixFromRows",ule=["typed","matrix","flatten","size"],cle=ae(cF,ule,n=>{var{typed:e,matrix:t,flatten:r,size:i}=n;return e(cF,{"...Array":function(l){return s(l)},"...Matrix":function(l){return t(s(l.map(u=>u.toArray())))}});function s(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=a(o[0]),u=[];for(var c of o){var f=a(c);if(f!==l)throw new TypeError("The vectors had different length: "+(l|0)+" ≠ "+(f|0));u.push(r(c))}return u}function a(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),fF="matrixFromColumns",fle=["typed","matrix","flatten","size"],dle=ae(fF,fle,n=>{var{typed:e,matrix:t,flatten:r,size:i}=n;return e(fF,{"...Array":function(l){return s(l)},"...Matrix":function(l){return t(s(l.map(u=>u.toArray())))}});function s(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=a(o[0]),u=[],c=0;c<l;c++)u[c]=[];for(var f of o){var d=a(f);if(d!==l)throw new TypeError("The vectors had different length: "+(l|0)+" ≠ "+(d|0));for(var h=r(f),p=0;p<l;p++)u[p].push(h[p])}return u}function a(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),dF="splitUnit",hle=["typed"],ple=ae(dF,hle,n=>{var{typed:e}=n;return e(dF,{"Unit, Array":function(r,i){return r.splitUnit(i)}})}),hF="unaryMinus",mle=["typed"],gle=ae(hF,mle,n=>{var{typed:e}=n;return e(hF,{number:TW,"Complex | BigNumber | Fraction":t=>t.neg(),Unit:e.referToSelf(t=>r=>{var i=r.clone();return i.value=e.find(t,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),pF="unaryPlus",vle=["typed","config","BigNumber"],yle=ae(pF,vle,n=>{var{typed:e,config:t,BigNumber:r}=n;return e(pF,{number:DW,Complex:function(s){return s},BigNumber:function(s){return s},Fraction:function(s){return s},Unit:function(s){return s.clone()},"Array | Matrix":e.referToSelf(i=>s=>cn(s,i)),"boolean | string":function(s){return t.number==="BigNumber"?new r(+s):+s}})}),mF="abs",xle=["typed"],ble=ae(mF,xle,n=>{var{typed:e}=n;return e(mF,{number:EW,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),gF="apply",wle=["typed","isInteger"],vP=ae(gF,wle,n=>{var{typed:e,isInteger:t}=n;return e(gF,{"Array | Matrix, number | BigNumber, function":function(i,s,a){if(!t(s))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(i)?nn(i):i.size();if(s<0||s>=o.length)throw new ao(s,o.length);return Ut(i)?i.create(hS(i.valueOf(),s,a)):hS(i,s,a)}})});function hS(n,e,t){var r,i,s;if(e<=0)if(Array.isArray(n[0])){for(s=Sle(n),i=[],r=0;r<s.length;r++)i[r]=hS(s[r],e-1,t);return i}else return t(n);else{for(i=[],r=0;r<n.length;r++)i[r]=hS(n[r],e-1,t);return i}}function Sle(n){var e=n.length,t=n[0].length,r,i,s=[];for(i=0;i<t;i++){var a=[];for(r=0;r<e;r++)a.push(n[r][i]);s.push(a)}return s}var vF="addScalar",_le=["typed"],Ele=ae(vF,_le,n=>{var{typed:e}=n;return e(vF,{"number, number":MW,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=e.find(t,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),yF="subtractScalar",Mle=["typed"],Cle=ae(yF,Mle,n=>{var{typed:e}=n;return e(yF,{"number, number":CW,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=e.find(t,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),xF="cbrt",Ale=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],Tle=ae(xF,Ale,n=>{var{config:e,typed:t,isNegative:r,unaryMinus:i,matrix:s,Complex:a,BigNumber:o,Fraction:l}=n;return t(xF,{number:Yg,Complex:u,"Complex, boolean":u,BigNumber:function(d){return d.cbrt()},Unit:c});function u(f,d){var h=f.arg()/3,p=f.abs(),v=new a(Yg(p),0).mul(new a(0,h).exp());if(d){var y=[v,new a(Yg(p),0).mul(new a(0,h+Math.PI*2/3).exp()),new a(Yg(p),0).mul(new a(0,h-Math.PI*2/3).exp())];return e.matrix==="Array"?y:s(y)}else return v}function c(f){if(f.value&&Mo(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=u(f.value),d}else{var h=r(f.value);h&&(f.value=i(f.value));var p;Jt(f.value)?p=new o(1).div(3):Ld(f.value)?p=new l(1,3):p=1/3;var v=f.pow(p);return h&&(v.value=i(v.value)),v}}}),Dle="matAlgo11xS0s",Nle=["typed","equalScalar"],Li=ae(Dle,Nle,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,a,o){var l=i._values,u=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],v,y=t,m=0,S=a;typeof d=="string"&&(v=d,y=e.find(t,[v,v]),m=e.convert(0,v),s=e.convert(s,v),S=e.find(a,[v,v]));for(var b=[],g=[],w=[],x=0;x<p;x++){w[x]=g.length;for(var M=c[x],A=c[x+1],N=M;N<A;N++){var C=u[N],T=o?S(s,l[N]):S(l[N],s);y(T,m)||(g.push(C),b.push(T))}}return w[p]=g.length,i.createSparseMatrix({values:b,index:g,ptr:w,size:[h,p],datatype:v})}}),Ple="matAlgo12xSfs",Rle=["typed","DenseMatrix"],li=ae(Ple,Rle,n=>{var{typed:e,DenseMatrix:t}=n;return function(i,s,a,o){var l=i._values,u=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],v,y=a;typeof d=="string"&&(v=d,s=e.convert(s,v),y=e.find(a,[v,v]));for(var m=[],S=[],b=[],g=0;g<p;g++){for(var w=g+1,x=c[g],M=c[g+1],A=x;A<M;A++){var N=u[A];S[N]=l[A],b[N]=w}for(var C=0;C<h;C++)g===0&&(m[C]=[]),b[C]===w?m[C][g]=o?y(s,S[C]):y(S[C],s):m[C][g]=o?y(s,0):y(0,s)}return new t({data:m,size:[h,p],datatype:v})}}),Ole="matAlgo14xDs",Ile=["typed"],Oo=ae(Ole,Ile,n=>{var{typed:e}=n;return function(i,s,a,o){var l=i._data,u=i._size,c=i._datatype,f,d=a;typeof c=="string"&&(f=c,s=e.convert(s,f),d=e.find(a,[f,f]));var h=u.length>0?t(d,0,u,u[0],l,s,o):[];return i.createDenseMatrix({data:h,size:Xt(u),datatype:f})};function t(r,i,s,a,o,l,u){var c=[];if(i===s.length-1)for(var f=0;f<a;f++)c[f]=u?r(l,o[f]):r(o[f],l);else for(var d=0;d<a;d++)c[d]=t(r,i+1,s,s[i+1],o[d],l,u);return c}}),FT="ceil",kle=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Lle=ae(FT,["typed","config","round"],n=>{var{typed:e,config:t,round:r}=n;return e(FT,{number:function(s){return Cs(s,r(s),t.epsilon)?r(s):Math.ceil(s)},"number, number":function(s,a){if(Cs(s,r(s,a),t.epsilon))return r(s,a);var[o,l]="".concat(s,"e").split("e"),u=Math.ceil(Number("".concat(o,"e").concat(Number(l)+a)));return[o,l]="".concat(u,"e").split("e"),Number("".concat(o,"e").concat(Number(l)-a))}})}),Fle=ae(FT,kle,n=>{var{typed:e,config:t,round:r,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o}=n,l=Li({typed:e,equalScalar:s}),u=li({typed:e,DenseMatrix:o}),c=Oo({typed:e}),f=Lle({typed:e,config:t,round:r});return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.ceil()},"Complex, number":function(h,p){return h.ceil(p)},"Complex, BigNumber":function(h,p){return h.ceil(p.toNumber())},BigNumber:function(h){return to(h,r(h),t.epsilon)?r(h):h.ceil()},"BigNumber, BigNumber":function(h,p){return to(h,r(h,p),t.epsilon)?r(h,p):h.toDecimalPlaces(p.toNumber(),Vc.ROUND_CEIL)},Fraction:function(h){return h.ceil()},"Fraction, number":function(h,p){return h.ceil(p)},"Fraction, BigNumber":function(h,p){return h.ceil(p.toNumber())},"Array | Matrix":e.referToSelf(d=>h=>cn(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,p)=>cn(h,v=>d(v,p))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,p)=>l(h,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,p)=>c(h,p,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,p)=>c(i(p),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,p)=>s(h,0)?a(p.size(),p.storage()):p.storage()==="dense"?c(p,h,d,!0):u(p,h,d,!0))})}),bF="cube",Ble=["typed"],zle=ae(bF,Ble,n=>{var{typed:e}=n;return e(bF,{number:NW,Complex:function(r){return r.mul(r).mul(r)},BigNumber:function(r){return r.times(r).times(r)},Fraction:function(r){return r.pow(3)},Unit:function(r){return r.pow(3)}})}),wF="exp",Ule=["typed"],$le=ae(wF,Ule,n=>{var{typed:e}=n;return e(wF,{number:PW,Complex:function(r){return r.exp()},BigNumber:function(r){return r.exp()}})}),SF="expm1",Vle=["typed","Complex"],Hle=ae(SF,Vle,n=>{var{typed:e,Complex:t}=n;return e(SF,{number:RW,Complex:function(i){var s=Math.exp(i.re);return new t(s*Math.cos(i.im)-1,s*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),BT="fix",Wle=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],Gle=ae(BT,["typed","ceil","floor"],n=>{var{typed:e,ceil:t,floor:r}=n;return e(BT,{number:function(s){return s>0?r(s):t(s)},"number, number":function(s,a){return s>0?r(s,a):t(s,a)}})}),jle=ae(BT,Wle,n=>{var{typed:e,Complex:t,matrix:r,ceil:i,floor:s,equalScalar:a,zeros:o,DenseMatrix:l}=n,u=li({typed:e,DenseMatrix:l}),c=Oo({typed:e}),f=Gle({typed:e,ceil:i,floor:s});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(h){return new t(h.re>0?Math.floor(h.re):Math.ceil(h.re),h.im>0?Math.floor(h.im):Math.ceil(h.im))},"Complex, number":function(h,p){return new t(h.re>0?s(h.re,p):i(h.re,p),h.im>0?s(h.im,p):i(h.im,p))},"Complex, BigNumber":function(h,p){var v=p.toNumber();return new t(h.re>0?s(h.re,v):i(h.re,v),h.im>0?s(h.im,v):i(h.im,v))},BigNumber:function(h){return h.isNegative()?i(h):s(h)},"BigNumber, number | BigNumber":function(h,p){return h.isNegative()?i(h,p):s(h,p)},Fraction:function(h){return h.s<0?h.ceil():h.floor()},"Fraction, number | BigNumber":function(h,p){return h.s<0?i(h,p):s(h,p)},"Array | Matrix":e.referToSelf(d=>h=>cn(h,d)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(h,p)=>cn(h,v=>d(v,p))),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,p)=>c(r(p),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,p)=>a(h,0)?o(p.size(),p.storage()):p.storage()==="dense"?c(p,h,d,!0):u(p,h,d,!0))})}),zT="floor",qle=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Xle=ae(zT,["typed","config","round"],n=>{var{typed:e,config:t,round:r}=n;return e(zT,{number:function(s){return Cs(s,r(s),t.epsilon)?r(s):Math.floor(s)},"number, number":function(s,a){if(Cs(s,r(s,a),t.epsilon))return r(s,a);var[o,l]="".concat(s,"e").split("e"),u=Math.floor(Number("".concat(o,"e").concat(Number(l)+a)));return[o,l]="".concat(u,"e").split("e"),Number("".concat(o,"e").concat(Number(l)-a))}})}),xG=ae(zT,qle,n=>{var{typed:e,config:t,round:r,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o}=n,l=Li({typed:e,equalScalar:s}),u=li({typed:e,DenseMatrix:o}),c=Oo({typed:e}),f=Xle({typed:e,config:t,round:r});return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.floor()},"Complex, number":function(h,p){return h.floor(p)},"Complex, BigNumber":function(h,p){return h.floor(p.toNumber())},BigNumber:function(h){return to(h,r(h),t.epsilon)?r(h):h.floor()},"BigNumber, BigNumber":function(h,p){return to(h,r(h,p),t.epsilon)?r(h,p):h.toDecimalPlaces(p.toNumber(),Vc.ROUND_FLOOR)},Fraction:function(h){return h.floor()},"Fraction, number":function(h,p){return h.floor(p)},"Fraction, BigNumber":function(h,p){return h.floor(p.toNumber())},"Array | Matrix":e.referToSelf(d=>h=>cn(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,p)=>cn(h,v=>d(v,p))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,p)=>l(h,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,p)=>c(h,p,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,p)=>c(i(p),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,p)=>s(h,0)?a(p.size(),p.storage()):p.storage()==="dense"?c(p,h,d,!0):u(p,h,d,!0))})}),Yle="matAlgo02xDS0",Kle=["typed","equalScalar"],Io=ae(Yle,Kle,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,a,o){var l=i._data,u=i._size,c=i._datatype||i.getDataType(),f=s._values,d=s._index,h=s._ptr,p=s._size,v=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(u.length!==p.length)throw new on(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=u[0],m=u[1],S,b=t,g=0,w=a;typeof c=="string"&&c===v&&c!=="mixed"&&(S=c,b=e.find(t,[S,S]),g=e.convert(0,S),w=e.find(a,[S,S]));for(var x=[],M=[],A=[],N=0;N<m;N++){A[N]=M.length;for(var C=h[N],T=h[N+1],R=C;R<T;R++){var U=d[R],F=o?w(f[R],l[U][N]):w(l[U][N],f[R]);b(F,g)||(M.push(U),x.push(F))}}return A[m]=M.length,s.createSparseMatrix({values:x,index:M,ptr:A,size:[y,m],datatype:c===i._datatype&&v===s._datatype?S:void 0})}}),Zle="matAlgo03xDSf",Jle=["typed"],Ns=ae(Zle,Jle,n=>{var{typed:e}=n;return function(r,i,s,a){var o=r._data,l=r._size,u=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==h.length)throw new on(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],y=l[1],m,S=0,b=s;typeof u=="string"&&u===p&&u!=="mixed"&&(m=u,S=e.convert(0,m),b=e.find(s,[m,m]));for(var g=[],w=0;w<v;w++)g[w]=[];for(var x=[],M=[],A=0;A<y;A++){for(var N=A+1,C=d[A],T=d[A+1],R=C;R<T;R++){var U=f[R];x[U]=a?b(c[R],o[U][A]):b(o[U][A],c[R]),M[U]=N}for(var F=0;F<v;F++)M[F]===N?g[F][A]=x[F]:g[F][A]=a?b(S,o[F][A]):b(o[F][A],S)}return r.createDenseMatrix({data:g,size:[v,y],datatype:u===r._datatype&&p===i._datatype?m:void 0})}}),Qle="matAlgo05xSfSf",eue=["typed","equalScalar"],W_=ae(Qle,eue,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,h=s._index,p=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new on(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var m=c[0],S=c[1],b,g=t,w=0,x=a;typeof f=="string"&&f===y&&f!=="mixed"&&(b=f,g=e.find(t,[b,b]),w=e.convert(0,b),x=e.find(a,[b,b]));var M=o&&d?[]:void 0,A=[],N=[],C=M?[]:void 0,T=M?[]:void 0,R=[],U=[],F,B,D,O;for(B=0;B<S;B++){N[B]=A.length;var $=B+1;for(D=u[B],O=u[B+1];D<O;D++)F=l[D],A.push(F),R[F]=$,C&&(C[F]=o[D]);for(D=p[B],O=p[B+1];D<O;D++)F=h[D],R[F]!==$&&A.push(F),U[F]=$,T&&(T[F]=d[D]);if(M)for(D=N[B];D<A.length;){F=A[D];var L=R[F],X=U[F];if(L===$||X===$){var Z=L===$?C[F]:w,Q=X===$?T[F]:w,K=x(Z,Q);g(K,w)?A.splice(D,1):(M.push(K),D++)}}}return N[S]=A.length,i.createSparseMatrix({values:M,index:A,ptr:N,size:[m,S],datatype:f===i._datatype&&y===s._datatype?b:void 0})}}),tue="matAlgo13xDD",nue=["typed"],rue=ae(tue,nue,n=>{var{typed:e}=n;return function(i,s,a){var o=i._data,l=i._size,u=i._datatype,c=s._data,f=s._size,d=s._datatype,h=[];if(l.length!==f.length)throw new on(l.length,f.length);for(var p=0;p<l.length;p++){if(l[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");h[p]=l[p]}var v,y=a;typeof u=="string"&&u===d&&(v=u,y=e.find(a,[v,v]));var m=h.length>0?t(y,0,h,h[0],o,c):[];return i.createDenseMatrix({data:m,size:h,datatype:v})};function t(r,i,s,a,o,l){var u=[];if(i===s.length-1)for(var c=0;c<a;c++)u[c]=r(o[c],l[c]);else for(var f=0;f<a;f++)u[f]=t(r,i+1,s,s[i+1],o[f],l[f]);return u}}),iue="broadcast",sue=["concat"],aue=ae(iue,sue,n=>{var{concat:e}=n;return function(i,s){var a=Math.max(i._size.length,s._size.length);if(i._size.length===s._size.length&&i._size.every((p,v)=>p===s._size[v]))return[i,s];for(var o=t(i._size,a,0),l=t(s._size,a,0),u=[],c=0;c<a;c++)u[c]=Math.max(o[c],l[c]);lS(o,u),lS(l,u);var f=i.clone(),d=s.clone();f._size.length<a?f.reshape(t(f._size,a,1)):d._size.length<a&&d.reshape(t(d._size,a,1));for(var h=0;h<a;h++)f._size[h]<u[h]&&(f=r(f,u[h],h)),d._size[h]<u[h]&&(d=r(d,u[h],h));return[f,d]};function t(i,s,a){return[...Array(s-i.length).fill(a),...i]}function r(i,s,a){return e(...Array(s).fill(i),a)}}),oue="matrixAlgorithmSuite",lue=["typed","matrix","concat"],qn=ae(oue,lue,n=>{var{typed:e,matrix:t,concat:r}=n,i=rue({typed:e}),s=Oo({typed:e}),a=aue({concat:r});return function(l){var u=l.elop,c=l.SD||l.DS,f;u?(f={"DenseMatrix, DenseMatrix":(v,y)=>i(...a(v,y),u),"Array, Array":(v,y)=>i(...a(t(v),t(y)),u).valueOf(),"Array, DenseMatrix":(v,y)=>i(...a(t(v),y),u),"DenseMatrix, Array":(v,y)=>i(...a(v,t(y)),u)},l.SS&&(f["SparseMatrix, SparseMatrix"]=(v,y)=>l.SS(...a(v,y),u,!1)),l.DS&&(f["DenseMatrix, SparseMatrix"]=(v,y)=>l.DS(...a(v,y),u,!1),f["Array, SparseMatrix"]=(v,y)=>l.DS(...a(t(v),y),u,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(v,y)=>c(...a(y,v),u,!0),f["SparseMatrix, Array"]=(v,y)=>c(...a(t(y),v),u,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(y,m)=>i(...a(y,m),v)),"Array, Array":e.referToSelf(v=>(y,m)=>i(...a(t(y),t(m)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(y,m)=>i(...a(t(y),m),v)),"DenseMatrix, Array":e.referToSelf(v=>(y,m)=>i(...a(y,t(m)),v))},l.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(y,m)=>l.SS(...a(y,m),v,!1))),l.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(y,m)=>l.DS(...a(y,m),v,!1)),f["Array, SparseMatrix"]=e.referToSelf(v=>(y,m)=>l.DS(...a(t(y),m),v,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(y,m)=>c(...a(m,y),v,!0)),f["SparseMatrix, Array"]=e.referToSelf(v=>(y,m)=>c(...a(t(m),y),v,!0))));var d=l.scalar||"any",h=l.Ds||l.Ss;h&&(u?(f["DenseMatrix,"+d]=(v,y)=>s(v,y,u,!1),f[d+", DenseMatrix"]=(v,y)=>s(y,v,u,!0),f["Array,"+d]=(v,y)=>s(t(v),y,u,!1).valueOf(),f[d+", Array"]=(v,y)=>s(t(y),v,u,!0).valueOf()):(f["DenseMatrix,"+d]=e.referToSelf(v=>(y,m)=>s(y,m,v,!1)),f[d+", DenseMatrix"]=e.referToSelf(v=>(y,m)=>s(m,y,v,!0)),f["Array,"+d]=e.referToSelf(v=>(y,m)=>s(t(y),m,v,!1).valueOf()),f[d+", Array"]=e.referToSelf(v=>(y,m)=>s(t(m),y,v,!0).valueOf())));var p=l.sS!==void 0?l.sS:l.Ss;return u?(l.Ss&&(f["SparseMatrix,"+d]=(v,y)=>l.Ss(v,y,u,!1)),p&&(f[d+", SparseMatrix"]=(v,y)=>p(y,v,u,!0))):(l.Ss&&(f["SparseMatrix,"+d]=e.referToSelf(v=>(y,m)=>l.Ss(y,m,v,!1))),p&&(f[d+", SparseMatrix"]=e.referToSelf(v=>(y,m)=>p(m,y,v,!0)))),u&&u.signatures&&UH(f,u.signatures),f}}),_F="mod",uue=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],bG=ae(_F,uue,n=>{var{typed:e,config:t,round:r,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o,concat:l}=n,u=xG({typed:e,config:t,round:r,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o}),c=Io({typed:e,equalScalar:s}),f=Ns({typed:e}),d=W_({typed:e,equalScalar:s}),h=Li({typed:e,equalScalar:s}),p=li({typed:e,DenseMatrix:o}),v=qn({typed:e,matrix:i,concat:l});return e(_F,{"number, number":y,"BigNumber, BigNumber":function(S,b){return b.isZero()?S:S.sub(b.mul(u(S.div(b))))},"Fraction, Fraction":function(S,b){return b.equals(0)?S:S.sub(b.mul(u(S.div(b))))}},v({SS:d,DS:f,SD:c,Ss:h,sS:p}));function y(m,S){return S===0?m:m-S*u(m/S)}}),cue="matAlgo01xDSid",fue=["typed"],af=ae(cue,fue,n=>{var{typed:e}=n;return function(r,i,s,a){var o=r._data,l=r._size,u=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==h.length)throw new on(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],y=l[1],m=typeof u=="string"&&u!=="mixed"&&u===p?u:void 0,S=m?e.find(s,[m,m]):s,b,g,w=[];for(b=0;b<v;b++)w[b]=[];var x=[],M=[];for(g=0;g<y;g++){for(var A=g+1,N=d[g],C=d[g+1],T=N;T<C;T++)b=f[T],x[b]=a?S(c[T],o[b][g]):S(o[b][g],c[T]),M[b]=A;for(b=0;b<v;b++)M[b]===A?w[b][g]=x[b]:w[b][g]=o[b][g]}return r.createDenseMatrix({data:w,size:[v,y],datatype:u===r._datatype&&p===i._datatype?m:void 0})}}),due="matAlgo04xSidSid",hue=["typed","equalScalar"],yP=ae(due,hue,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,h=s._index,p=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new on(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var m=c[0],S=c[1],b,g=t,w=0,x=a;typeof f=="string"&&f===y&&f!=="mixed"&&(b=f,g=e.find(t,[b,b]),w=e.convert(0,b),x=e.find(a,[b,b]));var M=o&&d?[]:void 0,A=[],N=[],C=o&&d?[]:void 0,T=o&&d?[]:void 0,R=[],U=[],F,B,D,O,$;for(B=0;B<S;B++){N[B]=A.length;var L=B+1;for(O=u[B],$=u[B+1],D=O;D<$;D++)F=l[D],A.push(F),R[F]=L,C&&(C[F]=o[D]);for(O=p[B],$=p[B+1],D=O;D<$;D++)if(F=h[D],R[F]===L){if(C){var X=x(C[F],d[D]);g(X,w)?R[F]=null:C[F]=X}}else A.push(F),U[F]=L,T&&(T[F]=d[D]);if(C&&T)for(D=N[B];D<A.length;)F=A[D],R[F]===L?(M[D]=C[F],D++):U[F]===L?(M[D]=T[F],D++):A.splice(D,1)}return N[S]=A.length,i.createSparseMatrix({values:M,index:A,ptr:N,size:[m,S],datatype:f===i._datatype&&y===s._datatype?b:void 0})}}),pue="matAlgo10xSids",mue=["typed","DenseMatrix"],Bd=ae(pue,mue,n=>{var{typed:e,DenseMatrix:t}=n;return function(i,s,a,o){var l=i._values,u=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],v,y=a;typeof d=="string"&&(v=d,s=e.convert(s,v),y=e.find(a,[v,v]));for(var m=[],S=[],b=[],g=0;g<p;g++){for(var w=g+1,x=c[g],M=c[g+1],A=x;A<M;A++){var N=u[A];S[N]=l[A],b[N]=w}for(var C=0;C<h;C++)g===0&&(m[C]=[]),b[C]===w?m[C][g]=o?y(s,S[C]):y(S[C],s):m[C][g]=s}return new t({data:m,size:[h,p],datatype:v})}});function Ou(n,e,t,r){if(!(this instanceof Ou))throw new SyntaxError("Constructor must be called with the new operator");this.fn=n,this.count=e,this.min=t,this.max=r,this.message="Wrong number of arguments in function "+n+" ("+e+" provided, "+t+(r!=null?"-"+r:"")+" expected)",this.stack=new Error().stack}Ou.prototype=new Error;Ou.prototype.constructor=Error;Ou.prototype.name="ArgumentsError";Ou.prototype.isArgumentsError=!0;var EF="gcd",gue=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],$2="number | BigNumber | Fraction | Matrix | Array",vue="".concat($2,", ").concat($2,", ...").concat($2);function MF(n){return!n.some(e=>Array.isArray(e))}var yue=ae(EF,gue,n=>{var{typed:e,matrix:t,config:r,round:i,equalScalar:s,zeros:a,BigNumber:o,DenseMatrix:l,concat:u}=n,c=bG({typed:e,config:r,round:i,matrix:t,equalScalar:s,zeros:a,DenseMatrix:l,concat:u}),f=af({typed:e}),d=yP({typed:e,equalScalar:s}),h=Bd({typed:e,DenseMatrix:l}),p=qn({typed:e,matrix:t,concat:u});return e(EF,{"number, number":v,"BigNumber, BigNumber":y,"Fraction, Fraction":(m,S)=>m.gcd(S)},p({SS:d,DS:f,Ss:h}),{[vue]:e.referToSelf(m=>(S,b,g)=>{for(var w=m(S,b),x=0;x<g.length;x++)w=m(w,g[x]);return w}),Array:e.referToSelf(m=>S=>{if(S.length===1&&Array.isArray(S[0])&&MF(S[0]))return m(...S[0]);if(MF(S))return m(...S);throw new Ou("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(m=>S=>m(S.toArray()))});function v(m,S){if(!Ot(m)||!Ot(S))throw new Error("Parameters in function gcd must be integer numbers");for(var b;S!==0;)b=c(m,S),m=S,S=b;return m<0?-m:m}function y(m,S){if(!m.isInt()||!S.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var b=new o(0);!S.isZero();){var g=c(m,S);m=S,S=g}return m.lt(b)?m.neg():m}}),xue="matAlgo06xS0S0",bue=["typed","equalScalar"],G_=ae(xue,bue,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,a){var o=i._values,l=i._size,u=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=s._values,f=s._size,d=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==f.length)throw new on(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");var h=l[0],p=l[1],v,y=t,m=0,S=a;typeof u=="string"&&u===d&&u!=="mixed"&&(v=u,y=e.find(t,[v,v]),m=e.convert(0,v),S=e.find(a,[v,v]));for(var b=o&&c?[]:void 0,g=[],w=[],x=b?[]:void 0,M=[],A=[],N=0;N<p;N++){w[N]=g.length;var C=N+1;if(YL(i,N,M,x,A,C,g,S),YL(s,N,M,x,A,C,g,S),x)for(var T=w[N];T<g.length;){var R=g[T];if(A[R]===C){var U=x[R];y(U,m)?g.splice(T,1):(b.push(U),T++)}else g.splice(T,1)}else for(var F=w[N];F<g.length;){var B=g[F];A[B]!==C?g.splice(F,1):F++}}return w[p]=g.length,i.createSparseMatrix({values:b,index:g,ptr:w,size:[h,p],datatype:u===i._datatype&&d===s._datatype?v:void 0})}}),CF="lcm",wue=["typed","matrix","equalScalar","concat"],Sue=ae(CF,wue,n=>{var{typed:e,matrix:t,equalScalar:r,concat:i}=n,s=Io({typed:e,equalScalar:r}),a=G_({typed:e,equalScalar:r}),o=Li({typed:e,equalScalar:r}),l=qn({typed:e,matrix:t,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(d=>(h,p,v)=>{for(var y=d(h,p),m=0;m<v.length;m++)y=d(y,v[m]);return y}),e(CF,{"number, number":OW,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,h)=>d.lcm(h)},l({SS:a,DS:s,Ss:o}),c);function f(d,h){if(!d.isInt()||!h.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(h.isZero())return h;for(var p=d.times(h);!h.isZero();){var v=h;h=d.mod(v),d=v}return p.div(d).abs()}}),AF="log10",_ue=["typed","config","Complex"],Eue=ae(AF,_ue,n=>{var{typed:e,config:t,Complex:r}=n;return e(AF,{number:function(s){return s>=0||t.predictable?IW(s):new r(s,0).log().div(Math.LN10)},Complex:function(s){return new r(s).log().div(Math.LN10)},BigNumber:function(s){return!s.isNegative()||t.predictable?s.log():new r(s.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(i=>s=>cn(s,i))})}),TF="log2",Mue=["typed","config","Complex"],Cue=ae(TF,Mue,n=>{var{typed:e,config:t,Complex:r}=n;return e(TF,{number:function(a){return a>=0||t.predictable?kW(a):i(new r(a,0))},Complex:i,BigNumber:function(a){return!a.isNegative()||t.predictable?a.log(2):i(new r(a.toNumber(),0))},"Array | Matrix":e.referToSelf(s=>a=>cn(a,s))});function i(s){var a=Math.sqrt(s.re*s.re+s.im*s.im);return new r(Math.log2?Math.log2(a):Math.log(a)/Math.LN2,Math.atan2(s.im,s.re)/Math.LN2)}}),Aue="multiplyScalar",Tue=["typed"],Due=ae(Aue,Tue,n=>{var{typed:e}=n;return e("multiplyScalar",{"number, number":AW,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(t,r)=>r.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,r)=>t.multiply(r)})}),DF="multiply",Nue=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Pue=ae(DF,Nue,n=>{var{typed:e,matrix:t,addScalar:r,multiplyScalar:i,equalScalar:s,dot:a}=n,o=Li({typed:e,equalScalar:s}),l=Oo({typed:e});function u(w,x){switch(w.length){case 1:switch(x.length){case 1:if(w[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;case 2:switch(x.length){case 1:if(w[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+x[0]+")");break;case 2:if(w[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function c(w,x,M){if(M===0)throw new Error("Cannot multiply two empty vectors");return a(w,x)}function f(w,x){if(x.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(w,x)}function d(w,x){var M=w._data,A=w._size,N=w._datatype||w.getDataType(),C=x._data,T=x._size,R=x._datatype||x.getDataType(),U=A[0],F=T[1],B,D=r,O=i;N&&R&&N===R&&typeof N=="string"&&N!=="mixed"&&(B=N,D=e.find(r,[B,B]),O=e.find(i,[B,B]));for(var $=[],L=0;L<F;L++){for(var X=O(M[0],C[0][L]),Z=1;Z<U;Z++)X=D(X,O(M[Z],C[Z][L]));$[L]=X}return w.createDenseMatrix({data:$,size:[F],datatype:N===w._datatype&&R===x._datatype?B:void 0})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":S}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":y,"DenseMatrix, SparseMatrix":m,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":g});function v(w,x){var M=w._data,A=w._size,N=w._datatype||w.getDataType(),C=x._data,T=x._datatype||x.getDataType(),R=A[0],U=A[1],F,B=r,D=i;N&&T&&N===T&&typeof N=="string"&&N!=="mixed"&&(F=N,B=e.find(r,[F,F]),D=e.find(i,[F,F]));for(var O=[],$=0;$<R;$++){for(var L=M[$],X=D(L[0],C[0]),Z=1;Z<U;Z++)X=B(X,D(L[Z],C[Z]));O[$]=X}return w.createDenseMatrix({data:O,size:[R],datatype:N===w._datatype&&T===x._datatype?F:void 0})}function y(w,x){var M=w._data,A=w._size,N=w._datatype||w.getDataType(),C=x._data,T=x._size,R=x._datatype||x.getDataType(),U=A[0],F=A[1],B=T[1],D,O=r,$=i;N&&R&&N===R&&typeof N=="string"&&N!=="mixed"&&N!=="mixed"&&(D=N,O=e.find(r,[D,D]),$=e.find(i,[D,D]));for(var L=[],X=0;X<U;X++){var Z=M[X];L[X]=[];for(var Q=0;Q<B;Q++){for(var K=$(Z[0],C[0][Q]),re=1;re<F;re++)K=O(K,$(Z[re],C[re][Q]));L[X][Q]=K}}return w.createDenseMatrix({data:L,size:[U,B],datatype:N===w._datatype&&R===x._datatype?D:void 0})}function m(w,x){var M=w._data,A=w._size,N=w._datatype||w.getDataType(),C=x._values,T=x._index,R=x._ptr,U=x._size,F=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!C)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var B=A[0],D=U[1],O,$=r,L=i,X=s,Z=0;N&&F&&N===F&&typeof N=="string"&&N!=="mixed"&&(O=N,$=e.find(r,[O,O]),L=e.find(i,[O,O]),X=e.find(s,[O,O]),Z=e.convert(0,O));for(var Q=[],K=[],re=[],ce=x.createSparseMatrix({values:Q,index:K,ptr:re,size:[B,D],datatype:N===w._datatype&&F===x._datatype?O:void 0}),ue=0;ue<D;ue++){re[ue]=K.length;var me=R[ue],Ee=R[ue+1];if(Ee>me)for(var xe=0,Te=0;Te<B;Te++){for(var De=Te+1,ie=void 0,Ie=me;Ie<Ee;Ie++){var ke=T[Ie];xe!==De?(ie=L(M[Te][ke],C[Ie]),xe=De):ie=$(ie,L(M[Te][ke],C[Ie]))}xe===De&&!X(ie,Z)&&(K.push(Te),Q.push(ie))}}return re[D]=K.length,ce}function S(w,x){var M=w._values,A=w._index,N=w._ptr,C=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!M)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var T=x._data,R=x._datatype||x.getDataType(),U=w._size[0],F=x._size[0],B=[],D=[],O=[],$,L=r,X=i,Z=s,Q=0;C&&R&&C===R&&typeof C=="string"&&C!=="mixed"&&($=C,L=e.find(r,[$,$]),X=e.find(i,[$,$]),Z=e.find(s,[$,$]),Q=e.convert(0,$));var K=[],re=[];O[0]=0;for(var ce=0;ce<F;ce++){var ue=T[ce];if(!Z(ue,Q))for(var me=N[ce],Ee=N[ce+1],xe=me;xe<Ee;xe++){var Te=A[xe];re[Te]?K[Te]=L(K[Te],X(ue,M[xe])):(re[Te]=!0,D.push(Te),K[Te]=X(ue,M[xe]))}}for(var De=D.length,ie=0;ie<De;ie++){var Ie=D[ie];B[ie]=K[Ie]}return O[1]=D.length,w.createSparseMatrix({values:B,index:D,ptr:O,size:[U,1],datatype:C===w._datatype&&R===x._datatype?$:void 0})}function b(w,x){var M=w._values,A=w._index,N=w._ptr,C=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!M)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var T=x._data,R=x._datatype||x.getDataType(),U=w._size[0],F=x._size[0],B=x._size[1],D,O=r,$=i,L=s,X=0;C&&R&&C===R&&typeof C=="string"&&C!=="mixed"&&(D=C,O=e.find(r,[D,D]),$=e.find(i,[D,D]),L=e.find(s,[D,D]),X=e.convert(0,D));for(var Z=[],Q=[],K=[],re=w.createSparseMatrix({values:Z,index:Q,ptr:K,size:[U,B],datatype:C===w._datatype&&R===x._datatype?D:void 0}),ce=[],ue=[],me=0;me<B;me++){K[me]=Q.length;for(var Ee=me+1,xe=0;xe<F;xe++){var Te=T[xe][me];if(!L(Te,X))for(var De=N[xe],ie=N[xe+1],Ie=De;Ie<ie;Ie++){var ke=A[Ie];ue[ke]!==Ee?(ue[ke]=Ee,Q.push(ke),ce[ke]=$(Te,M[Ie])):ce[ke]=O(ce[ke],$(Te,M[Ie]))}}for(var te=K[me],ne=Q.length,Ce=te;Ce<ne;Ce++){var se=Q[Ce];Z[Ce]=ce[se]}}return K[B]=Q.length,re}function g(w,x){var M=w._values,A=w._index,N=w._ptr,C=w._datatype||w._data===void 0?w._datatype:w.getDataType(),T=x._values,R=x._index,U=x._ptr,F=x._datatype||x._data===void 0?x._datatype:x.getDataType(),B=w._size[0],D=x._size[1],O=M&&T,$,L=r,X=i;C&&F&&C===F&&typeof C=="string"&&C!=="mixed"&&($=C,L=e.find(r,[$,$]),X=e.find(i,[$,$]));for(var Z=O?[]:void 0,Q=[],K=[],re=w.createSparseMatrix({values:Z,index:Q,ptr:K,size:[B,D],datatype:C===w._datatype&&F===x._datatype?$:void 0}),ce=O?[]:void 0,ue=[],me,Ee,xe,Te,De,ie,Ie,ke,te=0;te<D;te++){K[te]=Q.length;var ne=te+1;for(De=U[te],ie=U[te+1],Te=De;Te<ie;Te++)if(ke=R[Te],O)for(Ee=N[ke],xe=N[ke+1],me=Ee;me<xe;me++)Ie=A[me],ue[Ie]!==ne?(ue[Ie]=ne,Q.push(Ie),ce[Ie]=X(T[Te],M[me])):ce[Ie]=L(ce[Ie],X(T[Te],M[me]));else for(Ee=N[ke],xe=N[ke+1],me=Ee;me<xe;me++)Ie=A[me],ue[Ie]!==ne&&(ue[Ie]=ne,Q.push(Ie));if(O)for(var Ce=K[te],se=Q.length,j=Ce;j<se;j++){var G=Q[j];Z[j]=ce[G]}}return K[D]=Q.length,re}return e(DF,i,{"Array, Array":e.referTo("Matrix, Matrix",w=>(x,M)=>{u(nn(x),nn(M));var A=w(t(x),t(M));return Ut(A)?A.valueOf():A}),"Matrix, Matrix":function(x,M){var A=x.size(),N=M.size();return u(A,N),A.length===1?N.length===1?c(x,M,A[0]):f(x,M):N.length===1?h(x,M):p(x,M)},"Matrix, Array":e.referTo("Matrix,Matrix",w=>(x,M)=>w(x,t(M))),"Array, Matrix":e.referToSelf(w=>(x,M)=>w(t(x,M.storage()),M)),"SparseMatrix, any":function(x,M){return o(x,M,i,!1)},"DenseMatrix, any":function(x,M){return l(x,M,i,!1)},"any, SparseMatrix":function(x,M){return o(M,x,i,!0)},"any, DenseMatrix":function(x,M){return l(M,x,i,!0)},"Array, any":function(x,M){return l(t(x),M,i,!1).valueOf()},"any, Array":function(x,M){return l(t(M),x,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(w=>(x,M,A)=>{for(var N=w(x,M),C=0;C<A.length;C++)N=w(N,A[C]);return N})})}),NF="nthRoot",Rue=["typed","matrix","equalScalar","BigNumber","concat"],Oue=ae(NF,Rue,n=>{var{typed:e,matrix:t,equalScalar:r,BigNumber:i,concat:s}=n,a=af({typed:e}),o=Io({typed:e,equalScalar:r}),l=G_({typed:e,equalScalar:r}),u=Li({typed:e,equalScalar:r}),c=qn({typed:e,matrix:t,concat:s});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(NF,{number:ZL,"number, number":ZL,BigNumber:h=>d(h,new i(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",h=>p=>h(t(p),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",h=>p=>h(p,2)),SparseMatrix:e.referTo("SparseMatrix,number",h=>p=>h(p,2)),"SparseMatrix, SparseMatrix":e.referToSelf(h=>(p,v)=>{if(v.density()===1)return l(p,v,h);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(h=>(p,v)=>{if(v.density()===1)return a(p,v,h,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",h=>(p,v)=>h(t(p),v)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(p,v)=>{if(v.density()===1)return u(v,p,h,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:o,Ss:u,sS:!1}));function d(h,p){var v=i.precision,y=i.clone({precision:v+2}),m=new i(0),S=new y(1),b=p.isNegative();if(b&&(p=p.neg()),p.isZero())throw new Error("Root must be non-zero");if(h.isNegative()&&!p.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(h.isZero())return b?new y(1/0):0;if(!h.isFinite())return b?m:h;var g=h.abs().pow(S.div(p));return g=h.isNeg()?g.neg():g,new i((b?S.div(g):g).toPrecision(v))}}),PF="sign",Iue=["typed","BigNumber","Fraction","complex"],kue=ae(PF,Iue,n=>{var{typed:e,BigNumber:t,complex:r,Fraction:i}=n;return e(PF,{number:LT,Complex:function(a){return a.im===0?r(LT(a.re)):a.sign()},BigNumber:function(a){return new t(a.cmp(0))},Fraction:function(a){return new i(a.s,1)},"Array | Matrix":e.referToSelf(s=>a=>cn(a,s)),Unit:e.referToSelf(s=>a=>{if(!a._isDerived()&&a.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(s,a.valueType())(a.value)})})}),Lue="sqrt",Fue=["config","typed","Complex"],Bue=ae(Lue,Fue,n=>{var{config:e,typed:t,Complex:r}=n;return t("sqrt",{number:i,Complex:function(a){return a.sqrt()},BigNumber:function(a){return!a.isNegative()||e.predictable?a.sqrt():i(a.toNumber())},Unit:function(a){return a.pow(.5)}});function i(s){return isNaN(s)?NaN:s>=0||e.predictable?Math.sqrt(s):new r(s,0).sqrt()}}),RF="square",zue=["typed"],Uue=ae(RF,zue,n=>{var{typed:e}=n;return e(RF,{number:LW,Complex:function(r){return r.mul(r)},BigNumber:function(r){return r.times(r)},Fraction:function(r){return r.mul(r)},Unit:function(r){return r.pow(2)}})}),OF="subtract",$ue=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],Vue=ae(OF,$ue,n=>{var{typed:e,matrix:t,equalScalar:r,subtractScalar:i,unaryMinus:s,DenseMatrix:a,concat:o}=n,l=af({typed:e}),u=Ns({typed:e}),c=W_({typed:e,equalScalar:r}),f=Bd({typed:e,DenseMatrix:a}),d=li({typed:e,DenseMatrix:a}),h=qn({typed:e,matrix:t,concat:o});return e(OF,{"any, any":i},h({elop:i,SS:c,DS:l,SD:u,Ss:d,sS:f}))}),IF="xgcd",Hue=["typed","config","matrix","BigNumber"],Wue=ae(IF,Hue,n=>{var{typed:e,config:t,matrix:r,BigNumber:i}=n;return e(IF,{"number, number":function(o,l){var u=FW(o,l);return t.matrix==="Array"?u:r(u)},"BigNumber, BigNumber":s});function s(a,o){var l,u,c,f=new i(0),d=new i(1),h=f,p=d,v=d,y=f;if(!a.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)u=a.div(o).floor(),c=a.mod(o),l=h,h=p.minus(u.times(h)),p=l,l=v,v=y.minus(u.times(v)),y=l,a=o,o=c;var m;return a.lt(f)?m=[a.neg(),p.neg(),y.neg()]:m=[a,a.isZero()?0:p,y],t.matrix==="Array"?m:r(m)}}),kF="invmod",Gue=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],jue=ae(kF,Gue,n=>{var{typed:e,config:t,BigNumber:r,xgcd:i,equal:s,smaller:a,mod:o,add:l,isInteger:u}=n;return e(kF,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!u(f)||!u(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=o(f,d),s(d,0))throw new Error("Divisor must be non zero");var h=i(f,d);h=h.valueOf();var[p,v]=h;return s(p,r(1))?(v=o(v,d),a(v,r(0))&&(v=l(v,d)),v):NaN}}),que="matAlgo09xS0Sf",Xue=["typed","equalScalar"],wG=ae(que,Xue,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,h=s._index,p=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new on(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var m=c[0],S=c[1],b,g=t,w=0,x=a;typeof f=="string"&&f===y&&f!=="mixed"&&(b=f,g=e.find(t,[b,b]),w=e.convert(0,b),x=e.find(a,[b,b]));var M=o&&d?[]:void 0,A=[],N=[],C=M?[]:void 0,T=[],R,U,F,B,D;for(U=0;U<S;U++){N[U]=A.length;var O=U+1;if(C)for(B=p[U],D=p[U+1],F=B;F<D;F++)R=h[F],T[R]=O,C[R]=d[F];for(B=u[U],D=u[U+1],F=B;F<D;F++)if(R=l[F],C){var $=T[R]===O?C[R]:w,L=x(o[F],$);g(L,w)||(A.push(R),M.push(L))}else A.push(R)}return N[S]=A.length,i.createSparseMatrix({values:M,index:A,ptr:N,size:[m,S],datatype:f===i._datatype&&y===s._datatype?b:void 0})}}),LF="dotMultiply",Yue=["typed","matrix","equalScalar","multiplyScalar","concat"],Kue=ae(LF,Yue,n=>{var{typed:e,matrix:t,equalScalar:r,multiplyScalar:i,concat:s}=n,a=Io({typed:e,equalScalar:r}),o=wG({typed:e,equalScalar:r}),l=Li({typed:e,equalScalar:r}),u=qn({typed:e,matrix:t,concat:s});return e(LF,u({elop:i,SS:o,DS:a,Ss:l}))});function Zue(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=n.constructor;if(n.isNaN()||e.isNaN())return new t(NaN);if(n.isZero()||e.eq(-1)||n.eq(e))return n;if(e.isZero()||n.eq(-1))return e;if(!n.isFinite()||!e.isFinite()){if(!n.isFinite()&&!e.isFinite())return n.isNegative()===e.isNegative()?n:new t(0);if(!n.isFinite())return e.isNegative()?n:n.isNegative()?new t(0):e;if(!e.isFinite())return n.isNegative()?e:e.isNegative()?new t(0):n}return xP(n,e,function(r,i){return r&i})}function Qv(n){if(n.isFinite()&&!n.isInteger())throw new Error("Integer expected in function bitNot");var e=n.constructor,t=e.precision;e.config({precision:1e9});var r=n.plus(new e(1));return r.s=-r.s||null,e.config({precision:t}),r}function Jue(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=n.constructor;if(n.isNaN()||e.isNaN())return new t(NaN);var r=new t(-1);return n.isZero()||e.eq(r)||n.eq(e)?e:e.isZero()||n.eq(r)?n:!n.isFinite()||!e.isFinite()?!n.isFinite()&&!n.isNegative()&&e.isNegative()||n.isNegative()&&!e.isNegative()&&!e.isFinite()?r:n.isNegative()&&e.isNegative()?n.isFinite()?n:e:n.isFinite()?e:n:xP(n,e,function(i,s){return i|s})}function xP(n,e,t){var r=n.constructor,i,s,a=+(n.s<0),o=+(e.s<0);if(a){i=q1(Qv(n));for(var l=0;l<i.length;++l)i[l]^=1}else i=q1(n);if(o){s=q1(Qv(e));for(var u=0;u<s.length;++u)s[u]^=1}else s=q1(e);var c,f,d;i.length<=s.length?(c=i,f=s,d=a):(c=s,f=i,d=o);var h=c.length,p=f.length,v=t(a,o)^1,y=new r(v^1),m=new r(1),S=new r(2),b=r.precision;for(r.config({precision:1e9});h>0;)t(c[--h],f[--p])===v&&(y=y.plus(m)),m=m.times(S);for(;p>0;)t(d,f[--p])===v&&(y=y.plus(m)),m=m.times(S);return r.config({precision:b}),v===0&&(y.s=-y.s),y}function q1(n){for(var e=n.d,t=e[0]+"",r=1;r<e.length;++r){for(var i=e[r]+"",s=7-i.length;s--;)i="0"+i;t+=i}for(var a=t.length;t.charAt(a)==="0";)a--;var o=n.e,l=t.slice(0,a+1||1),u=l.length;if(o>0)if(++o>u)for(o-=u;o--;)l+="0";else o<u&&(l=l.slice(0,o)+"."+l.slice(o));for(var c=[0],f=0;f<l.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(l.charAt(f++));for(var h=0;h<c.length;++h)c[h]>1&&((c[h+1]===null||c[h+1]===void 0)&&(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function Que(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=n.constructor;if(n.isNaN()||e.isNaN())return new t(NaN);if(n.isZero())return e;if(e.isZero())return n;if(n.eq(e))return new t(0);var r=new t(-1);return n.eq(r)?Qv(e):e.eq(r)?Qv(n):!n.isFinite()||!e.isFinite()?!n.isFinite()&&!e.isFinite()?r:new t(n.isNegative()===e.isNegative()?1/0:-1/0):xP(n,e,function(i,s){return i^s})}function ece(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=n.constructor;return n.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):n.isZero()||e.isZero()?n:!n.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?n.times(Math.pow(2,e.toNumber())+""):n.times(new t(2).pow(e))}function tce(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=n.constructor;return n.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):n.isZero()||e.isZero()?n:e.isFinite()?e.lt(55)?n.div(Math.pow(2,e.toNumber())+"").floor():n.div(new t(2).pow(e)).floor():n.isNegative()?new t(-1):n.isFinite()?new t(0):new t(NaN)}var FF="bitAnd",nce=["typed","matrix","equalScalar","concat"],SG=ae(FF,nce,n=>{var{typed:e,matrix:t,equalScalar:r,concat:i}=n,s=Io({typed:e,equalScalar:r}),a=G_({typed:e,equalScalar:r}),o=Li({typed:e,equalScalar:r}),l=qn({typed:e,matrix:t,concat:i});return e(FF,{"number, number":zW,"BigNumber, BigNumber":Zue},l({SS:a,DS:s,Ss:o}))}),BF="bitNot",rce=["typed"],ice=ae(BF,rce,n=>{var{typed:e}=n;return e(BF,{number:UW,BigNumber:Qv,"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),zF="bitOr",sce=["typed","matrix","equalScalar","DenseMatrix","concat"],_G=ae(zF,sce,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s}=n,a=af({typed:e}),o=yP({typed:e,equalScalar:r}),l=Bd({typed:e,DenseMatrix:i}),u=qn({typed:e,matrix:t,concat:s});return e(zF,{"number, number":$W,"BigNumber, BigNumber":Jue},u({SS:o,DS:a,Ss:l}))}),ace="matAlgo07xSSf",oce=["typed","DenseMatrix"],Al=ae(ace,oce,n=>{var{typed:e,DenseMatrix:t}=n;return function(s,a,o){var l=s._size,u=s._datatype||s._data===void 0?s._datatype:s.getDataType(),c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==c.length)throw new on(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var d=l[0],h=l[1],p,v=0,y=o;typeof u=="string"&&u===f&&u!=="mixed"&&(p=u,v=e.convert(0,p),y=e.find(o,[p,p]));var m,S,b=[];for(m=0;m<d;m++)b[m]=[];var g=[],w=[],x=[],M=[];for(S=0;S<h;S++){var A=S+1;for(r(s,S,x,g,A),r(a,S,M,w,A),m=0;m<d;m++){var N=x[m]===A?g[m]:v,C=M[m]===A?w[m]:v;b[m][S]=y(N,C)}}return new t({data:b,size:[d,h],datatype:u===s._datatype&&f===a._datatype?p:void 0})};function r(i,s,a,o,l){for(var u=i._values,c=i._index,f=i._ptr,d=f[s],h=f[s+1];d<h;d++){var p=c[d];a[p]=l,o[p]=u[d]}}}),UF="bitXor",lce=["typed","matrix","DenseMatrix","concat"],uce=ae(UF,lce,n=>{var{typed:e,matrix:t,DenseMatrix:r,concat:i}=n,s=Ns({typed:e}),a=Al({typed:e,DenseMatrix:r}),o=li({typed:e,DenseMatrix:r}),l=qn({typed:e,matrix:t,concat:i});return e(UF,{"number, number":VW,"BigNumber, BigNumber":Que},l({SS:a,DS:s,Ss:o}))}),$F="arg",cce=["typed"],fce=ae($F,cce,n=>{var{typed:e}=n;return e($F,{number:function(r){return Math.atan2(0,r)},BigNumber:function(r){return r.constructor.atan2(0,r)},Complex:function(r){return r.arg()},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),VF="conj",dce=["typed"],hce=ae(VF,dce,n=>{var{typed:e}=n;return e(VF,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),HF="im",pce=["typed"],mce=ae(HF,pce,n=>{var{typed:e}=n;return e(HF,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),WF="re",gce=["typed"],vce=ae(WF,gce,n=>{var{typed:e}=n;return e(WF,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),GF="not",yce=["typed"],xce=ae(GF,yce,n=>{var{typed:e}=n;return e(GF,{"null | undefined":()=>!0,number:qW,Complex:function(r){return r.re===0&&r.im===0},BigNumber:function(r){return r.isZero()||r.isNaN()},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),jF="or",bce=["typed","matrix","equalScalar","DenseMatrix","concat"],EG=ae(jF,bce,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s}=n,a=Ns({typed:e}),o=W_({typed:e,equalScalar:r}),l=li({typed:e,DenseMatrix:i}),u=qn({typed:e,matrix:t,concat:s});return e(jF,{"number, number":XW,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},u({SS:o,DS:a,Ss:l}))}),qF="xor",wce=["typed","matrix","DenseMatrix","concat"],Sce=ae(qF,wce,n=>{var{typed:e,matrix:t,DenseMatrix:r,concat:i}=n,s=Ns({typed:e}),a=Al({typed:e,DenseMatrix:r}),o=li({typed:e,DenseMatrix:r}),l=qn({typed:e,matrix:t,concat:i});return e(qF,{"number, number":YW,"Complex, Complex":function(c,f){return(c.re!==0||c.im!==0)!=(f.re!==0||f.im!==0)},"BigNumber, BigNumber":function(c,f){return(!c.isZero()&&!c.isNaN())!=(!f.isZero()&&!f.isNaN())},"Unit, Unit":e.referToSelf(u=>(c,f)=>u(c.value||0,f.value||0))},l({SS:a,DS:s,Ss:o}))}),XF="concat",_ce=["typed","matrix","isInteger"],MG=ae(XF,_ce,n=>{var{typed:e,matrix:t,isInteger:r}=n;return e(XF,{"...Array | Matrix | number | BigNumber":function(s){var a,o=s.length,l=-1,u,c=!1,f=[];for(a=0;a<o;a++){var d=s[a];if(Ut(d)&&(c=!0),tn(d)||Jt(d)){if(a!==o-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=d.valueOf(),!r(l))throw new TypeError("Integer number expected for dimension");if(l<0||a>0&&l>u)throw new ao(l,u+1)}else{var h=Xt(d).valueOf(),p=nn(h);if(f[a]=h,u=l,l=p.length-1,a>0&&l!==u)throw new on(u+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=wW(v,f.shift(),l);return c?t(v):v},"...string":function(s){return s.join("")}})}),YF="column",Ece=["typed","Index","matrix","range"],CG=ae(YF,Ece,n=>{var{typed:e,Index:t,matrix:r,range:i}=n;return e(YF,{"Matrix, number":s,"Array, number":function(o,l){return s(r(Xt(o)),l).valueOf()}});function s(a,o){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");Fn(o,a.size()[1]);var l=i(0,a.size()[0]),u=new t(l,o),c=a.subset(u);return Ut(c)?c:r([[c]])}}),KF="count",Mce=["typed","size","prod"],Cce=ae(KF,Mce,n=>{var{typed:e,size:t,prod:r}=n;return e(KF,{string:function(s){return s.length},"Matrix | Array":function(s){return r(t(s))}})}),ZF="cross",Ace=["typed","matrix","subtract","multiply"],Tce=ae(ZF,Ace,n=>{var{typed:e,matrix:t,subtract:r,multiply:i}=n;return e(ZF,{"Matrix, Matrix":function(o,l){return t(s(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return t(s(o.toArray(),l))},"Array, Matrix":function(o,l){return t(s(o,l.toArray()))},"Array, Array":s});function s(a,o){var l=Math.max(nn(a).length,nn(o).length);a=sS(a),o=sS(o);var u=nn(a),c=nn(o);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var f=[r(i(a[1],o[2]),i(a[2],o[1])),r(i(a[2],o[0]),i(a[0],o[2])),r(i(a[0],o[1]),i(a[1],o[0]))];return l>1?[f]:f}}),JF="diag",Dce=["typed","matrix","DenseMatrix","SparseMatrix"],Nce=ae(JF,Dce,n=>{var{typed:e,matrix:t,DenseMatrix:r,SparseMatrix:i}=n;return e(JF,{Array:function(u){return s(u,0,nn(u),null)},"Array, number":function(u,c){return s(u,c,nn(u),null)},"Array, BigNumber":function(u,c){return s(u,c.toNumber(),nn(u),null)},"Array, string":function(u,c){return s(u,0,nn(u),c)},"Array, number, string":function(u,c,f){return s(u,c,nn(u),f)},"Array, BigNumber, string":function(u,c,f){return s(u,c.toNumber(),nn(u),f)},Matrix:function(u){return s(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return s(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return s(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return s(u,0,u.size(),c)},"Matrix, number, string":function(u,c,f){return s(u,c,u.size(),f)},"Matrix, BigNumber, string":function(u,c,f){return s(u,c.toNumber(),u.size(),f)}});function s(l,u,c,f){if(!Ot(u))throw new TypeError("Second parameter in function diag must be an integer");var d=u>0?u:0,h=u<0?-u:0;switch(c.length){case 1:return a(l,u,f,c[0],h,d);case 2:return o(l,u,f,c,h,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function a(l,u,c,f,d,h){var p=[f+d,f+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var v=c==="sparse"?i.diagonal(p,l,u):r.diagonal(p,l,u);return c!==null?v:v.valueOf()}function o(l,u,c,f,d,h){if(Ut(l)){var p=l.diagonal(u);return c!==null?c!==p.storage()?t(p,c):p:p.valueOf()}for(var v=Math.min(f[0]-d,f[1]-h),y=[],m=0;m<v;m++)y[m]=l[m+d][m+h];return c!==null?t(y):y}});function _m(n,e,t,r,i){if(Yf.isTypedFunction(n)){var s=[e,t,r],a=Yf.resolve(n,s);if(a)return f(a.implementation,s);var o=[e,t],l=Yf.resolve(n,o);if(l)return f(l.implementation,o);var u=[e],c=Yf.resolve(n,u);return c?f(c.implementation,u):f(n,s)}else return n(e,t,r);function f(d,h){try{return d.apply(d,h)}catch(y){var p;if(y instanceof TypeError&&((p=y.data)===null||p===void 0?void 0:p.category)==="wrongType"){var v=[];throw v.push("value: ".concat($n(e))),h.length>=2&&v.push("index: ".concat($n(t))),h.length>=3&&v.push("array: ".concat($n(r))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(n.name,"(").concat(v.join(", "),") at index ").concat(JSON.stringify(t)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(n.name,": ").concat(y.message))}}}var Pce="filter",Rce=["typed"],Oce=ae(Pce,Rce,n=>{var{typed:e}=n;return e("filter",{"Array, function":QF,"Matrix, function":function(r,i){return r.create(QF(r.toArray(),i))},"Array, RegExp":aS,"Matrix, RegExp":function(r,i){return r.create(aS(r.toArray(),i))}})});function QF(n,e){return xW(n,function(t,r,i){return _m(e,t,[r],i,"filter")})}var e8="flatten",Ice=["typed","matrix"],kce=ae(e8,Ice,n=>{var{typed:e,matrix:t}=n;return e(e8,{Array:function(i){return wn(i)},Matrix:function(i){var s=wn(i.toArray());return t(s)}})}),t8="forEach",Lce=["typed"],Fce=ae(t8,Lce,n=>{var{typed:e}=n;return e(t8,{"Array, function":Bce,"Matrix, function":function(r,i){r.forEach(i)}})});function Bce(n,e){var t=function r(i,s){if(Array.isArray(i))$_(i,function(a,o){r(a,s.concat(o))});else return _m(e,i,s,n,"forEach")};t(n,[])}var n8="getMatrixDataType",zce=["typed"],Uce=ae(n8,zce,n=>{var{typed:e}=n;return e(n8,{Array:function(r){return Jv(r,$n)},Matrix:function(r){return r.getDataType()}})}),r8="identity",$ce=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Vce=ae(r8,$ce,n=>{var{typed:e,config:t,matrix:r,BigNumber:i,DenseMatrix:s,SparseMatrix:a}=n;return e(r8,{"":function(){return t.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return l(c,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return l(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return l(c,f,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return l(c,f,d)},Array:function(c){return o(c)},"Array, string":function(c,f){return o(c,f)},Matrix:function(c){return o(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return o(c.valueOf(),f)}});function o(u,c){switch(u.length){case 0:return c?r(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,f){var d=Jt(u)||Jt(c)?i:null;if(Jt(u)&&(u=u.toNumber()),Jt(c)&&(c=c.toNumber()),!Ot(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!Ot(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,p=d?new d(0):0,v=[u,c];if(f){if(f==="sparse")return a.diagonal(v,h,0,p);if(f==="dense")return s.diagonal(v,h,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var y=Xp([],v,p),m=u<c?u:c,S=0;S<m;S++)y[S][S]=h;return y}}),i8="kron",Hce=["typed","matrix","multiplyScalar"],Wce=ae(i8,Hce,n=>{var{typed:e,matrix:t,multiplyScalar:r}=n;return e(i8,{"Matrix, Matrix":function(a,o){return t(i(a.toArray(),o.toArray()))},"Matrix, Array":function(a,o){return t(i(a.toArray(),o))},"Array, Matrix":function(a,o){return t(i(a,o.toArray()))},"Array, Array":i});function i(s,a){if(nn(s).length===1&&(s=[s]),nn(a).length===1&&(a=[a]),nn(s).length>2||nn(a).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(s.length)+", y = "+JSON.stringify(a.length)+")");var o=[],l=[];return s.map(function(u){return a.map(function(c){return l=[],o.push(l),u.map(function(f){return c.map(function(d){return l.push(r(f,d))})})})})&&o}}),s8="map",Gce=["typed"],jce=ae(s8,Gce,n=>{var{typed:e}=n;return e(s8,{"Array, function":qce,"Matrix, function":function(r,i){return r.map(i)}})});function qce(n,e){var t=function r(i,s){return Array.isArray(i)?i.map(function(a,o){return r(a,s.concat(o))}):_m(e,i,s,n,"map")};return t(n,[])}var a8="diff",Xce=["typed","matrix","subtract","number"],AG=ae(a8,Xce,n=>{var{typed:e,matrix:t,subtract:r,number:i}=n;return e(a8,{"Array | Matrix":function(c){return Ut(c)?t(a(c.toArray())):a(c)},"Array | Matrix, number":function(c,f){if(!Ot(f))throw new RangeError("Dimension must be a whole number");return Ut(c)?t(s(c.toArray(),f)):s(c,f)},"Array, BigNumber":e.referTo("Array,number",u=>(c,f)=>u(c,i(f))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,f)=>u(c,i(f)))});function s(u,c){if(Ut(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return u.forEach(d=>{f.push(s(d,c-1))}),f}else{if(c===0)return a(u);throw RangeError("Cannot have negative dimension")}}function a(u){for(var c=[],f=u.length,d=1;d<f;d++)c.push(o(u[d-1],u[d]));return c}function o(u,c){Ut(u)&&(u=u.toArray()),Ut(c)&&(c=c.toArray());var f=Array.isArray(u),d=Array.isArray(c);if(f&&d)return l(u,c);if(!f&&!d)return r(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=u.length,h=0;h<d;h++)f.push(o(u[h],c[h]));return f}}),Yce="ones",Kce=["typed","config","matrix","BigNumber"],Zce=ae(Yce,Kce,n=>{var{typed:e,config:t,matrix:r,BigNumber:i}=n;return e("ones",{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return s(u,f)}else return t.matrix==="Array"?s(u):s(u,"default")},Array:s,Matrix:function(u){var c=u.storage();return s(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(l,u){var c=a(l),f=c?new i(1):1;if(o(l),u){var d=r(u);return l.length>0?d.resize(l,f):d}else{var h=[];return l.length>0?Xp(h,l,f):h}}function a(l){var u=!1;return l.forEach(function(c,f,d){Jt(c)&&(u=!0,d[f]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!Ot(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function bP(){throw new Error('No "bignumber" implementation available')}function TG(){throw new Error('No "fraction" implementation available')}function DG(){throw new Error('No "matrix" implementation available')}var o8="range",Jce=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],NG=ae(o8,Jce,n=>{var{typed:e,config:t,matrix:r,bignumber:i,smaller:s,smallerEq:a,larger:o,largerEq:l,add:u,isPositive:c}=n;return e(o8,{string:d,"string, boolean":d,"number, number":function(y,m){return f(h(y,m,1,!1))},"number, number, number":function(y,m,S){return f(h(y,m,S,!1))},"number, number, boolean":function(y,m,S){return f(h(y,m,1,S))},"number, number, number, boolean":function(y,m,S,b){return f(h(y,m,S,b))},"BigNumber, BigNumber":function(y,m){var S=y.constructor;return f(h(y,m,new S(1),!1))},"BigNumber, BigNumber, BigNumber":function(y,m,S){return f(h(y,m,S,!1))},"BigNumber, BigNumber, boolean":function(y,m,S){var b=y.constructor;return f(h(y,m,new b(1),S))},"BigNumber, BigNumber, BigNumber, boolean":function(y,m,S,b){return f(h(y,m,S,b))},"Unit, Unit, Unit":function(y,m,S){return f(h(y,m,S,!1))},"Unit, Unit, Unit, boolean":function(y,m,S,b){return f(h(y,m,S,b))}});function f(v){return t.matrix==="Matrix"?r?r(v):DG():v}function d(v,y){var m=p(v);if(!m)throw new SyntaxError('String "'+v+'" is no valid range');return t.number==="BigNumber"?(i===void 0&&bP(),f(h(i(m.start),i(m.end),i(m.step)))):f(h(m.start,m.end,m.step,y))}function h(v,y,m,S){for(var b=[],g=c(m)?S?a:s:S?l:o,w=v;g(w,y);)b.push(w),w=u(w,m);return b}function p(v){var y=v.split(":"),m=y.map(function(b){return Number(b)}),S=m.some(function(b){return isNaN(b)});if(S)return null;switch(m.length){case 2:return{start:m[0],end:m[1],step:1};case 3:return{start:m[0],end:m[2],step:m[1]};default:return null}}}),l8="reshape",Qce=["typed","isInteger","matrix"],efe=ae(l8,Qce,n=>{var{typed:e,isInteger:t}=n;return e(l8,{"Matrix, Array":function(i,s){return i.reshape(s,!0)},"Array, Array":function(i,s){return s.forEach(function(a){if(!t(a))throw new TypeError("Invalid size for dimension: "+a)}),pP(i,s)}})}),tfe="resize",nfe=["config","matrix"],rfe=ae(tfe,nfe,n=>{var{config:e,matrix:t}=n;return function(s,a,o){if(arguments.length!==2&&arguments.length!==3)throw new Ou("resize",arguments.length,2,3);if(Ut(a)&&(a=a.valueOf()),Jt(a[0])&&(a=a.map(function(c){return Jt(c)?c.toNumber():c})),Ut(s))return s.resize(a,o,!0);if(typeof s=="string")return r(s,a,o);var l=Array.isArray(s)?!1:e.matrix!=="Array";if(a.length===0){for(;Array.isArray(s);)s=s[0];return Xt(s)}else{Array.isArray(s)||(s=[s]),s=Xt(s);var u=Xp(s,a,o);return l?t(u):u}};function r(i,s,a){if(a!==void 0){if(typeof a!="string"||a.length!==1)throw new TypeError("Single character expected as defaultValue")}else a=" ";if(s.length!==1)throw new on(s.length,1);var o=s[0];if(typeof o!="number"||!Ot(o))throw new TypeError("Invalid size, must contain positive integers (size: "+un(s)+")");if(i.length>o)return i.substring(0,o);if(i.length<o){for(var l=i,u=0,c=o-i.length;u<c;u++)l+=a;return l}else return i}}),u8="rotate",ife=["typed","multiply","rotationMatrix"],sfe=ae(u8,ife,n=>{var{typed:e,multiply:t,rotationMatrix:r}=n;return e(u8,{"Array , number | BigNumber | Complex | Unit":function(a,o){i(a,2);var l=t(r(o),a);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(a,o){return i(a,2),t(r(o),a)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(a,o,l){i(a,3);var u=t(r(o,l),a);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(a,o,l){return i(a,3),t(r(o,l),a)}});function i(s,a){var o=Array.isArray(s)?nn(s):s.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(o[0]!==a)throw new RangeError("Vector must be of dimensions 1x".concat(a))}}),c8="rotationMatrix",afe=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],ofe=ae(c8,afe,n=>{var{typed:e,config:t,multiplyScalar:r,addScalar:i,unaryMinus:s,norm:a,BigNumber:o,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:f,sin:d}=n;return e(c8,{"":function(){return t.matrix==="Matrix"?l([]):[]},string:function(b){return l(b)},"number | BigNumber | Complex | Unit":function(b){return h(b,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(b,g){return h(b,g)},"number | BigNumber | Complex | Unit, Array":function(b,g){var w=l(g);return p(w),m(b,w,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(b,g){p(g);var w=g.storage()||(t.matrix==="Matrix"?"dense":void 0);return m(b,g,w)},"number | BigNumber | Complex | Unit, Array, string":function(b,g,w){var x=l(g);return p(x),m(b,x,w)},"number | BigNumber | Complex | Unit, Matrix, string":function(b,g,w){return p(g),m(b,g,w)}});function h(S,b){var g=Jt(S),w=g?new o(-1):-1,x=f(S),M=d(S),A=[[x,r(w,M)],[M,x]];return y(A,b)}function p(S){var b=S.size();if(b.length<1||b[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function v(S){return S.reduce((b,g)=>r(b,g))}function y(S,b){if(b){if(b==="sparse")return new c(S);if(b==="dense")return new u(S);throw new TypeError('Unknown matrix type "'.concat(b,'"'))}return S}function m(S,b,g){var w=a(b);if(w===0)throw new RangeError("Rotation around zero vector");var x=Jt(S)?o:null,M=x?new x(1):1,A=x?new x(-1):-1,N=x?new x(b.get([0])/w):b.get([0])/w,C=x?new x(b.get([1])/w):b.get([1])/w,T=x?new x(b.get([2])/w):b.get([2])/w,R=f(S),U=i(M,s(R)),F=d(S),B=i(R,v([N,N,U])),D=i(v([N,C,U]),v([A,T,F])),O=i(v([N,T,U]),v([C,F])),$=i(v([N,C,U]),v([T,F])),L=i(R,v([C,C,U])),X=i(v([C,T,U]),v([A,N,F])),Z=i(v([N,T,U]),v([A,C,F])),Q=i(v([C,T,U]),v([N,F])),K=i(R,v([T,T,U])),re=[[B,D,O],[$,L,X],[Z,Q,K]];return y(re,g)}}),f8="row",lfe=["typed","Index","matrix","range"],PG=ae(f8,lfe,n=>{var{typed:e,Index:t,matrix:r,range:i}=n;return e(f8,{"Matrix, number":s,"Array, number":function(o,l){return s(r(Xt(o)),l).valueOf()}});function s(a,o){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");Fn(o,a.size()[0]);var l=i(0,a.size()[1]),u=new t(o,l),c=a.subset(u);return Ut(c)?c:r([[c]])}}),d8="size",ufe=["typed","config","?matrix"],cfe=ae(d8,ufe,n=>{var{typed:e,config:t,matrix:r}=n;return e(d8,{Matrix:function(s){return s.create(s.size())},Array:nn,string:function(s){return t.matrix==="Array"?[s.length]:r([s.length])},"number | Complex | BigNumber | Unit | boolean | null":function(s){return t.matrix==="Array"?[]:r?r([]):DG()}})}),h8="squeeze",ffe=["typed","matrix"],dfe=ae(h8,ffe,n=>{var{typed:e,matrix:t}=n;return e(h8,{Array:function(i){return sS(Xt(i))},Matrix:function(i){var s=sS(i.toArray());return Array.isArray(s)?t(s):s},any:function(i){return Xt(i)}})}),p8="subset",hfe=["typed","matrix","zeros","add"],RG=ae(p8,hfe,n=>{var{typed:e,matrix:t,zeros:r,add:i}=n;return e(p8,{"Matrix, Index":function(o,l){return qp(l)?t():(iS(o,l),o.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(a){return function(o,l){var u=a(t(o),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":mfe,"string, Index":pfe,"Matrix, Index, any, any":function(o,l,u,c){return qp(l)?o:(iS(o,l),o.clone().subset(l,s(u,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(a){return function(o,l,u,c){var f=a(t(o),l,u,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(a){return function(o,l,u){return a(t(o),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(a){return function(o,l,u){return a(o,l,u,void 0)}}),"string, Index, string":m8,"string, Index, string, string":m8,"Object, Index, any":gfe});function s(a,o){if(typeof a=="string")throw new Error("can't boradcast a string");if(o._isScalar)return a;var l=o.size();if(l.every(u=>u>0))try{return i(a,r(l))}catch{return a}else return a}});function pfe(n,e){if(!ty(e))throw new TypeError("Index expected");if(qp(e))return"";if(iS(Array.from(n),e),e.size().length!==1)throw new on(e.size().length,1);var t=n.length;Fn(e.min()[0],t),Fn(e.max()[0],t);var r=e.dimension(0),i="";return r.forEach(function(s){i+=n.charAt(s)}),i}function m8(n,e,t,r){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(qp(e))return n;if(iS(Array.from(n),e),e.size().length!==1)throw new on(e.size().length,1);if(r!==void 0){if(typeof r!="string"||r.length!==1)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=e.dimension(0),s=i.size()[0];if(s!==t.length)throw new on(i.size()[0],t.length);var a=n.length;Fn(e.min()[0]),Fn(e.max()[0]);for(var o=[],l=0;l<a;l++)o[l]=n.charAt(l);if(i.forEach(function(f,d){o[f]=t.charAt(d[0])}),o.length>a)for(var u=a-1,c=o.length;u<c;u++)o[u]||(o[u]=r);return o.join("")}function mfe(n,e){if(!qp(e)){if(e.size().length!==1)throw new on(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return ws(n,t)}}function gfe(n,e,t){if(qp(e))return n;if(e.size().length!==1)throw new on(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");var i=Xt(n);return Gp(i,r,t),i}var g8="transpose",vfe=["typed","matrix"],yfe=ae(g8,vfe,n=>{var{typed:e,matrix:t}=n;return e(g8,{Array:a=>r(t(a)).valueOf(),Matrix:r,any:Xt});function r(a){var o=a.size(),l;switch(o.length){case 1:l=a.clone();break;case 2:{var u=o[0],c=o[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+un(o)+")");switch(a.storage()){case"dense":l=i(a,u,c);break;case"sparse":l=s(a,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+un(o)+")")}return l}function i(a,o,l){for(var u=a._data,c=[],f,d=0;d<l;d++){f=c[d]=[];for(var h=0;h<o;h++)f[h]=Xt(u[h][d])}return a.createDenseMatrix({data:c,size:[l,o],datatype:a._datatype})}function s(a,o,l){for(var u=a._values,c=a._index,f=a._ptr,d=u?[]:void 0,h=[],p=[],v=[],y=0;y<o;y++)v[y]=0;var m,S,b;for(m=0,S=c.length;m<S;m++)v[c[m]]++;for(var g=0,w=0;w<o;w++)p.push(g),g+=v[w],v[w]=p[w];for(p.push(g),b=0;b<l;b++)for(var x=f[b],M=f[b+1],A=x;A<M;A++){var N=v[c[A]]++;h[N]=b,u&&(d[N]=Xt(u[A]))}return a.createSparseMatrix({values:d,index:h,ptr:p,size:[l,o],datatype:a._datatype})}}),v8="ctranspose",xfe=["typed","transpose","conj"],bfe=ae(v8,xfe,n=>{var{typed:e,transpose:t,conj:r}=n;return e(v8,{any:function(s){return r(t(s))}})}),y8="zeros",wfe=["typed","config","matrix","BigNumber"],Sfe=ae(y8,wfe,n=>{var{typed:e,config:t,matrix:r,BigNumber:i}=n;return e(y8,{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return s(u,f)}else return t.matrix==="Array"?s(u):s(u,"default")},Array:s,Matrix:function(u){var c=u.storage();return s(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(l,u){var c=a(l),f=c?new i(0):0;if(o(l),u){var d=r(u);return l.length>0?d.resize(l,f):d}else{var h=[];return l.length>0?Xp(h,l,f):h}}function a(l){var u=!1;return l.forEach(function(c,f,d){Jt(c)&&(u=!0,d[f]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!Ot(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),x8="fft",_fe=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],Efe=ae(x8,_fe,n=>{var{typed:e,matrix:t,addScalar:r,multiplyScalar:i,divideScalar:s,exp:a,tau:o,i:l,dotDivide:u,conj:c,pow:f,ceil:d,log2:h}=n;return e(x8,{Array:p,Matrix:function(b){return b.create(p(b.toArray()))}});function p(S){var b=nn(S);return b.length===1?m(S,b[0]):v(S.map(g=>p(g,b.slice(1))),0)}function v(S,b){var g=nn(S);if(b!==0)return new Array(g[0]).fill(0).map((x,M)=>v(S[M],b-1));if(g.length===1)return m(S);function w(x){var M=nn(x);return new Array(M[1]).fill(0).map((A,N)=>new Array(M[0]).fill(0).map((C,T)=>x[T][N]))}return w(v(w(S),1))}function y(S){for(var b=S.length,g=a(s(i(-1,i(l,o)),b)),w=[],x=1-b;x<b;x++)w.push(f(g,s(f(x,2),2)));for(var M=f(2,d(h(b+b-1))),A=[...new Array(b).fill(0).map((D,O)=>i(S[O],w[b-1+O])),...new Array(M-b).fill(0)],N=[...new Array(b+b-1).fill(0).map((D,O)=>s(1,w[O])),...new Array(M-(b+b-1)).fill(0)],C=m(A),T=m(N),R=new Array(M).fill(0).map((D,O)=>i(C[O],T[O])),U=u(c(p(c(R))),M),F=[],B=b-1;B<b+b-1;B++)F.push(i(U[B],w[B]));return F}function m(S){var b=S.length;if(b===1)return[S[0]];if(b%2===0){for(var g=[...m(S.filter((A,N)=>N%2===0)),...m(S.filter((A,N)=>N%2===1))],w=0;w<b/2;w++){var x=g[w],M=i(g[w+b/2],a(i(i(o,l),s(-w,b))));g[w]=r(x,M),g[w+b/2]=r(x,i(-1,M))}return g}else return y(S)}}),b8="ifft",Mfe=["typed","fft","dotDivide","conj"],Cfe=ae(b8,Mfe,n=>{var{typed:e,fft:t,dotDivide:r,conj:i}=n;return e(b8,{"Array | Matrix":function(a){var o=Ut(a)?a.size():nn(a);return r(i(t(i(a))),o.reduce((l,u)=>l*u,1))}})});function wd(n){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wd(n)}function Afe(n,e){if(wd(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function OG(n){var e=Afe(n,"string");return wd(e)=="symbol"?e:e+""}function hr(n,e,t){return(e=OG(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function w8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Tfe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w8(Object(t),!0).forEach(function(r){hr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Dfe="solveODE",Nfe=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],Pfe=ae(Dfe,Nfe,n=>{var{typed:e,add:t,subtract:r,multiply:i,divide:s,max:a,map:o,abs:l,isPositive:u,isNegative:c,larger:f,smaller:d,matrix:h,bignumber:p,unaryMinus:v}=n;function y(A){return function(N,C,T,R){var U=!(C.length===2&&(C.every(x)||C.every(zs)));if(U)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var F=C[0],B=C[1],D=f(B,F),O=R.firstStep;if(O!==void 0&&!u(O))throw new Error('"firstStep" must be positive');var $=R.maxStep;if($!==void 0&&!u($))throw new Error('"maxStep" must be positive');var L=R.minStep;if(L&&c(L))throw new Error('"minStep" must be positive or zero');var X=[F,B,O,L,$].filter(q=>q!==void 0);if(!(X.every(x)||X.every(zs)))throw new Error('Inconsistent type of "t" dependant variables');for(var Z=1,Q=R.tol?R.tol:1e-4,K=R.minDelta?R.minDelta:.2,re=R.maxDelta?R.maxDelta:5,ce=R.maxIter?R.maxIter:1e4,ue=[F,B,...T,$,L].some(Jt),[me,Ee,xe,Te]=ue?[p(A.a),p(A.c),p(A.b),p(A.bp)]:[A.a,A.c,A.b,A.bp],De=O?D?O:v(O):s(r(B,F),Z),ie=[F],Ie=[T],ke=r(xe,Te),te=0,ne=0,Ce=g(D),se=w(D);Ce(ie[te],B);){var j=[];De=se(ie[te],B,De),j.push(N(ie[te],Ie[te]));for(var G=1;G<Ee.length;++G)j.push(N(t(ie[te],i(Ee[G],De)),t(Ie[te],i(De,me[G],j))));var fe=a(l(o(i(ke,j),q=>zs(q)?q.value:q)));fe<Q&&Q/fe>1/4&&(ie.push(t(ie[te],De)),Ie.push(t(Ie[te],i(De,xe,j))),te++);var Me=.84*(Q/fe)**(1/5);if(d(Me,K)?Me=K:f(Me,re)&&(Me=re),Me=ue?p(Me):Me,De=i(De,Me),$&&f(l(De),$)?De=D?$:v($):L&&d(l(De),L)&&(De=D?L:v(L)),ne++,ne>ce)throw new Error("Maximum number of iterations reached, try changing options")}return{t:ie,y:Ie}}}function m(A,N,C,T){var R=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],U=[null,1/2,3/4,1],F=[2/9,1/3,4/9,0],B=[7/24,1/4,1/3,1/8],D={a:R,c:U,b:F,bp:B};return y(D)(A,N,C,T)}function S(A,N,C,T){var R=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],U=[null,1/5,3/10,4/5,8/9,1,1],F=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],B=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],D={a:R,c:U,b:F,bp:B};return y(D)(A,N,C,T)}function b(A,N,C,T){var R=T.method?T.method:"RK45",U={RK23:m,RK45:S};if(R.toUpperCase()in U){var F=Tfe({},T);return delete F.method,U[R.toUpperCase()](A,N,C,F)}else{var B=Object.keys(U).map(O=>'"'.concat(O,'"')),D="".concat(B.slice(0,-1).join(", ")," and ").concat(B.slice(-1));throw new Error('Unavailable method "'.concat(R,'". Available methods are ').concat(D))}}function g(A){return A?d:f}function w(A){var N=A?f:d;return function(C,T,R){var U=t(C,R);return N(U,T)?r(T,C):R}}function x(A){return Jt(A)||tn(A)}function M(A,N,C,T){var R=b(A,N.toArray(),C.toArray(),T);return{t:h(R.t),y:h(R.y)}}return e("solveODE",{"function, Array, Array, Object":b,"function, Matrix, Matrix, Object":M,"function, Array, Array":(A,N,C)=>b(A,N,C,{}),"function, Matrix, Matrix":(A,N,C)=>M(A,N,C,{}),"function, Array, number | BigNumber | Unit":(A,N,C)=>{var T=b(A,N,[C],{});return{t:T.t,y:T.y.map(R=>R[0])}},"function, Matrix, number | BigNumber | Unit":(A,N,C)=>{var T=b(A,N.toArray(),[C],{});return{t:h(T.t),y:h(T.y.map(R=>R[0]))}},"function, Array, number | BigNumber | Unit, Object":(A,N,C,T)=>{var R=b(A,N,[C],T);return{t:R.t,y:R.y.map(U=>U[0])}},"function, Matrix, number | BigNumber | Unit, Object":(A,N,C,T)=>{var R=b(A,N.toArray(),[C],T);return{t:h(R.t),y:h(R.y.map(U=>U[0]))}}})}),Rfe="erf",Ofe=["typed"],Ife=ae(Rfe,Ofe,n=>{var{typed:e}=n;return e("name",{number:function(a){var o=Math.abs(a);return o>=Ffe?vc(a):o<=kfe?vc(a)*t(o):o<=4?vc(a)*(1-r(o)):vc(a)*(1-i(o))},"Array | Matrix":e.referToSelf(s=>a=>cn(a,s))});function t(s){var a=s*s,o=$l[0][4]*a,l=a,u;for(u=0;u<3;u+=1)o=(o+$l[0][u])*a,l=(l+uh[0][u])*a;return s*(o+$l[0][3])/(l+uh[0][3])}function r(s){var a=$l[1][8]*s,o=s,l;for(l=0;l<7;l+=1)a=(a+$l[1][l])*s,o=(o+uh[1][l])*s;var u=(a+$l[1][7])/(o+uh[1][7]),c=parseInt(s*16)/16,f=(s-c)*(s+c);return Math.exp(-c*c)*Math.exp(-f)*u}function i(s){var a=1/(s*s),o=$l[2][5]*a,l=a,u;for(u=0;u<4;u+=1)o=(o+$l[2][u])*a,l=(l+uh[2][u])*a;var c=a*(o+$l[2][4])/(l+uh[2][4]);c=(Lfe-c)/s,a=parseInt(s*16)/16;var f=(s-a)*(s+a);return Math.exp(-a*a)*Math.exp(-f)*c}}),kfe=.46875,Lfe=.5641895835477563,$l=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],uh=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],Ffe=Math.pow(2,53),S8="zeta",Bfe=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],zfe=ae(S8,Bfe,n=>{var{typed:e,config:t,multiply:r,pow:i,divide:s,factorial:a,equal:o,smallerEq:l,isNegative:u,gamma:c,sin:f,subtract:d,add:h,Complex:p,BigNumber:v,pi:y}=n;return e(S8,{number:x=>m(x,M=>M,()=>20),BigNumber:x=>m(x,M=>new v(M),()=>Math.abs(Math.log10(t.epsilon))),Complex:S});function m(x,M,A){return o(x,0)?M(-.5):o(x,1)?M(NaN):isFinite(x)?b(x,M,A,N=>N):u(x)?M(NaN):M(1)}function S(x){return x.re===0&&x.im===0?new p(-.5):x.re===1?new p(NaN,NaN):x.re===1/0&&x.im===0?new p(1):x.im===1/0||x.re===-1/0?new p(NaN,NaN):b(x,M=>M,M=>Math.round(1.3*15+.9*Math.abs(M.im)),M=>M.re)}function b(x,M,A,N){var C=A(x);if(N(x)>-(C-1)/2)return w(x,M(C),M);var T=r(i(2,x),i(M(y),d(x,1)));return T=r(T,f(r(s(M(y),2),x))),T=r(T,c(d(1,x))),r(T,b(d(1,x),M,A,N))}function g(x,M){for(var A=x,N=x;l(N,M);N=h(N,1)){var C=s(r(a(h(M,d(N,1))),i(4,N)),r(a(d(M,N)),a(r(2,N))));A=h(A,C)}return r(M,A)}function w(x,M,A){for(var N=s(1,r(g(A(0),M),d(1,i(2,d(1,x))))),C=A(0),T=A(1);l(T,M);T=h(T,1))C=h(C,s(r((-1)**(T-1),g(T,M)),i(T,x)));return r(N,C)}}),_8="mode",Ufe=["typed","isNaN","isNumeric"],$fe=ae(_8,Ufe,n=>{var{typed:e,isNaN:t,isNumeric:r}=n;return e(_8,{"Array | Matrix":i,"...":function(a){return i(a)}});function i(s){s=wn(s.valueOf());var a=s.length;if(a===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},l=[],u=0,c=0;c<s.length;c++){var f=s[c];if(r(f)&&t(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in o||(o[f]=0),o[f]++,o[f]===u?l.push(f):o[f]>u&&(u=o[f],l=[f])}return l}});function As(n,e,t){var r;return String(n).includes("Unexpected type")?(r=arguments.length>2?" (type: "+$n(t)+", value: "+JSON.stringify(t)+")":" (type: "+n.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(n).includes("complex numbers")?(r=arguments.length>2?" (type: "+$n(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):n}var E8="prod",Vfe=["typed","config","multiplyScalar","numeric"],Hfe=ae(E8,Vfe,n=>{var{typed:e,config:t,multiplyScalar:r,numeric:i}=n;return e(E8,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(o,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return s(o)}});function s(a){var o;if(wu(a,function(l){try{o=o===void 0?l:r(o,l)}catch(u){throw As(u,"prod",l)}}),typeof o=="string"&&(o=i(o,t.number)),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),M8="format",Wfe=["typed"],Gfe=ae(M8,Wfe,n=>{var{typed:e}=n;return e(M8,{any:un,"any, Object | function | number | BigNumber":un})}),C8="bin",jfe=["typed","format"],qfe=ae(C8,jfe,n=>{var{typed:e,format:t}=n;return e(C8,{"number | BigNumber":function(i){return t(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"bin",wordSize:s})}})}),A8="oct",Xfe=["typed","format"],Yfe=ae(A8,Xfe,n=>{var{typed:e,format:t}=n;return e(A8,{"number | BigNumber":function(i){return t(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"oct",wordSize:s})}})}),T8="hex",Kfe=["typed","format"],Zfe=ae(T8,Kfe,n=>{var{typed:e,format:t}=n;return e(T8,{"number | BigNumber":function(i){return t(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"hex",wordSize:s})}})}),IG=/\$([\w.]+)/g,D8="print",Jfe=["typed"],kG=ae(D8,Jfe,n=>{var{typed:e}=n;return e(D8,{"string, Object | Array":N8,"string, Object | Array, number | Object":N8})});function N8(n,e,t){return n.replace(IG,function(r,i){var s=i.split("."),a=e[s.shift()];for(a!==void 0&&a.isMatrix&&(a=a.toArray());s.length&&a!==void 0;){var o=s.shift();a=o?a[o]:a+"."}return a!==void 0?Ai(a)?a:un(a,t):r})}var P8="to",Qfe=["typed","matrix","concat"],ede=ae(P8,Qfe,n=>{var{typed:e,matrix:t,concat:r}=n,i=qn({typed:e,matrix:t,concat:r});return e(P8,{"Unit, Unit | string":(s,a)=>s.to(a)},i({Ds:!0}))}),R8="isPrime",tde=["typed"],nde=ae(R8,tde,n=>{var{typed:e}=n;return e(R8,{number:function(r){if(r*0!==0)return!1;if(r<=3)return r>1;if(r%2===0||r%3===0)return!1;for(var i=5;i*i<=r;i+=6)if(r%i===0||r%(i+2)===0)return!1;return!0},BigNumber:function(r){if(r.toNumber()*0!==0)return!1;if(r.lte(3))return r.gt(1);if(r.mod(2).eq(0)||r.mod(3).eq(0))return!1;if(r.lt(Math.pow(2,32))){for(var i=r.toNumber(),s=5;s*s<=i;s+=6)if(i%s===0||i%(s+2)===0)return!1;return!0}function a(S,b,g){for(var w=1;!b.eq(0);)b.mod(2).eq(0)?(b=b.div(2),S=S.mul(S).mod(g)):(b=b.sub(1),w=S.mul(w).mod(g));return w}var o=r.constructor.clone({precision:r.toFixed(0).length*2});r=new o(r);for(var l=0,u=r.sub(1);u.mod(2).eq(0);)u=u.div(2),l+=1;var c=null;if(r.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(S=>S<r);else{var f=Math.min(r.toNumber()-2,Math.floor(2*Math.pow(r.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var h=0;h<c.length;h+=1){var p=c[h],v=a(r.sub(r).add(p),u,r);if(!v.eq(1)){for(var y=0,m=v;!m.eq(r.sub(1));y+=1,m=m.mul(m).mod(r))if(y===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),rde="numeric",ide=["number","?bignumber","?fraction"],sde=ae(rde,ide,n=>{var{number:e,bignumber:t,fraction:r}=n,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:a=>e(a),BigNumber:t?a=>t(a):bP,Fraction:r?a=>r(a):TG};return function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=$n(o);if(!(c in i))throw new TypeError("Cannot convert "+o+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in s))throw new TypeError("Cannot convert "+o+' to type "'+l+'"; valid output types are '+Object.keys(s).join(", "));return l===c?o:s[l](o)}}),O8="divideScalar",ade=["typed","numeric"],ode=ae(O8,ade,n=>{var{typed:e,numeric:t}=n;return e(O8,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),I8="pow",lde=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],ude=ae(I8,lde,n=>{var{typed:e,config:t,identity:r,multiply:i,matrix:s,inv:a,number:o,fraction:l,Complex:u}=n;return e(I8,{"number, number":c,"Complex, Complex":function(p,v){return p.pow(v)},"BigNumber, BigNumber":function(p,v){return v.isInteger()||p>=0||t.predictable?p.pow(v):new u(p.toNumber(),0).pow(v.toNumber(),0)},"Fraction, Fraction":function(p,v){var y=p.pow(v);if(y!=null)return y;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),v.valueOf())},"Array, number":f,"Array, BigNumber":function(p,v){return f(p,v.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(p,v){return d(p,v.toNumber())},"Unit, number | BigNumber":function(p,v){return p.pow(v)}});function c(h,p){if(t.predictable&&!Ot(p)&&h<0)try{var v=l(p),y=o(v);if((p===y||Math.abs((p-y)/p)<1e-14)&&v.d%2===1)return(v.n%2===0?1:-1)*Math.pow(-h,p)}catch{}return t.predictable&&(h<-1&&p===1/0||h>-1&&h<0&&p===-1/0)?NaN:Ot(p)||h>=0||t.predictable?BW(h,p):h*h<1&&p===1/0||h*h>1&&p===-1/0?0:new u(h,0).pow(p,0)}function f(h,p){if(!Ot(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var v=nn(h);if(v.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+v.length+" dimensions)");if(v[0]!==v[1])throw new Error("For A^b, A must be square (size is "+v[0]+"x"+v[1]+")");if(p<0)try{return f(a(h),-p)}catch(S){throw S.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):S}for(var y=r(v[0]).valueOf(),m=h;p>=1;)(p&1)===1&&(y=i(m,y)),p>>=1,m=i(m,m);return y}function d(h,p){return s(f(h.valueOf(),p))}}),ch="Number of decimals in function round must be an integer",k8="round",cde=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],fde=ae(k8,cde,n=>{var{typed:e,config:t,matrix:r,equalScalar:i,zeros:s,BigNumber:a,DenseMatrix:o}=n,l=Li({typed:e,equalScalar:i}),u=li({typed:e,DenseMatrix:o}),c=Oo({typed:e});function f(d){return Math.abs(iy(d).exponent)}return e(k8,{number:function(h){var p=vg(h,f(t.epsilon)),v=Cs(h,p,t.epsilon)?p:h;return vg(v)},"number, number":function(h,p){var v=f(t.epsilon);if(p>=v)return vg(h,p);var y=vg(h,v),m=Cs(h,y,t.epsilon)?y:h;return vg(m,p)},"number, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(ch);return new a(h).toDecimalPlaces(p.toNumber())},Complex:function(h){return h.round()},"Complex, number":function(h,p){if(p%1)throw new TypeError(ch);return h.round(p)},"Complex, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(ch);var v=p.toNumber();return h.round(v)},BigNumber:function(h){var p=new a(h).toDecimalPlaces(f(t.epsilon)),v=to(h,p,t.epsilon)?p:h;return v.toDecimalPlaces(0)},"BigNumber, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(ch);var v=f(t.epsilon);if(p>=v)return h.toDecimalPlaces(p.toNumber());var y=h.toDecimalPlaces(v),m=to(h,y,t.epsilon)?y:h;return m.toDecimalPlaces(p.toNumber())},Fraction:function(h){return h.round()},"Fraction, number":function(h,p){if(p%1)throw new TypeError(ch);return h.round(p)},"Fraction, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(ch);return h.round(p.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,p,v){var y=h.toNumeric(v);return v.multiply(d(y,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,p,v)=>d(h,p.toNumber(),v)),"Unit, Unit":e.referToSelf(d=>(h,p)=>d(h,0,p)),"Array | Matrix, number, Unit":e.referToSelf(d=>(h,p,v)=>cn(h,y=>d(y,p,v))),"Array | Matrix, BigNumber, Unit":e.referToSelf(d=>(h,p,v)=>d(h,p.toNumber(),v)),"Array | Matrix, Unit":e.referToSelf(d=>(h,p)=>d(h,0,p)),"Array | Matrix":e.referToSelf(d=>h=>cn(h,d)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,p)=>l(h,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,p)=>c(h,p,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(h,p)=>c(r(h),p,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(h,p)=>i(h,0)?s(p.size(),p.storage()):u(p,h,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(h,p)=>i(h,0)?s(p.size(),p.storage()):c(p,h,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(h,p)=>c(r(p),h,d,!0).valueOf())})}),L8="log",dde=["config","typed","divideScalar","Complex"],hde=ae(L8,dde,n=>{var{typed:e,config:t,divideScalar:r,Complex:i}=n;return e(L8,{number:function(a){return a>=0||t.predictable?doe(a):new i(a,0).log()},Complex:function(a){return a.log()},BigNumber:function(a){return!a.isNegative()||t.predictable?a.ln():new i(a.toNumber(),0).log()},"any, any":e.referToSelf(s=>(a,o)=>r(s(a),s(o)))})}),F8="log1p",pde=["typed","config","divideScalar","log","Complex"],mde=ae(F8,pde,n=>{var{typed:e,config:t,divideScalar:r,log:i,Complex:s}=n;return e(F8,{number:function(l){return l>=-1||t.predictable?fse(l):a(new s(l,0))},Complex:a,BigNumber:function(l){var u=l.plus(1);return!u.isNegative()||t.predictable?u.ln():a(new s(l.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>l=>cn(l,o)),"any, any":e.referToSelf(o=>(l,u)=>r(o(l),i(u)))});function a(o){var l=o.re+1;return new s(Math.log(Math.sqrt(l*l+o.im*o.im)),Math.atan2(o.im,l))}}),B8="nthRoots",gde=["config","typed","divideScalar","Complex"],vde=ae(B8,gde,n=>{var{typed:e,config:t,divideScalar:r,Complex:i}=n,s=[function(l){return new i(l,0)},function(l){return new i(0,l)},function(l){return new i(-l,0)},function(l){return new i(0,-l)}];function a(o,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new i(0,0)];var u=typeof o=="number",c;(u||o.re===0||o.im===0)&&(u?c=2*+(o<0):o.im===0?c=2*+(o.re<0):c=2*+(o.im<0)+1);for(var f=o.arg(),d=o.abs(),h=[],p=Math.pow(d,1/l),v=0;v<l;v++){var y=(c+4*v)/l;if(y===Math.round(y)){h.push(s[y%4](p));continue}h.push(new i({r:p,phi:(f+2*Math.PI*v)/l}))}return h}return e(B8,{Complex:function(l){return a(l,2)},"Complex, number":a})}),z8="dotPow",yde=["typed","equalScalar","matrix","pow","DenseMatrix","concat"],xde=ae(z8,yde,n=>{var{typed:e,equalScalar:t,matrix:r,pow:i,DenseMatrix:s,concat:a}=n,o=Ns({typed:e}),l=Al({typed:e,DenseMatrix:s}),u=Li({typed:e,equalScalar:t}),c=li({typed:e,DenseMatrix:s}),f=qn({typed:e,matrix:r,concat:a}),d={};for(var h in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,h)&&!h.includes("Matrix")&&!h.includes("Array")&&(d[h]=i.signatures[h]);var p=e(d);return e(z8,f({elop:p,SS:l,DS:o,Ss:u,sS:c}))}),U8="dotDivide",bde=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],wde=ae(U8,bde,n=>{var{typed:e,matrix:t,equalScalar:r,divideScalar:i,DenseMatrix:s,concat:a}=n,o=Io({typed:e,equalScalar:r}),l=Ns({typed:e}),u=Al({typed:e,DenseMatrix:s}),c=Li({typed:e,equalScalar:r}),f=li({typed:e,DenseMatrix:s}),d=qn({typed:e,matrix:t,concat:a});return e(U8,d({elop:i,SS:u,DS:l,SD:o,Ss:c,sS:f}))});function ay(n){var{DenseMatrix:e}=n;return function(r,i,s){var a=r.size();if(a.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+un(a)+")");var o=a[0],l=a[1];if(o!==l)throw new RangeError("Matrix must be square (size: "+un(a)+")");var u=[];if(Ut(i)){var c=i.size(),f=i._data;if(c.length===1){if(c[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<o;d++)u[d]=[f[d]];return new e({data:u,size:[o,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==o||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Yv(i)){if(s){u=[];for(var h=0;h<o;h++)u[h]=[f[h][0]];return new e({data:u,size:[o,1],datatype:i._datatype})}return i}if(gc(i)){for(var p=0;p<o;p++)u[p]=[0];for(var v=i._values,y=i._index,m=i._ptr,S=m[1],b=m[0];b<S;b++){var g=y[b];u[g][0]=v[b]}return new e({data:u,size:[o,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(_n(i)){var w=nn(i);if(w.length===1){if(w[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var x=0;x<o;x++)u[x]=[i[x]];return new e({data:u,size:[o,1]})}if(w.length===2){if(w[0]!==o||w[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var M=0;M<o;M++)u[M]=[i[M][0]];return new e({data:u,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var $8="lsolve",Sde=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],_de=ae($8,Sde,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=n,l=ay({DenseMatrix:o});return e($8,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var p=t(d),v=u(p,h);return v.valueOf()}});function u(f,d){d=l(f,d,!0);for(var h=d._data,p=f._size[0],v=f._size[1],y=[],m=f._data,S=0;S<v;S++){var b=h[S][0]||0,g=void 0;if(a(b,0))g=0;else{var w=m[S][S];if(a(w,0))throw new Error("Linear system cannot be solved since matrix is singular");g=r(b,w);for(var x=S+1;x<p;x++)h[x]=[s(h[x][0]||0,i(g,m[x][S]))]}y[S]=[g]}return new o({data:y,size:[p,1]})}function c(f,d){d=l(f,d,!0);for(var h=d._data,p=f._size[0],v=f._size[1],y=f._values,m=f._index,S=f._ptr,b=[],g=0;g<v;g++){var w=h[g][0]||0;if(a(w,0))b[g]=[0];else{for(var x=0,M=[],A=[],N=S[g],C=S[g+1],T=N;T<C;T++){var R=m[T];R===g?x=y[T]:R>g&&(M.push(y[T]),A.push(R))}if(a(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var U=r(w,x),F=0,B=A.length;F<B;F++){var D=A[F];h[D]=[s(h[D][0]||0,i(U,M[F]))]}b[g]=[U]}}return new o({data:b,size:[p,1]})}}),V8="usolve",Ede=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Mde=ae(V8,Ede,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=n,l=ay({DenseMatrix:o});return e(V8,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var p=t(d),v=u(p,h);return v.valueOf()}});function u(f,d){d=l(f,d,!0);for(var h=d._data,p=f._size[0],v=f._size[1],y=[],m=f._data,S=v-1;S>=0;S--){var b=h[S][0]||0,g=void 0;if(a(b,0))g=0;else{var w=m[S][S];if(a(w,0))throw new Error("Linear system cannot be solved since matrix is singular");g=r(b,w);for(var x=S-1;x>=0;x--)h[x]=[s(h[x][0]||0,i(g,m[x][S]))]}y[S]=[g]}return new o({data:y,size:[p,1]})}function c(f,d){d=l(f,d,!0);for(var h=d._data,p=f._size[0],v=f._size[1],y=f._values,m=f._index,S=f._ptr,b=[],g=v-1;g>=0;g--){var w=h[g][0]||0;if(a(w,0))b[g]=[0];else{for(var x=0,M=[],A=[],N=S[g],C=S[g+1],T=C-1;T>=N;T--){var R=m[T];R===g?x=y[T]:R<g&&(M.push(y[T]),A.push(R))}if(a(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var U=r(w,x),F=0,B=A.length;F<B;F++){var D=A[F];h[D]=[s(h[D][0],i(U,M[F]))]}b[g]=[U]}}return new o({data:b,size:[p,1]})}}),H8="lsolveAll",Cde=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Ade=ae(H8,Cde,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=n,l=ay({DenseMatrix:o});return e(H8,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var p=t(d),v=u(p,h);return v.map(y=>y.valueOf())}});function u(f,d){for(var h=[l(f,d,!0)._data.map(A=>A[0])],p=f._data,v=f._size[0],y=f._size[1],m=0;m<y;m++)for(var S=h.length,b=0;b<S;b++){var g=h[b];if(a(p[m][m],0))if(a(g[m],0)){if(b===0){var x=[...g];x[m]=1;for(var M=m+1;M<y;M++)x[M]=s(x[M],p[M][m]);h.push(x)}}else{if(b===0)return[];h.splice(b,1),b-=1,S-=1}else{g[m]=r(g[m],p[m][m]);for(var w=m+1;w<y;w++)g[w]=s(g[w],i(g[m],p[w][m]))}}return h.map(A=>new o({data:A.map(N=>[N]),size:[v,1]}))}function c(f,d){for(var h=[l(f,d,!0)._data.map(Z=>Z[0])],p=f._size[0],v=f._size[1],y=f._values,m=f._index,S=f._ptr,b=0;b<v;b++)for(var g=h.length,w=0;w<g;w++){for(var x=h[w],M=[],A=[],N=S[b],C=S[b+1],T=0,R=N;R<C;R++){var U=m[R];U===b?T=y[R]:U>b&&(M.push(y[R]),A.push(U))}if(a(T,0))if(a(x[b],0)){if(w===0){var O=[...x];O[b]=1;for(var $=0,L=A.length;$<L;$++){var X=A[$];O[X]=s(O[X],M[$])}h.push(O)}}else{if(w===0)return[];h.splice(w,1),w-=1,g-=1}else{x[b]=r(x[b],T);for(var F=0,B=A.length;F<B;F++){var D=A[F];x[D]=s(x[D],i(x[b],M[F]))}}}return h.map(Z=>new o({data:Z.map(Q=>[Q]),size:[p,1]}))}}),W8="usolveAll",Tde=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Dde=ae(W8,Tde,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=n,l=ay({DenseMatrix:o});return e(W8,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var p=t(d),v=u(p,h);return v.map(y=>y.valueOf())}});function u(f,d){for(var h=[l(f,d,!0)._data.map(A=>A[0])],p=f._data,v=f._size[0],y=f._size[1],m=y-1;m>=0;m--)for(var S=h.length,b=0;b<S;b++){var g=h[b];if(a(p[m][m],0))if(a(g[m],0)){if(b===0){var x=[...g];x[m]=1;for(var M=m-1;M>=0;M--)x[M]=s(x[M],p[M][m]);h.push(x)}}else{if(b===0)return[];h.splice(b,1),b-=1,S-=1}else{g[m]=r(g[m],p[m][m]);for(var w=m-1;w>=0;w--)g[w]=s(g[w],i(g[m],p[w][m]))}}return h.map(A=>new o({data:A.map(N=>[N]),size:[v,1]}))}function c(f,d){for(var h=[l(f,d,!0)._data.map(Z=>Z[0])],p=f._size[0],v=f._size[1],y=f._values,m=f._index,S=f._ptr,b=v-1;b>=0;b--)for(var g=h.length,w=0;w<g;w++){for(var x=h[w],M=[],A=[],N=S[b],C=S[b+1],T=0,R=C-1;R>=N;R--){var U=m[R];U===b?T=y[R]:U<b&&(M.push(y[R]),A.push(U))}if(a(T,0))if(a(x[b],0)){if(w===0){var O=[...x];O[b]=1;for(var $=0,L=A.length;$<L;$++){var X=A[$];O[X]=s(O[X],M[$])}h.push(O)}}else{if(w===0)return[];h.splice(w,1),w-=1,g-=1}else{x[b]=r(x[b],T);for(var F=0,B=A.length;F<B;F++){var D=A[F];x[D]=s(x[D],i(x[b],M[F]))}}}return h.map(Z=>new o({data:Z.map(Q=>[Q]),size:[p,1]}))}}),Nde="matAlgo08xS0Sid",Pde=["typed","equalScalar"],wP=ae(Nde,Pde,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,h=s._index,p=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new on(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!o||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var m=c[0],S=c[1],b,g=t,w=0,x=a;typeof f=="string"&&f===y&&f!=="mixed"&&(b=f,g=e.find(t,[b,b]),w=e.convert(0,b),x=e.find(a,[b,b]));for(var M=[],A=[],N=[],C=[],T=[],R,U,F,B,D=0;D<S;D++){N[D]=A.length;var O=D+1;for(U=u[D],F=u[D+1],R=U;R<F;R++)B=l[R],T[B]=O,C[B]=o[R],A.push(B);for(U=p[D],F=p[D+1],R=U;R<F;R++)B=h[R],T[B]===O&&(C[B]=x(C[B],d[R]));for(R=N[D];R<A.length;){B=A[R];var $=C[B];g($,w)?A.splice(R,1):(M.push($),R++)}}return N[S]=A.length,i.createSparseMatrix({values:M,index:A,ptr:N,size:[m,S],datatype:f===i._datatype&&y===s._datatype?b:void 0})}}),SP=ae("useMatrixForArrayScalar",["typed","matrix"],n=>{var{typed:e,matrix:t}=n;return{"Array, number":e.referTo("DenseMatrix, number",r=>(i,s)=>r(t(i),s).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",r=>(i,s)=>r(t(i),s).valueOf()),"number, Array":e.referTo("number, DenseMatrix",r=>(i,s)=>r(i,t(s)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",r=>(i,s)=>r(i,t(s)).valueOf())}}),G8="leftShift",Rde=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],Ode=ae(G8,Rde,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,DenseMatrix:s,concat:a}=n,o=af({typed:e}),l=Io({typed:e,equalScalar:r}),u=wP({typed:e,equalScalar:r}),c=Bd({typed:e,DenseMatrix:s}),f=Li({typed:e,equalScalar:r}),d=Oo({typed:e}),h=qn({typed:e,matrix:t,concat:a}),p=SP({typed:e,matrix:t});return e(G8,{"number, number":HW,"BigNumber, BigNumber":ece,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,m)=>r(m,0)?y.clone():f(y,m,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,m)=>r(m,0)?y.clone():d(y,m,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,m)=>r(y,0)?i(m.size(),m.storage()):c(m,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,m)=>r(y,0)?i(m.size(),m.storage()):d(m,y,v,!0))},p,h({SS:u,DS:o,SD:l}))}),j8="rightArithShift",Ide=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],kde=ae(j8,Ide,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,DenseMatrix:s,concat:a}=n,o=af({typed:e}),l=Io({typed:e,equalScalar:r}),u=wP({typed:e,equalScalar:r}),c=Bd({typed:e,DenseMatrix:s}),f=Li({typed:e,equalScalar:r}),d=Oo({typed:e}),h=qn({typed:e,matrix:t,concat:a}),p=SP({typed:e,matrix:t});return e(j8,{"number, number":WW,"BigNumber, BigNumber":tce,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,m)=>r(m,0)?y.clone():f(y,m,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,m)=>r(m,0)?y.clone():d(y,m,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,m)=>r(y,0)?i(m.size(),m.storage()):c(m,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,m)=>r(y,0)?i(m.size(),m.storage()):d(m,y,v,!0))},p,h({SS:u,DS:o,SD:l}))}),q8="rightLogShift",Lde=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],Fde=ae(q8,Lde,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,DenseMatrix:s,concat:a}=n,o=af({typed:e}),l=Io({typed:e,equalScalar:r}),u=wP({typed:e,equalScalar:r}),c=Bd({typed:e,DenseMatrix:s}),f=Li({typed:e,equalScalar:r}),d=Oo({typed:e}),h=qn({typed:e,matrix:t,concat:a}),p=SP({typed:e,matrix:t});return e(q8,{"number, number":GW,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,m)=>r(m,0)?y.clone():f(y,m,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,m)=>r(m,0)?y.clone():d(y,m,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,m)=>r(y,0)?i(m.size(),m.storage()):c(m,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,m)=>r(y,0)?i(m.size(),m.storage()):d(m,y,v,!0))},p,h({SS:u,DS:o,SD:l}))}),X8="and",Bde=["typed","matrix","equalScalar","zeros","not","concat"],LG=ae(X8,Bde,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,not:s,concat:a}=n,o=Io({typed:e,equalScalar:r}),l=G_({typed:e,equalScalar:r}),u=Li({typed:e,equalScalar:r}),c=Oo({typed:e}),f=qn({typed:e,matrix:t,concat:a});return e(X8,{"number, number":KW,"Complex, Complex":function(h,p){return(h.re!==0||h.im!==0)&&(p.re!==0||p.im!==0)},"BigNumber, BigNumber":function(h,p){return!h.isZero()&&!p.isZero()&&!h.isNaN()&&!p.isNaN()},"Unit, Unit":e.referToSelf(d=>(h,p)=>d(h.value||0,p.value||0)),"SparseMatrix, any":e.referToSelf(d=>(h,p)=>s(p)?i(h.size(),h.storage()):u(h,p,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(h,p)=>s(p)?i(h.size(),h.storage()):c(h,p,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(h,p)=>s(h)?i(h.size(),h.storage()):u(p,h,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(h,p)=>s(h)?i(h.size(),h.storage()):c(p,h,d,!0)),"Array, any":e.referToSelf(d=>(h,p)=>d(t(h),p).valueOf()),"any, Array":e.referToSelf(d=>(h,p)=>d(h,t(p)).valueOf())},f({SS:l,DS:o}))}),pS="compare",zde=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],Ude=ae(pS,zde,n=>{var{typed:e,config:t,equalScalar:r,matrix:i,BigNumber:s,Fraction:a,DenseMatrix:o,concat:l}=n,u=Ns({typed:e}),c=W_({typed:e,equalScalar:r}),f=li({typed:e,DenseMatrix:o}),d=qn({typed:e,matrix:i,concat:l}),h=Sm({typed:e});return e(pS,$de({typed:e,config:t}),{"boolean, boolean":function(v,y){return v===y?0:v>y?1:-1},"BigNumber, BigNumber":function(v,y){return to(v,y,t.epsilon)?new s(0):new s(v.cmp(y))},"Fraction, Fraction":function(v,y){return new a(v.compare(y))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,d({SS:c,DS:u,Ss:f}))}),$de=ae(pS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(pS,{"number, number":function(i,s){return Cs(i,s,t.epsilon)?0:i>s?1:-1}})}),Vde=function n(e,t){var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,a=/^0x[0-9a-f]+$/i,o=/^0/,l=function(b){return n.insensitive&&(""+b).toLowerCase()||""+b},u=l(e).replace(i,"")||"",c=l(t).replace(i,"")||"",f=u.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(u.match(a),16)||f.length!==1&&u.match(s)&&Date.parse(u),p=parseInt(c.match(a),16)||h&&c.match(s)&&Date.parse(c)||null,v,y;if(p){if(h<p)return-1;if(h>p)return 1}for(var m=0,S=Math.max(f.length,d.length);m<S;m++){if(v=!(f[m]||"").match(o)&&parseFloat(f[m])||f[m]||0,y=!(d[m]||"").match(o)&&parseFloat(d[m])||d[m]||0,isNaN(v)!==isNaN(y))return isNaN(v)?1:-1;if(typeof v!=typeof y&&(v+="",y+=""),v<y)return-1;if(v>y)return 1}return 0};const fh=so(Vde);var Y8="compareNatural",Hde=["typed","compare"],Wde=ae(Y8,Hde,n=>{var{typed:e,compare:t}=n,r=t.signatures["boolean,boolean"];return e(Y8,{"any, any":i});function i(l,u){var c=$n(l),f=$n(u),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=t(l,u),d.toString()!=="0"?d>0?1:-1:fh(c,f);var h=["Array","DenseMatrix","SparseMatrix"];if(h.includes(c)||h.includes(f))return d=s(i,l,u),d!==0?d:fh(c,f);if(c!==f)return fh(c,f);if(c==="Complex")return Gde(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):a(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return r(l,u);if(c==="string")return fh(l,u);if(c==="Object")return o(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function s(l,u,c){return gc(u)&&gc(c)?a(l,u.toJSON().values,c.toJSON().values):gc(u)?s(l,u.toArray(),c):gc(c)?s(l,u,c.toArray()):Yv(u)?s(l,u.toJSON().data,c):Yv(c)?s(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?a(l,u,c):s(l,u,[c]):s(l,[u],c)}function a(l,u,c){for(var f=0,d=Math.min(u.length,c.length);f<d;f++){var h=l(u[f],c[f]);if(h!==0)return h}return u.length>c.length?1:u.length<c.length?-1:0}function o(l,u,c){var f=Object.keys(u),d=Object.keys(c);f.sort(fh),d.sort(fh);var h=a(l,f,d);if(h!==0)return h;for(var p=0;p<f.length;p++){var v=l(u[f[p]],c[d[p]]);if(v!==0)return v}return 0}});function Gde(n,e){return n.re>e.re?1:n.re<e.re?-1:n.im>e.im?1:n.im<e.im?-1:0}var K8="compareText",jde=["typed","matrix","concat"];IT.signature="any, any";var qde=ae(K8,jde,n=>{var{typed:e,matrix:t,concat:r}=n,i=qn({typed:e,matrix:t,concat:r});return e(K8,IT,i({elop:IT,Ds:!0}))}),mS="equal",Xde=["typed","matrix","equalScalar","DenseMatrix","concat"],Yde=ae(mS,Xde,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s}=n,a=Ns({typed:e}),o=Al({typed:e,DenseMatrix:i}),l=li({typed:e,DenseMatrix:i}),u=qn({typed:e,matrix:t,concat:s});return e(mS,Kde({typed:e,equalScalar:r}),u({elop:r,SS:o,DS:a,Ss:l}))}),Kde=ae(mS,["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return e(mS,{"any, any":function(i,s){return i===null?s===null:s===null?i===null:i===void 0?s===void 0:s===void 0?i===void 0:t(i,s)}})}),Z8="equalText",Zde=["typed","compareText","isZero"],Jde=ae(Z8,Zde,n=>{var{typed:e,compareText:t,isZero:r}=n;return e(Z8,{"any, any":function(s,a){return r(t(s,a))}})}),gS="smaller",Qde=["typed","config","matrix","DenseMatrix","concat"],ehe=ae(gS,Qde,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:s}=n,a=Ns({typed:e}),o=Al({typed:e,DenseMatrix:i}),l=li({typed:e,DenseMatrix:i}),u=qn({typed:e,matrix:r,concat:s}),c=Sm({typed:e});return e(gS,the({typed:e,config:t}),{"boolean, boolean":(f,d)=>f<d,"BigNumber, BigNumber":function(d,h){return d.lt(h)&&!to(d,h,t.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)===-1,"Complex, Complex":function(d,h){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:o,DS:a,Ss:l}))}),the=ae(gS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(gS,{"number, number":function(i,s){return i<s&&!Cs(i,s,t.epsilon)}})}),vS="smallerEq",nhe=["typed","config","matrix","DenseMatrix","concat"],rhe=ae(vS,nhe,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:s}=n,a=Ns({typed:e}),o=Al({typed:e,DenseMatrix:i}),l=li({typed:e,DenseMatrix:i}),u=qn({typed:e,matrix:r,concat:s}),c=Sm({typed:e});return e(vS,ihe({typed:e,config:t}),{"boolean, boolean":(f,d)=>f<=d,"BigNumber, BigNumber":function(d,h){return d.lte(h)||to(d,h,t.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:o,DS:a,Ss:l}))}),ihe=ae(vS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(vS,{"number, number":function(i,s){return i<=s||Cs(i,s,t.epsilon)}})}),yS="larger",she=["typed","config","matrix","DenseMatrix","concat"],ahe=ae(yS,she,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:s}=n,a=Ns({typed:e}),o=Al({typed:e,DenseMatrix:i}),l=li({typed:e,DenseMatrix:i}),u=qn({typed:e,matrix:r,concat:s}),c=Sm({typed:e});return e(yS,ohe({typed:e,config:t}),{"boolean, boolean":(f,d)=>f>d,"BigNumber, BigNumber":function(d,h){return d.gt(h)&&!to(d,h,t.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:o,DS:a,Ss:l}))}),ohe=ae(yS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(yS,{"number, number":function(i,s){return i>s&&!Cs(i,s,t.epsilon)}})}),xS="largerEq",lhe=["typed","config","matrix","DenseMatrix","concat"],uhe=ae(xS,lhe,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:s}=n,a=Ns({typed:e}),o=Al({typed:e,DenseMatrix:i}),l=li({typed:e,DenseMatrix:i}),u=qn({typed:e,matrix:r,concat:s}),c=Sm({typed:e});return e(xS,che({typed:e,config:t}),{"boolean, boolean":(f,d)=>f>=d,"BigNumber, BigNumber":function(d,h){return d.gte(h)||to(d,h,t.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:o,DS:a,Ss:l}))}),che=ae(xS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(xS,{"number, number":function(i,s){return i>=s||Cs(i,s,t.epsilon)}})}),J8="deepEqual",fhe=["typed","equal"],dhe=ae(J8,fhe,n=>{var{typed:e,equal:t}=n;return e(J8,{"any, any":function(s,a){return r(s.valueOf(),a.valueOf())}});function r(i,s){if(Array.isArray(i))if(Array.isArray(s)){var a=i.length;if(a!==s.length)return!1;for(var o=0;o<a;o++)if(!r(i[o],s[o]))return!1;return!0}else return!1;else return Array.isArray(s)?!1:t(i,s)}}),bS="unequal",hhe=["typed","config","equalScalar","matrix","DenseMatrix","concat"],phe=ae(bS,hhe,n=>{var{typed:e,config:t,equalScalar:r,matrix:i,DenseMatrix:s,concat:a}=n,o=Ns({typed:e}),l=Al({typed:e,DenseMatrix:s}),u=li({typed:e,DenseMatrix:s}),c=qn({typed:e,matrix:i,concat:a});return e(bS,mhe({typed:e,equalScalar:r}),c({elop:f,SS:l,DS:o,Ss:u}));function f(d,h){return!r(d,h)}}),mhe=ae(bS,["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return e(bS,{"any, any":function(i,s){return i===null?s!==null:s===null?i!==null:i===void 0?s!==void 0:s===void 0?i!==void 0:!t(i,s)}})}),Q8="partitionSelect",ghe=["typed","isNumeric","isNaN","compare"],vhe=ae(Q8,ghe,n=>{var{typed:e,isNumeric:t,isNaN:r,compare:i}=n,s=i,a=(u,c)=>-i(u,c);return e(Q8,{"Array | Matrix, number":function(c,f){return o(c,f,s)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return o(c,f,s);if(d==="desc")return o(c,f,a);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(u,c,f){if(!Ot(c)||c<0)throw new Error("k must be a non-negative integer");if(Ut(u)){var d=u.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,f)}if(Array.isArray(u))return l(u,c,f)}function l(u,c,f){if(c>=u.length)throw new Error("k out of bounds");for(var d=0;d<u.length;d++)if(t(u[d])&&r(u[d]))return u[d];for(var h=0,p=u.length-1;h<p;){for(var v=h,y=p,m=u[Math.floor(Math.random()*(p-h+1))+h];v<y;)if(f(u[v],m)>=0){var S=u[y];u[y]=u[v],u[v]=S,--y}else++v;f(u[v],m)>0&&--v,c<=v?p=v:h=v+1}return u[c]}}),e4="sort",yhe=["typed","matrix","compare","compareNatural"],xhe=ae(e4,yhe,n=>{var{typed:e,matrix:t,compare:r,compareNatural:i}=n,s=r,a=(c,f)=>-r(c,f);return e(e4,{Array:function(f){return l(f),f.sort(s)},Matrix:function(f){return u(f),t(f.toArray().sort(s),f.storage())},"Array, function":function(f,d){return l(f),f.sort(d)},"Matrix, function":function(f,d){return u(f),t(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return l(f),f.sort(o(d))},"Matrix, string":function(f,d){return u(f),t(f.toArray().sort(o(d)),f.storage())}});function o(c){if(c==="asc")return s;if(c==="desc")return a;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(nn(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),t4="max",bhe=["typed","config","numeric","larger"],FG=ae(t4,bhe,n=>{var{typed:e,config:t,numeric:r,larger:i}=n;return e(t4,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(l,u){return V_(l,u.valueOf(),s)},"...":function(l){if(xm(l))throw new TypeError("Scalar values expected in function max");return a(l)}});function s(o,l){try{return i(o,l)?o:l}catch(u){throw As(u,"max",l)}}function a(o){var l;if(wu(o,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw As(c,"max",u)}}),l===void 0)throw new Error("Cannot calculate max of an empty array");return typeof l=="string"&&(l=r(l,t.number)),l}}),n4="min",whe=["typed","config","numeric","smaller"],BG=ae(n4,whe,n=>{var{typed:e,config:t,numeric:r,smaller:i}=n;return e(n4,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(l,u){return V_(l,u.valueOf(),s)},"...":function(l){if(xm(l))throw new TypeError("Scalar values expected in function min");return a(l)}});function s(o,l){try{return i(o,l)?o:l}catch(u){throw As(u,"min",l)}}function a(o){var l;if(wu(o,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw As(c,"min",u)}}),l===void 0)throw new Error("Cannot calculate min of an empty array");return typeof l=="string"&&(l=r(l,t.number)),l}}),She="ImmutableDenseMatrix",_he=["smaller","DenseMatrix"],Ehe=ae(She,_he,n=>{var{smaller:e,DenseMatrix:t}=n;function r(i,s){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(s&&!Ai(s))throw new Error("Invalid datatype: "+s);if(Ut(i)||_n(i)){var a=new t(i,s);this._data=a._data,this._size=a._size,this._datatype=a._datatype,this._min=null,this._max=null}else if(i&&_n(i.data)&&_n(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+$n(i)+")");this._data=[],this._size=[0],this._datatype=s,this._min=null,this._max=null}}return r.prototype=new t,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(i){switch(arguments.length){case 1:{var s=t.prototype.subset.call(this,i);return Ut(s)?new r({data:s._data,size:s._size,datatype:s._datatype}):s}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:Xt(this._data),size:Xt(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(i){return new r(i)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(s){(i===null||e(s,i))&&(i=s)}),this._min=i!==null?i:void 0}return this._min},r.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(s){(i===null||e(i,s))&&(i=s)}),this._max=i!==null?i:void 0}return this._max},r},{isClass:!0}),Mhe="Index",Che=["ImmutableDenseMatrix","getMatrixDataType"],Ahe=ae(Mhe,Che,n=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=n;function r(s){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var a=0,o=arguments.length;a<o;a++){var l=arguments[a],u=_n(l),c=Ut(l),f=null;if(k_(l))this._dimensions.push(l),this._isScalar=!1;else if(u||c){var d=void 0;t(l)==="boolean"?(u&&(d=i(r4(l).valueOf())),c&&(d=i(r4(l._data).valueOf())),f=l.valueOf().length):d=i(l.valueOf()),this._dimensions.push(d);var h=d.size();(h.length!==1||h[0]!==1||f!==null)&&(this._isScalar=!1)}else if(typeof l=="number")this._dimensions.push(i([l]));else if(typeof l=="string")this._dimensions.push(l);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(f)}}r.prototype.type="Index",r.prototype.isIndex=!0;function i(s){for(var a=0,o=s.length;a<o;a++)if(typeof s[a]!="number"||!Ot(s[a]))throw new TypeError("Index parameters must be positive integer numbers");return new e(s)}return r.prototype.clone=function(){var s=new r;return s._dimensions=Xt(this._dimensions),s._isScalar=this._isScalar,s._sourceSize=this._sourceSize,s},r.create=function(s){var a=new r;return r.apply(a,s),a},r.prototype.size=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s[a]=typeof l=="string"?1:l.size()[0]}return s},r.prototype.max=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s[a]=typeof l=="string"?l:l.max()}return s},r.prototype.min=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s[a]=typeof l=="string"?l:l.min()}return s},r.prototype.forEach=function(s){for(var a=0,o=this._dimensions.length;a<o;a++)s(this._dimensions[a],a,this)},r.prototype.dimension=function(s){return this._dimensions[s]||null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s.push(typeof l=="string"?l:l.toArray())}return s},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];typeof l=="string"?s.push(JSON.stringify(l)):s.push(l.toString())}return"["+s.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(s){return r.create(s.dimensions)},r},{isClass:!0});function r4(n){var e=[];return n.forEach((t,r)=>{t&&e.push(r)}),e}var The="FibonacciHeap",Dhe=["smaller","larger"],Nhe=ae(The,Dhe,n=>{var{smaller:e,larger:t}=n,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var h=this._minimum;d.left=h,d.right=h.right,h.right=d,d.right.left=d,e(c,h.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,h=c.child;d>0;){var p=h.right;h.left.right=h.right,h.right.left=h.left,h.left=f,h.right=f.right,f.right=h,h.right.left=h,h.parent=null,h=p,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=u(f,this._size)),this._size--,this._minimum=f,c},i.prototype.remove=function(c){this._minimum=s(this._minimum,c,-1),this.extractMinimum()};function s(c,f,d){f.key=d;var h=f.parent;return h&&e(f.key,h.key)&&(a(c,f,h),o(c,h)),e(f.key,c.key)&&(c=f),c}function a(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function o(c,f){var d=f.parent;d&&(f.mark?(a(c,f,d),o(d)):f.mark=!0)}var l=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function u(c,f){var d=Math.floor(Math.log(f)*r)+1,h=new Array(d),p=0,v=c;if(v)for(p++,v=v.right;v!==c;)p++,v=v.right;for(var y;p>0;){for(var m=v.degree,S=v.right;y=h[m],!!y;){if(t(v.key,y.key)){var b=y;y=v,v=b}l(y,v),h[m]=null,m++}h[m]=v,v=S,p--}c=null;for(var g=0;g<d;g++)y=h[g],y&&(c?(y.left.right=y.right,y.right.left=y.left,y.left=c,y.right=c.right,c.right=y,y.right.left=y,e(y.key,c.key)&&(c=y)):c=y);return c}return i},{isClass:!0}),Phe="Spa",Rhe=["addScalar","equalScalar","FibonacciHeap"],Ohe=ae(Phe,Rhe,n=>{var{addScalar:e,equalScalar:t,FibonacciHeap:r}=n;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(s,a){if(this._values[s])this._values[s].value=a;else{var o=this._heap.insert(s,a);this._values[s]=o}},i.prototype.get=function(s){var a=this._values[s];return a?a.value:0},i.prototype.accumulate=function(s,a){var o=this._values[s];o?o.value=e(o.value,a):(o=this._heap.insert(s,a),this._values[s]=o)},i.prototype.forEach=function(s,a,o){var l=this._heap,u=this._values,c=[],f=l.extractMinimum();for(f&&c.push(f);f&&f.key<=a;)f.key>=s&&(t(f.value,0)||o(f.key,f.value,this)),f=l.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var h=c[d];f=l.insert(h.key,h.value),u[f.key]=f}},i.prototype.swap=function(s,a){var o=this._values[s],l=this._values[a];if(!o&&l)o=this._heap.insert(s,l.value),this._heap.remove(l),this._values[s]=o,this._values[a]=void 0;else if(o&&!l)l=this._heap.insert(a,o.value),this._heap.remove(o),this._values[a]=l,this._values[s]=void 0;else if(o&&l){var u=o.value;o.value=l.value,l.value=u}},i},{isClass:!0}),Ihe=sy(function(n){return new n(1).exp()},{hasher:j_}),khe=sy(function(n){return new n(1).plus(new n(5).sqrt()).div(2)},{hasher:j_}),_P=sy(function(n){return n.acos(-1)},{hasher:j_}),Lhe=sy(function(n){return _P(n).times(2)},{hasher:j_});function j_(n){return n[0].precision}function i4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function V2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?i4(Object(t),!0).forEach(function(r){hr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Fhe="Unit",Bhe=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],zhe=ae(Fhe,Bhe,n=>{var{on:e,config:t,addScalar:r,subtractScalar:i,multiplyScalar:s,divideScalar:a,pow:o,abs:l,fix:u,round:c,equal:f,isNumeric:d,format:h,number:p,Complex:v,BigNumber:y,Fraction:m}=n,S=p;function b(te,ne){if(!(this instanceof b))throw new Error("Constructor must be called with the new operator");if(!(te==null||d(te)||Mo(te)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,ne===void 0)this.units=[],this.dimensions=$.map(se=>0);else if(typeof ne=="string"){var Ce=b.parse(ne);this.units=Ce.units,this.dimensions=Ce.dimensions}else if(zs(ne)&&ne.value===null)this.fixPrefix=ne.fixPrefix,this.skipAutomaticSimplification=ne.skipAutomaticSimplification,this.dimensions=ne.dimensions.slice(0),this.units=ne.units.map(se=>ot({},se));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(te)}Object.defineProperty(b,"name",{value:"Unit"}),b.prototype.constructor=b,b.prototype.type="Unit",b.prototype.isUnit=!0;var g,w,x;function M(){for(;x===" "||x==="	";)C()}function A(te){return te>="0"&&te<="9"||te==="."}function N(te){return te>="0"&&te<="9"}function C(){w++,x=g.charAt(w)}function T(te){w=te,x=g.charAt(w)}function R(){var te="",ne=w;if(x==="+"?C():x==="-"&&(te+=x,C()),!A(x))return T(ne),null;if(x==="."){if(te+=x,C(),!N(x))return T(ne),null}else{for(;N(x);)te+=x,C();x==="."&&(te+=x,C())}for(;N(x);)te+=x,C();if(x==="E"||x==="e"){var Ce="",se=w;if(Ce+=x,C(),(x==="+"||x==="-")&&(Ce+=x,C()),!N(x))return T(se),te;for(te=te+Ce;N(x);)te+=x,C()}return te}function U(){for(var te="";N(x)||b.isValidAlpha(x);)te+=x,C();var ne=te.charAt(0);return b.isValidAlpha(ne)?te:null}function F(te){return x===te?(C(),te):null}b.parse=function(te,ne){if(ne=ne||{},g=te,w=-1,x="",typeof g!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var Ce=new b;Ce.units=[];var se=1,j=!1;C(),M();var G=R(),fe=null;if(G){if(t.number==="BigNumber")fe=new y(G);else if(t.number==="Fraction")try{fe=new m(G)}catch{fe=parseFloat(G)}else fe=parseFloat(G);M(),F("*")?(se=1,j=!0):F("/")&&(se=-1,j=!0)}for(var Me=[],q=1;;){for(M();x==="(";)Me.push(se),q*=se,se=1,C(),M();var J=void 0;if(x){var be=x;if(J=U(),J===null)throw new SyntaxError('Unexpected "'+be+'" in "'+g+'" at index '+w.toString())}else break;var Se=B(J);if(Se===null)throw new SyntaxError('Unit "'+J+'" not found.');var Ne=se*q;if(M(),F("^")){M();var Fe=R();if(Fe===null)throw new SyntaxError('In "'+te+'", "^" must be followed by a floating-point number');Ne*=Fe}Ce.units.push({unit:Se.unit,prefix:Se.prefix,power:Ne});for(var He=0;He<$.length;He++)Ce.dimensions[He]+=(Se.unit.dimensions[He]||0)*Ne;for(M();x===")";){if(Me.length===0)throw new SyntaxError('Unmatched ")" in "'+g+'" at index '+w.toString());q/=Me.pop(),C(),M()}if(j=!1,F("*")?(se=1,j=!0):F("/")?(se=-1,j=!0):se=1,Se.unit.base){var Oe=Se.unit.base.key;ue.auto[Oe]={unit:Se.unit,prefix:Se.prefix}}}if(M(),x)throw new SyntaxError('Could not parse: "'+te+'"');if(j)throw new SyntaxError('Trailing characters: "'+te+'"');if(Me.length!==0)throw new SyntaxError('Unmatched "(" in "'+g+'"');if(Ce.units.length===0&&!ne.allowNoUnits)throw new SyntaxError('"'+te+'" contains no units');return Ce.value=fe!==void 0?Ce._normalize(fe):null,Ce},b.prototype.clone=function(){var te=new b;te.fixPrefix=this.fixPrefix,te.skipAutomaticSimplification=this.skipAutomaticSimplification,te.value=Xt(this.value),te.dimensions=this.dimensions.slice(0),te.units=[];for(var ne=0;ne<this.units.length;ne++){te.units[ne]={};for(var Ce in this.units[ne])gt(this.units[ne],Ce)&&(te.units[ne][Ce]=this.units[ne][Ce])}return te},b.prototype.valueType=function(){return $n(this.value)},b.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},b.prototype._normalize=function(te){if(te==null||this.units.length===0)return te;for(var ne=te,Ce=b._getNumberConverter($n(te)),se=0;se<this.units.length;se++){var j=Ce(this.units[se].unit.value),G=Ce(this.units[se].prefix.value),fe=Ce(this.units[se].power);ne=s(ne,o(s(j,G),fe))}return ne},b.prototype._denormalize=function(te,ne){if(te==null||this.units.length===0)return te;for(var Ce=te,se=b._getNumberConverter($n(te)),j=0;j<this.units.length;j++){var G=se(this.units[j].unit.value),fe=se(this.units[j].prefix.value),Me=se(this.units[j].power);Ce=a(Ce,o(s(G,fe),Me))}return Ce};var B=sy(te=>{if(gt(K,te)){var ne=K[te],Ce=ne.prefixes[""];return{unit:ne,prefix:Ce}}for(var se in K)if(gt(K,se)&&Zae(te,se)){var j=K[se],G=te.length-se.length,fe=te.substring(0,G),Me=gt(j.prefixes,fe)?j.prefixes[fe]:void 0;if(Me!==void 0)return{unit:j,prefix:Me}}return null},{hasher:te=>te[0],limit:100});b.isValuelessUnit=function(te){return B(te)!==null},b.prototype.hasBase=function(te){if(typeof te=="string"&&(te=L[te]),!te)return!1;for(var ne=0;ne<$.length;ne++)if(Math.abs((this.dimensions[ne]||0)-(te.dimensions[ne]||0))>1e-12)return!1;return!0},b.prototype.equalBase=function(te){for(var ne=0;ne<$.length;ne++)if(Math.abs((this.dimensions[ne]||0)-(te.dimensions[ne]||0))>1e-12)return!1;return!0},b.prototype.equals=function(te){return this.equalBase(te)&&f(this.value,te.value)},b.prototype.multiply=function(te){for(var ne=this.clone(),Ce=zs(te)?te:new b(te),se=0;se<$.length;se++)ne.dimensions[se]=(this.dimensions[se]||0)+(Ce.dimensions[se]||0);for(var j=0;j<Ce.units.length;j++){var G=V2({},Ce.units[j]);ne.units.push(G)}if(this.value!==null||Ce.value!==null){var fe=this.value===null?this._normalize(1):this.value,Me=Ce.value===null?Ce._normalize(1):Ce.value;ne.value=s(fe,Me)}else ne.value=null;return zs(te)&&(ne.skipAutomaticSimplification=!1),D(ne)},b.prototype.divideInto=function(te){return new b(te).divide(this)},b.prototype.divide=function(te){for(var ne=this.clone(),Ce=zs(te)?te:new b(te),se=0;se<$.length;se++)ne.dimensions[se]=(this.dimensions[se]||0)-(Ce.dimensions[se]||0);for(var j=0;j<Ce.units.length;j++){var G=V2(V2({},Ce.units[j]),{},{power:-Ce.units[j].power});ne.units.push(G)}if(this.value!==null||Ce.value!==null){var fe=this.value===null?this._normalize(1):this.value,Me=Ce.value===null?Ce._normalize(1):Ce.value;ne.value=a(fe,Me)}else ne.value=null;return zs(te)&&(ne.skipAutomaticSimplification=!1),D(ne)},b.prototype.pow=function(te){for(var ne=this.clone(),Ce=0;Ce<$.length;Ce++)ne.dimensions[Ce]=(this.dimensions[Ce]||0)*te;for(var se=0;se<ne.units.length;se++)ne.units[se].power*=te;return ne.value!==null?ne.value=o(ne.value,te):ne.value=null,ne.skipAutomaticSimplification=!1,D(ne)};function D(te){return te.equalBase(L.NONE)&&te.value!==null&&!t.predictable?te.value:te}b.prototype.abs=function(){var te=this.clone();if(te.value!==null)if(te._isDerived()||te.units.length===0||te.units[0].unit.offset===0)te.value=l(te.value);else{var ne=te._numberConverter(),Ce=ne(te.units[0].unit.value),se=ne(te.units[0].unit.offset),j=s(Ce,se);te.value=i(l(r(te.value,j)),j)}for(var G in te.units)(te.units[G].unit.name==="VA"||te.units[G].unit.name==="VAR")&&(te.units[G].unit=K.W);return te},b.prototype.to=function(te){var ne=this.value===null?this._normalize(1):this.value,Ce;if(typeof te=="string")Ce=b.parse(te);else if(zs(te))Ce=te.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(Ce))throw new Error("Units do not match ('".concat(Ce.toString(),"' != '").concat(this.toString(),"')"));if(Ce.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||Ce.units.length===0||this.units[0].unit.offset===Ce.units[0].unit.offset)Ce.value=Xt(ne);else{var se=b._getNumberConverter($n(ne)),j=this.units[0].unit.value,G=this.units[0].unit.offset,fe=s(j,G),Me=Ce.units[0].unit.value,q=Ce.units[0].unit.offset,J=s(Me,q);Ce.value=r(ne,se(i(fe,J)))}return Ce.fixPrefix=!0,Ce.skipAutomaticSimplification=!0,Ce},b.prototype.toNumber=function(te){return S(this.toNumeric(te))},b.prototype.toNumeric=function(te){var ne;return te?ne=this.to(te):ne=this.clone(),ne._isDerived()||ne.units.length===0?ne._denormalize(ne.value):ne._denormalize(ne.value,ne.units[0].prefix.value)},b.prototype.toString=function(){return this.format()},b.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},b.fromJSON=function(te){var ne,Ce=new b(te.value,(ne=te.unit)!==null&&ne!==void 0?ne:void 0);return Ce.fixPrefix=te.fixPrefix||!1,Ce},b.prototype.valueOf=b.prototype.toString,b.prototype.simplify=function(){var te=this.clone(),ne=[],Ce;for(var se in me)if(gt(me,se)&&te.hasBase(L[se])){Ce=se;break}if(Ce==="NONE")te.units=[];else{var j;if(Ce&&gt(me,Ce)&&(j=me[Ce]),j)te.units=[{unit:j.unit,prefix:j.prefix,power:1}];else{for(var G=!1,fe=0;fe<$.length;fe++){var Me=$[fe];Math.abs(te.dimensions[fe]||0)>1e-12&&(gt(me,Me)?ne.push({unit:me[Me].unit,prefix:me[Me].prefix,power:te.dimensions[fe]||0}):G=!0)}ne.length<te.units.length&&!G&&(te.units=ne)}}return te},b.prototype.toSI=function(){for(var te=this.clone(),ne=[],Ce=0;Ce<$.length;Ce++){var se=$[Ce];if(Math.abs(te.dimensions[Ce]||0)>1e-12)if(gt(ue.si,se))ne.push({unit:ue.si[se].unit,prefix:ue.si[se].prefix,power:te.dimensions[Ce]||0});else throw new Error("Cannot express custom unit "+se+" in SI units")}return te.units=ne,te.fixPrefix=!0,te.skipAutomaticSimplification=!0,this.value!==null?(te.value=null,this.to(te)):te},b.prototype.formatUnits=function(){for(var te="",ne="",Ce=0,se=0,j=0;j<this.units.length;j++)this.units[j].power>0?(Ce++,te+=" "+this.units[j].prefix.name+this.units[j].unit.name,Math.abs(this.units[j].power-1)>1e-15&&(te+="^"+this.units[j].power)):this.units[j].power<0&&se++;if(se>0)for(var G=0;G<this.units.length;G++)this.units[G].power<0&&(Ce>0?(ne+=" "+this.units[G].prefix.name+this.units[G].unit.name,Math.abs(this.units[G].power+1)>1e-15&&(ne+="^"+-this.units[G].power)):(ne+=" "+this.units[G].prefix.name+this.units[G].unit.name,ne+="^"+this.units[G].power));te=te.substr(1),ne=ne.substr(1),Ce>1&&se>0&&(te="("+te+")"),se>1&&Ce>0&&(ne="("+ne+")");var fe=te;return Ce>0&&se>0&&(fe+=" / "),fe+=ne,fe},b.prototype.format=function(te){var ne=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),Ce=!1;typeof ne.value<"u"&&ne.value!==null&&Mo(ne.value)&&(Ce=Math.abs(ne.value.re)<1e-14);for(var se in ne.units)gt(ne.units,se)&&ne.units[se].unit&&(ne.units[se].unit.name==="VA"&&Ce?ne.units[se].unit=K.VAR:ne.units[se].unit.name==="VAR"&&!Ce&&(ne.units[se].unit=K.VA));ne.units.length===1&&!ne.fixPrefix&&Math.abs(ne.units[0].power-Math.round(ne.units[0].power))<1e-14&&(ne.units[0].prefix=ne._bestPrefix());var j=ne._denormalize(ne.value),G=ne.value!==null?h(j,te||{}):"",fe=ne.formatUnits();return ne.value&&Mo(ne.value)&&(G="("+G+")"),fe.length>0&&G.length>0&&(G+=" "),G+=fe,G},b.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var te=this.value!==null?l(this.value):0,ne=l(this.units[0].unit.value),Ce=this.units[0].prefix;if(te===0)return Ce;var se=this.units[0].power,j=Math.log(te/Math.pow(Ce.value*ne,se))/Math.LN10-1.2;if(j>-2.200001&&j<1.800001)return Ce;j=Math.abs(j);var G=this.units[0].unit.prefixes;for(var fe in G)if(gt(G,fe)){var Me=G[fe];if(Me.scientific){var q=Math.abs(Math.log(te/Math.pow(Me.value*ne,se))/Math.LN10-1.2);(q<j||q===j&&Me.name.length<Ce.name.length)&&(Ce=Me,j=q)}}return Ce},b.prototype.splitUnit=function(te){for(var ne=this.clone(),Ce=[],se=0;se<te.length&&(ne=ne.to(te[se]),se!==te.length-1);se++){var j=ne.toNumeric(),G=c(j),fe=void 0,Me=f(G,j);Me?fe=G:fe=u(ne.toNumeric());var q=new b(fe,te[se].toString());Ce.push(q),ne=i(ne,q)}for(var J=0,be=0;be<Ce.length;be++)J=r(J,Ce[be].value);return f(J,this.value)&&(ne.value=0),Ce.push(ne),Ce};var O={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};O.SHORTLONG=ot({},O.SHORT,O.LONG),O.BINARY_SHORT=ot({},O.BINARY_SHORT_SI,O.BINARY_SHORT_IEC),O.BINARY_LONG=ot({},O.BINARY_LONG_SI,O.BINARY_LONG_IEC);var $=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],L={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var X in L)gt(L,X)&&(L[X].key=X);var Z={},Q={name:"",base:Z,value:1,offset:0,dimensions:$.map(te=>0)},K={meter:{name:"meter",base:L.LENGTH,prefixes:O.LONG,value:1,offset:0},inch:{name:"inch",base:L.LENGTH,prefixes:O.NONE,value:.0254,offset:0},foot:{name:"foot",base:L.LENGTH,prefixes:O.NONE,value:.3048,offset:0},yard:{name:"yard",base:L.LENGTH,prefixes:O.NONE,value:.9144,offset:0},mile:{name:"mile",base:L.LENGTH,prefixes:O.NONE,value:1609.344,offset:0},link:{name:"link",base:L.LENGTH,prefixes:O.NONE,value:.201168,offset:0},rod:{name:"rod",base:L.LENGTH,prefixes:O.NONE,value:5.0292,offset:0},chain:{name:"chain",base:L.LENGTH,prefixes:O.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:L.LENGTH,prefixes:O.NONE,value:1e-10,offset:0},m:{name:"m",base:L.LENGTH,prefixes:O.SHORT,value:1,offset:0},in:{name:"in",base:L.LENGTH,prefixes:O.NONE,value:.0254,offset:0},ft:{name:"ft",base:L.LENGTH,prefixes:O.NONE,value:.3048,offset:0},yd:{name:"yd",base:L.LENGTH,prefixes:O.NONE,value:.9144,offset:0},mi:{name:"mi",base:L.LENGTH,prefixes:O.NONE,value:1609.344,offset:0},li:{name:"li",base:L.LENGTH,prefixes:O.NONE,value:.201168,offset:0},rd:{name:"rd",base:L.LENGTH,prefixes:O.NONE,value:5.02921,offset:0},ch:{name:"ch",base:L.LENGTH,prefixes:O.NONE,value:20.1168,offset:0},mil:{name:"mil",base:L.LENGTH,prefixes:O.NONE,value:254e-7,offset:0},m2:{name:"m2",base:L.SURFACE,prefixes:O.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:L.SURFACE,prefixes:O.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:L.SURFACE,prefixes:O.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:L.SURFACE,prefixes:O.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:L.SURFACE,prefixes:O.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:L.SURFACE,prefixes:O.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:L.SURFACE,prefixes:O.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:L.SURFACE,prefixes:O.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:L.SURFACE,prefixes:O.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:L.SURFACE,prefixes:O.NONE,value:1e4,offset:0},m3:{name:"m3",base:L.VOLUME,prefixes:O.CUBIC,value:1,offset:0},L:{name:"L",base:L.VOLUME,prefixes:O.SHORT,value:.001,offset:0},l:{name:"l",base:L.VOLUME,prefixes:O.SHORT,value:.001,offset:0},litre:{name:"litre",base:L.VOLUME,prefixes:O.LONG,value:.001,offset:0},cuin:{name:"cuin",base:L.VOLUME,prefixes:O.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:L.VOLUME,prefixes:O.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:L.VOLUME,prefixes:O.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:L.VOLUME,prefixes:O.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:L.VOLUME,prefixes:O.NONE,value:15e-6,offset:0},drop:{name:"drop",base:L.VOLUME,prefixes:O.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:L.VOLUME,prefixes:O.NONE,value:5e-8,offset:0},minim:{name:"minim",base:L.VOLUME,prefixes:O.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:L.VOLUME,prefixes:O.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:L.VOLUME,prefixes:O.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:L.VOLUME,prefixes:O.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:L.VOLUME,prefixes:O.NONE,value:1e-6,offset:0},cup:{name:"cup",base:L.VOLUME,prefixes:O.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:L.VOLUME,prefixes:O.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:L.VOLUME,prefixes:O.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:L.VOLUME,prefixes:O.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:L.VOLUME,prefixes:O.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:L.VOLUME,prefixes:O.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:L.VOLUME,prefixes:O.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:L.VOLUME,prefixes:O.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:L.VOLUME,prefixes:O.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:L.VOLUME,prefixes:O.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:L.VOLUME,prefixes:O.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:L.VOLUME,prefixes:O.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:L.VOLUME,prefixes:O.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:L.VOLUME,prefixes:O.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:L.VOLUME,prefixes:O.NONE,value:.1173478,offset:0},obl:{name:"obl",base:L.VOLUME,prefixes:O.NONE,value:.1589873,offset:0},g:{name:"g",base:L.MASS,prefixes:O.SHORT,value:.001,offset:0},gram:{name:"gram",base:L.MASS,prefixes:O.LONG,value:.001,offset:0},ton:{name:"ton",base:L.MASS,prefixes:O.SHORT,value:907.18474,offset:0},t:{name:"t",base:L.MASS,prefixes:O.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:L.MASS,prefixes:O.LONG,value:1e3,offset:0},grain:{name:"grain",base:L.MASS,prefixes:O.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:L.MASS,prefixes:O.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:L.MASS,prefixes:O.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:L.MASS,prefixes:O.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:L.MASS,prefixes:O.NONE,value:45.359237,offset:0},stick:{name:"stick",base:L.MASS,prefixes:O.NONE,value:.115,offset:0},stone:{name:"stone",base:L.MASS,prefixes:O.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:L.MASS,prefixes:O.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:L.MASS,prefixes:O.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:L.MASS,prefixes:O.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:L.MASS,prefixes:O.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:L.MASS,prefixes:O.NONE,value:45.359237,offset:0},s:{name:"s",base:L.TIME,prefixes:O.SHORT,value:1,offset:0},min:{name:"min",base:L.TIME,prefixes:O.NONE,value:60,offset:0},h:{name:"h",base:L.TIME,prefixes:O.NONE,value:3600,offset:0},second:{name:"second",base:L.TIME,prefixes:O.LONG,value:1,offset:0},sec:{name:"sec",base:L.TIME,prefixes:O.LONG,value:1,offset:0},minute:{name:"minute",base:L.TIME,prefixes:O.NONE,value:60,offset:0},hour:{name:"hour",base:L.TIME,prefixes:O.NONE,value:3600,offset:0},day:{name:"day",base:L.TIME,prefixes:O.NONE,value:86400,offset:0},week:{name:"week",base:L.TIME,prefixes:O.NONE,value:7*86400,offset:0},month:{name:"month",base:L.TIME,prefixes:O.NONE,value:2629800,offset:0},year:{name:"year",base:L.TIME,prefixes:O.NONE,value:31557600,offset:0},decade:{name:"decade",base:L.TIME,prefixes:O.NONE,value:315576e3,offset:0},century:{name:"century",base:L.TIME,prefixes:O.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:L.TIME,prefixes:O.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:L.FREQUENCY,prefixes:O.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:L.FREQUENCY,prefixes:O.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:L.ANGLE,prefixes:O.SHORT,value:1,offset:0},radian:{name:"radian",base:L.ANGLE,prefixes:O.LONG,value:1,offset:0},deg:{name:"deg",base:L.ANGLE,prefixes:O.SHORT,value:null,offset:0},degree:{name:"degree",base:L.ANGLE,prefixes:O.LONG,value:null,offset:0},grad:{name:"grad",base:L.ANGLE,prefixes:O.SHORT,value:null,offset:0},gradian:{name:"gradian",base:L.ANGLE,prefixes:O.LONG,value:null,offset:0},cycle:{name:"cycle",base:L.ANGLE,prefixes:O.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:L.ANGLE,prefixes:O.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:L.ANGLE,prefixes:O.NONE,value:null,offset:0},A:{name:"A",base:L.CURRENT,prefixes:O.SHORT,value:1,offset:0},ampere:{name:"ampere",base:L.CURRENT,prefixes:O.LONG,value:1,offset:0},K:{name:"K",base:L.TEMPERATURE,prefixes:O.SHORT,value:1,offset:0},degC:{name:"degC",base:L.TEMPERATURE,prefixes:O.SHORT,value:1,offset:273.15},degF:{name:"degF",base:L.TEMPERATURE,prefixes:O.SHORT,value:new m(5,9),offset:459.67},degR:{name:"degR",base:L.TEMPERATURE,prefixes:O.SHORT,value:new m(5,9),offset:0},kelvin:{name:"kelvin",base:L.TEMPERATURE,prefixes:O.LONG,value:1,offset:0},celsius:{name:"celsius",base:L.TEMPERATURE,prefixes:O.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:L.TEMPERATURE,prefixes:O.LONG,value:new m(5,9),offset:459.67},rankine:{name:"rankine",base:L.TEMPERATURE,prefixes:O.LONG,value:new m(5,9),offset:0},mol:{name:"mol",base:L.AMOUNT_OF_SUBSTANCE,prefixes:O.SHORT,value:1,offset:0},mole:{name:"mole",base:L.AMOUNT_OF_SUBSTANCE,prefixes:O.LONG,value:1,offset:0},cd:{name:"cd",base:L.LUMINOUS_INTENSITY,prefixes:O.SHORT,value:1,offset:0},candela:{name:"candela",base:L.LUMINOUS_INTENSITY,prefixes:O.LONG,value:1,offset:0},N:{name:"N",base:L.FORCE,prefixes:O.SHORT,value:1,offset:0},newton:{name:"newton",base:L.FORCE,prefixes:O.LONG,value:1,offset:0},dyn:{name:"dyn",base:L.FORCE,prefixes:O.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:L.FORCE,prefixes:O.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:L.FORCE,prefixes:O.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:L.FORCE,prefixes:O.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:L.FORCE,prefixes:O.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:L.FORCE,prefixes:O.NONE,value:9.80665,offset:0},J:{name:"J",base:L.ENERGY,prefixes:O.SHORT,value:1,offset:0},joule:{name:"joule",base:L.ENERGY,prefixes:O.LONG,value:1,offset:0},erg:{name:"erg",base:L.ENERGY,prefixes:O.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:L.ENERGY,prefixes:O.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:L.ENERGY,prefixes:O.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:L.ENERGY,prefixes:O.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:L.ENERGY,prefixes:O.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:L.POWER,prefixes:O.SHORT,value:1,offset:0},watt:{name:"watt",base:L.POWER,prefixes:O.LONG,value:1,offset:0},hp:{name:"hp",base:L.POWER,prefixes:O.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:L.POWER,prefixes:O.SHORT,value:v.I,offset:0},VA:{name:"VA",base:L.POWER,prefixes:O.SHORT,value:1,offset:0},Pa:{name:"Pa",base:L.PRESSURE,prefixes:O.SHORT,value:1,offset:0},psi:{name:"psi",base:L.PRESSURE,prefixes:O.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:L.PRESSURE,prefixes:O.NONE,value:101325,offset:0},bar:{name:"bar",base:L.PRESSURE,prefixes:O.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:L.PRESSURE,prefixes:O.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:L.PRESSURE,prefixes:O.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:L.PRESSURE,prefixes:O.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:L.PRESSURE,prefixes:O.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:L.ELECTRIC_CHARGE,prefixes:O.LONG,value:1,offset:0},C:{name:"C",base:L.ELECTRIC_CHARGE,prefixes:O.SHORT,value:1,offset:0},farad:{name:"farad",base:L.ELECTRIC_CAPACITANCE,prefixes:O.LONG,value:1,offset:0},F:{name:"F",base:L.ELECTRIC_CAPACITANCE,prefixes:O.SHORT,value:1,offset:0},volt:{name:"volt",base:L.ELECTRIC_POTENTIAL,prefixes:O.LONG,value:1,offset:0},V:{name:"V",base:L.ELECTRIC_POTENTIAL,prefixes:O.SHORT,value:1,offset:0},ohm:{name:"ohm",base:L.ELECTRIC_RESISTANCE,prefixes:O.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:L.ELECTRIC_INDUCTANCE,prefixes:O.LONG,value:1,offset:0},H:{name:"H",base:L.ELECTRIC_INDUCTANCE,prefixes:O.SHORT,value:1,offset:0},siemens:{name:"siemens",base:L.ELECTRIC_CONDUCTANCE,prefixes:O.LONG,value:1,offset:0},S:{name:"S",base:L.ELECTRIC_CONDUCTANCE,prefixes:O.SHORT,value:1,offset:0},weber:{name:"weber",base:L.MAGNETIC_FLUX,prefixes:O.LONG,value:1,offset:0},Wb:{name:"Wb",base:L.MAGNETIC_FLUX,prefixes:O.SHORT,value:1,offset:0},tesla:{name:"tesla",base:L.MAGNETIC_FLUX_DENSITY,prefixes:O.LONG,value:1,offset:0},T:{name:"T",base:L.MAGNETIC_FLUX_DENSITY,prefixes:O.SHORT,value:1,offset:0},b:{name:"b",base:L.BIT,prefixes:O.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:L.BIT,prefixes:O.BINARY_LONG,value:1,offset:0},B:{name:"B",base:L.BIT,prefixes:O.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:L.BIT,prefixes:O.BINARY_LONG,value:8,offset:0}},re={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function ce(te){if(te.number==="BigNumber"){var ne=_P(y);K.rad.value=new y(1),K.deg.value=ne.div(180),K.grad.value=ne.div(200),K.cycle.value=ne.times(2),K.arcsec.value=ne.div(648e3),K.arcmin.value=ne.div(10800)}else K.rad.value=1,K.deg.value=Math.PI/180,K.grad.value=Math.PI/200,K.cycle.value=Math.PI*2,K.arcsec.value=Math.PI/648e3,K.arcmin.value=Math.PI/10800;K.radian.value=K.rad.value,K.degree.value=K.deg.value,K.gradian.value=K.grad.value}ce(t),e&&e("config",function(te,ne){te.number!==ne.number&&ce(te)});var ue={si:{NONE:{unit:Q,prefix:O.NONE[""]},LENGTH:{unit:K.m,prefix:O.SHORT[""]},MASS:{unit:K.g,prefix:O.SHORT.k},TIME:{unit:K.s,prefix:O.SHORT[""]},CURRENT:{unit:K.A,prefix:O.SHORT[""]},TEMPERATURE:{unit:K.K,prefix:O.SHORT[""]},LUMINOUS_INTENSITY:{unit:K.cd,prefix:O.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:K.mol,prefix:O.SHORT[""]},ANGLE:{unit:K.rad,prefix:O.SHORT[""]},BIT:{unit:K.bits,prefix:O.SHORT[""]},FORCE:{unit:K.N,prefix:O.SHORT[""]},ENERGY:{unit:K.J,prefix:O.SHORT[""]},POWER:{unit:K.W,prefix:O.SHORT[""]},PRESSURE:{unit:K.Pa,prefix:O.SHORT[""]},ELECTRIC_CHARGE:{unit:K.C,prefix:O.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:K.F,prefix:O.SHORT[""]},ELECTRIC_POTENTIAL:{unit:K.V,prefix:O.SHORT[""]},ELECTRIC_RESISTANCE:{unit:K.ohm,prefix:O.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:K.H,prefix:O.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:K.S,prefix:O.SHORT[""]},MAGNETIC_FLUX:{unit:K.Wb,prefix:O.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:K.T,prefix:O.SHORT[""]},FREQUENCY:{unit:K.Hz,prefix:O.SHORT[""]}}};ue.cgs=JSON.parse(JSON.stringify(ue.si)),ue.cgs.LENGTH={unit:K.m,prefix:O.SHORT.c},ue.cgs.MASS={unit:K.g,prefix:O.SHORT[""]},ue.cgs.FORCE={unit:K.dyn,prefix:O.SHORT[""]},ue.cgs.ENERGY={unit:K.erg,prefix:O.NONE[""]},ue.us=JSON.parse(JSON.stringify(ue.si)),ue.us.LENGTH={unit:K.ft,prefix:O.NONE[""]},ue.us.MASS={unit:K.lbm,prefix:O.NONE[""]},ue.us.TEMPERATURE={unit:K.degF,prefix:O.NONE[""]},ue.us.FORCE={unit:K.lbf,prefix:O.NONE[""]},ue.us.ENERGY={unit:K.BTU,prefix:O.BTU[""]},ue.us.POWER={unit:K.hp,prefix:O.NONE[""]},ue.us.PRESSURE={unit:K.psi,prefix:O.NONE[""]},ue.auto=JSON.parse(JSON.stringify(ue.si));var me=ue.auto;b.setUnitSystem=function(te){if(gt(ue,te))me=ue[te];else throw new Error("Unit system "+te+" does not exist. Choices are: "+Object.keys(ue).join(", "))},b.getUnitSystem=function(){for(var te in ue)if(gt(ue,te)&&ue[te]===me)return te},b.typeConverters={BigNumber:function(ne){return ne!=null&&ne.isFraction?new y(ne.n).div(ne.d).times(ne.s):new y(ne+"")},Fraction:function(ne){return new m(ne)},Complex:function(ne){return ne},number:function(ne){return ne!=null&&ne.isFraction?p(ne):ne}},b.prototype._numberConverter=function(){var te=b.typeConverters[this.valueType()];if(te)return te;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},b._getNumberConverter=function(te){if(!b.typeConverters[te])throw new TypeError('Unsupported type "'+te+'"');return b.typeConverters[te]};for(var Ee in K)if(gt(K,Ee)){var xe=K[Ee];xe.dimensions=xe.base.dimensions}for(var Te in re)if(gt(re,Te)){var De=K[re[Te]],ie={};for(var Ie in De)gt(De,Ie)&&(ie[Ie]=De[Ie]);ie.name=Te,K[Te]=ie}b.isValidAlpha=function(ne){return/^[a-zA-Z]$/.test(ne)};function ke(te){for(var ne=0;ne<te.length;ne++){if(x=te.charAt(ne),ne===0&&!b.isValidAlpha(x))throw new Error('Invalid unit name (must begin with alpha character): "'+te+'"');if(ne>0&&!(b.isValidAlpha(x)||N(x)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+te+'"')}}return b.createUnit=function(te,ne){if(typeof te!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(ne&&ne.override){for(var Ce in te)if(gt(te,Ce)&&b.deleteUnit(Ce),te[Ce].aliases)for(var se=0;se<te[Ce].aliases.length;se++)b.deleteUnit(te[Ce].aliases[se])}var j;for(var G in te)gt(te,G)&&(j=b.createUnitSingle(G,te[G]));return j},b.createUnitSingle=function(te,ne){if((typeof ne>"u"||ne===null)&&(ne={}),typeof te!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(gt(K,te))throw new Error('Cannot create unit "'+te+'": a unit with that name already exists');ke(te);var Ce=null,se=[],j=0,G,fe,Me;if(ne&&ne.type==="Unit")Ce=ne.clone();else if(typeof ne=="string")ne!==""&&(G=ne);else if(typeof ne=="object")G=ne.definition,fe=ne.prefixes,j=ne.offset,Me=ne.baseName,ne.aliases&&(se=ne.aliases.valueOf());else throw new TypeError('Cannot create unit "'+te+'" from "'+ne.toString()+'": expecting "string" or "Unit" or "Object"');if(se){for(var q=0;q<se.length;q++)if(gt(K,se[q]))throw new Error('Cannot create alias "'+se[q]+'": a unit with that name already exists')}if(G&&typeof G=="string"&&!Ce)try{Ce=b.parse(G,{allowNoUnits:!0})}catch(W){throw W.message='Could not create unit "'+te+'" from "'+G+'": '+W.message,W}else G&&G.type==="Unit"&&(Ce=G.clone());se=se||[],j=j||0,fe&&fe.toUpperCase?fe=O[fe.toUpperCase()]||O.NONE:fe=O.NONE;var J={};if(Ce){J={name:te,value:Ce.value,dimensions:Ce.dimensions.slice(0),prefixes:fe,offset:j};var Fe=!1;for(var He in L)if(gt(L,He)){for(var Oe=!0,Je=0;Je<$.length;Je++)if(Math.abs((J.dimensions[Je]||0)-(L[He].dimensions[Je]||0))>1e-12){Oe=!1;break}if(Oe){Fe=!0,J.base=L[He];break}}if(!Fe){Me=Me||te+"_STUFF";var qe={dimensions:Ce.dimensions.slice(0)};qe.key=Me,L[Me]=qe,me[Me]={unit:J,prefix:O.NONE[""]},J.base=L[Me]}}else{if(Me=Me||te+"_STUFF",$.indexOf(Me)>=0)throw new Error('Cannot create new base unit "'+te+'": a base unit with that name already exists (and cannot be overridden)');$.push(Me);for(var be in L)gt(L,be)&&(L[be].dimensions[$.length-1]=0);for(var Se={dimensions:[]},Ne=0;Ne<$.length;Ne++)Se.dimensions[Ne]=0;Se.dimensions[$.length-1]=1,Se.key=Me,L[Me]=Se,J={name:te,value:1,dimensions:L[Me].dimensions.slice(0),prefixes:fe,offset:j,base:L[Me]},me[Me]={unit:J,prefix:O.NONE[""]}}b.UNITS[te]=J;for(var lt=0;lt<se.length;lt++){var at=se[lt],ge={};for(var We in J)gt(J,We)&&(ge[We]=J[We]);ge.name=at,b.UNITS[at]=ge}return delete B.cache,new b(null,te)},b.deleteUnit=function(te){delete b.UNITS[te],delete B.cache},b.PREFIXES=O,b.BASE_DIMENSIONS=$,b.BASE_UNITS=L,b.UNIT_SYSTEMS=ue,b.UNITS=K,b},{isClass:!0}),s4="unit",Uhe=["typed","Unit"],$he=ae(s4,Uhe,n=>{var{typed:e,Unit:t}=n;return e(s4,{Unit:function(i){return i.clone()},string:function(i){return t.isValuelessUnit(i)?new t(null,i):t.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,s){return new t(i,s)},"number | BigNumber | Fraction":function(i){return new t(i)},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),a4="sparse",Vhe=["typed","SparseMatrix"],Hhe=ae(a4,Vhe,n=>{var{typed:e,SparseMatrix:t}=n;return e(a4,{"":function(){return new t([])},string:function(i){return new t([],i)},"Array | Matrix":function(i){return new t(i)},"Array | Matrix, string":function(i,s){return new t(i,s)}})}),o4="createUnit",Whe=["typed","Unit"],Ghe=ae(o4,Whe,n=>{var{typed:e,Unit:t}=n;return e(o4,{"Object, Object":function(i,s){return t.createUnit(i,s)},Object:function(i){return t.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,s,a){var o={};return o[i]=s,t.createUnit(o,a)},"string, Unit | string | Object":function(i,s){var a={};return a[i]=s,t.createUnit(a,{})},string:function(i){var s={};return s[i]={},t.createUnit(s,{})}})}),l4="acos",jhe=["typed","config","Complex"],qhe=ae(l4,jhe,n=>{var{typed:e,config:t,Complex:r}=n;return e(l4,{number:function(s){return s>=-1&&s<=1||t.predictable?Math.acos(s):new r(s,0).acos()},Complex:function(s){return s.acos()},BigNumber:function(s){return s.acos()}})}),u4="acosh",Xhe=["typed","config","Complex"],Yhe=ae(u4,Xhe,n=>{var{typed:e,config:t,Complex:r}=n;return e(u4,{number:function(s){return s>=1||t.predictable?QW(s):s<=-1?new r(Math.log(Math.sqrt(s*s-1)-s),Math.PI):new r(s,0).acosh()},Complex:function(s){return s.acosh()},BigNumber:function(s){return s.acosh()}})}),c4="acot",Khe=["typed","BigNumber"],Zhe=ae(c4,Khe,n=>{var{typed:e,BigNumber:t}=n;return e(c4,{number:eG,Complex:function(i){return i.acot()},BigNumber:function(i){return new t(1).div(i).atan()}})}),f4="acoth",Jhe=["typed","config","Complex","BigNumber"],Qhe=ae(f4,Jhe,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(f4,{number:function(a){return a>=1||a<=-1||t.predictable?tG(a):new r(a,0).acoth()},Complex:function(a){return a.acoth()},BigNumber:function(a){return new i(1).div(a).atanh()}})}),d4="acsc",epe=["typed","config","Complex","BigNumber"],tpe=ae(d4,epe,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(d4,{number:function(a){return a<=-1||a>=1||t.predictable?nG(a):new r(a,0).acsc()},Complex:function(a){return a.acsc()},BigNumber:function(a){return new i(1).div(a).asin()}})}),h4="acsch",npe=["typed","BigNumber"],rpe=ae(h4,npe,n=>{var{typed:e,BigNumber:t}=n;return e(h4,{number:rG,Complex:function(i){return i.acsch()},BigNumber:function(i){return new t(1).div(i).asinh()}})}),p4="asec",ipe=["typed","config","Complex","BigNumber"],spe=ae(p4,ipe,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(p4,{number:function(a){return a<=-1||a>=1||t.predictable?iG(a):new r(a,0).asec()},Complex:function(a){return a.asec()},BigNumber:function(a){return new i(1).div(a).acos()}})}),m4="asech",ape=["typed","config","Complex","BigNumber"],ope=ae(m4,ape,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(m4,{number:function(a){if(a<=1&&a>=-1||t.predictable){var o=1/a;if(o>0||t.predictable)return sG(a);var l=Math.sqrt(o*o-1);return new r(Math.log(l-o),Math.PI)}return new r(a,0).asech()},Complex:function(a){return a.asech()},BigNumber:function(a){return new i(1).div(a).acosh()}})}),g4="asin",lpe=["typed","config","Complex"],upe=ae(g4,lpe,n=>{var{typed:e,config:t,Complex:r}=n;return e(g4,{number:function(s){return s>=-1&&s<=1||t.predictable?Math.asin(s):new r(s,0).asin()},Complex:function(s){return s.asin()},BigNumber:function(s){return s.asin()}})}),cpe="asinh",fpe=["typed"],dpe=ae(cpe,fpe,n=>{var{typed:e}=n;return e("asinh",{number:aG,Complex:function(r){return r.asinh()},BigNumber:function(r){return r.asinh()}})}),hpe="atan",ppe=["typed"],mpe=ae(hpe,ppe,n=>{var{typed:e}=n;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),v4="atan2",gpe=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],vpe=ae(v4,gpe,n=>{var{typed:e,matrix:t,equalScalar:r,BigNumber:i,DenseMatrix:s,concat:a}=n,o=Io({typed:e,equalScalar:r}),l=Ns({typed:e}),u=wG({typed:e,equalScalar:r}),c=Li({typed:e,equalScalar:r}),f=li({typed:e,DenseMatrix:s}),d=qn({typed:e,matrix:t,concat:a});return e(v4,{"number, number":Math.atan2,"BigNumber, BigNumber":(h,p)=>i.atan2(h,p)},d({scalar:"number | BigNumber",SS:u,DS:l,SD:o,Ss:c,sS:f}))}),y4="atanh",ype=["typed","config","Complex"],xpe=ae(y4,ype,n=>{var{typed:e,config:t,Complex:r}=n;return e(y4,{number:function(s){return s<=1&&s>=-1||t.predictable?oG(s):new r(s,0).atanh()},Complex:function(s){return s.atanh()},BigNumber:function(s){return s.atanh()}})}),Em=ae("trigUnit",["typed"],n=>{var{typed:e}=n;return{Unit:e.referToSelf(t=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,r.valueType())(r.value)})}}),x4="cos",bpe=["typed"],wpe=ae(x4,bpe,n=>{var{typed:e}=n,t=Em({typed:e});return e(x4,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},t)}),b4="cosh",Spe=["typed"],_pe=ae(b4,Spe,n=>{var{typed:e}=n;return e(b4,{number:wse,"Complex | BigNumber":t=>t.cosh()})}),w4="cot",Epe=["typed","BigNumber"],Mpe=ae(w4,Epe,n=>{var{typed:e,BigNumber:t}=n,r=Em({typed:e});return e(w4,{number:lG,Complex:i=>i.cot(),BigNumber:i=>new t(1).div(i.tan())},r)}),S4="coth",Cpe=["typed","BigNumber"],Ape=ae(S4,Cpe,n=>{var{typed:e,BigNumber:t}=n;return e(S4,{number:uG,Complex:r=>r.coth(),BigNumber:r=>new t(1).div(r.tanh())})}),_4="csc",Tpe=["typed","BigNumber"],Dpe=ae(_4,Tpe,n=>{var{typed:e,BigNumber:t}=n,r=Em({typed:e});return e(_4,{number:cG,Complex:i=>i.csc(),BigNumber:i=>new t(1).div(i.sin())},r)}),E4="csch",Npe=["typed","BigNumber"],Ppe=ae(E4,Npe,n=>{var{typed:e,BigNumber:t}=n;return e(E4,{number:fG,Complex:r=>r.csch(),BigNumber:r=>new t(1).div(r.sinh())})}),M4="sec",Rpe=["typed","BigNumber"],Ope=ae(M4,Rpe,n=>{var{typed:e,BigNumber:t}=n,r=Em({typed:e});return e(M4,{number:dG,Complex:i=>i.sec(),BigNumber:i=>new t(1).div(i.cos())},r)}),C4="sech",Ipe=["typed","BigNumber"],kpe=ae(C4,Ipe,n=>{var{typed:e,BigNumber:t}=n;return e(C4,{number:hG,Complex:r=>r.sech(),BigNumber:r=>new t(1).div(r.cosh())})}),A4="sin",Lpe=["typed"],Fpe=ae(A4,Lpe,n=>{var{typed:e}=n,t=Em({typed:e});return e(A4,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},t)}),T4="sinh",Bpe=["typed"],zpe=ae(T4,Bpe,n=>{var{typed:e}=n;return e(T4,{number:pG,"Complex | BigNumber":t=>t.sinh()})}),D4="tan",Upe=["typed"],$pe=ae(D4,Upe,n=>{var{typed:e}=n,t=Em({typed:e});return e(D4,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},t)}),Vpe="tanh",Hpe=["typed"],Wpe=ae(Vpe,Hpe,n=>{var{typed:e}=n;return e("tanh",{number:_se,"Complex | BigNumber":t=>t.tanh()})}),N4="setCartesian",Gpe=["typed","size","subset","compareNatural","Index","DenseMatrix"],jpe=ae(N4,Gpe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s,DenseMatrix:a}=n;return e(N4,{"Array | Matrix, Array | Matrix":function(l,u){var c=[];if(r(t(l),new s(0))!==0&&r(t(u),new s(0))!==0){var f=wn(Array.isArray(l)?l:l.toArray()).sort(i),d=wn(Array.isArray(u)?u:u.toArray()).sort(i);c=[];for(var h=0;h<f.length;h++)for(var p=0;p<d.length;p++)c.push([f[h],d[p]])}return Array.isArray(l)&&Array.isArray(u)?c:new a(c)}})}),P4="setDifference",qpe=["typed","size","subset","compareNatural","Index","DenseMatrix"],Xpe=ae(P4,qpe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s,DenseMatrix:a}=n;return e(P4,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(r(t(l),new s(0))===0)c=[];else{if(r(t(u),new s(0))===0)return wn(l.toArray());var f=Yp(wn(Array.isArray(l)?l:l.toArray()).sort(i)),d=Yp(wn(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var h,p=0;p<f.length;p++){h=!1;for(var v=0;v<d.length;v++)if(i(f[p].value,d[v].value)===0&&f[p].identifier===d[v].identifier){h=!0;break}h||c.push(f[p])}}return Array.isArray(l)&&Array.isArray(u)?oS(c):new a(oS(c))}})}),R4="setDistinct",Ype=["typed","size","subset","compareNatural","Index","DenseMatrix"],Kpe=ae(R4,Ype,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s,DenseMatrix:a}=n;return e(R4,{"Array | Matrix":function(l){var u;if(r(t(l),new s(0))===0)u=[];else{var c=wn(Array.isArray(l)?l:l.toArray()).sort(i);u=[],u.push(c[0]);for(var f=1;f<c.length;f++)i(c[f],c[f-1])!==0&&u.push(c[f])}return Array.isArray(l)?u:new a(u)}})}),O4="setIntersect",Zpe=["typed","size","subset","compareNatural","Index","DenseMatrix"],Jpe=ae(O4,Zpe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s,DenseMatrix:a}=n;return e(O4,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(r(t(l),new s(0))===0||r(t(u),new s(0))===0)c=[];else{var f=Yp(wn(Array.isArray(l)?l:l.toArray()).sort(i)),d=Yp(wn(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var h=0;h<f.length;h++)for(var p=0;p<d.length;p++)if(i(f[h].value,d[p].value)===0&&f[h].identifier===d[p].identifier){c.push(f[h]);break}}return Array.isArray(l)&&Array.isArray(u)?oS(c):new a(oS(c))}})}),I4="setIsSubset",Qpe=["typed","size","subset","compareNatural","Index"],eme=ae(I4,Qpe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s}=n;return e(I4,{"Array | Matrix, Array | Matrix":function(o,l){if(r(t(o),new s(0))===0)return!0;if(r(t(l),new s(0))===0)return!1;for(var u=Yp(wn(Array.isArray(o)?o:o.toArray()).sort(i)),c=Yp(wn(Array.isArray(l)?l:l.toArray()).sort(i)),f,d=0;d<u.length;d++){f=!1;for(var h=0;h<c.length;h++)if(i(u[d].value,c[h].value)===0&&u[d].identifier===c[h].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),k4="setMultiplicity",tme=["typed","size","subset","compareNatural","Index"],nme=ae(k4,tme,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s}=n;return e(k4,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,l){if(r(t(l),new s(0))===0)return 0;for(var u=wn(Array.isArray(l)?l:l.toArray()),c=0,f=0;f<u.length;f++)i(u[f],o)===0&&c++;return c}})}),L4="setPowerset",rme=["typed","size","subset","compareNatural","Index"],ime=ae(L4,rme,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s}=n;return e(L4,{"Array | Matrix":function(u){if(r(t(u),new s(0))===0)return[];for(var c=wn(Array.isArray(u)?u:u.toArray()).sort(i),f=[],d=0;d.toString(2).length<=c.length;)f.push(a(c,d.toString(2).split("").reverse())),d++;return o(f)}});function a(l,u){for(var c=[],f=0;f<u.length;f++)u[f]==="1"&&c.push(l[f]);return c}function o(l){for(var u=[],c=l.length-1;c>0;c--)for(var f=0;f<c;f++)l[f].length>l[f+1].length&&(u=l[f],l[f]=l[f+1],l[f+1]=u);return l}}),F4="setSize",sme=["typed","compareNatural"],ame=ae(F4,sme,n=>{var{typed:e,compareNatural:t}=n;return e(F4,{"Array | Matrix":function(i){return Array.isArray(i)?wn(i).length:wn(i.toArray()).length},"Array | Matrix, boolean":function(i,s){if(s===!1||i.length===0)return Array.isArray(i)?wn(i).length:wn(i.toArray()).length;for(var a=wn(Array.isArray(i)?i:i.toArray()).sort(t),o=1,l=1;l<a.length;l++)t(a[l],a[l-1])!==0&&o++;return o}})}),B4="setSymDifference",ome=["typed","size","concat","subset","setDifference","Index"],lme=ae(B4,ome,n=>{var{typed:e,size:t,concat:r,subset:i,setDifference:s,Index:a}=n;return e(B4,{"Array | Matrix, Array | Matrix":function(l,u){if(i(t(l),new a(0))===0)return wn(u);if(i(t(u),new a(0))===0)return wn(l);var c=wn(l),f=wn(u);return r(s(c,f),s(f,c))}})}),z4="setUnion",ume=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],cme=ae(z4,ume,n=>{var{typed:e,size:t,concat:r,subset:i,setIntersect:s,setSymDifference:a,Index:o}=n;return e(z4,{"Array | Matrix, Array | Matrix":function(u,c){if(i(t(u),new o(0))===0)return wn(c);if(i(t(c),new o(0))===0)return wn(u);var f=wn(u),d=wn(c);return r(a(f,d),s(f,d))}})}),U4="add",fme=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],dme=ae(U4,fme,n=>{var{typed:e,matrix:t,addScalar:r,equalScalar:i,DenseMatrix:s,SparseMatrix:a,concat:o}=n,l=af({typed:e}),u=yP({typed:e,equalScalar:i}),c=Bd({typed:e,DenseMatrix:s}),f=qn({typed:e,matrix:t,concat:o});return e(U4,{"any, any":r,"any, any, ...any":e.referToSelf(d=>(h,p,v)=>{for(var y=d(h,p),m=0;m<v.length;m++)y=d(y,v[m]);return y})},f({elop:r,DS:l,SS:u,Ss:c}))}),$4="hypot",hme=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],pme=ae($4,hme,n=>{var{typed:e,abs:t,addScalar:r,divideScalar:i,multiplyScalar:s,sqrt:a,smaller:o,isPositive:l}=n;return e($4,{"... number | BigNumber":u,Array:u,Matrix:c=>u(wn(c.toArray()))});function u(c){for(var f=0,d=0,h=0;h<c.length;h++){if(Mo(c[h]))throw new TypeError("Unexpected type of argument to hypot");var p=t(c[h]);o(d,p)?(f=s(f,s(i(d,p),i(d,p))),f=r(f,1),d=p):f=r(f,l(p)?s(i(p,d),i(p,d)):p)}return s(d,a(f))}}),V4="norm",mme=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],gme=ae(V4,mme,n=>{var{typed:e,abs:t,add:r,pow:i,conj:s,sqrt:a,multiply:o,equalScalar:l,larger:u,smaller:c,matrix:f,ctranspose:d,eigs:h}=n;return e(V4,{number:Math.abs,Complex:function(A){return A.abs()},BigNumber:function(A){return A.abs()},boolean:function(A){return Math.abs(A)},Array:function(A){return x(f(A),2)},Matrix:function(A){return x(A,2)},"Array, number | BigNumber | string":function(A,N){return x(f(A),N)},"Matrix, number | BigNumber | string":function(A,N){return x(A,N)}});function p(M){var A=0;return M.forEach(function(N){var C=t(N);u(C,A)&&(A=C)},!0),A}function v(M){var A;return M.forEach(function(N){var C=t(N);(!A||c(C,A))&&(A=C)},!0),A||0}function y(M,A){if(A===Number.POSITIVE_INFINITY||A==="inf")return p(M);if(A===Number.NEGATIVE_INFINITY||A==="-inf")return v(M);if(A==="fro")return x(M,2);if(typeof A=="number"&&!isNaN(A)){if(!l(A,0)){var N=0;return M.forEach(function(C){N=r(i(t(C),A),N)},!0),i(N,1/A)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function m(M){var A=0;return M.forEach(function(N,C){A=r(A,o(N,s(N)))}),t(a(A))}function S(M){var A=[],N=0;return M.forEach(function(C,T){var R=T[1],U=r(A[R]||0,t(C));u(U,N)&&(N=U),A[R]=U},!0),N}function b(M){var A=M.size();if(A[0]!==A[1])throw new RangeError("Invalid matrix dimensions");var N=d(M),C=o(N,M),T=h(C).values.toArray(),R=T[T.length-1];return t(a(R))}function g(M){var A=[],N=0;return M.forEach(function(C,T){var R=T[0],U=r(A[R]||0,t(C));u(U,N)&&(N=U),A[R]=U},!0),N}function w(M,A){if(A===1)return S(M);if(A===Number.POSITIVE_INFINITY||A==="inf")return g(M);if(A==="fro")return m(M);if(A===2)return b(M);throw new Error("Unsupported parameter value "+A)}function x(M,A){var N=M.size();if(N.length===1)return y(M,A);if(N.length===2){if(N[0]&&N[1])return w(M,A);throw new RangeError("Invalid matrix dimensions")}}}),H4="dot",vme=["typed","addScalar","multiplyScalar","conj","size"],yme=ae(H4,vme,n=>{var{typed:e,addScalar:t,multiplyScalar:r,conj:i,size:s}=n;return e(H4,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":l});function a(c,f){var d=u(c),h=u(f),p,v;if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)v=h[0];else if(h.length===2&&h[1]===1)v=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(p!==v)throw new RangeError("Vectors must have equal length ("+p+" != "+v+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function o(c,f){var d=a(c,f),h=Ut(c)?c._data:c,p=Ut(c)?c._datatype||c.getDataType():void 0,v=Ut(f)?f._data:f,y=Ut(f)?f._datatype||f.getDataType():void 0,m=u(c).length===2,S=u(f).length===2,b=t,g=r;if(p&&y&&p===y&&typeof p=="string"&&p!=="mixed"){var w=p;b=e.find(t,[w,w]),g=e.find(r,[w,w])}if(!m&&!S){for(var x=g(i(h[0]),v[0]),M=1;M<d;M++)x=b(x,g(i(h[M]),v[M]));return x}if(!m&&S){for(var A=g(i(h[0]),v[0][0]),N=1;N<d;N++)A=b(A,g(i(h[N]),v[N][0]));return A}if(m&&!S){for(var C=g(i(h[0][0]),v[0]),T=1;T<d;T++)C=b(C,g(i(h[T][0]),v[T]));return C}if(m&&S){for(var R=g(i(h[0][0]),v[0][0]),U=1;U<d;U++)R=b(R,g(i(h[U][0]),v[U][0]));return R}}function l(c,f){a(c,f);for(var d=c._index,h=c._values,p=f._index,v=f._values,y=0,m=t,S=r,b=0,g=0;b<d.length&&g<p.length;){var w=d[b],x=p[g];if(w<x){b++;continue}if(w>x){g++;continue}w===x&&(y=m(y,S(h[b],v[g])),b++,g++)}return y}function u(c){return Ut(c)?c.size():s(c)}}),xme="trace",bme=["typed","matrix","add"],wme=ae(xme,bme,n=>{var{typed:e,matrix:t,add:r}=n;return e("trace",{Array:function(o){return i(t(o))},SparseMatrix:s,DenseMatrix:i,any:Xt});function i(a){var o=a._size,l=a._data;switch(o.length){case 1:if(o[0]===1)return Xt(l[0]);throw new RangeError("Matrix must be square (size: "+un(o)+")");case 2:{var u=o[0],c=o[1];if(u===c){for(var f=0,d=0;d<u;d++)f=r(f,l[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+un(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+un(o)+")")}}function s(a){var o=a._values,l=a._index,u=a._ptr,c=a._size,f=c[0],d=c[1];if(f===d){var h=0;if(o.length>0)for(var p=0;p<d;p++)for(var v=u[p],y=u[p+1],m=v;m<y;m++){var S=l[m];if(S===p){h=r(h,o[m]);break}if(S>p)break}return h}throw new RangeError("Matrix must be square (size: "+un(c)+")")}}),W4="index",Sme=["typed","Index"],_me=ae(W4,Sme,n=>{var{typed:e,Index:t}=n;return e(W4,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var s=i.map(function(o){return Jt(o)?o.toNumber():_n(o)||Ut(o)?o.map(function(l){return Jt(l)?l.toNumber():l}):o}),a=new t;return t.apply(a,s),a}})}),zG=new Set(["end"]),Eme="Node",Mme=["mathWithTransform"],Cme=ae(Eme,Mme,n=>{var{mathWithTransform:e}=n;function t(i){for(var s of[...zG])if(i.has(s))throw new Error('Scope contains an illegal symbol, "'+s+'" is a reserved keyword')}class r{get type(){return"Node"}get isNode(){return!0}evaluate(s){return this.compile().evaluate(s)}compile(){var s=this._compile(e,{}),a={},o=null;function l(u){var c=Mp(u);return t(c),s(c,a,o)}return{evaluate:l}}_compile(s,a){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(s){throw new Error("Cannot run forEach on a Node interface")}map(s){throw new Error("Cannot run map on a Node interface")}_ifNode(s){if(!In(s))throw new TypeError("Callback function must return a Node");return s}traverse(s){s(this,null,null);function a(o,l){o.forEach(function(u,c,f){l(u,c,f),a(u,l)})}a(this,s)}transform(s){function a(o,l,u){var c=s(o,l,u);return c!==o?c:o.map(a)}return a(this,null,null)}filter(s){var a=[];return this.traverse(function(o,l,u){s(o,l,u)&&a.push(o)}),a}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(s){return s.cloneDeep()})}equals(s){return s?this.type===s.type&&bd(this,s):!1}toString(s){var a=this._getCustomString(s);return typeof a<"u"?a:this._toString(s)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(s){var a=this._getCustomString(s);return typeof a<"u"?a:this._toHTML(s)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(s){var a=this._getCustomString(s);return typeof a<"u"?a:this._toTex(s)}_toTex(s){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(s){if(s&&typeof s=="object")switch(typeof s.handler){case"object":case"undefined":return;case"function":return s.handler(this,s);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return r},{isClass:!0,isNode:!0});function Ps(n){return n&&n.isIndexError?new ao(n.index+1,n.min+1,n.max!==void 0?n.max+1:void 0):n}function UG(n){var{subset:e}=n;return function(r,i){try{if(Array.isArray(r))return e(r,i);if(r&&typeof r.subset=="function")return r.subset(i);if(typeof r=="string")return e(r,i);if(typeof r=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return ws(r,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(s){throw Ps(s)}}}var X1="AccessorNode",Ame=["subset","Node"],Tme=ae(X1,Ame,n=>{var{subset:e,Node:t}=n,r=UG({subset:e});function i(a){return!(Uc(a)||ua(a)||vn(a)||bu(a)||ry(a)||wl(a)||ii(a))}class s extends t{constructor(o,l){if(super(),!In(o))throw new TypeError('Node expected for parameter "object"');if(!Fd(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=l}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return X1}get isAccessorNode(){return!0}_compile(o,l){var u=this.object._compile(o,l),c=this.index._compile(o,l);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(h,p,v){return ws(u(h,p,v),f)}}else return function(h,p,v){var y=u(h,p,v),m=c(h,p,y);return r(y,m)}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new s(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)))}clone(){return new s(this.object,this.index)}_toString(o){var l=this.object.toString(o);return i(this.object)&&(l="("+l+")"),l+this.index.toString(o)}_toHTML(o){var l=this.object.toHTML(o);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(o)}_toTex(o){var l=this.object.toTex(o);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(o)}toJSON(){return{mathjs:X1,object:this.object,index:this.index}}static fromJSON(o){return new s(o.object,o.index)}}return hr(s,"name",X1),s},{isClass:!0,isNode:!0}),Y1="ArrayNode",Dme=["Node"],Nme=ae(Y1,Dme,n=>{var{Node:e}=n;class t extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(In))throw new TypeError("Array containing Nodes expected")}get type(){return Y1}get isArrayNode(){return!0}_compile(i,s){var a=uu(this.items,function(u){return u._compile(i,s)}),o=i.config.matrix!=="Array";if(o){var l=i.matrix;return function(c,f,d){return l(uu(a,function(h){return h(c,f,d)}))}}else return function(c,f,d){return uu(a,function(h){return h(c,f,d)})}}forEach(i){for(var s=0;s<this.items.length;s++){var a=this.items[s];i(a,"items["+s+"]",this)}}map(i){for(var s=[],a=0;a<this.items.length;a++)s[a]=this._ifNode(i(this.items[a],"items["+a+"]",this));return new t(s)}clone(){return new t(this.items.slice(0))}_toString(i){var s=this.items.map(function(a){return a.toString(i)});return"["+s.join(", ")+"]"}toJSON(){return{mathjs:Y1,items:this.items}}static fromJSON(i){return new t(i.items)}_toHTML(i){var s=this.items.map(function(a){return a.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function s(a,o){var l=a.some(ua)&&!a.every(ua),u=o||l,c=u?"&":"\\\\",f=a.map(function(d){return d.items?s(d.items,!o):d.toTex(i)}).join(c);return l||!u||u&&!o?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return s(this.items,!1)}}return hr(t,"name",Y1),t},{isClass:!0,isNode:!0});function Pme(n){var{subset:e,matrix:t}=n;return function(i,s,a){try{if(Array.isArray(i)){var o=t(i).subset(s,a).valueOf();return o.forEach((l,u)=>{i[u]=l}),i}else{if(i&&typeof i.subset=="function")return i.subset(s,a);if(typeof i=="string")return e(i,s,a);if(typeof i=="object"){if(!s.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Gp(i,s.getObjectProperty(),a),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw Ps(l)}}}var bo=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function K1(n,e){if(!e||e!=="auto")return n;for(var t=n;wl(t);)t=t.content;return t}function zn(n,e,t,r){var i=n;e!=="keep"&&(i=n.getContent());for(var s=i.getIdentifier(),a=null,o=0;o<bo.length;o++)if(s in bo[o]){a=o;break}if(s==="OperatorNode:multiply"&&i.implicit&&t!=="show"){var l=K1(i.args[0],e);!(vn(l)&&r&&r.getIdentifier()==="OperatorNode:divide"&&TT(K1(r.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&TT(K1(l.args[0],e))&&vn(K1(l.args[1])))&&(a+=1)}return a}function yg(n,e){var t=n;e!=="keep"&&(t=n.getContent());var r=t.getIdentifier(),i=zn(t,e);if(i===null)return null;var s=bo[i][r];if(gt(s,"associativity")){if(s.associativity==="left")return"left";if(s.associativity==="right")return"right";throw Error("'"+r+"' has the invalid associativity '"+s.associativity+"'.")}return null}function H2(n,e,t){var r=t!=="keep"?n.getContent():n,i=t!=="keep"?n.getContent():e,s=r.getIdentifier(),a=i.getIdentifier(),o=zn(r,t);if(o===null)return null;var l=bo[o][s];if(gt(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===a)return!0;return!1}return null}function Rme(n){var e="OperatorNode:"+n;for(var t of bo)if(e in t)return t[e].op;return null}var Z1="AssignmentNode",Ome=["subset","?matrix","Node"],Ime=ae(Z1,Ome,n=>{var{subset:e,matrix:t,Node:r}=n,i=UG({subset:e}),s=Pme({subset:e,matrix:t});function a(l,u,c){u||(u="keep");var f=zn(l,u,c),d=zn(l.value,u,c);return u==="all"||d!==null&&d<=f}class o extends r{constructor(u,c,f){if(super(),this.object=u,this.index=f?c:null,this.value=f||c,!ii(u)&&!Uc(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(ii(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!Fd(this.index))throw new TypeError('IndexNode expected as "index"');if(!In(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return Z1}get isAssignmentNode(){return!0}_compile(u,c){var f=this.object._compile(u,c),d=this.index?this.index._compile(u,c):null,h=this.value._compile(u,c),p=this.object.name;if(this.index)if(this.index.isObjectProperty()){var v=this.index.getObjectProperty();return function(g,w,x){var M=f(g,w,x),A=h(g,w,x);return Gp(M,v,A),A}}else{if(ii(this.object))return function(g,w,x){var M=f(g,w,x),A=h(g,w,x),N=d(g,w,M);return g.set(p,s(M,N,A)),A};var y=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var m=this.object.index.getObjectProperty();return function(g,w,x){var M=y(g,w,x),A=ws(M,m),N=d(g,w,A),C=h(g,w,x);return Gp(M,m,s(A,N,C)),C}}else{var S=this.object.index._compile(u,c);return function(g,w,x){var M=y(g,w,x),A=S(g,w,M),N=i(M,A),C=d(g,w,N),T=h(g,w,x);return s(M,A,s(N,C,T)),T}}}else{if(!ii(this.object))throw new TypeError("SymbolNode expected as object");return function(g,w,x){var M=h(g,w,x);return g.set(p,M),M}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),f=this.index?this._ifNode(u(this.index,"index",this)):null,d=this._ifNode(u(this.value,"value",this));return new o(c,f,d)}clone(){return new o(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),f=this.index?this.index.toString(u):"",d=this.value.toString(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:Z1,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new o(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),f=this.index?this.index.toHTML(u):"",d=this.value.toHTML(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(u){var c=this.object.toTex(u),f=this.index?this.index.toTex(u):"",d=this.value.toTex(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return hr(o,"name",Z1),o},{isClass:!0,isNode:!0}),J1="BlockNode",kme=["ResultSet","Node"],Lme=ae(J1,kme,n=>{var{ResultSet:e,Node:t}=n;class r extends t{constructor(s){if(super(),!Array.isArray(s))throw new Error("Array expected");this.blocks=s.map(function(a){var o=a&&a.node,l=a&&a.visible!==void 0?a.visible:!0;if(!In(o))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:l}})}get type(){return J1}get isBlockNode(){return!0}_compile(s,a){var o=uu(this.blocks,function(l){return{evaluate:l.node._compile(s,a),visible:l.visible}});return function(u,c,f){var d=[];return $_(o,function(p){var v=p.evaluate(u,c,f);p.visible&&d.push(v)}),new e(d)}}forEach(s){for(var a=0;a<this.blocks.length;a++)s(this.blocks[a].node,"blocks["+a+"].node",this)}map(s){for(var a=[],o=0;o<this.blocks.length;o++){var l=this.blocks[o],u=this._ifNode(s(l.node,"blocks["+o+"].node",this));a[o]={node:u,visible:l.visible}}return new r(a)}clone(){var s=this.blocks.map(function(a){return{node:a.node,visible:a.visible}});return new r(s)}_toString(s){return this.blocks.map(function(a){return a.node.toString(s)+(a.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:J1,blocks:this.blocks}}static fromJSON(s){return new r(s.blocks)}_toHTML(s){return this.blocks.map(function(a){return a.node.toHTML(s)+(a.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(s){return this.blocks.map(function(a){return a.node.toTex(s)+(a.visible?"":";")}).join(`\\;\\;
`)}}return hr(r,"name",J1),r},{isClass:!0,isNode:!0}),Q1="ConditionalNode",Fme=["Node"],Bme=ae(Q1,Fme,n=>{var{Node:e}=n;function t(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(Jt(i))return!i.isZero();if(Mo(i))return!!(i.re||i.im);if(zs(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+$n(i)+'"')}class r extends e{constructor(s,a,o){if(super(),!In(s))throw new TypeError("Parameter condition must be a Node");if(!In(a))throw new TypeError("Parameter trueExpr must be a Node");if(!In(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=s,this.trueExpr=a,this.falseExpr=o}get type(){return Q1}get isConditionalNode(){return!0}_compile(s,a){var o=this.condition._compile(s,a),l=this.trueExpr._compile(s,a),u=this.falseExpr._compile(s,a);return function(f,d,h){return t(o(f,d,h))?l(f,d,h):u(f,d,h)}}forEach(s){s(this.condition,"condition",this),s(this.trueExpr,"trueExpr",this),s(this.falseExpr,"falseExpr",this)}map(s){return new r(this._ifNode(s(this.condition,"condition",this)),this._ifNode(s(this.trueExpr,"trueExpr",this)),this._ifNode(s(this.falseExpr,"falseExpr",this)))}clone(){return new r(this.condition,this.trueExpr,this.falseExpr)}_toString(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=zn(this,a,s&&s.implicit),l=this.condition.toString(s),u=zn(this.condition,a,s&&s.implicit);(a==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l="("+l+")");var c=this.trueExpr.toString(s),f=zn(this.trueExpr,a,s&&s.implicit);(a==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c="("+c+")");var d=this.falseExpr.toString(s),h=zn(this.falseExpr,a,s&&s.implicit);return(a==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=o)&&(d="("+d+")"),l+" ? "+c+" : "+d}toJSON(){return{mathjs:Q1,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(s){return new r(s.condition,s.trueExpr,s.falseExpr)}_toHTML(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=zn(this,a,s&&s.implicit),l=this.condition.toHTML(s),u=zn(this.condition,a,s&&s.implicit);(a==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(s),f=zn(this.trueExpr,a,s&&s.implicit);(a==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(s),h=zn(this.falseExpr,a,s&&s.implicit);return(a==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=o)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(s){return"\\begin{cases} {"+this.trueExpr.toTex(s)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(s)+"}\\\\{"+this.falseExpr.toTex(s)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return hr(r,"name",Q1),r},{isClass:!0,isNode:!0}),UT=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zme={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},Ume={"–":"\\--","—":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},$me=function(e,t){return UT({},e,t)},Vme=function(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.preserveFormatting,r=t===void 0?!1:t,i=e.escapeMapFn,s=i===void 0?$me:i,a=String(n),o="",l=s(UT({},zme),r?UT({},Ume):{}),u=Object.keys(l),c=function(){var d=!1;u.forEach(function(h,p){d||a.length>=h.length&&a.slice(0,h.length)===h&&(o+=l[u[p]],a=a.slice(h.length,a.length),d=!0)}),d||(o+=a.slice(0,1),a=a.slice(1,a.length))};a;)c();return o};const Hme=so(Vme);var $T={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},xn={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},G4={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(xn.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(xn.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(xn.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(xn.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(xn.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(xn.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(xn.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(xn.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(xn.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(xn.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(xn.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(xn.bitAnd,"${args[1]}\\right)")},bitNot:{1:xn.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(xn.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(xn.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(xn.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(xn.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(xn.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(xn.and,"${args[1]}\\right)")},not:{1:xn.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(xn.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(xn.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(xn.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(xn.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(xn.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(xn.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(xn.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(xn.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(xn.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(xn.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(xn.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(xn.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(xn.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat($T.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},Wme="\\mathrm{${name}}\\left(${args}\\right)",j4={deg:"^\\circ"};function VT(n){return Hme(n,{preserveFormatting:!0})}function $G(n,e){return e=typeof e>"u"?!1:e,e?gt(j4,n)?j4[n]:"\\mathrm{"+VT(n)+"}":gt($T,n)?$T[n]:VT(n)}var ex="ConstantNode",Gme=["Node"],jme=ae(ex,Gme,n=>{var{Node:e}=n;class t extends e{constructor(i){super(),this.value=i}get type(){return ex}get isConstantNode(){return!0}_compile(i,s){var a=this.value;return function(){return a}}forEach(i){}map(i){return this.clone()}clone(){return new t(this.value)}_toString(i){return un(this.value,i)}_toHTML(i){var s=this._toString(i);switch($n(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+s+"</span>";case"string":return'<span class="math-string">'+s+"</span>";case"boolean":return'<span class="math-boolean">'+s+"</span>";case"null":return'<span class="math-null-symbol">'+s+"</span>";case"undefined":return'<span class="math-undefined">'+s+"</span>";default:return'<span class="math-symbol">'+s+"</span>"}}toJSON(){return{mathjs:ex,value:this.value}}static fromJSON(i){return new t(i.value)}_toTex(i){var s=this._toString(i),a=$n(this.value);switch(a){case"string":return"\\mathtt{"+VT(s)+"}";case"number":case"BigNumber":{var o=a==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!o)return this.value.valueOf()<0?"-\\infty":"\\infty";var l=s.toLowerCase().indexOf("e");return l!==-1?s.substring(0,l)+"\\cdot10^{"+s.substring(l+1)+"}":s}case"Fraction":return this.value.toLatex();default:return s}}}return hr(t,"name",ex),t},{isClass:!0,isNode:!0}),tx="FunctionAssignmentNode",qme=["typed","Node"],Xme=ae(tx,qme,n=>{var{typed:e,Node:t}=n;function r(s,a,o){var l=zn(s,a,o),u=zn(s.expr,a,o);return a==="all"||u!==null&&u<=l}class i extends t{constructor(a,o,l){if(super(),typeof a!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!In(l))throw new TypeError('Node expected for parameter "expr"');if(zG.has(a))throw new Error('Illegal function name, "'+a+'" is a reserved keyword');var u=new Set;for(var c of o){var f=typeof c=="string"?c:c.name;if(u.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));u.add(f)}this.name=a,this.params=o.map(function(d){return d&&d.name||d}),this.types=o.map(function(d){return d&&d.type||"any"}),this.expr=l}get type(){return tx}get isFunctionAssignmentNode(){return!0}_compile(a,o){var l=Object.create(o);$_(this.params,function(p){l[p]=!0});var u=this.expr._compile(a,l),c=this.name,f=this.params,d=jL(this.types,","),h=c+"("+jL(this.params,", ")+")";return function(v,y,m){var S={};S[d]=function(){for(var g=Object.create(y),w=0;w<f.length;w++)g[f[w]]=arguments[w];return u(v,g,m)};var b=e(c,S);return b.syntax=h,v.set(c,b),b}}forEach(a){a(this.expr,"expr",this)}map(a){var o=this._ifNode(a(this.expr,"expr",this));return new i(this.name,this.params.slice(0),o)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=this.expr.toString(a);return r(this,o,a&&a.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var a=this.types;return{mathjs:tx,name:this.name,params:this.params.map(function(o,l){return{name:o,type:a[l]}}),expr:this.expr}}static fromJSON(a){return new i(a.name,a.params,a.expr)}_toHTML(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+Wa(this.params[u])+"</span>");var c=this.expr.toHTML(a);return r(this,o,a&&a.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Wa(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=this.expr.toTex(a);return r(this,o,a&&a.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map($G).join(",")+"\\right)="+l}}return hr(i,"name",tx),i},{isClass:!0,isNode:!0}),nx="IndexNode",Yme=["Node","size"],Kme=ae(nx,Yme,n=>{var{Node:e,size:t}=n;class r extends e{constructor(s,a){if(super(),this.dimensions=s,this.dotNotation=a||!1,!Array.isArray(s)||!s.every(In))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return nx}get isIndexNode(){return!0}_compile(s,a){var o=uu(this.dimensions,function(u,c){var f=u.filter(p=>p.isSymbolNode&&p.name==="end").length>0;if(f){var d=Object.create(a);d.end=!0;var h=u._compile(s,d);return function(v,y,m){if(!Ut(m)&&!_n(m)&&!Ai(m))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+$n(m));var S=t(m).valueOf(),b=Object.create(y);return b.end=S[c],h(v,b,m)}}else return u._compile(s,a)}),l=ws(s,"index");return function(c,f,d){var h=uu(o,function(p){return p(c,f,d)});return l(...h)}}forEach(s){for(var a=0;a<this.dimensions.length;a++)s(this.dimensions[a],"dimensions["+a+"]",this)}map(s){for(var a=[],o=0;o<this.dimensions.length;o++)a[o]=this._ifNode(s(this.dimensions[o],"dimensions["+o+"]",this));return new r(a,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&vn(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(s){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:nx,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(s){return new r(s.dimensions,s.dotNotation)}_toHTML(s){for(var a=[],o=0;o<this.dimensions.length;o++)a[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Wa(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(s){var a=this.dimensions.map(function(o){return o.toTex(s)});return this.dotNotation?"."+this.getObjectProperty():"_{"+a.join(",")+"}"}}return hr(r,"name",nx),r},{isClass:!0,isNode:!0}),rx="ObjectNode",Zme=["Node"],Jme=ae(rx,Zme,n=>{var{Node:e}=n;class t extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(s){return In(i[s])})))throw new TypeError("Object containing Nodes expected")}get type(){return rx}get isObjectNode(){return!0}_compile(i,s){var a={};for(var o in this.properties)if(gt(this.properties,o)){var l=lp(o),u=JSON.parse(l),c=ws(this.properties,o);a[u]=c._compile(i,s)}return function(d,h,p){var v={};for(var y in a)gt(a,y)&&(v[y]=a[y](d,h,p));return v}}forEach(i){for(var s in this.properties)gt(this.properties,s)&&i(this.properties[s],"properties["+lp(s)+"]",this)}map(i){var s={};for(var a in this.properties)gt(this.properties,a)&&(s[a]=this._ifNode(i(this.properties[a],"properties["+lp(a)+"]",this)));return new t(s)}clone(){var i={};for(var s in this.properties)gt(this.properties,s)&&(i[s]=this.properties[s]);return new t(i)}_toString(i){var s=[];for(var a in this.properties)gt(this.properties,a)&&s.push(lp(a)+": "+this.properties[a].toString(i));return"{"+s.join(", ")+"}"}toJSON(){return{mathjs:rx,properties:this.properties}}static fromJSON(i){return new t(i.properties)}_toHTML(i){var s=[];for(var a in this.properties)gt(this.properties,a)&&s.push('<span class="math-symbol math-property">'+Wa(a)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[a].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var s=[];for(var a in this.properties)gt(this.properties,a)&&s.push("\\mathbf{"+a+":} & "+this.properties[a].toTex(i)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+s.join(`
`)+"\\end{array}\\right\\}";return o}}return hr(t,"name",rx),t},{isClass:!0,isNode:!0});function Kg(n,e){return new KH(n,new F_(e),new Set(Object.keys(e)))}var ix="OperatorNode",Qme=["Node"],ege=ae(ix,Qme,n=>{var{Node:e}=n;function t(s,a){var o=s;if(a==="auto")for(;wl(o);)o=o.content;return vn(o)?!0:Br(o)?t(o.args[0],a):!1}function r(s,a,o,l,u){var c=zn(s,a,o),f=yg(s,a);if(a==="all"||l.length>2&&s.getIdentifier()!=="OperatorNode:add"&&s.getIdentifier()!=="OperatorNode:multiply")return l.map(function(C){switch(C.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(l.length){case 0:d=[];break;case 1:{var h=zn(l[0],a,o,s);if(u&&h!==null){var p,v;if(a==="keep"?(p=l[0].getIdentifier(),v=s.getIdentifier()):(p=l[0].getContent().getIdentifier(),v=s.getContent().getIdentifier()),bo[c][v].latexLeftParens===!1){d=[!1];break}if(bo[h][p].latexParens===!1){d=[!1];break}}if(h===null){d=[!1];break}if(h<=c){d=[!0];break}d=[!1]}break;case 2:{var y,m=zn(l[0],a,o,s),S=H2(s,l[0],a);m===null?y=!1:m===c&&f==="right"&&!S||m<c?y=!0:y=!1;var b,g=zn(l[1],a,o,s),w=H2(s,l[1],a);if(g===null?b=!1:g===c&&f==="left"&&!w||g<c?b=!0:b=!1,u){var x,M,A;a==="keep"?(x=s.getIdentifier(),M=s.args[0].getIdentifier(),A=s.args[1].getIdentifier()):(x=s.getContent().getIdentifier(),M=s.args[0].getContent().getIdentifier(),A=s.args[1].getContent().getIdentifier()),m!==null&&(bo[c][x].latexLeftParens===!1&&(y=!1),bo[m][M].latexParens===!1&&(y=!1)),g!==null&&(bo[c][x].latexRightParens===!1&&(b=!1),bo[g][A].latexParens===!1&&(b=!1))}d=[y,b]}break;default:(s.getIdentifier()==="OperatorNode:add"||s.getIdentifier()==="OperatorNode:multiply")&&(d=l.map(function(C){var T=zn(C,a,o,s),R=H2(s,C,a),U=yg(C,a);return T===null?!1:c===T&&f===U&&!R?!0:T<c}));break}if(l.length>=2&&s.getIdentifier()==="OperatorNode:multiply"&&s.implicit&&a!=="all"&&o==="hide")for(var N=1;N<d.length;++N)t(l[N],a)&&!d[N-1]&&(a!=="keep"||!wl(l[N-1]))&&(d[N]=!0);return d}class i extends e{constructor(a,o,l,u,c){if(super(),typeof a!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(In))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=a,this.fn=o,this.args=l||[]}get type(){return ix}get isOperatorNode(){return!0}_compile(a,o){if(typeof this.fn!="string"||!dP(a,this.fn))throw a[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=ws(a,this.fn),u=uu(this.args,function(p){return p._compile(a,o)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(v,y,m){return l(c,a,Kg(v,y))}}else if(u.length===1){var f=u[0];return function(v,y,m){return l(f(v,y,m))}}else if(u.length===2){var d=u[0],h=u[1];return function(v,y,m){return l(d(v,y,m),h(v,y,m))}}else return function(v,y,m){return l.apply(null,uu(u,function(S){return S(v,y,m)}))}}forEach(a){for(var o=0;o<this.args.length;o++)a(this.args[o],"args["+o+"]",this)}map(a){for(var o=[],l=0;l<this.args.length;l++)o[l]=this._ifNode(a(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=r(this,o,l,u,!1);if(u.length===1){var f=yg(this,o),d=u[0].toString(a);c[0]&&(d="("+d+")");var h=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(h?" ":"")+d:f==="left"?d+(h?" ":"")+this.op:d+this.op}else if(u.length===2){var p=u[0].toString(a),v=u[1].toString(a);return c[0]&&(p="("+p+")"),c[1]&&(v="("+v+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?p+" "+v:p+" "+this.op+" "+v}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=u.map(function(m,S){return m=m.toString(a),c[S]&&(m="("+m+")"),m});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?y.join(" "):y.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:ix,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(a){return new i(a.op,a.fn,a.args,a.implicit,a.isPercentage)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=r(this,o,l,u,!1);if(u.length===1){var f=yg(this,o),d=u[0].toHTML(a);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Wa(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Wa(this.op)+"</span>"}else if(u.length===2){var h=u[0].toHTML(a),p=u[1].toHTML(a);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?h+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:h+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Wa(this.op)+"</span>"+p}else{var v=u.map(function(y,m){return y=y.toHTML(a),c[m]&&(y='<span class="math-parenthesis math-round-parenthesis">(</span>'+y+'<span class="math-parenthesis math-round-parenthesis">)</span>'),y});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?v.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):v.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Wa(this.op)+"</span>"):'<span class="math-function">'+Wa(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+v.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=r(this,o,l,u,!0),f=xn[this.fn];if(f=typeof f>"u"?this.op:f,u.length===1){var d=yg(this,o),h=u[0].toTex(a);return c[0]&&(h="\\left(".concat(h,"\\right)")),d==="right"?f+h:h+f}else if(u.length===2){var p=u[0],v=p.toTex(a);c[0]&&(v="\\left(".concat(v,"\\right)"));var y=u[1],m=y.toTex(a);c[1]&&(m="\\left(".concat(m,"\\right)"));var S;switch(o==="keep"?S=p.getIdentifier():S=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+v+"}{"+m+"}";case"OperatorNode:pow":switch(v="{"+v+"}",m="{"+m+"}",S){case"ConditionalNode":case"OperatorNode:divide":v="\\left(".concat(v,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return v+"~"+m}return v+f+m}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=u.map(function(g,w){return g=g.toTex(a),c[w]&&(g="\\left(".concat(g,"\\right)")),g});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?b.join("~"):b.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(g){return g.toTex(a)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return hr(i,"name",ix),i},{isClass:!0,isNode:!0}),sx="ParenthesisNode",tge=["Node"],nge=ae(sx,tge,n=>{var{Node:e}=n;class t extends e{constructor(i){if(super(),!In(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return sx}get isParenthesisNode(){return!0}_compile(i,s){return this.content._compile(i,s)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var s=i(this.content,"content",this);return new t(s)}clone(){return new t(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:sx,content:this.content}}static fromJSON(i){return new t(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return hr(t,"name",sx),t},{isClass:!0,isNode:!0}),ax="RangeNode",rge=["Node"],ige=ae(ax,rge,n=>{var{Node:e}=n;function t(i,s,a){var o=zn(i,s,a),l={},u=zn(i.start,s,a);if(l.start=u!==null&&u<=o||s==="all",i.step){var c=zn(i.step,s,a);l.step=c!==null&&c<=o||s==="all"}var f=zn(i.end,s,a);return l.end=f!==null&&f<=o||s==="all",l}class r extends e{constructor(s,a,o){if(super(),!In(s))throw new TypeError("Node expected");if(!In(a))throw new TypeError("Node expected");if(o&&!In(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=s,this.end=a,this.step=o||null}get type(){return ax}get isRangeNode(){return!0}needsEnd(){var s=this.filter(function(a){return ii(a)&&a.name==="end"});return s.length>0}_compile(s,a){var o=s.range,l=this.start._compile(s,a),u=this.end._compile(s,a);if(this.step){var c=this.step._compile(s,a);return function(d,h,p){return o(l(d,h,p),u(d,h,p),c(d,h,p))}}else return function(d,h,p){return o(l(d,h,p),u(d,h,p))}}forEach(s){s(this.start,"start",this),s(this.end,"end",this),this.step&&s(this.step,"step",this)}map(s){return new r(this._ifNode(s(this.start,"start",this)),this._ifNode(s(this.end,"end",this)),this.step&&this._ifNode(s(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=t(this,a,s&&s.implicit),l,u=this.start.toString(s);if(o.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(s);o.step&&(c="("+c+")"),l+=":"+c}var f=this.end.toString(s);return o.end&&(f="("+f+")"),l+=":"+f,l}toJSON(){return{mathjs:ax,start:this.start,end:this.end,step:this.step}}static fromJSON(s){return new r(s.start,s.end,s.step)}_toHTML(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=t(this,a,s&&s.implicit),l,u=this.start.toHTML(s);if(o.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(s);o.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(s);return o.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+f,l}_toTex(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=t(this,a,s&&s.implicit),l=this.start.toTex(s);if(o.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(s);o.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(s);return o.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return hr(r,"name",ax),r},{isClass:!0,isNode:!0}),ox="RelationalNode",sge=["Node"],age=ae(ox,sge,n=>{var{Node:e}=n,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends e{constructor(s,a){if(super(),!Array.isArray(s))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(a))throw new TypeError("Parameter params must be an array");if(s.length!==a.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=s,this.params=a}get type(){return ox}get isRelationalNode(){return!0}_compile(s,a){var o=this,l=this.params.map(u=>u._compile(s,a));return function(c,f,d){for(var h,p=l[0](c,f,d),v=0;v<o.conditionals.length;v++){h=p,p=l[v+1](c,f,d);var y=ws(s,o.conditionals[v]);if(!y(h,p))return!1}return!0}}forEach(s){this.params.forEach((a,o)=>s(a,"params["+o+"]",this),this)}map(s){return new r(this.conditionals.slice(),this.params.map((a,o)=>this._ifNode(s(a,"params["+o+"]",this)),this))}clone(){return new r(this.conditionals,this.params)}_toString(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",o=zn(this,a,s&&s.implicit),l=this.params.map(function(f,d){var h=zn(f,a,s&&s.implicit);return a==="all"||h!==null&&h<=o?"("+f.toString(s)+")":f.toString(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+t[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:ox,conditionals:this.conditionals,params:this.params}}static fromJSON(s){return new r(s.conditionals,s.params)}_toHTML(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",o=zn(this,a,s&&s.implicit),l=this.params.map(function(f,d){var h=zn(f,a,s&&s.implicit);return a==="all"||h!==null&&h<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(s)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Wa(t[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",o=zn(this,a,s&&s.implicit),l=this.params.map(function(f,d){var h=zn(f,a,s&&s.implicit);return a==="all"||h!==null&&h<=o?"\\left("+f.toTex(s)+"\right)":f.toTex(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=xn[this.conditionals[c]]+l[c+1];return u}}return hr(r,"name",ox),r},{isClass:!0,isNode:!0}),oge="SymbolNode",lge=["math","?Unit","Node"],uge=ae(oge,lge,n=>{var{math:e,Unit:t,Node:r}=n;function i(a){return t?t.isValuelessUnit(a):!1}class s extends r{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,l){var u=this.name;if(l[u]===!0)return function(f,d,h){return ws(d,u)};if(u in o)return function(f,d,h){return f.has(u)?f.get(u):ws(o,u)};var c=i(u);return function(f,d,h){return f.has(u)?f.get(u):c?new t(null,u):s.onUndefinedSymbol(u)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new s(this.name)}_toString(o){return this.name}_toHTML(o){var l=Wa(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new s(o.name)}_toTex(o){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=$G(this.name,l);return u[0]==="\\"?u:" "+u}}return s},{isClass:!0,isNode:!0}),lx="FunctionNode",cge=["math","Node","SymbolNode"],fge=ae(lx,cge,n=>{var e,{math:t,Node:r,SymbolNode:i}=n,s=l=>un(l,{truncate:78});function a(l,u,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,h=0,p;(p=d.exec(l))!==null;)if(f+=l.substring(h,p.index),h=p.index,p[0]==="$$")f+="$",h++;else{h+=p[0].length;var v=u[p[1]];if(!v)throw new ReferenceError("Template: Property "+p[1]+" does not exist.");if(p[2]===void 0)switch(typeof v){case"string":f+=v;break;case"object":if(In(v))f+=v.toTex(c);else if(Array.isArray(v))f+=v.map(function(y,m){if(In(y))return y.toTex(c);throw new TypeError("Template: "+p[1]+"["+m+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes")}else if(In(v[p[2]]&&v[p[2]]))f+=v[p[2]].toTex(c);else throw new TypeError("Template: "+p[1]+"["+p[2]+"] is not a Node.")}return f+=l.slice(h),f}class o extends r{constructor(u,c){if(super(),typeof u=="string"&&(u=new i(u)),!In(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(In))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=u,this.args=c||[]}get name(){return this.fn.name||""}get type(){return lx}get isFunctionNode(){return!0}_compile(u,c){var f=this.args.map(A=>A._compile(u,c));if(ii(this.fn)){var d=this.fn.name;if(c[d]){var m=this.args;return function(N,C,T){var R=ws(C,d);if(typeof R!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(s(R)));if(R.rawArgs)return R(m,u,Kg(N,C));var U=f.map(F=>F(N,C,T));return R.apply(R,U)}}else{var h=d in u?ws(u,d):void 0,p=typeof h=="function"&&h.rawArgs===!0,v=A=>{var N;if(A.has(d))N=A.get(d);else if(d in u)N=ws(u,d);else return o.onUndefinedFunction(d);if(typeof N=="function")return N;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(s(N)))};if(p){var y=this.args;return function(N,C,T){var R=v(N);return R(y,u,Kg(N,C))}}else switch(f.length){case 0:return function(N,C,T){var R=v(N);return R()};case 1:return function(N,C,T){var R=v(N),U=f[0];return R(U(N,C,T))};case 2:return function(N,C,T){var R=v(N),U=f[0],F=f[1];return R(U(N,C,T),F(N,C,T))};default:return function(N,C,T){var R=v(N),U=f.map(F=>F(N,C,T));return R(...U)}}}}else if(Uc(this.fn)&&Fd(this.fn.index)&&this.fn.index.isObjectProperty()){var S=this.fn.object._compile(u,c),b=this.fn.index.getObjectProperty(),g=this.args;return function(N,C,T){var R=S(N,C,T),U=Tse(R,b);if(U!=null&&U.rawArgs)return U(g,u,Kg(N,C));var F=f.map(B=>B(N,C,T));return U.apply(R,F)}}else{var w=this.fn.toString(),x=this.fn._compile(u,c),M=this.args;return function(N,C,T){var R=x(N,C,T);if(typeof R!="function")throw new TypeError("Expression '".concat(w,"' did not evaluate to a function; value is:")+`
  `.concat(s(R)));if(R.rawArgs)return R(M,u,Kg(N,C));var U=f.map(F=>F(N,C,T));return R.apply(R,U)}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(u(this.args[d],"args["+d+"]",this));return new o(c,f)}clone(){return new o(this.fn,this.args.slice(0))}toString(u){var c,f=this.fn.toString(u);return u&&typeof u.handler=="object"&&gt(u.handler,f)&&(c=u.handler[f](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(d){return d.toString(u)}),f=ym(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:lx,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(f){return f.toHTML(u)});return'<span class="math-function">'+Wa(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&gt(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(h){return h.toTex(u)}),f;G4[this.name]&&(f=G4[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(f=t[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,u);break;case"string":d=a(f,this,u);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,u);break;case"string":d=a(f[c.length],this,u);break}}return typeof d<"u"?d:a(Wme,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=o,hr(o,"name",lx),hr(o,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),hr(o,"fromJSON",function(l){return new e(l.fn,l.args)}),o},{isClass:!0,isNode:!0}),q4="parse",dge=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],hge=ae(q4,dge,n=>{var{typed:e,numeric:t,config:r,AccessorNode:i,ArrayNode:s,AssignmentNode:a,BlockNode:o,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:h,OperatorNode:p,ParenthesisNode:v,RangeNode:y,RelationalNode:m,SymbolNode:S}=n,b=e(q4,{string:function(pe){return Z(pe,{})},"Array | Matrix":function(pe){return g(pe,{})},"string, Object":function(pe,Re){var Ye=Re.nodes!==void 0?Re.nodes:{};return Z(pe,Ye)},"Array | Matrix, Object":g});function g(W){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=pe.nodes!==void 0?pe.nodes:{};return cn(W,function(Ye){if(typeof Ye!="string")throw new TypeError("String expected");return Z(Ye,Re)})}var w={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},x={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},M={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},A={true:!0,false:!1,null:null,undefined:void 0},N=["NaN","Infinity"],C={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function T(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:w.NULL,nestingLevel:0,conditionalLevel:null}}function R(W,pe){return W.expression.substr(W.index,pe)}function U(W){return R(W,1)}function F(W){W.index++}function B(W){return W.expression.charAt(W.index-1)}function D(W){return W.expression.charAt(W.index+1)}function O(W){for(W.tokenType=w.NULL,W.token="",W.comment="";;){if(U(W)==="#")for(;U(W)!==`
`&&U(W)!=="";)W.comment+=U(W),F(W);if(b.isWhitespace(U(W),W.nestingLevel))F(W);else break}if(U(W)===""){W.tokenType=w.DELIMITER;return}if(U(W)===`
`&&!W.nestingLevel){W.tokenType=w.DELIMITER,W.token=U(W),F(W);return}var pe=U(W),Re=R(W,2),Ye=R(W,3);if(Ye.length===3&&x[Ye]){W.tokenType=w.DELIMITER,W.token=Ye,F(W),F(W),F(W);return}if(Re.length===2&&x[Re]){W.tokenType=w.DELIMITER,W.token=Re,F(W),F(W);return}if(x[pe]){W.tokenType=w.DELIMITER,W.token=pe,F(W);return}if(b.isDigitDot(pe)){W.tokenType=w.NUMBER;var de=R(W,2);if(de==="0b"||de==="0o"||de==="0x"){for(W.token+=U(W),F(W),W.token+=U(W),F(W);b.isHexDigit(U(W));)W.token+=U(W),F(W);if(U(W)===".")for(W.token+=".",F(W);b.isHexDigit(U(W));)W.token+=U(W),F(W);else if(U(W)==="i")for(W.token+="i",F(W);b.isDigit(U(W));)W.token+=U(W),F(W);return}if(U(W)==="."){if(W.token+=U(W),F(W),!b.isDigit(U(W))){W.tokenType=w.DELIMITER;return}}else{for(;b.isDigit(U(W));)W.token+=U(W),F(W);b.isDecimalMark(U(W),D(W))&&(W.token+=U(W),F(W))}for(;b.isDigit(U(W));)W.token+=U(W),F(W);if(U(W)==="E"||U(W)==="e"){if(b.isDigit(D(W))||D(W)==="-"||D(W)==="+"){if(W.token+=U(W),F(W),(U(W)==="+"||U(W)==="-")&&(W.token+=U(W),F(W)),!b.isDigit(U(W)))throw ge(W,'Digit expected, got "'+U(W)+'"');for(;b.isDigit(U(W));)W.token+=U(W),F(W);if(b.isDecimalMark(U(W),D(W)))throw ge(W,'Digit expected, got "'+U(W)+'"')}else if(D(W)===".")throw F(W),ge(W,'Digit expected, got "'+U(W)+'"')}return}if(b.isAlpha(U(W),B(W),D(W))){for(;b.isAlpha(U(W),B(W),D(W))||b.isDigit(U(W));)W.token+=U(W),F(W);gt(M,W.token)?W.tokenType=w.DELIMITER:W.tokenType=w.SYMBOL;return}for(W.tokenType=w.UNKNOWN;U(W)!=="";)W.token+=U(W),F(W);throw ge(W,'Syntax error in part "'+W.token+'"')}function $(W){do O(W);while(W.token===`
`)}function L(W){W.nestingLevel++}function X(W){W.nestingLevel--}b.isAlpha=function(pe,Re,Ye){return b.isValidLatinOrGreek(pe)||b.isValidMathSymbol(pe,Ye)||b.isValidMathSymbol(Re,pe)},b.isValidLatinOrGreek=function(pe){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(pe)},b.isValidMathSymbol=function(pe,Re){return/^[\uD835]$/.test(pe)&&/^[\uDC00-\uDFFF]$/.test(Re)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(Re)},b.isWhitespace=function(pe,Re){return pe===" "||pe==="	"||pe===`
`&&Re>0},b.isDecimalMark=function(pe,Re){return pe==="."&&Re!=="/"&&Re!=="*"&&Re!=="^"},b.isDigitDot=function(pe){return pe>="0"&&pe<="9"||pe==="."},b.isDigit=function(pe){return pe>="0"&&pe<="9"},b.isHexDigit=function(pe){return pe>="0"&&pe<="9"||pe>="a"&&pe<="f"||pe>="A"&&pe<="F"};function Z(W,pe){var Re=T();ot(Re,{expression:W,extraNodes:pe}),O(Re);var Ye=Q(Re);if(Re.token!=="")throw Re.tokenType===w.DELIMITER?We(Re,"Unexpected operator "+Re.token):ge(Re,'Unexpected part "'+Re.token+'"');return Ye}function Q(W){var pe,Re=[],Ye;for(W.token!==""&&W.token!==`
`&&W.token!==";"&&(pe=K(W),W.comment&&(pe.comment=W.comment));W.token===`
`||W.token===";";)Re.length===0&&pe&&(Ye=W.token!==";",Re.push({node:pe,visible:Ye})),O(W),W.token!==`
`&&W.token!==";"&&W.token!==""&&(pe=K(W),W.comment&&(pe.comment=W.comment),Ye=W.token!==";",Re.push({node:pe,visible:Ye}));return Re.length>0?new o(Re):(pe||(pe=new u(void 0),W.comment&&(pe.comment=W.comment)),pe)}function K(W){var pe,Re,Ye,de,Ze=re(W);if(W.token==="="){if(ii(Ze))return pe=Ze.name,$(W),Ye=K(W),new a(new S(pe),Ye);if(Uc(Ze))return $(W),Ye=K(W),new a(Ze.object,Ze.index,Ye);if(bu(Ze)&&ii(Ze.fn)&&(de=!0,Re=[],pe=Ze.name,Ze.args.forEach(function(H,ee){ii(H)?Re[ee]=H.name:de=!1}),de))return $(W),Ye=K(W),new c(pe,Re,Ye);throw ge(W,"Invalid left hand side of assignment operator =")}return Ze}function re(W){for(var pe=ce(W);W.token==="?";){var Re=W.conditionalLevel;W.conditionalLevel=W.nestingLevel,$(W);var Ye=pe,de=K(W);if(W.token!==":")throw ge(W,"False part of conditional expression expected");W.conditionalLevel=null,$(W);var Ze=K(W);pe=new l(Ye,de,Ze),W.conditionalLevel=Re}return pe}function ce(W){for(var pe=ue(W);W.token==="or";)$(W),pe=new p("or","or",[pe,ue(W)]);return pe}function ue(W){for(var pe=me(W);W.token==="xor";)$(W),pe=new p("xor","xor",[pe,me(W)]);return pe}function me(W){for(var pe=Ee(W);W.token==="and";)$(W),pe=new p("and","and",[pe,Ee(W)]);return pe}function Ee(W){for(var pe=xe(W);W.token==="|";)$(W),pe=new p("|","bitOr",[pe,xe(W)]);return pe}function xe(W){for(var pe=Te(W);W.token==="^|";)$(W),pe=new p("^|","bitXor",[pe,Te(W)]);return pe}function Te(W){for(var pe=De(W);W.token==="&";)$(W),pe=new p("&","bitAnd",[pe,De(W)]);return pe}function De(W){for(var pe=[ie(W)],Re=[],Ye={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};gt(Ye,W.token);){var de={name:W.token,fn:Ye[W.token]};Re.push(de),$(W),pe.push(ie(W))}return pe.length===1?pe[0]:pe.length===2?new p(Re[0].name,Re[0].fn,pe):new m(Re.map(Ze=>Ze.fn),pe)}function ie(W){var pe,Re,Ye,de;pe=Ie(W);for(var Ze={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};gt(Ze,W.token);)Re=W.token,Ye=Ze[Re],$(W),de=[pe,Ie(W)],pe=new p(Re,Ye,de);return pe}function Ie(W){var pe,Re,Ye,de;pe=ke(W);for(var Ze={to:"to",in:"to"};gt(Ze,W.token);)Re=W.token,Ye=Ze[Re],$(W),Re==="in"&&W.token===""?pe=new p("*","multiply",[pe,new S("in")],!0):(de=[pe,ke(W)],pe=new p(Re,Ye,de));return pe}function ke(W){var pe,Re=[];if(W.token===":"?pe=new u(1):pe=te(W),W.token===":"&&W.conditionalLevel!==W.nestingLevel){for(Re.push(pe);W.token===":"&&Re.length<3;)$(W),W.token===")"||W.token==="]"||W.token===","||W.token===""?Re.push(new S("end")):Re.push(te(W));Re.length===3?pe=new y(Re[0],Re[2],Re[1]):pe=new y(Re[0],Re[1])}return pe}function te(W){var pe,Re,Ye,de;pe=ne(W);for(var Ze={"+":"add","-":"subtract"};gt(Ze,W.token);){Re=W.token,Ye=Ze[Re],$(W);var H=ne(W);H.isPercentage?de=[pe,new p("*","multiply",[pe,H])]:de=[pe,H],pe=new p(Re,Ye,de)}return pe}function ne(W){var pe,Re,Ye,de;pe=Ce(W),Re=pe;for(var Ze={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};gt(Ze,W.token);)Ye=W.token,de=Ze[Ye],$(W),Re=Ce(W),pe=new p(Ye,de,[pe,Re]);return pe}function Ce(W){var pe,Re;for(pe=se(W),Re=pe;W.tokenType===w.SYMBOL||W.token==="in"&&vn(pe)||W.tokenType===w.NUMBER&&!vn(Re)&&(!Br(Re)||Re.op==="!")||W.token==="(";)Re=se(W),pe=new p("*","multiply",[pe,Re],!0);return pe}function se(W){for(var pe=j(W),Re=pe,Ye=[];W.token==="/"&&TT(Re);)if(Ye.push(ot({},W)),$(W),W.tokenType===w.NUMBER)if(Ye.push(ot({},W)),$(W),W.tokenType===w.SYMBOL||W.token==="(")ot(W,Ye.pop()),Ye.pop(),Re=j(W),pe=new p("/","divide",[pe,Re]);else{Ye.pop(),ot(W,Ye.pop());break}else{ot(W,Ye.pop());break}return pe}function j(W){var pe,Re,Ye,de;pe=G(W);for(var Ze={"%":"mod",mod:"mod"};gt(Ze,W.token);)Re=W.token,Ye=Ze[Re],$(W),Re==="%"&&W.tokenType===w.DELIMITER&&W.token!=="("?pe=new p("/","divide",[pe,new u(100)],!1,!0):(de=[pe,G(W)],pe=new p(Re,Ye,de));return pe}function G(W){var pe,Re,Ye,de={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return gt(de,W.token)?(Ye=de[W.token],pe=W.token,$(W),Re=[G(W)],new p(pe,Ye,Re)):fe(W)}function fe(W){var pe,Re,Ye,de;return pe=Me(W),(W.token==="^"||W.token===".^")&&(Re=W.token,Ye=Re==="^"?"pow":"dotPow",$(W),de=[pe,G(W)],pe=new p(Re,Ye,de)),pe}function Me(W){var pe,Re,Ye,de;pe=q(W);for(var Ze={"!":"factorial","'":"ctranspose"};gt(Ze,W.token);)Re=W.token,Ye=Ze[Re],O(W),de=[pe],pe=new p(Re,Ye,de),pe=be(W,pe);return pe}function q(W){var pe=[];if(W.tokenType===w.SYMBOL&&gt(W.extraNodes,W.token)){var Re=W.extraNodes[W.token];if(O(W),W.token==="("){if(pe=[],L(W),O(W),W.token!==")")for(pe.push(K(W));W.token===",";)O(W),pe.push(K(W));if(W.token!==")")throw ge(W,"Parenthesis ) expected");X(W),O(W)}return new Re(pe)}return J(W)}function J(W){var pe,Re;return W.tokenType===w.SYMBOL||W.tokenType===w.DELIMITER&&W.token in M?(Re=W.token,O(W),gt(A,Re)?pe=new u(A[Re]):N.includes(Re)?pe=new u(t(Re,"number")):pe=new S(Re),pe=be(W,pe),pe):Se(W)}function be(W,pe,Re){for(var Ye;(W.token==="("||W.token==="["||W.token===".")&&!Re;)if(Ye=[],W.token==="(")if(ii(pe)||Uc(pe)){if(L(W),O(W),W.token!==")")for(Ye.push(K(W));W.token===",";)O(W),Ye.push(K(W));if(W.token!==")")throw ge(W,"Parenthesis ) expected");X(W),O(W),pe=new f(pe,Ye)}else return pe;else if(W.token==="["){if(L(W),O(W),W.token!=="]")for(Ye.push(K(W));W.token===",";)O(W),Ye.push(K(W));if(W.token!=="]")throw ge(W,"Parenthesis ] expected");X(W),O(W),pe=new i(pe,new d(Ye))}else{O(W);var de=W.tokenType===w.SYMBOL||W.tokenType===w.DELIMITER&&W.token in M;if(!de)throw ge(W,"Property name expected after dot");Ye.push(new u(W.token)),O(W);var Ze=!0;pe=new i(pe,new d(Ye,Ze))}return pe}function Se(W){var pe,Re;return W.token==='"'||W.token==="'"?(Re=Ne(W,W.token),pe=new u(Re),pe=be(W,pe),pe):Fe(W)}function Ne(W,pe){for(var Re="";U(W)!==""&&U(W)!==pe;)if(U(W)==="\\"){F(W);var Ye=U(W),de=C[Ye];if(de!==void 0)Re+=de,W.index+=1;else if(Ye==="u"){var Ze=W.expression.slice(W.index+1,W.index+5);if(/^[0-9A-Fa-f]{4}$/.test(Ze))Re+=String.fromCharCode(parseInt(Ze,16)),W.index+=5;else throw ge(W,"Invalid unicode character \\u".concat(Ze))}else throw ge(W,"Bad escape character \\".concat(Ye))}else Re+=U(W),F(W);if(O(W),W.token!==pe)throw ge(W,"End of string ".concat(pe," expected"));return O(W),Re}function Fe(W){var pe,Re,Ye,de;if(W.token==="["){if(L(W),O(W),W.token!=="]"){var Ze=He(W);if(W.token===";"){for(Ye=1,Re=[Ze];W.token===";";)O(W),W.token!=="]"&&(Re[Ye]=He(W),Ye++);if(W.token!=="]")throw ge(W,"End of matrix ] expected");X(W),O(W),de=Re[0].items.length;for(var H=1;H<Ye;H++)if(Re[H].items.length!==de)throw We(W,"Column dimensions mismatch ("+Re[H].items.length+" !== "+de+")");pe=new s(Re)}else{if(W.token!=="]")throw ge(W,"End of matrix ] expected");X(W),O(W),pe=Ze}}else X(W),O(W),pe=new s([]);return be(W,pe)}return Oe(W)}function He(W){for(var pe=[K(W)],Re=1;W.token===",";)O(W),W.token!=="]"&&W.token!==";"&&(pe[Re]=K(W),Re++);return new s(pe)}function Oe(W){if(W.token==="{"){L(W);var pe,Re={};do if(O(W),W.token!=="}"){if(W.token==='"'||W.token==="'")pe=Ne(W,W.token);else if(W.tokenType===w.SYMBOL||W.tokenType===w.DELIMITER&&W.token in M)pe=W.token,O(W);else throw ge(W,"Symbol or string expected as object key");if(W.token!==":")throw ge(W,"Colon : expected after object key");O(W),Re[pe]=K(W)}while(W.token===",");if(W.token!=="}")throw ge(W,"Comma , or bracket } expected after object value");X(W),O(W);var Ye=new h(Re);return Ye=be(W,Ye),Ye}return Je(W)}function Je(W){var pe;return W.tokenType===w.NUMBER?(pe=W.token,O(W),new u(t(pe,r.number))):qe(W)}function qe(W){var pe;if(W.token==="("){if(L(W),O(W),pe=K(W),W.token!==")")throw ge(W,"Parenthesis ) expected");return X(W),O(W),pe=new v(pe),pe=be(W,pe),pe}return lt(W)}function lt(W){throw W.token===""?ge(W,"Unexpected end of expression"):ge(W,"Value expected")}function at(W){return W.index-W.token.length+1}function ge(W,pe){var Re=at(W),Ye=new SyntaxError(pe+" (char "+Re+")");return Ye.char=Re,Ye}function We(W,pe){var Re=at(W),Ye=new SyntaxError(pe+" (char "+Re+")");return Ye.char=Re,Ye}return e.addConversion({from:"string",to:"Node",convert:b}),b}),X4="compile",pge=["typed","parse"],mge=ae(X4,pge,n=>{var{typed:e,parse:t}=n;return e(X4,{string:function(i){return t(i).compile()},"Array | Matrix":function(i){return cn(i,function(s){return t(s).compile()})}})}),Y4="evaluate",gge=["typed","parse"],vge=ae(Y4,gge,n=>{var{typed:e,parse:t}=n;return e(Y4,{string:function(i){var s=Kv();return t(i).compile().evaluate(s)},"string, Map | Object":function(i,s){return t(i).compile().evaluate(s)},"Array | Matrix":function(i){var s=Kv();return cn(i,function(a){return t(a).compile().evaluate(s)})},"Array | Matrix, Map | Object":function(i,s){return cn(i,function(a){return t(a).compile().evaluate(s)})}})}),yge="Parser",xge=["evaluate"],bge=ae(yge,xge,n=>{var{evaluate:e}=n;function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Kv(),writable:!1})}return t.prototype.type="Parser",t.prototype.isParser=!0,t.prototype.evaluate=function(r){return e(r,this.scope)},t.prototype.get=function(r){if(this.scope.has(r))return this.scope.get(r)},t.prototype.getAll=function(){return Pse(this.scope)},t.prototype.getAllAsMap=function(){return this.scope},t.prototype.set=function(r,i){return this.scope.set(r,i),i},t.prototype.remove=function(r){this.scope.delete(r)},t.prototype.clear=function(){this.scope.clear()},t},{isClass:!0}),K4="parser",wge=["typed","Parser"],Sge=ae(K4,wge,n=>{var{typed:e,Parser:t}=n;return e(K4,{"":function(){return new t}})}),Z4="lup",_ge=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],Ege=ae(Z4,_ge,n=>{var{typed:e,matrix:t,abs:r,addScalar:i,divideScalar:s,multiplyScalar:a,subtractScalar:o,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:h}=n;return e(Z4,{DenseMatrix:function(m){return p(m)},SparseMatrix:function(m){return v(m)},Array:function(m){var S=t(m),b=p(S);return{L:b.L.valueOf(),U:b.U.valueOf(),p:b.p}}});function p(y){var m=y._size[0],S=y._size[1],b=Math.min(m,S),g=Xt(y._data),w=[],x=[m,b],M=[],A=[b,S],N,C,T,R=[];for(N=0;N<m;N++)R[N]=N;for(C=0;C<S;C++){if(C>0)for(N=0;N<m;N++){var U=Math.min(N,C),F=0;for(T=0;T<U;T++)F=i(F,a(g[N][T],g[T][C]));g[N][C]=o(g[N][C],F)}var B=C,D=0,O=0;for(N=C;N<m;N++){var $=g[N][C],L=r($);l(L,D)&&(B=N,D=L,O=$)}if(C!==B&&(R[C]=[R[B],R[B]=R[C]][0],f._swapRows(C,B,g)),C<m)for(N=C+1;N<m;N++){var X=g[N][C];u(X,0)||(g[N][C]=s(g[N][C],O))}}for(C=0;C<S;C++)for(N=0;N<m;N++){if(C===0&&(N<S&&(M[N]=[]),w[N]=[]),N<C){N<S&&(M[N][C]=g[N][C]),C<m&&(w[N][C]=0);continue}if(N===C){N<S&&(M[N][C]=g[N][C]),C<m&&(w[N][C]=1);continue}N<S&&(M[N][C]=0),C<m&&(w[N][C]=g[N][C])}var Z=new f({data:w,size:x}),Q=new f({data:M,size:A}),K=[];for(N=0,b=R.length;N<b;N++)K[R[N]]=N;return{L:Z,U:Q,p:K,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(y){var m=y._size[0],S=y._size[1],b=Math.min(m,S),g=y._values,w=y._index,x=y._ptr,M=[],A=[],N=[],C=[m,b],T=[],R=[],U=[],F=[b,S],B,D,O,$=[],L=[];for(B=0;B<m;B++)$[B]=B,L[B]=B;var X=function(K,re){var ce=L[K],ue=L[re];$[ce]=re,$[ue]=K,L[K]=ue,L[re]=ce},Z=function(){var K=new h;D<m&&(N.push(M.length),M.push(1),A.push(D)),U.push(T.length);var re=x[D],ce=x[D+1];for(O=re;O<ce;O++)B=w[O],K.set($[B],g[O]);D>0&&K.forEach(0,D-1,function(xe,Te){d._forEachRow(xe,M,A,N,function(De,ie){De>xe&&K.accumulate(De,c(a(ie,Te)))})});var ue=D,me=K.get(D),Ee=r(me);K.forEach(D+1,m-1,function(xe,Te){var De=r(Te);l(De,Ee)&&(ue=xe,Ee=De,me=Te)}),D!==ue&&(d._swapRows(D,ue,C[1],M,A,N),d._swapRows(D,ue,F[1],T,R,U),K.swap(D,ue),X(D,ue)),K.forEach(0,m-1,function(xe,Te){xe<=D?(T.push(Te),R.push(xe)):(Te=s(Te,me),u(Te,0)||(M.push(Te),A.push(xe)))})};for(D=0;D<S;D++)Z();return U.push(T.length),N.push(M.length),{L:new d({values:M,index:A,ptr:N,size:C}),U:new d({values:T,index:R,ptr:U,size:F}),p:$,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),J4="qr",Mge=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],Cge=ae(J4,Mge,n=>{var{typed:e,matrix:t,zeros:r,identity:i,isZero:s,equal:a,sign:o,sqrt:l,conj:u,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:h,subtractScalar:p,complex:v}=n;return ot(e(J4,{DenseMatrix:function(g){return m(g)},SparseMatrix:function(g){return S()},Array:function(g){var w=t(g),x=m(w);return{Q:x.Q.valueOf(),R:x.R.valueOf()}}}),{_denseQRimpl:y});function y(b){var g=b._size[0],w=b._size[1],x=i([g],"dense"),M=x._data,A=b.clone(),N=A._data,C,T,R,U=r([g],"");for(R=0;R<Math.min(w,g);++R){var F=N[R][R],B=c(a(F,0)?1:o(F)),D=u(B),O=0;for(C=R;C<g;C++)O=f(O,h(N[C][R],u(N[C][R])));var $=h(B,l(O));if(!s($)){var L=p(F,$);for(U[R]=1,C=R+1;C<g;C++)U[C]=d(N[C][R],L);var X=c(u(d(L,$))),Z=void 0;for(T=R;T<w;T++){for(Z=0,C=R;C<g;C++)Z=f(Z,h(u(U[C]),N[C][T]));for(Z=h(Z,X),C=R;C<g;C++)N[C][T]=h(p(N[C][T],h(U[C],Z)),D)}for(C=0;C<g;C++){for(Z=0,T=R;T<g;T++)Z=f(Z,h(M[C][T],U[T]));for(Z=h(Z,X),T=R;T<g;++T)M[C][T]=d(p(M[C][T],h(Z,u(U[T]))),D)}}}return{Q:x,R:A,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function m(b){var g=y(b),w=g.R._data;if(b._data.length>0)for(var x=w[0][0].type==="Complex"?v(0):0,M=0;M<w.length;++M)for(var A=0;A<M&&A<(w[0]||[]).length;++A)w[M][A]=x;return g}function S(b){throw new Error("qr not implemented for sparse matrices yet")}});function Age(n,e,t,r){n._values;for(var i=n._index,s=n._ptr,a=n._size,o=n._datatype,l=a[0],u=a[1],c=null,f=[],d=[],h=0,p=0;p<u;p++){d[p]=h;for(var v=t?t[p]:p,y=s[v],m=s[v+1],S=y;S<m;S++){var b=i[S];f[h]=b,h++}}return d[u]=h,n.createSparseMatrix({values:c,index:f,ptr:d,size:[l,u],datatype:o})}function VG(n,e,t,r,i,s,a){var o=0;for(t[a]=n;o>=0;){var l=t[a+o],u=t[r+l];u===-1?(o--,s[e++]=l):(t[r+l]=t[i+u],++o,t[a+o]=u)}return e}function Tge(n,e){if(!n)return null;var t=0,r,i=[],s=[],a=0,o=e,l=2*e;for(r=0;r<e;r++)s[a+r]=-1;for(r=e-1;r>=0;r--)n[r]!==-1&&(s[o+r]=s[a+n[r]],s[a+n[r]]=r);for(r=0;r<e;r++)n[r]===-1&&(t=VG(r,t,s,a,o,i,l));return i}function Dge(n,e){if(!n)return null;var t=n._index,r=n._ptr,i=n._size,s=i[0],a=i[1],o=[],l=[],u=0,c=a,f,d;for(f=0;f<s;f++)l[c+f]=-1;for(var h=0;h<a;h++){o[h]=-1,l[u+h]=-1;for(var p=r[h],v=r[h+1],y=p;y<v;y++){var m=t[y];for(f=l[c+m];f!==-1&&f<h;f=d)d=l[u+f],l[u+f]=h,d===-1&&(o[f]=h);l[c+m]=h}}return o}function Nge(n,e,t){for(var r=n._values,i=n._index,s=n._ptr,a=n._size,o=a[1],l=0,u=0;u<o;u++){var c=s[u];for(s[u]=l;c<s[u+1];c++)e(i[c],u,r?r[c]:1,t)&&(i[l]=i[c],r&&(r[l]=r[c]),l++)}return s[o]=l,i.splice(l,i.length-l),r&&r.splice(l,r.length-l),l}function ac(n){return-n-2}var Pge="csAmd",Rge=["add","multiply","transpose"],Oge=ae(Pge,Rge,n=>{var{add:e,multiply:t,transpose:r}=n;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,h=d[0],p=d[1],v=0,y=Math.max(16,10*Math.sqrt(p));y=Math.min(p-2,y);var m=i(c,f,h,p,y);Nge(m,l,null);for(var S=m._index,b=m._ptr,g=b[p],w=[],x=[],M=0,A=p+1,N=2*(p+1),C=3*(p+1),T=4*(p+1),R=5*(p+1),U=6*(p+1),F=7*(p+1),B=w,D=s(p,b,x,M,C,B,N,F,A,U,T,R),O=a(p,b,x,R,T,U,y,A,C,B,N),$=0,L,X,Z,Q,K,re,ce,ue,me,Ee,xe,Te,De,ie,Ie,ke;O<p;){for(Z=-1;$<p&&(Z=x[C+$])===-1;$++);x[N+Z]!==-1&&(B[x[N+Z]]=-1),x[C+$]=x[N+Z];var te=x[T+Z],ne=x[A+Z];O+=ne;var Ce=0;x[A+Z]=-ne;var se=b[Z],j=te===0?se:g,G=j;for(Q=1;Q<=te+1;Q++){for(Q>te?(re=Z,ce=se,ue=x[M+Z]-te):(re=S[se++],ce=b[re],ue=x[M+re]),K=1;K<=ue;K++)L=S[ce++],!((me=x[A+L])<=0)&&(Ce+=me,x[A+L]=-me,S[G++]=L,x[N+L]!==-1&&(B[x[N+L]]=B[L]),B[L]!==-1?x[N+B[L]]=x[N+L]:x[C+x[R+L]]=x[N+L]);re!==Z&&(b[re]=ac(Z),x[U+re]=0)}for(te!==0&&(g=G),x[R+Z]=Ce,b[Z]=j,x[M+Z]=G-j,x[T+Z]=-2,D=o(D,v,x,U,p),Ee=j;Ee<G;Ee++)if(L=S[Ee],!((xe=x[T+L])<=0)){me=-x[A+L];var fe=D-me;for(se=b[L],Te=b[L]+xe-1;se<=Te;se++)re=S[se],x[U+re]>=D?x[U+re]-=me:x[U+re]!==0&&(x[U+re]=x[R+re]+fe)}for(Ee=j;Ee<G;Ee++){for(L=S[Ee],Te=b[L],De=Te+x[T+L]-1,ie=Te,Ie=0,ke=0,se=Te;se<=De;se++)if(re=S[se],x[U+re]!==0){var Me=x[U+re]-D;Me>0?(ke+=Me,S[ie++]=re,Ie+=re):(b[re]=ac(Z),x[U+re]=0)}x[T+L]=ie-Te+1;var q=ie,J=Te+x[M+L];for(se=De+1;se<J;se++){X=S[se];var be=x[A+X];be<=0||(ke+=be,S[ie++]=X,Ie+=X)}ke===0?(b[L]=ac(Z),me=-x[A+L],Ce-=me,ne+=me,O+=me,x[A+L]=0,x[T+L]=-1):(x[R+L]=Math.min(x[R+L],ke),S[ie]=S[q],S[q]=S[Te],S[Te]=Z,x[M+L]=ie-Te+1,Ie=(Ie<0?-Ie:Ie)%p,x[N+L]=x[F+Ie],x[F+Ie]=L,B[L]=Ie)}for(x[R+Z]=Ce,v=Math.max(v,Ce),D=o(D+v,v,x,U,p),Ee=j;Ee<G;Ee++)if(L=S[Ee],!(x[A+L]>=0))for(Ie=B[L],L=x[F+Ie],x[F+Ie]=-1;L!==-1&&x[N+L]!==-1;L=x[N+L],D++){for(ue=x[M+L],xe=x[T+L],se=b[L]+1;se<=b[L]+ue-1;se++)x[U+S[se]]=D;var Se=L;for(X=x[N+L];X!==-1;){var Ne=x[M+X]===ue&&x[T+X]===xe;for(se=b[X]+1;Ne&&se<=b[X]+ue-1;se++)x[U+S[se]]!==D&&(Ne=0);Ne?(b[X]=ac(L),x[A+L]+=x[A+X],x[A+X]=0,x[T+X]=-1,X=x[N+X],x[N+Se]=X):(Se=X,X=x[N+X])}}for(se=j,Ee=j;Ee<G;Ee++)L=S[Ee],!((me=-x[A+L])<=0)&&(x[A+L]=me,ke=x[R+L]+Ce-me,ke=Math.min(ke,p-O-me),x[C+ke]!==-1&&(B[x[C+ke]]=L),x[N+L]=x[C+ke],B[L]=-1,x[C+ke]=L,$=Math.min($,ke),x[R+L]=ke,S[se++]=L);x[A+Z]=ne,(x[M+Z]=se-j)===0&&(b[Z]=-1,x[U+Z]=0),te!==0&&(g=se)}for(L=0;L<p;L++)b[L]=ac(b[L]);for(X=0;X<=p;X++)x[C+X]=-1;for(X=p;X>=0;X--)x[A+X]>0||(x[N+X]=x[C+b[X]],x[C+b[X]]=X);for(re=p;re>=0;re--)x[A+re]<=0||b[re]!==-1&&(x[N+re]=x[C+b[re]],x[C+b[re]]=re);for(Z=0,L=0;L<=p;L++)b[L]===-1&&(Z=VG(L,Z,x,C,N,w,U));return w.splice(w.length-1,1),w};function i(u,c,f,d,h){var p=r(c);if(u===1&&d===f)return e(c,p);if(u===2){for(var v=p._index,y=p._ptr,m=0,S=0;S<f;S++){var b=y[S];if(y[S]=m,!(y[S+1]-b>h))for(var g=y[S+1];b<g;b++)v[m++]=v[b]}return y[f]=m,c=r(p),t(p,c)}return t(p,c)}function s(u,c,f,d,h,p,v,y,m,S,b,g){for(var w=0;w<u;w++)f[d+w]=c[w+1]-c[w];f[d+u]=0;for(var x=0;x<=u;x++)f[h+x]=-1,p[x]=-1,f[v+x]=-1,f[y+x]=-1,f[m+x]=1,f[S+x]=1,f[b+x]=0,f[g+x]=f[d+x];var M=o(0,0,f,S,u);return f[b+u]=-2,c[u]=-1,f[S+u]=0,M}function a(u,c,f,d,h,p,v,y,m,S,b){for(var g=0,w=0;w<u;w++){var x=f[d+w];if(x===0)f[h+w]=-2,g++,c[w]=-1,f[p+w]=0;else if(x>v)f[y+w]=0,f[h+w]=-1,g++,c[w]=ac(u),f[y+u]++;else{var M=f[m+x];M!==-1&&(S[M]=w),f[b+w]=f[m+x],f[m+x]=w}}return g}function o(u,c,f,d,h){if(u<2||u+c<0){for(var p=0;p<h;p++)f[d+p]!==0&&(f[d+p]=1);u=2}return u}function l(u,c){return u!==c}});function Ige(n,e,t,r,i,s,a){var o,l,u=0,c;if(n<=e||t[r+e]<=t[i+n])return-1;t[i+n]=t[r+e];var f=t[s+n];if(t[s+n]=e,f===-1)u=1,c=n;else{for(u=2,c=f;c!==t[a+c];c=t[a+c]);for(o=f;o!==c;o=l)l=t[a+o],t[a+o]=c}return{jleaf:u,q:c}}var kge="csCounts",Lge=["transpose"],Fge=ae(kge,Lge,n=>{var{transpose:e}=n;return function(t,r,i,s){if(!t||!r||!i)return null;var a=t._size,o=a[0],l=a[1],u,c,f,d,h,p,v,y=4*l+(s?l+o+1:0),m=[],S=0,b=l,g=2*l,w=3*l,x=4*l,M=5*l+1;for(f=0;f<y;f++)m[f]=-1;var A=[],N=e(t),C=N._index,T=N._ptr;for(f=0;f<l;f++)for(c=i[f],A[c]=m[w+c]===-1?1:0;c!==-1&&m[w+c]===-1;c=r[c])m[w+c]=f;if(s){for(f=0;f<l;f++)m[i[f]]=f;for(u=0;u<o;u++){for(f=l,p=T[u],v=T[u+1],h=p;h<v;h++)f=Math.min(f,m[C[h]]);m[M+u]=m[x+f],m[x+f]=u}}for(u=0;u<l;u++)m[S+u]=u;for(f=0;f<l;f++){for(c=i[f],r[c]!==-1&&A[r[c]]--,d=s?m[x+f]:c;d!==-1;d=s?m[M+d]:-1)for(h=T[d];h<T[d+1];h++){u=C[h];var R=Ige(u,c,m,w,b,g,S);R.jleaf>=1&&A[c]++,R.jleaf===2&&A[R.q]--}r[c]!==-1&&(m[S+c]=r[c])}for(c=0;c<l;c++)r[c]!==-1&&(A[r[c]]+=A[c]);return A}}),Bge="csSqr",zge=["add","multiply","transpose"],Uge=ae(Bge,zge,n=>{var{add:e,multiply:t,transpose:r}=n,i=Oge({add:e,multiply:t,transpose:r}),s=Fge({transpose:r});return function(l,u,c){var f=u._ptr,d=u._size,h=d[1],p,v={};if(v.q=i(l,u),l&&!v.q)return null;if(c){var y=l?Age(u,null,v.q):u;v.parent=Dge(y);var m=Tge(v.parent,h);if(v.cp=s(y,v.parent,m,1),y&&v.parent&&v.cp&&a(y,v))for(v.unz=0,p=0;p<h;p++)v.unz+=v.cp[p]}else v.unz=4*f[h]+h,v.lnz=v.unz;return v};function a(o,l){var u=o._ptr,c=o._index,f=o._size,d=f[0],h=f[1];l.pinv=[],l.leftmost=[];var p=l.parent,v=l.pinv,y=l.leftmost,m=[],S=0,b=d,g=d+h,w=d+2*h,x,M,A,N,C;for(M=0;M<h;M++)m[b+M]=-1,m[g+M]=-1,m[w+M]=0;for(x=0;x<d;x++)y[x]=-1;for(M=h-1;M>=0;M--)for(N=u[M],C=u[M+1],A=N;A<C;A++)y[c[A]]=M;for(x=d-1;x>=0;x--)v[x]=-1,M=y[x],M!==-1&&(m[w+M]++===0&&(m[g+M]=x),m[S+x]=m[b+M],m[b+M]=x);for(l.lnz=0,l.m2=d,M=0;M<h;M++)if(x=m[b+M],l.lnz++,x<0&&(x=l.m2++),v[x]=M,!(--w[M]<=0)){l.lnz+=m[w+M];var T=p[M];T!==-1&&(m[w+T]===0&&(m[g+T]=m[g+M]),m[S+m[g+M]]=m[b+T],m[b+T]=m[S+x],m[w+T]+=m[w+M])}for(x=0;x<d;x++)v[x]<0&&(v[x]=M++);return!0}});function HT(n,e){return n[e]<0}function HG(n,e){n[e]=ac(n[e])}function Q4(n){return n<0?ac(n):n}function $ge(n,e,t,r,i){var s=e._index,a=e._ptr,o=e._size,l=o[1],u,c,f,d=0;for(r[0]=n;d>=0;){n=r[d];var h=i?i[n]:n;HT(a,n)||(HG(a,n),r[l+d]=h<0?0:Q4(a[h]));var p=1;for(c=r[l+d],f=h<0?0:Q4(a[h+1]);c<f;c++)if(u=s[c],!HT(a,u)){r[l+d]=c,r[++d]=u,p=0;break}p&&(d--,r[--t]=n)}return t}function Vge(n,e,t,r,i){var s=n._ptr,a=n._size,o=e._index,l=e._ptr,u=a[1],c,f,d,h=u;for(f=l[t],d=l[t+1],c=f;c<d;c++){var p=o[c];HT(s,p)||(h=$ge(p,n,h,r,i))}for(c=h;c<u;c++)HG(s,r[c]);return h}var Hge="csSpsolve",Wge=["divideScalar","multiply","subtract"],Gge=ae(Hge,Wge,n=>{var{divideScalar:e,multiply:t,subtract:r}=n;return function(s,a,o,l,u,c,f){var d=s._values,h=s._index,p=s._ptr,v=s._size,y=v[1],m=a._values,S=a._index,b=a._ptr,g,w,x,M,A=Vge(s,a,o,l,c);for(g=A;g<y;g++)u[l[g]]=0;for(w=b[o],x=b[o+1],g=w;g<x;g++)u[S[g]]=m[g];for(var N=A;N<y;N++){var C=l[N],T=c?c[C]:C;if(!(T<0))for(w=p[T],x=p[T+1],u[C]=e(u[C],d[f?w:x-1]),g=f?w+1:w,M=f?x:x-1;g<M;g++){var R=h[g];u[R]=r(u[R],t(d[g],u[C]))}}return A}}),jge="csLu",qge=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],Xge=ae(jge,qge,n=>{var{abs:e,divideScalar:t,multiply:r,subtract:i,larger:s,largerEq:a,SparseMatrix:o}=n,l=Gge({divideScalar:t,multiply:r,subtract:i});return function(c,f,d){if(!c)return null;var h=c._size,p=h[1],v,y=100,m=100;f&&(v=f.q,y=f.lnz||y,m=f.unz||m);var S=[],b=[],g=[],w=new o({values:S,index:b,ptr:g,size:[p,p]}),x=[],M=[],A=[],N=new o({values:x,index:M,ptr:A,size:[p,p]}),C=[],T,R,U=[],F=[];for(T=0;T<p;T++)U[T]=0,C[T]=-1,g[T+1]=0;y=0,m=0;for(var B=0;B<p;B++){g[B]=y,A[B]=m;var D=v?v[B]:B,O=l(w,c,D,F,U,C,1),$=-1,L=-1;for(R=O;R<p;R++)if(T=F[R],C[T]<0){var X=e(U[T]);s(X,L)&&(L=X,$=T)}else M[m]=C[T],x[m++]=U[T];if($===-1||L<=0)return null;C[D]<0&&a(e(U[D]),r(L,d))&&($=D);var Z=U[$];for(M[m]=B,x[m++]=Z,C[$]=B,b[y]=$,S[y++]=1,R=O;R<p;R++)T=F[R],C[T]<0&&(b[y]=T,S[y++]=t(U[T],Z)),U[T]=0}for(g[p]=y,A[p]=m,R=0;R<y;R++)b[R]=C[b[R]];return S.splice(y,S.length-y),b.splice(y,b.length-y),x.splice(m,x.length-m),M.splice(m,M.length-m),{L:w,U:N,pinv:C}}}),eB="slu",Yge=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],Kge=ae(eB,Yge,n=>{var{typed:e,abs:t,add:r,multiply:i,transpose:s,divideScalar:a,subtract:o,larger:l,largerEq:u,SparseMatrix:c}=n,f=Uge({add:r,multiply:i,transpose:s}),d=Xge({abs:t,divideScalar:a,multiply:i,subtract:o,larger:l,largerEq:u,SparseMatrix:c});return e(eB,{"SparseMatrix, number, number":function(p,v,y){if(!Ot(v)||v<0||v>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(y<0||y>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var m=f(v,p,!1),S=d(p,m,y);return{L:S.L,U:S.U,p:S.pinv,q:m.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function tB(n,e){var t,r=e.length,i=[];if(n)for(t=0;t<r;t++)i[n[t]]=e[t];else for(t=0;t<r;t++)i[t]=e[t];return i}var nB="lusolve",Zge=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Jge=ae(nB,Zge,n=>{var{typed:e,matrix:t,lup:r,slu:i,usolve:s,lsolve:a,DenseMatrix:o}=n,l=ay({DenseMatrix:o});return e(nB,{"Array, Array | Matrix":function(d,h){d=t(d);var p=r(d),v=c(p.L,p.U,p.p,null,h);return v.valueOf()},"DenseMatrix, Array | Matrix":function(d,h){var p=r(d);return c(p.L,p.U,p.p,null,h)},"SparseMatrix, Array | Matrix":function(d,h){var p=r(d);return c(p.L,p.U,p.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(d,h,p,v){var y=i(d,p,v);return c(y.L,y.U,y.p,y.q,h)},"Object, Array | Matrix":function(d,h){return c(d.L,d.U,d.p,d.q,h)}});function u(f){if(Ut(f))return f;if(_n(f))return t(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,h,p,v){f=u(f),d=u(d),h&&(v=l(f,v,!0),v._data=tB(h,v._data));var y=a(f,v),m=s(d,y);return p&&(m._data=tB(p,m._data)),m}}),rB="polynomialRoot",Qge=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],eve=ae(rB,Qge,n=>{var{typed:e,isZero:t,equalScalar:r,add:i,subtract:s,multiply:a,divide:o,sqrt:l,unaryMinus:u,cbrt:c,typeOf:f,im:d,re:h}=n;return e(rB,{"number|Complex, ...number|Complex":(p,v)=>{for(var y=[p,...v];y.length>0&&t(y[y.length-1]);)y.pop();if(y.length<2)throw new RangeError("Polynomial [".concat(p,", ").concat(v,"] must have a non-zero non-constant coefficient"));switch(y.length){case 2:return[u(o(y[0],y[1]))];case 3:{var[m,S,b]=y,g=a(2,b),w=a(S,S),x=a(4,b,m);if(r(w,x))return[o(u(S),g)];var M=l(s(w,x));return[o(s(M,S),g),o(s(u(M),S),g)]}case 4:{var[A,N,C,T]=y,R=u(a(3,T)),U=a(C,C),F=a(3,T,N),B=i(a(2,C,C,C),a(27,T,T,A)),D=a(9,T,C,N);if(r(U,F)&&r(B,D))return[o(C,R)];var O=s(U,F),$=s(B,D),L=i(a(18,T,C,N,A),a(C,C,N,N)),X=i(a(4,C,C,C,A),a(4,T,N,N,N),a(27,T,T,A,A));if(r(L,X))return[o(s(a(4,T,C,N),i(a(9,T,T,A),a(C,C,C))),a(T,O)),o(s(a(9,T,A),a(C,N)),a(2,O))];var Z;r(U,F)?Z=$:Z=o(i($,l(s(a($,$),a(4,O,O,O)))),2);var Q=!0,K=c(Z,Q).toArray().map(re=>o(i(C,re,o(O,re)),R));return K.map(re=>f(re)==="Complex"&&r(h(re),h(re)+d(re))?h(re):re)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(y))}}})}),tve="Help",nve=["evaluate"],rve=ae(tve,nve,n=>{var{evaluate:e}=n;function t(r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!r)throw new Error('Argument "doc" missing');this.doc=r}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var r=this.doc||{},i=`
`;if(r.name&&(i+="Name: "+r.name+`

`),r.category&&(i+="Category: "+r.category+`

`),r.description&&(i+=`Description:
    `+r.description+`

`),r.syntax&&(i+=`Syntax:
    `+r.syntax.join(`
    `)+`

`),r.examples){i+=`Examples:
`;for(var s=!1,a=e("config()"),o={config:f=>(s=!0,e("config(newConfig)",{newConfig:f}))},l=0;l<r.examples.length;l++){var u=r.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,o)}catch(f){c=f}c!==void 0&&!cP(c)&&(i+="        "+un(c,{precision:14})+`
`)}i+=`
`,s&&e("config(originalConfig)",{originalConfig:a})}return r.mayThrow&&r.mayThrow.length&&(i+="Throws: "+r.mayThrow.join(", ")+`

`),r.seealso&&r.seealso.length&&(i+="See also: "+r.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var r=Xt(this.doc);return r.mathjs="Help",r},t.fromJSON=function(r){var i={};return Object.keys(r).filter(s=>s!=="mathjs").forEach(s=>{i[s]=r[s]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0}),ive="Chain",sve=["?on","math","typed"],ave=ae(ive,sve,n=>{var{on:e,math:t,typed:r}=n;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");fP(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return un(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function s(u,c){typeof c=="function"&&(i.prototype[u]=o(c))}function a(u,c){Jb(i.prototype,u,function(){var d=c();if(typeof d=="function")return o(d)})}function o(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(r.isTypedFunction(u)){var d=r.resolve(u,c);if(d.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")s(u,c);else{var f=function(p){gt(u,p)&&l[p]===void 0&&a(p,()=>u[p])};for(var d in u)f(d)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(t),e&&e("import",function(u,c,f){f||a(u,c)}),i},{isClass:!0}),iB={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},ove={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},lve={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},uve={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},cve={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},fve={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},dve={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},hve={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},pve={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},mve={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},gve={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},sB={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},vve={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},yve={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},xve={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},bve={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},wve={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},Sve={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},_ve={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},Eve={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},Mve={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},Cve={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},Ave={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},Tve={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},Dve={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},Nve={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},Pve={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},Rve={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},Ove={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},Ive={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},kve={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},Lve={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},Fve={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},Bve={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},zve={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},Uve={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},$ve={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},Vve={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},Hve={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},Wve={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},Gve={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},jve={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},qve={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},Xve={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},Yve={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},Kve={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},Zve={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},Jve={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},Qve={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},e0e={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},t0e={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},n0e={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},r0e={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},i0e={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},s0e={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},a0e={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},o0e={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},l0e={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},u0e={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},c0e={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},f0e={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},d0e={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},h0e={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},p0e={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},m0e={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},g0e={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax ≣ 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},v0e={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},y0e={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},x0e={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},b0e={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},w0e={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},S0e={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},_0e={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},E0e={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},M0e={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},C0e={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},A0e={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},T0e={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},D0e={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},N0e={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},P0e={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},R0e={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},O0e={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},I0e={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},k0e={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},L0e={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},F0e={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},B0e={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},z0e={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},U0e={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},$0e={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},V0e={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},H0e={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},W0e={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},G0e={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},j0e={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},q0e={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},X0e={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},Y0e={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},K0e={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},Z0e={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},J0e={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},Q0e={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},eye={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},tye={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},nye={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},rye={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},iye={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},sye={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},aye={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},oye={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},lye={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},uye={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},cye={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},fye={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},dye={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},hye={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},pye={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},mye={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},gye={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},vye={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},yye={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},xye={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},bye={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},wye={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},Sye={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},_ye={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Eye={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Mye={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore–Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},Cye={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},Aye={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},Tye={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},Dye={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},Nye={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},Pye={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},Rye={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},Oye={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},Iye={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},kye={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},Lye={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},Fye={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},Bye={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},zye={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},Uye={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},$ye={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},Vye={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},Hye={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},Wye={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},Gye={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},jye={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},qye={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},Xye={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},Yye={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},Kye={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},Zye={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},Jye={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},Qye={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},e1e={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},t1e={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},n1e={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},r1e={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},i1e={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},s1e={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},a1e={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},o1e={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},l1e={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},u1e={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},c1e={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},f1e={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},d1e={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},h1e={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},p1e={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},m1e={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},g1e={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},v1e={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},y1e={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},x1e={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},b1e={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},w1e={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},S1e={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},_1e={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},E1e={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},M1e={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},C1e={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},A1e={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},T1e={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},D1e={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemanns Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},N1e={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},P1e={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},R1e={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},O1e={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},I1e={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},k1e={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},L1e={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},F1e={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},B1e={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},z1e={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},U1e={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},$1e={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},V1e={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},H1e={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},W1e={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},G1e={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},j1e={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},q1e={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},X1e={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},Y1e={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},K1e={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},Z1e={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},J1e={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},Q1e={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},exe={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},txe={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},nxe={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},rxe={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},ixe={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},sxe={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},axe={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},oxe={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},lxe={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},uxe={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},cxe={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},fxe={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},dxe={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},hxe={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},pxe={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},mxe={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},gxe={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},vxe={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},yxe={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},xxe={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},bxe={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},wxe={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},Sxe={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},_xe={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},Exe={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Mxe={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Cxe={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},Axe={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","fraction","bignumber","string","format"]},Txe={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},Dxe={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},Nxe={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},Pxe={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},Rxe={bignumber:Sve,boolean:_ve,complex:Eve,createUnit:Mve,fraction:Cve,index:Ave,matrix:Tve,number:Dve,sparse:Nve,splitUnit:Pve,string:Rve,unit:Ove,e:iB,E:iB,false:ove,i:lve,Infinity:uve,LN2:fve,LN10:cve,LOG2E:hve,LOG10E:dve,NaN:pve,null:mve,pi:sB,PI:sB,phi:gve,SQRT1_2:vve,SQRT2:yve,tau:xve,true:bve,version:wve,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:Fve,lsolve:zve,lsolveAll:Uve,lup:$ve,lusolve:Vve,leafCount:Bve,polynomialRoot:Hve,resolve:jve,simplify:qve,simplifyConstant:Xve,simplifyCore:Yve,symbolicEqual:Zve,rationalize:Gve,slu:Kve,usolve:Jve,usolveAll:Qve,qr:Wve,abs:e0e,add:t0e,cbrt:n0e,ceil:r0e,cube:i0e,divide:s0e,dotDivide:a0e,dotMultiply:o0e,dotPow:l0e,exp:u0e,expm:c0e,expm1:f0e,fix:d0e,floor:h0e,gcd:p0e,hypot:m0e,lcm:v0e,log:y0e,log2:w0e,log1p:b0e,log10:x0e,mod:S0e,multiply:_0e,norm:E0e,nthRoot:M0e,nthRoots:C0e,pow:A0e,round:T0e,sign:D0e,sqrt:N0e,sqrtm:P0e,square:k0e,subtract:L0e,unaryMinus:F0e,unaryPlus:B0e,xgcd:z0e,invmod:g0e,bitAnd:U0e,bitNot:$0e,bitOr:V0e,bitXor:H0e,leftShift:W0e,rightArithShift:G0e,rightLogShift:j0e,bellNumbers:q0e,catalan:X0e,composition:Y0e,stirlingS2:K0e,config:Ive,import:kve,typed:Lve,arg:Z0e,conj:J0e,re:eye,im:Q0e,evaluate:tye,help:nye,distance:rye,intersect:iye,and:sye,not:aye,or:oye,xor:lye,concat:cye,count:fye,cross:dye,column:uye,ctranspose:hye,det:pye,diag:mye,diff:gye,dot:vye,getMatrixDataType:Sye,identity:_ye,filter:xye,flatten:bye,forEach:wye,inv:Eye,pinv:Mye,eigs:yye,kron:Cye,matrixFromFunction:Dye,matrixFromRows:Nye,matrixFromColumns:Tye,map:Aye,ones:Pye,partitionSelect:Rye,range:Oye,resize:kye,reshape:Iye,rotate:Lye,rotationMatrix:Fye,row:Bye,size:zye,sort:Uye,squeeze:$ye,subset:Vye,trace:Hye,transpose:Wye,zeros:Gye,fft:jye,ifft:qye,sylvester:R0e,schur:O0e,lyap:I0e,solveODE:Pxe,combinations:Xye,combinationsWithRep:Yye,factorial:Kye,gamma:Zye,kldivergence:Qye,lgamma:Jye,multinomial:e1e,permutations:t1e,pickRandom:n1e,random:r1e,randomInt:i1e,compare:s1e,compareNatural:a1e,compareText:o1e,deepEqual:l1e,equal:u1e,equalText:c1e,larger:f1e,largerEq:d1e,smaller:h1e,smallerEq:p1e,unequal:m1e,setCartesian:g1e,setDifference:v1e,setDistinct:y1e,setIntersect:x1e,setIsSubset:b1e,setMultiplicity:w1e,setPowerset:S1e,setSize:_1e,setSymDifference:E1e,setUnion:M1e,zpk2tf:C1e,freqz:A1e,erf:T1e,zeta:D1e,cumsum:z1e,mad:N1e,max:P1e,mean:R1e,median:O1e,min:I1e,mode:k1e,prod:L1e,quantileSeq:F1e,std:B1e,sum:U1e,variance:$1e,corr:V1e,acos:H1e,acosh:W1e,acot:G1e,acoth:j1e,acsc:q1e,acsch:X1e,asec:Y1e,asech:K1e,asin:Z1e,asinh:J1e,atan:Q1e,atanh:txe,atan2:exe,cos:nxe,cosh:rxe,cot:ixe,coth:sxe,csc:axe,csch:oxe,sec:lxe,sech:uxe,sin:cxe,sinh:fxe,tan:dxe,tanh:hxe,to:pxe,clone:gxe,format:vxe,bin:mxe,oct:Txe,hex:xxe,isNaN:wxe,isInteger:bxe,isNegative:Sxe,isNumeric:_xe,hasNumericValue:yxe,isPositive:Exe,isPrime:Mxe,isZero:Cxe,print:Dxe,typeOf:Nxe,numeric:Axe},aB="help",Oxe=["typed","mathWithTransform","Help"],Ixe=ae(aB,Oxe,n=>{var{typed:e,mathWithTransform:t,Help:r}=n;return e(aB,{any:function(s){var a,o=s;if(typeof s!="string"){for(a in t)if(gt(t,a)&&s===t[a]){o=a;break}}var l=ws(Rxe,o);if(!l){var u=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+u+'"')}return new r(l)}})}),oB="chain",kxe=["typed","Chain"],Lxe=ae(oB,kxe,n=>{var{typed:e,Chain:t}=n;return e(oB,{"":function(){return new t},any:function(i){return new t(i)}})}),lB="det",Fxe=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Bxe=ae(lB,Fxe,n=>{var{typed:e,matrix:t,subtractScalar:r,multiply:i,divideScalar:s,isZero:a,unaryMinus:o}=n;return e(lB,{any:function(c){return Xt(c)},"Array | Matrix":function(c){var f;switch(Ut(c)?f=c.size():Array.isArray(c)?(c=t(c),f=c.size()):f=[],f.length){case 0:return Xt(c);case 1:if(f[0]===1)return Xt(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+un(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return l(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+un(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+un(f)+")")}}});function l(u,c,f){if(c===1)return Xt(u[0][0]);if(c===2)return r(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var d=!1,h=new Array(c).fill(0).map((M,A)=>A),p=0;p<c;p++){var v=h[p];if(a(u[v][p])){var y=void 0;for(y=p+1;y<c;y++)if(!a(u[h[y]][p])){v=h[y],h[y]=h[p],h[p]=v,d=!d;break}if(y===c)return u[v][p]}for(var m=u[v][p],S=p===0?1:u[h[p-1]][p-1],b=p+1;b<c;b++)for(var g=h[b],w=p+1;w<c;w++)u[g][w]=s(r(i(u[g][w],m),i(u[g][p],u[v][w])),S)}var x=u[h[c-1]][c-1];return d?o(x):x}}),uB="inv",zxe=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Uxe=ae(uB,zxe,n=>{var{typed:e,matrix:t,divideScalar:r,addScalar:i,multiply:s,unaryMinus:a,det:o,identity:l,abs:u}=n;return e(uB,{"Array | Matrix":function(d){var h=Ut(d)?d.size():nn(d);switch(h.length){case 1:if(h[0]===1)return Ut(d)?t([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+un(h)+")");case 2:{var p=h[0],v=h[1];if(p===v)return Ut(d)?t(c(d.valueOf(),p,v),d.storage()):c(d,p,v);throw new RangeError("Matrix must be square (size: "+un(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+un(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var p,v,y,m,S;if(d===1){if(m=f[0][0],m===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,m)]]}else if(d===2){var b=o(f);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],b),r(a(f[0][1]),b)],[r(a(f[1][0]),b),r(f[0][0],b)]]}else{var g=f.concat();for(p=0;p<d;p++)g[p]=g[p].concat();for(var w=l(d).valueOf(),x=0;x<h;x++){var M=u(g[x][x]),A=x;for(p=x+1;p<d;)u(g[p][x])>M&&(M=u(g[p][x]),A=p),p++;if(M===0)throw Error("Cannot calculate inverse, determinant is zero");p=A,p!==x&&(S=g[x],g[x]=g[p],g[p]=S,S=w[x],w[x]=w[p],w[p]=S);var N=g[x],C=w[x];for(p=0;p<d;p++){var T=g[p],R=w[p];if(p!==x){if(T[x]!==0){for(y=r(a(T[x]),N[x]),v=x;v<h;v++)T[v]=i(T[v],s(y,N[v]));for(v=0;v<h;v++)R[v]=i(R[v],s(y,C[v]))}}else{for(y=N[x],v=x;v<h;v++)T[v]=r(T[v],y);for(v=0;v<h;v++)R[v]=r(R[v],y)}}}return w}}}),cB="pinv",$xe=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],Vxe=ae(cB,$xe,n=>{var{typed:e,matrix:t,inv:r,deepEqual:i,equal:s,dotDivide:a,dot:o,ctranspose:l,divideScalar:u,multiply:c,add:f,Complex:d}=n;return e(cB,{"Array | Matrix":function(b){var g=Ut(b)?b.size():nn(b);switch(g.length){case 1:return m(b)?l(b):g[0]===1?r(b):a(l(b),o(b,b));case 2:{if(m(b))return l(b);var w=g[0],x=g[1];if(w===x)try{return r(b)}catch(M){if(!(M instanceof Error&&M.message.match(/Cannot calculate inverse, determinant is zero/)))throw M}return Ut(b)?t(h(b.valueOf(),w,x),b.storage()):h(b,w,x)}default:throw new RangeError("Matrix must be two dimensional (size: "+un(g)+")")}},any:function(b){return s(b,0)?Xt(b):u(1,b)}});function h(S,b,g){var{C:w,F:x}=v(S,b,g),M=c(r(c(l(w),w)),l(w)),A=c(l(x),r(c(x,l(x))));return c(A,M)}function p(S,b,g){for(var w=Xt(S),x=0,M=0;M<b;M++){if(g<=x)return w;for(var A=M;y(w[A][x]);)if(A++,b===A&&(A=M,x++,g===x))return w;[w[A],w[M]]=[w[M],w[A]];for(var N=w[M][x],C=0;C<g;C++)w[M][C]=a(w[M][C],N);for(var T=0;T<b;T++)if(T!==M){N=w[T][x];for(var R=0;R<g;R++)w[T][R]=f(w[T][R],c(-1,c(N,w[M][R])))}x++}return w}function v(S,b,g){var w=p(S,b,g),x=S.map((A,N)=>A.filter((C,T)=>T<b&&!y(o(w[T],w[T])))),M=w.filter((A,N)=>!y(o(w[N],w[N])));return{C:x,F:M}}function y(S){return s(f(S,d(1,1)),f(0,d(1,1)))}function m(S){return i(f(S,d(1,1)),f(c(S,0),d(1,1)))}});function Hxe(n){var{addScalar:e,subtract:t,flatten:r,multiply:i,multiplyScalar:s,divideScalar:a,sqrt:o,abs:l,bignumber:u,diag:c,size:f,reshape:d,inv:h,qr:p,usolve:v,usolveAll:y,equal:m,complex:S,larger:b,smaller:g,matrixFromColumns:w,dot:x}=n;function M(Q,K,re,ce){var ue=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,me=A(Q,K,re,ce,ue);N(Q,K,re,ce,ue,me);var{values:Ee,C:xe}=C(Q,K,re,ce,ue);if(ue){var Te=T(Q,K,xe,me,Ee,re,ce);return{values:Ee,eigenvectors:Te}}return{values:Ee}}function A(Q,K,re,ce,ue){var me=ce==="BigNumber",Ee=ce==="Complex",xe=me?u(0):0,Te=me?u(1):Ee?S(1):1,De=me?u(1):1,ie=me?u(10):2,Ie=s(ie,ie),ke;ue&&(ke=Array(K).fill(Te));for(var te=!1;!te;){te=!0;for(var ne=0;ne<K;ne++){for(var Ce=xe,se=xe,j=0;j<K;j++)ne!==j&&(Ce=e(Ce,l(Q[j][ne])),se=e(se,l(Q[ne][j])));if(!m(Ce,0)&&!m(se,0)){for(var G=De,fe=Ce,Me=a(se,ie),q=s(se,ie);g(fe,Me);)fe=s(fe,Ie),G=s(G,ie);for(;b(fe,q);)fe=a(fe,Ie),G=a(G,ie);var J=g(a(e(fe,se),G),s(e(Ce,se),.95));if(J){te=!1;for(var be=a(1,G),Se=0;Se<K;Se++)ne!==Se&&(Q[ne][Se]=s(Q[ne][Se],be),Q[Se][ne]=s(Q[Se][ne],G));ue&&(ke[ne]=s(ke[ne],be))}}}}return ue?c(ke):null}function N(Q,K,re,ce,ue,me){var Ee=ce==="BigNumber",xe=ce==="Complex",Te=Ee?u(0):xe?S(0):0;Ee&&(re=u(re));for(var De=0;De<K-2;De++){for(var ie=0,Ie=Te,ke=De+1;ke<K;ke++){var te=Q[ke][De];g(l(Ie),l(te))&&(Ie=te,ie=ke)}if(!g(l(Ie),re)){if(ie!==De+1){var ne=Q[ie];Q[ie]=Q[De+1],Q[De+1]=ne;for(var Ce=0;Ce<K;Ce++){var se=Q[Ce][ie];Q[Ce][ie]=Q[Ce][De+1],Q[Ce][De+1]=se}if(ue){var j=me[ie];me[ie]=me[De+1],me[De+1]=j}}for(var G=De+2;G<K;G++){var fe=a(Q[G][De],Ie);if(fe!==0){for(var Me=0;Me<K;Me++)Q[G][Me]=t(Q[G][Me],s(fe,Q[De+1][Me]));for(var q=0;q<K;q++)Q[q][De+1]=e(Q[q][De+1],s(fe,Q[q][G]));if(ue)for(var J=0;J<K;J++)me[G][J]=t(me[G][J],s(fe,me[De+1][J]))}}}}return me}function C(Q,K,re,ce,ue){var me=ce==="BigNumber",Ee=ce==="Complex",xe=me?u(1):Ee?S(1):1;me&&(re=u(re));for(var Te=Xt(Q),De=[],ie=K,Ie=[],ke=ue?c(Array(K).fill(xe)):void 0,te=ue?c(Array(ie).fill(xe)):void 0,ne=0;ne<=100;){ne+=1;for(var Ce=Te[ie-1][ie-1],se=0;se<ie;se++)Te[se][se]=t(Te[se][se],Ce);var{Q:j,R:G}=p(Te);Te=i(G,j);for(var fe=0;fe<ie;fe++)Te[fe][fe]=e(Te[fe][fe],Ce);if(ue&&(te=i(te,j)),ie===1||g(l(Te[ie-1][ie-2]),re)){ne=0,De.push(Te[ie-1][ie-1]),ue&&(Ie.unshift([[1]]),F(te,K),ke=i(ke,te),ie>1&&(te=c(Array(ie-1).fill(xe)))),ie-=1,Te.pop();for(var Me=0;Me<ie;Me++)Te[Me].pop()}else if(ie===2||g(l(Te[ie-2][ie-3]),re)){ne=0;var q=R(Te[ie-2][ie-2],Te[ie-2][ie-1],Te[ie-1][ie-2],Te[ie-1][ie-1]);De.push(...q),ue&&(Ie.unshift(U(Te[ie-2][ie-2],Te[ie-2][ie-1],Te[ie-1][ie-2],Te[ie-1][ie-1],q[0],q[1],re,ce)),F(te,K),ke=i(ke,te),ie>2&&(te=c(Array(ie-2).fill(xe)))),ie-=2,Te.pop(),Te.pop();for(var J=0;J<ie;J++)Te[J].pop(),Te[J].pop()}if(ie===0)break}if(De.sort((Ne,Fe)=>+t(l(Ne),l(Fe))),ne>100){var be=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+De.join(", "));throw be.values=De,be.vectors=[],be}var Se=ue?i(ke,B(Ie,K)):void 0;return{values:De,C:Se}}function T(Q,K,re,ce,ue,me,Ee){var xe=h(re),Te=i(xe,Q,re),De=Ee==="BigNumber",ie=Ee==="Complex",Ie=De?u(0):ie?S(0):0,ke=De?u(1):ie?S(1):1,te=[],ne=[];for(var Ce of ue){var se=D(te,Ce,m);se===-1?(te.push(Ce),ne.push(1)):ne[se]+=1}for(var j=[],G=te.length,fe=Array(K).fill(Ie),Me=c(Array(K).fill(ke)),q=function(){var Se=te[J],Ne=t(Te,i(Se,Me)),Fe=y(Ne,fe);for(Fe.shift();Fe.length<ne[J];){var He=O(Ne,K,Fe,me,Ee);if(He===null)break;Fe.push(He)}var Oe=i(h(ce),re);Fe=Fe.map(Je=>i(Oe,Je)),j.push(...Fe.map(Je=>({value:Se,vector:r(Je)})))},J=0;J<G;J++)q();return j}function R(Q,K,re,ce){var ue=e(Q,ce),me=t(s(Q,ce),s(K,re)),Ee=s(ue,.5),xe=s(o(t(s(ue,ue),s(4,me))),.5);return[e(Ee,xe),t(Ee,xe)]}function U(Q,K,re,ce,ue,me,Ee,xe){var Te=xe==="BigNumber",De=xe==="Complex",ie=Te?u(0):De?S(0):0,Ie=Te?u(1):De?S(1):1;if(g(l(re),Ee))return[[Ie,ie],[ie,Ie]];if(b(l(t(ue,me)),Ee))return[[t(ue,ce),t(me,ce)],[re,re]];var ke=t(Q,ue),te=t(ce,ue);return g(l(K),Ee)&&g(l(te),Ee)?[[ke,Ie],[re,ie]]:[[K,ie],[te,Ie]]}function F(Q,K){for(var re=0;re<Q.length;re++)Q[re].push(...Array(K-Q[re].length).fill(0));for(var ce=Q.length;ce<K;ce++)Q.push(Array(K).fill(0)),Q[ce][ce]=1;return Q}function B(Q,K){for(var re=[],ce=0;ce<K;ce++)re[ce]=Array(K).fill(0);var ue=0;for(var me of Q){for(var Ee=me.length,xe=0;xe<Ee;xe++)for(var Te=0;Te<Ee;Te++)re[ue+xe][ue+Te]=me[xe][Te];ue+=Ee}return re}function D(Q,K,re){for(var ce=0;ce<Q.length;ce++)if(re(Q[ce],K))return ce;return-1}function O(Q,K,re,ce,ue){for(var me=ue==="BigNumber"?u(1e3):1e3,Ee,xe=0;xe<5;++xe){Ee=$(K,re,ue);try{Ee=v(Q,Ee)}catch{continue}if(b(X(Ee),me))break}if(xe>=5)return null;for(xe=0;;){var Te=v(Q,Ee);if(g(X(L(Ee,[Te])),ce))break;if(++xe>=10)return null;Ee=Z(Te)}return Ee}function $(Q,K,re){var ce=re==="BigNumber",ue=re==="Complex",me=Array(Q).fill(0).map(Ee=>2*Math.random()-1);return ce&&(me=me.map(Ee=>u(Ee))),ue&&(me=me.map(Ee=>S(Ee))),me=L(me,K),Z(me,re)}function L(Q,K){var re=f(Q);for(var ce of K)ce=d(ce,re),Q=t(Q,i(a(x(ce,Q),x(ce,ce)),ce));return Q}function X(Q){return l(o(x(Q,Q)))}function Z(Q,K){var re=K==="BigNumber",ce=K==="Complex",ue=re?u(1):ce?S(1):1;return i(a(ue,X(Q)),Q)}return M}function Wxe(n){var{config:e,addScalar:t,subtract:r,abs:i,atan:s,cos:a,sin:o,multiplyScalar:l,inv:u,bignumber:c,multiply:f,add:d}=n;function h(N,C){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.epsilon,R=arguments.length>3?arguments[3]:void 0,U=arguments.length>4?arguments[4]:void 0;if(R==="number")return p(N,T,U);if(R==="BigNumber")return v(N,T,U);throw TypeError("Unsupported data type: "+R)}function p(N,C,T){var R=N.length,U=Math.abs(C/R),F,B;if(T){B=new Array(R);for(var D=0;D<R;D++)B[D]=Array(R).fill(0),B[D][D]=1}for(var O=x(N);Math.abs(O[1])>=Math.abs(U);){var $=O[0][0],L=O[0][1];F=y(N[$][$],N[L][L],N[$][L]),N=w(N,F,$,L),T&&(B=S(B,F,$,L)),O=x(N)}for(var X=Array(R).fill(0),Z=0;Z<R;Z++)X[Z]=N[Z][Z];return A(Xt(X),B,T)}function v(N,C,T){var R=N.length,U=i(C/R),F,B;if(T){B=new Array(R);for(var D=0;D<R;D++)B[D]=Array(R).fill(0),B[D][D]=1}for(var O=M(N);i(O[1])>=i(U);){var $=O[0][0],L=O[0][1];F=m(N[$][$],N[L][L],N[$][L]),N=g(N,F,$,L),T&&(B=b(B,F,$,L)),O=M(N)}for(var X=Array(R).fill(0),Z=0;Z<R;Z++)X[Z]=N[Z][Z];return A(Xt(X),B,T)}function y(N,C,T){var R=C-N;return Math.abs(R)<=e.epsilon?Math.PI/4:.5*Math.atan(2*T/(C-N))}function m(N,C,T){var R=r(C,N);return i(R)<=e.epsilon?c(-1).acos().div(4):l(.5,s(f(2,T,u(R))))}function S(N,C,T,R){for(var U=N.length,F=Math.cos(C),B=Math.sin(C),D=Array(U).fill(0),O=Array(U).fill(0),$=0;$<U;$++)D[$]=F*N[$][T]-B*N[$][R],O[$]=B*N[$][T]+F*N[$][R];for(var L=0;L<U;L++)N[L][T]=D[L],N[L][R]=O[L];return N}function b(N,C,T,R){for(var U=N.length,F=a(C),B=o(C),D=Array(U).fill(c(0)),O=Array(U).fill(c(0)),$=0;$<U;$++)D[$]=r(l(F,N[$][T]),l(B,N[$][R])),O[$]=t(l(B,N[$][T]),l(F,N[$][R]));for(var L=0;L<U;L++)N[L][T]=D[L],N[L][R]=O[L];return N}function g(N,C,T,R){for(var U=N.length,F=c(a(C)),B=c(o(C)),D=l(F,F),O=l(B,B),$=Array(U).fill(c(0)),L=Array(U).fill(c(0)),X=f(c(2),F,B,N[T][R]),Z=t(r(l(D,N[T][T]),X),l(O,N[R][R])),Q=d(l(O,N[T][T]),X,l(D,N[R][R])),K=0;K<U;K++)$[K]=r(l(F,N[T][K]),l(B,N[R][K])),L[K]=t(l(B,N[T][K]),l(F,N[R][K]));N[T][T]=Z,N[R][R]=Q,N[T][R]=c(0),N[R][T]=c(0);for(var re=0;re<U;re++)re!==T&&re!==R&&(N[T][re]=$[re],N[re][T]=$[re],N[R][re]=L[re],N[re][R]=L[re]);return N}function w(N,C,T,R){for(var U=N.length,F=Math.cos(C),B=Math.sin(C),D=F*F,O=B*B,$=Array(U).fill(0),L=Array(U).fill(0),X=D*N[T][T]-2*F*B*N[T][R]+O*N[R][R],Z=O*N[T][T]+2*F*B*N[T][R]+D*N[R][R],Q=0;Q<U;Q++)$[Q]=F*N[T][Q]-B*N[R][Q],L[Q]=B*N[T][Q]+F*N[R][Q];N[T][T]=X,N[R][R]=Z,N[T][R]=0,N[R][T]=0;for(var K=0;K<U;K++)K!==T&&K!==R&&(N[T][K]=$[K],N[K][T]=$[K],N[R][K]=L[K],N[K][R]=L[K]);return N}function x(N){for(var C=N.length,T=0,R=[0,1],U=0;U<C;U++)for(var F=U+1;F<C;F++)Math.abs(T)<Math.abs(N[U][F])&&(T=Math.abs(N[U][F]),R=[U,F]);return[R,T]}function M(N){for(var C=N.length,T=0,R=[0,1],U=0;U<C;U++)for(var F=U+1;F<C;F++)i(T)<i(N[U][F])&&(T=i(N[U][F]),R=[U,F]);return[R,T]}function A(N,C,T){var R=N.length,U=Array(R),F;if(T){F=Array(R);for(var B=0;B<R;B++)F[B]=Array(R)}for(var D=0;D<R;D++){for(var O=0,$=N[0],L=0;L<N.length;L++)i(N[L])<i($)&&(O=L,$=N[O]);if(U[D]=N.splice(O,1)[0],T)for(var X=0;X<R;X++)F[D][X]=C[X][O],C[X].splice(O,1)}if(!T)return{values:U};var Z=F.map((Q,K)=>({value:U[K],vector:Q}));return{values:U,eigenvectors:Z}}return h}var Gxe="eigs",jxe=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],qxe=ae(Gxe,jxe,n=>{var{config:e,typed:t,matrix:r,addScalar:i,subtract:s,equal:a,abs:o,atan:l,cos:u,sin:c,multiplyScalar:f,divideScalar:d,inv:h,bignumber:p,multiply:v,add:y,larger:m,column:S,flatten:b,number:g,complex:w,sqrt:x,diag:M,size:A,reshape:N,qr:C,usolve:T,usolveAll:R,im:U,re:F,smaller:B,matrixFromColumns:D,dot:O}=n,$=Wxe({config:e,addScalar:i,subtract:s,column:S,flatten:b,equal:a,abs:o,atan:l,cos:u,sin:c,multiplyScalar:f,inv:h,bignumber:p,complex:w,multiply:v,add:y}),L=Hxe({config:e,addScalar:i,subtract:s,multiply:v,multiplyScalar:f,flatten:b,divideScalar:d,sqrt:x,abs:o,bignumber:p,diag:M,size:A,reshape:N,qr:C,inv:h,usolve:T,usolveAll:R,equal:a,complex:w,larger:m,smaller:B,matrixFromColumns:D,dot:O});return t("eigs",{Array:function(me){return X(r(me))},"Array, number|BigNumber":function(me,Ee){return X(r(me),{precision:Ee})},"Array, Object"(ue,me){return X(r(ue),me)},Matrix:function(me){return X(me,{matricize:!0})},"Matrix, number|BigNumber":function(me,Ee){return X(me,{precision:Ee,matricize:!0})},"Matrix, Object":function(me,Ee){var xe={matricize:!0};return ot(xe,Ee),X(me,xe)}});function X(ue){var me,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe="eigenvectors"in Ee?Ee.eigenvectors:!0,Te=(me=Ee.precision)!==null&&me!==void 0?me:e.epsilon,De=Z(ue,Te,xe);return Ee.matricize&&(De.values=r(De.values),xe&&(De.eigenvectors=De.eigenvectors.map(ie=>{var{value:Ie,vector:ke}=ie;return{value:Ie,vector:r(ke)}}))),xe&&Object.defineProperty(De,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),De}function Z(ue,me,Ee){var xe=ue.toArray(),Te=ue.size();if(Te.length!==2||Te[0]!==Te[1])throw new RangeError("Matrix must be square (size: ".concat(un(Te),")"));var De=Te[0];if(K(xe,De,me)&&(re(xe,De),Q(xe,De,me))){var ie=ce(ue,xe,De);return $(xe,De,me,ie,Ee)}var Ie=ce(ue,xe,De);return L(xe,De,me,Ie,Ee)}function Q(ue,me,Ee){for(var xe=0;xe<me;xe++)for(var Te=xe;Te<me;Te++)if(m(p(o(s(ue[xe][Te],ue[Te][xe]))),Ee))return!1;return!0}function K(ue,me,Ee){for(var xe=0;xe<me;xe++)for(var Te=0;Te<me;Te++)if(m(p(o(U(ue[xe][Te]))),Ee))return!1;return!0}function re(ue,me){for(var Ee=0;Ee<me;Ee++)for(var xe=0;xe<me;xe++)ue[Ee][xe]=F(ue[Ee][xe])}function ce(ue,me,Ee){var xe=ue.datatype();if(xe==="number"||xe==="BigNumber"||xe==="Complex")return xe;for(var Te=!1,De=!1,ie=!1,Ie=0;Ie<Ee;Ie++)for(var ke=0;ke<Ee;ke++){var te=me[Ie][ke];if(tn(te)||Ld(te))Te=!0;else if(Jt(te))De=!0;else if(Mo(te))ie=!0;else throw TypeError("Unsupported type in Matrix: "+$n(te))}if(De&&ie&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),ie){for(var ne=0;ne<Ee;ne++)for(var Ce=0;Ce<Ee;Ce++)me[ne][Ce]=w(me[ne][Ce]);return"Complex"}if(De){for(var se=0;se<Ee;se++)for(var j=0;j<Ee;j++)me[se][j]=p(me[se][j]);return"BigNumber"}if(Te){for(var G=0;G<Ee;G++)for(var fe=0;fe<Ee;fe++)me[G][fe]=g(me[G][fe]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),fB="expm",Xxe=["typed","abs","add","identity","inv","multiply"],Yxe=ae(fB,Xxe,n=>{var{typed:e,abs:t,add:r,identity:i,inv:s,multiply:a}=n;return e(fB,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+un(d)+")");for(var h=d[0],p=1e-15,v=o(f),y=l(v,p),m=y.q,S=y.j,b=a(f,Math.pow(2,-S)),g=i(h),w=i(h),x=1,M=b,A=-1,N=1;N<=m;N++)N>1&&(M=a(M,b),A=-A),x=x*(m-N+1)/((2*m-N+1)*N),g=r(g,a(x,M)),w=r(w,a(x*A,M));for(var C=a(s(w),g),T=0;T<S;T++)C=a(C,C);return gc(f)?f.createSparseMatrix(C):C}});function o(c){for(var f=c.size()[0],d=0,h=0;h<f;h++){for(var p=0,v=0;v<f;v++)p+=t(c.get([h,v]));d=Math.max(p,d)}return d}function l(c,f){for(var d=30,h=0;h<d;h++)for(var p=0;p<=h;p++){var v=h-p;if(u(c,p,v)<f)return{q:p,j:v}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,f,d){for(var h=1,p=2;p<=f;p++)h*=p;for(var v=h,y=f+1;y<=2*f;y++)v*=y;var m=v*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*h*h/(v*m)}}),dB="sqrtm",Kxe=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],Zxe=ae(dB,Kxe,n=>{var{typed:e,abs:t,add:r,multiply:i,map:s,sqrt:a,subtract:o,inv:l,size:u,max:c,identity:f}=n,d=1e3,h=1e-6;function p(v){var y,m=0,S=v,b=f(u(v));do{var g=S;if(S=i(.5,r(g,l(b))),b=i(.5,r(b,l(g))),y=c(t(o(S,g))),y>h&&++m>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(y>h);return S}return e(dB,{"Array | Matrix":function(y){var m=Ut(y)?y.size():nn(y);switch(m.length){case 1:if(m[0]===1)return s(y,a);throw new RangeError("Matrix must be square (size: "+un(m)+")");case 2:{var S=m[0],b=m[1];if(S===b)return p(y);throw new RangeError("Matrix must be square (size: "+un(m)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+un(m)+")")}}})}),hB="sylvester",Jxe=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],Qxe=ae(hB,Jxe,n=>{var{typed:e,schur:t,matrixFromColumns:r,matrix:i,multiply:s,range:a,concat:o,transpose:l,index:u,subset:c,add:f,subtract:d,identity:h,lusolve:p,abs:v}=n;return e(hB,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(S,b,g){return y(i(S),b,g)},"Array, Array, Matrix":function(S,b,g){return y(i(S),i(b),g)},"Array, Matrix, Array":function(S,b,g){return y(i(S),b,i(g))},"Matrix, Array, Matrix":function(S,b,g){return y(S,i(b),g)},"Matrix, Array, Array":function(S,b,g){return y(S,i(b),i(g))},"Matrix, Matrix, Array":function(S,b,g){return y(S,b,i(g))},"Array, Array, Array":function(S,b,g){return y(i(S),i(b),i(g)).toArray()}});function y(m,S,b){for(var g=S.size()[0],w=m.size()[0],x=t(m),M=x.T,A=x.U,N=t(s(-1,S)),C=N.T,T=N.U,R=s(s(l(A),b),T),U=a(0,w),F=[],B=(ie,Ie)=>o(ie,Ie,1),D=(ie,Ie)=>o(ie,Ie,0),O=0;O<g;O++)if(O<g-1&&v(c(C,u(O+1,O)))>1e-5){for(var $=D(c(R,u(U,O)),c(R,u(U,O+1))),L=0;L<O;L++)$=f($,D(s(F[L],c(C,u(L,O))),s(F[L],c(C,u(L,O+1)))));var X=s(h(w),s(-1,c(C,u(O,O)))),Z=s(h(w),s(-1,c(C,u(O+1,O)))),Q=s(h(w),s(-1,c(C,u(O,O+1)))),K=s(h(w),s(-1,c(C,u(O+1,O+1)))),re=D(B(f(M,X),Z),B(Q,f(M,K))),ce=p(re,$);F[O]=ce.subset(u(a(0,w),0)),F[O+1]=ce.subset(u(a(w,2*w),0)),O++}else{for(var ue=c(R,u(U,O)),me=0;me<O;me++)ue=f(ue,s(F[me],c(C,u(me,O))));var Ee=c(C,u(O,O)),xe=d(M,s(Ee,h(w)));F[O]=p(xe,ue)}var Te=i(r(...F)),De=s(A,s(Te,l(T)));return De}}),pB="schur",ebe=["typed","matrix","identity","multiply","qr","norm","subtract"],tbe=ae(pB,ebe,n=>{var{typed:e,matrix:t,identity:r,multiply:i,qr:s,norm:a,subtract:o}=n;return e(pB,{Array:function(c){var f=l(t(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return l(c)}});function l(u){var c=u.size()[0],f=u,d=r(c),h=0,p;do{p=f;var v=s(f),y=v.Q,m=v.R;if(f=i(m,y),d=i(d,y),h++>100)break}while(a(o(f,p))>1e-4);return{U:d,T:f}}}),mB="lyap",nbe=["typed","matrix","sylvester","multiply","transpose"],rbe=ae(mB,nbe,n=>{var{typed:e,matrix:t,sylvester:r,multiply:i,transpose:s}=n;return e(mB,{"Matrix, Matrix":function(o,l){return r(o,s(o),i(-1,l))},"Array, Matrix":function(o,l){return r(t(o),s(t(o)),i(-1,l))},"Matrix, Array":function(o,l){return r(o,s(t(o)),t(i(-1,l)))},"Array, Array":function(o,l){return r(t(o),s(t(o)),t(i(-1,l))).toArray()}})}),ibe="divide",sbe=["typed","matrix","multiply","equalScalar","divideScalar","inv"],abe=ae(ibe,sbe,n=>{var{typed:e,matrix:t,multiply:r,equalScalar:i,divideScalar:s,inv:a}=n,o=Li({typed:e,equalScalar:i}),l=Oo({typed:e});return e("divide",UH({"Array | Matrix, Array | Matrix":function(c,f){return r(c,a(f))},"DenseMatrix, any":function(c,f){return l(c,f,s,!1)},"SparseMatrix, any":function(c,f){return o(c,f,s,!1)},"Array, any":function(c,f){return l(t(c),f,s,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,a(f))}},s.signatures))}),gB="distance",obe=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],lbe=ae(gB,obe,n=>{var{typed:e,addScalar:t,subtractScalar:r,multiplyScalar:i,divideScalar:s,deepEqual:a,sqrt:o,abs:l}=n;return e(gB,{"Array, Array, Array":function(w,x,M){if(w.length===2&&x.length===2&&M.length===2){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(a(x,M))throw new TypeError("LinePoint1 should not be same with LinePoint2");var A=r(M[1],x[1]),N=r(x[0],M[0]),C=r(i(M[0],x[1]),i(x[0],M[1]));return y(w[0],w[1],A,N,C)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(w,x,M){if(Object.keys(w).length===2&&Object.keys(x).length===2&&Object.keys(M).length===2){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(M))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(a(p(x),p(M)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in w&&"pointY"in w&&"lineOnePtX"in x&&"lineOnePtY"in x&&"lineTwoPtX"in M&&"lineTwoPtY"in M){var A=r(M.lineTwoPtY,x.lineOnePtY),N=r(x.lineOnePtX,M.lineTwoPtX),C=r(i(M.lineTwoPtX,x.lineOnePtY),i(x.lineOnePtX,M.lineTwoPtY));return y(w.pointX,w.pointY,A,N,C)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(w,x){if(w.length===2&&x.length===3){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(w[0],w[1],x[0],x[1],x[2])}else if(w.length===3&&x.length===6){if(!f(w))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(x))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return m(w[0],w[1],w[2],x[0],x[1],x[2],x[3],x[4],x[5])}else if(w.length===x.length&&w.length>0){if(!d(w))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(x))throw new TypeError("All values of an array should be numbers or BigNumbers");return S(w,x)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(w,x){if(Object.keys(w).length===2&&Object.keys(x).length===3){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(x))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"xCoeffLine"in x&&"yCoeffLine"in x&&"constant"in x)return y(w.pointX,w.pointY,x.xCoeffLine,x.yCoeffLine,x.constant);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(x).length===6){if(!f(w))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(x))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"x0"in x&&"y0"in x&&"z0"in x&&"a"in x&&"b"in x&&"c"in x)return m(w.pointX,w.pointY,w.pointZ,x.x0,x.y0,x.z0,x.a,x.b,x.c);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===2&&Object.keys(x).length===2){if(!c(w))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointTwoX"in x&&"pointTwoY"in x)return S([w.pointOneX,w.pointOneY],[x.pointTwoX,x.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(x).length===3){if(!f(w))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(x))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointOneZ"in w&&"pointTwoX"in x&&"pointTwoY"in x&&"pointTwoZ"in x)return S([w.pointOneX,w.pointOneY,w.pointOneZ],[x.pointTwoX,x.pointTwoY,x.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(w){if(!v(w))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return b(w)}});function u(g){return typeof g=="number"||Jt(g)}function c(g){return g.constructor!==Array&&(g=p(g)),u(g[0])&&u(g[1])}function f(g){return g.constructor!==Array&&(g=p(g)),u(g[0])&&u(g[1])&&u(g[2])}function d(g){return Array.isArray(g)||(g=p(g)),g.every(u)}function h(g){return g.constructor!==Array&&(g=p(g)),u(g[0])&&u(g[1])&&u(g[2])&&u(g[3])&&u(g[4])&&u(g[5])}function p(g){for(var w=Object.keys(g),x=[],M=0;M<w.length;M++)x.push(g[w[M]]);return x}function v(g){if(g[0].length===2&&u(g[0][0])&&u(g[0][1])){if(g.some(w=>w.length!==2||!u(w[0])||!u(w[1])))return!1}else if(g[0].length===3&&u(g[0][0])&&u(g[0][1])&&u(g[0][2])){if(g.some(w=>w.length!==3||!u(w[0])||!u(w[1])||!u(w[2])))return!1}else return!1;return!0}function y(g,w,x,M,A){var N=l(t(t(i(x,g),i(M,w)),A)),C=o(t(i(x,x),i(M,M)));return s(N,C)}function m(g,w,x,M,A,N,C,T,R){var U=[r(i(r(A,w),R),i(r(N,x),T)),r(i(r(N,x),C),i(r(M,g),R)),r(i(r(M,g),T),i(r(A,w),C))];U=o(t(t(i(U[0],U[0]),i(U[1],U[1])),i(U[2],U[2])));var F=o(t(t(i(C,C),i(T,T)),i(R,R)));return s(U,F)}function S(g,w){for(var x=g.length,M=0,A=0,N=0;N<x;N++)A=r(g[N],w[N]),M=t(i(A,A),M);return o(M)}function b(g){for(var w=[],x=[],M=[],A=0;A<g.length-1;A++)for(var N=A+1;N<g.length;N++)g[0].length===2?(x=[g[A][0],g[A][1]],M=[g[N][0],g[N][1]]):g[0].length===3&&(x=[g[A][0],g[A][1],g[A][2]],M=[g[N][0],g[N][1],g[N][2]]),w.push(S(x,M));return w}}),ube="intersect",cbe=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],fbe=ae(ube,cbe,n=>{var{typed:e,config:t,abs:r,add:i,addScalar:s,matrix:a,multiply:o,multiplyScalar:l,divideScalar:u,subtract:c,smaller:f,equalScalar:d,flatten:h,isZero:p,isNumeric:v}=n;return e("intersect",{"Array, Array, Array":y,"Array, Array, Array, Array":m,"Matrix, Matrix, Matrix":function(T,R,U){var F=y(T.valueOf(),R.valueOf(),U.valueOf());return F===null?null:a(F)},"Matrix, Matrix, Matrix, Matrix":function(T,R,U,F){var B=m(T.valueOf(),R.valueOf(),U.valueOf(),F.valueOf());return B===null?null:a(B)}});function y(C,T,R){if(C=S(C),T=S(T),R=S(R),!g(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!g(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(R))throw new TypeError("Array with 4 numbers expected as third argument");return N(C[0],C[1],C[2],T[0],T[1],T[2],R[0],R[1],R[2],R[3])}function m(C,T,R,U){if(C=S(C),T=S(T),R=S(R),U=S(U),C.length===2){if(!b(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!b(T))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!b(R))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!b(U))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return x(C,T,R,U)}else if(C.length===3){if(!g(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!g(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!g(R))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!g(U))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return A(C[0],C[1],C[2],T[0],T[1],T[2],R[0],R[1],R[2],U[0],U[1],U[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function S(C){return C.length===1?C[0]:C.length>1&&Array.isArray(C[0])&&C.every(T=>Array.isArray(T)&&T.length===1)?h(C):C}function b(C){return C.length===2&&v(C[0])&&v(C[1])}function g(C){return C.length===3&&v(C[0])&&v(C[1])&&v(C[2])}function w(C){return C.length===4&&v(C[0])&&v(C[1])&&v(C[2])&&v(C[3])}function x(C,T,R,U){var F=C,B=R,D=c(F,T),O=c(B,U),$=c(l(D[0],O[1]),l(O[0],D[1]));if(p($)||f(r($),t.epsilon))return null;var L=l(O[0],F[1]),X=l(O[1],F[0]),Z=l(O[0],B[1]),Q=l(O[1],B[0]),K=u(s(c(c(L,X),Z),Q),$);return i(o(D,K),F)}function M(C,T,R,U,F,B,D,O,$,L,X,Z){var Q=l(c(C,T),c(R,U)),K=l(c(F,B),c(D,O)),re=l(c($,L),c(X,Z));return s(s(Q,K),re)}function A(C,T,R,U,F,B,D,O,$,L,X,Z){var Q=M(C,D,L,D,T,O,X,O,R,$,Z,$),K=M(L,D,U,C,X,O,F,T,Z,$,B,R),re=M(C,D,U,C,T,O,F,T,R,$,B,R),ce=M(L,D,L,D,X,O,X,O,Z,$,Z,$),ue=M(U,C,U,C,F,T,F,T,B,R,B,R),me=c(l(Q,K),l(re,ce)),Ee=c(l(ue,ce),l(K,K));if(p(Ee))return null;var xe=u(me,Ee),Te=u(s(Q,l(xe,K)),ce),De=s(C,l(xe,c(U,C))),ie=s(T,l(xe,c(F,T))),Ie=s(R,l(xe,c(B,R))),ke=s(D,l(Te,c(L,D))),te=s(O,l(Te,c(X,O))),ne=s($,l(Te,c(Z,$)));return d(De,ke)&&d(ie,te)&&d(Ie,ne)?[De,ie,Ie]:null}function N(C,T,R,U,F,B,D,O,$,L){var X=l(C,D),Z=l(U,D),Q=l(T,O),K=l(F,O),re=l(R,$),ce=l(B,$),ue=c(c(c(L,X),Q),re),me=c(c(c(s(s(Z,K),ce),X),Q),re),Ee=u(ue,me),xe=s(C,l(Ee,c(U,C))),Te=s(T,l(Ee,c(F,T))),De=s(R,l(Ee,c(B,R)));return[xe,Te,De]}}),vB="sum",dbe=["typed","config","add","numeric"],WG=ae(vB,dbe,n=>{var{typed:e,config:t,add:r,numeric:i}=n;return e(vB,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":a,"...":function(l){if(xm(l))throw new TypeError("Scalar values expected in function sum");return s(l)}});function s(o){var l;return wu(o,function(u){try{l=l===void 0?u:r(l,u)}catch(c){throw As(c,"sum",u)}}),l===void 0&&(l=i(0,t.number)),typeof l=="string"&&(l=i(l,t.number)),l}function a(o,l){try{var u=V_(o,l,r);return u}catch(c){throw As(c,"sum")}}}),ux="cumsum",hbe=["typed","add","unaryPlus"],GG=ae(ux,hbe,n=>{var{typed:e,add:t,unaryPlus:r}=n;return e(ux,{Array:i,Matrix:function(u){return u.create(i(u.valueOf()))},"Array, number | BigNumber":a,"Matrix, number | BigNumber":function(u,c){return u.create(a(u.valueOf(),c))},"...":function(u){if(xm(u))throw new TypeError("All values expected to be scalar in function cumsum");return i(u)}});function i(l){try{return s(l)}catch(u){throw As(u,ux)}}function s(l){if(l.length===0)return[];for(var u=[r(l[0])],c=1;c<l.length;++c)u.push(t(u[c-1],l[c]));return u}function a(l,u){var c=nn(l);if(u<0||u>=c.length)throw new ao(u,c.length);try{return o(l,u)}catch(f){throw As(f,ux)}}function o(l,u){var c,f,d;if(u<=0){var h=l[0][0];if(Array.isArray(h)){for(d=_W(l),f=[],c=0;c<d.length;c++)f[c]=o(d[c],u-1);return f}else return s(l)}else{for(f=[],c=0;c<l.length;c++)f[c]=o(l[c],u-1);return f}}}),yB="mean",pbe=["typed","add","divide"],jG=ae(yB,pbe,n=>{var{typed:e,add:t,divide:r}=n;return e(yB,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":i,"...":function(o){if(xm(o))throw new TypeError("Scalar values expected in function mean");return s(o)}});function i(a,o){try{var l=V_(a,o,t),u=Array.isArray(a)?nn(a):a.size();return r(l,u[o])}catch(c){throw As(c,"mean")}}function s(a){var o,l=0;if(wu(a,function(u){try{o=o===void 0?u:t(o,u),l++}catch(c){throw As(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return r(o,l)}}),xB="median",mbe=["typed","add","divide","compare","partitionSelect"],gbe=ae(xB,mbe,n=>{var{typed:e,add:t,divide:r,compare:i,partitionSelect:s}=n;function a(u){try{u=wn(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=s(u,f+1),h=u[f],p=0;p<f;++p)i(u[p],h)>0&&(h=u[p]);return l(h,d)}else{var v=s(u,(c-1)/2);return o(v)}}catch(y){throw As(y,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return r(t(c,f),2)}});return e(xB,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(xm(c))throw new TypeError("Scalar values expected in function median");return a(c)}})}),bB="mad",vbe=["typed","abs","map","median","subtract"],ybe=ae(bB,vbe,n=>{var{typed:e,abs:t,map:r,median:i,subtract:s}=n;return e(bB,{"Array | Matrix":a,"...":function(l){return a(l)}});function a(o){if(o=wn(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(o);return i(r(o,function(u){return t(s(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):As(u,"mad")}}}),W2="unbiased",wB="variance",xbe=["typed","add","subtract","multiply","divide","apply","isNaN"],qG=ae(wB,xbe,n=>{var{typed:e,add:t,subtract:r,multiply:i,divide:s,apply:a,isNaN:o}=n;return e(wB,{"Array | Matrix":function(f){return l(f,W2)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(f,d){return u(f,d,W2)},"Array | Matrix, number | BigNumber, string":u,"...":function(f){return l(f,W2)}});function l(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(wu(c,function(y){try{d=d===void 0?y:t(d,y),h++}catch(m){throw As(m,"variance",y)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var p=s(d,h);if(d=void 0,wu(c,function(y){var m=r(y,p);d=d===void 0?i(m,m):t(d,i(m,m))}),o(d))return d;switch(f){case"uncorrected":return s(d,h);case"biased":return s(d,h+1);case"unbiased":{var v=Jt(d)?d.mul(0):0;return h===1?v:s(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return a(c,f,h=>l(h,d))}catch(h){throw As(h,"variance")}}}),SB="quantileSeq",bbe=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],XG=ae(SB,bbe,n=>{var{typed:e,bignumber:t,add:r,subtract:i,divide:s,multiply:a,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:d}=n,h=vP({typed:e,isInteger:u});return e(SB,{"Array | Matrix, number | BigNumber":(S,b)=>v(S,b,!1),"Array | Matrix, number | BigNumber, number":(S,b,g)=>p(S,b,!1,g,v),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(S,b,g,w)=>p(S,b,g,w,v),"Array | Matrix, Array | Matrix":(S,b)=>y(S,b,!1),"Array | Matrix, Array | Matrix, number":(S,b,g)=>p(S,b,!1,g,y),"Array | Matrix, Array | Matrix, boolean":y,"Array | Matrix, Array | Matrix, boolean, number":(S,b,g,w)=>p(S,b,g,w,y)});function p(S,b,g,w,x){return h(S,w,M=>x(M,b,g))}function v(S,b,g){var w,x=S.valueOf();if(c(b,0))throw new Error("N/prob must be non-negative");if(f(b,1))return tn(b)?m(x,b,g):t(m(x,b,g));if(d(b,1)){if(!u(b))throw new Error("N must be a positive integer");if(d(b,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var M=r(b,1);w=[];for(var A=0;c(A,b);A++){var N=s(A+1,M);w.push(m(x,N,g))}return tn(b)?w:t(w)}}function y(S,b,g){for(var w=S.valueOf(),x=b.valueOf(),M=[],A=0;A<x.length;++A)M.push(m(w,x[A],g));return M}function m(S,b,g){var w=wn(S),x=w.length;if(x===0)throw new Error("Cannot calculate quantile of an empty sequence");var M=tn(b)?b*(x-1):b.times(x-1),A=tn(b)?Math.floor(M):M.floor().toNumber(),N=tn(b)?M%1:M.minus(A);if(u(M))return g?w[M]:o(w,tn(b)?M:M.valueOf());var C,T;if(g)C=w[A],T=w[A+1];else{T=o(w,A+1),C=w[A];for(var R=0;R<A;++R)l(w[R],C)>0&&(C=w[R])}return r(a(C,i(1,N)),a(T,N))}}),_B="std",wbe=["typed","map","sqrt","variance"],YG=ae(_B,wbe,n=>{var{typed:e,map:t,sqrt:r,variance:i}=n;return e(_B,{"Array | Matrix":s,"Array | Matrix, string":s,"Array | Matrix, number | BigNumber":s,"Array | Matrix, number | BigNumber, string":s,"...":function(o){return s(o)}});function s(a,o){if(a.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return _a(l)?t(l,r):r(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),EB="corr",Sbe=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],_be=ae(EB,Sbe,n=>{var{typed:e,matrix:t,sqrt:r,sum:i,add:s,subtract:a,multiply:o,pow:l,divide:u}=n;return e(EB,{"Array, Array":function(h,p){return c(h,p)},"Matrix, Matrix":function(h,p){var v=c(h.toArray(),p.toArray());return Array.isArray(v)?t(v):v}});function c(d,h){var p=[];if(Array.isArray(d[0])&&Array.isArray(h[0])){if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var v=0;v<d.length;v++){if(d[v].length!==h[v].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");p.push(f(d[v],h[v]))}return p}else{if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,h)}}function f(d,h){var p=d.length,v=i(d),y=i(h),m=d.reduce((x,M,A)=>s(x,o(M,h[A])),0),S=i(d.map(x=>l(x,2))),b=i(h.map(x=>l(x,2))),g=a(o(p,m),o(v,y)),w=r(o(a(o(p,S),l(v,2)),a(o(p,b),l(y,2))));return u(g,w)}}),MB="combinations",Ebe=["typed"],Mbe=ae(MB,Ebe,n=>{var{typed:e}=n;return e(MB,{"number, number":jW,"BigNumber, BigNumber":function(r,i){var s=r.constructor,a,o,l=r.minus(i),u=new s(1);if(!CB(r)||!CB(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(r))throw new TypeError("k must be less than n in function combinations");if(a=u,i.lt(l))for(o=u;o.lte(l);o=o.plus(u))a=a.times(i.plus(o)).dividedBy(o);else for(o=u;o.lte(i);o=o.plus(u))a=a.times(l.plus(o)).dividedBy(o);return a}})});function CB(n){return n.isInteger()&&n.gte(0)}var AB="combinationsWithRep",Cbe=["typed"],Abe=ae(AB,Cbe,n=>{var{typed:e}=n;return e(AB,{"number, number":function(r,i){if(!Ot(r)||r<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Ot(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<r-1){var s=iu(r,r+i-1);return s/iu(1,i)}var a=iu(i+1,r+i-1);return a/iu(1,r-1)},"BigNumber, BigNumber":function(r,i){var s=r.constructor,a,o,l=new s(1),u=r.minus(l);if(!TB(r)||!TB(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(a=l,i.lt(u))for(o=l;o.lte(u);o=o.plus(l))a=a.times(i.plus(o)).dividedBy(o);else for(o=l;o.lte(i);o=o.plus(l))a=a.times(u.plus(o)).dividedBy(o);return a}})});function TB(n){return n.isInteger()&&n.gte(0)}var DB="gamma",Tbe=["typed","config","multiplyScalar","pow","BigNumber","Complex"],Dbe=ae(DB,Tbe,n=>{var{typed:e,config:t,multiplyScalar:r,pow:i,BigNumber:s,Complex:a}=n;function o(u){if(u.im===0)return cS(u.re);if(u.re<.5){var c=new a(1-u.re,-u.im),f=new a(Math.PI*u.re,Math.PI*u.im);return new a(Math.PI).div(f.sin()).div(o(c))}u=new a(u.re-1,u.im);for(var d=new a(Cp[0],0),h=1;h<Cp.length;++h){var p=new a(Cp[h],0);d=d.add(p.div(u.add(h)))}var v=new a(u.re+ZW+.5,u.im),y=Math.sqrt(2*Math.PI),m=v.pow(u.add(.5)),S=v.neg().exp();return d.mul(y).mul(m).mul(S)}return e(DB,{number:cS,Complex:o,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new s(1/0):l(c.minus(1));if(!c.isFinite())return new s(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new s([1,1,2,6,24,120,720,5040][u]);var c=t.precision+(Math.log(u.toNumber())|0),f=s.clone({precision:c});if(u%2===1)return u.times(l(new s(u-1)));for(var d=u,h=new f(u),p=u.toNumber();d>2;)d-=2,p+=d,h=h.times(p);return new s(h.toPrecision(s.precision))}}),NB="lgamma",Nbe=["Complex","typed"],Pbe=ae(NB,Nbe,n=>{var{Complex:e,typed:t}=n,r=7,i=7,s=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(NB,{number:fS,Complex:a,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function a(u){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(fS(u.re),0);if(u.re>=r||Math.abs(u.im)>=i)return o(u);if(u.re<=d){var h=Ese(c,u.im)*Math.floor(.5*u.re+.25),p=u.mul(Math.PI).sin().log(),v=a(new e(1-u.re,-u.im));return new e(f,h).sub(p).sub(v)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function o(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(JW),f=new e(1,0).div(u),d=f.div(u),h=s[0],p=s[1],v=2*d.re,y=d.re*d.re+d.im*d.im,m=2;m<8;m++){var S=p;p=-y*h+s[m],h=v*h+S}var b=f.mul(d.mul(h).add(p));return c.add(b)}function l(u){var c=0,f=0,d=u;for(u=u.add(1);u.re<=r;){d=d.mul(u);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,u=u.add(1)}return o(u).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),PB="factorial",Rbe=["typed","gamma"],Obe=ae(PB,Rbe,n=>{var{typed:e,gamma:t}=n;return e(PB,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return t(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return t(i.plus(1))},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),RB="kldivergence",Ibe=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],kbe=ae(RB,Ibe,n=>{var{typed:e,matrix:t,divide:r,sum:i,multiply:s,map:a,dotDivide:o,log:l,isNumeric:u}=n;return e(RB,{"Array, Array":function(d,h){return c(t(d),t(h))},"Matrix, Array":function(d,h){return c(d,t(h))},"Array, Matrix":function(d,h){return c(t(d),h)},"Matrix, Matrix":function(d,h){return c(d,h)}});function c(f,d){var h=d.size().length,p=f.size().length;if(h>1)throw new Error("first object must be one dimensional");if(p>1)throw new Error("second object must be one dimensional");if(h!==p)throw new Error("Length of two vectors must be equal");var v=i(f);if(v===0)throw new Error("Sum of elements in first object must be non zero");var y=i(d);if(y===0)throw new Error("Sum of elements in second object must be non zero");var m=r(f,i(f)),S=r(d,i(d)),b=i(s(m,a(o(m,S),g=>l(g))));return u(b)?b:Number.NaN}}),OB="multinomial",Lbe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],Fbe=ae(OB,Lbe,n=>{var{typed:e,add:t,divide:r,multiply:i,factorial:s,isInteger:a,isPositive:o}=n;return e(OB,{"Array | Matrix":function(u){var c=0,f=1;return wu(u,function(d){if(!a(d)||!o(d))throw new TypeError("Positive integer value expected in function multinomial");c=t(c,d),f=i(f,s(d))}),r(s(c),f)}})}),IB="permutations",Bbe=["typed","factorial"],zbe=ae(IB,Bbe,n=>{var{typed:e,factorial:t}=n;return e(IB,{"number | BigNumber":t,"number, number":function(i,s){if(!Ot(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!Ot(s)||s<0)throw new TypeError("Positive integer value expected in function permutations");if(s>i)throw new TypeError("second argument k must be less than or equal to first argument n");return iu(i-s+1,i)},"BigNumber, BigNumber":function(i,s){var a,o;if(!kB(i)||!kB(s))throw new TypeError("Positive integer value expected in function permutations");if(s.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var l=i.mul(0).add(1);for(a=l,o=i.minus(s).plus(1);o.lte(i);o=o.plus(1))a=a.times(o);return a}})});function kB(n){return n.isInteger()&&n.gte(0)}var EP={exports:{}};EP.exports;(function(n){(function(e,t,r){function i(l){var u=this,c=o();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function a(l,u){var c=new i(l),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&s(f,c),d.state=function(){return s(c,{})}),d}function o(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=a:this.alea=a})(fa,n)})(EP);var Ube=EP.exports,MP={exports:{}};MP.exports;(function(n){(function(e,t,r){function i(o){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}t&&t.exports?t.exports=a:this.xor128=a})(fa,n)})(MP);var $be=MP.exports,CP={exports:{}};CP.exports;(function(n){(function(e,t,r){function i(o){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}t&&t.exports?t.exports=a:this.xorwow=a})(fa,n)})(CP);var Vbe=CP.exports,AP={exports:{}};AP.exports;(function(n){(function(e,t,r){function i(o){var l=this;l.next=function(){var c=l.x,f=l.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,l.i=f+1&7,h};function u(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}u(l,o)}function s(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.x&&s(c,u),f.state=function(){return s(u,{})}),f}t&&t.exports?t.exports=a:this.xorshift7=a})(fa,n)})(AP);var Hbe=AP.exports,TP={exports:{}};TP.exports;(function(n){(function(e,t,r){function i(o){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,h,p;return l.w=c=c+1640531527|0,p=f[d+34&127],h=f[d=d+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=f[d]=p^h,l.i=d,p+(c^c>>>16)|0};function u(c,f){var d,h,p,v,y,m=[],S=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,S=Math.max(S,f.length)),p=0,v=-32;v<S;++v)f&&(h^=f.charCodeAt((v+32)%f.length)),v===0&&(y=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(y=y+1640531527|0,d=m[v&127]^=h+y,p=d==0?p+1:0);for(p>=128&&(m[(f&&f.length||0)&127]=-1),p=127,v=4*128;v>0;--v)h=m[p+34&127],d=m[p=p+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,m[p]=h^d;c.w=y,c.X=m,c.i=p}u(l,o)}function s(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.X&&s(c,u),f.state=function(){return s(u,{})}),f}t&&t.exports?t.exports=a:this.xor4096=a})(fa,n)})(TP);var Wbe=TP.exports,DP={exports:{}};DP.exports;(function(n){(function(e,t,r){function i(o){var l=this,u="";l.next=function(){var f=l.b,d=l.c,h=l.d,p=l.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-h|0,l.d=h<<16^d>>>16^p,l.a=p-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):u+=o;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function s(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}t&&t.exports?t.exports=a:this.tychei=a})(fa,n)})(DP);var Gbe=DP.exports,KG={exports:{}};const jbe={},qbe=Object.freeze(Object.defineProperty({__proto__:null,default:jbe},Symbol.toStringTag,{value:"Module"})),Xbe=Ete(qbe);(function(n){(function(e,t,r){var i=256,s=6,a=52,o="random",l=r.pow(i,s),u=r.pow(2,a),c=u*2,f=i-1,d;function h(g,w,x){var M=[];w=w==!0?{entropy:!0}:w||{};var A=m(y(w.entropy?[g,b(t)]:g??S(),3),M),N=new p(M),C=function(){for(var T=N.g(s),R=l,U=0;T<u;)T=(T+U)*i,R*=i,U=N.g(1);for(;T>=c;)T/=2,R/=2,U>>>=1;return(T+U)/R};return C.int32=function(){return N.g(4)|0},C.quick=function(){return N.g(4)/4294967296},C.double=C,m(b(N.S),t),(w.pass||x||function(T,R,U,F){return F&&(F.S&&v(F,N),T.state=function(){return v(N,{})}),U?(r[o]=T,R):T})(C,A,"global"in w?w.global:this==r,w.state)}function p(g){var w,x=g.length,M=this,A=0,N=M.i=M.j=0,C=M.S=[];for(x||(g=[x++]);A<i;)C[A]=A++;for(A=0;A<i;A++)C[A]=C[N=f&N+g[A%x]+(w=C[A])],C[N]=w;(M.g=function(T){for(var R,U=0,F=M.i,B=M.j,D=M.S;T--;)R=D[F=f&F+1],U=U*i+D[f&(D[F]=D[B=f&B+R])+(D[B]=R)];return M.i=F,M.j=B,U})(i)}function v(g,w){return w.i=g.i,w.j=g.j,w.S=g.S.slice(),w}function y(g,w){var x=[],M=typeof g,A;if(w&&M=="object")for(A in g)try{x.push(y(g[A],w-1))}catch{}return x.length?x:M=="string"?g:g+"\0"}function m(g,w){for(var x=g+"",M,A=0;A<x.length;)w[f&A]=f&(M^=w[f&A]*19)+x.charCodeAt(A++);return b(w)}function S(){try{var g;return d&&(g=d.randomBytes)?g=g(i):(g=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(g)),b(g)}catch{var w=e.navigator,x=w&&w.plugins;return[+new Date,e,x,e.screen,b(t)]}}function b(g){return String.fromCharCode.apply(0,g)}if(m(r.random(),t),n.exports){n.exports=h;try{d=Xbe}catch{}}else r["seed"+o]=h})(typeof self<"u"?self:fa,[],Math)})(KG);var Ybe=KG.exports,Kbe=Ube,Zbe=$be,Jbe=Vbe,Qbe=Hbe,ewe=Wbe,twe=Gbe,zd=Ybe;zd.alea=Kbe;zd.xor128=Zbe;zd.xorwow=Jbe;zd.xorshift7=Qbe;zd.xor4096=ewe;zd.tychei=twe;var nwe=zd;const ZG=so(nwe);var rwe=ZG(Date.now());function Kp(n){var e;function t(i){e=i===null?rwe:ZG(String(i))}t(n);function r(){return e()}return r}var LB="pickRandom",iwe=["typed","config","?on"],swe=ae(LB,iwe,n=>{var{typed:e,config:t,on:r}=n,i=Kp(t.randomSeed);return r&&r("config",function(a,o){a.randomSeed!==o.randomSeed&&(i=Kp(a.randomSeed))}),e(LB,{"Array | Matrix":function(o){return s(o,{})},"Array | Matrix, Object":function(o,l){return s(o,l)},"Array | Matrix, number":function(o,l){return s(o,{number:l})},"Array | Matrix, Array | Matrix":function(o,l){return s(o,{weights:l})},"Array | Matrix, Array | Matrix, number":function(o,l,u){return s(o,{number:u,weights:l})},"Array | Matrix, number, Array | Matrix":function(o,l,u){return s(o,{number:l,weights:u})}});function s(a,o){var{number:l,weights:u,elementWise:c=!0}=o,f=typeof l>"u";f&&(l=1);var d=Ut(a)?a.create:Ut(u)?u.create:null;a=a.valueOf(),u&&(u=u.valueOf()),c===!0&&(a=wn(a),u=wn(u));var h=0;if(typeof u<"u"){if(u.length!==a.length)throw new Error("Weights must have the same length as possibles");for(var p=0,v=u.length;p<v;p++){if(!tn(u[p])||u[p]<0)throw new Error("Weights must be an array of positive numbers");h+=u[p]}}for(var y=a.length,m=[],S;m.length<l;){if(typeof u>"u")S=a[Math.floor(i()*y)];else for(var b=i()*h,g=0,w=a.length;g<w;g++)if(b-=u[g],b<0){S=a[g];break}m.push(S)}return f?m[0]:d?d(m):m}});function NP(n,e){var t=[];if(n=n.slice(0),n.length>1)for(var r=0,i=n.shift();r<i;r++)t.push(NP(n,e));else for(var s=0,a=n.shift();s<a;s++)t.push(e());return t}var FB="random",awe=["typed","config","?on"],owe=ae(FB,awe,n=>{var{typed:e,config:t,on:r}=n,i=Kp(t.randomSeed);return r&&r("config",function(o,l){o.randomSeed!==l.randomSeed&&(i=Kp(o.randomSeed))}),e(FB,{"":()=>a(0,1),number:o=>a(0,o),"number, number":(o,l)=>a(o,l),"Array | Matrix":o=>s(o,0,1),"Array | Matrix, number":(o,l)=>s(o,0,l),"Array | Matrix, number, number":(o,l,u)=>s(o,l,u)});function s(o,l,u){var c=NP(o.valueOf(),()=>a(l,u));return Ut(o)?o.create(c):c}function a(o,l){return o+i()*(l-o)}}),BB="randomInt",lwe=["typed","config","?on"],uwe=ae(BB,lwe,n=>{var{typed:e,config:t,on:r}=n,i=Kp(t.randomSeed);return r&&r("config",function(o,l){o.randomSeed!==l.randomSeed&&(i=Kp(o.randomSeed))}),e(BB,{"":()=>a(0,1),number:o=>a(0,o),"number, number":(o,l)=>a(o,l),"Array | Matrix":o=>s(o,0,1),"Array | Matrix, number":(o,l)=>s(o,0,l),"Array | Matrix, number, number":(o,l,u)=>s(o,l,u)});function s(o,l,u){var c=NP(o.valueOf(),()=>a(l,u));return Ut(o)?o.create(c):c}function a(o,l){return Math.floor(o+i()*(l-o))}}),zB="stirlingS2",cwe=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],fwe=ae(zB,cwe,n=>{var{typed:e,addScalar:t,subtractScalar:r,multiplyScalar:i,divideScalar:s,pow:a,factorial:o,combinations:l,isNegative:u,isInteger:c,number:f,bignumber:d,larger:h}=n,p=[],v=[];return e(zB,{"number | BigNumber, number | BigNumber":function(m,S){if(!c(m)||u(m)||!c(S)||u(S))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(S,m))throw new TypeError("k must be less than or equal to n in function stirlingS2");var b=!(tn(m)&&tn(S)),g=b?v:p,w=b?d:f,x=f(m),M=f(S);if(g[x]&&g[x].length>M)return g[x][M];for(var A=0;A<=x;++A)if(g[A]||(g[A]=[w(A===0?1:0)]),A!==0)for(var N=g[A],C=g[A-1],T=N.length;T<=A&&T<=M;++T)T===A?N[T]=1:N[T]=t(i(w(T),C[T]),C[T-1]);return g[x][M]}})}),UB="bellNumbers",dwe=["typed","addScalar","isNegative","isInteger","stirlingS2"],hwe=ae(UB,dwe,n=>{var{typed:e,addScalar:t,isNegative:r,isInteger:i,stirlingS2:s}=n;return e(UB,{"number | BigNumber":function(o){if(!i(o)||r(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,u=0;u<=o;u++)l=t(l,s(o,u));return l}})}),$B="catalan",pwe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],mwe=ae($B,pwe,n=>{var{typed:e,addScalar:t,divideScalar:r,multiplyScalar:i,combinations:s,isNegative:a,isInteger:o}=n;return e($B,{"number | BigNumber":function(u){if(!o(u)||a(u))throw new TypeError("Non-negative integer value expected in function catalan");return r(s(i(u,2),u),t(u,1))}})}),VB="composition",gwe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],vwe=ae(VB,gwe,n=>{var{typed:e,addScalar:t,combinations:r,isPositive:i,isNegative:s,isInteger:a,larger:o}=n;return e(VB,{"number | BigNumber, number | BigNumber":function(u,c){if(!a(u)||!i(u)||!a(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(o(c,u))throw new TypeError("k must be less than or equal to n in function composition");return r(t(u,-1),t(c,-1))}})}),HB="leafCount",ywe=["parse","typed"],xwe=ae(HB,ywe,n=>{var{parse:e,typed:t}=n;function r(i){var s=0;return i.forEach(a=>{s+=r(a)}),s||1}return t(HB,{Node:function(s){return r(s)}})});function WB(n){return vn(n)||Br(n)&&n.isUnary()&&vn(n.args[0])}function wS(n){return!!(vn(n)||(bu(n)||Br(n))&&n.args.every(wS)||wl(n)&&wS(n.content))}function GB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function G2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GB(Object(t),!0).forEach(function(r){hr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):GB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var bwe="simplifyUtil",wwe=["FunctionNode","OperatorNode","SymbolNode"],PP=ae(bwe,wwe,n=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:r}=n,i=!0,s=!1,a="defaultF",o={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:s,total:i,commutative:s,associative:s},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:s,total:i,commutative:s,associative:s},paren:{trivial:i,total:i,commutative:i,associative:s},defaultF:{trivial:s,total:i,commutative:s,associative:s}},l={divide:{total:s},log:{total:s}},u={subtract:{total:s},abs:{trivial:i},log:{total:i}};function c(b,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,x=a;if(typeof b=="string"?x=b:Br(b)?x=b.fn.toString():bu(b)?x=b.name:wl(b)&&(x="paren"),gt(w,x)){var M=w[x];if(gt(M,g))return M[g];if(gt(o,x))return o[x][g]}if(gt(w,a)){var A=w[a];return gt(A,g)?A[g]:o[a][g]}if(gt(o,x)){var N=o[x];if(gt(N,g))return N[g]}return o[a][g]}function f(b){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(b,"commutative",g)}function d(b){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(b,"associative",g)}function h(b,g){var w=G2({},b);for(var x in g)gt(b,x)?w[x]=G2(G2({},g[x]),b[x]):w[x]=g[x];return w}function p(b,g){if(!b.args||b.args.length===0)return b;b.args=v(b,g);for(var w=0;w<b.args.length;w++)p(b.args[w],g)}function v(b,g){var w,x=[],M=function A(N){for(var C=0;C<N.args.length;C++){var T=N.args[C];Br(T)&&w===T.op?A(T):x.push(T)}};return d(b,g)?(w=b.op,M(b),x):b.args}function y(b,g){if(!(!b.args||b.args.length===0)){for(var w=S(b),x=b.args.length,M=0;M<x;M++)y(b.args[M],g);if(x>2&&d(b,g)){for(var A=b.args.pop();b.args.length>0;)A=w([b.args.pop(),A]);b.args=A.args}}}function m(b,g){if(!(!b.args||b.args.length===0)){for(var w=S(b),x=b.args.length,M=0;M<x;M++)m(b.args[M],g);if(x>2&&d(b,g)){for(var A=b.args.shift();b.args.length>0;)A=w([A,b.args.shift()]);b.args=A.args}}}function S(b){return Br(b)?function(g){try{return new t(b.op,b.fn,g,b.implicit)}catch(w){return console.error(w),[]}}:function(g){return new e(new r(b.name),g)}}return{createMakeNodeFunction:S,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:h,flatten:p,allChildren:v,unflattenr:y,unflattenl:m,defaultContext:o,realContext:l,positiveContext:u}}),Swe="simplify",_we=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","resolve","simplifyConstant","simplifyCore","?fraction","?bignumber","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],Ewe=ae(Swe,_we,n=>{var{config:e,typed:t,parse:r,add:i,subtract:s,multiply:a,divide:o,pow:l,isZero:u,equal:c,resolve:f,simplifyConstant:d,simplifyCore:h,fraction:p,bignumber:v,mathWithTransform:y,matrix:m,AccessorNode:S,ArrayNode:b,ConstantNode:g,FunctionNode:w,IndexNode:x,ObjectNode:M,OperatorNode:A,ParenthesisNode:N,SymbolNode:C}=n,{hasProperty:T,isCommutative:R,isAssociative:U,mergeContext:F,flatten:B,unflattenr:D,unflattenl:O,createMakeNodeFunction:$,defaultContext:L,realContext:X,positiveContext:Z}=PP({FunctionNode:w,OperatorNode:A,SymbolNode:C});t.addConversion({from:"Object",to:"Map",convert:Mp});var Q=t("simplify",{Node:xe,"Node, Map":(se,j)=>xe(se,!1,j),"Node, Map, Object":(se,j,G)=>xe(se,!1,j,G),"Node, Array":xe,"Node, Array, Map":xe,"Node, Array, Map, Object":xe});t.removeConversion({from:"Object",to:"Map",convert:Mp}),Q.defaultContext=L,Q.realContext=X,Q.positiveContext=Z;function K(se){return se.transform(function(j,G,fe){return wl(j)?K(j.content):j})}var re={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};Q.rules=[h,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},d,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},d,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function ce(se,j){var G={};if(se.s){var fe=se.s.split("->");if(fe.length===2)G.l=fe[0],G.r=fe[1];else throw SyntaxError("Could not parse rule: "+se.s)}else G.l=se.l,G.r=se.r;G.l=K(r(G.l)),G.r=K(r(G.r));for(var Me of["imposeContext","repeat","assuming"])Me in se&&(G[Me]=se[Me]);if(se.evaluate&&(G.evaluate=r(se.evaluate)),U(G.l,j)){var q=!R(G.l,j),J;q&&(J=Ee());var be=$(G.l),Se=Ee();G.expanded={},G.expanded.l=be([G.l,Se]),B(G.expanded.l,j),D(G.expanded.l,j),G.expanded.r=be([G.r,Se]),q&&(G.expandedNC1={},G.expandedNC1.l=be([J,G.l]),G.expandedNC1.r=be([J,G.r]),G.expandedNC2={},G.expandedNC2.l=be([J,G.expanded.l]),G.expandedNC2.r=be([J,G.expanded.r]))}return G}function ue(se,j){for(var G=[],fe=0;fe<se.length;fe++){var Me=se[fe],q=void 0,J=typeof Me;switch(J){case"string":Me={s:Me};case"object":q=ce(Me,j);break;case"function":q=Me;break;default:throw TypeError("Unsupported type of rule: "+J)}G.push(q)}return G}var me=0;function Ee(){return new C("_p"+me++)}function xe(se,j){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Kv(),fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Me=fe.consoleDebug;j=ue(j||Q.rules,fe.context);var q=f(se,G);q=K(q);for(var J={},be=q.toString({parenthesis:"all"});!J[be];){J[be]=!0,me=0;var Se=be;Me&&console.log("Working on: ",be);for(var Ne=0;Ne<j.length;Ne++){var Fe="";if(typeof j[Ne]=="function"?(q=j[Ne](q,fe),Me&&(Fe=j[Ne].name)):(B(q,fe.context),q=De(q,j[Ne],fe.context),Me&&(Fe="".concat(j[Ne].l.toString()," -> ").concat(j[Ne].r.toString()))),Me){var He=q.toString({parenthesis:"all"});He!==Se&&(console.log("Applying",Fe,"produced",He),Se=He)}O(q,fe.context)}be=q.toString({parenthesis:"all"})}return q}function Te(se,j,G){var fe=se;if(se)for(var Me=0;Me<se.length;++Me){var q=De(se[Me],j,G);q!==se[Me]&&(fe===se&&(fe=se.slice()),fe[Me]=q)}return fe}function De(se,j,G){if(j.assuming){for(var fe in j.assuming)for(var Me in j.assuming[fe])if(T(fe,Me,G)!==j.assuming[fe][Me])return se}var q=F(j.imposeContext,G),J=se;if(J instanceof A||J instanceof w){var be=Te(J.args,j,G);be!==J.args&&(J=J.clone(),J.args=be)}else if(J instanceof N){if(J.content){var Se=De(J.content,j,G);Se!==J.content&&(J=new N(Se))}}else if(J instanceof b){var Ne=Te(J.items,j,G);Ne!==J.items&&(J=new b(Ne))}else if(J instanceof S){var Fe=J.object;J.object&&(Fe=De(J.object,j,G));var He=J.index;J.index&&(He=De(J.index,j,G)),(Fe!==J.object||He!==J.index)&&(J=new S(Fe,He))}else if(J instanceof x){var Oe=Te(J.dimensions,j,G);Oe!==J.dimensions&&(J=new x(Oe))}else if(J instanceof M){var Je=!1,qe={};for(var lt in J.properties)qe[lt]=De(J.properties[lt],j,G),qe[lt]!==J.properties[lt]&&(Je=!0);Je&&(J=new M(qe))}var at=j.r,ge=ne(j.l,J,q)[0];if(!ge&&j.expanded&&(at=j.expanded.r,ge=ne(j.expanded.l,J,q)[0]),!ge&&j.expandedNC1&&(at=j.expandedNC1.r,ge=ne(j.expandedNC1.l,J,q)[0],ge||(at=j.expandedNC2.r,ge=ne(j.expandedNC2.l,J,q)[0])),ge){var We=J.implicit;J=at.clone(),We&&"implicit"in at&&(J.implicit=!0),J=J.transform(function(W){return W.isSymbolNode&&gt(ge.placeholders,W.name)?ge.placeholders[W.name].clone():W})}return j.repeat&&J!==se&&(J=De(J,j,G)),J}function ie(se,j){var G=[],fe,Me,q=$(se);if(R(se,j))for(var J=0;J<se.args.length;J++)Me=se.args.slice(0),Me.splice(J,1),fe=Me.length===1?Me[0]:q(Me),G.push(q([se.args[J],fe]));else for(var be=1;be<se.args.length;be++){var Se=se.args[0];be>1&&(Se=q(se.args.slice(0,be))),Me=se.args.slice(be),fe=Me.length===1?Me[0]:q(Me),G.push(q([Se,fe]))}return G}function Ie(se,j){var G={placeholders:{}};if(!se.placeholders&&!j.placeholders)return G;if(se.placeholders){if(!j.placeholders)return se}else return j;for(var fe in se.placeholders)if(gt(se.placeholders,fe)&&(G.placeholders[fe]=se.placeholders[fe],gt(j.placeholders,fe)&&!Ce(se.placeholders[fe],j.placeholders[fe])))return null;for(var Me in j.placeholders)gt(j.placeholders,Me)&&(G.placeholders[Me]=j.placeholders[Me]);return G}function ke(se,j){var G=[];if(se.length===0||j.length===0)return G;for(var fe,Me=0;Me<se.length;Me++)for(var q=0;q<j.length;q++)fe=Ie(se[Me],j[q]),fe&&G.push(fe);return G}function te(se){if(se.length===0)return se;for(var j=se.reduce(ke),G=[],fe={},Me=0;Me<j.length;Me++){var q=JSON.stringify(j[Me]);fe[q]||(fe[q]=!0,G.push(j[Me]))}return G}function ne(se,j,G,fe){var Me=[{placeholders:{}}];if(se instanceof A&&j instanceof A||se instanceof w&&j instanceof w){if(se instanceof A){if(se.op!==j.op||se.fn!==j.fn)return[]}else if(se instanceof w&&se.name!==j.name)return[];if(j.args.length===1&&se.args.length===1||!U(j,G)&&j.args.length===se.args.length||fe){for(var q=[],J=0;J<se.args.length;J++){var be=ne(se.args[J],j.args[J],G);if(be.length===0)break;q.push(be)}if(q.length!==se.args.length){if(!R(j,G)||se.args.length===1)return[];if(se.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var Se=ne(se.args[0],j.args[1],G);if(Se.length===0)return[];var Ne=ne(se.args[1],j.args[0],G);if(Ne.length===0)return[];q=[Se,Ne]}Me=te(q)}else if(j.args.length>=2&&se.args.length===2){for(var Fe=ie(j,G),He=[],Oe=0;Oe<Fe.length;Oe++){var Je=ne(se,Fe[Oe],G,!0);He=He.concat(Je)}return He}else{if(se.args.length>2)throw Error("Unexpected non-binary associative function: "+se.toString());return[]}}else if(se instanceof C){if(se.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(re[se.name]){if(se.name!==j.name)return[]}else switch(se.name[1]>="a"&&se.name[1]<="z"?se.name.substring(0,2):se.name[0]){case"n":case"_p":Me[0].placeholders[se.name]=j;break;case"c":case"cl":if(vn(j))Me[0].placeholders[se.name]=j;else return[];break;case"v":if(!vn(j))Me[0].placeholders[se.name]=j;else return[];break;case"vl":if(ii(j))Me[0].placeholders[se.name]=j;else return[];break;case"cd":if(WB(j))Me[0].placeholders[se.name]=j;else return[];break;case"vd":if(!WB(j))Me[0].placeholders[se.name]=j;else return[];break;case"ce":if(wS(j))Me[0].placeholders[se.name]=j;else return[];break;case"ve":if(!wS(j))Me[0].placeholders[se.name]=j;else return[];break;default:throw new Error("Invalid symbol in rule: "+se.name)}}else if(se instanceof g){if(!c(se.value,j.value))return[]}else return[];return Me}function Ce(se,j){if(se instanceof g&&j instanceof g){if(!c(se.value,j.value))return!1}else if(se instanceof C&&j instanceof C){if(se.name!==j.name)return!1}else if(se instanceof A&&j instanceof A||se instanceof w&&j instanceof w){if(se instanceof A){if(se.op!==j.op||se.fn!==j.fn)return!1}else if(se instanceof w&&se.name!==j.name)return!1;if(se.args.length!==j.args.length)return!1;for(var G=0;G<se.args.length;G++)if(!Ce(se.args[G],j.args[G]))return!1}else return!1;return!0}return Q}),Mwe="simplifyConstant",Cwe=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],Awe=ae(Mwe,Cwe,n=>{var{typed:e,config:t,mathWithTransform:r,matrix:i,fraction:s,bignumber:a,AccessorNode:o,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,SymbolNode:p}=n,{isCommutative:v,isAssociative:y,allChildren:m,createMakeNodeFunction:S}=PP({FunctionNode:c,OperatorNode:h,SymbolNode:p}),b=e("simplifyConstant",{Node:B=>M(F(B,{})),"Node, Object":function(D,O){return M(F(D,O))}});function g(B){return Ld(B)?B.valueOf():B instanceof Array?B.map(g):Ut(B)?i(g(B.valueOf())):B}function w(B,D,O){try{return r[B].apply(null,D)}catch{return D=D.map(g),N(r[B].apply(null,D),O)}}var x=e({Fraction:T,number:function(D){return D<0?C(new u(-D)):new u(D)},BigNumber:function(D){return D<0?C(new u(-D)):new u(D)},Complex:function(D){throw new Error("Cannot convert Complex number to Node")},string:function(D){return new u(D)},Matrix:function(D){return new l(D.valueOf().map(O=>x(O)))}});function M(B){return In(B)?B:x(B)}function A(B,D){var O=D&&D.exactFractions!==!1;if(O&&isFinite(B)&&s){var $=s(B),L=D&&typeof D.fractionsLimit=="number"?D.fractionsLimit:1/0;if($.valueOf()===B&&$.n<L&&$.d<L)return $}return B}var N=e({"string, Object":function(D,O){if(t.number==="BigNumber")return a===void 0&&bP(),a(D);if(t.number==="Fraction")return s===void 0&&TG(),s(D);var $=parseFloat(D);return A($,O)},"Fraction, Object":function(D,O){return D},"BigNumber, Object":function(D,O){return D},"number, Object":function(D,O){return A(D,O)},"Complex, Object":function(D,O){return D.im!==0?D:A(D.re,O)},"Matrix, Object":function(D,O){return i(A(D.valueOf()))},"Array, Object":function(D,O){return D.map(A)}});function C(B){return new h("-","unaryMinus",[B])}function T(B){var D,O=B.s*B.n;return O<0?D=new h("-","unaryMinus",[new u(-O)]):D=new u(O),B.d===1?D:new h("/","divide",[D,new u(B.d)])}function R(B,D,O){if(!Fd(D))return new o(M(B),M(D));if(ua(B)||Ut(B)){for(var $=Array.from(D.dimensions);$.length>0;)if(vn($[0])&&typeof $[0].value!="string"){var L=N($.shift().value,O);ua(B)?B=B.items[L-1]:(B=B.valueOf()[L-1],B instanceof Array&&(B=i(B)))}else if($.length>1&&vn($[1])&&typeof $[1].value!="string"){var X=N($[1].value,O),Z=[],Q=ua(B)?B.items:B.valueOf();for(var K of Q)if(ua(K))Z.push(K.items[X-1]);else if(Ut(B))Z.push(K[X-1]);else break;if(Z.length===Q.length)ua(B)?B=new l(Z):B=i(Z),$.splice(1,1);else break}else break;return $.length===D.dimensions.length?new o(M(B),D):$.length>0?(D=new f($),new o(M(B),D)):B}if(ry(B)&&D.dimensions.length===1&&vn(D.dimensions[0])){var re=D.dimensions[0].value;return re in B.properties?B.properties[re]:new u}return new o(M(B),D)}function U(B,D,O,$){var L=D.shift(),X=D.reduce((Z,Q)=>{if(!In(Q)){var K=Z.pop();if(In(K))return[K,Q];try{return Z.push(w(B,[K,Q],$)),Z}catch{Z.push(K)}}Z.push(M(Z.pop()));var re=Z.length===1?Z[0]:O(Z);return[O([re,M(Q)])]},[L]);return X.length===1?X[0]:O([X[0],x(X[1])])}function F(B,D){switch(B.type){case"SymbolNode":return B;case"ConstantNode":switch(typeof B.value){case"number":return N(B.value,D);case"string":return B.value;default:if(!isNaN(B.value))return N(B.value,D)}return B;case"FunctionNode":if(r[B.name]&&r[B.name].rawArgs)return B;{var O=["add","multiply"];if(!O.includes(B.name)){var $=B.args.map(De=>F(De,D));if(!$.some(In))try{return w(B.name,$,D)}catch{}if(B.name==="size"&&$.length===1&&ua($[0])){for(var L=[],X=$[0];ua(X);)L.push(X.items.length),X=X.items[0];return i(L)}return new c(B.name,$.map(M))}}case"OperatorNode":{var Z=B.fn.toString(),Q,K,re=S(B);if(Br(B)&&B.isUnary())Q=[F(B.args[0],D)],In(Q[0])?K=re(Q):K=w(Z,Q,D);else if(y(B,D.context))if(Q=m(B,D.context),Q=Q.map(De=>F(De,D)),v(Z,D.context)){for(var ce=[],ue=[],me=0;me<Q.length;me++)In(Q[me])?ue.push(Q[me]):ce.push(Q[me]);ce.length>1?(K=U(Z,ce,re,D),ue.unshift(K),K=U(Z,ue,re,D)):K=U(Z,Q,re,D)}else K=U(Z,Q,re,D);else Q=B.args.map(De=>F(De,D)),K=U(Z,Q,re,D);return K}case"ParenthesisNode":return F(B.content,D);case"AccessorNode":return R(F(B.object,D),F(B.index,D),D);case"ArrayNode":{var Ee=B.items.map(De=>F(De,D));return Ee.some(In)?new l(Ee.map(M)):i(Ee)}case"IndexNode":return new f(B.dimensions.map(De=>b(De,D)));case"ObjectNode":{var xe={};for(var Te in B.properties)xe[Te]=b(B.properties[Te],D);return new d(xe)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(B.type))}}return b}),jB="simplifyCore",Twe=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],Dwe=ae(jB,Twe,n=>{var{typed:e,parse:t,equal:r,isZero:i,add:s,subtract:a,multiply:o,divide:l,pow:u,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:h,IndexNode:p,ObjectNode:v,OperatorNode:y,ParenthesisNode:m,SymbolNode:S}=n,b=new d(0),g=new d(1),w=new d(!0),x=new d(!1);function M(T){return Br(T)&&["and","not","or"].includes(T.op)}var{hasProperty:A,isCommutative:N}=PP({FunctionNode:h,OperatorNode:y,SymbolNode:S});function C(T){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=R?R.context:void 0;if(A(T,"trivial",U)){if(bu(T)&&T.args.length===1)return C(T.args[0],R);var F=!1,B=0;if(T.forEach(ue=>{++B,B===1&&(F=C(ue,R))}),B===1)return F}var D=T;if(bu(D)){var O=Rme(D.name);if(O){if(D.args.length>2&&A(D,"associative",U))for(;D.args.length>2;){var $=D.args.pop(),L=D.args.pop();D.args.push(new y(O,D.name,[$,L]))}D=new y(O,D.name,D.args)}else return new h(C(D.fn),D.args.map(ue=>C(ue,R)))}if(Br(D)&&D.isUnary()){var X=C(D.args[0],R);if(D.op==="~"&&Br(X)&&X.isUnary()&&X.op==="~"||D.op==="not"&&Br(X)&&X.isUnary()&&X.op==="not"&&M(X.args[0]))return X.args[0];var Z=!0;if(D.op==="-"&&Br(X)&&(X.isBinary()&&X.fn==="subtract"&&(D=new y("-","subtract",[X.args[1],X.args[0]]),Z=!1),X.isUnary()&&X.op==="-"))return X.args[0];if(Z)return new y(D.op,D.fn,[X])}if(Br(D)&&D.isBinary()){var Q=C(D.args[0],R),K=C(D.args[1],R);if(D.op==="+"){if(vn(Q)&&i(Q.value))return K;if(vn(K)&&i(K.value))return Q;Br(K)&&K.isUnary()&&K.op==="-"&&(K=K.args[0],D=new y("-","subtract",[Q,K]))}if(D.op==="-")return Br(K)&&K.isUnary()&&K.op==="-"?C(new y("+","add",[Q,K.args[0]]),R):vn(Q)&&i(Q.value)?C(new y("-","unaryMinus",[K])):vn(K)&&i(K.value)?Q:new y(D.op,D.fn,[Q,K]);if(D.op==="*"){if(vn(Q)){if(i(Q.value))return b;if(r(Q.value,1))return K}if(vn(K)){if(i(K.value))return b;if(r(K.value,1))return Q;if(N(D,U))return new y(D.op,D.fn,[K,Q],D.implicit)}return new y(D.op,D.fn,[Q,K],D.implicit)}if(D.op==="/")return vn(Q)&&i(Q.value)?b:vn(K)&&r(K.value,1)?Q:new y(D.op,D.fn,[Q,K]);if(D.op==="^"&&vn(K)){if(i(K.value))return g;if(r(K.value,1))return Q}if(D.op==="and"){if(vn(Q))if(Q.value){if(M(K))return K;if(vn(K))return K.value?w:x}else return x;if(vn(K))if(K.value){if(M(Q))return Q}else return x}if(D.op==="or"){if(vn(Q)){if(Q.value)return w;if(M(K))return K}if(vn(K)){if(K.value)return w;if(M(Q))return Q}}return new y(D.op,D.fn,[Q,K])}if(Br(D))return new y(D.op,D.fn,D.args.map(ue=>C(ue,R)));if(ua(D))return new f(D.items.map(ue=>C(ue,R)));if(Uc(D))return new c(C(D.object,R),C(D.index,R));if(Fd(D))return new p(D.dimensions.map(ue=>C(ue,R)));if(ry(D)){var re={};for(var ce in D.properties)re[ce]=C(D.properties[ce],R);return new v(re)}return D}return e(jB,{Node:C,"Node,Object":C})}),Nwe="resolve",Pwe=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],Rwe=ae(Nwe,Pwe,n=>{var{typed:e,parse:t,ConstantNode:r,FunctionNode:i,OperatorNode:s,ParenthesisNode:a}=n;function o(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if(ii(l)){if(c.has(l.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=u.get(l.name);if(In(d)){var h=new Set(c);return h.add(l.name),o(d,u,h)}else return typeof d=="number"?t(String(d)):d!==void 0?new r(d):l}else if(Br(l)){var p=l.args.map(function(y){return o(y,u,c)});return new s(l.op,l.fn,p,l.implicit)}else{if(wl(l))return new a(o(l.content,u,c));if(bu(l)){var v=l.args.map(function(y){return o(y,u,c)});return new i(l.name,v)}}return l.map(y=>o(y,u,c))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(l,u)=>o(l,Mp(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,Mp(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,Mp(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(f=>l(f,c)))})}),qB="symbolicEqual",Owe=["parse","simplify","typed","OperatorNode"],Iwe=ae(qB,Owe,n=>{var{parse:e,simplify:t,typed:r,OperatorNode:i}=n;function s(a,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[a,o]),c=t(u,{},l);return vn(c)&&!c.value}return r(qB,{"Node, Node":s,"Node, Node, Object":s})}),XB="derivative",kwe=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],Lwe=ae(XB,kwe,n=>{var{typed:e,config:t,parse:r,simplify:i,equal:s,isZero:a,numeric:o,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=n;function h(b,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},x={};y(x,b,g.name);var M=m(b,x);return w.simplify?i(M):M}e.addConversion({from:"identifier",to:"SymbolNode",convert:r});var p=e(XB,{"Node, SymbolNode":h,"Node, SymbolNode, Object":h});e.removeConversion({from:"identifier",to:"SymbolNode",convert:r}),p._simplify=!0,p.toTex=function(b){return v.apply(null,b.args)};var v=e("_derivTex",{"Node, SymbolNode":function(g,w){return vn(g)&&$n(g.value)==="string"?v(r(g.value).toString(),w.toString(),1):v(g.toTex(),w.toString(),1)},"Node, ConstantNode":function(g,w){if($n(w.value)==="string")return v(g,r(w.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(g,w,x){return v(g.toString(),w.name,x.value)},"string, string, number":function(g,w,x){var M;return x===1?M="{d\\over d"+w+"}":M="{d^{"+x+"}\\over d"+w+"^{"+x+"}}",M+"\\left[".concat(g,"\\right]")}}),y=e("constTag",{"Object, ConstantNode, string":function(g,w){return g[w]=!0,!0},"Object, SymbolNode, string":function(g,w,x){return w.name!==x?(g[w]=!0,!0):!1},"Object, ParenthesisNode, string":function(g,w,x){return y(g,w.content,x)},"Object, FunctionAssignmentNode, string":function(g,w,x){return w.params.includes(x)?y(g,w.expr,x):(g[w]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(g,w,x){if(w.args.length>0){for(var M=y(g,w.args[0],x),A=1;A<w.args.length;++A)M=y(g,w.args[A],x)&&M;if(M)return g[w]=!0,!0}return!1}}),m=e("_derivative",{"ConstantNode, Object":function(g){return S(0)},"SymbolNode, Object":function(g,w){return w[g]!==void 0?S(0):S(1)},"ParenthesisNode, Object":function(g,w){return new f(m(g.content,w))},"FunctionAssignmentNode, Object":function(g,w){return w[g]!==void 0?S(0):m(g.expr,w)},"FunctionNode, Object":function(g,w){if(w[g]!==void 0)return S(0);var x=g.args[0],M,A=!1,N=!1,C;switch(g.name){case"cbrt":A=!0,C=new c("*","multiply",[S(3),new c("^","pow",[x,new c("/","divide",[S(2),S(3)])])]);break;case"sqrt":case"nthRoot":if(g.args.length===1)A=!0,C=new c("*","multiply",[S(2),new u("sqrt",[x])]);else if(g.args.length===2)return M=new c("/","divide",[S(1),g.args[1]]),w[M]=w[g.args[1]],m(new c("^","pow",[x,M]),w);break;case"log10":M=S(10);case"log":if(!M&&g.args.length===1)C=x.clone(),A=!0;else if(g.args.length===1&&M||g.args.length===2&&w[g.args[1]]!==void 0)C=new c("*","multiply",[x.clone(),new u("log",[M||g.args[1]])]),A=!0;else if(g.args.length===2)return m(new c("/","divide",[new u("log",[x]),new u("log",[g.args[1]])]),w);break;case"pow":if(g.args.length===2)return w[M]=w[g.args[1]],m(new c("^","pow",[x,g.args[1]]),w);break;case"exp":C=new u("exp",[x.clone()]);break;case"sin":C=new u("cos",[x.clone()]);break;case"cos":C=new c("-","unaryMinus",[new u("sin",[x.clone()])]);break;case"tan":C=new c("^","pow",[new u("sec",[x.clone()]),S(2)]);break;case"sec":C=new c("*","multiply",[g,new u("tan",[x.clone()])]);break;case"csc":N=!0,C=new c("*","multiply",[g,new u("cot",[x.clone()])]);break;case"cot":N=!0,C=new c("^","pow",[new u("csc",[x.clone()]),S(2)]);break;case"asin":A=!0,C=new u("sqrt",[new c("-","subtract",[S(1),new c("^","pow",[x.clone(),S(2)])])]);break;case"acos":A=!0,N=!0,C=new u("sqrt",[new c("-","subtract",[S(1),new c("^","pow",[x.clone(),S(2)])])]);break;case"atan":A=!0,C=new c("+","add",[new c("^","pow",[x.clone(),S(2)]),S(1)]);break;case"asec":A=!0,C=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),S(2)]),S(1)])])]);break;case"acsc":A=!0,N=!0,C=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),S(2)]),S(1)])])]);break;case"acot":A=!0,N=!0,C=new c("+","add",[new c("^","pow",[x.clone(),S(2)]),S(1)]);break;case"sinh":C=new u("cosh",[x.clone()]);break;case"cosh":C=new u("sinh",[x.clone()]);break;case"tanh":C=new c("^","pow",[new u("sech",[x.clone()]),S(2)]);break;case"sech":N=!0,C=new c("*","multiply",[g,new u("tanh",[x.clone()])]);break;case"csch":N=!0,C=new c("*","multiply",[g,new u("coth",[x.clone()])]);break;case"coth":N=!0,C=new c("^","pow",[new u("csch",[x.clone()]),S(2)]);break;case"asinh":A=!0,C=new u("sqrt",[new c("+","add",[new c("^","pow",[x.clone(),S(2)]),S(1)])]);break;case"acosh":A=!0,C=new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),S(2)]),S(1)])]);break;case"atanh":A=!0,C=new c("-","subtract",[S(1),new c("^","pow",[x.clone(),S(2)])]);break;case"asech":A=!0,N=!0,C=new c("*","multiply",[x.clone(),new u("sqrt",[new c("-","subtract",[S(1),new c("^","pow",[x.clone(),S(2)])])])]);break;case"acsch":A=!0,N=!0,C=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[x.clone(),S(2)]),S(1)])])]);break;case"acoth":A=!0,N=!0,C=new c("-","subtract",[S(1),new c("^","pow",[x.clone(),S(2)])]);break;case"abs":C=new c("/","divide",[new u(new d("abs"),[x.clone()]),x.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+g.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var T,R;A?(T="/",R="divide"):(T="*",R="multiply");var U=m(x,w);return N&&(U=new c("-","unaryMinus",[U])),new c(T,R,[U,C])},"OperatorNode, Object":function(g,w){if(w[g]!==void 0)return S(0);if(g.op==="+")return new c(g.op,g.fn,g.args.map(function(B){return m(B,w)}));if(g.op==="-"){if(g.isUnary())return new c(g.op,g.fn,[m(g.args[0],w)]);if(g.isBinary())return new c(g.op,g.fn,[m(g.args[0],w),m(g.args[1],w)])}if(g.op==="*"){var x=g.args.filter(function(B){return w[B]!==void 0});if(x.length>0){var M=g.args.filter(function(B){return w[B]===void 0}),A=M.length===1?M[0]:new c("*","multiply",M),N=x.concat(m(A,w));return new c("*","multiply",N)}return new c("+","add",g.args.map(function(B){return new c("*","multiply",g.args.map(function(D){return D===B?m(D,w):D.clone()}))}))}if(g.op==="/"&&g.isBinary()){var C=g.args[0],T=g.args[1];return w[T]!==void 0?new c("/","divide",[m(C,w),T]):w[C]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[C]),new c("/","divide",[m(T,w),new c("^","pow",[T.clone(),S(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[m(C,w),T.clone()]),new c("*","multiply",[C.clone(),m(T,w)])]),new c("^","pow",[T.clone(),S(2)])])}if(g.op==="^"&&g.isBinary()){var R=g.args[0],U=g.args[1];if(w[R]!==void 0)return vn(R)&&(a(R.value)||s(R.value,1))?S(0):new c("*","multiply",[g,new c("*","multiply",[new u("log",[R.clone()]),m(U.clone(),w)])]);if(w[U]!==void 0){if(vn(U)){if(a(U.value))return S(0);if(s(U.value,1))return m(R,w)}var F=new c("^","pow",[R.clone(),new c("-","subtract",[U,S(1)])]);return new c("*","multiply",[U.clone(),new c("*","multiply",[m(R,w),F])])}return new c("*","multiply",[new c("^","pow",[R.clone(),U.clone()]),new c("+","add",[new c("*","multiply",[m(R,w),new c("/","divide",[U.clone(),R.clone()])]),new c("*","multiply",[m(U,w),new u("log",[R.clone()])])])])}throw new Error('Cannot process operator "'+g.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function S(b,g){return new l(o(b,t.number))}return p}),YB="rationalize",Fwe=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],Bwe=ae(YB,Fwe,n=>{var{config:e,typed:t,equal:r,isZero:i,add:s,subtract:a,multiply:o,divide:l,pow:u,parse:c,simplifyConstant:f,simplifyCore:d,simplify:h,fraction:p,bignumber:v,mathWithTransform:y,matrix:m,AccessorNode:S,ArrayNode:b,ConstantNode:g,FunctionNode:w,IndexNode:x,ObjectNode:M,OperatorNode:A,SymbolNode:N,ParenthesisNode:C}=n;function T(D){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,L=U(),X=R(D,O,!0,L.firstRules),Z=X.variables.length,Q={exactFractions:!1},K={exactFractions:!0};if(D=X.expression,Z>=1){D=F(D);var re,ce,ue=!0,me=!1;D=h(D,L.firstRules,{},Q);for(var Ee;ce=ue?L.distrDivRules:L.sucDivRules,D=h(D,ce,{},K),ue=!ue,Ee=D.toString(),Ee!==re;)me=!0,re=Ee;me&&(D=h(D,L.firstRulesAgain,{},Q)),D=h(D,L.finalRules,{},Q)}var xe=[],Te={};return D.type==="OperatorNode"&&D.isBinary()&&D.op==="/"?(Z===1&&(D.args[0]=B(D.args[0],xe),D.args[1]=B(D.args[1])),$&&(Te.numerator=D.args[0],Te.denominator=D.args[1])):(Z===1&&(D=B(D,xe)),$&&(Te.numerator=D,Te.denominator=null)),$?(Te.coefficients=xe,Te.variables=X.variables,Te.expression=D,Te):D}return t(YB,{Node:T,"Node, boolean":(D,O)=>T(D,{},O),"Node, Object":T,"Node, Object, boolean":T});function R(D,O,$,L){var X=[],Z=h(D,L,O,{exactFractions:!1});$=!!$;var Q="+-*"+($?"/":"");re(Z);var K={};return K.expression=Z,K.variables=X,K;function re(ce){var ue=ce.type;if(ue==="FunctionNode")throw new Error("There is an unsolved function call");if(ue==="OperatorNode")if(ce.op==="^"){if(ce.args[1].type!=="ConstantNode"||!Ot(parseFloat(ce.args[1].value)))throw new Error("There is a non-integer exponent");re(ce.args[0])}else{if(!Q.includes(ce.op))throw new Error("Operator "+ce.op+" invalid in polynomial expression");for(var me=0;me<ce.args.length;me++)re(ce.args[me])}else if(ue==="SymbolNode"){var Ee=ce.name,xe=X.indexOf(Ee);xe===-1&&X.push(Ee)}else if(ue==="ParenthesisNode")re(ce.content);else if(ue!=="ConstantNode")throw new Error("type "+ue+" is not allowed in polynomial expression")}}function U(){var D=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],O=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],$=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],L=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],X={};return X.firstRules=D.concat(O,L),X.distrDivRules=$,X.sucDivRules=L,X.firstRulesAgain=D.concat(O),X.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],X}function F(D,O,$){var L=D.type,X=arguments.length>1;if(L==="OperatorNode"&&D.isBinary()){var Z=!1,Q;if(D.op==="^"&&(D.args[0].type==="ParenthesisNode"||D.args[0].type==="OperatorNode")&&D.args[1].type==="ConstantNode"&&(Q=parseFloat(D.args[1].value),Z=Q>=2&&Ot(Q)),Z){if(Q>2){var K=D.args[0],re=new A("^","pow",[D.args[0].cloneDeep(),new g(Q-1)]);D=new A("*","multiply",[K,re])}else D=new A("*","multiply",[D.args[0],D.args[0].cloneDeep()]);X&&($==="content"?O.content=D:O.args[$]=D)}}if(L==="ParenthesisNode")F(D.content,D,"content");else if(L!=="ConstantNode"&&L!=="SymbolNode")for(var ce=0;ce<D.args.length;ce++)F(D.args[ce],D,ce);if(!X)return D}function B(D,O){O===void 0&&(O=[]),O[0]=0;var $={};$.cte=1,$.oper="+",$.fire="";var L=0,X="";Ee(D,null,$),L=O.length-1;for(var Z=!0,Q,K=L;K>=0;K--)if(O[K]!==0){var re=new g(Z?O[K]:Math.abs(O[K])),ce=O[K]<0?"-":"+";if(K>0){var ue=new N(X);if(K>1){var me=new g(K);ue=new A("^","pow",[ue,me])}O[K]===-1&&Z?re=new A("-","unaryMinus",[ue]):Math.abs(O[K])===1?re=ue:re=new A("*","multiply",[re,ue])}Z?Q=re:ce==="+"?Q=new A("+","add",[Q,re]):Q=new A("-","subtract",[Q,re]),Z=!1}if(Z)return new g(0);return Q;function Ee(xe,Te,De){var ie=xe.type;if(ie==="FunctionNode")throw new Error("There is an unsolved function call");if(ie==="OperatorNode"){if(!"+-*^".includes(xe.op))throw new Error("Operator "+xe.op+" invalid");if(Te!==null){if((xe.fn==="unaryMinus"||xe.fn==="pow")&&Te.fn!=="add"&&Te.fn!=="subtract"&&Te.fn!=="multiply")throw new Error("Invalid "+xe.op+" placing");if((xe.fn==="subtract"||xe.fn==="add"||xe.fn==="multiply")&&Te.fn!=="add"&&Te.fn!=="subtract")throw new Error("Invalid "+xe.op+" placing");if((xe.fn==="subtract"||xe.fn==="add"||xe.fn==="unaryMinus")&&De.noFil!==0)throw new Error("Invalid "+xe.op+" placing")}(xe.op==="^"||xe.op==="*")&&(De.fire=xe.op);for(var Ie=0;Ie<xe.args.length;Ie++)xe.fn==="unaryMinus"&&(De.oper="-"),(xe.op==="+"||xe.fn==="subtract")&&(De.fire="",De.cte=1,De.oper=Ie===0?"+":xe.op),De.noFil=Ie,Ee(xe.args[Ie],xe,De)}else if(ie==="SymbolNode"){if(xe.name!==X&&X!=="")throw new Error("There is more than one variable");if(X=xe.name,Te===null){O[1]=1;return}if(Te.op==="^"&&De.noFil!==0)throw new Error("In power the variable should be the first parameter");if(Te.op==="*"&&De.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(De.fire===""||De.fire==="*")&&(L<1&&(O[1]=0),O[1]+=De.cte*(De.oper==="+"?1:-1),L=Math.max(1,L))}else if(ie==="ConstantNode"){var ke=parseFloat(xe.value);if(Te===null){O[0]=ke;return}if(Te.op==="^"){if(De.noFil!==1)throw new Error("Constant cannot be powered");if(!Ot(ke)||ke<=0)throw new Error("Non-integer exponent is not allowed");for(var te=L+1;te<ke;te++)O[te]=0;ke>L&&(O[ke]=0),O[ke]+=De.cte*(De.oper==="+"?1:-1),L=Math.max(ke,L);return}De.cte=ke,De.fire===""&&(O[0]+=De.cte*(De.oper==="+"?1:-1))}else throw new Error("Type "+ie+" is not allowed")}}}),KB="zpk2tf",zwe=["typed","add","multiply","Complex","number"],Uwe=ae(KB,zwe,n=>{var{typed:e,add:t,multiply:r,Complex:i,number:s}=n;return e(KB,{"Array,Array,number":function(u,c,f){return a(u,c,f)},"Array,Array":function(u,c){return a(u,c,1)},"Matrix,Matrix,number":function(u,c,f){return a(u.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(u,c){return a(u.valueOf(),c.valueOf(),1)}});function a(l,u,c){l.some(S=>S.type==="BigNumber")&&(l=l.map(S=>s(S))),u.some(S=>S.type==="BigNumber")&&(u=u.map(S=>s(S)));for(var f=[i(1,0)],d=[i(1,0)],h=0;h<l.length;h++){var p=l[h];typeof p=="number"&&(p=i(p,0)),f=o(f,[i(1,0),i(-p.re,-p.im)])}for(var v=0;v<u.length;v++){var y=u[v];typeof y=="number"&&(y=i(y,0)),d=o(d,[i(1,0),i(-y.re,-y.im)])}for(var m=0;m<f.length;m++)f[m]=r(f[m],c);return[f,d]}function o(l,u){for(var c=[],f=0;f<l.length+u.length-1;f++){c[f]=i(0,0);for(var d=0;d<l.length;d++)f-d>=0&&f-d<u.length&&(c[f]=t(c[f],r(l[d],u[f-d])))}return c}}),ZB="freqz",$we=["typed","add","multiply","Complex","divide","matrix"],Vwe=ae(ZB,$we,n=>{var{typed:e,add:t,multiply:r,Complex:i,divide:s,matrix:a}=n;return e(ZB,{"Array, Array":function(c,f){var d=l(512);return o(c,f,d)},"Array, Array, Array":function(c,f,d){return o(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=l(d);return o(c,f,h)},"Matrix, Matrix":function(c,f){var d=l(512),{w:h,h:p}=o(c.valueOf(),f.valueOf(),d);return{w:a(h),h:a(p)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h}=o(c.valueOf(),f.valueOf(),d.valueOf());return{h:a(h),w:a(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=l(d),{h:p}=o(c.valueOf(),f.valueOf(),h);return{h:a(p),w:a(h)}}});function o(u,c,f){for(var d=[],h=[],p=0;p<f.length;p++){for(var v=i(0,0),y=i(0,0),m=0;m<u.length;m++)v=t(v,r(u[m],i(Math.cos(-m*f[p]),Math.sin(-m*f[p]))));for(var S=0;S<c.length;S++)y=t(y,r(c[S],i(Math.cos(-S*f[p]),Math.sin(-S*f[p]))));d.push(v),h.push(y)}for(var b=[],g=0;g<d.length;g++)b.push(s(d[g],h[g]));return{h:b,w:f}}function l(u){for(var c=[],f=0;f<u;f++)c.push(f/u*Math.PI);return c}}),Hwe="reviver",Wwe=["classes"],Gwe=ae(Hwe,Wwe,n=>{var{classes:e}=n;return function(r,i){var s=e[i&&i.mathjs];return s&&typeof s.fromJSON=="function"?s.fromJSON(i):i}}),jwe="replacer",qwe=[],Xwe=ae(jwe,qwe,()=>function(e,t){return typeof t=="number"&&(!isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:t}),Ywe="12.4.3",Kwe=ae("true",[],()=>!0),Zwe=ae("false",[],()=>!1),Jwe=ae("null",[],()=>null),Qwe=Aa("Infinity",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(1/0):1/0}),eSe=Aa("NaN",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(NaN):NaN}),tSe=Aa("pi",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?_P(t):poe}),nSe=Aa("tau",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?Lhe(t):moe}),rSe=Aa("e",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?Ihe(t):goe}),iSe=Aa("phi",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?khe(t):voe}),sSe=Aa("LN2",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),aSe=Aa("LN10",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),oSe=Aa("LOG2E",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),lSe=Aa("LOG10E",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),uSe=Aa("SQRT1_2",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),cSe=Aa("SQRT2",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),fSe=Aa("i",["Complex"],n=>{var{Complex:e}=n;return e.I}),dSe=ae("PI",["pi"],n=>{var{pi:e}=n;return e}),hSe=ae("E",["e"],n=>{var{e}=n;return e}),pSe=ae("version",[],()=>Ywe);function Aa(n,e,t){return ae(n,e,t,{recreateOnConfigChange:!0})}var mSe=en("speedOfLight","299792458","m s^-1"),gSe=en("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),vSe=en("planckConstant","6.62607015e-34","J s"),ySe=en("reducedPlanckConstant","1.0545718176461565e-34","J s"),xSe=en("magneticConstant","1.25663706212e-6","N A^-2"),bSe=en("electricConstant","8.8541878128e-12","F m^-1"),wSe=en("vacuumImpedance","376.730313667","ohm"),SSe=en("coulomb","8.987551792261171e9","N m^2 C^-2"),_Se=en("elementaryCharge","1.602176634e-19","C"),ESe=en("bohrMagneton","9.2740100783e-24","J T^-1"),MSe=en("conductanceQuantum","7.748091729863649e-5","S"),CSe=en("inverseConductanceQuantum","12906.403729652257","ohm"),ASe=en("magneticFluxQuantum","2.0678338484619295e-15","Wb"),TSe=en("nuclearMagneton","5.0507837461e-27","J T^-1"),DSe=en("klitzing","25812.807459304513","ohm"),NSe=en("bohrRadius","5.29177210903e-11","m"),PSe=en("classicalElectronRadius","2.8179403262e-15","m"),RSe=en("electronMass","9.1093837015e-31","kg"),OSe=en("fermiCoupling","1.1663787e-5","GeV^-2"),ISe=q_("fineStructure",.0072973525693),kSe=en("hartreeEnergy","4.3597447222071e-18","J"),LSe=en("protonMass","1.67262192369e-27","kg"),FSe=en("deuteronMass","3.3435830926e-27","kg"),BSe=en("neutronMass","1.6749271613e-27","kg"),zSe=en("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),USe=en("rydberg","10973731.568160","m^-1"),$Se=en("thomsonCrossSection","6.6524587321e-29","m^2"),VSe=q_("weakMixingAngle",.2229),HSe=q_("efimovFactor",22.7),WSe=en("atomicMass","1.66053906660e-27","kg"),GSe=en("avogadro","6.02214076e23","mol^-1"),jSe=en("boltzmann","1.380649e-23","J K^-1"),qSe=en("faraday","96485.33212331001","C mol^-1"),XSe=en("firstRadiation","3.7417718521927573e-16","W m^2"),YSe=en("loschmidt","2.686780111798444e25","m^-3"),KSe=en("gasConstant","8.31446261815324","J K^-1 mol^-1"),ZSe=en("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),JSe=en("molarVolume","0.022413969545014137","m^3 mol^-1"),QSe=q_("sackurTetrode",-1.16487052358),e_e=en("secondRadiation","0.014387768775039337","m K"),t_e=en("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),n_e=en("wienDisplacement","2.897771955e-3","m K"),r_e=en("molarMass","0.99999999965e-3","kg mol^-1"),i_e=en("molarMassC12","11.9999999958e-3","kg mol^-1"),s_e=en("gravity","9.80665","m s^-2"),a_e=en("planckLength","1.616255e-35","m"),o_e=en("planckMass","2.176435e-8","kg"),l_e=en("planckTime","5.391245e-44","s"),u_e=en("planckCharge","1.87554603778e-18","C"),c_e=en("planckTemperature","1.416785e+32","K");function en(n,e,t){var r=["config","Unit","BigNumber"];return ae(n,r,i=>{var{config:s,Unit:a,BigNumber:o}=i,l=s.number==="BigNumber"?new o(e):parseFloat(e),u=new a(l,t);return u.fixPrefix=!0,u})}function q_(n,e){var t=["config","BigNumber"];return ae(n,t,r=>{var{config:i,BigNumber:s}=r;return i.number==="BigNumber"?new s(e):e})}var f_e="apply",d_e=["typed","isInteger"],h_e=ae(f_e,d_e,n=>{var{typed:e,isInteger:t}=n,r=vP({typed:e,isInteger:t});return e("apply",{"...any":function(s){var a=s[1];tn(a)?s[1]=a-1:Jt(a)&&(s[1]=a.minus(1));try{return r.apply(null,s)}catch(o){throw Ps(o)}}})},{isTransformFunction:!0}),p_e="column",m_e=["typed","Index","matrix","range"],g_e=ae(p_e,m_e,n=>{var{typed:e,Index:t,matrix:r,range:i}=n,s=CG({typed:e,Index:t,matrix:r,range:i});return e("column",{"...any":function(o){var l=o.length-1,u=o[l];tn(u)&&(o[l]=u-1);try{return s.apply(null,o)}catch(c){throw Ps(c)}}})},{isTransformFunction:!0});function RP(n,e,t){var r=n.filter(function(l){return ii(l)&&!(l.name in e)&&!t.has(l.name)})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+n+'"');var i=r.name,s=new Map,a=new KH(t,s,new Set([i])),o=n.compile();return function(u){return s.set(i,u),o.evaluate(a)}}var v_e="filter",y_e=["typed"],x_e=ae(v_e,y_e,n=>{var{typed:e}=n;function t(i,s,a){var o,l;return i[0]&&(o=i[0].compile().evaluate(a)),i[1]&&(ii(i[1])||ym(i[1])?l=i[1].compile().evaluate(a):l=RP(i[1],s,a)),r(o,l)}t.rawArgs=!0;var r=e("filter",{"Array, function":JB,"Matrix, function":function(s,a){return s.create(JB(s.toArray(),a))},"Array, RegExp":aS,"Matrix, RegExp":function(s,a){return s.create(aS(s.toArray(),a))}});return t},{isTransformFunction:!0});function JB(n,e){return xW(n,function(t,r,i){return _m(e,t,[r+1],i,"filter")})}var b_e="forEach",w_e=["typed"],S_e=ae(b_e,w_e,n=>{var{typed:e}=n;function t(i,s,a){var o,l;return i[0]&&(o=i[0].compile().evaluate(a)),i[1]&&(ii(i[1])||ym(i[1])?l=i[1].compile().evaluate(a):l=RP(i[1],s,a)),r(o,l)}t.rawArgs=!0;var r=e("forEach",{"Array | Matrix, function":function(s,a){var o=function l(u,c){if(Array.isArray(u))$_(u,function(f,d){l(f,c.concat(d+1))});else return _m(a,u,c,s,"forEach")};o(s.valueOf(),[])}});return t},{isTransformFunction:!0}),__e="index",E_e=["Index","getMatrixDataType"],M_e=ae(__e,E_e,n=>{var{Index:e,getMatrixDataType:t}=n;return function(){for(var i=[],s=0,a=arguments.length;s<a;s++){var o=arguments[s];if(k_(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(u){return u-1});else if(_n(o)||Ut(o))t(o)!=="boolean"&&(o=o.map(function(u){return u-1}));else if(tn(o))o--;else if(Jt(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");i[s]=o}var l=new e;return e.apply(l,i),l}},{isTransformFunction:!0}),C_e="map",A_e=["typed"],T_e=ae(C_e,A_e,n=>{var{typed:e}=n;function t(i,s,a){var o,l;return i[0]&&(o=i[0].compile().evaluate(a)),i[1]&&(ii(i[1])||ym(i[1])?l=i[1].compile().evaluate(a):l=RP(i[1],s,a)),r(o,l)}t.rawArgs=!0;var r=e("map",{"Array, function":function(s,a){return QB(s,a,s)},"Matrix, function":function(s,a){return s.create(QB(s.valueOf(),a,s))}});return t},{isTransformFunction:!0});function QB(n,e,t){function r(i,s){return Array.isArray(i)?uu(i,function(a,o){return r(a,s.concat(o+1))}):_m(e,i,s,t,"map")}return r(n,[])}function of(n){if(n.length===2&&_a(n[0])){n=n.slice();var e=n[1];tn(e)?n[1]=e-1:Jt(e)&&(n[1]=e.minus(1))}return n}var D_e="max",N_e=["typed","config","numeric","larger"],P_e=ae(D_e,N_e,n=>{var{typed:e,config:t,numeric:r,larger:i}=n,s=FG({typed:e,config:t,numeric:r,larger:i});return e("max",{"...any":function(o){o=of(o);try{return s.apply(null,o)}catch(l){throw Ps(l)}}})},{isTransformFunction:!0}),R_e="mean",O_e=["typed","add","divide"],I_e=ae(R_e,O_e,n=>{var{typed:e,add:t,divide:r}=n,i=jG({typed:e,add:t,divide:r});return e("mean",{"...any":function(a){a=of(a);try{return i.apply(null,a)}catch(o){throw Ps(o)}}})},{isTransformFunction:!0}),k_e="min",L_e=["typed","config","numeric","smaller"],F_e=ae(k_e,L_e,n=>{var{typed:e,config:t,numeric:r,smaller:i}=n,s=BG({typed:e,config:t,numeric:r,smaller:i});return e("min",{"...any":function(o){o=of(o);try{return s.apply(null,o)}catch(l){throw Ps(l)}}})},{isTransformFunction:!0}),B_e="range",z_e=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],U_e=ae(B_e,z_e,n=>{var{typed:e,config:t,matrix:r,bignumber:i,smaller:s,smallerEq:a,larger:o,largerEq:l,add:u,isPositive:c}=n,f=NG({typed:e,config:t,matrix:r,bignumber:i,smaller:s,smallerEq:a,larger:o,largerEq:l,add:u,isPositive:c});return e("range",{"...any":function(h){var p=h.length-1,v=h[p];return typeof v!="boolean"&&h.push(!0),f.apply(null,h)}})},{isTransformFunction:!0}),$_e="row",V_e=["typed","Index","matrix","range"],H_e=ae($_e,V_e,n=>{var{typed:e,Index:t,matrix:r,range:i}=n,s=PG({typed:e,Index:t,matrix:r,range:i});return e("row",{"...any":function(o){var l=o.length-1,u=o[l];tn(u)&&(o[l]=u-1);try{return s.apply(null,o)}catch(c){throw Ps(c)}}})},{isTransformFunction:!0}),W_e="subset",G_e=["typed","matrix","zeros","add"],j_e=ae(W_e,G_e,n=>{var{typed:e,matrix:t,zeros:r,add:i}=n,s=RG({typed:e,matrix:t,zeros:r,add:i});return e("subset",{"...any":function(o){try{return s.apply(null,o)}catch(l){throw Ps(l)}}})},{isTransformFunction:!0}),q_e="concat",X_e=["typed","matrix","isInteger"],Y_e=ae(q_e,X_e,n=>{var{typed:e,matrix:t,isInteger:r}=n,i=MG({typed:e,matrix:t,isInteger:r});return e("concat",{"...any":function(a){var o=a.length-1,l=a[o];tn(l)?a[o]=l-1:Jt(l)&&(a[o]=l.minus(1));try{return i.apply(null,a)}catch(u){throw Ps(u)}}})},{isTransformFunction:!0}),e5="diff",K_e=["typed","matrix","subtract","number","bignumber"],Z_e=ae(e5,K_e,n=>{var{typed:e,matrix:t,subtract:r,number:i,bignumber:s}=n,a=AG({typed:e,matrix:t,subtract:r,number:i,bignumber:s});return e(e5,{"...any":function(l){l=of(l);try{return a.apply(null,l)}catch(u){throw Ps(u)}}})},{isTransformFunction:!0}),J_e="std",Q_e=["typed","map","sqrt","variance"],eEe=ae(J_e,Q_e,n=>{var{typed:e,map:t,sqrt:r,variance:i}=n,s=YG({typed:e,map:t,sqrt:r,variance:i});return e("std",{"...any":function(o){o=of(o);try{return s.apply(null,o)}catch(l){throw Ps(l)}}})},{isTransformFunction:!0}),t5="sum",tEe=["typed","config","add","numeric"],nEe=ae(t5,tEe,n=>{var{typed:e,config:t,add:r,numeric:i}=n,s=WG({typed:e,config:t,add:r,numeric:i});return e(t5,{"...any":function(o){o=of(o);try{return s.apply(null,o)}catch(l){throw Ps(l)}}})},{isTransformFunction:!0}),rEe="quantileSeq",iEe=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],sEe=ae(rEe,iEe,n=>{var{typed:e,bignumber:t,add:r,subtract:i,divide:s,multiply:a,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:d}=n,h=XG({typed:e,bignumber:t,add:r,subtract:i,divide:s,multiply:a,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:d});return e("quantileSeq",{"Array | Matrix, number | BigNumber":h,"Array | Matrix, number | BigNumber, number":(v,y,m)=>h(v,y,p(m)),"Array | Matrix, number | BigNumber, boolean":h,"Array | Matrix, number | BigNumber, boolean, number":(v,y,m,S)=>h(v,y,m,p(S)),"Array | Matrix, Array | Matrix":h,"Array | Matrix, Array | Matrix, number":(v,y,m)=>h(v,y,p(m)),"Array | Matrix, Array | Matrix, boolean":h,"Array | Matrix, Array | Matrix, boolean, number":(v,y,m,S)=>h(v,y,m,p(S))});function p(v){return of([[],v])[1]}},{isTransformFunction:!0}),n5="cumsum",aEe=["typed","add","unaryPlus"],oEe=ae(n5,aEe,n=>{var{typed:e,add:t,unaryPlus:r}=n,i=GG({typed:e,add:t,unaryPlus:r});return e(n5,{"...any":function(a){if(a.length===2&&_a(a[0])){var o=a[1];tn(o)?a[1]=o-1:Jt(o)&&(a[1]=o.minus(1))}try{return i.apply(null,a)}catch(l){throw Ps(l)}}})},{isTransformFunction:!0}),r5="variance",lEe=["typed","add","subtract","multiply","divide","apply","isNaN"],uEe=ae(r5,lEe,n=>{var{typed:e,add:t,subtract:r,multiply:i,divide:s,apply:a,isNaN:o}=n,l=qG({typed:e,add:t,subtract:r,multiply:i,divide:s,apply:a,isNaN:o});return e(r5,{"...any":function(c){c=of(c);try{return l.apply(null,c)}catch(f){throw Ps(f)}}})},{isTransformFunction:!0}),i5="print",cEe=["typed","matrix","zeros","add"],fEe=ae(i5,cEe,n=>{var{typed:e,matrix:t,zeros:r,add:i}=n,s=kG({typed:e,matrix:t,zeros:r,add:i});return e(i5,{"string, Object | Array":function(l,u){return s(a(l),u)},"string, Object | Array, number | Object":function(l,u,c){return s(a(l),u,c)}});function a(o){return o.replace(IG,l=>{var u=l.slice(1).split("."),c=u.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),dEe="and",hEe=["typed","matrix","zeros","add","equalScalar","not","concat"],pEe=ae(dEe,hEe,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,not:s,concat:a}=n,o=LG({typed:e,matrix:t,equalScalar:r,zeros:i,not:s,concat:a});function l(u,c,f){var d=u[0].compile().evaluate(f);if(!_a(d)&&!o(d,!0))return!1;var h=u[1].compile().evaluate(f);return o(d,h)}return l.rawArgs=!0,l},{isTransformFunction:!0}),mEe="or",gEe=["typed","matrix","equalScalar","DenseMatrix","concat"],vEe=ae(mEe,gEe,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s}=n,a=EG({typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s});function o(l,u,c){var f=l[0].compile().evaluate(c);if(!_a(f)&&a(f,!1))return!0;var d=l[1].compile().evaluate(c);return a(f,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),yEe="bitAnd",xEe=["typed","matrix","zeros","add","equalScalar","not","concat"],bEe=ae(yEe,xEe,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,not:s,concat:a}=n,o=SG({typed:e,matrix:t,equalScalar:r,zeros:i,not:s,concat:a});function l(u,c,f){var d=u[0].compile().evaluate(f);if(!_a(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var h=u[1].compile().evaluate(f);return o(d,h)}return l.rawArgs=!0,l},{isTransformFunction:!0}),wEe="bitOr",SEe=["typed","matrix","equalScalar","DenseMatrix","concat"],_Ee=ae(wEe,SEe,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s}=n,a=_G({typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s});function o(l,u,c){var f=l[0].compile().evaluate(c);if(!_a(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=l[1].compile().evaluate(c);return a(f,d)}return o.rawArgs=!0,o},{isTransformFunction:!0});const EEe=Object.freeze(Object.defineProperty({__proto__:null,createAbs:ble,createAccessorNode:Tme,createAcos:qhe,createAcosh:Yhe,createAcot:Zhe,createAcoth:Qhe,createAcsc:tpe,createAcsch:rpe,createAdd:dme,createAddScalar:Ele,createAnd:LG,createAndTransform:pEe,createApply:vP,createApplyTransform:h_e,createArg:fce,createArrayNode:Nme,createAsec:spe,createAsech:ope,createAsin:upe,createAsinh:dpe,createAssignmentNode:Ime,createAtan:mpe,createAtan2:vpe,createAtanh:xpe,createAtomicMass:WSe,createAvogadro:GSe,createBellNumbers:hwe,createBigNumberClass:Oae,createBignumber:Joe,createBin:qfe,createBitAnd:SG,createBitAndTransform:bEe,createBitNot:ice,createBitOr:_G,createBitOrTransform:_Ee,createBitXor:uce,createBlockNode:Lme,createBohrMagneton:ESe,createBohrRadius:NSe,createBoltzmann:jSe,createBoolean:Yoe,createCatalan:mwe,createCbrt:Tle,createCeil:Fle,createChain:Lxe,createChainClass:ave,createClassicalElectronRadius:PSe,createClone:uoe,createColumn:CG,createColumnTransform:g_e,createCombinations:Mbe,createCombinationsWithRep:Abe,createCompare:Ude,createCompareNatural:Wde,createCompareText:qde,createCompile:mge,createComplex:tle,createComplexClass:Fae,createComposition:vwe,createConcat:MG,createConcatTransform:Y_e,createConditionalNode:Bme,createConductanceQuantum:MSe,createConj:hce,createConstantNode:jme,createCorr:_be,createCos:wpe,createCosh:_pe,createCot:Mpe,createCoth:Ape,createCoulomb:SSe,createCount:Cce,createCreateUnit:Ghe,createCross:Tce,createCsc:Dpe,createCsch:Ppe,createCtranspose:bfe,createCube:zle,createCumSum:GG,createCumSumTransform:oEe,createDeepEqual:dhe,createDenseMatrixClass:ooe,createDerivative:Lwe,createDet:Bxe,createDeuteronMass:FSe,createDiag:Nce,createDiff:AG,createDiffTransform:Z_e,createDistance:lbe,createDivide:abe,createDivideScalar:ode,createDot:yme,createDotDivide:wde,createDotMultiply:Kue,createDotPow:xde,createE:rSe,createEfimovFactor:HSe,createEigs:qxe,createElectricConstant:bSe,createElectronMass:RSe,createElementaryCharge:_Se,createEqual:Yde,createEqualScalar:Foe,createEqualText:Jde,createErf:Ife,createEvaluate:vge,createExp:$le,createExpm:Yxe,createExpm1:Hle,createFactorial:Obe,createFalse:Zwe,createFaraday:qSe,createFermiCoupling:OSe,createFft:Efe,createFibonacciHeapClass:Nhe,createFilter:Oce,createFilterTransform:x_e,createFineStructure:ISe,createFirstRadiation:XSe,createFix:jle,createFlatten:kce,createFloor:xG,createForEach:Fce,createForEachTransform:S_e,createFormat:Gfe,createFraction:ile,createFractionClass:$ae,createFreqz:Vwe,createFunctionAssignmentNode:Xme,createFunctionNode:fge,createGamma:Dbe,createGasConstant:KSe,createGcd:yue,createGetMatrixDataType:Uce,createGravitationConstant:gSe,createGravity:s_e,createHartreeEnergy:kSe,createHasNumericValue:Coe,createHelp:Ixe,createHelpClass:rve,createHex:Zfe,createHypot:pme,createI:fSe,createIdentity:Vce,createIfft:Cfe,createIm:mce,createImmutableDenseMatrixClass:Ehe,createIndex:_me,createIndexClass:Ahe,createIndexNode:Kme,createIndexTransform:M_e,createInfinity:Qwe,createIntersect:fbe,createInv:Uxe,createInverseConductanceQuantum:CSe,createInvmod:jue,createIsInteger:foe,createIsNaN:Roe,createIsNegative:Soe,createIsNumeric:Eoe,createIsPositive:Toe,createIsPrime:nde,createIsZero:Noe,createKldivergence:kbe,createKlitzing:DSe,createKron:Wce,createLN10:aSe,createLN2:sSe,createLOG10E:lSe,createLOG2E:oSe,createLarger:ahe,createLargerEq:uhe,createLcm:Sue,createLeafCount:xwe,createLeftShift:Ode,createLgamma:Pbe,createLog:hde,createLog10:Eue,createLog1p:mde,createLog2:Cue,createLoschmidt:YSe,createLsolve:_de,createLsolveAll:Ade,createLup:Ege,createLusolve:Jge,createLyap:rbe,createMad:ybe,createMagneticConstant:xSe,createMagneticFluxQuantum:ASe,createMap:jce,createMapTransform:T_e,createMatrix:ale,createMatrixClass:qae,createMatrixFromColumns:dle,createMatrixFromFunction:lle,createMatrixFromRows:cle,createMax:FG,createMaxTransform:P_e,createMean:jG,createMeanTransform:I_e,createMedian:gbe,createMin:BG,createMinTransform:F_e,createMod:bG,createMode:$fe,createMolarMass:r_e,createMolarMassC12:i_e,createMolarPlanckConstant:ZSe,createMolarVolume:JSe,createMultinomial:Fbe,createMultiply:Pue,createMultiplyScalar:Due,createNaN:eSe,createNeutronMass:BSe,createNode:Cme,createNorm:gme,createNot:xce,createNthRoot:Oue,createNthRoots:vde,createNuclearMagneton:TSe,createNull:Jwe,createNumber:Goe,createNumeric:sde,createObjectNode:Jme,createOct:Yfe,createOnes:Zce,createOperatorNode:ege,createOr:EG,createOrTransform:vEe,createParenthesisNode:nge,createParse:hge,createParser:Sge,createParserClass:bge,createPartitionSelect:vhe,createPermutations:zbe,createPhi:iSe,createPi:tSe,createPickRandom:swe,createPinv:Vxe,createPlanckCharge:u_e,createPlanckConstant:vSe,createPlanckLength:a_e,createPlanckMass:o_e,createPlanckTemperature:c_e,createPlanckTime:l_e,createPolynomialRoot:eve,createPow:ude,createPrint:kG,createPrintTransform:fEe,createProd:Hfe,createProtonMass:LSe,createQr:Cge,createQuantileSeq:XG,createQuantileSeqTransform:sEe,createQuantumOfCirculation:zSe,createRandom:owe,createRandomInt:uwe,createRange:NG,createRangeClass:Wae,createRangeNode:ige,createRangeTransform:U_e,createRationalize:Bwe,createRe:vce,createReducedPlanckConstant:ySe,createRelationalNode:age,createReplacer:Xwe,createReshape:efe,createResize:rfe,createResolve:Rwe,createResultSet:Fse,createReviver:Gwe,createRightArithShift:kde,createRightLogShift:Fde,createRotate:sfe,createRotationMatrix:ofe,createRound:fde,createRow:PG,createRowTransform:H_e,createRydberg:USe,createSQRT1_2:uSe,createSQRT2:cSe,createSackurTetrode:QSe,createSchur:tbe,createSec:Ope,createSech:kpe,createSecondRadiation:e_e,createSetCartesian:jpe,createSetDifference:Xpe,createSetDistinct:Kpe,createSetIntersect:Jpe,createSetIsSubset:eme,createSetMultiplicity:nme,createSetPowerset:ime,createSetSize:ame,createSetSymDifference:lme,createSetUnion:cme,createSign:kue,createSimplify:Ewe,createSimplifyConstant:Awe,createSimplifyCore:Dwe,createSin:Fpe,createSinh:zpe,createSize:cfe,createSlu:Kge,createSmaller:ehe,createSmallerEq:rhe,createSolveODE:Pfe,createSort:xhe,createSpaClass:Ohe,createSparse:Hhe,createSparseMatrixClass:Uoe,createSpeedOfLight:mSe,createSplitUnit:ple,createSqrt:Bue,createSqrtm:Zxe,createSquare:Uue,createSqueeze:dfe,createStd:YG,createStdTransform:eEe,createStefanBoltzmann:t_e,createStirlingS2:fwe,createString:qoe,createSubset:RG,createSubsetTransform:j_e,createSubtract:Vue,createSubtractScalar:Cle,createSum:WG,createSumTransform:nEe,createSylvester:Qxe,createSymbolNode:uge,createSymbolicEqual:Iwe,createTan:$pe,createTanh:Wpe,createTau:nSe,createThomsonCrossSection:$Se,createTo:ede,createTrace:wme,createTranspose:yfe,createTrue:Kwe,createTypeOf:Ioe,createTyped:Ose,createUnaryMinus:gle,createUnaryPlus:yle,createUnequal:phe,createUnitClass:zhe,createUnitFunction:$he,createUppercaseE:hSe,createUppercasePi:dSe,createUsolve:Mde,createUsolveAll:Dde,createVacuumImpedance:wSe,createVariance:qG,createVarianceTransform:uEe,createVersion:pSe,createWeakMixingAngle:VSe,createWienDisplacement:n_e,createXgcd:Wue,createXor:Sce,createZeros:Sfe,createZeta:zfe,createZpk2tf:Uwe},Symbol.toStringTag,{value:"Module"}));var MEe=EEe,OP={exports:{}};function IP(){}IP.prototype={on:function(n,e,t){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:e,ctx:t}),this},once:function(n,e,t){var r=this;function i(){r.off(n,i),e.apply(t,arguments)}return i._=e,this.on(n,i,t)},emit:function(n){var e=[].slice.call(arguments,1),t=((this.e||(this.e={}))[n]||[]).slice(),r=0,i=t.length;for(r;r<i;r++)t[r].fn.apply(t[r].ctx,e);return this},off:function(n,e){var t=this.e||(this.e={}),r=t[n],i=[];if(r&&e)for(var s=0,a=r.length;s<a;s++)r[s].fn!==e&&r[s].fn._!==e&&i.push(r[s]);return i.length?t[n]=i:delete t[n],this}};OP.exports=IP;OP.exports.TinyEmitter=IP;var CEe=OP.exports;const AEe=so(CEe);function TEe(n){var e=new AEe;return n.on=e.on.bind(e),n.off=e.off.bind(e),n.once=e.once.bind(e),n.emit=e.emit.bind(e),n}function DEe(n,e,t,r){function i(y,m){var S=arguments.length;if(S!==1&&S!==2)throw new Ou("import",S,1,2);m||(m={});function b(M,A,N){if(Array.isArray(A))A.forEach(R=>b(M,R));else if(typeof A=="object")for(var C in A)gt(A,C)&&b(M,A[C],C);else if(mv(A)||N!==void 0){var T=mv(A)?p(A)?A.fn+".transform":A.fn:N;if(gt(M,T)&&M[T]!==A&&!m.silent)throw new Error('Cannot import "'+T+'" twice');M[T]=A}else if(!m.silent)throw new TypeError("Factory, Object, or Array expected")}var g={};b(g,y);for(var w in g)if(gt(g,w)){var x=g[w];if(mv(x))u(x,m);else if(c(x))s(w,x,m);else if(!m.silent)throw new TypeError("Factory, Object, or Array expected")}}function s(y,m,S){if(S.wrap&&typeof m=="function"&&(m=l(m)),f(m)&&(m=n(y,{[m.signature]:m})),n.isTypedFunction(t[y])&&n.isTypedFunction(m)){S.override?m=n(y,m.signatures):m=n(t[y],m),t[y]=m,delete r[y],a(y,m),t.emit("import",y,function(){return m});return}if(t[y]===void 0||S.override){t[y]=m,delete r[y],a(y,m),t.emit("import",y,function(){return m});return}if(!S.silent)throw new Error('Cannot import "'+y+'": already exists')}function a(y,m){m&&typeof m.transform=="function"?(t.expression.transform[y]=m.transform,d(y)&&(t.expression.mathWithTransform[y]=m.transform)):(delete t.expression.transform[y],d(y)&&(t.expression.mathWithTransform[y]=m))}function o(y){delete t.expression.transform[y],d(y)?t.expression.mathWithTransform[y]=t[y]:delete t.expression.mathWithTransform[y]}function l(y){var m=function(){for(var b=[],g=0,w=arguments.length;g<w;g++){var x=arguments[g];b[g]=x&&x.valueOf()}return y.apply(t,b)};return y.transform&&(m.transform=y.transform),m}function u(y,m){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.fn;if(S.includes("."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(S));var b=p(y)?t.expression.transform:t,g=S in t.expression.transform,w=gt(b,S)?b[S]:void 0,x=function(){var A={};y.dependencies.map(qH).forEach(C=>{if(C.includes("."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(C));C==="math"?A.math=t:C==="mathWithTransform"?A.mathWithTransform=t.expression.mathWithTransform:C==="classes"?A.classes=t:A[C]=t[C]});var N=y(A);if(N&&typeof N.transform=="function")throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(w===void 0||m.override)return N;if(n.isTypedFunction(w)&&n.isTypedFunction(N))return n(w,N);if(m.silent)return w;throw new Error('Cannot import "'+S+'": already exists')};!y.meta||y.meta.lazy!==!1?(Jb(b,S,x),w&&g?o(S):(p(y)||h(y))&&Jb(t.expression.mathWithTransform,S,()=>b[S])):(b[S]=x(),w&&g?o(S):(p(y)||h(y))&&Jb(t.expression.mathWithTransform,S,()=>b[S])),r[S]=y,t.emit("import",S,x)}function c(y){return typeof y=="function"||typeof y=="number"||typeof y=="string"||typeof y=="boolean"||y===null||zs(y)||Mo(y)||Jt(y)||Ld(y)||Ut(y)||Array.isArray(y)}function f(y){return typeof y=="function"&&typeof y.signature=="string"}function d(y){return!gt(v,y)}function h(y){return!y.fn.includes(".")&&!gt(v,y.fn)&&(!y.meta||!y.meta.isClass)}function p(y){return y!==void 0&&y.meta!==void 0&&y.meta.isTransformFunction===!0||!1}var v={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return i}function JG(n,e){var t=ot({},AH,e);if(typeof Object.create!="function")throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var r=TEe({isNumber:tn,isComplex:Mo,isBigNumber:Jt,isFraction:Ld,isUnit:zs,isString:Ai,isArray:_n,isMatrix:Ut,isCollection:_a,isDenseMatrix:Yv,isSparseMatrix:gc,isRange:k_,isIndex:ty,isBoolean:TH,isResultSet:DH,isHelp:cP,isFunction:NH,isDate:PH,isRegExp:RH,isObject:ny,isNull:OH,isUndefined:IH,isAccessorNode:Uc,isArrayNode:ua,isAssignmentNode:kH,isBlockNode:LH,isConditionalNode:FH,isConstantNode:vn,isFunctionAssignmentNode:ym,isFunctionNode:bu,isIndexNode:Fd,isNode:In,isObjectNode:ry,isOperatorNode:Br,isParenthesisNode:wl,isRangeNode:BH,isRelationalNode:zH,isSymbolNode:ii,isChain:fP});r.config=lse(t,r.emit),r.expression={transform:{},mathWithTransform:{config:r.config}};var i=[],s=[];function a(c){if(mv(c))return c(r);var f=c[Object.keys(c)[0]];if(mv(f))return f(r);if(!ase(c))throw console.warn("Factory object with properties `type`, `name`, and `factory` expected",c),new Error("Factory object with properties `type`, `name`, and `factory` expected");var d=i.indexOf(c),h;return d===-1?(c.math===!0?h=c.factory(r.type,t,a,r.typed,r):h=c.factory(r.type,t,a,r.typed),i.push(c),s.push(h)):h=s[d],h}var o={};function l(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return r.typed.apply(r.typed,f)}l.isTypedFunction=Yf.isTypedFunction;var u=DEe(l,a,r,o);return r.import=u,r.on("config",()=>{Object.values(o).forEach(c=>{c&&c.meta&&c.meta.recreateOnConfigChange&&u(c,{override:!0})})}),r.create=JG.bind(null,n),r.factory=ae,r.import(Object.values(sse(n))),r.ArgumentsError=Ou,r.DimensionError=on,r.IndexError=ao,r}class QG{constructor(e){this.isMoving=!1,this.color="black",this.atomType="Connector",this.selected=!1,this.attachmentPoint1=null,this.attachmentPoint2=null;for(var t in e)this[t]=e[t];this.startX=this.attachmentPoint1.parentMolecule.outputX,this.startY=this.attachmentPoint1.parentMolecule.y,this.attachmentPoint1.connectors.push(this),this.attachmentPoint2!=null&&this.attachmentPoint2.connectors.push(this)}draw(){let e=k.widthToPixels(this.startX),t=k.heightToPixels(this.startY),r=k.widthToPixels(this.endX),i=k.heightToPixels(this.endY);k.c.beginPath(),k.c.fillStyle=this.color,k.c.strokeStyle=this.color,k.c.globalCompositeOperation="destination-over",this.selected?k.c.lineWidth=3:k.c.lineWidth=1,k.c.moveTo(e,t),k.c.bezierCurveTo(e+100,t,r-100,i,r,i),k.c.stroke(),k.c.globalCompositeOperation="source-over"}clickUp(e,t){if(this.isMoving){var r=!1;k.currentMolecule.nodesOnTheScreen.forEach(i=>{i.inputs.forEach(s=>{s.wasConnectionMade(e,t)&&!r&&this.attachmentPoint1.parentMolecule!==s.parentMolecule&&(r=!0,this.attachmentPoint2=s,s.attach(this),this.propogate())})}),r||this.deleteSelf(),this.isMoving=!1}}mouseMove(e,t){this.isMoving==!0&&(this.endX=k.pixelsToWidth(e),this.endY=k.pixelsToHeight(t))}keyPress(e){this.selected&&["Delete","Backspace"].includes(e)&&this.deleteSelf()}deleteSelf(e=!1){this.attachmentPoint1.deleteConnector(this),this.attachmentPoint2!=null&&(this.attachmentPoint2.deleteConnector(this),e||this.attachmentPoint2.setDefault())}serialize(){if(this.attachmentPoint2!=null){var e={ap1Name:this.attachmentPoint1.name,ap2Name:this.attachmentPoint2.name,ap2Primary:this.attachmentPoint2.primary,ap1ID:this.attachmentPoint1.parentMolecule.uniqueID,ap2ID:this.attachmentPoint2.parentMolecule.uniqueID};return e}}waitOnComingInformation(){this.attachmentPoint2&&this.attachmentPoint2.waitOnComingInformation()}propogate(){this.attachmentPoint1.ready&&this.attachmentPoint2&&this.attachmentPoint2.setValue(this.attachmentPoint1.getValue())}walkBackForConstants(e){this.attachmentPoint1.parentMolecule.walkBackForConstants(e)}update(){this.startX=this.attachmentPoint1.x,this.startY=this.attachmentPoint1.y,this.attachmentPoint2&&(this.endX=this.attachmentPoint2.x,this.endY=this.attachmentPoint2.y),this.draw()}}class aa{static get DIST_FROM_PARENT(){return 3.5}static get TARGET_SCALEUP(){return 1.2}static get RADIUS(){return 1/150}constructor(e){this.isVisible=!1,this.isTargetted=!1,this.x,this.y,this.uniqueID=0,this.atomType="AttachmentPoint",this.valueType="number",this.type="output",this.value=10,this.defaultValue=10,this.ready=!0,this.connectors=[];for(var t in e)this[t]=e[t];this.unexpand()}draw(){if(!this.isVisible)return;let e=k.widthToPixels(this.x),t=k.heightToPixels(this.y),r=k.widthToPixels(aa.RADIUS);this.isTargetted&&(r=r*aa.TARGET_SCALEUP),k.c.font="10px Work Sans";var i=k.c.measureText(this.name).width,s=this.name==="geometry"?this.parentMolecule.selectedColor:"#C300FF",a=r*.5;k.c.globalCompositeOperation="source-over",k.c.beginPath(),k.c.fillStyle=s;var o=t-r,l=e;this.type=="input"&&(l=e-i-r-a);var u=l;this.type=="output"&&(u=l+r+a),k.c.arc(l,t,r,Math.PI/2,-1*Math.PI/2),k.c.rect(l,o,i+r+a,r*2),k.c.arc(l+i+r+a,t,r,-1*Math.PI/2,Math.PI/2),k.c.fill(),k.c.beginPath(),k.c.fillStyle=this.parentMolecule.defaultColor,k.c.fillText(this.name,u,t+2),k.c.fill(),k.c.closePath(),k.c.beginPath(),this.ready?k.c.fillStyle=this.parentMolecule.color:k.c.fillStyle="#6ba4ff",k.c.strokeStyle=this.parentMolecule.strokeColor,k.c.lineWidth=1,k.c.arc(e,t,r,0,Math.PI*2,!1),k.c.fill(),k.c.stroke(),k.c.closePath()}clickDown(e,t,r){return this.isCloseEnoughToTarget(e,t)&&!r?(this.type=="output"&&new QG({parentMolecule:this.parentMolecule,attachmentPoint1:this,atomType:"Connector",isMoving:!0}),this.type=="input"&&this.connectors.forEach(i=>{i.selected=!0}),!0):(this.type=="input"&&this.connectors.forEach(i=>{i.selected=!1}),!1)}clickUp(e,t){this.connectors.forEach(r=>{r.clickUp(e,t)})}mouseMove(e,t){let r=aa.DIST_FROM_PARENT*this.parentMolecule.radius,i=k.widthToPixels(this.parentMolecule.x),s=k.heightToPixels(this.parentMolecule.y);k.distBetweenPoints(i,e,s,t)<=k.widthToPixels(r)?(this.isVisible=!0,[this.x,this.y]=this.computePosition(r),[this.x,this.y]=k.constrainToCanvasBorders(this.x,this.y),this.isTargetted=this.isCloseEnoughToTarget(e,t)):this.unexpand(),this.connectors.forEach(a=>{a.mouseMove(e,t)})}unexpand(){this.isVisible=!1,this.isTargetted=!1,this.y=this.parentMolecule.y,this.type=="input"?this.x=this.parentMolecule.x-this.parentMolecule.radius:this.x=this.parentMolecule.x+this.parentMolecule.radius,[this.x,this.y]=k.constrainToCanvasBorders(this.x,this.y)}computePosition(e){const t=this.parentMolecule.inputs.filter(r=>r.type=="input");if(this.type=="output")return[this.parentMolecule.x+this.parentMolecule.radius+aa.RADIUS*.75,this.parentMolecule.y];if(this.type=="input"&&t.length==1)return[this.parentMolecule.x-this.parentMolecule.radius-aa.RADIUS*.75,this.parentMolecule.y];{const r=t.indexOf(this),i=Math.PI/(t.length+1),s=e-aa.RADIUS*aa.TARGET_SCALEUP,a=Math.PI/2+i;let o=s*Math.cos(r*i+a),l=-1*k.pixelsToHeight(k.widthToPixels(s)*Math.sin(r*i+a));return[this.parentMolecule.x+o,this.parentMolecule.y+l]}}isCloseEnoughToTarget(e,t){if(!this.isVisible)return!1;const r=k.distBetweenPoints(e,k.widthToPixels(this.x),t,k.heightToPixels(this.y)),i=k.widthToPixels(aa.RADIUS);if(this.type=="output")return r<=i*2;{let s=i*2;const a=this.parentMolecule.inputs.filter(c=>c.type=="input").length;let o=k.widthToPixels(aa.DIST_FROM_PARENT*this.parentMolecule.radius-aa.RADIUS*aa.TARGET_SCALEUP);const l=Math.PI/(a+1),u=o*Math.sin(l/2);return s=Math.max(i,Math.min(s,u)),r<s}}keyPress(e){this.connectors.forEach(t=>{t.keyPress(e)})}deleteSelf(e=!1){var t=[...this.connectors];t.forEach(r=>{r.deleteSelf(e)})}deleteConnector(e="all"){try{const t=this.connectors.indexOf(e);t!=-1?this.connectors.splice(t,1):this.connectors=[]}catch(t){console.warn("Error deleting connector: "),console.warn(t)}}wasConnectionMade(e,t){return this.isCloseEnoughToTarget(e,t)&&this.connectors.length==0}attach(e){this.connectors.push(e)}beginPropagation(){this.connectors.length==0&&this.setValue(this.value)}waitOnComingInformation(){this.type=="output"?this.connectors.forEach(e=>{e.waitOnComingInformation()}):(this.ready=!1,this.parentMolecule.waitOnComingInformation(this.name))}setDefault(){this.setValue(this.defaultValue)}updateDefault(e){var t=this.defaultValue;this.defaultValue=e,this.connectors.length==0&&this.value==t&&(this.value=this.defaultValue)}getValue(){return this.value}setValue(e){this.value=e,this.ready=!0,this.type=="output"?this.connectors.forEach(t=>{t.propogate()}):this.parentMolecule.updateValue(this.name)}update(){this.draw(),this.connectors.forEach(e=>{e.update()})}}var NEe={exports:{}};(function(n){(function(){function e(g){var w={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(g===!1)return JSON.parse(JSON.stringify(w));var x={};for(var M in w)w.hasOwnProperty(M)&&(x[M]=w[M].defaultValue);return x}function t(){var g=e(!0),w={};for(var x in g)g.hasOwnProperty(x)&&(w[x]=!0);return w}var r={},i={},s={},a=e(!0),o="vanilla",l={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:t()};r.helper={},r.extensions={},r.setOption=function(g,w){return a[g]=w,this},r.getOption=function(g){return a[g]},r.getOptions=function(){return a},r.resetOptions=function(){a=e(!0)},r.setFlavor=function(g){if(!l.hasOwnProperty(g))throw Error(g+" flavor was not found");r.resetOptions();var w=l[g];o=g;for(var x in w)w.hasOwnProperty(x)&&(a[x]=w[x])},r.getFlavor=function(){return o},r.getFlavorOptions=function(g){if(l.hasOwnProperty(g))return l[g]},r.getDefaultOptions=function(g){return e(g)},r.subParser=function(g,w){if(r.helper.isString(g))if(typeof w<"u")i[g]=w;else{if(i.hasOwnProperty(g))return i[g];throw Error("SubParser named "+g+" not registered!")}},r.extension=function(g,w){if(!r.helper.isString(g))throw Error("Extension 'name' must be a string");if(g=r.helper.stdExtName(g),r.helper.isUndefined(w)){if(!s.hasOwnProperty(g))throw Error("Extension named "+g+" is not registered!");return s[g]}else{typeof w=="function"&&(w=w()),r.helper.isArray(w)||(w=[w]);var x=u(w,g);if(x.valid)s[g]=w;else throw Error(x.error)}},r.getAllExtensions=function(){return s},r.removeExtension=function(g){delete s[g]},r.resetExtensions=function(){s={}};function u(g,w){var x=w?"Error in "+w+" extension->":"Error in unnamed extension",M={valid:!0,error:""};r.helper.isArray(g)||(g=[g]);for(var A=0;A<g.length;++A){var N=x+" sub-extension "+A+": ",C=g[A];if(typeof C!="object")return M.valid=!1,M.error=N+"must be an object, but "+typeof C+" given",M;if(!r.helper.isString(C.type))return M.valid=!1,M.error=N+'property "type" must be a string, but '+typeof C.type+" given",M;var T=C.type=C.type.toLowerCase();if(T==="language"&&(T=C.type="lang"),T==="html"&&(T=C.type="output"),T!=="lang"&&T!=="output"&&T!=="listener")return M.valid=!1,M.error=N+"type "+T+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',M;if(T==="listener"){if(r.helper.isUndefined(C.listeners))return M.valid=!1,M.error=N+'. Extensions of type "listener" must have a property called "listeners"',M}else if(r.helper.isUndefined(C.filter)&&r.helper.isUndefined(C.regex))return M.valid=!1,M.error=N+T+' extensions must define either a "regex" property or a "filter" method',M;if(C.listeners){if(typeof C.listeners!="object")return M.valid=!1,M.error=N+'"listeners" property must be an object but '+typeof C.listeners+" given",M;for(var R in C.listeners)if(C.listeners.hasOwnProperty(R)&&typeof C.listeners[R]!="function")return M.valid=!1,M.error=N+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+R+" must be a function but "+typeof C.listeners[R]+" given",M}if(C.filter){if(typeof C.filter!="function")return M.valid=!1,M.error=N+'"filter" must be a function, but '+typeof C.filter+" given",M}else if(C.regex){if(r.helper.isString(C.regex)&&(C.regex=new RegExp(C.regex,"g")),!(C.regex instanceof RegExp))return M.valid=!1,M.error=N+'"regex" property must either be a string or a RegExp object, but '+typeof C.regex+" given",M;if(r.helper.isUndefined(C.replace))return M.valid=!1,M.error=N+'"regex" extensions must implement a replace string or function',M}}return M}r.validateExtension=function(g){var w=u(g,null);return w.valid?!0:(console.warn(w.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(g){return typeof g=="string"||g instanceof String},r.helper.isFunction=function(g){var w={};return g&&w.toString.call(g)==="[object Function]"},r.helper.isArray=function(g){return Array.isArray(g)},r.helper.isUndefined=function(g){return typeof g>"u"},r.helper.forEach=function(g,w){if(r.helper.isUndefined(g))throw new Error("obj param is required");if(r.helper.isUndefined(w))throw new Error("callback param is required");if(!r.helper.isFunction(w))throw new Error("callback param must be a function/closure");if(typeof g.forEach=="function")g.forEach(w);else if(r.helper.isArray(g))for(var x=0;x<g.length;x++)w(g[x],x,g);else if(typeof g=="object")for(var M in g)g.hasOwnProperty(M)&&w(g[M],M,g);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(g){return g.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function c(g,w){var x=w.charCodeAt(0);return"¨E"+x+"E"}r.helper.escapeCharactersCallback=c,r.helper.escapeCharacters=function(g,w,x){var M="(["+w.replace(/([\[\]\\])/g,"\\$1")+"])";x&&(M="\\\\"+M);var A=new RegExp(M,"g");return g=g.replace(A,c),g},r.helper.unescapeHTMLEntities=function(g){return g.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var f=function(g,w,x,M){var A=M||"",N=A.indexOf("g")>-1,C=new RegExp(w+"|"+x,"g"+A.replace(/g/g,"")),T=new RegExp(w,A.replace(/g/g,"")),R=[],U,F,B,D,O;do for(U=0;B=C.exec(g);)if(T.test(B[0]))U++||(F=C.lastIndex,D=F-B[0].length);else if(U&&!--U){O=B.index+B[0].length;var $={left:{start:D,end:F},match:{start:F,end:B.index},right:{start:B.index,end:O},wholeMatch:{start:D,end:O}};if(R.push($),!N)return R}while(U&&(C.lastIndex=F));return R};r.helper.matchRecursiveRegExp=function(g,w,x,M){for(var A=f(g,w,x,M),N=[],C=0;C<A.length;++C)N.push([g.slice(A[C].wholeMatch.start,A[C].wholeMatch.end),g.slice(A[C].match.start,A[C].match.end),g.slice(A[C].left.start,A[C].left.end),g.slice(A[C].right.start,A[C].right.end)]);return N},r.helper.replaceRecursiveRegExp=function(g,w,x,M,A){if(!r.helper.isFunction(w)){var N=w;w=function(){return N}}var C=f(g,x,M,A),T=g,R=C.length;if(R>0){var U=[];C[0].wholeMatch.start!==0&&U.push(g.slice(0,C[0].wholeMatch.start));for(var F=0;F<R;++F)U.push(w(g.slice(C[F].wholeMatch.start,C[F].wholeMatch.end),g.slice(C[F].match.start,C[F].match.end),g.slice(C[F].left.start,C[F].left.end),g.slice(C[F].right.start,C[F].right.end))),F<R-1&&U.push(g.slice(C[F].wholeMatch.end,C[F+1].wholeMatch.start));C[R-1].wholeMatch.end<g.length&&U.push(g.slice(C[R-1].wholeMatch.end)),T=U.join("")}return T},r.helper.regexIndexOf=function(g,w,x){if(!r.helper.isString(g))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(w instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var M=g.substring(x||0).search(w);return M>=0?M+(x||0):M},r.helper.splitAtIndex=function(g,w){if(!r.helper.isString(g))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[g.substring(0,w),g.substring(w)]},r.helper.encodeEmailAddress=function(g){var w=[function(x){return"&#"+x.charCodeAt(0)+";"},function(x){return"&#x"+x.charCodeAt(0).toString(16)+";"},function(x){return x}];return g=g.replace(/./g,function(x){if(x==="@")x=w[Math.floor(Math.random()*2)](x);else{var M=Math.random();x=M>.9?w[2](x):M>.45?w[1](x):w[0](x)}return x}),g},r.helper.padEnd=function(w,x,M){return x=x>>0,M=String(M||" "),w.length>x?String(w):(x=x-w.length,x>M.length&&(M+=M.repeat(x/M.length)),String(w)+M.slice(0,x))},typeof console>"u"&&(console={warn:function(g){alert(g)},log:function(g){alert(g)},error:function(g){throw g}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(g){var w={},x=[],M=[],A={},N=o,C={parsed:{},raw:"",format:""};T();function T(){g=g||{};for(var D in a)a.hasOwnProperty(D)&&(w[D]=a[D]);if(typeof g=="object")for(var O in g)g.hasOwnProperty(O)&&(w[O]=g[O]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof g+" was passed instead.");w.extensions&&r.helper.forEach(w.extensions,R)}function R(D,O){if(O=O||null,r.helper.isString(D))if(D=r.helper.stdExtName(D),O=D,r.extensions[D]){console.warn("DEPRECATION WARNING: "+D+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),U(r.extensions[D],D);return}else if(!r.helper.isUndefined(s[D]))D=s[D];else throw Error('Extension "'+D+'" could not be loaded. It was either not found or is not a valid extension.');typeof D=="function"&&(D=D()),r.helper.isArray(D)||(D=[D]);var $=u(D,O);if(!$.valid)throw Error($.error);for(var L=0;L<D.length;++L){switch(D[L].type){case"lang":x.push(D[L]);break;case"output":M.push(D[L]);break}if(D[L].hasOwnProperty("listeners"))for(var X in D[L].listeners)D[L].listeners.hasOwnProperty(X)&&F(X,D[L].listeners[X])}}function U(D,O){typeof D=="function"&&(D=D(new r.Converter)),r.helper.isArray(D)||(D=[D]);var $=u(D,O);if(!$.valid)throw Error($.error);for(var L=0;L<D.length;++L)switch(D[L].type){case"lang":x.push(D[L]);break;case"output":M.push(D[L]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function F(D,O){if(!r.helper.isString(D))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof D+" given");if(typeof O!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof O+" given");A.hasOwnProperty(D)||(A[D]=[]),A[D].push(O)}function B(D){var O=D.match(/^\s*/)[0].length,$=new RegExp("^\\s{0,"+O+"}","gm");return D.replace($,"")}this._dispatch=function(O,$,L,X){if(A.hasOwnProperty(O))for(var Z=0;Z<A[O].length;++Z){var Q=A[O][Z](O,$,this,L,X);Q&&typeof Q<"u"&&($=Q)}return $},this.listen=function(D,O){return F(D,O),this},this.makeHtml=function(D){if(!D)return D;var O={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:x,outputModifiers:M,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return D=D.replace(/¨/g,"¨T"),D=D.replace(/\$/g,"¨D"),D=D.replace(/\r\n/g,`
`),D=D.replace(/\r/g,`
`),D=D.replace(/\u00A0/g,"&nbsp;"),w.smartIndentationFix&&(D=B(D)),D=`

`+D+`

`,D=r.subParser("detab")(D,w,O),D=D.replace(/^[ \t]+$/mg,""),r.helper.forEach(x,function($){D=r.subParser("runExtension")($,D,w,O)}),D=r.subParser("metadata")(D,w,O),D=r.subParser("hashPreCodeTags")(D,w,O),D=r.subParser("githubCodeBlocks")(D,w,O),D=r.subParser("hashHTMLBlocks")(D,w,O),D=r.subParser("hashCodeTags")(D,w,O),D=r.subParser("stripLinkDefinitions")(D,w,O),D=r.subParser("blockGamut")(D,w,O),D=r.subParser("unhashHTMLSpans")(D,w,O),D=r.subParser("unescapeSpecialChars")(D,w,O),D=D.replace(/¨D/g,"$$"),D=D.replace(/¨T/g,"¨"),D=r.subParser("completeHTMLDocument")(D,w,O),r.helper.forEach(M,function($){D=r.subParser("runExtension")($,D,w,O)}),C=O.metadata,D},this.makeMarkdown=this.makeMd=function(D,O){if(D=D.replace(/\r\n/g,`
`),D=D.replace(/\r/g,`
`),D=D.replace(/>[ \t]+</,">¨NBSP;<"),!O)if(window&&window.document)O=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var $=O.createElement("div");$.innerHTML=D;var L={preList:re($)};K($);for(var X=$.childNodes,Z="",Q=0;Q<X.length;Q++)Z+=r.subParser("makeMarkdown.node")(X[Q],L);function K(ce){for(var ue=0;ue<ce.childNodes.length;++ue){var me=ce.childNodes[ue];me.nodeType===3?!/\S/.test(me.nodeValue)&&!/^[ ]+$/.test(me.nodeValue)?(ce.removeChild(me),--ue):(me.nodeValue=me.nodeValue.split(`
`).join(" "),me.nodeValue=me.nodeValue.replace(/(\s)+/g,"$1")):me.nodeType===1&&K(me)}}function re(ce){for(var ue=ce.querySelectorAll("pre"),me=[],Ee=0;Ee<ue.length;++Ee)if(ue[Ee].childElementCount===1&&ue[Ee].firstChild.tagName.toLowerCase()==="code"){var xe=ue[Ee].firstChild.innerHTML.trim(),Te=ue[Ee].firstChild.getAttribute("data-language")||"";if(Te==="")for(var De=ue[Ee].firstChild.className.split(" "),ie=0;ie<De.length;++ie){var Ie=De[ie].match(/^language-(.+)$/);if(Ie!==null){Te=Ie[1];break}}xe=r.helper.unescapeHTMLEntities(xe),me.push(xe),ue[Ee].outerHTML='<precode language="'+Te+'" precodenum="'+Ee.toString()+'"></precode>'}else me.push(ue[Ee].innerHTML),ue[Ee].innerHTML="",ue[Ee].setAttribute("prenum",Ee.toString());return me}return Z},this.setOption=function(D,O){w[D]=O},this.getOption=function(D){return w[D]},this.getOptions=function(){return w},this.addExtension=function(D,O){O=O||null,R(D,O)},this.useExtension=function(D){R(D)},this.setFlavor=function(D){if(!l.hasOwnProperty(D))throw Error(D+" flavor was not found");var O=l[D];N=D;for(var $ in O)O.hasOwnProperty($)&&(w[$]=O[$])},this.getFlavor=function(){return N},this.removeExtension=function(D){r.helper.isArray(D)||(D=[D]);for(var O=0;O<D.length;++O){for(var $=D[O],L=0;L<x.length;++L)x[L]===$&&x.splice(L,1);for(var X=0;X<M.length;++X)M[X]===$&&M.splice(X,1)}},this.getAllExtensions=function(){return{language:x,output:M}},this.getMetadata=function(D){return D?C.raw:C.parsed},this.getMetadataFormat=function(){return C.format},this._setMetadataPair=function(D,O){C.parsed[D]=O},this._setMetadataFormat=function(D){C.format=D},this._setMetadataRaw=function(D){C.raw=D}},r.subParser("anchors",function(g,w,x){g=x.converter._dispatch("anchors.before",g,w,x);var M=function(A,N,C,T,R,U,F){if(r.helper.isUndefined(F)&&(F=""),C=C.toLowerCase(),A.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)T="";else if(!T)if(C||(C=N.toLowerCase().replace(/ ?\n/g," ")),T="#"+C,!r.helper.isUndefined(x.gUrls[C]))T=x.gUrls[C],r.helper.isUndefined(x.gTitles[C])||(F=x.gTitles[C]);else return A;T=T.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var B='<a href="'+T+'"';return F!==""&&F!==null&&(F=F.replace(/"/g,"&quot;"),F=F.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),B+=' title="'+F+'"'),w.openLinksInNewWindow&&!/^#/.test(T)&&(B+=' rel="noopener noreferrer" target="¨E95Eblank"'),B+=">"+N+"</a>",B};return g=g.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,M),g=g.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,M),g=g.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,M),g=g.replace(/\[([^\[\]]+)]()()()()()/g,M),w.ghMentions&&(g=g.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(A,N,C,T,R){if(C==="\\")return N+T;if(!r.helper.isString(w.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var U=w.ghMentionsLink.replace(/\{u}/g,R),F="";return w.openLinksInNewWindow&&(F=' rel="noopener noreferrer" target="¨E95Eblank"'),N+'<a href="'+U+'"'+F+">"+T+"</a>"})),g=x.converter._dispatch("anchors.after",g,w,x),g});var d=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,h=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,p=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,v=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,y=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,m=function(g){return function(w,x,M,A,N,C,T){M=M.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var R=M,U="",F="",B=x||"",D=T||"";return/^www\./i.test(M)&&(M=M.replace(/^www\./i,"http://www.")),g.excludeTrailingPunctuationFromURLs&&C&&(U=C),g.openLinksInNewWindow&&(F=' rel="noopener noreferrer" target="¨E95Eblank"'),B+'<a href="'+M+'"'+F+">"+R+"</a>"+U+D}},S=function(g,w){return function(x,M,A){var N="mailto:";return M=M||"",A=r.subParser("unescapeSpecialChars")(A,g,w),g.encodeEmails?(N=r.helper.encodeEmailAddress(N+A),A=r.helper.encodeEmailAddress(A)):N=N+A,M+'<a href="'+N+'">'+A+"</a>"}};r.subParser("autoLinks",function(g,w,x){return g=x.converter._dispatch("autoLinks.before",g,w,x),g=g.replace(p,m(w)),g=g.replace(y,S(w,x)),g=x.converter._dispatch("autoLinks.after",g,w,x),g}),r.subParser("simplifiedAutoLinks",function(g,w,x){return w.simplifiedAutoLink&&(g=x.converter._dispatch("simplifiedAutoLinks.before",g,w,x),w.excludeTrailingPunctuationFromURLs?g=g.replace(h,m(w)):g=g.replace(d,m(w)),g=g.replace(v,S(w,x)),g=x.converter._dispatch("simplifiedAutoLinks.after",g,w,x)),g}),r.subParser("blockGamut",function(g,w,x){return g=x.converter._dispatch("blockGamut.before",g,w,x),g=r.subParser("blockQuotes")(g,w,x),g=r.subParser("headers")(g,w,x),g=r.subParser("horizontalRule")(g,w,x),g=r.subParser("lists")(g,w,x),g=r.subParser("codeBlocks")(g,w,x),g=r.subParser("tables")(g,w,x),g=r.subParser("hashHTMLBlocks")(g,w,x),g=r.subParser("paragraphs")(g,w,x),g=x.converter._dispatch("blockGamut.after",g,w,x),g}),r.subParser("blockQuotes",function(g,w,x){g=x.converter._dispatch("blockQuotes.before",g,w,x),g=g+`

`;var M=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return w.splitAdjacentBlockquotes&&(M=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),g=g.replace(M,function(A){return A=A.replace(/^[ \t]*>[ \t]?/gm,""),A=A.replace(/¨0/g,""),A=A.replace(/^[ \t]+$/gm,""),A=r.subParser("githubCodeBlocks")(A,w,x),A=r.subParser("blockGamut")(A,w,x),A=A.replace(/(^|\n)/g,"$1  "),A=A.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(N,C){var T=C;return T=T.replace(/^  /mg,"¨0"),T=T.replace(/¨0/g,""),T}),r.subParser("hashBlock")(`<blockquote>
`+A+`
</blockquote>`,w,x)}),g=x.converter._dispatch("blockQuotes.after",g,w,x),g}),r.subParser("codeBlocks",function(g,w,x){g=x.converter._dispatch("codeBlocks.before",g,w,x),g+="¨0";var M=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g;return g=g.replace(M,function(A,N,C){var T=N,R=C,U=`
`;return T=r.subParser("outdent")(T,w,x),T=r.subParser("encodeCode")(T,w,x),T=r.subParser("detab")(T,w,x),T=T.replace(/^\n+/g,""),T=T.replace(/\n+$/g,""),w.omitExtraWLInCodeBlocks&&(U=""),T="<pre><code>"+T+U+"</code></pre>",r.subParser("hashBlock")(T,w,x)+R}),g=g.replace(/¨0/,""),g=x.converter._dispatch("codeBlocks.after",g,w,x),g}),r.subParser("codeSpans",function(g,w,x){return g=x.converter._dispatch("codeSpans.before",g,w,x),typeof g>"u"&&(g=""),g=g.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(M,A,N,C){var T=C;return T=T.replace(/^([ \t]*)/g,""),T=T.replace(/[ \t]*$/g,""),T=r.subParser("encodeCode")(T,w,x),T=A+"<code>"+T+"</code>",T=r.subParser("hashHTMLSpans")(T,w,x),T}),g=x.converter._dispatch("codeSpans.after",g,w,x),g}),r.subParser("completeHTMLDocument",function(g,w,x){if(!w.completeHTMLDocument)return g;g=x.converter._dispatch("completeHTMLDocument.before",g,w,x);var M="html",A=`<!DOCTYPE HTML>
`,N="",C=`<meta charset="utf-8">
`,T="",R="";typeof x.metadata.parsed.doctype<"u"&&(A="<!DOCTYPE "+x.metadata.parsed.doctype+`>
`,M=x.metadata.parsed.doctype.toString().toLowerCase(),(M==="html"||M==="html5")&&(C='<meta charset="utf-8">'));for(var U in x.metadata.parsed)if(x.metadata.parsed.hasOwnProperty(U))switch(U.toLowerCase()){case"doctype":break;case"title":N="<title>"+x.metadata.parsed.title+`</title>
`;break;case"charset":M==="html"||M==="html5"?C='<meta charset="'+x.metadata.parsed.charset+`">
`:C='<meta name="charset" content="'+x.metadata.parsed.charset+`">
`;break;case"language":case"lang":T=' lang="'+x.metadata.parsed[U]+'"',R+='<meta name="'+U+'" content="'+x.metadata.parsed[U]+`">
`;break;default:R+='<meta name="'+U+'" content="'+x.metadata.parsed[U]+`">
`}return g=A+"<html"+T+`>
<head>
`+N+C+R+`</head>
<body>
`+g.trim()+`
</body>
</html>`,g=x.converter._dispatch("completeHTMLDocument.after",g,w,x),g}),r.subParser("detab",function(g,w,x){return g=x.converter._dispatch("detab.before",g,w,x),g=g.replace(/\t(?=\t)/g,"    "),g=g.replace(/\t/g,"¨A¨B"),g=g.replace(/¨B(.+?)¨A/g,function(M,A){for(var N=A,C=4-N.length%4,T=0;T<C;T++)N+=" ";return N}),g=g.replace(/¨A/g,"    "),g=g.replace(/¨B/g,""),g=x.converter._dispatch("detab.after",g,w,x),g}),r.subParser("ellipsis",function(g,w,x){return w.ellipsis&&(g=x.converter._dispatch("ellipsis.before",g,w,x),g=g.replace(/\.\.\./g,"…"),g=x.converter._dispatch("ellipsis.after",g,w,x)),g}),r.subParser("emoji",function(g,w,x){if(!w.emoji)return g;g=x.converter._dispatch("emoji.before",g,w,x);var M=/:([\S]+?):/g;return g=g.replace(M,function(A,N){return r.helper.emojis.hasOwnProperty(N)?r.helper.emojis[N]:A}),g=x.converter._dispatch("emoji.after",g,w,x),g}),r.subParser("encodeAmpsAndAngles",function(g,w,x){return g=x.converter._dispatch("encodeAmpsAndAngles.before",g,w,x),g=g.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),g=g.replace(/<(?![a-z\/?$!])/gi,"&lt;"),g=g.replace(/</g,"&lt;"),g=g.replace(/>/g,"&gt;"),g=x.converter._dispatch("encodeAmpsAndAngles.after",g,w,x),g}),r.subParser("encodeBackslashEscapes",function(g,w,x){return g=x.converter._dispatch("encodeBackslashEscapes.before",g,w,x),g=g.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),g=g.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),g=x.converter._dispatch("encodeBackslashEscapes.after",g,w,x),g}),r.subParser("encodeCode",function(g,w,x){return g=x.converter._dispatch("encodeCode.before",g,w,x),g=g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),g=x.converter._dispatch("encodeCode.after",g,w,x),g}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(g,w,x){g=x.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",g,w,x);var M=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,A=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return g=g.replace(M,function(N){return N.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),g=g.replace(A,function(N){return N.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),g=x.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",g,w,x),g}),r.subParser("githubCodeBlocks",function(g,w,x){return w.ghCodeBlocks?(g=x.converter._dispatch("githubCodeBlocks.before",g,w,x),g+="¨0",g=g.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(M,A,N,C){var T=w.omitExtraWLInCodeBlocks?"":`
`;return C=r.subParser("encodeCode")(C,w,x),C=r.subParser("detab")(C,w,x),C=C.replace(/^\n+/g,""),C=C.replace(/\n+$/g,""),C="<pre><code"+(N?' class="'+N+" language-"+N+'"':"")+">"+C+T+"</code></pre>",C=r.subParser("hashBlock")(C,w,x),`

¨G`+(x.ghCodeBlocks.push({text:M,codeblock:C})-1)+`G

`}),g=g.replace(/¨0/,""),x.converter._dispatch("githubCodeBlocks.after",g,w,x)):g}),r.subParser("hashBlock",function(g,w,x){return g=x.converter._dispatch("hashBlock.before",g,w,x),g=g.replace(/(^\n+|\n+$)/g,""),g=`

¨K`+(x.gHtmlBlocks.push(g)-1)+`K

`,g=x.converter._dispatch("hashBlock.after",g,w,x),g}),r.subParser("hashCodeTags",function(g,w,x){g=x.converter._dispatch("hashCodeTags.before",g,w,x);var M=function(A,N,C,T){var R=C+r.subParser("encodeCode")(N,w,x)+T;return"¨C"+(x.gHtmlSpans.push(R)-1)+"C"};return g=r.helper.replaceRecursiveRegExp(g,M,"<code\\b[^>]*>","</code>","gim"),g=x.converter._dispatch("hashCodeTags.after",g,w,x),g}),r.subParser("hashElement",function(g,w,x){return function(M,A){var N=A;return N=N.replace(/\n\n/g,`
`),N=N.replace(/^\n/,""),N=N.replace(/\n+$/g,""),N=`

¨K`+(x.gHtmlBlocks.push(N)-1)+`K

`,N}}),r.subParser("hashHTMLBlocks",function(g,w,x){g=x.converter._dispatch("hashHTMLBlocks.before",g,w,x);var M=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],A=function(D,O,$,L){var X=D;return $.search(/\bmarkdown\b/)!==-1&&(X=$+x.converter.makeHtml(O)+L),`

¨K`+(x.gHtmlBlocks.push(X)-1)+`K

`};w.backslashEscapesHTMLTags&&(g=g.replace(/\\<(\/?[^>]+?)>/g,function(D,O){return"&lt;"+O+"&gt;"}));for(var N=0;N<M.length;++N)for(var C,T=new RegExp("^ {0,3}(<"+M[N]+"\\b[^>]*>)","im"),R="<"+M[N]+"\\b[^>]*>",U="</"+M[N]+">";(C=r.helper.regexIndexOf(g,T))!==-1;){var F=r.helper.splitAtIndex(g,C),B=r.helper.replaceRecursiveRegExp(F[1],A,R,U,"im");if(B===F[1])break;g=F[0].concat(B)}return g=g.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(g,w,x)),g=r.helper.replaceRecursiveRegExp(g,function(D){return`

¨K`+(x.gHtmlBlocks.push(D)-1)+`K

`},"^ {0,3}<!--","-->","gm"),g=g.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(g,w,x)),g=x.converter._dispatch("hashHTMLBlocks.after",g,w,x),g}),r.subParser("hashHTMLSpans",function(g,w,x){g=x.converter._dispatch("hashHTMLSpans.before",g,w,x);function M(A){return"¨C"+(x.gHtmlSpans.push(A)-1)+"C"}return g=g.replace(/<[^>]+?\/>/gi,function(A){return M(A)}),g=g.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(A){return M(A)}),g=g.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(A){return M(A)}),g=g.replace(/<[^>]+?>/gi,function(A){return M(A)}),g=x.converter._dispatch("hashHTMLSpans.after",g,w,x),g}),r.subParser("unhashHTMLSpans",function(g,w,x){g=x.converter._dispatch("unhashHTMLSpans.before",g,w,x);for(var M=0;M<x.gHtmlSpans.length;++M){for(var A=x.gHtmlSpans[M],N=0;/¨C(\d+)C/.test(A);){var C=RegExp.$1;if(A=A.replace("¨C"+C+"C",x.gHtmlSpans[C]),N===10){console.error("maximum nesting of 10 spans reached!!!");break}++N}g=g.replace("¨C"+M+"C",A)}return g=x.converter._dispatch("unhashHTMLSpans.after",g,w,x),g}),r.subParser("hashPreCodeTags",function(g,w,x){g=x.converter._dispatch("hashPreCodeTags.before",g,w,x);var M=function(A,N,C,T){var R=C+r.subParser("encodeCode")(N,w,x)+T;return`

¨G`+(x.ghCodeBlocks.push({text:A,codeblock:R})-1)+`G

`};return g=r.helper.replaceRecursiveRegExp(g,M,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),g=x.converter._dispatch("hashPreCodeTags.after",g,w,x),g}),r.subParser("headers",function(g,w,x){g=x.converter._dispatch("headers.before",g,w,x);var M=isNaN(parseInt(w.headerLevelStart))?1:parseInt(w.headerLevelStart),A=w.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,N=w.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;g=g.replace(A,function(R,U){var F=r.subParser("spanGamut")(U,w,x),B=w.noHeaderId?"":' id="'+T(U)+'"',D=M,O="<h"+D+B+">"+F+"</h"+D+">";return r.subParser("hashBlock")(O,w,x)}),g=g.replace(N,function(R,U){var F=r.subParser("spanGamut")(U,w,x),B=w.noHeaderId?"":' id="'+T(U)+'"',D=M+1,O="<h"+D+B+">"+F+"</h"+D+">";return r.subParser("hashBlock")(O,w,x)});var C=w.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;g=g.replace(C,function(R,U,F){var B=F;w.customizedHeaderId&&(B=F.replace(/\s?\{([^{]+?)}\s*$/,""));var D=r.subParser("spanGamut")(B,w,x),O=w.noHeaderId?"":' id="'+T(F)+'"',$=M-1+U.length,L="<h"+$+O+">"+D+"</h"+$+">";return r.subParser("hashBlock")(L,w,x)});function T(R){var U,F;if(w.customizedHeaderId){var B=R.match(/\{([^{]+?)}\s*$/);B&&B[1]&&(R=B[1])}return U=R,r.helper.isString(w.prefixHeaderId)?F=w.prefixHeaderId:w.prefixHeaderId===!0?F="section-":F="",w.rawPrefixHeaderId||(U=F+U),w.ghCompatibleHeaderId?U=U.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():w.rawHeaderId?U=U.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():U=U.replace(/[^\w]/g,"").toLowerCase(),w.rawPrefixHeaderId&&(U=F+U),x.hashLinkCounts[U]?U=U+"-"+x.hashLinkCounts[U]++:x.hashLinkCounts[U]=1,U}return g=x.converter._dispatch("headers.after",g,w,x),g}),r.subParser("horizontalRule",function(g,w,x){g=x.converter._dispatch("horizontalRule.before",g,w,x);var M=r.subParser("hashBlock")("<hr />",w,x);return g=g.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,M),g=g.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,M),g=g.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,M),g=x.converter._dispatch("horizontalRule.after",g,w,x),g}),r.subParser("images",function(g,w,x){g=x.converter._dispatch("images.before",g,w,x);var M=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,A=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,N=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,C=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,T=/!\[([^\[\]]+)]()()()()()/g;function R(F,B,D,O,$,L,X,Z){return O=O.replace(/\s/g,""),U(F,B,D,O,$,L,X,Z)}function U(F,B,D,O,$,L,X,Z){var Q=x.gUrls,K=x.gTitles,re=x.gDimensions;if(D=D.toLowerCase(),Z||(Z=""),F.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)O="";else if(O===""||O===null)if((D===""||D===null)&&(D=B.toLowerCase().replace(/ ?\n/g," ")),O="#"+D,!r.helper.isUndefined(Q[D]))O=Q[D],r.helper.isUndefined(K[D])||(Z=K[D]),r.helper.isUndefined(re[D])||($=re[D].width,L=re[D].height);else return F;B=B.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),O=O.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var ce='<img src="'+O+'" alt="'+B+'"';return Z&&r.helper.isString(Z)&&(Z=Z.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),ce+=' title="'+Z+'"'),$&&L&&($=$==="*"?"auto":$,L=L==="*"?"auto":L,ce+=' width="'+$+'"',ce+=' height="'+L+'"'),ce+=" />",ce}return g=g.replace(C,U),g=g.replace(N,R),g=g.replace(A,U),g=g.replace(M,U),g=g.replace(T,U),g=x.converter._dispatch("images.after",g,w,x),g}),r.subParser("italicsAndBold",function(g,w,x){g=x.converter._dispatch("italicsAndBold.before",g,w,x);function M(A,N,C){return N+A+C}return w.literalMidWordUnderscores?(g=g.replace(/\b___(\S[\s\S]*?)___\b/g,function(A,N){return M(N,"<strong><em>","</em></strong>")}),g=g.replace(/\b__(\S[\s\S]*?)__\b/g,function(A,N){return M(N,"<strong>","</strong>")}),g=g.replace(/\b_(\S[\s\S]*?)_\b/g,function(A,N){return M(N,"<em>","</em>")})):(g=g.replace(/___(\S[\s\S]*?)___/g,function(A,N){return/\S$/.test(N)?M(N,"<strong><em>","</em></strong>"):A}),g=g.replace(/__(\S[\s\S]*?)__/g,function(A,N){return/\S$/.test(N)?M(N,"<strong>","</strong>"):A}),g=g.replace(/_([^\s_][\s\S]*?)_/g,function(A,N){return/\S$/.test(N)?M(N,"<em>","</em>"):A})),w.literalMidWordAsterisks?(g=g.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(A,N,C){return M(C,N+"<strong><em>","</em></strong>")}),g=g.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(A,N,C){return M(C,N+"<strong>","</strong>")}),g=g.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(A,N,C){return M(C,N+"<em>","</em>")})):(g=g.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(A,N){return/\S$/.test(N)?M(N,"<strong><em>","</em></strong>"):A}),g=g.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(A,N){return/\S$/.test(N)?M(N,"<strong>","</strong>"):A}),g=g.replace(/\*([^\s*][\s\S]*?)\*/g,function(A,N){return/\S$/.test(N)?M(N,"<em>","</em>"):A})),g=x.converter._dispatch("italicsAndBold.after",g,w,x),g}),r.subParser("lists",function(g,w,x){function M(C,T){x.gListLevel++,C=C.replace(/\n{2,}$/,`
`),C+="¨0";var R=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,U=/\n[ \t]*\n(?!¨0)/.test(C);return w.disableForced4SpacesIndentedSublists&&(R=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),C=C.replace(R,function(F,B,D,O,$,L,X){X=X&&X.trim()!=="";var Z=r.subParser("outdent")($,w,x),Q="";return L&&w.tasklists&&(Q=' class="task-list-item" style="list-style-type: none;"',Z=Z.replace(/^[ \t]*\[(x|X| )?]/m,function(){var K='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return X&&(K+=" checked"),K+=">",K})),Z=Z.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(K){return"¨A"+K}),B||Z.search(/\n{2,}/)>-1?(Z=r.subParser("githubCodeBlocks")(Z,w,x),Z=r.subParser("blockGamut")(Z,w,x)):(Z=r.subParser("lists")(Z,w,x),Z=Z.replace(/\n$/,""),Z=r.subParser("hashHTMLBlocks")(Z,w,x),Z=Z.replace(/\n\n+/g,`

`),U?Z=r.subParser("paragraphs")(Z,w,x):Z=r.subParser("spanGamut")(Z,w,x)),Z=Z.replace("¨A",""),Z="<li"+Q+">"+Z+`</li>
`,Z}),C=C.replace(/¨0/g,""),x.gListLevel--,T&&(C=C.replace(/\s+$/,"")),C}function A(C,T){if(T==="ol"){var R=C.match(/^ *(\d+)\./);if(R&&R[1]!=="1")return' start="'+R[1]+'"'}return""}function N(C,T,R){var U=w.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,F=w.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,B=T==="ul"?U:F,D="";if(C.search(B)!==-1)(function $(L){var X=L.search(B),Z=A(C,T);X!==-1?(D+=`

<`+T+Z+`>
`+M(L.slice(0,X),!!R)+"</"+T+`>
`,T=T==="ul"?"ol":"ul",B=T==="ul"?U:F,$(L.slice(X))):D+=`

<`+T+Z+`>
`+M(L,!!R)+"</"+T+`>
`})(C);else{var O=A(C,T);D=`

<`+T+O+`>
`+M(C,!!R)+"</"+T+`>
`}return D}return g=x.converter._dispatch("lists.before",g,w,x),g+="¨0",x.gListLevel?g=g.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(C,T,R){var U=R.search(/[*+-]/g)>-1?"ul":"ol";return N(T,U,!0)}):g=g.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(C,T,R,U){var F=U.search(/[*+-]/g)>-1?"ul":"ol";return N(R,F,!1)}),g=g.replace(/¨0/,""),g=x.converter._dispatch("lists.after",g,w,x),g}),r.subParser("metadata",function(g,w,x){if(!w.metadata)return g;g=x.converter._dispatch("metadata.before",g,w,x);function M(A){x.metadata.raw=A,A=A.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),A=A.replace(/\n {4}/g," "),A.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(N,C,T){return x.metadata.parsed[C]=T,""})}return g=g.replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,function(A,N,C){return M(C),"¨M"}),g=g.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(A,N,C){return N&&(x.metadata.format=N),M(C),"¨M"}),g=g.replace(/¨M/g,""),g=x.converter._dispatch("metadata.after",g,w,x),g}),r.subParser("outdent",function(g,w,x){return g=x.converter._dispatch("outdent.before",g,w,x),g=g.replace(/^(\t|[ ]{1,4})/gm,"¨0"),g=g.replace(/¨0/g,""),g=x.converter._dispatch("outdent.after",g,w,x),g}),r.subParser("paragraphs",function(g,w,x){g=x.converter._dispatch("paragraphs.before",g,w,x),g=g.replace(/^\n+/g,""),g=g.replace(/\n+$/g,"");for(var M=g.split(/\n{2,}/g),A=[],N=M.length,C=0;C<N;C++){var T=M[C];T.search(/¨(K|G)(\d+)\1/g)>=0?A.push(T):T.search(/\S/)>=0&&(T=r.subParser("spanGamut")(T,w,x),T=T.replace(/^([ \t]*)/g,"<p>"),T+="</p>",A.push(T))}for(N=A.length,C=0;C<N;C++){for(var R="",U=A[C],F=!1;/¨(K|G)(\d+)\1/.test(U);){var B=RegExp.$1,D=RegExp.$2;B==="K"?R=x.gHtmlBlocks[D]:F?R=r.subParser("encodeCode")(x.ghCodeBlocks[D].text,w,x):R=x.ghCodeBlocks[D].codeblock,R=R.replace(/\$/g,"$$$$"),U=U.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,R),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(U)&&(F=!0)}A[C]=U}return g=A.join(`
`),g=g.replace(/^\n+/g,""),g=g.replace(/\n+$/g,""),x.converter._dispatch("paragraphs.after",g,w,x)}),r.subParser("runExtension",function(g,w,x,M){if(g.filter)w=g.filter(w,M.converter,x);else if(g.regex){var A=g.regex;A instanceof RegExp||(A=new RegExp(A,"g")),w=w.replace(A,g.replace)}return w}),r.subParser("spanGamut",function(g,w,x){return g=x.converter._dispatch("spanGamut.before",g,w,x),g=r.subParser("codeSpans")(g,w,x),g=r.subParser("escapeSpecialCharsWithinTagAttributes")(g,w,x),g=r.subParser("encodeBackslashEscapes")(g,w,x),g=r.subParser("images")(g,w,x),g=r.subParser("anchors")(g,w,x),g=r.subParser("autoLinks")(g,w,x),g=r.subParser("simplifiedAutoLinks")(g,w,x),g=r.subParser("emoji")(g,w,x),g=r.subParser("underline")(g,w,x),g=r.subParser("italicsAndBold")(g,w,x),g=r.subParser("strikethrough")(g,w,x),g=r.subParser("ellipsis")(g,w,x),g=r.subParser("hashHTMLSpans")(g,w,x),g=r.subParser("encodeAmpsAndAngles")(g,w,x),w.simpleLineBreaks?/\n\n¨K/.test(g)||(g=g.replace(/\n+/g,`<br />
`)):g=g.replace(/  +\n/g,`<br />
`),g=x.converter._dispatch("spanGamut.after",g,w,x),g}),r.subParser("strikethrough",function(g,w,x){function M(A){return w.simplifiedAutoLink&&(A=r.subParser("simplifiedAutoLinks")(A,w,x)),"<del>"+A+"</del>"}return w.strikethrough&&(g=x.converter._dispatch("strikethrough.before",g,w,x),g=g.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(A,N){return M(N)}),g=x.converter._dispatch("strikethrough.after",g,w,x)),g}),r.subParser("stripLinkDefinitions",function(g,w,x){var M=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,A=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm;g+="¨0";var N=function(C,T,R,U,F,B,D){return T=T.toLowerCase(),g.toLowerCase().split(T).length-1<2?C:(R.match(/^data:.+?\/.+?;base64,/)?x.gUrls[T]=R.replace(/\s/g,""):x.gUrls[T]=r.subParser("encodeAmpsAndAngles")(R,w,x),B?B+D:(D&&(x.gTitles[T]=D.replace(/"|'/g,"&quot;")),w.parseImgDimensions&&U&&F&&(x.gDimensions[T]={width:U,height:F}),""))};return g=g.replace(A,N),g=g.replace(M,N),g=g.replace(/¨0/,""),g}),r.subParser("tables",function(g,w,x){if(!w.tables)return g;var M=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,A=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm;function N(F){return/^:[ \t]*--*$/.test(F)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(F)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(F)?' style="text-align:center;"':""}function C(F,B){var D="";return F=F.trim(),(w.tablesHeaderId||w.tableHeaderId)&&(D=' id="'+F.replace(/ /g,"_").toLowerCase()+'"'),F=r.subParser("spanGamut")(F,w,x),"<th"+D+B+">"+F+`</th>
`}function T(F,B){var D=r.subParser("spanGamut")(F,w,x);return"<td"+B+">"+D+`</td>
`}function R(F,B){for(var D=`<table>
<thead>
<tr>
`,O=F.length,$=0;$<O;++$)D+=F[$];for(D+=`</tr>
</thead>
<tbody>
`,$=0;$<B.length;++$){D+=`<tr>
`;for(var L=0;L<O;++L)D+=B[$][L];D+=`</tr>
`}return D+=`</tbody>
</table>
`,D}function U(F){var B,D=F.split(`
`);for(B=0;B<D.length;++B)/^ {0,3}\|/.test(D[B])&&(D[B]=D[B].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(D[B])&&(D[B]=D[B].replace(/\|[ \t]*$/,"")),D[B]=r.subParser("codeSpans")(D[B],w,x);var O=D[0].split("|").map(function(ce){return ce.trim()}),$=D[1].split("|").map(function(ce){return ce.trim()}),L=[],X=[],Z=[],Q=[];for(D.shift(),D.shift(),B=0;B<D.length;++B)D[B].trim()!==""&&L.push(D[B].split("|").map(function(ce){return ce.trim()}));if(O.length<$.length)return F;for(B=0;B<$.length;++B)Z.push(N($[B]));for(B=0;B<O.length;++B)r.helper.isUndefined(Z[B])&&(Z[B]=""),X.push(C(O[B],Z[B]));for(B=0;B<L.length;++B){for(var K=[],re=0;re<X.length;++re)r.helper.isUndefined(L[B][re]),K.push(T(L[B][re],Z[re]));Q.push(K)}return R(X,Q)}return g=x.converter._dispatch("tables.before",g,w,x),g=g.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),g=g.replace(M,U),g=g.replace(A,U),g=x.converter._dispatch("tables.after",g,w,x),g}),r.subParser("underline",function(g,w,x){return w.underline&&(g=x.converter._dispatch("underline.before",g,w,x),w.literalMidWordUnderscores?(g=g.replace(/\b___(\S[\s\S]*?)___\b/g,function(M,A){return"<u>"+A+"</u>"}),g=g.replace(/\b__(\S[\s\S]*?)__\b/g,function(M,A){return"<u>"+A+"</u>"})):(g=g.replace(/___(\S[\s\S]*?)___/g,function(M,A){return/\S$/.test(A)?"<u>"+A+"</u>":M}),g=g.replace(/__(\S[\s\S]*?)__/g,function(M,A){return/\S$/.test(A)?"<u>"+A+"</u>":M})),g=g.replace(/(_)/g,r.helper.escapeCharactersCallback),g=x.converter._dispatch("underline.after",g,w,x)),g}),r.subParser("unescapeSpecialChars",function(g,w,x){return g=x.converter._dispatch("unescapeSpecialChars.before",g,w,x),g=g.replace(/¨E(\d+)E/g,function(M,A){var N=parseInt(A);return String.fromCharCode(N)}),g=x.converter._dispatch("unescapeSpecialChars.after",g,w,x),g}),r.subParser("makeMarkdown.blockquote",function(g,w){var x="";if(g.hasChildNodes())for(var M=g.childNodes,A=M.length,N=0;N<A;++N){var C=r.subParser("makeMarkdown.node")(M[N],w);C!==""&&(x+=C)}return x=x.trim(),x="> "+x.split(`
`).join(`
> `),x}),r.subParser("makeMarkdown.codeBlock",function(g,w){var x=g.getAttribute("language"),M=g.getAttribute("precodenum");return"```"+x+`
`+w.preList[M]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(g){return"`"+g.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(g,w){var x="";if(g.hasChildNodes()){x+="*";for(var M=g.childNodes,A=M.length,N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w);x+="*"}return x}),r.subParser("makeMarkdown.header",function(g,w,x){var M=new Array(x+1).join("#"),A="";if(g.hasChildNodes()){A=M+" ";for(var N=g.childNodes,C=N.length,T=0;T<C;++T)A+=r.subParser("makeMarkdown.node")(N[T],w)}return A}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(g){var w="";return g.hasAttribute("src")&&(w+="!["+g.getAttribute("alt")+"](",w+="<"+g.getAttribute("src")+">",g.hasAttribute("width")&&g.hasAttribute("height")&&(w+=" ="+g.getAttribute("width")+"x"+g.getAttribute("height")),g.hasAttribute("title")&&(w+=' "'+g.getAttribute("title")+'"'),w+=")"),w}),r.subParser("makeMarkdown.links",function(g,w){var x="";if(g.hasChildNodes()&&g.hasAttribute("href")){var M=g.childNodes,A=M.length;x="[";for(var N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w);x+="](",x+="<"+g.getAttribute("href")+">",g.hasAttribute("title")&&(x+=' "'+g.getAttribute("title")+'"'),x+=")"}return x}),r.subParser("makeMarkdown.list",function(g,w,x){var M="";if(!g.hasChildNodes())return"";for(var A=g.childNodes,N=A.length,C=g.getAttribute("start")||1,T=0;T<N;++T)if(!(typeof A[T].tagName>"u"||A[T].tagName.toLowerCase()!=="li")){var R="";x==="ol"?R=C.toString()+". ":R="- ",M+=R+r.subParser("makeMarkdown.listItem")(A[T],w),++C}return M+=`
<!-- -->
`,M.trim()}),r.subParser("makeMarkdown.listItem",function(g,w){for(var x="",M=g.childNodes,A=M.length,N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w);return/\n$/.test(x)?x=x.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):x+=`
`,x}),r.subParser("makeMarkdown.node",function(g,w,x){x=x||!1;var M="";if(g.nodeType===3)return r.subParser("makeMarkdown.txt")(g,w);if(g.nodeType===8)return"<!--"+g.data+`-->

`;if(g.nodeType!==1)return"";var A=g.tagName.toLowerCase();switch(A){case"h1":x||(M=r.subParser("makeMarkdown.header")(g,w,1)+`

`);break;case"h2":x||(M=r.subParser("makeMarkdown.header")(g,w,2)+`

`);break;case"h3":x||(M=r.subParser("makeMarkdown.header")(g,w,3)+`

`);break;case"h4":x||(M=r.subParser("makeMarkdown.header")(g,w,4)+`

`);break;case"h5":x||(M=r.subParser("makeMarkdown.header")(g,w,5)+`

`);break;case"h6":x||(M=r.subParser("makeMarkdown.header")(g,w,6)+`

`);break;case"p":x||(M=r.subParser("makeMarkdown.paragraph")(g,w)+`

`);break;case"blockquote":x||(M=r.subParser("makeMarkdown.blockquote")(g,w)+`

`);break;case"hr":x||(M=r.subParser("makeMarkdown.hr")(g,w)+`

`);break;case"ol":x||(M=r.subParser("makeMarkdown.list")(g,w,"ol")+`

`);break;case"ul":x||(M=r.subParser("makeMarkdown.list")(g,w,"ul")+`

`);break;case"precode":x||(M=r.subParser("makeMarkdown.codeBlock")(g,w)+`

`);break;case"pre":x||(M=r.subParser("makeMarkdown.pre")(g,w)+`

`);break;case"table":x||(M=r.subParser("makeMarkdown.table")(g,w)+`

`);break;case"code":M=r.subParser("makeMarkdown.codeSpan")(g,w);break;case"em":case"i":M=r.subParser("makeMarkdown.emphasis")(g,w);break;case"strong":case"b":M=r.subParser("makeMarkdown.strong")(g,w);break;case"del":M=r.subParser("makeMarkdown.strikethrough")(g,w);break;case"a":M=r.subParser("makeMarkdown.links")(g,w);break;case"img":M=r.subParser("makeMarkdown.image")(g,w);break;default:M=g.outerHTML+`

`}return M}),r.subParser("makeMarkdown.paragraph",function(g,w){var x="";if(g.hasChildNodes())for(var M=g.childNodes,A=M.length,N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w);return x=x.trim(),x}),r.subParser("makeMarkdown.pre",function(g,w){var x=g.getAttribute("prenum");return"<pre>"+w.preList[x]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(g,w){var x="";if(g.hasChildNodes()){x+="~~";for(var M=g.childNodes,A=M.length,N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w);x+="~~"}return x}),r.subParser("makeMarkdown.strong",function(g,w){var x="";if(g.hasChildNodes()){x+="**";for(var M=g.childNodes,A=M.length,N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w);x+="**"}return x}),r.subParser("makeMarkdown.table",function(g,w){var x="",M=[[],[]],A=g.querySelectorAll("thead>tr>th"),N=g.querySelectorAll("tbody>tr"),C,T;for(C=0;C<A.length;++C){var R=r.subParser("makeMarkdown.tableCell")(A[C],w),U="---";if(A[C].hasAttribute("style")){var F=A[C].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(F){case"text-align:left;":U=":---";break;case"text-align:right;":U="---:";break;case"text-align:center;":U=":---:";break}}M[0][C]=R.trim(),M[1][C]=U}for(C=0;C<N.length;++C){var B=M.push([])-1,D=N[C].getElementsByTagName("td");for(T=0;T<A.length;++T){var O=" ";typeof D[T]<"u"&&(O=r.subParser("makeMarkdown.tableCell")(D[T],w)),M[B].push(O)}}var $=3;for(C=0;C<M.length;++C)for(T=0;T<M[C].length;++T){var L=M[C][T].length;L>$&&($=L)}for(C=0;C<M.length;++C){for(T=0;T<M[C].length;++T)C===1?M[C][T].slice(-1)===":"?M[C][T]=r.helper.padEnd(M[C][T].slice(-1),$-1,"-")+":":M[C][T]=r.helper.padEnd(M[C][T],$,"-"):M[C][T]=r.helper.padEnd(M[C][T],$);x+="| "+M[C].join(" | ")+` |
`}return x.trim()}),r.subParser("makeMarkdown.tableCell",function(g,w){var x="";if(!g.hasChildNodes())return"";for(var M=g.childNodes,A=M.length,N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w,!0);return x.trim()}),r.subParser("makeMarkdown.txt",function(g){var w=g.nodeValue;return w=w.replace(/ +/g," "),w=w.replace(/¨NBSP;/g," "),w=r.helper.unescapeHTMLEntities(w),w=w.replace(/([*_~|`])/g,"\\$1"),w=w.replace(/^(\s*)>/g,"\\$1>"),w=w.replace(/^#/gm,"\\#"),w=w.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),w=w.replace(/^( {0,3}\d+)\./gm,"$1\\."),w=w.replace(/^( {0,3})([+-])/gm,"$1\\$2"),w=w.replace(/]([\s]*)\(/g,"\\]$1\\("),w=w.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),w});var b=this;n.exports?n.exports=r:b.showdown=r}).call(fa)})(NEe);class Wn{constructor(e){this.inputs=[],this.output=null,this.uniqueID=k.generateUniqueID(),this.description="none",this.x=0,this.y=0,this.radius=1/75,this.defaultColor="#F3EFEF",this.selectedColor="#484848",this.strokeColor="#484848",this.selected=!1,this.color="#F3EFEF",this.name="name0",this.parentMolecule=null,this.value=null,this.isMoving=!1,this.showHover=!1,this.x=0,this.y=0,this.alertMessage="",this.processing=!1;for(var t in e)this[t]=e[t]}setValues(e){for(var t in e)this[t]=e[t];typeof this.ioValues<"u"&&this.ioValues.forEach(r=>{this.inputs.forEach(i=>{r.name==i.name&&i.type=="input"&&(i.value=r.ioValue)})})}draw(e){let t=k.widthToPixels(this.x),r=k.heightToPixels(this.y),i=k.widthToPixels(this.radius);if(this.inputs.forEach(s=>{s.draw()}),k.c.beginPath(),k.c.font="10px Work Sans",this.processing?k.c.fillStyle="blue":this.selected?(k.c.fillStyle=this.selectedColor,k.c.strokeStyle=this.selectedColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(k.c.fillStyle=this.defaultColor,k.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),k.c.beginPath(),e=="rect"?k.c.rect(t-i,r-this.height/2,2*i,this.height):k.c.arc(t,r,i,0,Math.PI*2,!1),k.c.textAlign="start",k.c.fill(),k.c.strokeStyle=this.strokeColor,k.c.fillStyle="white",k.c.stroke(),k.c.closePath(),k.c.beginPath(),k.c.textAlign="start",k.c.fillText(this.name,t+i,r-i),k.c.fill(),k.c.strokeStyle=this.strokeColor,k.c.lineWidth=1,k.c.stroke(),k.c.closePath(),this.showHover&&this.alertMessage.length>0){this.color="red",k.c.beginPath();const s=10;k.c.fillStyle="red",k.c.rect(t+i-s/2,r-i+s/2,k.c.measureText(this.alertMessage.toUpperCase()).width+s,-(parseInt(k.c.font)+s)),k.c.fill(),k.c.strokeStyle="black",k.c.lineWidth=1,k.c.stroke(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="black",k.c.fillText(this.alertMessage.toUpperCase(),t+i,r-i),k.c.closePath()}}addIO(e,t,r,i,s,a,o=!1){if(r.inputs.find(c=>c.name===t&&c.type===e)==null){var l;e=="input"?l=-1*r.scaledRadius:l=r.scaledRadius;var u=new aa({parentMolecule:r,defaultOffsetX:l,defaultOffsetY:0,type:e,valueType:i,name:t,primary:o,value:s,defaultValue:s,uniqueID:k.generateUniqueID(),atomType:"AttachmentPoint",ready:!0});e=="input"?r.inputs.push(u):r.output=u}}removeIO(e,t,r,i=!1){r.inputs.forEach(s=>{s.name==t&&s.type==e&&(r.inputs.splice(r.inputs.indexOf(s),1),s.deleteSelf(i))})}alertingErrorHandler(){return e=>{this.processing=!1,console.log(e),this.setAlert(e.message)}}setAlert(e){this.color="orange",this.alertMessage=String(e)}clearAlert(){this.color=this.defaultColor,this.alertMessage=""}selectBox(e,t,r,i){let s=Math.min(e,r),a=Math.max(e,r),o=Math.min(t,i),l=Math.max(t,i),u=k.widthToPixels(this.x),c=k.heightToPixels(this.y);u>=s&&u<=a&&c>=o&&c<=l&&(this.selected=!0)}clickDown(e,t,r){let i=k.widthToPixels(this.x),s=k.heightToPixels(this.y),a=k.widthToPixels(this.radius),o;return!r&&k.distBetweenPoints(e,i,t,s)<a?(this.isMoving=!0,this.selected=!0,o=this,this.sendToRender()):k.ctrlDown||(this.selected=!1),this.inputs.forEach(l=>{l.clickDown(e,t,r)==!0&&(r=!0)}),this.output&&!o&&this.output.clickDown(e,t,r)==!0&&(r=!0),o}doubleClick(e,t){let r=k.widthToPixels(this.x),i=k.heightToPixels(this.y);var s=!1,a=k.distBetweenPoints(e,r,t,i);return a<r&&(s=!0),s}clickUp(e,t){this.isMoving=!1,this.inputs.forEach(r=>{r.clickUp(e,t)}),this.output&&this.output.clickUp(e,t)}mouseMove(e,t){let r=k.widthToPixels(this.x),i=k.heightToPixels(this.y),s=k.widthToPixels(this.radius);this.isMoving==!0&&(this.x=k.pixelsToWidth(e),this.y=k.pixelsToHeight(t)),this.inputs.forEach(o=>{o.mouseMove(e,t)}),this.output&&this.output.mouseMove(e,t);var a=k.distBetweenPoints(e,r,t,i);a<s?this.showHover=!0:this.showHover=!1}keyPress(e){this.inputs.forEach(t=>{t.keyPress(e)})}deleteNode(e=!0,t=!0,r=!1){this.inputs.forEach(s=>{s.ready=!1}),[...this.inputs].forEach(s=>{s.deleteSelf(r)}),this.output&&this.output.deleteSelf(r),k.cad.deleteFromLibrary(this.uniqueID).then(()=>{}),this.parent.nodesOnTheScreen.splice(this.parent.nodesOnTheScreen.indexOf(this),1)}update(){this.inputs.forEach(e=>{e.update()}),this.output&&this.output.update(),this.draw()}serialize(e={x:0,y:0}){var t=[];this.inputs.forEach(i=>{if(typeof i.getValue()=="number"||typeof i.getValue()=="string"){var s={name:i.name,ioValue:i.getValue()};t.push(s)}});var r={atomType:this.atomType,name:this.name,x:this.x+e.x,y:this.y-e.y,uniqueID:this.uniqueID,ioValues:t};return r}requestReadme(){return[]}decreaseToProcessCountByOne(){k.topLevelMolecule.census()}updateValue(){this.waitOnComingInformation()}walkBackForConstants(e){this.inputs.forEach(t=>{t.connectors.forEach(r=>{r.walkBackForConstants(e)})})}waitOnComingInformation(){this.output&&this.output.waitOnComingInformation(),this.processing&&console.log("information sent to something processing")}basicThreadValueProcessing(){this.decreaseToProcessCountByOne(),this.clearAlert(),this.output&&(this.output.setValue(this.uniqueID),this.output.ready=!0),this.processing=!1,this.selected&&this.sendToRender()}beginPropagation(){}census(){var e=0;return this.inputs.forEach(t=>{t.ready!=!0&&(e=1)}),[1,e]}sendToRender(){try{k.writeToDisplay(this.uniqueID)}catch(e){this.setAlert(e)}}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,step:.25,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),e}findIOValue(e){e=e.split("~").join("");var t=null;return this.inputs.forEach(r=>{r.name==e&&r.type=="input"&&(t=r.getValue())}),t}}const s5=function(n){var e=0;return n.inputs.forEach(t=>{t.type=="input"&&t.connectors.length==0&&(e=e+1)}),e},PEe=function(n){var e;for(e=0;e<n.inputs.length-1;e++){var t=n.inputs[e];if(t.type=="input"&&t.connectors.length==0){n.removeIO("input",t.name,n);return}}},a5=function(n){var e=0;return n.inputs.forEach(t=>{e=Math.max(e,parseInt(t.name.match(/\d+$/)[0]))}),e},e0=n=>{s5(n)==0&&(a5(n),n.addIO("input","3D shape "+(a5(n)+1),n,"geometry","",!0)),s5(n)>=2&&PEe(n)};class REe extends Wn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Join",this.atomType="Join",this.ioValues=[],this.removeCutawayGeometry=!0,this.description="Pick between assembly and fusion to join input geometries. Assembly takes multiple shapes together into one, shapes higher in the inputs list will cut into shapes lower on the input list where they overlap. Fusion takes all shapes or sketches and fuses them permanently into a single shape",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.unionType,this.unionIndex=0,this.setValues([])}beginPropagation(){super.beginPropagation()}draw(){super.draw();const e=k.widthToPixels(this.x),t=k.heightToPixels(this.y),r=k.widthToPixels(this.radius);k.c.beginPath(),k.c.fillStyle="#949294",k.c.moveTo(e-r/2,t+r/2),k.c.lineTo(e+r/2,t+r/2),k.c.lineTo(e+r/2,t),k.c.lineTo(e-r/2,t),k.c.lineTo(e-r/2,t+r/2),k.c.stroke(),k.c.closePath(),k.c.beginPath(),k.c.lineTo(e+r/4,t-r/2),k.c.lineTo(e-r/4,t-r/2),k.c.lineTo(e-r/4,t),k.c.lineTo(e+r/2,t),k.c.lineTo(e+r/4,t-r/2),k.c.lineWidth=1,k.c.lineJoin="round",k.c.stroke(),k.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&t.type=="input"&&e.push(t.getValue())}),this.unionType==="Fusion"?k.cad.fusion(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()):this.unionType==="Assembly"&&k.cad.assembly(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),e0(this)}}createLevaInputs(){let e={};const t=["Assembly","Fusion"];return e[this.uniqueID+"union_ops"]={value:this.unionType||t[this.unionIndex],options:t,label:"Union Type",onChange:r=>{this.unionIndex=t.indexOf(r),this.unionType!==t[this.unionIndex]&&(this.unionType=t[this.unionIndex],this.name=this.unionType,this.updateValue())}},e}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.connectors.length>0){var s={name:i.name,ioValue:i.getValue()};r.push(s)}}),t.ioValues=r,t.unionType=this.unionType,t}}class OEe extends Wn{constructor(e){super(e),this.name="Circle",this.atomType="Circle",this.description="Creates a new circle.",this.addIO("input","diameter",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.arc(k.widthToPixels(this.x),k.heightToPixels(this.y),k.widthToPixels(this.radius/2),0,Math.PI*2,!1),k.c.stroke(),k.c.closePath()}updateValue(){super.updateValue();var e=this.findIOValue("diameter");k.cad.circle(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}let IEe=class extends Wn{constructor(e){super(e),this.name="Color",this.atomType="Color",this.description="Changes the color of the shape.",this.selectedColorIndex=0,this.colorOptions={Red:"#FF9065",Orange:"#FFB458",Yellow:"#FFD600",Olive:"#C7DF66",Teal:"#71D1C2","Light Blue":"#75DBF2",Green:"#A3CE5B","Lavender ":"#CCABED",Brown:"#CFAB7C",Pink:"#FFB09D",Sand:"#E2C66C",Clay:"#C4D3AC",Blue:"#91C8D5","Light Green":"#96E1BB",Purple:"#ACAFDD","Light Purple":"#DFB1E8",Tan:"#F5D3B6","Mauve ":"#DBADA9",Grey:"#BABABA",Black:"#3C3C3C",White:"#FFFCF7","Keep Out":"#E0E0E0"},this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.setValues(e)}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#0000FF",k.c.arc(k.widthToPixels(this.x-this.radius/4),k.heightToPixels(this.y+this.radius/2),k.widthToPixels(this.radius/3),0,Math.PI*2,!1),k.c.fill(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="#FF0000",k.c.arc(k.widthToPixels(this.x+this.radius/4),k.heightToPixels(this.y+this.radius/2),k.widthToPixels(this.radius/3),0,Math.PI*2,!1),k.c.fill(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="#FFFF00",k.c.arc(k.widthToPixels(this.x),k.heightToPixels(this.y-this.radius),k.widthToPixels(this.radius/3),0,Math.PI*2,!1),k.c.fill(),k.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=Object.values(this.colorOptions)[this.selectedColorIndex];k.cad.color(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}changeColor(e){this.selectedColorIndex=e,this.updateValue()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;e[this.uniqueID+"color"]={value:Object.keys(this.colorOptions)[this.selectedColorIndex],label:"Color",options:Object.keys(this.colorOptions),onChange:i=>{this.changeColor(Object.keys(this.colorOptions).indexOf(i)),this.sendToRender()}},t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),e}updateSidebar(){const e=super.updateSidebar(),t=document.createElement("div");e.appendChild(t),this.createDropDown(t,this,Object.keys(this.colorOptions),this.selectedColorIndex,"Color",r=>{this.changeColor(r)})}serialize(){var e=super.serialize();return e.selectedColorIndex=this.selectedColorIndex,e}};class kEe extends Wn{constructor(e){super(e),this.atomType="Cut Layout",this.type="cutLayout",this.name="Cut Layout",this.description="Extracts all parts tagged for cutting and lays them out on a sheet to cut.",this.addIO("input","geometry",this,"geometry",null),this.addIO("input","Material Thickness",this,"number",k.topLevelMolecule.unitsIndex=="MM"?19:.75),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}draw(){super.draw();const e=k.widthToPixels(this.x),t=k.heightToPixels(this.y),r=k.widthToPixels(this.radius);k.c.beginPath(),k.c.fillStyle="#949294",k.c.moveTo(e-r/2,t+r/2),k.c.lineTo(e+r/2,t+r/2),k.c.lineTo(e+r/2,t),k.c.lineTo(e-r/2,t),k.c.lineTo(e-r/2,t+r/2),k.c.setLineDash([3,3]),k.c.stroke(),k.c.closePath(),k.c.beginPath(),k.c.lineTo(e+r/4,t-r/1.7),k.c.lineTo(e-r/4,t-r/2),k.c.lineTo(e-r/4,t),k.c.lineTo(e+r/2,t),k.c.lineTo(e+r/4,t-r/1.7),k.c.lineWidth=1,k.c.lineJoin="round",k.c.stroke(),k.c.setLineDash([]),k.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(i=>i.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("Material Thickness"),r="cutLayout";if(!e){this.setAlert('"geometry" input is missing');return}k.cad.layout(this.uniqueID,e,r,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class LEe extends Wn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Shrink Wrap",this.atomType="Shrink Wrap",this.ioValues=[],this.description="Joins two or more drawings into a single sketch by filling in the space between them. Also called 'hull'",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.arc(k.widthToPixels(this.x+this.radius/4),k.heightToPixels(this.y),k.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),k.c.fill(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.arc(k.widthToPixels(this.x-this.radius/4),k.heightToPixels(this.y),k.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),k.c.fill(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.rect(k.widthToPixels(this.x-this.radius/4),k.heightToPixels(this.y-this.radius),k.widthToPixels(this.radius/2),k.widthToPixels(this.radius/2)),k.c.fill(),k.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&e.push(t.getValue())}),k.cad.shrinkWrapSketches(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),e0(this)}}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.type=="input"){var s={name:i.name,ioValue:i.getValue()};r.push(s)}}),r.forEach(i=>{t.ioValues.push(i)}),t}}class FEe extends Wn{constructor(e){super(e),this.addIO("input","x length",this,"number",10),this.addIO("input","y length",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.name="Rectangle",this.atomType="Rectangle",this.description="Creates a new rectangle.",this.setValues(e)}beginPropagation(){this.inputs.forEach(e=>{e.beginPropagation()})}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.rect(k.widthToPixels(this.x-this.radius/2),k.heightToPixels(this.y-this.radius*2),k.widthToPixels(this.radius),k.widthToPixels(this.radius)),k.c.stroke(),k.c.closePath()}updateValue(){super.updateValue();var e=this.findIOValue("x length"),t=this.findIOValue("y length");k.cad.rectangle(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}class BEe extends Wn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Loft",this.atomType="Loft",this.ioValues=[],this.description="Joins two or more shapes into a single solid by filling in the space between them. Also called 'hull'",this.closedSelection=0,this.addedIO=!1,this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.arc(k.widthToPixels(this.x+this.radius/4),k.heightToPixels(this.y),k.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),k.c.fill(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.arc(k.widthToPixels(this.x-this.radius/4),k.heightToPixels(this.y),k.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),k.c.fill(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.rect(k.widthToPixels(this.x-this.radius/4),k.heightToPixels(this.y-this.radius),k.widthToPixels(this.radius/2),k.widthToPixels(this.radius/2)),k.c.fill(),k.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&e.push(t.getValue())}),k.cad.loftShapes(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),e0(this)}}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.type=="input"){var s={name:i.name,ioValue:i.getValue()};r.push(s)}}),r.forEach(i=>{t.ioValues.push(i)}),t.closedSelection=this.closedSelection,t}}class zEe extends Wn{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","xDist",this,"number",0),this.addIO("input","yDist",this,"number",0),this.addIO("input","zDist",this,"number",0),this.addIO("output","geometry",this,"geometry",""),this.name="Move",this.atomType="Move",this.description="Moves a shape laterally in X, Y, Z.",this.setValues(e)}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.arc(k.widthToPixels(this.x+this.radius/5),k.heightToPixels(this.y),k.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),k.c.stroke(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.arc(k.widthToPixels(this.x-this.radius/5),k.heightToPixels(this.y),k.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),k.c.fill(),k.c.stroke(),k.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(s=>s.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("xDist"),r=this.findIOValue("yDist"),i=this.findIOValue("zDist");k.cad.move(this.uniqueID,e,t,r,i).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}function UEe(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function ej(...n){return e=>n.forEach(t=>UEe(t,e))}function Mm(...n){return z.useCallback(ej(...n),n)}const tj=z.forwardRef((n,e)=>{const{children:t,...r}=n,i=z.Children.toArray(t),s=i.find($Ee);if(s){const a=s.props.children,o=i.map(l=>l===s?z.Children.count(a)>1?z.Children.only(null):z.isValidElement(a)?a.props.children:null:l);return z.createElement(WT,ot({},r,{ref:e}),z.isValidElement(a)?z.cloneElement(a,void 0,o):null)}return z.createElement(WT,ot({},r,{ref:e}),t)});tj.displayName="Slot";const WT=z.forwardRef((n,e)=>{const{children:t,...r}=n;return z.isValidElement(t)?z.cloneElement(t,{...VEe(r,t.props),ref:e?ej(e,t.ref):t.ref}):z.Children.count(t)>1?z.Children.only(null):null});WT.displayName="SlotClone";const nj=({children:n})=>z.createElement(z.Fragment,null,n);function $Ee(n){return z.isValidElement(n)&&n.type===nj}function VEe(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...o)=>{s(...o),i(...o)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const HEe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ud=HEe.reduce((n,e)=>{const t=z.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?tj:e;return z.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),z.createElement(o,ot({},a,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function WEe(n,e){n&&mm.flushSync(()=>n.dispatchEvent(e))}const GEe=z.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?sH.createPortal(z.createElement(Ud.div,ot({},i,{ref:e})),r):null}),jEe=GEe;var o5=Object.prototype.hasOwnProperty;function t0(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&t0(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(o5.call(n,t)&&++r&&!o5.call(e,t)||!(t in e)||!t0(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function X_(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}var Y_=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};Y_.prototype._test=function(e){var t=this.fn;try{Ap(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Ap(this.modifiers.slice(),t,this)(e)}catch{return!1}};Y_.prototype._check=function(e){try{Ap(this.modifiers.slice(),this.fn,this)(e)}catch{if(Ap(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!Ap(this.modifiers.slice(),this.fn,this)(e))throw null};Y_.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){ij(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function rj(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Ap(n,e,t){if(n.length){var r=n.shift(),i=Ap(n,e,t);return r.perform(i,t)}else return rj(e)}function ij(n,e,t){if(n.length){var r=n.shift(),i=ij(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(rj(e,"async")(s))}}var qEe=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},kP=function(n){function e(t,r,i,s){for(var a=[],o=arguments.length-4;o-- >0;)a[o]=arguments[o+4];n.call(this,a),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),_l=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};_l.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new Y_(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};_l.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new qEe(t,e.simple,e.async)),this};_l.prototype._clone=function(){return new _l(this.chain.slice(),this.nextRuleModifiers.slice())};_l.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};_l.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new kP(r,e,i))}}),t};_l.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new kP(t,e,r)}})};_l.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){sj(e,t.chain.slice(),r,i)})};function sj(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){sj(n,e,t,r)},function(s){r(new kP(i,n,s))})}else t(n)}var l5=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function XEe(n,e){return e===void 0&&(e=!1),{simple:function(t){return l5(t,e)||n.check(t)===void 0},async:function(t){return l5(t,e)||n.testAsync(t)}}}function Hs(){return typeof Proxy<"u"?aj(new _l):GT(new _l)}var n0={};Hs.extend=function(n){Object.assign(n0,n)};Hs.clearCustomRules=function(){n0={}};function aj(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=aj(n._clone());if(r in SS)return i._applyModifier(SS[r],r);if(r in n0)return i._applyRule(n0[r],r);if(r in jT)return i._applyRule(jT[r],r)}})}function GT(n){var e=function(i,s){return Object.keys(i).forEach(function(a){s[a]=function(){for(var o=[],l=arguments.length;l--;)o[l]=arguments[l];var u=GT(s._clone()),c=u._applyRule(i[a],a).apply(void 0,o);return c}}),s},t=e(jT,n),r=e(n0,t);return Object.keys(SS).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=GT(r._clone());return s._applyModifier(SS[i],i)}})}),r}var SS={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return cx(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(cx(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&cx(e).every(n)}},async:function(n){return function(e){return Promise.all(cx(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return u5(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return u5(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function u5(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function cx(n){return typeof n=="string"?n.split(""):n}var jT={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||YEe;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return dh("string")},boolean:function(){return dh("boolean")},undefined:function(){return dh("undefined")},null:function(){return dh("null")},array:function(){return dh("array")},object:function(){return dh("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return KEe(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:XEe};function dh(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function YEe(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function KEe(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(a){a.target=i,t.push(a)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var jn="colors",cs="sizes",At="space",ZEe={gap:At,gridGap:At,columnGap:At,gridColumnGap:At,rowGap:At,gridRowGap:At,inset:At,insetBlock:At,insetBlockEnd:At,insetBlockStart:At,insetInline:At,insetInlineEnd:At,insetInlineStart:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,marginBlock:At,marginBlockEnd:At,marginBlockStart:At,marginInline:At,marginInlineEnd:At,marginInlineStart:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,paddingBlock:At,paddingBlockEnd:At,paddingBlockStart:At,paddingInline:At,paddingInlineEnd:At,paddingInlineStart:At,top:At,right:At,bottom:At,left:At,scrollMargin:At,scrollMarginTop:At,scrollMarginRight:At,scrollMarginBottom:At,scrollMarginLeft:At,scrollMarginX:At,scrollMarginY:At,scrollMarginBlock:At,scrollMarginBlockEnd:At,scrollMarginBlockStart:At,scrollMarginInline:At,scrollMarginInlineEnd:At,scrollMarginInlineStart:At,scrollPadding:At,scrollPaddingTop:At,scrollPaddingRight:At,scrollPaddingBottom:At,scrollPaddingLeft:At,scrollPaddingX:At,scrollPaddingY:At,scrollPaddingBlock:At,scrollPaddingBlockEnd:At,scrollPaddingBlockStart:At,scrollPaddingInline:At,scrollPaddingInlineEnd:At,scrollPaddingInlineStart:At,fontSize:"fontSizes",background:jn,backgroundColor:jn,backgroundImage:jn,borderImage:jn,border:jn,borderBlock:jn,borderBlockEnd:jn,borderBlockStart:jn,borderBottom:jn,borderBottomColor:jn,borderColor:jn,borderInline:jn,borderInlineEnd:jn,borderInlineStart:jn,borderLeft:jn,borderLeftColor:jn,borderRight:jn,borderRightColor:jn,borderTop:jn,borderTopColor:jn,caretColor:jn,color:jn,columnRuleColor:jn,fill:jn,outline:jn,outlineColor:jn,stroke:jn,textDecorationColor:jn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:cs,minBlockSize:cs,maxBlockSize:cs,inlineSize:cs,minInlineSize:cs,maxInlineSize:cs,width:cs,minWidth:cs,maxWidth:cs,height:cs,minHeight:cs,maxHeight:cs,flexBasis:cs,gridTemplateColumns:cs,gridTemplateRows:cs,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},JEe=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Cm=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,JEe))(e);return i in n?n[i]:n[i]=t(e,...r)}},ad=Symbol.for("sxs.internal"),LP=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),c5=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:QEe}=Object.prototype,qT=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),eMe=/\s+(?![^()]*\))/,hh=n=>e=>n(...typeof e=="string"?String(e).split(eMe):[e]),f5={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:hh((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:hh((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:hh((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:hh((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:hh((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:hh((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},j2=/([\d.]+)([^]*)/,tMe=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,nMe=(n,e)=>n in rMe&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${qT(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${qT(n)}:${r}fit-content`)+s):String(e),rMe={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Su=n=>n?n+"-":"",oj=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,a,o)=>a=="$"==!!s?r:(i||a=="--"?"calc(":"")+"var(--"+(a==="$"?Su(e)+(o.includes("$")?"":Su(t))+o.replace(/\$/g,"-"):o)+")"+(i||a=="--"?"*"+(i||"")+(s||"1")+")":"")),iMe=/\s*,\s*(?![^()]*\))/,sMe=Object.prototype.toString,up=(n,e,t,r,i)=>{let s,a,o;const l=(u,c,f)=>{let d,h;const p=v=>{for(d in v){const S=d.charCodeAt(0)===64,b=S&&Array.isArray(v[d])?v[d]:[v[d]];for(h of b){const g=/[A-Z]/.test(m=d)?m:m.replace(/-[^]/g,x=>x[1].toUpperCase()),w=typeof h=="object"&&h&&h.toString===sMe&&(!r.utils[g]||!c.length);if(g in r.utils&&!w){const x=r.utils[g];if(x!==a){a=x,p(x(h)),a=null;continue}}else if(g in f5){const x=f5[g];if(x!==o){o=x,p(x(h)),o=null;continue}}if(S&&(y=d.slice(1)in r.media?"@media "+r.media[d.slice(1)]:d,d=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(x,M,A,N,C,T)=>{const R=j2.test(M),U=.0625*(R?-1:1),[F,B]=R?[N,M]:[M,N];return"("+(A[0]==="="?"":A[0]===">"===R?"max-":"min-")+F+":"+(A[0]!=="="&&A.length===1?B.replace(j2,(D,O,$)=>Number(O)+U*(A===">"?1:-1)+$):B)+(C?") and ("+(C[0]===">"?"min-":"max-")+F+":"+(C.length===1?T.replace(j2,(D,O,$)=>Number(O)+U*(C===">"?-1:1)+$):T):"")+")"})),w){const x=S?f.concat(d):[...f],M=S?[...c]:tMe(c,d.split(iMe));s!==void 0&&i(d5(...s)),s=void 0,l(h,M,x)}else s===void 0&&(s=[[],c,f]),d=S||d.charCodeAt(0)!==36?d:`--${Su(r.prefix)}${d.slice(1).replace(/\$/g,"-")}`,h=w?h:typeof h=="number"?h&&g in aMe?String(h)+"px":String(h):oj(nMe(g,h??""),r.prefix,r.themeMap[g]),s[0].push(`${S?`${d} `:`${qT(d)}:`}${h}`)}}var y,m};p(u),s!==void 0&&i(d5(...s)),s=void 0};l(n,e,t)},d5=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,aMe={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},h5=n=>String.fromCharCode(n+(n>25?39:97)),od=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=h5(t%52)+r;return h5(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),Zg=["themed","global","styled","onevar","resonevar","allvar","inline"],oMe=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},lMe=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,a)=>{const{cssText:o}=s;let l="";if(o.startsWith("--sxs"))return"";if(i[a-1]&&(l=i[a-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===s)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${o}`;return s.cssRules.length?`${l}${o}`:""}return o}).join("")},r=()=>{if(e){const{rules:o,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in o)delete o[u]}const i=Object(n).styleSheets||[];for(const o of i)if(oMe(o)){for(let l=0,u=o.cssRules;u[l];++l){const c=Object(u[l]);if(c.type!==1)continue;const f=Object(u[l+1]);if(f.type!==4)continue;++l;const{cssText:d}=c;if(!d.startsWith("--sxs"))continue;const h=d.slice(14,-3).trim().split(/\s+/),p=Zg[h[0]];p&&(e||(e={sheet:o,reset:r,rules:{},toString:t}),e.rules[p]={group:f,index:l,cache:new Set(h)})}if(e)break}if(!e){const o=(l,u)=>({type:u,cssRules:[],insertRule(c,f){this.cssRules.splice(f,0,o(c,{import:3,undefined:1}[(c.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,c=>c.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:o("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:a}=e;for(let o=Zg.length-1;o>=0;--o){const l=Zg[o];if(!a[l]){const u=Zg[o+1],c=a[u]?a[u].index:s.cssRules.length;s.insertRule("@media{}",c),s.insertRule(`--sxs{--sxs:${o}}`,c),a[l]={group:s.cssRules[c+1],index:c,cache:new Set([o])}}uMe(a[l])}};return r(),e},uMe=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},xg=Symbol(),cMe=Cm(),p5=(n,e)=>cMe(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[ad]){r.type==null&&(r.type=i[ad].type);for(const s of i[ad].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(fMe(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),dMe(n,r,e)}),fMe=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${Su(i.prefix)}c-${od(r)}`,a=[],o=[],l=Object.create(null),u=[];for(const d in t)l[d]=String(t[d]);if(typeof n=="object"&&n)for(const d in n){c=l,f=d,QEe.call(c,f)||(l[d]="undefined");const h=n[d];for(const p in h){const v={[d]:String(p)};String(p)==="undefined"&&u.push(d);const y=h[p],m=[v,y,!c5(y)];a.push(m)}}var c,f;if(typeof e=="object"&&e)for(const d of e){let{css:h,...p}=d;h=typeof h=="object"&&h||{};for(const y in p)p[y]=String(p[y]);const v=[p,h,!c5(h)];o.push(v)}return[s,r,a,o,l,u]},dMe=(n,e,t)=>{const[r,i,s,a]=hMe(e.composers),o=typeof e.type=="function"||e.type.$$typeof?(f=>{function d(){for(let h=0;h<d[xg].length;h++){const[p,v]=d[xg][h];f.rules[p].apply(v)}return d[xg]=[],null}return d[xg]=[],d.rules={},Zg.forEach(h=>d.rules[h]={apply:p=>d[xg].push([h,p])}),d})(t):null,l=(o||t).rules,u=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=f=>{f=typeof f=="object"&&f||pMe;const{css:d,...h}=f,p={};for(const m in s)if(delete h[m],m in f){let S=f[m];typeof S=="object"&&S?p[m]={"@initial":s[m],...S}:(S=String(S),p[m]=S!=="undefined"||a.has(m)?S:s[m])}else p[m]=s[m];const v=new Set([...i]);for(const[m,S,b,g]of e.composers){t.rules.styled.cache.has(m)||(t.rules.styled.cache.add(m),up(S,[`.${m}`],[],n,M=>{l.styled.apply(M)}));const w=m5(b,p,n.media),x=m5(g,p,n.media,!0);for(const M of w)if(M!==void 0)for(const[A,N,C]of M){const T=`${m}-${od(N)}-${A}`;v.add(T);const R=(C?t.rules.resonevar:t.rules.onevar).cache,U=C?l.resonevar:l.onevar;R.has(T)||(R.add(T),up(N,[`.${T}`],[],n,F=>{U.apply(F)}))}for(const M of x)if(M!==void 0)for(const[A,N]of M){const C=`${m}-${od(N)}-${A}`;v.add(C),t.rules.allvar.cache.has(C)||(t.rules.allvar.cache.add(C),up(N,[`.${C}`],[],n,T=>{l.allvar.apply(T)}))}}if(typeof d=="object"&&d){const m=`${r}-i${od(d)}-css`;v.add(m),t.rules.inline.cache.has(m)||(t.rules.inline.cache.add(m),up(d,[`.${m}`],[],n,S=>{l.inline.apply(S)}))}for(const m of String(f.className||"").trim().split(/\s+/))m&&v.add(m);const y=h.className=[...v].join(" ");return{type:e.type,className:y,selector:u,props:h,toString:()=>y,deferredInjector:o}};return LP(c,{className:r,selector:u,[ad]:e,toString:()=>(t.rules.styled.cache.has(r)||c(),r)})},hMe=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,a,o]of n){e===""&&(e=s),t.push(s),i.push(...o);for(const l in a){const u=a[l];(r[l]===void 0||u!=="undefined"||o.includes(u))&&(r[l]=u)}}return[e,t,r,new Set(i)]},m5=(n,e,t,r)=>{const i=[];e:for(let[s,a,o]of n){if(o)continue;let l,u=0,c=!1;for(l in s){const f=s[l];let d=e[l];if(d!==f){if(typeof d!="object"||!d)continue e;{let h,p,v=0;for(const y in d){if(f===String(d[y])){if(y!=="@initial"){const m=y.slice(1);(p=p||[]).push(m in t?t[m]:y.replace(/^@media ?/,"")),c=!0}u+=v,h=!0}++v}if(p&&p.length&&(a={["@media "+p.join(", ")]:a}),!h)continue e}}}(i[u]=i[u]||[]).push([r?"cv":`${l}-${s[l]}`,a,c])}return i},pMe={},mMe=Cm(),gMe=(n,e)=>mMe(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=od(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let a=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let o of[].concat(i["@import"]))o=o.includes('"')||o.includes("'")?o:`"${o}"`,e.sheet.insertRule(`@import ${o};`,a++);delete i["@import"]}up(i,[],[],n,a=>{e.rules.global.apply(a)})}}return""};return LP(r,{toString:r})}),vMe=Cm(),yMe=(n,e)=>vMe(n,()=>t=>{const r=`${Su(n.prefix)}k-${od(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];up(t,[],[],n,o=>s.push(o));const a=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(a)}return r};return LP(i,{get name(){return i()},toString:i})}),xMe=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Su(this.prefix)+Su(this.scale)+this.token}toString(){return this.computedValue}},bMe=Cm(),wMe=(n,e)=>bMe(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${Su(n.prefix)}t-${od(r)}`}`,s={},a=[];for(const l in r){s[l]={};for(const u in r[l]){const c=`--${Su(n.prefix)}${l}-${u}`,f=oj(String(r[l][u]),n.prefix,l);s[l][u]=new xMe(u,f,l,n.prefix),a.push(`${c}:${f}`)}}const o=()=>{if(a.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${a.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return o()},selector:i,toString:o}}),SMe=Cm(),_Me=Cm(),EMe=n=>{const e=(t=>{let r=!1;const i=SMe(t,s=>{r=!0;const a="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",o=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,u=typeof s.theme=="object"&&s.theme||{},c={prefix:a,media:o,theme:u,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...ZEe},utils:typeof s.utils=="object"&&s.utils||{}},f=lMe(l),d={css:p5(c,f),globalCss:gMe(c,f),keyframes:yMe(c,f),createTheme:wMe(c,f),reset(){f.reset(),d.theme.toString()},theme:{},sheet:f,config:c,prefix:a,getCssText:f.toString,toString:f.toString};return String(d.theme=d.createTheme(u)),d});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>_Me(t,()=>{const i=p5(t,r);return(...s)=>{const a=i(...s),o=a[ad].type,l=Ae.forwardRef((u,c)=>{const f=u&&u.as||o,{props:d,deferredInjector:h}=a(u);return delete d.as,d.ref=c,h?Ae.createElement(Ae.Fragment,null,Ae.createElement(f,d),Ae.createElement(h,null)):Ae.createElement(f,d)});return l.className=a.className,l.displayName=`Styled.${o.displayName||o.name||o}`,l.selector=a.selector,l.toString=()=>a.selector,l[ad]=a[ad],l}}))(e),e};function MMe(n,e,t){return Math.max(e,Math.min(n,t))}const Qi={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function g5(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function v5(n,e,t,r=.15){return r===0?MMe(n,e,t):n<e?-g5(e-n,t-e,r)+e:n>t?+g5(n-t,t-e,r)+t:n}function CMe(n,[e,t],[r,i]){const[[s,a],[o,l]]=n;return[v5(e,s,a,r),v5(t,o,l,i)]}function AMe(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function TMe(n){var e=AMe(n,"string");return typeof e=="symbol"?e:String(e)}function Fs(n,e,t){return e=TMe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function y5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function br(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?y5(Object(t),!0).forEach(function(r){Fs(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):y5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const lj={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function x5(n){return n?n[0].toUpperCase()+n.slice(1):""}const DMe=["enter","leave"];function NMe(n=!1,e){return n&&!DMe.includes(e)}function PMe(n,e="",t=!1){const r=lj[n],i=r&&r[e]||e;return"on"+x5(n)+x5(i)+(NMe(t,i)?"Capture":"")}const RMe=["gotpointercapture","lostpointercapture"];function OMe(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=RMe.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function IMe(n,e=""){const t=lj[n],r=t&&t[e]||e;return n+r}function K_(n){return"touches"in n}function uj(n){return K_(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function kMe(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function LMe(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function cj(n){return K_(n)?LMe(n)[0]:n}function FMe(n){return kMe(n).map(e=>e.identifier)}function q2(n){const e=cj(n);return K_(n)?e.identifier:e.pointerId}function b5(n){const e=cj(n);return[e.clientX,e.clientY]}function BMe(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function _S(n,...e){return typeof n=="function"?n(...e):n}function zMe(){}function UMe(...n){return n.length===0?zMe:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function w5(n,e){return Object.assign({},e,n||{})}const $Me=32;class VMe{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?_S(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,BMe(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const x=t._delta.map(Math.abs);Qi.addTo(t._distance,x)}this.axisIntent&&this.axisIntent(e);const[a,o]=t._movement,[l,u]=r.threshold,{_step:c,values:f}=t;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(a)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(o)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(a)>=l&&Math.sign(a)*l),c[1]===!1&&(c[1]=Math.abs(o)>=u&&Math.sign(o)*u)),t.intentional=c[0]!==!1||c[1]!==!1,!t.intentional)return;const d=[0,0];if(r.hasCustomTransform){const[x,M]=f;d[0]=c[0]!==!1?x-c[0]:0,d[1]=c[1]!==!1?M-c[1]:0}else d[0]=c[0]!==!1?a-c[0]:0,d[1]=c[1]!==!1?o-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(d);const h=t.offset,p=t._active&&!t._blocked||t.active;p&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=_S(r.bounds,t)),this.setup&&this.setup()),t.movement=d,this.computeOffset()));const[v,y]=t.offset,[[m,S],[b,g]]=t._bounds;t.overflow=[v<m?-1:v>S?1:0,y<b?-1:y>g?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const w=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=CMe(t._bounds,t.offset,w),t.delta=Qi.sub(t.offset,h),this.computeMovement(),p&&(!t.last||s>$Me)){t.delta=Qi.sub(t.offset,h);const x=t.delta.map(Math.abs);Qi.addTo(t.distance,x),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[x[0]/s,x[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(br(br(br({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function HMe([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class WMe extends VMe{constructor(...e){super(...e),Fs(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Qi.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Qi.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[uj(e)]:r.axisThreshold;t.axis=HMe(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const GMe=n=>n,S5=.15,fj={enabled(n=!0){return n},eventOptions(n,e,t){return br(br({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[S5,S5];case!1:return[0,0];default:return Qi.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Qi.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||GMe},threshold(n){return Qi.toVector(n,0)}},jMe=0,oy=br(br({},fj),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=jMe){return n},bounds(n={}){if(typeof n=="function")return s=>oy.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),_5={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class qMe extends WMe{constructor(...e){super(...e),Fs(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=oy.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=q2(e),r._pointerActive=!0,this.computeValues(b5(e)),this.computeInitial(),t.preventScrollAxis&&uj(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=q2(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=b5(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Qi.sub(s,t._values),this.computeValues(s)),Qi.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=q2(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,a]=t._distance;if(t.tap=s<=r.tapsThreshold&&a<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[o,l]=t._delta,[u,c]=t._movement,[f,d]=r.swipe.velocity,[h,p]=r.swipe.distance,v=r.swipe.duration;if(t.elapsedTime<v){const y=Math.abs(o/t.timeDelta),m=Math.abs(l/t.timeDelta);y>f&&Math.abs(u)>h&&(t.swipe[0]=Math.sign(o)),m>d&&Math.abs(c)>p&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,XMe(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=_5[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,Qi.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in _5&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function XMe(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const ly=typeof window<"u"&&window.document&&window.document.createElement;function dj(){return ly&&"ontouchstart"in window}function YMe(){return dj()||ly&&window.navigator.maxTouchPoints>1}function KMe(){return ly&&"onpointerdown"in window}function ZMe(){return ly&&"exitPointerLock"in window.document}function JMe(){try{return"constructor"in GestureEvent}catch{return!1}}const Ha={isBrowser:ly,gesture:JMe(),touch:dj(),touchscreen:YMe(),pointer:KMe(),pointerLock:ZMe()},QMe=250,e2e=180,t2e=.5,n2e=50,r2e=250,i2e=10,E5={mouse:0,touch:0,pen:8},s2e=br(br({},oy),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Ha.pointerLock,Ha.touch&&t?"touch":this.pointerLock?"mouse":Ha.pointer&&!i?"pointer":Ha.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?QMe:void 0,!(!Ha.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=Qi.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=t2e,distance:e=n2e,duration:t=r2e}={}){return{velocity:this.transform(Qi.toVector(n)),distance:this.transform(Qi.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return e2e;case!1:return 0;default:return n}},axisThreshold(n){return n?br(br({},E5),n):E5},keyboardDisplacement(n=i2e){return n}});br(br({},fj),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!Ha.touch&&Ha.gesture)return"gesture";if(Ha.touch&&r)return"touch";if(Ha.touchscreen){if(Ha.pointer)return"pointer";if(Ha.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=a=>{const o=w5(_S(t,a),{min:-1/0,max:1/0});return[o.min,o.max]},s=a=>{const o=w5(_S(r,a),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:a=>[i(a),s(a)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Qi.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});br(br({},oy),{},{mouseOnly:(n=!0)=>n});br(br({},oy),{},{mouseOnly:(n=!0)=>n});const hj=new Map,XT=new Map;function a2e(n){hj.set(n.key,n.engine),XT.set(n.key,n.resolver)}const o2e={key:"drag",engine:qMe,resolver:s2e};function l2e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function u2e(n,e){if(n==null)return{};var t=l2e(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const c2e={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Ha.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},f2e=["target","eventOptions","window","enabled","transform"];function ew(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=ew(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function d2e(n,e,t={}){const r=n,{target:i,eventOptions:s,window:a,enabled:o,transform:l}=r,u=u2e(r,f2e);if(t.shared=ew({target:i,eventOptions:s,window:a,enabled:o,transform:l},c2e),e){const c=XT.get(e);t[e]=ew(br({shared:t.shared},u),c)}else for(const c in u){const f=XT.get(c);f&&(t[c]=ew(br({shared:t.shared},u[c]),f))}return t}class pj{constructor(e,t){Fs(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const a=this._listeners,o=IMe(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=br(br({},l),s);e.addEventListener(o,i,u);const c=()=>{e.removeEventListener(o,i,u),a.delete(c)};return a.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class h2e{constructor(){Fs(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class p2e{constructor(e){Fs(this,"gestures",new Set),Fs(this,"_targetEventStore",new pj(this)),Fs(this,"gestureEventStores",{}),Fs(this,"gestureTimeoutStores",{}),Fs(this,"handlers",{}),Fs(this,"config",{}),Fs(this,"pointerIds",new Set),Fs(this,"touchIds",new Set),Fs(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),m2e(this,e)}setEventIds(e){if(K_(e))return this.touchIds=new Set(FMe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=d2e(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const a of this.gestures){const o=this.config[a],l=M5(r,o.eventOptions,!!i);if(o.enabled){const u=hj.get(a);new u(this,e,a).bind(l)}}const s=M5(r,t.eventOptions,!!i);for(const a in this.nativeHandlers)s(a,"",o=>this.nativeHandlers[a](br(br({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const s in r)r[s]=UMe(...r[s]);if(!i)return r;for(const s in r){const{device:a,capture:o,passive:l}=OMe(s);this._targetEventStore.add(i,a,"",r[s],{capture:o,passive:l})}}}}function ph(n,e){n.gestures.add(e),n.gestureEventStores[e]=new pj(n,e),n.gestureTimeoutStores[e]=new h2e}function m2e(n,e){e.drag&&ph(n,"drag"),e.wheel&&ph(n,"wheel"),e.scroll&&ph(n,"scroll"),e.move&&ph(n,"move"),e.pinch&&ph(n,"pinch"),e.hover&&ph(n,"hover")}const M5=(n,e,t)=>(r,i,s,a={},o=!1)=>{var l,u;const c=(l=a.capture)!==null&&l!==void 0?l:e.capture,f=(u=a.passive)!==null&&u!==void 0?u:e.passive;let d=o?r:PMe(r,i,c);t&&f&&(d+="Passive"),n[d]=n[d]||[],n[d].push(s)};function g2e(n,e={},t,r){const i=Ae.useMemo(()=>new p2e(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),Ae.useEffect(i.effect.bind(i)),Ae.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function v2e(n,e){return a2e(o2e),g2e({drag:n},e||{},"drag")}function Zl(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function mj(n,e=[]){let t=[];function r(s,a){const o=z.createContext(a),l=t.length;t=[...t,a];function u(f){const{scope:d,children:h,...p}=f,v=(d==null?void 0:d[n][l])||o,y=z.useMemo(()=>p,Object.values(p));return z.createElement(v.Provider,{value:y},h)}function c(f,d){const h=(d==null?void 0:d[n][l])||o,p=z.useContext(h);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const i=()=>{const s=t.map(a=>z.createContext(a));return function(o){const l=(o==null?void 0:o[n])||s;return z.useMemo(()=>({[`__scope${n}`]:{...o,[n]:l}}),[o,l])}};return i.scopeName=n,[r,y2e(i,...e)]}function y2e(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:l,scopeName:u})=>{const f=l(s)[`__scope${u}`];return{...o,...f}},{});return z.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function Am(n){const e=z.useRef(n);return z.useEffect(()=>{e.current=n}),z.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function x2e(n,e=globalThis==null?void 0:globalThis.document){const t=Am(n);z.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const YT="dismissableLayer.update",b2e="dismissableLayer.pointerDownOutside",w2e="dismissableLayer.focusOutside";let C5;const S2e=z.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_2e=z.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...u}=n,c=z.useContext(S2e),[f,d]=z.useState(null),h=(t=f==null?void 0:f.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,p]=z.useState({}),v=Mm(e,A=>d(A)),y=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),S=y.indexOf(m),b=f?y.indexOf(f):-1,g=c.layersWithOutsidePointerEventsDisabled.size>0,w=b>=S,x=E2e(A=>{const N=A.target,C=[...c.branches].some(T=>T.contains(N));!w||C||(s==null||s(A),o==null||o(A),A.defaultPrevented||l==null||l())},h),M=M2e(A=>{const N=A.target;[...c.branches].some(T=>T.contains(N))||(a==null||a(A),o==null||o(A),A.defaultPrevented||l==null||l())},h);return x2e(A=>{b===c.layers.size-1&&(i==null||i(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},h),z.useEffect(()=>{if(f)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(C5=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),A5(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=C5)}},[f,h,r,c]),z.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),A5())},[f,c]),z.useEffect(()=>{const A=()=>p({});return document.addEventListener(YT,A),()=>document.removeEventListener(YT,A)},[]),z.createElement(Ud.div,ot({},u,{ref:v,style:{pointerEvents:g?w?"auto":"none":void 0,...n.style},onFocusCapture:Zl(n.onFocusCapture,M.onFocusCapture),onBlurCapture:Zl(n.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Zl(n.onPointerDownCapture,x.onPointerDownCapture)}))});function E2e(n,e=globalThis==null?void 0:globalThis.document){const t=Am(n),r=z.useRef(!1),i=z.useRef(()=>{});return z.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let u=function(){gj(b2e,t,l,{discrete:!0})};const l={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function M2e(n,e=globalThis==null?void 0:globalThis.document){const t=Am(n),r=z.useRef(!1);return z.useEffect(()=>{const i=s=>{s.target&&!r.current&&gj(w2e,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function A5(){const n=new CustomEvent(YT);document.dispatchEvent(n)}function gj(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?WEe(i,s):i.dispatchEvent(s)}const Zp=globalThis!=null&&globalThis.document?z.useLayoutEffect:()=>{},C2e=Mw.useId||(()=>{});let A2e=0;function T2e(n){const[e,t]=z.useState(C2e());return Zp(()=>{t(r=>r??String(A2e++))},[n]),e?`radix-${e}`:""}const D2e=["top","right","bottom","left"],ll=Math.min,ca=Math.max,ES=Math.round,fx=Math.floor,Hc=n=>({x:n,y:n}),N2e={left:"right",right:"left",bottom:"top",top:"bottom"},P2e={start:"end",end:"start"};function KT(n,e,t){return ca(n,ll(e,t))}function _u(n,e){return typeof n=="function"?n(e):n}function Eu(n){return n.split("-")[0]}function Tm(n){return n.split("-")[1]}function FP(n){return n==="x"?"y":"x"}function BP(n){return n==="y"?"height":"width"}function Dm(n){return["top","bottom"].includes(Eu(n))?"y":"x"}function zP(n){return FP(Dm(n))}function R2e(n,e,t){t===void 0&&(t=!1);const r=Tm(n),i=zP(n),s=BP(i);let a=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=MS(a)),[a,MS(a)]}function O2e(n){const e=MS(n);return[ZT(n),e,ZT(e)]}function ZT(n){return n.replace(/start|end/g,e=>P2e[e])}function I2e(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:a;default:return[]}}function k2e(n,e,t,r){const i=Tm(n);let s=I2e(Eu(n),t==="start",r);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(ZT)))),s}function MS(n){return n.replace(/left|right|bottom|top/g,e=>N2e[e])}function L2e(n){return{top:0,right:0,bottom:0,left:0,...n}}function vj(n){return typeof n!="number"?L2e(n):{top:n,right:n,bottom:n,left:n}}function CS(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function T5(n,e,t){let{reference:r,floating:i}=n;const s=Dm(e),a=zP(e),o=BP(a),l=Eu(e),u=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[o]/2-i[o]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Tm(e)){case"start":h[a]-=d*(t&&u?-1:1);break;case"end":h[a]+=d*(t&&u?-1:1);break}return h}const F2e=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=t,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:n,floating:e,strategy:i}),{x:c,y:f}=T5(u,r,l),d=r,h={},p=0;for(let v=0;v<o.length;v++){const{name:y,fn:m}=o[v],{x:S,y:b,data:g,reset:w}=await m({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:u,platform:a,elements:{reference:n,floating:e}});c=S??c,f=b??f,h={...h,[y]:{...h[y],...g}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(d=w.placement),w.rects&&(u=w.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:i}):w.rects),{x:c,y:f}=T5(u,d,l)),v=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function r0(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=_u(e,n),p=vj(h),y=o[d?f==="floating"?"reference":"floating":f],m=CS(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(y)))==null||t?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:u,rootBoundary:c,strategy:l})),S=f==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),g=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},w=CS(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:S,offsetParent:b,strategy:l}):S);return{top:(m.top-w.top+p.top)/g.y,bottom:(w.bottom-m.bottom+p.bottom)/g.y,left:(m.left-w.left+p.left)/g.x,right:(w.right-m.right+p.right)/g.x}}const B2e=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=e,{element:u,padding:c=0}=_u(n,e)||{};if(u==null)return{};const f=vj(c),d={x:t,y:r},h=zP(i),p=BP(h),v=await a.getDimensions(u),y=h==="y",m=y?"top":"left",S=y?"bottom":"right",b=y?"clientHeight":"clientWidth",g=s.reference[p]+s.reference[h]-d[h]-s.floating[p],w=d[h]-s.reference[h],x=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let M=x?x[b]:0;(!M||!await(a.isElement==null?void 0:a.isElement(x)))&&(M=o.floating[b]||s.floating[p]);const A=g/2-w/2,N=M/2-v[p]/2-1,C=ll(f[m],N),T=ll(f[S],N),R=C,U=M-v[p]-T,F=M/2-v[p]/2+A,B=KT(R,F,U),D=!l.arrow&&Tm(i)!=null&&F!==B&&s.reference[p]/2-(F<R?C:T)-v[p]/2<0,O=D?F<R?F-R:F-U:0;return{[h]:d[h]+O,data:{[h]:B,centerOffset:F-B-O,...D&&{alignmentOffset:O}},reset:D}}}),z2e=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:v=!0,...y}=_u(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const m=Eu(i),S=Eu(o)===o,b=await(l.isRTL==null?void 0:l.isRTL(u.floating)),g=d||(S||!v?[MS(o)]:O2e(o));!d&&p!=="none"&&g.push(...k2e(o,v,p,b));const w=[o,...g],x=await r0(e,y),M=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&M.push(x[m]),f){const R=R2e(i,a,b);M.push(x[R[0]],x[R[1]])}if(A=[...A,{placement:i,overflows:M}],!M.every(R=>R<=0)){var N,C;const R=(((N=s.flip)==null?void 0:N.index)||0)+1,U=w[R];if(U)return{data:{index:R,overflows:A},reset:{placement:U}};let F=(C=A.filter(B=>B.overflows[0]<=0).sort((B,D)=>B.overflows[1]-D.overflows[1])[0])==null?void 0:C.placement;if(!F)switch(h){case"bestFit":{var T;const B=(T=A.map(D=>[D.placement,D.overflows.filter(O=>O>0).reduce((O,$)=>O+$,0)]).sort((D,O)=>D[1]-O[1])[0])==null?void 0:T[0];B&&(F=B);break}case"initialPlacement":F=o;break}if(i!==F)return{reset:{placement:F}}}return{}}}};function D5(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function N5(n){return D2e.some(e=>n[e]>=0)}const U2e=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=_u(n,e);switch(r){case"referenceHidden":{const s=await r0(e,{...i,elementContext:"reference"}),a=D5(s,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:N5(a)}}}case"escaped":{const s=await r0(e,{...i,altBoundary:!0}),a=D5(s,t.floating);return{data:{escapedOffsets:a,escaped:N5(a)}}}default:return{}}}}};async function $2e(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=Eu(t),o=Tm(t),l=Dm(t)==="y",u=["left","top"].includes(a)?-1:1,c=s&&l?-1:1,f=_u(e,n);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return o&&typeof p=="number"&&(h=o==="end"?p*-1:p),l?{x:h*c,y:d*u}:{x:d*u,y:h*c}}const V2e=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:a,middlewareData:o}=e,l=await $2e(e,n);return a===((t=o.offset)==null?void 0:t.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},H2e=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:y=>{let{x:m,y:S}=y;return{x:m,y:S}}},...l}=_u(n,e),u={x:t,y:r},c=await r0(e,l),f=Dm(Eu(i)),d=FP(f);let h=u[d],p=u[f];if(s){const y=d==="y"?"top":"left",m=d==="y"?"bottom":"right",S=h+c[y],b=h-c[m];h=KT(S,h,b)}if(a){const y=f==="y"?"top":"left",m=f==="y"?"bottom":"right",S=p+c[y],b=p-c[m];p=KT(S,p,b)}const v=o.fn({...e,[d]:h,[f]:p});return{...v,data:{x:v.x-t,y:v.y-r}}}}},W2e=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=_u(n,e),c={x:t,y:r},f=Dm(i),d=FP(f);let h=c[d],p=c[f];const v=_u(o,e),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const b=d==="y"?"height":"width",g=s.reference[d]-s.floating[b]+y.mainAxis,w=s.reference[d]+s.reference[b]-y.mainAxis;h<g?h=g:h>w&&(h=w)}if(u){var m,S;const b=d==="y"?"width":"height",g=["top","left"].includes(Eu(i)),w=s.reference[f]-s.floating[b]+(g&&((m=a.offset)==null?void 0:m[f])||0)+(g?0:y.crossAxis),x=s.reference[f]+s.reference[b]+(g?0:((S=a.offset)==null?void 0:S[f])||0)-(g?y.crossAxis:0);p<w?p=w:p>x&&(p=x)}return{[d]:h,[f]:p}}}},G2e=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:s}=e,{apply:a=()=>{},...o}=_u(n,e),l=await r0(e,o),u=Eu(t),c=Tm(t),f=Dm(t)==="y",{width:d,height:h}=r.floating;let p,v;u==="top"||u==="bottom"?(p=u,v=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(v=u,p=c==="end"?"top":"bottom");const y=h-l.top-l.bottom,m=d-l.left-l.right,S=ll(h-l[p],y),b=ll(d-l[v],m),g=!e.middlewareData.shift;let w=S,x=b;if(f?x=c||g?ll(b,m):m:w=c||g?ll(S,y):y,g&&!c){const A=ca(l.left,0),N=ca(l.right,0),C=ca(l.top,0),T=ca(l.bottom,0);f?x=d-2*(A!==0||N!==0?A+N:ca(l.left,l.right)):w=h-2*(C!==0||T!==0?C+T:ca(l.top,l.bottom))}await a({...e,availableWidth:x,availableHeight:w});const M=await i.getDimensions(s.floating);return d!==M.width||h!==M.height?{reset:{rects:!0}}:{}}}};function Nm(n){return yj(n)?(n.nodeName||"").toLowerCase():"#document"}function xa(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Iu(n){var e;return(e=(yj(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function yj(n){return n instanceof Node||n instanceof xa(n).Node}function El(n){return n instanceof Element||n instanceof xa(n).Element}function Ml(n){return n instanceof HTMLElement||n instanceof xa(n).HTMLElement}function P5(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof xa(n).ShadowRoot}function uy(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=To(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function j2e(n){return["table","td","th"].includes(Nm(n))}function UP(n){const e=$P(),t=To(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function q2e(n){let e=Wc(n);for(;Ml(e)&&!Jp(e);){if(UP(e))return e;e=Wc(e)}return null}function $P(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Jp(n){return["html","body","#document"].includes(Nm(n))}function To(n){return xa(n).getComputedStyle(n)}function Z_(n){return El(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function Wc(n){if(Nm(n)==="html")return n;const e=n.assignedSlot||n.parentNode||P5(n)&&n.host||Iu(n);return P5(e)?e.host:e}function xj(n){const e=Wc(n);return Jp(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ml(e)&&uy(e)?e:xj(e)}function i0(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=xj(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),a=xa(i);return s?e.concat(a,a.visualViewport||[],uy(i)?i:[],a.frameElement&&t?i0(a.frameElement):[]):e.concat(i,i0(i,[],t))}function bj(n){const e=To(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ml(n),s=i?n.offsetWidth:t,a=i?n.offsetHeight:r,o=ES(t)!==s||ES(r)!==a;return o&&(t=s,r=a),{width:t,height:r,$:o}}function VP(n){return El(n)?n:n.contextElement}function Tp(n){const e=VP(n);if(!Ml(e))return Hc(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=bj(e);let a=(s?ES(t.width):t.width)/r,o=(s?ES(t.height):t.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const X2e=Hc(0);function wj(n){const e=xa(n);return!$P()||!e.visualViewport?X2e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Y2e(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==xa(n)?!1:e}function Sd(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=VP(n);let a=Hc(1);e&&(r?El(r)&&(a=Tp(r)):a=Tp(n));const o=Y2e(s,t,r)?wj(s):Hc(0);let l=(i.left+o.x)/a.x,u=(i.top+o.y)/a.y,c=i.width/a.x,f=i.height/a.y;if(s){const d=xa(s),h=r&&El(r)?xa(r):r;let p=d,v=p.frameElement;for(;v&&r&&h!==p;){const y=Tp(v),m=v.getBoundingClientRect(),S=To(v),b=m.left+(v.clientLeft+parseFloat(S.paddingLeft))*y.x,g=m.top+(v.clientTop+parseFloat(S.paddingTop))*y.y;l*=y.x,u*=y.y,c*=y.x,f*=y.y,l+=b,u+=g,p=xa(v),v=p.frameElement}}return CS({width:c,height:f,x:l,y:u})}const K2e=[":popover-open",":modal"];function HP(n){return K2e.some(e=>{try{return n.matches(e)}catch{return!1}})}function Z2e(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",a=Iu(r),o=e?HP(e.floating):!1;if(r===a||o&&s)return t;let l={scrollLeft:0,scrollTop:0},u=Hc(1);const c=Hc(0),f=Ml(r);if((f||!f&&!s)&&((Nm(r)!=="body"||uy(a))&&(l=Z_(r)),Ml(r))){const d=Sd(r);u=Tp(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x,y:t.y*u.y-l.scrollTop*u.y+c.y}}function J2e(n){return Array.from(n.getClientRects())}function Sj(n){return Sd(Iu(n)).left+Z_(n).scrollLeft}function Q2e(n){const e=Iu(n),t=Z_(n),r=n.ownerDocument.body,i=ca(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ca(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+Sj(n);const o=-t.scrollTop;return To(r).direction==="rtl"&&(a+=ca(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function eCe(n,e){const t=xa(n),r=Iu(n),i=t.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const u=$P();(!u||u&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}function tCe(n,e){const t=Sd(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Ml(n)?Tp(n):Hc(1),a=n.clientWidth*s.x,o=n.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:a,height:o,x:l,y:u}}function R5(n,e,t){let r;if(e==="viewport")r=eCe(n,t);else if(e==="document")r=Q2e(Iu(n));else if(El(e))r=tCe(e,t);else{const i=wj(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return CS(r)}function _j(n,e){const t=Wc(n);return t===e||!El(t)||Jp(t)?!1:To(t).position==="fixed"||_j(t,e)}function nCe(n,e){const t=e.get(n);if(t)return t;let r=i0(n,[],!1).filter(o=>El(o)&&Nm(o)!=="body"),i=null;const s=To(n).position==="fixed";let a=s?Wc(n):n;for(;El(a)&&!Jp(a);){const o=To(a),l=UP(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||uy(a)&&!l&&_j(n,a))?r=r.filter(c=>c!==a):i=o,a=Wc(a)}return e.set(n,r),r}function rCe(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const a=[...t==="clippingAncestors"?HP(e)?[]:nCe(e,this._c):[].concat(t),r],o=a[0],l=a.reduce((u,c)=>{const f=R5(e,c,i);return u.top=ca(f.top,u.top),u.right=ll(f.right,u.right),u.bottom=ll(f.bottom,u.bottom),u.left=ca(f.left,u.left),u},R5(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function iCe(n){const{width:e,height:t}=bj(n);return{width:e,height:t}}function sCe(n,e,t){const r=Ml(e),i=Iu(e),s=t==="fixed",a=Sd(n,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=Hc(0);if(r||!r&&!s)if((Nm(e)!=="body"||uy(i))&&(o=Z_(e)),r){const f=Sd(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=Sj(i));const u=a.left+o.scrollLeft-l.x,c=a.top+o.scrollTop-l.y;return{x:u,y:c,width:a.width,height:a.height}}function X2(n){return To(n).position==="static"}function O5(n,e){return!Ml(n)||To(n).position==="fixed"?null:e?e(n):n.offsetParent}function Ej(n,e){const t=xa(n);if(HP(n))return t;if(!Ml(n)){let i=Wc(n);for(;i&&!Jp(i);){if(El(i)&&!X2(i))return i;i=Wc(i)}return t}let r=O5(n,e);for(;r&&j2e(r)&&X2(r);)r=O5(r,e);return r&&Jp(r)&&X2(r)&&!UP(r)?t:r||q2e(n)||t}const aCe=async function(n){const e=this.getOffsetParent||Ej,t=this.getDimensions,r=await t(n.floating);return{reference:sCe(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function oCe(n){return To(n).direction==="rtl"}const lCe={convertOffsetParentRelativeRectToViewportRelativeRect:Z2e,getDocumentElement:Iu,getClippingRect:rCe,getOffsetParent:Ej,getElementRects:aCe,getClientRects:J2e,getDimensions:iCe,getScale:Tp,isElement:El,isRTL:oCe};function uCe(n,e){let t=null,r;const i=Iu(n);function s(){var o;clearTimeout(r),(o=t)==null||o.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:f,height:d}=n.getBoundingClientRect();if(o||e(),!f||!d)return;const h=fx(c),p=fx(i.clientWidth-(u+f)),v=fx(i.clientHeight-(c+d)),y=fx(u),S={rootMargin:-h+"px "+-p+"px "+-v+"px "+-y+"px",threshold:ca(0,ll(1,l))||1};let b=!0;function g(w){const x=w[0].intersectionRatio;if(x!==l){if(!b)return a();x?a(!1,x):r=setTimeout(()=>{a(!1,1e-7)},1e3)}b=!1}try{t=new IntersectionObserver(g,{...S,root:i.ownerDocument})}catch{t=new IntersectionObserver(g,S)}t.observe(n)}return a(!0),s}function Mj(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=VP(n),c=i||s?[...u?i0(u):[],...i0(e)]:[];c.forEach(m=>{i&&m.addEventListener("scroll",t,{passive:!0}),s&&m.addEventListener("resize",t)});const f=u&&o?uCe(u,t):null;let d=-1,h=null;a&&(h=new ResizeObserver(m=>{let[S]=m;S&&S.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(e)})),t()}),u&&!l&&h.observe(u),h.observe(e));let p,v=l?Sd(n):null;l&&y();function y(){const m=Sd(n);v&&(m.x!==v.x||m.y!==v.y||m.width!==v.width||m.height!==v.height)&&t(),v=m,p=requestAnimationFrame(y)}return t(),()=>{var m;c.forEach(S=>{i&&S.removeEventListener("scroll",t),s&&S.removeEventListener("resize",t)}),f==null||f(),(m=h)==null||m.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const cCe=V2e,fCe=H2e,dCe=z2e,hCe=G2e,pCe=U2e,I5=B2e,mCe=W2e,gCe=(n,e,t)=>{const r=new Map,i={platform:lCe,...t},s={...i.platform,_c:r};return F2e(n,e,{...i,platform:s})};var tw=typeof document<"u"?z.useLayoutEffect:z.useEffect;function AS(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!AS(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!AS(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function Cj(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function k5(n,e){const t=Cj(n);return Math.round(e*t)/t}function L5(n){const e=z.useRef(n);return tw(()=>{e.current=n}),e}function vCe(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:u}=n,[c,f]=z.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,h]=z.useState(r);AS(d,r)||h(r);const[p,v]=z.useState(null),[y,m]=z.useState(null),S=z.useCallback(O=>{O!==x.current&&(x.current=O,v(O))},[]),b=z.useCallback(O=>{O!==M.current&&(M.current=O,m(O))},[]),g=s||p,w=a||y,x=z.useRef(null),M=z.useRef(null),A=z.useRef(c),N=l!=null,C=L5(l),T=L5(i),R=z.useCallback(()=>{if(!x.current||!M.current)return;const O={placement:e,strategy:t,middleware:d};T.current&&(O.platform=T.current),gCe(x.current,M.current,O).then($=>{const L={...$,isPositioned:!0};U.current&&!AS(A.current,L)&&(A.current=L,mm.flushSync(()=>{f(L)}))})},[d,e,t,T]);tw(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const U=z.useRef(!1);tw(()=>(U.current=!0,()=>{U.current=!1}),[]),tw(()=>{if(g&&(x.current=g),w&&(M.current=w),g&&w){if(C.current)return C.current(g,w,R);R()}},[g,w,R,C,N]);const F=z.useMemo(()=>({reference:x,floating:M,setReference:S,setFloating:b}),[S,b]),B=z.useMemo(()=>({reference:g,floating:w}),[g,w]),D=z.useMemo(()=>{const O={position:t,left:0,top:0};if(!B.floating)return O;const $=k5(B.floating,c.x),L=k5(B.floating,c.y);return o?{...O,transform:"translate("+$+"px, "+L+"px)",...Cj(B.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:$,top:L}},[t,o,B.floating,c.x,c.y]);return z.useMemo(()=>({...c,update:R,refs:F,elements:B,floatingStyles:D}),[c,R,F,B,D])}const yCe=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?I5({element:r.current,padding:i}).fn(t):{}:r?I5({element:r,padding:i}).fn(t):{}}}},xCe=(n,e)=>({...cCe(n),options:[n,e]}),bCe=(n,e)=>({...fCe(n),options:[n,e]}),wCe=(n,e)=>({...mCe(n),options:[n,e]}),SCe=(n,e)=>({...dCe(n),options:[n,e]}),_Ce=(n,e)=>({...hCe(n),options:[n,e]}),ECe=(n,e)=>({...pCe(n),options:[n,e]}),MCe=(n,e)=>({...yCe(n),options:[n,e]}),CCe=z.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return z.createElement(Ud.svg,ot({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:z.createElement("polygon",{points:"0,0 30,0 15,10"}))}),ACe=CCe;function TCe(n){const[e,t]=z.useState(void 0);return Zp(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;a=u.inlineSize,o=u.blockSize}else a=n.offsetWidth,o=n.offsetHeight;t({width:a,height:o})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const Aj="Popper",[Tj,Dj]=mj(Aj),[DCe,Nj]=Tj(Aj),NCe=n=>{const{__scopePopper:e,children:t}=n,[r,i]=z.useState(null);return z.createElement(DCe,{scope:e,anchor:r,onAnchorChange:i},t)},PCe="PopperAnchor",RCe=z.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=Nj(PCe,t),a=z.useRef(null),o=Mm(e,a);return z.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:z.createElement(Ud.div,ot({},i,{ref:o}))}),Pj="PopperContent",[OCe,ICe]=Tj(Pj),kCe=z.forwardRef((n,e)=>{var t,r,i,s,a,o,l,u;const{__scopePopper:c,side:f="bottom",sideOffset:d=0,align:h="center",alignOffset:p=0,arrowPadding:v=0,avoidCollisions:y=!0,collisionBoundary:m=[],collisionPadding:S=0,sticky:b="partial",hideWhenDetached:g=!1,updatePositionStrategy:w="optimized",onPlaced:x,...M}=n,A=Nj(Pj,c),[N,C]=z.useState(null),T=Mm(e,te=>C(te)),[R,U]=z.useState(null),F=TCe(R),B=(t=F==null?void 0:F.width)!==null&&t!==void 0?t:0,D=(r=F==null?void 0:F.height)!==null&&r!==void 0?r:0,O=f+(h!=="center"?"-"+h:""),$=typeof S=="number"?S:{top:0,right:0,bottom:0,left:0,...S},L=Array.isArray(m)?m:[m],X=L.length>0,Z={padding:$,boundary:L.filter(zCe),altBoundary:X},{refs:Q,floatingStyles:K,placement:re,isPositioned:ce,middlewareData:ue}=vCe({strategy:"fixed",placement:O,whileElementsMounted:(...te)=>Mj(...te,{animationFrame:w==="always"}),elements:{reference:A.anchor},middleware:[xCe({mainAxis:d+D,alignmentAxis:p}),y&&bCe({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?wCe():void 0,...Z}),y&&SCe({...Z}),_Ce({...Z,apply:({elements:te,rects:ne,availableWidth:Ce,availableHeight:se})=>{const{width:j,height:G}=ne.reference,fe=te.floating.style;fe.setProperty("--radix-popper-available-width",`${Ce}px`),fe.setProperty("--radix-popper-available-height",`${se}px`),fe.setProperty("--radix-popper-anchor-width",`${j}px`),fe.setProperty("--radix-popper-anchor-height",`${G}px`)}}),R&&MCe({element:R,padding:v}),UCe({arrowWidth:B,arrowHeight:D}),g&&ECe({strategy:"referenceHidden",...Z})]}),[me,Ee]=Rj(re),xe=Am(x);Zp(()=>{ce&&(xe==null||xe())},[ce,xe]);const Te=(i=ue.arrow)===null||i===void 0?void 0:i.x,De=(s=ue.arrow)===null||s===void 0?void 0:s.y,ie=((a=ue.arrow)===null||a===void 0?void 0:a.centerOffset)!==0,[Ie,ke]=z.useState();return Zp(()=>{N&&ke(window.getComputedStyle(N).zIndex)},[N]),z.createElement("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:ce?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ie,"--radix-popper-transform-origin":[(o=ue.transformOrigin)===null||o===void 0?void 0:o.x,(l=ue.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},z.createElement(OCe,{scope:c,placedSide:me,onArrowChange:U,arrowX:Te,arrowY:De,shouldHideArrow:ie},z.createElement(Ud.div,ot({"data-side":me,"data-align":Ee},M,{ref:T,style:{...M.style,animation:ce?void 0:"none",opacity:(u=ue.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))}),LCe="PopperArrow",FCe={top:"bottom",right:"left",bottom:"top",left:"right"},BCe=z.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=ICe(LCe,r),a=FCe[s.placedSide];return z.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},z.createElement(ACe,ot({},i,{ref:t,style:{...i.style,display:"block"}})))});function zCe(n){return n!==null}const UCe=n=>({name:"transformOrigin",options:n,fn(e){var t,r,i,s,a;const{placement:o,rects:l,middlewareData:u}=e,f=((t=u.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,d=f?0:n.arrowWidth,h=f?0:n.arrowHeight,[p,v]=Rj(o),y={start:"0%",center:"50%",end:"100%"}[v],m=((r=(i=u.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+d/2,S=((s=(a=u.arrow)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0)+h/2;let b="",g="";return p==="bottom"?(b=f?y:`${m}px`,g=`${-h}px`):p==="top"?(b=f?y:`${m}px`,g=`${l.floating.height+h}px`):p==="right"?(b=`${-h}px`,g=f?y:`${S}px`):p==="left"&&(b=`${l.floating.width+h}px`,g=f?y:`${S}px`),{data:{x:b,y:g}}}});function Rj(n){const[e,t="center"]=n.split("-");return[e,t]}const $Ce=NCe,VCe=RCe,HCe=kCe,WCe=BCe;function GCe(n,e){return z.useReducer((t,r)=>{const i=e[t][r];return i??t},n)}const Oj=n=>{const{present:e,children:t}=n,r=jCe(e),i=typeof t=="function"?t({present:r.isPresent}):z.Children.only(t),s=Mm(r.ref,i.ref);return typeof t=="function"||r.isPresent?z.cloneElement(i,{ref:s}):null};Oj.displayName="Presence";function jCe(n){const[e,t]=z.useState(),r=z.useRef({}),i=z.useRef(n),s=z.useRef("none"),a=n?"mounted":"unmounted",[o,l]=GCe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return z.useEffect(()=>{const u=dx(r.current);s.current=o==="mounted"?u:"none"},[o]),Zp(()=>{const u=r.current,c=i.current;if(c!==n){const d=s.current,h=dx(u);n?l("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),Zp(()=>{if(e){const u=f=>{const h=dx(r.current).includes(f.animationName);f.target===e&&h&&mm.flushSync(()=>l("ANIMATION_END"))},c=f=>{f.target===e&&(s.current=dx(r.current))};return e.addEventListener("animationstart",c),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{e.removeEventListener("animationstart",c),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:z.useCallback(u=>{u&&(r.current=getComputedStyle(u)),t(u)},[])}}function dx(n){return(n==null?void 0:n.animationName)||"none"}function qCe({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=XCe({defaultProp:e,onChange:t}),s=n!==void 0,a=s?n:r,o=Am(t),l=z.useCallback(u=>{if(s){const f=typeof u=="function"?u(n):u;f!==n&&o(f)}else i(u)},[s,n,i,o]);return[a,l]}function XCe({defaultProp:n,onChange:e}){const t=z.useState(n),[r]=t,i=z.useRef(r),s=Am(e);return z.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}const YCe=z.forwardRef((n,e)=>z.createElement(Ud.span,ot({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),KCe=YCe,[J_,_qe]=mj("Tooltip",[Dj]),Q_=Dj(),ZCe="TooltipProvider",JT="tooltip.open",[Eqe,WP]=J_(ZCe),GP="Tooltip",[JCe,eE]=J_(GP),QCe=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:a,delayDuration:o}=n,l=WP(GP,n.__scopeTooltip),u=Q_(e),[c,f]=z.useState(null),d=T2e(),h=z.useRef(0),p=a??l.disableHoverableContent,v=o??l.delayDuration,y=z.useRef(!1),[m=!1,S]=qCe({prop:r,defaultProp:i,onChange:M=>{M?(l.onOpen(),document.dispatchEvent(new CustomEvent(JT))):l.onClose(),s==null||s(M)}}),b=z.useMemo(()=>m?y.current?"delayed-open":"instant-open":"closed",[m]),g=z.useCallback(()=>{window.clearTimeout(h.current),y.current=!1,S(!0)},[S]),w=z.useCallback(()=>{window.clearTimeout(h.current),S(!1)},[S]),x=z.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{y.current=!0,S(!0)},v)},[v,S]);return z.useEffect(()=>()=>window.clearTimeout(h.current),[]),z.createElement($Ce,u,z.createElement(JCe,{scope:e,contentId:d,open:m,stateAttribute:b,trigger:c,onTriggerChange:f,onTriggerEnter:z.useCallback(()=>{l.isOpenDelayed?x():g()},[l.isOpenDelayed,x,g]),onTriggerLeave:z.useCallback(()=>{p?w():window.clearTimeout(h.current)},[w,p]),onOpen:g,onClose:w,disableHoverableContent:p},t))},F5="TooltipTrigger",eAe=z.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=eE(F5,t),s=WP(F5,t),a=Q_(t),o=z.useRef(null),l=Mm(e,o,i.onTriggerChange),u=z.useRef(!1),c=z.useRef(!1),f=z.useCallback(()=>u.current=!1,[]);return z.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),z.createElement(VCe,ot({asChild:!0},a),z.createElement(Ud.button,ot({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:Zl(n.onPointerMove,d=>{d.pointerType!=="touch"&&!c.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:Zl(n.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:Zl(n.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Zl(n.onFocus,()=>{u.current||i.onOpen()}),onBlur:Zl(n.onBlur,i.onClose),onClick:Zl(n.onClick,i.onClose)})))}),tAe="TooltipPortal",[Mqe,nAe]=J_(tAe,{forceMount:void 0}),s0="TooltipContent",rAe=z.forwardRef((n,e)=>{const t=nAe(s0,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,a=eE(s0,n.__scopeTooltip);return z.createElement(Oj,{present:r||a.open},a.disableHoverableContent?z.createElement(Ij,ot({side:i},s,{ref:e})):z.createElement(iAe,ot({side:i},s,{ref:e})))}),iAe=z.forwardRef((n,e)=>{const t=eE(s0,n.__scopeTooltip),r=WP(s0,n.__scopeTooltip),i=z.useRef(null),s=Mm(e,i),[a,o]=z.useState(null),{trigger:l,onClose:u}=t,c=i.current,{onPointerInTransitChange:f}=r,d=z.useCallback(()=>{o(null),f(!1)},[f]),h=z.useCallback((p,v)=>{const y=p.currentTarget,m={x:p.clientX,y:p.clientY},S=uAe(m,y.getBoundingClientRect()),b=cAe(m,S),g=fAe(v.getBoundingClientRect()),w=hAe([...b,...g]);o(w),f(!0)},[f]);return z.useEffect(()=>()=>d(),[d]),z.useEffect(()=>{if(l&&c){const p=y=>h(y,c),v=y=>h(y,l);return l.addEventListener("pointerleave",p),c.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",p),c.removeEventListener("pointerleave",v)}}},[l,c,h,d]),z.useEffect(()=>{if(a){const p=v=>{const y=v.target,m={x:v.clientX,y:v.clientY},S=(l==null?void 0:l.contains(y))||(c==null?void 0:c.contains(y)),b=!dAe(m,a);S?d():b&&(d(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,c,a,u,d]),z.createElement(Ij,ot({},n,{ref:s}))}),[sAe,aAe]=J_(GP,{isInside:!1}),Ij=z.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=n,l=eE(s0,t),u=Q_(t),{onClose:c}=l;return z.useEffect(()=>(document.addEventListener(JT,c),()=>document.removeEventListener(JT,c)),[c]),z.useEffect(()=>{if(l.trigger){const f=d=>{const h=d.target;h!=null&&h.contains(l.trigger)&&c()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,c]),z.createElement(_2e,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:c},z.createElement(HCe,ot({"data-state":l.stateAttribute},u,o,{ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),z.createElement(nj,null,r),z.createElement(sAe,{scope:t,isInside:!0},z.createElement(KCe,{id:l.contentId,role:"tooltip"},i||r))))}),oAe="TooltipArrow",lAe=z.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Q_(t);return aAe(oAe,t).isInside?null:z.createElement(WCe,ot({},i,r,{ref:e}))});function uAe(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function cAe(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function fAe(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function dAe(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const o=e[s].x,l=e[s].y,u=e[a].x,c=e[a].y;l>r!=c>r&&t<(u-o)*(r-l)/(c-l)+o&&(i=!i)}return i}function hAe(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),pAe(e)}function pAe(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const mAe=QCe,gAe=eAe,vAe=rAe,yAe=lAe;function xAe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Hn(n,e){if(n==null)return{};var t=xAe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let vr;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(vr||(vr={}));const bAe={[vr.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[vr.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[vr.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[vr.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[vr.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[vr.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[vr.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[vr.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[vr.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[vr.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[vr.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function kj(n,e,...t){const[r,...i]=bAe[e](...t);console[n]("LEVA: "+r,...i)}const Ql=kj.bind(null,"warn"),wAe=kj.bind(null,"log"),SAe=["value"],_Ae=["schema"],EAe=["value"],Lj=[],_d={};function B5(n){let{value:e}=n,t=Hn(n,SAe);for(let r of Lj){const i=r(e,t);if(i)return i}}function ku(n,e){let{schema:t}=e,r=Hn(e,_Ae);if(n in _d){Ql(vr.ALREADY_REGISTERED_TYPE,n);return}Lj.push((i,s)=>t(i,s)&&n),_d[n]=r}function Y2(n,e,t,r){const{normalize:i}=_d[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,a=Hn(e,EAe);return{value:s,settings:a}}function MAe(n,e,t,r,i,s){const{sanitize:a}=_d[n];return a?a(e,t,r,i,s):e}function z5(n,e,t){const{format:r}=_d[n];return r?r(e,t):e}function CAe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function U5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function jt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?U5(Object(t),!0).forEach(function(r){CAe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):U5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const Gc=(n,e,t)=>n>t?t:n<e?e:n,AAe=n=>{if(n===""||typeof n=="number")return n;try{const e=tc(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},TAe=Math.log(10);function $5(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/TAe)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const TS=(n,e,t)=>t===e?0:(Gc(n,e,t)-e)/(t-e),DS=(n,e,t)=>n*(t-e)+e,DAe=()=>"_"+Math.random().toString(36).substr(2,9),V5=/\(([0-9+\-*/^ .]+)\)/,H5=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,W5=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,G5=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,j5=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,q5=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function tc(n){if(isNaN(Number(n)))if(V5.test(n)){const e=n.replace(V5,(t,r)=>String(tc(r)));return tc(e)}else if(H5.test(n)){const e=n.replace(H5,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return tc(e)}else if(W5.test(n)){const e=n.replace(W5,(t,r,i)=>String(Number(r)*Number(i)));return tc(e)}else if(G5.test(n)){const e=n.replace(G5,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return tc(e)}else if(j5.test(n)){const e=n.replace(j5,(t,r,i)=>String(Number(r)+Number(i)));return tc(e)}else if(q5.test(n)){const e=n.replace(q5,(t,r,i)=>String(Number(r)-Number(i)));return tc(e)}else return Number(n);return Number(n)}function NAe(n,e){return e.reduce((t,r)=>(n&&n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}function PAe(n,e){const t=jt({},n);return e.forEach(r=>r in n&&delete t[r]),t}function RAe(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function Fj(n){return Object.prototype.toString.call(n)==="[object Object]"}const OAe=n=>Fj(n)&&Object.keys(n).length===0;let Ka;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(Ka||(Ka={}));let Do;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Do||(Do={}));const IAe=["type","__customInput"],kAe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],LAe=["type"];function Bj(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:jt({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:w,__customInput:x}=n,M=Hn(n,IAe);return Bj(x,e,M,w)}const{render:a,label:o,optional:l,order:u=0,disabled:c,hint:f,onChange:d,onEditStart:h,onEditEnd:p,transient:v}=n,y=Hn(n,kAe),m=jt({render:a,key:e,label:o??e,hint:f,transient:v??!!d,onEditStart:h,onEditEnd:p,disabled:c,optional:l,order:u},t);let{type:S}=y,b=Hn(y,LAe);if(S=r??S,S in Ka)return{type:S,input:b,options:m};let g;return r&&Fj(b)&&"value"in b?g=b.value:g=OAe(b)?void 0:b,{type:S,input:g,options:jt(jt({},m),{},{onChange:d,optional:(i=m.optional)!==null&&i!==void 0?i:!1,disabled:(s=m.disabled)!==null&&s!==void 0?s:!1})}}function FAe(n,e,t,r){const i=Bj(n,e),{type:s,input:a,options:o}=i;if(s)return s in Ka?i:{type:s,input:Y2(s,a,t,r),options:o};let l=B5(a);return l?{type:l,input:Y2(l,a,t,r),options:o}:(l=B5({value:a}),l?{type:l,input:Y2(l,{value:a},t,r),options:o}:!1)}function X5(n,e,t,r,i){const{value:s,type:a,settings:o}=n;n.value=zj({type:a,value:s,settings:o},e,t,r),n.fromPanel=i}const BAe=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function zj({type:n,value:e,settings:t},r,i,s){const a=n!=="SELECT"&&typeof r=="function"?r(e):r;let o;try{o=MAe(n,a,t,e,i,s)}catch(l){throw new BAe(`The value \`${r}\` did not result in a correct value.`,e,l)}return t0(o,e)?e:o}const Uj=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,a=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(a,e),s&&a()}},$j=n=>n.shiftKey?5:n.altKey?1/5:1;function zAe(n,e){const t=console.error;console.error=()=>{},sH.render(n,e),console.error=t}const UAe=["value"],$Ae=["min","max"],VAe=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},Vj=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=Gc(i,e,t);return r?s+r:s},HAe=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},Hj=n=>{let{value:e}=n,t=Hn(n,UAe);const{min:r=-1/0,max:i=1/0}=t,s=Hn(t,$Ae);let a=parseFloat(e);const o=typeof e=="string"?e.substring((""+a).length):void 0;a=Gc(a,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(a-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-a)/100).toPrecision(1)));const u=l?$5(l)*10:$5(a);l=l||u/10;const c=Math.round(Gc(Math.log10(1/u),0,2));return{value:o?a+o:a,settings:jt({initialValue:a,step:l,pad:c,min:r,max:i,suffix:o},s)}},Wj=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var Gj=Object.freeze({__proto__:null,schema:VAe,sanitize:Vj,format:HAe,normalize:Hj,sanitizeStep:Wj});function Er(){return Er=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Er.apply(this,arguments)}const jj=z.createContext({});function as(){return z.useContext(jj)}const jP=z.createContext(null),qj=z.createContext(null),Xj=z.createContext(null);function Pm(){return z.useContext(qj)}function WAe(){return z.useContext(Xj)}const Yj=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function hx(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const bg={$inputStyle:()=>n=>hx(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>hx(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>hx(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>hx(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Gt,css:Cqe,createTheme:GAe,globalCss:jAe,keyframes:Aqe}=EMe({prefix:"leva",theme:Yj(),utils:jt(jt({},bg),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":bg.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":bg.$focusStyle()(n)}),$hover:n=>({"&:hover":bg.$hoverStyle()(n)}),$active:n=>({"&:active":bg.$activeStyle()(n)})})}),qAe=jAe({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function XAe(n){const e=Yj();if(!n)return{theme:e,className:""};Object.keys(n).forEach(r=>{Object.assign(e[r],n[r])});const t=GAe(e);return{theme:e,className:t.className}}function cu(n,e){const{theme:t}=z.useContext(jP);if(!(n in t)||!(e in t[n]))return Ql(vr.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const Kj=Gt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),Zj=Gt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${Kj}`]:{paddingLeft:0}}),YAe=Gt(Zj,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),KAe=Gt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),ZAe=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],JAe=["onUpdate"];function qP(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:a,id:o,inputType:l="text",rows:u=0}=n,c=Hn(n,ZAe);const{id:f,emitOnEditStart:d,emitOnEditEnd:h,disabled:p}=as(),v=o||f,y=z.useRef(null),m=u>0,S=m?"textarea":"input",b=z.useCallback(x=>M=>{const A=M.currentTarget.value;x(A)},[]);Ae.useEffect(()=>{const x=y.current,M=b(A=>{r(A),h()});return x==null||x.addEventListener("blur",M),()=>x==null?void 0:x.removeEventListener("blur",M)},[b,r,h]);const g=z.useCallback(x=>{x.key==="Enter"&&b(r)(x)},[b,r]),w=Object.assign({as:S},m?{rows:u}:{},c);return Ae.createElement(KAe,{textArea:m},e&&typeof e=="string"?Ae.createElement(Zj,null,e):e,Ae.createElement(Kj,Er({levaType:a,ref:y,id:v,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:b(i),onFocus:()=>d(),onKeyPress:g,onKeyDown:s,disabled:p},w)))}function QAe(n){let{onUpdate:e}=n,t=Hn(n,JAe);const r=z.useCallback(s=>e(AAe(s)),[e]),i=z.useCallback(s=>{const a=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(a){s.preventDefault();const o=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+a*o)}},[e]);return Ae.createElement(qP,Er({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const NS=Gt("div",{}),QT=Gt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),eTe=Gt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${QT}::after`]:{opacity:.6},[`${NS}:hover > & + ${QT}::after`]:{opacity:.6},[`${NS}:hover > & > svg`]:{opacity:1}}),Jj=Gt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${NS}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),Qj=Gt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${Jj} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),eq=Gt(Qj,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),tTe=Gt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),nTe=Gt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),e3=Gt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),rTe=Gt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${e3}`]:{pointerEvents:"auto"}}}}}),tq=Gt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),iTe=Gt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),sTe=Gt(yAe,{fill:"$toolTipBackground"});function XP({children:n}){const{className:e}=z.useContext(jP);return Ae.createElement(jEe,{className:e},n)}const aTe=["align"];function oTe(){const{id:n,disable:e,disabled:t}=as();return Ae.createElement(Ae.Fragment,null,Ae.createElement(nTe,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),Ae.createElement("label",{htmlFor:n+"__disable"}))}function lTe(n){const{id:e,optional:t,hint:r}=as(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return Ae.createElement(Ae.Fragment,null,t&&Ae.createElement(oTe,null),r!==void 0?Ae.createElement(mAe,null,Ae.createElement(gAe,{asChild:!0},Ae.createElement(e3,Er({},i,n))),Ae.createElement(vAe,{side:"top",sideOffset:2},Ae.createElement(iTe,null,r,Ae.createElement(sTe,null)))):Ae.createElement(e3,Er({},i,s,n)))}function ko(n){let{align:e}=n,t=Hn(n,aTe);const{value:r,label:i,key:s,disabled:a}=as(),{hideCopyButton:o}=WAe(),l=!o&&s!==void 0,[u,c]=z.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),c(!0)}catch{Ql(vr.CLIPBOARD_ERROR,{[s]:r})}};return Ae.createElement(tTe,{align:e,onPointerLeave:()=>c(!1)},Ae.createElement(lTe,t),l&&!a&&Ae.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},u?Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ae.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),Ae.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):Ae.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ae.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),Ae.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const uTe=["toggled"],cTe=Gt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function YP(n){let{toggled:e}=n,t=Hn(n,uTe);return Ae.createElement(cTe,Er({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),Ae.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const fTe=["input"];function oo(n){let{input:e}=n,t=Hn(n,fTe);return e?Ae.createElement(eq,t):Ae.createElement(Qj,t)}function nq({value:n,type:e,settings:t,setValue:r}){const[i,s]=z.useState(z5(e,n,t)),a=z.useRef(n),o=z.useRef(t);o.current=t;const l=z.useCallback(c=>s(z5(e,c,o.current)),[e]),u=z.useCallback(c=>{try{r(c)}catch(f){const{type:d,previousValue:h}=f;if(d!=="LEVA_ERROR")throw f;l(h)}},[l,r]);return z.useEffect(()=>{t0(n,a.current)||l(n),a.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:u}}function cy(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=as();return v2e(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function dTe(n){const e=z.useRef(null),t=z.useRef(null),r=z.useRef(!1);return z.useEffect(()=>{const i=Uj(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),z.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function rq(){const n=z.useRef(null),e=z.useRef({x:0,y:0}),t=z.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const hTe=["__refCount"],K2=(n,e)=>{if(!n[e])return null;const t=n[e];return Hn(t,hTe)};function pTe(n){const e=Pm(),[t,r]=z.useState(K2(e.getData(),n)),i=z.useCallback(u=>e.setValueAtPath(n,u,!0),[n,e]),s=z.useCallback(u=>e.setSettingsAtPath(n,u),[n,e]),a=z.useCallback(u=>e.disableInputAtPath(n,u),[n,e]),o=z.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=z.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return z.useEffect(()=>{r(K2(e.getData(),n));const u=e.useStore.subscribe(c=>K2(c.data,n),r,{equalityFn:X_});return()=>u()},[e,n]),[t,{set:i,setSettings:s,disable:a,storeId:e.storeId,emitOnEditStart:o,emitOnEditEnd:l}]}const mTe=Gt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),iq=Gt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),t3=Gt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),sq=Gt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),aq=Gt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function gTe({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const a=z.useRef(null),o=z.useRef(null),l=z.useRef(0),u=cu("sizes","scrubberWidth"),c=cy(({event:d,first:h,xy:[p],movement:[v],memo:y})=>{if(h){const{width:S,left:b}=a.current.getBoundingClientRect();l.current=S-parseFloat(u),y=(d==null?void 0:d.target)===o.current?n:DS((p-b)/S,e,t)}const m=y+DS(v/l.current,0,t-e);return r(Wj(m,{step:i,initialValue:s})),y}),f=TS(n,e,t);return Ae.createElement(sq,Er({ref:a},c()),Ae.createElement(iq,null,Ae.createElement(aq,{style:{left:0,right:`${(1-f)*100}%`}})),Ae.createElement(t3,{ref:o,style:{left:`calc(${f} * (100% - ${u}))`}}))}const vTe=Ae.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=z.useState(!1),a=cy(({active:o,delta:[l],event:u,memo:c=0})=>(s(o),c+=l/2,Math.abs(c)>=1&&(e(f=>parseFloat(f)+Math.floor(c)*t*$j(u)),c=0),c));return Ae.createElement(YAe,Er({dragging:i,title:n.length>1?n:""},a()),n.slice(0,r))});function oq({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:a=1}){const o=a>0&&Ae.createElement(vTe,{label:n,step:s.step,onUpdate:r,innerLabelTrim:a});return Ae.createElement(QAe,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:o})}function yTe(){const n=as(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:a,max:o}=i,l=o!==1/0&&a!==-1/0;return Ae.createElement(oo,{input:!0},Ae.createElement(ko,null,e),Ae.createElement(mTe,{hasRange:l},l&&Ae.createElement(gTe,Er({value:parseFloat(t),onDrag:r},i)),Ae.createElement(oq,Er({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:xTe}=Gj,bTe=Hn(Gj,["sanitizeStep"]);var wTe=jt({component:yTe},bTe);const STe=(n,e)=>Hs().schema({options:Hs().passesAnyOf(Hs().object(),Hs().array())}).test(e),_Te=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},ETe=(n,{values:e})=>e.indexOf(n),MTe=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var CTe=Object.freeze({__proto__:null,schema:STe,sanitize:_Te,format:ETe,normalize:MTe});const ATe=Gt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),n3=Gt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),TTe=Gt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${n3}:focus + &`]:{$focusStyle:""},[`${n3}:hover + &`]:{$hoverStyle:""}});function DTe({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:a,values:o}=i,l=z.useRef();return e===o[n]&&(l.current=a[n]),Ae.createElement(ATe,null,Ae.createElement(n3,{id:r,value:n,onChange:u=>t(o[Number(u.currentTarget.value)]),disabled:s},a.map((u,c)=>Ae.createElement("option",{key:u,value:c},u))),Ae.createElement(TTe,null,l.current),Ae.createElement(YP,{toggled:!0}))}function NTe(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:a}=as();return Ae.createElement(oo,{input:!0},Ae.createElement(ko,null,n),Ae.createElement(DTe,{id:i,value:e,displayValue:t,onUpdate:r,settings:a,disabled:s}))}var PTe=jt({component:NTe},CTe);const RTe=n=>Hs().string().test(n),OTe=n=>{if(typeof n!="string")throw Error("Invalid string");return n},ITe=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var kTe=Object.freeze({__proto__:null,schema:RTe,sanitize:OTe,normalize:ITe});const LTe=["displayValue","onUpdate","onChange","editable"],FTe=Gt("div",{whiteSpace:"pre-wrap"});function BTe(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=Hn(n,LTe);return i?Ae.createElement(qP,Er({value:e,onUpdate:t,onChange:r},s)):Ae.createElement(FTe,null,e)}function zTe(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=as();return Ae.createElement(oo,{input:!0},Ae.createElement(ko,null,n),Ae.createElement(BTe,Er({displayValue:t,onUpdate:r,onChange:i},e)))}var UTe=jt({component:zTe},kTe);const $Te=n=>Hs().boolean().test(n),VTe=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var HTe=Object.freeze({__proto__:null,schema:$Te,sanitize:VTe});const WTe=Gt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function GTe({value:n,onUpdate:e,id:t,disabled:r}){return Ae.createElement(WTe,null,Ae.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),Ae.createElement("label",{htmlFor:t},Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ae.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function jTe(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=as();return Ae.createElement(oo,{input:!0},Ae.createElement(ko,null,n),Ae.createElement(GTe,{value:e,onUpdate:t,id:i,disabled:r}))}var qTe=jt({component:jTe},HTe);const XTe=["locked"];function YTe({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const a=z.useRef(n[t]);a.current=n[t];const o=z.useCallback(u=>i({[t]:zj({type:"NUMBER",value:a.current,settings:r},u)}),[i,r,t]),l=nq({type:"NUMBER",value:n[t],settings:r,setValue:o});return Ae.createElement(oq,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const KTe=Gt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function ZTe(n){let{locked:e}=n,t=Hn(n,XTe);return Ae.createElement("svg",Er({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?Ae.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):Ae.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function KP({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=as(),{lock:a,locked:o}=t;return Ae.createElement(KTe,{withLock:a},a&&Ae.createElement(ZTe,{locked:o,onClick:()=>s({locked:!o})}),Object.keys(n).map((l,u)=>Ae.createElement(YTe,{id:u===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const lq=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,a])=>{t[s]=Hj(jt({value:a},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:a,min:o,max:l}=e[s]||{};!isFinite(a)&&(!isFinite(o)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},JTe=["lock"],QTe=["value"];function e3e(n){const e=Hs().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function t3e(n){return Array.isArray(n)?"array":"object"}function gv(n,e,t){return t3e(n)===e?n:e==="array"?Object.values(n):RAe(n,t)}const n3e=(n,e,t)=>{const r=gv(n,"object",e.keys);for(let a in r)r[a]=Vj(r[a],e[a]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const a=gv(t,"object",e.keys);if(i.length===1&&e.locked){const o=i[0],l=r[o],u=a[o],c=u!==0?l/u:1;for(let f in a)f===o?s[o]=l:s[f]=a[f]*c}else s=jt(jt({},a),r)}return gv(s,e.format,e.keys)},r3e=(n,e)=>gv(n,"object",e.keys),i3e=n=>!!n&&("step"in n||"min"in n||"max"in n);function s3e(n,e,t=[]){const{lock:r=!1}=e,i=Hn(e,JTe),s=Array.isArray(n)?"array":"object",a=s==="object"?Object.keys(n):t,o=gv(n,"object",a),l=i3e(i)?a.reduce((c,f)=>Object.assign(c,{[f]:i}),{}):i,u=lq(o,l);return{value:s==="array"?n:o,settings:jt(jt({},u),{},{format:s,keys:a,lock:r,locked:!1})}}function uq(n){return{schema:e3e(n.length),normalize:e=>{let{value:t}=e,r=Hn(e,QTe);return s3e(t,r,n)},format:(e,t)=>r3e(e,t),sanitize:(e,t,r)=>n3e(e,t,r)}}var a3e={grad:.9,turn:360,rad:360/(2*Math.PI)},Vl=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},gi=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},qa=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},cq=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Y5=function(n){return{r:qa(n.r,0,255),g:qa(n.g,0,255),b:qa(n.b,0,255),a:qa(n.a)}},Z2=function(n){return{r:gi(n.r),g:gi(n.g),b:gi(n.b),a:gi(n.a,3)}},o3e=/^#([0-9a-f]{3,8})$/i,px=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},fq=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),a=s-Math.min(e,t,r),o=a?s===e?(t-r)/a:s===t?2+(r-e)/a:4+(e-t)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:i}},dq=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),a=r*(1-t),o=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:255*[r,o,a,a,l,r][u],g:255*[l,r,r,o,a,a][u],b:255*[a,a,l,r,r,o][u],a:i}},K5=function(n){return{h:cq(n.h),s:qa(n.s,0,100),l:qa(n.l,0,100),a:qa(n.a)}},Z5=function(n){return{h:gi(n.h),s:gi(n.s),l:gi(n.l),a:gi(n.a,3)}},J5=function(n){return dq((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},vv=function(n){return{h:(e=fq(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},l3e=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,u3e=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,c3e=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,f3e=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,r3={string:[[function(n){var e=o3e.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?gi(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?gi(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=c3e.exec(n)||f3e.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:Y5({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=l3e.exec(n)||u3e.exec(n);if(!e)return null;var t,r,i=K5({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(a3e[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return J5(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return Vl(e)&&Vl(t)&&Vl(r)?Y5({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!Vl(e)||!Vl(t)||!Vl(r))return null;var a=K5({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return J5(a)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!Vl(e)||!Vl(t)||!Vl(r))return null;var a=function(o){return{h:cq(o.h),s:qa(o.s,0,100),v:qa(o.v,0,100),a:qa(o.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return dq(a)},"hsv"]]},Q5=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},hq=function(n){return typeof n=="string"?Q5(n.trim(),r3.string):typeof n=="object"&&n!==null?Q5(n,r3.object):[null,void 0]},d3e=function(n){return hq(n)[1]},J2=function(n,e){var t=vv(n);return{h:t.h,s:qa(t.s+100*e,0,100),l:t.l,a:t.a}},Q2=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},ez=function(n,e){var t=vv(n);return{h:t.h,s:t.s,l:qa(t.l+100*e,0,100),a:t.a}},i3=function(){function n(e){this.parsed=hq(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return gi(Q2(this.rgba),2)},n.prototype.isDark=function(){return Q2(this.rgba)<.5},n.prototype.isLight=function(){return Q2(this.rgba)>=.5},n.prototype.toHex=function(){return e=Z2(this.rgba),t=e.r,r=e.g,i=e.b,a=(s=e.a)<1?px(gi(255*s)):"","#"+px(t)+px(r)+px(i)+a;var e,t,r,i,s,a},n.prototype.toRgb=function(){return Z2(this.rgba)},n.prototype.toRgbString=function(){return e=Z2(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return Z5(vv(this.rgba))},n.prototype.toHslString=function(){return e=Z5(vv(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=fq(this.rgba),{h:gi(e.h),s:gi(e.s),v:gi(e.v),a:gi(e.a,3)};var e},n.prototype.invert=function(){return ps({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),ps(J2(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),ps(J2(this.rgba,-e))},n.prototype.grayscale=function(){return ps(J2(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),ps(ez(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),ps(ez(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?ps({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):gi(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=vv(this.rgba);return typeof e=="number"?ps({h:e,s:t.s,l:t.l,a:t.a}):gi(t.h)},n.prototype.isEqual=function(e){return this.toHex()===ps(e).toHex()},n}(),ps=function(n){return n instanceof i3?n:new i3(n)},tz=[],h3e=function(n){n.forEach(function(e){tz.indexOf(e)<0&&(e(i3,r3),tz.push(e))})};function p3e(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,l,u=r[this.toHex()];if(u)return u;if(a!=null&&a.closest){var c=this.toRgb(),f=1/0,d="black";if(!s.length)for(var h in t)s[h]=new n(t[h]).toRgb();for(var p in t){var v=(o=c,l=s[p],Math.pow(o.r-l.r,2)+Math.pow(o.g-l.g,2)+Math.pow(o.b-l.b,2));v<f&&(f=v,d=p)}return d}},e.string.push([function(a){var o=a.toLowerCase(),l=o==="transparent"?"#0000":t[o];return l?new n(l).toRgb():null},"name"])}function Rm(){return(Rm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function ZP(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function s3(n){var e=z.useRef(n),t=z.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var Qp=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},yv=function(n){return"touches"in n},a3=function(n){return n&&n.ownerDocument.defaultView||self},nz=function(n,e,t){var r=n.getBoundingClientRect(),i=yv(e)?function(s,a){for(var o=0;o<s.length;o++)if(s[o].identifier===a)return s[o];return s[0]}(e.touches,t):e;return{left:Qp((i.pageX-(r.left+a3(n).pageXOffset))/r.width),top:Qp((i.pageY-(r.top+a3(n).pageYOffset))/r.height)}},rz=function(n){!yv(n)&&n.preventDefault()},JP=Ae.memo(function(n){var e=n.onMove,t=n.onKey,r=ZP(n,["onMove","onKey"]),i=z.useRef(null),s=s3(e),a=s3(t),o=z.useRef(null),l=z.useRef(!1),u=z.useMemo(function(){var h=function(y){rz(y),(yv(y)?y.touches.length>0:y.buttons>0)&&i.current?s(nz(i.current,y,o.current)):v(!1)},p=function(){return v(!1)};function v(y){var m=l.current,S=a3(i.current),b=y?S.addEventListener:S.removeEventListener;b(m?"touchmove":"mousemove",h),b(m?"touchend":"mouseup",p)}return[function(y){var m=y.nativeEvent,S=i.current;if(S&&(rz(m),!function(g,w){return w&&!yv(g)}(m,l.current)&&S)){if(yv(m)){l.current=!0;var b=m.changedTouches||[];b.length&&(o.current=b[0].identifier)}S.focus(),s(nz(S,m,o.current)),v(!0)}},function(y){var m=y.which||y.keyCode;m<37||m>40||(y.preventDefault(),a({left:m===39?.05:m===37?-.05:0,top:m===40?.05:m===38?-.05:0}))},v]},[a,s]),c=u[0],f=u[1],d=u[2];return z.useEffect(function(){return d},[d]),Ae.createElement("div",Rm({},r,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),fy=function(n){return n.filter(Boolean).join(" ")},QP=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=fy(["react-colorful__pointer",n.className]);return Ae.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},Ae.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},xs=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},pq=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:xs(n.h),s:xs(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:xs(i/2),a:xs(r,2)}},o3=function(n){var e=pq(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},eC=function(n){var e=pq(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},mq=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),a=r*(1-t),o=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:xs(255*[r,o,a,a,l,r][u]),g:xs(255*[l,r,r,o,a,a][u]),b:xs(255*[a,a,l,r,r,o][u]),a:xs(i,2)}},gq=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),a=s-Math.min(e,t,r),o=a?s===e?(t-r)/a:s===t?2+(r-e)/a:4+(e-t)/a:0;return{h:xs(60*(o<0?o+6:o)),s:xs(s?a/s*100:0),v:xs(s/255*100),a:i}},vq=Ae.memo(function(n){var e=n.hue,t=n.onChange,r=fy(["react-colorful__hue",n.className]);return Ae.createElement("div",{className:r},Ae.createElement(JP,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:Qp(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":xs(e),"aria-valuemax":"360","aria-valuemin":"0"},Ae.createElement(QP,{className:"react-colorful__hue-pointer",left:e/360,color:o3({h:e,s:100,v:100,a:1})})))}),yq=Ae.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:o3({h:e.h,s:100,v:100,a:1})};return Ae.createElement("div",{className:"react-colorful__saturation",style:r},Ae.createElement(JP,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:Qp(e.s+100*i.left,0,100),v:Qp(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+xs(e.s)+"%, Brightness "+xs(e.v)+"%"},Ae.createElement(QP,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:o3(e)})))}),eR=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function xq(n,e,t){var r=s3(t),i=z.useState(function(){return n.toHsva(e)}),s=i[0],a=i[1],o=z.useRef({color:e,hsva:s});z.useEffect(function(){if(!n.equal(e,o.current.color)){var u=n.toHsva(e);o.current={hsva:u,color:e},a(u)}},[e,n]),z.useEffect(function(){var u;eR(s,o.current.hsva)||n.equal(u=n.fromHsva(s),o.current.color)||(o.current={hsva:s,color:u},r(u))},[s,n,r]);var l=z.useCallback(function(u){a(function(c){return Object.assign({},c,u)})},[]);return[s,l]}var m3e=typeof window<"u"?z.useLayoutEffect:z.useEffect,g3e=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},iz=new Map,bq=function(n){m3e(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!iz.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,iz.set(e,t);var r=g3e();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},v3e=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,a=ZP(n,["className","colorModel","color","onChange"]),o=z.useRef(null);bq(o);var l=xq(t,i,s),u=l[0],c=l[1],f=fy(["react-colorful",e]);return Ae.createElement("div",Rm({},a,{ref:o,className:f}),Ae.createElement(yq,{hsva:u,onChange:c}),Ae.createElement(vq,{hue:u.h,onChange:c,className:"react-colorful__last-control"}))},y3e=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+eC(Object.assign({},t,{a:0}))+", "+eC(Object.assign({},t,{a:1}))+")"},s=fy(["react-colorful__alpha",e]),a=xs(100*t.a);return Ae.createElement("div",{className:s},Ae.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),Ae.createElement(JP,{onMove:function(o){r({a:o.left})},onKey:function(o){r({a:Qp(t.a+o.left)})},"aria-label":"Alpha","aria-valuetext":a+"%","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"},Ae.createElement(QP,{className:"react-colorful__alpha-pointer",left:t.a,color:eC(t)})))},x3e=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,a=ZP(n,["className","colorModel","color","onChange"]),o=z.useRef(null);bq(o);var l=xq(t,i,s),u=l[0],c=l[1],f=fy(["react-colorful",e]);return Ae.createElement("div",Rm({},a,{ref:o,className:f}),Ae.createElement(yq,{hsva:u,onChange:c}),Ae.createElement(vq,{hue:u.h,onChange:c}),Ae.createElement(y3e,{hsva:u,onChange:c,className:"react-colorful__last-control"}))},b3e={defaultColor:{r:0,g:0,b:0,a:1},toHsva:gq,fromHsva:mq,equal:eR},w3e=function(n){return Ae.createElement(x3e,Rm({},n,{colorModel:b3e}))},S3e={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return gq({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=mq(n)).r,g:e.g,b:e.b};var e},equal:eR},_3e=function(n){return Ae.createElement(v3e,Rm({},n,{colorModel:S3e}))},wq={exports:{}},E3e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",M3e=E3e,C3e=M3e;function Sq(){}function _q(){}_q.resetWarningCache=Sq;var A3e=function(){function n(r,i,s,a,o,l){if(l!==C3e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:_q,resetWarningCache:Sq};return t.PropTypes=t,t};wq.exports=A3e();var T3e=wq.exports;const Qn=so(T3e);function Om(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})}function Im(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function D3e(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s}function N3e(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(D3e(arguments[e]));return n}var P3e=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function dy(n,e){var t=R3e(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function R3e(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=P3e.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var O3e=[".DS_Store","Thumbs.db"];function I3e(n){return Om(this,void 0,void 0,function(){return Im(this,function(e){return PS(n)&&k3e(n)?[2,z3e(n.dataTransfer,n.type)]:L3e(n)?[2,F3e(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,B3e(n)]:[2,[]]})})}function k3e(n){return PS(n.dataTransfer)}function L3e(n){return PS(n)&&PS(n.target)}function PS(n){return typeof n=="object"&&n!==null}function F3e(n){return l3(n.target.files).map(function(e){return dy(e)})}function B3e(n){return Om(this,void 0,void 0,function(){var e;return Im(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return dy(r)})]}})})}function z3e(n,e){return Om(this,void 0,void 0,function(){var t,r;return Im(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=l3(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(U3e))]):[3,2];case 1:return r=i.sent(),[2,sz(Eq(r))];case 2:return[2,sz(l3(n.files).map(function(s){return dy(s)}))]}})})}function sz(n){return n.filter(function(e){return O3e.indexOf(e.name)===-1})}function l3(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function U3e(n){if(typeof n.webkitGetAsEntry!="function")return az(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?Mq(e):az(n)}function Eq(n){return n.reduce(function(e,t){return N3e(e,Array.isArray(t)?Eq(t):[t])},[])}function az(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=dy(e);return Promise.resolve(t)}function $3e(n){return Om(this,void 0,void 0,function(){return Im(this,function(e){return[2,n.isDirectory?Mq(n):V3e(n)]})})}function Mq(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var a=this;e.readEntries(function(o){return Om(a,void 0,void 0,function(){var l,u,c;return Im(this,function(f){switch(f.label){case 0:if(o.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=f.sent(),t(l),[3,4];case 3:return u=f.sent(),r(u),[3,4];case 4:return[3,6];case 5:c=Promise.all(o.map($3e)),i.push(c),s(),f.label=6;case 6:return[2]}})})},function(o){r(o)})}s()})}function V3e(n){return Om(this,void 0,void 0,function(){return Im(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=dy(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var H3e=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(a){var o=a.trim().toLowerCase();return o.charAt(0)==="."?r.toLowerCase().endsWith(o):o.endsWith("/*")?s===o.replace(/\/.*$/,""):i===o})}return!0};function oz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function lz(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oz(Object(t),!0).forEach(function(r){Cq(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Cq(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uz(n,e){return q3e(n)||j3e(n,e)||G3e(n,e)||W3e()}function W3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G3e(n,e){if(n){if(typeof n=="string")return cz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return cz(n,e)}}function cz(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function j3e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,a,o;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function q3e(n){if(Array.isArray(n))return n}var X3e="file-invalid-type",Y3e="file-too-large",K3e="file-too-small",Z3e="too-many-files",J3e=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:X3e,message:"File type must be ".concat(t)}},fz=function(e){return{code:Y3e,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},dz=function(e){return{code:K3e,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Q3e={code:Z3e,message:"Too many files"};function Aq(n,e){var t=n.type==="application/x-moz-file"||H3e(n,e);return[t,t?null:J3e(e)]}function Tq(n,e,t){if(wg(n.size))if(wg(e)&&wg(t)){if(n.size>t)return[!1,fz(t)];if(n.size<e)return[!1,dz(e)]}else{if(wg(e)&&n.size<e)return[!1,dz(e)];if(wg(t)&&n.size>t)return[!1,fz(t)]}return[!0,null]}function wg(n){return n!=null}function eDe(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,a=n.maxFiles;return!s&&e.length>1||s&&a>=1&&e.length>a?!1:e.every(function(o){var l=Aq(o,t),u=uz(l,1),c=u[0],f=Tq(o,r,i),d=uz(f,1),h=d[0];return c&&h})}function RS(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function mx(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function hz(n){n.preventDefault()}function tDe(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function nDe(n){return n.indexOf("Edge/")!==-1}function rDe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return tDe(n)||nDe(n)}function Ko(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return e.some(function(o){return!RS(r)&&o&&o.apply(void 0,[r].concat(s)),RS(r)})}}function iDe(){return"showOpenFilePicker"in window}function sDe(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return lz(lz({},e),{},Cq({},t,[]))},{}):{}}]}function aDe(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function oDe(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var lDe=["children"],uDe=["open"],cDe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],fDe=["refKey","onChange","onClick"];function dDe(n){return mDe(n)||pDe(n)||Dq(n)||hDe()}function hDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pDe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function mDe(n){if(Array.isArray(n))return u3(n)}function tC(n,e){return yDe(n)||vDe(n,e)||Dq(n,e)||gDe()}function gDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dq(n,e){if(n){if(typeof n=="string")return u3(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u3(n,e)}}function u3(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function vDe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,a,o;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function yDe(n){if(Array.isArray(n))return n}function pz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function gr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pz(Object(t),!0).forEach(function(r){c3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function c3(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OS(n,e){if(n==null)return{};var t=xDe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function xDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var tR=z.forwardRef(function(n,e){var t=n.children,r=OS(n,lDe),i=Pq(r),s=i.open,a=OS(i,uDe);return z.useImperativeHandle(e,function(){return{open:s}},[s]),Ae.createElement(z.Fragment,null,t(gr(gr({},a),{},{open:s})))});tR.displayName="Dropzone";var Nq={disabled:!1,getFilesFromEvent:I3e,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};tR.defaultProps=Nq;tR.propTypes={children:Qn.func,accept:Qn.oneOfType([Qn.string,Qn.arrayOf(Qn.string)]),multiple:Qn.bool,preventDropOnDocument:Qn.bool,noClick:Qn.bool,noKeyboard:Qn.bool,noDrag:Qn.bool,noDragEventsBubbling:Qn.bool,minSize:Qn.number,maxSize:Qn.number,maxFiles:Qn.number,disabled:Qn.bool,getFilesFromEvent:Qn.func,onFileDialogCancel:Qn.func,onFileDialogOpen:Qn.func,useFsAccessApi:Qn.bool,onDragEnter:Qn.func,onDragLeave:Qn.func,onDragOver:Qn.func,onDrop:Qn.func,onDropAccepted:Qn.func,onDropRejected:Qn.func,validator:Qn.func};var f3={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function Pq(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=gr(gr({},Nq),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,a=e.minSize,o=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,f=e.onDragOver,d=e.onDrop,h=e.onDropAccepted,p=e.onDropRejected,v=e.onFileDialogCancel,y=e.onFileDialogOpen,m=e.useFsAccessApi,S=e.preventDropOnDocument,b=e.noClick,g=e.noKeyboard,w=e.noDrag,x=e.noDragEventsBubbling,M=e.validator,A=z.useMemo(function(){return typeof y=="function"?y:mz},[y]),N=z.useMemo(function(){return typeof v=="function"?v:mz},[v]),C=z.useRef(null),T=z.useRef(null),R=z.useReducer(bDe,f3),U=tC(R,2),F=U[0],B=U[1],D=F.isFocused,O=F.isFileDialogActive,$=F.draggedFiles,L=z.useRef(typeof window<"u"&&window.isSecureContext&&m&&iDe()),X=function(){!L.current&&O&&setTimeout(function(){if(T.current){var J=T.current.files;J.length||(B({type:"closeDialog"}),N())}},300)};z.useEffect(function(){return window.addEventListener("focus",X,!1),function(){window.removeEventListener("focus",X,!1)}},[T,O,N,L]);var Z=z.useRef([]),Q=function(J){C.current&&C.current.contains(J.target)||(J.preventDefault(),Z.current=[])};z.useEffect(function(){return S&&(document.addEventListener("dragover",hz,!1),document.addEventListener("drop",Q,!1)),function(){S&&(document.removeEventListener("dragover",hz),document.removeEventListener("drop",Q))}},[C,S]);var K=z.useCallback(function(q){q.preventDefault(),q.persist(),ne(q),Z.current=[].concat(dDe(Z.current),[q.target]),mx(q)&&Promise.resolve(i(q)).then(function(J){RS(q)&&!x||(B({draggedFiles:J,isDragActive:!0,type:"setDraggedFiles"}),u&&u(q))})},[i,u,x]),re=z.useCallback(function(q){q.preventDefault(),q.persist(),ne(q);var J=mx(q);if(J&&q.dataTransfer)try{q.dataTransfer.dropEffect="copy"}catch{}return J&&f&&f(q),!1},[f,x]),ce=z.useCallback(function(q){q.preventDefault(),q.persist(),ne(q);var J=Z.current.filter(function(Se){return C.current&&C.current.contains(Se)}),be=J.indexOf(q.target);be!==-1&&J.splice(be,1),Z.current=J,!(J.length>0)&&(B({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),mx(q)&&c&&c(q))},[C,c,x]),ue=z.useCallback(function(q,J){var be=[],Se=[];q.forEach(function(Ne){var Fe=Aq(Ne,t),He=tC(Fe,2),Oe=He[0],Je=He[1],qe=Tq(Ne,a,s),lt=tC(qe,2),at=lt[0],ge=lt[1],We=M?M(Ne):null;if(Oe&&at&&!We)be.push(Ne);else{var W=[Je,ge];We&&(W=W.concat(We)),Se.push({file:Ne,errors:W.filter(function(pe){return pe})})}}),(!o&&be.length>1||o&&l>=1&&be.length>l)&&(be.forEach(function(Ne){Se.push({file:Ne,errors:[Q3e]})}),be.splice(0)),B({acceptedFiles:be,fileRejections:Se,type:"setFiles"}),d&&d(be,Se,J),Se.length>0&&p&&p(Se,J),be.length>0&&h&&h(be,J)},[B,o,t,a,s,l,d,h,p,M]),me=z.useCallback(function(q){q.preventDefault(),q.persist(),ne(q),Z.current=[],mx(q)&&Promise.resolve(i(q)).then(function(J){RS(q)&&!x||ue(J,q)}),B({type:"reset"})},[i,ue,x]),Ee=z.useCallback(function(){if(L.current){B({type:"openDialog"}),A();var q={multiple:o,types:sDe(t)};window.showOpenFilePicker(q).then(function(J){return i(J)}).then(function(J){ue(J,null),B({type:"closeDialog"})}).catch(function(J){aDe(J)?(N(J),B({type:"closeDialog"})):oDe(J)&&(L.current=!1,T.current&&(T.current.value=null,T.current.click()))});return}T.current&&(B({type:"openDialog"}),A(),T.current.value=null,T.current.click())},[B,A,N,m,ue,t,o]),xe=z.useCallback(function(q){!C.current||!C.current.isEqualNode(q.target)||(q.key===" "||q.key==="Enter"||q.keyCode===32||q.keyCode===13)&&(q.preventDefault(),Ee())},[C,Ee]),Te=z.useCallback(function(){B({type:"focus"})},[]),De=z.useCallback(function(){B({type:"blur"})},[]),ie=z.useCallback(function(){b||(rDe()?setTimeout(Ee,0):Ee())},[b,Ee]),Ie=function(J){return r?null:J},ke=function(J){return g?null:Ie(J)},te=function(J){return w?null:Ie(J)},ne=function(J){x&&J.stopPropagation()},Ce=z.useMemo(function(){return function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=q.refKey,be=J===void 0?"ref":J,Se=q.role,Ne=q.onKeyDown,Fe=q.onFocus,He=q.onBlur,Oe=q.onClick,Je=q.onDragEnter,qe=q.onDragOver,lt=q.onDragLeave,at=q.onDrop,ge=OS(q,cDe);return gr(gr(c3({onKeyDown:ke(Ko(Ne,xe)),onFocus:ke(Ko(Fe,Te)),onBlur:ke(Ko(He,De)),onClick:Ie(Ko(Oe,ie)),onDragEnter:te(Ko(Je,K)),onDragOver:te(Ko(qe,re)),onDragLeave:te(Ko(lt,ce)),onDrop:te(Ko(at,me)),role:typeof Se=="string"&&Se!==""?Se:"button"},be,C),!r&&!g?{tabIndex:0}:{}),ge)}},[C,xe,Te,De,ie,K,re,ce,me,g,w,r]),se=z.useCallback(function(q){q.stopPropagation()},[]),j=z.useMemo(function(){return function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=q.refKey,be=J===void 0?"ref":J,Se=q.onChange,Ne=q.onClick,Fe=OS(q,fDe),He=c3({accept:t,multiple:o,type:"file",style:{display:"none"},onChange:Ie(Ko(Se,me)),onClick:Ie(Ko(Ne,se)),tabIndex:-1},be,T);return gr(gr({},He),Fe)}},[T,t,o,me,r]),G=$.length,fe=G>0&&eDe({files:$,accept:t,minSize:a,maxSize:s,multiple:o,maxFiles:l}),Me=G>0&&!fe;return gr(gr({},F),{},{isDragAccept:fe,isDragReject:Me,isFocused:D&&!r,getRootProps:Ce,getInputProps:j,rootRef:C,inputRef:T,open:Ie(Ee)})}function bDe(n,e){switch(e.type){case"focus":return gr(gr({},n),{},{isFocused:!0});case"blur":return gr(gr({},n),{},{isFocused:!1});case"openDialog":return gr(gr({},f3),{},{isFileDialogActive:!0});case"closeDialog":return gr(gr({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return gr(gr({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return gr(gr({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return gr({},f3);default:return n}}function mz(){}function wDe(n){let e;const t=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const d=e;e=c?f:Object.assign({},e,f),t.forEach(h=>h(e,d))}},i=()=>e,s=(u,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=c(e);function h(){const p=c(e);if(!f(d,p)){const v=d;u(d=p,v)}}return t.add(h),()=>t.delete(h)},l={setState:r,getState:i,subscribe:(u,c,f)=>c||f?s(u,c,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const SDe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),gz=SDe?z.useEffect:z.useLayoutEffect;function nR(n){const e=typeof n=="function"?wDe(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=z.useReducer(y=>y+1,0),a=e.getState(),o=z.useRef(a),l=z.useRef(r),u=z.useRef(i),c=z.useRef(!1),f=z.useRef();f.current===void 0&&(f.current=r(a));let d,h=!1;(o.current!==a||l.current!==r||u.current!==i||c.current)&&(d=r(a),h=!i(f.current,d)),gz(()=>{h&&(f.current=d),o.current=a,l.current=r,u.current=i,c.current=!1});const p=z.useRef(a);gz(()=>{const y=()=>{try{const S=e.getState(),b=l.current(S);u.current(f.current,b)||(o.current=S,f.current=b,s())}catch{c.current=!0,s()}},m=e.subscribe(y);return e.getState()!==p.current&&y(),m},[]);const v=h?d:f.current;return z.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const _De=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(a,o,l)=>{let u=a;if(o){const c=(l==null?void 0:l.equalityFn)||Object.is;let f=a(r.getState());u=d=>{const h=a(d);if(!c(f,h)){const p=f;o(f=h,p)}},l!=null&&l.fireImmediately&&o(f,f)}return i(u)},n(e,t,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var EDe=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var MDe=EDe;function vz(n){return MDe(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var Rq=function(e){var t,r;return!(vz(e)===!1||(t=e.constructor,typeof t!="function")||(r=t.prototype,vz(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var CDe=Rq,rR=function(e){return CDe(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ADe=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break},TDe=rR,DDe=ADe;function Oq(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];d3(i)&&DDe(i,NDe,n)}return n}function NDe(n,e){if(PDe(e)){var t=this[e];d3(n)&&d3(t)?Oq(t,n):this[e]=n}}function d3(n){return TDe(n)&&!Array.isArray(n)}function PDe(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var RDe=Oq;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ODe=function(n,e,t,r,i){if(!IDe(n)||!e)return n;if(e=gx(e),t&&(e+="."+gx(t)),r&&(e+="."+gx(r)),i&&(e+="."+gx(i)),e in n)return n[e];for(var s=e.split("."),a=s.length,o=-1;n&&++o<a;){for(var l=s[o];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++o];n=n[l]}return n};function IDe(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function gx(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var kDe=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var a=Object(arguments[s]),o=Object.getOwnPropertySymbols(a),l=0;l<o.length;l++){var u=o[l];t.call(a,u)&&(r[u]=a[u])}return r},LDe=rR,FDe=kDe,BDe=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");yz(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];UDe(t)&&(t=$De(t)),yz(t)&&(zDe(n,t),FDe(n,t))}return n};function zDe(n,e){for(var t in e)VDe(e,t)&&(n[t]=e[t])}function UDe(n){return n&&typeof n=="string"}function $De(n){var e={};for(var t in n)e[t]=n[t];return e}function yz(n){return n&&typeof n=="object"||LDe(n)}function VDe(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var HDe=BDe,WDe=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=HDe({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var a=[],o=[],l=[""],u=r.sep,c=n.length,f=-1,d;function h(){if(s&&o.length)return s[o[o.length-1]]}for(;++f<c;){var p=n[f],v=n[f+1],y={val:p,idx:f,arr:l,str:n};if(a.push(y),p==="\\"){y.val=jDe(r,n,f)===!0?p+v:v,y.escaped=!0,typeof t=="function"&&t(y),l[l.length-1]+=y.val,f++;continue}if(s&&s[p]){o.push(p);var m=h(),S=f+1;if(n.indexOf(m,S+1)!==-1)for(;o.length&&S<c;){var b=n[++S];if(b==="\\"){b++;continue}if(i.indexOf(b)!==-1){S=h3(n,b,S+1);continue}if(m=h(),o.length&&n.indexOf(m,S+1)===-1)break;if(s[b]){o.push(b);continue}m===b&&o.pop()}if(d=S,d===-1){l[l.length-1]+=p;continue}p=n.slice(f,d+1),y.val=p,y.idx=f=d}if(i.indexOf(p)!==-1){if(d=h3(n,p,f+1),d===-1){l[l.length-1]+=p;continue}GDe(p,r)===!0?p=n.slice(f,d+1):p=n.slice(f+1,d),y.val=p,y.idx=f=d}if(typeof t=="function"&&(t(y,a),p=y.val,f=y.idx),y.val===u&&y.split!==!1){l.push("");continue}l[l.length-1]+=y.val}return l};function h3(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?h3(n,e,i+1):i}function GDe(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function jDe(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var qDe=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},xz=qDe,XDe=function(e){xz(e)||(e={});for(var t=arguments.length,r=1;r<t;r++){var i=arguments[r];xz(i)&&YDe(e,i)}return e};function YDe(n,e){for(var t in e)KDe(e,t)&&(n[t]=e[t])}function KDe(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ZDe=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var JDe=WDe,QDe=XDe,bz=Rq,wz=ZDe,eNe=function(n,e,t){if(!wz(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=JDe(e,{sep:".",brackets:!0}).filter(tNe),i=r.length,s=-1,a=n;++s<i;){var o=r[s];if(s!==i-1){wz(a[o])||(a[o]={}),a=a[o];continue}bz(a[o])&&bz(t)?a[o]=QDe({},a[o],t):a[o]=t}return n};function tNe(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var nC=rR,Sz=RDe,nNe=ODe,_z=eNe,rNe=function(e,t,r){if(!nC(e))throw new TypeError("expected an object");if(typeof t!="string"||r==null)return Sz.apply(null,arguments);if(typeof r=="string")return _z(e,t,r),e;var i=nNe(e,t);return nC(r)&&nC(i)&&(r=Sz({},i,r)),_z(e,t,r),e};const iNe=so(rNe),iR=(...n)=>n.filter(Boolean).join(".");function sNe(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function aNe(n,e){return Object.entries(NAe(n,e)).reduce((t,[,{value:r,disabled:i,key:s}])=>(t[s]=i?void 0:r,t),{})}function oNe(n,e){const t=z.useRef();return t0(n,t.current)||(t.current=n),t.current}function Iq(n,e){return z.useMemo(n,oNe(e))}function lNe(n){const e=z.useRef(null),t=z.useRef(null),r=z.useRef(!0);return z.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),z.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,a=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",a,{once:!0});const{height:o}=t.current.getBoundingClientRect();return s.style.height=o+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",a),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const uNe=n=>{const[e,t]=z.useState(n.getVisiblePaths());return z.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:X_});return()=>r()},[n]),e};function cNe(n,e,t){return n.useStore(i=>{const s=jt(jt({},t),i.data);return aNe(s,e)},X_)}function kq(n=3){const e=z.useRef(null),t=z.useRef(null),[r,i]=z.useState(!1),s=z.useCallback(()=>i(!0),[]),a=z.useCallback(()=>i(!1),[]);return z.useLayoutEffect(()=>{if(r){const{bottom:o,top:l,left:u}=e.current.getBoundingClientRect(),{height:c}=t.current.getBoundingClientRect(),f=o+c>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",f==="down"?t.current.style.top=o+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:a}}h3e([p3e]);const fNe={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Hs.extend({color:()=>n=>ps(n).isValid()});const dNe=n=>Hs().color().test(n);function Lq(n,{format:e,hasAlpha:t,isString:r}){const i=fNe[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?PAe(s,["a"]):s}const Fq=(n,e)=>{const t=ps(n);if(!t.isValid())throw Error("Invalid color");return Lq(t,e)},hNe=(n,e)=>Lq(ps(n),jt(jt({},e),{},{isString:!0,format:"hex"})),pNe=({value:n})=>{const e=d3e(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:Fq(n,i),settings:i}};var mNe=Object.freeze({__proto__:null,schema:dNe,sanitize:Fq,format:hNe,normalize:pNe});const gNe=Gt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),vNe=Gt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),yNe=Gt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function Ez(n,e){return e!=="rgb"?ps(n).toRgb():n}function xNe({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=as(),{format:a,hasAlpha:o}=t,{popinRef:l,wrapperRef:u,shown:c,show:f,hide:d}=kq(),h=z.useRef(0),[p,v]=z.useState(()=>Ez(n,a)),y=o?w3e:_3e,m=()=>{v(Ez(n,a)),f(),i()},S=()=>{d(),s(),window.clearTimeout(h.current)},b=()=>{h.current=window.setTimeout(S,500)};return z.useEffect(()=>()=>window.clearTimeout(h.current),[]),Ae.createElement(Ae.Fragment,null,Ae.createElement(gNe,{ref:l,active:c,onClick:()=>m(),style:{color:e}}),c&&Ae.createElement(XP,null,Ae.createElement(tq,{onPointerUp:S}),Ae.createElement(yNe,{ref:u,onMouseEnter:()=>window.clearTimeout(h.current),onMouseLeave:g=>g.buttons===0&&b()},Ae.createElement(y,{color:p,onChange:r}))))}function bNe(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=as();return Ae.createElement(oo,{input:!0},Ae.createElement(ko,null,t),Ae.createElement(vNe,null,Ae.createElement(xNe,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),Ae.createElement(qP,{value:e,onChange:r,onUpdate:i})))}var wNe=jt({component:bNe},mNe);function SNe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=as();return Ae.createElement(oo,{input:!0},Ae.createElement(ko,null,n),Ae.createElement(KP,{value:e,settings:r,onUpdate:t}))}var _Ne=jt({component:SNe},uq(["x","y","z"]));const ENe=Gt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),MNe=Gt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function CNe({value:n,settings:e,onUpdate:t}){const r=z.useRef(),i=z.useRef(0),s=z.useRef(0),a=z.useRef(1),[o,l]=z.useState(!1),[u,c]=z.useState(!1),[f,d]=rq(),h=z.useRef(null),p=z.useRef(null);z.useLayoutEffect(()=>{if(o){const{top:R,left:U,width:F,height:B}=h.current.getBoundingClientRect();p.current.style.left=U+F/2+"px",p.current.style.top=R+B/2+"px"}},[o]);const{keys:[v,y],joystick:m}=e,S=m==="invertY"?1:-1,{[v]:{step:b},[y]:{step:g}}=e,w=cu("sizes","joystickWidth"),x=cu("sizes","joystickHeight"),M=parseFloat(w)*.8/2,A=parseFloat(x)*.8/2,N=z.useCallback(()=>{r.current||(c(!0),i.current&&d({x:i.current*M}),s.current&&d({y:s.current*-A}),r.current=window.setInterval(()=>{t(R=>{const U=b*i.current*a.current,F=S*g*s.current*a.current;return Array.isArray(R)?{[v]:R[0]+U,[y]:R[1]+F}:{[v]:R[v]+U,[y]:R[y]+F}})},16))},[M,A,t,d,b,g,v,y,S]),C=z.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,c(!1)},[]);z.useEffect(()=>{function R(U){a.current=$j(U)}return window.addEventListener("keydown",R),window.addEventListener("keyup",R),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",R),window.removeEventListener("keyup",R)}},[]);const T=cy(({first:R,active:U,delta:[F,B],movement:[D,O]})=>{R&&l(!0);const $=Gc(D,-M,M),L=Gc(O,-A,A);i.current=Math.abs(D)>Math.abs($)?Math.sign(D-$):0,s.current=Math.abs(O)>Math.abs(L)?Math.sign(L-O):0;let X=n[v],Z=n[y];U?(i.current||(X+=F*b*a.current,d({x:$})),s.current||(Z-=S*B*g*a.current,d({y:L})),i.current||s.current?N():C(),t({[v]:X,[y]:Z})):(l(!1),i.current=0,s.current=0,d({x:0,y:0}),C())});return Ae.createElement(ENe,Er({ref:h},T()),o&&Ae.createElement(XP,null,Ae.createElement(MNe,{ref:p,isOutOfBounds:u},Ae.createElement("div",null),Ae.createElement("span",{ref:f}))))}const ANe=Gt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function TNe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=as();return Ae.createElement(oo,{input:!0},Ae.createElement(ko,null,n),Ae.createElement(ANe,{withJoystick:!!r.joystick},r.joystick&&Ae.createElement(CNe,{value:e,settings:r,onUpdate:t}),Ae.createElement(KP,{value:e,settings:r,onUpdate:t})))}const DNe=["joystick"],Bq=uq(["x","y"]),NNe=n=>{let{joystick:e=!0}=n,t=Hn(n,DNe);const{value:r,settings:i}=Bq.normalize(t);return{value:r,settings:jt(jt({},i),{},{joystick:e})}};var PNe=jt(jt({component:TNe},Bq),{},{normalize:NNe});const RNe=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob | File].")}},ONe=(n,e)=>typeof e=="object"&&"image"in e,INe=({image:n})=>({value:n});var kNe=Object.freeze({__proto__:null,sanitize:RNe,schema:ONe,normalize:INe});const LNe=Gt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),FNe=Gt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),BNe=Gt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),zNe=Gt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),UNe=Gt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),$Ne=Gt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function VNe(){const{label:n,value:e,onUpdate:t,disabled:r}=as(),{popinRef:i,wrapperRef:s,shown:a,show:o,hide:l}=kq(),u=z.useCallback(p=>{p.length&&t(p[0])},[t]),c=z.useCallback(p=>{p.stopPropagation(),t(void 0)},[t]),{getRootProps:f,getInputProps:d,isDragAccept:h}=Pq({maxFiles:1,accept:"image/*",onDrop:u,disabled:r});return Ae.createElement(oo,{input:!0},Ae.createElement(ko,null,n),Ae.createElement(LNe,null,Ae.createElement(BNe,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&o(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),a&&!!e&&Ae.createElement(XP,null,Ae.createElement(tq,{onPointerUp:l,style:{cursor:"pointer"}}),Ae.createElement(zNe,{ref:s,style:{backgroundImage:`url(${e})`}})),Ae.createElement(FNe,f({isDragAccept:h}),Ae.createElement("input",d()),Ae.createElement(UNe,null,h?"drop image":"click or drop")),Ae.createElement($Ne,{onClick:c,disabled:!e})))}var HNe=jt({component:VNe},kNe);const Mz=Hs().number(),WNe=(n,e)=>Hs().array().length(2).every.number().test(n)&&Hs().schema({min:Mz,max:Mz}).test(e),IS=n=>({min:n[0],max:n[1]}),zq=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?IS(n):n,s={min:r[0],max:r[1]},{min:a,max:o}=jt(jt({},s),i);return[Gc(Number(a),e,Math.max(e,o)),Gc(Number(o),Math.min(t,a),t)]},GNe=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=lq(IS(n),{min:r,max:r}),s=[e,t],a=jt(jt({},i),{},{bounds:s});return{value:zq(IS(n),a,n),settings:a}};var jNe=Object.freeze({__proto__:null,schema:WNe,format:IS,sanitize:zq,normalize:GNe});const qNe=["value","bounds","onDrag"],XNe=["bounds"],YNe=Gt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function KNe(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=Hn(n,qNe);const a=z.useRef(null),o=z.useRef(null),l=z.useRef(null),u=z.useRef(0),c=cu("sizes","scrubberWidth"),f=cy(({event:p,first:v,xy:[y],movement:[m],memo:S={}})=>{if(v){const{width:g,left:w}=a.current.getBoundingClientRect();u.current=g-parseFloat(c);const x=(p==null?void 0:p.target)===o.current||(p==null?void 0:p.target)===l.current;S.pos=DS((y-w)/g,t,r);const M=Math.abs(S.pos-e.min)-Math.abs(S.pos-e.max);S.key=M<0||M===0&&S.pos<=e.min?"min":"max",x&&(S.pos=e[S.key])}const b=S.pos+DS(m/u.current,0,r-t);return i({[S.key]:xTe(b,s[S.key])}),S}),d=`calc(${TS(e.min,t,r)} * (100% - ${c} - 8px) + 4px)`,h=`calc(${1-TS(e.max,t,r)} * (100% - ${c} - 8px) + 4px)`;return Ae.createElement(sq,Er({ref:a},f()),Ae.createElement(iq,null,Ae.createElement(aq,{style:{left:d,right:h}})),Ae.createElement(t3,{position:"left",ref:o,style:{left:d}}),Ae.createElement(t3,{position:"right",ref:l,style:{right:h}}))}function ZNe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=as(),i=Hn(r,XNe);return Ae.createElement(Ae.Fragment,null,Ae.createElement(oo,{input:!0},Ae.createElement(ko,null,n),Ae.createElement(YNe,null,Ae.createElement(KNe,Er({value:e},r,{onDrag:t})),Ae.createElement(KP,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var JNe=jt({component:ZNe},jNe);const QNe=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},ePe=["type","value"],tPe=["onChange","transient","onEditStart","onEditEnd"],Uq=function(){const e=nR(_De(()=>({data:{}}))),t=QNe();this.storeId=DAe(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const a=this.getData(),o=Object.keys(a),l=[];Object.entries(r).forEach(([c,f])=>{f.render&&o.some(d=>d.indexOf(c)===0)&&!f.render(this.get)&&l.push(c+".")});const u=[];return i.forEach(c=>{c in a&&a[c].__refCount>0&&l.every(f=>c.indexOf(f)===-1)&&(!a[c].render||a[c].render(this.get))&&u.push(c)}),u},this.setOrderedPaths=a=>{a.forEach(o=>i.add(o))},this.orderPaths=a=>(this.setOrderedPaths(a),a),this.disposePaths=a=>{e.setState(o=>{const l=o.data;return a.forEach(u=>{if(u in l){const c=l[u];c.__refCount--,c.__refCount===0&&c.type in Ka&&delete l[u]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=a=>r[a]||{},this.getData=()=>e.getState().data,this.addData=(a,o)=>{e.setState(l=>{const u=l.data;return Object.entries(a).forEach(([c,f])=>{let d=u[c];if(d){const{type:h,value:p}=f,v=Hn(f,ePe);h!==d.type?Ql(vr.INPUT_TYPE_OVERRIDE,h):((d.__refCount===0||o)&&Object.assign(d,v),d.__refCount++)}else u[c]=jt(jt({},f),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(a,o,l)=>{e.setState(u=>{const c=u.data;return X5(c[a],o,a,this,l),{data:c}})},this.setSettingsAtPath=(a,o)=>{e.setState(l=>{const u=l.data;return u[a].settings=jt(jt({},u[a].settings),o),{data:u}})},this.disableInputAtPath=(a,o)=>{e.setState(l=>{const u=l.data;return u[a].disabled=o,{data:u}})},this.set=(a,o)=>{e.setState(l=>{const u=l.data;return Object.entries(a).forEach(([c,f])=>{try{X5(u[c],f,void 0,void 0,o)}catch{}}),{data:u}})},this.getInput=a=>{try{return this.getData()[a]}catch{Ql(vr.PATH_DOESNT_EXIST,a)}},this.get=a=>{var o;return(o=this.getInput(a))===null||o===void 0?void 0:o.value},this.emitOnEditStart=a=>{t.emit(`onEditStart:${a}`,this.get(a),a,jt(jt({},this.getInput(a)),{},{get:this.get}))},this.emitOnEditEnd=a=>{t.emit(`onEditEnd:${a}`,this.get(a),a,jt(jt({},this.getInput(a)),{},{get:this.get}))},this.subscribeToEditStart=(a,o)=>{const l=`onEditStart:${a}`;return t.on(l,o),()=>t.off(l,o)},this.subscribeToEditEnd=(a,o)=>{const l=`onEditEnd:${a}`;return t.on(l,o),()=>t.off(l,o)};const s=(a,o,l)=>{const u={};return Object.entries(a).forEach(([c,f])=>{if(c==="")return Ql(vr.EMPTY_KEY);let d=iR(o,c);if(f.type===Ka.FOLDER){const h=s(f.schema,d,l);Object.assign(u,h),d in r||(r[d]=f.settings)}else if(c in l)Ql(vr.DUPLICATE_KEYS,c,d,l[c].path);else{const h=FAe(f,c,d,u);if(h){const{type:p,options:v,input:y}=h,{onChange:m,transient:S,onEditStart:b,onEditEnd:g}=v,w=Hn(v,tPe);u[d]=jt(jt(jt({type:p},w),y),{},{fromPanel:!0}),l[c]={path:d,onChange:m,transient:S,onEditStart:b,onEditEnd:g}}else Ql(vr.UNKNOWN_INPUT,d,f)}}),u};this.getDataFromSchema=a=>{const o={};return[s(a,"",o),o]}},$q=new Uq;function vx(){return z.useMemo(()=>new Uq,[])}const nPe={collapsed:!1};function rPe(n,e){return{type:Ka.FOLDER,schema:n,settings:jt(jt({},nPe),e)}}const iPe={disabled:!1};function fu(n,e){return{type:Ka.BUTTON,onClick:n,settings:jt(jt({},iPe),e)}}const Cz=n=>"__levaInput"in n,sPe=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,a]=sNe(i);(!r||s.toLowerCase().indexOf(r)>-1)&&iNe(t,a,{[s]:{__levaInput:!0,path:i}})}),t},aPe=["type","label","path","valueKey","value","settings","setValue","disabled"];function oPe(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:a,setValue:o,disabled:l}=n,u=Hn(n,aPe);const{displayValue:c,onChange:f,onUpdate:d}=nq({type:e,value:s,settings:a,setValue:o}),h=_d[e].component;return h?Ae.createElement(jj.Provider,{value:jt({key:i,path:r,id:""+r,label:t,displayValue:c,value:s,onChange:f,onUpdate:d,settings:a,setValue:o,disabled:l},u)},Ae.createElement(rTe,{disabled:l},Ae.createElement(h,null))):(Ql(vr.NO_COMPONENT_FOR_TYPE,e,r),null)}const lPe=Gt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function uPe({onClick:n,settings:e,label:t}){const r=Pm();return Ae.createElement(oo,null,Ae.createElement(lPe,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const cPe=Gt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),fPe=Gt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),dPe=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function hPe(n){const{label:e,opts:t}=dPe(n),r=Pm();return Ae.createElement(oo,{input:!!e},e&&Ae.createElement(ko,null,e),Ae.createElement(cPe,null,Object.entries(t).map(([i,s])=>Ae.createElement(fPe,{key:i,onClick:()=>s(r.get)},i))))}const pPe=Gt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),Vq=100;function mPe(n,e){n.push(e),n.length>Vq&&n.shift()}const gPe=z.forwardRef(function({initialValue:n},e){const t=cu("colors","highlight3"),r=cu("colors","elevation2"),i=cu("colors","highlight1"),[s,a]=z.useMemo(()=>[ps(i).alpha(.4).toRgbString(),ps(i).alpha(.1).toRgbString()],[i]),o=z.useRef([n]),l=z.useRef(n),u=z.useRef(n),c=z.useRef(),f=z.useCallback((p,v)=>{if(!p)return;const{width:y,height:m}=p,S=new Path2D,b=y/Vq,g=m*.05;for(let M=0;M<o.current.length;M++){const A=TS(o.current[M],l.current,u.current),N=b*M,C=m-A*(m-g*2)-g;S.lineTo(N,C)}v.clearRect(0,0,y,m);const w=new Path2D(S);w.lineTo(b*(o.current.length+1),m),w.lineTo(0,m),w.lineTo(0,0);const x=v.createLinearGradient(0,0,0,m);x.addColorStop(0,s),x.addColorStop(1,a),v.fillStyle=x,v.fill(w),v.strokeStyle=r,v.lineJoin="round",v.lineWidth=14,v.stroke(S),v.strokeStyle=t,v.lineWidth=2,v.stroke(S)},[t,r,s,a]),[d,h]=dTe(f);return z.useImperativeHandle(e,()=>({frame:p=>{(l.current===void 0||p<l.current)&&(l.current=p),(u.current===void 0||p>u.current)&&(u.current=p),mPe(o.current,p),c.current=requestAnimationFrame(()=>f(d.current,h.current))}}),[d,h,f]),z.useEffect(()=>()=>cancelAnimationFrame(c.current),[]),Ae.createElement(pPe,{ref:d})}),Az=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),vPe=z.forwardRef(function({initialValue:n},e){const[t,r]=z.useState(Az(n));return z.useImperativeHandle(e,()=>({frame:i=>r(Az(i))}),[]),Ae.createElement("div",null,t)});function Tz(n){return typeof n=="function"?n():n.current}function yPe({label:n,objectOrFn:e,settings:t}){const r=z.useRef(),i=z.useRef(Tz(e));return z.useEffect(()=>{const s=window.setInterval(()=>{var a;document.hidden||(a=r.current)===null||a===void 0||a.frame(Tz(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),Ae.createElement(oo,{input:!0},Ae.createElement(ko,{align:"top"},n),t.graph?Ae.createElement(gPe,{ref:r,initialValue:i.current}):Ae.createElement(vPe,{ref:r,initialValue:i.current}))}const xPe=["type","label","key"],bPe={[Ka.BUTTON]:uPe,[Ka.BUTTON_GROUP]:hPe,[Ka.MONITOR]:yPe},wPe=Ae.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:a,emitOnEditEnd:o}]=pTe(n);if(!e)return null;const{type:l,label:u,key:c}=e,f=Hn(e,xPe);if(l in Ka){const d=bPe[l];return Ae.createElement(d,Er({label:u,path:n},f))}return l in _d?Ae.createElement(oPe,Er({key:s+n,type:l,label:u,storeId:s,path:n,valueKey:c,setValue:t,setSettings:r,disable:i,emitOnEditStart:a,emitOnEditEnd:o},f)):(wAe(vr.UNSUPPORTED_INPUT,l,n),null)});function SPe({toggle:n,toggled:e,name:t}){return Ae.createElement(eTe,{onClick:()=>n()},Ae.createElement(YP,{toggled:e}),Ae.createElement("div",null,t))}const _Pe=({name:n,path:e,tree:t})=>{const r=Pm(),i=iR(e,n),{collapsed:s,color:a}=r.getFolderSettings(i),[o,l]=z.useState(!s),u=z.useRef(null),c=cu("colors","folderWidgetColor"),f=cu("colors","folderTextColor");return z.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",a||c),u.current.style.setProperty("--leva-colors-folderTextColor",a||f)},[a,c,f]),Ae.createElement(NS,{ref:u},Ae.createElement(SPe,{name:n,toggled:o,toggle:()=>l(d=>!d)}),Ae.createElement(Hq,{parent:i,tree:t,toggled:o}))},Hq=Ae.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:a,contentRef:o}=lNe(s),l=Pm(),u=([f,d])=>{var h;return(Cz(d)?(h=l.getInput(d.path))===null||h===void 0?void 0:h.order:l.getFolderSettings(iR(r,f)).order)||0},c=Object.entries(i).sort((f,d)=>u(f)-u(d));return Ae.createElement(QT,{ref:a,isRoot:n,fill:e,flat:t},Ae.createElement(Jj,{ref:o,isRoot:n,toggled:s},c.map(([f,d])=>Cz(d)?Ae.createElement(wPe,{key:d.path,valueKey:d.valueKey,path:d.path}):Ae.createElement(_Pe,{key:f,name:f,path:r,tree:d}))))}),EPe=Gt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${eq}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),Wq=40,kS=Gt("i",{$flexCenter:"",width:Wq,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),MPe=Gt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),CPe=Gt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${kS}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),APe=Gt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),TPe=Gt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:Wq}}}}),DPe=Ae.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=z.useState(""),s=z.useMemo(()=>Uj(n,250),[n]),a=()=>{n(""),i("")},o=l=>{const u=l.currentTarget.value;e(!0),i(u)};return z.useEffect(()=>{s(r)},[r,s]),Ae.createElement(Ae.Fragment,null,Ae.createElement(APe,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:o}),Ae.createElement(kS,{onClick:()=>a(),style:{visibility:r?"visible":"hidden"}},Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},Ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function NPe({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:a,drag:o,filterEnabled:l,from:u}){const[c,f]=z.useState(!1),d=z.useRef(null);z.useEffect(()=>{var p,v;c?(p=d.current)===null||p===void 0||p.focus():(v=d.current)===null||v===void 0||v.blur()},[c]);const h=cy(({offset:[p,v],first:y,last:m})=>{e({x:p,y:v}),y&&t({x:p,y:v}),m&&r({x:p,y:v})},{filterTaps:!0,from:({offset:[p,v]})=>[(u==null?void 0:u.x)||p,(u==null?void 0:u.y)||v]});return z.useEffect(()=>{const p=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&f(y=>!y)};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[]),Ae.createElement(Ae.Fragment,null,Ae.createElement(MPe,{mode:o?"drag":void 0},Ae.createElement(kS,{active:!s,onClick:()=>i()},Ae.createElement(YP,{toggled:s,width:12,height:8})),Ae.createElement(TPe,Er({},o?h():{},{drag:o,filterEnabled:l}),a===void 0&&o?Ae.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},Ae.createElement("circle",{cx:"2",cy:"2",r:"2"}),Ae.createElement("circle",{cx:"14",cy:"2",r:"2"}),Ae.createElement("circle",{cx:"26",cy:"2",r:"2"}),Ae.createElement("circle",{cx:"2",cy:"12",r:"2"}),Ae.createElement("circle",{cx:"14",cy:"12",r:"2"}),Ae.createElement("circle",{cx:"26",cy:"12",r:"2"})):a),l&&Ae.createElement(kS,{active:c,onClick:()=>f(p=>!p)},Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},Ae.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),Ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),Ae.createElement(CPe,{toggled:c},Ae.createElement(DPe,{ref:d,setFilter:n,toggle:i})))}const PPe=["store","hidden","theme","collapsed"];function Gq(n){let{store:e,hidden:t=!1,theme:r,collapsed:i=!1}=n,s=Hn(n,PPe);const a=Iq(()=>XAe(r),[r]),[o,l]=z.useState(!i),u=typeof i=="object"?!i.collapsed:o,c=z.useMemo(()=>typeof i=="object"?f=>{typeof f=="function"?i.onChange(!f(!i.collapsed)):i.onChange(!f)}:l,[i]);return!e||t?null:Ae.createElement(jP.Provider,{value:a},Ae.createElement(RPe,Er({store:e},s,{toggled:u,setToggle:c,rootClass:a.className})))}const RPe=Ae.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:a={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:o=!1,toggled:l,setToggle:u})=>{var c,f;const d=uNe(n),[h,p]=z.useState(""),v=z.useMemo(()=>sPe(d,h),[d,h]),[y,m]=rq(),S=i||d.length>0,b=typeof a=="object"&&a.title||void 0,g=typeof a=="object"&&(c=a.drag)!==null&&c!==void 0?c:!0,w=typeof a=="object"&&(f=a.filter)!==null&&f!==void 0?f:!0,x=typeof a=="object"&&a.position||void 0,M=typeof a=="object"&&a.onDrag||void 0,A=typeof a=="object"&&a.onDragStart||void 0,N=typeof a=="object"&&a.onDragEnd||void 0;return Ae.useEffect(()=>{m({x:x==null?void 0:x.x,y:x==null?void 0:x.y})},[x,m]),qAe(),Ae.createElement(Xj.Provider,{value:{hideCopyButton:o}},Ae.createElement(EPe,{ref:y,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!a,style:{display:S?"block":"none"}},a&&Ae.createElement(NPe,{onDrag:C=>{m(C),M==null||M(C)},onDragStart:C=>A==null?void 0:A(C),onDragEnd:C=>N==null?void 0:N(C),setFilter:p,toggle:C=>u(T=>C??!T),toggled:l,title:b,drag:g,filterEnabled:w,from:x}),S&&Ae.createElement(qj.Provider,{value:n},Ae.createElement(Hq,{isRoot:!0,fill:t,flat:r,tree:v,toggled:l}))))}),OPe=["isRoot"];let LS=!1,Kf=null;function IPe(n){let{isRoot:e=!1}=n,t=Hn(n,OPe);return z.useEffect(()=>(LS=!0,!e&&Kf&&(Kf.remove(),Kf=null),()=>{e||(LS=!1)}),[e]),Ae.createElement(Gq,Er({store:$q},t))}function kPe(n){z.useEffect(()=>{n&&!LS&&(Kf||(Kf=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Kf),zAe(Ae.createElement(IPe,{isRoot:!0}),Kf))),LS=!0)},[n])}const LPe=["store"];function yx(n){let{store:e}=n,t=Hn(n,LPe);const r=Pm(),i=e===void 0?r:e;return Ae.createElement(Gq,Er({store:i},t))}function FPe(n,e,t,r,i){let s,a,o,l,u;return typeof n=="string"?(a=n,s=e,Array.isArray(t)?u=t:t&&("store"in t?(l=t,u=r):(o=t,Array.isArray(r)?u=r:(l=r,u=i)))):(s=n,Array.isArray(e)?u=e:(l=e,u=t)),{schema:s,folderName:a,folderSettings:o,hookSettings:l,deps:u||[]}}function Sg(n,e,t,r,i){const{folderName:s,schema:a,folderSettings:o,hookSettings:l,deps:u}=FPe(n,e,t,r,i),c=typeof a=="function",f=z.useRef(!1),d=z.useRef(!0),h=Iq(()=>{f.current=!0;const T=typeof a=="function"?a():a;return s?{[s]:rPe(T,o)}:T},u),p=!(l!=null&&l.store);kPe(p);const[v]=z.useState(()=>(l==null?void 0:l.store)||$q),[y,m]=z.useMemo(()=>v.getDataFromSchema(h),[v,h]),[S,b,g,w,x]=z.useMemo(()=>{const T=[],R=[],U={},F={},B={};return Object.values(m).forEach(({path:D,onChange:O,onEditStart:$,onEditEnd:L,transient:X})=>{T.push(D),O?(U[D]=O,X||R.push(D)):R.push(D),$&&(F[D]=$),L&&(B[D]=L)}),[T,R,U,F,B]},[m]),M=z.useMemo(()=>v.orderPaths(S),[S,v]),A=cNe(v,b,y),N=z.useCallback(T=>{const R=Object.entries(T).reduce((U,[F,B])=>Object.assign(U,{[m[F].path]:B}),{});v.set(R,!1)},[v,m]),C=z.useCallback(T=>v.get(m[T].path),[v,m]);return z.useEffect(()=>{const T=!d.current&&f.current;return v.addData(y,T),d.current=!1,f.current=!1,()=>v.disposePaths(M)},[v,M,y]),z.useEffect(()=>{const T=[];return Object.entries(g).forEach(([R,U])=>{U(v.get(R),R,jt({initial:!0,get:v.get},v.getInput(R)));const F=v.useStore.subscribe(B=>{const D=B.data[R];return[D.disabled?void 0:D.value,D]},([B,D])=>U(B,R,jt({initial:!1,get:v.get},D)),{equalityFn:X_});T.push(F)}),()=>T.forEach(R=>R())},[v,g]),z.useEffect(()=>{const T=[];return Object.entries(w).forEach(([R,U])=>T.push(v.subscribeToEditStart(R,U))),Object.entries(x).forEach(([R,U])=>T.push(v.subscribeToEditEnd(R,U))),()=>T.forEach(R=>R())},[w,x,v]),c?[A,N,C]:A}ku(Do.SELECT,PTe);ku(Do.IMAGE,HNe);ku(Do.NUMBER,wTe);ku(Do.COLOR,wNe);ku(Do.STRING,UTe);ku(Do.BOOLEAN,qTe);ku(Do.INTERVAL,JNe);ku(Do.VECTOR3D,_Ne);ku(Do.VECTOR2D,PNe);let BPe=class extends Wn{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("output","geometry",this,"geometry",""),this.name="Add Tag",this.atomType="Tag",this.height,this.description="Tags geometry so that it can be extracted later.",this.tags=[""],this.cutTag=!1,this.setValues(e)}draw(){super.draw("rect");let e=k.widthToPixels(this.radius);this.height=e,k.c.beginPath(),k.c.fillStyle="#484848",k.c.font=`${e}px Work Sans Bold`,k.c.fillText("#",k.widthToPixels(this.x-this.radius/3),k.heightToPixels(this.y)+this.height/3),k.c.fill(),k.c.closePath()}checkHasTag(){return this.cutTag}addTagsToAvailableTags(){let e=Array.from(new Set(k.topLevelMolecule.projectAvailableTags.concat(this.tags)));k.topLevelMolecule.projectAvailableTags=e}createLevaInputs(){let e={};return e[this.uniqueID+"cut_string"]={value:this.cutTag,label:"Cut List Tag",onChange:t=>{this.cutTag!==t&&(t===!0?(this.cutTag=!0,this.tags.push("cutLayout"),this.name=this.tags.toString(),this.updateValue()):(this.cutTag=!1,this.tags=this.tags.filter(r=>r!=="cutLayout"),this.name=this.tags.toString(),this.updateValue()))}},e[this.uniqueID+"custom_string"]={value:this.tags.filter(t=>t!=="cutLayout")[0],label:"Add Tag",disabled:!1,onChange:t=>{this.tags=this.cutTag?["cutLayout"]:[],this.tags.push(t),this.name=this.tags.toString(),this.updateValue()}},e}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.tags;this.addTagsToAvailableTags(),k.cad.tag(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}sendToRender(){console.log("tag has nothing to render")}serialize(){var e=super.serialize();return e.tags=this.tags,e.cutTag=this.cutTag,e}};class zPe extends Wn{constructor(e){super(e),this.addIO("input","number of sides",this,"number",6),this.addIO("input","diameter",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.name="RegularPolygon",this.atomType="RegularPolygon",this.description="Creates a new regular polygon. Corners are on the diameter.",this.setValues(e)}draw(){super.draw();let e=k.widthToPixels(this.x),t=k.heightToPixels(this.y),r=k.widthToPixels(this.radius);k.c.beginPath(),k.c.fillStyle="#949294",k.c.moveTo(e-r/3,t+r/1.7),k.c.lineTo(e+r/3,t+r/1.7),k.c.lineTo(e+r/1.5,t),k.c.lineTo(e+r/2.5,t-r/1.7),k.c.lineTo(e-r/2.5,t-r/1.7),k.c.lineTo(e-r/1.5,t),k.c.lineTo(e-r/3,t+r/1.7),k.c.stroke(),k.c.closePath()}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}updateValue(){super.updateValue();var e=this.findIOValue("number of sides"),t=this.findIOValue("diameter");k.cad.regularPolygon(this.uniqueID,t/2,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}class UPe extends Wn{constructor(e){super(e),this.name="Extrude",this.atomType="Extrude",this.description="Extrudes a 2D shape. Input can be negitive. ",this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","height",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.rect(k.widthToPixels(this.x-this.radius/2),k.heightToPixels(this.y+this.radius),k.widthToPixels(this.radius),k.widthToPixels(this.radius/3)),k.c.fill(),k.c.stroke(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.rect(k.widthToPixels(this.x-this.radius/2),k.heightToPixels(this.y-this.radius*2),k.widthToPixels(this.radius),k.widthToPixels(this.radius)),k.c.stroke(),k.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){var e=this.findIOValue("geometry"),t=this.findIOValue("height");k.cad.extrude(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class $Pe extends Wn{constructor(e){super(e),this.addIO("input","geometry1",this,"geometry",""),this.addIO("input","geometry2",this,"geometry",""),this.addIO("output","geometry",this,"geometry",""),this.name="Intersection",this.atomType="Intersection",this.description="The space shared by two shapes.",this.setValues(e)}draw(){super.draw();const e=k.widthToPixels(this.x),t=k.heightToPixels(this.y),r=k.widthToPixels(this.radius);k.c.beginPath(),k.c.fillStyle="#949294",k.c.moveTo(e-r/2,t+r/2),k.c.lineTo(e+r/2,t+r/2),k.c.lineTo(e+r/2,t),k.c.lineTo(e+r/4,t),k.c.lineTo(e+r/4,t-r/2),k.c.lineTo(e-r/4,t-r/2),k.c.lineTo(e-r/4,t),k.c.lineTo(e-r/2,t),k.c.lineTo(e-r/2,t+r/2),k.c.fill(),k.c.lineWidth=1,k.c.lineJoin="round",k.c.stroke(),k.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;const e=this.findIOValue("geometry1"),t=this.findIOValue("geometry2");k.cad.intersect(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class VPe extends Wn{constructor(e){super(e),this.addIO("input","geometry2",this,"geometry",""),this.addIO("input","geometry1",this,"geometry",""),this.addIO("output","geometry",this,"geometry",""),this.name="Difference",this.atomType="Difference",this.description="Subtracts shape two from shape one.",this.setValues(e)}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.arc(k.widthToPixels(this.x),k.heightToPixels(this.y),k.widthToPixels(this.radius/3),0,Math.PI*2,!1),k.c.fill(),k.c.stroke(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.rect(k.widthToPixels(this.x-this.radius/2),k.heightToPixels(this.y-this.radius*2),k.widthToPixels(this.radius),k.widthToPixels(this.radius)),k.c.stroke(),k.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;const e=this.findIOValue("geometry1"),t=this.findIOValue("geometry2");k.cad.difference(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class HPe extends Wn{constructor(e){super(e),this.type="constant",this.name="Constant",this.atomType="Constant",this.description="Defines a mathematical constant.",this.height=16,this.evolve=!1,this.min=0,this.max=20,this.value=10,this.setValues(e),this.addIO("output","number",this,"number",10),this.decreaseToProcessCountByOne()}draw(){super.draw("rect")}createLevaInputs(){let e={};return e["constant number"]={value:this.name,label:"Constant Name",disabled:!1,onChange:t=>{this.name=t}},e[this.uniqueID+this.name]={value:this.value,label:this.name,disabled:!1,onChange:t=>{this.value!==t&&(this.output.setValue(t),this.updateValue())}},e}updateValue(){this.value=this.output.getValue(),this.output.ready=!0,this.processing=!1}sendToRender(){k.writeToDisplay(this.uniqueID)}}class WPe extends Wn{constructor(e){super(e),this.addIO("output","result",this,"number",0),this.name="Equation",this.atomType="Equation",this.value=0,this.description="Defines a mathematical equation. Edit the output field to add or remove inputs.",this.height,this.currentEquation="x + y",this.setValues(e),this.addAndRemoveInputs(),this.setValues(e)}draw(){super.draw("rect");let e=k.widthToPixels(this.x),t=k.heightToPixels(this.y),r=k.widthToPixels(this.radius);this.height=r,k.c.beginPath(),k.c.fillStyle="#484848",k.c.font=`${r/1.5}px Work Sans Bold`,k.c.fillText("X + Y",e-r/1.2,t+this.height/3),k.c.fill(),k.c.closePath()}addAndRemoveInputs(){var e=/[a-zA-Z]/g;const t=this.currentEquation.match(e),r=()=>{this.inputs.forEach(s=>{t.includes(s.name)||(this.removeIO("input",s.name,this),r())})};r();for(var i in t)this.inputs.some(s=>s.Name===t[i])||this.addIO("input",t[i],this,"number",1)}evaluateEquation(){var e=this.currentEquation;this.name=this.currentEquation;var t=/[a-zA-Z]/g;const r=this.currentEquation.match(t);for(var i in r)for(var s=0;s<this.inputs.length;s++)this.inputs[s].name==r[i]&&(e=e.replace(this.inputs[s].name,this.findIOValue(this.inputs[s].name)));return k.limitedEvaluate(e)}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;e.equation={value:this.currentEquation,label:"Current Equation",disabled:!1,onChange:i=>{this.currentEquation!==i&&this.setEquation(i)}},e.result={value:this.output.value,label:"Result",disabled:!0},t.valueType!=="geometry"&&(e[t.name]={value:t.value,disabled:r(),onChange:i=>{t.setValue(i)}})}),e}updateValue(){try{this.addAndRemoveInputs(),this.inputs.every(e=>e.ready)&&(this.decreaseToProcessCountByOne(),this.value=this.evaluateEquation(),this.output.setValue(this.value),this.output.ready=!0)}catch(e){console.warn(e),this.setAlert(e)}}serialize(){var e=super.serialize();return e.currentEquation=this.currentEquation,e}setEquation(e){this.currentEquation=e.trim(),this.updateValue()}sendToRender(){console.log("equation")}}class GPe extends Wn{constructor(e){super(e),this.atomType="Extract Tag",this.type="extractTag",this.height,this.name="Extract Tag",this.description="Extracts geometry containing the specified tag.",this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.tagIndex=0,this.tag,this.setValues(e)}draw(){super.draw("rect");let e=k.widthToPixels(this.x),t=k.heightToPixels(this.y),r=k.widthToPixels(this.radius);this.height=r,k.c.beginPath(),k.c.fillStyle="#484848",k.c.font=`${r}px Work Sans Bold`,k.c.fillText("↑#↑",e-r/1.2,t+this.height/3),k.c.fill(),k.c.closePath()}createLevaInputs(){let e={};const t=k.topLevelMolecule.projectAvailableTags;return e[this.uniqueID+"tag_ops"]={value:t[this.tagIndex],options:t,label:"Extract Tag",onChange:r=>{this.tagIndex=t.indexOf(r),this.tag!=t[this.tagIndex]&&(this.tag=t[this.tagIndex],this.updateValue())}},e}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.tag;k.cad.extractTag(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}serialize(){var e=super.serialize();return e.tag=this.tag,e.tagIndex=this.tagIndex,e}}class jq{constructor(){this.BOMitemName="name",this.numberNeeded=1,this.costUSD=0,this.source="www.example.com",this.height}}class hy extends Wn{constructor(e){super(e),this.nodesOnTheScreen=[],this.inputs=[],this.name="Molecule",this.description="Molecules provide an organizational structure to contain atoms. Double click on a molecule to enter it. Use the up arrow in the upper right hand corner of the screen to go up one level.",this.atomType="Molecule",this.centerColor="#949294",this.topLevel=!1,this.processing=!1,this.totalAtomCount=1,this.toProcess=0,this.awaitingPropagationFlag=!1,this.units={MM:"MM",Inches:"Inches"},this.unitsKey,this.BOMlist,this.compiledBom={},this.partToExport=null,this.projectAvailableTags=[],this.setValues(e),this.color}copyInputsFromParent(){this.parent&&this.parent.nodesOnTheScreen.forEach(e=>{e.atomType=="Input"&&this.placeAtom({parentMolecule:this,y:e.y,parent:this,name:e.name,atomType:"Input",uniqueID:k.generateUniqueID()},null,k.availableTypes,!0)})}draw(){const e=1-this.toProcess/this.totalAtomCount;this.toProcess>1?this.processing=!0:this.processing=!1,super.draw(),k.c.beginPath(),k.c.fillStyle=this.centerColor,k.c.moveTo(k.widthToPixels(this.x),k.heightToPixels(this.y)),k.c.arc(k.widthToPixels(this.x),k.heightToPixels(this.y),k.widthToPixels(this.radius)/2,0,e*Math.PI*2,!1),k.c.closePath(),k.c.fill()}createLevaInputs(){let e={};return e["molecule name"+this.uniqueID]={value:this.topLevel?k.currentRepoName:this.name,label:"Molecule Name",disabled:!!this.topLevel,onChange:t=>{this.name=t}},this.topLevel==!0&&(e["molecule name"+this.uniqueID+"units"]={value:this.unitsKey,label:"Project Units",options:Object.keys(this.units),disabled:!1,onChange:t=>{this.unitsKey=this.units[t]}}),this.inputs&&this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),k.currentRepo.fork&&(e["Reload from Github"]=fu(()=>{this.reloadFork()})),e}createLevaExport(){let e={};const t=["STL","SVG","STEP"],r=this.nodesOnTheScreen.filter(i=>i.atomType==="Export");return e[this.uniqueID+"part_ops"]={value:this.partToExport?this.partToExport.fileName:"Pick a part to export",options:r.map(i=>i.inputs.filter(s=>s.name==="Part Name")[0].value),label:"Part",onChange:i=>{this.partToExport=r.find(s=>s.inputs.filter(a=>a.name==="Part Name")[0].value===i),this.updateValue()}},e[this.uniqueID+"file_ops"]={value:this.partToExport?this.partToExport.fileType:"Pick a file type",options:t,label:"File Type",onChange:i=>{this.partToExport&&(this.partToExport.type=i)}},e["Export As"]=fu(()=>{this.partToExport.exportFile()}),e}async reloadFork(){const e=new mu;var t=k.currentRepo.owner.login,r=k.currentRepo.name;e.request("GET /repos/{owner}/{repo}",{owner:t,repo:r}).then(i=>{e.rest.repos.getContent({owner:i.data.source.owner.login,repo:i.data.source.name,path:"project.abundance"}).then(s=>{k.topLevelMolecule.nodesOnTheScreen.forEach(o=>{o.deleteNode()});let a=JSON.parse(atob(s.data.content));a.filetypeVersion==1&&k.topLevelMolecule.deserialize(a),k.currentMolecule.selected=!0})})}async extractBomTags(){return await k.cad.extractBomList(this.output.value)}clickUp(e,t){super.clickUp(e,t),k.currentMolecule.nodesOnTheScreen.forEach(r=>{r.isMoving=!1})}doubleClick(e,t){e=k.pixelsToWidth(e),t=k.pixelsToHeight(t);var r=!1,i=k.distBetweenPoints(e,this.x,t,this.y);return i<this.radius*2&&(k.currentMolecule=this,this.selected=!1,r=!0),r}copy(){this.nodesOnTheScreen.forEach(e=>{e.selected&&k.atomsSelected.push(e.serialize({x:.03,y:.03}))})}deselect(){this.selected=!1}updateValue(e){this.nodesOnTheScreen.forEach(t=>{t.atomType=="Input"&&t.name==e&&t.updateValue()})}compileBom(){return this.extractBomTags().then(t=>{let r=[],i=[];if(t)return t.forEach(function(s){s.BOMitemName&&(r[s.BOMitemName]||(r[s.BOMitemName]=new jq,r[s.BOMitemName].numberNeeded=0,r[s.BOMitemName].BOMitemName=s.BOMitemName,r[s.BOMitemName].source=s.source,i.push(r[s.BOMitemName])),r[s.BOMitemName].numberNeeded+=s.numberNeeded,r[s.BOMitemName].costUSD+=s.costUSD)}),i=i.sort((s,a)=>s.source>a.source?1:a.source>s.source?-1:0),i})}formatBom(){const e=function(o){return o.toLowerCase().includes("amazon")?"[Amazon]("+o+"?tag=maslowcnc01-20)":o};var t=`###### Note: Do not edit this file directly, it is automatically generated from the CAD model 
# Bill Of Materials 
 |Part|Number Needed|Price|Source| 
 |----|----------|-----|-----|`,r=k.topLevelMolecule.compiledBom,i=t,s=0,a=0;return r.length>0&&r.forEach(o=>{s+=o.numberNeeded,a+=o.costUSD,i=i+`
|`+o.BOMitemName+"|"+o.numberNeeded+"|$"+o.costUSD.toFixed(2)+"|"+e(o.source)+"|"}),i=i+`
|Total: |`+s+"|$"+a.toFixed(2)+"| |",i=i+`

 3xCOG MSRP: $`+(3*a).toFixed(2),i}createLevaBom(){let e={};if(this.compiledBom&&this.compiledBom.length>0)return this.compiledBom.map(t=>{e[t.BOMitemName]={value:t.numberNeeded,label:t.BOMitemName+" x",disabled:!0}}),e["Download List of Materials"]=fu(()=>{var t=k.currentRepoName+"-Bill-of-Materials.txt",r=this.formatBom(),i=new Blob([r],{type:"text/plain"});saveAs(i,t+".txt")}),e}recomputeMolecule(e){console.log("recompute molecule in molecule"+this.name);try{k.cad.molecule(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing(),this.compileBom().then(t=>{this.compiledBom=t}),this.selected&&this.sendToRender()})}catch(t){this.setAlert(t)}}waitOnComingInformation(e){this.nodesOnTheScreen.forEach(t=>{t.name==e&&t.waitOnComingInformation()})}propagate(){try{this.updateValue()}catch(e){this.setAlert(e)}}beginPropagation(e=!1){this.nodesOnTheScreen.forEach(t=>{t.beginPropagation(e)}),this.inputs.forEach(t=>{t.beginPropagation()})}census(){return this.totalAtomCount=0,this.toProcess=0,this.nodesOnTheScreen.forEach(e=>{const t=e.census();this.totalAtomCount=this.totalAtomCount+t[0],this.toProcess=this.toProcess+t[1]}),[this.totalAtomCount,this.toProcess]}changeUnits(e){this.unitsIndex=e}goToParentMolecule(){k.currentMolecule.topLevel||(k.currentMolecule.nodesOnTheScreen.forEach(e=>{e.selected=!1}),k.currentMolecule.awaitingPropagationFlag==!0&&(k.currentMolecule.propagate(),k.currentMolecule.awaitingPropagationFlag=!1),k.currentMolecule=k.currentMolecule.parent)}async generateProjectThumbnail(){return k.cad.generateThumbnail(this.uniqueID)}async requestReadme(){var e=this.nodesOnTheScreen;e=e.filter(i=>i.atomType=="Molecule"||i.atomType=="Readme").sort(function(i,s){return k.distBetweenPoints(i.x,0,i.y,0)-k.distBetweenPoints(s.x,0,s.y,0)});const t=e.map(i=>i.requestReadme());let r=[];return await Promise.all(t).then(i=>{i.forEach(s=>{let a;s instanceof Array?s.forEach(o=>{a=o.readMeText,r.push({uniqueID:o.uniqueID,readMeText:a,svg:o.svg})}):(a=s.readMeText,s.svg&&(a=a.concat(` 

![readme](/readme`+s.uniqueID+`.svg)

`)),r.push({uniqueID:s.uniqueID,readMeText:a,svg:s.svg}))})}),r}serialize(e={x:0,y:0}){var t=[],r=[];this.nodesOnTheScreen.forEach(s=>{t.push(s.serialize()),s.output&&s.output.connectors.forEach(a=>{r.push(a.serialize())})});var i=super.serialize(e);return i.topLevel=this.topLevel,i.allAtoms=t,i.allConnectors=r,i.gitHubUniqueID=this.gitHubUniqueID,i.unitsKey=this.unitsKey,i.fileTypeVersion=1,i.compiledBom=this.compiledBom,i}deserialize(e,t={},r=!1){let i=[];return this.placeAtom({parentMolecule:this,x:.98,y:.5,parent:this,name:"Output",atomType:"Output",uniqueID:k.generateUniqueID()},!1),this.setValues(e),this.setValues(t),e.allAtoms&&e.allAtoms.forEach(s=>{const a=this.placeAtom(s,!1);i.push(a),this.setValues([])}),Promise.all(i).then(()=>{this.setValues([]),this.topLevel&&(k.totalAtomCount=k.numberOfAtomsToLoad,this.census(),this.beginPropagation(r)),e.allConnectors&&e.allConnectors.forEach(s=>{this.placeConnector(s)})})}async loadGithubMoleculeByID(e,t={},r={}){await new mu().request("GET /repositories/:id/contents/project.abundance",{id:e}).then(s=>{let a=JSON.parse(atob(s.data.content)),o=this.remapIDs(a);o.atomType="GitHubMolecule";let l={},u=k.generateUniqueID();t.ioValues!=null?l={uniqueID:u,x:this.x,y:this.y,gitHubUniqueID:e,topLevel:!1,ioValues:t.ioValues}:l={uniqueID:u,gitHubUniqueID:e,x:k.pixelsToWidth(k.lastClick[0]),y:k.pixelsToHeight(k.lastClick[1]),topLevel:!1},k.currentMolecule.placeAtom(o,!0,l).then(()=>{r.forEach(c=>{c.ap1ID==t.uniqueID&&(c.ap1ID=u,this.parent.placeConnector(c)),c.ap2ID==t.uniqueID&&(c.ap2ID=u,this.parent.placeConnector(c))})})})}remapIDs(e){let t={};if(e.allAtoms)return e.allAtoms.forEach(r=>{let i=r.uniqueID,s=k.generateUniqueID();t[i]=s,r.uniqueID=s}),e.allConnectors.forEach(r=>{r.ap1ID&&t[r.ap1ID]&&(r.ap1ID=t[r.ap1ID]),r.ap2ID&&t[r.ap2ID]&&(r.ap2ID=t[r.ap2ID]),r.ap2ID&&t[r.ap2ID]&&(r.ap2ID=t[r.ap2ID])}),e}deleteNode(e=!0,t=!0,r=!1){[...this.nodesOnTheScreen].forEach(s=>{s.deleteNode(e,t,r)}),super.deleteNode(e,t,r)}async placeAtom(e,t,r){try{k.numberOfAtomsToLoad=k.numberOfAtomsToLoad+1;let a=null;for(var i in k.availableTypes)if(k.availableTypes[i].atomType==e.atomType){e.parent=this;var s=new k.availableTypes[i].creator(e);(s.atomType=="Molecule"||s.atomType=="GitHubMolecule")&&(a=s.deserialize(e,r,!0),t&&s.beginPropagation()),s.atomType=="Input"&&typeof e.name<"u"?(s.name=e.name,s.draw()):s.atomType=="Input"&&(s.name=k.incrementVariableName(s.name,this)),s.atomType=="Output"&&this.nodesOnTheScreen.forEach(o=>{o.atomType=="Output"&&o.deleteOutputAtom(!1)}),this.nodesOnTheScreen.push(s),t&&(s.atomType=="Molecule"&&(s.copyInputsFromParent(),a!=null?a.then(()=>{s.beginPropagation()}):s.beginPropagation()),s.updateValue())}return a}catch(a){return console.warn("Unable to place: "+e),console.warn(a),Promise.resolve()}}placeConnector(e){var t=!1,r=!1;this.nodesOnTheScreen.forEach(i=>{i.uniqueID==e.ap1ID&&(t=i.output),i.uniqueID==e.ap2ID&&i.inputs.forEach(s=>{s.name==e.ap2Name&&(r=s)})}),t&&r?new QG({atomType:"Connector",attachmentPoint1:t,attachmentPoint2:r}):console.warn("Unable to place connector")}sendToRender(){k.writeToDisplay(this.uniqueID)}}class jPe extends Wn{constructor(e){super(e),this.name="Genetic Algorithm",this.atomType="Genetic Algorithm",this.description="Defines a new genetic algorithm which will simulate evolution to maximize the fitness function using the input population size and number of generations. Only constants which are upstream of this atom with evolve checked will be changed.",this.constantsToEvolve=[],this.population=[],this.individualIndex=0,this.generation=0,this.topFitness=0,this.evolutionInProcess=!1,this.addIO("input","fitness function",this,"number",0),this.addIO("input","population size",this,"number",50),this.addIO("input","number of generations",this,"number",10),this.setValues(e),this.updateValue()}draw(){super.draw();const e=k.widthToPixels(this.x),t=k.heightToPixels(this.y),r=k.widthToPixels(this.radius);k.c.beginPath(),k.c.arc(k.widthToPixels(this.x-this.radius/5),k.heightToPixels(this.y),k.widthToPixels(this.radius/2),Math.PI*3.4,Math.PI*2.7,!1),k.c.stroke(),k.c.closePath(),k.c.beginPath(),k.c.arc(k.widthToPixels(this.x+this.radius/5),k.heightToPixels(this.y),k.widthToPixels(this.radius/2),Math.PI*3.6,Math.PI*2.3,!0),k.c.stroke(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.moveTo(e-r/3,t),k.c.lineTo(e+r/3,t),k.c.stroke(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.moveTo(e-r/3,t-r/5),k.c.lineTo(e+r/3,t-r/5),k.c.stroke(),k.c.closePath(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.moveTo(e-r/3,t+r/5),k.c.lineTo(e+r/3,t+r/5),k.c.stroke(),k.c.closePath()}updateValue(){this.decreaseToProcessCountByOne(),this.evolutionInProcess&&(this.updateSidebar(),this.processing=!0,this.population[this.individualIndex].fitness=this.findIOValue("fitness function"),this.individualIndex=this.individualIndex+1,this.individualIndex<this.findIOValue("population size")?this.beginEvaluatingIndividual():(this.generation=this.generation+1,this.generation<this.findIOValue("number of generations")?(this.breedAndCullPopulation(),this.individualIndex=0,this.beginEvaluatingIndividual()):(this.evolutionInProcess=!1,this.processing=!1,this.population=this.population.sort((e,t)=>parseFloat(t.fitness)-parseFloat(e.fitness)),this.individualIndex=0,this.generation=0,this.beginEvaluatingIndividual(),this.updateSidebar())))}updateSidebar(){if(this.evolutionInProcess){let a=document.querySelector(".sideBar");for(;a.firstChild;)a.removeChild(a.firstChild);var e=document.createElement("ul");a.appendChild(e),e.setAttribute("class","sidebar-list");var t=document.createElement("LI");e.appendChild(t);var r=document.createElement("div");t.appendChild(r);var i=document.createTextNode("Evolving...   Individual: "+this.individualIndex+",    Generation: "+this.generation+",    Best Fitness Value: "+this.topFitness);r.appendChild(i),r.setAttribute("class","sidebar-subitem label-item")}else{var s=super.updateSidebar();this.createButton(s,this,"Evolve",()=>{this.evolutionInProcess=!0,this.updateConstantsList(),this.initializePopulation(),this.beginEvaluatingIndividual()})}}beginEvaluatingIndividual(){const e=this.population[this.individualIndex];e.genome.forEach(t=>{t.constantAtom.output.waitOnComingInformation()}),e.genome.forEach(t=>{t.constantAtom.output.value=t.newValue}),e.genome.forEach(t=>{t.constantAtom.updateValue()})}getRandomValue(e,t){return Math.random()*(t-e)+e}initializePopulation(){this.population=[],this.individualIndex=0,this.generation=0,this.topFitness=0;for(var e=0;e<this.findIOValue("population size");){var t=[];this.constantsToEvolve.forEach(i=>{var s={newValue:this.getRandomValue(i.min,i.max),constantAtom:i};t.push(s)});var r={genome:t,fitness:null};this.population.push(r),e++}}breedTwo(e,t){const r=e.genome.length;for(var i={fitness:null,genome:[]},s=0;s<r;){var a={newValue:null,constantAtom:e.genome[s].constantAtom};const l=e.genome[s].constantAtom.max,u=e.genome[s].constantAtom.min,c=.1*(l-u)*(Math.random()-.5);var o=null;Math.random()>.5?o=e.genome[s].newValue+c:o=t.genome[s].newValue+c,a.newValue=Math.min(Math.max(o,u),l),i.genome.push(a),s++}return i}breedAndCullPopulation(){this.population=this.population.sort((s,a)=>parseFloat(a.fitness)-parseFloat(s.fitness)),this.topFitness=this.population[0].fitness;const e=Math.round(this.population.length/5),t=this.population.slice(0,e);for(var r=[],i=0;i<this.population.length-e;){const s=Math.round(Math.random()*(t.length-1)),a=Math.round(Math.random()*(t.length-1)),o=this.breedTwo(t[s],t[a]);r.push(o),i=i+1}this.population=t.concat(r)}updateConstantsList(){this.constantsToEvolve=[],this.inputs.forEach(e=>{e.connectors.forEach(t=>{t.walkBackForConstants(r=>{this.addToConstantsList(r)})})})}addToConstantsList(e){this.constantsToEvolve.push(e)}}let qPe=class extends Wn{constructor(e){super(e),this.name,this.description="Adds an input to the parent molecule. If the parent molecule is the top level of the project then the input will be available when the project is shared or imported into another project. Name is editable",this.value=10,this.atomType="Input",this.height,this.oldName=this.name,this.addIO("output","number or geometry",this,"number or geometry",10),typeof this.parent<"u"&&this.parent.addIO("input",this.name,this.parent,"number or geometry",10),this.setValues(e)}draw(){this.x=this.radius;let e=k.widthToPixels(this.x),t=k.heightToPixels(this.y),r=k.widthToPixels(this.radius);this.height=r*1.3,this.name!=this.oldName&&this.updateParentName(),this.processing?k.c.fillStyle="blue":this.selected?(k.c.fillStyle=this.selectedColor,k.c.strokeStyle=this.defaultColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(k.c.fillStyle=this.defaultColor,k.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),this.inputs.forEach(i=>{i.draw()}),this.output&&this.output.draw(),k.c.font="10px Work Sans",k.c.textAlign="start",k.c.fillText(this.name,e+r,t-r),k.c.beginPath(),k.c.moveTo(e-r,t+this.height/2),k.c.lineTo(e,t+this.height/2),k.c.lineTo(e+r,t),k.c.lineTo(e,t-this.height/2),k.c.lineTo(e-r,t-this.height/2),k.c.lineWidth=1,k.c.fill(),k.c.closePath(),k.c.stroke()}deleteNode(e=!0,t=!0,r=!1){typeof this.parent<"u"&&this.parent.removeIO("input",this.name,this.parent,r),super.deleteNode(e,t,r)}updateParentName(){this.parent.inputs.forEach(e=>{e.name==this.oldName&&(e.name=this.name)}),this.oldName=this.name}updateValue(){this.parent.inputs.forEach(e=>{e.name==this.name&&(this.decreaseToProcessCountByOne(),this.value=e.getValue(),this.output.waitOnComingInformation(),this.output.setValue(this.value))})}createLevaInputs(){let e={};return e[this.uniqueID]={value:this.name,label:"Input Name",disabled:!1,onChange:t=>{this.name!==t&&(this.name=t)}},e}getOutput(){return this.output.getValue()}};class XPe extends Wn{constructor(e){super(e),this.atomType="Readme",this.readmeText="Readme text here",this.type="readme",this.name="README",this.radius=1/72,this.description="A place to put project notes. These will appear in the GitHub readme and in the description of molecules up the chain. Markdown is supported. ",this.height=10,this.global=!0,this.addIO("input","geometry",this,"geometry",void 0),this.setValues(e)}draw(){super.draw("rect");let e=k.widthToPixels(this.radius);this.height=e*1.5,k.c.beginPath(),k.c.fillStyle="#484848",k.c.font=`${e*1.5}px Work Sans Bold`,k.c.fillText("//",k.widthToPixels(this.x-this.radius/2),k.heightToPixels(this.y)+this.height/3),k.c.fill(),k.c.closePath()}setValue(e){this.readmeText=e}createLevaInputs(){let e={};return e[this.name+this.uniqueID]={value:this.readmeText,label:this.name,rows:10,onChange:t=>{this.readmeText!==t&&this.setValue(t)}},e}async generateProjectThumbnail(){let e=this.findIOValue("geometry");return e!==void 0?k.cad.generateThumbnail(e):null}async requestReadme(){return this.global?this.generateProjectThumbnail().then(e=>e!==null?{readMeText:this.readmeText,svg:e,uniqueID:this.uniqueID}:{readMeText:this.readmeText,svg:null,uniqueID:this.uniqueID}).catch(e=>{console.log(e)}):[]}sendToRender(){console.log("nothing to render in readme")}deleteNode(){super.deleteNode()}serialize(e){var t=super.serialize(e);return t.readmeText=this.readmeText,t.global=this.global,t}}class YPe extends Wn{constructor(e){super(e),this.atomType="Add BOM Tag",this.type="addBOMTag",this.name="Add BOM Tag",this.description="Adds a Bill Of Materials tag which appears in molecules containing this atom and in the GitHub project bill of materials.",this.BOMitem=new jq,this.radius=1/65,this.height,this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.setValues(e)}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){var e=this.findIOValue("geometry"),t=this.BOMitem;k.cad.bom(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}draw(){super.draw("rect");let e=k.widthToPixels(this.x),t=k.heightToPixels(this.y),r=k.widthToPixels(this.radius);this.height=r/1.3,k.c.beginPath(),k.c.fillStyle="#484848",k.c.font=`${r/1.5}px Work Sans Bold`,k.c.fillText("$$$",e-r/2,t+this.height/3),k.c.fill(),k.c.closePath()}createLevaInputs(){let e={};for(const t in this.BOMitem)e[t]={value:this.BOMitem[t],label:t,disabled:!1,onChange:r=>{this.BOMitem[t]=r,this.updateValue()}};return e}serialize(e){var t=super.serialize(e);return t.BOMitem=Object.assign({},this.BOMitem),t}}class KPe extends Wn{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","x-axis degrees",this,"number",0),this.addIO("input","y-axis degrees",this,"number",0),this.addIO("input","z-axis degrees",this,"number",0),this.addIO("output","geometry",this,"geometry",""),this.name="Rotate",this.atomType="Rotate",this.description="Rotates the input geometry around the X, Y, or Z axis. Inputs are degrees.",this.setValues(e)}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.ellipse(k.widthToPixels(this.x),k.heightToPixels(this.y),k.widthToPixels(this.radius/1.5),k.widthToPixels(this.radius/2.3),Math.PI/4,0,Math.PI*2),k.c.stroke(),k.c.closePath()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,step:.5,disabled:r(),onChange:i=>{t.value!==i&&(console.log(t.name,i),t.setValue(i))}})}),e}updateValue(){if(super.updateValue(),this.inputs.every(s=>s.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("x-axis degrees"),r=this.findIOValue("y-axis degrees"),i=this.findIOValue("z-axis degrees");k.cad.rotate(this.uniqueID,e,t,r,i).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class ZPe extends hy{constructor(e){super(e),this.name="Github Molecule",this.atomType="GitHubMolecule",this.topLevel=!1,this.centerColor="black",this.description="Project imported from GitHub",this.gitHubUniqueID,this.setValues(e)}doubleClick(e,t){var r=!1,i=k.distBetweenPoints(e,this.x,t,this.y);return i<this.radius&&(r=!0),r}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}}),e["Reload From Github"]=fu(()=>this.reloadMoleculeFromGithub())}),e}reloadMoleculeFromGithub(){var e=this.serialize(),t=this.parent.serialize().allConnectors;this.deleteNode(!1,!1,!0),this.loadGithubMoleculeByID(this.gitHubUniqueID,e,t)}}class JPe extends Wn{constructor(e){super(e),typeof this.parent<"u"&&this.parent.addIO("output","Geometry",this.parent,"geometry",this.parent.path),this.type="output",this.name="Output",this.value=null,this.atomType="Output",this.height=16,this.radius=1/75,this.path="",this.description="Connect geometry here to make it available in the next level up. ",this.setValues(e),this.addIO("input","number or geometry",this,"geometry",void 0)}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.decreaseToProcessCountByOne();var e=this.findIOValue("number or geometry");k.cad.output(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing(),this.parent.recomputeMolecule(this.uniqueID)}).catch(this.alertingErrorHandler()),this.parent.propagate()}}sendToRender(){try{k.writeToDisplay(this.uniqueID)}catch(e){this.setAlert(e)}}waitOnComingInformation(){this.parent.output.waitOnComingInformation()}deleteNode(){}deleteOutputAtom(e=!0){super.deleteNode(!1,e)}draw(){const e=k.widthToPixels(this.x),t=k.heightToPixels(this.y),r=k.widthToPixels(this.radius);this.height=r,this.processing?k.c.fillStyle="blue":this.selected?(k.c.fillStyle=this.selectedColor,k.c.strokeStyle=this.defaultColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(k.c.fillStyle=this.defaultColor,k.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),this.inputs.forEach(i=>{i.draw()}),k.c.beginPath(),k.c.font="10px Work Sans",k.c.textAlign="start",k.c.fillText(this.name,e-r,t-r*1.5),k.c.moveTo(e+r-r*2,t-this.height),k.c.lineTo(e+r-5,t),k.c.lineTo(e+r-r*2,t+this.height),k.c.lineTo(e+r-r*2,t-this.height),k.c.fillStyle=this.color,k.c.fill(),k.c.lineWidth=3,k.c.lineJoin="round",k.c.stroke(),k.c.closePath()}}class QPe extends Wn{constructor(e){super(e),this.name="Gcode",this.atomType="Gcode",this.height=16,this.description="Generates Maslow gcode from the input geometry.",this.gcodeString="",this.addIO("input","geometry",this,"geometry",null),this.addIO("input","tool size",this,"number",6.35),this.addIO("input","passes",this,"number",6),this.addIO("input","speed",this,"number",500),this.addIO("input","tabs",this,"string","true"),this.addIO("input","safe height",this,"number",6),this.addIO("output","gcode",this,"geometry",""),this.setValues(e)}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#484848",k.c.font=`${k.widthToPixels(this.radius)}px Work Sans Bold`,k.c.fillText("G",k.widthToPixels(this.x-this.radius/3),k.heightToPixels(this.y)+this.height/3),k.c.fill(),k.c.closePath()}updateValue(){super.updateValue();try{var e=this.findIOValue("geometry"),t=this.findIOValue("tool size"),r=this.findIOValue("passes"),i=this.findIOValue("speed"),s=this.findIOValue("tabs"),a=this.findIOValue("safe height");const o={op:"gcode",readPath:e,toolSize:t,passes:r,speed:i,tabs:s,safeHeight:a,writePath:this.path};this.gcodeString=this.basicThreadValueProcessing(o)}catch(o){this.setAlert(o)}}updateSidebar(){const e=super.updateSidebar();this.createButton(e,this,"Download G-Code",()=>{this.downloadGCode()})}downloadGCode(){try{var e=this.findIOValue("geometry"),t=this.findIOValue("tool size"),r=this.findIOValue("passes"),i=this.findIOValue("speed"),s=this.findIOValue("tabs"),a=this.findIOValue("safe height");const o={op:"gcode",readPath:e,toolSize:t,passes:r,speed:i,tabs:s,safeHeight:a,writePath:this.path},{answer:l}=window.ask(o)}catch(o){this.setAlert(o)}}}class eRe extends Wn{constructor(e){super(e),this.name="Code",this.atomType="Code",this.description="Defines a Replicad code block.",this.code=`//Inputs:[input1, height];

let shape = drawRectangle(5,7)

const newPlane = new Plane().pivot(0, 'Y');

 return { geometry: [shape.sketchOnPlane(newPlane).extrude(7)], tags: [],
      color: '#A3CE5B',
      plane: newPlane}


    /**
    To Use the Code Atom, enter your inputs to the input list a.e Inputs:[shape, height]
    If your input is connected to another atom with a replicad geometry you can access its geometry by looking up its ID in your library. a.e library[Input1].geometry[0] 
    Use any replicad available methods to modify your geometry. Learn more about all of the available methods at 
    https://replicad.xyz/docs/introapp/UserGuide.html 
    Return a replicad object that includes geometry, color, tags and plane. 


    Example Code Atom:

      Inputs:[shape, x];

      let finalShape = library[shape].geometry[0].clone.translate[x,0,0]

      return {geometry: finalShape, color: library[shape].color, plane: library[shape].plane, tags: library[shape].tags }

      - See more examples at _______ 


    */
`,this.addIO("output","geometry",this,"geometry",""),this.setValues(e),this.parseInputs(!1)}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#949294",k.c.font=`${k.widthToPixels(this.radius)}px Work Sans Bold`,k.c.fillText("</>",k.widthToPixels(this.x-this.radius/1.5),k.heightToPixels(this.y+this.radius*1.5))}beginPropagation(){this.inputs.length==0&&this.updateValue();var e=!1;this.inputs.forEach(t=>{t.connectors.length>0&&(e=!0)}),e||this.updateValue()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}}}),e["Edit Code"]=fu(()=>this.editCode()),e["Save Code"]=fu(()=>this.saveCode()),e["Close Editor"]=fu(()=>this.closeCode()),e}updateCode(e){this.code=e,this.updateValue(),this.sendToRender()}updateValue(e){if(super.updateValue(),this.parseInputs(),this.inputs.every(i=>i.ready)){var t=[];this.inputs.forEach(i=>{i.connectors.length>0&&i.type=="input"&&t.push(i.getValue())});var r={};this.inputs.forEach(i=>{r[i.name]=i.value}),k.cad.code(this.uniqueID,this.code,r).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}parseInputs(e=!0){var t=/Inputs:\[\s*([^)]+?)\s*\]/.exec(this.code);if(t){t[1]&&(t=t[1].split(/\s*,\s*/));let s=[];for(var r in t){t[r]=t[r].split(/\s*=\s*/);let a=t[r][0];s.push(a);let o=t[r][1]?t[r][1]:10;this.inputs.some(l=>l.Name===a)||this.addIO("input",a,this,"geometry",o,e)}for(var i in this.inputs)s.includes(this.inputs[i].name)||this.removeIO("input",this.inputs[i].name,this)}}doubleClick(e,t){let r=k.widthToPixels(this.x),i=k.heightToPixels(this.y);var s=!1,a=k.distBetweenPoints(e,r,t,i);return a<this.radius&&(this.editCode(),s=!0),s}editCode(){document.getElementById("code-window").classList.remove("code-off")}saveCode(){document.getElementById("save-code-button").click()}closeCode(){document.getElementById("close-code-button").click()}serialize(e){var t=super.serialize(e);return t.codeVersion=1,t.code=this.code,t}}let tRe=class extends Wn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Group",this.atomType="Group",this.ioValues=[],this.removeCutawayGeometry=!0,this.description="Groups shapes together into one. Shapes are allowed to overlap.",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}beginPropagation(){e0(this),super.beginPropagation()}draw(){super.draw();const e=k.widthToPixels(this.x),t=k.heightToPixels(this.y),r=k.widthToPixels(this.radius);k.c.beginPath(),k.c.fillStyle="#949294",k.c.moveTo(e-r/2,t+r/2),k.c.lineTo(e+r/2,t+r/2),k.c.lineTo(e+r/2,t),k.c.lineTo(e-r/2,t),k.c.lineTo(e-r/2,t+r/2),k.c.stroke(),k.c.closePath(),k.c.beginPath(),k.c.lineTo(e+r/4,t-r/2),k.c.lineTo(e-r/4,t-r/2),k.c.lineTo(e-r/4,t),k.c.lineTo(e+r/2,t),k.c.lineTo(e+r/4,t-r/2),k.c.lineWidth=1,k.c.lineJoin="round",k.c.stroke(),k.c.closePath()}updateValue(){if(this.inputs.every(t=>t.ready)){try{var e=[];this.inputs.forEach(r=>{r.connectors.length>0&&r.type=="input"&&e.push(r.getValue())});const t={op:"group",paths:e,writePath:this.path};this.basicThreadValueProcessing(t,"group"),this.clearAlert()}catch(t){this.setAlert(t)}e0(this)}}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.connectors.length>0){var s={name:i.name,ioValue:i.getValue()};r.push(s)}}),t.ioValues=r,t}};class nRe extends Wn{constructor(t){super(t);pk(this,"getAFile",async function(){const t=new mu,r=this.fileName;return await t.rest.repos.getContent({owner:k.currentUser,repo:k.currentRepoName,path:r})});this.name="Import",this.atomType="Import",this.description="Import Atom, let's you choose a type of file to import and use in your design.",this.file=null,this.fileName=null,this.type=null,this.sha=null,this.SVGwidth=10,this.addIO("output","geometry",this,"geometry",""),this.setValues(t)}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#484848",k.c.font=`${k.widthToPixels(this.radius)}px Work Sans Bold`,k.c.fillText("G",k.widthToPixels(this.x-this.radius/3),k.heightToPixels(this.y)+this.height/3),k.c.fill(),k.c.closePath()}updateValue(){super.updateValue(),this.processing=!0;try{this.fileName!=null&&this.getAFile().then(t=>{this.sha=t.data.sha,this.file=this.newBlobFromBase64(t);let r=this.file,i=this.type,s=i=="STL"?k.cad.importingSTL:i=="SVG"?k.cad.importingSVG:i=="STEP"?k.cad.importingSTEP:null;if(s==null)throw"Invalid file type";s(this.uniqueID,r,this.SVGwidth).then(a=>{this.basicThreadValueProcessing(),this.sendToRender()})})}catch{this.alertingErrorHandler()}}newBlobFromBase64(t){let r=t.data.content,i=atob(r);if(this.type=="SVG")return i;let s=[];for(let a=0;a<i.length;a++)s.push(i.charCodeAt(a));return new Blob([new Uint8Array(s)],{type:"application/octet-stream"})}beginPropagation(){this.fileName!=null&&this.updateValue()}createLevaInputs(){let t={};if(this.fileName==null){const r=["STL","SVG","STEP"];let i=0;t[this.uniqueID+"file_ops"]={options:r,label:"File Type",onChange:s=>{i=r.indexOf(s)}},t["Load File"]=fu(()=>this.loadFile(r[i]))}else this.type=="SVG"&&(t.Width={value:this.SVGwidth,label:"Width",onChange:r=>{this.SVGwidth=r,this.updateValue()}}),t["Loaded File"]={value:this.fileName,label:"Loaded File",disabled:!0};return t}loadFile(t){var r=document.getElementById("fileLoaderInput");r.accept="."+t.toLowerCase(),r.click(),this.type=t}deleteNode(){super.deleteNode();var t=document.getElementById("fileDeleteInput");t.value=this.fileName,t.click()}updateFile(t,r){this.fileName=t.name,this.sha=r,this.updateValue()}serialize(){var t=super.serialize();return t.fileName=this.fileName,t.name=this.name,t.type=this.type,t.SVGwidth=this.SVGwidth,t}}var qq={exports:{}};(function(n,e){(function(t,r){r()})(fa,function(){function t(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,f){var d=new XMLHttpRequest;d.open("GET",u),d.responseType="blob",d.onload=function(){l(d.response,c,f)},d.onerror=function(){console.error("could not download file")},d.send()}function i(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function s(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof fa=="object"&&fa.global===fa?fa:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(u,c,f){var d=a.URL||a.webkitURL,h=document.createElement("a");c=c||u.name||"download",h.download=c,h.rel="noopener",typeof u=="string"?(h.href=u,h.origin===location.origin?s(h):i(h.href)?r(u,c,f):s(h,h.target="_blank")):(h.href=d.createObjectURL(u),setTimeout(function(){d.revokeObjectURL(h.href)},4e4),setTimeout(function(){s(h)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,f){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,f),c);else if(i(u))r(u,c,f);else{var d=document.createElement("a");d.href=u,d.target="_blank",setTimeout(function(){s(d)})}}:function(u,c,f,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,f);var h=u.type==="application/octet-stream",p=/constructor/i.test(a.HTMLElement)||a.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||h&&p||o)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var b=y.result;b=v?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=b:location=b,d=null},y.readAsDataURL(u)}else{var m=a.URL||a.webkitURL,S=m.createObjectURL(u);d?d.location=S:location.href=S,d=null,setTimeout(function(){m.revokeObjectURL(S)},4e4)}});a.saveAs=l.saveAs=l,n.exports=l})})(qq);var Xq=qq.exports;class rRe extends Wn{constructor(e){super(e),this.name="Export",this.atomType="Export",this.description="Export Atom, let's you choose a type of file to Export.",this.value=null,this.type=null,this.resolution=72,this.addIO("input","geometry",this,"geometry",""),this.addIO("input","Resolution (dpi)",this,"number",72),this.addIO("input","Part Name",this,"string","Part Name"),this.addIO("input","File Type",this,"string","SVG"),this.setValues(e),this.fileName=null,this.importIndex=0}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#484848",k.c.font=`${k.widthToPixels(this.radius)}px Work Sans Bold`,k.c.fillText("G",k.widthToPixels(this.x-this.radius/3),k.heightToPixels(this.y)+this.height/3),k.c.fill(),k.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;let e=this.findIOValue("geometry"),t=this.findIOValue("File Type");k.cad.visExport(this.uniqueID,e,t).then(r=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}createLevaInputs(){let e={};const t=["STL","SVG","STEP"];return this.inputs&&this.inputs.map(r=>{const i=()=>r.connectors.length>0;r.name=="File Type"&&(e[this.uniqueID+"file_ops"]={value:r.value,options:t,disabled:i(),label:"File Type",onChange:s=>{r.value!==s&&r.setValue(s)}}),r.name=="Resolution (dpi)"&&(e[this.uniqueID+r.name]={value:r.value,label:r.name,disabled:this.findIOValue("File Type")!="SVG",onChange:s=>{r.value!==s&&r.setValue(s)}}),r.name=="Part Name"&&(e[this.uniqueID+r.name]={value:r.value,label:r.name,disabled:i(),onChange:s=>{r.value!==s&&r.setValue(s)}})}),e["Download File"]=fu(()=>this.exportFile()),e}exportFile(){let e=this.findIOValue("File Type"),t=this.findIOValue("Resolution (dpi)"),r=this.findIOValue("Part Name");console.log(this),k.cad.downExport(this.uniqueID,e,t,k.topLevelMolecule.unitsKey).then(i=>{Xq.saveAs(i,r+"."+e.toLowerCase())}).catch(this.alertingErrorHandler())}serialize(){var e=super.serialize();return e.type=this.type,e.resolution=this.resolution,e.importIndex=this.importIndex,e.fileName=this.fileName,e}}const iRe={ROBOTO:"https://fonts.gstatic.com/s/roboto/v15/W5F8_SL0XFawnjxHGsZjJA.ttf",NOTOSANS:"http://fonts.gstatic.com/s/notosansdisplay/v20/RLplK4fy6r6tOBEJg0IAKzqdFZVZxokvfn_BDLxR.ttf",ANONYMOUSPRO:"http://fonts.gstatic.com/s/anonymouspro/v14/rP2Bp2a15UIB7Un-bOeISG3pLlw89CH98Ko.ttf",MONSERRAT:"http://fonts.gstatic.com/s/montserrat/v15/JTURjIg1_i6t8kCHKm45_dJE3gnD-w.ttf"};let sRe=class extends Wn{constructor(e){super(e),this.name="Text",this.atomType="Text",this.description="Creates a new text sketch.",this.fontFamily="ROBOTO",this.addIO("input","Font Size",this,"number",10),this.addIO("input","Text",this,"string","Lorem Ipsum"),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}draw(){super.draw(),k.c.beginPath(),k.c.fillStyle="#484848",k.c.font=`${k.widthToPixels(this.radius)}px Work Sans Bold`,k.c.fillText("T",k.widthToPixels(this.x-this.radius/3),k.heightToPixels(this.y)+this.height/3),k.c.fill(),k.c.closePath()}createLevaInputs(){let e={};this.inputs&&this.inputs.map(r=>{const i=()=>r.connectors.length>0;r.valueType!=="geometry"&&(e[this.uniqueID+r.name]={value:r.value,label:r.name,step:.25,disabled:i(),onChange:s=>{r.value!==s&&r.setValue(s)}})});const t=iRe;return e["Font Family"]={options:Object.keys(t),label:"Font Family",onChange:r=>{this.fontFamily=r,this.updateValue()}},e}updateValue(){super.updateValue();var e=this.findIOValue("Font Size"),t=this.findIOValue("Text");let r=this.fontFamily;k.cad.text(this.uniqueID,t,e,r).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}serialize(){var e=super.serialize(),t=[];return this.inputs.forEach(r=>{if(r.connectors.length>0){var i={name:r.name,ioValue:r.getValue()};t.push(i)}}),e.ioValues=t,e.fontFamily=this.fontFamily,e}};class aRe{constructor(){this.canvas=null,this.c=null,this.availableTypes={intersection:{creator:$Pe,atomType:"Intersection",atomCategory:"Interactions"},difference:{creator:VPe,atomType:"Difference",atomCategory:"Interactions"},union:{creator:REe,atomType:"Join",atomCategory:"Interactions"},group:{creator:tRe,atomType:"Group",atomCategory:"None"},loft:{creator:BEe,atomType:"Loft",atomCategory:"Interactions"},shrinkWrap:{creator:LEe,atomType:"ShrinkWrap",atomCategory:"Interactions"},readme:{creator:XPe,atomType:"Readme",atomCategory:"Tags"},addBOMTag:{creator:YPe,atomType:"Add-BOM-Tag",atomCategory:"Tags"},color:{creator:IEe,atomType:"Color",atomCategory:"Actions"},tag:{creator:BPe,atomType:"Tag",atomCategory:"Tags"},extracttag:{creator:GPe,atomType:"ExtractTag",atomCategory:"Tags"},cutLayout:{creator:kEe,atomType:"CutLayout",atomCategory:"Tags"},regularPolygon:{creator:zPe,atomType:"RegularPolygon",atomCategory:"Shapes"},costant:{creator:HPe,atomType:"Constant",atomCategory:"Inputs"},circle:{creator:OEe,atomType:"Circle",atomCategory:"Shapes"},text:{creator:sRe,atomType:"Text",atomCategory:"Shapes"},rectangle:{creator:FEe,atomType:"Rectangle",atomCategory:"Shapes"},molecule:{creator:hy,atomType:"Molecule",atomCategory:"Shapes"},input:{creator:qPe,atomType:"Input",atomCategory:"Inputs"},equation:{creator:WPe,atomType:"Equation",atomCategory:"Inputs"},code:{creator:eRe,atomType:"Code",atomCategory:"Inputs"},rotate:{creator:KPe,atomType:"Rotate",atomCategory:"Actions"},extrude:{creator:UPe,atomType:"Extrude",atomCategory:"Actions"},move:{creator:zEe,atomType:"Move",atomCategory:"Actions"},GeneticAlgorithm:{creator:jPe,atomType:"GeneticAlgorithm",atomCategory:"Actions"},gcode:{creator:QPe,atomType:"Gcode",atomCategory:"ImportExport"},import:{creator:nRe,atomType:"Import",atomCategory:"ImportExport"},export:{creator:rRe,atomType:"Export",atomCategory:"ImportExport"},githubmolecule:{creator:ZPe,atomType:"GitHubMolecule",atomCategory:"ImportExport"},output:{creator:JPe,atomType:"Output"}},this.currentMolecule,this.currentUser,this.currentRepoName,this.currentRepo,this.loadedRepo,this.topLevelMolecule,this.touchInterface=!1,this.cad=null,this.totalAtomCount=0,this.numberOfAtomsToLoad=0,this.fork=!1,this.ctrlDown=!1,this.atomsSelected=[],this.circleSegmentSize=2,this.displayProcessing=!1,this.cancelLastDisplayWorker=function(){},this.displayGrid=!0,this.displayAxis=!0,this.displayTriangles=!0,this.displayEdges=!0;const e=JG(MEe);this.limitedEvaluate=e.evaluate,this.lastClick,e.import({import:function(){throw new Error("Function import is disabled")},createUnit:function(){throw new Error("Function createUnit is disabled")},evaluate:function(){throw new Error("Function evaluate is disabled")},parse:function(){throw new Error("Function parse is disabled")},simplify:function(){throw new Error("Function simplify is disabled")},derivative:function(){throw new Error("Function derivative is disabled")}},{override:!0})}constrainToCanvasBorders(e,t){return[Math.max(0,Math.min(1,e)),Math.max(0,Math.min(1,t))]}constrainToCanvasBordersPixels(e,t){return[Math.max(0,Math.min(this.canvas.current.width,e)),Math.max(0,Math.min(this.canvas.current.height,t))]}widthToPixels(e){return this.canvas.current.width*e}pixelsToWidth(e){return 1/(this.canvas.current.width/e)}heightToPixels(e){return this.canvas.current.height*e}pixelsToHeight(e){return 1/(this.canvas.current.height/e)}toBinaryStr(e){const r=new TextEncoder().encode(e);return String.fromCharCode(...r)}writeToDisplay(e,t=!1){console.log("Write to display not set")}generateUniqueID(){const e=new Date().getTime(),t=Math.floor(Math.random()*1e3);return e+t}incrementVariableName(e,t){if(t.inputs.find(r=>r.name===e)){let r=e.match(/\d+(?=\D*$)/);const i=parseInt(r[0])+1,s=e.replace(new RegExp(r[0]+"(?=D*$)"),i);return this.incrementVariableName(s,t)}else return e}distBetweenPoints(e,t,r,i){var s=Math.pow(e-t,2),a=Math.pow(r-i,2),o=Math.sqrt(s+a);return o}}const k=new aRe,Dz={CC0:`Creative Commons Legal Code

CC0 1.0 Universal

    CREATIVE COMMONS CORPORATION IS NOT A LAW FIRM AND DOES NOT PROVIDE
    LEGAL SERVICES. DISTRIBUTION OF THIS DOCUMENT DOES NOT CREATE AN
    ATTORNEY-CLIENT RELATIONSHIP. CREATIVE COMMONS PROVIDES THIS
    INFORMATION ON AN "AS-IS" BASIS. CREATIVE COMMONS MAKES NO WARRANTIES
    REGARDING THE USE OF THIS DOCUMENT OR THE INFORMATION OR WORKS
    PROVIDED HEREUNDER, AND DISCLAIMS LIABILITY FOR DAMAGES RESULTING FROM
    THE USE OF THIS DOCUMENT OR THE INFORMATION OR WORKS PROVIDED
    HEREUNDER.

Statement of Purpose

The laws of most jurisdictions throughout the world automatically confer
exclusive Copyright and Related Rights (defined below) upon the creator
and subsequent owner(s) (each and all, an "owner") of an original work of
authorship and/or a database (each, a "Work").

Certain owners wish to permanently relinquish those rights to a Work for
the purpose of contributing to a commons of creative, cultural and
scientific works ("Commons") that the public can reliably and without fear
of later claims of infringement build upon, modify, incorporate in other
works, reuse and redistribute as freely as possible in any form whatsoever
and for any purposes, including without limitation commercial purposes.
These owners may contribute to the Commons to promote the ideal of a free
culture and the further production of creative, cultural and scientific
works, or to gain reputation or greater distribution for their Work in
part through the use and efforts of others.

For these and/or other purposes and motivations, and without any
expectation of additional consideration or compensation, the person
associating CC0 with a Work (the "Affirmer"), to the extent that he or she
is an owner of Copyright and Related Rights in the Work, voluntarily
elects to apply CC0 to the Work and publicly distribute the Work under its
terms, with knowledge of his or her Copyright and Related Rights in the
Work and the meaning and intended legal effect of CC0 on those rights.

1. Copyright and Related Rights. A Work made available under CC0 may be
protected by copyright and related or neighboring rights ("Copyright and
Related Rights"). Copyright and Related Rights include, but are not
limited to, the following:

  i. the right to reproduce, adapt, distribute, perform, display,
     communicate, and translate a Work;
 ii. moral rights retained by the original author(s) and/or performer(s);
iii. publicity and privacy rights pertaining to a person's image or
     likeness depicted in a Work;
 iv. rights protecting against unfair competition in regards to a Work,
     subject to the limitations in paragraph 4(a), below;
  v. rights protecting the extraction, dissemination, use and reuse of data
     in a Work;
 vi. database rights (such as those arising under Directive 96/9/EC of the
     European Parliament and of the Council of 11 March 1996 on the legal
     protection of databases, and under any national implementation
     thereof, including any amended or successor version of such
     directive); and
vii. other similar, equivalent or corresponding rights throughout the
     world based on applicable law or treaty, and any national
     implementations thereof.

2. Waiver. To the greatest extent permitted by, but not in contravention
of, applicable law, Affirmer hereby overtly, fully, permanently,
irrevocably and unconditionally waives, abandons, and surrenders all of
Affirmer's Copyright and Related Rights and associated claims and causes
of action, whether now known or unknown (including existing as well as
future claims and causes of action), in the Work (i) in all territories
worldwide, (ii) for the maximum duration provided by applicable law or
treaty (including future time extensions), (iii) in any current or future
medium and for any number of copies, and (iv) for any purpose whatsoever,
including without limitation commercial, advertising or promotional
purposes (the "Waiver"). Affirmer makes the Waiver for the benefit of each
member of the public at large and to the detriment of Affirmer's heirs and
successors, fully intending that such Waiver shall not be subject to
revocation, rescission, cancellation, termination, or any other legal or
equitable action to disrupt the quiet enjoyment of the Work by the public
as contemplated by Affirmer's express Statement of Purpose.

3. Public License Fallback. Should any part of the Waiver for any reason
be judged legally invalid or ineffective under applicable law, then the
Waiver shall be preserved to the maximum extent permitted taking into
account Affirmer's express Statement of Purpose. In addition, to the
extent the Waiver is so judged Affirmer hereby grants to each affected
person a royalty-free, non transferable, non sublicensable, non exclusive,
irrevocable and unconditional license to exercise Affirmer's Copyright and
Related Rights in the Work (i) in all territories worldwide, (ii) for the
maximum duration provided by applicable law or treaty (including future
time extensions), (iii) in any current or future medium and for any number
of copies, and (iv) for any purpose whatsoever, including without
limitation commercial, advertising or promotional purposes (the
"License"). The License shall be deemed effective as of the date CC0 was
applied by Affirmer to the Work. Should any part of the License for any
reason be judged legally invalid or ineffective under applicable law, such
partial invalidity or ineffectiveness shall not invalidate the remainder
of the License, and in such case Affirmer hereby affirms that he or she
will not (i) exercise any of his or her remaining Copyright and Related
Rights in the Work or (ii) assert any associated claims and causes of
action with respect to the Work, in either case contrary to Affirmer's
express Statement of Purpose.

4. Limitations and Disclaimers.

 a. No trademark or patent rights held by Affirmer are waived, abandoned,
    surrendered, licensed or otherwise affected by this document.
 b. Affirmer offers the Work as-is and makes no representations or
    warranties of any kind concerning the Work, express, implied,
    statutory or otherwise, including without limitation warranties of
    title, merchantability, fitness for a particular purpose, non
    infringement, or the absence of latent or other defects, accuracy, or
    the present or absence of errors, whether or not discoverable, all to
    the greatest extent permissible under applicable law.
 c. Affirmer disclaims responsibility for clearing rights of other persons
    that may apply to the Work or any use thereof, including without
    limitation any person's Copyright and Related Rights in the Work.
    Further, Affirmer disclaims responsibility for obtaining any necessary
    consents, permissions or other rights required for any use of the
    Work.
 d. Affirmer understands and acknowledges that Creative Commons is not a
    party to this document and has no duty or obligation with respect to
    this CC0 or use of the Work.`,"CC-BY":`Attribution 4.0 International

=======================================================================

Creative Commons Corporation ("Creative Commons") is not a law firm and
does not provide legal services or legal advice. Distribution of
Creative Commons public licenses does not create a lawyer-client or
other relationship. Creative Commons makes its licenses and related
information available on an "as-is" basis. Creative Commons gives no
warranties regarding its licenses, any material licensed under their
terms and conditions, or any related information. Creative Commons
disclaims all liability for damages resulting from their use to the
fullest extent possible.

Using Creative Commons Public Licenses

Creative Commons public licenses provide a standard set of terms and
conditions that creators and other rights holders may use to share
original works of authorship and other material subject to copyright
and certain other rights specified in the public license below. The
following considerations are for informational purposes only, are not
exhaustive, and do not form part of our licenses.

     Considerations for licensors: Our public licenses are
     intended for use by those authorized to give the public
     permission to use material in ways otherwise restricted by
     copyright and certain other rights. Our licenses are
     irrevocable. Licensors should read and understand the terms
     and conditions of the license they choose before applying it.
     Licensors should also secure all rights necessary before
     applying our licenses so that the public can reuse the
     material as expected. Licensors should clearly mark any
     material not subject to the license. This includes other CC-
     licensed material, or material used under an exception or
     limitation to copyright. More considerations for licensors:
	wiki.creativecommons.org/Considerations_for_licensors

     Considerations for the public: By using one of our public
     licenses, a licensor grants the public permission to use the
     licensed material under specified terms and conditions. If
     the licensor's permission is not necessary for any reason--for
     example, because of any applicable exception or limitation to
     copyright--then that use is not regulated by the license. Our
     licenses grant only permissions under copyright and certain
     other rights that a licensor has authority to grant. Use of
     the licensed material may still be restricted for other
     reasons, including because others have copyright or other
     rights in the material. A licensor may make special requests,
     such as asking that all changes be marked or described.
     Although not required by our licenses, you are encouraged to
     respect those requests where reasonable. More_considerations
     for the public:
	wiki.creativecommons.org/Considerations_for_licensees

=======================================================================

Creative Commons Attribution 4.0 International Public License

By exercising the Licensed Rights (defined below), You accept and agree
to be bound by the terms and conditions of this Creative Commons
Attribution 4.0 International Public License ("Public License"). To the
extent this Public License may be interpreted as a contract, You are
granted the Licensed Rights in consideration of Your acceptance of
these terms and conditions, and the Licensor grants You such rights in
consideration of benefits the Licensor receives from making the
Licensed Material available under these terms and conditions.


Section 1 -- Definitions.

  a. Adapted Material means material subject to Copyright and Similar
     Rights that is derived from or based upon the Licensed Material
     and in which the Licensed Material is translated, altered,
     arranged, transformed, or otherwise modified in a manner requiring
     permission under the Copyright and Similar Rights held by the
     Licensor. For purposes of this Public License, where the Licensed
     Material is a musical work, performance, or sound recording,
     Adapted Material is always produced where the Licensed Material is
     synched in timed relation with a moving image.

  b. Adapter's License means the license You apply to Your Copyright
     and Similar Rights in Your contributions to Adapted Material in
     accordance with the terms and conditions of this Public License.

  c. Copyright and Similar Rights means copyright and/or similar rights
     closely related to copyright including, without limitation,
     performance, broadcast, sound recording, and Sui Generis Database
     Rights, without regard to how the rights are labeled or
     categorized. For purposes of this Public License, the rights
     specified in Section 2(b)(1)-(2) are not Copyright and Similar
     Rights.

  d. Effective Technological Measures means those measures that, in the
     absence of proper authority, may not be circumvented under laws
     fulfilling obligations under Article 11 of the WIPO Copyright
     Treaty adopted on December 20, 1996, and/or similar international
     agreements.

  e. Exceptions and Limitations means fair use, fair dealing, and/or
     any other exception or limitation to Copyright and Similar Rights
     that applies to Your use of the Licensed Material.

  f. Licensed Material means the artistic or literary work, database,
     or other material to which the Licensor applied this Public
     License.

  g. Licensed Rights means the rights granted to You subject to the
     terms and conditions of this Public License, which are limited to
     all Copyright and Similar Rights that apply to Your use of the
     Licensed Material and that the Licensor has authority to license.

  h. Licensor means the individual(s) or entity(ies) granting rights
     under this Public License.

  i. Share means to provide material to the public by any means or
     process that requires permission under the Licensed Rights, such
     as reproduction, public display, public performance, distribution,
     dissemination, communication, or importation, and to make material
     available to the public including in ways that members of the
     public may access the material from a place and at a time
     individually chosen by them.

  j. Sui Generis Database Rights means rights other than copyright
     resulting from Directive 96/9/EC of the European Parliament and of
     the Council of 11 March 1996 on the legal protection of databases,
     as amended and/or succeeded, as well as other essentially
     equivalent rights anywhere in the world.

  k. You means the individual or entity exercising the Licensed Rights
     under this Public License. Your has a corresponding meaning.


Section 2 -- Scope.

  a. License grant.

       1. Subject to the terms and conditions of this Public License,
          the Licensor hereby grants You a worldwide, royalty-free,
          non-sublicensable, non-exclusive, irrevocable license to
          exercise the Licensed Rights in the Licensed Material to:

            a. reproduce and Share the Licensed Material, in whole or
               in part; and

            b. produce, reproduce, and Share Adapted Material.

       2. Exceptions and Limitations. For the avoidance of doubt, where
          Exceptions and Limitations apply to Your use, this Public
          License does not apply, and You do not need to comply with
          its terms and conditions.

       3. Term. The term of this Public License is specified in Section
          6(a).

       4. Media and formats; technical modifications allowed. The
          Licensor authorizes You to exercise the Licensed Rights in
          all media and formats whether now known or hereafter created,
          and to make technical modifications necessary to do so. The
          Licensor waives and/or agrees not to assert any right or
          authority to forbid You from making technical modifications
          necessary to exercise the Licensed Rights, including
          technical modifications necessary to circumvent Effective
          Technological Measures. For purposes of this Public License,
          simply making modifications authorized by this Section 2(a)
          (4) never produces Adapted Material.

       5. Downstream recipients.

            a. Offer from the Licensor -- Licensed Material. Every
               recipient of the Licensed Material automatically
               receives an offer from the Licensor to exercise the
               Licensed Rights under the terms and conditions of this
               Public License.

            b. No downstream restrictions. You may not offer or impose
               any additional or different terms or conditions on, or
               apply any Effective Technological Measures to, the
               Licensed Material if doing so restricts exercise of the
               Licensed Rights by any recipient of the Licensed
               Material.

       6. No endorsement. Nothing in this Public License constitutes or
          may be construed as permission to assert or imply that You
          are, or that Your use of the Licensed Material is, connected
          with, or sponsored, endorsed, or granted official status by,
          the Licensor or others designated to receive attribution as
          provided in Section 3(a)(1)(A)(i).

  b. Other rights.

       1. Moral rights, such as the right of integrity, are not
          licensed under this Public License, nor are publicity,
          privacy, and/or other similar personality rights; however, to
          the extent possible, the Licensor waives and/or agrees not to
          assert any such rights held by the Licensor to the limited
          extent necessary to allow You to exercise the Licensed
          Rights, but not otherwise.

       2. Patent and trademark rights are not licensed under this
          Public License.

       3. To the extent possible, the Licensor waives any right to
          collect royalties from You for the exercise of the Licensed
          Rights, whether directly or through a collecting society
          under any voluntary or waivable statutory or compulsory
          licensing scheme. In all other cases the Licensor expressly
          reserves any right to collect such royalties.


Section 3 -- License Conditions.

Your exercise of the Licensed Rights is expressly made subject to the
following conditions.

  a. Attribution.

       1. If You Share the Licensed Material (including in modified
          form), You must:

            a. retain the following if it is supplied by the Licensor
               with the Licensed Material:

                 i. identification of the creator(s) of the Licensed
                    Material and any others designated to receive
                    attribution, in any reasonable manner requested by
                    the Licensor (including by pseudonym if
                    designated);

                ii. a copyright notice;

               iii. a notice that refers to this Public License;

                iv. a notice that refers to the disclaimer of
                    warranties;

                 v. a URI or hyperlink to the Licensed Material to the
                    extent reasonably practicable;

            b. indicate if You modified the Licensed Material and
               retain an indication of any previous modifications; and

            c. indicate the Licensed Material is licensed under this
               Public License, and include the text of, or the URI or
               hyperlink to, this Public License.

       2. You may satisfy the conditions in Section 3(a)(1) in any
          reasonable manner based on the medium, means, and context in
          which You Share the Licensed Material. For example, it may be
          reasonable to satisfy the conditions by providing a URI or
          hyperlink to a resource that includes the required
          information.

       3. If requested by the Licensor, You must remove any of the
          information required by Section 3(a)(1)(A) to the extent
          reasonably practicable.

       4. If You Share Adapted Material You produce, the Adapter's
          License You apply must not prevent recipients of the Adapted
          Material from complying with this Public License.


Section 4 -- Sui Generis Database Rights.

Where the Licensed Rights include Sui Generis Database Rights that
apply to Your use of the Licensed Material:

  a. for the avoidance of doubt, Section 2(a)(1) grants You the right
     to extract, reuse, reproduce, and Share all or a substantial
     portion of the contents of the database;

  b. if You include all or a substantial portion of the database
     contents in a database in which You have Sui Generis Database
     Rights, then the database in which You have Sui Generis Database
     Rights (but not its individual contents) is Adapted Material; and

  c. You must comply with the conditions in Section 3(a) if You Share
     all or a substantial portion of the contents of the database.

For the avoidance of doubt, this Section 4 supplements and does not
replace Your obligations under this Public License where the Licensed
Rights include other Copyright and Similar Rights.


Section 5 -- Disclaimer of Warranties and Limitation of Liability.

  a. UNLESS OTHERWISE SEPARATELY UNDERTAKEN BY THE LICENSOR, TO THE
     EXTENT POSSIBLE, THE LICENSOR OFFERS THE LICENSED MATERIAL AS-IS
     AND AS-AVAILABLE, AND MAKES NO REPRESENTATIONS OR WARRANTIES OF
     ANY KIND CONCERNING THE LICENSED MATERIAL, WHETHER EXPRESS,
     IMPLIED, STATUTORY, OR OTHER. THIS INCLUDES, WITHOUT LIMITATION,
     WARRANTIES OF TITLE, MERCHANTABILITY, FITNESS FOR A PARTICULAR
     PURPOSE, NON-INFRINGEMENT, ABSENCE OF LATENT OR OTHER DEFECTS,
     ACCURACY, OR THE PRESENCE OR ABSENCE OF ERRORS, WHETHER OR NOT
     KNOWN OR DISCOVERABLE. WHERE DISCLAIMERS OF WARRANTIES ARE NOT
     ALLOWED IN FULL OR IN PART, THIS DISCLAIMER MAY NOT APPLY TO YOU.

  b. TO THE EXTENT POSSIBLE, IN NO EVENT WILL THE LICENSOR BE LIABLE
     TO YOU ON ANY LEGAL THEORY (INCLUDING, WITHOUT LIMITATION,
     NEGLIGENCE) OR OTHERWISE FOR ANY DIRECT, SPECIAL, INDIRECT,
     INCIDENTAL, CONSEQUENTIAL, PUNITIVE, EXEMPLARY, OR OTHER LOSSES,
     COSTS, EXPENSES, OR DAMAGES ARISING OUT OF THIS PUBLIC LICENSE OR
     USE OF THE LICENSED MATERIAL, EVEN IF THE LICENSOR HAS BEEN
     ADVISED OF THE POSSIBILITY OF SUCH LOSSES, COSTS, EXPENSES, OR
     DAMAGES. WHERE A LIMITATION OF LIABILITY IS NOT ALLOWED IN FULL OR
     IN PART, THIS LIMITATION MAY NOT APPLY TO YOU.

  c. The disclaimer of warranties and limitation of liability provided
     above shall be interpreted in a manner that, to the extent
     possible, most closely approximates an absolute disclaimer and
     waiver of all liability.


Section 6 -- Term and Termination.

  a. This Public License applies for the term of the Copyright and
     Similar Rights licensed here. However, if You fail to comply with
     this Public License, then Your rights under this Public License
     terminate automatically.

  b. Where Your right to use the Licensed Material has terminated under
     Section 6(a), it reinstates:

       1. automatically as of the date the violation is cured, provided
          it is cured within 30 days of Your discovery of the
          violation; or

       2. upon express reinstatement by the Licensor.

     For the avoidance of doubt, this Section 6(b) does not affect any
     right the Licensor may have to seek remedies for Your violations
     of this Public License.

  c. For the avoidance of doubt, the Licensor may also offer the
     Licensed Material under separate terms or conditions or stop
     distributing the Licensed Material at any time; however, doing so
     will not terminate this Public License.

  d. Sections 1, 5, 6, 7, and 8 survive termination of this Public
     License.


Section 7 -- Other Terms and Conditions.

  a. The Licensor shall not be bound by any additional or different
     terms or conditions communicated by You unless expressly agreed.

  b. Any arrangements, understandings, or agreements regarding the
     Licensed Material not stated herein are separate from and
     independent of the terms and conditions of this Public License.


Section 8 -- Interpretation.

  a. For the avoidance of doubt, this Public License does not, and
     shall not be interpreted to, reduce, limit, restrict, or impose
     conditions on any use of the Licensed Material that could lawfully
     be made without permission under this Public License.

  b. To the extent possible, if any provision of this Public License is
     deemed unenforceable, it shall be automatically reformed to the
     minimum extent necessary to make it enforceable. If the provision
     cannot be reformed, it shall be severed from this Public License
     without affecting the enforceability of the remaining terms and
     conditions.

  c. No term or condition of this Public License will be waived and no
     failure to comply consented to unless expressly agreed to by the
     Licensor.

  d. Nothing in this Public License constitutes or may be interpreted
     as a limitation upon, or waiver of, any privileges and immunities
     that apply to the Licensor or You, including from the legal
     processes of any jurisdiction or authority.


=======================================================================

Creative Commons is not a party to its public
licenses. Notwithstanding, Creative Commons may elect to apply one of
its public licenses to material it publishes and in those instances
will be considered the “Licensor.” The text of the Creative Commons
public licenses is dedicated to the public domain under the CC0 Public
Domain Dedication. Except for the limited purpose of indicating that
material is shared under a Creative Commons public license or as
otherwise permitted by the Creative Commons policies published at
creativecommons.org/policies, Creative Commons does not authorize the
use of the trademark "Creative Commons" or any other trademark or logo
of Creative Commons without its prior written consent including,
without limitation, in connection with any unauthorized modifications
to any of its public licenses or any other arrangements,
understandings, or agreements concerning use of licensed material. For
the avoidance of doubt, this paragraph does not form part of the
public licenses.

Creative Commons may be contacted at creativecommons.org.`};function Nz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $t(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nz(Object(t),!0).forEach(function(r){hr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Nz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function oRe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Pz(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,OG(r.key),r)}}function lRe(n,e,t){return e&&Pz(n.prototype,e),t&&Pz(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function p3(n,e){return p3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},p3(n,e)}function uRe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&p3(n,e)}function FS(n){return FS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},FS(n)}function Yq(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yq=function(){return!!n})()}function cRe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function fRe(n,e){if(e&&(wd(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cRe(n)}function dRe(n){var e=Yq();return function(){var t,r=FS(n);if(e){var i=FS(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return fRe(this,t)}}function m3(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function hRe(n){if(Array.isArray(n))return m3(n)}function pRe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Kq(n,e){if(n){if(typeof n=="string")return m3(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m3(n,e):void 0}}function mRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dp(n){return hRe(n)||pRe(n)||Kq(n)||mRe()}function gRe(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function vRe(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var yRe=function(){function n(t){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(vRe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=gRe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},n}(),Xi="-ms-",BS="-moz-",Rn="-webkit-",Zq="comm",sR="rule",aR="decl",xRe="@import",Jq="@keyframes",bRe="@layer",wRe=Math.abs,tE=String.fromCharCode,SRe=Object.assign;function _Re(n,e){return Ci(n,0)^45?(((e<<2^Ci(n,0))<<2^Ci(n,1))<<2^Ci(n,2))<<2^Ci(n,3):0}function Qq(n){return n.trim()}function ERe(n,e){return(n=e.exec(n))?n[0]:n}function On(n,e,t){return n.replace(e,t)}function g3(n,e){return n.indexOf(e)}function Ci(n,e){return n.charCodeAt(e)|0}function a0(n,e,t){return n.slice(e,t)}function nl(n){return n.length}function oR(n){return n.length}function xx(n,e){return e.push(n),n}function MRe(n,e){return n.map(e).join("")}var nE=1,em=1,eX=0,Ks=0,jr=0,km="";function rE(n,e,t,r,i,s,a){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:nE,column:em,length:a,return:""}}function _g(n,e){return SRe(rE("",null,null,"",null,null,0),n,{length:-n.length},e)}function CRe(){return jr}function ARe(){return jr=Ks>0?Ci(km,--Ks):0,em--,jr===10&&(em=1,nE--),jr}function ba(){return jr=Ks<eX?Ci(km,Ks++):0,em++,jr===10&&(em=1,nE++),jr}function gl(){return Ci(km,Ks)}function nw(){return Ks}function py(n,e){return a0(km,n,e)}function o0(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function tX(n){return nE=em=1,eX=nl(km=n),Ks=0,[]}function nX(n){return km="",n}function rw(n){return Qq(py(Ks-1,v3(n===91?n+2:n===40?n+1:n)))}function TRe(n){for(;(jr=gl())&&jr<33;)ba();return o0(n)>2||o0(jr)>3?"":" "}function DRe(n,e){for(;--e&&ba()&&!(jr<48||jr>102||jr>57&&jr<65||jr>70&&jr<97););return py(n,nw()+(e<6&&gl()==32&&ba()==32))}function v3(n){for(;ba();)switch(jr){case n:return Ks;case 34:case 39:n!==34&&n!==39&&v3(jr);break;case 40:n===41&&v3(n);break;case 92:ba();break}return Ks}function NRe(n,e){for(;ba()&&n+jr!==57;)if(n+jr===84&&gl()===47)break;return"/*"+py(e,Ks-1)+"*"+tE(n===47?n:ba())}function PRe(n){for(;!o0(gl());)ba();return py(n,Ks)}function RRe(n){return nX(iw("",null,null,null,[""],n=tX(n),0,[0],n))}function iw(n,e,t,r,i,s,a,o,l){for(var u=0,c=0,f=a,d=0,h=0,p=0,v=1,y=1,m=1,S=0,b="",g=i,w=s,x=r,M=b;y;)switch(p=S,S=ba()){case 40:if(p!=108&&Ci(M,f-1)==58){g3(M+=On(rw(S),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:M+=rw(S);break;case 9:case 10:case 13:case 32:M+=TRe(p);break;case 92:M+=DRe(nw()-1,7);continue;case 47:switch(gl()){case 42:case 47:xx(ORe(NRe(ba(),nw()),e,t),l);break;default:M+="/"}break;case 123*v:o[u++]=nl(M)*m;case 125*v:case 59:case 0:switch(S){case 0:case 125:y=0;case 59+c:m==-1&&(M=On(M,/\f/g,"")),h>0&&nl(M)-f&&xx(h>32?Oz(M+";",r,t,f-1):Oz(On(M," ","")+";",r,t,f-2),l);break;case 59:M+=";";default:if(xx(x=Rz(M,e,t,u,c,i,o,b,g=[],w=[],f),s),S===123)if(c===0)iw(M,e,x,x,g,s,f,o,w);else switch(d===99&&Ci(M,3)===110?100:d){case 100:case 108:case 109:case 115:iw(n,x,x,r&&xx(Rz(n,x,x,0,0,i,o,b,i,g=[],f),w),i,w,f,o,r?g:w);break;default:iw(M,x,x,x,[""],w,0,o,w)}}u=c=h=0,v=m=1,b=M="",f=a;break;case 58:f=1+nl(M),h=p;default:if(v<1){if(S==123)--v;else if(S==125&&v++==0&&ARe()==125)continue}switch(M+=tE(S),S*v){case 38:m=c>0?1:(M+="\f",-1);break;case 44:o[u++]=(nl(M)-1)*m,m=1;break;case 64:gl()===45&&(M+=rw(ba())),d=gl(),c=f=nl(b=M+=PRe(nw())),S++;break;case 45:p===45&&nl(M)==2&&(v=0)}}return s}function Rz(n,e,t,r,i,s,a,o,l,u,c){for(var f=i-1,d=i===0?s:[""],h=oR(d),p=0,v=0,y=0;p<r;++p)for(var m=0,S=a0(n,f+1,f=wRe(v=a[p])),b=n;m<h;++m)(b=Qq(v>0?d[m]+" "+S:On(S,/&\f/g,d[m])))&&(l[y++]=b);return rE(n,e,t,i===0?sR:o,l,u,c)}function ORe(n,e,t){return rE(n,e,t,Zq,tE(CRe()),a0(n,2,-2),0)}function Oz(n,e,t,r){return rE(n,e,t,aR,a0(n,0,r),a0(n,r+1,-1),r)}function Np(n,e){for(var t="",r=oR(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function IRe(n,e,t,r){switch(n.type){case bRe:if(n.children.length)break;case xRe:case aR:return n.return=n.return||n.value;case Zq:return"";case Jq:return n.return=n.value+"{"+Np(n.children,r)+"}";case sR:n.value=n.props.join(",")}return nl(t=Np(n.children,r))?n.return=n.value+"{"+t+"}":""}function kRe(n){var e=oR(n);return function(t,r,i,s){for(var a="",o=0;o<e;o++)a+=n[o](t,r,i,s)||"";return a}}function LRe(n){return function(e){e.root||(e=e.return)&&n(e)}}function FRe(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var BRe=function(e,t,r){for(var i=0,s=0;i=s,s=gl(),i===38&&s===12&&(t[r]=1),!o0(s);)ba();return py(e,Ks)},zRe=function(e,t){var r=-1,i=44;do switch(o0(i)){case 0:i===38&&gl()===12&&(t[r]=1),e[r]+=BRe(Ks-1,t,r);break;case 2:e[r]+=rw(i);break;case 4:if(i===44){e[++r]=gl()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=tE(i)}while(i=ba());return e},URe=function(e,t){return nX(zRe(tX(e),t))},Iz=new WeakMap,$Re=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!Iz.get(r))&&!i){Iz.set(e,!0);for(var s=[],a=URe(t,s),o=r.props,l=0,u=0;l<a.length;l++)for(var c=0;c<o.length;c++,u++)e.props[u]=s[l]?a[l].replace(/&\f/g,o[c]):o[c]+" "+a[l]}}},VRe=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function rX(n,e){switch(_Re(n,e)){case 5103:return Rn+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Rn+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Rn+n+BS+n+Xi+n+n;case 6828:case 4268:return Rn+n+Xi+n+n;case 6165:return Rn+n+Xi+"flex-"+n+n;case 5187:return Rn+n+On(n,/(\w+).+(:[^]+)/,Rn+"box-$1$2"+Xi+"flex-$1$2")+n;case 5443:return Rn+n+Xi+"flex-item-"+On(n,/flex-|-self/,"")+n;case 4675:return Rn+n+Xi+"flex-line-pack"+On(n,/align-content|flex-|-self/,"")+n;case 5548:return Rn+n+Xi+On(n,"shrink","negative")+n;case 5292:return Rn+n+Xi+On(n,"basis","preferred-size")+n;case 6060:return Rn+"box-"+On(n,"-grow","")+Rn+n+Xi+On(n,"grow","positive")+n;case 4554:return Rn+On(n,/([^-])(transform)/g,"$1"+Rn+"$2")+n;case 6187:return On(On(On(n,/(zoom-|grab)/,Rn+"$1"),/(image-set)/,Rn+"$1"),n,"")+n;case 5495:case 3959:return On(n,/(image-set\([^]*)/,Rn+"$1$`$1");case 4968:return On(On(n,/(.+:)(flex-)?(.*)/,Rn+"box-pack:$3"+Xi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Rn+n+n;case 4095:case 3583:case 4068:case 2532:return On(n,/(.+)-inline(.+)/,Rn+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(nl(n)-1-e>6)switch(Ci(n,e+1)){case 109:if(Ci(n,e+4)!==45)break;case 102:return On(n,/(.+:)(.+)-([^]+)/,"$1"+Rn+"$2-$3$1"+BS+(Ci(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~g3(n,"stretch")?rX(On(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Ci(n,e+1)!==115)break;case 6444:switch(Ci(n,nl(n)-3-(~g3(n,"!important")&&10))){case 107:return On(n,":",":"+Rn)+n;case 101:return On(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Rn+(Ci(n,14)===45?"inline-":"")+"box$3$1"+Rn+"$2$3$1"+Xi+"$2box$3")+n}break;case 5936:switch(Ci(n,e+11)){case 114:return Rn+n+Xi+On(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Rn+n+Xi+On(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Rn+n+Xi+On(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Rn+n+Xi+n+n}return n}var HRe=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case aR:e.return=rX(e.value,e.length);break;case Jq:return Np([_g(e,{value:On(e.value,"@","@"+Rn)})],i);case sR:if(e.length)return MRe(e.props,function(s){switch(ERe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Np([_g(e,{props:[On(s,/:(read-\w+)/,":"+BS+"$1")]})],i);case"::placeholder":return Np([_g(e,{props:[On(s,/:(plac\w+)/,":"+Rn+"input-$1")]}),_g(e,{props:[On(s,/:(plac\w+)/,":"+BS+"$1")]}),_g(e,{props:[On(s,/:(plac\w+)/,Xi+"input-$1")]})],i)}return""})}},WRe=[HRe],GRe=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var y=v.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||WRe,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(v){for(var y=v.getAttribute("data-emotion").split(" "),m=1;m<y.length;m++)s[y[m]]=!0;o.push(v)});var l,u=[$Re,VRe];{var c,f=[IRe,LRe(function(v){c.insert(v)})],d=kRe(u.concat(i,f)),h=function(y){return Np(RRe(y),d)};l=function(y,m,S,b){c=S,h(y?y+"{"+m.styles+"}":m.styles),b&&(p.inserted[m.name]=!0)}}var p={key:t,sheet:new yRe({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(o),p},iX={exports:{}},Gn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xi=typeof Symbol=="function"&&Symbol.for,lR=xi?Symbol.for("react.element"):60103,uR=xi?Symbol.for("react.portal"):60106,iE=xi?Symbol.for("react.fragment"):60107,sE=xi?Symbol.for("react.strict_mode"):60108,aE=xi?Symbol.for("react.profiler"):60114,oE=xi?Symbol.for("react.provider"):60109,lE=xi?Symbol.for("react.context"):60110,cR=xi?Symbol.for("react.async_mode"):60111,uE=xi?Symbol.for("react.concurrent_mode"):60111,cE=xi?Symbol.for("react.forward_ref"):60112,fE=xi?Symbol.for("react.suspense"):60113,jRe=xi?Symbol.for("react.suspense_list"):60120,dE=xi?Symbol.for("react.memo"):60115,hE=xi?Symbol.for("react.lazy"):60116,qRe=xi?Symbol.for("react.block"):60121,XRe=xi?Symbol.for("react.fundamental"):60117,YRe=xi?Symbol.for("react.responder"):60118,KRe=xi?Symbol.for("react.scope"):60119;function Ta(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case lR:switch(n=n.type,n){case cR:case uE:case iE:case aE:case sE:case fE:return n;default:switch(n=n&&n.$$typeof,n){case lE:case cE:case hE:case dE:case oE:return n;default:return e}}case uR:return e}}}function sX(n){return Ta(n)===uE}Gn.AsyncMode=cR;Gn.ConcurrentMode=uE;Gn.ContextConsumer=lE;Gn.ContextProvider=oE;Gn.Element=lR;Gn.ForwardRef=cE;Gn.Fragment=iE;Gn.Lazy=hE;Gn.Memo=dE;Gn.Portal=uR;Gn.Profiler=aE;Gn.StrictMode=sE;Gn.Suspense=fE;Gn.isAsyncMode=function(n){return sX(n)||Ta(n)===cR};Gn.isConcurrentMode=sX;Gn.isContextConsumer=function(n){return Ta(n)===lE};Gn.isContextProvider=function(n){return Ta(n)===oE};Gn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===lR};Gn.isForwardRef=function(n){return Ta(n)===cE};Gn.isFragment=function(n){return Ta(n)===iE};Gn.isLazy=function(n){return Ta(n)===hE};Gn.isMemo=function(n){return Ta(n)===dE};Gn.isPortal=function(n){return Ta(n)===uR};Gn.isProfiler=function(n){return Ta(n)===aE};Gn.isStrictMode=function(n){return Ta(n)===sE};Gn.isSuspense=function(n){return Ta(n)===fE};Gn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===iE||n===uE||n===aE||n===sE||n===fE||n===jRe||typeof n=="object"&&n!==null&&(n.$$typeof===hE||n.$$typeof===dE||n.$$typeof===oE||n.$$typeof===lE||n.$$typeof===cE||n.$$typeof===XRe||n.$$typeof===YRe||n.$$typeof===KRe||n.$$typeof===qRe)};Gn.typeOf=Ta;iX.exports=Gn;var ZRe=iX.exports,aX=ZRe,JRe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},QRe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},oX={};oX[aX.ForwardRef]=JRe;oX[aX.Memo]=QRe;var eOe=!0;function tOe(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):r+=i+" "}),r}var lX=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||eOe===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},nOe=function(e,t,r){lX(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function rOe(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var iOe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},sOe=/[A-Z]|^ms/g,aOe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,uX=function(e){return e.charCodeAt(1)===45},kz=function(e){return e!=null&&typeof e!="boolean"},rC=FRe(function(n){return uX(n)?n:n.replace(sOe,"-$&").toLowerCase()}),Lz=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(aOe,function(r,i,s){return rl={name:i,styles:s,next:rl},i})}return iOe[e]!==1&&!uX(e)&&typeof t=="number"&&t!==0?t+"px":t};function l0(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return rl={name:t.name,styles:t.styles,next:rl},t.name;if(t.styles!==void 0){var r=t.next;if(r!==void 0)for(;r!==void 0;)rl={name:r.name,styles:r.styles,next:rl},r=r.next;var i=t.styles+";";return i}return oOe(n,e,t)}case"function":{if(n!==void 0){var s=rl,a=t(n);return rl=s,l0(n,e,a)}break}}return t}function oOe(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=l0(n,e,t[i])+";";else for(var s in t){var a=t[s];if(typeof a!="object")kz(a)&&(r+=rC(s)+":"+Lz(s,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&e==null)for(var o=0;o<a.length;o++)kz(a[o])&&(r+=rC(s)+":"+Lz(s,a[o])+";");else{var l=l0(n,e,a);switch(s){case"animation":case"animationName":{r+=rC(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var Fz=/label:\s*([^\s;\n{]+)\s*(;|$)/g,rl,cX=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";rl=void 0;var a=e[0];a==null||a.raw===void 0?(i=!1,s+=l0(r,t,a)):s+=a[0];for(var o=1;o<e.length;o++)s+=l0(r,t,e[o]),i&&(s+=a[o]);Fz.lastIndex=0;for(var l="",u;(u=Fz.exec(s))!==null;)l+="-"+u[1];var c=rOe(s)+l;return{name:c,styles:s,next:rl}},lOe=function(e){return e()},uOe=Mw.useInsertionEffect?Mw.useInsertionEffect:!1,cOe=uOe||lOe,fR={}.hasOwnProperty,fX=z.createContext(typeof HTMLElement<"u"?GRe({key:"css"}):null);fX.Provider;var fOe=function(e){return z.forwardRef(function(t,r){var i=z.useContext(fX);return e(t,i,r)})},dOe=z.createContext({}),y3="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",hOe=function(e,t){var r={};for(var i in t)fR.call(t,i)&&(r[i]=t[i]);return r[y3]=e,r},pOe=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return lX(t,r,i),cOe(function(){return nOe(t,r,i)}),null},mOe=fOe(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=n[y3],s=[r],a="";typeof n.className=="string"?a=tOe(e.registered,s,n.className):n.className!=null&&(a=n.className+" ");var o=cX(s,void 0,z.useContext(dOe));a+=e.key+"-"+o.name;var l={};for(var u in n)fR.call(n,u)&&u!=="css"&&u!==y3&&(l[u]=n[u]);return l.ref=t,l.className=a,z.createElement(z.Fragment,null,z.createElement(pOe,{cache:e,serialized:o,isStringTag:typeof i=="string"}),z.createElement(i,l))}),gOe=mOe,Ht=function(e,t){var r=arguments;if(t==null||!fR.call(t,"css"))return z.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=gOe,s[1]=hOe(e,t);for(var a=2;a<i;a++)s[a]=r[a];return z.createElement.apply(null,s)};function dR(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return cX(e)}var vOe=function(){var e=dR.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function yOe(n){if(Array.isArray(n))return n}function xOe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function bOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function du(n,e){return yOe(n)||xOe(n,e)||Kq(n,e)||bOe()}function dX(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Tl(n,e){if(n==null)return{};var t,r,i=dX(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function wOe(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var x3=z.useLayoutEffect,SOe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],zS=function(){};function _Oe(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function EOe(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];var s=[].concat(r);if(e&&n)for(var a in e)e.hasOwnProperty(a)&&e[a]&&s.push("".concat(_Oe(n,a)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var US=function(e){return OOe(e)?e.filter(Boolean):wd(e)==="object"&&e!==null?[e]:[]},hX=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=Tl(e,SOe);return $t({},t)},Or=function(e,t,r){var i=e.cx,s=e.getStyles,a=e.getClassNames,o=e.className;return{css:s(t,e),className:i(r??{},a(t,e),o)}};function pE(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function MOe(n){return pE(n)?window.innerHeight:n.clientHeight}function pX(n){return pE(n)?window.pageYOffset:n.scrollTop}function $S(n,e){if(pE(n)){window.scrollTo(0,e);return}n.scrollTop=e}function COe(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=n;i=i.parentElement;)if(e=getComputedStyle(i),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function AOe(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function bx(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:zS,i=pX(n),s=e-i,a=10,o=0;function l(){o+=a;var u=AOe(o,i,s,t);$S(n,u),o<t?window.requestAnimationFrame(l):r(n)}l()}function Bz(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>t.bottom?$S(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+i,n.scrollHeight)):r.top-i<t.top&&$S(n,Math.max(e.offsetTop-i,0))}function TOe(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function zz(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function DOe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var mX=!1,NOe={get passive(){return mX=!0}},wx=typeof window<"u"?window:{};wx.addEventListener&&wx.removeEventListener&&(wx.addEventListener("p",zS,NOe),wx.removeEventListener("p",zS,!1));var POe=mX;function ROe(n){return n!=null}function OOe(n){return Array.isArray(n)}function Jg(n,e,t){return n?e:t}var IOe=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var s=Object.entries(e).filter(function(a){var o=du(a,1),l=o[0];return!r.includes(l)});return s.reduce(function(a,o){var l=du(o,2),u=l[0],c=l[1];return a[u]=c,a},{})},kOe=["children","innerProps"],LOe=["children","innerProps"];function FOe(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,i=n.placement,s=n.shouldScroll,a=n.isFixedPosition,o=n.controlHeight,l=COe(t),u={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return u;var c=l.getBoundingClientRect(),f=c.height,d=t.getBoundingClientRect(),h=d.bottom,p=d.height,v=d.top,y=t.offsetParent.getBoundingClientRect(),m=y.top,S=a?window.innerHeight:MOe(l),b=pX(l),g=parseInt(getComputedStyle(t).marginBottom,10),w=parseInt(getComputedStyle(t).marginTop,10),x=m-w,M=S-v,A=x+b,N=f-b-v,C=h-S+b+g,T=b+v-w,R=160;switch(i){case"auto":case"bottom":if(M>=p)return{placement:"bottom",maxHeight:e};if(N>=p&&!a)return s&&bx(l,C,R),{placement:"bottom",maxHeight:e};if(!a&&N>=r||a&&M>=r){s&&bx(l,C,R);var U=a?M-g:N-g;return{placement:"bottom",maxHeight:U}}if(i==="auto"||a){var F=e,B=a?x:A;return B>=r&&(F=Math.min(B-g-o,e)),{placement:"top",maxHeight:F}}if(i==="bottom")return s&&$S(l,C),{placement:"bottom",maxHeight:e};break;case"top":if(x>=p)return{placement:"top",maxHeight:e};if(A>=p&&!a)return s&&bx(l,T,R),{placement:"top",maxHeight:e};if(!a&&A>=r||a&&x>=r){var D=e;return(!a&&A>=r||a&&x>=r)&&(D=a?x-w:A-w),s&&bx(l,T,R),{placement:"top",maxHeight:D}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return u}function BOe(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var gX=function(e){return e==="auto"?"bottom":e},zOe=function(e,t){var r,i=e.placement,s=e.theme,a=s.borderRadius,o=s.spacing,l=s.colors;return $t((r={label:"menu"},hr(r,BOe(i),"100%"),hr(r,"position","absolute"),hr(r,"width","100%"),hr(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},vX=z.createContext(null),UOe=function(e){var t=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,a=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,u=z.useContext(vX)||{},c=u.setPortalPlacement,f=z.useRef(null),d=z.useState(i),h=du(d,2),p=h[0],v=h[1],y=z.useState(null),m=du(y,2),S=m[0],b=m[1],g=l.spacing.controlHeight;return x3(function(){var w=f.current;if(w){var x=a==="fixed",M=o&&!x,A=FOe({maxHeight:i,menuEl:w,minHeight:r,placement:s,shouldScroll:M,isFixedPosition:x,controlHeight:g});v(A.maxHeight),b(A.placement),c==null||c(A.placement)}},[i,s,a,o,r,c,g]),t({ref:f,placerProps:$t($t({},e),{},{placement:S||gX(s),maxHeight:p})})},$Oe=function(e){var t=e.children,r=e.innerRef,i=e.innerProps;return Ht("div",ot({},Or(e,"menu",{menu:!0}),{ref:r},i),t)},VOe=$Oe,HOe=function(e,t){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return $t({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:i,paddingTop:i})},WOe=function(e){var t=e.children,r=e.innerProps,i=e.innerRef,s=e.isMulti;return Ht("div",ot({},Or(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},r),t)},yX=function(e,t){var r=e.theme,i=r.spacing.baseUnit,s=r.colors;return $t({textAlign:"center"},t?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},GOe=yX,jOe=yX,qOe=function(e){var t=e.children,r=t===void 0?"No options":t,i=e.innerProps,s=Tl(e,kOe);return Ht("div",ot({},Or($t($t({},s),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},XOe=function(e){var t=e.children,r=t===void 0?"Loading...":t,i=e.innerProps,s=Tl(e,LOe);return Ht("div",ot({},Or($t($t({},s),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},YOe=function(e){var t=e.rect,r=e.offset,i=e.position;return{left:t.left,position:i,top:r,width:t.width,zIndex:1}},KOe=function(e){var t=e.appendTo,r=e.children,i=e.controlElement,s=e.innerProps,a=e.menuPlacement,o=e.menuPosition,l=z.useRef(null),u=z.useRef(null),c=z.useState(gX(a)),f=du(c,2),d=f[0],h=f[1],p=z.useMemo(function(){return{setPortalPlacement:h}},[]),v=z.useState(null),y=du(v,2),m=y[0],S=y[1],b=z.useCallback(function(){if(i){var M=TOe(i),A=o==="fixed"?0:window.pageYOffset,N=M[d]+A;(N!==(m==null?void 0:m.offset)||M.left!==(m==null?void 0:m.rect.left)||M.width!==(m==null?void 0:m.rect.width))&&S({offset:N,rect:M})}},[i,o,d,m==null?void 0:m.offset,m==null?void 0:m.rect.left,m==null?void 0:m.rect.width]);x3(function(){b()},[b]);var g=z.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),i&&l.current&&(u.current=Mj(i,l.current,b,{elementResize:"ResizeObserver"in window}))},[i,b]);x3(function(){g()},[g]);var w=z.useCallback(function(M){l.current=M,g()},[g]);if(!t&&o!=="fixed"||!m)return null;var x=Ht("div",ot({ref:w},Or($t($t({},e),{},{offset:m.offset,position:o,rect:m.rect}),"menuPortal",{"menu-portal":!0}),s),r);return Ht(vX.Provider,{value:p},t?mm.createPortal(x,t):x)},ZOe=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},JOe=function(e){var t=e.children,r=e.innerProps,i=e.isDisabled,s=e.isRtl;return Ht("div",ot({},Or(e,"container",{"--is-disabled":i,"--is-rtl":s}),r),t)},QOe=function(e,t){var r=e.theme.spacing,i=e.isMulti,s=e.hasValue,a=e.selectProps.controlShouldRenderValue;return $t({alignItems:"center",display:i&&s&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},eIe=function(e){var t=e.children,r=e.innerProps,i=e.isMulti,s=e.hasValue;return Ht("div",ot({},Or(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),r),t)},tIe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},nIe=function(e){var t=e.children,r=e.innerProps;return Ht("div",ot({},Or(e,"indicatorsContainer",{indicators:!0}),r),t)},Uz,rIe=["size"],iIe=["innerProps","isRtl","size"],sIe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},xX=function(e){var t=e.size,r=Tl(e,rIe);return Ht("svg",ot({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:sIe},r))},hR=function(e){return Ht(xX,ot({size:20},e),Ht("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},bX=function(e){return Ht(xX,ot({size:20},e),Ht("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},wX=function(e,t){var r=e.isFocused,i=e.theme,s=i.spacing.baseUnit,a=i.colors;return $t({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?a.neutral60:a.neutral20,padding:s*2,":hover":{color:r?a.neutral80:a.neutral40}})},aIe=wX,oIe=function(e){var t=e.children,r=e.innerProps;return Ht("div",ot({},Or(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Ht(bX,null))},lIe=wX,uIe=function(e){var t=e.children,r=e.innerProps;return Ht("div",ot({},Or(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Ht(hR,null))},cIe=function(e,t){var r=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,a=i.colors;return $t({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?a.neutral10:a.neutral20,marginBottom:s*2,marginTop:s*2})},fIe=function(e){var t=e.innerProps;return Ht("span",ot({},t,Or(e,"indicatorSeparator",{"indicator-separator":!0})))},dIe=vOe(Uz||(Uz=wOe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),hIe=function(e,t){var r=e.isFocused,i=e.size,s=e.theme,a=s.colors,o=s.spacing.baseUnit;return $t({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?a.neutral60:a.neutral20,padding:o*2})},iC=function(e){var t=e.delay,r=e.offset;return Ht("span",{css:dR({animation:"".concat(dIe," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},pIe=function(e){var t=e.innerProps,r=e.isRtl,i=e.size,s=i===void 0?4:i,a=Tl(e,iIe);return Ht("div",ot({},Or($t($t({},a),{},{innerProps:t,isRtl:r,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Ht(iC,{delay:0,offset:r}),Ht(iC,{delay:160,offset:!0}),Ht(iC,{delay:320,offset:!r}))},mIe=function(e,t){var r=e.isDisabled,i=e.isFocused,s=e.theme,a=s.colors,o=s.borderRadius,l=s.spacing;return $t({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?a.neutral5:a.neutral0,borderColor:r?a.neutral10:i?a.primary:a.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:i?a.primary:a.neutral30}})},gIe=function(e){var t=e.children,r=e.isDisabled,i=e.isFocused,s=e.innerRef,a=e.innerProps,o=e.menuIsOpen;return Ht("div",ot({ref:s},Or(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":o}),a,{"aria-disabled":r||void 0}),t)},vIe=gIe,yIe=["data"],xIe=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},bIe=function(e){var t=e.children,r=e.cx,i=e.getStyles,s=e.getClassNames,a=e.Heading,o=e.headingProps,l=e.innerProps,u=e.label,c=e.theme,f=e.selectProps;return Ht("div",ot({},Or(e,"group",{group:!0}),l),Ht(a,ot({},o,{selectProps:f,theme:c,getStyles:i,getClassNames:s,cx:r}),u),Ht("div",null,t))},wIe=function(e,t){var r=e.theme,i=r.colors,s=r.spacing;return $t({label:"group",cursor:"default",display:"block"},t?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},SIe=function(e){var t=hX(e);t.data;var r=Tl(t,yIe);return Ht("div",ot({},Or(e,"groupHeading",{"group-heading":!0}),r))},_Ie=bIe,EIe=["innerRef","isDisabled","isHidden","inputClassName"],MIe=function(e,t){var r=e.isDisabled,i=e.value,s=e.theme,a=s.spacing,o=s.colors;return $t($t({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},CIe),t?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:o.neutral80})},SX={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},CIe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":$t({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},SX)},AIe=function(e){return $t({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},SX)},TIe=function(e){var t=e.cx,r=e.value,i=hX(e),s=i.innerRef,a=i.isDisabled,o=i.isHidden,l=i.inputClassName,u=Tl(i,EIe);return Ht("div",ot({},Or(e,"input",{"input-container":!0}),{"data-value":r||""}),Ht("input",ot({className:t({input:!0},l),ref:s,style:AIe(o),disabled:a},u)))},DIe=TIe,NIe=function(e,t){var r=e.theme,i=r.spacing,s=r.borderRadius,a=r.colors;return $t({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:a.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},PIe=function(e,t){var r=e.theme,i=r.borderRadius,s=r.colors,a=e.cropWithEllipsis;return $t({overflow:"hidden",textOverflow:a||a===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},RIe=function(e,t){var r=e.theme,i=r.spacing,s=r.borderRadius,a=r.colors,o=e.isFocused;return $t({alignItems:"center",display:"flex"},t?{}:{borderRadius:s/2,backgroundColor:o?a.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},_X=function(e){var t=e.children,r=e.innerProps;return Ht("div",r,t)},OIe=_X,IIe=_X;function kIe(n){var e=n.children,t=n.innerProps;return Ht("div",ot({role:"button"},t),e||Ht(hR,{size:14}))}var LIe=function(e){var t=e.children,r=e.components,i=e.data,s=e.innerProps,a=e.isDisabled,o=e.removeProps,l=e.selectProps,u=r.Container,c=r.Label,f=r.Remove;return Ht(u,{data:i,innerProps:$t($t({},Or(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),s),selectProps:l},Ht(c,{data:i,innerProps:$t({},Or(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),Ht(f,{data:i,innerProps:$t($t({},Or(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:l}))},FIe=LIe,BIe=function(e,t){var r=e.isDisabled,i=e.isFocused,s=e.isSelected,a=e.theme,o=a.spacing,l=a.colors;return $t({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:s?l.primary:i?l.primary25:"transparent",color:r?l.neutral20:s?l.neutral0:"inherit",padding:"".concat(o.baseUnit*2,"px ").concat(o.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:s?l.primary:l.primary50}})},zIe=function(e){var t=e.children,r=e.isDisabled,i=e.isFocused,s=e.isSelected,a=e.innerRef,o=e.innerProps;return Ht("div",ot({},Or(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":s}),{ref:a,"aria-disabled":r},o),t)},UIe=zIe,$Ie=function(e,t){var r=e.theme,i=r.spacing,s=r.colors;return $t({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},VIe=function(e){var t=e.children,r=e.innerProps;return Ht("div",ot({},Or(e,"placeholder",{placeholder:!0}),r),t)},HIe=VIe,WIe=function(e,t){var r=e.isDisabled,i=e.theme,s=i.spacing,a=i.colors;return $t({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?a.neutral40:a.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},GIe=function(e){var t=e.children,r=e.isDisabled,i=e.innerProps;return Ht("div",ot({},Or(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),t)},jIe=GIe,qIe={ClearIndicator:uIe,Control:vIe,DropdownIndicator:oIe,DownChevron:bX,CrossIcon:hR,Group:_Ie,GroupHeading:SIe,IndicatorsContainer:nIe,IndicatorSeparator:fIe,Input:DIe,LoadingIndicator:pIe,Menu:VOe,MenuList:WOe,MenuPortal:KOe,LoadingMessage:XOe,NoOptionsMessage:qOe,MultiValue:FIe,MultiValueContainer:OIe,MultiValueLabel:IIe,MultiValueRemove:kIe,Option:UIe,Placeholder:HIe,SelectContainer:JOe,SingleValue:jIe,ValueContainer:eIe},XIe=function(e){return $t($t({},qIe),e.components)},$z=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function YIe(n,e){return!!(n===e||$z(n)&&$z(e))}function KIe(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!YIe(n[t],e[t]))return!1;return!0}function ZIe(n,e){e===void 0&&(e=KIe);var t=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var a=n.apply(this,i);return t={lastResult:a,lastArgs:i,lastThis:this},a}return r.clear=function(){t=null},r}var JIe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},QIe=function(e){return Ht("span",ot({css:JIe},e))},Vz=QIe,eke={guidance:function(e){var t=e.isSearchable,r=e.isMulti,i=e.tabSelectsValue,s=e.context,a=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return a?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,i=r===void 0?"":r,s=e.labels,a=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return a?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,i=e.options,s=e.label,a=s===void 0?"":s,o=e.selectValue,l=e.isDisabled,u=e.isSelected,c=e.isAppleDevice,f=function(v,y){return v&&v.length?"".concat(v.indexOf(y)+1," of ").concat(v.length):""};if(t==="value"&&o)return"value ".concat(a," focused, ").concat(f(o,r),".");if(t==="menu"&&c){var d=l?" disabled":"",h="".concat(u?" selected":"").concat(d);return"".concat(a).concat(h,", ").concat(f(i,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},tke=function(e){var t=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,a=e.isFocused,o=e.selectValue,l=e.selectProps,u=e.id,c=e.isAppleDevice,f=l.ariaLiveMessages,d=l.getOptionLabel,h=l.inputValue,p=l.isMulti,v=l.isOptionDisabled,y=l.isSearchable,m=l.menuIsOpen,S=l.options,b=l.screenReaderStatus,g=l.tabSelectsValue,w=l.isLoading,x=l["aria-label"],M=l["aria-live"],A=z.useMemo(function(){return $t($t({},eke),f||{})},[f]),N=z.useMemo(function(){var B="";if(t&&A.onChange){var D=t.option,O=t.options,$=t.removedValue,L=t.removedValues,X=t.value,Z=function(Ee){return Array.isArray(Ee)?null:Ee},Q=$||D||Z(X),K=Q?d(Q):"",re=O||L||void 0,ce=re?re.map(d):[],ue=$t({isDisabled:Q&&v(Q,o),label:K,labels:ce},t);B=A.onChange(ue)}return B},[t,A,v,o,d]),C=z.useMemo(function(){var B="",D=r||i,O=!!(r&&o&&o.includes(r));if(D&&A.onFocus){var $={focused:D,label:d(D),isDisabled:v(D,o),isSelected:O,options:s,context:D===r?"menu":"value",selectValue:o,isAppleDevice:c};B=A.onFocus($)}return B},[r,i,d,v,A,s,o,c]),T=z.useMemo(function(){var B="";if(m&&S.length&&!w&&A.onFilter){var D=b({count:s.length});B=A.onFilter({inputValue:h,resultsMessage:D})}return B},[s,h,m,A,S,b,w]),R=(t==null?void 0:t.action)==="initial-input-focus",U=z.useMemo(function(){var B="";if(A.guidance){var D=i?"value":m?"menu":"input";B=A.guidance({"aria-label":x,context:D,isDisabled:r&&v(r,o),isMulti:p,isSearchable:y,tabSelectsValue:g,isInitialFocus:R})}return B},[x,r,i,p,v,y,m,A,o,g,R]),F=Ht(z.Fragment,null,Ht("span",{id:"aria-selection"},N),Ht("span",{id:"aria-focused"},C),Ht("span",{id:"aria-results"},T),Ht("span",{id:"aria-guidance"},U));return Ht(z.Fragment,null,Ht(Vz,{id:u},R&&F),Ht(Vz,{"aria-live":M,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!R&&F))},nke=tke,b3=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],rke=new RegExp("["+b3.map(function(n){return n.letters}).join("")+"]","g"),EX={};for(var sC=0;sC<b3.length;sC++)for(var aC=b3[sC],oC=0;oC<aC.letters.length;oC++)EX[aC.letters[oC]]=aC.base;var MX=function(e){return e.replace(rke,function(t){return EX[t]})},ike=ZIe(MX),Hz=function(e){return e.replace(/^\s+|\s+$/g,"")},ske=function(e){return"".concat(e.label," ").concat(e.value)},ake=function(e){return function(t,r){if(t.data.__isNew__)return!0;var i=$t({ignoreCase:!0,ignoreAccents:!0,stringify:ske,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,a=i.ignoreAccents,o=i.stringify,l=i.trim,u=i.matchFrom,c=l?Hz(r):r,f=l?Hz(o(t)):o(t);return s&&(c=c.toLowerCase(),f=f.toLowerCase()),a&&(c=ike(c),f=MX(f)),u==="start"?f.substr(0,c.length)===c:f.indexOf(c)>-1}},oke=["innerRef"];function lke(n){var e=n.innerRef,t=Tl(n,oke),r=IOe(t,"onExited","in","enter","exit","appear");return Ht("input",ot({ref:e},r,{css:dR({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var uke=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function cke(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,i=n.onTopArrive,s=n.onTopLeave,a=z.useRef(!1),o=z.useRef(!1),l=z.useRef(0),u=z.useRef(null),c=z.useCallback(function(y,m){if(u.current!==null){var S=u.current,b=S.scrollTop,g=S.scrollHeight,w=S.clientHeight,x=u.current,M=m>0,A=g-w-b,N=!1;A>m&&a.current&&(r&&r(y),a.current=!1),M&&o.current&&(s&&s(y),o.current=!1),M&&m>A?(t&&!a.current&&t(y),x.scrollTop=g,N=!0,a.current=!0):!M&&-m>b&&(i&&!o.current&&i(y),x.scrollTop=0,N=!0,o.current=!0),N&&uke(y)}},[t,r,i,s]),f=z.useCallback(function(y){c(y,y.deltaY)},[c]),d=z.useCallback(function(y){l.current=y.changedTouches[0].clientY},[]),h=z.useCallback(function(y){var m=l.current-y.changedTouches[0].clientY;c(y,m)},[c]),p=z.useCallback(function(y){if(y){var m=POe?{passive:!1}:!1;y.addEventListener("wheel",f,m),y.addEventListener("touchstart",d,m),y.addEventListener("touchmove",h,m)}},[h,d,f]),v=z.useCallback(function(y){y&&(y.removeEventListener("wheel",f,!1),y.removeEventListener("touchstart",d,!1),y.removeEventListener("touchmove",h,!1))},[h,d,f]);return z.useEffect(function(){if(e){var y=u.current;return p(y),function(){v(y)}}},[e,p,v]),function(y){u.current=y}}var Wz=["boxSizing","height","overflow","paddingRight","position"],Gz={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function jz(n){n.preventDefault()}function qz(n){n.stopPropagation()}function Xz(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function Yz(){return"ontouchstart"in window||navigator.maxTouchPoints}var Kz=!!(typeof window<"u"&&window.document&&window.document.createElement),Eg=0,mh={capture:!1,passive:!1};function fke(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,i=z.useRef({}),s=z.useRef(null),a=z.useCallback(function(l){if(Kz){var u=document.body,c=u&&u.style;if(r&&Wz.forEach(function(p){var v=c&&c[p];i.current[p]=v}),r&&Eg<1){var f=parseInt(i.current.paddingRight,10)||0,d=document.body?document.body.clientWidth:0,h=window.innerWidth-d+f||0;Object.keys(Gz).forEach(function(p){var v=Gz[p];c&&(c[p]=v)}),c&&(c.paddingRight="".concat(h,"px"))}u&&Yz()&&(u.addEventListener("touchmove",jz,mh),l&&(l.addEventListener("touchstart",Xz,mh),l.addEventListener("touchmove",qz,mh))),Eg+=1}},[r]),o=z.useCallback(function(l){if(Kz){var u=document.body,c=u&&u.style;Eg=Math.max(Eg-1,0),r&&Eg<1&&Wz.forEach(function(f){var d=i.current[f];c&&(c[f]=d)}),u&&Yz()&&(u.removeEventListener("touchmove",jz,mh),l&&(l.removeEventListener("touchstart",Xz,mh),l.removeEventListener("touchmove",qz,mh)))}},[r]);return z.useEffect(function(){if(e){var l=s.current;return a(l),function(){o(l)}}},[e,a,o]),function(l){s.current=l}}var dke=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},hke={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function pke(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,i=r===void 0?!0:r,s=n.onBottomArrive,a=n.onBottomLeave,o=n.onTopArrive,l=n.onTopLeave,u=cke({isEnabled:i,onBottomArrive:s,onBottomLeave:a,onTopArrive:o,onTopLeave:l}),c=fke({isEnabled:t}),f=function(h){u(h),c(h)};return Ht(z.Fragment,null,t&&Ht("div",{onClick:dke,css:hke}),e(f))}var mke={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},gke=function(e){var t=e.name,r=e.onFocus;return Ht("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:mke,value:"",onChange:function(){}})},vke=gke;function pR(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function yke(){return pR(/^iPhone/i)}function CX(){return pR(/^Mac/i)}function xke(){return pR(/^iPad/i)||CX()&&navigator.maxTouchPoints>1}function bke(){return yke()||xke()}function wke(){return CX()||bke()}var Ske=function(e){return e.label},AX=function(e){return e.label},TX=function(e){return e.value},_ke=function(e){return!!e.isDisabled},Eke={clearIndicator:lIe,container:ZOe,control:mIe,dropdownIndicator:aIe,group:xIe,groupHeading:wIe,indicatorsContainer:tIe,indicatorSeparator:cIe,input:MIe,loadingIndicator:hIe,loadingMessage:jOe,menu:zOe,menuList:HOe,menuPortal:YOe,multiValue:NIe,multiValueLabel:PIe,multiValueRemove:RIe,noOptionsMessage:GOe,option:BIe,placeholder:$Ie,singleValue:WIe,valueContainer:QOe},Mke={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Cke=4,DX=4,Ake=38,Tke=DX*2,Dke={baseUnit:DX,controlHeight:Ake,menuGutter:Tke},lC={borderRadius:Cke,colors:Mke,spacing:Dke},Nke={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:zz(),captureMenuScroll:!zz(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:ake(),formatGroupLabel:Ske,getOptionLabel:AX,getOptionValue:TX,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:_ke,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!DOe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Zz(n,e,t,r){var i=RX(n,e,t),s=OX(n,e,t),a=PX(n,e),o=VS(n,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:a,value:o,index:r}}function sw(n,e){return n.options.map(function(t,r){if("options"in t){var i=t.options.map(function(a,o){return Zz(n,a,e,o)}).filter(function(a){return Qz(n,a)});return i.length>0?{type:"group",data:t,options:i,index:r}:void 0}var s=Zz(n,t,e,r);return Qz(n,s)?s:void 0}).filter(ROe)}function NX(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Dp(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function Jz(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Dp(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function Pke(n,e){return NX(sw(n,e))}function Qz(n,e){var t=n.inputValue,r=t===void 0?"":t,i=e.data,s=e.isSelected,a=e.label,o=e.value;return(!kX(n)||!s)&&IX(n,{label:a,value:o,data:i},r)}function Rke(n,e){var t=n.focusedValue,r=n.selectValue,i=r.indexOf(t);if(i>-1){var s=e.indexOf(t);if(s>-1)return t;if(i<e.length)return e[i]}return null}function Oke(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var uC=function(e,t){var r,i=(r=e.find(function(s){return s.data===t}))===null||r===void 0?void 0:r.id;return i||null},PX=function(e,t){return e.getOptionLabel(t)},VS=function(e,t){return e.getOptionValue(t)};function RX(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function OX(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=VS(n,e);return t.some(function(i){return VS(n,i)===r})}function IX(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var kX=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Ike=1,LX=function(n){uRe(t,n);var e=dRe(t);function t(r){var i;if(oRe(this,t),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=wke(),i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,u){var c=i.props,f=c.onChange,d=c.name;u.name=d,i.ariaOnChange(l,u),f(l,u)},i.setValue=function(l,u,c){var f=i.props,d=f.closeMenuOnSelect,h=f.isMulti,p=f.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:p}),d&&(i.setState({inputIsHiddenAfterUpdate:!h}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:u,option:c})},i.selectOption=function(l){var u=i.props,c=u.blurInputOnSelect,f=u.isMulti,d=u.name,h=i.state.selectValue,p=f&&i.isOptionSelected(l,h),v=i.isOptionDisabled(l,h);if(p){var y=i.getOptionValue(l);i.setValue(h.filter(function(m){return i.getOptionValue(m)!==y}),"deselect-option",l)}else if(!v)f?i.setValue([].concat(Dp(h),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:d});return}c&&i.blurInput()},i.removeValue=function(l){var u=i.props.isMulti,c=i.state.selectValue,f=i.getOptionValue(l),d=c.filter(function(p){return i.getOptionValue(p)!==f}),h=Jg(u,d,d[0]||null);i.onChange(h,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(Jg(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,u=i.state.selectValue,c=u[u.length-1],f=u.slice(0,u.length-1),d=Jg(l,f,f[0]||null);i.onChange(d,{action:"pop-value",removedValue:c})},i.getFocusedOptionId=function(l){return uC(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return Jz(sw(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return EOe.apply(void 0,[i.props.classNamePrefix].concat(u))},i.getOptionLabel=function(l){return PX(i.props,l)},i.getOptionValue=function(l){return VS(i.props,l)},i.getStyles=function(l,u){var c=i.props.unstyled,f=Eke[l](u,c);f.boxSizing="border-box";var d=i.props.styles[l];return d?d(f,u):f},i.getClassNames=function(l,u){var c,f;return(c=(f=i.props.classNames)[l])===null||c===void 0?void 0:c.call(f,u)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return XIe(i.props)},i.buildCategorizedOptions=function(){return sw(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return NX(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,u){i.setState({ariaSelection:$t({value:l},u)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var u=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():u&&i.openMenu("first"):(u&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var u=i.props,c=u.isMulti,f=u.menuIsOpen;i.focusInput(),f?(i.setState({inputIsHiddenAfterUpdate:!c}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&pE(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var u=l.touches,c=u&&u.item(0);c&&(i.initialTouchX=c.clientX,i.initialTouchY=c.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var u=l.touches,c=u&&u.item(0);if(c){var f=Math.abs(c.clientX-i.initialTouchX),d=Math.abs(c.clientY-i.initialTouchY),h=5;i.userIsDragging=f>h||d>h}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var u=i.props.inputValue,c=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(c,{action:"input-change",prevInputValue:u}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var u=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:u}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var u=i.getFocusableOptions(),c=u.indexOf(l);i.setState({focusedOption:l,focusedOptionId:c>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return kX(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var u=i.props,c=u.isMulti,f=u.backspaceRemovesValue,d=u.escapeClearsValue,h=u.inputValue,p=u.isClearable,v=u.isDisabled,y=u.menuIsOpen,m=u.onKeyDown,S=u.tabSelectsValue,b=u.openMenuOnFocus,g=i.state,w=g.focusedOption,x=g.focusedValue,M=g.selectValue;if(!v&&!(typeof m=="function"&&(m(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!c||h)return;i.focusValue("previous");break;case"ArrowRight":if(!c||h)return;i.focusValue("next");break;case"Delete":case"Backspace":if(h)return;if(x)i.removeValue(x);else{if(!f)return;c?i.popValue():p&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!y||!S||!w||b&&i.isOptionSelected(w,M))return;i.selectOption(w);break;case"Enter":if(l.keyCode===229)break;if(y){if(!w||i.isComposing)return;i.selectOption(w);break}return;case"Escape":y?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:h}),i.onMenuClose()):p&&d&&i.clearValue();break;case" ":if(h)return;if(!y){i.openMenu("first");break}if(!w)return;i.selectOption(w);break;case"ArrowUp":y?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":y?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!y)return;i.focusOption("pageup");break;case"PageDown":if(!y)return;i.focusOption("pagedown");break;case"Home":if(!y)return;i.focusOption("first");break;case"End":if(!y)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++Ike),i.state.selectValue=US(r.value),r.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),a=i.buildFocusableOptions(),o=a.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=a[o],i.state.focusedOptionId=uC(s,a[o])}return i}return lRe(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Bz(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isDisabled,o=s.menuIsOpen,l=this.state.isFocused;(l&&!a&&i.isDisabled||l&&o&&!i.menuIsOpen)&&this.focusInput(),l&&a&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!a&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Bz(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,a=this.state,o=a.selectValue,l=a.isFocused,u=this.buildFocusableOptions(),c=i==="first"?0:u.length-1;if(!this.props.isMulti){var f=u.indexOf(o[0]);f>-1&&(c=f)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[c],focusedOptionId:this.getFocusedOptionId(u[c])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,a=s.selectValue,o=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=a.indexOf(o);o||(l=-1);var u=a.length-1,c=-1;if(a.length){switch(i){case"previous":l===0?c=0:l===-1?c=u:c=l-1;break;case"next":l>-1&&l<u&&(c=l+1);break}this.setState({inputIsHidden:c!==-1,focusedValue:a[c]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,a=this.state.focusedOption,o=this.getFocusableOptions();if(o.length){var l=0,u=o.indexOf(a);a||(u=-1),i==="up"?l=u>0?u-1:o.length-1:i==="down"?l=(u+1)%o.length:i==="pageup"?(l=u-s,l<0&&(l=0)):i==="pagedown"?(l=u+s,l>o.length-1&&(l=o.length-1)):i==="last"&&(l=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(o[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(lC):$t($t({},lC),this.props.theme):lC}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,a=this.getStyles,o=this.getClassNames,l=this.getValue,u=this.selectOption,c=this.setValue,f=this.props,d=f.isMulti,h=f.isRtl,p=f.options,v=this.hasValue();return{clearValue:i,cx:s,getStyles:a,getClassNames:o,getValue:l,hasValue:v,isMulti:d,isRtl:h,options:p,selectOption:u,selectProps:f,setValue:c,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,a=i.isMulti;return s===void 0?a:s}},{key:"isOptionDisabled",value:function(i,s){return RX(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return OX(this.props,i,s)}},{key:"filterOption",value:function(i,s){return IX(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var a=this.props.inputValue,o=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:a,selectValue:o})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,a=i.isSearchable,o=i.inputId,l=i.inputValue,u=i.tabIndex,c=i.form,f=i.menuIsOpen,d=i.required,h=this.getComponents(),p=h.Input,v=this.state,y=v.inputIsHidden,m=v.ariaSelection,S=this.commonProps,b=o||this.getElementId("input"),g=$t($t($t({"aria-autocomplete":"list","aria-expanded":f,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":d,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},f&&{"aria-controls":this.getElementId("listbox")}),!a&&{"aria-readonly":!0}),this.hasValue()?(m==null?void 0:m.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return a?z.createElement(p,ot({},S,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:b,innerRef:this.getInputRef,isDisabled:s,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:c,type:"text",value:l},g)):z.createElement(lke,ot({id:b,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:zS,onFocus:this.onInputFocus,disabled:s,tabIndex:u,inputMode:"none",form:c,value:""},g))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),a=s.MultiValue,o=s.MultiValueContainer,l=s.MultiValueLabel,u=s.MultiValueRemove,c=s.SingleValue,f=s.Placeholder,d=this.commonProps,h=this.props,p=h.controlShouldRenderValue,v=h.isDisabled,y=h.isMulti,m=h.inputValue,S=h.placeholder,b=this.state,g=b.selectValue,w=b.focusedValue,x=b.isFocused;if(!this.hasValue()||!p)return m?null:z.createElement(f,ot({},d,{key:"placeholder",isDisabled:v,isFocused:x,innerProps:{id:this.getElementId("placeholder")}}),S);if(y)return g.map(function(A,N){var C=A===w,T="".concat(i.getOptionLabel(A),"-").concat(i.getOptionValue(A));return z.createElement(a,ot({},d,{components:{Container:o,Label:l,Remove:u},isFocused:C,isDisabled:v,key:T,index:N,removeProps:{onClick:function(){return i.removeValue(A)},onTouchEnd:function(){return i.removeValue(A)},onMouseDown:function(U){U.preventDefault()}},data:A}),i.formatOptionLabel(A,"value"))});if(m)return null;var M=g[0];return z.createElement(c,ot({},d,{data:M,isDisabled:v}),this.formatOptionLabel(M,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,a=this.commonProps,o=this.props,l=o.isDisabled,u=o.isLoading,c=this.state.isFocused;if(!this.isClearable()||!s||l||!this.hasValue()||u)return null;var f={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return z.createElement(s,ot({},a,{innerProps:f,isFocused:c}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,a=this.commonProps,o=this.props,l=o.isDisabled,u=o.isLoading,c=this.state.isFocused;if(!s||!u)return null;var f={"aria-hidden":"true"};return z.createElement(s,ot({},a,{innerProps:f,isDisabled:l,isFocused:c}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,a=i.IndicatorSeparator;if(!s||!a)return null;var o=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused;return z.createElement(a,ot({},o,{isDisabled:l,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var a=this.commonProps,o=this.props.isDisabled,l=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return z.createElement(s,ot({},a,{innerProps:u,isDisabled:o,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),a=s.Group,o=s.GroupHeading,l=s.Menu,u=s.MenuList,c=s.MenuPortal,f=s.LoadingMessage,d=s.NoOptionsMessage,h=s.Option,p=this.commonProps,v=this.state.focusedOption,y=this.props,m=y.captureMenuScroll,S=y.inputValue,b=y.isLoading,g=y.loadingMessage,w=y.minMenuHeight,x=y.maxMenuHeight,M=y.menuIsOpen,A=y.menuPlacement,N=y.menuPosition,C=y.menuPortalTarget,T=y.menuShouldBlockScroll,R=y.menuShouldScrollIntoView,U=y.noOptionsMessage,F=y.onMenuScrollToTop,B=y.onMenuScrollToBottom;if(!M)return null;var D=function(K,re){var ce=K.type,ue=K.data,me=K.isDisabled,Ee=K.isSelected,xe=K.label,Te=K.value,De=v===ue,ie=me?void 0:function(){return i.onOptionHover(ue)},Ie=me?void 0:function(){return i.selectOption(ue)},ke="".concat(i.getElementId("option"),"-").concat(re),te={id:ke,onClick:Ie,onMouseMove:ie,onMouseOver:ie,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:Ee};return z.createElement(h,ot({},p,{innerProps:te,data:ue,isDisabled:me,isSelected:Ee,key:ke,label:xe,type:ce,value:Te,isFocused:De,innerRef:De?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(K.data,"menu"))},O;if(this.hasOptions())O=this.getCategorizedOptions().map(function(Q){if(Q.type==="group"){var K=Q.data,re=Q.options,ce=Q.index,ue="".concat(i.getElementId("group"),"-").concat(ce),me="".concat(ue,"-heading");return z.createElement(a,ot({},p,{key:ue,data:K,options:re,Heading:o,headingProps:{id:me,data:Q.data},label:i.formatGroupLabel(Q.data)}),Q.options.map(function(Ee){return D(Ee,"".concat(ce,"-").concat(Ee.index))}))}else if(Q.type==="option")return D(Q,"".concat(Q.index))});else if(b){var $=g({inputValue:S});if($===null)return null;O=z.createElement(f,p,$)}else{var L=U({inputValue:S});if(L===null)return null;O=z.createElement(d,p,L)}var X={minMenuHeight:w,maxMenuHeight:x,menuPlacement:A,menuPosition:N,menuShouldScrollIntoView:R},Z=z.createElement(UOe,ot({},p,X),function(Q){var K=Q.ref,re=Q.placerProps,ce=re.placement,ue=re.maxHeight;return z.createElement(l,ot({},p,X,{innerRef:K,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:b,placement:ce}),z.createElement(pke,{captureEnabled:m,onTopArrive:F,onBottomArrive:B,lockEnabled:T},function(me){return z.createElement(u,ot({},p,{innerRef:function(xe){i.getMenuListRef(xe),me(xe)},innerProps:{role:"listbox","aria-multiselectable":p.isMulti,id:i.getElementId("listbox")},isLoading:b,maxHeight:ue,focusedOption:v}),O)}))});return C||N==="fixed"?z.createElement(c,ot({},p,{appendTo:C,controlElement:this.controlRef,menuPlacement:A,menuPosition:N}),Z):Z}},{key:"renderFormField",value:function(){var i=this,s=this.props,a=s.delimiter,o=s.isDisabled,l=s.isMulti,u=s.name,c=s.required,f=this.state.selectValue;if(c&&!this.hasValue()&&!o)return z.createElement(vke,{name:u,onFocus:this.onValueInputFocus});if(!(!u||o))if(l)if(a){var d=f.map(function(v){return i.getOptionValue(v)}).join(a);return z.createElement("input",{name:u,type:"hidden",value:d})}else{var h=f.length>0?f.map(function(v,y){return z.createElement("input",{key:"i-".concat(y),name:u,type:"hidden",value:i.getOptionValue(v)})}):z.createElement("input",{name:u,type:"hidden",value:""});return z.createElement("div",null,h)}else{var p=f[0]?this.getOptionValue(f[0]):"";return z.createElement("input",{name:u,type:"hidden",value:p})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,a=s.ariaSelection,o=s.focusedOption,l=s.focusedValue,u=s.isFocused,c=s.selectValue,f=this.getFocusableOptions();return z.createElement(nke,ot({},i,{id:this.getElementId("live-region"),ariaSelection:a,focusedOption:o,focusedValue:l,isFocused:u,selectValue:c,focusableOptions:f,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,a=i.IndicatorsContainer,o=i.SelectContainer,l=i.ValueContainer,u=this.props,c=u.className,f=u.id,d=u.isDisabled,h=u.menuIsOpen,p=this.state.isFocused,v=this.commonProps=this.getCommonProps();return z.createElement(o,ot({},v,{className:c,innerProps:{id:f,onKeyDown:this.onKeyDown},isDisabled:d,isFocused:p}),this.renderLiveRegion(),z.createElement(s,ot({},v,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:d,isFocused:p,menuIsOpen:h}),z.createElement(l,ot({},v,{isDisabled:d}),this.renderPlaceholderOrValue(),this.renderInput()),z.createElement(a,ot({},v,{isDisabled:d}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var a=s.prevProps,o=s.clearFocusValueOnUpdate,l=s.inputIsHiddenAfterUpdate,u=s.ariaSelection,c=s.isFocused,f=s.prevWasFocused,d=s.instancePrefix,h=i.options,p=i.value,v=i.menuIsOpen,y=i.inputValue,m=i.isMulti,S=US(p),b={};if(a&&(p!==a.value||h!==a.options||v!==a.menuIsOpen||y!==a.inputValue)){var g=v?Pke(i,S):[],w=v?Jz(sw(i,S),"".concat(d,"-option")):[],x=o?Rke(s,S):null,M=Oke(s,g),A=uC(w,M);b={selectValue:S,focusedOption:M,focusedOptionId:A,focusableOptionsWithIds:w,focusedValue:x,clearFocusValueOnUpdate:!1}}var N=l!=null&&i!==a?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},C=u,T=c&&f;return c&&!T&&(C={value:Jg(m,S,S[0]||null),options:S,action:"initial-input-focus"},T=!f),(u==null?void 0:u.action)==="initial-input-focus"&&(C=null),$t($t($t({},b),N),{},{prevProps:i,ariaSelection:C,prevWasFocused:T})}}]),t}(z.Component);LX.defaultProps=Nke;var kke=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Lke(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,i=r===void 0?!1:r,s=n.defaultValue,a=s===void 0?null:s,o=n.inputValue,l=n.menuIsOpen,u=n.onChange,c=n.onInputChange,f=n.onMenuClose,d=n.onMenuOpen,h=n.value,p=Tl(n,kke),v=z.useState(o!==void 0?o:t),y=du(v,2),m=y[0],S=y[1],b=z.useState(l!==void 0?l:i),g=du(b,2),w=g[0],x=g[1],M=z.useState(h!==void 0?h:a),A=du(M,2),N=A[0],C=A[1],T=z.useCallback(function($,L){typeof u=="function"&&u($,L),C($)},[u]),R=z.useCallback(function($,L){var X;typeof c=="function"&&(X=c($,L)),S(X!==void 0?X:$)},[c]),U=z.useCallback(function(){typeof d=="function"&&d(),x(!0)},[d]),F=z.useCallback(function(){typeof f=="function"&&f(),x(!1)},[f]),B=o!==void 0?o:m,D=l!==void 0?l:w,O=h!==void 0?h:N;return $t($t({},p),{},{inputValue:B,menuIsOpen:D,onChange:T,onInputChange:R,onMenuClose:F,onMenuOpen:U,value:O})}var Fke=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],e6=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=String(e).toLowerCase(),s=String(r.getOptionValue(t)).toLowerCase(),a=String(r.getOptionLabel(t)).toLowerCase();return s===i||a===i},cC={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,r,i){return!(!e||t.some(function(s){return e6(e,s,i)})||r.some(function(s){return e6(e,s,i)}))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};function Bke(n){var e=n.allowCreateWhileLoading,t=e===void 0?!1:e,r=n.createOptionPosition,i=r===void 0?"last":r,s=n.formatCreateLabel,a=s===void 0?cC.formatCreateLabel:s,o=n.isValidNewOption,l=o===void 0?cC.isValidNewOption:o,u=n.getNewOptionData,c=u===void 0?cC.getNewOptionData:u,f=n.onCreateOption,d=n.options,h=d===void 0?[]:d,p=n.onChange,v=Tl(n,Fke),y=v.getOptionValue,m=y===void 0?TX:y,S=v.getOptionLabel,b=S===void 0?AX:S,g=v.inputValue,w=v.isLoading,x=v.isMulti,M=v.value,A=v.name,N=z.useMemo(function(){return l(g,US(M),h,{getOptionValue:m,getOptionLabel:b})?c(g,a(g)):void 0},[a,c,b,m,g,l,h,M]),C=z.useMemo(function(){return(t||!w)&&N?i==="first"?[N].concat(Dp(h)):[].concat(Dp(h),[N]):h},[t,i,w,N,h]),T=z.useCallback(function(R,U){if(U.action!=="select-option")return p(R,U);var F=Array.isArray(R)?R:[R];if(F[F.length-1]===N){if(f)f(g);else{var B=c(g,g),D={action:"create-option",name:A,option:B};p(Jg(x,[].concat(Dp(US(M)),[B]),B),D)}return}p(R,U)},[c,g,x,A,N,f,p,M]);return $t($t({},v),{},{options:C,onChange:T})}var zke=z.forwardRef(function(n,e){var t=Lke(n),r=Bke(t);return z.createElement(LX,ot({ref:e},r))}),Uke=zke;const aw=[{value:"abundance-tool",label:"Abundance tool"},{value:"examples",label:"Example"},{value:"furniture",label:"Furniture"},{value:"hardware",label:"Hardware"},{value:"project",label:"Project"}],FX=n=>{var e=null,t=null,r=`###### Note: Do not edit this file directly, it is automatically generated from the CAD model 
# Bill Of Materials 
 |Part|Number Needed|Price|Source| 
 |----|----------|-----|-----|`,i="###### Note: Do not edit this file directly, it is automatically generated from the CAD model";const s=n.authorizedUserOcto,a=n.setExportPopUp,o=n.exporting,l=[];Object.keys(Dz).forEach(w=>{l.push(w)});const u=vm(),c=z.useRef(),f=z.useRef(),d=z.useRef(),h=z.useRef(),p=z.useRef(),[v,y]=z.useState(!1),[m,S]=z.useState(0),b=async([w,x,M,A,N],C,T)=>{x.push("abundance-project"),C!==void 0&&T?(k.topLevelMolecule=C,C.topLevel=!0):k.topLevelMolecule=new hy({x:0,y:0,topLevel:!0,name:w,atomType:"Molecule",uniqueID:k.generateUniqueID(),unitsKey:N}),k.currentMolecule=k.topLevelMolecule,await s.request("POST /user/repos",{name:w,description:M,headers:{"X-GitHub-Api-Version":"2022-11-28"}}).catch(R=>{window.alert("Error creating project. That name might be taken already. Please try again with a different name."),y(!1)}).then(R=>{S(10),t=R.data.name,e=k.currentUser,k.currentRepo=R.data;var U=k.topLevelMolecule.serialize();U.filetypeVersion=1;const F=window.btoa(JSON.stringify(U,null,4));s.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"project.abundance",message:"Initialize repo",content:F}).then(B=>{S(20);var D=window.btoa(r);s.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"BillOfMaterials.md",message:"initialize BOM",content:D}).then(()=>{S(30),D=window.btoa(i),s.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"README.md",message:"initialize README",content:D}).then(()=>{S(40),s.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"project.svg",message:"SVG Picture",content:""}).then(()=>{S(50),s.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:".gitattributes",message:"Create gitattributes",content:window.btoa("data binary")}).then(()=>{S(60),s.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"data.json",message:"Data file",content:""}).then(()=>{S(80),s.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"LICENSE.txt",message:"Establish license",content:window.btoa(k.toBinaryStr(Dz[A]))}).then(()=>{S(90),s.rest.repos.replaceAllTopics({owner:e,repo:t,names:x}).then(()=>{a(!1),u(`/${k.currentRepo.id}`)})})})})})})})})})},g=async w=>{w.preventDefault(),y(!0);const x=c.current.value,M=f.current.getValue(),A=d.current.value,N=[],C=h.current.value,T=p.current.value;if(M.forEach(U=>{N.push(U.value)}),k.currentMolecule)var R=k.currentMolecule;b([x,N,A,C,T],R,o)};return le.jsx(le.Fragment,{children:le.jsx("div",{className:"login-page export-div",children:le.jsxs("div",{className:"form animate fadeInUp one",children:[le.jsx("button",{style:{width:"3%",display:"block"},onClick:()=>{a(!1)},className:"closeButton",children:le.jsx("img",{})}),le.jsxs("form",{onSubmit:w=>{g(w)},children:[le.jsx("h2",{children:o?"Export this molecule to Github":"Create a New Project"}),le.jsx("label",{htmlFor:"project-name",children:"Project Name"}),le.jsx("input",{name:"Project Name",placeholder:"Project Name",ref:c,required:!0}),le.jsx("label",{htmlFor:"license-options",children:"License"}),le.jsx("select",{id:"license-options",ref:h,children:l.map(w=>le.jsx("option",{value:w,children:w},w))}),le.jsx("label",{htmlFor:"measure-units",children:"Units"}),le.jsxs("select",{id:"measure-units",ref:p,children:[le.jsx("option",{value:"Inches",children:"Inches"},"inchesop"),le.jsx("option",{value:"MM",children:"MM"},"millop")]}),le.jsx("label",{htmlFor:"project-description",children:"Project Description"}),le.jsx("input",{placeholder:"Project Description",ref:d}),le.jsx("label",{htmlFor:"project-topics",children:"Project Topics"}),le.jsx(Uke,{defaultValue:[aw[0],aw[1]],isMulti:!0,name:"Project Topics",options:aw,className:"basic-multi-select",classNamePrefix:"select",ref:f}),le.jsx("button",{className:"submit-button",disabled:v,type:"submit",children:v?m+"%":"Submit/Export to Github"})]})]})})})};var t6=null;const $ke=n=>le.jsx("div",{className:"login-page",children:le.jsxs("div",{className:"form animate fadeInUp one",children:[le.jsxs("div",{id:"gitSide",className:"logindiv",children:[le.jsx("img",{className:"logo",src:"/imgs/abundance_logo.png",alt:"logo"}),le.jsx("div",{id:"welcome",children:le.jsx("img",{src:"/imgs/abundance_lettering.png",alt:"logo",style:{width:"300px"}})}),le.jsxs("p",{style:{padding:"0 20px"},children:["Abundance projects are stored through GitHub. You control your files."," "]}),le.jsxs("form",{className:"login-form",children:[le.jsx("button",{type:"button",id:"loginButton",className:"submit-btn",onClick:n.tryLogin,style:{height:"40px"},children:"Login With GitHub"}),le.jsxs("p",{className:"message",children:["Don't have an account?"," ",le.jsx("a",{href:"https://github.com/join",children:"Create a free account"})]})]})]}),le.jsxs("div",{id:"nonGitSide",className:"logindiv curiousBrowse",children:[le.jsx("p",{style:{justifyContent:"flex-start",display:"inline"},children:"Check out what others have designed in Abundance"}),le.jsx("button",{type:"button",onClick:()=>{n.setBrowsing(!0)},className:"submit-btn",id:"browseNonGit",style:{padding:"0 30px"},children:"Browse all projects"})]})]})}),Vke=n=>{const[e,t]=z.useState("thumb"),[r,i]=z.useState("byDateCreated");let s=n.searchBarValue,a=n.nodes;return s!=""&&(a=a.filter(o=>o.name.toLowerCase().includes(s.toLowerCase()))),le.jsxs(le.Fragment,{children:[le.jsxs("div",{style:{flexDirection:"row",height:"30px",widht:"50%",margin:"-25px 0 10px 20px",display:"flex"},children:[le.jsx("button",{className:"list_thumb_button",onClick:()=>t("list"),children:le.jsx("img",{src:"/imgs/list.svg",alt:"list_search",style:{width:"20px",marginRight:"5px",opacity:"0.8"}})},"list-filter-button"),le.jsx("button",{className:"list_thumb_button",onClick:()=>t("thumb"),children:le.jsx("img",{src:"/imgs/thumbnail.svg",alt:"thumb_search",style:{width:"20px",marginRight:"5px",opacity:"0.8"}})},"thumb-filter-button"),le.jsxs("label",{htmlFor:"order-by",children:[le.jsx("img",{src:"/imgs/sort.svg",alt:"Sort by",style:{width:"15px"}}),le.jsxs("select",{className:"order_dropdown",id:"order-by",defaultValue:r,onChange:o=>i(o.target.value),children:[le.jsx("option",{value:"byName",children:"Name"},"name_order"),le.jsx("option",{value:"byForks",children:"Forks"},"forks_order"),le.jsx("option",{value:"byStars",children:"Stars"},"stars_order"),le.jsx("option",{value:"byOwnerName",children:"Creator"},"owner_order"),le.jsx("option",{value:"byDateCreated",children:"Date Created"},"date_order")]})]})]}),a.length>0?le.jsx(Hke,{browseType:e,nodes:a,orderType:r}):le.jsx("p",{children:"No projects match your search"})]})},Hke=n=>{const e=n.nodes,t=n.browseType,r=n.orderType,i=({node:l})=>le.jsxs("div",{className:"project",style:l.owner.login!=k.currentUser?{backgroundColor:"rgb(233 221 242 / 58%)"}:null,id:l.name,onClick:()=>{k.currentRepo=l},children:[l.topics.includes("abundance-tool")?le.jsxs("h2",{style:{float:"right",position:"relative",top:"-10px",padding:"0"},children:[" ","🔨 "," "]}):null,le.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l.name}),le.jsx("img",{className:"project_image",src:"https://raw.githubusercontent.com/"+l.full_name+"/master/project.svg?sanitize=true",onError:({currentTarget:u})=>{u.onerror=null,u.src="/imgs/defaultThumbnail.svg"},alt:l.name}),le.jsxs("div",{style:{display:"inline"},children:[le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(.7)"},width:"16",height:"16",children:le.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})}),le.jsx("p",{style:{fontSize:".7em",display:"inline"},children:l.stargazers_count})]})]},l.id+l.owner.login),s=l=>(console.log(l),le.jsxs("div",{className:"project_list",id:l.node.id,onClick:()=>{k.currentRepo=l.node},children:[le.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l.node.name}),le.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"50%"},children:l.node.owner.login}),le.jsxs("h2",{style:{width:"20%",display:"block"},children:[" ",l.node.topics&&l.node.topics.includes("abundance-tool")?"🔨 ":null]}),le.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"70%"},children:l.node.forks_count}),le.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l.node.created_at}),le.jsxs("div",{style:{width:"10%",display:"flex",flexDirection:"row"},children:[le.jsx("p",{style:{fontSize:"1em"},children:l.node.stargazers_count}),le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(1)"},width:"16",height:"16",children:le.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})})]})]},l.node.id));var a={byName:function(l,u){return l.name<u.name?-1:l.name>u.name?1:0},byForks:function(l,u){return u.forks_count-l.forks_count},byStars:function(l,u){return u.stargazers_count-l.stargazers_count},byOwnerName:function(l,u){return l.owner.login<u.owner.login?-1:l.owner.login>u.owner.login?1:0},byDateCreated:function(l,u){return new Date(l.created_at)>new Date(u.created_at)?-1:new Date(l.created_at)<new Date(u.created_at)?1:0}};const o={forks_count:"Forks",stargazers_count:"#",created_at:"Date Created",owner:{login:"Creator"},name:"Name"};return le.jsx(le.Fragment,{children:le.jsxs("div",{className:"project-item-div",children:[t=="list"?le.jsx(s,{node:o}):null,e.sort(a[r]).map(l=>le.jsx(Xv,{to:l.owner.login==k.currentUser?`/${l.id}`:`/run/${l.id}`,children:t=="list"?le.jsx(s,{node:l}):le.jsx(i,{node:l})},l.id))]})})},n6=n=>{const[e,t]=z.useState([]),[r,i]=z.useState(""),s=n.exportPopUp,a=n.setExportPopUp,o=n.authorizedUserOcto;z.useEffect(()=>{t6=new mu;var u;n.user==""||n.userBrowsing?u=r+" topic:abundance-project fork:true":u=r+" user:"+n.user+" topic:abundance-project fork:true";const c=async function(d){var h="alzatin",p="My-first-Abundance-project";d.request("GET /repos/{owner}/{repo}",{owner:h,repo:p}).then(v=>{d.rest.repos.createFork({owner:h,repo:p}).then(()=>{var y=k.currentUser;d.request("GET /repos/{owner}/{repo}",{owner:y,repo:p}).then(m=>{k.currentRepo=m.data,d.rest.repos.replaceAllTopics({owner:y,repo:k.currentRepo.name,names:["abundance-project"]})})})})},f=async()=>{let d=0;return await t6.paginate("GET /search/repositories",{q:u,per_page:50},(p,v)=>(d+=p.data.length,d>=250&&v(),p))};f().then(d=>{d[0].data.total_count==0&&n.user!==""?c(o).then(()=>{f().then(h=>{n.setBrowsing(!0),t(h)})}):t(d)}).catch(d=>{window.alert("Error loading projects. Please wait a few minutes then try again.")})},[n.user,r]);const l=u=>{window.open(u,"_blank","noreferrer")};return le.jsxs(le.Fragment,{children:[le.jsx("div",{className:"middleBrowse",style:{marginTop:"35px"},children:le.jsxs("div",{id:"welcome",style:{display:"flex",margin:"10px",alignItems:"center"},children:[le.jsx("img",{src:"/imgs/abundance_logo.png",alt:"logo",style:{width:"40px",height:"40px",borderRadius:"50%"}}),le.jsx("img",{src:"/imgs/abundance_lettering.png",alt:"logo",style:{height:"20px",padding:"10px"}}),n.isloggedIn?null:le.jsxs(le.Fragment,{children:[le.jsx("button",{className:"form browseButton githubSign",id:"loginButton2",onClick:n.tryLogin,style:{width:"90px",fontSize:".7rem",marginLeft:"auto"},children:"Login"}),le.jsx("button",{className:"form browseButton githubSign",onClick:()=>l("https://github.com/join"),style:{width:"130px",fontSize:".7rem",marginLeft:"5px"},children:"Create an Account"})]})]})}),s?le.jsx(FX,{setExportPopUp:a,authorizedUserOcto:o,exporting:!1}):le.jsx(Wke,{projectsLoaded:e,setSearchBarValue:i,searchBarValue:r,setExportPopUp:a,user:n.user,userBrowsing:n.userBrowsing,setBrowsing:n.setBrowsing,isloggedIn:n.isloggedIn})]})},Wke=n=>{let e=[];const[t,r]=z.useState(0);let i=n.projectsLoaded,s=n.searchBarValue,a=n.setSearchBarValue,o=n.setExportPopUp;if(i.length>0){var l=[];i[t].data.forEach(f=>{l.push(f)}),e=[...l]}const u=()=>{n.setBrowsing(!n.userBrowsing),r(0)},c=f=>{f.code=="Enter"&&(a(f.target.value),r(0))};return le.jsxs(le.Fragment,{children:[n.isloggedIn?le.jsxs("div",{className:"top_browse_menu",children:[le.jsxs("div",{onClick:()=>{o(!0)},className:"newProjectDiv",children:[le.jsx("span",{style:{alignSelf:"center"},children:"Start a new project"}),le.jsx("img",{src:"/imgs/defaultThumbnail.svg",style:{height:"80%",float:"left"}})]}),le.jsxs("div",{className:"newProjectDiv",onClick:()=>u(),children:[le.jsx("span",{style:{alignSelf:"center"},children:n.userBrowsing?"Return to my Projects":"Browse Other Projects"}),le.jsx("img",{src:"/imgs/defaultThumbnail.svg",style:{height:"80%",float:"right"}})]})]}):null,le.jsxs("div",{className:"search-bar-div",children:[i.length>1?le.jsxs("div",{style:{display:"flex",flexDirection:"row",margin:"0px 10px 0px 10px"},children:[le.jsx("button",{onClick:()=>{t+1>1&&r(t-1)},className:"page_back_button",children:"←"}),le.jsxs("p",{style:{alignSelf:"center",fontSize:".7em",padding:"3px"},children:["Page ",t+1," of ",i.length]}),le.jsx("button",{className:"page_forward_button",onClick:()=>{i.length>t+1&&r(t+1)},children:"→"})]}):null,le.jsx("input",{type:"text",placeholder:s,onKeyDown:f=>{c(f)},className:"menu_search searchButton",id:"project_search"},"project-search-bar"),le.jsx("button",{className:"list_thumb_button",children:le.jsx("img",{src:"/imgs/search_icon.svg",alt:"search",style:{width:"20px",color:"white",marginRight:"5px",opacity:"0.5"}})})]}),i.length>0?le.jsx(Vke,{searchBarValue:s,user:n.user,userBrowsing:n.userBrowsing,nodes:e}):le.jsx("p",{children:" Loading..."})]})};function Gke(n){const[e,t]=z.useState(!1),r=n.exportPopUp,i=n.setExportPopUp,s=n.authorizedUserOcto;var a=k.currentUser;let o;return n.authorizedUserOcto&&!e?o=le.jsx(n6,{user:a,authorizedUserOcto:s,userBrowsing:e,setBrowsing:t,isloggedIn:n.isloggedIn,exportPopUp:r,setExportPopUp:i}):e?o=le.jsx(n6,{user:"",userBrowsing:e,authorizedUserOcto:s,setBrowsing:t,isloggedIn:n.isloggedIn,tryLogin:n.tryLogin,exportPopUp:r,setExportPopUp:i}):o=le.jsx($ke,{tryLogin:n.tryLogin,setBrowsing:t}),le.jsxs("div",{className:"login-popup",id:"projects-popup",style:{padding:"0",border:"10px solid #3e3d3d"},children:[le.jsxs("div",{children:[" ",k.currentRepo?le.jsx(Xv,{to:`/${k.currentRepo.id}`,children:le.jsx("button",{className:"closeButton",onClick:()=>{i(!1)},children:le.jsx("img",{})})}):null]}),o]})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const mE="161",kf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Lf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},BX=0,w3=1,zX=2,jke=3,UX=0,gE=1,xv=2,vo=3,Mu=0,Ss=1,da=2,hu=0,ld=1,S3=2,_3=3,E3=4,$X=5,fc=100,VX=101,HX=102,M3=103,C3=104,WX=200,GX=201,jX=202,qX=203,HS=204,WS=205,XX=206,YX=207,KX=208,ZX=209,JX=210,QX=211,eY=212,tY=213,nY=214,rY=0,iY=1,sY=2,u0=3,aY=4,oY=5,lY=6,uY=7,my=0,cY=1,fY=2,vl=0,dY=1,hY=2,pY=3,mR=4,mY=5,gY=6,A3="attached",vY="detached",vE=300,Cu=301,jc=302,c0=303,f0=304,Lm=306,d0=1e3,Zi=1001,h0=1002,Ur=1003,GS=1004,qke=1004,Uf=1005,Xke=1005,or=1006,bv=1007,Yke=1007,ul=1008,Kke=1008,yl=1009,yY=1010,xY=1011,yE=1012,gR=1013,su=1014,ha=1015,Ed=1016,vR=1017,yR=1018,Rc=1020,bY=1021,gs=1023,wY=1024,SY=1025,Oc=1026,Md=1027,_Y=1028,xR=1029,EY=1030,bR=1031,wR=1033,ow=33776,lw=33777,uw=33778,cw=33779,T3=35840,D3=35841,N3=35842,P3=35843,SR=36196,R3=37492,O3=37496,I3=37808,k3=37809,L3=37810,F3=37811,B3=37812,z3=37813,U3=37814,$3=37815,V3=37816,H3=37817,W3=37818,G3=37819,j3=37820,q3=37821,fw=36492,X3=36494,Y3=36495,MY=36283,K3=36284,Z3=36285,J3=36286,CY=2200,AY=2201,TY=2202,p0=2300,m0=2301,dw=2302,Zf=2400,Jf=2401,g0=2402,xE=2500,_R=2501,Zke=0,Jke=1,Qke=2,ER=3e3,Ic=3001,DY=3200,NY=3201,lf=0,PY=1,pa="",ti="srgb",Cl="srgb-linear",bE="display-p3",gy="display-p3-linear",v0="linear",er="srgb",y0="rec709",x0="p3",eLe=0,Ff=7680,tLe=7681,nLe=7682,rLe=7683,iLe=34055,sLe=34056,aLe=5386,oLe=512,lLe=513,uLe=514,cLe=515,fLe=516,dLe=517,hLe=518,Q3=519,RY=512,OY=513,IY=514,MR=515,kY=516,LY=517,FY=518,BY=519,b0=35044,pLe=35048,mLe=35040,gLe=35045,vLe=35049,yLe=35041,xLe=35046,bLe=35050,wLe=35042,SLe="100",eD="300 es",jS=1035,cl=2e3,w0=2001;class Dl{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}const Gi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let r6=1234567;const ud=Math.PI/180,tm=180/Math.PI;function wa(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Gi[n&255]+Gi[n>>8&255]+Gi[n>>16&255]+Gi[n>>24&255]+"-"+Gi[e&255]+Gi[e>>8&255]+"-"+Gi[e>>16&15|64]+Gi[e>>24&255]+"-"+Gi[t&63|128]+Gi[t>>8&255]+"-"+Gi[t>>16&255]+Gi[t>>24&255]+Gi[r&255]+Gi[r>>8&255]+Gi[r>>16&255]+Gi[r>>24&255]).toLowerCase()}function Pr(n,e,t){return Math.max(e,Math.min(t,n))}function CR(n,e){return(n%e+e)%e}function _Le(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function ELe(n,e,t){return n!==e?(t-n)/(e-n):0}function wv(n,e,t){return(1-t)*n+t*e}function MLe(n,e,t,r){return wv(n,e,1-Math.exp(-t*r))}function CLe(n,e=1){return e-Math.abs(CR(n,e*2)-e)}function ALe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function TLe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function DLe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function NLe(n,e){return n+Math.random()*(e-n)}function PLe(n){return n*(.5-Math.random())}function RLe(n){n!==void 0&&(r6=n);let e=r6+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function OLe(n){return n*ud}function ILe(n){return n*tm}function tD(n){return(n&n-1)===0&&n!==0}function kLe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function qS(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function LLe(n,e,t,r,i){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),u=s((e+r)/2),c=a((e+r)/2),f=s((e-r)/2),d=a((e-r)/2),h=s((r-e)/2),p=a((r-e)/2);switch(i){case"XYX":n.set(o*c,l*f,l*d,o*u);break;case"YZY":n.set(l*d,o*c,l*f,o*u);break;case"ZXZ":n.set(l*f,l*d,o*c,o*u);break;case"XZX":n.set(o*c,l*p,l*h,o*u);break;case"YXY":n.set(l*h,o*c,l*p,o*u);break;case"ZYZ":n.set(l*p,l*h,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function vs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ln(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const zY={DEG2RAD:ud,RAD2DEG:tm,generateUUID:wa,clamp:Pr,euclideanModulo:CR,mapLinear:_Le,inverseLerp:ELe,lerp:wv,damp:MLe,pingpong:CLe,smoothstep:ALe,smootherstep:TLe,randInt:DLe,randFloat:NLe,randFloatSpread:PLe,seededRandom:RLe,degToRad:OLe,radToDeg:ILe,isPowerOfTwo:tD,ceilPowerOfTwo:kLe,floorPowerOfTwo:qS,setQuaternionFromProperEuler:LLe,normalize:ln,denormalize:vs};class et{constructor(e=0,t=0){et.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Pr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pn{constructor(e,t,r,i,s,a,o,l,u){pn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,a,o,l,u)}set(e,t,r,i,s,a,o,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,a=r[0],o=r[3],l=r[6],u=r[1],c=r[4],f=r[7],d=r[2],h=r[5],p=r[8],v=i[0],y=i[3],m=i[6],S=i[1],b=i[4],g=i[7],w=i[2],x=i[5],M=i[8];return s[0]=a*v+o*S+l*w,s[3]=a*y+o*b+l*x,s[6]=a*m+o*g+l*M,s[1]=u*v+c*S+f*w,s[4]=u*y+c*b+f*x,s[7]=u*m+c*g+f*M,s[2]=d*v+h*S+p*w,s[5]=d*y+h*b+p*x,s[8]=d*m+h*g+p*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-r*s*c+r*o*l+i*s*u-i*a*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],f=c*a-o*u,d=o*l-c*s,h=u*s-a*l,p=t*f+r*d+i*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/p;return e[0]=f*v,e[1]=(i*u-c*r)*v,e[2]=(o*r-i*a)*v,e[3]=d*v,e[4]=(c*t-i*l)*v,e[5]=(i*s-o*t)*v,e[6]=h*v,e[7]=(r*l-u*t)*v,e[8]=(a*t-r*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,a,o){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*a+u*o)+a+e,-i*u,i*l,-i*(-u*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(fC.makeScale(e,t)),this}rotate(e){return this.premultiply(fC.makeRotation(-e)),this}translate(e,t){return this.premultiply(fC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const fC=new pn;function UY(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const FLe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function cp(n,e){return new FLe[n](e)}function S0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function $Y(){const n=S0("canvas");return n.style.display="block",n}const i6={};function cd(n){n in i6||(i6[n]=!0,console.warn(n))}const s6=new pn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),a6=new pn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Sx={[Cl]:{transfer:v0,primaries:y0,toReference:n=>n,fromReference:n=>n},[ti]:{transfer:er,primaries:y0,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[gy]:{transfer:v0,primaries:x0,toReference:n=>n.applyMatrix3(a6),fromReference:n=>n.applyMatrix3(s6)},[bE]:{transfer:er,primaries:x0,toReference:n=>n.convertSRGBToLinear().applyMatrix3(a6),fromReference:n=>n.applyMatrix3(s6).convertLinearToSRGB()}},BLe=new Set([Cl,gy]),Bn={enabled:!0,_workingColorSpace:Cl,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!BLe.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=Sx[e].toReference,i=Sx[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Sx[n].primaries},getTransfer:function(n){return n===pa?v0:Sx[n].transfer}};function Pp(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function dC(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let gh;class AR{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{gh===void 0&&(gh=S0("canvas")),gh.width=e.width,gh.height=e.height;const r=gh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=gh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=S0("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=Pp(s[a]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Pp(t[r]/255)*255):t[r]=Pp(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let zLe=0;class Qf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:zLe++}),this.uuid=wa(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(hC(i[a].image)):s.push(hC(i[a]))}else s=hC(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function hC(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?AR.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ULe=0;class Sr extends Dl{constructor(e=Sr.DEFAULT_IMAGE,t=Sr.DEFAULT_MAPPING,r=Zi,i=Zi,s=or,a=ul,o=gs,l=yl,u=Sr.DEFAULT_ANISOTROPY,c=pa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ULe++}),this.uuid=wa(),this.name="",this.source=new Qf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new et(0,0),this.repeat=new et(1,1),this.center=new et(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(cd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===Ic?ti:pa),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==vE)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case d0:e.x=e.x-Math.floor(e.x);break;case Zi:e.x=e.x<0?0:1;break;case h0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case d0:e.y=e.y-Math.floor(e.y);break;case Zi:e.y=e.y<0?0:1;break;case h0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return cd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ti?Ic:ER}set encoding(e){cd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ic?ti:pa}}Sr.DEFAULT_IMAGE=null;Sr.DEFAULT_MAPPING=vE;Sr.DEFAULT_ANISOTROPY=1;class Un{constructor(e=0,t=0,r=0,i=1){Un.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],c=l[4],f=l[8],d=l[1],h=l[5],p=l[9],v=l[2],y=l[6],m=l[10];if(Math.abs(c-d)<.01&&Math.abs(f-v)<.01&&Math.abs(p-y)<.01){if(Math.abs(c+d)<.1&&Math.abs(f+v)<.1&&Math.abs(p+y)<.1&&Math.abs(u+h+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(u+1)/2,g=(h+1)/2,w=(m+1)/2,x=(c+d)/4,M=(f+v)/4,A=(p+y)/4;return b>g&&b>w?b<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(b),i=x/r,s=M/r):g>w?g<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(g),r=x/i,s=A/i):w<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(w),r=M/s,i=A/s),this.set(r,i,s,t),this}let S=Math.sqrt((y-p)*(y-p)+(f-v)*(f-v)+(d-c)*(d-c));return Math.abs(S)<.001&&(S=1),this.x=(y-p)/S,this.y=(f-v)/S,this.z=(d-c)/S,this.w=Math.acos((u+h+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class VY extends Dl{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Un(0,0,e,t),this.scissorTest=!1,this.viewport=new Un(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(cd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Ic?ti:pa),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:or,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Sr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Qf(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class no extends VY{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class wE extends Sr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ur,this.minFilter=Ur,this.wrapR=Zi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $Le extends no{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new wE(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class TR extends Sr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ur,this.minFilter=Ur,this.wrapR=Zi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class VLe extends no{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new TR(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class HLe extends no{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let a=0;a<r;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class yi{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,a,o){let l=r[i+0],u=r[i+1],c=r[i+2],f=r[i+3];const d=s[a+0],h=s[a+1],p=s[a+2],v=s[a+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f;return}if(o===1){e[t+0]=d,e[t+1]=h,e[t+2]=p,e[t+3]=v;return}if(f!==v||l!==d||u!==h||c!==p){let y=1-o;const m=l*d+u*h+c*p+f*v,S=m>=0?1:-1,b=1-m*m;if(b>Number.EPSILON){const w=Math.sqrt(b),x=Math.atan2(w,m*S);y=Math.sin(y*x)/w,o=Math.sin(o*x)/w}const g=o*S;if(l=l*y+d*g,u=u*y+h*g,c=c*y+p*g,f=f*y+v*g,y===1-o){const w=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=w,u*=w,c*=w,f*=w}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,a){const o=r[i],l=r[i+1],u=r[i+2],c=r[i+3],f=s[a],d=s[a+1],h=s[a+2],p=s[a+3];return e[t]=o*p+c*f+l*h-u*d,e[t+1]=l*p+c*d+u*f-o*h,e[t+2]=u*p+c*h+o*d-l*f,e[t+3]=c*p-o*f-l*d-u*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(r/2),c=o(i/2),f=o(s/2),d=l(r/2),h=l(i/2),p=l(s/2);switch(a){case"XYZ":this._x=d*c*f+u*h*p,this._y=u*h*f-d*c*p,this._z=u*c*p+d*h*f,this._w=u*c*f-d*h*p;break;case"YXZ":this._x=d*c*f+u*h*p,this._y=u*h*f-d*c*p,this._z=u*c*p-d*h*f,this._w=u*c*f+d*h*p;break;case"ZXY":this._x=d*c*f-u*h*p,this._y=u*h*f+d*c*p,this._z=u*c*p+d*h*f,this._w=u*c*f-d*h*p;break;case"ZYX":this._x=d*c*f-u*h*p,this._y=u*h*f+d*c*p,this._z=u*c*p-d*h*f,this._w=u*c*f+d*h*p;break;case"YZX":this._x=d*c*f+u*h*p,this._y=u*h*f+d*c*p,this._z=u*c*p-d*h*f,this._w=u*c*f-d*h*p;break;case"XZY":this._x=d*c*f-u*h*p,this._y=u*h*f-d*c*p,this._z=u*c*p+d*h*f,this._w=u*c*f+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],a=t[1],o=t[5],l=t[9],u=t[2],c=t[6],f=t[10],d=r+o+f;if(d>0){const h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(c-l)*h,this._y=(s-u)*h,this._z=(a-i)*h}else if(r>o&&r>f){const h=2*Math.sqrt(1+r-o-f);this._w=(c-l)/h,this._x=.25*h,this._y=(i+a)/h,this._z=(s+u)/h}else if(o>f){const h=2*Math.sqrt(1+o-r-f);this._w=(s-u)/h,this._x=(i+a)/h,this._y=.25*h,this._z=(l+c)/h}else{const h=2*Math.sqrt(1+f-r-o);this._w=(a-i)/h,this._x=(s+u)/h,this._y=(l+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Pr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,a=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+a*o+i*u-s*l,this._y=i*c+a*l+s*o-r*u,this._z=s*c+a*u+r*l-i*o,this._w=a*c-r*o-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+r*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const h=1-t;return this._w=h*a+t*this._w,this._x=h*r+t*this._x,this._y=h*i+t*this._y,this._z=h*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),f=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=a*f+this._w*d,this._x=r*f+this._x*d,this._y=i*f+this._y*d,this._z=s*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ve{constructor(e=0,t=0,r=0){ve.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(o6.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(o6.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,u=2*(a*i-o*r),c=2*(o*t-s*i),f=2*(s*r-a*t);return this.x=t+l*u+a*f-o*c,this.y=r+l*c+o*u-s*f,this.z=i+l*f+s*c-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=i*l-s*o,this.y=s*a-r*l,this.z=r*o-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return pC.copy(this).projectOnVector(e),this.sub(pC)}reflect(e){return this.sub(pC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Pr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const pC=new ve,o6=new yi;class _s{constructor(e=new ve(1/0,1/0,1/0),t=new ve(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(ho.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(ho.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=ho.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,ho):ho.fromBufferAttribute(s,a),ho.applyMatrix4(e.matrixWorld),this.expandByPoint(ho);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),_x.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),_x.copy(r.boundingBox)),_x.applyMatrix4(e.matrixWorld),this.union(_x)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ho),ho.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Mg),Ex.subVectors(this.max,Mg),vh.subVectors(e.a,Mg),yh.subVectors(e.b,Mg),xh.subVectors(e.c,Mg),qu.subVectors(yh,vh),Xu.subVectors(xh,yh),Sf.subVectors(vh,xh);let t=[0,-qu.z,qu.y,0,-Xu.z,Xu.y,0,-Sf.z,Sf.y,qu.z,0,-qu.x,Xu.z,0,-Xu.x,Sf.z,0,-Sf.x,-qu.y,qu.x,0,-Xu.y,Xu.x,0,-Sf.y,Sf.x,0];return!mC(t,vh,yh,xh,Ex)||(t=[1,0,0,0,1,0,0,0,1],!mC(t,vh,yh,xh,Ex))?!1:(Mx.crossVectors(qu,Xu),t=[Mx.x,Mx.y,Mx.z],mC(t,vh,yh,xh,Ex))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ho).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ho).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Hl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Hl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Hl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Hl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Hl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Hl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Hl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Hl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Hl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Hl=[new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve],ho=new ve,_x=new _s,vh=new ve,yh=new ve,xh=new ve,qu=new ve,Xu=new ve,Sf=new ve,Mg=new ve,Ex=new ve,Mx=new ve,_f=new ve;function mC(n,e,t,r,i){for(let s=0,a=n.length-3;s<=a;s+=3){_f.fromArray(n,s);const o=i.x*Math.abs(_f.x)+i.y*Math.abs(_f.y)+i.z*Math.abs(_f.z),l=e.dot(_f),u=t.dot(_f),c=r.dot(_f);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const WLe=new _s,Cg=new ve,gC=new ve;class ts{constructor(e=new ve,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):WLe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Cg.subVectors(e,this.center);const t=Cg.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Cg,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(gC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Cg.copy(e.center).add(gC)),this.expandByPoint(Cg.copy(e.center).sub(gC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Wl=new ve,vC=new ve,Cx=new ve,Yu=new ve,yC=new ve,Ax=new ve,xC=new ve;class $d{constructor(e=new ve,t=new ve(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Wl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Wl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Wl.copy(this.origin).addScaledVector(this.direction,t),Wl.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){vC.copy(e).add(t).multiplyScalar(.5),Cx.copy(t).sub(e).normalize(),Yu.copy(this.origin).sub(vC);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Cx),o=Yu.dot(this.direction),l=-Yu.dot(Cx),u=Yu.lengthSq(),c=Math.abs(1-a*a);let f,d,h,p;if(c>0)if(f=a*l-o,d=a*o-l,p=s*c,f>=0)if(d>=-p)if(d<=p){const v=1/c;f*=v,d*=v,h=f*(f+a*d+2*o)+d*(a*f+d+2*l)+u}else d=s,f=Math.max(0,-(a*d+o)),h=-f*f+d*(d+2*l)+u;else d=-s,f=Math.max(0,-(a*d+o)),h=-f*f+d*(d+2*l)+u;else d<=-p?(f=Math.max(0,-(-a*s+o)),d=f>0?-s:Math.min(Math.max(-s,-l),s),h=-f*f+d*(d+2*l)+u):d<=p?(f=0,d=Math.min(Math.max(-s,-l),s),h=d*(d+2*l)+u):(f=Math.max(0,-(a*s+o)),d=f>0?s:Math.min(Math.max(-s,-l),s),h=-f*f+d*(d+2*l)+u);else d=a>0?-s:s,f=Math.max(0,-(a*d+o)),h=-f*f+d*(d+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(vC).addScaledVector(Cx,d),h}intersectSphere(e,t){Wl.subVectors(e.center,this.origin);const r=Wl.dot(this.direction),i=Wl.dot(Wl)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=r-a,l=r+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,a,o,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,d=this.origin;return u>=0?(r=(e.min.x-d.x)*u,i=(e.max.x-d.x)*u):(r=(e.max.x-d.x)*u,i=(e.min.x-d.x)*u),c>=0?(s=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(s=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),r>a||s>i||((s>r||isNaN(r))&&(r=s),(a<i||isNaN(i))&&(i=a),f>=0?(o=(e.min.z-d.z)*f,l=(e.max.z-d.z)*f):(o=(e.max.z-d.z)*f,l=(e.min.z-d.z)*f),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Wl)!==null}intersectTriangle(e,t,r,i,s){yC.subVectors(t,e),Ax.subVectors(r,e),xC.crossVectors(yC,Ax);let a=this.direction.dot(xC),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Yu.subVectors(this.origin,e);const l=o*this.direction.dot(Ax.crossVectors(Yu,Ax));if(l<0)return null;const u=o*this.direction.dot(yC.cross(Yu));if(u<0||l+u>a)return null;const c=-o*Yu.dot(xC);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Kt{constructor(e,t,r,i,s,a,o,l,u,c,f,d,h,p,v,y){Kt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,a,o,l,u,c,f,d,h,p,v,y)}set(e,t,r,i,s,a,o,l,u,c,f,d,h,p,v,y){const m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=i,m[1]=s,m[5]=a,m[9]=o,m[13]=l,m[2]=u,m[6]=c,m[10]=f,m[14]=d,m[3]=h,m[7]=p,m[11]=v,m[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Kt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/bh.setFromMatrixColumn(e,0).length(),s=1/bh.setFromMatrixColumn(e,1).length(),a=1/bh.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),o=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const d=a*c,h=a*f,p=o*c,v=o*f;t[0]=l*c,t[4]=-l*f,t[8]=u,t[1]=h+p*u,t[5]=d-v*u,t[9]=-o*l,t[2]=v-d*u,t[6]=p+h*u,t[10]=a*l}else if(e.order==="YXZ"){const d=l*c,h=l*f,p=u*c,v=u*f;t[0]=d+v*o,t[4]=p*o-h,t[8]=a*u,t[1]=a*f,t[5]=a*c,t[9]=-o,t[2]=h*o-p,t[6]=v+d*o,t[10]=a*l}else if(e.order==="ZXY"){const d=l*c,h=l*f,p=u*c,v=u*f;t[0]=d-v*o,t[4]=-a*f,t[8]=p+h*o,t[1]=h+p*o,t[5]=a*c,t[9]=v-d*o,t[2]=-a*u,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const d=a*c,h=a*f,p=o*c,v=o*f;t[0]=l*c,t[4]=p*u-h,t[8]=d*u+v,t[1]=l*f,t[5]=v*u+d,t[9]=h*u-p,t[2]=-u,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const d=a*l,h=a*u,p=o*l,v=o*u;t[0]=l*c,t[4]=v-d*f,t[8]=p*f+h,t[1]=f,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=h*f+p,t[10]=d-v*f}else if(e.order==="XZY"){const d=a*l,h=a*u,p=o*l,v=o*u;t[0]=l*c,t[4]=-f,t[8]=u*c,t[1]=d*f+v,t[5]=a*c,t[9]=h*f-p,t[2]=p*f-h,t[6]=o*c,t[10]=v*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(GLe,e,jLe)}lookAt(e,t,r){const i=this.elements;return ra.subVectors(e,t),ra.lengthSq()===0&&(ra.z=1),ra.normalize(),Ku.crossVectors(r,ra),Ku.lengthSq()===0&&(Math.abs(r.z)===1?ra.x+=1e-4:ra.z+=1e-4,ra.normalize(),Ku.crossVectors(r,ra)),Ku.normalize(),Tx.crossVectors(ra,Ku),i[0]=Ku.x,i[4]=Tx.x,i[8]=ra.x,i[1]=Ku.y,i[5]=Tx.y,i[9]=ra.y,i[2]=Ku.z,i[6]=Tx.z,i[10]=ra.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,a=r[0],o=r[4],l=r[8],u=r[12],c=r[1],f=r[5],d=r[9],h=r[13],p=r[2],v=r[6],y=r[10],m=r[14],S=r[3],b=r[7],g=r[11],w=r[15],x=i[0],M=i[4],A=i[8],N=i[12],C=i[1],T=i[5],R=i[9],U=i[13],F=i[2],B=i[6],D=i[10],O=i[14],$=i[3],L=i[7],X=i[11],Z=i[15];return s[0]=a*x+o*C+l*F+u*$,s[4]=a*M+o*T+l*B+u*L,s[8]=a*A+o*R+l*D+u*X,s[12]=a*N+o*U+l*O+u*Z,s[1]=c*x+f*C+d*F+h*$,s[5]=c*M+f*T+d*B+h*L,s[9]=c*A+f*R+d*D+h*X,s[13]=c*N+f*U+d*O+h*Z,s[2]=p*x+v*C+y*F+m*$,s[6]=p*M+v*T+y*B+m*L,s[10]=p*A+v*R+y*D+m*X,s[14]=p*N+v*U+y*O+m*Z,s[3]=S*x+b*C+g*F+w*$,s[7]=S*M+b*T+g*B+w*L,s[11]=S*A+b*R+g*D+w*X,s[15]=S*N+b*U+g*O+w*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],u=e[13],c=e[2],f=e[6],d=e[10],h=e[14],p=e[3],v=e[7],y=e[11],m=e[15];return p*(+s*l*f-i*u*f-s*o*d+r*u*d+i*o*h-r*l*h)+v*(+t*l*h-t*u*d+s*a*d-i*a*h+i*u*c-s*l*c)+y*(+t*u*f-t*o*h-s*a*f+r*a*h+s*o*c-r*u*c)+m*(-i*o*c-t*l*f+t*o*d+i*a*f-r*a*d+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],h=e[11],p=e[12],v=e[13],y=e[14],m=e[15],S=f*y*u-v*d*u+v*l*h-o*y*h-f*l*m+o*d*m,b=p*d*u-c*y*u-p*l*h+a*y*h+c*l*m-a*d*m,g=c*v*u-p*f*u+p*o*h-a*v*h-c*o*m+a*f*m,w=p*f*l-c*v*l-p*o*d+a*v*d+c*o*y-a*f*y,x=t*S+r*b+i*g+s*w;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/x;return e[0]=S*M,e[1]=(v*d*s-f*y*s-v*i*h+r*y*h+f*i*m-r*d*m)*M,e[2]=(o*y*s-v*l*s+v*i*u-r*y*u-o*i*m+r*l*m)*M,e[3]=(f*l*s-o*d*s-f*i*u+r*d*u+o*i*h-r*l*h)*M,e[4]=b*M,e[5]=(c*y*s-p*d*s+p*i*h-t*y*h-c*i*m+t*d*m)*M,e[6]=(p*l*s-a*y*s-p*i*u+t*y*u+a*i*m-t*l*m)*M,e[7]=(a*d*s-c*l*s+c*i*u-t*d*u-a*i*h+t*l*h)*M,e[8]=g*M,e[9]=(p*f*s-c*v*s-p*r*h+t*v*h+c*r*m-t*f*m)*M,e[10]=(a*v*s-p*o*s+p*r*u-t*v*u-a*r*m+t*o*m)*M,e[11]=(c*o*s-a*f*s-c*r*u+t*f*u+a*r*h-t*o*h)*M,e[12]=w*M,e[13]=(c*v*i-p*f*i+p*r*d-t*v*d-c*r*y+t*f*y)*M,e[14]=(p*o*i-a*v*i-p*r*l+t*v*l+a*r*y-t*o*y)*M,e[15]=(a*f*i-c*o*i+c*r*l-t*f*l-a*r*d+t*o*d)*M,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,a=e.x,o=e.y,l=e.z,u=s*a,c=s*o;return this.set(u*a+r,u*o-i*l,u*l+i*o,0,u*o+i*l,c*o+r,c*l-i*a,0,u*l-i*o,c*l+i*a,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,u=s+s,c=a+a,f=o+o,d=s*u,h=s*c,p=s*f,v=a*c,y=a*f,m=o*f,S=l*u,b=l*c,g=l*f,w=r.x,x=r.y,M=r.z;return i[0]=(1-(v+m))*w,i[1]=(h+g)*w,i[2]=(p-b)*w,i[3]=0,i[4]=(h-g)*x,i[5]=(1-(d+m))*x,i[6]=(y+S)*x,i[7]=0,i[8]=(p+b)*M,i[9]=(y-S)*M,i[10]=(1-(d+v))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=bh.set(i[0],i[1],i[2]).length();const a=bh.set(i[4],i[5],i[6]).length(),o=bh.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],po.copy(this);const u=1/s,c=1/a,f=1/o;return po.elements[0]*=u,po.elements[1]*=u,po.elements[2]*=u,po.elements[4]*=c,po.elements[5]*=c,po.elements[6]*=c,po.elements[8]*=f,po.elements[9]*=f,po.elements[10]*=f,t.setFromRotationMatrix(po),r.x=s,r.y=a,r.z=o,this}makePerspective(e,t,r,i,s,a,o=cl){const l=this.elements,u=2*s/(t-e),c=2*s/(r-i),f=(t+e)/(t-e),d=(r+i)/(r-i);let h,p;if(o===cl)h=-(a+s)/(a-s),p=-2*a*s/(a-s);else if(o===w0)h=-a/(a-s),p=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=u,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=c,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,a,o=cl){const l=this.elements,u=1/(t-e),c=1/(r-i),f=1/(a-s),d=(t+e)*u,h=(r+i)*c;let p,v;if(o===cl)p=(a+s)*f,v=-2*f;else if(o===w0)p=s*f,v=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=v,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const bh=new ve,po=new Kt,GLe=new ve(0,0,0),jLe=new ve(1,1,1),Ku=new ve,Tx=new ve,ra=new ve,l6=new Kt,u6=new yi;class vy{constructor(e=0,t=0,r=0,i=vy.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],u=i[5],c=i[9],f=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(Pr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Pr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Pr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,h),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Pr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Pr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-Pr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return l6.makeRotationFromQuaternion(e),this.setFromRotationMatrix(l6,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return u6.setFromEuler(this),this.setFromQuaternion(u6,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}vy.DEFAULT_ORDER="XYZ";class fd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let qLe=0;const c6=new ve,wh=new yi,Gl=new Kt,Dx=new ve,Ag=new ve,XLe=new ve,YLe=new yi,f6=new ve(1,0,0),d6=new ve(0,1,0),h6=new ve(0,0,1),KLe={type:"added"},ZLe={type:"removed"};class En extends Dl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qLe++}),this.uuid=wa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=En.DEFAULT_UP.clone();const e=new ve,t=new vy,r=new yi,i=new ve(1,1,1);function s(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Kt},normalMatrix:{value:new pn}}),this.matrix=new Kt,this.matrixWorld=new Kt,this.matrixAutoUpdate=En.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=En.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new fd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return wh.setFromAxisAngle(e,t),this.quaternion.multiply(wh),this}rotateOnWorldAxis(e,t){return wh.setFromAxisAngle(e,t),this.quaternion.premultiply(wh),this}rotateX(e){return this.rotateOnAxis(f6,e)}rotateY(e){return this.rotateOnAxis(d6,e)}rotateZ(e){return this.rotateOnAxis(h6,e)}translateOnAxis(e,t){return c6.copy(e).applyQuaternion(this.quaternion),this.position.add(c6.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(f6,e)}translateY(e){return this.translateOnAxis(d6,e)}translateZ(e){return this.translateOnAxis(h6,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Gl.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Dx.copy(e):Dx.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Ag.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gl.lookAt(Ag,Dx,this.up):Gl.lookAt(Dx,Ag,this.up),this.quaternion.setFromRotationMatrix(Gl),i&&(Gl.extractRotation(i.matrixWorld),wh.setFromRotationMatrix(Gl),this.quaternion.premultiply(wh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(KLe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ZLe)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Gl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Gl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Gl),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ag,e,XLe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ag,YLe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++){const o=i[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),u=a(e.textures),c=a(e.images),f=a(e.shapes),d=a(e.skeletons),h=a(e.animations),p=a(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),d.length>0&&(r.skeletons=d),h.length>0&&(r.animations=h),p.length>0&&(r.nodes=p)}return r.object=i,r;function a(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}En.DEFAULT_UP=new ve(0,1,0);En.DEFAULT_MATRIX_AUTO_UPDATE=!0;En.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const mo=new ve,jl=new ve,bC=new ve,ql=new ve,Sh=new ve,_h=new ve,p6=new ve,wC=new ve,SC=new ve,_C=new ve;class ma{constructor(e=new ve,t=new ve,r=new ve){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),mo.subVectors(e,t),i.cross(mo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){mo.subVectors(i,t),jl.subVectors(r,t),bC.subVectors(e,t);const a=mo.dot(mo),o=mo.dot(jl),l=mo.dot(bC),u=jl.dot(jl),c=jl.dot(bC),f=a*u-o*o;if(f===0)return s.set(0,0,0),null;const d=1/f,h=(u*l-o*c)*d,p=(a*c-o*l)*d;return s.set(1-h-p,p,h)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,ql)===null?!1:ql.x>=0&&ql.y>=0&&ql.x+ql.y<=1}static getInterpolation(e,t,r,i,s,a,o,l){return this.getBarycoord(e,t,r,i,ql)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ql.x),l.addScaledVector(a,ql.y),l.addScaledVector(o,ql.z),l)}static isFrontFacing(e,t,r,i){return mo.subVectors(r,t),jl.subVectors(e,t),mo.cross(jl).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return mo.subVectors(this.c,this.b),jl.subVectors(this.a,this.b),mo.cross(jl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ma.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ma.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return ma.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return ma.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ma.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let a,o;Sh.subVectors(i,r),_h.subVectors(s,r),wC.subVectors(e,r);const l=Sh.dot(wC),u=_h.dot(wC);if(l<=0&&u<=0)return t.copy(r);SC.subVectors(e,i);const c=Sh.dot(SC),f=_h.dot(SC);if(c>=0&&f<=c)return t.copy(i);const d=l*f-c*u;if(d<=0&&l>=0&&c<=0)return a=l/(l-c),t.copy(r).addScaledVector(Sh,a);_C.subVectors(e,s);const h=Sh.dot(_C),p=_h.dot(_C);if(p>=0&&h<=p)return t.copy(s);const v=h*u-l*p;if(v<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(r).addScaledVector(_h,o);const y=c*p-h*f;if(y<=0&&f-c>=0&&h-p>=0)return p6.subVectors(s,i),o=(f-c)/(f-c+(h-p)),t.copy(i).addScaledVector(p6,o);const m=1/(y+v+d);return a=v*m,o=d*m,t.copy(r).addScaledVector(Sh,a).addScaledVector(_h,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const HY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zu={h:0,s:0,l:0},Nx={h:0,s:0,l:0};function EC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class mt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ti){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Bn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Bn.workingColorSpace){return this.r=e,this.g=t,this.b=r,Bn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Bn.workingColorSpace){if(e=CR(e,1),t=Pr(t,0,1),r=Pr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,a=2*r-s;this.r=EC(a,s,e+1/3),this.g=EC(a,s,e),this.b=EC(a,s,e-1/3)}return Bn.toWorkingColorSpace(this,i),this}setStyle(e,t=ti){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ti){const r=HY[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Pp(e.r),this.g=Pp(e.g),this.b=Pp(e.b),this}copyLinearToSRGB(e){return this.r=dC(e.r),this.g=dC(e.g),this.b=dC(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ti){return Bn.fromWorkingColorSpace(ji.copy(this),e),Math.round(Pr(ji.r*255,0,255))*65536+Math.round(Pr(ji.g*255,0,255))*256+Math.round(Pr(ji.b*255,0,255))}getHexString(e=ti){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Bn.workingColorSpace){Bn.fromWorkingColorSpace(ji.copy(this),t);const r=ji.r,i=ji.g,s=ji.b,a=Math.max(r,i,s),o=Math.min(r,i,s);let l,u;const c=(o+a)/2;if(o===a)l=0,u=0;else{const f=a-o;switch(u=c<=.5?f/(a+o):f/(2-a-o),a){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Bn.workingColorSpace){return Bn.fromWorkingColorSpace(ji.copy(this),t),e.r=ji.r,e.g=ji.g,e.b=ji.b,e}getStyle(e=ti){Bn.fromWorkingColorSpace(ji.copy(this),e);const t=ji.r,r=ji.g,i=ji.b;return e!==ti?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Zu),this.setHSL(Zu.h+e,Zu.s+t,Zu.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Zu),e.getHSL(Nx);const r=wv(Zu.h,Nx.h,t),i=wv(Zu.s,Nx.s,t),s=wv(Zu.l,Nx.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ji=new mt;mt.NAMES=HY;let JLe=0;class Fi extends Dl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:JLe++}),this.uuid=wa(),this.name="",this.type="Material",this.blending=ld,this.side=Mu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=HS,this.blendDst=WS,this.blendEquation=fc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new mt(0,0,0),this.blendAlpha=0,this.depthFunc=u0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Q3,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ff,this.stencilZFail=Ff,this.stencilZPass=Ff,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ld&&(r.blending=this.blending),this.side!==Mu&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==HS&&(r.blendSrc=this.blendSrc),this.blendDst!==WS&&(r.blendDst=this.blendDst),this.blendEquation!==fc&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==u0&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Q3&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ff&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Ff&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Ff&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class uf extends Fi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=my,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const eu=QLe();function QLe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:o}}function Ls(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Pr(n,-65504,65504),eu.floatView[0]=n;const e=eu.uint32View[0],t=e>>23&511;return eu.baseTable[t]+((e&8388607)>>eu.shiftTable[t])}function Qg(n){const e=n>>10;return eu.uint32View[0]=eu.mantissaTable[eu.offsetTable[e]+(n&1023)]+eu.exponentTable[e],eu.floatView[0]}const eFe={toHalfFloat:Ls,fromHalfFloat:Qg},Gr=new ve,Px=new et;class kn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=b0,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ha,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return cd("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Px.fromBufferAttribute(this,t),Px.applyMatrix3(e),this.setXY(t,Px.x,Px.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.applyMatrix3(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.applyMatrix4(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.applyNormalMatrix(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.transformDirection(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=vs(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ln(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=vs(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=vs(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=vs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=vs(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==b0&&(e.usage=this.usage),e}}class tFe extends kn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class nFe extends kn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class rFe extends kn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class iFe extends kn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class DR extends kn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class sFe extends kn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class NR extends kn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class aFe extends kn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Qg(this.array[e*this.itemSize]);return this.normalized&&(t=vs(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=Ls(t),this}getY(e){let t=Qg(this.array[e*this.itemSize+1]);return this.normalized&&(t=vs(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=Ls(t),this}getZ(e){let t=Qg(this.array[e*this.itemSize+2]);return this.normalized&&(t=vs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=Ls(t),this}getW(e){let t=Qg(this.array[e*this.itemSize+3]);return this.normalized&&(t=vs(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=Ls(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.array[e+0]=Ls(t),this.array[e+1]=Ls(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.array[e+0]=Ls(t),this.array[e+1]=Ls(r),this.array[e+2]=Ls(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.array[e+0]=Ls(t),this.array[e+1]=Ls(r),this.array[e+2]=Ls(i),this.array[e+3]=Ls(s),this}}class Nt extends kn{constructor(e,t,r){super(new Float32Array(e),t,r)}}class oFe extends kn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let lFe=0;const Ua=new Kt,MC=new En,Eh=new ve,ia=new _s,Tg=new _s,pi=new ve;class rn extends Dl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:lFe++}),this.uuid=wa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(UY(e)?NR:DR)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new pn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ua.makeRotationFromQuaternion(e),this.applyMatrix4(Ua),this}rotateX(e){return Ua.makeRotationX(e),this.applyMatrix4(Ua),this}rotateY(e){return Ua.makeRotationY(e),this.applyMatrix4(Ua),this}rotateZ(e){return Ua.makeRotationZ(e),this.applyMatrix4(Ua),this}translate(e,t,r){return Ua.makeTranslation(e,t,r),this.applyMatrix4(Ua),this}scale(e,t,r){return Ua.makeScale(e,t,r),this.applyMatrix4(Ua),this}lookAt(e){return MC.lookAt(e),MC.updateMatrix(),this.applyMatrix4(MC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Eh).negate(),this.translate(Eh.x,Eh.y,Eh.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Nt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new _s);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ve(-1/0,-1/0,-1/0),new ve(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];ia.setFromBufferAttribute(s),this.morphTargetsRelative?(pi.addVectors(this.boundingBox.min,ia.min),this.boundingBox.expandByPoint(pi),pi.addVectors(this.boundingBox.max,ia.max),this.boundingBox.expandByPoint(pi)):(this.boundingBox.expandByPoint(ia.min),this.boundingBox.expandByPoint(ia.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ts);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ve,1/0);return}if(e){const r=this.boundingSphere.center;if(ia.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];Tg.setFromBufferAttribute(o),this.morphTargetsRelative?(pi.addVectors(ia.min,Tg.min),ia.expandByPoint(pi),pi.addVectors(ia.max,Tg.max),ia.expandByPoint(pi)):(ia.expandByPoint(Tg.min),ia.expandByPoint(Tg.max))}ia.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)pi.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(pi));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)pi.fromBufferAttribute(o,u),l&&(Eh.fromBufferAttribute(e,u),pi.add(Eh)),i=Math.max(i,r.distanceToSquared(pi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,a=t.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new kn(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let C=0;C<o;C++)u[C]=new ve,c[C]=new ve;const f=new ve,d=new ve,h=new ve,p=new et,v=new et,y=new et,m=new ve,S=new ve;function b(C,T,R){f.fromArray(i,C*3),d.fromArray(i,T*3),h.fromArray(i,R*3),p.fromArray(a,C*2),v.fromArray(a,T*2),y.fromArray(a,R*2),d.sub(f),h.sub(f),v.sub(p),y.sub(p);const U=1/(v.x*y.y-y.x*v.y);isFinite(U)&&(m.copy(d).multiplyScalar(y.y).addScaledVector(h,-v.y).multiplyScalar(U),S.copy(h).multiplyScalar(v.x).addScaledVector(d,-y.x).multiplyScalar(U),u[C].add(m),u[T].add(m),u[R].add(m),c[C].add(S),c[T].add(S),c[R].add(S))}let g=this.groups;g.length===0&&(g=[{start:0,count:r.length}]);for(let C=0,T=g.length;C<T;++C){const R=g[C],U=R.start,F=R.count;for(let B=U,D=U+F;B<D;B+=3)b(r[B+0],r[B+1],r[B+2])}const w=new ve,x=new ve,M=new ve,A=new ve;function N(C){M.fromArray(s,C*3),A.copy(M);const T=u[C];w.copy(T),w.sub(M.multiplyScalar(M.dot(T))).normalize(),x.crossVectors(A,T);const U=x.dot(c[C])<0?-1:1;l[C*4]=w.x,l[C*4+1]=w.y,l[C*4+2]=w.z,l[C*4+3]=U}for(let C=0,T=g.length;C<T;++C){const R=g[C],U=R.start,F=R.count;for(let B=U,D=U+F;B<D;B+=3)N(r[B+0]),N(r[B+1]),N(r[B+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new kn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,h=r.count;d<h;d++)r.setXYZ(d,0,0,0);const i=new ve,s=new ve,a=new ve,o=new ve,l=new ve,u=new ve,c=new ve,f=new ve;if(e)for(let d=0,h=e.count;d<h;d+=3){const p=e.getX(d+0),v=e.getX(d+1),y=e.getX(d+2);i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,v),a.fromBufferAttribute(t,y),c.subVectors(a,s),f.subVectors(i,s),c.cross(f),o.fromBufferAttribute(r,p),l.fromBufferAttribute(r,v),u.fromBufferAttribute(r,y),o.add(c),l.add(c),u.add(c),r.setXYZ(p,o.x,o.y,o.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(y,u.x,u.y,u.z)}else for(let d=0,h=t.count;d<h;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),a.fromBufferAttribute(t,d+2),c.subVectors(a,s),f.subVectors(i,s),c.cross(f),r.setXYZ(d+0,c.x,c.y,c.z),r.setXYZ(d+1,c.x,c.y,c.z),r.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)pi.fromBufferAttribute(e,t),pi.normalize(),e.setXYZ(t,pi.x,pi.y,pi.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,f=o.normalized,d=new u.constructor(l.length*c);let h=0,p=0;for(let v=0,y=l.length;v<y;v++){o.isInterleavedBufferAttribute?h=l[v]*o.data.stride+o.offset:h=l[v]*c;for(let m=0;m<c;m++)d[p++]=u[h++]}return new kn(d,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new rn,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],u=e(l,r);t.setAttribute(o,u)}const s=this.morphAttributes;for(const o in s){const l=[],u=s[o];for(let c=0,f=u.length;c<f;c++){const d=u[c],h=e(d,r);l.push(h)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const u=a[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,d=u.length;f<d;f++){const h=u[f];c.push(h.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],f=s[u];for(let d=0,h=f.length;d<h;d++)c.push(f[d].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,c=a.length;u<c;u++){const f=a[u];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const m6=new Kt,Ef=new $d,Rx=new ts,g6=new ve,Mh=new ve,Ch=new ve,Ah=new ve,CC=new ve,Ox=new ve,Ix=new et,kx=new et,Lx=new et,v6=new ve,y6=new ve,x6=new ve,Fx=new ve,Bx=new ve;class Xr extends En{constructor(e=new rn,t=new uf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,a=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){Ox.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=o[l],f=s[l];c!==0&&(CC.fromBufferAttribute(f,e),a?Ox.addScaledVector(CC,c):Ox.addScaledVector(CC.sub(t),c))}t.add(Ox)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Rx.copy(r.boundingSphere),Rx.applyMatrix4(s),Ef.copy(e.ray).recast(e.near),!(Rx.containsPoint(Ef.origin)===!1&&(Ef.intersectSphere(Rx,g6)===null||Ef.origin.distanceToSquared(g6)>(e.far-e.near)**2))&&(m6.copy(s).invert(),Ef.copy(e.ray).applyMatrix4(m6),!(r.boundingBox!==null&&Ef.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Ef)))}_computeIntersections(e,t,r){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,f=s.attributes.normal,d=s.groups,h=s.drawRange;if(o!==null)if(Array.isArray(a))for(let p=0,v=d.length;p<v;p++){const y=d[p],m=a[y.materialIndex],S=Math.max(y.start,h.start),b=Math.min(o.count,Math.min(y.start+y.count,h.start+h.count));for(let g=S,w=b;g<w;g+=3){const x=o.getX(g),M=o.getX(g+1),A=o.getX(g+2);i=zx(this,m,e,r,u,c,f,x,M,A),i&&(i.faceIndex=Math.floor(g/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const p=Math.max(0,h.start),v=Math.min(o.count,h.start+h.count);for(let y=p,m=v;y<m;y+=3){const S=o.getX(y),b=o.getX(y+1),g=o.getX(y+2);i=zx(this,a,e,r,u,c,f,S,b,g),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let p=0,v=d.length;p<v;p++){const y=d[p],m=a[y.materialIndex],S=Math.max(y.start,h.start),b=Math.min(l.count,Math.min(y.start+y.count,h.start+h.count));for(let g=S,w=b;g<w;g+=3){const x=g,M=g+1,A=g+2;i=zx(this,m,e,r,u,c,f,x,M,A),i&&(i.faceIndex=Math.floor(g/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const p=Math.max(0,h.start),v=Math.min(l.count,h.start+h.count);for(let y=p,m=v;y<m;y+=3){const S=y,b=y+1,g=y+2;i=zx(this,a,e,r,u,c,f,S,b,g),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function uFe(n,e,t,r,i,s,a,o){let l;if(e.side===Ss?l=r.intersectTriangle(a,s,i,!0,o):l=r.intersectTriangle(i,s,a,e.side===Mu,o),l===null)return null;Bx.copy(o),Bx.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Bx);return u<t.near||u>t.far?null:{distance:u,point:Bx.clone(),object:n}}function zx(n,e,t,r,i,s,a,o,l,u){n.getVertexPosition(o,Mh),n.getVertexPosition(l,Ch),n.getVertexPosition(u,Ah);const c=uFe(n,e,t,r,Mh,Ch,Ah,Fx);if(c){i&&(Ix.fromBufferAttribute(i,o),kx.fromBufferAttribute(i,l),Lx.fromBufferAttribute(i,u),c.uv=ma.getInterpolation(Fx,Mh,Ch,Ah,Ix,kx,Lx,new et)),s&&(Ix.fromBufferAttribute(s,o),kx.fromBufferAttribute(s,l),Lx.fromBufferAttribute(s,u),c.uv1=ma.getInterpolation(Fx,Mh,Ch,Ah,Ix,kx,Lx,new et),c.uv2=c.uv1),a&&(v6.fromBufferAttribute(a,o),y6.fromBufferAttribute(a,l),x6.fromBufferAttribute(a,u),c.normal=ma.getInterpolation(Fx,Mh,Ch,Ah,v6,y6,x6,new ve),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const f={a:o,b:l,c:u,normal:new ve,materialIndex:0};ma.getNormal(Mh,Ch,Ah,f.normal),c.face=f}return c}class Vd extends rn{constructor(e=1,t=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],u=[],c=[],f=[];let d=0,h=0;p("z","y","x",-1,-1,r,t,e,a,s,0),p("z","y","x",1,-1,r,t,-e,a,s,1),p("x","z","y",1,1,e,r,t,i,a,2),p("x","z","y",1,-1,e,r,-t,i,a,3),p("x","y","z",1,-1,e,t,r,i,s,4),p("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Nt(u,3)),this.setAttribute("normal",new Nt(c,3)),this.setAttribute("uv",new Nt(f,2));function p(v,y,m,S,b,g,w,x,M,A,N){const C=g/M,T=w/A,R=g/2,U=w/2,F=x/2,B=M+1,D=A+1;let O=0,$=0;const L=new ve;for(let X=0;X<D;X++){const Z=X*T-U;for(let Q=0;Q<B;Q++){const K=Q*C-R;L[v]=K*S,L[y]=Z*b,L[m]=F,u.push(L.x,L.y,L.z),L[v]=0,L[y]=0,L[m]=x>0?1:-1,c.push(L.x,L.y,L.z),f.push(Q/M),f.push(1-X/A),O+=1}}for(let X=0;X<A;X++)for(let Z=0;Z<M;Z++){const Q=d+Z+B*X,K=d+Z+B*(X+1),re=d+(Z+1)+B*(X+1),ce=d+(Z+1)+B*X;l.push(Q,K,ce),l.push(K,re,ce),$+=6}o.addGroup(h,$,N),h+=$,d+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function nm(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function ds(n){const e={};for(let t=0;t<n.length;t++){const r=nm(n[t]);for(const i in r)e[i]=r[i]}return e}function cFe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function WY(n){return n.getRenderTarget()===null?n.outputColorSpace:Bn.workingColorSpace}const PR={clone:nm,merge:ds};var fFe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,dFe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ea extends Fi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=fFe,this.fragmentShader=dFe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=nm(e.uniforms),this.uniformsGroups=cFe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class yy extends En{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Kt,this.projectionMatrix=new Kt,this.projectionMatrixInverse=new Kt,this.coordinateSystem=cl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ju=new ve,b6=new et,w6=new et;class Rr extends yy{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=tm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ud*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return tm*2*Math.atan(Math.tan(ud*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Ju.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ju.x,Ju.y).multiplyScalar(-e/Ju.z),Ju.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Ju.x,Ju.y).multiplyScalar(-e/Ju.z)}getViewSize(e,t){return this.getViewBounds(e,b6,w6),t.subVectors(w6,b6)}setViewOffset(e,t,r,i,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ud*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;s+=a.offsetX*i/l,t-=a.offsetY*r/u,i*=a.width/l,r*=a.height/u}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Th=-90,Dh=1;class GY extends En{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Rr(Th,Dh,e,t);i.layers=this.layers,this.add(i);const s=new Rr(Th,Dh,e,t);s.layers=this.layers,this.add(s);const a=new Rr(Th,Dh,e,t);a.layers=this.layers,this.add(a);const o=new Rr(Th,Dh,e,t);o.layers=this.layers,this.add(o);const l=new Rr(Th,Dh,e,t);l.layers=this.layers,this.add(l);const u=new Rr(Th,Dh,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,a,o,l]=t;for(const u of t)this.remove(u);if(e===cl)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===w0)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,u,c]=this.children,f=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,a),e.setRenderTarget(r,2,i),e.render(t,o),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(t,c),e.setRenderTarget(f,d,h),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class xy extends Sr{constructor(e,t,r,i,s,a,o,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:Cu,super(e,t,r,i,s,a,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class jY extends no{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(cd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ic?ti:pa),this.texture=new xy(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:or}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Vd(5,5,5),s=new Ea({name:"CubemapFromEquirect",uniforms:nm(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ss,blending:hu});s.uniforms.tEquirect.value=t;const a=new Xr(i,s),o=t.minFilter;return t.minFilter===ul&&(t.minFilter=or),new GY(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,r,i);e.setRenderTarget(s)}}const AC=new ve,hFe=new ve,pFe=new pn;let Jl=class{constructor(e=new ve(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=AC.subVectors(r,t).cross(hFe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(AC),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||pFe.getNormalMatrix(e),i=this.coplanarPoint(AC).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Mf=new ts,Ux=new ve;class by{constructor(e=new Jl,t=new Jl,r=new Jl,i=new Jl,s=new Jl,a=new Jl){this.planes=[e,t,r,i,s,a]}set(e,t,r,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=cl){const r=this.planes,i=e.elements,s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],c=i[5],f=i[6],d=i[7],h=i[8],p=i[9],v=i[10],y=i[11],m=i[12],S=i[13],b=i[14],g=i[15];if(r[0].setComponents(l-s,d-u,y-h,g-m).normalize(),r[1].setComponents(l+s,d+u,y+h,g+m).normalize(),r[2].setComponents(l+a,d+c,y+p,g+S).normalize(),r[3].setComponents(l-a,d-c,y-p,g-S).normalize(),r[4].setComponents(l-o,d-f,y-v,g-b).normalize(),t===cl)r[5].setComponents(l+o,d+f,y+v,g+b).normalize();else if(t===w0)r[5].setComponents(o,f,v,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Mf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Mf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Mf)}intersectsSprite(e){return Mf.center.set(0,0,0),Mf.radius=.7071067811865476,Mf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Mf)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Ux.x=i.normal.x>0?e.max.x:e.min.x,Ux.y=i.normal.y>0?e.max.y:e.min.y,Ux.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ux)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function qY(){let n=null,e=!1,t=null,r=null;function i(s,a){t(s,a),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function mFe(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,c){const f=u.array,d=u.usage,h=f.byteLength,p=n.createBuffer();n.bindBuffer(c,p),n.bufferData(c,f,d),u.onUploadCallback();let v;if(f instanceof Float32Array)v=n.FLOAT;else if(f instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)v=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)v=n.SHORT;else if(f instanceof Uint32Array)v=n.UNSIGNED_INT;else if(f instanceof Int32Array)v=n.INT;else if(f instanceof Int8Array)v=n.BYTE;else if(f instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:p,type:v,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version,size:h}}function s(u,c,f){const d=c.array,h=c._updateRange,p=c.updateRanges;if(n.bindBuffer(f,u),h.count===-1&&p.length===0&&n.bufferSubData(f,0,d),p.length!==0){for(let v=0,y=p.length;v<y;v++){const m=p[v];t?n.bufferSubData(f,m.start*d.BYTES_PER_ELEMENT,d,m.start,m.count):n.bufferSubData(f,m.start*d.BYTES_PER_ELEMENT,d.subarray(m.start,m.start+m.count))}c.clearUpdateRanges()}h.count!==-1&&(t?n.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d,h.offset,h.count):n.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d.subarray(h.offset,h.offset+h.count)),h.count=-1),c.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const d=r.get(u);(!d||d.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);if(f===void 0)r.set(u,i(u,c));else if(f.version<u.version){if(f.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(f.buffer,u,c),f.version=u.version}}return{get:a,remove:o,update:l}}class Fm extends rn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,a=t/2,o=Math.floor(r),l=Math.floor(i),u=o+1,c=l+1,f=e/o,d=t/l,h=[],p=[],v=[],y=[];for(let m=0;m<c;m++){const S=m*d-a;for(let b=0;b<u;b++){const g=b*f-s;p.push(g,-S,0),v.push(0,0,1),y.push(b/o),y.push(1-m/l)}}for(let m=0;m<l;m++)for(let S=0;S<o;S++){const b=S+u*m,g=S+u*(m+1),w=S+1+u*(m+1),x=S+1+u*m;h.push(b,g,x),h.push(g,w,x)}this.setIndex(h),this.setAttribute("position",new Nt(p,3)),this.setAttribute("normal",new Nt(v,3)),this.setAttribute("uv",new Nt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fm(e.width,e.height,e.widthSegments,e.heightSegments)}}var gFe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,vFe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,yFe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,xFe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bFe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,wFe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,SFe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,_Fe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,EFe=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,MFe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,CFe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,AFe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,TFe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,DFe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,NFe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,PFe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,RFe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,OFe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,IFe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,kFe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,LFe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,FFe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,BFe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,zFe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,UFe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,$Fe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,VFe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,HFe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,WFe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,GFe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,jFe="gl_FragColor = linearToOutputTexel( gl_FragColor );",qFe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,XFe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,YFe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,KFe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ZFe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,JFe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,QFe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,e8e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,t8e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,n8e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,r8e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,i8e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,s8e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,a8e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,o8e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,l8e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,u8e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,c8e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,f8e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,d8e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,h8e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,p8e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,m8e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,g8e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,v8e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,y8e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,x8e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,b8e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,w8e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,S8e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,_8e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,E8e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,M8e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,C8e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,A8e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,T8e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,D8e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,N8e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,P8e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,R8e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,O8e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,I8e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,k8e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,L8e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,F8e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,B8e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,z8e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,U8e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,$8e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,V8e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,H8e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,W8e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,G8e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,j8e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,q8e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,X8e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Y8e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,K8e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Z8e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,J8e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Q8e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,e4e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,t4e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,n4e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,r4e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,i4e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,s4e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,a4e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,o4e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,l4e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,u4e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,c4e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,f4e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,d4e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,h4e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,p4e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const m4e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,g4e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,v4e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,y4e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,x4e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,b4e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,w4e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,S4e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,_4e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,E4e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,M4e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,C4e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,A4e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,T4e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,D4e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,N4e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P4e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,R4e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,O4e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,I4e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,k4e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,L4e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,F4e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,B4e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,z4e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,U4e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$4e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,V4e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,H4e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,W4e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,G4e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,j4e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,q4e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,X4e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fn={alphahash_fragment:gFe,alphahash_pars_fragment:vFe,alphamap_fragment:yFe,alphamap_pars_fragment:xFe,alphatest_fragment:bFe,alphatest_pars_fragment:wFe,aomap_fragment:SFe,aomap_pars_fragment:_Fe,batching_pars_vertex:EFe,batching_vertex:MFe,begin_vertex:CFe,beginnormal_vertex:AFe,bsdfs:TFe,iridescence_fragment:DFe,bumpmap_pars_fragment:NFe,clipping_planes_fragment:PFe,clipping_planes_pars_fragment:RFe,clipping_planes_pars_vertex:OFe,clipping_planes_vertex:IFe,color_fragment:kFe,color_pars_fragment:LFe,color_pars_vertex:FFe,color_vertex:BFe,common:zFe,cube_uv_reflection_fragment:UFe,defaultnormal_vertex:$Fe,displacementmap_pars_vertex:VFe,displacementmap_vertex:HFe,emissivemap_fragment:WFe,emissivemap_pars_fragment:GFe,colorspace_fragment:jFe,colorspace_pars_fragment:qFe,envmap_fragment:XFe,envmap_common_pars_fragment:YFe,envmap_pars_fragment:KFe,envmap_pars_vertex:ZFe,envmap_physical_pars_fragment:u8e,envmap_vertex:JFe,fog_vertex:QFe,fog_pars_vertex:e8e,fog_fragment:t8e,fog_pars_fragment:n8e,gradientmap_pars_fragment:r8e,lightmap_fragment:i8e,lightmap_pars_fragment:s8e,lights_lambert_fragment:a8e,lights_lambert_pars_fragment:o8e,lights_pars_begin:l8e,lights_toon_fragment:c8e,lights_toon_pars_fragment:f8e,lights_phong_fragment:d8e,lights_phong_pars_fragment:h8e,lights_physical_fragment:p8e,lights_physical_pars_fragment:m8e,lights_fragment_begin:g8e,lights_fragment_maps:v8e,lights_fragment_end:y8e,logdepthbuf_fragment:x8e,logdepthbuf_pars_fragment:b8e,logdepthbuf_pars_vertex:w8e,logdepthbuf_vertex:S8e,map_fragment:_8e,map_pars_fragment:E8e,map_particle_fragment:M8e,map_particle_pars_fragment:C8e,metalnessmap_fragment:A8e,metalnessmap_pars_fragment:T8e,morphcolor_vertex:D8e,morphnormal_vertex:N8e,morphtarget_pars_vertex:P8e,morphtarget_vertex:R8e,normal_fragment_begin:O8e,normal_fragment_maps:I8e,normal_pars_fragment:k8e,normal_pars_vertex:L8e,normal_vertex:F8e,normalmap_pars_fragment:B8e,clearcoat_normal_fragment_begin:z8e,clearcoat_normal_fragment_maps:U8e,clearcoat_pars_fragment:$8e,iridescence_pars_fragment:V8e,opaque_fragment:H8e,packing:W8e,premultiplied_alpha_fragment:G8e,project_vertex:j8e,dithering_fragment:q8e,dithering_pars_fragment:X8e,roughnessmap_fragment:Y8e,roughnessmap_pars_fragment:K8e,shadowmap_pars_fragment:Z8e,shadowmap_pars_vertex:J8e,shadowmap_vertex:Q8e,shadowmask_pars_fragment:e4e,skinbase_vertex:t4e,skinning_pars_vertex:n4e,skinning_vertex:r4e,skinnormal_vertex:i4e,specularmap_fragment:s4e,specularmap_pars_fragment:a4e,tonemapping_fragment:o4e,tonemapping_pars_fragment:l4e,transmission_fragment:u4e,transmission_pars_fragment:c4e,uv_pars_fragment:f4e,uv_pars_vertex:d4e,uv_vertex:h4e,worldpos_vertex:p4e,background_vert:m4e,background_frag:g4e,backgroundCube_vert:v4e,backgroundCube_frag:y4e,cube_vert:x4e,cube_frag:b4e,depth_vert:w4e,depth_frag:S4e,distanceRGBA_vert:_4e,distanceRGBA_frag:E4e,equirect_vert:M4e,equirect_frag:C4e,linedashed_vert:A4e,linedashed_frag:T4e,meshbasic_vert:D4e,meshbasic_frag:N4e,meshlambert_vert:P4e,meshlambert_frag:R4e,meshmatcap_vert:O4e,meshmatcap_frag:I4e,meshnormal_vert:k4e,meshnormal_frag:L4e,meshphong_vert:F4e,meshphong_frag:B4e,meshphysical_vert:z4e,meshphysical_frag:U4e,meshtoon_vert:$4e,meshtoon_frag:V4e,points_vert:H4e,points_frag:W4e,shadow_vert:G4e,shadow_frag:j4e,sprite_vert:q4e,sprite_frag:X4e},dt={common:{diffuse:{value:new mt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pn},normalScale:{value:new et(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new mt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new mt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0},uvTransform:{value:new pn}},sprite:{diffuse:{value:new mt(16777215)},opacity:{value:1},center:{value:new et(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}}},wo={basic:{uniforms:ds([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:ds([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new mt(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:ds([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new mt(0)},specular:{value:new mt(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:ds([dt.common,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.roughnessmap,dt.metalnessmap,dt.fog,dt.lights,{emissive:{value:new mt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:ds([dt.common,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.gradientmap,dt.fog,dt.lights,{emissive:{value:new mt(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:ds([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:ds([dt.points,dt.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:ds([dt.common,dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:ds([dt.common,dt.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:ds([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:ds([dt.sprite,dt.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new pn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:fn.backgroundCube_vert,fragmentShader:fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:ds([dt.common,dt.displacementmap,{referencePosition:{value:new ve},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:ds([dt.lights,dt.fog,{color:{value:new mt(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};wo.physical={uniforms:ds([wo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pn},clearcoatNormalScale:{value:new et(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pn},sheen:{value:0},sheenColor:{value:new mt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pn},transmissionSamplerSize:{value:new et},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pn},attenuationDistance:{value:0},attenuationColor:{value:new mt(0)},specularColor:{value:new mt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pn},anisotropyVector:{value:new et},anisotropyMap:{value:null},anisotropyMapTransform:{value:new pn}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};const $x={r:0,b:0,g:0};function Y4e(n,e,t,r,i,s,a){const o=new mt(0);let l=s===!0?0:1,u,c,f=null,d=0,h=null;function p(y,m){let S=!1,b=m.isScene===!0?m.background:null;b&&b.isTexture&&(b=(m.backgroundBlurriness>0?t:e).get(b)),b===null?v(o,l):b&&b.isColor&&(v(b,1),S=!0);const g=n.xr.getEnvironmentBlendMode();g==="additive"?r.buffers.color.setClear(0,0,0,1,a):g==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Lm)?(c===void 0&&(c=new Xr(new Vd(1,1,1),new Ea({name:"BackgroundCubeMaterial",uniforms:nm(wo.backgroundCube.uniforms),vertexShader:wo.backgroundCube.vertexShader,fragmentShader:wo.backgroundCube.fragmentShader,side:Ss,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,x,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=b,c.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=Bn.getTransfer(b.colorSpace)!==er,(f!==b||d!==b.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,f=b,d=b.version,h=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null)):b&&b.isTexture&&(u===void 0&&(u=new Xr(new Fm(2,2),new Ea({name:"BackgroundMaterial",uniforms:nm(wo.background.uniforms),vertexShader:wo.background.vertexShader,fragmentShader:wo.background.fragmentShader,side:Mu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=b,u.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,u.material.toneMapped=Bn.getTransfer(b.colorSpace)!==er,b.matrixAutoUpdate===!0&&b.updateMatrix(),u.material.uniforms.uvTransform.value.copy(b.matrix),(f!==b||d!==b.version||h!==n.toneMapping)&&(u.material.needsUpdate=!0,f=b,d=b.version,h=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null))}function v(y,m){y.getRGB($x,WY(n)),r.buffers.color.setClear($x.r,$x.g,$x.b,m,a)}return{getClearColor:function(){return o},setClearColor:function(y,m=1){o.set(y),l=m,v(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,v(o,l)},render:p}}function K4e(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||s!==null,o={},l=y(null);let u=l,c=!1;function f(F,B,D,O,$){let L=!1;if(a){const X=v(O,D,B);u!==X&&(u=X,h(u.object)),L=m(F,O,D,$),L&&S(F,O,D,$)}else{const X=B.wireframe===!0;(u.geometry!==O.id||u.program!==D.id||u.wireframe!==X)&&(u.geometry=O.id,u.program=D.id,u.wireframe=X,L=!0)}$!==null&&t.update($,n.ELEMENT_ARRAY_BUFFER),(L||c)&&(c=!1,A(F,B,D,O),$!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get($).buffer))}function d(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function h(F){return r.isWebGL2?n.bindVertexArray(F):s.bindVertexArrayOES(F)}function p(F){return r.isWebGL2?n.deleteVertexArray(F):s.deleteVertexArrayOES(F)}function v(F,B,D){const O=D.wireframe===!0;let $=o[F.id];$===void 0&&($={},o[F.id]=$);let L=$[B.id];L===void 0&&(L={},$[B.id]=L);let X=L[O];return X===void 0&&(X=y(d()),L[O]=X),X}function y(F){const B=[],D=[],O=[];for(let $=0;$<i;$++)B[$]=0,D[$]=0,O[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:D,attributeDivisors:O,object:F,attributes:{},index:null}}function m(F,B,D,O){const $=u.attributes,L=B.attributes;let X=0;const Z=D.getAttributes();for(const Q in Z)if(Z[Q].location>=0){const re=$[Q];let ce=L[Q];if(ce===void 0&&(Q==="instanceMatrix"&&F.instanceMatrix&&(ce=F.instanceMatrix),Q==="instanceColor"&&F.instanceColor&&(ce=F.instanceColor)),re===void 0||re.attribute!==ce||ce&&re.data!==ce.data)return!0;X++}return u.attributesNum!==X||u.index!==O}function S(F,B,D,O){const $={},L=B.attributes;let X=0;const Z=D.getAttributes();for(const Q in Z)if(Z[Q].location>=0){let re=L[Q];re===void 0&&(Q==="instanceMatrix"&&F.instanceMatrix&&(re=F.instanceMatrix),Q==="instanceColor"&&F.instanceColor&&(re=F.instanceColor));const ce={};ce.attribute=re,re&&re.data&&(ce.data=re.data),$[Q]=ce,X++}u.attributes=$,u.attributesNum=X,u.index=O}function b(){const F=u.newAttributes;for(let B=0,D=F.length;B<D;B++)F[B]=0}function g(F){w(F,0)}function w(F,B){const D=u.newAttributes,O=u.enabledAttributes,$=u.attributeDivisors;D[F]=1,O[F]===0&&(n.enableVertexAttribArray(F),O[F]=1),$[F]!==B&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](F,B),$[F]=B)}function x(){const F=u.newAttributes,B=u.enabledAttributes;for(let D=0,O=B.length;D<O;D++)B[D]!==F[D]&&(n.disableVertexAttribArray(D),B[D]=0)}function M(F,B,D,O,$,L,X){X===!0?n.vertexAttribIPointer(F,B,D,$,L):n.vertexAttribPointer(F,B,D,O,$,L)}function A(F,B,D,O){if(r.isWebGL2===!1&&(F.isInstancedMesh||O.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const $=O.attributes,L=D.getAttributes(),X=B.defaultAttributeValues;for(const Z in L){const Q=L[Z];if(Q.location>=0){let K=$[Z];if(K===void 0&&(Z==="instanceMatrix"&&F.instanceMatrix&&(K=F.instanceMatrix),Z==="instanceColor"&&F.instanceColor&&(K=F.instanceColor)),K!==void 0){const re=K.normalized,ce=K.itemSize,ue=t.get(K);if(ue===void 0)continue;const me=ue.buffer,Ee=ue.type,xe=ue.bytesPerElement,Te=r.isWebGL2===!0&&(Ee===n.INT||Ee===n.UNSIGNED_INT||K.gpuType===gR);if(K.isInterleavedBufferAttribute){const De=K.data,ie=De.stride,Ie=K.offset;if(De.isInstancedInterleavedBuffer){for(let ke=0;ke<Q.locationSize;ke++)w(Q.location+ke,De.meshPerAttribute);F.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=De.meshPerAttribute*De.count)}else for(let ke=0;ke<Q.locationSize;ke++)g(Q.location+ke);n.bindBuffer(n.ARRAY_BUFFER,me);for(let ke=0;ke<Q.locationSize;ke++)M(Q.location+ke,ce/Q.locationSize,Ee,re,ie*xe,(Ie+ce/Q.locationSize*ke)*xe,Te)}else{if(K.isInstancedBufferAttribute){for(let De=0;De<Q.locationSize;De++)w(Q.location+De,K.meshPerAttribute);F.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let De=0;De<Q.locationSize;De++)g(Q.location+De);n.bindBuffer(n.ARRAY_BUFFER,me);for(let De=0;De<Q.locationSize;De++)M(Q.location+De,ce/Q.locationSize,Ee,re,ce*xe,ce/Q.locationSize*De*xe,Te)}}else if(X!==void 0){const re=X[Z];if(re!==void 0)switch(re.length){case 2:n.vertexAttrib2fv(Q.location,re);break;case 3:n.vertexAttrib3fv(Q.location,re);break;case 4:n.vertexAttrib4fv(Q.location,re);break;default:n.vertexAttrib1fv(Q.location,re)}}}}x()}function N(){R();for(const F in o){const B=o[F];for(const D in B){const O=B[D];for(const $ in O)p(O[$].object),delete O[$];delete B[D]}delete o[F]}}function C(F){if(o[F.id]===void 0)return;const B=o[F.id];for(const D in B){const O=B[D];for(const $ in O)p(O[$].object),delete O[$];delete B[D]}delete o[F.id]}function T(F){for(const B in o){const D=o[B];if(D[F.id]===void 0)continue;const O=D[F.id];for(const $ in O)p(O[$].object),delete O[$];delete D[F.id]}}function R(){U(),c=!0,u!==l&&(u=l,h(u.object))}function U(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:R,resetDefaultState:U,dispose:N,releaseStatesOfGeometry:C,releaseStatesOfProgram:T,initAttributes:b,enableAttribute:g,disableUnusedAttributes:x}}function Z4e(n,e,t,r){const i=r.isWebGL2;let s;function a(c){s=c}function o(c,f){n.drawArrays(s,c,f),t.update(f,s,1)}function l(c,f,d){if(d===0)return;let h,p;if(i)h=n,p="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[p](s,c,f,d),t.update(f,s,d)}function u(c,f,d){if(d===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let p=0;p<d;p++)this.render(c[p],f[p]);else{h.multiDrawArraysWEBGL(s,c,0,f,0,d);let p=0;for(let v=0;v<d;v++)p+=f[v];t.update(p,s,1)}}this.setMode=a,this.render=o,this.renderInstances=l,this.renderMultiDraw=u}function J4e(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const u=a||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),m=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),b=d>0,g=a||e.has("OES_texture_float"),w=b&&g,x=a?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:c,maxTextures:f,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:v,maxVertexUniforms:y,maxVaryings:m,maxFragmentUniforms:S,vertexTextures:b,floatFragmentTextures:g,floatVertexTextures:w,maxSamples:x}}function Q4e(n){const e=this;let t=null,r=0,i=!1,s=!1;const a=new Jl,o=new pn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){const h=f.length!==0||d||r!==0||i;return i=d,r=f.length,h},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,d){t=c(f,d,0)},this.setState=function(f,d,h){const p=f.clippingPlanes,v=f.clipIntersection,y=f.clipShadows,m=n.get(f);if(!i||p===null||p.length===0||s&&!y)s?c(null):u();else{const S=s?0:r,b=S*4;let g=m.clippingState||null;l.value=g,g=c(p,d,b,h);for(let w=0;w!==b;++w)g[w]=t[w];m.clippingState=g,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=S}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(f,d,h,p){const v=f!==null?f.length:0;let y=null;if(v!==0){if(y=l.value,p!==!0||y===null){const m=h+v*4,S=d.matrixWorldInverse;o.getNormalMatrix(S),(y===null||y.length<m)&&(y=new Float32Array(m));for(let b=0,g=h;b!==v;++b,g+=4)a.copy(f[b]).applyMatrix4(S,o),a.normal.toArray(y,g),y[g+3]=a.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function eBe(n){let e=new WeakMap;function t(a,o){return o===c0?a.mapping=Cu:o===f0&&(a.mapping=jc),a}function r(a){if(a&&a.isTexture){const o=a.mapping;if(o===c0||o===f0)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new jY(l.height);return u.fromEquirectangularTexture(n,a),e.set(a,u),a.addEventListener("dispose",i),t(u.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}let au=class extends yy{constructor(e=-1,t=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const fp=4,S6=[.125,.215,.35,.446,.526,.582],$f=20,TC=new au,_6=new mt;let DC=null,NC=0,PC=0;const Bf=(1+Math.sqrt(5))/2,Nh=1/Bf,E6=[new ve(1,1,1),new ve(-1,1,1),new ve(1,1,-1),new ve(-1,1,-1),new ve(0,Bf,Nh),new ve(0,Bf,-Nh),new ve(Nh,0,Bf),new ve(-Nh,0,Bf),new ve(Bf,Nh,0),new ve(-Bf,Nh,0)];class nD{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){DC=this._renderer.getRenderTarget(),NC=this._renderer.getActiveCubeFace(),PC=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=A6(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=C6(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(DC,NC,PC),e.scissorTest=!1,Vx(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Cu||e.mapping===jc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),DC=this._renderer.getRenderTarget(),NC=this._renderer.getActiveCubeFace(),PC=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:or,minFilter:or,generateMipmaps:!1,type:Ed,format:gs,colorSpace:Cl,depthBuffer:!1},i=M6(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=M6(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=tBe(s)),this._blurMaterial=nBe(s,e,t)}return i}_compileMaterial(e){const t=new Xr(this._lodPlanes[0],e);this._renderer.compile(t,TC)}_sceneToCubeUV(e,t,r,i){const o=new Rr(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,d=c.toneMapping;c.getClearColor(_6),c.toneMapping=vl,c.autoClear=!1;const h=new uf({name:"PMREM.Background",side:Ss,depthWrite:!1,depthTest:!1}),p=new Xr(new Vd,h);let v=!1;const y=e.background;y?y.isColor&&(h.color.copy(y),e.background=null,v=!0):(h.color.copy(_6),v=!0);for(let m=0;m<6;m++){const S=m%3;S===0?(o.up.set(0,l[m],0),o.lookAt(u[m],0,0)):S===1?(o.up.set(0,0,l[m]),o.lookAt(0,u[m],0)):(o.up.set(0,l[m],0),o.lookAt(0,0,u[m]));const b=this._cubeSize;Vx(i,S*b,m>2?b:0,b,b),c.setRenderTarget(i),v&&c.render(p,o),c.render(e,o)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=d,c.autoClear=f,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Cu||e.mapping===jc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=A6()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=C6());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new Xr(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;Vx(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(a,TC)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=E6[(i-1)%E6.length];this._blur(e,i-1,i,s,a)}t.autoClear=r}_blur(e,t,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new Xr(this._lodPlanes[i],u),d=u.uniforms,h=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*$f-1),v=s/p,y=isFinite(s)?1+Math.floor(c*v):$f;y>$f&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${$f}`);const m=[];let S=0;for(let M=0;M<$f;++M){const A=M/v,N=Math.exp(-A*A/2);m.push(N),M===0?S+=N:M<y&&(S+=2*N)}for(let M=0;M<m.length;M++)m[M]=m[M]/S;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=m,d.latitudinal.value=a==="latitudinal",o&&(d.poleAxis.value=o);const{_lodMax:b}=this;d.dTheta.value=p,d.mipInt.value=b-r;const g=this._sizeLods[i],w=3*g*(i>b-fp?i-b+fp:0),x=4*(this._cubeSize-g);Vx(t,w,x,3*g,2*g),l.setRenderTarget(t),l.render(f,TC)}}function tBe(n){const e=[],t=[],r=[];let i=n;const s=n-fp+1+S6.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);t.push(o);let l=1/o;a>n-fp?l=S6[a-n+fp-1]:a===0&&(l=0),r.push(l);const u=1/(o-2),c=-u,f=1+u,d=[c,c,f,c,f,f,c,c,f,f,c,f],h=6,p=6,v=3,y=2,m=1,S=new Float32Array(v*p*h),b=new Float32Array(y*p*h),g=new Float32Array(m*p*h);for(let x=0;x<h;x++){const M=x%3*2/3-1,A=x>2?0:-1,N=[M,A,0,M+2/3,A,0,M+2/3,A+1,0,M,A,0,M+2/3,A+1,0,M,A+1,0];S.set(N,v*p*x),b.set(d,y*p*x);const C=[x,x,x,x,x,x];g.set(C,m*p*x)}const w=new rn;w.setAttribute("position",new kn(S,v)),w.setAttribute("uv",new kn(b,y)),w.setAttribute("faceIndex",new kn(g,m)),e.push(w),i>fp&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function M6(n,e,t){const r=new no(n,e,t);return r.texture.mapping=Lm,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Vx(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function nBe(n,e,t){const r=new Float32Array($f),i=new ve(0,1,0);return new Ea({name:"SphericalGaussianBlur",defines:{n:$f,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:RR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:hu,depthTest:!1,depthWrite:!1})}function C6(){return new Ea({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:RR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:hu,depthTest:!1,depthWrite:!1})}function A6(){return new Ea({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:RR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:hu,depthTest:!1,depthWrite:!1})}function RR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function rBe(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const l=o.mapping,u=l===c0||l===f0,c=l===Cu||l===jc;if(u||c)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let f=e.get(o);return t===null&&(t=new nD(n)),f=u?t.fromEquirectangular(o,f):t.fromCubemap(o,f),e.set(o,f),f.texture}else{if(e.has(o))return e.get(o).texture;{const f=o.image;if(u&&f&&f.height>0||c&&f&&i(f)){t===null&&(t=new nD(n));const d=u?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,d),o.addEventListener("dispose",s),d.texture}else return null}}}return o}function i(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function s(o){const l=o.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:a}}function iBe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function sBe(n,e,t,r){const i={},s=new WeakMap;function a(f){const d=f.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);for(const p in d.morphAttributes){const v=d.morphAttributes[p];for(let y=0,m=v.length;y<m;y++)e.remove(v[y])}d.removeEventListener("dispose",a),delete i[d.id];const h=s.get(d);h&&(e.remove(h),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function o(f,d){return i[d.id]===!0||(d.addEventListener("dispose",a),i[d.id]=!0,t.memory.geometries++),d}function l(f){const d=f.attributes;for(const p in d)e.update(d[p],n.ARRAY_BUFFER);const h=f.morphAttributes;for(const p in h){const v=h[p];for(let y=0,m=v.length;y<m;y++)e.update(v[y],n.ARRAY_BUFFER)}}function u(f){const d=[],h=f.index,p=f.attributes.position;let v=0;if(h!==null){const S=h.array;v=h.version;for(let b=0,g=S.length;b<g;b+=3){const w=S[b+0],x=S[b+1],M=S[b+2];d.push(w,x,x,M,M,w)}}else if(p!==void 0){const S=p.array;v=p.version;for(let b=0,g=S.length/3-1;b<g;b+=3){const w=b+0,x=b+1,M=b+2;d.push(w,x,x,M,M,w)}}else return;const y=new(UY(d)?NR:DR)(d,1);y.version=v;const m=s.get(f);m&&e.remove(m),s.set(f,y)}function c(f){const d=s.get(f);if(d){const h=f.index;h!==null&&d.version<h.version&&u(f)}else u(f);return s.get(f)}return{get:o,update:l,getWireframeAttribute:c}}function aBe(n,e,t,r){const i=r.isWebGL2;let s;function a(h){s=h}let o,l;function u(h){o=h.type,l=h.bytesPerElement}function c(h,p){n.drawElements(s,p,o,h*l),t.update(p,s,1)}function f(h,p,v){if(v===0)return;let y,m;if(i)y=n,m="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[m](s,p,o,h*l,v),t.update(p,s,v)}function d(h,p,v){if(v===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let m=0;m<v;m++)this.render(h[m]/l,p[m]);else{y.multiDrawElementsWEBGL(s,p,0,o,h,0,v);let m=0;for(let S=0;S<v;S++)m+=p[S];t.update(m,s,1)}}this.setMode=a,this.setIndex=u,this.render=c,this.renderInstances=f,this.renderMultiDraw=d}function oBe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function lBe(n,e){return n[0]-e[0]}function uBe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function cBe(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,a=new Un,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function l(u,c,f){const d=u.morphTargetInfluences;if(e.isWebGL2===!0){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=h!==void 0?h.length:0;let v=s.get(c);if(v===void 0||v.count!==p){let F=function(){R.dispose(),s.delete(c),c.removeEventListener("dispose",F)};v!==void 0&&v.texture.dispose();const S=c.morphAttributes.position!==void 0,b=c.morphAttributes.normal!==void 0,g=c.morphAttributes.color!==void 0,w=c.morphAttributes.position||[],x=c.morphAttributes.normal||[],M=c.morphAttributes.color||[];let A=0;S===!0&&(A=1),b===!0&&(A=2),g===!0&&(A=3);let N=c.attributes.position.count*A,C=1;N>e.maxTextureSize&&(C=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const T=new Float32Array(N*C*4*p),R=new wE(T,N,C,p);R.type=ha,R.needsUpdate=!0;const U=A*4;for(let B=0;B<p;B++){const D=w[B],O=x[B],$=M[B],L=N*C*4*B;for(let X=0;X<D.count;X++){const Z=X*U;S===!0&&(a.fromBufferAttribute(D,X),T[L+Z+0]=a.x,T[L+Z+1]=a.y,T[L+Z+2]=a.z,T[L+Z+3]=0),b===!0&&(a.fromBufferAttribute(O,X),T[L+Z+4]=a.x,T[L+Z+5]=a.y,T[L+Z+6]=a.z,T[L+Z+7]=0),g===!0&&(a.fromBufferAttribute($,X),T[L+Z+8]=a.x,T[L+Z+9]=a.y,T[L+Z+10]=a.z,T[L+Z+11]=$.itemSize===4?a.w:1)}}v={count:p,texture:R,size:new et(N,C)},s.set(c,v),c.addEventListener("dispose",F)}let y=0;for(let S=0;S<d.length;S++)y+=d[S];const m=c.morphTargetsRelative?1:1-y;f.getUniforms().setValue(n,"morphTargetBaseInfluence",m),f.getUniforms().setValue(n,"morphTargetInfluences",d),f.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const h=d===void 0?0:d.length;let p=r[c.id];if(p===void 0||p.length!==h){p=[];for(let b=0;b<h;b++)p[b]=[b,0];r[c.id]=p}for(let b=0;b<h;b++){const g=p[b];g[0]=b,g[1]=d[b]}p.sort(uBe);for(let b=0;b<8;b++)b<h&&p[b][1]?(o[b][0]=p[b][0],o[b][1]=p[b][1]):(o[b][0]=Number.MAX_SAFE_INTEGER,o[b][1]=0);o.sort(lBe);const v=c.morphAttributes.position,y=c.morphAttributes.normal;let m=0;for(let b=0;b<8;b++){const g=o[b],w=g[0],x=g[1];w!==Number.MAX_SAFE_INTEGER&&x?(v&&c.getAttribute("morphTarget"+b)!==v[w]&&c.setAttribute("morphTarget"+b,v[w]),y&&c.getAttribute("morphNormal"+b)!==y[w]&&c.setAttribute("morphNormal"+b,y[w]),i[b]=x,m+=x):(v&&c.hasAttribute("morphTarget"+b)===!0&&c.deleteAttribute("morphTarget"+b),y&&c.hasAttribute("morphNormal"+b)===!0&&c.deleteAttribute("morphNormal"+b),i[b]=0)}const S=c.morphTargetsRelative?1:1-m;f.getUniforms().setValue(n,"morphTargetBaseInfluence",S),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function fBe(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,f=e.get(l,c);if(i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const d=l.skeleton;i.get(d)!==u&&(d.update(),i.set(d,u))}return f}function a(){i=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:a}}class SE extends Sr{constructor(e,t,r,i,s,a,o,l,u,c){if(c=c!==void 0?c:Oc,c!==Oc&&c!==Md)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Oc&&(r=su),r===void 0&&c===Md&&(r=Rc),super(null,i,s,a,o,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Ur,this.minFilter=l!==void 0?l:Ur,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const XY=new Sr,YY=new SE(1,1);YY.compareFunction=MR;const KY=new wE,ZY=new TR,JY=new xy,T6=[],D6=[],N6=new Float32Array(16),P6=new Float32Array(9),R6=new Float32Array(4);function Bm(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=T6[i];if(s===void 0&&(s=new Float32Array(i),T6[i]=s),e!==0){r.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function ai(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function oi(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function _E(n,e){let t=D6[e];t===void 0&&(t=new Int32Array(e),D6[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function dBe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function hBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ai(t,e))return;n.uniform2fv(this.addr,e),oi(t,e)}}function pBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ai(t,e))return;n.uniform3fv(this.addr,e),oi(t,e)}}function mBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ai(t,e))return;n.uniform4fv(this.addr,e),oi(t,e)}}function gBe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ai(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),oi(t,e)}else{if(ai(t,r))return;R6.set(r),n.uniformMatrix2fv(this.addr,!1,R6),oi(t,r)}}function vBe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ai(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),oi(t,e)}else{if(ai(t,r))return;P6.set(r),n.uniformMatrix3fv(this.addr,!1,P6),oi(t,r)}}function yBe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ai(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),oi(t,e)}else{if(ai(t,r))return;N6.set(r),n.uniformMatrix4fv(this.addr,!1,N6),oi(t,r)}}function xBe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function bBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ai(t,e))return;n.uniform2iv(this.addr,e),oi(t,e)}}function wBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ai(t,e))return;n.uniform3iv(this.addr,e),oi(t,e)}}function SBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ai(t,e))return;n.uniform4iv(this.addr,e),oi(t,e)}}function _Be(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function EBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ai(t,e))return;n.uniform2uiv(this.addr,e),oi(t,e)}}function MBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ai(t,e))return;n.uniform3uiv(this.addr,e),oi(t,e)}}function CBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ai(t,e))return;n.uniform4uiv(this.addr,e),oi(t,e)}}function ABe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const s=this.type===n.SAMPLER_2D_SHADOW?YY:XY;t.setTexture2D(e||s,i)}function TBe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||ZY,i)}function DBe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||JY,i)}function NBe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||KY,i)}function PBe(n){switch(n){case 5126:return dBe;case 35664:return hBe;case 35665:return pBe;case 35666:return mBe;case 35674:return gBe;case 35675:return vBe;case 35676:return yBe;case 5124:case 35670:return xBe;case 35667:case 35671:return bBe;case 35668:case 35672:return wBe;case 35669:case 35673:return SBe;case 5125:return _Be;case 36294:return EBe;case 36295:return MBe;case 36296:return CBe;case 35678:case 36198:case 36298:case 36306:case 35682:return ABe;case 35679:case 36299:case 36307:return TBe;case 35680:case 36300:case 36308:case 36293:return DBe;case 36289:case 36303:case 36311:case 36292:return NBe}}function RBe(n,e){n.uniform1fv(this.addr,e)}function OBe(n,e){const t=Bm(e,this.size,2);n.uniform2fv(this.addr,t)}function IBe(n,e){const t=Bm(e,this.size,3);n.uniform3fv(this.addr,t)}function kBe(n,e){const t=Bm(e,this.size,4);n.uniform4fv(this.addr,t)}function LBe(n,e){const t=Bm(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function FBe(n,e){const t=Bm(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function BBe(n,e){const t=Bm(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function zBe(n,e){n.uniform1iv(this.addr,e)}function UBe(n,e){n.uniform2iv(this.addr,e)}function $Be(n,e){n.uniform3iv(this.addr,e)}function VBe(n,e){n.uniform4iv(this.addr,e)}function HBe(n,e){n.uniform1uiv(this.addr,e)}function WBe(n,e){n.uniform2uiv(this.addr,e)}function GBe(n,e){n.uniform3uiv(this.addr,e)}function jBe(n,e){n.uniform4uiv(this.addr,e)}function qBe(n,e,t){const r=this.cache,i=e.length,s=_E(t,i);ai(r,s)||(n.uniform1iv(this.addr,s),oi(r,s));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||XY,s[a])}function XBe(n,e,t){const r=this.cache,i=e.length,s=_E(t,i);ai(r,s)||(n.uniform1iv(this.addr,s),oi(r,s));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||ZY,s[a])}function YBe(n,e,t){const r=this.cache,i=e.length,s=_E(t,i);ai(r,s)||(n.uniform1iv(this.addr,s),oi(r,s));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||JY,s[a])}function KBe(n,e,t){const r=this.cache,i=e.length,s=_E(t,i);ai(r,s)||(n.uniform1iv(this.addr,s),oi(r,s));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||KY,s[a])}function ZBe(n){switch(n){case 5126:return RBe;case 35664:return OBe;case 35665:return IBe;case 35666:return kBe;case 35674:return LBe;case 35675:return FBe;case 35676:return BBe;case 5124:case 35670:return zBe;case 35667:case 35671:return UBe;case 35668:case 35672:return $Be;case 35669:case 35673:return VBe;case 5125:return HBe;case 36294:return WBe;case 36295:return GBe;case 36296:return jBe;case 35678:case 36198:case 36298:case 36306:case 35682:return qBe;case 35679:case 36299:case 36307:return XBe;case 35680:case 36300:case 36308:case 36293:return YBe;case 36289:case 36303:case 36311:case 36292:return KBe}}class JBe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=PBe(t.type)}}class QBe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=ZBe(t.type)}}class e5e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,t[o.id],r)}}}const RC=/(\w+)(\])?(\[|\.)?/g;function O6(n,e){n.seq.push(e),n.map[e.id]=e}function t5e(n,e,t){const r=n.name,i=r.length;for(RC.lastIndex=0;;){const s=RC.exec(r),a=RC.lastIndex;let o=s[1];const l=s[2]==="]",u=s[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===i){O6(t,u===void 0?new JBe(o,n,e):new QBe(o,n,e));break}else{let f=t.map[o];f===void 0&&(f=new e5e(o),O6(t,f)),t=f}}}class hw{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),a=e.getUniformLocation(t,s.name);t5e(s,a,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in t&&r.push(a)}return r}}function I6(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const n5e=37297;let r5e=0;function i5e(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=i;a<s;a++){const o=a+1;r.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return r.join(`
`)}function s5e(n){const e=Bn.getPrimaries(Bn.workingColorSpace),t=Bn.getPrimaries(n);let r;switch(e===t?r="":e===x0&&t===y0?r="LinearDisplayP3ToLinearSRGB":e===y0&&t===x0&&(r="LinearSRGBToLinearDisplayP3"),n){case Cl:case gy:return[r,"LinearTransferOETF"];case ti:case bE:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function k6(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+i5e(n.getShaderSource(e),a)}else return i}function a5e(n,e){const t=s5e(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function o5e(n,e){let t;switch(e){case dY:t="Linear";break;case hY:t="Reinhard";break;case pY:t="OptimizedCineon";break;case mR:t="ACESFilmic";break;case gY:t="AgX";break;case mY:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function l5e(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.alphaToCoverage||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(dp).join(`
`)}function u5e(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(dp).join(`
`)}function c5e(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function f5e(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function dp(n){return n!==""}function L6(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function F6(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const d5e=/^[ \t]*#include +<([\w\d./]+)>/gm;function rD(n){return n.replace(d5e,p5e)}const h5e=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function p5e(n,e){let t=fn[e];if(t===void 0){const r=h5e.get(e);if(r!==void 0)t=fn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return rD(t)}const m5e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function B6(n){return n.replace(m5e,g5e)}function g5e(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function z6(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	`;return n.isWebGL2&&(e+=`precision ${n.precision} sampler3D;
		precision ${n.precision} sampler2DArray;
		precision ${n.precision} sampler2DShadow;
		precision ${n.precision} samplerCubeShadow;
		precision ${n.precision} sampler2DArrayShadow;
		precision ${n.precision} isampler2D;
		precision ${n.precision} isampler3D;
		precision ${n.precision} isamplerCube;
		precision ${n.precision} isampler2DArray;
		precision ${n.precision} usampler2D;
		precision ${n.precision} usampler3D;
		precision ${n.precision} usamplerCube;
		precision ${n.precision} usampler2DArray;
		`),n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function v5e(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===gE?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===xv?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===vo&&(e="SHADOWMAP_TYPE_VSM"),e}function y5e(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Cu:case jc:e="ENVMAP_TYPE_CUBE";break;case Lm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function x5e(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case jc:e="ENVMAP_MODE_REFRACTION";break}return e}function b5e(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case my:e="ENVMAP_BLENDING_MULTIPLY";break;case cY:e="ENVMAP_BLENDING_MIX";break;case fY:e="ENVMAP_BLENDING_ADD";break}return e}function w5e(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function S5e(n,e,t,r){const i=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=v5e(t),u=y5e(t),c=x5e(t),f=b5e(t),d=w5e(t),h=t.isWebGL2?"":l5e(t),p=u5e(t),v=c5e(s),y=i.createProgram();let m,S,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(dp).join(`
`),m.length>0&&(m+=`
`),S=[h,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(dp).join(`
`),S.length>0&&(S+=`
`)):(m=[z6(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(dp).join(`
`),S=[h,z6(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vl?"#define TONE_MAPPING":"",t.toneMapping!==vl?fn.tonemapping_pars_fragment:"",t.toneMapping!==vl?o5e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",fn.colorspace_pars_fragment,a5e("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(dp).join(`
`)),a=rD(a),a=L6(a,t),a=F6(a,t),o=rD(o),o=L6(o,t),o=F6(o,t),a=B6(a),o=B6(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,m=[p,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,S=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===eD?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===eD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const g=b+m+a,w=b+S+o,x=I6(i,i.VERTEX_SHADER,g),M=I6(i,i.FRAGMENT_SHADER,w);i.attachShader(y,x),i.attachShader(y,M),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function A(R){if(n.debug.checkShaderErrors){const U=i.getProgramInfoLog(y).trim(),F=i.getShaderInfoLog(x).trim(),B=i.getShaderInfoLog(M).trim();let D=!0,O=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(D=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,y,x,M);else{const $=k6(i,x,"vertex"),L=k6(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+U+`
`+$+`
`+L)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(F===""||B==="")&&(O=!1);O&&(R.diagnostics={runnable:D,programLog:U,vertexShader:{log:F,prefix:m},fragmentShader:{log:B,prefix:S}})}i.deleteShader(x),i.deleteShader(M),N=new hw(i,y),C=f5e(i,y)}let N;this.getUniforms=function(){return N===void 0&&A(this),N};let C;this.getAttributes=function(){return C===void 0&&A(this),C};let T=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=i.getProgramParameter(y,n5e)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=r5e++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=x,this.fragmentShader=M,this}let _5e=0;class E5e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new M5e(e),t.set(e,r)),r}}class M5e{constructor(e){this.id=_5e++,this.code=e,this.usedTimes=0}}function C5e(n,e,t,r,i,s,a){const o=new fd,l=new E5e,u=new Set,c=[],f=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let p=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(C){return u.add(C),C===0?"uv":`uv${C}`}function m(C,T,R,U,F){const B=U.fog,D=F.geometry,O=C.isMeshStandardMaterial?U.environment:null,$=(C.isMeshStandardMaterial?t:e).get(C.envMap||O),L=$&&$.mapping===Lm?$.image.height:null,X=v[C.type];C.precision!==null&&(p=i.getMaxPrecision(C.precision),p!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",p,"instead."));const Z=D.morphAttributes.position||D.morphAttributes.normal||D.morphAttributes.color,Q=Z!==void 0?Z.length:0;let K=0;D.morphAttributes.position!==void 0&&(K=1),D.morphAttributes.normal!==void 0&&(K=2),D.morphAttributes.color!==void 0&&(K=3);let re,ce,ue,me;if(X){const _e=wo[X];re=_e.vertexShader,ce=_e.fragmentShader}else re=C.vertexShader,ce=C.fragmentShader,l.update(C),ue=l.getVertexShaderID(C),me=l.getFragmentShaderID(C);const Ee=n.getRenderTarget(),xe=F.isInstancedMesh===!0,Te=F.isBatchedMesh===!0,De=!!C.map,ie=!!C.matcap,Ie=!!$,ke=!!C.aoMap,te=!!C.lightMap,ne=!!C.bumpMap,Ce=!!C.normalMap,se=!!C.displacementMap,j=!!C.emissiveMap,G=!!C.metalnessMap,fe=!!C.roughnessMap,Me=C.anisotropy>0,q=C.clearcoat>0,J=C.iridescence>0,be=C.sheen>0,Se=C.transmission>0,Ne=Me&&!!C.anisotropyMap,Fe=q&&!!C.clearcoatMap,He=q&&!!C.clearcoatNormalMap,Oe=q&&!!C.clearcoatRoughnessMap,Je=J&&!!C.iridescenceMap,qe=J&&!!C.iridescenceThicknessMap,lt=be&&!!C.sheenColorMap,at=be&&!!C.sheenRoughnessMap,ge=!!C.specularMap,We=!!C.specularColorMap,W=!!C.specularIntensityMap,pe=Se&&!!C.transmissionMap,Re=Se&&!!C.thicknessMap,Ye=!!C.gradientMap,de=!!C.alphaMap,Ze=C.alphaTest>0,H=!!C.alphaHash,ee=!!C.extensions;let oe=vl;C.toneMapped&&(Ee===null||Ee.isXRRenderTarget===!0)&&(oe=n.toneMapping);const ye={isWebGL2:f,shaderID:X,shaderType:C.type,shaderName:C.name,vertexShader:re,fragmentShader:ce,defines:C.defines,customVertexShaderID:ue,customFragmentShaderID:me,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:p,batching:Te,instancing:xe,instancingColor:xe&&F.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:Ee===null?n.outputColorSpace:Ee.isXRRenderTarget===!0?Ee.texture.colorSpace:Cl,alphaToCoverage:!!C.alphaToCoverage,map:De,matcap:ie,envMap:Ie,envMapMode:Ie&&$.mapping,envMapCubeUVHeight:L,aoMap:ke,lightMap:te,bumpMap:ne,normalMap:Ce,displacementMap:h&&se,emissiveMap:j,normalMapObjectSpace:Ce&&C.normalMapType===PY,normalMapTangentSpace:Ce&&C.normalMapType===lf,metalnessMap:G,roughnessMap:fe,anisotropy:Me,anisotropyMap:Ne,clearcoat:q,clearcoatMap:Fe,clearcoatNormalMap:He,clearcoatRoughnessMap:Oe,iridescence:J,iridescenceMap:Je,iridescenceThicknessMap:qe,sheen:be,sheenColorMap:lt,sheenRoughnessMap:at,specularMap:ge,specularColorMap:We,specularIntensityMap:W,transmission:Se,transmissionMap:pe,thicknessMap:Re,gradientMap:Ye,opaque:C.transparent===!1&&C.blending===ld&&C.alphaToCoverage===!1,alphaMap:de,alphaTest:Ze,alphaHash:H,combine:C.combine,mapUv:De&&y(C.map.channel),aoMapUv:ke&&y(C.aoMap.channel),lightMapUv:te&&y(C.lightMap.channel),bumpMapUv:ne&&y(C.bumpMap.channel),normalMapUv:Ce&&y(C.normalMap.channel),displacementMapUv:se&&y(C.displacementMap.channel),emissiveMapUv:j&&y(C.emissiveMap.channel),metalnessMapUv:G&&y(C.metalnessMap.channel),roughnessMapUv:fe&&y(C.roughnessMap.channel),anisotropyMapUv:Ne&&y(C.anisotropyMap.channel),clearcoatMapUv:Fe&&y(C.clearcoatMap.channel),clearcoatNormalMapUv:He&&y(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Oe&&y(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Je&&y(C.iridescenceMap.channel),iridescenceThicknessMapUv:qe&&y(C.iridescenceThicknessMap.channel),sheenColorMapUv:lt&&y(C.sheenColorMap.channel),sheenRoughnessMapUv:at&&y(C.sheenRoughnessMap.channel),specularMapUv:ge&&y(C.specularMap.channel),specularColorMapUv:We&&y(C.specularColorMap.channel),specularIntensityMapUv:W&&y(C.specularIntensityMap.channel),transmissionMapUv:pe&&y(C.transmissionMap.channel),thicknessMapUv:Re&&y(C.thicknessMap.channel),alphaMapUv:de&&y(C.alphaMap.channel),vertexTangents:!!D.attributes.tangent&&(Ce||Me),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!D.attributes.color&&D.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!D.attributes.uv&&(De||de),fog:!!B,useFog:C.fog===!0,fogExp2:!!B&&B.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:F.isSkinnedMesh===!0,morphTargets:D.morphAttributes.position!==void 0,morphNormals:D.morphAttributes.normal!==void 0,morphColors:D.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:K,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:oe,useLegacyLights:n._useLegacyLights,decodeVideoTexture:De&&C.map.isVideoTexture===!0&&Bn.getTransfer(C.map.colorSpace)===er,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===da,flipSided:C.side===Ss,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:ee&&C.extensions.derivatives===!0,extensionFragDepth:ee&&C.extensions.fragDepth===!0,extensionDrawBuffers:ee&&C.extensions.drawBuffers===!0,extensionShaderTextureLOD:ee&&C.extensions.shaderTextureLOD===!0,extensionClipCullDistance:ee&&C.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:ee&&C.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:f||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return ye.vertexUv1s=u.has(1),ye.vertexUv2s=u.has(2),ye.vertexUv3s=u.has(3),u.clear(),ye}function S(C){const T=[];if(C.shaderID?T.push(C.shaderID):(T.push(C.customVertexShaderID),T.push(C.customFragmentShaderID)),C.defines!==void 0)for(const R in C.defines)T.push(R),T.push(C.defines[R]);return C.isRawShaderMaterial===!1&&(b(T,C),g(T,C),T.push(n.outputColorSpace)),T.push(C.customProgramCacheKey),T.join()}function b(C,T){C.push(T.precision),C.push(T.outputColorSpace),C.push(T.envMapMode),C.push(T.envMapCubeUVHeight),C.push(T.mapUv),C.push(T.alphaMapUv),C.push(T.lightMapUv),C.push(T.aoMapUv),C.push(T.bumpMapUv),C.push(T.normalMapUv),C.push(T.displacementMapUv),C.push(T.emissiveMapUv),C.push(T.metalnessMapUv),C.push(T.roughnessMapUv),C.push(T.anisotropyMapUv),C.push(T.clearcoatMapUv),C.push(T.clearcoatNormalMapUv),C.push(T.clearcoatRoughnessMapUv),C.push(T.iridescenceMapUv),C.push(T.iridescenceThicknessMapUv),C.push(T.sheenColorMapUv),C.push(T.sheenRoughnessMapUv),C.push(T.specularMapUv),C.push(T.specularColorMapUv),C.push(T.specularIntensityMapUv),C.push(T.transmissionMapUv),C.push(T.thicknessMapUv),C.push(T.combine),C.push(T.fogExp2),C.push(T.sizeAttenuation),C.push(T.morphTargetsCount),C.push(T.morphAttributeCount),C.push(T.numDirLights),C.push(T.numPointLights),C.push(T.numSpotLights),C.push(T.numSpotLightMaps),C.push(T.numHemiLights),C.push(T.numRectAreaLights),C.push(T.numDirLightShadows),C.push(T.numPointLightShadows),C.push(T.numSpotLightShadows),C.push(T.numSpotLightShadowsWithMaps),C.push(T.numLightProbes),C.push(T.shadowMapType),C.push(T.toneMapping),C.push(T.numClippingPlanes),C.push(T.numClipIntersection),C.push(T.depthPacking)}function g(C,T){o.disableAll(),T.isWebGL2&&o.enable(0),T.supportsVertexTextures&&o.enable(1),T.instancing&&o.enable(2),T.instancingColor&&o.enable(3),T.matcap&&o.enable(4),T.envMap&&o.enable(5),T.normalMapObjectSpace&&o.enable(6),T.normalMapTangentSpace&&o.enable(7),T.clearcoat&&o.enable(8),T.iridescence&&o.enable(9),T.alphaTest&&o.enable(10),T.vertexColors&&o.enable(11),T.vertexAlphas&&o.enable(12),T.vertexUv1s&&o.enable(13),T.vertexUv2s&&o.enable(14),T.vertexUv3s&&o.enable(15),T.vertexTangents&&o.enable(16),T.anisotropy&&o.enable(17),T.alphaHash&&o.enable(18),T.batching&&o.enable(19),C.push(o.mask),o.disableAll(),T.fog&&o.enable(0),T.useFog&&o.enable(1),T.flatShading&&o.enable(2),T.logarithmicDepthBuffer&&o.enable(3),T.skinning&&o.enable(4),T.morphTargets&&o.enable(5),T.morphNormals&&o.enable(6),T.morphColors&&o.enable(7),T.premultipliedAlpha&&o.enable(8),T.shadowMapEnabled&&o.enable(9),T.useLegacyLights&&o.enable(10),T.doubleSided&&o.enable(11),T.flipSided&&o.enable(12),T.useDepthPacking&&o.enable(13),T.dithering&&o.enable(14),T.transmission&&o.enable(15),T.sheen&&o.enable(16),T.opaque&&o.enable(17),T.pointsUvs&&o.enable(18),T.decodeVideoTexture&&o.enable(19),T.alphaToCoverage&&o.enable(20),C.push(o.mask)}function w(C){const T=v[C.type];let R;if(T){const U=wo[T];R=PR.clone(U.uniforms)}else R=C.uniforms;return R}function x(C,T){let R;for(let U=0,F=c.length;U<F;U++){const B=c[U];if(B.cacheKey===T){R=B,++R.usedTimes;break}}return R===void 0&&(R=new S5e(n,T,C,s),c.push(R)),R}function M(C){if(--C.usedTimes===0){const T=c.indexOf(C);c[T]=c[c.length-1],c.pop(),C.destroy()}}function A(C){l.remove(C)}function N(){l.dispose()}return{getParameters:m,getProgramCacheKey:S,getUniforms:w,acquireProgram:x,releaseProgram:M,releaseShaderCache:A,programs:c,dispose:N}}function A5e(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function r(s,a,o){n.get(s)[a]=o}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function T5e(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function U6(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function $6(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function a(f,d,h,p,v,y){let m=n[e];return m===void 0?(m={id:f.id,object:f,geometry:d,material:h,groupOrder:p,renderOrder:f.renderOrder,z:v,group:y},n[e]=m):(m.id=f.id,m.object=f,m.geometry=d,m.material=h,m.groupOrder=p,m.renderOrder=f.renderOrder,m.z=v,m.group=y),e++,m}function o(f,d,h,p,v,y){const m=a(f,d,h,p,v,y);h.transmission>0?r.push(m):h.transparent===!0?i.push(m):t.push(m)}function l(f,d,h,p,v,y){const m=a(f,d,h,p,v,y);h.transmission>0?r.unshift(m):h.transparent===!0?i.unshift(m):t.unshift(m)}function u(f,d){t.length>1&&t.sort(f||T5e),r.length>1&&r.sort(d||U6),i.length>1&&i.sort(d||U6)}function c(){for(let f=e,d=n.length;f<d;f++){const h=n[f];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:o,unshift:l,finish:c,sort:u}}function D5e(){let n=new WeakMap;function e(r,i){const s=n.get(r);let a;return s===void 0?(a=new $6,n.set(r,[a])):i>=s.length?(a=new $6,s.push(a)):a=s[i],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function N5e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ve,color:new mt};break;case"SpotLight":t={position:new ve,direction:new ve,color:new mt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ve,color:new mt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ve,skyColor:new mt,groundColor:new mt};break;case"RectAreaLight":t={color:new mt,position:new ve,halfWidth:new ve,halfHeight:new ve};break}return n[e.id]=t,t}}}function P5e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let R5e=0;function O5e(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function I5e(n,e){const t=new N5e,r=P5e(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new ve);const s=new ve,a=new Kt,o=new Kt;function l(c,f){let d=0,h=0,p=0;for(let R=0;R<9;R++)i.probe[R].set(0,0,0);let v=0,y=0,m=0,S=0,b=0,g=0,w=0,x=0,M=0,A=0,N=0;c.sort(O5e);const C=f===!0?Math.PI:1;for(let R=0,U=c.length;R<U;R++){const F=c[R],B=F.color,D=F.intensity,O=F.distance,$=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)d+=B.r*D*C,h+=B.g*D*C,p+=B.b*D*C;else if(F.isLightProbe){for(let L=0;L<9;L++)i.probe[L].addScaledVector(F.sh.coefficients[L],D);N++}else if(F.isDirectionalLight){const L=t.get(F);if(L.color.copy(F.color).multiplyScalar(F.intensity*C),F.castShadow){const X=F.shadow,Z=r.get(F);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,i.directionalShadow[v]=Z,i.directionalShadowMap[v]=$,i.directionalShadowMatrix[v]=F.shadow.matrix,g++}i.directional[v]=L,v++}else if(F.isSpotLight){const L=t.get(F);L.position.setFromMatrixPosition(F.matrixWorld),L.color.copy(B).multiplyScalar(D*C),L.distance=O,L.coneCos=Math.cos(F.angle),L.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),L.decay=F.decay,i.spot[m]=L;const X=F.shadow;if(F.map&&(i.spotLightMap[M]=F.map,M++,X.updateMatrices(F),F.castShadow&&A++),i.spotLightMatrix[m]=X.matrix,F.castShadow){const Z=r.get(F);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,i.spotShadow[m]=Z,i.spotShadowMap[m]=$,x++}m++}else if(F.isRectAreaLight){const L=t.get(F);L.color.copy(B).multiplyScalar(D),L.halfWidth.set(F.width*.5,0,0),L.halfHeight.set(0,F.height*.5,0),i.rectArea[S]=L,S++}else if(F.isPointLight){const L=t.get(F);if(L.color.copy(F.color).multiplyScalar(F.intensity*C),L.distance=F.distance,L.decay=F.decay,F.castShadow){const X=F.shadow,Z=r.get(F);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,Z.shadowCameraNear=X.camera.near,Z.shadowCameraFar=X.camera.far,i.pointShadow[y]=Z,i.pointShadowMap[y]=$,i.pointShadowMatrix[y]=F.shadow.matrix,w++}i.point[y]=L,y++}else if(F.isHemisphereLight){const L=t.get(F);L.skyColor.copy(F.color).multiplyScalar(D*C),L.groundColor.copy(F.groundColor).multiplyScalar(D*C),i.hemi[b]=L,b++}}S>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=dt.LTC_FLOAT_1,i.rectAreaLTC2=dt.LTC_FLOAT_2):(i.rectAreaLTC1=dt.LTC_HALF_1,i.rectAreaLTC2=dt.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=dt.LTC_FLOAT_1,i.rectAreaLTC2=dt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=dt.LTC_HALF_1,i.rectAreaLTC2=dt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=d,i.ambient[1]=h,i.ambient[2]=p;const T=i.hash;(T.directionalLength!==v||T.pointLength!==y||T.spotLength!==m||T.rectAreaLength!==S||T.hemiLength!==b||T.numDirectionalShadows!==g||T.numPointShadows!==w||T.numSpotShadows!==x||T.numSpotMaps!==M||T.numLightProbes!==N)&&(i.directional.length=v,i.spot.length=m,i.rectArea.length=S,i.point.length=y,i.hemi.length=b,i.directionalShadow.length=g,i.directionalShadowMap.length=g,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=x,i.spotShadowMap.length=x,i.directionalShadowMatrix.length=g,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=x+M-A,i.spotLightMap.length=M,i.numSpotLightShadowsWithMaps=A,i.numLightProbes=N,T.directionalLength=v,T.pointLength=y,T.spotLength=m,T.rectAreaLength=S,T.hemiLength=b,T.numDirectionalShadows=g,T.numPointShadows=w,T.numSpotShadows=x,T.numSpotMaps=M,T.numLightProbes=N,i.version=R5e++)}function u(c,f){let d=0,h=0,p=0,v=0,y=0;const m=f.matrixWorldInverse;for(let S=0,b=c.length;S<b;S++){const g=c[S];if(g.isDirectionalLight){const w=i.directional[d];w.direction.setFromMatrixPosition(g.matrixWorld),s.setFromMatrixPosition(g.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(m),d++}else if(g.isSpotLight){const w=i.spot[p];w.position.setFromMatrixPosition(g.matrixWorld),w.position.applyMatrix4(m),w.direction.setFromMatrixPosition(g.matrixWorld),s.setFromMatrixPosition(g.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(m),p++}else if(g.isRectAreaLight){const w=i.rectArea[v];w.position.setFromMatrixPosition(g.matrixWorld),w.position.applyMatrix4(m),o.identity(),a.copy(g.matrixWorld),a.premultiply(m),o.extractRotation(a),w.halfWidth.set(g.width*.5,0,0),w.halfHeight.set(0,g.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),v++}else if(g.isPointLight){const w=i.point[h];w.position.setFromMatrixPosition(g.matrixWorld),w.position.applyMatrix4(m),h++}else if(g.isHemisphereLight){const w=i.hemi[y];w.direction.setFromMatrixPosition(g.matrixWorld),w.direction.transformDirection(m),y++}}}return{setup:l,setupView:u,state:i}}function V6(n,e){const t=new I5e(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function a(f){r.push(f)}function o(f){i.push(f)}function l(f){t.setup(r,f)}function u(f){t.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:a,pushShadow:o}}function k5e(n,e){let t=new WeakMap;function r(s,a=0){const o=t.get(s);let l;return o===void 0?(l=new V6(n,e),t.set(s,[l])):a>=o.length?(l=new V6(n,e),o.push(l)):l=o[a],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class OR extends Fi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=DY,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class IR extends Fi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const L5e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,F5e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function B5e(n,e,t){let r=new by;const i=new et,s=new et,a=new Un,o=new OR({depthPacking:NY}),l=new IR,u={},c=t.maxTextureSize,f={[Mu]:Ss,[Ss]:Mu,[da]:da},d=new Ea({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new et},radius:{value:4}},vertexShader:L5e,fragmentShader:F5e}),h=d.clone();h.defines.HORIZONTAL_PASS=1;const p=new rn;p.setAttribute("position",new kn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Xr(p,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=gE;let m=this.type;this.render=function(x,M,A){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||x.length===0)return;const N=n.getRenderTarget(),C=n.getActiveCubeFace(),T=n.getActiveMipmapLevel(),R=n.state;R.setBlending(hu),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);const U=m!==vo&&this.type===vo,F=m===vo&&this.type!==vo;for(let B=0,D=x.length;B<D;B++){const O=x[B],$=O.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",O,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;i.copy($.mapSize);const L=$.getFrameExtents();if(i.multiply(L),s.copy($.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/L.x),i.x=s.x*L.x,$.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/L.y),i.y=s.y*L.y,$.mapSize.y=s.y)),$.map===null||U===!0||F===!0){const Z=this.type!==vo?{minFilter:Ur,magFilter:Ur}:{};$.map!==null&&$.map.dispose(),$.map=new no(i.x,i.y,Z),$.map.texture.name=O.name+".shadowMap",$.camera.updateProjectionMatrix()}n.setRenderTarget($.map),n.clear();const X=$.getViewportCount();for(let Z=0;Z<X;Z++){const Q=$.getViewport(Z);a.set(s.x*Q.x,s.y*Q.y,s.x*Q.z,s.y*Q.w),R.viewport(a),$.updateMatrices(O,Z),r=$.getFrustum(),g(M,A,$.camera,O,this.type)}$.isPointLightShadow!==!0&&this.type===vo&&S($,A),$.needsUpdate=!1}m=this.type,y.needsUpdate=!1,n.setRenderTarget(N,C,T)};function S(x,M){const A=e.update(v);d.defines.VSM_SAMPLES!==x.blurSamples&&(d.defines.VSM_SAMPLES=x.blurSamples,h.defines.VSM_SAMPLES=x.blurSamples,d.needsUpdate=!0,h.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new no(i.x,i.y)),d.uniforms.shadow_pass.value=x.map.texture,d.uniforms.resolution.value=x.mapSize,d.uniforms.radius.value=x.radius,n.setRenderTarget(x.mapPass),n.clear(),n.renderBufferDirect(M,null,A,d,v,null),h.uniforms.shadow_pass.value=x.mapPass.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,n.setRenderTarget(x.map),n.clear(),n.renderBufferDirect(M,null,A,h,v,null)}function b(x,M,A,N){let C=null;const T=A.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(T!==void 0)C=T;else if(C=A.isPointLight===!0?l:o,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const R=C.uuid,U=M.uuid;let F=u[R];F===void 0&&(F={},u[R]=F);let B=F[U];B===void 0&&(B=C.clone(),F[U]=B,M.addEventListener("dispose",w)),C=B}if(C.visible=M.visible,C.wireframe=M.wireframe,N===vo?C.side=M.shadowSide!==null?M.shadowSide:M.side:C.side=M.shadowSide!==null?M.shadowSide:f[M.side],C.alphaMap=M.alphaMap,C.alphaTest=M.alphaTest,C.map=M.map,C.clipShadows=M.clipShadows,C.clippingPlanes=M.clippingPlanes,C.clipIntersection=M.clipIntersection,C.displacementMap=M.displacementMap,C.displacementScale=M.displacementScale,C.displacementBias=M.displacementBias,C.wireframeLinewidth=M.wireframeLinewidth,C.linewidth=M.linewidth,A.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const R=n.properties.get(C);R.light=A}return C}function g(x,M,A,N,C){if(x.visible===!1)return;if(x.layers.test(M.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&C===vo)&&(!x.frustumCulled||r.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,x.matrixWorld);const U=e.update(x),F=x.material;if(Array.isArray(F)){const B=U.groups;for(let D=0,O=B.length;D<O;D++){const $=B[D],L=F[$.materialIndex];if(L&&L.visible){const X=b(x,L,N,C);x.onBeforeShadow(n,x,M,A,U,X,$),n.renderBufferDirect(A,null,U,X,x,$),x.onAfterShadow(n,x,M,A,U,X,$)}}}else if(F.visible){const B=b(x,F,N,C);x.onBeforeShadow(n,x,M,A,U,B,null),n.renderBufferDirect(A,null,U,B,x,null),x.onAfterShadow(n,x,M,A,U,B,null)}}const R=x.children;for(let U=0,F=R.length;U<F;U++)g(R[U],M,A,N,C)}function w(x){x.target.removeEventListener("dispose",w);for(const A in u){const N=u[A],C=x.target.uuid;C in N&&(N[C].dispose(),delete N[C])}}}function z5e(n,e,t){const r=t.isWebGL2;function i(){let de=!1;const Ze=new Un;let H=null;const ee=new Un(0,0,0,0);return{setMask:function(oe){H!==oe&&!de&&(n.colorMask(oe,oe,oe,oe),H=oe)},setLocked:function(oe){de=oe},setClear:function(oe,ye,_e,Pe,$e){$e===!0&&(oe*=Pe,ye*=Pe,_e*=Pe),Ze.set(oe,ye,_e,Pe),ee.equals(Ze)===!1&&(n.clearColor(oe,ye,_e,Pe),ee.copy(Ze))},reset:function(){de=!1,H=null,ee.set(-1,0,0,0)}}}function s(){let de=!1,Ze=null,H=null,ee=null;return{setTest:function(oe){oe?xe(n.DEPTH_TEST):Te(n.DEPTH_TEST)},setMask:function(oe){Ze!==oe&&!de&&(n.depthMask(oe),Ze=oe)},setFunc:function(oe){if(H!==oe){switch(oe){case rY:n.depthFunc(n.NEVER);break;case iY:n.depthFunc(n.ALWAYS);break;case sY:n.depthFunc(n.LESS);break;case u0:n.depthFunc(n.LEQUAL);break;case aY:n.depthFunc(n.EQUAL);break;case oY:n.depthFunc(n.GEQUAL);break;case lY:n.depthFunc(n.GREATER);break;case uY:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}H=oe}},setLocked:function(oe){de=oe},setClear:function(oe){ee!==oe&&(n.clearDepth(oe),ee=oe)},reset:function(){de=!1,Ze=null,H=null,ee=null}}}function a(){let de=!1,Ze=null,H=null,ee=null,oe=null,ye=null,_e=null,Pe=null,$e=null;return{setTest:function(Xe){de||(Xe?xe(n.STENCIL_TEST):Te(n.STENCIL_TEST))},setMask:function(Xe){Ze!==Xe&&!de&&(n.stencilMask(Xe),Ze=Xe)},setFunc:function(Xe,tt,ht){(H!==Xe||ee!==tt||oe!==ht)&&(n.stencilFunc(Xe,tt,ht),H=Xe,ee=tt,oe=ht)},setOp:function(Xe,tt,ht){(ye!==Xe||_e!==tt||Pe!==ht)&&(n.stencilOp(Xe,tt,ht),ye=Xe,_e=tt,Pe=ht)},setLocked:function(Xe){de=Xe},setClear:function(Xe){$e!==Xe&&(n.clearStencil(Xe),$e=Xe)},reset:function(){de=!1,Ze=null,H=null,ee=null,oe=null,ye=null,_e=null,Pe=null,$e=null}}}const o=new i,l=new s,u=new a,c=new WeakMap,f=new WeakMap;let d={},h={},p=new WeakMap,v=[],y=null,m=!1,S=null,b=null,g=null,w=null,x=null,M=null,A=null,N=new mt(0,0,0),C=0,T=!1,R=null,U=null,F=null,B=null,D=null;const O=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $=!1,L=0;const X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(L=parseFloat(/^WebGL (\d)/.exec(X)[1]),$=L>=1):X.indexOf("OpenGL ES")!==-1&&(L=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),$=L>=2);let Z=null,Q={};const K=n.getParameter(n.SCISSOR_BOX),re=n.getParameter(n.VIEWPORT),ce=new Un().fromArray(K),ue=new Un().fromArray(re);function me(de,Ze,H,ee){const oe=new Uint8Array(4),ye=n.createTexture();n.bindTexture(de,ye),n.texParameteri(de,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(de,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let _e=0;_e<H;_e++)r&&(de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY)?n.texImage3D(Ze,0,n.RGBA,1,1,ee,0,n.RGBA,n.UNSIGNED_BYTE,oe):n.texImage2D(Ze+_e,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,oe);return ye}const Ee={};Ee[n.TEXTURE_2D]=me(n.TEXTURE_2D,n.TEXTURE_2D,1),Ee[n.TEXTURE_CUBE_MAP]=me(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Ee[n.TEXTURE_2D_ARRAY]=me(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ee[n.TEXTURE_3D]=me(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),xe(n.DEPTH_TEST),l.setFunc(u0),se(!1),j(w3),xe(n.CULL_FACE),ne(hu);function xe(de){d[de]!==!0&&(n.enable(de),d[de]=!0)}function Te(de){d[de]!==!1&&(n.disable(de),d[de]=!1)}function De(de,Ze){return h[de]!==Ze?(n.bindFramebuffer(de,Ze),h[de]=Ze,r&&(de===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Ze),de===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Ze)),!0):!1}function ie(de,Ze){let H=v,ee=!1;if(de)if(H=p.get(Ze),H===void 0&&(H=[],p.set(Ze,H)),de.isWebGLMultipleRenderTargets){const oe=de.texture;if(H.length!==oe.length||H[0]!==n.COLOR_ATTACHMENT0){for(let ye=0,_e=oe.length;ye<_e;ye++)H[ye]=n.COLOR_ATTACHMENT0+ye;H.length=oe.length,ee=!0}}else H[0]!==n.COLOR_ATTACHMENT0&&(H[0]=n.COLOR_ATTACHMENT0,ee=!0);else H[0]!==n.BACK&&(H[0]=n.BACK,ee=!0);ee&&(t.isWebGL2?n.drawBuffers(H):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(H))}function Ie(de){return y!==de?(n.useProgram(de),y=de,!0):!1}const ke={[fc]:n.FUNC_ADD,[VX]:n.FUNC_SUBTRACT,[HX]:n.FUNC_REVERSE_SUBTRACT};if(r)ke[M3]=n.MIN,ke[C3]=n.MAX;else{const de=e.get("EXT_blend_minmax");de!==null&&(ke[M3]=de.MIN_EXT,ke[C3]=de.MAX_EXT)}const te={[WX]:n.ZERO,[GX]:n.ONE,[jX]:n.SRC_COLOR,[HS]:n.SRC_ALPHA,[JX]:n.SRC_ALPHA_SATURATE,[KX]:n.DST_COLOR,[XX]:n.DST_ALPHA,[qX]:n.ONE_MINUS_SRC_COLOR,[WS]:n.ONE_MINUS_SRC_ALPHA,[ZX]:n.ONE_MINUS_DST_COLOR,[YX]:n.ONE_MINUS_DST_ALPHA,[QX]:n.CONSTANT_COLOR,[eY]:n.ONE_MINUS_CONSTANT_COLOR,[tY]:n.CONSTANT_ALPHA,[nY]:n.ONE_MINUS_CONSTANT_ALPHA};function ne(de,Ze,H,ee,oe,ye,_e,Pe,$e,Xe){if(de===hu){m===!0&&(Te(n.BLEND),m=!1);return}if(m===!1&&(xe(n.BLEND),m=!0),de!==$X){if(de!==S||Xe!==T){if((b!==fc||x!==fc)&&(n.blendEquation(n.FUNC_ADD),b=fc,x=fc),Xe)switch(de){case ld:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case S3:n.blendFunc(n.ONE,n.ONE);break;case _3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case E3:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case ld:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case S3:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case _3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case E3:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}g=null,w=null,M=null,A=null,N.set(0,0,0),C=0,S=de,T=Xe}return}oe=oe||Ze,ye=ye||H,_e=_e||ee,(Ze!==b||oe!==x)&&(n.blendEquationSeparate(ke[Ze],ke[oe]),b=Ze,x=oe),(H!==g||ee!==w||ye!==M||_e!==A)&&(n.blendFuncSeparate(te[H],te[ee],te[ye],te[_e]),g=H,w=ee,M=ye,A=_e),(Pe.equals(N)===!1||$e!==C)&&(n.blendColor(Pe.r,Pe.g,Pe.b,$e),N.copy(Pe),C=$e),S=de,T=!1}function Ce(de,Ze){de.side===da?Te(n.CULL_FACE):xe(n.CULL_FACE);let H=de.side===Ss;Ze&&(H=!H),se(H),de.blending===ld&&de.transparent===!1?ne(hu):ne(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),l.setFunc(de.depthFunc),l.setTest(de.depthTest),l.setMask(de.depthWrite),o.setMask(de.colorWrite);const ee=de.stencilWrite;u.setTest(ee),ee&&(u.setMask(de.stencilWriteMask),u.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),u.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),fe(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?xe(n.SAMPLE_ALPHA_TO_COVERAGE):Te(n.SAMPLE_ALPHA_TO_COVERAGE)}function se(de){R!==de&&(de?n.frontFace(n.CW):n.frontFace(n.CCW),R=de)}function j(de){de!==BX?(xe(n.CULL_FACE),de!==U&&(de===w3?n.cullFace(n.BACK):de===zX?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Te(n.CULL_FACE),U=de}function G(de){de!==F&&($&&n.lineWidth(de),F=de)}function fe(de,Ze,H){de?(xe(n.POLYGON_OFFSET_FILL),(B!==Ze||D!==H)&&(n.polygonOffset(Ze,H),B=Ze,D=H)):Te(n.POLYGON_OFFSET_FILL)}function Me(de){de?xe(n.SCISSOR_TEST):Te(n.SCISSOR_TEST)}function q(de){de===void 0&&(de=n.TEXTURE0+O-1),Z!==de&&(n.activeTexture(de),Z=de)}function J(de,Ze,H){H===void 0&&(Z===null?H=n.TEXTURE0+O-1:H=Z);let ee=Q[H];ee===void 0&&(ee={type:void 0,texture:void 0},Q[H]=ee),(ee.type!==de||ee.texture!==Ze)&&(Z!==H&&(n.activeTexture(H),Z=H),n.bindTexture(de,Ze||Ee[de]),ee.type=de,ee.texture=Ze)}function be(){const de=Q[Z];de!==void 0&&de.type!==void 0&&(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function Se(){try{n.compressedTexImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ne(){try{n.compressedTexImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Fe(){try{n.texSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function He(){try{n.texSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Oe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function qe(){try{n.texStorage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function lt(){try{n.texStorage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function at(){try{n.texImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ge(){try{n.texImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function We(de){ce.equals(de)===!1&&(n.scissor(de.x,de.y,de.z,de.w),ce.copy(de))}function W(de){ue.equals(de)===!1&&(n.viewport(de.x,de.y,de.z,de.w),ue.copy(de))}function pe(de,Ze){let H=f.get(Ze);H===void 0&&(H=new WeakMap,f.set(Ze,H));let ee=H.get(de);ee===void 0&&(ee=n.getUniformBlockIndex(Ze,de.name),H.set(de,ee))}function Re(de,Ze){const ee=f.get(Ze).get(de);c.get(Ze)!==ee&&(n.uniformBlockBinding(Ze,ee,de.__bindingPointIndex),c.set(Ze,ee))}function Ye(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},Z=null,Q={},h={},p=new WeakMap,v=[],y=null,m=!1,S=null,b=null,g=null,w=null,x=null,M=null,A=null,N=new mt(0,0,0),C=0,T=!1,R=null,U=null,F=null,B=null,D=null,ce.set(0,0,n.canvas.width,n.canvas.height),ue.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:xe,disable:Te,bindFramebuffer:De,drawBuffers:ie,useProgram:Ie,setBlending:ne,setMaterial:Ce,setFlipSided:se,setCullFace:j,setLineWidth:G,setPolygonOffset:fe,setScissorTest:Me,activeTexture:q,bindTexture:J,unbindTexture:be,compressedTexImage2D:Se,compressedTexImage3D:Ne,texImage2D:at,texImage3D:ge,updateUBOMapping:pe,uniformBlockBinding:Re,texStorage2D:qe,texStorage3D:lt,texSubImage2D:Fe,texSubImage3D:He,compressedTexSubImage2D:Oe,compressedTexSubImage3D:Je,scissor:We,viewport:W,reset:Ye}}function U5e(n,e,t,r,i,s,a){const o=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new WeakMap;let f;const d=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(j,G){return h?new OffscreenCanvas(j,G):S0("canvas")}function v(j,G,fe,Me){let q=1;if((j.width>Me||j.height>Me)&&(q=Me/Math.max(j.width,j.height)),q<1||G===!0)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){const J=G?qS:Math.floor,be=J(q*j.width),Se=J(q*j.height);f===void 0&&(f=p(be,Se));const Ne=fe?p(be,Se):f;return Ne.width=be,Ne.height=Se,Ne.getContext("2d").drawImage(j,0,0,be,Se),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+be+"x"+Se+")."),Ne}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j;return j}function y(j){return tD(j.width)&&tD(j.height)}function m(j){return o?!1:j.wrapS!==Zi||j.wrapT!==Zi||j.minFilter!==Ur&&j.minFilter!==or}function S(j,G){return j.generateMipmaps&&G&&j.minFilter!==Ur&&j.minFilter!==or}function b(j){n.generateMipmap(j)}function g(j,G,fe,Me,q=!1){if(o===!1)return G;if(j!==null){if(n[j]!==void 0)return n[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let J=G;if(G===n.RED&&(fe===n.FLOAT&&(J=n.R32F),fe===n.HALF_FLOAT&&(J=n.R16F),fe===n.UNSIGNED_BYTE&&(J=n.R8)),G===n.RED_INTEGER&&(fe===n.UNSIGNED_BYTE&&(J=n.R8UI),fe===n.UNSIGNED_SHORT&&(J=n.R16UI),fe===n.UNSIGNED_INT&&(J=n.R32UI),fe===n.BYTE&&(J=n.R8I),fe===n.SHORT&&(J=n.R16I),fe===n.INT&&(J=n.R32I)),G===n.RG&&(fe===n.FLOAT&&(J=n.RG32F),fe===n.HALF_FLOAT&&(J=n.RG16F),fe===n.UNSIGNED_BYTE&&(J=n.RG8)),G===n.RGBA){const be=q?v0:Bn.getTransfer(Me);fe===n.FLOAT&&(J=n.RGBA32F),fe===n.HALF_FLOAT&&(J=n.RGBA16F),fe===n.UNSIGNED_BYTE&&(J=be===er?n.SRGB8_ALPHA8:n.RGBA8),fe===n.UNSIGNED_SHORT_4_4_4_4&&(J=n.RGBA4),fe===n.UNSIGNED_SHORT_5_5_5_1&&(J=n.RGB5_A1)}return(J===n.R16F||J===n.R32F||J===n.RG16F||J===n.RG32F||J===n.RGBA16F||J===n.RGBA32F)&&e.get("EXT_color_buffer_float"),J}function w(j,G,fe){return S(j,fe)===!0||j.isFramebufferTexture&&j.minFilter!==Ur&&j.minFilter!==or?Math.log2(Math.max(G.width,G.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?G.mipmaps.length:1}function x(j){return j===Ur||j===GS||j===Uf?n.NEAREST:n.LINEAR}function M(j){const G=j.target;G.removeEventListener("dispose",M),N(G),G.isVideoTexture&&c.delete(G)}function A(j){const G=j.target;G.removeEventListener("dispose",A),T(G)}function N(j){const G=r.get(j);if(G.__webglInit===void 0)return;const fe=j.source,Me=d.get(fe);if(Me){const q=Me[G.__cacheKey];q.usedTimes--,q.usedTimes===0&&C(j),Object.keys(Me).length===0&&d.delete(fe)}r.remove(j)}function C(j){const G=r.get(j);n.deleteTexture(G.__webglTexture);const fe=j.source,Me=d.get(fe);delete Me[G.__cacheKey],a.memory.textures--}function T(j){const G=j.texture,fe=r.get(j),Me=r.get(G);if(Me.__webglTexture!==void 0&&(n.deleteTexture(Me.__webglTexture),a.memory.textures--),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let q=0;q<6;q++){if(Array.isArray(fe.__webglFramebuffer[q]))for(let J=0;J<fe.__webglFramebuffer[q].length;J++)n.deleteFramebuffer(fe.__webglFramebuffer[q][J]);else n.deleteFramebuffer(fe.__webglFramebuffer[q]);fe.__webglDepthbuffer&&n.deleteRenderbuffer(fe.__webglDepthbuffer[q])}else{if(Array.isArray(fe.__webglFramebuffer))for(let q=0;q<fe.__webglFramebuffer.length;q++)n.deleteFramebuffer(fe.__webglFramebuffer[q]);else n.deleteFramebuffer(fe.__webglFramebuffer);if(fe.__webglDepthbuffer&&n.deleteRenderbuffer(fe.__webglDepthbuffer),fe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(fe.__webglMultisampledFramebuffer),fe.__webglColorRenderbuffer)for(let q=0;q<fe.__webglColorRenderbuffer.length;q++)fe.__webglColorRenderbuffer[q]&&n.deleteRenderbuffer(fe.__webglColorRenderbuffer[q]);fe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(fe.__webglDepthRenderbuffer)}if(j.isWebGLMultipleRenderTargets)for(let q=0,J=G.length;q<J;q++){const be=r.get(G[q]);be.__webglTexture&&(n.deleteTexture(be.__webglTexture),a.memory.textures--),r.remove(G[q])}r.remove(G),r.remove(j)}let R=0;function U(){R=0}function F(){const j=R;return j>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+i.maxTextures),R+=1,j}function B(j){const G=[];return G.push(j.wrapS),G.push(j.wrapT),G.push(j.wrapR||0),G.push(j.magFilter),G.push(j.minFilter),G.push(j.anisotropy),G.push(j.internalFormat),G.push(j.format),G.push(j.type),G.push(j.generateMipmaps),G.push(j.premultiplyAlpha),G.push(j.flipY),G.push(j.unpackAlignment),G.push(j.colorSpace),G.join()}function D(j,G){const fe=r.get(j);if(j.isVideoTexture&&Ce(j),j.isRenderTargetTexture===!1&&j.version>0&&fe.__version!==j.version){const Me=j.image;if(Me===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ce(fe,j,G);return}}t.bindTexture(n.TEXTURE_2D,fe.__webglTexture,n.TEXTURE0+G)}function O(j,G){const fe=r.get(j);if(j.version>0&&fe.__version!==j.version){ce(fe,j,G);return}t.bindTexture(n.TEXTURE_2D_ARRAY,fe.__webglTexture,n.TEXTURE0+G)}function $(j,G){const fe=r.get(j);if(j.version>0&&fe.__version!==j.version){ce(fe,j,G);return}t.bindTexture(n.TEXTURE_3D,fe.__webglTexture,n.TEXTURE0+G)}function L(j,G){const fe=r.get(j);if(j.version>0&&fe.__version!==j.version){ue(fe,j,G);return}t.bindTexture(n.TEXTURE_CUBE_MAP,fe.__webglTexture,n.TEXTURE0+G)}const X={[d0]:n.REPEAT,[Zi]:n.CLAMP_TO_EDGE,[h0]:n.MIRRORED_REPEAT},Z={[Ur]:n.NEAREST,[GS]:n.NEAREST_MIPMAP_NEAREST,[Uf]:n.NEAREST_MIPMAP_LINEAR,[or]:n.LINEAR,[bv]:n.LINEAR_MIPMAP_NEAREST,[ul]:n.LINEAR_MIPMAP_LINEAR},Q={[RY]:n.NEVER,[BY]:n.ALWAYS,[OY]:n.LESS,[MR]:n.LEQUAL,[IY]:n.EQUAL,[FY]:n.GEQUAL,[kY]:n.GREATER,[LY]:n.NOTEQUAL};function K(j,G,fe){if(G.type===ha&&e.has("OES_texture_float_linear")===!1&&(G.magFilter===or||G.magFilter===bv||G.magFilter===Uf||G.magFilter===ul||G.minFilter===or||G.minFilter===bv||G.minFilter===Uf||G.minFilter===ul)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),fe?(n.texParameteri(j,n.TEXTURE_WRAP_S,X[G.wrapS]),n.texParameteri(j,n.TEXTURE_WRAP_T,X[G.wrapT]),(j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY)&&n.texParameteri(j,n.TEXTURE_WRAP_R,X[G.wrapR]),n.texParameteri(j,n.TEXTURE_MAG_FILTER,Z[G.magFilter]),n.texParameteri(j,n.TEXTURE_MIN_FILTER,Z[G.minFilter])):(n.texParameteri(j,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(j,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY)&&n.texParameteri(j,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(G.wrapS!==Zi||G.wrapT!==Zi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(j,n.TEXTURE_MAG_FILTER,x(G.magFilter)),n.texParameteri(j,n.TEXTURE_MIN_FILTER,x(G.minFilter)),G.minFilter!==Ur&&G.minFilter!==or&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),G.compareFunction&&(n.texParameteri(j,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(j,n.TEXTURE_COMPARE_FUNC,Q[G.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Me=e.get("EXT_texture_filter_anisotropic");if(G.magFilter===Ur||G.minFilter!==Uf&&G.minFilter!==ul||G.type===ha&&e.has("OES_texture_float_linear")===!1||o===!1&&G.type===Ed&&e.has("OES_texture_half_float_linear")===!1)return;(G.anisotropy>1||r.get(G).__currentAnisotropy)&&(n.texParameterf(j,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,i.getMaxAnisotropy())),r.get(G).__currentAnisotropy=G.anisotropy)}}function re(j,G){let fe=!1;j.__webglInit===void 0&&(j.__webglInit=!0,G.addEventListener("dispose",M));const Me=G.source;let q=d.get(Me);q===void 0&&(q={},d.set(Me,q));const J=B(G);if(J!==j.__cacheKey){q[J]===void 0&&(q[J]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,fe=!0),q[J].usedTimes++;const be=q[j.__cacheKey];be!==void 0&&(q[j.__cacheKey].usedTimes--,be.usedTimes===0&&C(G)),j.__cacheKey=J,j.__webglTexture=q[J].texture}return fe}function ce(j,G,fe){let Me=n.TEXTURE_2D;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(Me=n.TEXTURE_2D_ARRAY),G.isData3DTexture&&(Me=n.TEXTURE_3D);const q=re(j,G),J=G.source;t.bindTexture(Me,j.__webglTexture,n.TEXTURE0+fe);const be=r.get(J);if(J.version!==be.__version||q===!0){t.activeTexture(n.TEXTURE0+fe);const Se=Bn.getPrimaries(Bn.workingColorSpace),Ne=G.colorSpace===pa?null:Bn.getPrimaries(G.colorSpace),Fe=G.colorSpace===pa||Se===Ne?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,G.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,G.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);const He=m(G)&&y(G.image)===!1;let Oe=v(G.image,He,!1,i.maxTextureSize);Oe=se(G,Oe);const Je=y(Oe)||o,qe=s.convert(G.format,G.colorSpace);let lt=s.convert(G.type),at=g(G.internalFormat,qe,lt,G.colorSpace,G.isVideoTexture);K(Me,G,Je);let ge;const We=G.mipmaps,W=o&&G.isVideoTexture!==!0&&at!==SR,pe=be.__version===void 0||q===!0,Re=J.dataReady,Ye=w(G,Oe,Je);if(G.isDepthTexture)at=n.DEPTH_COMPONENT,o?G.type===ha?at=n.DEPTH_COMPONENT32F:G.type===su?at=n.DEPTH_COMPONENT24:G.type===Rc?at=n.DEPTH24_STENCIL8:at=n.DEPTH_COMPONENT16:G.type===ha&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),G.format===Oc&&at===n.DEPTH_COMPONENT&&G.type!==yE&&G.type!==su&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),G.type=su,lt=s.convert(G.type)),G.format===Md&&at===n.DEPTH_COMPONENT&&(at=n.DEPTH_STENCIL,G.type!==Rc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),G.type=Rc,lt=s.convert(G.type))),pe&&(W?t.texStorage2D(n.TEXTURE_2D,1,at,Oe.width,Oe.height):t.texImage2D(n.TEXTURE_2D,0,at,Oe.width,Oe.height,0,qe,lt,null));else if(G.isDataTexture)if(We.length>0&&Je){W&&pe&&t.texStorage2D(n.TEXTURE_2D,Ye,at,We[0].width,We[0].height);for(let de=0,Ze=We.length;de<Ze;de++)ge=We[de],W?Re&&t.texSubImage2D(n.TEXTURE_2D,de,0,0,ge.width,ge.height,qe,lt,ge.data):t.texImage2D(n.TEXTURE_2D,de,at,ge.width,ge.height,0,qe,lt,ge.data);G.generateMipmaps=!1}else W?(pe&&t.texStorage2D(n.TEXTURE_2D,Ye,at,Oe.width,Oe.height),Re&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Oe.width,Oe.height,qe,lt,Oe.data)):t.texImage2D(n.TEXTURE_2D,0,at,Oe.width,Oe.height,0,qe,lt,Oe.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){W&&pe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ye,at,We[0].width,We[0].height,Oe.depth);for(let de=0,Ze=We.length;de<Ze;de++)ge=We[de],G.format!==gs?qe!==null?W?Re&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,0,ge.width,ge.height,Oe.depth,qe,ge.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,de,at,ge.width,ge.height,Oe.depth,0,ge.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):W?Re&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,0,ge.width,ge.height,Oe.depth,qe,lt,ge.data):t.texImage3D(n.TEXTURE_2D_ARRAY,de,at,ge.width,ge.height,Oe.depth,0,qe,lt,ge.data)}else{W&&pe&&t.texStorage2D(n.TEXTURE_2D,Ye,at,We[0].width,We[0].height);for(let de=0,Ze=We.length;de<Ze;de++)ge=We[de],G.format!==gs?qe!==null?W?Re&&t.compressedTexSubImage2D(n.TEXTURE_2D,de,0,0,ge.width,ge.height,qe,ge.data):t.compressedTexImage2D(n.TEXTURE_2D,de,at,ge.width,ge.height,0,ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):W?Re&&t.texSubImage2D(n.TEXTURE_2D,de,0,0,ge.width,ge.height,qe,lt,ge.data):t.texImage2D(n.TEXTURE_2D,de,at,ge.width,ge.height,0,qe,lt,ge.data)}else if(G.isDataArrayTexture)W?(pe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ye,at,Oe.width,Oe.height,Oe.depth),Re&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,qe,lt,Oe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,at,Oe.width,Oe.height,Oe.depth,0,qe,lt,Oe.data);else if(G.isData3DTexture)W?(pe&&t.texStorage3D(n.TEXTURE_3D,Ye,at,Oe.width,Oe.height,Oe.depth),Re&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,qe,lt,Oe.data)):t.texImage3D(n.TEXTURE_3D,0,at,Oe.width,Oe.height,Oe.depth,0,qe,lt,Oe.data);else if(G.isFramebufferTexture){if(pe)if(W)t.texStorage2D(n.TEXTURE_2D,Ye,at,Oe.width,Oe.height);else{let de=Oe.width,Ze=Oe.height;for(let H=0;H<Ye;H++)t.texImage2D(n.TEXTURE_2D,H,at,de,Ze,0,qe,lt,null),de>>=1,Ze>>=1}}else if(We.length>0&&Je){W&&pe&&t.texStorage2D(n.TEXTURE_2D,Ye,at,We[0].width,We[0].height);for(let de=0,Ze=We.length;de<Ze;de++)ge=We[de],W?Re&&t.texSubImage2D(n.TEXTURE_2D,de,0,0,qe,lt,ge):t.texImage2D(n.TEXTURE_2D,de,at,qe,lt,ge);G.generateMipmaps=!1}else W?(pe&&t.texStorage2D(n.TEXTURE_2D,Ye,at,Oe.width,Oe.height),Re&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,qe,lt,Oe)):t.texImage2D(n.TEXTURE_2D,0,at,qe,lt,Oe);S(G,Je)&&b(Me),be.__version=J.version,G.onUpdate&&G.onUpdate(G)}j.__version=G.version}function ue(j,G,fe){if(G.image.length!==6)return;const Me=re(j,G),q=G.source;t.bindTexture(n.TEXTURE_CUBE_MAP,j.__webglTexture,n.TEXTURE0+fe);const J=r.get(q);if(q.version!==J.__version||Me===!0){t.activeTexture(n.TEXTURE0+fe);const be=Bn.getPrimaries(Bn.workingColorSpace),Se=G.colorSpace===pa?null:Bn.getPrimaries(G.colorSpace),Ne=G.colorSpace===pa||be===Se?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,G.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,G.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ne);const Fe=G.isCompressedTexture||G.image[0].isCompressedTexture,He=G.image[0]&&G.image[0].isDataTexture,Oe=[];for(let de=0;de<6;de++)!Fe&&!He?Oe[de]=v(G.image[de],!1,!0,i.maxCubemapSize):Oe[de]=He?G.image[de].image:G.image[de],Oe[de]=se(G,Oe[de]);const Je=Oe[0],qe=y(Je)||o,lt=s.convert(G.format,G.colorSpace),at=s.convert(G.type),ge=g(G.internalFormat,lt,at,G.colorSpace),We=o&&G.isVideoTexture!==!0,W=J.__version===void 0||Me===!0,pe=q.dataReady;let Re=w(G,Je,qe);K(n.TEXTURE_CUBE_MAP,G,qe);let Ye;if(Fe){We&&W&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Re,ge,Je.width,Je.height);for(let de=0;de<6;de++){Ye=Oe[de].mipmaps;for(let Ze=0;Ze<Ye.length;Ze++){const H=Ye[Ze];G.format!==gs?lt!==null?We?pe&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ze,0,0,H.width,H.height,lt,H.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ze,ge,H.width,H.height,0,H.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):We?pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ze,0,0,H.width,H.height,lt,at,H.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ze,ge,H.width,H.height,0,lt,at,H.data)}}}else{Ye=G.mipmaps,We&&W&&(Ye.length>0&&Re++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Re,ge,Oe[0].width,Oe[0].height));for(let de=0;de<6;de++)if(He){We?pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,0,0,Oe[de].width,Oe[de].height,lt,at,Oe[de].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,ge,Oe[de].width,Oe[de].height,0,lt,at,Oe[de].data);for(let Ze=0;Ze<Ye.length;Ze++){const ee=Ye[Ze].image[de].image;We?pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ze+1,0,0,ee.width,ee.height,lt,at,ee.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ze+1,ge,ee.width,ee.height,0,lt,at,ee.data)}}else{We?pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,0,0,lt,at,Oe[de]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,ge,lt,at,Oe[de]);for(let Ze=0;Ze<Ye.length;Ze++){const H=Ye[Ze];We?pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ze+1,0,0,lt,at,H.image[de]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ze+1,ge,lt,at,H.image[de])}}}S(G,qe)&&b(n.TEXTURE_CUBE_MAP),J.__version=q.version,G.onUpdate&&G.onUpdate(G)}j.__version=G.version}function me(j,G,fe,Me,q,J){const be=s.convert(fe.format,fe.colorSpace),Se=s.convert(fe.type),Ne=g(fe.internalFormat,be,Se,fe.colorSpace);if(!r.get(G).__hasExternalTextures){const He=Math.max(1,G.width>>J),Oe=Math.max(1,G.height>>J);q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY?t.texImage3D(q,J,Ne,He,Oe,G.depth,0,be,Se,null):t.texImage2D(q,J,Ne,He,Oe,0,be,Se,null)}t.bindFramebuffer(n.FRAMEBUFFER,j),ne(G)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Me,q,r.get(fe).__webglTexture,0,te(G)):(q===n.TEXTURE_2D||q>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&q<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Me,q,r.get(fe).__webglTexture,J),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ee(j,G,fe){if(n.bindRenderbuffer(n.RENDERBUFFER,j),G.depthBuffer&&!G.stencilBuffer){let Me=o===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(fe||ne(G)){const q=G.depthTexture;q&&q.isDepthTexture&&(q.type===ha?Me=n.DEPTH_COMPONENT32F:q.type===su&&(Me=n.DEPTH_COMPONENT24));const J=te(G);ne(G)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,J,Me,G.width,G.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,J,Me,G.width,G.height)}else n.renderbufferStorage(n.RENDERBUFFER,Me,G.width,G.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,j)}else if(G.depthBuffer&&G.stencilBuffer){const Me=te(G);fe&&ne(G)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Me,n.DEPTH24_STENCIL8,G.width,G.height):ne(G)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Me,n.DEPTH24_STENCIL8,G.width,G.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,j)}else{const Me=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let q=0;q<Me.length;q++){const J=Me[q],be=s.convert(J.format,J.colorSpace),Se=s.convert(J.type),Ne=g(J.internalFormat,be,Se,J.colorSpace),Fe=te(G);fe&&ne(G)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Fe,Ne,G.width,G.height):ne(G)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Fe,Ne,G.width,G.height):n.renderbufferStorage(n.RENDERBUFFER,Ne,G.width,G.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function xe(j,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,j),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(G.depthTexture).__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),D(G.depthTexture,0);const Me=r.get(G.depthTexture).__webglTexture,q=te(G);if(G.depthTexture.format===Oc)ne(G)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Me,0,q):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Me,0);else if(G.depthTexture.format===Md)ne(G)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Me,0,q):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Me,0);else throw new Error("Unknown depthTexture format")}function Te(j){const G=r.get(j),fe=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!G.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");xe(G.__webglFramebuffer,j)}else if(fe){G.__webglDepthbuffer=[];for(let Me=0;Me<6;Me++)t.bindFramebuffer(n.FRAMEBUFFER,G.__webglFramebuffer[Me]),G.__webglDepthbuffer[Me]=n.createRenderbuffer(),Ee(G.__webglDepthbuffer[Me],j,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,G.__webglFramebuffer),G.__webglDepthbuffer=n.createRenderbuffer(),Ee(G.__webglDepthbuffer,j,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function De(j,G,fe){const Me=r.get(j);G!==void 0&&me(Me.__webglFramebuffer,j,j.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),fe!==void 0&&Te(j)}function ie(j){const G=j.texture,fe=r.get(j),Me=r.get(G);j.addEventListener("dispose",A),j.isWebGLMultipleRenderTargets!==!0&&(Me.__webglTexture===void 0&&(Me.__webglTexture=n.createTexture()),Me.__version=G.version,a.memory.textures++);const q=j.isWebGLCubeRenderTarget===!0,J=j.isWebGLMultipleRenderTargets===!0,be=y(j)||o;if(q){fe.__webglFramebuffer=[];for(let Se=0;Se<6;Se++)if(o&&G.mipmaps&&G.mipmaps.length>0){fe.__webglFramebuffer[Se]=[];for(let Ne=0;Ne<G.mipmaps.length;Ne++)fe.__webglFramebuffer[Se][Ne]=n.createFramebuffer()}else fe.__webglFramebuffer[Se]=n.createFramebuffer()}else{if(o&&G.mipmaps&&G.mipmaps.length>0){fe.__webglFramebuffer=[];for(let Se=0;Se<G.mipmaps.length;Se++)fe.__webglFramebuffer[Se]=n.createFramebuffer()}else fe.__webglFramebuffer=n.createFramebuffer();if(J)if(i.drawBuffers){const Se=j.texture;for(let Ne=0,Fe=Se.length;Ne<Fe;Ne++){const He=r.get(Se[Ne]);He.__webglTexture===void 0&&(He.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&j.samples>0&&ne(j)===!1){const Se=J?G:[G];fe.__webglMultisampledFramebuffer=n.createFramebuffer(),fe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,fe.__webglMultisampledFramebuffer);for(let Ne=0;Ne<Se.length;Ne++){const Fe=Se[Ne];fe.__webglColorRenderbuffer[Ne]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,fe.__webglColorRenderbuffer[Ne]);const He=s.convert(Fe.format,Fe.colorSpace),Oe=s.convert(Fe.type),Je=g(Fe.internalFormat,He,Oe,Fe.colorSpace,j.isXRRenderTarget===!0),qe=te(j);n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,Je,j.width,j.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ne,n.RENDERBUFFER,fe.__webglColorRenderbuffer[Ne])}n.bindRenderbuffer(n.RENDERBUFFER,null),j.depthBuffer&&(fe.__webglDepthRenderbuffer=n.createRenderbuffer(),Ee(fe.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(q){t.bindTexture(n.TEXTURE_CUBE_MAP,Me.__webglTexture),K(n.TEXTURE_CUBE_MAP,G,be);for(let Se=0;Se<6;Se++)if(o&&G.mipmaps&&G.mipmaps.length>0)for(let Ne=0;Ne<G.mipmaps.length;Ne++)me(fe.__webglFramebuffer[Se][Ne],j,G,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,Ne);else me(fe.__webglFramebuffer[Se],j,G,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0);S(G,be)&&b(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(J){const Se=j.texture;for(let Ne=0,Fe=Se.length;Ne<Fe;Ne++){const He=Se[Ne],Oe=r.get(He);t.bindTexture(n.TEXTURE_2D,Oe.__webglTexture),K(n.TEXTURE_2D,He,be),me(fe.__webglFramebuffer,j,He,n.COLOR_ATTACHMENT0+Ne,n.TEXTURE_2D,0),S(He,be)&&b(n.TEXTURE_2D)}t.unbindTexture()}else{let Se=n.TEXTURE_2D;if((j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(o?Se=j.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Se,Me.__webglTexture),K(Se,G,be),o&&G.mipmaps&&G.mipmaps.length>0)for(let Ne=0;Ne<G.mipmaps.length;Ne++)me(fe.__webglFramebuffer[Ne],j,G,n.COLOR_ATTACHMENT0,Se,Ne);else me(fe.__webglFramebuffer,j,G,n.COLOR_ATTACHMENT0,Se,0);S(G,be)&&b(Se),t.unbindTexture()}j.depthBuffer&&Te(j)}function Ie(j){const G=y(j)||o,fe=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let Me=0,q=fe.length;Me<q;Me++){const J=fe[Me];if(S(J,G)){const be=j.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Se=r.get(J).__webglTexture;t.bindTexture(be,Se),b(be),t.unbindTexture()}}}function ke(j){if(o&&j.samples>0&&ne(j)===!1){const G=j.isWebGLMultipleRenderTargets?j.texture:[j.texture],fe=j.width,Me=j.height;let q=n.COLOR_BUFFER_BIT;const J=[],be=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Se=r.get(j),Ne=j.isWebGLMultipleRenderTargets===!0;if(Ne)for(let Fe=0;Fe<G.length;Fe++)t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Se.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Se.__webglFramebuffer);for(let Fe=0;Fe<G.length;Fe++){J.push(n.COLOR_ATTACHMENT0+Fe),j.depthBuffer&&J.push(be);const He=Se.__ignoreDepthValues!==void 0?Se.__ignoreDepthValues:!1;if(He===!1&&(j.depthBuffer&&(q|=n.DEPTH_BUFFER_BIT),j.stencilBuffer&&(q|=n.STENCIL_BUFFER_BIT)),Ne&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Se.__webglColorRenderbuffer[Fe]),He===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[be]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[be])),Ne){const Oe=r.get(G[Fe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Oe,0)}n.blitFramebuffer(0,0,fe,Me,0,0,fe,Me,q,n.NEAREST),u&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,J)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ne)for(let Fe=0;Fe<G.length;Fe++){t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,Se.__webglColorRenderbuffer[Fe]);const He=r.get(G[Fe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,He,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Se.__webglMultisampledFramebuffer)}}function te(j){return Math.min(i.maxSamples,j.samples)}function ne(j){const G=r.get(j);return o&&j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function Ce(j){const G=a.render.frame;c.get(j)!==G&&(c.set(j,G),j.update())}function se(j,G){const fe=j.colorSpace,Me=j.format,q=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||j.format===jS||fe!==Cl&&fe!==pa&&(Bn.getTransfer(fe)===er?o===!1?e.has("EXT_sRGB")===!0&&Me===gs?(j.format=jS,j.minFilter=or,j.generateMipmaps=!1):G=AR.sRGBToLinear(G):(Me!==gs||q!==yl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",fe)),G}this.allocateTextureUnit=F,this.resetTextureUnits=U,this.setTexture2D=D,this.setTexture2DArray=O,this.setTexture3D=$,this.setTextureCube=L,this.rebindTextures=De,this.setupRenderTarget=ie,this.updateRenderTargetMipmap=Ie,this.updateMultisampleRenderTarget=ke,this.setupDepthRenderbuffer=Te,this.setupFrameBufferTexture=me,this.useMultisampledRTT=ne}function QY(n,e,t){const r=t.isWebGL2;function i(s,a=pa){let o;const l=Bn.getTransfer(a);if(s===yl)return n.UNSIGNED_BYTE;if(s===vR)return n.UNSIGNED_SHORT_4_4_4_4;if(s===yR)return n.UNSIGNED_SHORT_5_5_5_1;if(s===yY)return n.BYTE;if(s===xY)return n.SHORT;if(s===yE)return n.UNSIGNED_SHORT;if(s===gR)return n.INT;if(s===su)return n.UNSIGNED_INT;if(s===ha)return n.FLOAT;if(s===Ed)return r?n.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===bY)return n.ALPHA;if(s===gs)return n.RGBA;if(s===wY)return n.LUMINANCE;if(s===SY)return n.LUMINANCE_ALPHA;if(s===Oc)return n.DEPTH_COMPONENT;if(s===Md)return n.DEPTH_STENCIL;if(s===jS)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===_Y)return n.RED;if(s===xR)return n.RED_INTEGER;if(s===EY)return n.RG;if(s===bR)return n.RG_INTEGER;if(s===wR)return n.RGBA_INTEGER;if(s===ow||s===lw||s===uw||s===cw)if(l===er)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===ow)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===lw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===uw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===cw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===ow)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===lw)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===uw)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===cw)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===T3||s===D3||s===N3||s===P3)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===T3)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===D3)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===N3)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===P3)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===SR)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===R3||s===O3)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===R3)return l===er?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===O3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===I3||s===k3||s===L3||s===F3||s===B3||s===z3||s===U3||s===$3||s===V3||s===H3||s===W3||s===G3||s===j3||s===q3)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===I3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===k3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===L3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===F3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===B3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===z3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===U3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===$3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===V3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===H3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===W3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===G3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===j3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===q3)return l===er?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===fw||s===X3||s===Y3)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===fw)return l===er?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===X3)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Y3)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===MY||s===K3||s===Z3||s===J3)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(s===fw)return o.COMPRESSED_RED_RGTC1_EXT;if(s===K3)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Z3)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===J3)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Rc?r?n.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class eK extends Rr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class hp extends En{constructor(){super(),this.isGroup=!0,this.type="Group"}}const $5e={type:"move"};class OC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new hp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new hp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ve,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ve),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new hp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ve,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ve),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const v of e.hand.values()){const y=t.getJointPose(v,r),m=this._getHandJoint(u,v);y!==null&&(m.matrix.fromArray(y.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=y.radius),m.visible=y!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],d=c.position.distanceTo(f.position),h=.02,p=.005;u.inputState.pinching&&d>h+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=h-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent($5e)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new hp;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const V5e=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,H5e=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class W5e{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Sr,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}render(e,t){if(this.texture!==null){if(this.mesh===null){const r=t.cameras[0].viewport,i=new Ea({extensions:{fragDepth:!0},vertexShader:V5e,fragmentShader:H5e,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Xr(new Fm(20,20),i)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class G5e extends Dl{constructor(e,t){super();const r=this;let i=null,s=1,a=null,o="local-floor",l=1,u=null,c=null,f=null,d=null,h=null,p=null;const v=new W5e,y=t.getContextAttributes();let m=null,S=null;const b=[],g=[],w=new et;let x=null;const M=new Rr;M.layers.enable(1),M.viewport=new Un;const A=new Rr;A.layers.enable(2),A.viewport=new Un;const N=[M,A],C=new eK;C.layers.enable(1),C.layers.enable(2);let T=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let ce=b[re];return ce===void 0&&(ce=new OC,b[re]=ce),ce.getTargetRaySpace()},this.getControllerGrip=function(re){let ce=b[re];return ce===void 0&&(ce=new OC,b[re]=ce),ce.getGripSpace()},this.getHand=function(re){let ce=b[re];return ce===void 0&&(ce=new OC,b[re]=ce),ce.getHandSpace()};function U(re){const ce=g.indexOf(re.inputSource);if(ce===-1)return;const ue=b[ce];ue!==void 0&&(ue.update(re.inputSource,re.frame,u||a),ue.dispatchEvent({type:re.type,data:re.inputSource}))}function F(){i.removeEventListener("select",U),i.removeEventListener("selectstart",U),i.removeEventListener("selectend",U),i.removeEventListener("squeeze",U),i.removeEventListener("squeezestart",U),i.removeEventListener("squeezeend",U),i.removeEventListener("end",F),i.removeEventListener("inputsourceschange",B);for(let re=0;re<b.length;re++){const ce=g[re];ce!==null&&(g[re]=null,b[re].disconnect(ce))}T=null,R=null,v.reset(),e.setRenderTarget(m),h=null,d=null,f=null,i=null,S=null,K.stop(),r.isPresenting=!1,e.setPixelRatio(x),e.setSize(w.width,w.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){s=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){o=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(re){u=re},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return f},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(re){if(i=re,i!==null){if(m=e.getRenderTarget(),i.addEventListener("select",U),i.addEventListener("selectstart",U),i.addEventListener("selectend",U),i.addEventListener("squeeze",U),i.addEventListener("squeezestart",U),i.addEventListener("squeezeend",U),i.addEventListener("end",F),i.addEventListener("inputsourceschange",B),y.xrCompatible!==!0&&await t.makeXRCompatible(),x=e.getPixelRatio(),e.getSize(w),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ce={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(i,t,ce),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),S=new no(h.framebufferWidth,h.framebufferHeight,{format:gs,type:yl,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let ce=null,ue=null,me=null;y.depth&&(me=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ce=y.stencil?Md:Oc,ue=y.stencil?Rc:su);const Ee={colorFormat:t.RGBA8,depthFormat:me,scaleFactor:s};f=new XRWebGLBinding(i,t),d=f.createProjectionLayer(Ee),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),S=new no(d.textureWidth,d.textureHeight,{format:gs,type:yl,depthTexture:new SE(d.textureWidth,d.textureHeight,ue,void 0,void 0,void 0,void 0,void 0,void 0,ce),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const xe=e.properties.get(S);xe.__ignoreDepthValues=d.ignoreDepthValues}S.isXRRenderTarget=!0,this.setFoveation(l),u=null,a=await i.requestReferenceSpace(o),K.setContext(i),K.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function B(re){for(let ce=0;ce<re.removed.length;ce++){const ue=re.removed[ce],me=g.indexOf(ue);me>=0&&(g[me]=null,b[me].disconnect(ue))}for(let ce=0;ce<re.added.length;ce++){const ue=re.added[ce];let me=g.indexOf(ue);if(me===-1){for(let xe=0;xe<b.length;xe++)if(xe>=g.length){g.push(ue),me=xe;break}else if(g[xe]===null){g[xe]=ue,me=xe;break}if(me===-1)break}const Ee=b[me];Ee&&Ee.connect(ue)}}const D=new ve,O=new ve;function $(re,ce,ue){D.setFromMatrixPosition(ce.matrixWorld),O.setFromMatrixPosition(ue.matrixWorld);const me=D.distanceTo(O),Ee=ce.projectionMatrix.elements,xe=ue.projectionMatrix.elements,Te=Ee[14]/(Ee[10]-1),De=Ee[14]/(Ee[10]+1),ie=(Ee[9]+1)/Ee[5],Ie=(Ee[9]-1)/Ee[5],ke=(Ee[8]-1)/Ee[0],te=(xe[8]+1)/xe[0],ne=Te*ke,Ce=Te*te,se=me/(-ke+te),j=se*-ke;ce.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(j),re.translateZ(se),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert();const G=Te+se,fe=De+se,Me=ne-j,q=Ce+(me-j),J=ie*De/fe*G,be=Ie*De/fe*G;re.projectionMatrix.makePerspective(Me,q,J,be,G,fe),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}function L(re,ce){ce===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(ce.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(i===null)return;v.texture!==null&&(re.near=v.depthNear,re.far=v.depthFar),C.near=A.near=M.near=re.near,C.far=A.far=M.far=re.far,(T!==C.near||R!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),T=C.near,R=C.far,M.near=T,M.far=R,A.near=T,A.far=R,M.updateProjectionMatrix(),A.updateProjectionMatrix(),re.updateProjectionMatrix());const ce=re.parent,ue=C.cameras;L(C,ce);for(let me=0;me<ue.length;me++)L(ue[me],ce);ue.length===2?$(C,M,A):C.projectionMatrix.copy(M.projectionMatrix),X(re,C,ce)};function X(re,ce,ue){ue===null?re.matrix.copy(ce.matrixWorld):(re.matrix.copy(ue.matrixWorld),re.matrix.invert(),re.matrix.multiply(ce.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0),re.projectionMatrix.copy(ce.projectionMatrix),re.projectionMatrixInverse.copy(ce.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=tm*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(d===null&&h===null))return l},this.setFoveation=function(re){l=re,d!==null&&(d.fixedFoveation=re),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=re)},this.hasDepthSensing=function(){return v.texture!==null};let Z=null;function Q(re,ce){if(c=ce.getViewerPose(u||a),p=ce,c!==null){const ue=c.views;h!==null&&(e.setRenderTargetFramebuffer(S,h.framebuffer),e.setRenderTarget(S));let me=!1;ue.length!==C.cameras.length&&(C.cameras.length=0,me=!0);for(let xe=0;xe<ue.length;xe++){const Te=ue[xe];let De=null;if(h!==null)De=h.getViewport(Te);else{const Ie=f.getViewSubImage(d,Te);De=Ie.viewport,xe===0&&(e.setRenderTargetTextures(S,Ie.colorTexture,d.ignoreDepthValues?void 0:Ie.depthStencilTexture),e.setRenderTarget(S))}let ie=N[xe];ie===void 0&&(ie=new Rr,ie.layers.enable(xe),ie.viewport=new Un,N[xe]=ie),ie.matrix.fromArray(Te.transform.matrix),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.projectionMatrix.fromArray(Te.projectionMatrix),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert(),ie.viewport.set(De.x,De.y,De.width,De.height),xe===0&&(C.matrix.copy(ie.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),me===!0&&C.cameras.push(ie)}const Ee=i.enabledFeatures;if(Ee&&Ee.includes("depth-sensing")){const xe=f.getDepthInformation(ue[0]);xe&&xe.isValid&&xe.texture&&v.init(e,xe,i.renderState)}}for(let ue=0;ue<b.length;ue++){const me=g[ue],Ee=b[ue];me!==null&&Ee!==void 0&&Ee.update(me,ce,u||a)}v.render(e,C),Z&&Z(re,ce),ce.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ce}),p=null}const K=new qY;K.setAnimationLoop(Q),this.setAnimationLoop=function(re){Z=re},this.dispose=function(){}}}function j5e(n,e){function t(y,m){y.matrixAutoUpdate===!0&&y.updateMatrix(),m.value.copy(y.matrix)}function r(y,m){m.color.getRGB(y.fogColor.value,WY(n)),m.isFog?(y.fogNear.value=m.near,y.fogFar.value=m.far):m.isFogExp2&&(y.fogDensity.value=m.density)}function i(y,m,S,b,g){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(y,m):m.isMeshToonMaterial?(s(y,m),f(y,m)):m.isMeshPhongMaterial?(s(y,m),c(y,m)):m.isMeshStandardMaterial?(s(y,m),d(y,m),m.isMeshPhysicalMaterial&&h(y,m,g)):m.isMeshMatcapMaterial?(s(y,m),p(y,m)):m.isMeshDepthMaterial?s(y,m):m.isMeshDistanceMaterial?(s(y,m),v(y,m)):m.isMeshNormalMaterial?s(y,m):m.isLineBasicMaterial?(a(y,m),m.isLineDashedMaterial&&o(y,m)):m.isPointsMaterial?l(y,m,S,b):m.isSpriteMaterial?u(y,m):m.isShadowMaterial?(y.color.value.copy(m.color),y.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(y,m){y.opacity.value=m.opacity,m.color&&y.diffuse.value.copy(m.color),m.emissive&&y.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(y.map.value=m.map,t(m.map,y.mapTransform)),m.alphaMap&&(y.alphaMap.value=m.alphaMap,t(m.alphaMap,y.alphaMapTransform)),m.bumpMap&&(y.bumpMap.value=m.bumpMap,t(m.bumpMap,y.bumpMapTransform),y.bumpScale.value=m.bumpScale,m.side===Ss&&(y.bumpScale.value*=-1)),m.normalMap&&(y.normalMap.value=m.normalMap,t(m.normalMap,y.normalMapTransform),y.normalScale.value.copy(m.normalScale),m.side===Ss&&y.normalScale.value.negate()),m.displacementMap&&(y.displacementMap.value=m.displacementMap,t(m.displacementMap,y.displacementMapTransform),y.displacementScale.value=m.displacementScale,y.displacementBias.value=m.displacementBias),m.emissiveMap&&(y.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,y.emissiveMapTransform)),m.specularMap&&(y.specularMap.value=m.specularMap,t(m.specularMap,y.specularMapTransform)),m.alphaTest>0&&(y.alphaTest.value=m.alphaTest);const S=e.get(m).envMap;if(S&&(y.envMap.value=S,y.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=m.reflectivity,y.ior.value=m.ior,y.refractionRatio.value=m.refractionRatio),m.lightMap){y.lightMap.value=m.lightMap;const b=n._useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=m.lightMapIntensity*b,t(m.lightMap,y.lightMapTransform)}m.aoMap&&(y.aoMap.value=m.aoMap,y.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,y.aoMapTransform))}function a(y,m){y.diffuse.value.copy(m.color),y.opacity.value=m.opacity,m.map&&(y.map.value=m.map,t(m.map,y.mapTransform))}function o(y,m){y.dashSize.value=m.dashSize,y.totalSize.value=m.dashSize+m.gapSize,y.scale.value=m.scale}function l(y,m,S,b){y.diffuse.value.copy(m.color),y.opacity.value=m.opacity,y.size.value=m.size*S,y.scale.value=b*.5,m.map&&(y.map.value=m.map,t(m.map,y.uvTransform)),m.alphaMap&&(y.alphaMap.value=m.alphaMap,t(m.alphaMap,y.alphaMapTransform)),m.alphaTest>0&&(y.alphaTest.value=m.alphaTest)}function u(y,m){y.diffuse.value.copy(m.color),y.opacity.value=m.opacity,y.rotation.value=m.rotation,m.map&&(y.map.value=m.map,t(m.map,y.mapTransform)),m.alphaMap&&(y.alphaMap.value=m.alphaMap,t(m.alphaMap,y.alphaMapTransform)),m.alphaTest>0&&(y.alphaTest.value=m.alphaTest)}function c(y,m){y.specular.value.copy(m.specular),y.shininess.value=Math.max(m.shininess,1e-4)}function f(y,m){m.gradientMap&&(y.gradientMap.value=m.gradientMap)}function d(y,m){y.metalness.value=m.metalness,m.metalnessMap&&(y.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,y.metalnessMapTransform)),y.roughness.value=m.roughness,m.roughnessMap&&(y.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,y.roughnessMapTransform)),e.get(m).envMap&&(y.envMapIntensity.value=m.envMapIntensity)}function h(y,m,S){y.ior.value=m.ior,m.sheen>0&&(y.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),y.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(y.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,y.sheenColorMapTransform)),m.sheenRoughnessMap&&(y.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,y.sheenRoughnessMapTransform))),m.clearcoat>0&&(y.clearcoat.value=m.clearcoat,y.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(y.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,y.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(y.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===Ss&&y.clearcoatNormalScale.value.negate())),m.iridescence>0&&(y.iridescence.value=m.iridescence,y.iridescenceIOR.value=m.iridescenceIOR,y.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(y.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,y.iridescenceMapTransform)),m.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),m.transmission>0&&(y.transmission.value=m.transmission,y.transmissionSamplerMap.value=S.texture,y.transmissionSamplerSize.value.set(S.width,S.height),m.transmissionMap&&(y.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,y.transmissionMapTransform)),y.thickness.value=m.thickness,m.thicknessMap&&(y.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=m.attenuationDistance,y.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(y.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(y.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=m.specularIntensity,y.specularColor.value.copy(m.specularColor),m.specularColorMap&&(y.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,y.specularColorMapTransform)),m.specularIntensityMap&&(y.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,y.specularIntensityMapTransform))}function p(y,m){m.matcap&&(y.matcap.value=m.matcap)}function v(y,m){const S=e.get(m).light;y.referencePosition.value.setFromMatrixPosition(S.matrixWorld),y.nearDistance.value=S.shadow.camera.near,y.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function q5e(n,e,t,r){let i={},s={},a=[];const o=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(S,b){const g=b.program;r.uniformBlockBinding(S,g)}function u(S,b){let g=i[S.id];g===void 0&&(p(S),g=c(S),i[S.id]=g,S.addEventListener("dispose",y));const w=b.program;r.updateUBOMapping(S,w);const x=e.render.frame;s[S.id]!==x&&(d(S),s[S.id]=x)}function c(S){const b=f();S.__bindingPointIndex=b;const g=n.createBuffer(),w=S.__size,x=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,g),n.bufferData(n.UNIFORM_BUFFER,w,x),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,g),g}function f(){for(let S=0;S<o;S++)if(a.indexOf(S)===-1)return a.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(S){const b=i[S.id],g=S.uniforms,w=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let x=0,M=g.length;x<M;x++){const A=Array.isArray(g[x])?g[x]:[g[x]];for(let N=0,C=A.length;N<C;N++){const T=A[N];if(h(T,x,N,w)===!0){const R=T.__offset,U=Array.isArray(T.value)?T.value:[T.value];let F=0;for(let B=0;B<U.length;B++){const D=U[B],O=v(D);typeof D=="number"||typeof D=="boolean"?(T.__data[0]=D,n.bufferSubData(n.UNIFORM_BUFFER,R+F,T.__data)):D.isMatrix3?(T.__data[0]=D.elements[0],T.__data[1]=D.elements[1],T.__data[2]=D.elements[2],T.__data[3]=0,T.__data[4]=D.elements[3],T.__data[5]=D.elements[4],T.__data[6]=D.elements[5],T.__data[7]=0,T.__data[8]=D.elements[6],T.__data[9]=D.elements[7],T.__data[10]=D.elements[8],T.__data[11]=0):(D.toArray(T.__data,F),F+=O.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,R,T.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function h(S,b,g,w){const x=S.value,M=b+"_"+g;if(w[M]===void 0)return typeof x=="number"||typeof x=="boolean"?w[M]=x:w[M]=x.clone(),!0;{const A=w[M];if(typeof x=="number"||typeof x=="boolean"){if(A!==x)return w[M]=x,!0}else if(A.equals(x)===!1)return A.copy(x),!0}return!1}function p(S){const b=S.uniforms;let g=0;const w=16;for(let M=0,A=b.length;M<A;M++){const N=Array.isArray(b[M])?b[M]:[b[M]];for(let C=0,T=N.length;C<T;C++){const R=N[C],U=Array.isArray(R.value)?R.value:[R.value];for(let F=0,B=U.length;F<B;F++){const D=U[F],O=v(D),$=g%w;$!==0&&w-$<O.boundary&&(g+=w-$),R.__data=new Float32Array(O.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=g,g+=O.storage}}}const x=g%w;return x>0&&(g+=w-x),S.__size=g,S.__cache={},this}function v(S){const b={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(b.boundary=4,b.storage=4):S.isVector2?(b.boundary=8,b.storage=8):S.isVector3||S.isColor?(b.boundary=16,b.storage=12):S.isVector4?(b.boundary=16,b.storage=16):S.isMatrix3?(b.boundary=48,b.storage=48):S.isMatrix4?(b.boundary=64,b.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),b}function y(S){const b=S.target;b.removeEventListener("dispose",y);const g=a.indexOf(b.__bindingPointIndex);a.splice(g,1),n.deleteBuffer(i[b.id]),delete i[b.id],delete s[b.id]}function m(){for(const S in i)n.deleteBuffer(i[S]);a=[],i={},s={}}return{bind:l,update:u,dispose:m}}class kR{constructor(e={}){const{canvas:t=$Y(),context:r=null,depth:i=!0,stencil:s=!0,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let d;r!==null?d=r.getContextAttributes().alpha:d=a;const h=new Uint32Array(4),p=new Int32Array(4);let v=null,y=null;const m=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ti,this._useLegacyLights=!1,this.toneMapping=vl,this.toneMappingExposure=1;const b=this;let g=!1,w=0,x=0,M=null,A=-1,N=null;const C=new Un,T=new Un;let R=null;const U=new mt(0);let F=0,B=t.width,D=t.height,O=1,$=null,L=null;const X=new Un(0,0,B,D),Z=new Un(0,0,B,D);let Q=!1;const K=new by;let re=!1,ce=!1,ue=null;const me=new Kt,Ee=new et,xe=new ve,Te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function De(){return M===null?O:1}let ie=r;function Ie(he,Le){for(let Ue=0;Ue<he.length;Ue++){const Ve=he[Ue],Ge=t.getContext(Ve,Le);if(Ge!==null)return Ge}return null}try{const he={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${mE}`),t.addEventListener("webglcontextlost",Ye,!1),t.addEventListener("webglcontextrestored",de,!1),t.addEventListener("webglcontextcreationerror",Ze,!1),ie===null){const Le=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&Le.shift(),ie=Ie(Le,he),ie===null)throw Ie(Le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ie instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ie.getShaderPrecisionFormat===void 0&&(ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(he){throw console.error("THREE.WebGLRenderer: "+he.message),he}let ke,te,ne,Ce,se,j,G,fe,Me,q,J,be,Se,Ne,Fe,He,Oe,Je,qe,lt,at,ge,We,W;function pe(){ke=new iBe(ie),te=new J4e(ie,ke,e),ke.init(te),ge=new QY(ie,ke,te),ne=new z5e(ie,ke,te),Ce=new oBe(ie),se=new A5e,j=new U5e(ie,ke,ne,se,te,ge,Ce),G=new eBe(b),fe=new rBe(b),Me=new mFe(ie,te),We=new K4e(ie,ke,Me,te),q=new sBe(ie,Me,Ce,We),J=new fBe(ie,q,Me,Ce),qe=new cBe(ie,te,j),He=new Q4e(se),be=new C5e(b,G,fe,ke,te,We,He),Se=new j5e(b,se),Ne=new D5e,Fe=new k5e(ke,te),Je=new Y4e(b,G,fe,ne,J,d,l),Oe=new B5e(b,J,te),W=new q5e(ie,Ce,te,ne),lt=new Z4e(ie,ke,Ce,te),at=new aBe(ie,ke,Ce,te),Ce.programs=be.programs,b.capabilities=te,b.extensions=ke,b.properties=se,b.renderLists=Ne,b.shadowMap=Oe,b.state=ne,b.info=Ce}pe();const Re=new G5e(b,ie);this.xr=Re,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const he=ke.get("WEBGL_lose_context");he&&he.loseContext()},this.forceContextRestore=function(){const he=ke.get("WEBGL_lose_context");he&&he.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(he){he!==void 0&&(O=he,this.setSize(B,D,!1))},this.getSize=function(he){return he.set(B,D)},this.setSize=function(he,Le,Ue=!0){if(Re.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}B=he,D=Le,t.width=Math.floor(he*O),t.height=Math.floor(Le*O),Ue===!0&&(t.style.width=he+"px",t.style.height=Le+"px"),this.setViewport(0,0,he,Le)},this.getDrawingBufferSize=function(he){return he.set(B*O,D*O).floor()},this.setDrawingBufferSize=function(he,Le,Ue){B=he,D=Le,O=Ue,t.width=Math.floor(he*Ue),t.height=Math.floor(Le*Ue),this.setViewport(0,0,he,Le)},this.getCurrentViewport=function(he){return he.copy(C)},this.getViewport=function(he){return he.copy(X)},this.setViewport=function(he,Le,Ue,Ve){he.isVector4?X.set(he.x,he.y,he.z,he.w):X.set(he,Le,Ue,Ve),ne.viewport(C.copy(X).multiplyScalar(O).floor())},this.getScissor=function(he){return he.copy(Z)},this.setScissor=function(he,Le,Ue,Ve){he.isVector4?Z.set(he.x,he.y,he.z,he.w):Z.set(he,Le,Ue,Ve),ne.scissor(T.copy(Z).multiplyScalar(O).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(he){ne.setScissorTest(Q=he)},this.setOpaqueSort=function(he){$=he},this.setTransparentSort=function(he){L=he},this.getClearColor=function(he){return he.copy(Je.getClearColor())},this.setClearColor=function(){Je.setClearColor.apply(Je,arguments)},this.getClearAlpha=function(){return Je.getClearAlpha()},this.setClearAlpha=function(){Je.setClearAlpha.apply(Je,arguments)},this.clear=function(he=!0,Le=!0,Ue=!0){let Ve=0;if(he){let Ge=!1;if(M!==null){const yt=M.texture.format;Ge=yt===wR||yt===bR||yt===xR}if(Ge){const yt=M.texture.type,wt=yt===yl||yt===su||yt===yE||yt===Rc||yt===vR||yt===yR,It=Je.getClearColor(),ft=Je.getClearAlpha(),St=It.r,Bt=It.g,Rt=It.b;wt?(h[0]=St,h[1]=Bt,h[2]=Rt,h[3]=ft,ie.clearBufferuiv(ie.COLOR,0,h)):(p[0]=St,p[1]=Bt,p[2]=Rt,p[3]=ft,ie.clearBufferiv(ie.COLOR,0,p))}else Ve|=ie.COLOR_BUFFER_BIT}Le&&(Ve|=ie.DEPTH_BUFFER_BIT),Ue&&(Ve|=ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ie.clear(Ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ye,!1),t.removeEventListener("webglcontextrestored",de,!1),t.removeEventListener("webglcontextcreationerror",Ze,!1),Ne.dispose(),Fe.dispose(),se.dispose(),G.dispose(),fe.dispose(),J.dispose(),We.dispose(),W.dispose(),be.dispose(),Re.dispose(),Re.removeEventListener("sessionstart",$e),Re.removeEventListener("sessionend",Xe),ue&&(ue.dispose(),ue=null),tt.stop()};function Ye(he){he.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function de(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const he=Ce.autoReset,Le=Oe.enabled,Ue=Oe.autoUpdate,Ve=Oe.needsUpdate,Ge=Oe.type;pe(),Ce.autoReset=he,Oe.enabled=Le,Oe.autoUpdate=Ue,Oe.needsUpdate=Ve,Oe.type=Ge}function Ze(he){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",he.statusMessage)}function H(he){const Le=he.target;Le.removeEventListener("dispose",H),ee(Le)}function ee(he){oe(he),se.remove(he)}function oe(he){const Le=se.get(he).programs;Le!==void 0&&(Le.forEach(function(Ue){be.releaseProgram(Ue)}),he.isShaderMaterial&&be.releaseShaderCache(he))}this.renderBufferDirect=function(he,Le,Ue,Ve,Ge,yt){Le===null&&(Le=Te);const wt=Ge.isMesh&&Ge.matrixWorld.determinant()<0,It=zo(he,Le,Ue,Ve,Ge);ne.setMaterial(Ve,wt);let ft=Ue.index,St=1;if(Ve.wireframe===!0){if(ft=q.getWireframeAttribute(Ue),ft===void 0)return;St=2}const Bt=Ue.drawRange,Rt=Ue.attributes.position;let Ln=Bt.start*St,Kr=(Bt.start+Bt.count)*St;yt!==null&&(Ln=Math.max(Ln,yt.start*St),Kr=Math.min(Kr,(yt.start+yt.count)*St)),ft!==null?(Ln=Math.max(Ln,0),Kr=Math.min(Kr,ft.count)):Rt!=null&&(Ln=Math.max(Ln,0),Kr=Math.min(Kr,Rt.count));const ir=Kr-Ln;if(ir<0||ir===1/0)return;We.setup(Ge,Ve,It,Ue,ft);let ui,Yt=lt;if(ft!==null&&(ui=Me.get(ft),Yt=at,Yt.setIndex(ui)),Ge.isMesh)Ve.wireframe===!0?(ne.setLineWidth(Ve.wireframeLinewidth*De()),Yt.setMode(ie.LINES)):Yt.setMode(ie.TRIANGLES);else if(Ge.isLine){let Mt=Ve.linewidth;Mt===void 0&&(Mt=1),ne.setLineWidth(Mt*De()),Ge.isLineSegments?Yt.setMode(ie.LINES):Ge.isLineLoop?Yt.setMode(ie.LINE_LOOP):Yt.setMode(ie.LINE_STRIP)}else Ge.isPoints?Yt.setMode(ie.POINTS):Ge.isSprite&&Yt.setMode(ie.TRIANGLES);if(Ge.isBatchedMesh)Yt.renderMultiDraw(Ge._multiDrawStarts,Ge._multiDrawCounts,Ge._multiDrawCount);else if(Ge.isInstancedMesh)Yt.renderInstances(Ln,ir,Ge.count);else if(Ue.isInstancedBufferGeometry){const Mt=Ue._maxInstanceCount!==void 0?Ue._maxInstanceCount:1/0,Da=Math.min(Ue.instanceCount,Mt);Yt.renderInstances(Ln,ir,Da)}else Yt.render(Ln,ir)};function ye(he,Le,Ue){he.transparent===!0&&he.side===da&&he.forceSinglePass===!1?(he.side=Ss,he.needsUpdate=!0,Ir(he,Le,Ue),he.side=Mu,he.needsUpdate=!0,Ir(he,Le,Ue),he.side=da):Ir(he,Le,Ue)}this.compile=function(he,Le,Ue=null){Ue===null&&(Ue=he),y=Fe.get(Ue),y.init(),S.push(y),Ue.traverseVisible(function(Ge){Ge.isLight&&Ge.layers.test(Le.layers)&&(y.pushLight(Ge),Ge.castShadow&&y.pushShadow(Ge))}),he!==Ue&&he.traverseVisible(function(Ge){Ge.isLight&&Ge.layers.test(Le.layers)&&(y.pushLight(Ge),Ge.castShadow&&y.pushShadow(Ge))}),y.setupLights(b._useLegacyLights);const Ve=new Set;return he.traverse(function(Ge){const yt=Ge.material;if(yt)if(Array.isArray(yt))for(let wt=0;wt<yt.length;wt++){const It=yt[wt];ye(It,Ue,Ge),Ve.add(It)}else ye(yt,Ue,Ge),Ve.add(yt)}),S.pop(),y=null,Ve},this.compileAsync=function(he,Le,Ue=null){const Ve=this.compile(he,Le,Ue);return new Promise(Ge=>{function yt(){if(Ve.forEach(function(wt){se.get(wt).currentProgram.isReady()&&Ve.delete(wt)}),Ve.size===0){Ge(he);return}setTimeout(yt,10)}ke.get("KHR_parallel_shader_compile")!==null?yt():setTimeout(yt,10)})};let _e=null;function Pe(he){_e&&_e(he)}function $e(){tt.stop()}function Xe(){tt.start()}const tt=new qY;tt.setAnimationLoop(Pe),typeof self<"u"&&tt.setContext(self),this.setAnimationLoop=function(he){_e=he,Re.setAnimationLoop(he),he===null?tt.stop():tt.start()},Re.addEventListener("sessionstart",$e),Re.addEventListener("sessionend",Xe),this.render=function(he,Le){if(Le!==void 0&&Le.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;he.matrixWorldAutoUpdate===!0&&he.updateMatrixWorld(),Le.parent===null&&Le.matrixWorldAutoUpdate===!0&&Le.updateMatrixWorld(),Re.enabled===!0&&Re.isPresenting===!0&&(Re.cameraAutoUpdate===!0&&Re.updateCamera(Le),Le=Re.getCamera()),he.isScene===!0&&he.onBeforeRender(b,he,Le,M),y=Fe.get(he,S.length),y.init(),S.push(y),me.multiplyMatrices(Le.projectionMatrix,Le.matrixWorldInverse),K.setFromProjectionMatrix(me),ce=this.localClippingEnabled,re=He.init(this.clippingPlanes,ce),v=Ne.get(he,m.length),v.init(),m.push(v),ht(he,Le,0,b.sortObjects),v.finish(),b.sortObjects===!0&&v.sort($,L),this.info.render.frame++,re===!0&&He.beginShadows();const Ue=y.state.shadowsArray;if(Oe.render(Ue,he,Le),re===!0&&He.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Re.enabled===!1||Re.isPresenting===!1||Re.hasDepthSensing()===!1)&&Je.render(v,he),y.setupLights(b._useLegacyLights),Le.isArrayCamera){const Ve=Le.cameras;for(let Ge=0,yt=Ve.length;Ge<yt;Ge++){const wt=Ve[Ge];Dt(v,he,wt,wt.viewport)}}else Dt(v,he,Le);M!==null&&(j.updateMultisampleRenderTarget(M),j.updateRenderTargetMipmap(M)),he.isScene===!0&&he.onAfterRender(b,he,Le),We.resetDefaultState(),A=-1,N=null,S.pop(),S.length>0?y=S[S.length-1]:y=null,m.pop(),m.length>0?v=m[m.length-1]:v=null};function ht(he,Le,Ue,Ve){if(he.visible===!1)return;if(he.layers.test(Le.layers)){if(he.isGroup)Ue=he.renderOrder;else if(he.isLOD)he.autoUpdate===!0&&he.update(Le);else if(he.isLight)y.pushLight(he),he.castShadow&&y.pushShadow(he);else if(he.isSprite){if(!he.frustumCulled||K.intersectsSprite(he)){Ve&&xe.setFromMatrixPosition(he.matrixWorld).applyMatrix4(me);const wt=J.update(he),It=he.material;It.visible&&v.push(he,wt,It,Ue,xe.z,null)}}else if((he.isMesh||he.isLine||he.isPoints)&&(!he.frustumCulled||K.intersectsObject(he))){const wt=J.update(he),It=he.material;if(Ve&&(he.boundingSphere!==void 0?(he.boundingSphere===null&&he.computeBoundingSphere(),xe.copy(he.boundingSphere.center)):(wt.boundingSphere===null&&wt.computeBoundingSphere(),xe.copy(wt.boundingSphere.center)),xe.applyMatrix4(he.matrixWorld).applyMatrix4(me)),Array.isArray(It)){const ft=wt.groups;for(let St=0,Bt=ft.length;St<Bt;St++){const Rt=ft[St],Ln=It[Rt.materialIndex];Ln&&Ln.visible&&v.push(he,wt,Ln,Ue,xe.z,Rt)}}else It.visible&&v.push(he,wt,It,Ue,xe.z,null)}}const yt=he.children;for(let wt=0,It=yt.length;wt<It;wt++)ht(yt[wt],Le,Ue,Ve)}function Dt(he,Le,Ue,Ve){const Ge=he.opaque,yt=he.transmissive,wt=he.transparent;y.setupLightsView(Ue),re===!0&&He.setGlobalState(b.clippingPlanes,Ue),yt.length>0&&rt(Ge,yt,Le,Ue),Ve&&ne.viewport(C.copy(Ve)),Ge.length>0&&_t(Ge,Le,Ue),yt.length>0&&_t(yt,Le,Ue),wt.length>0&&_t(wt,Le,Ue),ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ne.setPolygonOffset(!1)}function rt(he,Le,Ue,Ve){if((Ue.isScene===!0?Ue.overrideMaterial:null)!==null)return;const yt=te.isWebGL2;ue===null&&(ue=new no(1,1,{generateMipmaps:!0,type:ke.has("EXT_color_buffer_half_float")?Ed:yl,minFilter:ul,samples:yt?4:0})),b.getDrawingBufferSize(Ee),yt?ue.setSize(Ee.x,Ee.y):ue.setSize(qS(Ee.x),qS(Ee.y));const wt=b.getRenderTarget();b.setRenderTarget(ue),b.getClearColor(U),F=b.getClearAlpha(),F<1&&b.setClearColor(16777215,.5),b.clear();const It=b.toneMapping;b.toneMapping=vl,_t(he,Ue,Ve),j.updateMultisampleRenderTarget(ue),j.updateRenderTargetMipmap(ue);let ft=!1;for(let St=0,Bt=Le.length;St<Bt;St++){const Rt=Le[St],Ln=Rt.object,Kr=Rt.geometry,ir=Rt.material,ui=Rt.group;if(ir.side===da&&Ln.layers.test(Ve.layers)){const Yt=ir.side;ir.side=Ss,ir.needsUpdate=!0,Vt(Ln,Ue,Ve,Kr,ir,ui),ir.side=Yt,ir.needsUpdate=!0,ft=!0}}ft===!0&&(j.updateMultisampleRenderTarget(ue),j.updateRenderTargetMipmap(ue)),b.setRenderTarget(wt),b.setClearColor(U,F),b.toneMapping=It}function _t(he,Le,Ue){const Ve=Le.isScene===!0?Le.overrideMaterial:null;for(let Ge=0,yt=he.length;Ge<yt;Ge++){const wt=he[Ge],It=wt.object,ft=wt.geometry,St=Ve===null?wt.material:Ve,Bt=wt.group;It.layers.test(Ue.layers)&&Vt(It,Le,Ue,ft,St,Bt)}}function Vt(he,Le,Ue,Ve,Ge,yt){he.onBeforeRender(b,Le,Ue,Ve,Ge,yt),he.modelViewMatrix.multiplyMatrices(Ue.matrixWorldInverse,he.matrixWorld),he.normalMatrix.getNormalMatrix(he.modelViewMatrix),Ge.onBeforeRender(b,Le,Ue,Ve,he,yt),Ge.transparent===!0&&Ge.side===da&&Ge.forceSinglePass===!1?(Ge.side=Ss,Ge.needsUpdate=!0,b.renderBufferDirect(Ue,Le,Ve,Ge,he,yt),Ge.side=Mu,Ge.needsUpdate=!0,b.renderBufferDirect(Ue,Le,Ve,Ge,he,yt),Ge.side=da):b.renderBufferDirect(Ue,Le,Ve,Ge,he,yt),he.onAfterRender(b,Le,Ue,Ve,Ge,yt)}function Ir(he,Le,Ue){Le.isScene!==!0&&(Le=Te);const Ve=se.get(he),Ge=y.state.lights,yt=y.state.shadowsArray,wt=Ge.state.version,It=be.getParameters(he,Ge.state,yt,Le,Ue),ft=be.getProgramCacheKey(It);let St=Ve.programs;Ve.environment=he.isMeshStandardMaterial?Le.environment:null,Ve.fog=Le.fog,Ve.envMap=(he.isMeshStandardMaterial?fe:G).get(he.envMap||Ve.environment),St===void 0&&(he.addEventListener("dispose",H),St=new Map,Ve.programs=St);let Bt=St.get(ft);if(Bt!==void 0){if(Ve.currentProgram===Bt&&Ve.lightsStateVersion===wt)return Jn(he,It),Bt}else It.uniforms=be.getUniforms(he),he.onBuild(Ue,It,b),he.onBeforeCompile(It,b),Bt=be.acquireProgram(It,ft),St.set(ft,Bt),Ve.uniforms=It.uniforms;const Rt=Ve.uniforms;return(!he.isShaderMaterial&&!he.isRawShaderMaterial||he.clipping===!0)&&(Rt.clippingPlanes=He.uniform),Jn(he,It),Ve.needsLights=bi(he),Ve.lightsStateVersion=wt,Ve.needsLights&&(Rt.ambientLightColor.value=Ge.state.ambient,Rt.lightProbe.value=Ge.state.probe,Rt.directionalLights.value=Ge.state.directional,Rt.directionalLightShadows.value=Ge.state.directionalShadow,Rt.spotLights.value=Ge.state.spot,Rt.spotLightShadows.value=Ge.state.spotShadow,Rt.rectAreaLights.value=Ge.state.rectArea,Rt.ltc_1.value=Ge.state.rectAreaLTC1,Rt.ltc_2.value=Ge.state.rectAreaLTC2,Rt.pointLights.value=Ge.state.point,Rt.pointLightShadows.value=Ge.state.pointShadow,Rt.hemisphereLights.value=Ge.state.hemi,Rt.directionalShadowMap.value=Ge.state.directionalShadowMap,Rt.directionalShadowMatrix.value=Ge.state.directionalShadowMatrix,Rt.spotShadowMap.value=Ge.state.spotShadowMap,Rt.spotLightMatrix.value=Ge.state.spotLightMatrix,Rt.spotLightMap.value=Ge.state.spotLightMap,Rt.pointShadowMap.value=Ge.state.pointShadowMap,Rt.pointShadowMatrix.value=Ge.state.pointShadowMatrix),Ve.currentProgram=Bt,Ve.uniformsList=null,Bt}function Mr(he){if(he.uniformsList===null){const Le=he.currentProgram.getUniforms();he.uniformsList=hw.seqWithValue(Le.seq,he.uniforms)}return he.uniformsList}function Jn(he,Le){const Ue=se.get(he);Ue.outputColorSpace=Le.outputColorSpace,Ue.batching=Le.batching,Ue.instancing=Le.instancing,Ue.instancingColor=Le.instancingColor,Ue.skinning=Le.skinning,Ue.morphTargets=Le.morphTargets,Ue.morphNormals=Le.morphNormals,Ue.morphColors=Le.morphColors,Ue.morphTargetsCount=Le.morphTargetsCount,Ue.numClippingPlanes=Le.numClippingPlanes,Ue.numIntersection=Le.numClipIntersection,Ue.vertexAlphas=Le.vertexAlphas,Ue.vertexTangents=Le.vertexTangents,Ue.toneMapping=Le.toneMapping}function zo(he,Le,Ue,Ve,Ge){Le.isScene!==!0&&(Le=Te),j.resetTextureUnits();const yt=Le.fog,wt=Ve.isMeshStandardMaterial?Le.environment:null,It=M===null?b.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Cl,ft=(Ve.isMeshStandardMaterial?fe:G).get(Ve.envMap||wt),St=Ve.vertexColors===!0&&!!Ue.attributes.color&&Ue.attributes.color.itemSize===4,Bt=!!Ue.attributes.tangent&&(!!Ve.normalMap||Ve.anisotropy>0),Rt=!!Ue.morphAttributes.position,Ln=!!Ue.morphAttributes.normal,Kr=!!Ue.morphAttributes.color;let ir=vl;Ve.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(ir=b.toneMapping);const ui=Ue.morphAttributes.position||Ue.morphAttributes.normal||Ue.morphAttributes.color,Yt=ui!==void 0?ui.length:0,Mt=se.get(Ve),Da=y.state.lights;if(re===!0&&(ce===!0||he!==N)){const wi=he===N&&Ve.id===A;He.setState(Ve,he,wi)}let mn=!1;Ve.version===Mt.__version?(Mt.needsLights&&Mt.lightsStateVersion!==Da.state.version||Mt.outputColorSpace!==It||Ge.isBatchedMesh&&Mt.batching===!1||!Ge.isBatchedMesh&&Mt.batching===!0||Ge.isInstancedMesh&&Mt.instancing===!1||!Ge.isInstancedMesh&&Mt.instancing===!0||Ge.isSkinnedMesh&&Mt.skinning===!1||!Ge.isSkinnedMesh&&Mt.skinning===!0||Ge.isInstancedMesh&&Mt.instancingColor===!0&&Ge.instanceColor===null||Ge.isInstancedMesh&&Mt.instancingColor===!1&&Ge.instanceColor!==null||Mt.envMap!==ft||Ve.fog===!0&&Mt.fog!==yt||Mt.numClippingPlanes!==void 0&&(Mt.numClippingPlanes!==He.numPlanes||Mt.numIntersection!==He.numIntersection)||Mt.vertexAlphas!==St||Mt.vertexTangents!==Bt||Mt.morphTargets!==Rt||Mt.morphNormals!==Ln||Mt.morphColors!==Kr||Mt.toneMapping!==ir||te.isWebGL2===!0&&Mt.morphTargetsCount!==Yt)&&(mn=!0):(mn=!0,Mt.__version=Ve.version);let Cr=Mt.currentProgram;mn===!0&&(Cr=Ir(Ve,Le,Ge));let Uo=!1,Na=!1,ci=!1;const kr=Cr.getUniforms(),$o=Mt.uniforms;if(ne.useProgram(Cr.program)&&(Uo=!0,Na=!0,ci=!0),Ve.id!==A&&(A=Ve.id,Na=!0),Uo||N!==he){kr.setValue(ie,"projectionMatrix",he.projectionMatrix),kr.setValue(ie,"viewMatrix",he.matrixWorldInverse);const wi=kr.map.cameraPosition;wi!==void 0&&wi.setValue(ie,xe.setFromMatrixPosition(he.matrixWorld)),te.logarithmicDepthBuffer&&kr.setValue(ie,"logDepthBufFC",2/(Math.log(he.far+1)/Math.LN2)),(Ve.isMeshPhongMaterial||Ve.isMeshToonMaterial||Ve.isMeshLambertMaterial||Ve.isMeshBasicMaterial||Ve.isMeshStandardMaterial||Ve.isShaderMaterial)&&kr.setValue(ie,"isOrthographic",he.isOrthographicCamera===!0),N!==he&&(N=he,Na=!0,ci=!0)}if(Ge.isSkinnedMesh){kr.setOptional(ie,Ge,"bindMatrix"),kr.setOptional(ie,Ge,"bindMatrixInverse");const wi=Ge.skeleton;wi&&(te.floatVertexTextures?(wi.boneTexture===null&&wi.computeBoneTexture(),kr.setValue(ie,"boneTexture",wi.boneTexture,j)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Ge.isBatchedMesh&&(kr.setOptional(ie,Ge,"batchingTexture"),kr.setValue(ie,"batchingTexture",Ge._matricesTexture,j));const qd=Ue.morphAttributes;if((qd.position!==void 0||qd.normal!==void 0||qd.color!==void 0&&te.isWebGL2===!0)&&qe.update(Ge,Ue,Cr),(Na||Mt.receiveShadow!==Ge.receiveShadow)&&(Mt.receiveShadow=Ge.receiveShadow,kr.setValue(ie,"receiveShadow",Ge.receiveShadow)),Ve.isMeshGouraudMaterial&&Ve.envMap!==null&&($o.envMap.value=ft,$o.flipEnvMap.value=ft.isCubeTexture&&ft.isRenderTargetTexture===!1?-1:1),Na&&(kr.setValue(ie,"toneMappingExposure",b.toneMappingExposure),Mt.needsLights&&Fu($o,ci),yt&&Ve.fog===!0&&Se.refreshFogUniforms($o,yt),Se.refreshMaterialUniforms($o,Ve,O,D,ue),hw.upload(ie,Mr(Mt),$o,j)),Ve.isShaderMaterial&&Ve.uniformsNeedUpdate===!0&&(hw.upload(ie,Mr(Mt),$o,j),Ve.uniformsNeedUpdate=!1),Ve.isSpriteMaterial&&kr.setValue(ie,"center",Ge.center),kr.setValue(ie,"modelViewMatrix",Ge.modelViewMatrix),kr.setValue(ie,"normalMatrix",Ge.normalMatrix),kr.setValue(ie,"modelMatrix",Ge.matrixWorld),Ve.isShaderMaterial||Ve.isRawShaderMaterial){const wi=Ve.uniformsGroups;for(let Xd=0,Js=wi.length;Xd<Js;Xd++)if(te.isWebGL2){const Iy=wi[Xd];W.update(Iy,Cr),W.bind(Iy,Cr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Cr}function Fu(he,Le){he.ambientLightColor.needsUpdate=Le,he.lightProbe.needsUpdate=Le,he.directionalLights.needsUpdate=Le,he.directionalLightShadows.needsUpdate=Le,he.pointLights.needsUpdate=Le,he.pointLightShadows.needsUpdate=Le,he.spotLights.needsUpdate=Le,he.spotLightShadows.needsUpdate=Le,he.rectAreaLights.needsUpdate=Le,he.hemisphereLights.needsUpdate=Le}function bi(he){return he.isMeshLambertMaterial||he.isMeshToonMaterial||he.isMeshPhongMaterial||he.isMeshStandardMaterial||he.isShadowMaterial||he.isShaderMaterial&&he.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(he,Le,Ue){se.get(he.texture).__webglTexture=Le,se.get(he.depthTexture).__webglTexture=Ue;const Ve=se.get(he);Ve.__hasExternalTextures=!0,Ve.__hasExternalTextures&&(Ve.__autoAllocateDepthBuffer=Ue===void 0,Ve.__autoAllocateDepthBuffer||ke.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ve.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(he,Le){const Ue=se.get(he);Ue.__webglFramebuffer=Le,Ue.__useDefaultFramebuffer=Le===void 0},this.setRenderTarget=function(he,Le=0,Ue=0){M=he,w=Le,x=Ue;let Ve=!0,Ge=null,yt=!1,wt=!1;if(he){const ft=se.get(he);ft.__useDefaultFramebuffer!==void 0?(ne.bindFramebuffer(ie.FRAMEBUFFER,null),Ve=!1):ft.__webglFramebuffer===void 0?j.setupRenderTarget(he):ft.__hasExternalTextures&&j.rebindTextures(he,se.get(he.texture).__webglTexture,se.get(he.depthTexture).__webglTexture);const St=he.texture;(St.isData3DTexture||St.isDataArrayTexture||St.isCompressedArrayTexture)&&(wt=!0);const Bt=se.get(he).__webglFramebuffer;he.isWebGLCubeRenderTarget?(Array.isArray(Bt[Le])?Ge=Bt[Le][Ue]:Ge=Bt[Le],yt=!0):te.isWebGL2&&he.samples>0&&j.useMultisampledRTT(he)===!1?Ge=se.get(he).__webglMultisampledFramebuffer:Array.isArray(Bt)?Ge=Bt[Ue]:Ge=Bt,C.copy(he.viewport),T.copy(he.scissor),R=he.scissorTest}else C.copy(X).multiplyScalar(O).floor(),T.copy(Z).multiplyScalar(O).floor(),R=Q;if(ne.bindFramebuffer(ie.FRAMEBUFFER,Ge)&&te.drawBuffers&&Ve&&ne.drawBuffers(he,Ge),ne.viewport(C),ne.scissor(T),ne.setScissorTest(R),yt){const ft=se.get(he.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ft.__webglTexture,Ue)}else if(wt){const ft=se.get(he.texture),St=Le||0;ie.framebufferTextureLayer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ft.__webglTexture,Ue||0,St)}A=-1},this.readRenderTargetPixels=function(he,Le,Ue,Ve,Ge,yt,wt){if(!(he&&he.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let It=se.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&wt!==void 0&&(It=It[wt]),It){ne.bindFramebuffer(ie.FRAMEBUFFER,It);try{const ft=he.texture,St=ft.format,Bt=ft.type;if(St!==gs&&ge.convert(St)!==ie.getParameter(ie.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Rt=Bt===Ed&&(ke.has("EXT_color_buffer_half_float")||te.isWebGL2&&ke.has("EXT_color_buffer_float"));if(Bt!==yl&&ge.convert(Bt)!==ie.getParameter(ie.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Bt===ha&&(te.isWebGL2||ke.has("OES_texture_float")||ke.has("WEBGL_color_buffer_float")))&&!Rt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Le>=0&&Le<=he.width-Ve&&Ue>=0&&Ue<=he.height-Ge&&ie.readPixels(Le,Ue,Ve,Ge,ge.convert(St),ge.convert(Bt),yt)}finally{const ft=M!==null?se.get(M).__webglFramebuffer:null;ne.bindFramebuffer(ie.FRAMEBUFFER,ft)}}},this.copyFramebufferToTexture=function(he,Le,Ue=0){const Ve=Math.pow(2,-Ue),Ge=Math.floor(Le.image.width*Ve),yt=Math.floor(Le.image.height*Ve);j.setTexture2D(Le,0),ie.copyTexSubImage2D(ie.TEXTURE_2D,Ue,0,0,he.x,he.y,Ge,yt),ne.unbindTexture()},this.copyTextureToTexture=function(he,Le,Ue,Ve=0){const Ge=Le.image.width,yt=Le.image.height,wt=ge.convert(Ue.format),It=ge.convert(Ue.type);j.setTexture2D(Ue,0),ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,Ue.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ue.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,Ue.unpackAlignment),Le.isDataTexture?ie.texSubImage2D(ie.TEXTURE_2D,Ve,he.x,he.y,Ge,yt,wt,It,Le.image.data):Le.isCompressedTexture?ie.compressedTexSubImage2D(ie.TEXTURE_2D,Ve,he.x,he.y,Le.mipmaps[0].width,Le.mipmaps[0].height,wt,Le.mipmaps[0].data):ie.texSubImage2D(ie.TEXTURE_2D,Ve,he.x,he.y,wt,It,Le.image),Ve===0&&Ue.generateMipmaps&&ie.generateMipmap(ie.TEXTURE_2D),ne.unbindTexture()},this.copyTextureToTexture3D=function(he,Le,Ue,Ve,Ge=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const yt=he.max.x-he.min.x+1,wt=he.max.y-he.min.y+1,It=he.max.z-he.min.z+1,ft=ge.convert(Ve.format),St=ge.convert(Ve.type);let Bt;if(Ve.isData3DTexture)j.setTexture3D(Ve,0),Bt=ie.TEXTURE_3D;else if(Ve.isDataArrayTexture||Ve.isCompressedArrayTexture)j.setTexture2DArray(Ve,0),Bt=ie.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,Ve.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ve.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,Ve.unpackAlignment);const Rt=ie.getParameter(ie.UNPACK_ROW_LENGTH),Ln=ie.getParameter(ie.UNPACK_IMAGE_HEIGHT),Kr=ie.getParameter(ie.UNPACK_SKIP_PIXELS),ir=ie.getParameter(ie.UNPACK_SKIP_ROWS),ui=ie.getParameter(ie.UNPACK_SKIP_IMAGES),Yt=Ue.isCompressedTexture?Ue.mipmaps[Ge]:Ue.image;ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Yt.width),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,Yt.height),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,he.min.x),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,he.min.y),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,he.min.z),Ue.isDataTexture||Ue.isData3DTexture?ie.texSubImage3D(Bt,Ge,Le.x,Le.y,Le.z,yt,wt,It,ft,St,Yt.data):Ue.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ie.compressedTexSubImage3D(Bt,Ge,Le.x,Le.y,Le.z,yt,wt,It,ft,Yt.data)):ie.texSubImage3D(Bt,Ge,Le.x,Le.y,Le.z,yt,wt,It,ft,St,Yt),ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Rt),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,Ln),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,Kr),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,ir),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,ui),Ge===0&&Ve.generateMipmaps&&ie.generateMipmap(Bt),ne.unbindTexture()},this.initTexture=function(he){he.isCubeTexture?j.setTextureCube(he,0):he.isData3DTexture?j.setTexture3D(he,0):he.isDataArrayTexture||he.isCompressedArrayTexture?j.setTexture2DArray(he,0):j.setTexture2D(he,0),ne.unbindTexture()},this.resetState=function(){w=0,x=0,M=null,ne.reset(),We.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return cl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===bE?"display-p3":"srgb",t.unpackColorSpace=Bn.workingColorSpace===gy?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ti?Ic:ER}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ic?ti:Cl}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class tK extends kR{}tK.prototype.isWebGL1Renderer=!0;class EE{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new mt(e),this.density=t}clone(){return new EE(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ME{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new mt(e),this.near=t,this.far=r}clone(){return new ME(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class _0 extends En{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class CE{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=b0,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=wa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return cd("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=wa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=wa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fs=new ve;class Cd{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)fs.fromBufferAttribute(this,t),fs.applyMatrix4(e),this.setXYZ(t,fs.x,fs.y,fs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)fs.fromBufferAttribute(this,t),fs.applyNormalMatrix(e),this.setXYZ(t,fs.x,fs.y,fs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)fs.fromBufferAttribute(this,t),fs.transformDirection(e),this.setXYZ(t,fs.x,fs.y,fs.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=vs(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ln(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=vs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=vs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=vs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=vs(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new kn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Cd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class LR extends Fi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ph;const Dg=new ve,Rh=new ve,Oh=new ve,Ih=new et,Ng=new et,nK=new Kt,Hx=new ve,Pg=new ve,Wx=new ve,H6=new et,IC=new et,W6=new et;class rK extends En{constructor(e=new LR){if(super(),this.isSprite=!0,this.type="Sprite",Ph===void 0){Ph=new rn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new CE(t,5);Ph.setIndex([0,1,2,0,2,3]),Ph.setAttribute("position",new Cd(r,3,0,!1)),Ph.setAttribute("uv",new Cd(r,2,3,!1))}this.geometry=Ph,this.material=e,this.center=new et(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Rh.setFromMatrixScale(this.matrixWorld),nK.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Oh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Rh.multiplyScalar(-Oh.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const a=this.center;Gx(Hx.set(-.5,-.5,0),Oh,a,Rh,i,s),Gx(Pg.set(.5,-.5,0),Oh,a,Rh,i,s),Gx(Wx.set(.5,.5,0),Oh,a,Rh,i,s),H6.set(0,0),IC.set(1,0),W6.set(1,1);let o=e.ray.intersectTriangle(Hx,Pg,Wx,!1,Dg);if(o===null&&(Gx(Pg.set(-.5,.5,0),Oh,a,Rh,i,s),IC.set(0,1),o=e.ray.intersectTriangle(Hx,Wx,Pg,!1,Dg),o===null))return;const l=e.ray.origin.distanceTo(Dg);l<e.near||l>e.far||t.push({distance:l,point:Dg.clone(),uv:ma.getInterpolation(Dg,Hx,Pg,Wx,H6,IC,W6,new et),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Gx(n,e,t,r,i,s){Ih.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Ng.x=s*Ih.x-i*Ih.y,Ng.y=i*Ih.x+s*Ih.y):Ng.copy(Ih),n.copy(e),n.x+=Ng.x,n.y+=Ng.y,n.applyMatrix4(nK)}const jx=new ve,G6=new ve;class iK extends En{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){jx.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(jx);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){jx.setFromMatrixPosition(e.matrixWorld),G6.setFromMatrixPosition(this.matrixWorld);const r=jx.distanceTo(G6)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),r>=a)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const a=r[i];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const j6=new ve,q6=new Un,X6=new Un,X5e=new ve,Y6=new Kt,qx=new ve,kC=new ts,K6=new Kt,LC=new $d;class sK extends Xr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=A3,this.bindMatrix=new Kt,this.bindMatrixInverse=new Kt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new _s),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,qx),this.boundingBox.expandByPoint(qx)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ts),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,qx),this.boundingSphere.expandByPoint(qx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),kC.copy(this.boundingSphere),kC.applyMatrix4(i),e.ray.intersectsSphere(kC)!==!1&&(K6.copy(i).invert(),LC.copy(e.ray).applyMatrix4(K6),!(this.boundingBox!==null&&LC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,LC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Un,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===A3?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===vY?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;q6.fromBufferAttribute(i.attributes.skinIndex,e),X6.fromBufferAttribute(i.attributes.skinWeight,e),j6.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=X6.getComponent(s);if(a!==0){const o=q6.getComponent(s);Y6.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),t.addScaledVector(X5e.copy(j6).applyMatrix4(Y6),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class FR extends En{constructor(){super(),this.isBone=!0,this.type="Bone"}}class dd extends Sr{constructor(e=null,t=1,r=1,i,s,a,o,l,u=Ur,c=Ur,f,d){super(null,a,o,l,u,c,i,s,f,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Z6=new Kt,Y5e=new Kt;class AE{constructor(e=[],t=[]){this.uuid=wa(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Kt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Kt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:Y5e;Z6.multiplyMatrices(o,t[s]),Z6.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new AE(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new dd(t,e,e,gs,ha);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new FR),this.bones.push(a),this.boneInverses.push(new Kt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const a=t[i];e.bones.push(a.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}class rm extends kn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const kh=new Kt,J6=new Kt,Xx=[],Q6=new _s,K5e=new Kt,Rg=new Xr,Og=new ts;class aK extends Xr{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new rm(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,K5e)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new _s),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,kh),Q6.copy(e.boundingBox).applyMatrix4(kh),this.boundingBox.union(Q6)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ts),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,kh),Og.copy(e.boundingSphere).applyMatrix4(kh),this.boundingSphere.union(Og)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Rg.geometry=this.geometry,Rg.material=this.material,Rg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Og.copy(this.boundingSphere),Og.applyMatrix4(r),e.ray.intersectsSphere(Og)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,kh),J6.multiplyMatrices(r,kh),Rg.matrixWorld=J6,Rg.raycast(e,Xx);for(let a=0,o=Xx.length;a<o;a++){const l=Xx[a];l.instanceId=s,l.object=this,t.push(l)}Xx.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new rm(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function Z5e(n,e){return n.z-e.z}function J5e(n,e){return e.z-n.z}class Q5e{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Lh="batchId",Qu=new Kt,eU=new Kt,eze=new Kt,tU=new Kt,FC=new by,Yx=new _s,Cf=new ts,Ig=new ve,BC=new Q5e,qi=new Xr,Kx=[];function tze(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let a=0;a<r;a++)e.setComponent(s+t,a,n.getComponent(s,a))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class oK extends Xr{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new rn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new dd(t,e,e,gs,ha);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const l=e.getAttribute(o),{array:u,itemSize:c,normalized:f}=l,d=new u.constructor(r*c),h=new l.constructor(d,c,f);h.setUsage(l.usage),t.setAttribute(o,h)}if(e.getIndex()!==null){const o=r>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new kn(o,1))}const a=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(Lh,new kn(a,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Lh))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Lh}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===Lh)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new _s);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Qu),this.getBoundingBoxAt(i,Yx).applyMatrix4(Qu),t.union(Yx))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ts);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Qu),this.getBoundingSphereAt(i,Cf).applyMatrix4(Qu),t.union(Cf))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const a=this._reservedRanges,o=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=a[a.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),c=u!==null;if(c&&(r===-1?i.indexCount=u.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,d=this._active,h=this._matricesTexture,p=this._matricesTexture.image.data;f.push(!0),d.push(!0);const v=this._geometryCount;this._geometryCount++,eze.toArray(p,v*16),h.needsUpdate=!0,a.push(i),o.push({start:c?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new _s,sphereInitialized:!1,sphere:new ts});const y=this.geometry.getAttribute(Lh);for(let m=0;m<i.vertexCount;m++)y.setX(i.vertexStart+m,v);return y.needsUpdate=!0,this.setGeometryAt(v,e),v}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),a=t.getIndex(),o=this._reservedRanges[e];if(i&&a.count>o.indexCount||t.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,u=o.vertexCount;for(const h in r.attributes){if(h===Lh)continue;const p=t.getAttribute(h),v=r.getAttribute(h);tze(p,v,l);const y=p.itemSize;for(let m=p.count,S=u;m<S;m++){const b=l+m;for(let g=0;g<y;g++)v.setComponent(b,g,0)}v.needsUpdate=!0}if(i){const h=o.indexStart;for(let p=0;p<a.count;p++)s.setX(h+p,l+a.getX(p));for(let p=a.count,v=o.indexCount;p<v;p++)s.setX(h+p,l);s.needsUpdate=!0}const c=this._bounds[e];t.boundingBox!==null?(c.box.copy(t.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,t.boundingSphere!==null?(c.sphere.copy(t.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const f=this._drawRanges[e],d=t.getAttribute("position");return f.count=i?a.count:d.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.box,a=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const o=a.index,l=a.attributes.position,u=this._drawRanges[e];for(let c=u.start,f=u.start+u.count;c<f;c++){let d=c;o&&(d=o.getX(d)),s.expandByPoint(Ig.fromBufferAttribute(l,d))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.sphere,a=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,Yx),Yx.getCenter(s.center);const o=a.index,l=a.attributes.position,u=this._drawRanges[e];let c=0;for(let f=u.start,d=u.start+u.count;f<d;f++){let h=f;o&&(h=o.getX(h)),Ig.fromBufferAttribute(l,h),c=Math.max(c,s.center.distanceToSquared(Ig))}s.radius=Math.sqrt(c),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||r[e]===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,s=this._drawRanges,a=this._geometryCount,o=this.matrixWorld,l=this.geometry;qi.material=this.material,qi.geometry.index=l.index,qi.geometry.attributes=l.attributes,qi.geometry.boundingBox===null&&(qi.geometry.boundingBox=new _s),qi.geometry.boundingSphere===null&&(qi.geometry.boundingSphere=new ts);for(let u=0;u<a;u++){if(!r[u]||!i[u])continue;const c=s[u];qi.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(u,qi.matrixWorld).premultiply(o),this.getBoundingBoxAt(u,qi.geometry.boundingBox),this.getBoundingSphereAt(u,qi.geometry.boundingSphere),qi.raycast(e,Kx);for(let f=0,d=Kx.length;f<d;f++){const h=Kx[f];h.object=this,h.batchId=u,t.push(h)}Kx.length=0}qi.material=null,qi.geometry.index=null,qi.geometry.attributes={},qi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._active,u=this._visibility,c=this._multiDrawStarts,f=this._multiDrawCounts,d=this._drawRanges,h=this.perObjectFrustumCulled;h&&(tU.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),FC.setFromProjectionMatrix(tU,e.coordinateSystem));let p=0;if(this.sortObjects){eU.copy(this.matrixWorld).invert(),Ig.setFromMatrixPosition(r.matrixWorld).applyMatrix4(eU);for(let m=0,S=u.length;m<S;m++)if(u[m]&&l[m]){this.getMatrixAt(m,Qu),this.getBoundingSphereAt(m,Cf).applyMatrix4(Qu);let b=!1;if(h&&(b=!FC.intersectsSphere(Cf)),!b){const g=Ig.distanceTo(Cf.center);BC.push(d[m],g)}}const v=BC.list,y=this.customSort;y===null?v.sort(s.transparent?J5e:Z5e):y.call(this,v,r);for(let m=0,S=v.length;m<S;m++){const b=v[m];c[p]=b.start*o,f[p]=b.count,p++}BC.reset()}else for(let v=0,y=u.length;v<y;v++)if(u[v]&&l[v]){let m=!1;if(h&&(this.getMatrixAt(v,Qu),this.getBoundingSphereAt(v,Cf).applyMatrix4(Qu),m=!FC.intersectsSphere(Cf)),!m){const S=d[v];c[p]=S.start*o,f[p]=S.count,p++}}this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,a){this.onBeforeRender(e,null,i,s,a)}}class Rs extends Fi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new mt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const nU=new ve,rU=new ve,iU=new Kt,zC=new $d,Zx=new ts;let qc=class extends En{constructor(e=new rn,t=new Rs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)nU.fromBufferAttribute(t,i-1),rU.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=nU.distanceTo(rU);e.setAttribute("lineDistance",new Nt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Zx.copy(r.boundingSphere),Zx.applyMatrix4(i),Zx.radius+=s,e.ray.intersectsSphere(Zx)===!1)return;iU.copy(i).invert(),zC.copy(e.ray).applyMatrix4(iU);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=new ve,c=new ve,f=new ve,d=new ve,h=this.isLineSegments?2:1,p=r.index,y=r.attributes.position;if(p!==null){const m=Math.max(0,a.start),S=Math.min(p.count,a.start+a.count);for(let b=m,g=S-1;b<g;b+=h){const w=p.getX(b),x=p.getX(b+1);if(u.fromBufferAttribute(y,w),c.fromBufferAttribute(y,x),zC.distanceSqToSegment(u,c,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(d);A<e.near||A>e.far||t.push({distance:A,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const m=Math.max(0,a.start),S=Math.min(y.count,a.start+a.count);for(let b=m,g=S-1;b<g;b+=h){if(u.fromBufferAttribute(y,b),c.fromBufferAttribute(y,b+1),zC.distanceSqToSegment(u,c,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(d);x<e.near||x>e.far||t.push({distance:x,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}};const sU=new ve,aU=new ve;class Nl extends qc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)sU.fromBufferAttribute(t,i),aU.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+sU.distanceTo(aU);e.setAttribute("lineDistance",new Nt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class lK extends qc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class BR extends Fi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const oU=new Kt,iD=new $d,Jx=new ts,Qx=new ve;class uK extends En{constructor(e=new rn,t=new BR){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Jx.copy(r.boundingSphere),Jx.applyMatrix4(i),Jx.radius+=s,e.ray.intersectsSphere(Jx)===!1)return;oU.copy(i).invert(),iD.copy(e.ray).applyMatrix4(oU);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=r.index,f=r.attributes.position;if(u!==null){const d=Math.max(0,a.start),h=Math.min(u.count,a.start+a.count);for(let p=d,v=h;p<v;p++){const y=u.getX(p);Qx.fromBufferAttribute(f,y),lU(Qx,y,l,i,e,t,this)}}else{const d=Math.max(0,a.start),h=Math.min(f.count,a.start+a.count);for(let p=d,v=h;p<v;p++)Qx.fromBufferAttribute(f,p),lU(Qx,p,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function lU(n,e,t,r,i,s,a){const o=iD.distanceSqToPoint(n);if(o<t){const l=new ve;iD.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class nze extends Sr{constructor(e,t,r,i,s,a,o,l,u){super(e,t,r,i,s,a,o,l,u),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:or,this.magFilter=s!==void 0?s:or,this.generateMipmaps=!1;const c=this;function f(){c.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class rze extends Sr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ur,this.minFilter=Ur,this.generateMipmaps=!1,this.needsUpdate=!0}}class TE extends Sr{constructor(e,t,r,i,s,a,o,l,u,c,f,d){super(null,a,o,l,u,c,i,s,f,d),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class ize extends TE{constructor(e,t,r,i,s,a){super(e,t,r,s,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Zi}}class sze extends TE{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Cu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class cK extends Sr{constructor(e,t,r,i,s,a,o,l,u){super(e,t,r,i,s,a,o,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Lo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let a;t?a=t:a=e*r[s-1];let o=0,l=s-1,u;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),u=r[i]-a,u<0)o=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===a)return i/(s-1);const c=r[i],d=r[i+1]-c,h=(a-c)/d;return(i+h)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),o=this.getPoint(s),l=t||(a.isVector2?new et:new ve);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new ve,i=[],s=[],a=[],o=new ve,l=new Kt;for(let h=0;h<=e;h++){const p=h/e;i[h]=this.getTangentAt(p,new ve)}s[0]=new ve,a[0]=new ve;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),f=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),d<=u&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],o),a[0].crossVectors(i[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),a[h]=a[h-1].clone(),o.crossVectors(i[h-1],i[h]),o.length()>Number.EPSILON){o.normalize();const p=Math.acos(Pr(i[h-1].dot(i[h]),-1,1));s[h].applyMatrix4(l.makeRotationAxis(o,p))}a[h].crossVectors(i[h],s[h])}if(t===!0){let h=Math.acos(Pr(s[0].dot(s[e]),-1,1));h/=e,i[0].dot(o.crossVectors(s[0],s[e]))>0&&(h=-h);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(i[p],h*p)),a[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class DE extends Lo{constructor(e=0,t=0,r=1,i=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const r=t||new et,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(a?s=0:s=i),this.aClockwise===!0&&!a&&(s===i?s=-i:s=s-i);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=l-this.aX,h=u-this.aY;l=d*c-h*f+this.aX,u=d*f+h*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class fK extends DE{constructor(e,t,r,i,s,a){super(e,t,r,r,i,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function zR(){let n=0,e=0,t=0,r=0;function i(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,r=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,u){i(a,o,u*(o-s),u*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,u,c,f){let d=(a-s)/u-(o-s)/(u+c)+(o-a)/c,h=(o-a)/c-(l-a)/(c+f)+(l-o)/f;d*=c,h*=c,i(a,o,d,h)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+r*o}}}const eb=new ve,UC=new zR,$C=new zR,VC=new zR;class dK extends Lo{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new ve){const r=t,i=this.points,s=i.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let u,c;this.closed||o>0?u=i[(o-1)%s]:(eb.subVectors(i[0],i[1]).add(i[0]),u=eb);const f=i[o%s],d=i[(o+1)%s];if(this.closed||o+2<s?c=i[(o+2)%s]:(eb.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=eb),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let p=Math.pow(u.distanceToSquared(f),h),v=Math.pow(f.distanceToSquared(d),h),y=Math.pow(d.distanceToSquared(c),h);v<1e-4&&(v=1),p<1e-4&&(p=v),y<1e-4&&(y=v),UC.initNonuniformCatmullRom(u.x,f.x,d.x,c.x,p,v,y),$C.initNonuniformCatmullRom(u.y,f.y,d.y,c.y,p,v,y),VC.initNonuniformCatmullRom(u.z,f.z,d.z,c.z,p,v,y)}else this.curveType==="catmullrom"&&(UC.initCatmullRom(u.x,f.x,d.x,c.x,this.tension),$C.initCatmullRom(u.y,f.y,d.y,c.y,this.tension),VC.initCatmullRom(u.z,f.z,d.z,c.z,this.tension));return r.set(UC.calc(l),$C.calc(l),VC.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ve().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function uU(n,e,t,r,i){const s=(r-e)*.5,a=(i-t)*.5,o=n*n,l=n*o;return(2*t-2*r+s+a)*l+(-3*t+3*r-2*s-a)*o+s*n+t}function aze(n,e){const t=1-n;return t*t*e}function oze(n,e){return 2*(1-n)*n*e}function lze(n,e){return n*n*e}function Sv(n,e,t,r){return aze(n,e)+oze(n,t)+lze(n,r)}function uze(n,e){const t=1-n;return t*t*t*e}function cze(n,e){const t=1-n;return 3*t*t*n*e}function fze(n,e){return 3*(1-n)*n*n*e}function dze(n,e){return n*n*n*e}function _v(n,e,t,r,i){return uze(n,e)+cze(n,t)+fze(n,r)+dze(n,i)}class UR extends Lo{constructor(e=new et,t=new et,r=new et,i=new et){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new et){const r=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return r.set(_v(e,i.x,s.x,a.x,o.x),_v(e,i.y,s.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hK extends Lo{constructor(e=new ve,t=new ve,r=new ve,i=new ve){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ve){const r=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return r.set(_v(e,i.x,s.x,a.x,o.x),_v(e,i.y,s.y,a.y,o.y),_v(e,i.z,s.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class $R extends Lo{constructor(e=new et,t=new et){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new et){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new et){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pK extends Lo{constructor(e=new ve,t=new ve){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ve){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class VR extends Lo{constructor(e=new et,t=new et,r=new et){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new et){const r=t,i=this.v0,s=this.v1,a=this.v2;return r.set(Sv(e,i.x,s.x,a.x),Sv(e,i.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class HR extends Lo{constructor(e=new ve,t=new ve,r=new ve){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ve){const r=t,i=this.v0,s=this.v1,a=this.v2;return r.set(Sv(e,i.x,s.x,a.x),Sv(e,i.y,s.y,a.y),Sv(e,i.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WR extends Lo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new et){const r=t,i=this.points,s=(i.length-1)*e,a=Math.floor(s),o=s-a,l=i[a===0?a:a-1],u=i[a],c=i[a>i.length-2?i.length-1:a+1],f=i[a>i.length-3?i.length-1:a+2];return r.set(uU(o,l.x,u.x,c.x,f.x),uU(o,l.y,u.y,c.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new et().fromArray(i))}return this}}var XS=Object.freeze({__proto__:null,ArcCurve:fK,CatmullRomCurve3:dK,CubicBezierCurve:UR,CubicBezierCurve3:hK,EllipseCurve:DE,LineCurve:$R,LineCurve3:pK,QuadraticBezierCurve:VR,QuadraticBezierCurve3:HR,SplineCurve:WR});class mK extends Lo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new XS[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const a=i[s]-r,o=this.curves[s],l=o.getLength(),u=l===0?0:1-a/l;return o.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const a=s[i],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new XS[i.type]().fromJSON(i))}return this}}class E0 extends mK{constructor(e){super(),this.type="Path",this.currentPoint=new et,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new $R(this.currentPoint.clone(),new et(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new VR(this.currentPoint.clone(),new et(e,t),new et(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,a){const o=new UR(this.currentPoint.clone(),new et(e,t),new et(r,i),new et(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new WR(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,r,i,s,a),this}absarc(e,t,r,i,s,a){return this.absellipse(e,t,r,r,i,s,a),this}ellipse(e,t,r,i,s,a,o,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,s,a,o,l),this}absellipse(e,t,r,i,s,a,o,l){const u=new DE(e,t,r,i,s,a,o,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class wy extends rn{constructor(e=[new et(0,-.5),new et(.5,0),new et(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Pr(i,0,Math.PI*2);const s=[],a=[],o=[],l=[],u=[],c=1/t,f=new ve,d=new et,h=new ve,p=new ve,v=new ve;let y=0,m=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:y=e[S+1].x-e[S].x,m=e[S+1].y-e[S].y,h.x=m*1,h.y=-y,h.z=m*0,v.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:y=e[S+1].x-e[S].x,m=e[S+1].y-e[S].y,h.x=m*1,h.y=-y,h.z=m*0,p.copy(h),h.x+=v.x,h.y+=v.y,h.z+=v.z,h.normalize(),l.push(h.x,h.y,h.z),v.copy(p)}for(let S=0;S<=t;S++){const b=r+S*c*i,g=Math.sin(b),w=Math.cos(b);for(let x=0;x<=e.length-1;x++){f.x=e[x].x*g,f.y=e[x].y,f.z=e[x].x*w,a.push(f.x,f.y,f.z),d.x=S/t,d.y=x/(e.length-1),o.push(d.x,d.y);const M=l[3*x+0]*g,A=l[3*x+1],N=l[3*x+0]*w;u.push(M,A,N)}}for(let S=0;S<t;S++)for(let b=0;b<e.length-1;b++){const g=b+S*e.length,w=g,x=g+e.length,M=g+e.length+1,A=g+1;s.push(w,x,A),s.push(M,A,x)}this.setIndex(s),this.setAttribute("position",new Nt(a,3)),this.setAttribute("uv",new Nt(o,2)),this.setAttribute("normal",new Nt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wy(e.points,e.segments,e.phiStart,e.phiLength)}}class NE extends wy{constructor(e=1,t=1,r=4,i=8){const s=new E0;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new NE(e.radius,e.length,e.capSegments,e.radialSegments)}}class PE extends rn{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],a=[],o=[],l=[],u=new ve,c=new et;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let f=0,d=3;f<=t;f++,d+=3){const h=r+f/t*i;u.x=e*Math.cos(h),u.y=e*Math.sin(h),a.push(u.x,u.y,u.z),o.push(0,0,1),c.x=(a[d]/e+1)/2,c.y=(a[d+1]/e+1)/2,l.push(c.x,c.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Nt(a,3)),this.setAttribute("normal",new Nt(o,3)),this.setAttribute("uv",new Nt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class zm extends rn{constructor(e=1,t=1,r=1,i=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],f=[],d=[],h=[];let p=0;const v=[],y=r/2;let m=0;S(),a===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(c),this.setAttribute("position",new Nt(f,3)),this.setAttribute("normal",new Nt(d,3)),this.setAttribute("uv",new Nt(h,2));function S(){const g=new ve,w=new ve;let x=0;const M=(t-e)/r;for(let A=0;A<=s;A++){const N=[],C=A/s,T=C*(t-e)+e;for(let R=0;R<=i;R++){const U=R/i,F=U*l+o,B=Math.sin(F),D=Math.cos(F);w.x=T*B,w.y=-C*r+y,w.z=T*D,f.push(w.x,w.y,w.z),g.set(B,M,D).normalize(),d.push(g.x,g.y,g.z),h.push(U,1-C),N.push(p++)}v.push(N)}for(let A=0;A<i;A++)for(let N=0;N<s;N++){const C=v[N][A],T=v[N+1][A],R=v[N+1][A+1],U=v[N][A+1];c.push(C,T,U),c.push(T,R,U),x+=6}u.addGroup(m,x,0),m+=x}function b(g){const w=p,x=new et,M=new ve;let A=0;const N=g===!0?e:t,C=g===!0?1:-1;for(let R=1;R<=i;R++)f.push(0,y*C,0),d.push(0,C,0),h.push(.5,.5),p++;const T=p;for(let R=0;R<=i;R++){const F=R/i*l+o,B=Math.cos(F),D=Math.sin(F);M.x=N*D,M.y=y*C,M.z=N*B,f.push(M.x,M.y,M.z),d.push(0,C,0),x.x=B*.5+.5,x.y=D*.5*C+.5,h.push(x.x,x.y),p++}for(let R=0;R<i;R++){const U=w+R,F=T+R;g===!0?c.push(F,F+1,U):c.push(F+1,F,U),A+=3}u.addGroup(m,A,g===!0?1:2),m+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class RE extends zm{constructor(e=1,t=1,r=32,i=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,r,i,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new RE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class cf extends rn{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],a=[];o(i),u(r),c(),this.setAttribute("position",new Nt(s,3)),this.setAttribute("normal",new Nt(s.slice(),3)),this.setAttribute("uv",new Nt(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(S){const b=new ve,g=new ve,w=new ve;for(let x=0;x<t.length;x+=3)h(t[x+0],b),h(t[x+1],g),h(t[x+2],w),l(b,g,w,S)}function l(S,b,g,w){const x=w+1,M=[];for(let A=0;A<=x;A++){M[A]=[];const N=S.clone().lerp(g,A/x),C=b.clone().lerp(g,A/x),T=x-A;for(let R=0;R<=T;R++)R===0&&A===x?M[A][R]=N:M[A][R]=N.clone().lerp(C,R/T)}for(let A=0;A<x;A++)for(let N=0;N<2*(x-A)-1;N++){const C=Math.floor(N/2);N%2===0?(d(M[A][C+1]),d(M[A+1][C]),d(M[A][C])):(d(M[A][C+1]),d(M[A+1][C+1]),d(M[A+1][C]))}}function u(S){const b=new ve;for(let g=0;g<s.length;g+=3)b.x=s[g+0],b.y=s[g+1],b.z=s[g+2],b.normalize().multiplyScalar(S),s[g+0]=b.x,s[g+1]=b.y,s[g+2]=b.z}function c(){const S=new ve;for(let b=0;b<s.length;b+=3){S.x=s[b+0],S.y=s[b+1],S.z=s[b+2];const g=y(S)/2/Math.PI+.5,w=m(S)/Math.PI+.5;a.push(g,1-w)}p(),f()}function f(){for(let S=0;S<a.length;S+=6){const b=a[S+0],g=a[S+2],w=a[S+4],x=Math.max(b,g,w),M=Math.min(b,g,w);x>.9&&M<.1&&(b<.2&&(a[S+0]+=1),g<.2&&(a[S+2]+=1),w<.2&&(a[S+4]+=1))}}function d(S){s.push(S.x,S.y,S.z)}function h(S,b){const g=S*3;b.x=e[g+0],b.y=e[g+1],b.z=e[g+2]}function p(){const S=new ve,b=new ve,g=new ve,w=new ve,x=new et,M=new et,A=new et;for(let N=0,C=0;N<s.length;N+=9,C+=6){S.set(s[N+0],s[N+1],s[N+2]),b.set(s[N+3],s[N+4],s[N+5]),g.set(s[N+6],s[N+7],s[N+8]),x.set(a[C+0],a[C+1]),M.set(a[C+2],a[C+3]),A.set(a[C+4],a[C+5]),w.copy(S).add(b).add(g).divideScalar(3);const T=y(w);v(x,C+0,S,T),v(M,C+2,b,T),v(A,C+4,g,T)}}function v(S,b,g,w){w<0&&S.x===1&&(a[b]=S.x-1),g.x===0&&g.z===0&&(a[b]=w/2/Math.PI+.5)}function y(S){return Math.atan2(S.z,-S.x)}function m(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cf(e.vertices,e.indices,e.radius,e.details)}}class OE extends cf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new OE(e.radius,e.detail)}}const tb=new ve,nb=new ve,HC=new ve,rb=new ma;class GR extends rn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(ud*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,u=[0,0,0],c=["a","b","c"],f=new Array(3),d={},h=[];for(let p=0;p<l;p+=3){a?(u[0]=a.getX(p),u[1]=a.getX(p+1),u[2]=a.getX(p+2)):(u[0]=p,u[1]=p+1,u[2]=p+2);const{a:v,b:y,c:m}=rb;if(v.fromBufferAttribute(o,u[0]),y.fromBufferAttribute(o,u[1]),m.fromBufferAttribute(o,u[2]),rb.getNormal(HC),f[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,f[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[2]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let S=0;S<3;S++){const b=(S+1)%3,g=f[S],w=f[b],x=rb[c[S]],M=rb[c[b]],A=`${g}_${w}`,N=`${w}_${g}`;N in d&&d[N]?(HC.dot(d[N].normal)<=s&&(h.push(x.x,x.y,x.z),h.push(M.x,M.y,M.z)),d[N]=null):A in d||(d[A]={index0:u[S],index1:u[b],normal:HC.clone()})}}for(const p in d)if(d[p]){const{index0:v,index1:y}=d[p];tb.fromBufferAttribute(o,v),nb.fromBufferAttribute(o,y),h.push(tb.x,tb.y,tb.z),h.push(nb.x,nb.y,nb.z)}this.setAttribute("position",new Nt(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class hd extends E0{constructor(e){super(e),this.uuid=wa(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new E0().fromJSON(i))}return this}}const hze={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=gK(n,0,i,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,u,c,f,d,h;if(r&&(s=yze(n,e,s,t)),n.length>80*t){o=u=n[0],l=c=n[1];for(let p=t;p<i;p+=t)f=n[p],d=n[p+1],f<o&&(o=f),d<l&&(l=d),f>u&&(u=f),d>c&&(c=d);h=Math.max(u-o,c-l),h=h!==0?32767/h:0}return M0(s,a,t,o,l,h,0),a}};function gK(n,e,t,r,i){let s,a;if(i===Dze(n,e,t,r)>0)for(s=e;s<t;s+=r)a=cU(s,n[s],n[s+1],a);else for(s=t-r;s>=e;s-=r)a=cU(s,n[s],n[s+1],a);return a&&IE(a,a.next)&&(A0(a),a=a.next),a}function Ad(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(IE(t,t.next)||xr(t.prev,t,t.next)===0)){if(A0(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function M0(n,e,t,r,i,s,a){if(!n)return;!a&&s&&_ze(n,r,i,s);let o=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?mze(n,r,i,s):pze(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),A0(n),n=u.next,o=u.next;continue}if(n=u,n===o){a?a===1?(n=gze(Ad(n),e,t),M0(n,e,t,r,i,s,2)):a===2&&vze(n,e,t,r,i,s):M0(Ad(n),e,t,r,i,s,1);break}}}function pze(n){const e=n.prev,t=n,r=n.next;if(xr(e,t,r)>=0)return!1;const i=e.x,s=t.x,a=r.x,o=e.y,l=t.y,u=r.y,c=i<s?i<a?i:a:s<a?s:a,f=o<l?o<u?o:u:l<u?l:u,d=i>s?i>a?i:a:s>a?s:a,h=o>l?o>u?o:u:l>u?l:u;let p=r.next;for(;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=f&&p.y<=h&&pp(i,o,s,l,a,u,p.x,p.y)&&xr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function mze(n,e,t,r){const i=n.prev,s=n,a=n.next;if(xr(i,s,a)>=0)return!1;const o=i.x,l=s.x,u=a.x,c=i.y,f=s.y,d=a.y,h=o<l?o<u?o:u:l<u?l:u,p=c<f?c<d?c:d:f<d?f:d,v=o>l?o>u?o:u:l>u?l:u,y=c>f?c>d?c:d:f>d?f:d,m=sD(h,p,e,t,r),S=sD(v,y,e,t,r);let b=n.prevZ,g=n.nextZ;for(;b&&b.z>=m&&g&&g.z<=S;){if(b.x>=h&&b.x<=v&&b.y>=p&&b.y<=y&&b!==i&&b!==a&&pp(o,c,l,f,u,d,b.x,b.y)&&xr(b.prev,b,b.next)>=0||(b=b.prevZ,g.x>=h&&g.x<=v&&g.y>=p&&g.y<=y&&g!==i&&g!==a&&pp(o,c,l,f,u,d,g.x,g.y)&&xr(g.prev,g,g.next)>=0))return!1;g=g.nextZ}for(;b&&b.z>=m;){if(b.x>=h&&b.x<=v&&b.y>=p&&b.y<=y&&b!==i&&b!==a&&pp(o,c,l,f,u,d,b.x,b.y)&&xr(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;g&&g.z<=S;){if(g.x>=h&&g.x<=v&&g.y>=p&&g.y<=y&&g!==i&&g!==a&&pp(o,c,l,f,u,d,g.x,g.y)&&xr(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function gze(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!IE(i,s)&&vK(i,r,r.next,s)&&C0(i,s)&&C0(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),A0(r),A0(r.next),r=n=s),r=r.next}while(r!==n);return Ad(r)}function vze(n,e,t,r,i,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Cze(a,o)){let l=yK(a,o);a=Ad(a,a.next),l=Ad(l,l.next),M0(a,e,t,r,i,s,0),M0(l,e,t,r,i,s,0);return}o=o.next}a=a.next}while(a!==n)}function yze(n,e,t,r){const i=[];let s,a,o,l,u;for(s=0,a=e.length;s<a;s++)o=e[s]*r,l=s<a-1?e[s+1]*r:n.length,u=gK(n,o,l,r,!1),u===u.next&&(u.steiner=!0),i.push(Mze(u));for(i.sort(xze),s=0;s<i.length;s++)t=bze(i[s],t);return t}function xze(n,e){return n.x-e.x}function bze(n,e){const t=wze(n,e);if(!t)return e;const r=yK(t,n);return Ad(r,r.next),Ad(t,t.next)}function wze(n,e){let t=e,r=-1/0,i;const s=n.x,a=n.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const d=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>r&&(r=d,i=t.x<t.next.x?t:t.next,d===s))return i}t=t.next}while(t!==e);if(!i)return null;const o=i,l=i.x,u=i.y;let c=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&pp(a<u?s:r,a,l,u,a<u?r:s,a,t.x,t.y)&&(f=Math.abs(a-t.y)/(s-t.x),C0(t,n)&&(f<c||f===c&&(t.x>i.x||t.x===i.x&&Sze(i,t)))&&(i=t,c=f)),t=t.next;while(t!==o);return i}function Sze(n,e){return xr(n.prev,n,e.prev)<0&&xr(e.next,n,n.next)<0}function _ze(n,e,t,r){let i=n;do i.z===0&&(i.z=sD(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,Eze(i)}function Eze(n){let e,t,r,i,s,a,o,l,u=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,r=t,o=0,e=0;e<u&&(o++,r=r.nextZ,!!r);e++);for(l=u;o>0||l>0&&r;)o!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,o--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(a>1);return n}function sD(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Mze(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function pp(n,e,t,r,i,s,a,o){return(i-a)*(e-o)>=(n-a)*(s-o)&&(n-a)*(r-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(i-a)*(r-o)}function Cze(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Aze(n,e)&&(C0(n,e)&&C0(e,n)&&Tze(n,e)&&(xr(n.prev,n,e.prev)||xr(n,e.prev,e))||IE(n,e)&&xr(n.prev,n,n.next)>0&&xr(e.prev,e,e.next)>0)}function xr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function IE(n,e){return n.x===e.x&&n.y===e.y}function vK(n,e,t,r){const i=sb(xr(n,e,t)),s=sb(xr(n,e,r)),a=sb(xr(t,r,n)),o=sb(xr(t,r,e));return!!(i!==s&&a!==o||i===0&&ib(n,t,e)||s===0&&ib(n,r,e)||a===0&&ib(t,n,r)||o===0&&ib(t,e,r))}function ib(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function sb(n){return n>0?1:n<0?-1:0}function Aze(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&vK(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function C0(n,e){return xr(n.prev,n,n.next)<0?xr(n,e,n.next)>=0&&xr(n,n.prev,e)>=0:xr(n,e,n.prev)<0||xr(n,n.next,e)<0}function Tze(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function yK(n,e){const t=new aD(n.i,n.x,n.y),r=new aD(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function cU(n,e,t,r){const i=new aD(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function A0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function aD(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dze(n,e,t,r){let i=0;for(let s=e,a=t-r;s<t;s+=r)i+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return i}class xl{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return xl.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];fU(e),dU(r,e);let a=e.length;t.forEach(fU);for(let l=0;l<t.length;l++)i.push(a),a+=t[l].length,dU(r,t[l]);const o=hze.triangulate(r,i);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function fU(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function dU(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class kE extends rn{constructor(e=new hd([new et(.5,.5),new et(-.5,.5),new et(-.5,-.5),new et(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];a(u)}this.setAttribute("position",new Nt(i,3)),this.setAttribute("uv",new Nt(s,2)),this.computeVertexNormals();function a(o){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,h=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:h-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const m=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:Nze;let b,g=!1,w,x,M,A;m&&(b=m.getSpacedPoints(c),g=!0,d=!1,w=m.computeFrenetFrames(c,!1),x=new ve,M=new ve,A=new ve),d||(y=0,h=0,p=0,v=0);const N=o.extractPoints(u);let C=N.shape;const T=N.holes;if(!xl.isClockWise(C)){C=C.reverse();for(let ie=0,Ie=T.length;ie<Ie;ie++){const ke=T[ie];xl.isClockWise(ke)&&(T[ie]=ke.reverse())}}const U=xl.triangulateShape(C,T),F=C;for(let ie=0,Ie=T.length;ie<Ie;ie++){const ke=T[ie];C=C.concat(ke)}function B(ie,Ie,ke){return Ie||console.error("THREE.ExtrudeGeometry: vec does not exist"),ie.clone().addScaledVector(Ie,ke)}const D=C.length,O=U.length;function $(ie,Ie,ke){let te,ne,Ce;const se=ie.x-Ie.x,j=ie.y-Ie.y,G=ke.x-ie.x,fe=ke.y-ie.y,Me=se*se+j*j,q=se*fe-j*G;if(Math.abs(q)>Number.EPSILON){const J=Math.sqrt(Me),be=Math.sqrt(G*G+fe*fe),Se=Ie.x-j/J,Ne=Ie.y+se/J,Fe=ke.x-fe/be,He=ke.y+G/be,Oe=((Fe-Se)*fe-(He-Ne)*G)/(se*fe-j*G);te=Se+se*Oe-ie.x,ne=Ne+j*Oe-ie.y;const Je=te*te+ne*ne;if(Je<=2)return new et(te,ne);Ce=Math.sqrt(Je/2)}else{let J=!1;se>Number.EPSILON?G>Number.EPSILON&&(J=!0):se<-Number.EPSILON?G<-Number.EPSILON&&(J=!0):Math.sign(j)===Math.sign(fe)&&(J=!0),J?(te=-j,ne=se,Ce=Math.sqrt(Me)):(te=se,ne=j,Ce=Math.sqrt(Me/2))}return new et(te/Ce,ne/Ce)}const L=[];for(let ie=0,Ie=F.length,ke=Ie-1,te=ie+1;ie<Ie;ie++,ke++,te++)ke===Ie&&(ke=0),te===Ie&&(te=0),L[ie]=$(F[ie],F[ke],F[te]);const X=[];let Z,Q=L.concat();for(let ie=0,Ie=T.length;ie<Ie;ie++){const ke=T[ie];Z=[];for(let te=0,ne=ke.length,Ce=ne-1,se=te+1;te<ne;te++,Ce++,se++)Ce===ne&&(Ce=0),se===ne&&(se=0),Z[te]=$(ke[te],ke[Ce],ke[se]);X.push(Z),Q=Q.concat(Z)}for(let ie=0;ie<y;ie++){const Ie=ie/y,ke=h*Math.cos(Ie*Math.PI/2),te=p*Math.sin(Ie*Math.PI/2)+v;for(let ne=0,Ce=F.length;ne<Ce;ne++){const se=B(F[ne],L[ne],te);me(se.x,se.y,-ke)}for(let ne=0,Ce=T.length;ne<Ce;ne++){const se=T[ne];Z=X[ne];for(let j=0,G=se.length;j<G;j++){const fe=B(se[j],Z[j],te);me(fe.x,fe.y,-ke)}}}const K=p+v;for(let ie=0;ie<D;ie++){const Ie=d?B(C[ie],Q[ie],K):C[ie];g?(M.copy(w.normals[0]).multiplyScalar(Ie.x),x.copy(w.binormals[0]).multiplyScalar(Ie.y),A.copy(b[0]).add(M).add(x),me(A.x,A.y,A.z)):me(Ie.x,Ie.y,0)}for(let ie=1;ie<=c;ie++)for(let Ie=0;Ie<D;Ie++){const ke=d?B(C[Ie],Q[Ie],K):C[Ie];g?(M.copy(w.normals[ie]).multiplyScalar(ke.x),x.copy(w.binormals[ie]).multiplyScalar(ke.y),A.copy(b[ie]).add(M).add(x),me(A.x,A.y,A.z)):me(ke.x,ke.y,f/c*ie)}for(let ie=y-1;ie>=0;ie--){const Ie=ie/y,ke=h*Math.cos(Ie*Math.PI/2),te=p*Math.sin(Ie*Math.PI/2)+v;for(let ne=0,Ce=F.length;ne<Ce;ne++){const se=B(F[ne],L[ne],te);me(se.x,se.y,f+ke)}for(let ne=0,Ce=T.length;ne<Ce;ne++){const se=T[ne];Z=X[ne];for(let j=0,G=se.length;j<G;j++){const fe=B(se[j],Z[j],te);g?me(fe.x,fe.y+b[c-1].y,b[c-1].x+ke):me(fe.x,fe.y,f+ke)}}}re(),ce();function re(){const ie=i.length/3;if(d){let Ie=0,ke=D*Ie;for(let te=0;te<O;te++){const ne=U[te];Ee(ne[2]+ke,ne[1]+ke,ne[0]+ke)}Ie=c+y*2,ke=D*Ie;for(let te=0;te<O;te++){const ne=U[te];Ee(ne[0]+ke,ne[1]+ke,ne[2]+ke)}}else{for(let Ie=0;Ie<O;Ie++){const ke=U[Ie];Ee(ke[2],ke[1],ke[0])}for(let Ie=0;Ie<O;Ie++){const ke=U[Ie];Ee(ke[0]+D*c,ke[1]+D*c,ke[2]+D*c)}}r.addGroup(ie,i.length/3-ie,0)}function ce(){const ie=i.length/3;let Ie=0;ue(F,Ie),Ie+=F.length;for(let ke=0,te=T.length;ke<te;ke++){const ne=T[ke];ue(ne,Ie),Ie+=ne.length}r.addGroup(ie,i.length/3-ie,1)}function ue(ie,Ie){let ke=ie.length;for(;--ke>=0;){const te=ke;let ne=ke-1;ne<0&&(ne=ie.length-1);for(let Ce=0,se=c+y*2;Ce<se;Ce++){const j=D*Ce,G=D*(Ce+1),fe=Ie+te+j,Me=Ie+ne+j,q=Ie+ne+G,J=Ie+te+G;xe(fe,Me,q,J)}}}function me(ie,Ie,ke){l.push(ie),l.push(Ie),l.push(ke)}function Ee(ie,Ie,ke){Te(ie),Te(Ie),Te(ke);const te=i.length/3,ne=S.generateTopUV(r,i,te-3,te-2,te-1);De(ne[0]),De(ne[1]),De(ne[2])}function xe(ie,Ie,ke,te){Te(ie),Te(Ie),Te(te),Te(Ie),Te(ke),Te(te);const ne=i.length/3,Ce=S.generateSideWallUV(r,i,ne-6,ne-3,ne-2,ne-1);De(Ce[0]),De(Ce[1]),De(Ce[3]),De(Ce[1]),De(Ce[2]),De(Ce[3])}function Te(ie){i.push(l[ie*3+0]),i.push(l[ie*3+1]),i.push(l[ie*3+2])}function De(ie){s.push(ie.x),s.push(ie.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return Pze(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new XS[i.type]().fromJSON(i)),new kE(r,e.options)}}const Nze={generateTopUV:function(n,e,t,r,i){const s=e[t*3],a=e[t*3+1],o=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new et(s,a),new et(o,l),new et(u,c)]},generateSideWallUV:function(n,e,t,r,i,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],f=e[r*3+2],d=e[i*3],h=e[i*3+1],p=e[i*3+2],v=e[s*3],y=e[s*3+1],m=e[s*3+2];return Math.abs(o-c)<Math.abs(a-u)?[new et(a,1-l),new et(u,1-f),new et(d,1-p),new et(v,1-m)]:[new et(o,1-l),new et(c,1-f),new et(h,1-p),new et(y,1-m)]}};function Pze(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class LE extends cf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new LE(e.radius,e.detail)}}class Sy extends cf{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sy(e.radius,e.detail)}}class FE extends rn{constructor(e=.5,t=1,r=32,i=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:a},r=Math.max(3,r),i=Math.max(1,i);const o=[],l=[],u=[],c=[];let f=e;const d=(t-e)/i,h=new ve,p=new et;for(let v=0;v<=i;v++){for(let y=0;y<=r;y++){const m=s+y/r*a;h.x=f*Math.cos(m),h.y=f*Math.sin(m),l.push(h.x,h.y,h.z),u.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}f+=d}for(let v=0;v<i;v++){const y=v*(r+1);for(let m=0;m<r;m++){const S=m+y,b=S,g=S+r+1,w=S+r+2,x=S+1;o.push(b,g,x),o.push(g,w,x)}}this.setIndex(o),this.setAttribute("position",new Nt(l,3)),this.setAttribute("normal",new Nt(u,3)),this.setAttribute("uv",new Nt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new FE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class BE extends rn{constructor(e=new hd([new et(0,.5),new et(-.5,-.5),new et(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(o,l,c),o+=l,l=0;this.setIndex(r),this.setAttribute("position",new Nt(i,3)),this.setAttribute("normal",new Nt(s,3)),this.setAttribute("uv",new Nt(a,2));function u(c){const f=i.length/3,d=c.extractPoints(t);let h=d.shape;const p=d.holes;xl.isClockWise(h)===!1&&(h=h.reverse());for(let y=0,m=p.length;y<m;y++){const S=p[y];xl.isClockWise(S)===!0&&(p[y]=S.reverse())}const v=xl.triangulateShape(h,p);for(let y=0,m=p.length;y<m;y++){const S=p[y];h=h.concat(S)}for(let y=0,m=h.length;y<m;y++){const S=h[y];i.push(S.x,S.y,0),s.push(0,0,1),a.push(S.x,S.y)}for(let y=0,m=v.length;y<m;y++){const S=v[y],b=S[0]+f,g=S[1]+f,w=S[2]+f;r.push(b,g,w),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Rze(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const a=t[e.shapes[i]];r.push(a)}return new BE(r,e.curveSegments)}}function Rze(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class _y extends rn{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(a+o,Math.PI);let u=0;const c=[],f=new ve,d=new ve,h=[],p=[],v=[],y=[];for(let m=0;m<=r;m++){const S=[],b=m/r;let g=0;m===0&&a===0?g=.5/t:m===r&&l===Math.PI&&(g=-.5/t);for(let w=0;w<=t;w++){const x=w/t;f.x=-e*Math.cos(i+x*s)*Math.sin(a+b*o),f.y=e*Math.cos(a+b*o),f.z=e*Math.sin(i+x*s)*Math.sin(a+b*o),p.push(f.x,f.y,f.z),d.copy(f).normalize(),v.push(d.x,d.y,d.z),y.push(x+g,1-b),S.push(u++)}c.push(S)}for(let m=0;m<r;m++)for(let S=0;S<t;S++){const b=c[m][S+1],g=c[m][S],w=c[m+1][S],x=c[m+1][S+1];(m!==0||a>0)&&h.push(b,g,x),(m!==r-1||l<Math.PI)&&h.push(g,w,x)}this.setIndex(h),this.setAttribute("position",new Nt(p,3)),this.setAttribute("normal",new Nt(v,3)),this.setAttribute("uv",new Nt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _y(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class zE extends cf{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zE(e.radius,e.detail)}}class UE extends rn{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const a=[],o=[],l=[],u=[],c=new ve,f=new ve,d=new ve;for(let h=0;h<=r;h++)for(let p=0;p<=i;p++){const v=p/i*s,y=h/r*Math.PI*2;f.x=(e+t*Math.cos(y))*Math.cos(v),f.y=(e+t*Math.cos(y))*Math.sin(v),f.z=t*Math.sin(y),o.push(f.x,f.y,f.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),d.subVectors(f,c).normalize(),l.push(d.x,d.y,d.z),u.push(p/i),u.push(h/r)}for(let h=1;h<=r;h++)for(let p=1;p<=i;p++){const v=(i+1)*h+p-1,y=(i+1)*(h-1)+p-1,m=(i+1)*(h-1)+p,S=(i+1)*h+p;a.push(v,y,S),a.push(y,m,S)}this.setIndex(a),this.setAttribute("position",new Nt(o,3)),this.setAttribute("normal",new Nt(l,3)),this.setAttribute("uv",new Nt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new UE(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class $E extends rn{constructor(e=1,t=.4,r=64,i=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:a},r=Math.floor(r),i=Math.floor(i);const o=[],l=[],u=[],c=[],f=new ve,d=new ve,h=new ve,p=new ve,v=new ve,y=new ve,m=new ve;for(let b=0;b<=r;++b){const g=b/r*s*Math.PI*2;S(g,s,a,e,h),S(g+.01,s,a,e,p),y.subVectors(p,h),m.addVectors(p,h),v.crossVectors(y,m),m.crossVectors(v,y),v.normalize(),m.normalize();for(let w=0;w<=i;++w){const x=w/i*Math.PI*2,M=-t*Math.cos(x),A=t*Math.sin(x);f.x=h.x+(M*m.x+A*v.x),f.y=h.y+(M*m.y+A*v.y),f.z=h.z+(M*m.z+A*v.z),l.push(f.x,f.y,f.z),d.subVectors(f,h).normalize(),u.push(d.x,d.y,d.z),c.push(b/r),c.push(w/i)}}for(let b=1;b<=r;b++)for(let g=1;g<=i;g++){const w=(i+1)*(b-1)+(g-1),x=(i+1)*b+(g-1),M=(i+1)*b+g,A=(i+1)*(b-1)+g;o.push(w,x,A),o.push(x,M,A)}this.setIndex(o),this.setAttribute("position",new Nt(l,3)),this.setAttribute("normal",new Nt(u,3)),this.setAttribute("uv",new Nt(c,2));function S(b,g,w,x,M){const A=Math.cos(b),N=Math.sin(b),C=w/g*b,T=Math.cos(C);M.x=x*(2+T)*.5*A,M.y=x*(2+T)*N*.5,M.z=x*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $E(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class VE extends rn{constructor(e=new HR(new ve(-1,-1,0),new ve(-1,1,0),new ve(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new ve,l=new ve,u=new et;let c=new ve;const f=[],d=[],h=[],p=[];v(),this.setIndex(p),this.setAttribute("position",new Nt(f,3)),this.setAttribute("normal",new Nt(d,3)),this.setAttribute("uv",new Nt(h,2));function v(){for(let b=0;b<t;b++)y(b);y(s===!1?t:0),S(),m()}function y(b){c=e.getPointAt(b/t,c);const g=a.normals[b],w=a.binormals[b];for(let x=0;x<=i;x++){const M=x/i*Math.PI*2,A=Math.sin(M),N=-Math.cos(M);l.x=N*g.x+A*w.x,l.y=N*g.y+A*w.y,l.z=N*g.z+A*w.z,l.normalize(),d.push(l.x,l.y,l.z),o.x=c.x+r*l.x,o.y=c.y+r*l.y,o.z=c.z+r*l.z,f.push(o.x,o.y,o.z)}}function m(){for(let b=1;b<=t;b++)for(let g=1;g<=i;g++){const w=(i+1)*(b-1)+(g-1),x=(i+1)*b+(g-1),M=(i+1)*b+g,A=(i+1)*(b-1)+g;p.push(w,x,A),p.push(x,M,A)}}function S(){for(let b=0;b<=t;b++)for(let g=0;g<=i;g++)u.x=b/t,u.y=g/i,h.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new VE(new XS[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class xK extends rn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new ve,s=new ve;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const f=l[u],d=f.start,h=f.count;for(let p=d,v=d+h;p<v;p+=3)for(let y=0;y<3;y++){const m=o.getX(p+y),S=o.getX(p+(y+1)%3);i.fromBufferAttribute(a,m),s.fromBufferAttribute(a,S),hU(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let u=0;u<3;u++){const c=3*o+u,f=3*o+(u+1)%3;i.fromBufferAttribute(a,c),s.fromBufferAttribute(a,f),hU(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Nt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function hU(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var pU=Object.freeze({__proto__:null,BoxGeometry:Vd,CapsuleGeometry:NE,CircleGeometry:PE,ConeGeometry:RE,CylinderGeometry:zm,DodecahedronGeometry:OE,EdgesGeometry:GR,ExtrudeGeometry:kE,IcosahedronGeometry:LE,LatheGeometry:wy,OctahedronGeometry:Sy,PlaneGeometry:Fm,PolyhedronGeometry:cf,RingGeometry:FE,ShapeGeometry:BE,SphereGeometry:_y,TetrahedronGeometry:zE,TorusGeometry:UE,TorusKnotGeometry:$E,TubeGeometry:VE,WireframeGeometry:xK});class bK extends Fi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new mt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class wK extends Ea{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class jR extends Fi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new mt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SK extends jR{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new et(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Pr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new mt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new mt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new mt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _K extends Fi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new mt(16777215),this.specular=new mt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=my,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class EK extends Fi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new mt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class MK extends Fi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class CK extends Fi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=my,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class AK extends Fi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new mt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TK extends Rs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ed(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function DK(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function NK(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function oD(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,a=0;a!==r;++s){const o=t[s]*e;for(let l=0;l!==e;++l)i[a++]=n[o+l]}return i}function qR(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let a=s[r];if(a!==void 0)if(Array.isArray(a))do a=s[r],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[i++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[r],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do a=s[r],a!==void 0&&(e.push(s.time),t.push(a)),s=n[i++];while(s!==void 0)}function Oze(n,e,t,r,i=30){const s=n.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),f=[],d=[];for(let h=0;h<u.times.length;++h){const p=u.times[h]*i;if(!(p<t||p>=r)){f.push(u.times[h]);for(let v=0;v<c;++v)d.push(u.values[h*c+v])}}f.length!==0&&(u.times=ed(f,u.times.constructor),u.values=ed(d,u.values.constructor),a.push(u))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function Ize(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let a=0;a<i;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(m){return m.name===o.name&&m.ValueTypeName===l});if(u===void 0)continue;let c=0;const f=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let d=0;const h=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);const p=o.times.length-1;let v;if(s<=o.times[0]){const m=c,S=f-c;v=o.values.slice(m,S)}else if(s>=o.times[p]){const m=p*f+c,S=m+f-c;v=o.values.slice(m,S)}else{const m=o.createInterpolant(),S=c,b=f-c;m.evaluate(s),v=m.resultBuffer.slice(S,b)}l==="quaternion"&&new yi().fromArray(v).normalize().conjugate().toArray(v);const y=u.times.length;for(let m=0;m<y;++m){const S=m*h+d;if(l==="quaternion")yi.multiplyQuaternionsFlat(u.values,S,v,0,u.values,S);else{const b=h-d*2;for(let g=0;g<b;++g)u.values[S+g]-=v[g]}}}return n.blendMode=_R,n}const kze={convertArray:ed,isTypedArray:DK,getKeyframeOrder:NK,sortedArray:oD,flattenJSON:qR,subclip:Oze,makeClipAdditive:Ize};class Ey{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let a;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(s=i,i=t[++r],e<i)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(r=2,s=o);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}a=r,r=0;break n}break e}for(;r<a;){const o=r+a>>>1;e<t[o]?a=o:r=o+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)t[a]=r[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class PK extends Ey{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Zf,endingEnd:Zf}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,a=e+1,o=i[s],l=i[a];if(o===void 0)switch(this.getSettings_().endingStart){case Jf:s=e,o=2*t-r;break;case g0:s=i.length-2,o=t+i[s]-i[s+1];break;default:s=e,o=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Jf:a=e,l=2*r-t;break;case g0:a=1,l=r+i[1]-i[0];break;default:a=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=a*c}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(r-t)/(i-t),v=p*p,y=v*p,m=-d*y+2*d*v-d*p,S=(1+d)*y+(-1.5-2*d)*v+(-.5+d)*p+1,b=(-1-h)*y+(1.5+h)*v+.5*p,g=h*y-h*v;for(let w=0;w!==o;++w)s[w]=m*a[c+w]+S*a[u+w]+b*a[l+w]+g*a[f+w];return s}}class XR extends Ey{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=(r-t)/(i-t),f=1-c;for(let d=0;d!==o;++d)s[d]=a[u+d]*f+a[l+d]*c;return s}}class RK extends Ey{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Fo{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ed(t,this.TimeBufferType),this.values=ed(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:ed(e.times,Array),values:ed(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new RK(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new XR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new PK(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case p0:t=this.InterpolantFactoryMethodDiscrete;break;case m0:t=this.InterpolantFactoryMethodLinear;break;case dw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return p0;case this.InterpolantFactoryMethodLinear:return m0;case this.InterpolantFactoryMethodSmooth:return dw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,a=i-1;for(;s!==i&&r[s]<e;)++s;for(;a!==-1&&r[a]>t;)--a;if(++a,s!==0||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=r.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=r[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(i!==void 0&&DK(i))for(let o=0,l=i.length;o!==l;++o){const u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===dw,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const u=e[o],c=e[o+1];if(u!==c&&(o!==1||u!==e[0]))if(i)l=!0;else{const f=o*r,d=f-r,h=f+r;for(let p=0;p!==r;++p){const v=t[f+p];if(v!==t[d+p]||v!==t[h+p]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const f=o*r,d=a*r;for(let h=0;h!==r;++h)t[d+h]=t[f+h]}++a}}if(s>0){e[a]=e[s];for(let o=s*r,l=a*r,u=0;u!==r;++u)t[l+u]=t[o+u];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Fo.prototype.TimeBufferType=Float32Array;Fo.prototype.ValueBufferType=Float32Array;Fo.prototype.DefaultInterpolation=m0;class Hd extends Fo{}Hd.prototype.ValueTypeName="bool";Hd.prototype.ValueBufferType=Array;Hd.prototype.DefaultInterpolation=p0;Hd.prototype.InterpolantFactoryMethodLinear=void 0;Hd.prototype.InterpolantFactoryMethodSmooth=void 0;class YR extends Fo{}YR.prototype.ValueTypeName="color";class T0 extends Fo{}T0.prototype.ValueTypeName="number";class OK extends Ey{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(r-t)/(i-t);let u=e*o;for(let c=u+o;u!==c;u+=4)yi.slerpFlat(s,0,a,u-o,a,u,l);return s}}class Um extends Fo{InterpolantFactoryMethodLinear(e){return new OK(this.times,this.values,this.getValueSize(),e)}}Um.prototype.ValueTypeName="quaternion";Um.prototype.DefaultInterpolation=m0;Um.prototype.InterpolantFactoryMethodSmooth=void 0;class Wd extends Fo{}Wd.prototype.ValueTypeName="string";Wd.prototype.ValueBufferType=Array;Wd.prototype.DefaultInterpolation=p0;Wd.prototype.InterpolantFactoryMethodLinear=void 0;Wd.prototype.InterpolantFactoryMethodSmooth=void 0;class D0 extends Fo{}D0.prototype.ValueTypeName="vector";class N0{constructor(e,t=-1,r,i=xE){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=wa(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let a=0,o=r.length;a!==o;++a)t.push(Fze(r[a]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=r.length;s!==a;++s)t.push(Fo.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],u=[];l.push((o+s-1)%s,o,(o+1)%s),u.push(0,1,0);const c=NK(l);l=oD(l,1,c),u=oD(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),a.push(new T0(".morphTargetInfluences["+t[o].name+"]",l,u).scale(1/r))}return new this(e,-1,a)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],c=u.name.match(s);if(c&&c.length>1){const f=c[1];let d=i[f];d||(i[f]=d=[]),d.push(u)}}const a=[];for(const o in i)a.push(this.CreateFromMorphTargetSequence(o,i[o],t,r));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,d,h,p,v){if(h.length!==0){const y=[],m=[];qR(h,y,m,p),y.length!==0&&v.push(new f(d,y,m))}},i=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const d=u[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const h={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let v=0;v<d[p].morphTargets.length;v++)h[d[p].morphTargets[v]]=-1;for(const v in h){const y=[],m=[];for(let S=0;S!==d[p].morphTargets.length;++S){const b=d[p];y.push(b.time),m.push(b.morphTarget===v?1:0)}i.push(new T0(".morphTargetInfluence["+v+"]",y,m))}l=h.length*a}else{const h=".bones["+t[f].name+"]";r(D0,h+".position",d,"pos",i),r(Um,h+".quaternion",d,"rot",i),r(D0,h+".scale",d,"scl",i)}}return i.length===0?null:new this(s,l,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Lze(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return T0;case"vector":case"vector2":case"vector3":case"vector4":return D0;case"color":return YR;case"quaternion":return Um;case"bool":case"boolean":return Hd;case"string":return Wd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Fze(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Lze(n.type);if(n.times===void 0){const t=[],r=[];qR(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ou={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class KR{constructor(e,t,r){const i=this;let s=!1,a=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){o++,s===!1&&i.onStart!==void 0&&i.onStart(c,a,o),s=!0},this.itemEnd=function(c){a++,i.onProgress!==void 0&&i.onProgress(c,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,d=u.length;f<d;f+=2){const h=u[f],p=u[f+1];if(h.global&&(h.lastIndex=0),h.test(c))return p}return null}}}const IK=new KR;class Zs{constructor(e){this.manager=e!==void 0?e:IK,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Zs.DEFAULT_MATERIAL_NAME="__DEFAULT";const Xl={};class Bze extends Error{constructor(e,t){super(e),this.response=t}}class Au extends Zs{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ou.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Xl[e]!==void 0){Xl[e].push({onLoad:t,onProgress:r,onError:i});return}Xl[e]=[],Xl[e].push({onLoad:t,onProgress:r,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=Xl[e],f=u.body.getReader(),d=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),h=d?parseInt(d):0,p=h!==0;let v=0;const y=new ReadableStream({start(m){S();function S(){f.read().then(({done:b,value:g})=>{if(b)m.close();else{v+=g.byteLength;const w=new ProgressEvent("progress",{lengthComputable:p,loaded:v,total:h});for(let x=0,M=c.length;x<M;x++){const A=c[x];A.onProgress&&A.onProgress(w)}m.enqueue(g),S()}})}}});return new Response(y)}else throw new Bze(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return u.json();default:if(o===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(o),d=f&&f[1]?f[1].toLowerCase():void 0,h=new TextDecoder(d);return u.arrayBuffer().then(p=>h.decode(p))}}}).then(u=>{ou.add(e,u);const c=Xl[e];delete Xl[e];for(let f=0,d=c.length;f<d;f++){const h=c[f];h.onLoad&&h.onLoad(u)}}).catch(u=>{const c=Xl[e];if(c===void 0)throw this.manager.itemError(e),u;delete Xl[e];for(let f=0,d=c.length;f<d;f++){const h=c[f];h.onError&&h.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class zze extends Zs{constructor(e){super(e)}load(e,t,r,i){const s=this,a=new Au(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=N0.parse(e[r]);t.push(i)}return t}}class Uze extends Zs{constructor(e){super(e)}load(e,t,r,i){const s=this,a=[],o=new TE,l=new Au(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(f){l.load(e[f],function(d){const h=s.parse(d,!0);a[f]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},u+=1,u===6&&(h.mipmapCount===1&&(o.minFilter=or),o.image=a,o.format=h.format,o.needsUpdate=!0,t&&t(o))},r,i)}if(Array.isArray(e))for(let f=0,d=e.length;f<d;++f)c(f);else l.load(e,function(f){const d=s.parse(f,!0);if(d.isCubemap){const h=d.mipmaps.length/d.mipmapCount;for(let p=0;p<h;p++){a[p]={mipmaps:[]};for(let v=0;v<d.mipmapCount;v++)a[p].mipmaps.push(d.mipmaps[p*d.mipmapCount+v]),a[p].format=d.format,a[p].width=d.width,a[p].height=d.height}o.image=a}else o.image.width=d.width,o.image.height=d.height,o.mipmaps=d.mipmaps;d.mipmapCount===1&&(o.minFilter=or),o.format=d.format,o.needsUpdate=!0,t&&t(o)},r,i);return o}}class P0 extends Zs{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=ou.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=S0("img");function l(){c(),ou.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(f){c(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class $ze extends Zs{constructor(e){super(e)}load(e,t,r,i){const s=new xy;s.colorSpace=ti;const a=new P0(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(u){a.load(e[u],function(c){s.images[u]=c,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class Vze extends Zs{constructor(e){super(e)}load(e,t,r,i){const s=this,a=new dd,o=new Au(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:Zi,a.wrapT=u.wrapT!==void 0?u.wrapT:Zi,a.magFilter=u.magFilter!==void 0?u.magFilter:or,a.minFilter=u.minFilter!==void 0?u.minFilter:or,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?a.colorSpace=u.colorSpace:u.encoding!==void 0&&(a.encoding=u.encoding),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=ul),u.mipmapCount===1&&(a.minFilter=or),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,t&&t(a,u)},r,i),a}}class Hze extends Zs{constructor(e){super(e)}load(e,t,r,i){const s=new Sr,a=new P0(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class ff extends En{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new mt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class kK extends ff{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(En.DEFAULT_UP),this.updateMatrix(),this.groundColor=new mt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const WC=new Kt,mU=new ve,gU=new ve;class ZR{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new et(512,512),this.map=null,this.mapPass=null,this.matrix=new Kt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new by,this._frameExtents=new et(1,1),this._viewportCount=1,this._viewports=[new Un(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;mU.setFromMatrixPosition(e.matrixWorld),t.position.copy(mU),gU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(gU),t.updateMatrixWorld(),WC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(WC),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(WC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Wze extends ZR{constructor(){super(new Rr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=tm*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class LK extends ff{constructor(e,t,r=0,i=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(En.DEFAULT_UP),this.updateMatrix(),this.target=new En,this.distance=r,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new Wze}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const vU=new Kt,kg=new ve,GC=new ve;class Gze extends ZR{constructor(){super(new Rr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new et(4,2),this._viewportCount=6,this._viewports=[new Un(2,1,1,1),new Un(0,1,1,1),new Un(3,1,1,1),new Un(1,1,1,1),new Un(3,0,1,1),new Un(1,0,1,1)],this._cubeDirections=[new ve(1,0,0),new ve(-1,0,0),new ve(0,0,1),new ve(0,0,-1),new ve(0,1,0),new ve(0,-1,0)],this._cubeUps=[new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,0,1),new ve(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),kg.setFromMatrixPosition(e.matrixWorld),r.position.copy(kg),GC.copy(r.position),GC.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(GC),r.updateMatrixWorld(),i.makeTranslation(-kg.x,-kg.y,-kg.z),vU.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vU)}}class FK extends ff{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Gze}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class jze extends ZR{constructor(){super(new au(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class BK extends ff{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(En.DEFAULT_UP),this.updateMatrix(),this.target=new En,this.shadow=new jze}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class zK extends ff{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class UK extends ff{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class $K{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ve)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*r),t.addScaledVector(a[4],1.092548*(r*i)),t.addScaledVector(a[5],1.092548*(i*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(r*s)),t.addScaledVector(a[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*r),t.addScaledVector(a[4],2*.429043*r*i),t.addScaledVector(a[5],2*.429043*i*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*r*s),t.addScaledVector(a[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class VK extends ff{constructor(e=new $K,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class HE extends Zs{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,a=new Au(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=HE.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new mt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(i.uniforms[s]={},a.type){case"t":i.uniforms[s].value=r(a.value);break;case"c":i.uniforms[s].value=new mt().setHex(a.value);break;case"v2":i.uniforms[s].value=new et().fromArray(a.value);break;case"v3":i.uniforms[s].value=new ve().fromArray(a.value);break;case"v4":i.uniforms[s].value=new Un().fromArray(a.value);break;case"m3":i.uniforms[s].value=new pn().fromArray(a.value);break;case"m4":i.uniforms[s].value=new Kt().fromArray(a.value);break;default:i.uniforms[s].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new et().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new et().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:bK,SpriteMaterial:LR,RawShaderMaterial:wK,ShaderMaterial:Ea,PointsMaterial:BR,MeshPhysicalMaterial:SK,MeshStandardMaterial:jR,MeshPhongMaterial:_K,MeshToonMaterial:EK,MeshNormalMaterial:MK,MeshLambertMaterial:CK,MeshDepthMaterial:OR,MeshDistanceMaterial:IR,MeshBasicMaterial:uf,MeshMatcapMaterial:AK,LineDashedMaterial:TK,LineBasicMaterial:Rs,Material:Fi};return new t[e]}}class lD{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class HK extends rn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class WK extends Zs{constructor(e){super(e)}load(e,t,r,i){const s=this,a=new Au(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(h,p){if(t[p]!==void 0)return t[p];const y=h.interleavedBuffers[p],m=s(h,y.buffer),S=cp(y.type,m),b=new CE(S,y.stride);return b.uuid=y.uuid,t[p]=b,b}function s(h,p){if(r[p]!==void 0)return r[p];const y=h.arrayBuffers[p],m=new Uint32Array(y).buffer;return r[p]=m,m}const a=e.isInstancedBufferGeometry?new HK:new rn,o=e.data.index;if(o!==void 0){const h=cp(o.type,o.array);a.setIndex(new kn(h,1))}const l=e.data.attributes;for(const h in l){const p=l[h];let v;if(p.isInterleavedBufferAttribute){const y=i(e.data,p.data);v=new Cd(y,p.itemSize,p.offset,p.normalized)}else{const y=cp(p.type,p.array),m=p.isInstancedBufferAttribute?rm:kn;v=new m(y,p.itemSize,p.normalized)}p.name!==void 0&&(v.name=p.name),p.usage!==void 0&&v.setUsage(p.usage),a.setAttribute(h,v)}const u=e.data.morphAttributes;if(u)for(const h in u){const p=u[h],v=[];for(let y=0,m=p.length;y<m;y++){const S=p[y];let b;if(S.isInterleavedBufferAttribute){const g=i(e.data,S.data);b=new Cd(g,S.itemSize,S.offset,S.normalized)}else{const g=cp(S.type,S.array);b=new kn(g,S.itemSize,S.normalized)}S.name!==void 0&&(b.name=S.name),v.push(b)}a.morphAttributes[h]=v}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let h=0,p=f.length;h!==p;++h){const v=f[h];a.addGroup(v.start,v.count,v.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const h=new ve;d.center!==void 0&&h.fromArray(d.center),a.boundingSphere=new ts(h,d.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class qze extends Zs{constructor(e){super(e)}load(e,t,r,i){const s=this,a=this.path===""?lD.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new Au(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?lD.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Au(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){t!==void 0&&t(u)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,s,l,o,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let f=!1;for(const d in a)if(a[d].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,o,a,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new hd().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new AE().fromJSON(e[s],i);r[o.uuid]=o}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new WK;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;default:l.type in pU?o=pU[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),r[l.uuid]=o}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new HE;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=N0.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function a(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return a(c)}else return l.data?{data:cp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new KR(t);s=new P0(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const f=e[u],d=f.url;if(Array.isArray(d)){const h=[];for(let p=0,v=d.length;p<v;p++){const y=d[p],m=o(y);m!==null&&(m instanceof HTMLImageElement?h.push(m):h.push(new dd(m.data,m.width,m.height)))}i[f.uuid]=new Qf(h)}else{const h=o(f.url);i[f.uuid]=new Qf(h)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(l)}else return a.data?{data:cp(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new P0(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],u=l.url;if(Array.isArray(u)){const c=[];for(let f=0,d=u.length;f<d;f++){const h=u[f],p=await s(h);p!==null&&(p instanceof HTMLImageElement?c.push(p):c.push(new dd(p.data,p.width,p.height)))}r[l.uuid]=new Qf(c)}else{const c=await s(l.url);r[l.uuid]=new Qf(c)}}}return r}parseTextures(e,t){function r(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const i={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],u=l.data;let c;Array.isArray(u)?(c=new xy,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new dd:c=new Sr,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=o.uuid,o.name!==void 0&&(c.name=o.name),o.mapping!==void 0&&(c.mapping=r(o.mapping,Xze)),o.channel!==void 0&&(c.channel=o.channel),o.offset!==void 0&&c.offset.fromArray(o.offset),o.repeat!==void 0&&c.repeat.fromArray(o.repeat),o.center!==void 0&&c.center.fromArray(o.center),o.rotation!==void 0&&(c.rotation=o.rotation),o.wrap!==void 0&&(c.wrapS=r(o.wrap[0],yU),c.wrapT=r(o.wrap[1],yU)),o.format!==void 0&&(c.format=o.format),o.internalFormat!==void 0&&(c.internalFormat=o.internalFormat),o.type!==void 0&&(c.type=o.type),o.colorSpace!==void 0&&(c.colorSpace=o.colorSpace),o.encoding!==void 0&&(c.encoding=o.encoding),o.minFilter!==void 0&&(c.minFilter=r(o.minFilter,xU)),o.magFilter!==void 0&&(c.magFilter=r(o.magFilter,xU)),o.anisotropy!==void 0&&(c.anisotropy=o.anisotropy),o.flipY!==void 0&&(c.flipY=o.flipY),o.generateMipmaps!==void 0&&(c.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(c.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(c.compareFunction=o.compareFunction),o.userData!==void 0&&(c.userData=o.userData),i[o.uuid]=c}return i}parseObject(e,t,r,i,s){let a;function o(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const h=[];for(let p=0,v=d.length;p<v;p++){const y=d[p];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),h.push(r[y])}return h}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function u(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let c,f;switch(e.type){case"Scene":a=new _0,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new mt(e.background):a.background=u(e.background)),e.environment!==void 0&&(a.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new ME(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new EE(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new Rr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new au(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new zK(e.color,e.intensity);break;case"DirectionalLight":a=new BK(e.color,e.intensity);break;case"PointLight":a=new FK(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new UK(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new LK(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new kK(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new VK().fromJSON(e);break;case"SkinnedMesh":c=o(e.geometry),f=l(e.material),a=new sK(c,f),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":c=o(e.geometry),f=l(e.material),a=new Xr(c,f);break;case"InstancedMesh":c=o(e.geometry),f=l(e.material);const d=e.count,h=e.instanceMatrix,p=e.instanceColor;a=new aK(c,f,d),a.instanceMatrix=new rm(new Float32Array(h.array),16),p!==void 0&&(a.instanceColor=new rm(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":c=o(e.geometry),f=l(e.material),a=new oK(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),a.geometry=c,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(v=>{const y=new _s;y.min.fromArray(v.boxMin),y.max.fromArray(v.boxMax);const m=new ts;return m.radius=v.sphereRadius,m.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:y,sphereInitialized:v.sphereInitialized,sphere:m}}),a._maxGeometryCount=e.maxGeometryCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":a=new iK;break;case"Line":a=new qc(o(e.geometry),l(e.material));break;case"LineLoop":a=new lK(o(e.geometry),l(e.material));break;case"LineSegments":a=new Nl(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new uK(o(e.geometry),l(e.material));break;case"Sprite":a=new rK(l(e.material));break;case"Group":a=new hp;break;case"Bone":a=new FR;break;default:a=new En}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let h=0;h<d.length;h++)a.add(this.parseObject(d[h],t,r,i,s))}if(e.animations!==void 0){const d=e.animations;for(let h=0;h<d.length;h++){const p=d[h];a.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const d=e.levels;for(let h=0;h<d.length;h++){const p=d[h],v=a.getObjectByProperty("uuid",p.object);v!==void 0&&a.addLevel(v,p.distance,p.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const Xze={UVMapping:vE,CubeReflectionMapping:Cu,CubeRefractionMapping:jc,EquirectangularReflectionMapping:c0,EquirectangularRefractionMapping:f0,CubeUVReflectionMapping:Lm},yU={RepeatWrapping:d0,ClampToEdgeWrapping:Zi,MirroredRepeatWrapping:h0},xU={NearestFilter:Ur,NearestMipmapNearestFilter:GS,NearestMipmapLinearFilter:Uf,LinearFilter:or,LinearMipmapNearestFilter:bv,LinearMipmapLinearFilter:ul};class Yze extends Zs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=ou.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return ou.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){i&&i(u),ou.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});ou.add(e,l),s.manager.itemStart(e)}}let ab;class JR{static getContext(){return ab===void 0&&(ab=new(window.AudioContext||window.webkitAudioContext)),ab}static setContext(e){ab=e}}class Kze extends Zs{constructor(e){super(e)}load(e,t,r,i){const s=this,a=new Au(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const u=l.slice(0);JR.getContext().decodeAudioData(u,function(f){t(f)}).catch(o)}catch(u){o(u)}},r,i);function o(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const bU=new Kt,wU=new Kt,Af=new Kt;class Zze{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Rr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Rr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Af.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,a=t.near*Math.tan(ud*t.fov*.5)/t.zoom;let o,l;wU.elements[12]=-i,bU.elements[12]=i,o=-a*t.aspect+s,l=a*t.aspect+s,Af.elements[0]=2*t.near/(l-o),Af.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(Af),o=-a*t.aspect-s,l=a*t.aspect-s,Af.elements[0]=2*t.near/(l-o),Af.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(Af)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(wU),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(bU)}}class QR{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=SU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=SU();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function SU(){return(typeof performance>"u"?Date:performance).now()}const Tf=new ve,_U=new yi,Jze=new ve,Df=new ve;class Qze extends En{constructor(){super(),this.type="AudioListener",this.context=JR.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new QR}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Tf,_U,Jze),Df.set(0,0,-1).applyQuaternion(_U),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Tf.x,i),t.positionY.linearRampToValueAtTime(Tf.y,i),t.positionZ.linearRampToValueAtTime(Tf.z,i),t.forwardX.linearRampToValueAtTime(Df.x,i),t.forwardY.linearRampToValueAtTime(Df.y,i),t.forwardZ.linearRampToValueAtTime(Df.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Tf.x,Tf.y,Tf.z),t.setOrientation(Df.x,Df.y,Df.z,r.x,r.y,r.z)}}class GK extends En{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Nf=new ve,EU=new yi,e6e=new ve,Pf=new ve;class t6e extends GK{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Nf,EU,e6e),Pf.set(0,0,1).applyQuaternion(EU);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Nf.x,r),t.positionY.linearRampToValueAtTime(Nf.y,r),t.positionZ.linearRampToValueAtTime(Nf.z,r),t.orientationX.linearRampToValueAtTime(Pf.x,r),t.orientationY.linearRampToValueAtTime(Pf.y,r),t.orientationZ.linearRampToValueAtTime(Pf.z,r)}else t.setPosition(Nf.x,Nf.y,Nf.z),t.setOrientation(Pf.x,Pf.y,Pf.z)}}class n6e{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class jK{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,a;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==i;++o)r[s+o]=r[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(r,s,0,o,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,a=i;s!==a;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let a=0;a!==s;++a)e[t+a]=e[r+a]}_slerp(e,t,r,i){yi.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const a=this._workIndex*s;yi.multiplyQuaternionsFlat(e,a,e,t,e,r),yi.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,r,i,s){const a=1-i;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[r+o]*i}}_lerpAdditive(e,t,r,i,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[r+a]*i}}}const eO="\\[\\]\\.:\\/",r6e=new RegExp("["+eO+"]","g"),tO="[^"+eO+"]",i6e="[^"+eO.replace("\\.","")+"]",s6e=/((?:WC+[\/:])*)/.source.replace("WC",tO),a6e=/(WCOD+)?/.source.replace("WCOD",i6e),o6e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tO),l6e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tO),u6e=new RegExp("^"+s6e+a6e+o6e+l6e+"$"),c6e=["material","materials","bones","map"];class f6e{constructor(e,t,r){const i=r||Mn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Mn{constructor(e,t,r){this.path=t,this.parsedPath=r||Mn.parseTrackName(t),this.node=Mn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Mn.Composite(e,t,r):new Mn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(r6e,"")}static parseTrackName(e){const t=u6e.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);c6e.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=r(o.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Mn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const a=e[i];if(a===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Mn.Composite=f6e;Mn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Mn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Mn.prototype.GetterByBindingType=[Mn.prototype._getValue_direct,Mn.prototype._getValue_array,Mn.prototype._getValue_arrayElement,Mn.prototype._getValue_toArray];Mn.prototype.SetterByBindingTypeAndVersioning=[[Mn.prototype._setValue_direct,Mn.prototype._setValue_direct_setNeedsUpdate,Mn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Mn.prototype._setValue_array,Mn.prototype._setValue_array_setNeedsUpdate,Mn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Mn.prototype._setValue_arrayElement,Mn.prototype._setValue_arrayElement_setNeedsUpdate,Mn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Mn.prototype._setValue_fromArray,Mn.prototype._setValue_fromArray_setNeedsUpdate,Mn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class d6e{constructor(){this.isAnimationObjectGroup=!0,this.uuid=wa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,u=this.nCachedObjects_;for(let c=0,f=arguments.length;c!==f;++c){const d=arguments[c],h=d.uuid;let p=t[h];if(p===void 0){p=l++,t[h]=p,e.push(d);for(let v=0,y=a;v!==y;++v)s[v].push(new Mn(d,r[v],i[v]))}else if(p<u){o=e[p];const v=--u,y=e[v];t[y.uuid]=p,e[p]=y,t[h]=v,e[v]=d;for(let m=0,S=a;m!==S;++m){const b=s[m],g=b[v];let w=b[p];b[p]=g,w===void 0&&(w=new Mn(d,r[m],i[m])),b[v]=w}}else e[p]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const f=s++,d=e[f];t[d.uuid]=c,e[c]=d,t[u]=f,e[f]=l;for(let h=0,p=i;h!==p;++h){const v=r[h],y=v[f],m=v[c];v[c]=y,v[f]=m}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],c=u.uuid,f=t[c];if(f!==void 0)if(delete t[c],f<s){const d=--s,h=e[d],p=--a,v=e[p];t[h.uuid]=f,e[f]=h,t[v.uuid]=d,e[d]=v,e.pop();for(let y=0,m=i;y!==m;++y){const S=r[y],b=S[d],g=S[p];S[f]=b,S[d]=g,S.pop()}}else{const d=--a,h=e[d];d>0&&(t[h.uuid]=f),e[f]=h,e.pop();for(let p=0,v=i;p!==v;++p){const y=r[p];y[f]=y[d],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const a=this._paths,o=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,f=new Array(u);i=s.length,r[e]=i,a.push(e),o.push(t),s.push(f);for(let d=c,h=l.length;d!==h;++d){const p=l[d];f[d]=new Mn(p,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],u=e[o];t[u]=r,a[r]=l,a.pop(),s[r]=s[o],s.pop(),i[r]=i[o],i.pop()}}}class qK{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:Zf,endingEnd:Zf};for(let u=0;u!==a;++u){const c=s[u].createInterpolant(null);o[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=AY,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,a=s/i,o=i/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/a,u[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case _R:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(a),u[c].accumulateAdditive(o);break;case xE:default:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(a),u[c].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const a=r===TY;if(e===0)return s===-1?i:a&&(s&1)===1?t-i:i;if(r===CY){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Jf,i.endingEnd=Jf):(e?i.endingStart=this.zeroSlopeAtStart?Jf:Zf:i.endingStart=g0,t?i.endingEnd=this.zeroSlopeAtEnd?Jf:Zf:i.endingEnd=g0)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=r,this}}const h6e=new Float32Array(1);class p6e extends Dl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,a=e._propertyBindings,o=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let f=0;f!==s;++f){const d=i[f],h=d.name;let p=c[h];if(p!==void 0)++p.referenceCount,a[f]=p;else{if(p=a[f],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,h));continue}const v=t&&t._propertyBindings[f].binding.parsedPath;p=new jK(Mn.create(r,h,v),d.ValueTypeName,d.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,h),a[f]=p}o[f].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const f=o.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let a=i[t];a===void 0&&(a={},i[t]=a),a[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,a=this._bindingsByRootAndName,o=a[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new XR(new Float32Array(2),new Float32Array(2),1,h6e),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let a=typeof e=="string"?N0.findByName(i,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let u=null;if(r===void 0&&(a!==null?r=a.blendMode:r=xE),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;u=l.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const c=new qK(this,a,t,r);return this._bindAction(c,u),this._addInactiveAction(c,o,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?N0.findByName(r,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const u=a[o];this._deactivateAction(u);const c=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=c,t[c]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const a in r){const o=r[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class nO{constructor(e){this.value=e}clone(){return new nO(this.value.clone===void 0?this.value:this.value.clone())}}let m6e=0;class g6e extends Dl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:m6e++}),this.name="",this.usage=b0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class v6e extends CE{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class y6e{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class rO{constructor(e,t,r=0,i=1/0){this.ray=new $d(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new fd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return uD(e,this,r,t),r.sort(MU),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)uD(e[i],this,r,t);return r.sort(MU),r}}function MU(n,e){return n.distance-e.distance}function uD(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,a=i.length;s<a;s++)uD(i[s],e,t,!0)}}class cD{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Pr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class x6e{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const CU=new et;class b6e{constructor(e=new et(1/0,1/0),t=new et(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=CU.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,CU).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const AU=new ve,ob=new ve;class w6e{constructor(e=new ve,t=new ve){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){AU.subVectors(e,this.start),ob.subVectors(this.end,this.start);const r=ob.dot(ob);let s=ob.dot(AU)/r;return t&&(s=Pr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const TU=new ve;class S6e extends En{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new rn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const u=a/l*Math.PI*2,c=o/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Nt(i,3));const s=new Rs({fog:!1,toneMapped:!1});this.cone=new Nl(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),TU.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(TU),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ec=new ve,lb=new Kt,jC=new Kt;class _6e extends Nl{constructor(e){const t=XK(e),r=new rn,i=[],s=[],a=new mt(0,0,1),o=new mt(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}r.setAttribute("position",new Nt(i,3)),r.setAttribute("color",new Nt(s,3));const l=new Rs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");jC.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(lb.multiplyMatrices(jC,o.matrixWorld),ec.setFromMatrixPosition(lb),i.setXYZ(a,ec.x,ec.y,ec.z),lb.multiplyMatrices(jC,o.parent.matrixWorld),ec.setFromMatrixPosition(lb),i.setXYZ(a+1,ec.x,ec.y,ec.z),a+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function XK(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,XK(n.children[t]));return e}class E6e extends Xr{constructor(e,t,r){const i=new _y(t,4,2),s=new uf({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const M6e=new ve,DU=new mt,NU=new mt;class C6e extends En{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Sy(t);i.rotateY(Math.PI*.5),this.material=new uf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),a=new Float32Array(s.count*3);i.setAttribute("color",new kn(a,3)),this.add(new Xr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");DU.copy(this.light.color),NU.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?DU:NU;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(M6e.setFromMatrixPosition(this.light.matrixWorld).negate())}}class A6e extends Nl{constructor(e=10,t=10,r=4473924,i=8947848){r=new mt(r),i=new mt(i);const s=t/2,a=e/t,o=e/2,l=[],u=[];for(let d=0,h=0,p=-o;d<=t;d++,p+=a){l.push(-o,0,p,o,0,p),l.push(p,0,-o,p,0,o);const v=d===s?r:i;v.toArray(u,h),h+=3,v.toArray(u,h),h+=3,v.toArray(u,h),h+=3,v.toArray(u,h),h+=3}const c=new rn;c.setAttribute("position",new Nt(l,3)),c.setAttribute("color",new Nt(u,3));const f=new Rs({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class T6e extends Nl{constructor(e=10,t=16,r=8,i=64,s=4473924,a=8947848){s=new mt(s),a=new mt(a);const o=[],l=[];if(t>1)for(let f=0;f<t;f++){const d=f/t*(Math.PI*2),h=Math.sin(d)*e,p=Math.cos(d)*e;o.push(0,0,0),o.push(h,0,p);const v=f&1?s:a;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let f=0;f<r;f++){const d=f&1?s:a,h=e-e/r*f;for(let p=0;p<i;p++){let v=p/i*(Math.PI*2),y=Math.sin(v)*h,m=Math.cos(v)*h;o.push(y,0,m),l.push(d.r,d.g,d.b),v=(p+1)/i*(Math.PI*2),y=Math.sin(v)*h,m=Math.cos(v)*h,o.push(y,0,m),l.push(d.r,d.g,d.b)}}const u=new rn;u.setAttribute("position",new Nt(o,3)),u.setAttribute("color",new Nt(l,3));const c=new Rs({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const PU=new ve,ub=new ve,RU=new ve;class D6e extends En{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new rn;i.setAttribute("position",new Nt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Rs({fog:!1,toneMapped:!1});this.lightPlane=new qc(i,s),this.add(this.lightPlane),i=new rn,i.setAttribute("position",new Nt([0,0,0,0,0,1],3)),this.targetLine=new qc(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),PU.setFromMatrixPosition(this.light.matrixWorld),ub.setFromMatrixPosition(this.light.target.matrixWorld),RU.subVectors(ub,PU),this.lightPlane.lookAt(ub),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ub),this.targetLine.scale.z=RU.length()}}const cb=new ve,Tr=new yy;class N6e extends Nl{constructor(e){const t=new rn,r=new Rs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(p,v){l(p),l(v)}function l(p){i.push(0,0,0),s.push(0,0,0),a[p]===void 0&&(a[p]=[]),a[p].push(i.length/3-1)}t.setAttribute("position",new Nt(i,3)),t.setAttribute("color",new Nt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new mt(16755200),c=new mt(16711680),f=new mt(43775),d=new mt(16777215),h=new mt(3355443);this.setColors(u,c,f,d,h)}setColors(e,t,r,i,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Tr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Fr("c",t,e,Tr,0,0,-1),Fr("t",t,e,Tr,0,0,1),Fr("n1",t,e,Tr,-r,-i,-1),Fr("n2",t,e,Tr,r,-i,-1),Fr("n3",t,e,Tr,-r,i,-1),Fr("n4",t,e,Tr,r,i,-1),Fr("f1",t,e,Tr,-r,-i,1),Fr("f2",t,e,Tr,r,-i,1),Fr("f3",t,e,Tr,-r,i,1),Fr("f4",t,e,Tr,r,i,1),Fr("u1",t,e,Tr,r*.7,i*1.1,-1),Fr("u2",t,e,Tr,-r*.7,i*1.1,-1),Fr("u3",t,e,Tr,0,i*2,-1),Fr("cf1",t,e,Tr,-r,0,1),Fr("cf2",t,e,Tr,r,0,1),Fr("cf3",t,e,Tr,0,-i,1),Fr("cf4",t,e,Tr,0,i,1),Fr("cn1",t,e,Tr,-r,0,-1),Fr("cn2",t,e,Tr,r,0,-1),Fr("cn3",t,e,Tr,0,-i,-1),Fr("cn4",t,e,Tr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Fr(n,e,t,r,i,s,a){cb.set(i,s,a).unproject(r);const o=e[n];if(o!==void 0){const l=t.getAttribute("position");for(let u=0,c=o.length;u<c;u++)l.setXYZ(o[u],cb.x,cb.y,cb.z)}}const fb=new _s;class P6e extends Nl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new rn;s.setIndex(new kn(r,1)),s.setAttribute("position",new kn(i,3)),super(s,new Rs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&fb.setFromObject(this.object),fb.isEmpty())return;const t=fb.min,r=fb.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class R6e extends Nl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new rn;s.setIndex(new kn(r,1)),s.setAttribute("position",new Nt(i,3)),super(s,new Rs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class O6e extends qc{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new rn;a.setAttribute("position",new Nt(s,3)),a.computeBoundingSphere(),super(a,new Rs({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new rn;l.setAttribute("position",new Nt(o,3)),l.computeBoundingSphere(),this.add(new Xr(l,new uf({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const OU=new ve;let db,qC;class I6e extends En{constructor(e=new ve(0,0,1),t=new ve(0,0,0),r=1,i=16776960,s=r*.2,a=s*.2){super(),this.type="ArrowHelper",db===void 0&&(db=new rn,db.setAttribute("position",new Nt([0,0,0,0,1,0],3)),qC=new zm(0,.5,1,5,1),qC.translate(0,-.5,0)),this.position.copy(t),this.line=new qc(db,new Rs({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xr(qC,new uf({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{OU.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(OU,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class k6e extends Nl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new rn;i.setAttribute("position",new Nt(t,3)),i.setAttribute("color",new Nt(r,3));const s=new Rs({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new mt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class L6e{constructor(){this.type="ShapePath",this.color=new mt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new E0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,a){return this.currentPath.bezierCurveTo(e,t,r,i,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(m){const S=[];for(let b=0,g=m.length;b<g;b++){const w=m[b],x=new hd;x.curves=w.curves,S.push(x)}return S}function r(m,S){const b=S.length;let g=!1;for(let w=b-1,x=0;x<b;w=x++){let M=S[w],A=S[x],N=A.x-M.x,C=A.y-M.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(M=S[x],N=-N,A=S[w],C=-C),m.y<M.y||m.y>A.y)continue;if(m.y===M.y){if(m.x===M.x)return!0}else{const T=C*(m.x-M.x)-N*(m.y-M.y);if(T===0)return!0;if(T<0)continue;g=!g}}else{if(m.y!==M.y)continue;if(A.x<=m.x&&m.x<=M.x||M.x<=m.x&&m.x<=A.x)return!0}}return g}const i=xl.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const u=[];if(s.length===1)return o=s[0],l=new hd,l.curves=o.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const f=[],d=[];let h=[],p=0,v;d[p]=void 0,h[p]=[];for(let m=0,S=s.length;m<S;m++)o=s[m],v=o.getPoints(),a=i(v),a=e?!a:a,a?(!c&&d[p]&&p++,d[p]={s:new hd,p:v},d[p].s.curves=o.curves,c&&p++,h[p]=[]):h[p].push({h:o,p:v[0]});if(!d[0])return t(s);if(d.length>1){let m=!1,S=0;for(let b=0,g=d.length;b<g;b++)f[b]=[];for(let b=0,g=d.length;b<g;b++){const w=h[b];for(let x=0;x<w.length;x++){const M=w[x];let A=!0;for(let N=0;N<d.length;N++)r(M.p,d[N].p)&&(b!==N&&S++,A?(A=!1,f[N].push(M)):m=!0);A&&f[b].push(M)}}S>0&&m===!1&&(h=f)}let y;for(let m=0,S=d.length;m<S;m++){l=d[m].s,u.push(l),y=h[m];for(let b=0,g=y.length;b<g;b++)l.holes.push(y[b].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:mE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=mE);const F6e=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:mR,AddEquation:fc,AddOperation:fY,AdditiveAnimationBlendMode:_R,AdditiveBlending:S3,AgXToneMapping:gY,AlphaFormat:bY,AlwaysCompare:BY,AlwaysDepth:iY,AlwaysStencilFunc:Q3,AmbientLight:zK,AnimationAction:qK,AnimationClip:N0,AnimationLoader:zze,AnimationMixer:p6e,AnimationObjectGroup:d6e,AnimationUtils:kze,ArcCurve:fK,ArrayCamera:eK,ArrowHelper:I6e,AttachedBindMode:A3,Audio:GK,AudioAnalyser:n6e,AudioContext:JR,AudioListener:Qze,AudioLoader:Kze,AxesHelper:k6e,BackSide:Ss,BasicDepthPacking:DY,BasicShadowMap:UX,BatchedMesh:oK,Bone:FR,BooleanKeyframeTrack:Hd,Box2:b6e,Box3:_s,Box3Helper:R6e,BoxGeometry:Vd,BoxHelper:P6e,BufferAttribute:kn,BufferGeometry:rn,BufferGeometryLoader:WK,ByteType:yY,Cache:ou,Camera:yy,CameraHelper:N6e,CanvasTexture:cK,CapsuleGeometry:NE,CatmullRomCurve3:dK,CineonToneMapping:pY,CircleGeometry:PE,ClampToEdgeWrapping:Zi,Clock:QR,Color:mt,ColorKeyframeTrack:YR,ColorManagement:Bn,CompressedArrayTexture:ize,CompressedCubeTexture:sze,CompressedTexture:TE,CompressedTextureLoader:Uze,ConeGeometry:RE,ConstantAlphaFactor:tY,ConstantColorFactor:QX,CubeCamera:GY,CubeReflectionMapping:Cu,CubeRefractionMapping:jc,CubeTexture:xy,CubeTextureLoader:$ze,CubeUVReflectionMapping:Lm,CubicBezierCurve:UR,CubicBezierCurve3:hK,CubicInterpolant:PK,CullFaceBack:w3,CullFaceFront:zX,CullFaceFrontBack:jke,CullFaceNone:BX,Curve:Lo,CurvePath:mK,CustomBlending:$X,CustomToneMapping:mY,CylinderGeometry:zm,Cylindrical:x6e,Data3DTexture:TR,DataArrayTexture:wE,DataTexture:dd,DataTextureLoader:Vze,DataUtils:eFe,DecrementStencilOp:rLe,DecrementWrapStencilOp:sLe,DefaultLoadingManager:IK,DepthFormat:Oc,DepthStencilFormat:Md,DepthTexture:SE,DetachedBindMode:vY,DirectionalLight:BK,DirectionalLightHelper:D6e,DiscreteInterpolant:RK,DisplayP3ColorSpace:bE,DodecahedronGeometry:OE,DoubleSide:da,DstAlphaFactor:XX,DstColorFactor:KX,DynamicCopyUsage:bLe,DynamicDrawUsage:pLe,DynamicReadUsage:vLe,EdgesGeometry:GR,EllipseCurve:DE,EqualCompare:IY,EqualDepth:aY,EqualStencilFunc:uLe,EquirectangularReflectionMapping:c0,EquirectangularRefractionMapping:f0,Euler:vy,EventDispatcher:Dl,ExtrudeGeometry:kE,FileLoader:Au,Float16BufferAttribute:aFe,Float32BufferAttribute:Nt,Float64BufferAttribute:oFe,FloatType:ha,Fog:ME,FogExp2:EE,FramebufferTexture:rze,FrontSide:Mu,Frustum:by,GLBufferAttribute:y6e,GLSL1:SLe,GLSL3:eD,GreaterCompare:kY,GreaterDepth:lY,GreaterEqualCompare:FY,GreaterEqualDepth:oY,GreaterEqualStencilFunc:hLe,GreaterStencilFunc:fLe,GridHelper:A6e,Group:hp,HalfFloatType:Ed,HemisphereLight:kK,HemisphereLightHelper:C6e,IcosahedronGeometry:LE,ImageBitmapLoader:Yze,ImageLoader:P0,ImageUtils:AR,IncrementStencilOp:nLe,IncrementWrapStencilOp:iLe,InstancedBufferAttribute:rm,InstancedBufferGeometry:HK,InstancedInterleavedBuffer:v6e,InstancedMesh:aK,Int16BufferAttribute:iFe,Int32BufferAttribute:sFe,Int8BufferAttribute:tFe,IntType:gR,InterleavedBuffer:CE,InterleavedBufferAttribute:Cd,Interpolant:Ey,InterpolateDiscrete:p0,InterpolateLinear:m0,InterpolateSmooth:dw,InvertStencilOp:aLe,KeepStencilOp:Ff,KeyframeTrack:Fo,LOD:iK,LatheGeometry:wy,Layers:fd,LessCompare:OY,LessDepth:sY,LessEqualCompare:MR,LessEqualDepth:u0,LessEqualStencilFunc:cLe,LessStencilFunc:lLe,Light:ff,LightProbe:VK,Line:qc,Line3:w6e,LineBasicMaterial:Rs,LineCurve:$R,LineCurve3:pK,LineDashedMaterial:TK,LineLoop:lK,LineSegments:Nl,LinearDisplayP3ColorSpace:gy,LinearEncoding:ER,LinearFilter:or,LinearInterpolant:XR,LinearMipMapLinearFilter:Kke,LinearMipMapNearestFilter:Yke,LinearMipmapLinearFilter:ul,LinearMipmapNearestFilter:bv,LinearSRGBColorSpace:Cl,LinearToneMapping:dY,LinearTransfer:v0,Loader:Zs,LoaderUtils:lD,LoadingManager:KR,LoopOnce:CY,LoopPingPong:TY,LoopRepeat:AY,LuminanceAlphaFormat:SY,LuminanceFormat:wY,MOUSE:kf,Material:Fi,MaterialLoader:HE,MathUtils:zY,Matrix3:pn,Matrix4:Kt,MaxEquation:C3,Mesh:Xr,MeshBasicMaterial:uf,MeshDepthMaterial:OR,MeshDistanceMaterial:IR,MeshLambertMaterial:CK,MeshMatcapMaterial:AK,MeshNormalMaterial:MK,MeshPhongMaterial:_K,MeshPhysicalMaterial:SK,MeshStandardMaterial:jR,MeshToonMaterial:EK,MinEquation:M3,MirroredRepeatWrapping:h0,MixOperation:cY,MultiplyBlending:E3,MultiplyOperation:my,NearestFilter:Ur,NearestMipMapLinearFilter:Xke,NearestMipMapNearestFilter:qke,NearestMipmapLinearFilter:Uf,NearestMipmapNearestFilter:GS,NeverCompare:RY,NeverDepth:rY,NeverStencilFunc:oLe,NoBlending:hu,NoColorSpace:pa,NoToneMapping:vl,NormalAnimationBlendMode:xE,NormalBlending:ld,NotEqualCompare:LY,NotEqualDepth:uY,NotEqualStencilFunc:dLe,NumberKeyframeTrack:T0,Object3D:En,ObjectLoader:qze,ObjectSpaceNormalMap:PY,OctahedronGeometry:Sy,OneFactor:GX,OneMinusConstantAlphaFactor:nY,OneMinusConstantColorFactor:eY,OneMinusDstAlphaFactor:YX,OneMinusDstColorFactor:ZX,OneMinusSrcAlphaFactor:WS,OneMinusSrcColorFactor:qX,OrthographicCamera:au,P3Primaries:x0,PCFShadowMap:gE,PCFSoftShadowMap:xv,PMREMGenerator:nD,Path:E0,PerspectiveCamera:Rr,Plane:Jl,PlaneGeometry:Fm,PlaneHelper:O6e,PointLight:FK,PointLightHelper:E6e,Points:uK,PointsMaterial:BR,PolarGridHelper:T6e,PolyhedronGeometry:cf,PositionalAudio:t6e,PropertyBinding:Mn,PropertyMixer:jK,QuadraticBezierCurve:VR,QuadraticBezierCurve3:HR,Quaternion:yi,QuaternionKeyframeTrack:Um,QuaternionLinearInterpolant:OK,RED_GREEN_RGTC2_Format:Z3,RED_RGTC1_Format:MY,REVISION:mE,RGBADepthPacking:NY,RGBAFormat:gs,RGBAIntegerFormat:wR,RGBA_ASTC_10x10_Format:G3,RGBA_ASTC_10x5_Format:V3,RGBA_ASTC_10x6_Format:H3,RGBA_ASTC_10x8_Format:W3,RGBA_ASTC_12x10_Format:j3,RGBA_ASTC_12x12_Format:q3,RGBA_ASTC_4x4_Format:I3,RGBA_ASTC_5x4_Format:k3,RGBA_ASTC_5x5_Format:L3,RGBA_ASTC_6x5_Format:F3,RGBA_ASTC_6x6_Format:B3,RGBA_ASTC_8x5_Format:z3,RGBA_ASTC_8x6_Format:U3,RGBA_ASTC_8x8_Format:$3,RGBA_BPTC_Format:fw,RGBA_ETC2_EAC_Format:O3,RGBA_PVRTC_2BPPV1_Format:P3,RGBA_PVRTC_4BPPV1_Format:N3,RGBA_S3TC_DXT1_Format:lw,RGBA_S3TC_DXT3_Format:uw,RGBA_S3TC_DXT5_Format:cw,RGB_BPTC_SIGNED_Format:X3,RGB_BPTC_UNSIGNED_Format:Y3,RGB_ETC1_Format:SR,RGB_ETC2_Format:R3,RGB_PVRTC_2BPPV1_Format:D3,RGB_PVRTC_4BPPV1_Format:T3,RGB_S3TC_DXT1_Format:ow,RGFormat:EY,RGIntegerFormat:bR,RawShaderMaterial:wK,Ray:$d,Raycaster:rO,Rec709Primaries:y0,RectAreaLight:UK,RedFormat:_Y,RedIntegerFormat:xR,ReinhardToneMapping:hY,RenderTarget:VY,RepeatWrapping:d0,ReplaceStencilOp:tLe,ReverseSubtractEquation:HX,RingGeometry:FE,SIGNED_RED_GREEN_RGTC2_Format:J3,SIGNED_RED_RGTC1_Format:K3,SRGBColorSpace:ti,SRGBTransfer:er,Scene:_0,ShaderChunk:fn,ShaderLib:wo,ShaderMaterial:Ea,ShadowMaterial:bK,Shape:hd,ShapeGeometry:BE,ShapePath:L6e,ShapeUtils:xl,ShortType:xY,Skeleton:AE,SkeletonHelper:_6e,SkinnedMesh:sK,Source:Qf,Sphere:ts,SphereGeometry:_y,Spherical:cD,SphericalHarmonics3:$K,SplineCurve:WR,SpotLight:LK,SpotLightHelper:S6e,Sprite:rK,SpriteMaterial:LR,SrcAlphaFactor:HS,SrcAlphaSaturateFactor:JX,SrcColorFactor:jX,StaticCopyUsage:xLe,StaticDrawUsage:b0,StaticReadUsage:gLe,StereoCamera:Zze,StreamCopyUsage:wLe,StreamDrawUsage:mLe,StreamReadUsage:yLe,StringKeyframeTrack:Wd,SubtractEquation:VX,SubtractiveBlending:_3,TOUCH:Lf,TangentSpaceNormalMap:lf,TetrahedronGeometry:zE,Texture:Sr,TextureLoader:Hze,TorusGeometry:UE,TorusKnotGeometry:$E,Triangle:ma,TriangleFanDrawMode:Qke,TriangleStripDrawMode:Jke,TrianglesDrawMode:Zke,TubeGeometry:VE,UVMapping:vE,Uint16BufferAttribute:DR,Uint32BufferAttribute:NR,Uint8BufferAttribute:nFe,Uint8ClampedBufferAttribute:rFe,Uniform:nO,UniformsGroup:g6e,UniformsLib:dt,UniformsUtils:PR,UnsignedByteType:yl,UnsignedInt248Type:Rc,UnsignedIntType:su,UnsignedShort4444Type:vR,UnsignedShort5551Type:yR,UnsignedShortType:yE,VSMShadowMap:vo,Vector2:et,Vector3:ve,Vector4:Un,VectorKeyframeTrack:D0,VideoTexture:nze,WebGL1Renderer:tK,WebGL3DRenderTarget:VLe,WebGLArrayRenderTarget:$Le,WebGLCoordinateSystem:cl,WebGLCubeRenderTarget:jY,WebGLMultipleRenderTargets:HLe,WebGLRenderTarget:no,WebGLRenderer:kR,WebGLUtils:QY,WebGPUCoordinateSystem:w0,WireframeGeometry:xK,WrapAroundEnding:g0,ZeroCurvatureEnding:Zf,ZeroFactor:WX,ZeroSlopeEnding:Jf,ZeroStencilOp:eLe,_SRGBAFormat:jS,createCanvasElement:$Y,sRGBEncoding:Ic},Symbol.toStringTag,{value:"Module"}));var YK={exports:{}},Gd={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Gd.ConcurrentRoot=1;Gd.ContinuousEventPriority=4;Gd.DefaultEventPriority=16;Gd.DiscreteEventPriority=1;Gd.IdleEventPriority=536870912;Gd.LegacyRoot=0;YK.exports=Gd;var mp=YK.exports,KK={exports:{}},ZK={exports:{}},JK={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e($,L){var X=$.length;$.push(L);e:for(;0<X;){var Z=X-1>>>1,Q=$[Z];if(0<i(Q,L))$[Z]=L,$[X]=Q,X=Z;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var L=$[0],X=$.pop();if(X!==L){$[0]=X;e:for(var Z=0,Q=$.length,K=Q>>>1;Z<K;){var re=2*(Z+1)-1,ce=$[re],ue=re+1,me=$[ue];if(0>i(ce,X))ue<Q&&0>i(me,ce)?($[Z]=me,$[ue]=X,Z=ue):($[Z]=ce,$[re]=X,Z=re);else if(ue<Q&&0>i(me,X))$[Z]=me,$[ue]=X,Z=ue;else break e}}return L}function i($,L){var X=$.sortIndex-L.sortIndex;return X!==0?X:$.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,f=null,d=3,h=!1,p=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b($){for(var L=t(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=$)r(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=t(u)}}function g($){if(v=!1,b($),!p)if(t(l)!==null)p=!0,D(w);else{var L=t(u);L!==null&&O(g,L.startTime-$)}}function w($,L){p=!1,v&&(v=!1,m(A),A=-1),h=!0;var X=d;try{for(b(L),f=t(l);f!==null&&(!(f.expirationTime>L)||$&&!T());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,d=f.priorityLevel;var Q=Z(f.expirationTime<=L);L=n.unstable_now(),typeof Q=="function"?f.callback=Q:f===t(l)&&r(l),b(L)}else r(l);f=t(l)}if(f!==null)var K=!0;else{var re=t(u);re!==null&&O(g,re.startTime-L),K=!1}return K}finally{f=null,d=X,h=!1}}var x=!1,M=null,A=-1,N=5,C=-1;function T(){return!(n.unstable_now()-C<N)}function R(){if(M!==null){var $=n.unstable_now();C=$;var L=!0;try{L=M(!0,$)}finally{L?U():(x=!1,M=null)}}else x=!1}var U;if(typeof S=="function")U=function(){S(R)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,B=F.port2;F.port1.onmessage=R,U=function(){B.postMessage(null)}}else U=function(){y(R,0)};function D($){M=$,x||(x=!0,U())}function O($,L){A=y(function(){$(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){p||h||(p=!0,D(w))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function($){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var X=d;d=L;try{return $()}finally{d=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,L){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=d;d=$;try{return L()}finally{d=X}},n.unstable_scheduleCallback=function($,L,X){var Z=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Z+X:Z):X=Z,$){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=X+Q,$={id:c++,callback:L,priorityLevel:$,startTime:X,expirationTime:Q,sortIndex:-1},X>Z?($.sortIndex=X,e(u,$),t(l)===null&&$===t(u)&&(v?(m(A),A=-1):v=!0,O(g,X-Z))):($.sortIndex=Q,e(l,$),p||h||(p=!0,D(w))),$},n.unstable_shouldYield=T,n.unstable_wrapCallback=function($){var L=d;return function(){var X=d;d=L;try{return $.apply(this,arguments)}finally{d=X}}}})(JK);ZK.exports=JK;var fD=ZK.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B6e=function(e){var t={},r=z,i=fD,s=Object.assign;function a(_){for(var E="https://reactjs.org/docs/error-decoder.html?invariant="+_,P=1;P<arguments.length;P++)E+="&args[]="+encodeURIComponent(arguments[P]);return"Minified React error #"+_+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),p=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),w=Symbol.iterator;function x(_){return _===null||typeof _!="object"?null:(_=w&&_[w]||_["@@iterator"],typeof _=="function"?_:null)}function M(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case c:return"Fragment";case u:return"Portal";case d:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case m:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case p:return(_.displayName||"Context")+".Consumer";case h:return(_._context.displayName||"Context")+".Provider";case v:var E=_.render;return _=_.displayName,_||(_=E.displayName||E.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case S:return E=_.displayName||null,E!==null?E:M(_.type)||"Memo";case b:E=_._payload,_=_._init;try{return M(_(E))}catch{}}return null}function A(_){var E=_.type;switch(_.tag){case 24:return"Cache";case 9:return(E.displayName||"Context")+".Consumer";case 10:return(E._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=E.render,_=_.displayName||_.name||"",E.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return E;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(E);case 8:return E===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof E=="function")return E.displayName||E.name||null;if(typeof E=="string")return E}return null}function N(_){var E=_,P=_;if(_.alternate)for(;E.return;)E=E.return;else{_=E;do E=_,E.flags&4098&&(P=E.return),_=E.return;while(_)}return E.tag===3?P:null}function C(_){if(N(_)!==_)throw Error(a(188))}function T(_){var E=_.alternate;if(!E){if(E=N(_),E===null)throw Error(a(188));return E!==_?null:_}for(var P=_,I=E;;){var V=P.return;if(V===null)break;var Y=V.alternate;if(Y===null){if(I=V.return,I!==null){P=I;continue}break}if(V.child===Y.child){for(Y=V.child;Y;){if(Y===P)return C(V),_;if(Y===I)return C(V),E;Y=Y.sibling}throw Error(a(188))}if(P.return!==I.return)P=V,I=Y;else{for(var we=!1,Be=V.child;Be;){if(Be===P){we=!0,P=V,I=Y;break}if(Be===I){we=!0,I=V,P=Y;break}Be=Be.sibling}if(!we){for(Be=Y.child;Be;){if(Be===P){we=!0,P=Y,I=V;break}if(Be===I){we=!0,I=Y,P=V;break}Be=Be.sibling}if(!we)throw Error(a(189))}}if(P.alternate!==I)throw Error(a(190))}if(P.tag!==3)throw Error(a(188));return P.stateNode.current===P?_:E}function R(_){return _=T(_),_!==null?U(_):null}function U(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var E=U(_);if(E!==null)return E;_=_.sibling}return null}function F(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){if(_.tag!==4){var E=F(_);if(E!==null)return E}_=_.sibling}return null}var B=Array.isArray,D=e.getPublicInstance,O=e.getRootHostContext,$=e.getChildHostContext,L=e.prepareForCommit,X=e.resetAfterCommit,Z=e.createInstance,Q=e.appendInitialChild,K=e.finalizeInitialChildren,re=e.prepareUpdate,ce=e.shouldSetTextContent,ue=e.createTextInstance,me=e.scheduleTimeout,Ee=e.cancelTimeout,xe=e.noTimeout,Te=e.isPrimaryRenderer,De=e.supportsMutation,ie=e.supportsPersistence,Ie=e.supportsHydration,ke=e.getInstanceFromNode,te=e.preparePortalMount,ne=e.getCurrentEventPriority,Ce=e.detachDeletedInstance,se=e.supportsMicrotasks,j=e.scheduleMicrotask,G=e.supportsTestSelectors,fe=e.findFiberRoot,Me=e.getBoundingRect,q=e.getTextContent,J=e.isHiddenSubtree,be=e.matchAccessibilityRole,Se=e.setFocusIfFocusable,Ne=e.setupIntersectionObserver,Fe=e.appendChild,He=e.appendChildToContainer,Oe=e.commitTextUpdate,Je=e.commitMount,qe=e.commitUpdate,lt=e.insertBefore,at=e.insertInContainerBefore,ge=e.removeChild,We=e.removeChildFromContainer,W=e.resetTextContent,pe=e.hideInstance,Re=e.hideTextInstance,Ye=e.unhideInstance,de=e.unhideTextInstance,Ze=e.clearContainer,H=e.cloneInstance,ee=e.createContainerChildSet,oe=e.appendChildToContainerChildSet,ye=e.finalizeContainerChildren,_e=e.replaceContainerChildren,Pe=e.cloneHiddenInstance,$e=e.cloneHiddenTextInstance,Xe=e.canHydrateInstance,tt=e.canHydrateTextInstance,ht=e.canHydrateSuspenseInstance,Dt=e.isSuspenseInstancePending,rt=e.isSuspenseInstanceFallback,_t=e.registerSuspenseInstanceRetry,Vt=e.getNextHydratableSibling,Ir=e.getFirstHydratableChild,Mr=e.getFirstHydratableChildWithinContainer,Jn=e.getFirstHydratableChildWithinSuspenseInstance,zo=e.hydrateInstance,Fu=e.hydrateTextInstance,bi=e.hydrateSuspenseInstance,he=e.getNextHydratableInstanceAfterSuspenseInstance,Le=e.commitHydratedContainer,Ue=e.commitHydratedSuspenseInstance,Ve=e.clearSuspenseBoundary,Ge=e.clearSuspenseBoundaryFromContainer,yt=e.shouldDeleteUnhydratedTailInstances,wt=e.didNotMatchHydratedContainerTextInstance,It=e.didNotMatchHydratedTextInstance,ft;function St(_){if(ft===void 0)try{throw Error()}catch(P){var E=P.stack.trim().match(/\n( *(at )?)/);ft=E&&E[1]||""}return`
`+ft+_}var Bt=!1;function Rt(_,E){if(!_||Bt)return"";Bt=!0;var P=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(E)if(E=function(){throw Error()},Object.defineProperty(E.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(E,[])}catch(ct){var I=ct}Reflect.construct(_,[],E)}else{try{E.call()}catch(ct){I=ct}_.call(E.prototype)}else{try{throw Error()}catch(ct){I=ct}_()}}catch(ct){if(ct&&I&&typeof ct.stack=="string"){for(var V=ct.stack.split(`
`),Y=I.stack.split(`
`),we=V.length-1,Be=Y.length-1;1<=we&&0<=Be&&V[we]!==Y[Be];)Be--;for(;1<=we&&0<=Be;we--,Be--)if(V[we]!==Y[Be]){if(we!==1||Be!==1)do if(we--,Be--,0>Be||V[we]!==Y[Be]){var Qe=`
`+V[we].replace(" at new "," at ");return _.displayName&&Qe.includes("<anonymous>")&&(Qe=Qe.replace("<anonymous>",_.displayName)),Qe}while(1<=we&&0<=Be);break}}}finally{Bt=!1,Error.prepareStackTrace=P}return(_=_?_.displayName||_.name:"")?St(_):""}var Ln=Object.prototype.hasOwnProperty,Kr=[],ir=-1;function ui(_){return{current:_}}function Yt(_){0>ir||(_.current=Kr[ir],Kr[ir]=null,ir--)}function Mt(_,E){ir++,Kr[ir]=_.current,_.current=E}var Da={},mn=ui(Da),Cr=ui(!1),Uo=Da;function Na(_,E){var P=_.type.contextTypes;if(!P)return Da;var I=_.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===E)return I.__reactInternalMemoizedMaskedChildContext;var V={},Y;for(Y in P)V[Y]=E[Y];return I&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=E,_.__reactInternalMemoizedMaskedChildContext=V),V}function ci(_){return _=_.childContextTypes,_!=null}function kr(){Yt(Cr),Yt(mn)}function $o(_,E,P){if(mn.current!==Da)throw Error(a(168));Mt(mn,E),Mt(Cr,P)}function qd(_,E,P){var I=_.stateNode;if(E=E.childContextTypes,typeof I.getChildContext!="function")return P;I=I.getChildContext();for(var V in I)if(!(V in E))throw Error(a(108,A(_)||"Unknown",V));return s({},P,I)}function wi(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||Da,Uo=mn.current,Mt(mn,_),Mt(Cr,Cr.current),!0}function Xd(_,E,P){var I=_.stateNode;if(!I)throw Error(a(169));P?(_=qd(_,E,Uo),I.__reactInternalMemoizedMergedChildContext=_,Yt(Cr),Yt(mn),Mt(mn,_)):Yt(Cr),Mt(Cr,P)}var Js=Math.clz32?Math.clz32:Ree,Iy=Math.log,Pee=Math.LN2;function Ree(_){return _>>>=0,_===0?32:31-(Iy(_)/Pee|0)|0}var ky=64,Ly=4194304;function Wm(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _}}function Fy(_,E){var P=_.pendingLanes;if(P===0)return 0;var I=0,V=_.suspendedLanes,Y=_.pingedLanes,we=P&268435455;if(we!==0){var Be=we&~V;Be!==0?I=Wm(Be):(Y&=we,Y!==0&&(I=Wm(Y)))}else we=P&~V,we!==0?I=Wm(we):Y!==0&&(I=Wm(Y));if(I===0)return 0;if(E!==0&&E!==I&&!(E&V)&&(V=I&-I,Y=E&-E,V>=Y||V===16&&(Y&4194240)!==0))return E;if(I&4&&(I|=P&16),E=_.entangledLanes,E!==0)for(_=_.entanglements,E&=I;0<E;)P=31-Js(E),V=1<<P,I|=_[P],E&=~V;return I}function Oee(_,E){switch(_){case 1:case 2:case 4:return E+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iee(_,E){for(var P=_.suspendedLanes,I=_.pingedLanes,V=_.expirationTimes,Y=_.pendingLanes;0<Y;){var we=31-Js(Y),Be=1<<we,Qe=V[we];Qe===-1?(!(Be&P)||Be&I)&&(V[we]=Oee(Be,E)):Qe<=E&&(_.expiredLanes|=Be),Y&=~Be}}function iM(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function sM(_){for(var E=[],P=0;31>P;P++)E.push(_);return E}function Gm(_,E,P){_.pendingLanes|=E,E!==536870912&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,E=31-Js(E),_[E]=P}function kee(_,E){var P=_.pendingLanes&~E;_.pendingLanes=E,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=E,_.mutableReadLanes&=E,_.entangledLanes&=E,E=_.entanglements;var I=_.eventTimes;for(_=_.expirationTimes;0<P;){var V=31-Js(P),Y=1<<V;E[V]=0,I[V]=-1,_[V]=-1,P&=~Y}}function aM(_,E){var P=_.entangledLanes|=E;for(_=_.entanglements;P;){var I=31-Js(P),V=1<<I;V&E|_[I]&E&&(_[I]|=E),P&=~V}}var Tn=0;function FO(_){return _&=-_,1<_?4<_?_&268435455?16:536870912:4:1}var oM=i.unstable_scheduleCallback,BO=i.unstable_cancelCallback,Lee=i.unstable_shouldYield,Fee=i.unstable_requestPaint,fi=i.unstable_now,lM=i.unstable_ImmediatePriority,Bee=i.unstable_UserBlockingPriority,uM=i.unstable_NormalPriority,zee=i.unstable_IdlePriority,By=null,Vo=null;function Uee(_){if(Vo&&typeof Vo.onCommitFiberRoot=="function")try{Vo.onCommitFiberRoot(By,_,void 0,(_.current.flags&128)===128)}catch{}}function $ee(_,E){return _===E&&(_!==0||1/_===1/E)||_!==_&&E!==E}var Ho=typeof Object.is=="function"?Object.is:$ee,Il=null,zy=!1,cM=!1;function zO(_){Il===null?Il=[_]:Il.push(_)}function Vee(_){zy=!0,zO(_)}function Wo(){if(!cM&&Il!==null){cM=!0;var _=0,E=Tn;try{var P=Il;for(Tn=1;_<P.length;_++){var I=P[_];do I=I(!0);while(I!==null)}Il=null,zy=!1}catch(V){throw Il!==null&&(Il=Il.slice(_+1)),oM(lM,Wo),V}finally{Tn=E,cM=!1}}return null}var Hee=o.ReactCurrentBatchConfig;function Uy(_,E){if(Ho(_,E))return!0;if(typeof _!="object"||_===null||typeof E!="object"||E===null)return!1;var P=Object.keys(_),I=Object.keys(E);if(P.length!==I.length)return!1;for(I=0;I<P.length;I++){var V=P[I];if(!Ln.call(E,V)||!Ho(_[V],E[V]))return!1}return!0}function Wee(_){switch(_.tag){case 5:return St(_.type);case 16:return St("Lazy");case 13:return St("Suspense");case 19:return St("SuspenseList");case 0:case 2:case 15:return _=Rt(_.type,!1),_;case 11:return _=Rt(_.type.render,!1),_;case 1:return _=Rt(_.type,!0),_;default:return""}}function uo(_,E){if(_&&_.defaultProps){E=s({},E),_=_.defaultProps;for(var P in _)E[P]===void 0&&(E[P]=_[P]);return E}return E}var $y=ui(null),Vy=null,Yd=null,fM=null;function dM(){fM=Yd=Vy=null}function UO(_,E,P){Te?(Mt($y,E._currentValue),E._currentValue=P):(Mt($y,E._currentValue2),E._currentValue2=P)}function hM(_){var E=$y.current;Yt($y),Te?_._currentValue=E:_._currentValue2=E}function pM(_,E,P){for(;_!==null;){var I=_.alternate;if((_.childLanes&E)!==E?(_.childLanes|=E,I!==null&&(I.childLanes|=E)):I!==null&&(I.childLanes&E)!==E&&(I.childLanes|=E),_===P)break;_=_.return}}function Kd(_,E){Vy=_,fM=Yd=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&E&&(ta=!0),_.firstContext=null)}function Pa(_){var E=Te?_._currentValue:_._currentValue2;if(fM!==_)if(_={context:_,memoizedValue:E,next:null},Yd===null){if(Vy===null)throw Error(a(308));Yd=_,Vy.dependencies={lanes:0,firstContext:_}}else Yd=Yd.next=_;return E}var Go=null,Bu=!1;function mM(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $O(_,E){_=_.updateQueue,E.updateQueue===_&&(E.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function kl(_,E){return{eventTime:_,lane:E,tag:0,payload:null,callback:null,next:null}}function zu(_,E){var P=_.updateQueue;P!==null&&(P=P.shared,Hr!==null&&_.mode&1&&!(gn&2)?(_=P.interleaved,_===null?(E.next=E,Go===null?Go=[P]:Go.push(P)):(E.next=_.next,_.next=E),P.interleaved=E):(_=P.pending,_===null?E.next=E:(E.next=_.next,_.next=E),P.pending=E))}function Hy(_,E,P){if(E=E.updateQueue,E!==null&&(E=E.shared,(P&4194240)!==0)){var I=E.lanes;I&=_.pendingLanes,P|=I,E.lanes=P,aM(_,P)}}function VO(_,E){var P=_.updateQueue,I=_.alternate;if(I!==null&&(I=I.updateQueue,P===I)){var V=null,Y=null;if(P=P.firstBaseUpdate,P!==null){do{var we={eventTime:P.eventTime,lane:P.lane,tag:P.tag,payload:P.payload,callback:P.callback,next:null};Y===null?V=Y=we:Y=Y.next=we,P=P.next}while(P!==null);Y===null?V=Y=E:Y=Y.next=E}else V=Y=E;P={baseState:I.baseState,firstBaseUpdate:V,lastBaseUpdate:Y,shared:I.shared,effects:I.effects},_.updateQueue=P;return}_=P.lastBaseUpdate,_===null?P.firstBaseUpdate=E:_.next=E,P.lastBaseUpdate=E}function Wy(_,E,P,I){var V=_.updateQueue;Bu=!1;var Y=V.firstBaseUpdate,we=V.lastBaseUpdate,Be=V.shared.pending;if(Be!==null){V.shared.pending=null;var Qe=Be,ct=Qe.next;Qe.next=null,we===null?Y=ct:we.next=ct,we=Qe;var Ct=_.alternate;Ct!==null&&(Ct=Ct.updateQueue,Be=Ct.lastBaseUpdate,Be!==we&&(Be===null?Ct.firstBaseUpdate=ct:Be.next=ct,Ct.lastBaseUpdate=Qe))}if(Y!==null){var sn=V.baseState;we=0,Ct=ct=Qe=null,Be=Y;do{var Wt=Be.lane,Xn=Be.eventTime;if((I&Wt)===Wt){Ct!==null&&(Ct=Ct.next={eventTime:Xn,lane:0,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null});e:{var Lt=_,Vi=Be;switch(Wt=E,Xn=P,Vi.tag){case 1:if(Lt=Vi.payload,typeof Lt=="function"){sn=Lt.call(Xn,sn,Wt);break e}sn=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Vi.payload,Wt=typeof Lt=="function"?Lt.call(Xn,sn,Wt):Lt,Wt==null)break e;sn=s({},sn,Wt);break e;case 2:Bu=!0}}Be.callback!==null&&Be.lane!==0&&(_.flags|=64,Wt=V.effects,Wt===null?V.effects=[Be]:Wt.push(Be))}else Xn={eventTime:Xn,lane:Wt,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},Ct===null?(ct=Ct=Xn,Qe=sn):Ct=Ct.next=Xn,we|=Wt;if(Be=Be.next,Be===null){if(Be=V.shared.pending,Be===null)break;Wt=Be,Be=Wt.next,Wt.next=null,V.lastBaseUpdate=Wt,V.shared.pending=null}}while(!0);if(Ct===null&&(Qe=sn),V.baseState=Qe,V.firstBaseUpdate=ct,V.lastBaseUpdate=Ct,E=V.shared.interleaved,E!==null){V=E;do we|=V.lane,V=V.next;while(V!==E)}else Y===null&&(V.shared.lanes=0);sh|=we,_.lanes=we,_.memoizedState=sn}}function HO(_,E,P){if(_=E.effects,E.effects=null,_!==null)for(E=0;E<_.length;E++){var I=_[E],V=I.callback;if(V!==null){if(I.callback=null,I=P,typeof V!="function")throw Error(a(191,V));V.call(I)}}}var WO=new r.Component().refs;function gM(_,E,P,I){E=_.memoizedState,P=P(I,E),P=P==null?E:s({},E,P),_.memoizedState=P,_.lanes===0&&(_.updateQueue.baseState=P)}var Gy={isMounted:function(_){return(_=_._reactInternals)?N(_)===_:!1},enqueueSetState:function(_,E,P){_=_._reactInternals;var I=us(),V=Vu(_),Y=kl(I,V);Y.payload=E,P!=null&&(Y.callback=P),zu(_,Y),E=La(_,V,I),E!==null&&Hy(E,_,V)},enqueueReplaceState:function(_,E,P){_=_._reactInternals;var I=us(),V=Vu(_),Y=kl(I,V);Y.tag=1,Y.payload=E,P!=null&&(Y.callback=P),zu(_,Y),E=La(_,V,I),E!==null&&Hy(E,_,V)},enqueueForceUpdate:function(_,E){_=_._reactInternals;var P=us(),I=Vu(_),V=kl(P,I);V.tag=2,E!=null&&(V.callback=E),zu(_,V),E=La(_,I,P),E!==null&&Hy(E,_,I)}};function GO(_,E,P,I,V,Y,we){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(I,Y,we):E.prototype&&E.prototype.isPureReactComponent?!Uy(P,I)||!Uy(V,Y):!0}function jO(_,E,P){var I=!1,V=Da,Y=E.contextType;return typeof Y=="object"&&Y!==null?Y=Pa(Y):(V=ci(E)?Uo:mn.current,I=E.contextTypes,Y=(I=I!=null)?Na(_,V):Da),E=new E(P,Y),_.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Gy,_.stateNode=E,E._reactInternals=_,I&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=V,_.__reactInternalMemoizedMaskedChildContext=Y),E}function qO(_,E,P,I){_=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps(P,I),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps(P,I),E.state!==_&&Gy.enqueueReplaceState(E,E.state,null)}function vM(_,E,P,I){var V=_.stateNode;V.props=P,V.state=_.memoizedState,V.refs=WO,mM(_);var Y=E.contextType;typeof Y=="object"&&Y!==null?V.context=Pa(Y):(Y=ci(E)?Uo:mn.current,V.context=Na(_,Y)),V.state=_.memoizedState,Y=E.getDerivedStateFromProps,typeof Y=="function"&&(gM(_,E,Y,P),V.state=_.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(E=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),E!==V.state&&Gy.enqueueReplaceState(V,V.state,null),Wy(_,P,V,I),V.state=_.memoizedState),typeof V.componentDidMount=="function"&&(_.flags|=4194308)}var Zd=[],Jd=0,jy=null,qy=0,Ra=[],Oa=0,hf=null,Ll=1,Fl="";function pf(_,E){Zd[Jd++]=qy,Zd[Jd++]=jy,jy=_,qy=E}function XO(_,E,P){Ra[Oa++]=Ll,Ra[Oa++]=Fl,Ra[Oa++]=hf,hf=_;var I=Ll;_=Fl;var V=32-Js(I)-1;I&=~(1<<V),P+=1;var Y=32-Js(E)+V;if(30<Y){var we=V-V%5;Y=(I&(1<<we)-1).toString(32),I>>=we,V-=we,Ll=1<<32-Js(E)+V|P<<V|I,Fl=Y+_}else Ll=1<<Y|P<<V|I,Fl=_}function yM(_){_.return!==null&&(pf(_,1),XO(_,1,0))}function xM(_){for(;_===jy;)jy=Zd[--Jd],Zd[Jd]=null,qy=Zd[--Jd],Zd[Jd]=null;for(;_===hf;)hf=Ra[--Oa],Ra[Oa]=null,Fl=Ra[--Oa],Ra[Oa]=null,Ll=Ra[--Oa],Ra[Oa]=null}var Qs=null,ea=null,cr=!1,jm=!1,co=null;function YO(_,E){var P=Fa(5,null,null,0);P.elementType="DELETED",P.stateNode=E,P.return=_,E=_.deletions,E===null?(_.deletions=[P],_.flags|=16):E.push(P)}function KO(_,E){switch(_.tag){case 5:return E=Xe(E,_.type,_.pendingProps),E!==null?(_.stateNode=E,Qs=_,ea=Ir(E),!0):!1;case 6:return E=tt(E,_.pendingProps),E!==null?(_.stateNode=E,Qs=_,ea=null,!0):!1;case 13:if(E=ht(E),E!==null){var P=hf!==null?{id:Ll,overflow:Fl}:null;return _.memoizedState={dehydrated:E,treeContext:P,retryLane:1073741824},P=Fa(18,null,null,0),P.stateNode=E,P.return=_,_.child=P,Qs=_,ea=null,!0}return!1;default:return!1}}function bM(_){return(_.mode&1)!==0&&(_.flags&128)===0}function wM(_){if(cr){var E=ea;if(E){var P=E;if(!KO(_,E)){if(bM(_))throw Error(a(418));E=Vt(P);var I=Qs;E&&KO(_,E)?YO(I,P):(_.flags=_.flags&-4097|2,cr=!1,Qs=_)}}else{if(bM(_))throw Error(a(418));_.flags=_.flags&-4097|2,cr=!1,Qs=_}}}function ZO(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;Qs=_}function qm(_){if(!Ie||_!==Qs)return!1;if(!cr)return ZO(_),cr=!0,!1;if(_.tag!==3&&(_.tag!==5||yt(_.type)&&!ce(_.type,_.memoizedProps))){var E=ea;if(E){if(bM(_)){for(_=ea;_;)_=Vt(_);throw Error(a(418))}for(;E;)YO(_,E),E=Vt(E)}}if(ZO(_),_.tag===13){if(!Ie)throw Error(a(316));if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(a(317));ea=he(_)}else ea=Qs?Vt(_.stateNode):null;return!0}function Qd(){Ie&&(ea=Qs=null,jm=cr=!1)}function SM(_){co===null?co=[_]:co.push(_)}function Xm(_,E,P){if(_=P.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(P._owner){if(P=P._owner,P){if(P.tag!==1)throw Error(a(309));var I=P.stateNode}if(!I)throw Error(a(147,_));var V=I,Y=""+_;return E!==null&&E.ref!==null&&typeof E.ref=="function"&&E.ref._stringRef===Y?E.ref:(E=function(we){var Be=V.refs;Be===WO&&(Be=V.refs={}),we===null?delete Be[Y]:Be[Y]=we},E._stringRef=Y,E)}if(typeof _!="string")throw Error(a(284));if(!P._owner)throw Error(a(290,_))}return _}function Xy(_,E){throw _=Object.prototype.toString.call(E),Error(a(31,_==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":_))}function JO(_){var E=_._init;return E(_._payload)}function QO(_){function E(je,ze){if(_){var Ke=je.deletions;Ke===null?(je.deletions=[ze],je.flags|=16):Ke.push(ze)}}function P(je,ze){if(!_)return null;for(;ze!==null;)E(je,ze),ze=ze.sibling;return null}function I(je,ze){for(je=new Map;ze!==null;)ze.key!==null?je.set(ze.key,ze):je.set(ze.index,ze),ze=ze.sibling;return je}function V(je,ze){return je=Wu(je,ze),je.index=0,je.sibling=null,je}function Y(je,ze,Ke){return je.index=Ke,_?(Ke=je.alternate,Ke!==null?(Ke=Ke.index,Ke<ze?(je.flags|=2,ze):Ke):(je.flags|=2,ze)):(je.flags|=1048576,ze)}function we(je){return _&&je.alternate===null&&(je.flags|=2),je}function Be(je,ze,Ke,xt){return ze===null||ze.tag!==6?(ze=s2(Ke,je.mode,xt),ze.return=je,ze):(ze=V(ze,Ke),ze.return=je,ze)}function Qe(je,ze,Ke,xt){var kt=Ke.type;return kt===c?Ct(je,ze,Ke.props.children,xt,Ke.key):ze!==null&&(ze.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===b&&JO(kt)===ze.type)?(xt=V(ze,Ke.props),xt.ref=Xm(je,ze,Ke),xt.return=je,xt):(xt=M1(Ke.type,Ke.key,Ke.props,null,je.mode,xt),xt.ref=Xm(je,ze,Ke),xt.return=je,xt)}function ct(je,ze,Ke,xt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==Ke.containerInfo||ze.stateNode.implementation!==Ke.implementation?(ze=a2(Ke,je.mode,xt),ze.return=je,ze):(ze=V(ze,Ke.children||[]),ze.return=je,ze)}function Ct(je,ze,Ke,xt,kt){return ze===null||ze.tag!==7?(ze=wf(Ke,je.mode,xt,kt),ze.return=je,ze):(ze=V(ze,Ke),ze.return=je,ze)}function sn(je,ze,Ke){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=s2(""+ze,je.mode,Ke),ze.return=je,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:return Ke=M1(ze.type,ze.key,ze.props,null,je.mode,Ke),Ke.ref=Xm(je,null,ze),Ke.return=je,Ke;case u:return ze=a2(ze,je.mode,Ke),ze.return=je,ze;case b:var xt=ze._init;return sn(je,xt(ze._payload),Ke)}if(B(ze)||x(ze))return ze=wf(ze,je.mode,Ke,null),ze.return=je,ze;Xy(je,ze)}return null}function Wt(je,ze,Ke,xt){var kt=ze!==null?ze.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return kt!==null?null:Be(je,ze,""+Ke,xt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:return Ke.key===kt?Qe(je,ze,Ke,xt):null;case u:return Ke.key===kt?ct(je,ze,Ke,xt):null;case b:return kt=Ke._init,Wt(je,ze,kt(Ke._payload),xt)}if(B(Ke)||x(Ke))return kt!==null?null:Ct(je,ze,Ke,xt,null);Xy(je,Ke)}return null}function Xn(je,ze,Ke,xt,kt){if(typeof xt=="string"&&xt!==""||typeof xt=="number")return je=je.get(Ke)||null,Be(ze,je,""+xt,kt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case l:return je=je.get(xt.key===null?Ke:xt.key)||null,Qe(ze,je,xt,kt);case u:return je=je.get(xt.key===null?Ke:xt.key)||null,ct(ze,je,xt,kt);case b:var hn=xt._init;return Xn(je,ze,Ke,hn(xt._payload),kt)}if(B(xt)||x(xt))return je=je.get(Ke)||null,Ct(ze,je,xt,kt,null);Xy(ze,xt)}return null}function Lt(je,ze,Ke,xt){for(var kt=null,hn=null,an=ze,Dn=ze=0,hi=null;an!==null&&Dn<Ke.length;Dn++){an.index>Dn?(hi=an,an=null):hi=an.sibling;var Nn=Wt(je,an,Ke[Dn],xt);if(Nn===null){an===null&&(an=hi);break}_&&an&&Nn.alternate===null&&E(je,an),ze=Y(Nn,ze,Dn),hn===null?kt=Nn:hn.sibling=Nn,hn=Nn,an=hi}if(Dn===Ke.length)return P(je,an),cr&&pf(je,Dn),kt;if(an===null){for(;Dn<Ke.length;Dn++)an=sn(je,Ke[Dn],xt),an!==null&&(ze=Y(an,ze,Dn),hn===null?kt=an:hn.sibling=an,hn=an);return cr&&pf(je,Dn),kt}for(an=I(je,an);Dn<Ke.length;Dn++)hi=Xn(an,je,Dn,Ke[Dn],xt),hi!==null&&(_&&hi.alternate!==null&&an.delete(hi.key===null?Dn:hi.key),ze=Y(hi,ze,Dn),hn===null?kt=hi:hn.sibling=hi,hn=hi);return _&&an.forEach(function(Gu){return E(je,Gu)}),cr&&pf(je,Dn),kt}function Vi(je,ze,Ke,xt){var kt=x(Ke);if(typeof kt!="function")throw Error(a(150));if(Ke=kt.call(Ke),Ke==null)throw Error(a(151));for(var hn=kt=null,an=ze,Dn=ze=0,hi=null,Nn=Ke.next();an!==null&&!Nn.done;Dn++,Nn=Ke.next()){an.index>Dn?(hi=an,an=null):hi=an.sibling;var Gu=Wt(je,an,Nn.value,xt);if(Gu===null){an===null&&(an=hi);break}_&&an&&Gu.alternate===null&&E(je,an),ze=Y(Gu,ze,Dn),hn===null?kt=Gu:hn.sibling=Gu,hn=Gu,an=hi}if(Nn.done)return P(je,an),cr&&pf(je,Dn),kt;if(an===null){for(;!Nn.done;Dn++,Nn=Ke.next())Nn=sn(je,Nn.value,xt),Nn!==null&&(ze=Y(Nn,ze,Dn),hn===null?kt=Nn:hn.sibling=Nn,hn=Nn);return cr&&pf(je,Dn),kt}for(an=I(je,an);!Nn.done;Dn++,Nn=Ke.next())Nn=Xn(an,je,Dn,Nn.value,xt),Nn!==null&&(_&&Nn.alternate!==null&&an.delete(Nn.key===null?Dn:Nn.key),ze=Y(Nn,ze,Dn),hn===null?kt=Nn:hn.sibling=Nn,hn=Nn);return _&&an.forEach(function(bte){return E(je,bte)}),cr&&pf(je,Dn),kt}function Ba(je,ze,Ke,xt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===c&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:e:{for(var kt=Ke.key,hn=ze;hn!==null;){if(hn.key===kt){if(kt=Ke.type,kt===c){if(hn.tag===7){P(je,hn.sibling),ze=V(hn,Ke.props.children),ze.return=je,je=ze;break e}}else if(hn.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===b&&JO(kt)===hn.type){P(je,hn.sibling),ze=V(hn,Ke.props),ze.ref=Xm(je,hn,Ke),ze.return=je,je=ze;break e}P(je,hn);break}else E(je,hn);hn=hn.sibling}Ke.type===c?(ze=wf(Ke.props.children,je.mode,xt,Ke.key),ze.return=je,je=ze):(xt=M1(Ke.type,Ke.key,Ke.props,null,je.mode,xt),xt.ref=Xm(je,ze,Ke),xt.return=je,je=xt)}return we(je);case u:e:{for(hn=Ke.key;ze!==null;){if(ze.key===hn)if(ze.tag===4&&ze.stateNode.containerInfo===Ke.containerInfo&&ze.stateNode.implementation===Ke.implementation){P(je,ze.sibling),ze=V(ze,Ke.children||[]),ze.return=je,je=ze;break e}else{P(je,ze);break}else E(je,ze);ze=ze.sibling}ze=a2(Ke,je.mode,xt),ze.return=je,je=ze}return we(je);case b:return hn=Ke._init,Ba(je,ze,hn(Ke._payload),xt)}if(B(Ke))return Lt(je,ze,Ke,xt);if(x(Ke))return Vi(je,ze,Ke,xt);Xy(je,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,ze!==null&&ze.tag===6?(P(je,ze.sibling),ze=V(ze,Ke),ze.return=je,je=ze):(P(je,ze),ze=s2(Ke,je.mode,xt),ze.return=je,je=ze),we(je)):P(je,ze)}return Ba}var eh=QO(!0),eI=QO(!1),Ym={},Ia=ui(Ym),Km=ui(Ym),th=ui(Ym);function jo(_){if(_===Ym)throw Error(a(174));return _}function _M(_,E){Mt(th,E),Mt(Km,_),Mt(Ia,Ym),_=O(E),Yt(Ia),Mt(Ia,_)}function nh(){Yt(Ia),Yt(Km),Yt(th)}function tI(_){var E=jo(th.current),P=jo(Ia.current);E=$(P,_.type,E),P!==E&&(Mt(Km,_),Mt(Ia,E))}function EM(_){Km.current===_&&(Yt(Ia),Yt(Km))}var mr=ui(0);function Yy(_){for(var E=_;E!==null;){if(E.tag===13){var P=E.memoizedState;if(P!==null&&(P=P.dehydrated,P===null||Dt(P)||rt(P)))return E}else if(E.tag===19&&E.memoizedProps.revealOrder!==void 0){if(E.flags&128)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===_)break;for(;E.sibling===null;){if(E.return===null||E.return===_)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var MM=[];function CM(){for(var _=0;_<MM.length;_++){var E=MM[_];Te?E._workInProgressVersionPrimary=null:E._workInProgressVersionSecondary=null}MM.length=0}var Ky=o.ReactCurrentDispatcher,ka=o.ReactCurrentBatchConfig,rh=0,Ar=null,zi=null,di=null,Zy=!1,Zm=!1,Jm=0,Gee=0;function Ui(){throw Error(a(321))}function AM(_,E){if(E===null)return!1;for(var P=0;P<E.length&&P<_.length;P++)if(!Ho(_[P],E[P]))return!1;return!0}function TM(_,E,P,I,V,Y){if(rh=Y,Ar=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,Ky.current=_===null||_.memoizedState===null?Yee:Kee,_=P(I,V),Zm){Y=0;do{if(Zm=!1,Jm=0,25<=Y)throw Error(a(301));Y+=1,di=zi=null,E.updateQueue=null,Ky.current=Zee,_=P(I,V)}while(Zm)}if(Ky.current=n1,E=zi!==null&&zi.next!==null,rh=0,di=zi=Ar=null,Zy=!1,E)throw Error(a(300));return _}function DM(){var _=Jm!==0;return Jm=0,_}function Bl(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?Ar.memoizedState=di=_:di=di.next=_,di}function qo(){if(zi===null){var _=Ar.alternate;_=_!==null?_.memoizedState:null}else _=zi.next;var E=di===null?Ar.memoizedState:di.next;if(E!==null)di=E,zi=_;else{if(_===null)throw Error(a(310));zi=_,_={memoizedState:zi.memoizedState,baseState:zi.baseState,baseQueue:zi.baseQueue,queue:zi.queue,next:null},di===null?Ar.memoizedState=di=_:di=di.next=_}return di}function mf(_,E){return typeof E=="function"?E(_):E}function Jy(_){var E=qo(),P=E.queue;if(P===null)throw Error(a(311));P.lastRenderedReducer=_;var I=zi,V=I.baseQueue,Y=P.pending;if(Y!==null){if(V!==null){var we=V.next;V.next=Y.next,Y.next=we}I.baseQueue=V=Y,P.pending=null}if(V!==null){Y=V.next,I=I.baseState;var Be=we=null,Qe=null,ct=Y;do{var Ct=ct.lane;if((rh&Ct)===Ct)Qe!==null&&(Qe=Qe.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),I=ct.hasEagerState?ct.eagerState:_(I,ct.action);else{var sn={lane:Ct,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};Qe===null?(Be=Qe=sn,we=I):Qe=Qe.next=sn,Ar.lanes|=Ct,sh|=Ct}ct=ct.next}while(ct!==null&&ct!==Y);Qe===null?we=I:Qe.next=Be,Ho(I,E.memoizedState)||(ta=!0),E.memoizedState=I,E.baseState=we,E.baseQueue=Qe,P.lastRenderedState=I}if(_=P.interleaved,_!==null){V=_;do Y=V.lane,Ar.lanes|=Y,sh|=Y,V=V.next;while(V!==_)}else V===null&&(P.lanes=0);return[E.memoizedState,P.dispatch]}function Qy(_){var E=qo(),P=E.queue;if(P===null)throw Error(a(311));P.lastRenderedReducer=_;var I=P.dispatch,V=P.pending,Y=E.memoizedState;if(V!==null){P.pending=null;var we=V=V.next;do Y=_(Y,we.action),we=we.next;while(we!==V);Ho(Y,E.memoizedState)||(ta=!0),E.memoizedState=Y,E.baseQueue===null&&(E.baseState=Y),P.lastRenderedState=Y}return[Y,I]}function nI(){}function rI(_,E){var P=Ar,I=qo(),V=E(),Y=!Ho(I.memoizedState,V);if(Y&&(I.memoizedState=V,ta=!0),I=I.queue,eg(aI.bind(null,P,I,_),[_]),I.getSnapshot!==E||Y||di!==null&&di.memoizedState.tag&1){if(P.flags|=2048,Qm(9,sI.bind(null,P,I,V,E),void 0,null),Hr===null)throw Error(a(349));rh&30||iI(P,E,V)}return V}function iI(_,E,P){_.flags|=16384,_={getSnapshot:E,value:P},E=Ar.updateQueue,E===null?(E={lastEffect:null,stores:null},Ar.updateQueue=E,E.stores=[_]):(P=E.stores,P===null?E.stores=[_]:P.push(_))}function sI(_,E,P,I){E.value=P,E.getSnapshot=I,oI(E)&&La(_,1,-1)}function aI(_,E,P){return P(function(){oI(E)&&La(_,1,-1)})}function oI(_){var E=_.getSnapshot;_=_.value;try{var P=E();return!Ho(_,P)}catch{return!0}}function NM(_){var E=Bl();return typeof _=="function"&&(_=_()),E.memoizedState=E.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:_},E.queue=_,_=_.dispatch=Xee.bind(null,Ar,_),[E.memoizedState,_]}function Qm(_,E,P,I){return _={tag:_,create:E,destroy:P,deps:I,next:null},E=Ar.updateQueue,E===null?(E={lastEffect:null,stores:null},Ar.updateQueue=E,E.lastEffect=_.next=_):(P=E.lastEffect,P===null?E.lastEffect=_.next=_:(I=P.next,P.next=_,_.next=I,E.lastEffect=_)),_}function lI(){return qo().memoizedState}function e1(_,E,P,I){var V=Bl();Ar.flags|=_,V.memoizedState=Qm(1|E,P,void 0,I===void 0?null:I)}function t1(_,E,P,I){var V=qo();I=I===void 0?null:I;var Y=void 0;if(zi!==null){var we=zi.memoizedState;if(Y=we.destroy,I!==null&&AM(I,we.deps)){V.memoizedState=Qm(E,P,Y,I);return}}Ar.flags|=_,V.memoizedState=Qm(1|E,P,Y,I)}function PM(_,E){return e1(8390656,8,_,E)}function eg(_,E){return t1(2048,8,_,E)}function uI(_,E){return t1(4,2,_,E)}function cI(_,E){return t1(4,4,_,E)}function fI(_,E){if(typeof E=="function")return _=_(),E(_),function(){E(null)};if(E!=null)return _=_(),E.current=_,function(){E.current=null}}function dI(_,E,P){return P=P!=null?P.concat([_]):null,t1(4,4,fI.bind(null,E,_),P)}function RM(){}function hI(_,E){var P=qo();E=E===void 0?null:E;var I=P.memoizedState;return I!==null&&E!==null&&AM(E,I[1])?I[0]:(P.memoizedState=[_,E],_)}function pI(_,E){var P=qo();E=E===void 0?null:E;var I=P.memoizedState;return I!==null&&E!==null&&AM(E,I[1])?I[0]:(_=_(),P.memoizedState=[_,E],_)}function jee(_,E){var P=Tn;Tn=P!==0&&4>P?P:4,_(!0);var I=ka.transition;ka.transition={};try{_(!1),E()}finally{Tn=P,ka.transition=I}}function mI(){return qo().memoizedState}function qee(_,E,P){var I=Vu(_);P={lane:I,action:P,hasEagerState:!1,eagerState:null,next:null},gI(_)?vI(E,P):(yI(_,E,P),P=us(),_=La(_,I,P),_!==null&&xI(_,E,I))}function Xee(_,E,P){var I=Vu(_),V={lane:I,action:P,hasEagerState:!1,eagerState:null,next:null};if(gI(_))vI(E,V);else{yI(_,E,V);var Y=_.alternate;if(_.lanes===0&&(Y===null||Y.lanes===0)&&(Y=E.lastRenderedReducer,Y!==null))try{var we=E.lastRenderedState,Be=Y(we,P);if(V.hasEagerState=!0,V.eagerState=Be,Ho(Be,we))return}catch{}finally{}P=us(),_=La(_,I,P),_!==null&&xI(_,E,I)}}function gI(_){var E=_.alternate;return _===Ar||E!==null&&E===Ar}function vI(_,E){Zm=Zy=!0;var P=_.pending;P===null?E.next=E:(E.next=P.next,P.next=E),_.pending=E}function yI(_,E,P){Hr!==null&&_.mode&1&&!(gn&2)?(_=E.interleaved,_===null?(P.next=P,Go===null?Go=[E]:Go.push(E)):(P.next=_.next,_.next=P),E.interleaved=P):(_=E.pending,_===null?P.next=P:(P.next=_.next,_.next=P),E.pending=P)}function xI(_,E,P){if(P&4194240){var I=E.lanes;I&=_.pendingLanes,P|=I,E.lanes=P,aM(_,P)}}var n1={readContext:Pa,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useInsertionEffect:Ui,useLayoutEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useMutableSource:Ui,useSyncExternalStore:Ui,useId:Ui,unstable_isNewReconciler:!1},Yee={readContext:Pa,useCallback:function(_,E){return Bl().memoizedState=[_,E===void 0?null:E],_},useContext:Pa,useEffect:PM,useImperativeHandle:function(_,E,P){return P=P!=null?P.concat([_]):null,e1(4194308,4,fI.bind(null,E,_),P)},useLayoutEffect:function(_,E){return e1(4194308,4,_,E)},useInsertionEffect:function(_,E){return e1(4,2,_,E)},useMemo:function(_,E){var P=Bl();return E=E===void 0?null:E,_=_(),P.memoizedState=[_,E],_},useReducer:function(_,E,P){var I=Bl();return E=P!==void 0?P(E):E,I.memoizedState=I.baseState=E,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:E},I.queue=_,_=_.dispatch=qee.bind(null,Ar,_),[I.memoizedState,_]},useRef:function(_){var E=Bl();return _={current:_},E.memoizedState=_},useState:NM,useDebugValue:RM,useDeferredValue:function(_){var E=NM(_),P=E[0],I=E[1];return PM(function(){var V=ka.transition;ka.transition={};try{I(_)}finally{ka.transition=V}},[_]),P},useTransition:function(){var _=NM(!1),E=_[0];return _=jee.bind(null,_[1]),Bl().memoizedState=_,[E,_]},useMutableSource:function(){},useSyncExternalStore:function(_,E,P){var I=Ar,V=Bl();if(cr){if(P===void 0)throw Error(a(407));P=P()}else{if(P=E(),Hr===null)throw Error(a(349));rh&30||iI(I,E,P)}V.memoizedState=P;var Y={value:P,getSnapshot:E};return V.queue=Y,PM(aI.bind(null,I,Y,_),[_]),I.flags|=2048,Qm(9,sI.bind(null,I,Y,P,E),void 0,null),P},useId:function(){var _=Bl(),E=Hr.identifierPrefix;if(cr){var P=Fl,I=Ll;P=(I&~(1<<32-Js(I)-1)).toString(32)+P,E=":"+E+"R"+P,P=Jm++,0<P&&(E+="H"+P.toString(32)),E+=":"}else P=Gee++,E=":"+E+"r"+P.toString(32)+":";return _.memoizedState=E},unstable_isNewReconciler:!1},Kee={readContext:Pa,useCallback:hI,useContext:Pa,useEffect:eg,useImperativeHandle:dI,useInsertionEffect:uI,useLayoutEffect:cI,useMemo:pI,useReducer:Jy,useRef:lI,useState:function(){return Jy(mf)},useDebugValue:RM,useDeferredValue:function(_){var E=Jy(mf),P=E[0],I=E[1];return eg(function(){var V=ka.transition;ka.transition={};try{I(_)}finally{ka.transition=V}},[_]),P},useTransition:function(){var _=Jy(mf)[0],E=qo().memoizedState;return[_,E]},useMutableSource:nI,useSyncExternalStore:rI,useId:mI,unstable_isNewReconciler:!1},Zee={readContext:Pa,useCallback:hI,useContext:Pa,useEffect:eg,useImperativeHandle:dI,useInsertionEffect:uI,useLayoutEffect:cI,useMemo:pI,useReducer:Qy,useRef:lI,useState:function(){return Qy(mf)},useDebugValue:RM,useDeferredValue:function(_){var E=Qy(mf),P=E[0],I=E[1];return eg(function(){var V=ka.transition;ka.transition={};try{I(_)}finally{ka.transition=V}},[_]),P},useTransition:function(){var _=Qy(mf)[0],E=qo().memoizedState;return[_,E]},useMutableSource:nI,useSyncExternalStore:rI,useId:mI,unstable_isNewReconciler:!1};function OM(_,E){try{var P="",I=E;do P+=Wee(I),I=I.return;while(I);var V=P}catch(Y){V=`
Error generating stack: `+Y.message+`
`+Y.stack}return{value:_,source:E,stack:V}}function IM(_,E){try{console.error(E.value)}catch(P){setTimeout(function(){throw P})}}var Jee=typeof WeakMap=="function"?WeakMap:Map;function bI(_,E,P){P=kl(-1,P),P.tag=3,P.payload={element:null};var I=E.value;return P.callback=function(){y1||(y1=!0,JM=I),IM(_,E)},P}function wI(_,E,P){P=kl(-1,P),P.tag=3;var I=_.type.getDerivedStateFromError;if(typeof I=="function"){var V=E.value;P.payload=function(){return I(V)},P.callback=function(){IM(_,E)}}var Y=_.stateNode;return Y!==null&&typeof Y.componentDidCatch=="function"&&(P.callback=function(){IM(_,E),typeof I!="function"&&(Uu===null?Uu=new Set([this]):Uu.add(this));var we=E.stack;this.componentDidCatch(E.value,{componentStack:we!==null?we:""})}),P}function SI(_,E,P){var I=_.pingCache;if(I===null){I=_.pingCache=new Jee;var V=new Set;I.set(E,V)}else V=I.get(E),V===void 0&&(V=new Set,I.set(E,V));V.has(P)||(V.add(P),_=dte.bind(null,_,E,P),E.then(_,_))}function _I(_){do{var E;if((E=_.tag===13)&&(E=_.memoizedState,E=E!==null?E.dehydrated!==null:!0),E)return _;_=_.return}while(_!==null);return null}function EI(_,E,P,I,V){return _.mode&1?(_.flags|=65536,_.lanes=V,_):(_===E?_.flags|=65536:(_.flags|=128,P.flags|=131072,P.flags&=-52805,P.tag===1&&(P.alternate===null?P.tag=17:(E=kl(-1,1),E.tag=2,zu(P,E))),P.lanes|=1),_)}function Xo(_){_.flags|=4}function MI(_,E){if(_!==null&&_.child===E.child)return!0;if(E.flags&16)return!1;for(_=E.child;_!==null;){if(_.flags&12854||_.subtreeFlags&12854)return!1;_=_.sibling}return!0}var tg,ng,r1,i1;if(De)tg=function(_,E){for(var P=E.child;P!==null;){if(P.tag===5||P.tag===6)Q(_,P.stateNode);else if(P.tag!==4&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===E)break;for(;P.sibling===null;){if(P.return===null||P.return===E)return;P=P.return}P.sibling.return=P.return,P=P.sibling}},ng=function(){},r1=function(_,E,P,I,V){if(_=_.memoizedProps,_!==I){var Y=E.stateNode,we=jo(Ia.current);P=re(Y,P,_,I,V,we),(E.updateQueue=P)&&Xo(E)}},i1=function(_,E,P,I){P!==I&&Xo(E)};else if(ie){tg=function(_,E,P,I){for(var V=E.child;V!==null;){if(V.tag===5){var Y=V.stateNode;P&&I&&(Y=Pe(Y,V.type,V.memoizedProps,V)),Q(_,Y)}else if(V.tag===6)Y=V.stateNode,P&&I&&(Y=$e(Y,V.memoizedProps,V)),Q(_,Y);else if(V.tag!==4){if(V.tag===22&&V.memoizedState!==null)Y=V.child,Y!==null&&(Y.return=V),tg(_,V,!0,!0);else if(V.child!==null){V.child.return=V,V=V.child;continue}}if(V===E)break;for(;V.sibling===null;){if(V.return===null||V.return===E)return;V=V.return}V.sibling.return=V.return,V=V.sibling}};var CI=function(_,E,P,I){for(var V=E.child;V!==null;){if(V.tag===5){var Y=V.stateNode;P&&I&&(Y=Pe(Y,V.type,V.memoizedProps,V)),oe(_,Y)}else if(V.tag===6)Y=V.stateNode,P&&I&&(Y=$e(Y,V.memoizedProps,V)),oe(_,Y);else if(V.tag!==4){if(V.tag===22&&V.memoizedState!==null)Y=V.child,Y!==null&&(Y.return=V),CI(_,V,!0,!0);else if(V.child!==null){V.child.return=V,V=V.child;continue}}if(V===E)break;for(;V.sibling===null;){if(V.return===null||V.return===E)return;V=V.return}V.sibling.return=V.return,V=V.sibling}};ng=function(_,E){var P=E.stateNode;if(!MI(_,E)){_=P.containerInfo;var I=ee(_);CI(I,E,!1,!1),P.pendingChildren=I,Xo(E),ye(_,I)}},r1=function(_,E,P,I,V){var Y=_.stateNode,we=_.memoizedProps;if((_=MI(_,E))&&we===I)E.stateNode=Y;else{var Be=E.stateNode,Qe=jo(Ia.current),ct=null;we!==I&&(ct=re(Be,P,we,I,V,Qe)),_&&ct===null?E.stateNode=Y:(Y=H(Y,ct,P,we,I,E,_,Be),K(Y,P,I,V,Qe)&&Xo(E),E.stateNode=Y,_?Xo(E):tg(Y,E,!1,!1))}},i1=function(_,E,P,I){P!==I?(_=jo(th.current),P=jo(Ia.current),E.stateNode=ue(I,_,P,E),Xo(E)):E.stateNode=_.stateNode}}else ng=function(){},r1=function(){},i1=function(){};function rg(_,E){if(!cr)switch(_.tailMode){case"hidden":E=_.tail;for(var P=null;E!==null;)E.alternate!==null&&(P=E),E=E.sibling;P===null?_.tail=null:P.sibling=null;break;case"collapsed":P=_.tail;for(var I=null;P!==null;)P.alternate!==null&&(I=P),P=P.sibling;I===null?E||_.tail===null?_.tail=null:_.tail.sibling=null:I.sibling=null}}function $i(_){var E=_.alternate!==null&&_.alternate.child===_.child,P=0,I=0;if(E)for(var V=_.child;V!==null;)P|=V.lanes|V.childLanes,I|=V.subtreeFlags&14680064,I|=V.flags&14680064,V.return=_,V=V.sibling;else for(V=_.child;V!==null;)P|=V.lanes|V.childLanes,I|=V.subtreeFlags,I|=V.flags,V.return=_,V=V.sibling;return _.subtreeFlags|=I,_.childLanes=P,E}function Qee(_,E,P){var I=E.pendingProps;switch(xM(E),E.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $i(E),null;case 1:return ci(E.type)&&kr(),$i(E),null;case 3:return I=E.stateNode,nh(),Yt(Cr),Yt(mn),CM(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(_===null||_.child===null)&&(qm(E)?Xo(E):_===null||_.memoizedState.isDehydrated&&!(E.flags&256)||(E.flags|=1024,co!==null&&(t2(co),co=null))),ng(_,E),$i(E),null;case 5:EM(E),P=jo(th.current);var V=E.type;if(_!==null&&E.stateNode!=null)r1(_,E,V,I,P),_.ref!==E.ref&&(E.flags|=512,E.flags|=2097152);else{if(!I){if(E.stateNode===null)throw Error(a(166));return $i(E),null}if(_=jo(Ia.current),qm(E)){if(!Ie)throw Error(a(175));_=zo(E.stateNode,E.type,E.memoizedProps,P,_,E,!jm),E.updateQueue=_,_!==null&&Xo(E)}else{var Y=Z(V,I,P,_,E);tg(Y,E,!1,!1),E.stateNode=Y,K(Y,V,I,P,_)&&Xo(E)}E.ref!==null&&(E.flags|=512,E.flags|=2097152)}return $i(E),null;case 6:if(_&&E.stateNode!=null)i1(_,E,_.memoizedProps,I);else{if(typeof I!="string"&&E.stateNode===null)throw Error(a(166));if(_=jo(th.current),P=jo(Ia.current),qm(E)){if(!Ie)throw Error(a(176));if(_=E.stateNode,I=E.memoizedProps,(P=Fu(_,I,E,!jm))&&(V=Qs,V!==null))switch(Y=(V.mode&1)!==0,V.tag){case 3:wt(V.stateNode.containerInfo,_,I,Y);break;case 5:It(V.type,V.memoizedProps,V.stateNode,_,I,Y)}P&&Xo(E)}else E.stateNode=ue(I,_,P,E)}return $i(E),null;case 13:if(Yt(mr),I=E.memoizedState,cr&&ea!==null&&E.mode&1&&!(E.flags&128)){for(_=ea;_;)_=Vt(_);return Qd(),E.flags|=98560,E}if(I!==null&&I.dehydrated!==null){if(I=qm(E),_===null){if(!I)throw Error(a(318));if(!Ie)throw Error(a(344));if(_=E.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(a(317));bi(_,E)}else Qd(),!(E.flags&128)&&(E.memoizedState=null),E.flags|=4;return $i(E),null}return co!==null&&(t2(co),co=null),E.flags&128?(E.lanes=P,E):(I=I!==null,P=!1,_===null?qm(E):P=_.memoizedState!==null,I&&!P&&(E.child.flags|=8192,E.mode&1&&(_===null||mr.current&1?Zr===0&&(Zr=3):r2())),E.updateQueue!==null&&(E.flags|=4),$i(E),null);case 4:return nh(),ng(_,E),_===null&&te(E.stateNode.containerInfo),$i(E),null;case 10:return hM(E.type._context),$i(E),null;case 17:return ci(E.type)&&kr(),$i(E),null;case 19:if(Yt(mr),V=E.memoizedState,V===null)return $i(E),null;if(I=(E.flags&128)!==0,Y=V.rendering,Y===null)if(I)rg(V,!1);else{if(Zr!==0||_!==null&&_.flags&128)for(_=E.child;_!==null;){if(Y=Yy(_),Y!==null){for(E.flags|=128,rg(V,!1),_=Y.updateQueue,_!==null&&(E.updateQueue=_,E.flags|=4),E.subtreeFlags=0,_=P,I=E.child;I!==null;)P=I,V=_,P.flags&=14680066,Y=P.alternate,Y===null?(P.childLanes=0,P.lanes=V,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=Y.childLanes,P.lanes=Y.lanes,P.child=Y.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=Y.memoizedProps,P.memoizedState=Y.memoizedState,P.updateQueue=Y.updateQueue,P.type=Y.type,V=Y.dependencies,P.dependencies=V===null?null:{lanes:V.lanes,firstContext:V.firstContext}),I=I.sibling;return Mt(mr,mr.current&1|2),E.child}_=_.sibling}V.tail!==null&&fi()>ZM&&(E.flags|=128,I=!0,rg(V,!1),E.lanes=4194304)}else{if(!I)if(_=Yy(Y),_!==null){if(E.flags|=128,I=!0,_=_.updateQueue,_!==null&&(E.updateQueue=_,E.flags|=4),rg(V,!0),V.tail===null&&V.tailMode==="hidden"&&!Y.alternate&&!cr)return $i(E),null}else 2*fi()-V.renderingStartTime>ZM&&P!==1073741824&&(E.flags|=128,I=!0,rg(V,!1),E.lanes=4194304);V.isBackwards?(Y.sibling=E.child,E.child=Y):(_=V.last,_!==null?_.sibling=Y:E.child=Y,V.last=Y)}return V.tail!==null?(E=V.tail,V.rendering=E,V.tail=E.sibling,V.renderingStartTime=fi(),E.sibling=null,_=mr.current,Mt(mr,I?_&1|2:_&1),E):($i(E),null);case 22:case 23:return n2(),I=E.memoizedState!==null,_!==null&&_.memoizedState!==null!==I&&(E.flags|=8192),I&&E.mode&1?na&1073741824&&($i(E),De&&E.subtreeFlags&6&&(E.flags|=8192)):$i(E),null;case 24:return null;case 25:return null}throw Error(a(156,E.tag))}var ete=o.ReactCurrentOwner,ta=!1;function ls(_,E,P,I){E.child=_===null?eI(E,null,P,I):eh(E,_.child,P,I)}function AI(_,E,P,I,V){P=P.render;var Y=E.ref;return Kd(E,V),I=TM(_,E,P,I,Y,V),P=DM(),_!==null&&!ta?(E.updateQueue=_.updateQueue,E.flags&=-2053,_.lanes&=~V,zl(_,E,V)):(cr&&P&&yM(E),E.flags|=1,ls(_,E,I,V),E.child)}function TI(_,E,P,I,V){if(_===null){var Y=P.type;return typeof Y=="function"&&!i2(Y)&&Y.defaultProps===void 0&&P.compare===null&&P.defaultProps===void 0?(E.tag=15,E.type=Y,DI(_,E,Y,I,V)):(_=M1(P.type,null,I,E,E.mode,V),_.ref=E.ref,_.return=E,E.child=_)}if(Y=_.child,!(_.lanes&V)){var we=Y.memoizedProps;if(P=P.compare,P=P!==null?P:Uy,P(we,I)&&_.ref===E.ref)return zl(_,E,V)}return E.flags|=1,_=Wu(Y,I),_.ref=E.ref,_.return=E,E.child=_}function DI(_,E,P,I,V){if(_!==null&&Uy(_.memoizedProps,I)&&_.ref===E.ref)if(ta=!1,(_.lanes&V)!==0)_.flags&131072&&(ta=!0);else return E.lanes=_.lanes,zl(_,E,V);return kM(_,E,P,I,V)}function NI(_,E,P){var I=E.pendingProps,V=I.children,Y=_!==null?_.memoizedState:null;if(I.mode==="hidden")if(!(E.mode&1))E.memoizedState={baseLanes:0,cachePool:null},Mt(ih,na),na|=P;else if(P&1073741824)E.memoizedState={baseLanes:0,cachePool:null},I=Y!==null?Y.baseLanes:P,Mt(ih,na),na|=I;else return _=Y!==null?Y.baseLanes|P:P,E.lanes=E.childLanes=1073741824,E.memoizedState={baseLanes:_,cachePool:null},E.updateQueue=null,Mt(ih,na),na|=_,null;else Y!==null?(I=Y.baseLanes|P,E.memoizedState=null):I=P,Mt(ih,na),na|=I;return ls(_,E,V,P),E.child}function PI(_,E){var P=E.ref;(_===null&&P!==null||_!==null&&_.ref!==P)&&(E.flags|=512,E.flags|=2097152)}function kM(_,E,P,I,V){var Y=ci(P)?Uo:mn.current;return Y=Na(E,Y),Kd(E,V),P=TM(_,E,P,I,Y,V),I=DM(),_!==null&&!ta?(E.updateQueue=_.updateQueue,E.flags&=-2053,_.lanes&=~V,zl(_,E,V)):(cr&&I&&yM(E),E.flags|=1,ls(_,E,P,V),E.child)}function RI(_,E,P,I,V){if(ci(P)){var Y=!0;wi(E)}else Y=!1;if(Kd(E,V),E.stateNode===null)_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),jO(E,P,I),vM(E,P,I,V),I=!0;else if(_===null){var we=E.stateNode,Be=E.memoizedProps;we.props=Be;var Qe=we.context,ct=P.contextType;typeof ct=="object"&&ct!==null?ct=Pa(ct):(ct=ci(P)?Uo:mn.current,ct=Na(E,ct));var Ct=P.getDerivedStateFromProps,sn=typeof Ct=="function"||typeof we.getSnapshotBeforeUpdate=="function";sn||typeof we.UNSAFE_componentWillReceiveProps!="function"&&typeof we.componentWillReceiveProps!="function"||(Be!==I||Qe!==ct)&&qO(E,we,I,ct),Bu=!1;var Wt=E.memoizedState;we.state=Wt,Wy(E,I,we,V),Qe=E.memoizedState,Be!==I||Wt!==Qe||Cr.current||Bu?(typeof Ct=="function"&&(gM(E,P,Ct,I),Qe=E.memoizedState),(Be=Bu||GO(E,P,Be,I,Wt,Qe,ct))?(sn||typeof we.UNSAFE_componentWillMount!="function"&&typeof we.componentWillMount!="function"||(typeof we.componentWillMount=="function"&&we.componentWillMount(),typeof we.UNSAFE_componentWillMount=="function"&&we.UNSAFE_componentWillMount()),typeof we.componentDidMount=="function"&&(E.flags|=4194308)):(typeof we.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=I,E.memoizedState=Qe),we.props=I,we.state=Qe,we.context=ct,I=Be):(typeof we.componentDidMount=="function"&&(E.flags|=4194308),I=!1)}else{we=E.stateNode,$O(_,E),Be=E.memoizedProps,ct=E.type===E.elementType?Be:uo(E.type,Be),we.props=ct,sn=E.pendingProps,Wt=we.context,Qe=P.contextType,typeof Qe=="object"&&Qe!==null?Qe=Pa(Qe):(Qe=ci(P)?Uo:mn.current,Qe=Na(E,Qe));var Xn=P.getDerivedStateFromProps;(Ct=typeof Xn=="function"||typeof we.getSnapshotBeforeUpdate=="function")||typeof we.UNSAFE_componentWillReceiveProps!="function"&&typeof we.componentWillReceiveProps!="function"||(Be!==sn||Wt!==Qe)&&qO(E,we,I,Qe),Bu=!1,Wt=E.memoizedState,we.state=Wt,Wy(E,I,we,V);var Lt=E.memoizedState;Be!==sn||Wt!==Lt||Cr.current||Bu?(typeof Xn=="function"&&(gM(E,P,Xn,I),Lt=E.memoizedState),(ct=Bu||GO(E,P,ct,I,Wt,Lt,Qe)||!1)?(Ct||typeof we.UNSAFE_componentWillUpdate!="function"&&typeof we.componentWillUpdate!="function"||(typeof we.componentWillUpdate=="function"&&we.componentWillUpdate(I,Lt,Qe),typeof we.UNSAFE_componentWillUpdate=="function"&&we.UNSAFE_componentWillUpdate(I,Lt,Qe)),typeof we.componentDidUpdate=="function"&&(E.flags|=4),typeof we.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof we.componentDidUpdate!="function"||Be===_.memoizedProps&&Wt===_.memoizedState||(E.flags|=4),typeof we.getSnapshotBeforeUpdate!="function"||Be===_.memoizedProps&&Wt===_.memoizedState||(E.flags|=1024),E.memoizedProps=I,E.memoizedState=Lt),we.props=I,we.state=Lt,we.context=Qe,I=ct):(typeof we.componentDidUpdate!="function"||Be===_.memoizedProps&&Wt===_.memoizedState||(E.flags|=4),typeof we.getSnapshotBeforeUpdate!="function"||Be===_.memoizedProps&&Wt===_.memoizedState||(E.flags|=1024),I=!1)}return LM(_,E,P,I,Y,V)}function LM(_,E,P,I,V,Y){PI(_,E);var we=(E.flags&128)!==0;if(!I&&!we)return V&&Xd(E,P,!1),zl(_,E,Y);I=E.stateNode,ete.current=E;var Be=we&&typeof P.getDerivedStateFromError!="function"?null:I.render();return E.flags|=1,_!==null&&we?(E.child=eh(E,_.child,null,Y),E.child=eh(E,null,Be,Y)):ls(_,E,Be,Y),E.memoizedState=I.state,V&&Xd(E,P,!0),E.child}function OI(_){var E=_.stateNode;E.pendingContext?$o(_,E.pendingContext,E.pendingContext!==E.context):E.context&&$o(_,E.context,!1),_M(_,E.containerInfo)}function II(_,E,P,I,V){return Qd(),SM(V),E.flags|=256,ls(_,E,P,I),E.child}var s1={dehydrated:null,treeContext:null,retryLane:0};function a1(_){return{baseLanes:_,cachePool:null}}function kI(_,E,P){var I=E.pendingProps,V=mr.current,Y=!1,we=(E.flags&128)!==0,Be;if((Be=we)||(Be=_!==null&&_.memoizedState===null?!1:(V&2)!==0),Be?(Y=!0,E.flags&=-129):(_===null||_.memoizedState!==null)&&(V|=1),Mt(mr,V&1),_===null)return wM(E),_=E.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?(E.mode&1?rt(_)?E.lanes=8:E.lanes=1073741824:E.lanes=1,null):(V=I.children,_=I.fallback,Y?(I=E.mode,Y=E.child,V={mode:"hidden",children:V},!(I&1)&&Y!==null?(Y.childLanes=0,Y.pendingProps=V):Y=C1(V,I,0,null),_=wf(_,I,P,null),Y.return=E,_.return=E,Y.sibling=_,E.child=Y,E.child.memoizedState=a1(P),E.memoizedState=s1,_):FM(E,V));if(V=_.memoizedState,V!==null){if(Be=V.dehydrated,Be!==null){if(we)return E.flags&256?(E.flags&=-257,o1(_,E,P,Error(a(422)))):E.memoizedState!==null?(E.child=_.child,E.flags|=128,null):(Y=I.fallback,V=E.mode,I=C1({mode:"visible",children:I.children},V,0,null),Y=wf(Y,V,P,null),Y.flags|=2,I.return=E,Y.return=E,I.sibling=Y,E.child=I,E.mode&1&&eh(E,_.child,null,P),E.child.memoizedState=a1(P),E.memoizedState=s1,Y);if(!(E.mode&1))E=o1(_,E,P,null);else if(rt(Be))E=o1(_,E,P,Error(a(419)));else if(I=(P&_.childLanes)!==0,ta||I){if(I=Hr,I!==null){switch(P&-P){case 4:Y=2;break;case 16:Y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Y=32;break;case 536870912:Y=268435456;break;default:Y=0}I=Y&(I.suspendedLanes|P)?0:Y,I!==0&&I!==V.retryLane&&(V.retryLane=I,La(_,I,-1))}r2(),E=o1(_,E,P,Error(a(421)))}else Dt(Be)?(E.flags|=128,E.child=_.child,E=hte.bind(null,_),_t(Be,E),E=null):(P=V.treeContext,Ie&&(ea=Jn(Be),Qs=E,cr=!0,co=null,jm=!1,P!==null&&(Ra[Oa++]=Ll,Ra[Oa++]=Fl,Ra[Oa++]=hf,Ll=P.id,Fl=P.overflow,hf=E)),E=FM(E,E.pendingProps.children),E.flags|=4096);return E}return Y?(I=FI(_,E,I.children,I.fallback,P),Y=E.child,V=_.child.memoizedState,Y.memoizedState=V===null?a1(P):{baseLanes:V.baseLanes|P,cachePool:null},Y.childLanes=_.childLanes&~P,E.memoizedState=s1,I):(P=LI(_,E,I.children,P),E.memoizedState=null,P)}return Y?(I=FI(_,E,I.children,I.fallback,P),Y=E.child,V=_.child.memoizedState,Y.memoizedState=V===null?a1(P):{baseLanes:V.baseLanes|P,cachePool:null},Y.childLanes=_.childLanes&~P,E.memoizedState=s1,I):(P=LI(_,E,I.children,P),E.memoizedState=null,P)}function FM(_,E){return E=C1({mode:"visible",children:E},_.mode,0,null),E.return=_,_.child=E}function LI(_,E,P,I){var V=_.child;return _=V.sibling,P=Wu(V,{mode:"visible",children:P}),!(E.mode&1)&&(P.lanes=I),P.return=E,P.sibling=null,_!==null&&(I=E.deletions,I===null?(E.deletions=[_],E.flags|=16):I.push(_)),E.child=P}function FI(_,E,P,I,V){var Y=E.mode;_=_.child;var we=_.sibling,Be={mode:"hidden",children:P};return!(Y&1)&&E.child!==_?(P=E.child,P.childLanes=0,P.pendingProps=Be,E.deletions=null):(P=Wu(_,Be),P.subtreeFlags=_.subtreeFlags&14680064),we!==null?I=Wu(we,I):(I=wf(I,Y,V,null),I.flags|=2),I.return=E,P.return=E,P.sibling=I,E.child=P,I}function o1(_,E,P,I){return I!==null&&SM(I),eh(E,_.child,null,P),_=FM(E,E.pendingProps.children),_.flags|=2,E.memoizedState=null,_}function BI(_,E,P){_.lanes|=E;var I=_.alternate;I!==null&&(I.lanes|=E),pM(_.return,E,P)}function BM(_,E,P,I,V){var Y=_.memoizedState;Y===null?_.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:I,tail:P,tailMode:V}:(Y.isBackwards=E,Y.rendering=null,Y.renderingStartTime=0,Y.last=I,Y.tail=P,Y.tailMode=V)}function zI(_,E,P){var I=E.pendingProps,V=I.revealOrder,Y=I.tail;if(ls(_,E,I.children,P),I=mr.current,I&2)I=I&1|2,E.flags|=128;else{if(_!==null&&_.flags&128)e:for(_=E.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&BI(_,P,E);else if(_.tag===19)BI(_,P,E);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===E)break e;for(;_.sibling===null;){if(_.return===null||_.return===E)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}I&=1}if(Mt(mr,I),!(E.mode&1))E.memoizedState=null;else switch(V){case"forwards":for(P=E.child,V=null;P!==null;)_=P.alternate,_!==null&&Yy(_)===null&&(V=P),P=P.sibling;P=V,P===null?(V=E.child,E.child=null):(V=P.sibling,P.sibling=null),BM(E,!1,V,P,Y);break;case"backwards":for(P=null,V=E.child,E.child=null;V!==null;){if(_=V.alternate,_!==null&&Yy(_)===null){E.child=V;break}_=V.sibling,V.sibling=P,P=V,V=_}BM(E,!0,P,null,Y);break;case"together":BM(E,!1,null,null,void 0);break;default:E.memoizedState=null}return E.child}function zl(_,E,P){if(_!==null&&(E.dependencies=_.dependencies),sh|=E.lanes,!(P&E.childLanes))return null;if(_!==null&&E.child!==_.child)throw Error(a(153));if(E.child!==null){for(_=E.child,P=Wu(_,_.pendingProps),E.child=P,P.return=E;_.sibling!==null;)_=_.sibling,P=P.sibling=Wu(_,_.pendingProps),P.return=E;P.sibling=null}return E.child}function tte(_,E,P){switch(E.tag){case 3:OI(E),Qd();break;case 5:tI(E);break;case 1:ci(E.type)&&wi(E);break;case 4:_M(E,E.stateNode.containerInfo);break;case 10:UO(E,E.type._context,E.memoizedProps.value);break;case 13:var I=E.memoizedState;if(I!==null)return I.dehydrated!==null?(Mt(mr,mr.current&1),E.flags|=128,null):P&E.child.childLanes?kI(_,E,P):(Mt(mr,mr.current&1),_=zl(_,E,P),_!==null?_.sibling:null);Mt(mr,mr.current&1);break;case 19:if(I=(P&E.childLanes)!==0,_.flags&128){if(I)return zI(_,E,P);E.flags|=128}var V=E.memoizedState;if(V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),Mt(mr,mr.current),I)break;return null;case 22:case 23:return E.lanes=0,NI(_,E,P)}return zl(_,E,P)}function nte(_,E){switch(xM(E),E.tag){case 1:return ci(E.type)&&kr(),_=E.flags,_&65536?(E.flags=_&-65537|128,E):null;case 3:return nh(),Yt(Cr),Yt(mn),CM(),_=E.flags,_&65536&&!(_&128)?(E.flags=_&-65537|128,E):null;case 5:return EM(E),null;case 13:if(Yt(mr),_=E.memoizedState,_!==null&&_.dehydrated!==null){if(E.alternate===null)throw Error(a(340));Qd()}return _=E.flags,_&65536?(E.flags=_&-65537|128,E):null;case 19:return Yt(mr),null;case 4:return nh(),null;case 10:return hM(E.type._context),null;case 22:case 23:return n2(),null;case 24:return null;default:return null}}var l1=!1,gf=!1,rte=typeof WeakSet=="function"?WeakSet:Set,vt=null;function u1(_,E){var P=_.ref;if(P!==null)if(typeof P=="function")try{P(null)}catch(I){ks(_,E,I)}else P.current=null}function zM(_,E,P){try{P()}catch(I){ks(_,E,I)}}var UI=!1;function ite(_,E){for(L(_.containerInfo),vt=E;vt!==null;)if(_=vt,E=_.child,(_.subtreeFlags&1028)!==0&&E!==null)E.return=_,vt=E;else for(;vt!==null;){_=vt;try{var P=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var I=P.memoizedProps,V=P.memoizedState,Y=_.stateNode,we=Y.getSnapshotBeforeUpdate(_.elementType===_.type?I:uo(_.type,I),V);Y.__reactInternalSnapshotBeforeUpdate=we}break;case 3:De&&Ze(_.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Be){ks(_,_.return,Be)}if(E=_.sibling,E!==null){E.return=_.return,vt=E;break}vt=_.return}return P=UI,UI=!1,P}function vf(_,E,P){var I=E.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var V=I=I.next;do{if((V.tag&_)===_){var Y=V.destroy;V.destroy=void 0,Y!==void 0&&zM(E,P,Y)}V=V.next}while(V!==I)}}function ig(_,E){if(E=E.updateQueue,E=E!==null?E.lastEffect:null,E!==null){var P=E=E.next;do{if((P.tag&_)===_){var I=P.create;P.destroy=I()}P=P.next}while(P!==E)}}function UM(_){var E=_.ref;if(E!==null){var P=_.stateNode;switch(_.tag){case 5:_=D(P);break;default:_=P}typeof E=="function"?E(_):E.current=_}}function $I(_,E,P){if(Vo&&typeof Vo.onCommitFiberUnmount=="function")try{Vo.onCommitFiberUnmount(By,E)}catch{}switch(E.tag){case 0:case 11:case 14:case 15:if(_=E.updateQueue,_!==null&&(_=_.lastEffect,_!==null)){var I=_=_.next;do{var V=I,Y=V.destroy;V=V.tag,Y!==void 0&&(V&2||V&4)&&zM(E,P,Y),I=I.next}while(I!==_)}break;case 1:if(u1(E,P),_=E.stateNode,typeof _.componentWillUnmount=="function")try{_.props=E.memoizedProps,_.state=E.memoizedState,_.componentWillUnmount()}catch(we){ks(E,P,we)}break;case 5:u1(E,P);break;case 4:De?qI(_,E,P):ie&&ie&&(E=E.stateNode.containerInfo,P=ee(E),_e(E,P))}}function VI(_,E,P){for(var I=E;;)if($I(_,I,P),I.child===null||De&&I.tag===4){if(I===E)break;for(;I.sibling===null;){if(I.return===null||I.return===E)return;I=I.return}I.sibling.return=I.return,I=I.sibling}else I.child.return=I,I=I.child}function HI(_){var E=_.alternate;E!==null&&(_.alternate=null,HI(E)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&(E=_.stateNode,E!==null&&Ce(E)),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function WI(_){return _.tag===5||_.tag===3||_.tag===4}function GI(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||WI(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function jI(_){if(De){e:{for(var E=_.return;E!==null;){if(WI(E))break e;E=E.return}throw Error(a(160))}var P=E;switch(P.tag){case 5:E=P.stateNode,P.flags&32&&(W(E),P.flags&=-33),P=GI(_),VM(_,P,E);break;case 3:case 4:E=P.stateNode.containerInfo,P=GI(_),$M(_,P,E);break;default:throw Error(a(161))}}}function $M(_,E,P){var I=_.tag;if(I===5||I===6)_=_.stateNode,E?at(P,_,E):He(P,_);else if(I!==4&&(_=_.child,_!==null))for($M(_,E,P),_=_.sibling;_!==null;)$M(_,E,P),_=_.sibling}function VM(_,E,P){var I=_.tag;if(I===5||I===6)_=_.stateNode,E?lt(P,_,E):Fe(P,_);else if(I!==4&&(_=_.child,_!==null))for(VM(_,E,P),_=_.sibling;_!==null;)VM(_,E,P),_=_.sibling}function qI(_,E,P){for(var I=E,V=!1,Y,we;;){if(!V){V=I.return;e:for(;;){if(V===null)throw Error(a(160));switch(Y=V.stateNode,V.tag){case 5:we=!1;break e;case 3:Y=Y.containerInfo,we=!0;break e;case 4:Y=Y.containerInfo,we=!0;break e}V=V.return}V=!0}if(I.tag===5||I.tag===6)VI(_,I,P),we?We(Y,I.stateNode):ge(Y,I.stateNode);else if(I.tag===18)we?Ge(Y,I.stateNode):Ve(Y,I.stateNode);else if(I.tag===4){if(I.child!==null){Y=I.stateNode.containerInfo,we=!0,I.child.return=I,I=I.child;continue}}else if($I(_,I,P),I.child!==null){I.child.return=I,I=I.child;continue}if(I===E)break;for(;I.sibling===null;){if(I.return===null||I.return===E)return;I=I.return,I.tag===4&&(V=!1)}I.sibling.return=I.return,I=I.sibling}}function HM(_,E){if(De){switch(E.tag){case 0:case 11:case 14:case 15:vf(3,E,E.return),ig(3,E),vf(5,E,E.return);return;case 1:return;case 5:var P=E.stateNode;if(P!=null){var I=E.memoizedProps;_=_!==null?_.memoizedProps:I;var V=E.type,Y=E.updateQueue;E.updateQueue=null,Y!==null&&qe(P,Y,V,_,I,E)}return;case 6:if(E.stateNode===null)throw Error(a(162));P=E.memoizedProps,Oe(E.stateNode,_!==null?_.memoizedProps:P,P);return;case 3:Ie&&_!==null&&_.memoizedState.isDehydrated&&Le(E.stateNode.containerInfo);return;case 12:return;case 13:c1(E);return;case 19:c1(E);return;case 17:return}throw Error(a(163))}switch(E.tag){case 0:case 11:case 14:case 15:vf(3,E,E.return),ig(3,E),vf(5,E,E.return);return;case 12:return;case 13:c1(E);return;case 19:c1(E);return;case 3:Ie&&_!==null&&_.memoizedState.isDehydrated&&Le(E.stateNode.containerInfo);break;case 22:case 23:return}e:if(ie){switch(E.tag){case 1:case 5:case 6:break e;case 3:case 4:E=E.stateNode,_e(E.containerInfo,E.pendingChildren);break e}throw Error(a(163))}}function c1(_){var E=_.updateQueue;if(E!==null){_.updateQueue=null;var P=_.stateNode;P===null&&(P=_.stateNode=new rte),E.forEach(function(I){var V=pte.bind(null,_,I);P.has(I)||(P.add(I),I.then(V,V))})}}function ste(_,E){for(vt=E;vt!==null;){E=vt;var P=E.deletions;if(P!==null)for(var I=0;I<P.length;I++){var V=P[I];try{var Y=_;De?qI(Y,V,E):VI(Y,V,E);var we=V.alternate;we!==null&&(we.return=null),V.return=null}catch(kt){ks(V,E,kt)}}if(P=E.child,E.subtreeFlags&12854&&P!==null)P.return=E,vt=P;else for(;vt!==null;){E=vt;try{var Be=E.flags;if(Be&32&&De&&W(E.stateNode),Be&512){var Qe=E.alternate;if(Qe!==null){var ct=Qe.ref;ct!==null&&(typeof ct=="function"?ct(null):ct.current=null)}}if(Be&8192)switch(E.tag){case 13:if(E.memoizedState!==null){var Ct=E.alternate;(Ct===null||Ct.memoizedState===null)&&(KM=fi())}break;case 22:var sn=E.memoizedState!==null,Wt=E.alternate,Xn=Wt!==null&&Wt.memoizedState!==null;if(P=E,De){e:if(I=P,V=sn,Y=null,De)for(var Lt=I;;){if(Lt.tag===5){if(Y===null){Y=Lt;var Vi=Lt.stateNode;V?pe(Vi):Ye(Lt.stateNode,Lt.memoizedProps)}}else if(Lt.tag===6){if(Y===null){var Ba=Lt.stateNode;V?Re(Ba):de(Ba,Lt.memoizedProps)}}else if((Lt.tag!==22&&Lt.tag!==23||Lt.memoizedState===null||Lt===I)&&Lt.child!==null){Lt.child.return=Lt,Lt=Lt.child;continue}if(Lt===I)break;for(;Lt.sibling===null;){if(Lt.return===null||Lt.return===I)break e;Y===Lt&&(Y=null),Lt=Lt.return}Y===Lt&&(Y=null),Lt.sibling.return=Lt.return,Lt=Lt.sibling}}if(sn&&!Xn&&P.mode&1){vt=P;for(var je=P.child;je!==null;){for(P=vt=je;vt!==null;){I=vt;var ze=I.child;switch(I.tag){case 0:case 11:case 14:case 15:vf(4,I,I.return);break;case 1:u1(I,I.return);var Ke=I.stateNode;if(typeof Ke.componentWillUnmount=="function"){var xt=I.return;try{Ke.props=I.memoizedProps,Ke.state=I.memoizedState,Ke.componentWillUnmount()}catch(kt){ks(I,xt,kt)}}break;case 5:u1(I,I.return);break;case 22:if(I.memoizedState!==null){KI(P);continue}}ze!==null?(ze.return=I,vt=ze):KI(P)}je=je.sibling}}}switch(Be&4102){case 2:jI(E),E.flags&=-3;break;case 6:jI(E),E.flags&=-3,HM(E.alternate,E);break;case 4096:E.flags&=-4097;break;case 4100:E.flags&=-4097,HM(E.alternate,E);break;case 4:HM(E.alternate,E)}}catch(kt){ks(E,E.return,kt)}if(P=E.sibling,P!==null){P.return=E.return,vt=P;break}vt=E.return}}}function ate(_,E,P){vt=_,XI(_)}function XI(_,E,P){for(var I=(_.mode&1)!==0;vt!==null;){var V=vt,Y=V.child;if(V.tag===22&&I){var we=V.memoizedState!==null||l1;if(!we){var Be=V.alternate,Qe=Be!==null&&Be.memoizedState!==null||gf;Be=l1;var ct=gf;if(l1=we,(gf=Qe)&&!ct)for(vt=V;vt!==null;)we=vt,Qe=we.child,we.tag===22&&we.memoizedState!==null?ZI(V):Qe!==null?(Qe.return=we,vt=Qe):ZI(V);for(;Y!==null;)vt=Y,XI(Y),Y=Y.sibling;vt=V,l1=Be,gf=ct}YI(_)}else V.subtreeFlags&8772&&Y!==null?(Y.return=V,vt=Y):YI(_)}}function YI(_){for(;vt!==null;){var E=vt;if(E.flags&8772){var P=E.alternate;try{if(E.flags&8772)switch(E.tag){case 0:case 11:case 15:gf||ig(5,E);break;case 1:var I=E.stateNode;if(E.flags&4&&!gf)if(P===null)I.componentDidMount();else{var V=E.elementType===E.type?P.memoizedProps:uo(E.type,P.memoizedProps);I.componentDidUpdate(V,P.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var Y=E.updateQueue;Y!==null&&HO(E,Y,I);break;case 3:var we=E.updateQueue;if(we!==null){if(P=null,E.child!==null)switch(E.child.tag){case 5:P=D(E.child.stateNode);break;case 1:P=E.child.stateNode}HO(E,we,P)}break;case 5:var Be=E.stateNode;P===null&&E.flags&4&&Je(Be,E.type,E.memoizedProps,E);break;case 6:break;case 4:break;case 12:break;case 13:if(Ie&&E.memoizedState===null){var Qe=E.alternate;if(Qe!==null){var ct=Qe.memoizedState;if(ct!==null){var Ct=ct.dehydrated;Ct!==null&&Ue(Ct)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}gf||E.flags&512&&UM(E)}catch(sn){ks(E,E.return,sn)}}if(E===_){vt=null;break}if(P=E.sibling,P!==null){P.return=E.return,vt=P;break}vt=E.return}}function KI(_){for(;vt!==null;){var E=vt;if(E===_){vt=null;break}var P=E.sibling;if(P!==null){P.return=E.return,vt=P;break}vt=E.return}}function ZI(_){for(;vt!==null;){var E=vt;try{switch(E.tag){case 0:case 11:case 15:var P=E.return;try{ig(4,E)}catch(Qe){ks(E,P,Qe)}break;case 1:var I=E.stateNode;if(typeof I.componentDidMount=="function"){var V=E.return;try{I.componentDidMount()}catch(Qe){ks(E,V,Qe)}}var Y=E.return;try{UM(E)}catch(Qe){ks(E,Y,Qe)}break;case 5:var we=E.return;try{UM(E)}catch(Qe){ks(E,we,Qe)}}}catch(Qe){ks(E,E.return,Qe)}if(E===_){vt=null;break}var Be=E.sibling;if(Be!==null){Be.return=E.return,vt=Be;break}vt=E.return}}var f1=0,d1=1,h1=2,p1=3,m1=4;if(typeof Symbol=="function"&&Symbol.for){var sg=Symbol.for;f1=sg("selector.component"),d1=sg("selector.has_pseudo_class"),h1=sg("selector.role"),p1=sg("selector.test_id"),m1=sg("selector.text")}function WM(_){var E=ke(_);if(E!=null){if(typeof E.memoizedProps["data-testname"]!="string")throw Error(a(364));return E}if(_=fe(_),_===null)throw Error(a(362));return _.stateNode.current}function GM(_,E){switch(E.$$typeof){case f1:if(_.type===E.value)return!0;break;case d1:e:{E=E.value,_=[_,0];for(var P=0;P<_.length;){var I=_[P++],V=_[P++],Y=E[V];if(I.tag!==5||!J(I)){for(;Y!=null&&GM(I,Y);)V++,Y=E[V];if(V===E.length){E=!0;break e}else for(I=I.child;I!==null;)_.push(I,V),I=I.sibling}}E=!1}return E;case h1:if(_.tag===5&&be(_.stateNode,E.value))return!0;break;case m1:if((_.tag===5||_.tag===6)&&(_=q(_),_!==null&&0<=_.indexOf(E.value)))return!0;break;case p1:if(_.tag===5&&(_=_.memoizedProps["data-testname"],typeof _=="string"&&_.toLowerCase()===E.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function jM(_){switch(_.$$typeof){case f1:return"<"+(M(_.value)||"Unknown")+">";case d1:return":has("+(jM(_)||"")+")";case h1:return'[role="'+_.value+'"]';case m1:return'"'+_.value+'"';case p1:return'[data-testname="'+_.value+'"]';default:throw Error(a(365))}}function JI(_,E){var P=[];_=[_,0];for(var I=0;I<_.length;){var V=_[I++],Y=_[I++],we=E[Y];if(V.tag!==5||!J(V)){for(;we!=null&&GM(V,we);)Y++,we=E[Y];if(Y===E.length)P.push(V);else for(V=V.child;V!==null;)_.push(V,Y),V=V.sibling}}return P}function qM(_,E){if(!G)throw Error(a(363));_=WM(_),_=JI(_,E),E=[],_=Array.from(_);for(var P=0;P<_.length;){var I=_[P++];if(I.tag===5)J(I)||E.push(I.stateNode);else for(I=I.child;I!==null;)_.push(I),I=I.sibling}return E}var ote=Math.ceil,g1=o.ReactCurrentDispatcher,XM=o.ReactCurrentOwner,Lr=o.ReactCurrentBatchConfig,gn=0,Hr=null,Wr=null,Si=0,na=0,ih=ui(0),Zr=0,ag=null,sh=0,v1=0,YM=0,og=null,Os=null,KM=0,ZM=1/0;function ah(){ZM=fi()+500}var y1=!1,JM=null,Uu=null,x1=!1,$u=null,b1=0,lg=0,QM=null,w1=-1,S1=0;function us(){return gn&6?fi():w1!==-1?w1:w1=fi()}function Vu(_){return _.mode&1?gn&2&&Si!==0?Si&-Si:Hee.transition!==null?(S1===0&&(_=ky,ky<<=1,!(ky&4194240)&&(ky=64),S1=_),S1):(_=Tn,_!==0?_:ne()):1}function La(_,E,P){if(50<lg)throw lg=0,QM=null,Error(a(185));var I=_1(_,E);return I===null?null:(Gm(I,E,P),(!(gn&2)||I!==Hr)&&(I===Hr&&(!(gn&2)&&(v1|=E),Zr===4&&Hu(I,Si)),Is(I,P),E===1&&gn===0&&!(_.mode&1)&&(ah(),zy&&Wo())),I)}function _1(_,E){_.lanes|=E;var P=_.alternate;for(P!==null&&(P.lanes|=E),P=_,_=_.return;_!==null;)_.childLanes|=E,P=_.alternate,P!==null&&(P.childLanes|=E),P=_,_=_.return;return P.tag===3?P.stateNode:null}function Is(_,E){var P=_.callbackNode;Iee(_,E);var I=Fy(_,_===Hr?Si:0);if(I===0)P!==null&&BO(P),_.callbackNode=null,_.callbackPriority=0;else if(E=I&-I,_.callbackPriority!==E){if(P!=null&&BO(P),E===1)_.tag===0?Vee(ek.bind(null,_)):zO(ek.bind(null,_)),se?j(function(){gn===0&&Wo()}):oM(lM,Wo),P=null;else{switch(FO(I)){case 1:P=lM;break;case 4:P=Bee;break;case 16:P=uM;break;case 536870912:P=zee;break;default:P=uM}P=uk(P,QI.bind(null,_))}_.callbackPriority=E,_.callbackNode=P}}function QI(_,E){if(w1=-1,S1=0,gn&6)throw Error(a(327));var P=_.callbackNode;if(bf()&&_.callbackNode!==P)return null;var I=Fy(_,_===Hr?Si:0);if(I===0)return null;if(I&30||I&_.expiredLanes||E)E=E1(_,I);else{E=I;var V=gn;gn|=2;var Y=rk();(Hr!==_||Si!==E)&&(ah(),yf(_,E));do try{cte();break}catch(Be){nk(_,Be)}while(!0);dM(),g1.current=Y,gn=V,Wr!==null?E=0:(Hr=null,Si=0,E=Zr)}if(E!==0){if(E===2&&(V=iM(_),V!==0&&(I=V,E=e2(_,V))),E===1)throw P=ag,yf(_,0),Hu(_,I),Is(_,fi()),P;if(E===6)Hu(_,I);else{if(V=_.current.alternate,!(I&30)&&!lte(V)&&(E=E1(_,I),E===2&&(Y=iM(_),Y!==0&&(I=Y,E=e2(_,Y))),E===1))throw P=ag,yf(_,0),Hu(_,I),Is(_,fi()),P;switch(_.finishedWork=V,_.finishedLanes=I,E){case 0:case 1:throw Error(a(345));case 2:xf(_,Os);break;case 3:if(Hu(_,I),(I&130023424)===I&&(E=KM+500-fi(),10<E)){if(Fy(_,0)!==0)break;if(V=_.suspendedLanes,(V&I)!==I){us(),_.pingedLanes|=_.suspendedLanes&V;break}_.timeoutHandle=me(xf.bind(null,_,Os),E);break}xf(_,Os);break;case 4:if(Hu(_,I),(I&4194240)===I)break;for(E=_.eventTimes,V=-1;0<I;){var we=31-Js(I);Y=1<<we,we=E[we],we>V&&(V=we),I&=~Y}if(I=V,I=fi()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*ote(I/1960))-I,10<I){_.timeoutHandle=me(xf.bind(null,_,Os),I);break}xf(_,Os);break;case 5:xf(_,Os);break;default:throw Error(a(329))}}}return Is(_,fi()),_.callbackNode===P?QI.bind(null,_):null}function e2(_,E){var P=og;return _.current.memoizedState.isDehydrated&&(yf(_,E).flags|=256),_=E1(_,E),_!==2&&(E=Os,Os=P,E!==null&&t2(E)),_}function t2(_){Os===null?Os=_:Os.push.apply(Os,_)}function lte(_){for(var E=_;;){if(E.flags&16384){var P=E.updateQueue;if(P!==null&&(P=P.stores,P!==null))for(var I=0;I<P.length;I++){var V=P[I],Y=V.getSnapshot;V=V.value;try{if(!Ho(Y(),V))return!1}catch{return!1}}}if(P=E.child,E.subtreeFlags&16384&&P!==null)P.return=E,E=P;else{if(E===_)break;for(;E.sibling===null;){if(E.return===null||E.return===_)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function Hu(_,E){for(E&=~YM,E&=~v1,_.suspendedLanes|=E,_.pingedLanes&=~E,_=_.expirationTimes;0<E;){var P=31-Js(E),I=1<<P;_[P]=-1,E&=~I}}function ek(_){if(gn&6)throw Error(a(327));bf();var E=Fy(_,0);if(!(E&1))return Is(_,fi()),null;var P=E1(_,E);if(_.tag!==0&&P===2){var I=iM(_);I!==0&&(E=I,P=e2(_,I))}if(P===1)throw P=ag,yf(_,0),Hu(_,E),Is(_,fi()),P;if(P===6)throw Error(a(345));return _.finishedWork=_.current.alternate,_.finishedLanes=E,xf(_,Os),Is(_,fi()),null}function tk(_){$u!==null&&$u.tag===0&&!(gn&6)&&bf();var E=gn;gn|=1;var P=Lr.transition,I=Tn;try{if(Lr.transition=null,Tn=1,_)return _()}finally{Tn=I,Lr.transition=P,gn=E,!(gn&6)&&Wo()}}function n2(){na=ih.current,Yt(ih)}function yf(_,E){_.finishedWork=null,_.finishedLanes=0;var P=_.timeoutHandle;if(P!==xe&&(_.timeoutHandle=xe,Ee(P)),Wr!==null)for(P=Wr.return;P!==null;){var I=P;switch(xM(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&kr();break;case 3:nh(),Yt(Cr),Yt(mn),CM();break;case 5:EM(I);break;case 4:nh();break;case 13:Yt(mr);break;case 19:Yt(mr);break;case 10:hM(I.type._context);break;case 22:case 23:n2()}P=P.return}if(Hr=_,Wr=_=Wu(_.current,null),Si=na=E,Zr=0,ag=null,YM=v1=sh=0,Os=og=null,Go!==null){for(E=0;E<Go.length;E++)if(P=Go[E],I=P.interleaved,I!==null){P.interleaved=null;var V=I.next,Y=P.pending;if(Y!==null){var we=Y.next;Y.next=V,I.next=we}P.pending=I}Go=null}return _}function nk(_,E){do{var P=Wr;try{if(dM(),Ky.current=n1,Zy){for(var I=Ar.memoizedState;I!==null;){var V=I.queue;V!==null&&(V.pending=null),I=I.next}Zy=!1}if(rh=0,di=zi=Ar=null,Zm=!1,Jm=0,XM.current=null,P===null||P.return===null){Zr=1,ag=E,Wr=null;break}e:{var Y=_,we=P.return,Be=P,Qe=E;if(E=Si,Be.flags|=32768,Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var ct=Qe,Ct=Be,sn=Ct.tag;if(!(Ct.mode&1)&&(sn===0||sn===11||sn===15)){var Wt=Ct.alternate;Wt?(Ct.updateQueue=Wt.updateQueue,Ct.memoizedState=Wt.memoizedState,Ct.lanes=Wt.lanes):(Ct.updateQueue=null,Ct.memoizedState=null)}var Xn=_I(we);if(Xn!==null){Xn.flags&=-257,EI(Xn,we,Be,Y,E),Xn.mode&1&&SI(Y,ct,E),E=Xn,Qe=ct;var Lt=E.updateQueue;if(Lt===null){var Vi=new Set;Vi.add(Qe),E.updateQueue=Vi}else Lt.add(Qe);break e}else{if(!(E&1)){SI(Y,ct,E),r2();break e}Qe=Error(a(426))}}else if(cr&&Be.mode&1){var Ba=_I(we);if(Ba!==null){!(Ba.flags&65536)&&(Ba.flags|=256),EI(Ba,we,Be,Y,E),SM(Qe);break e}}Y=Qe,Zr!==4&&(Zr=2),og===null?og=[Y]:og.push(Y),Qe=OM(Qe,Be),Be=we;do{switch(Be.tag){case 3:Be.flags|=65536,E&=-E,Be.lanes|=E;var je=bI(Be,Qe,E);VO(Be,je);break e;case 1:Y=Qe;var ze=Be.type,Ke=Be.stateNode;if(!(Be.flags&128)&&(typeof ze.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(Uu===null||!Uu.has(Ke)))){Be.flags|=65536,E&=-E,Be.lanes|=E;var xt=wI(Be,Y,E);VO(Be,xt);break e}}Be=Be.return}while(Be!==null)}sk(P)}catch(kt){E=kt,Wr===P&&P!==null&&(Wr=P=P.return);continue}break}while(!0)}function rk(){var _=g1.current;return g1.current=n1,_===null?n1:_}function r2(){(Zr===0||Zr===3||Zr===2)&&(Zr=4),Hr===null||!(sh&268435455)&&!(v1&268435455)||Hu(Hr,Si)}function E1(_,E){var P=gn;gn|=2;var I=rk();Hr===_&&Si===E||yf(_,E);do try{ute();break}catch(V){nk(_,V)}while(!0);if(dM(),gn=P,g1.current=I,Wr!==null)throw Error(a(261));return Hr=null,Si=0,Zr}function ute(){for(;Wr!==null;)ik(Wr)}function cte(){for(;Wr!==null&&!Lee();)ik(Wr)}function ik(_){var E=lk(_.alternate,_,na);_.memoizedProps=_.pendingProps,E===null?sk(_):Wr=E,XM.current=null}function sk(_){var E=_;do{var P=E.alternate;if(_=E.return,E.flags&32768){if(P=nte(P,E),P!==null){P.flags&=32767,Wr=P;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{Zr=6,Wr=null;return}}else if(P=Qee(P,E,na),P!==null){Wr=P;return}if(E=E.sibling,E!==null){Wr=E;return}Wr=E=_}while(E!==null);Zr===0&&(Zr=5)}function xf(_,E){var P=Tn,I=Lr.transition;try{Lr.transition=null,Tn=1,fte(_,E,P)}finally{Lr.transition=I,Tn=P}return null}function fte(_,E,P){do bf();while($u!==null);if(gn&6)throw Error(a(327));var I=_.finishedWork,V=_.finishedLanes;if(I===null)return null;if(_.finishedWork=null,_.finishedLanes=0,I===_.current)throw Error(a(177));_.callbackNode=null,_.callbackPriority=0;var Y=I.lanes|I.childLanes;if(kee(_,Y),_===Hr&&(Wr=Hr=null,Si=0),!(I.subtreeFlags&2064)&&!(I.flags&2064)||x1||(x1=!0,uk(uM,function(){return bf(),null})),Y=(I.flags&15990)!==0,I.subtreeFlags&15990||Y){Y=Lr.transition,Lr.transition=null;var we=Tn;Tn=1;var Be=gn;gn|=4,XM.current=null,ite(_,I),ste(_,I),X(_.containerInfo),_.current=I,ate(I),Fee(),gn=Be,Tn=we,Lr.transition=Y}else _.current=I;if(x1&&(x1=!1,$u=_,b1=V),Y=_.pendingLanes,Y===0&&(Uu=null),Uee(I.stateNode),Is(_,fi()),E!==null)for(P=_.onRecoverableError,I=0;I<E.length;I++)P(E[I]);if(y1)throw y1=!1,_=JM,JM=null,_;return b1&1&&_.tag!==0&&bf(),Y=_.pendingLanes,Y&1?_===QM?lg++:(lg=0,QM=_):lg=0,Wo(),null}function bf(){if($u!==null){var _=FO(b1),E=Lr.transition,P=Tn;try{if(Lr.transition=null,Tn=16>_?16:_,$u===null)var I=!1;else{if(_=$u,$u=null,b1=0,gn&6)throw Error(a(331));var V=gn;for(gn|=4,vt=_.current;vt!==null;){var Y=vt,we=Y.child;if(vt.flags&16){var Be=Y.deletions;if(Be!==null){for(var Qe=0;Qe<Be.length;Qe++){var ct=Be[Qe];for(vt=ct;vt!==null;){var Ct=vt;switch(Ct.tag){case 0:case 11:case 15:vf(8,Ct,Y)}var sn=Ct.child;if(sn!==null)sn.return=Ct,vt=sn;else for(;vt!==null;){Ct=vt;var Wt=Ct.sibling,Xn=Ct.return;if(HI(Ct),Ct===ct){vt=null;break}if(Wt!==null){Wt.return=Xn,vt=Wt;break}vt=Xn}}}var Lt=Y.alternate;if(Lt!==null){var Vi=Lt.child;if(Vi!==null){Lt.child=null;do{var Ba=Vi.sibling;Vi.sibling=null,Vi=Ba}while(Vi!==null)}}vt=Y}}if(Y.subtreeFlags&2064&&we!==null)we.return=Y,vt=we;else e:for(;vt!==null;){if(Y=vt,Y.flags&2048)switch(Y.tag){case 0:case 11:case 15:vf(9,Y,Y.return)}var je=Y.sibling;if(je!==null){je.return=Y.return,vt=je;break e}vt=Y.return}}var ze=_.current;for(vt=ze;vt!==null;){we=vt;var Ke=we.child;if(we.subtreeFlags&2064&&Ke!==null)Ke.return=we,vt=Ke;else e:for(we=ze;vt!==null;){if(Be=vt,Be.flags&2048)try{switch(Be.tag){case 0:case 11:case 15:ig(9,Be)}}catch(kt){ks(Be,Be.return,kt)}if(Be===we){vt=null;break e}var xt=Be.sibling;if(xt!==null){xt.return=Be.return,vt=xt;break e}vt=Be.return}}if(gn=V,Wo(),Vo&&typeof Vo.onPostCommitFiberRoot=="function")try{Vo.onPostCommitFiberRoot(By,_)}catch{}I=!0}return I}finally{Tn=P,Lr.transition=E}}return!1}function ak(_,E,P){E=OM(P,E),E=bI(_,E,1),zu(_,E),E=us(),_=_1(_,1),_!==null&&(Gm(_,1,E),Is(_,E))}function ks(_,E,P){if(_.tag===3)ak(_,_,P);else for(;E!==null;){if(E.tag===3){ak(E,_,P);break}else if(E.tag===1){var I=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(Uu===null||!Uu.has(I))){_=OM(P,_),_=wI(E,_,1),zu(E,_),_=us(),E=_1(E,1),E!==null&&(Gm(E,1,_),Is(E,_));break}}E=E.return}}function dte(_,E,P){var I=_.pingCache;I!==null&&I.delete(E),E=us(),_.pingedLanes|=_.suspendedLanes&P,Hr===_&&(Si&P)===P&&(Zr===4||Zr===3&&(Si&130023424)===Si&&500>fi()-KM?yf(_,0):YM|=P),Is(_,E)}function ok(_,E){E===0&&(_.mode&1?(E=Ly,Ly<<=1,!(Ly&130023424)&&(Ly=4194304)):E=1);var P=us();_=_1(_,E),_!==null&&(Gm(_,E,P),Is(_,P))}function hte(_){var E=_.memoizedState,P=0;E!==null&&(P=E.retryLane),ok(_,P)}function pte(_,E){var P=0;switch(_.tag){case 13:var I=_.stateNode,V=_.memoizedState;V!==null&&(P=V.retryLane);break;case 19:I=_.stateNode;break;default:throw Error(a(314))}I!==null&&I.delete(E),ok(_,P)}var lk;lk=function(_,E,P){if(_!==null)if(_.memoizedProps!==E.pendingProps||Cr.current)ta=!0;else{if(!(_.lanes&P)&&!(E.flags&128))return ta=!1,tte(_,E,P);ta=!!(_.flags&131072)}else ta=!1,cr&&E.flags&1048576&&XO(E,qy,E.index);switch(E.lanes=0,E.tag){case 2:var I=E.type;_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),_=E.pendingProps;var V=Na(E,mn.current);Kd(E,P),V=TM(null,E,I,_,V,P);var Y=DM();return E.flags|=1,typeof V=="object"&&V!==null&&typeof V.render=="function"&&V.$$typeof===void 0?(E.tag=1,E.memoizedState=null,E.updateQueue=null,ci(I)?(Y=!0,wi(E)):Y=!1,E.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,mM(E),V.updater=Gy,E.stateNode=V,V._reactInternals=E,vM(E,I,_,P),E=LM(null,E,I,!0,Y,P)):(E.tag=0,cr&&Y&&yM(E),ls(null,E,V,P),E=E.child),E;case 16:I=E.elementType;e:{switch(_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),_=E.pendingProps,V=I._init,I=V(I._payload),E.type=I,V=E.tag=gte(I),_=uo(I,_),V){case 0:E=kM(null,E,I,_,P);break e;case 1:E=RI(null,E,I,_,P);break e;case 11:E=AI(null,E,I,_,P);break e;case 14:E=TI(null,E,I,uo(I.type,_),P);break e}throw Error(a(306,I,""))}return E;case 0:return I=E.type,V=E.pendingProps,V=E.elementType===I?V:uo(I,V),kM(_,E,I,V,P);case 1:return I=E.type,V=E.pendingProps,V=E.elementType===I?V:uo(I,V),RI(_,E,I,V,P);case 3:e:{if(OI(E),_===null)throw Error(a(387));I=E.pendingProps,Y=E.memoizedState,V=Y.element,$O(_,E),Wy(E,I,null,P);var we=E.memoizedState;if(I=we.element,Ie&&Y.isDehydrated)if(Y={element:I,isDehydrated:!1,cache:we.cache,transitions:we.transitions},E.updateQueue.baseState=Y,E.memoizedState=Y,E.flags&256){V=Error(a(423)),E=II(_,E,I,P,V);break e}else if(I!==V){V=Error(a(424)),E=II(_,E,I,P,V);break e}else for(Ie&&(ea=Mr(E.stateNode.containerInfo),Qs=E,cr=!0,co=null,jm=!1),P=eI(E,null,I,P),E.child=P;P;)P.flags=P.flags&-3|4096,P=P.sibling;else{if(Qd(),I===V){E=zl(_,E,P);break e}ls(_,E,I,P)}E=E.child}return E;case 5:return tI(E),_===null&&wM(E),I=E.type,V=E.pendingProps,Y=_!==null?_.memoizedProps:null,we=V.children,ce(I,V)?we=null:Y!==null&&ce(I,Y)&&(E.flags|=32),PI(_,E),ls(_,E,we,P),E.child;case 6:return _===null&&wM(E),null;case 13:return kI(_,E,P);case 4:return _M(E,E.stateNode.containerInfo),I=E.pendingProps,_===null?E.child=eh(E,null,I,P):ls(_,E,I,P),E.child;case 11:return I=E.type,V=E.pendingProps,V=E.elementType===I?V:uo(I,V),AI(_,E,I,V,P);case 7:return ls(_,E,E.pendingProps,P),E.child;case 8:return ls(_,E,E.pendingProps.children,P),E.child;case 12:return ls(_,E,E.pendingProps.children,P),E.child;case 10:e:{if(I=E.type._context,V=E.pendingProps,Y=E.memoizedProps,we=V.value,UO(E,I,we),Y!==null)if(Ho(Y.value,we)){if(Y.children===V.children&&!Cr.current){E=zl(_,E,P);break e}}else for(Y=E.child,Y!==null&&(Y.return=E);Y!==null;){var Be=Y.dependencies;if(Be!==null){we=Y.child;for(var Qe=Be.firstContext;Qe!==null;){if(Qe.context===I){if(Y.tag===1){Qe=kl(-1,P&-P),Qe.tag=2;var ct=Y.updateQueue;if(ct!==null){ct=ct.shared;var Ct=ct.pending;Ct===null?Qe.next=Qe:(Qe.next=Ct.next,Ct.next=Qe),ct.pending=Qe}}Y.lanes|=P,Qe=Y.alternate,Qe!==null&&(Qe.lanes|=P),pM(Y.return,P,E),Be.lanes|=P;break}Qe=Qe.next}}else if(Y.tag===10)we=Y.type===E.type?null:Y.child;else if(Y.tag===18){if(we=Y.return,we===null)throw Error(a(341));we.lanes|=P,Be=we.alternate,Be!==null&&(Be.lanes|=P),pM(we,P,E),we=Y.sibling}else we=Y.child;if(we!==null)we.return=Y;else for(we=Y;we!==null;){if(we===E){we=null;break}if(Y=we.sibling,Y!==null){Y.return=we.return,we=Y;break}we=we.return}Y=we}ls(_,E,V.children,P),E=E.child}return E;case 9:return V=E.type,I=E.pendingProps.children,Kd(E,P),V=Pa(V),I=I(V),E.flags|=1,ls(_,E,I,P),E.child;case 14:return I=E.type,V=uo(I,E.pendingProps),V=uo(I.type,V),TI(_,E,I,V,P);case 15:return DI(_,E,E.type,E.pendingProps,P);case 17:return I=E.type,V=E.pendingProps,V=E.elementType===I?V:uo(I,V),_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),E.tag=1,ci(I)?(_=!0,wi(E)):_=!1,Kd(E,P),jO(E,I,V),vM(E,I,V,P),LM(null,E,I,!0,_,P);case 19:return zI(_,E,P);case 22:return NI(_,E,P)}throw Error(a(156,E.tag))};function uk(_,E){return oM(_,E)}function mte(_,E,P,I){this.tag=_,this.key=P,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fa(_,E,P,I){return new mte(_,E,P,I)}function i2(_){return _=_.prototype,!(!_||!_.isReactComponent)}function gte(_){if(typeof _=="function")return i2(_)?1:0;if(_!=null){if(_=_.$$typeof,_===v)return 11;if(_===S)return 14}return 2}function Wu(_,E){var P=_.alternate;return P===null?(P=Fa(_.tag,E,_.key,_.mode),P.elementType=_.elementType,P.type=_.type,P.stateNode=_.stateNode,P.alternate=_,_.alternate=P):(P.pendingProps=E,P.type=_.type,P.flags=0,P.subtreeFlags=0,P.deletions=null),P.flags=_.flags&14680064,P.childLanes=_.childLanes,P.lanes=_.lanes,P.child=_.child,P.memoizedProps=_.memoizedProps,P.memoizedState=_.memoizedState,P.updateQueue=_.updateQueue,E=_.dependencies,P.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},P.sibling=_.sibling,P.index=_.index,P.ref=_.ref,P}function M1(_,E,P,I,V,Y){var we=2;if(I=_,typeof _=="function")i2(_)&&(we=1);else if(typeof _=="string")we=5;else e:switch(_){case c:return wf(P.children,V,Y,E);case f:we=8,V|=8;break;case d:return _=Fa(12,P,E,V|2),_.elementType=d,_.lanes=Y,_;case y:return _=Fa(13,P,E,V),_.elementType=y,_.lanes=Y,_;case m:return _=Fa(19,P,E,V),_.elementType=m,_.lanes=Y,_;case g:return C1(P,V,Y,E);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case h:we=10;break e;case p:we=9;break e;case v:we=11;break e;case S:we=14;break e;case b:we=16,I=null;break e}throw Error(a(130,_==null?_:typeof _,""))}return E=Fa(we,P,E,V),E.elementType=_,E.type=I,E.lanes=Y,E}function wf(_,E,P,I){return _=Fa(7,_,I,E),_.lanes=P,_}function C1(_,E,P,I){return _=Fa(22,_,I,E),_.elementType=g,_.lanes=P,_.stateNode={},_}function s2(_,E,P){return _=Fa(6,_,null,E),_.lanes=P,_}function a2(_,E,P){return E=Fa(4,_.children!==null?_.children:[],_.key,E),E.lanes=P,E.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},E}function vte(_,E,P,I,V){this.tag=E,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sM(0),this.expirationTimes=sM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sM(0),this.identifierPrefix=I,this.onRecoverableError=V,Ie&&(this.mutableSourceEagerHydrationData=null)}function ck(_,E,P,I,V,Y,we,Be,Qe){return _=new vte(_,E,P,Be,Qe),E===1?(E=1,Y===!0&&(E|=8)):E=0,Y=Fa(3,null,null,E),_.current=Y,Y.stateNode=_,Y.memoizedState={element:I,isDehydrated:P,cache:null,transitions:null},mM(Y),_}function fk(_){if(!_)return Da;_=_._reactInternals;e:{if(N(_)!==_||_.tag!==1)throw Error(a(170));var E=_;do{switch(E.tag){case 3:E=E.stateNode.context;break e;case 1:if(ci(E.type)){E=E.stateNode.__reactInternalMemoizedMergedChildContext;break e}}E=E.return}while(E!==null);throw Error(a(171))}if(_.tag===1){var P=_.type;if(ci(P))return qd(_,P,E)}return E}function dk(_){var E=_._reactInternals;if(E===void 0)throw typeof _.render=="function"?Error(a(188)):(_=Object.keys(_).join(","),Error(a(268,_)));return _=R(E),_===null?null:_.stateNode}function hk(_,E){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var P=_.retryLane;_.retryLane=P!==0&&P<E?P:E}}function o2(_,E){hk(_,E),(_=_.alternate)&&hk(_,E)}function yte(_){return _=R(_),_===null?null:_.stateNode}function xte(){return null}return t.attemptContinuousHydration=function(_){if(_.tag===13){var E=us();La(_,134217728,E),o2(_,134217728)}},t.attemptHydrationAtCurrentPriority=function(_){if(_.tag===13){var E=us(),P=Vu(_);La(_,P,E),o2(_,P)}},t.attemptSynchronousHydration=function(_){switch(_.tag){case 3:var E=_.stateNode;if(E.current.memoizedState.isDehydrated){var P=Wm(E.pendingLanes);P!==0&&(aM(E,P|1),Is(E,fi()),!(gn&6)&&(ah(),Wo()))}break;case 13:var I=us();tk(function(){return La(_,1,I)}),o2(_,1)}},t.batchedUpdates=function(_,E){var P=gn;gn|=1;try{return _(E)}finally{gn=P,gn===0&&(ah(),zy&&Wo())}},t.createComponentSelector=function(_){return{$$typeof:f1,value:_}},t.createContainer=function(_,E,P,I,V,Y,we){return ck(_,E,!1,null,P,I,V,Y,we)},t.createHasPseudoClassSelector=function(_){return{$$typeof:d1,value:_}},t.createHydrationContainer=function(_,E,P,I,V,Y,we,Be,Qe){return _=ck(P,I,!0,_,V,Y,we,Be,Qe),_.context=fk(null),P=_.current,I=us(),V=Vu(P),Y=kl(I,V),Y.callback=E??null,zu(P,Y),_.current.lanes=V,Gm(_,V,I),Is(_,I),_},t.createPortal=function(_,E,P){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:I==null?null:""+I,children:_,containerInfo:E,implementation:P}},t.createRoleSelector=function(_){return{$$typeof:h1,value:_}},t.createTestNameSelector=function(_){return{$$typeof:p1,value:_}},t.createTextSelector=function(_){return{$$typeof:m1,value:_}},t.deferredUpdates=function(_){var E=Tn,P=Lr.transition;try{return Lr.transition=null,Tn=16,_()}finally{Tn=E,Lr.transition=P}},t.discreteUpdates=function(_,E,P,I,V){var Y=Tn,we=Lr.transition;try{return Lr.transition=null,Tn=1,_(E,P,I,V)}finally{Tn=Y,Lr.transition=we,gn===0&&ah()}},t.findAllNodes=qM,t.findBoundingRects=function(_,E){if(!G)throw Error(a(363));E=qM(_,E),_=[];for(var P=0;P<E.length;P++)_.push(Me(E[P]));for(E=_.length-1;0<E;E--){P=_[E];for(var I=P.x,V=I+P.width,Y=P.y,we=Y+P.height,Be=E-1;0<=Be;Be--)if(E!==Be){var Qe=_[Be],ct=Qe.x,Ct=ct+Qe.width,sn=Qe.y,Wt=sn+Qe.height;if(I>=ct&&Y>=sn&&V<=Ct&&we<=Wt){_.splice(E,1);break}else if(I!==ct||P.width!==Qe.width||Wt<Y||sn>we){if(!(Y!==sn||P.height!==Qe.height||Ct<I||ct>V)){ct>I&&(Qe.width+=ct-I,Qe.x=I),Ct<V&&(Qe.width=V-ct),_.splice(E,1);break}}else{sn>Y&&(Qe.height+=sn-Y,Qe.y=Y),Wt<we&&(Qe.height=we-sn),_.splice(E,1);break}}}return _},t.findHostInstance=dk,t.findHostInstanceWithNoPortals=function(_){return _=T(_),_=_!==null?F(_):null,_===null?null:_.stateNode},t.findHostInstanceWithWarning=function(_){return dk(_)},t.flushControlled=function(_){var E=gn;gn|=1;var P=Lr.transition,I=Tn;try{Lr.transition=null,Tn=1,_()}finally{Tn=I,Lr.transition=P,gn=E,gn===0&&(ah(),Wo())}},t.flushPassiveEffects=bf,t.flushSync=tk,t.focusWithin=function(_,E){if(!G)throw Error(a(363));for(_=WM(_),E=JI(_,E),E=Array.from(E),_=0;_<E.length;){var P=E[_++];if(!J(P)){if(P.tag===5&&Se(P.stateNode))return!0;for(P=P.child;P!==null;)E.push(P),P=P.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Tn},t.getFindAllNodesFailureDescription=function(_,E){if(!G)throw Error(a(363));var P=0,I=[];_=[WM(_),0];for(var V=0;V<_.length;){var Y=_[V++],we=_[V++],Be=E[we];if((Y.tag!==5||!J(Y))&&(GM(Y,Be)&&(I.push(jM(Be)),we++,we>P&&(P=we)),we<E.length))for(Y=Y.child;Y!==null;)_.push(Y,we),Y=Y.sibling}if(P<E.length){for(_=[];P<E.length;P++)_.push(jM(E[P]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+_.join(" > ")}return null},t.getPublicRootInstance=function(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return D(_.child.stateNode);default:return _.child.stateNode}},t.injectIntoDevTools=function(_){if(_={bundleType:_.bundleType,version:_.version,rendererPackageName:_.rendererPackageName,rendererConfig:_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:yte,findFiberByHostInstance:_.findFiberByHostInstance||xte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")_=!1;else{var E=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(E.isDisabled||!E.supportsFiber)_=!0;else{try{By=E.inject(_),Vo=E}catch{}_=!!E.checkDCE}}return _},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(_,E,P,I){if(!G)throw Error(a(363));_=qM(_,E);var V=Ne(_,P,I).disconnect;return{disconnect:function(){V()}}},t.registerMutableSourceForHydration=function(_,E){var P=E._getVersion;P=P(E._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[E,P]:_.mutableSourceEagerHydrationData.push(E,P)},t.runWithPriority=function(_,E){var P=Tn;try{return Tn=_,E()}finally{Tn=P}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(_,E,P,I){var V=E.current,Y=us(),we=Vu(V);return P=fk(P),E.context===null?E.context=P:E.pendingContext=P,E=kl(Y,we),E.payload={element:_},I=I===void 0?null:I,I!==null&&(E.callback=I),zu(V,E),_=La(V,we,Y),_!==null&&Hy(_,V,we),we},t};KK.exports=B6e;var z6e=KK.exports;const U6e=so(z6e),iO={},QK=n=>void Object.assign(iO,n);function $6e(n,e){function t(c,{args:f=[],attach:d,...h},p){let v=`${c[0].toUpperCase()}${c.slice(1)}`,y;if(c==="primitive"){if(h.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const m=h.object;y=Gh(m,{type:c,root:p,attach:d,primitive:!0})}else{const m=iO[v];if(!m)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=Gh(new m(...f),{type:c,root:p,attach:d,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y instanceof rn?y.__r3f.attach="geometry":y instanceof Fi&&(y.__r3f.attach="material")),v!=="inject"&&KC(y,h),y}function r(c,f){let d=!1;if(f){var h,p;(h=f.__r3f)!=null&&h.attach?YC(c,f,f.__r3f.attach):f.isObject3D&&c.isObject3D&&(c.add(f),d=!0),d||(p=c.__r3f)==null||p.objects.push(f),f.__r3f||Gh(f,{}),f.__r3f.parent=c,hD(f),jh(f)}}function i(c,f,d){let h=!1;if(f){var p,v;if((p=f.__r3f)!=null&&p.attach)YC(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){f.parent=c,f.dispatchEvent({type:"added"});const y=c.children.filter(S=>S!==f),m=y.indexOf(d);c.children=[...y.slice(0,m),f,...y.slice(m)],h=!0}h||(v=c.__r3f)==null||v.objects.push(f),f.__r3f||Gh(f,{}),f.__r3f.parent=c,hD(f),jh(f)}}function s(c,f,d=!1){c&&[...c].forEach(h=>a(f,h,d))}function a(c,f,d){if(f){var h,p,v;if(f.__r3f&&(f.__r3f.parent=null),(h=c.__r3f)!=null&&h.objects&&(c.__r3f.objects=c.__r3f.objects.filter(g=>g!==f)),(p=f.__r3f)!=null&&p.attach)BU(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){var y;c.remove(f),(y=f.__r3f)!=null&&y.root&&X6e(pw(f),f)}const S=(v=f.__r3f)==null?void 0:v.primitive,b=!S&&(d===void 0?f.dispose!==null:d);if(!S){var m;s((m=f.__r3f)==null?void 0:m.objects,f,b),s(f.children,f,b)}if(delete f.__r3f,b&&f.dispose&&f.type!=="Scene"){const g=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?fD.unstable_scheduleCallback(fD.unstable_IdlePriority,g):g()}jh(c)}}function o(c,f,d,h){var p;const v=(p=c.__r3f)==null?void 0:p.parent;if(!v)return;const y=t(f,d,c.__r3f.root);if(c.children){for(const m of c.children)m.__r3f&&r(y,m);c.children=c.children.filter(m=>!m.__r3f)}c.__r3f.objects.forEach(m=>r(y,m)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||a(v,c),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(v,y),y.raycast&&y.__r3f.eventCount&&pw(y).getState().internal.interaction.push(y),[h,h.alternate].forEach(m=>{m!==null&&(m.stateNode=y,m.ref&&(typeof m.ref=="function"?m.ref(y):m.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:U6e({createInstance:t,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,f)=>{if(!f)return;const d=c.getState().scene;d.__r3f&&(d.__r3f.root=c,r(d,f))},removeChildFromContainer:(c,f)=>{f&&a(c.getState().scene,f)},insertInContainerBefore:(c,f,d)=>{if(!f||!d)return;const h=c.getState().scene;h.__r3f&&i(h,f,d)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var f;return!!((f=c==null?void 0:c.__r3f)!=null?f:{}).handlers},prepareUpdate(c,f,d,h){var p;if(((p=c==null?void 0:c.__r3f)!=null?p:{}).primitive&&h.object&&h.object!==c)return[!0];{const{args:y=[],children:m,...S}=h,{args:b=[],children:g,...w}=d;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((M,A)=>M!==b[A]))return[!0];const x=aZ(c,S,w,!0);return x.changes.length?[!1,x]:null}},commitUpdate(c,[f,d],h,p,v,y){f?o(c,h,v,y):KC(c,d)},commitMount(c,f,d,h){var p;const v=(p=c.__r3f)!=null?p:{};c.raycast&&v.handlers&&v.eventCount&&pw(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>Gh(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var f;const{attach:d,parent:h}=(f=c.__r3f)!=null?f:{};d&&h&&BU(h,c,d),c.isObject3D&&(c.visible=!1),jh(c)},unhideInstance(c,f){var d;const{attach:h,parent:p}=(d=c.__r3f)!=null?d:{};h&&p&&YC(p,c,h),(c.isObject3D&&f.visible==null||f.visible)&&(c.visible=!0),jh(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():mp.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&fr.fun(performance.now)?performance.now:fr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:fr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:fr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:KC}}var IU,kU;const XC=n=>"colorSpace"in n||"outputColorSpace"in n,eZ=()=>{var n;return(n=iO.ColorManagement)!=null?n:null},tZ=n=>n&&n.isOrthographicCamera,V6e=n=>n&&n.hasOwnProperty("current"),My=typeof window<"u"&&((IU=window.document)!=null&&IU.createElement||((kU=window.navigator)==null?void 0:kU.product)==="ReactNative")?z.useLayoutEffect:z.useEffect;function nZ(n){const e=z.useRef(n);return My(()=>void(e.current=n),[n]),e}function H6e({set:n}){return My(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class rZ extends z.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}rZ.getDerivedStateFromError=()=>({error:!0});const iZ="__default",LU=new Map,W6e=n=>n&&!!n.memoized&&!!n.changes;function sZ(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Lg=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function pw(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const fr={obj:n=>n===Object(n)&&!fr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(fr.str(n)||fr.num(n))return n===e;const s=fr.obj(n);if(s&&r==="reference")return n===e;const a=fr.arr(n);if(a&&t==="reference")return n===e;if((a||s)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(o in i?e:n)if(!fr.equ(n[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:n)if(n[o]!==e[o])return!1;if(fr.und(o)){if(a&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function G6e(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Gh(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function dD(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,a)=>s[a],n),{target:t,key:i}}else return{target:t,key:e}}const FU=/-\d+$/;function YC(n,e,t){if(fr.str(t)){if(FU.test(t)){const s=t.replace(FU,""),{target:a,key:o}=dD(n,s);Array.isArray(a[o])||(a[o]=[])}const{target:r,key:i}=dD(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function BU(n,e,t){var r,i;if(fr.str(t)){const{target:s,key:a}=dD(n,t),o=e.__r3f.previousAttach;o===void 0?delete s[a]:s[a]=o}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function aZ(n,{children:e,key:t,ref:r,...i},{children:s,key:a,ref:o,...l}={},u=!1){var c;const f=(c=n==null?void 0:n.__r3f)!=null?c:{},d=Object.entries(i),h=[];if(u){const v=Object.keys(l);for(let y=0;y<v.length;y++)i.hasOwnProperty(v[y])||d.unshift([v[y],iZ+"remove"])}d.forEach(([v,y])=>{var m;if((m=n.__r3f)!=null&&m.primitive&&v==="object"||fr.equ(y,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return h.push([v,y,!0,[]]);let S=[];v.includes("-")&&(S=v.split("-")),h.push([v,y,!1,S]);for(const b in i){const g=i[b];b.startsWith(`${v}-`)&&h.push([b,g,!1,b.split("-")])}});const p={...i};return f.memoizedProps&&f.memoizedProps.args&&(p.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(p.attach=f.memoizedProps.attach),{memoized:p,changes:h}}const j6e=typeof process<"u"&&!1;function KC(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},a=s.root,o=(r=a==null||a.getState==null?void 0:a.getState())!=null?r:{},{memoized:l,changes:u}=W6e(e)?e:aZ(n,e),c=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let d=0;d<u.length;d++){let[h,p,v,y]=u[d];if(XC(n)){const g="srgb",w="srgb-linear";h==="encoding"?(h="colorSpace",p=p===3001?g:w):h==="outputEncoding"&&(h="outputColorSpace",p=p===3001?g:w)}let m=n,S=m[h];if(y.length&&(S=y.reduce((b,g)=>b[g],n),!(S&&S.set))){const[b,...g]=y.reverse();m=g.reverse().reduce((w,x)=>w[x],n),h=b}if(p===iZ+"remove")if(m.constructor){let b=LU.get(m.constructor);b||(b=new m.constructor,LU.set(m.constructor,b)),p=b[h]}else p=0;if(v)p?s.handlers[h]=p:delete s.handlers[h],s.eventCount=Object.keys(s.handlers).length;else if(S&&S.set&&(S.copy||S instanceof fd)){if(Array.isArray(p))S.fromArray?S.fromArray(p):S.set(...p);else if(S.copy&&p&&p.constructor&&(j6e?S.constructor.name===p.constructor.name:S.constructor===p.constructor))S.copy(p);else if(p!==void 0){const b=S instanceof mt;!b&&S.setScalar?S.setScalar(p):S instanceof fd&&p instanceof fd?S.mask=p.mask:S.set(p),!eZ()&&!o.linear&&b&&S.convertSRGBToLinear()}}else if(m[h]=p,m[h]instanceof Sr&&m[h].format===gs&&m[h].type===yl){const b=m[h];XC(b)&&XC(o.gl)?b.colorSpace=o.gl.outputColorSpace:b.encoding=o.gl.outputEncoding}jh(n)}if(s.parent&&n.raycast&&c!==s.eventCount){const d=pw(n).getState().internal,h=d.interaction.indexOf(n);h>-1&&d.interaction.splice(h,1),s.eventCount&&d.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=n.__r3f)!=null&&i.parent&&hD(n),n}function jh(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function hD(n){n.onUpdate==null||n.onUpdate(n)}function oZ(n,e){n.manual||(tZ(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function hb(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function q6e(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return mp.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return mp.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return mp.ContinuousEventPriority;default:return mp.DefaultEventPriority}}function lZ(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function X6e(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{lZ(t.capturedMap,e,r,i)})}function Y6e(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+f*f))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),f=new Set,d=[],h=u?u(c.internal.interaction):c.internal.interaction;for(let m=0;m<h.length;m++){const S=Lg(h[m]);S&&(S.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function p(m){const S=Lg(m);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var b;S.events.compute==null||S.events.compute(l,S,(b=S.previousRoot)==null?void 0:b.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(m,!0):[]}let v=h.flatMap(p).sort((m,S)=>{const b=Lg(m.object),g=Lg(S.object);return!b||!g?m.distance-S.distance:g.events.priority-b.events.priority||m.distance-S.distance}).filter(m=>{const S=hb(m);return f.has(S)?!1:(f.add(S),!0)});c.events.filter&&(v=c.events.filter(v,c));for(const m of v){let S=m.object;for(;S;){var y;(y=S.__r3f)!=null&&y.eventCount&&d.push({...m,eventObject:S}),S=S.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let m of c.internal.capturedMap.get(l.pointerId).values())f.has(hb(m.intersection))||d.push(m.intersection);return d}function i(l,u,c,f){const d=n.getState();if(l.length){const h={stopped:!1};for(const p of l){const v=Lg(p.object)||d,{raycaster:y,pointer:m,camera:S,internal:b}=v,g=new ve(m.x,m.y,0).unproject(S),w=C=>{var T,R;return(T=(R=b.capturedMap.get(C))==null?void 0:R.has(p.eventObject))!=null?T:!1},x=C=>{const T={intersection:p,target:u.target};b.capturedMap.has(C)?b.capturedMap.get(C).set(p.eventObject,T):b.capturedMap.set(C,new Map([[p.eventObject,T]])),u.target.setPointerCapture(C)},M=C=>{const T=b.capturedMap.get(C);T&&lZ(b.capturedMap,p.eventObject,T,C)};let A={};for(let C in u){let T=u[C];typeof T!="function"&&(A[C]=T)}let N={...p,...A,pointer:m,intersections:l,stopped:h.stopped,delta:c,unprojectedPoint:g,ray:y.ray,camera:S,stopPropagation(){const C="pointerId"in u&&b.capturedMap.get(u.pointerId);if((!C||C.has(p.eventObject))&&(N.stopped=h.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(T=>T.eventObject===p.eventObject))){const T=l.slice(0,l.indexOf(p));s([...T,p])}},target:{hasPointerCapture:w,setPointerCapture:x,releasePointerCapture:M},currentTarget:{hasPointerCapture:w,setPointerCapture:x,releasePointerCapture:M},nativeEvent:u};if(f(N),h.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(f=>f.object===c.object&&f.index===c.index&&f.instanceId===c.instanceId)){const d=c.eventObject.__r3f,h=d==null?void 0:d.handlers;if(u.hovered.delete(hb(c)),d!=null&&d.eventCount){const p={...c,intersections:l};h.onPointerOut==null||h.onPointerOut(p),h.onPointerLeave==null||h.onPointerLeave(p)}}}function a(l,u){for(let c=0;c<u.length;c++){const f=u[c].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:f,internal:d}=n.getState();d.lastEvent.current=c;const h=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(c,h?t:void 0),m=p?e(c):0;l==="onPointerDown"&&(d.initialClick=[c.offsetX,c.offsetY],d.initialHits=y.map(b=>b.eventObject)),p&&!y.length&&m<=2&&(a(c,d.interaction),f&&f(c)),h&&s(y);function S(b){const g=b.eventObject,w=g.__r3f,x=w==null?void 0:w.handlers;if(w!=null&&w.eventCount)if(h){if(x.onPointerOver||x.onPointerEnter||x.onPointerOut||x.onPointerLeave){const M=hb(b),A=d.hovered.get(M);A?A.stopped&&b.stopPropagation():(d.hovered.set(M,b),x.onPointerOver==null||x.onPointerOver(b),x.onPointerEnter==null||x.onPointerEnter(b))}x.onPointerMove==null||x.onPointerMove(b)}else{const M=x[l];M?(!p||d.initialHits.includes(g))&&(a(c,d.interaction.filter(A=>!d.initialHits.includes(A))),M(b)):p&&d.initialHits.includes(g)&&a(c,d.interaction.filter(A=>!d.initialHits.includes(A)))}}i(y,c,m,S)}}return{handlePointer:o}}const K6e=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],uZ=n=>!!(n!=null&&n.render),sO=z.createContext(null),Z6e=(n,e)=>{const t=nR((o,l)=>{const u=new ve,c=new ve,f=new ve;function d(m=l().camera,S=c,b=l().size){const{width:g,height:w,top:x,left:M}=b,A=g/w;S instanceof ve?f.copy(S):f.set(...S);const N=m.getWorldPosition(u).distanceTo(f);if(tZ(m))return{width:g/m.zoom,height:w/m.zoom,top:x,left:M,factor:1,distance:N,aspect:A};{const C=m.fov*Math.PI/180,T=2*Math.tan(C/2)*N,R=T*(g/w);return{width:R,height:T,top:x,left:M,factor:g/R,distance:N,aspect:A}}}let h;const p=m=>o(S=>({performance:{...S.performance,current:m}})),v=new et;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(m=1)=>n(l(),m),advance:(m,S)=>e(m,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new QR,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const m=l();h&&clearTimeout(h),m.performance.current!==m.performance.min&&p(m.performance.min),h=setTimeout(()=>p(l().performance.max),m.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:m=>o(S=>({...S,events:{...S.events,...m}})),setSize:(m,S,b,g,w)=>{const x=l().camera,M={width:m,height:S,top:g||0,left:w||0,updateStyle:b};o(A=>({size:M,viewport:{...A.viewport,...d(x,c,M)}}))},setDpr:m=>o(S=>{const b=sZ(m);return{viewport:{...S.viewport,dpr:b,initialDpr:S.viewport.initialDpr||b}}}),setFrameloop:(m="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,m!=="never"&&(S.start(),S.elapsedTime=0),o(()=>({frameloop:m}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:z.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(m,S,b)=>{const g=l().internal;return g.priority=g.priority+(S>0?1:0),g.subscribers.push({ref:m,priority:S,store:b}),g.subscribers=g.subscribers.sort((w,x)=>w.priority-x.priority),()=>{const w=l().internal;w!=null&&w.subscribers&&(w.priority=w.priority-(S>0?1:0),w.subscribers=w.subscribers.filter(x=>x.ref!==m))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,a=r.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:u,gl:c,set:f}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==s){var d;i=l,s=u.dpr,oZ(o,l),c.setPixelRatio(u.dpr);const h=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,h)}o!==a&&(a=o,f(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};let pb,J6e=new Set,Q6e=new Set,eUe=new Set;function ZC(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Fg(n,e){switch(n){case"before":return ZC(J6e,e);case"after":return ZC(Q6e,e);case"tail":return ZC(eUe,e)}}let JC,QC;function eA(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),JC=e.internal.subscribers,pb=0;pb<JC.length;pb++)QC=JC[pb],QC.ref.current(QC.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function tUe(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,Fg("before",l);for(const c of n.values()){var u;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(t+=eA(l,i))}if(Fg("after",l),t===0)return Fg("tail",l),e=!1,cancelAnimationFrame(r)}function a(l,u=1){var c;if(!l)return n.forEach(f=>a(f.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function o(l,u=!0,c,f){if(u&&Fg("before",l),c)eA(l,c,f);else for(const d of n.values())eA(l,d.store.getState());u&&Fg("after",l)}return{loop:s,invalidate:a,advance:o}}function aO(){const n=z.useContext(sO);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Nr(n=t=>t,e){return aO()(n,e)}function WE(n,e=0){const t=aO(),r=t.getState().internal.subscribe,i=nZ(n);return My(()=>r(i,e,t),[e,r,t]),null}const im=new Map,{invalidate:zU,advance:UU}=tUe(im),{reconciler:R0,applyProps:Fh}=$6e(im,q6e),Bh={objects:"shallow",strict:!1},nUe=(n,e)=>{const t=typeof n=="function"?n(e):n;return uZ(t)?t:new kR({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function rUe(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:a,updateStyle:o=t}=e;return{width:r,height:i,top:s,left:a,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:a}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:a,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function iUe(n){const e=im.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Z6e(zU,UU),a=t||R0.createContainer(s,mp.ConcurrentRoot,null,!1,null,"",i,null);e||im.set(n,{fiber:a,store:s});let o,l=!1,u;return{configure(c={}){let{gl:f,size:d,scene:h,events:p,onCreated:v,shadows:y=!1,linear:m=!1,flat:S=!1,legacy:b=!1,orthographic:g=!1,frameloop:w="always",dpr:x=[1,2],performance:M,raycaster:A,camera:N,onPointerMissed:C}=c,T=s.getState(),R=T.gl;T.gl||T.set({gl:R=nUe(f,n)});let U=T.raycaster;U||T.set({raycaster:U=new rO});const{params:F,...B}=A||{};if(fr.equ(B,U,Bh)||Fh(U,{...B}),fr.equ(F,U.params,Bh)||Fh(U,{params:{...U.params,...F}}),!T.camera||T.camera===u&&!fr.equ(u,N,Bh)){u=N;const Q=N instanceof yy,K=Q?N:g?new au(0,0,0,0,.1,1e3):new Rr(75,0,.1,1e3);Q||(K.position.z=5,N&&Fh(K,N),!T.camera&&!(N!=null&&N.rotation)&&K.lookAt(0,0,0)),T.set({camera:K}),U.camera=K}if(!T.scene){let Q;h instanceof _0?Q=h:(Q=new _0,h&&Fh(Q,h)),T.set({scene:Gh(Q)})}if(!T.xr){var D;const Q=(ce,ue)=>{const me=s.getState();me.frameloop!=="never"&&UU(ce,!0,me,ue)},K=()=>{const ce=s.getState();ce.gl.xr.enabled=ce.gl.xr.isPresenting,ce.gl.xr.setAnimationLoop(ce.gl.xr.isPresenting?Q:null),ce.gl.xr.isPresenting||zU(ce)},re={connect(){const ce=s.getState().gl;ce.xr.addEventListener("sessionstart",K),ce.xr.addEventListener("sessionend",K)},disconnect(){const ce=s.getState().gl;ce.xr.removeEventListener("sessionstart",K),ce.xr.removeEventListener("sessionend",K)}};typeof((D=R.xr)==null?void 0:D.addEventListener)=="function"&&re.connect(),T.set({xr:re})}if(R.shadowMap){const Q=R.shadowMap.enabled,K=R.shadowMap.type;if(R.shadowMap.enabled=!!y,fr.boo(y))R.shadowMap.type=xv;else if(fr.str(y)){var O;const re={basic:UX,percentage:gE,soft:xv,variance:vo};R.shadowMap.type=(O=re[y])!=null?O:xv}else fr.obj(y)&&Object.assign(R.shadowMap,y);(Q!==R.shadowMap.enabled||K!==R.shadowMap.type)&&(R.shadowMap.needsUpdate=!0)}const $=eZ();$&&("enabled"in $?$.enabled=!b:"legacyMode"in $&&($.legacyMode=b)),Fh(R,{outputEncoding:m?3e3:3001,toneMapping:S?vl:mR}),T.legacy!==b&&T.set(()=>({legacy:b})),T.linear!==m&&T.set(()=>({linear:m})),T.flat!==S&&T.set(()=>({flat:S})),f&&!fr.fun(f)&&!uZ(f)&&!fr.equ(f,R,Bh)&&Fh(R,f),p&&!T.events.handlers&&T.set({events:p(s)});const Z=rUe(n,d);return fr.equ(Z,T.size,Bh)||T.setSize(Z.width,Z.height,Z.updateStyle,Z.top,Z.left),x&&T.viewport.dpr!==sZ(x)&&T.setDpr(x),T.frameloop!==w&&T.setFrameloop(w),T.onPointerMissed||T.set({onPointerMissed:C}),M&&!fr.equ(M,T.performance,Bh)&&T.set(Q=>({performance:{...Q.performance,...M}})),o=v,l=!0,this},render(c){return l||this.configure(),R0.updateContainer(z.createElement(sUe,{store:s,children:c,onCreated:o,rootElement:n}),a,null,()=>{}),s},unmount(){cZ(n)}}}function sUe({store:n,children:e,onCreated:t,rootElement:r}){return My(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),z.createElement(sO.Provider,{value:n},e)}function cZ(n,e){const t=im.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),R0.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,a,o,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),G6e(i),im.delete(n)}catch{}},500)})}}function aUe(n,e,t){return z.createElement(oUe,{key:e.uuid,children:n,container:e,state:t})}function oUe({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,a=aO(),[o]=z.useState(()=>new rO),[l]=z.useState(()=>new et),u=z.useCallback((f,d)=>{const h={...f};Object.keys(f).forEach(v=>{(K6e.includes(v)||f[v]!==d[v]&&d[v])&&delete h[v]});let p;if(d&&i){const v=d.camera;p=f.viewport.getCurrentViewport(v,new ve,i),v!==f.camera&&oZ(v,i)}return{...h,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...f.events,...d==null?void 0:d.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...p},...s}},[n]),[c]=z.useState(()=>{const f=a.getState();return nR((h,p)=>({...f,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...f.events,...r},size:{...f.size,...i},...s,set:h,get:p,setEvents:v=>h(y=>({...y,events:{...y.events,...v}}))}))});return z.useEffect(()=>{const f=a.subscribe(d=>c.setState(h=>u(d,h)));return()=>{f(),c.destroy()}},[]),z.useEffect(()=>{c.setState(f=>u(a.getState(),f))},[u]),z.createElement(z.Fragment,null,R0.createPortal(z.createElement(sO.Provider,{value:c},e),c,null))}R0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:z.version});function pD(n,e,t){var r,i,s,a,o;e==null&&(e=100);function l(){var c=Date.now()-a;c<e&&c>=0?r=setTimeout(l,e-c):(r=null,t||(o=n.apply(s,i),s=i=null))}var u=function(){s=this,i=arguments,a=Date.now();var c=t&&!r;return r||(r=setTimeout(l,e)),c&&(o=n.apply(s,i),s=i=null),o};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(o=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},u}pD.debounce=pD;var lUe=pD;const $U=so(lUe);function uUe(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,o]=z.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=z.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,f=z.useRef(!1);z.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,h,p]=z.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:b,top:g,width:w,height:x,bottom:M,right:A,x:N,y:C}=l.current.element.getBoundingClientRect(),T={left:b,top:g,width:w,height:x,bottom:M,right:A,x:N,y:C};l.current.element instanceof HTMLElement&&i&&(T.height=l.current.element.offsetHeight,T.width=l.current.element.offsetWidth),Object.freeze(T),f.current&&!hUe(l.current.lastBounds,T)&&o(l.current.lastBounds=T)};return[S,c?$U(S,c):S,u?$U(S,u):S]},[o,i,u,c]);function v(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",p,{capture:!0,passive:!0})))}const m=S=>{!S||S===l.current.element||(v(),l.current.element=S,l.current.scrollContainers=fZ(S),y())};return fUe(p,!!t),cUe(h),z.useEffect(()=>{v(),y()},[t,p,h]),z.useEffect(()=>v,[]),[m,a,d]}function cUe(n){z.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function fUe(n,e){z.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function fZ(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...fZ(n.parentElement)]}const dUe=["x","y","top","bottom","left","right","width","height"],hUe=(n,e)=>dUe.every(t=>n[t]===e[t]);var pUe=Object.defineProperty,mUe=Object.defineProperties,gUe=Object.getOwnPropertyDescriptors,VU=Object.getOwnPropertySymbols,vUe=Object.prototype.hasOwnProperty,yUe=Object.prototype.propertyIsEnumerable,HU=(n,e,t)=>e in n?pUe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,WU=(n,e)=>{for(var t in e||(e={}))vUe.call(e,t)&&HU(n,t,e[t]);if(VU)for(var t of VU(e))yUe.call(e,t)&&HU(n,t,e[t]);return n},xUe=(n,e)=>mUe(n,gUe(e)),GU,jU;typeof window<"u"&&((GU=window.document)!=null&&GU.createElement||((jU=window.navigator)==null?void 0:jU.product)==="ReactNative")?z.useLayoutEffect:z.useEffect;function dZ(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=dZ(r,e,t);if(i)return i;r=r.sibling}}function hZ(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const qU=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=qU;return}return qU.apply(this,arguments)};const oO=hZ(z.createContext(null));class pZ extends z.Component{render(){return z.createElement(oO.Provider,{value:this._reactInternals},this.props.children)}}function bUe(){const n=z.useContext(oO);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=z.useId();return z.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=dZ(r,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[n,e])}function wUe(){const n=bUe(),[e]=z.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==oO&&!e.has(i)&&e.set(i,z.useContext(hZ(i)))}t=t.return}return e}function SUe(){const n=wUe();return z.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>z.createElement(e,null,z.createElement(t.Provider,xUe(WU({},r),{value:n.get(t)}))),e=>z.createElement(pZ,WU({},e))),[n])}const tA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function _Ue(n){const{handlePointer:e}=Y6e(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(tA).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(a=>({events:{...a.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([a,o])=>{const[l,u]=tA[a];t.addEventListener(l,o,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,a])=>{if(r&&r.connected instanceof HTMLElement){const[o]=tA[s];r.connected.removeEventListener(o,a)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const EUe=z.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:a=_Ue,eventSource:o,eventPrefix:l,shadows:u,linear:c,flat:f,legacy:d,orthographic:h,frameloop:p,dpr:v,performance:y,raycaster:m,camera:S,scene:b,onPointerMissed:g,onCreated:w,...x},M){z.useMemo(()=>QK(F6e),[]);const A=SUe(),[N,C]=uUe({scroll:!0,debounce:{scroll:50,resize:0},...r}),T=z.useRef(null),R=z.useRef(null);z.useImperativeHandle(M,()=>T.current);const U=nZ(g),[F,B]=z.useState(!1),[D,O]=z.useState(!1);if(F)throw F;if(D)throw D;const $=z.useRef(null);My(()=>{const X=T.current;C.width>0&&C.height>0&&X&&($.current||($.current=iUe(X)),$.current.configure({gl:s,events:a,shadows:u,linear:c,flat:f,legacy:d,orthographic:h,frameloop:p,dpr:v,performance:y,raycaster:m,camera:S,scene:b,size:C,onPointerMissed:(...Z)=>U.current==null?void 0:U.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(o?V6e(o)?o.current:o:R.current),l&&Z.setEvents({compute:(Q,K)=>{const re=Q[l+"X"],ce=Q[l+"Y"];K.pointer.set(re/K.size.width*2-1,-(ce/K.size.height)*2+1),K.raycaster.setFromCamera(K.pointer,K.camera)}}),w==null||w(Z)}}),$.current.render(z.createElement(A,null,z.createElement(rZ,{set:O},z.createElement(z.Suspense,{fallback:z.createElement(H6e,{set:B})},e)))))}),z.useEffect(()=>{const X=T.current;if(X)return()=>cZ(X)},[]);const L=o?"none":"auto";return z.createElement("div",ot({ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:L,...i}},x),z.createElement("div",{ref:N,style:{width:"100%",height:"100%"}},z.createElement("canvas",{ref:T,style:{display:"block"}},t)))}),MUe=z.forwardRef(function(e,t){return z.createElement(pZ,null,z.createElement(EUe,ot({},e,{ref:t})))});var CUe=Object.defineProperty,AUe=(n,e,t)=>e in n?CUe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Zt=(n,e,t)=>(AUe(n,typeof e!="symbol"?e+"":e,t),t);const mb=new $d,XU=new Jl,TUe=Math.cos(70*(Math.PI/180)),YU=(n,e)=>(n%e+e)%e;let DUe=class extends Dl{constructor(e,t){super(),Zt(this,"object"),Zt(this,"domElement"),Zt(this,"enabled",!0),Zt(this,"target",new ve),Zt(this,"minDistance",0),Zt(this,"maxDistance",1/0),Zt(this,"minZoom",0),Zt(this,"maxZoom",1/0),Zt(this,"minPolarAngle",0),Zt(this,"maxPolarAngle",Math.PI),Zt(this,"minAzimuthAngle",-1/0),Zt(this,"maxAzimuthAngle",1/0),Zt(this,"enableDamping",!1),Zt(this,"dampingFactor",.05),Zt(this,"enableZoom",!0),Zt(this,"zoomSpeed",1),Zt(this,"enableRotate",!0),Zt(this,"rotateSpeed",1),Zt(this,"enablePan",!0),Zt(this,"panSpeed",1),Zt(this,"screenSpacePanning",!0),Zt(this,"keyPanSpeed",7),Zt(this,"zoomToCursor",!1),Zt(this,"autoRotate",!1),Zt(this,"autoRotateSpeed",2),Zt(this,"reverseOrbit",!1),Zt(this,"reverseHorizontalOrbit",!1),Zt(this,"reverseVerticalOrbit",!1),Zt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Zt(this,"mouseButtons",{LEFT:kf.ROTATE,MIDDLE:kf.DOLLY,RIGHT:kf.PAN}),Zt(this,"touches",{ONE:Lf.ROTATE,TWO:Lf.DOLLY_PAN}),Zt(this,"target0"),Zt(this,"position0"),Zt(this,"zoom0"),Zt(this,"_domElementKeyEvents",null),Zt(this,"getPolarAngle"),Zt(this,"getAzimuthalAngle"),Zt(this,"setPolarAngle"),Zt(this,"setAzimuthalAngle"),Zt(this,"getDistance"),Zt(this,"listenToKeyEvents"),Zt(this,"stopListenToKeyEvents"),Zt(this,"saveState"),Zt(this,"reset"),Zt(this,"update"),Zt(this,"connect"),Zt(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=ge=>{let We=YU(ge,2*Math.PI),W=c.phi;W<0&&(W+=2*Math.PI),We<0&&(We+=2*Math.PI);let pe=Math.abs(We-W);2*Math.PI-pe<pe&&(We<W?We+=2*Math.PI:W+=2*Math.PI),f.phi=We-W,r.update()},this.setAzimuthalAngle=ge=>{let We=YU(ge,2*Math.PI),W=c.theta;W<0&&(W+=2*Math.PI),We<0&&(We+=2*Math.PI);let pe=Math.abs(We-W);2*Math.PI-pe<pe&&(We<W?We+=2*Math.PI:W+=2*Math.PI),f.theta=We-W,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=ge=>{ge.addEventListener("keydown",Ne),this._domElementKeyEvents=ge},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ne),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=o.NONE},this.update=(()=>{const ge=new ve,We=new ve(0,1,0),W=new yi().setFromUnitVectors(e.up,We),pe=W.clone().invert(),Re=new ve,Ye=new yi,de=2*Math.PI;return function(){const H=r.object.position;W.setFromUnitVectors(e.up,We),pe.copy(W).invert(),ge.copy(H).sub(r.target),ge.applyQuaternion(W),c.setFromVector3(ge),r.autoRotate&&l===o.NONE&&F(R()),r.enableDamping?(c.theta+=f.theta*r.dampingFactor,c.phi+=f.phi*r.dampingFactor):(c.theta+=f.theta,c.phi+=f.phi);let ee=r.minAzimuthAngle,oe=r.maxAzimuthAngle;isFinite(ee)&&isFinite(oe)&&(ee<-Math.PI?ee+=de:ee>Math.PI&&(ee-=de),oe<-Math.PI?oe+=de:oe>Math.PI&&(oe-=de),ee<=oe?c.theta=Math.max(ee,Math.min(oe,c.theta)):c.theta=c.theta>(ee+oe)/2?Math.max(ee,c.theta):Math.min(oe,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),r.zoomToCursor&&N||r.object.isOrthographicCamera?c.radius=Q(c.radius):c.radius=Q(c.radius*d),ge.setFromSpherical(c),ge.applyQuaternion(pe),H.copy(r.target).add(ge),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),h.set(0,0,0));let ye=!1;if(r.zoomToCursor&&N){let _e=null;if(r.object instanceof Rr&&r.object.isPerspectiveCamera){const Pe=ge.length();_e=Q(Pe*d);const $e=Pe-_e;r.object.position.addScaledVector(M,$e),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Pe=new ve(A.x,A.y,0);Pe.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix(),ye=!0;const $e=new ve(A.x,A.y,0);$e.unproject(r.object),r.object.position.sub($e).add(Pe),r.object.updateMatrixWorld(),_e=ge.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;_e!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(_e).add(r.object.position):(mb.origin.copy(r.object.position),mb.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(mb.direction))<TUe?e.lookAt(r.target):(XU.setFromNormalAndCoplanarPoint(r.object.up,r.target),mb.intersectPlane(XU,r.target))))}else r.object instanceof au&&r.object.isOrthographicCamera&&(ye=d!==1,ye&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix()));return d=1,N=!1,ye||Re.distanceToSquared(r.object.position)>u||8*(1-Ye.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Re.copy(r.object.position),Ye.copy(r.object.quaternion),ye=!1,!0):!1}})(),this.connect=ge=>{ge===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=ge,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Oe),r.domElement.addEventListener("pointerdown",fe),r.domElement.addEventListener("pointercancel",q),r.domElement.addEventListener("wheel",Se)},this.dispose=()=>{var ge,We,W,pe,Re,Ye;r.domElement&&(r.domElement.style.touchAction="auto"),(ge=r.domElement)==null||ge.removeEventListener("contextmenu",Oe),(We=r.domElement)==null||We.removeEventListener("pointerdown",fe),(W=r.domElement)==null||W.removeEventListener("pointercancel",q),(pe=r.domElement)==null||pe.removeEventListener("wheel",Se),(Re=r.domElement)==null||Re.ownerDocument.removeEventListener("pointermove",Me),(Ye=r.domElement)==null||Ye.ownerDocument.removeEventListener("pointerup",q),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ne)};const r=this,i={type:"change"},s={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const u=1e-6,c=new cD,f=new cD;let d=1;const h=new ve,p=new et,v=new et,y=new et,m=new et,S=new et,b=new et,g=new et,w=new et,x=new et,M=new ve,A=new et;let N=!1;const C=[],T={};function R(){return 2*Math.PI/60/60*r.autoRotateSpeed}function U(){return Math.pow(.95,r.zoomSpeed)}function F(ge){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=ge:f.theta-=ge}function B(ge){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=ge:f.phi-=ge}const D=(()=>{const ge=new ve;return function(W,pe){ge.setFromMatrixColumn(pe,0),ge.multiplyScalar(-W),h.add(ge)}})(),O=(()=>{const ge=new ve;return function(W,pe){r.screenSpacePanning===!0?ge.setFromMatrixColumn(pe,1):(ge.setFromMatrixColumn(pe,0),ge.crossVectors(r.object.up,ge)),ge.multiplyScalar(W),h.add(ge)}})(),$=(()=>{const ge=new ve;return function(W,pe){const Re=r.domElement;if(Re&&r.object instanceof Rr&&r.object.isPerspectiveCamera){const Ye=r.object.position;ge.copy(Ye).sub(r.target);let de=ge.length();de*=Math.tan(r.object.fov/2*Math.PI/180),D(2*W*de/Re.clientHeight,r.object.matrix),O(2*pe*de/Re.clientHeight,r.object.matrix)}else Re&&r.object instanceof au&&r.object.isOrthographicCamera?(D(W*(r.object.right-r.object.left)/r.object.zoom/Re.clientWidth,r.object.matrix),O(pe*(r.object.top-r.object.bottom)/r.object.zoom/Re.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function L(ge){r.object instanceof Rr&&r.object.isPerspectiveCamera||r.object instanceof au&&r.object.isOrthographicCamera?d/=ge:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function X(ge){r.object instanceof Rr&&r.object.isPerspectiveCamera||r.object instanceof au&&r.object.isOrthographicCamera?d*=ge:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Z(ge){if(!r.zoomToCursor||!r.domElement)return;N=!0;const We=r.domElement.getBoundingClientRect(),W=ge.clientX-We.left,pe=ge.clientY-We.top,Re=We.width,Ye=We.height;A.x=W/Re*2-1,A.y=-(pe/Ye)*2+1,M.set(A.x,A.y,1).unproject(r.object).sub(r.object.position).normalize()}function Q(ge){return Math.max(r.minDistance,Math.min(r.maxDistance,ge))}function K(ge){p.set(ge.clientX,ge.clientY)}function re(ge){Z(ge),g.set(ge.clientX,ge.clientY)}function ce(ge){m.set(ge.clientX,ge.clientY)}function ue(ge){v.set(ge.clientX,ge.clientY),y.subVectors(v,p).multiplyScalar(r.rotateSpeed);const We=r.domElement;We&&(F(2*Math.PI*y.x/We.clientHeight),B(2*Math.PI*y.y/We.clientHeight)),p.copy(v),r.update()}function me(ge){w.set(ge.clientX,ge.clientY),x.subVectors(w,g),x.y>0?L(U()):x.y<0&&X(U()),g.copy(w),r.update()}function Ee(ge){S.set(ge.clientX,ge.clientY),b.subVectors(S,m).multiplyScalar(r.panSpeed),$(b.x,b.y),m.copy(S),r.update()}function xe(ge){Z(ge),ge.deltaY<0?X(U()):ge.deltaY>0&&L(U()),r.update()}function Te(ge){let We=!1;switch(ge.code){case r.keys.UP:$(0,r.keyPanSpeed),We=!0;break;case r.keys.BOTTOM:$(0,-r.keyPanSpeed),We=!0;break;case r.keys.LEFT:$(r.keyPanSpeed,0),We=!0;break;case r.keys.RIGHT:$(-r.keyPanSpeed,0),We=!0;break}We&&(ge.preventDefault(),r.update())}function De(){if(C.length==1)p.set(C[0].pageX,C[0].pageY);else{const ge=.5*(C[0].pageX+C[1].pageX),We=.5*(C[0].pageY+C[1].pageY);p.set(ge,We)}}function ie(){if(C.length==1)m.set(C[0].pageX,C[0].pageY);else{const ge=.5*(C[0].pageX+C[1].pageX),We=.5*(C[0].pageY+C[1].pageY);m.set(ge,We)}}function Ie(){const ge=C[0].pageX-C[1].pageX,We=C[0].pageY-C[1].pageY,W=Math.sqrt(ge*ge+We*We);g.set(0,W)}function ke(){r.enableZoom&&Ie(),r.enablePan&&ie()}function te(){r.enableZoom&&Ie(),r.enableRotate&&De()}function ne(ge){if(C.length==1)v.set(ge.pageX,ge.pageY);else{const W=at(ge),pe=.5*(ge.pageX+W.x),Re=.5*(ge.pageY+W.y);v.set(pe,Re)}y.subVectors(v,p).multiplyScalar(r.rotateSpeed);const We=r.domElement;We&&(F(2*Math.PI*y.x/We.clientHeight),B(2*Math.PI*y.y/We.clientHeight)),p.copy(v)}function Ce(ge){if(C.length==1)S.set(ge.pageX,ge.pageY);else{const We=at(ge),W=.5*(ge.pageX+We.x),pe=.5*(ge.pageY+We.y);S.set(W,pe)}b.subVectors(S,m).multiplyScalar(r.panSpeed),$(b.x,b.y),m.copy(S)}function se(ge){const We=at(ge),W=ge.pageX-We.x,pe=ge.pageY-We.y,Re=Math.sqrt(W*W+pe*pe);w.set(0,Re),x.set(0,Math.pow(w.y/g.y,r.zoomSpeed)),L(x.y),g.copy(w)}function j(ge){r.enableZoom&&se(ge),r.enablePan&&Ce(ge)}function G(ge){r.enableZoom&&se(ge),r.enableRotate&&ne(ge)}function fe(ge){var We,W;r.enabled!==!1&&(C.length===0&&((We=r.domElement)==null||We.ownerDocument.addEventListener("pointermove",Me),(W=r.domElement)==null||W.ownerDocument.addEventListener("pointerup",q)),Je(ge),ge.pointerType==="touch"?Fe(ge):J(ge))}function Me(ge){r.enabled!==!1&&(ge.pointerType==="touch"?He(ge):be(ge))}function q(ge){var We,W,pe;qe(ge),C.length===0&&((We=r.domElement)==null||We.releasePointerCapture(ge.pointerId),(W=r.domElement)==null||W.ownerDocument.removeEventListener("pointermove",Me),(pe=r.domElement)==null||pe.ownerDocument.removeEventListener("pointerup",q)),r.dispatchEvent(a),l=o.NONE}function J(ge){let We;switch(ge.button){case 0:We=r.mouseButtons.LEFT;break;case 1:We=r.mouseButtons.MIDDLE;break;case 2:We=r.mouseButtons.RIGHT;break;default:We=-1}switch(We){case kf.DOLLY:if(r.enableZoom===!1)return;re(ge),l=o.DOLLY;break;case kf.ROTATE:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(r.enablePan===!1)return;ce(ge),l=o.PAN}else{if(r.enableRotate===!1)return;K(ge),l=o.ROTATE}break;case kf.PAN:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(r.enableRotate===!1)return;K(ge),l=o.ROTATE}else{if(r.enablePan===!1)return;ce(ge),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&r.dispatchEvent(s)}function be(ge){if(r.enabled!==!1)switch(l){case o.ROTATE:if(r.enableRotate===!1)return;ue(ge);break;case o.DOLLY:if(r.enableZoom===!1)return;me(ge);break;case o.PAN:if(r.enablePan===!1)return;Ee(ge);break}}function Se(ge){r.enabled===!1||r.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(ge.preventDefault(),r.dispatchEvent(s),xe(ge),r.dispatchEvent(a))}function Ne(ge){r.enabled===!1||r.enablePan===!1||Te(ge)}function Fe(ge){switch(lt(ge),C.length){case 1:switch(r.touches.ONE){case Lf.ROTATE:if(r.enableRotate===!1)return;De(),l=o.TOUCH_ROTATE;break;case Lf.PAN:if(r.enablePan===!1)return;ie(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(r.touches.TWO){case Lf.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ke(),l=o.TOUCH_DOLLY_PAN;break;case Lf.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;te(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&r.dispatchEvent(s)}function He(ge){switch(lt(ge),l){case o.TOUCH_ROTATE:if(r.enableRotate===!1)return;ne(ge),r.update();break;case o.TOUCH_PAN:if(r.enablePan===!1)return;Ce(ge),r.update();break;case o.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;j(ge),r.update();break;case o.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;G(ge),r.update();break;default:l=o.NONE}}function Oe(ge){r.enabled!==!1&&ge.preventDefault()}function Je(ge){C.push(ge)}function qe(ge){delete T[ge.pointerId];for(let We=0;We<C.length;We++)if(C[We].pointerId==ge.pointerId){C.splice(We,1);return}}function lt(ge){let We=T[ge.pointerId];We===void 0&&(We=new et,T[ge.pointerId]=We),We.set(ge.pageX,ge.pageY)}function at(ge){const We=ge.pointerId===C[0].pointerId?C[1]:C[0];return T[We.pointerId]}t!==void 0&&this.connect(t),this.update()}};function NUe(n,e,t,r){const i=class extends Ea{constructor(a={}){const o=Object.entries(n);super({uniforms:o.reduce((l,[u,c])=>{const f=PR.clone({[u]:{value:c}});return{...l,...f}},{}),vertexShader:e,fragmentShader:t}),this.key="",o.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:u=>this.uniforms[l].value=u})),Object.assign(this,a)}};return i.key=zY.generateUUID(),i}function PUe(n,e,t){const r=Nr(d=>d.size),i=Nr(d=>d.viewport),s=typeof n=="number"?n:r.width*i.dpr,a=r.height*i.dpr,o=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...c}=o,f=z.useMemo(()=>{const d=new no(s,a,{minFilter:or,magFilter:or,type:Ed,...c});return u&&(d.depthTexture=new SE(s,a,ha)),d.samples=l,d},[]);return z.useLayoutEffect(()=>{f.setSize(s,a),l&&(f.samples=l)},[l,f,s,a]),z.useEffect(()=>()=>f.dispose(),[]),f}const RUe=n=>typeof n=="function",OUe=z.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,children:r,makeDefault:i,...s},a)=>{const o=Nr(({set:y})=>y),l=Nr(({camera:y})=>y),u=Nr(({size:y})=>y),c=z.useRef(null);z.useImperativeHandle(a,()=>c.current,[]);const f=z.useRef(null),d=PUe(e);z.useLayoutEffect(()=>{s.manual||c.current.updateProjectionMatrix()},[u,s]),z.useLayoutEffect(()=>{c.current.updateProjectionMatrix()}),z.useLayoutEffect(()=>{if(i){const y=l;return o(()=>({camera:c.current})),()=>o(()=>({camera:y}))}},[c,i,o]);let h=0,p=null;const v=RUe(r);return WE(y=>{v&&(t===1/0||h<t)&&(f.current.visible=!1,y.gl.setRenderTarget(d),p=y.scene.background,n&&(y.scene.background=n),y.gl.render(y.scene,c.current),y.scene.background=p,y.gl.setRenderTarget(null),f.current.visible=!0,h++)}),z.createElement(z.Fragment,null,z.createElement("orthographicCamera",ot({left:u.width/-2,right:u.width/2,top:u.height/2,bottom:u.height/-2,ref:c},s),!v&&r),z.createElement("group",{ref:f},v&&r(d.texture)))}),IUe=z.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:a,onStart:o,onEnd:l,...u},c)=>{const f=Nr(x=>x.invalidate),d=Nr(x=>x.camera),h=Nr(x=>x.gl),p=Nr(x=>x.events),v=Nr(x=>x.setEvents),y=Nr(x=>x.set),m=Nr(x=>x.get),S=Nr(x=>x.performance),b=e||d,g=r||p.connected||h.domElement,w=z.useMemo(()=>new DUe(b),[b]);return WE(()=>{w.enabled&&w.update()},-1),z.useEffect(()=>(s&&w.connect(s===!0?g:s),w.connect(g),()=>void w.dispose()),[s,g,t,w,f]),z.useEffect(()=>{const x=N=>{f(),t&&S.regress(),a&&a(N)},M=N=>{o&&o(N)},A=N=>{l&&l(N)};return w.addEventListener("change",x),w.addEventListener("start",M),w.addEventListener("end",A),()=>{w.removeEventListener("start",M),w.removeEventListener("end",A),w.removeEventListener("change",x)}},[a,o,l,w,f,v]),z.useEffect(()=>{if(n){const x=m().controls;return y({controls:w}),()=>y({controls:x})}},[n,w]),z.createElement("primitive",ot({ref:c,object:w,enableDamping:i},u))});function kUe({defaultScene:n,defaultCamera:e,renderPriority:t=1}){const{gl:r,scene:i,camera:s}=Nr();let a;return WE(()=>{a=r.autoClear,t===1&&(r.autoClear=!0,r.render(n,e)),r.autoClear=!1,r.clearDepth(),r.render(i,s),r.autoClear=a},t),z.createElement("group",{onPointerOver:()=>null})}function LUe({children:n,renderPriority:e=1}){const{scene:t,camera:r}=Nr(),[i]=z.useState(()=>new _0);return z.createElement(z.Fragment,null,aUe(z.createElement(z.Fragment,null,n,z.createElement(kUe,{defaultScene:t,defaultCamera:r,renderPriority:e})),i,{events:{priority:e+1}}))}const mZ=z.createContext({}),FUe=()=>z.useContext(mZ),BUe=2*Math.PI,nA=new En,KU=new Kt,[zh,rA]=[new yi,new yi],ZU=new ve,JU=new ve,zUe=n=>"minPolarAngle"in n,UUe=({alignment:n="bottom-right",margin:e=[80,80],renderPriority:t=1,onUpdate:r,onTarget:i,children:s})=>{const a=Nr(x=>x.size),o=Nr(x=>x.camera),l=Nr(x=>x.controls),u=Nr(x=>x.invalidate),c=z.useRef(null),f=z.useRef(null),d=z.useRef(!1),h=z.useRef(0),p=z.useRef(new ve(0,0,0)),v=z.useRef(new ve(0,0,0));z.useEffect(()=>{v.current.copy(o.up)},[o]);const y=z.useCallback(x=>{d.current=!0,(l||i)&&(p.current=(l==null?void 0:l.target)||(i==null?void 0:i())),h.current=o.position.distanceTo(ZU),zh.copy(o.quaternion),JU.copy(x).multiplyScalar(h.current).add(ZU),nA.lookAt(JU),nA.up.copy(o.up),rA.copy(nA.quaternion),u()},[l,o,i,u]);WE((x,M)=>{if(f.current&&c.current){var A;if(d.current)if(zh.angleTo(rA)<.01)d.current=!1,zUe(l)&&o.up.copy(v.current);else{const N=M*BUe;zh.rotateTowards(rA,N),o.position.set(0,0,1).applyQuaternion(zh).multiplyScalar(h.current).add(p.current),o.up.set(0,1,0).applyQuaternion(zh).normalize(),o.quaternion.copy(zh),r?r():l&&l.update(),u()}KU.copy(o.matrix).invert(),(A=c.current)==null||A.quaternion.setFromRotationMatrix(KU)}});const m=z.useMemo(()=>({tweenCamera:y}),[y]),[S,b]=e,g=n.endsWith("-center")?0:n.endsWith("-left")?-a.width/2+S:a.width/2-S,w=n.startsWith("center-")?0:n.startsWith("top-")?a.height/2-b:-a.height/2+b;return z.createElement(LUe,{renderPriority:t},z.createElement(mZ.Provider,{value:m},z.createElement(OUe,{makeDefault:!0,ref:f,position:[0,0,200]}),z.createElement("group",{ref:c,position:[g,w,0]},s)))};function iA({scale:n=[.8,.05,.05],color:e,rotation:t}){return z.createElement("group",{rotation:t},z.createElement("mesh",{position:[.4,0,0]},z.createElement("boxGeometry",{args:n}),z.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function Uh({onClick:n,font:e,disabled:t,arcStyle:r,label:i,labelColor:s,axisHeadScale:a=1,...o}){const l=Nr(v=>v.gl),u=z.useMemo(()=>{const v=document.createElement("canvas");v.width=64,v.height=64;const y=v.getContext("2d");return y.beginPath(),y.arc(32,32,16,0,2*Math.PI),y.closePath(),y.fillStyle=r,y.fill(),i&&(y.font=e,y.textAlign="center",y.fillStyle=s,y.fillText(i,32,41)),new cK(v)},[r,i,s,e]),[c,f]=z.useState(!1),d=(i?1:.75)*(c?1.2:1)*a,h=v=>{v.stopPropagation(),f(!0)},p=v=>{v.stopPropagation(),f(!1)};return z.createElement("sprite",ot({scale:d,onPointerOver:t?void 0:h,onPointerOut:t?void 0:n||p},o),z.createElement("spriteMaterial",{map:u,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:i?1:.75,toneMapped:!1}))}const $Ue=({hideNegativeAxes:n,hideAxisHeads:e,disabled:t,font:r="18px Inter var, Arial, sans-serif",axisColors:i=["#ff2060","#20df80","#2080ff"],axisHeadScale:s=1,axisScale:a,labels:o=["X","Y","Z"],labelColor:l="#000",onClick:u,...c})=>{const[f,d,h]=i,{tweenCamera:p}=FUe(),v={font:r,disabled:t,labelColor:l,onClick:u,axisHeadScale:s,onPointerDown:t?void 0:y=>{p(y.object.position),y.stopPropagation()}};return z.createElement("group",ot({scale:40},c),z.createElement(iA,{color:f,rotation:[0,0,0],scale:a}),z.createElement(iA,{color:d,rotation:[0,0,Math.PI/2],scale:a}),z.createElement(iA,{color:h,rotation:[0,-Math.PI/2,0],scale:a}),!e&&z.createElement(z.Fragment,null,z.createElement(Uh,ot({arcStyle:f,position:[1,0,0],label:o[0]},v)),z.createElement(Uh,ot({arcStyle:d,position:[0,1,0],label:o[1]},v)),z.createElement(Uh,ot({arcStyle:h,position:[0,0,1],label:o[2]},v)),!n&&z.createElement(z.Fragment,null,z.createElement(Uh,ot({arcStyle:f,position:[-1,0,0]},v)),z.createElement(Uh,ot({arcStyle:d,position:[0,-1,0]},v)),z.createElement(Uh,ot({arcStyle:h,position:[0,0,-1]},v)))))};function VUe(n,e){const t=n+"Geometry";return z.forwardRef(({args:r,children:i,...s},a)=>{const o=z.useRef(null);return z.useImperativeHandle(a,()=>o.current),z.useLayoutEffect(()=>void(e==null?void 0:e(o.current))),z.createElement("mesh",ot({ref:o},s),z.createElement(t,{attach:"geometry",args:r}),i)})}const HUe=VUe("plane"),kc={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new mt("#ff0000"),backfaceStroke:new mt("#0000ff"),fill:new mt("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},WUe=NUe(kc.uniforms,kc.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,kc.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function GUe(n,e){n.onBeforeCompile=t=>{t.uniforms={...t.uniforms,...e},t.vertexShader=t.vertexShader.replace("void main() {",`
		  ${kc.vertex}
		  void main() {
			initWireframe();
		`),t.fragmentShader=t.fragmentShader.replace("void main() {",`
		  ${kc.fragment}
		  void main() {
		`),t.fragmentShader=t.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},n.side=da,n.transparent=!0}function jUe(n,e){z.useEffect(()=>{var t;return void(n.fillOpacity.value=(t=e.fillOpacity)!==null&&t!==void 0?t:n.fillOpacity.value)},[e.fillOpacity]),z.useEffect(()=>{var t;return void(n.fillMix.value=(t=e.fillMix)!==null&&t!==void 0?t:n.fillMix.value)},[e.fillMix]),z.useEffect(()=>{var t;return void(n.strokeOpacity.value=(t=e.strokeOpacity)!==null&&t!==void 0?t:n.strokeOpacity.value)},[e.strokeOpacity]),z.useEffect(()=>{var t;return void(n.thickness.value=(t=e.thickness)!==null&&t!==void 0?t:n.thickness.value)},[e.thickness]),z.useEffect(()=>void(n.colorBackfaces.value=!!e.colorBackfaces),[e.colorBackfaces]),z.useEffect(()=>void(n.dash.value=!!e.dash),[e.dash]),z.useEffect(()=>void(n.dashInvert.value=!!e.dashInvert),[e.dashInvert]),z.useEffect(()=>{var t;return void(n.dashRepeats.value=(t=e.dashRepeats)!==null&&t!==void 0?t:n.dashRepeats.value)},[e.dashRepeats]),z.useEffect(()=>{var t;return void(n.dashLength.value=(t=e.dashLength)!==null&&t!==void 0?t:n.dashLength.value)},[e.dashLength]),z.useEffect(()=>void(n.squeeze.value=!!e.squeeze),[e.squeeze]),z.useEffect(()=>{var t;return void(n.squeezeMin.value=(t=e.squeezeMin)!==null&&t!==void 0?t:n.squeezeMin.value)},[e.squeezeMin]),z.useEffect(()=>{var t;return void(n.squeezeMax.value=(t=e.squeezeMax)!==null&&t!==void 0?t:n.squeezeMax.value)},[e.squeezeMax]),z.useEffect(()=>void(n.stroke.value=e.stroke?new mt(e.stroke):n.stroke.value),[e.stroke]),z.useEffect(()=>void(n.fill.value=e.fill?new mt(e.fill):n.fill.value),[e.fill]),z.useEffect(()=>void(n.backfaceStroke.value=e.backfaceStroke?new mt(e.backfaceStroke):n.backfaceStroke.value),[e.backfaceStroke])}function qUe(n){return!!(n!=null&&n.geometry)}function XUe(n){return!!(n!=null&&n.isBufferGeometry)}function YUe(n){return!!(n!=null&&n.current)}function QU(n){return(n==null?void 0:n.current)!==void 0}function e9(n){return n.type==="WireframeGeometry"}function KUe(){const n={};for(const e in kc.uniforms)n[e]={value:kc.uniforms[e]};return n}function ZUe(n,e){const r=n.getAttribute("position").count,i=[];for(let s=0;s<r;s++){const a=s%2===0,o=e?1:0;a?i.push(0,0,1,0,1,0,1,0,o):i.push(0,1,0,0,0,1,1,0,o)}return new kn(Float32Array.from(i),3)}function gZ(n){const e=YUe(n)?n.current:n;if(XUe(e))return e;{if(e9(e))throw new Error("Wireframe: WireframeGeometry is not supported.");const t=e.parent;if(qUe(t)){if(e9(t.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return t.geometry}}}function vZ(n,e){if(n.index){console.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const r=n.toNonIndexed();n.copy(r),n.setIndex(null)}const t=ZUe(n,e);n.setAttribute("barycentric",t)}function JUe({geometry:n,simplify:e=!1,...t}){QK({MeshWireframeMaterial:WUe});const[r,i]=z.useState(null);z.useLayoutEffect(()=>{const a=gZ(n);if(!a)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");vZ(a,e),QU(n)&&i(a)},[e,n]);const s=QU(n)?r:n;return z.createElement(z.Fragment,null,s&&z.createElement("mesh",{geometry:s},z.createElement("meshWireframeMaterial",ot({attach:"material",transparent:!0,side:da,polygonOffset:!0,polygonOffsetFactor:-4},t,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function QUe({simplify:n=!1,...e}){const t=z.useRef(null),r=z.useMemo(()=>KUe(),[kc.uniforms]);return jUe(r,e),z.useLayoutEffect(()=>{const i=gZ(t);if(!i)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const s=i.clone();return vZ(i,n),()=>{i.copy(s),s.dispose()}},[n]),z.useLayoutEffect(()=>{const i=t.current.parent,s=i.material.clone();return GUe(i.material,r),()=>{i.material.dispose(),i.material=s}},[]),z.createElement("object3D",{ref:t})}function yZ({geometry:n,...e}){return n?z.createElement(JUe,ot({geometry:n},e)):z.createElement(QUe,e)}const e9e=function({size1:e=1,size2:t=1e3,color:r=new mt("#b6aebf"),distance:i=3e3,axes:s="xyz"}={}){const a=s.substr(0,2);return new Ea({side:da,uniforms:{uSize1:{value:e},uSize2:{value:t},uColor:{value:r},uDistance:{value:i}},transparent:!0,vertexShader:`
           
           varying vec3 worldPosition;
		   
           uniform float uDistance;
           
           void main() {
           
                vec3 pos = position.${s} * uDistance;
                pos.${a} += cameraPosition.${a};
                
                worldPosition = pos;
                
                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
           
           }
           `,fragmentShader:`
           
           varying vec3 worldPosition;
           
           uniform float uSize1;
           uniform float uSize2;
           uniform vec3 uColor;
           uniform float uDistance;
            
            
            
            float getGrid(float size) {
            
                vec2 r = worldPosition.${a} / size;
                
                
                vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
                float line = min(grid.x, grid.y);
                
            
                return 1.0 - min(line, 1.0);
            }
            
           void main() {
           
                
                  float d = 1.0 - min(distance(cameraPosition.${a}, worldPosition.${a}) / uDistance, 1.0);
                
                  float g1 = getGrid(uSize1);
                  float g2 = getGrid(uSize2);
                  
                  
                  gl_FragColor = vec4(uColor.rgb, mix(g2, g1, g1) * pow(d, 3.0));
                  gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);
                
                  if ( gl_FragColor.a <= 0.0 ) discard;
                
           
           }
           
           `,extensions:{derivatives:!0}})},t9e=()=>{const n=z.useRef(e9e());return le.jsx(HUe,{material:n.current})},n9e=Ae.memo(Ae.forwardRef(function({axesParam:e,enableDamping:t},r){return le.jsxs(le.Fragment,{children:[le.jsx(IUe,{ref:r,panSpeed:1.5,zoomSpeed:.5,enableDamping:t}),e&&le.jsx(UUe,{alignment:"bottom-right",margin:[70,100],onTarget:()=>{var i;return(i=r==null?void 0:r.current)==null?void 0:i.target},onUpdate:()=>{var i;(i=r.current)==null||i.update()},children:le.jsx($Ue,{font:"18px Inter var, HKGrotesk, sans-serif"})})]})}));En.DEFAULT_UP.set(0,0,1);function xZ({children:n,...e}){const t=Math.min(window.devicePixelRatio,2);let r=e.outdatedMesh?"#ababab":"#f5f5f5";return le.jsx(z.Suspense,{fallback:null,children:le.jsxs(MUe,{id:"threeCanvas",style:{backgroundColor:r},dpr:t,frameloop:"demand",orthographic:!0,camera:{fov:75,near:.1,right:2e3,left:-2e3,bottom:-2e3,far:2e3,position:[500,500,500],zoom:7},shadows:!0,children:[e.gridParam?le.jsx(t9e,{}):null,le.jsx(n9e,{axesParam:e.axesParam,enableDamping:!1}),e.outdatedMesh?le.jsx("ambientLight",{intensity:.4}):le.jsx("ambientLight",{intensity:.9}),n]})})}function bZ(n,e,t){if(n.clearGroups(),delete n.userData.faceGroups,n.setIndex(e.triangles),n.setAttribute("position",new Nt(e.vertices,3)),e.faceGroups){let r=new Set;n.userData.faceGroups=e.faceGroups,e.faceGroups.forEach(({start:i,count:s,faceId:a})=>{n.addGroup(i,s,r.has(a)?1:0)})}else n.addGroup(0,e.triangles.length,0);e.normals&&e.normals.length?n.setAttribute("normal",new Nt(e.normals,3)):n.computeVertexNormals(),n.computeBoundingBox()}function wZ(n,e,t){if(n.clearGroups(),delete n.userData.edgeGroups,n.setAttribute("position",new Nt(e.lines,3)),!!e)if(e.edgeGroups){let r=new Set;n.userData.edgeGroups=e.edgeGroups,e.edgeGroups.forEach(({start:i,count:s,edgeId:a})=>{n.addGroup(i,s,r.has(a)?1:0)})}else n.addGroup(0,e.lines.length/3,0)}function SZ(n,e){n.clearGroups(),delete n.userData.edgeGroups,n.copy(new GR(e,2))}const _Z=Ae.memo(function({mesh:e,isSolid:t,setOutdatedMesh:r}){const{invalidate:i}=Nr(),[s,a]=z.useState([]);return z.useLayoutEffect(()=>{let o=[];e.map(l=>{const u=new rn,c=new rn;l.faces&&bZ(u,l.faces),l.edges?wZ(c,l.edges):l.faces&&SZ(c,u);const f=u,d=c,h=l.color;o.push({body:f,lines:d,color:h})}),a(o),i()},[e,i]),z.useEffect(()=>()=>{r(!1),i()},[i]),le.jsx(le.Fragment,{children:s.map((o,l)=>le.jsxs("group",{children:[t?le.jsx(yZ,{geometry:o.body,stroke:o.color,squeeze:!0,dash:!1,simplify:!0,fill:o.color,fillOpacity:.2,strokeOpacity:.5}):le.jsx("mesh",{geometry:o.body,children:le.jsx("meshMatcapMaterial",{color:o.color,opacity:.5,polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1},"material"+o.color)},"mesh"+o.color),le.jsx("lineSegments",{geometry:o.lines},"lines"+o.color),le.jsx("lineSegments",{geometry:o.lines,children:le.jsx("lineBasicMaterial",{color:"#3c5a6e",opacity:"1",linewidth:8})},"linesmesh"+o.color)]},"group"+o.color+l))})}),EZ=Ae.memo(function({mesh:e}){const{invalidate:t}=Nr(),[r,i]=z.useState([]);return z.useLayoutEffect(()=>{let s=[];e.map(a=>{const o=new rn,l=new rn;a.faces&&bZ(o,a.faces),a.edges?wZ(l,a.edges):a.faces&&SZ(l,o);const u=o,c=l,f=a.color;s.push({body:u,lines:c,color:f})}),i(s),t()},[e,t]),z.useEffect(()=>()=>{t()},[t]),le.jsx(le.Fragment,{children:r.map((s,a)=>le.jsx("group",{children:le.jsx(yZ,{geometry:s.body,stroke:"#bebbbf",squeeze:!0,dash:!1,simplify:!0,fill:"#bebbbf",fillOpacity:.1,strokeOpacity:.2})},"groupwire"+s.color+a))})});function MZ(n){const[e,t]=z.useState(n.run),r=()=>{t(!e)};if(k.currentRepo)return e?le.jsx(le.Fragment,{children:le.jsx(Xv,{to:n.isItOwned?`/${k.currentRepo.id}`:"/",onClick:r,children:le.jsx("label",{title:"Create/Run Mode",className:"switch_run",children:le.jsxs("button",{style:{width:"100px",backgroundColor:"#3F4243",borderRadius:"12px",display:"flex"},children:[le.jsx("svg",{width:"12",height:"8",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",className:"leva-c-cHvNmv",style:{transform:"rotate(90deg)",alignSelf:"center",fill:"#c4a3d5"},children:le.jsx("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"})}),le.jsx("p",{style:{fontSize:"12px",padding:"0 5px 0 5px",color:"#c4a3d5",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:n.isItOwned?"Create Mode":"Browse Projects"})]})})},k.currentRepo.id)}):le.jsx(le.Fragment,{children:le.jsx(Xv,{to:k.currentRepo?`/run/${k.currentRepo.id}`:"/run",onClick:r,style:{position:"absolute"},children:le.jsx("label",{title:"Create/Run Mode",className:"switch",children:le.jsxs("button",{style:{width:"100px",backgroundColor:"#3F4243",borderRadius:"12px",display:"flex"},children:[le.jsx("p",{style:{fontSize:"12px",padding:"0 5px 0 5px",color:"#c4a3d5",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:"Run Mode"}),le.jsx("svg",{width:"12",height:"8",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",className:"leva-c-cHvNmv",style:{transform:"rotate(-90deg)",alignSelf:"center",fill:"#c4a3d5"},children:le.jsx("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"})})]})})},k.currentRepo?k.currentRepo.id:null)})}const CZ=function({activeAtom:e,run:t,setGrid:r,setAxes:i,setWire:s,setSolid:a,compiledBom:o}){let l={},u={};const c=vx(),f=vx(),d=vx(),h=vx(),[p,v]=z.useState(!0);z.useEffect(()=>{const g=setTimeout(()=>{v(!1)},0);return()=>clearTimeout(g)},[]),e!==null&&(l=e.createLevaInputs(),t&&(u=e.createLevaExport())),e.atomType=="Molecule"&&(o=e.createLevaBom());const y=z.useMemo(()=>({...o}),[o]),m=z.useMemo(()=>({...u}),[u]),S=z.useMemo(()=>({...l}),[l]);Sg(()=>({description:{label:"Description",value:e.description,rows:6,disabled:!1}}),{store:c},[e]),Sg(()=>m,{store:h},[e]),Sg(()=>y,{store:d},[e]),Sg(()=>S,{store:c},[e]),Sg("Grid",{grid:{value:!0,label:"Grid",onChange:g=>{r(g)}},axes:{value:!0,label:"Axes",onChange:g=>{i(g)}},wire:{value:!0,label:"Output Wire",onChange:g=>{s(g)}},wireframe:{value:!1,label:"Wireframe",onChange:g=>{a(g)}}},{store:f}),z.useEffect(()=>()=>{c.dispose()},[e]);const b={colors:{elevation1:"#3F4243",elevation2:"var(--bg-color)",elevation3:"#C4A3D5",highlight1:"#C4A3D5",highlight2:"#ededed",highlight3:"#ededed",accent1:"#C4A3D5",accent2:"#88748F",accent3:"#88748F",vivid1:"red"}};return le.jsxs(le.Fragment,{children:[" ",le.jsx("div",{className:t?"paramEditorDivRun":"paramEditorDiv",children:le.jsx(yx,{store:c,neverHide:!0,collapsed:{collapsed:p,onChange:g=>{v(g)}},hideCopyButton:!0,fill:!0,titleBar:{title:e.name||k.currentRepo.name,drag:!1},theme:b})}),le.jsx("div",{className:t?"gridEditorDivRun":"gridEditorDiv",children:le.jsx(yx,{store:f,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Render Settings",drag:!1},theme:b})}),e.atomType=="Molecule"?le.jsx("div",{className:t?"bomEditorDivRun":"bomEditorDiv",children:le.jsx(yx,{store:d,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Bill of Materials",drag:!1},theme:b})}):null,t?le.jsx("div",{className:"exportEditorDivRun",children:le.jsx(yx,{store:h,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Export Parts",drag:!1},theme:b})}):null]})};function AZ(n){const e=r=>{k.cad.visExport(n.activeAtom.uniqueID,n.activeAtom.uniqueID,r).then(i=>{k.cad.downExport(n.activeAtom.uniqueID,r).then(s=>{Xq.saveAs(s,k.currentMolecule.name+"."+r.toLowerCase())}).catch("Error downloading export file")}).catch("Error creating export geometry")},t=n.dialogContent;return le.jsx(le.Fragment,{children:le.jsxs("dialog",{open:n.shareDialog,style:{display:"flex"},className:"share-dialog",children:[t=="share"?le.jsxs("div",{style:{display:"flex",margin:"10px"},children:[le.jsx("p",{children:"Use this link to share this project:"}),le.jsxs("a",{style:{margin:"16px"},href:"/run/"+k.currentRepo.id,target:"_blank",children:["/run/",k.currentRepo.id]})]}):t=="export"?le.jsxs("div",{style:{display:"flex",margin:"10px"},children:[le.jsx("p",{children:"Export as:"}),le.jsxs("button",{autoFocus:!0,onClick:()=>e("STL"),children:[" ","STL"]}),le.jsxs("button",{autoFocus:!0,onClick:()=>e("STEP"),children:[" ","STEP"]}),le.jsxs("button",{autoFocus:!0,onClick:()=>e("SVG"),children:[" ","SVG"]})]}):null,le.jsx("a",{className:"closeButton",onClick:()=>n.setShareDialog(!1)})]})})}let r9e=le.jsx("svg",{fill:"#c4a3d5",height:"30px",width:"30px",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 227.216 227.216",xmlSpace:"preserve",children:le.jsx("path",{d:`M175.897,141.476c-13.249,0-25.11,6.044-32.98,15.518l-51.194-29.066c1.592-4.48,2.467-9.297,2.467-14.317
c0-5.019-0.875-9.836-2.467-14.316l51.19-29.073c7.869,9.477,19.732,15.523,32.982,15.523c23.634,0,42.862-19.235,42.862-42.879
C218.759,19.229,199.531,0,175.897,0C152.26,0,133.03,19.229,133.03,42.865c0,5.02,0.874,9.838,2.467,14.319L84.304,86.258
c-7.869-9.472-19.729-15.514-32.975-15.514c-23.64,0-42.873,19.229-42.873,42.866c0,23.636,19.233,42.865,42.873,42.865
c13.246,0,25.105-6.042,32.974-15.513l51.194,29.067c-1.593,4.481-2.468,9.3-2.468,14.321c0,23.636,19.23,42.865,42.867,42.865
c23.634,0,42.862-19.23,42.862-42.865C218.759,160.71,199.531,141.476,175.897,141.476z M175.897,15
c15.363,0,27.862,12.5,27.862,27.865c0,15.373-12.499,27.879-27.862,27.879c-15.366,0-27.867-12.506-27.867-27.879
C148.03,27.5,160.531,15,175.897,15z M51.33,141.476c-15.369,0-27.873-12.501-27.873-27.865c0-15.366,12.504-27.866,27.873-27.866
c15.363,0,27.861,12.5,27.861,27.866C79.191,128.975,66.692,141.476,51.33,141.476z M175.897,212.216
c-15.366,0-27.867-12.501-27.867-27.865c0-15.37,12.501-27.875,27.867-27.875c15.363,0,27.862,12.505,27.862,27.875
C203.759,199.715,191.26,212.216,175.897,212.216z`})}),i9e=le.jsx("svg",{width:"35px",height:"35px",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:le.jsx("path",{d:"M11.245 4.174C11.4765 3.50808 11.5922 3.17513 11.7634 3.08285C11.9115 3.00298 12.0898 3.00298 12.238 3.08285C12.4091 3.17513 12.5248 3.50808 12.7563 4.174L14.2866 8.57639C14.3525 8.76592 14.3854 8.86068 14.4448 8.93125C14.4972 8.99359 14.5641 9.04218 14.6396 9.07278C14.725 9.10743 14.8253 9.10947 15.0259 9.11356L19.6857 9.20852C20.3906 9.22288 20.743 9.23007 20.8837 9.36432C21.0054 9.48051 21.0605 9.65014 21.0303 9.81569C20.9955 10.007 20.7146 10.2199 20.1528 10.6459L16.4387 13.4616C16.2788 13.5829 16.1989 13.6435 16.1501 13.7217C16.107 13.7909 16.0815 13.8695 16.0757 13.9507C16.0692 14.0427 16.0982 14.1387 16.1563 14.3308L17.506 18.7919C17.7101 19.4667 17.8122 19.8041 17.728 19.9793C17.6551 20.131 17.5108 20.2358 17.344 20.2583C17.1513 20.2842 16.862 20.0829 16.2833 19.6802L12.4576 17.0181C12.2929 16.9035 12.2106 16.8462 12.1211 16.8239C12.042 16.8043 11.9593 16.8043 11.8803 16.8239C11.7908 16.8462 11.7084 16.9035 11.5437 17.0181L7.71805 19.6802C7.13937 20.0829 6.85003 20.2842 6.65733 20.2583C6.49056 20.2358 6.34626 20.131 6.27337 19.9793C6.18915 19.8041 6.29123 19.4667 6.49538 18.7919L7.84503 14.3308C7.90313 14.1387 7.93218 14.0427 7.92564 13.9507C7.91986 13.8695 7.89432 13.7909 7.85123 13.7217C7.80246 13.6435 7.72251 13.5829 7.56262 13.4616L3.84858 10.6459C3.28678 10.2199 3.00588 10.007 2.97101 9.81569C2.94082 9.65014 2.99594 9.48051 3.11767 9.36432C3.25831 9.23007 3.61074 9.22289 4.31559 9.20852L8.9754 9.11356C9.176 9.10947 9.27631 9.10743 9.36177 9.07278C9.43726 9.04218 9.50414 8.99359 9.55657 8.93125C9.61593 8.86068 9.64887 8.76592 9.71475 8.57639L11.245 4.174Z",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s9e=le.jsx("svg",{width:"45px",height:"45px",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:le.jsx("path",{d:"M7 5C7 3.89543 7.89543 3 9 3C10.1046 3 11 3.89543 11 5C11 5.74028 10.5978 6.38663 10 6.73244V14.0396H11.7915C12.8961 14.0396 13.7915 13.1441 13.7915 12.0396V10.7838C13.1823 10.4411 12.7708 9.78837 12.7708 9.03955C12.7708 7.93498 13.6662 7.03955 14.7708 7.03955C15.8753 7.03955 16.7708 7.93498 16.7708 9.03955C16.7708 9.77123 16.3778 10.4111 15.7915 10.7598V12.0396C15.7915 14.2487 14.0006 16.0396 11.7915 16.0396H10V17.2676C10.5978 17.6134 11 18.2597 11 19C11 20.1046 10.1046 21 9 21C7.89543 21 7 20.1046 7 19C7 18.2597 7.4022 17.6134 8 17.2676V6.73244C7.4022 6.38663 7 5.74028 7 5Z",fill:"#c4a3d5"})}),a9e=le.jsxs("svg",{width:"30px",height:"30px",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[le.jsx("path",{d:"M10.5 11L17 11",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),le.jsx("path",{d:"M7 11H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),le.jsx("path",{d:"M7 7.5H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),le.jsx("path",{d:"M7 14.5H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),le.jsx("path",{d:"M17 14.5H16M10.5 14.5H13.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),le.jsx("path",{d:"M17 7.5H14M10.5 7.5H11.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),le.jsx("path",{d:"M21 7V6.37006C21 5.17705 21 4.58055 20.842 4.09946C20.5425 3.18719 19.8468 2.47096 18.9606 2.16261C18.4933 2 17.9139 2 16.755 2H7.24502C6.08614 2 5.50671 2 5.03939 2.16261C4.15322 2.47096 3.45748 3.18719 3.15795 4.09946C3 4.58055 3 5.17705 3 6.37006V15M21 11V20.3742C21 21.2324 20.015 21.6878 19.3919 21.1176C19.0258 20.7826 18.4742 20.7826 18.1081 21.1176L17.625 21.5597C16.9834 22.1468 16.0166 22.1468 15.375 21.5597C14.7334 20.9726 13.7666 20.9726 13.125 21.5597C12.4834 22.1468 11.5166 22.1468 10.875 21.5597C10.2334 20.9726 9.26659 20.9726 8.625 21.5597C7.98341 22.1468 7.01659 22.1468 6.375 21.5597L5.8919 21.1176C5.52583 20.7826 4.97417 20.7826 4.6081 21.1176C3.985 21.6878 3 21.2324 3 20.3742V19",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"})]}),o9e=le.jsx("svg",{width:"30px",height:"30px",fill:"none",viewBox:"0 0 23 23",xmlns:"http://www.w3.org/2000/svg",children:le.jsx("path",{fill:"#c4a3d5",d:"M8.71,7.71,11,5.41V15a1,1,0,0,0,2,0V5.41l2.29,2.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42l-4-4a1,1,0,0,0-.33-.21,1,1,0,0,0-.76,0,1,1,0,0,0-.33.21l-4,4A1,1,0,1,0,8.71,7.71ZM21,14a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v4a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V15A1,1,0,0,0,21,14Z"})});function l9e(n){let[e,t]=z.useState(!1),[r,i]=z.useState(!1),[s,a]=z.useState(""),o=n.authorizedUserOcto;var l=vm();z.useEffect(()=>{if(o){var h=k.currentRepo.owner.login,p=k.currentRepo.name;o.rest.activity.checkRepoIsStarredByAuthenticatedUser({owner:h,repo:p}).then(v=>{i(!0),document.getElementById("Star-button").style.backgroundColor="gray"}).catch(v=>{i(!1)}),k.currentRepo.owner.login===k.currentUser&&(document.getElementById("Fork-button").style.display="none")}});const u=function(h){var p=k.currentRepo.owner.login,v=k.currentRepo.name;r?h.rest.activity.unstarRepoForAuthenticatedUser({owner:p,repo:v}).then(()=>{document.getElementById("Star-button").style.backgroundColor="white",i(!1),console.log("unstarred")}):h.rest.activity.starRepoForAuthenticatedUser({owner:p,repo:v}).then(()=>{i(!0),document.getElementById("Star-button").style.backgroundColor="gray"})},c=async function(h){var p=k.currentRepo.owner.login,v=k.currentRepo.name;h.request("GET /repos/{owner}/{repo}",{owner:p,repo:v}).then(y=>{h.rest.repos.createFork({owner:p,repo:v}).then(()=>{var m=k.currentUser;h.request("GET /repos/{owner}/{repo}",{owner:m,repo:v}).then(S=>{k.currentRepo=S.data,h.rest.repos.replaceAllTopics({owner:m,repo:k.currentRepo.name,names:["abundance-project"]}),l(`/${k.currentRepo.id}`)})})})},f=function(){n.tryLogin().then(h=>{u(h)})},d=function(){n.tryLogin().then(h=>{c(h)})};return le.jsxs(le.Fragment,{children:[e?le.jsx(AZ,{setShareDialog:t,dialogContent:s,activeAtom:n.activeAtom}):null,le.jsxs("div",{className:"run-navigation",children:[le.jsx("button",{onClick:()=>{a("share"),t(!0)},className:" run-navigation-button",id:"Share-button",children:r9e}),le.jsx("button",{className:" run-navigation-button",id:"Fork-button",onClick:()=>{o?c(o):d()},children:s9e}),le.jsx("button",{className:" run-navigation-button",id:"Star-button",onClick:()=>{o?u(o):f()},children:i9e}),le.jsx("button",{onClick:()=>{a("export"),t(!0)},className:" run-navigation-button",id:"Export-button",children:o9e}),le.jsx("button",{className:" run-navigation-button",id:"Bill-button",onClick:()=>{console.log("open compiled bill of materials ")},children:a9e})]})]})}function u9e(){const[n,e]=z.useState({width:void 0,height:void 0});return z.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),n}function c9e(n){const e=z.useRef(500);let t=n.displayProps.mesh,r=n.displayProps.wireMesh;const[i,s]=z.useState(!0),[a,o]=z.useState(!0),[l,u]=z.useState(!1),[c,f]=z.useState(!0),[d,h]=z.useState(!0),p=n.props.authorizedUserOcto,v=n.props.setActiveAtom,y=n.props.activeAtom,m=n.props.tryLogin,S=u9e();vm();const{id:b}=mH();return z.useEffect(()=>{k.canvas=e,k.c=e.current.getContext("2d");var g=new mu;g.request("GET /repositories/:id",{id:b}).then(w=>{k.currentRepo=w.data,(!k.loadedRepo||k.currentRepo.name!==k.loadedRepo.name)&&(k.topLevelMolecule=new hy({x:0,y:0,topLevel:!0,atomType:"Molecule"}),k.currentMolecule=k.topLevelMolecule,n.props.loadProject(k.currentRepo))}),k.currentRepo&&k.currentRepo.owner.login==k.currentUser&&u(!0)},[]),le.jsxs(le.Fragment,{children:[le.jsx("canvas",{style:{display:"none"},ref:e,id:"flow-canvas",tabIndex:0}),le.jsx(MZ,{run:!0,authorizedUserOcto:p,isItOwned:l}),y?le.jsx(CZ,{run:!0,setActiveAtom:v,activeAtom:y,setGrid:s,setAxes:o,setWire:f,setSolid:h}):null,le.jsx(l9e,{authorizedUserOcto:p,tryLogin:m,activeAtom:y}),k.currentRepo?le.jsxs("div",{className:"info_run_div",children:[le.jsx("p",{children:"Project Name: "+k.currentRepo.name}),le.jsx("p",{children:"Repo Owner: "+k.currentRepo.owner.login})]}):null,le.jsx("div",{className:"runContainer",children:le.jsx("div",{className:"jscad-container",style:{width:S.width,height:S.height},children:le.jsx("section",{id:"threeDView",style:{height:S.height},children:r?le.jsxs(xZ,{gridParam:i,axesParam:a,outdatedMesh:n.displayProps.outdatedMesh,children:[c?le.jsx(EZ,{mesh:r}):null,le.jsx(_Z,{mesh:t,isSolid:d,setOutdatedMesh:n.displayProps.setOutdatedMesh})]}):le.jsx("div",{style:{display:"flex",alignItems:"center",fontSize:"1em"},children:"Loading..."})})})})]})}function f9e(n){let e=n.currentMoleculeTop;n.activeAtom;let[t,r]=z.useState(!1),[i,s]=z.useState("");const a=vm(),o=[{id:"Open",buttonFunc:()=>{a("/")}},{id:"GitHub",buttonFunc:()=>{window.open(k.currentRepo.html_url)}},{id:"Read Me",buttonFunc:()=>{var f=k.currentRepo.html_url+"/blob/master/README.md";window.open(f)}},{id:"Bill of Materials",buttonFunc:()=>{var f=k.currentRepo.html_url+"/blob/master/BillOfMaterials.md";window.open(f)}},{id:"Share",buttonFunc:()=>{s("share"),r(!0)}},{id:"Save Project",buttonFunc:()=>{n.setSavePopUp(!0),n.saveProject(n.setSaveState)}},{id:"Pull Request",buttonFunc:()=>{window.open("https://github.com/"+k.currentRepo.full_name+"/compare/"+k.currentRepo.default_branch+"..."+k.currentRepo.owner.login+":"+k.currentRepo.default_branch)}},{id:"ExportGit",buttonFunc:()=>{n.setExportPopUp(!0)}},{id:"Delete Project",buttonFunc:()=>{var f=k.currentRepo.html_url+"/settings";window.open(f)}}],l=()=>le.jsx(le.Fragment,{children:le.jsx("button",{className:"nav-bar go-up-button menu-nav-button",onClick:()=>{k.currentMolecule.goToParentMolecule(),n.setActiveAtom(k.currentMolecule)},children:le.jsx("img",{className:"nav-img thumnail-logo",src:"/imgs/Go Up.svg",title:""},"")})}),u=f=>{if(f.saveState===100){var d=2e3;setTimeout(function(){f.setSavePopUp(!1)},d)}return le.jsx(le.Fragment,{children:le.jsx("div",{className:"save-bar",children:le.jsx("div",{className:"progress",children:le.jsx("div",{className:"progress-done","data-done":"70",style:{width:f.saveState+"%",opacity:"1"},children:f.saveState!==100?f.saveState+"%":"Project Saved!"})})})})},c=f=>{const[d,h]=z.useState(!1),p=z.useRef();return z.useEffect(()=>{const v=y=>{d&&p.current&&!p.current.contains(y.target)&&h(!1)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[d]),le.jsx(le.Fragment,{children:le.jsxs("nav",{ref:p,className:"navbar",children:[le.jsx("button",{className:"toggle menu-nav-button",onClick:()=>h(v=>!v),children:d?le.jsx("img",{className:`thumnail-logo nav-img ${f.currentMoleculeTop?"":" rotati-right"}`,src:"/imgs/three-menu.svg"}):le.jsx("img",{className:`thumnail-logo nav-img  ${f.currentMoleculeTop?"rotati":" rotati-plus "}`,src:"/imgs/three-menu.svg"})}),le.jsx("ul",{className:`menu-nav${d?" show-menu":""}`,children:o.map((v,y)=>le.jsx("button",{className:"menu-nav-button",children:le.jsx("img",{className:" thumnail-logo",alt:v,src:"/imgs/"+v.id+".svg",title:v.id+"-button",onClick:v.buttonFunc},v.id)},v.id))})]})})};return le.jsxs(le.Fragment,{children:[n.savePopUp?le.jsx(u,{saveState:n.saveState,savePopUp:n.savePopUp,setSavePopUp:n.setSavePopUp}):null,t?le.jsx(AZ,{setShareDialog:r,dialogContent:i,activeAtom:n.activeAtom}):null,e?le.jsx(l,{}):null,le.jsx(c,{currentMoleculeTop:e})]})}const d9e=z.memo(f9e);function h9e(n){return this.startDeg+this.rotateUnit*n}function p9e(n){return-(this.rotateDeg(n)+this.unskewDeg)}function m9e(n){var e=-(n.totalAngle-180)/2,t={top:e,left:e-90,right:e+90,bottom:e+180};return n.start!==void 0?n.start:t[n.position]}const g9e=3;function v9e(n,e){var t=n*n*2;return Math.sqrt(t)*e+g9e}function y9e(n){var e=n*2,t=-e/2;return e+="px",t+="px",{width:e,height:e,marginLeft:t,marginTop:t}}function x9e(n){var e=n.diameter,t=-n.diameter/2;return e+="px",t+="px",{width:e,height:e,marginLeft:t,marginTop:t}}const b9e=10;function w9e(n){var e=n.diameter,t=-n.diameter/2;return e+="px",t+="px",{width:e,height:e,marginRight:t,marginBottom:t}}function S9e(n){var e=n.diameter/2+"px";return{width:e,height:e}}const _9e=.41;function E9e(n){return n*_9e-b9e+"px"}function mD(n){this._config=n;var e=this.config=n,t=e.menus.length,r=e.totalAngle===360?t:t-1;this.radius=n.diameter/2,this.coverRadius=v9e(this.radius,n.percent),this.clickZoneRadius=this.radius-this.coverRadius,this.listSize=S9e(n),this.clickZoneSize=w9e(n),this.menuSize=x9e(n),this.coverSize=y9e(this.coverRadius),this.startDeg=m9e(n),this.centralDeg=(e.totalAngle-e.spaceDeg*r)/t,this.rotateUnit=this.centralDeg+e.spaceDeg,this.skewDeg=90-this.centralDeg,this.unskewDeg=-(90-this.centralDeg/2),this.textTop=E9e(this.clickZoneRadius)}mD.prototype={constructor:mD,rotateDeg:h9e,horizontalDeg:p9e};function M9e(n){this._config.menus.forEach(function(e,t){this._createList(n,e,t)},this)}function C9e(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function A9e(n){this.style.removeProperty(n)}function T9e(n,e,t){this.style.setProperty(n,e,t)}function D9e(n,e,t){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}function nr(n,e,t,r){var i;return arguments.length>1?(t==null?A9e:typeof t=="function"?D9e:T9e).call(n,e,t,""):C9e(i=n).getComputedStyle(i,null).getPropertyValue(e)}function N9e(n,e,t){var r=document.createElement("li");nr(r,"width",this._calc.listSize.width),nr(r,"height",this._calc.listSize.height),nr(r,"transform","rotate("+this._calc.rotateDeg(t)+"deg) skew("+this._calc.skewDeg+"deg)"),n.appendChild(r),this._createAnchor(r,e,t)}function TZ(n){return n.trim().split(/^|\s+/)}function lO(n){return n.classList||new DZ(n)}function DZ(n){this._node=n,this._names=TZ(n.getAttribute("class")||"")}DZ.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function NZ(n,e){for(var t=lO(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function PZ(n,e){for(var t=lO(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function P9e(n){NZ(this,n)}function R9e(n){PZ(this,n)}function O9e(n,e){(e.apply(this,arguments)?NZ:PZ)(this,n)}function Tu(n,e,t){var r=TZ(e+"");if(arguments.length<2){for(var i=lO(this),s=-1,a=r.length;++s<a;)if(!i.contains(r[s]))return!1;return!0}(typeof t=="function"?O9e:t?P9e:R9e).call(n,r,t)}var I9e={_current:0,getNew:function(){return this._current++,this._current}};function Vf(n,e,t,r){var i=n,s="sheetStyles",a=document.head||document.getElementsByTagName("head")[0],o=document.getElementById(s)||document.createElement("style");o.id=s;var l="s-S"+I9e.getNew();return i.className+=" "+l,o.innerHTML+=" ."+l+(r?":"+r:"")+"{"+e+":"+t+"}",a.appendChild(o),this}function nc(n,e,t,r){n.addEventListener(e,function(i){t.call(this,i,r)})}function k9e(){var n=this._container;Tu(n,"circular-menu",!0),nr(n,"width",this._calc.menuSize.width),nr(n,"height",this._calc.menuSize.height),nr(n,"margin-top",this._calc.menuSize.marginTop),nr(n,"margin-left",this._calc.menuSize.marginLeft);var e=this;nc(n,"click",function(r){r.toElement===n&&e._cMenu.hide()}),setTimeout(function(){nr(n,"display","block")},100),Vf(n,"width",this._calc.coverSize.width,"after"),Vf(n,"height",this._calc.coverSize.height,"after"),Vf(n,"margin-left",this._calc.coverSize.marginLeft,"after"),Vf(n,"margin-top",this._calc.coverSize.marginTop,"after"),Vf(n,"border","3px solid "+this._config.pageBackground,"after");var t=n.appendChild(document.createElement("ul"));this._createLists(t)}function L9e(n){return n instanceof Array&&n.length!==0}function t9(n){return n instanceof Function?n():!!n}function F9e(n,e){e&&(e instanceof Object?(n.href=e.url,n.target=e.blank?"_blank":""):n.href=e)}var n9=null;function B9e(n,e,t){var r=this,i=null,s=document.createElement("a");F9e(s,e.href),s.setDisabled=function(){Tu(s,"disabled",t9(e.disabled))},this._anchors.push(s),nr(s,"width",this._calc.clickZoneSize.width),nr(s,"height",this._calc.clickZoneSize.height),nr(s,"right",this._calc.clickZoneSize.marginRight),nr(s,"bottom",this._calc.clickZoneSize.marginBottom),nr(s,"transform","skew("+-this._calc.skewDeg+"deg) rotate("+this._calc.unskewDeg+"deg) scale(1)"),Tu(s,"disabled",t9(e.disabled));var a=this._config.percent*100+"%";Vf(s,"background","radial-gradient(transparent "+a+", "+this._config.background+" "+a+")"),Vf(s,"background","radial-gradient(transparent "+a+", "+this._config.backgroundHover+" "+a+")","hover");function o(u,c){c.click&&c.click.call(this,u,c),r._config.hideAfterClick&&(r._cMenu.hide(),r._cMenu._pMenu&&r._cMenu._pMenu.hide(),l&&l.hide())}if(nc(s,"mouseenter",function(){var u=document.createElement("div");u.textContent=e.icon,u.classList.add("tooltip"),u.id=e.icon+"text";const c=u.textContent.length*2.7;document.querySelector("body").appendChild(u),nr(u,"top",r._container.offsetTop+r._calc.radius-10+"px"),nr(u,"left",r._container.offsetLeft+r._calc.radius-c+"px")}),nc(s,"click",o,e),nc(s,"mouseleave",function(){document.getElementById(e.icon+"text").remove()}),n.appendChild(s),this._createHorizontal(s,e,t),L9e(e.menus)){var l=this._createSubMenu(r,e.menus,t);let u=!1;nc(s,"mouseenter",function(){u=!0,n9=setTimeout(function(){u&&l.styles({top:r._container.offsetTop+r._calc.radius+"px",left:r._container.offsetLeft+r._calc.radius+"px"}).show()},400)}),nc(s,"mouseleave",function(c){l._container.contains(c.toElement)||(u=!1,i=setTimeout(function(){l.hide()},100))}),nc(l._container,"mouseenter",function(){clearTimeout(n9),clearTimeout(i)}),nc(l._container,"mouseleave",function(c){u=!1,(!s.contains(c.toElement)||c.toElement.children[0]===s)&&l.hide()})}}const z9e=.65,U9e=.2,r9=13;function gD(n){return n===void 0?!1:typeof n=="string"?n!=="":n.length&&n[0]!==""}function $9e(n){return typeof n=="string"?n:n[0]}function V9e(n){return typeof n=="string"?null:n[1]}function H9e(n,e,t){if(gD(e.icon)){var r=document.createElement("span"),i=$9e(e.icon),s=V9e(e.icon);Tu(r,i+" cm-icon",!0),nr(r,"color",s);var a=this._calc.clickZoneRadius*z9e-r9+"px",o=this._calc.clickZoneRadius*U9e-r9+"px";nr(r,"width",a),nr(r,"height",a),nr(r,"font-size",a),nr(r,"margin-top",o),n.appendChild(r)}}const W9e="3px",G9e="-3px";function j9e(n,e,t){var r=document.createElement("span");r.textContent=e.title,Tu(r,"text",!0),nr(r,"margin-top",gD(e.icon)?W9e:this._calc.textTop),nr(r,"top",gD(e.icon)?G9e:0),n.appendChild(r)}function q9e(n,e,t){var r=document.createElement("div");Tu(r,"horizontal",!0),this._config.horizontal&&nr(r,"transform","rotate("+this._calc.horizontalDeg(t)+"deg)"),n.appendChild(r),this._createIcon(r,e,t),this._createText(r,e,t)}function RZ(){var n={},e=!1,t=0,r=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(e=arguments[0],t++);for(var i=function(a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e&&Object.prototype.toString.call(a[o])==="[object Object]"?n[o]=extend(!0,n[o],a[o]):n[o]=a[o])};t<r;t++){var s=arguments[t];i(s)}return n}const X9e=5/3,Y9e=.45,K9e=.618;function Z9e(n,e,t){var r=document.createElement("div");Tu(r,"circular-sub-menu",!0),this._container.parentNode.insertBefore(r,this._container);var i=this._calc.centralDeg*K9e*e.length,s=this._calc.rotateDeg(t)-i/2+this._calc.centralDeg/2,a=RZ(this._config,{totalAngle:i,percent:Y9e,diameter:this._config.diameter*X9e,start:s,animation:"into",menus:e});return new O0(r,n._cMenu).config(a)}function vD(n,e){this._cMenu=n,this._container=n._container,this._config=e,this._calc=new mD(e),this._anchors=[]}vD.prototype={constructor:vD,createMenu:k9e,_createLists:M9e,_createList:N9e,_createAnchor:B9e,_createText:j9e,_createHorizontal:q9e,_createIcon:H9e,_createSubMenu:Z9e};const J9e={totalAngle:360,spaceDeg:0,background:"#323232",backgroundHover:"#515151",pageBackground:"transparent",percent:.32,diameter:300,position:"top",horizontal:!0,animation:"into",hideAfterClick:!0};function Q9e(n){return n=RZ(J9e,n),this._creator=new vD(this,n),this._creator.createMenu(),this}function e7e(n){!(n instanceof Array)||n.length!==2||(nr(this._container,"left",n[0]+"px"),nr(this._container,"top",n[1]+"px"))}function t7e(){this._creator._anchors.forEach(function(n){n.setDisabled()})}function n7e(n){return t7e.call(this),e7e.call(this,n),Tu(this._container,"opened-nav",!0),this}function r7e(){return Tu(this._container,"opened-nav",!1),this}function i7e(n){if(!n instanceof Object)return this;for(var e in n)n.hasOwnProperty(e)&&nr(this._container,e,n[e]);return this}function O0(n,e){this._container=n,e&&(this._pMenu=e)}O0.prototype={constructor:O0,config:Q9e,show:n7e,hide:r7e,styles:i7e};function s7e(n){return typeof n=="string"?new O0(document.querySelector(n)):new O0(n)}var sA=null,Hf;const a7e=(n,e)=>{sA=n;const t=i=>{var s=[];for(var a in k.availableTypes){var o=k.availableTypes[a];if(o.atomCategory===i){var l=new Object;l.title=`${o.atomType}`,l.icon=`${o.atomType}`,l.name=o.atomType,l.click=function(c,f){if(f.icon==="GitHubMolecule"){const d=parseInt(Hf._container.style.left,10),h=parseInt(Hf._container.style.top,10);k.lastClick=[d,h],e(!0)}else e(!1),c.target.id=f.name,r(c)},s.push(l)}}return s};Hf=s7e(sA.current).config({hideAfterClick:!0,percent:.15,menus:[{title:"Actions",icon:"Actions",menus:t("Actions")},{title:"Inputs",icon:"Inputs",menus:t("Inputs")},{title:"Tags",icon:"Tags",menus:t("Tags")},{title:"Import/Export",icon:"Import-Export",menus:t("ImportExport")},{title:"Shapes",icon:"Shapes",menus:t("Shapes")},{title:"Interactions",icon:"Interaction",menus:t("Interactions")}]}),document.getElementById("flow-canvas").addEventListener("contextmenu",i=>{i.preventDefault()}),sA.current.addEventListener("contextmenu",i=>{i.preventDefault()});function r(i){let s=i.target.id;const a=parseInt(Hf._container.style.left,10),o=parseInt(Hf._container.style.top,10);k.currentMolecule.placeAtom({x:k.pixelsToWidth(a),y:k.pixelsToHeight(o),parent:k.currentMolecule,atomType:s,uniqueID:k.generateUniqueID()},!0)}};function o7e(n){let e="";var[t,r]=z.useState([]),[i,s]=z.useState(!1);const a=z.useRef(null);function o(S,b){k.currentMolecule.loadGithubMoleculeByID(b.id),n.setSearchingGitHub(!1),r([])}const l=function(){var S=e+" topic:abundance-project "+a.current.value;new mu().request("GET /search/repositories",{q:S,per_page:50,headers:{accept:"application/vnd.github.mercy-preview+json"}}).then(g=>{let w=[];g.data.items.forEach(x=>{w.push(x)}),r(w),s(!1)})},u=function(S){S.key==="Enter"&&(s(!0),l())},c=function(S){e=S.target.value},[f,d]=z.useState(!1),[h,p]=z.useState({}),v=(S,b)=>{p(S),d(!0)},y=()=>{p({}),d(!1)},m=function(){return t.map((S,b)=>le.jsx("li",{onClick:g=>o(g,S),onMouseEnter:()=>v(S),onMouseLeave:()=>y(),children:S.name},S.id))};return le.jsx(le.Fragment,{children:n.searchingGitHub?le.jsxs("div",{className:"search-container",children:[le.jsxs("div",{id:"git_search",style:{top:k.lastClick?k.lastClick[1]+"px":"25%",left:k.lastClick?k.lastClick[0]+"px":"50%"},children:[le.jsx("input",{type:"text",id:"menuInput",onKeyDown:u,onChange:c,placeholder:"Search for atom..",className:"menu_search_canvas"}),le.jsx("label",{htmlFor:"id_select",children:" Topic "}),le.jsxs("select",{ref:a,id:"searchType",className:"menu_search_canvas",children:[" ",le.jsx("option",{value:""},"empty-topic"),aw.map(S=>le.jsx("option",{value:S.value,children:S.label},S.label))]}),le.jsx(m,{})]}),f?le.jsxs("div",{className:"GitProjectInfoPanel",style:{top:k.lastClick[1]-50+"px",left:k.lastClick[0]-350+"px"},children:[le.jsxs("div",{className:"GitInfoLeft",children:[le.jsx("img",{src:"/imgs/defaultThumbnail.svg"}),le.jsxs("div",{style:{display:"flex"},children:[le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(.7)"},width:"16",height:"16",children:le.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})}),le.jsx("p",{children:h.stargazers_count})]})]}),le.jsxs("div",{className:"GitInfo",children:[le.jsxs("span",{children:["Project Name: ",h.name]}),le.jsxs("span",{children:["Owner: ",h.owner.login]}),le.jsxs("span",{children:["Description: ",h.description||null]}),le.jsx("span",{children:"PLACEHOLDER FOR README"}),le.jsx("span",{children:"Tags: PLACEHOLDER FOR tags or categories"})]})]}):null]}):null})}function OZ(){const n=document.getElementById("flow-canvas");n.width=window.innerWidth,n.height=window.innerHeight*.45}window.addEventListener("resize",()=>{OZ()},!1);const l7e=z.memo(function(e){let t=e.props.loadProject,r=e.props.setActiveAtom,i=e.props.shortCuts;const[s,a]=z.useState(!1),o=z.useRef(null),l=z.useRef(null);z.useEffect(()=>{k.canvas=o,k.c=o.current.getContext("2d"),(!k.loadedRepo||k.currentRepo.name!==k.loadedRepo.name)&&(k.topLevelMolecule=new hy({x:0,y:0,topLevel:!0,atomType:"Molecule"}),k.currentMolecule=k.topLevelMolecule,t(k.currentRepo)),k.currentMolecule.nodesOnTheScreen.forEach(y=>{y.update()})},[]);const u=()=>{k.c.clearRect(0,0,k.canvas.current.width,k.canvas.current.height),k.currentMolecule.nodesOnTheScreen.forEach(y=>{y.update()})},c=y=>{k.currentMolecule.nodesOnTheScreen.forEach(m=>{m.mouseMove(y.clientX,y.clientY)})},f=y=>{(y.key=="Backspace"||y.key=="Delete")&&(k.atomsSelected=[],k.currentMolecule.copy(),k.atomsSelected.forEach(m=>{k.currentMolecule.nodesOnTheScreen.forEach(S=>{S.uniqueID==m.uniqueID&&S.deleteNode()})})),(y.key=="Control"||y.key=="Meta")&&(k.ctrlDown=!0),k.ctrlDown&&i.hasOwnProperty([y.key])&&(y.preventDefault(),y.key=="c"&&(k.atomsSelected=[],k.currentMolecule.copy()),y.key=="v"&&k.atomsSelected.forEach(m=>{let S=k.generateUniqueID();m.uniqueID=S,(m.atomType=="Molecule"||m.atomType=="GitHubMolecule")&&(m=k.currentMolecule.remapIDs(m)),k.currentMolecule.placeAtom(m,!0)}),y.key=="g"?a(!0):k.currentMolecule.placeAtom({parentMolecule:k.currentMolecule,x:.5,y:.5,parent:k.currentMolecule,atomType:`${i[y.key]}`,uniqueID:k.generateUniqueID()},!0)),k.currentMolecule.nodesOnTheScreen.forEach(m=>{m.keyPress(y.key)})},d=y=>{(y.key=="Control"||y.key=="Meta")&&(k.ctrlDown=!1)},h=y=>{var m;if("which"in y?m=y.which==3:"button"in y&&(m=y.button==2),m){var S=!1;Hf.show([y.clientX,y.clientY],S);return}else{Hf.hide(),a(!1);var b=!1;k.currentMolecule.nodesOnTheScreen.forEach(g=>{let w;w=g.clickDown(y.clientX,y.clientY,b),w!==void 0&&(r(w),k.currentMolecule.selected=!1,b=!0)}),b||(r(k.currentMolecule),k.currentMolecule.selected=!0,k.currentMolecule.sendToRender())}},p=y=>{k.currentMolecule.nodesOnTheScreen.forEach(m=>{m.doubleClick(y.clientX,y.clientY)}),r(k.currentMolecule)},v=y=>{k.currentMolecule.nodesOnTheScreen.forEach(m=>{m.clickUp(y.clientX,y.clientY)}),k.currentMolecule.clickUp(y.clientX,y.clientY)};return z.useEffect(()=>{o.current.getContext("2d");let m;const S=()=>{u(),m=window.requestAnimationFrame(S)};return S(),()=>{window.cancelAnimationFrame(m)}},[u]),z.useEffect(()=>{OZ()},[]),z.useEffect(()=>{a7e(l,a)},[]),le.jsxs(le.Fragment,{children:[le.jsx("canvas",{ref:o,id:"flow-canvas",tabIndex:0,onMouseMove:c,onMouseDown:h,onMouseUp:v,onDoubleClick:p,onKeyUp:d,onKeyDown:f}),le.jsx("div",{children:le.jsx("p",{className:"repo-name",style:{position:"absolute",zIndex:"5",top:"2px",left:"55px",color:"rgb(255 255 255 / 34%)"},children:k.currentRepo.name})}),le.jsxs("div",{children:[le.jsx("div",{id:"circle-menu1",className:"cn-menu1",ref:l}),le.jsx(o7e,{searchingGitHub:s,setSearchingGitHub:a})]})]})});function u7e(){const[n,e]=z.useState({width:0,height:0});return z.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),n}const c7e=z.memo(function(e){let t=e.displayProps.mesh,r=e.displayProps.wireMesh;const i=u7e();return le.jsxs(le.Fragment,{children:[le.jsxs("div",{className:"jscad-container",style:{width:i.width*1,height:i.height*.6},children:[le.jsx("section",{id:"threeDView",style:{width:i.width*1,height:i.height*.6},children:r?le.jsxs(xZ,{gridParam:e.props.gridParam,axesParam:e.props.axesParam,outdatedMesh:e.displayProps.outdatedMesh,children:[e.props.wireParam?le.jsx(EZ,{mesh:r}):null,le.jsx(_Z,{mesh:t,isSolid:e.props.solidParam,setOutdatedMesh:e.displayProps.setOutdatedMesh})]}):le.jsx("div",{style:{display:"flex",alignItems:"center",fontSize:"2em"},children:"Loading..."})}),le.jsxs("div",{className:"container arrow-up",children:[le.jsx("input",{type:"checkbox",className:"custom"}),le.jsx("div",{className:"dots"})]}),le.jsx("div",{id:"viewer_bar"})]}),le.jsx("div",{id:"bottom_bar"})]})});class Pn{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=sm(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),al.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=sm(this,e,t);let r=[];return this.decompose(e,t,r,0),al.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Ev(this),s=new Ev(e);for(let a=t,o=t;;){if(i.next(a),s.next(a),a=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new Ev(this,e)}iterRange(e,t=this.length){return new IZ(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new kZ(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Pn.empty:e.length<=32?new zr(e):al.from(zr.split(e,[]))}}class zr extends Pn{constructor(e,t=f7e(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let a=this.text[s],o=i+a.length;if((t?r:o)>=e)return new d7e(i,o,r,a);i=o+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new zr(i9(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let a=r.pop(),o=mw(s.text,a.text.slice(),0,s.length);if(o.length<=32)r.push(new zr(o,a.length+s.length));else{let l=o.length>>1;r.push(new zr(o.slice(0,l)),new zr(o.slice(l)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof zr))return super.replace(e,t,r);[e,t]=sm(this,e,t);let i=mw(this.text,mw(r.text,i9(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new zr(i,s):al.from(zr.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){[e,t]=sm(this,e,t);let i="";for(let s=0,a=0;s<=t&&a<this.text.length;a++){let o=this.text[a],l=s+o.length;s>e&&a&&(i+=r),e<l&&t>s&&(i+=o.slice(Math.max(0,e-s),t-s)),s=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new zr(r,i)),r=[],i=-1);return i>-1&&t.push(new zr(r,i)),t}}class al extends Pn{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let a=this.children[s],o=i+a.length,l=r+a.lines-1;if((t?l:o)>=e)return a.lineInner(e,t,r,i);i=o+1,r=l+1}}decompose(e,t,r,i){for(let s=0,a=0;a<=t&&s<this.children.length;s++){let o=this.children[s],l=a+o.length;if(e<=l&&t>=a){let u=i&((a<=e?1:0)|(l>=t?2:0));a>=e&&l<=t&&!u?r.push(o):o.decompose(e-a,t-a,r,u)}a=l+1}}replace(e,t,r){if([e,t]=sm(this,e,t),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let a=this.children[i],o=s+a.length;if(e>=s&&t<=o){let l=a.replace(e-s,t-s,r),u=this.lines-a.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[i]=l,new al(c,this.length-(t-e)+r.length)}return super.replace(s,o,l)}s=o+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=sm(this,e,t);let i="";for(let s=0,a=0;s<this.children.length&&a<=t;s++){let o=this.children[s],l=a+o.length;a>e&&s&&(i+=r),e<l&&t>a&&(i+=o.sliceString(e-a,t-a,r)),a=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof al))return 0;let r=0,[i,s,a,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==a||s==o)return r;let l=this.children[i],u=e.children[s];if(l!=u)return r+l.scanIdentical(u,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let h of e)r+=h.lines;if(r<32){let h=[];for(let p of e)p.flatten(h);return new zr(h,t)}let i=Math.max(32,r>>5),s=i<<1,a=i>>1,o=[],l=0,u=-1,c=[];function f(h){let p;if(h.lines>s&&h instanceof al)for(let v of h.children)f(v);else h.lines>a&&(l>a||!l)?(d(),o.push(h)):h instanceof zr&&l&&(p=c[c.length-1])instanceof zr&&h.lines+p.lines<=32?(l+=h.lines,u+=h.length+1,c[c.length-1]=new zr(p.text.concat(h.text),p.length+1+h.length)):(l+h.lines>i&&d(),l+=h.lines,u+=h.length+1,c.push(h))}function d(){l!=0&&(o.push(c.length==1?c[0]:al.from(c,u)),u=-1,l=c.length=0)}for(let h of e)f(h);return d(),o.length==1?o[0]:new al(o,t)}}Pn.empty=new zr([""],0);function f7e(n){let e=-1;for(let t of n)e+=t.length+1;return e}function mw(n,e,t=0,r=1e9){for(let i=0,s=0,a=!0;s<n.length&&i<=r;s++){let o=n[s],l=i+o.length;l>=t&&(l>r&&(o=o.slice(0,r-i)),i<t&&(o=o.slice(t-i)),a?(e[e.length-1]+=o,a=!1):e.push(o)),i=l+1}return e}function i9(n,e,t){return mw(n,[""],e,t)}class Ev{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof zr?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],a=s>>1,o=i instanceof zr?i.text.length:i.children.length;if(a==(t>0?o:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof zr){let l=i.text[a+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[a+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof zr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class IZ{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Ev(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class kZ{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Pn.prototype[Symbol.iterator]=function(){return this.iter()},Ev.prototype[Symbol.iterator]=IZ.prototype[Symbol.iterator]=kZ.prototype[Symbol.iterator]=function(){return this});class d7e{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}function sm(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}let Rp="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<Rp.length;n++)Rp[n]+=Rp[n-1];function h7e(n){for(let e=1;e<Rp.length;e+=2)if(Rp[e]>n)return Rp[e-1]<=n;return!1}function s9(n){return n>=127462&&n<=127487}const a9=8205;function Oi(n,e,t=!0,r=!0){return(t?LZ:p7e)(n,e,r)}function LZ(n,e,t){if(e==n.length)return e;e&&FZ(n.charCodeAt(e))&&BZ(n.charCodeAt(e-1))&&e--;let r=Ti(n,e);for(e+=Ga(r);e<n.length;){let i=Ti(n,e);if(r==a9||i==a9||t&&h7e(i))e+=Ga(i),r=i;else if(s9(i)){let s=0,a=e-2;for(;a>=0&&s9(Ti(n,a));)s++,a-=2;if(s%2==0)break;e+=2}else break}return e}function p7e(n,e,t){for(;e>0;){let r=LZ(n,e-2,t);if(r<e)return r;e--}return 0}function FZ(n){return n>=56320&&n<57344}function BZ(n){return n>=55296&&n<56320}function Ti(n,e){let t=n.charCodeAt(e);if(!BZ(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return FZ(r)?(t-55296<<10)+(r-56320)+65536:t}function uO(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Ga(n){return n<65536?1:2}const yD=/\r\n?|\n/;var ys=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(ys||(ys={}));class bl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],a=this.sections[t++];a<0?(e(r,i,s),i+=s):i+=a,r+=s}}iterChangedRanges(e,t=!1){xD(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new bl(e)}composeDesc(e){return this.empty?e:e.empty?this:zZ(this,e)}mapDesc(e,t=!1){return e.empty?this:bD(this,e,t)}mapPos(e,t=-1,r=ys.Simple){let i=0,s=0;for(let a=0;a<this.sections.length;){let o=this.sections[a++],l=this.sections[a++],u=i+o;if(l<0){if(u>e)return s+(e-i);s+=o}else{if(r!=ys.Simple&&u>=e&&(r==ys.TrackDel&&i<e&&u>e||r==ys.TrackBefore&&i<e||r==ys.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!o)return e==i||t<0?s:s+l;s+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],a=this.sections[r++],o=i+s;if(a>=0&&i<=t&&o>=e)return i<e&&o>t?"cover":!0;i=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new bl(e)}static create(e){return new bl(e)}}class ni extends bl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return xD(this,(t,r,i,s,a)=>e=e.replace(i,i+(r-t),a),!1),e}mapDesc(e,t=!1){return bD(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let a=t[i],o=t[i+1];if(o>=0){t[i]=o,t[i+1]=a;let l=i>>1;for(;r.length<l;)r.push(Pn.empty);r.push(a?e.slice(s,s+a):Pn.empty)}s+=a}return new ni(t,r)}compose(e){return this.empty?e:e.empty?this:zZ(this,e,!0)}map(e,t=!1){return e.empty?this:bD(this,e,t,!0)}iterChanges(e,t=!1){xD(this,e,t)}get desc(){return bl.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new I0(this);e:for(let a=0,o=0;;){let l=a==e.length?1e9:e[a++];for(;o<l||o==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-o);Yi(i,c,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;Yi(t,c,f),f>0&&xc(r,t,s.text),s.forward(c),o+=c}let u=e[a++];for(;o<u;){if(s.done)break e;let c=Math.min(s.len,u-o);Yi(t,c,-1),Yi(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),o+=c}}return{changes:new ni(t,r),filtered:bl.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],a=0,o=null;function l(c=!1){if(!c&&!i.length)return;a<t&&Yi(i,t-a,-1);let f=new ni(i,s);o=o?o.compose(f.map(o)):f,i=[],s=[],a=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof ni){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),o=o?o.compose(c.map(o)):c}else{let{from:f,to:d=f,insert:h}=c;if(f>d||f<0||d>t)throw new RangeError(`Invalid change range ${f} to ${d} (in doc of length ${t})`);let p=h?typeof h=="string"?Pn.of(h.split(r||yD)):h:Pn.empty,v=p.length;if(f==d&&v==0)return;f<a&&l(),f>a&&Yi(i,f-a,-1),Yi(i,d-f,v),xc(s,i,p),a=d}}return u(e),l(!o),o}static empty(e){return new ni(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((a,o)=>o&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(Pn.empty);r[i]=Pn.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new ni(t,r)}static createSet(e,t){return new ni(e,t)}}function Yi(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function xc(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Pn.empty);n.push(t)}}function xD(n,e,t){let r=n.inserted;for(let i=0,s=0,a=0;a<n.sections.length;){let o=n.sections[a++],l=n.sections[a++];if(l<0)i+=o,s+=o;else{let u=i,c=s,f=Pn.empty;for(;u+=o,c+=l,l&&r&&(f=f.append(r[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)o=n.sections[a++],l=n.sections[a++];e(i,u,s,c,f),i=u,s=c}}}function bD(n,e,t,r=!1){let i=[],s=r?[]:null,a=new I0(n),o=new I0(e);for(let l=-1;;)if(a.ins==-1&&o.ins==-1){let u=Math.min(a.len,o.len);Yi(i,u,-1),a.forward(u),o.forward(u)}else if(o.ins>=0&&(a.ins<0||l==a.i||a.off==0&&(o.len<a.len||o.len==a.len&&!t))){let u=o.len;for(Yi(i,o.ins,-1);u;){let c=Math.min(a.len,u);a.ins>=0&&l<a.i&&a.len<=c&&(Yi(i,0,a.ins),s&&xc(s,i,a.text),l=a.i),a.forward(c),u-=c}o.next()}else if(a.ins>=0){let u=0,c=a.len;for(;c;)if(o.ins==-1){let f=Math.min(c,o.len);u+=f,c-=f,o.forward(f)}else if(o.ins==0&&o.len<c)c-=o.len,o.next();else break;Yi(i,u,l<a.i?a.ins:0),s&&l<a.i&&xc(s,i,a.text),l=a.i,a.forward(a.len-c)}else{if(a.done&&o.done)return s?ni.createSet(i,s):bl.create(i);throw new Error("Mismatched change set lengths")}}function zZ(n,e,t=!1){let r=[],i=t?[]:null,s=new I0(n),a=new I0(e);for(let o=!1;;){if(s.done&&a.done)return i?ni.createSet(r,i):bl.create(r);if(s.ins==0)Yi(r,s.len,0,o),s.next();else if(a.len==0&&!a.done)Yi(r,0,a.ins,o),i&&xc(i,r,a.text),a.next();else{if(s.done||a.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,a.len),u=r.length;if(s.ins==-1){let c=a.ins==-1?-1:a.off?0:a.ins;Yi(r,l,c,o),i&&c&&xc(i,r,a.text)}else a.ins==-1?(Yi(r,s.off?0:s.len,l,o),i&&xc(i,r,s.textBit(l))):(Yi(r,s.off?0:s.len,a.off?0:a.ins,o),i&&!a.off&&xc(i,r,a.text));o=(s.ins>l||a.ins>=0&&a.len>l)&&(o||r.length>u),s.forward2(l),a.forward(l)}}}}class I0{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Pn.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Pn.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class td{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new td(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return it.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return it.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return it.range(e.anchor,e.head)}static create(e,t,r){return new td(e,t,r)}}class it{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:it.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new it([this.main],0)}addRange(e,t=!0){return it.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,it.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new it(e.ranges.map(t=>td.fromJSON(t)),e.main)}static single(e,t=e){return new it([it.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return it.normalized(e.slice(),t);r=s.to}return new it(e,t)}static cursor(e,t=0,r,i){return td.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,t,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?td.create(t,e,48|s):td.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],a=e[i-1];if(s.empty?s.from<=a.to:s.from<a.to){let o=a.from,l=Math.max(s.to,a.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?it.range(l,o):it.range(o,l))}}return new it(e,t)}}function UZ(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let cO=0;class Pt{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=cO++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Pt(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:fO),!!e.static,e.enables)}of(e){return new gw([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new gw(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new gw(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function fO(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class gw{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=cO++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,a=e[s]>>1,o=this.type==2,l=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?u=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||c.push(e[f.id]);return{create(f){return f.values[a]=r(f),1},update(f,d){if(l&&d.docChanged||u&&(d.docChanged||d.selection)||wD(f,c)){let h=r(f);if(o?!o9(h,f.values[a],i):!i(h,f.values[a]))return f.values[a]=h,1}return 0},reconfigure:(f,d)=>{let h,p=d.config.address[s];if(p!=null){let v=KS(d,p);if(this.dependencies.every(y=>y instanceof Pt?d.facet(y)===f.facet(y):y instanceof Bi?d.field(y,!1)==f.field(y,!1):!0)||(o?o9(h=r(f),v,i):i(h=r(f),v)))return f.values[a]=v,0}else h=r(f);return f.values[a]=h,1}}}}function o9(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function wD(n,e){let t=!1;for(let r of e)Mv(n,r)&1&&(t=!0);return t}function m7e(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),s=r.filter(l=>!(l&1)),a=n[e.id]>>1;function o(l){let u=[];for(let c=0;c<r.length;c++){let f=KS(l,r[c]);if(i[c]==2)for(let d of f)u.push(d);else u.push(f)}return e.combine(u)}return{create(l){for(let u of r)Mv(l,u);return l.values[a]=o(l),1},update(l,u){if(!wD(l,s))return 0;let c=o(l);return e.compare(c,l.values[a])?0:(l.values[a]=c,1)},reconfigure(l,u){let c=wD(l,r),f=u.config.facets[e.id],d=u.facet(e);if(f&&!c&&fO(t,f))return l.values[a]=d,0;let h=o(l);return e.compare(h,d)?(l.values[a]=d,0):(l.values[a]=h,1)}}}const l9=Pt.define({static:!0});class Bi{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new Bi(cO++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(l9).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],a=this.updateF(s,i);return this.compareF(s,a)?0:(r.values[t]=a,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,l9.of({field:this,create:e})]}get extension(){return this}}const Wf={lowest:4,low:3,default:2,high:1,highest:0};function Bg(n){return e=>new $Z(e,n)}const jd={highest:Bg(Wf.highest),high:Bg(Wf.high),default:Bg(Wf.default),low:Bg(Wf.low),lowest:Bg(Wf.lowest)};class $Z{constructor(e,t){this.inner=e,this.prec=t}}class GE{of(e){return new SD(this,e)}reconfigure(e){return GE.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class SD{constructor(e,t){this.compartment=e,this.inner=t}}class YS{constructor(e,t,r,i,s,a){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),a=new Map;for(let d of g7e(e,t,a))d instanceof Bi?i.push(d):(s[d.facet.id]||(s[d.facet.id]=[])).push(d);let o=Object.create(null),l=[],u=[];for(let d of i)o[d.id]=u.length<<1,u.push(h=>d.slot(h));let c=r==null?void 0:r.config.facets;for(let d in s){let h=s[d],p=h[0].facet,v=c&&c[d]||[];if(h.every(y=>y.type==0))if(o[p.id]=l.length<<1|1,fO(v,h))l.push(r.facet(p));else{let y=p.combine(h.map(m=>m.value));l.push(r&&p.compare(y,r.facet(p))?r.facet(p):y)}else{for(let y of h)y.type==0?(o[y.id]=l.length<<1|1,l.push(y.value)):(o[y.id]=u.length<<1,u.push(m=>y.dynamicSlot(m)));o[p.id]=u.length<<1,u.push(y=>m7e(y,p,h))}}let f=u.map(d=>d(o));return new YS(e,a,f,o,l,s)}}function g7e(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(a,o){let l=i.get(a);if(l!=null){if(l<=o)return;let u=r[l].indexOf(a);u>-1&&r[l].splice(u,1),a instanceof SD&&t.delete(a.compartment)}if(i.set(a,o),Array.isArray(a))for(let u of a)s(u,o);else if(a instanceof SD){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(a.compartment)||a.inner;t.set(a.compartment,u),s(u,o)}else if(a instanceof $Z)s(a.inner,a.prec);else if(a instanceof Bi)r[o].push(a),a.provides&&s(a.provides,o);else if(a instanceof gw)r[o].push(a),a.facet.extensions&&s(a.facet.extensions,Wf.default);else{let u=a.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(n,Wf.default),r.reduce((a,o)=>a.concat(o))}function Mv(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function KS(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const VZ=Pt.define(),_D=Pt.define({combine:n=>n.some(e=>e),static:!0}),HZ=Pt.define({combine:n=>n.length?n[0]:void 0,static:!0}),WZ=Pt.define(),GZ=Pt.define(),jZ=Pt.define(),qZ=Pt.define({combine:n=>n.length?n[0]:!1});class Pl{constructor(e,t){this.type=e,this.value=t}static define(){return new v7e}}class v7e{of(e){return new Pl(this,e)}}class y7e{constructor(e){this.map=e}of(e){return new dn(this,e)}}class dn{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new dn(this.type,t)}is(e){return this.type==e}static define(e={}){return new y7e(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}}dn.reconfigure=dn.define();dn.appendConfig=dn.define();class si{constructor(e,t,r,i,s,a){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=a,this._doc=null,this._state=null,r&&UZ(r,t.newLength),s.some(o=>o.type==si.time)||(this.annotations=s.concat(si.time.of(Date.now())))}static create(e,t,r,i,s,a){return new si(e,t,r,i,s,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(si.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}si.time=Pl.define();si.userEvent=Pl.define();si.addToHistory=Pl.define();si.remote=Pl.define();function x7e(n,e){let t=[];for(let r=0,i=0;;){let s,a;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],a=n[r++];else if(i<e.length)s=e[i++],a=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function XZ(n,e,t){var r;let i,s,a;return t?(i=e.changes,s=ni.empty(e.changes.length),a=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(i)),{changes:a,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:dn.mapEffects(n.effects,i).concat(dn.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function ED(n,e,t){let r=e.selection,i=Op(e.annotations);return e.userEvent&&(i=i.concat(si.userEvent.of(e.userEvent))),{changes:e.changes instanceof ni?e.changes:ni.of(e.changes||[],t,n.facet(HZ)),selection:r&&(r instanceof it?r:it.single(r.anchor,r.head)),effects:Op(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function YZ(n,e,t){let r=ED(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let a=!!e[s].sequential;r=XZ(r,ED(n,e[s],a?r.changes.newLength:n.doc.length),a)}let i=si.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return w7e(t?b7e(i):i)}function b7e(n){let e=n.startState,t=!0;for(let i of e.facet(WZ)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:x7e(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=ni.empty(e.doc.length);else{let a=n.changes.filter(t);i=a.changes,s=a.filtered.mapDesc(a.changes).invertedDesc}n=si.create(e,i,n.selection&&n.selection.map(s),dn.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(GZ);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof si?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof si?n=s[0]:n=YZ(e,Op(s),!1)}return n}function w7e(n){let e=n.startState,t=e.facet(jZ),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=XZ(r,ED(e,s,n.changes.newLength),!0))}return r==n?n:si.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const S7e=[];function Op(n){return n==null?S7e:Array.isArray(n)?n:[n]}var pr=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(pr||(pr={}));const _7e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let MD;try{MD=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function E7e(n){if(MD)return MD.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||_7e.test(t)))return!0}return!1}function M7e(n){return e=>{if(!/\S/.test(e))return pr.Space;if(E7e(e))return pr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return pr.Word;return pr.Other}}class bn{constructor(e,t,r,i,s,a){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,a&&(a._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)Mv(this,o<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Mv(this,r),KS(this,r)}update(...e){return YZ(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let o of e.effects)o.is(GE.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,u)=>i.set(u,l)),t=null),i.set(o.value.compartment,o.value.extension)):o.is(dn.reconfigure)?(t=null,r=o.value):o.is(dn.appendConfig)&&(t=null,r=Op(r).concat(o.value));let s;t?s=e.startState.values.slice():(t=YS.resolve(r,i,this),s=new bn(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let a=e.startState.facet(_D)?e.newSelection:e.newSelection.asSingle();new bn(t,e.newDoc,a,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:it.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],a=Op(r.effects);for(let o=1;o<t.ranges.length;o++){let l=e(t.ranges[o]),u=this.changes(l.changes),c=u.map(i);for(let d=0;d<o;d++)s[d]=s[d].map(c);let f=i.mapDesc(u,!0);s.push(l.range.map(f)),i=i.compose(c),a=dn.mapEffects(a,c).concat(dn.mapEffects(Op(l.effects),f))}return{changes:i,selection:it.create(s,t.mainIndex),effects:a}}changes(e=[]){return e instanceof ni?e:ni.of(e,this.doc.length,this.facet(bn.lineSeparator))}toText(e){return Pn.of(e.split(this.facet(bn.lineSeparator)||yD))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Mv(this,t),KS(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Bi&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let a=r[s],o=e[s];i.push(a.init(l=>a.spec.fromJSON(o,l)))}}return bn.create({doc:e.doc,selection:it.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=YS.resolve(e.extensions||[],new Map),r=e.doc instanceof Pn?e.doc:Pn.of((e.doc||"").split(t.staticFacet(bn.lineSeparator)||yD)),i=e.selection?e.selection instanceof it?e.selection:it.single(e.selection.anchor,e.selection.head):it.single(0);return UZ(i,r.length),t.staticFacet(_D)||(i=i.asSingle()),new bn(t,r,i,t.dynamicSlots.map(()=>null),(s,a)=>a.create(s),null)}get tabSize(){return this.facet(bn.tabSize)}get lineBreak(){return this.facet(bn.lineSeparator)||`
`}get readOnly(){return this.facet(qZ)}phrase(e,...t){for(let r of this.facet(bn.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(VZ))for(let a of s(this,t,r))Object.prototype.hasOwnProperty.call(a,e)&&i.push(a[e]);return i}charCategorizer(e){return M7e(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),a=e-r,o=e-r;for(;a>0;){let l=Oi(t,a,!1);if(s(t.slice(l,a))!=pr.Word)break;a=l}for(;o<i;){let l=Oi(t,o);if(s(t.slice(o,l))!=pr.Word)break;o=l}return a==o?null:it.range(a+r,o+r)}}bn.allowMultipleSelections=_D;bn.tabSize=Pt.define({combine:n=>n.length?n[0]:4});bn.lineSeparator=HZ;bn.readOnly=qZ;bn.phrases=Pt.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});bn.languageData=VZ;bn.changeFilter=WZ;bn.transactionFilter=GZ;bn.transactionExtender=jZ;GE.reconfigure=dn.define();function Rl(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let a=i[s],o=r[s];if(o===void 0)r[s]=a;else if(!(o===a||a===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](o,a);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Td{eq(e){return this==e}range(e,t=e){return CD.create(e,t,this)}}Td.prototype.startSide=Td.prototype.endSide=0;Td.prototype.point=!1;Td.prototype.mapMode=ys.TrackDel;let CD=class KZ{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new KZ(e,t,r)}};function AD(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class dO{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let a=i,o=s.length;;){if(a==o)return a;let l=a+o>>1,u=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==a)return u>=0?a:o;u>=0?o=l:a=l+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),a=this.findIndex(r,1e9,!1,s);s<a;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],a=-1,o=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,f=this.to[l]+e,d,h;if(c==f){let p=t.mapPos(c,u.startSide,u.mapMode);if(p==null||(d=h=p,u.startSide!=u.endSide&&(h=t.mapPos(c,u.endSide),h<d)))continue}else if(d=t.mapPos(c,u.startSide),h=t.mapPos(f,u.endSide),d>h||d==h&&u.startSide>0&&u.endSide<=0)continue;(h-d||u.endSide-u.startSide)<0||(a<0&&(a=d),u.point&&(o=Math.max(o,h-d)),r.push(u),i.push(d-a),s.push(h-a))}return{mapped:r.length?new dO(i,s,r,o):null,pos:a}}}class Cn{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new Cn(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(r&&(t=t.slice().sort(AD)),this.isEmpty)return t.length?Cn.of(t):this;let o=new ZZ(this,null,-1).goto(0),l=0,u=[],c=new Xc;for(;o.value||l<t.length;)if(l<t.length&&(o.from-t[l].from||o.startSide-t[l].value.startSide)>=0){let f=t[l++];c.addInner(f.from,f.to,f.value)||u.push(f)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(o.chunkIndex)<t[l].from)&&(!a||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!a||i>o.to||s<o.from||a(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||u.push(CD.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?Cn.empty:this.nextLayer.update({add:u,filter:a,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let a=0;a<this.chunk.length;a++){let o=this.chunkPos[a],l=this.chunk[a],u=e.touchesRange(o,o+l.length);if(u===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(o));else if(u===!0){let{mapped:c,pos:f}=l.map(o,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),r.push(f))}}let s=this.nextLayer.map(e);return t.length==0?s:new Cn(r,t,s||Cn.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],a=this.chunk[i];if(t>=s&&e<=s+a.length&&a.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return k0.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return k0.from(e).goto(t)}static compare(e,t,r,i,s=-1){let a=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),o=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=u9(a,o,r),u=new zg(a,l,s),c=new zg(o,l,s);r.iterGaps((f,d,h)=>c9(u,f,c,d,h,i)),r.empty&&r.length==0&&c9(u,0,c,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),a=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=a.length)return!1;if(!s.length)return!0;let o=u9(s,a),l=new zg(s,o,0).goto(r),u=new zg(a,o,0).goto(r);for(;;){if(l.to!=u.to||!TD(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,t,r,i,s=-1){let a=new zg(e,null,s).goto(t),o=t,l=a.openStart;for(;;){let u=Math.min(a.to,r);if(a.point){let c=a.activeForPoint(a.to),f=a.pointFrom<t?c.length+1:a.point.startSide<0?c.length:Math.min(c.length,l);i.point(o,u,a.point,c,f,a.pointRank),l=Math.min(a.openEnd(u),c.length)}else u>o&&(i.span(o,u,a.active,l),l=a.openEnd(u));if(a.to>r)return l+(a.point&&a.to>r?1:0);o=a.to,a.next()}}static of(e,t=!1){let r=new Xc;for(let i of e instanceof CD?[e]:t?C7e(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return Cn.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=Cn.empty;i=i.nextLayer)t=new Cn(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}Cn.empty=new Cn([],[],null,-1);function C7e(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(AD(e,r)>0)return n.slice().sort(AD);e=r}return n}Cn.empty.nextLayer=Cn.empty;class Xc{finishChunk(e){this.chunks.push(new dO(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Xc)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Cn.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Cn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function u9(n,e,t){let r=new Map;for(let s of n)for(let a=0;a<s.chunk.length;a++)s.chunk[a].maxPoint<=0&&r.set(s.chunk[a],s.chunkPos[a]);let i=new Set;for(let s of e)for(let a=0;a<s.chunk.length;a++){let o=r.get(s.chunk[a]);o!=null&&(t?t.mapPos(o):o)==s.chunkPos[a]&&!(t!=null&&t.touchesRange(o,o+s.chunk[a].length))&&i.add(s.chunk[a])}return i}class ZZ{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class k0{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let a=e[s];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&i.push(new ZZ(a,t,r,s));return i.length==1?i[0]:new k0(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)aA(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)aA(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),aA(this.heap,0)}}}function aA(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class zg{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=k0.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){gb(this.active,e),gb(this.activeTo,e),gb(this.activeRank,e),this.minActive=f9(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||i-this.activeTo[t])>0;)t++;vb(this.active,t,r),vb(this.activeTo,t,i),vb(this.activeRank,t,s),e&&vb(e,t,this.cursor.from),this.minActive=f9(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&gb(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function c9(n,e,t,r,i,s){n.goto(e),t.goto(r);let a=r+i,o=r,l=r-e;for(;;){let u=n.to+l-t.to||n.endSide-t.endSide,c=u<0?n.to+l:t.to,f=Math.min(c,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&TD(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(o,f,n.point,t.point):f>o&&!TD(n.active,t.active)&&s.compareRange(o,f,n.active,t.active),c>a)break;o=c,u<=0&&n.next(),u>=0&&t.next()}}function TD(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function gb(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function vb(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function f9(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function $m(n,e,t=n.length){let r=0;for(let i=0;i<t;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Oi(n,i));return r}function DD(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=Oi(n,i)}return r===!0?-1:n.length}const ND="ͼ",d9=typeof Symbol>"u"?"__"+ND:Symbol.for(ND),PD=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),h9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Yc{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function s(a,o,l,u){let c=[],f=/^@(\w+)\b/.exec(a[0]),d=f&&f[1]=="keyframes";if(f&&o==null)return l.push(a[0]+";");for(let h in o){let p=o[h];if(/&/.test(h))s(h.split(/,\s*/).map(v=>a.map(y=>v.replace(/&/,y))).reduce((v,y)=>v.concat(y)),p,l);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+h+") should be a primitive value.");s(i(h),p,c,d)}else p!=null&&c.push(h.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+p+";")}(c.length||d)&&l.push((r&&!f&&!u?a.map(r):a).join(", ")+" {"+c.join(" ")+"}")}for(let a in e)s(i(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=h9[d9]||1;return h9[d9]=e+1,ND+e.toString(36)}static mount(e,t,r){let i=e[PD],s=r&&r.nonce;i?s&&i.setNonce(s):i=new A7e(e,s),i.mount(Array.isArray(t)?t:[t],e)}}let p9=new Map;class A7e{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=p9.get(r);if(s)return e[PD]=s;this.sheet=new i.CSSStyleSheet,p9.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[PD]=this}mount(e,t){let r=this.sheet,i=0,s=0;for(let a=0;a<e.length;a++){let o=e[a],l=this.modules.indexOf(o);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let l=0;l<this.modules.length;l++)a+=this.modules[l].getRules()+`
`;this.styleTag.textContent=a;let o=t.head||t;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Kc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},L0={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},T7e=typeof navigator<"u"&&/Mac/.test(navigator.platform),D7e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Di=0;Di<10;Di++)Kc[48+Di]=Kc[96+Di]=String(Di);for(var Di=1;Di<=24;Di++)Kc[Di+111]="F"+Di;for(var Di=65;Di<=90;Di++)Kc[Di]=String.fromCharCode(Di+32),L0[Di]=String.fromCharCode(Di);for(var oA in Kc)L0.hasOwnProperty(oA)||(L0[oA]=Kc[oA]);function N7e(n){var e=T7e&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||D7e&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?L0:Kc)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function F0(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function RD(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function P7e(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function vw(n,e){if(!e.anchorNode)return!1;try{return RD(n,e.anchorNode)}catch{return!1}}function am(n){return n.nodeType==3?Nd(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Cv(n,e,t,r){return t?m9(n,e,t,r,-1)||m9(n,e,t,r,1):!1}function Dd(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function ZS(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function m9(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Du(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Dd(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?Du(n):0}else return!1}}function Du(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function jE(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function R7e(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function JZ(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function O7e(n,e,t,r,i,s,a,o){let l=n.ownerDocument,u=l.defaultView||window;for(let c=n,f=!1;c&&!f;)if(c.nodeType==1){let d,h=c==l.body,p=1,v=1;if(h)d=R7e(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let S=c.getBoundingClientRect();({scaleX:p,scaleY:v}=JZ(c,S)),d={left:S.left,right:S.left+c.clientWidth*p,top:S.top,bottom:S.top+c.clientHeight*v}}let y=0,m=0;if(i=="nearest")e.top<d.top?(m=-(d.top-e.top+a),t>0&&e.bottom>d.bottom+m&&(m=e.bottom-d.bottom+m+a)):e.bottom>d.bottom&&(m=e.bottom-d.bottom+a,t<0&&e.top-m<d.top&&(m=-(d.top+m-e.top+a)));else{let S=e.bottom-e.top,b=d.bottom-d.top;m=(i=="center"&&S<=b?e.top+S/2-b/2:i=="start"||i=="center"&&t<0?e.top-a:e.bottom-b+a)-d.top}if(r=="nearest"?e.left<d.left?(y=-(d.left-e.left+s),t>0&&e.right>d.right+y&&(y=e.right-d.right+y+s)):e.right>d.right&&(y=e.right-d.right+s,t<0&&e.left<d.left+y&&(y=-(d.left+y-e.left+s))):y=(r=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:r=="start"==o?e.left-s:e.right-(d.right-d.left)+s)-d.left,y||m)if(h)u.scrollBy(y,m);else{let S=0,b=0;if(m){let g=c.scrollTop;c.scrollTop+=m/v,b=(c.scrollTop-g)*v}if(y){let g=c.scrollLeft;c.scrollLeft+=y/p,S=(c.scrollLeft-g)*p}e={left:e.left-S,top:e.top-b,right:e.right-S,bottom:e.bottom-b},S&&Math.abs(S-y)<1&&(r="nearest"),b&&Math.abs(b-m)<1&&(i="nearest")}if(h)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function I7e(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class k7e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?Du(t):0),r,Math.min(e.focusOffset,r?Du(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let $h=null;function QZ(n){if(n.setActive)return n.setActive();if($h)return n.focus($h);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus($h==null?{get preventScroll(){return $h={preventScroll:!0},!0}}:void 0),!$h){$h=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let g9;function Nd(n,e,t=e){let r=g9||(g9=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Ip(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let a=new KeyboardEvent("keyup",i);return a.synthetic=!0,n.dispatchEvent(a),s.defaultPrevented||a.defaultPrevented}function L7e(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function eJ(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function F7e(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,Du(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=Du(t))}else{if(t==n)return!0;r=Dd(t),t=t.parentNode}}function tJ(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function nJ(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=Du(t)}else if(t.parentNode&&!ZS(t))r=Dd(t),t=t.parentNode;else return null}}function rJ(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!ZS(t))r=Dd(t)+1,t=t.parentNode;else return null}}class Ji{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new Ji(e.parentNode,Dd(e),t)}static after(e,t){return new Ji(e.parentNode,Dd(e)+1,t)}}const hO=[];class Kn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,s;for(let a of this.children){if(a.flags&7){if(!a.dom&&(s=i?i.nextSibling:r.firstChild)){let o=Kn.get(s);(!o||!o.parent&&o.canReuseDOM(a))&&a.reuseDOM(s)}a.sync(e,t),a.flags&=-8}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=a.dom&&(t.written=!0),a.dom.parentNode==r)for(;s&&s!=a.dom;)s=v9(s);else r.insertBefore(a.dom,s);i=a.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=v9(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=Du(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Kn.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let a=this.children[i];if(a.dom==r)return s;s+=a.length+a.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,a=-1,o=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let f=this.children[l],d=u+f.length;if(u<e&&d>t)return f.domBoundsAround(e,t,u);if(d>=e&&i==-1&&(i=l,s=u),u>t&&f.dom.parentNode==this.dom){a=l,o=c;break}c=d,u=d+f.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=hO){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}this.children.splice(e,t-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new iJ(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Kn.prototype.breakAfter=0;function v9(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class iJ{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function sJ(n,e,t,r,i,s,a,o,l){let{children:u}=n,c=u.length?u[e]:null,f=s.length?s[s.length-1]:null,d=f?f.breakAfter:a;if(!(e==r&&c&&!a&&!d&&s.length<2&&c.merge(t,i,s.length?f:null,t==0,o,l))){if(r<u.length){let h=u[r];h&&(i<h.length||h.breakAfter&&(f!=null&&f.breakAfter))?(e==r&&(h=h.split(i),i=0),!d&&f&&h.merge(0,i,f,!0,0,l)?s[s.length-1]=h:((i||h.children.length&&!h.children[0].length)&&h.merge(0,i,null,!1,0,l),s.push(h))):h!=null&&h.breakAfter&&(f?f.breakAfter=1:a=1),r++}for(c&&(c.breakAfter=a,t>0&&(!a&&s.length&&c.merge(t,c.length,s[0],!1,o,0)?c.breakAfter=s.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:l;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,l)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function aJ(n,e,t,r,i,s){let a=n.childCursor(),{i:o,off:l}=a.findPos(t,1),{i:u,off:c}=a.findPos(e,-1),f=e-t;for(let d of r)f+=d.length;n.length+=f,sJ(n,u,c,o,l,r,0,i,s)}let Us=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},OD=typeof document<"u"?document:{documentElement:{style:{}}};const ID=/Edge\/(\d+)/.exec(Us.userAgent),oJ=/MSIE \d/.test(Us.userAgent),kD=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Us.userAgent),qE=!!(oJ||kD||ID),y9=!qE&&/gecko\/(\d+)/i.test(Us.userAgent),lA=!qE&&/Chrome\/(\d+)/.exec(Us.userAgent),x9="webkitFontSmoothing"in OD.documentElement.style,lJ=!qE&&/Apple Computer/.test(Us.vendor),b9=lJ&&(/Mobile\/\w+/.test(Us.userAgent)||Us.maxTouchPoints>2);var Tt={mac:b9||/Mac/.test(Us.platform),windows:/Win/.test(Us.platform),linux:/Linux|X11/.test(Us.platform),ie:qE,ie_version:oJ?OD.documentMode||6:kD?+kD[1]:ID?+ID[1]:0,gecko:y9,gecko_version:y9?+(/Firefox\/(\d+)/.exec(Us.userAgent)||[0,0])[1]:0,chrome:!!lA,chrome_version:lA?+lA[1]:0,ios:b9,android:/Android\b/.test(Us.userAgent),webkit:x9,safari:lJ,webkit_version:x9?+(/\bAppleWebKit\/(\d+)/.exec(Us.userAgent)||[0,0])[1]:0,tabSize:OD.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const B7e=256;class No extends Kn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof No)||this.length-(t-e)+r.length>B7e||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new No(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Ji(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return z7e(this.dom,e,t)}}class Nu extends Kn{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(eJ(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,a){return r&&(!(r instanceof Nu&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&a<=0)?!1:(aJ(this,e,t,r?r.children.slice():[],s-1,a-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let o of this.children){let l=r+o.length;l>e&&t.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=l,s++}let a=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Nu(this.mark,t,a)}domAtPos(e){return uJ(this,e)}coordsAt(e,t){return fJ(this,e,t)}}function z7e(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,a=0;e==0&&t<0||e==r&&t>=0?Tt.chrome||Tt.gecko||(e?(i--,a=1):s<r&&(s++,a=-1)):t<0?i--:s<r&&s++;let o=Nd(n,i,s).getClientRects();if(!o.length)return null;let l=o[(a?a<0:t>=0)?0:o.length-1];return Tt.safari&&!a&&l.width==0&&(l=Array.prototype.find.call(o,u=>u.width)||l),a?jE(l,a<0):l||null}class bc extends Kn{static create(e,t,r){return new bc(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=bc.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,s,a){return r&&(!(r instanceof bc)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof bc&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Pn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Pn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Ji.before(this.dom):Ji.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let a=this.side?this.side<0:e>0;for(let o=a?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=a?-1:1);return jE(s,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class om extends Kn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof om&&e.side==this.side}split(){return new om(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Ji.before(this.dom):Ji.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Pn.empty}get isHidden(){return!0}}No.prototype.children=bc.prototype.children=om.prototype.children=hO;function uJ(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let a=r[i],o=s+a.length;if(!(o==s&&a.getSide()<=0)){if(e>s&&e<o&&a.dom.parentNode==t)return a.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let a=r[s-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let s=i;s<r.length;s++){let a=r[s];if(a.dom.parentNode==t)return a.domAtPos(0)}return new Ji(t,0)}function cJ(n,e,t){let r,{children:i}=n;t>0&&e instanceof Nu&&i.length&&(r=i[i.length-1])instanceof Nu&&r.mark.eq(e.mark)?cJ(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function fJ(n,e,t){let r=null,i=-1,s=null,a=-1;function o(u,c){for(let f=0,d=0;f<u.children.length&&d<=c;f++){let h=u.children[f],p=d+h.length;p>=c&&(h.children.length?o(h,c-d):(!s||s.isHidden&&t>0)&&(p>c||d==p&&h.getSide()>0)?(s=h,a=c-d):(d<c||d==p&&h.getSide()<0&&!h.isHidden)&&(r=h,i=c-d)),d=p}}o(n,e);let l=(t<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:a),t):U7e(n)}function U7e(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=am(e);return t[t.length-1]||null}function LD(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const w9=Object.create(null);function pO(n,e,t){if(n==e)return!0;n||(n=w9),e||(e=w9);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let s of r)if(s!=t&&(i.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function FD(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function $7e(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class Jr extends Kn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,a){if(r){if(!(r instanceof Jr))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),aJ(this,e,t,r?r.children.slice():[],s,a),!0}split(e){let t=new Jr;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){pO(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){cJ(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=LD(t,this.attrs||{})),r&&(this.attrs=LD({class:r},this.attrs||{}))}domAtPos(e){return uJ(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(eJ(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(FD(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Kn.get(i)instanceof Nu;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Kn.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Tt.ios||!this.children.some(s=>s instanceof No))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof No)||/[^ -~]/.test(r.text))return null;let i=am(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=fJ(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let a=(s-i.textHeight)/2;return{top:r.top+a,bottom:r.bottom-a,left:r.left,right:r.left}}}return r}become(e){return!1}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],a=i+s.length;if(a>=t){if(s instanceof Jr)return s;if(a>t)break}i=a+s.breakAfter}return null}}class pu extends Kn{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,a){return r&&(!(r instanceof pu)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Ji.before(this.dom):Ji.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new pu(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return hO}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Pn.empty}domBoundsAround(){return null}become(e){return e instanceof pu&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class Lu{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Es=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Es||(Es={}));class zt extends Td{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Cy(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Zc(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:a}=dJ(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(a?t?2e8:1:-6e8)+1}return new Zc(e,r,i,t,e.widget||null,!0)}static line(e){return new Ay(e)}static set(e,t=!1){return Cn.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}zt.none=Cn.empty;class Cy extends zt{constructor(e){let{start:t,end:r}=dJ(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof Cy&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&pO(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Cy.prototype.point=!1;class Ay extends zt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ay&&this.spec.class==e.spec.class&&pO(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Ay.prototype.mapMode=ys.TrackBefore;Ay.prototype.point=!0;class Zc extends zt{constructor(e,t,r,i,s,a){super(t,r,s,e),this.block=i,this.isReplace=a,this.mapMode=i?t<=0?ys.TrackBefore:ys.TrackAfter:ys.TrackDel}get type(){return this.startSide!=this.endSide?Es.WidgetRange:this.startSide<=0?Es.WidgetBefore:Es.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Zc&&V7e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Zc.prototype.point=!0;function dJ(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function V7e(n,e){return n==e||!!(n&&e&&n.compare(e))}function BD(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class Av{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof pu&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Jr),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(yb(new om(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof pu)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:o}=this.cursor.next(this.skip);if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(yb(new No(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,a){if(this.disallowBlockEffectsFor[a]&&r instanceof Zc){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(r instanceof Zc)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new pu(r.widget||lm.block,o,r));else{let l=bc.create(r.widget||lm.inline,o,o?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<t||r.startSide>0),c=!l.isEditable&&(e<t||s>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(yb(new om(1),i),s),s=i.length+Math.max(0,s-i.length)),f.append(yb(l,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let a=new Av(e,t,r,s);return a.openEnd=Cn.spans(i,t,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function yb(n,e){for(let t of e)n=new Nu(t,[n],n.length);return n}class lm extends Lu{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}lm.inline=new lm("span");lm.block=new lm("div");var ur=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(ur||(ur={}));const Pd=ur.LTR,mO=ur.RTL;function hJ(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const H7e=hJ("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),W7e=hJ("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),zD=Object.create(null),Zo=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);zD[e]=t,zD[t]=-e}function pJ(n){return n<=247?H7e[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?W7e[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const G7e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class wc{get dir(){return this.level%2?mO:Pd}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let s=-1;for(let a=0;a<e.length;a++){let o=e[a];if(o.from<=t&&o.to>=t){if(o.level==r)return a;(s<0||(i!=0?i<0?o.from<t:o.to>t:e[s].level>o.level))&&(s=a)}}if(s<0)throw new RangeError("Index out of range");return s}}function mJ(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!mJ(r.inner,i.inner))return!1}return!0}const Yn=[];function j7e(n,e,t,r,i){for(let s=0;s<=r.length;s++){let a=s?r[s-1].to:e,o=s<r.length?r[s].from:t,l=s?256:i;for(let u=a,c=l,f=l;u<o;u++){let d=pJ(n.charCodeAt(u));d==512?d=c:d==8&&f==4&&(d=16),Yn[u]=d==4?2:d,d&7&&(f=d),c=d}for(let u=a,c=l,f=l;u<o;u++){let d=Yn[u];if(d==128)u<o-1&&c==Yn[u+1]&&c&24?d=Yn[u]=c:Yn[u]=256;else if(d==64){let h=u+1;for(;h<o&&Yn[h]==64;)h++;let p=u&&c==8||h<t&&Yn[h]==8?f==1?1:8:256;for(let v=u;v<h;v++)Yn[v]=p;u=h-1}else d==8&&f==1&&(Yn[u]=1);c=d,d&7&&(f=d)}}}function q7e(n,e,t,r,i){let s=i==1?2:1;for(let a=0,o=0,l=0;a<=r.length;a++){let u=a?r[a-1].to:e,c=a<r.length?r[a].from:t;for(let f=u,d,h,p;f<c;f++)if(h=zD[d=n.charCodeAt(f)])if(h<0){for(let v=o-3;v>=0;v-=3)if(Zo[v+1]==-h){let y=Zo[v+2],m=y&2?i:y&4?y&1?s:i:0;m&&(Yn[f]=Yn[Zo[v]]=m),o=v;break}}else{if(Zo.length==189)break;Zo[o++]=f,Zo[o++]=d,Zo[o++]=l}else if((p=Yn[f])==2||p==1){let v=p==i;l=v?0:1;for(let y=o-3;y>=0;y-=3){let m=Zo[y+2];if(m&2)break;if(v)Zo[y+2]|=2;else{if(m&4)break;Zo[y+2]|=4}}}}}function X7e(n,e,t,r){for(let i=0,s=r;i<=t.length;i++){let a=i?t[i-1].to:n,o=i<t.length?t[i].from:e;for(let l=a;l<o;){let u=Yn[l];if(u==256){let c=l+1;for(;;)if(c==o){if(i==t.length)break;c=t[i++].to,o=i<t.length?t[i].from:e}else if(Yn[c]==256)c++;else break;let f=s==1,d=(c<e?Yn[c]:r)==1,h=f==d?f?1:2:r;for(let p=c,v=i,y=v?t[v-1].to:n;p>l;)p==y&&(p=t[--v].from,y=v?t[v-1].to:n),Yn[--p]=h;l=c}else s=u,l++}}}function UD(n,e,t,r,i,s,a){let o=r%2?2:1;if(r%2==i%2)for(let l=e,u=0;l<t;){let c=!0,f=!1;if(u==s.length||l<s[u].from){let v=Yn[l];v!=o&&(c=!1,f=v==16)}let d=!c&&o==1?[]:null,h=c?r:r+1,p=l;e:for(;;)if(u<s.length&&p==s[u].from){if(f)break e;let v=s[u];if(!c)for(let y=v.to,m=u+1;;){if(y==t)break e;if(m<s.length&&s[m].from==y)y=s[m++].to;else{if(Yn[y]==o)break e;break}}if(u++,d)d.push(v);else{v.from>l&&a.push(new wc(l,v.from,h));let y=v.direction==Pd!=!(h%2);$D(n,y?r+1:r,i,v.inner,v.from,v.to,a),l=v.to}p=v.to}else{if(p==t||(c?Yn[p]!=o:Yn[p]==o))break;p++}d?UD(n,l,p,r+1,i,d,a):l<p&&a.push(new wc(l,p,h)),l=p}else for(let l=t,u=s.length;l>e;){let c=!0,f=!1;if(!u||l>s[u-1].to){let v=Yn[l-1];v!=o&&(c=!1,f=v==16)}let d=!c&&o==1?[]:null,h=c?r:r+1,p=l;e:for(;;)if(u&&p==s[u-1].to){if(f)break e;let v=s[--u];if(!c)for(let y=v.from,m=u;;){if(y==e)break e;if(m&&s[m-1].to==y)y=s[--m].from;else{if(Yn[y-1]==o)break e;break}}if(d)d.push(v);else{v.to<l&&a.push(new wc(v.to,l,h));let y=v.direction==Pd!=!(h%2);$D(n,y?r+1:r,i,v.inner,v.from,v.to,a),l=v.from}p=v.from}else{if(p==e||(c?Yn[p-1]!=o:Yn[p-1]==o))break;p--}d?UD(n,p,l,r+1,i,d,a):p<l&&a.push(new wc(p,l,h)),l=p}}function $D(n,e,t,r,i,s,a){let o=e%2?2:1;j7e(n,i,s,r,o),q7e(n,i,s,r,o),X7e(i,s,r,o),UD(n,i,s,e,t,r,a)}function Y7e(n,e,t){if(!n)return[new wc(0,0,e==mO?1:0)];if(e==Pd&&!t.length&&!G7e.test(n))return gJ(n.length);if(t.length)for(;n.length>Yn.length;)Yn[Yn.length]=256;let r=[],i=e==Pd?0:1;return $D(n,i,i,t,0,n.length,r),r}function gJ(n){return[new wc(0,n,0)]}let vJ="";function K7e(n,e,t,r,i){var s;let a=r.head-n.from,o=wc.find(e,a,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[o],u=l.side(i,t);if(a==u){let d=o+=i?1:-1;if(d<0||d>=e.length)return null;l=e[o=d],a=l.side(!i,t),u=l.side(i,t)}let c=Oi(n.text,a,l.forward(i,t));(c<l.from||c>l.to)&&(c=u),vJ=n.text.slice(Math.min(a,c),Math.max(a,c));let f=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return f&&c==u&&f.level+(i?0:1)<l.level?it.cursor(f.side(!i,t)+n.from,f.forward(i,t)?1:-1,f.level):it.cursor(c+n.from,l.forward(i,t)?-1:1,l.level)}function Z7e(n,e,t){for(let r=e;r<t;r++){let i=pJ(n.charCodeAt(r));if(i==1)return Pd;if(i==2||i==4)return mO}return Pd}const yJ=Pt.define(),xJ=Pt.define(),bJ=Pt.define(),wJ=Pt.define(),VD=Pt.define(),SJ=Pt.define(),_J=Pt.define(),EJ=Pt.define({combine:n=>n.some(e=>e)}),MJ=Pt.define({combine:n=>n.some(e=>e)}),CJ=Pt.define();class kp{constructor(e,t="nearest",r="nearest",i=5,s=5,a=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=a}map(e){return e.empty?this:new kp(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new kp(it.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const xb=dn.define({map:(n,e)=>n.map(e)}),AJ=dn.define();function Ws(n,e,t){let r=n.facet(wJ);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const XE=Pt.define({combine:n=>n.length?n[0]:!0});let J7e=0;const ev=Pt.define();class Vr{constructor(e,t,r,i,s){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:r,eventObservers:i,provide:s,decorations:a}=t||{};return new Vr(J7e++,e,r,i,o=>{let l=[ev.of(o)];return a&&l.push(B0.of(u=>{let c=u.plugin(o);return c?a(c):zt.none})),s&&l.push(s(o)),l})}static fromClass(e,t){return Vr.define(r=>new e(r),t)}}class uA{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Ws(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Ws(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){Ws(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const TJ=Pt.define(),gO=Pt.define(),B0=Pt.define(),DJ=Pt.define(),vO=Pt.define(),NJ=Pt.define();function S9(n,e){let t=n.state.facet(NJ);if(!t.length)return t;let r=t.map(s=>s instanceof Function?s(n):s),i=[];return Cn.spans(r,e.from,e.to,{point(){},span(s,a,o,l){let u=s-e.from,c=a-e.from,f=i;for(let d=o.length-1;d>=0;d--,l--){let h=o[d].spec.bidiIsolate,p;if(h==null&&(h=Z7e(e.text,u,c)),l>0&&f.length&&(p=f[f.length-1]).to==u&&p.direction==h)p.to=c,f=p.inner;else{let v={from:u,to:c,direction:h,inner:[]};f.push(v),f=v.inner}}}}),i}const PJ=Pt.define();function RJ(n){let e=0,t=0,r=0,i=0;for(let s of n.state.facet(PJ)){let a=s(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(r=Math.max(r,a.top)),a.bottom!=null&&(i=Math.max(i,a.bottom)))}return{left:e,right:t,top:r,bottom:i}}const tv=Pt.define();class Za{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new Za(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,a=0,o=0;;i++){let l=i==e.length?null:e[i],u=a-o,c=l?l.fromB:1e9;for(;s<t.length&&t[s]<c;){let f=t[s],d=t[s+1],h=Math.max(o,f),p=Math.min(c,d);if(h<=p&&new Za(h+u,p+u,h,p).addToSet(r),d>c)break;s+=2}if(!l)return r;new Za(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),a=l.toA,o=l.toB}}}class JS{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=ni.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,a,o,l)=>i.push(new Za(s,a,o,l))),this.changedRanges=i}static create(e,t,r){return new JS(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class _9 extends Kn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=zt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Jr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Za(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!s$e(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?e$e(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new Za(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Tt.ie||Tt.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,o=this.updateDeco(),l=r$e(a,o,e.changes);return r=Za.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=Tt.chrome||Tt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||i.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof pu&&a.widget instanceof E9&&s.push(a.dom);i.updateGaps(s)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let a=i.length-1;;a--){let o=a>=0?i[a]:null;if(!o)break;let{fromA:l,toA:u,fromB:c,toB:f}=o,d,h,p,v;if(r&&r.range.fromB<f&&r.range.toB>c){let g=Av.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),w=Av.build(this.view.state.doc,r.range.toB,f,this.decorations,this.dynamicDecorationMap);h=g.breakAtStart,p=g.openStart,v=w.openEnd;let x=this.compositionView(r);w.breakAtStart?x.breakAfter=1:w.content.length&&x.merge(x.length,x.length,w.content[0],!1,w.openStart,0)&&(x.breakAfter=w.content[0].breakAfter,w.content.shift()),g.content.length&&x.merge(0,0,g.content[g.content.length-1],!0,0,g.openEnd)&&g.content.pop(),d=g.content.concat(x).concat(w.content)}else({content:d,breakAtStart:h,openStart:p,openEnd:v}=Av.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:y,off:m}=s.findPos(u,1),{i:S,off:b}=s.findPos(l,-1);sJ(this,S,b,y,m,d,h,p,v)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(AJ)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new No(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Nu(i,[t],t.length);let r=new Jr;return r.append(t,0),r}fixCompositionDOM(e){let t=(s,a)=>{a.flags|=8|(a.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(a);let o=Kn.get(s);o&&o!=a&&(o.dom=null),a.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&vw(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||s))return;let a=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?l:this.moveToLine(this.domAtPos(o.head));if(Tt.gecko&&o.empty&&!this.hasComposition&&Q7e(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=u=new Ji(f,0),a=!0}let c=this.view.observer.selectionRange;(a||!c.focusNode||(!Cv(l.node,l.offset,c.anchorNode,c.anchorOffset)||!Cv(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,o))&&(this.view.observer.ignore(()=>{Tt.android&&Tt.chrome&&this.dom.contains(c.focusNode)&&i$e(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=F0(this.view.root);if(f)if(o.empty){if(Tt.gecko){let d=t$e(l.node,l.offset);if(d&&d!=3){let h=(d==1?nJ:rJ)(l.node,l.offset);h&&(l=new Ji(h.node,h.offset))}}f.collapse(l.node,l.offset),o.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=o.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(u.node,u.offset)}catch{}}else{let d=document.createRange();o.anchor>o.head&&([l,u]=[u,l]),d.setEnd(u.node,u.offset),d.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(d)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Ji(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Ji(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Cv(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=F0(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let a=Jr.find(this,t.head);if(!a)return;let o=a.posAtStart;if(t.head==o||t.head==o+a.length)return;let l=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);r.collapse(c.node,c.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&r.collapse(i,s)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let s=Kn.get(t.childNodes[i]);s instanceof Jr&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=Kn.get(t.childNodes[i]);s instanceof Jr&&(r=s.domAtPos(s.length))}return r?new Ji(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=Kn.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof Jr)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let s=this.length,a=this.children.length-1;a>=0;a--){let o=this.children[a],l=s-o.breakAfter,u=l-o.length;if(l<e)break;if(u<=e&&(u<e||o.covers(-1))&&(l>e||o.covers(1))&&(!r||o instanceof Jr&&!(r instanceof Jr&&t>=0)))r=o,i=u;else if(r&&u==e&&l==e&&o instanceof pu&&Math.abs(t)<2){if(o.deco.startSide<0)break;a&&(r=null)}s=u}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Jr))return null;for(;i.children.length;){let{i:o,off:l}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=l}if(!(i instanceof No))return null;let s=Oi(i.text,r);if(s==r)return null;let a=Nd(i.dom,r,s).getClientRects();for(let o=0;o<a.length;o++){let l=a[o];if(o==a.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,a=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,l=this.view.textDirection==ur.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],d=u+f.length;if(d>i)break;if(u>=r){let h=f.dom.getBoundingClientRect();if(t.push(h.height),a){let p=f.dom.lastChild,v=p?am(p):[];if(v.length){let y=v[v.length-1],m=l?y.right-h.left:h.right-y.left;m>o&&(o=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=d)}}}u=d+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?ur.RTL:ur.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Jr){let a=s.measureTextSize();if(a)return a}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=am(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new iJ(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],a=s?s.from-1:this.length;if(a>r){let o=(t.lineBlockAt(a).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(zt.replace({widget:new E9(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!s)break;r=s.to+1}return zt.set(e)}updateDeco(){let e=1,t=this.view.state.facet(B0).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(DJ).map((s,a)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(Cn.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(CJ))try{if(u(this.view,e.range,e))return!0}catch(c){Ws(this.view.state,c,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=RJ(this.view),a={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:l}=this.view.scrollDOM;O7e(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==ur.LTR)}}function Q7e(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class E9 extends Lu{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function OJ(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=nJ(t.focusNode,t.focusOffset),i=rJ(t.focusNode,t.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=Kn.get(i.node);if(!o||o instanceof No&&o.text!=i.node.nodeValue)s=i;else if(n.docView.lastCompositionAfterCursor){let l=Kn.get(r.node);!l||l instanceof No&&l.text!=r.node.nodeValue||(s=i)}}if(n.docView.lastCompositionAfterCursor=s!=r,!s)return null;let a=e-s.offset;return{from:a,to:a+s.node.nodeValue.length,node:s.node}}function e$e(n,e,t){let r=OJ(n,t);if(!r)return null;let{node:i,from:s,to:a}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||n.state.doc.sliceString(r.from,r.to)!=o)return null;let l=e.invertedDesc,u=new Za(l.mapPos(s),l.mapPos(a),s,a),c=[];for(let f=i.parentNode;;f=f.parentNode){let d=Kn.get(f);if(d instanceof Nu)c.push({node:f,deco:d.mark});else{if(d instanceof Jr||f.nodeName=="DIV"&&f.parentNode==n.contentDOM)return{range:u,text:i,marks:c,line:f};if(f!=n.contentDOM)c.push({node:f,deco:new Cy({inclusive:!0,attributes:$7e(f),tagName:f.tagName.toLowerCase()})});else return null}}}function t$e(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let n$e=class{constructor(){this.changes=[]}compareRange(e,t){BD(e,t,this.changes)}comparePoint(e,t){BD(e,t,this.changes)}};function r$e(n,e,t){let r=new n$e;return Cn.compare(n,e,t,r),r.changes}function i$e(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function s$e(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function a$e(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return it.cursor(e);s==0?t=1:s==i.length&&(t=-1);let a=s,o=s;t<0?a=Oi(i.text,s,!1):o=Oi(i.text,s);let l=r(i.text.slice(a,o));for(;a>0;){let u=Oi(i.text,a,!1);if(r(i.text.slice(u,a))!=l)break;a=u}for(;o<i.length;){let u=Oi(i.text,o);if(r(i.text.slice(o,u))!=l)break;o=u}return it.range(a+i.from,o+i.from)}function o$e(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function l$e(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function cA(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function M9(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function C9(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function HD(n,e,t){let r,i,s,a,o=!1,l,u,c,f;for(let p=n.firstChild;p;p=p.nextSibling){let v=am(p);for(let y=0;y<v.length;y++){let m=v[y];i&&cA(i,m)&&(m=M9(C9(m,i.bottom),i.top));let S=o$e(e,m),b=l$e(t,m);if(S==0&&b==0)return p.nodeType==3?A9(p,e,t):HD(p,e,t);if(!r||a>b||a==b&&s>S){r=p,i=m,s=S,a=b;let g=b?t<m.top?-1:1:S?e<m.left?-1:1:0;o=!g||(g>0?y<v.length-1:y>0)}S==0?t>m.bottom&&(!c||c.bottom<m.bottom)?(l=p,c=m):t<m.top&&(!f||f.top>m.top)&&(u=p,f=m):c&&cA(c,m)?c=C9(c,m.bottom):f&&cA(f,m)&&(f=M9(f,m.top))}}if(c&&c.bottom>=t?(r=l,i=c):f&&f.top<=t&&(r=u,i=f),!r)return{node:n,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return A9(r,d,t);if(o&&r.contentEditable!="false")return HD(r,d,t);let h=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:h}}function A9(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,a=0;for(let o=0;o<r;o++){let l=Nd(n,o,o+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;a||(a=e-c.left);let f=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<s){let d=e>=(c.left+c.right)/2,h=d;if((Tt.chrome||Tt.gecko)&&Nd(n,o).getBoundingClientRect().left==c.right&&(h=!d),f<=0)return{node:n,offset:o+(h?1:0)};i=o+(h?1:0),s=f}}}return{node:n,offset:i>-1?i:a>0?n.nodeValue.length:0}}function IJ(n,e,t,r=-1){var i,s;let a=n.contentDOM.getBoundingClientRect(),o=a.top+n.viewState.paddingTop,l,{docHeight:u}=n.viewState,{x:c,y:f}=e,d=f-o;if(d<0)return 0;if(d>u)return n.state.doc.length;for(let g=n.viewState.heightOracle.textHeight/2,w=!1;l=n.elementAtHeight(d),l.type!=Es.Text;)for(;d=r>0?l.bottom+g:l.top-g,!(d>=0&&d<=u);){if(w)return t?null:0;w=!0,r=-r}f=o+d;let h=l.from;if(h<n.viewport.from)return n.viewport.from==0?0:t?null:T9(n,a,l,c,f);if(h>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:T9(n,a,l,c,f);let p=n.dom.ownerDocument,v=n.root.elementFromPoint?n.root:p,y=v.elementFromPoint(c,f);y&&!n.contentDOM.contains(y)&&(y=null),y||(c=Math.max(a.left+1,Math.min(a.right-1,c)),y=v.elementFromPoint(c,f),y&&!n.contentDOM.contains(y)&&(y=null));let m,S=-1;if(y&&((i=n.docView.nearest(y))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let g=p.caretPositionFromPoint(c,f);g&&({offsetNode:m,offset:S}=g)}else if(p.caretRangeFromPoint){let g=p.caretRangeFromPoint(c,f);g&&({startContainer:m,startOffset:S}=g,(!n.contentDOM.contains(m)||Tt.safari&&u$e(m,S,c)||Tt.chrome&&c$e(m,S,c))&&(m=void 0))}}if(!m||!n.docView.dom.contains(m)){let g=Jr.find(n.docView,h);if(!g)return d>l.top+l.height/2?l.to:l.from;({node:m,offset:S}=HD(g.dom,c,f))}let b=n.docView.nearest(m);if(!b)return null;if(b.isWidget&&((s=b.dom)===null||s===void 0?void 0:s.nodeType)==1){let g=b.dom.getBoundingClientRect();return e.y<g.top||e.y<=g.bottom&&e.x<=(g.left+g.right)/2?b.posAtStart:b.posAtEnd}else return b.localPosFromDOM(m,S)+b.posAtStart}function T9(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let o=n.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(n.defaultLineHeight-o)*.5)/o);s+=l*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+DD(a,s,n.state.tabSize)}function u$e(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Nd(n,r-1,r).getBoundingClientRect().left>t}function c$e(n,e,t){if(e!=0)return!1;for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():Nd(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function WD(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==Es.Text))return r}return t}function f$e(n,e,t,r){let i=WD(n,e.head),s=!r||i.type!=Es.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let a=n.dom.getBoundingClientRect(),o=n.textDirectionAt(i.from),l=n.posAtCoords({x:t==(o==ur.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(l!=null)return it.cursor(l,t?-1:1)}return it.cursor(t?i.to:i.from,t?-1:1)}function D9(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),a=n.textDirectionAt(i.from);for(let o=e,l=null;;){let u=K7e(i,s,a,o,t),c=vJ;if(!u){if(i.number==(t?n.state.doc.lines:1))return o;c=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),u=n.visualLineSide(i,!t)}if(l){if(!l(c))return o}else{if(!r)return u;l=r(c)}o=u}}function d$e(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let a=r(s);return i==pr.Space&&(i=a),i==a}}function h$e(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return it.cursor(i,e.assoc);let a=e.goalColumn,o,l=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(i,e.assoc||-1),c=n.documentTop;if(u)a==null&&(a=u.left-l.left),o=s<0?u.top:u.bottom;else{let h=n.viewState.lineBlockAt(i);a==null&&(a=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-h.from))),o=(s<0?h.top:h.bottom)+c}let f=l.left+a,d=r??n.viewState.heightOracle.textHeight>>1;for(let h=0;;h+=10){let p=o+(d+h)*s,v=IJ(n,{x:f,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?v<i:v>i)){let y=n.docView.coordsForChar(v),m=!y||p<y.top?-1:1;return it.cursor(v,m,void 0,a)}}}function yw(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(s,a,o)=>{if(e>s&&e<a){let l=r||t||(e-s<a-e?-1:1);e=l<0?s:a,r=l}});if(!r)return e}}function fA(n,e,t){let r=yw(n.state.facet(vO).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:it.cursor(r,r<t.from?1:-1)}class p$e{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Tt.safari&&e.contentDOM.addEventListener("input",()=>null),Tt.gecko&&N$e(e.contentDOM.ownerDocument)}handleEvent(e){!S$e(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=m$e(e),r=this.handlers,i=this.view.contentDOM;for(let s in t)if(s!="scroll"){let a=!t[s].handlers.length,o=r[s];o&&a!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:a})}for(let s in r)s!="scroll"&&!t[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&LJ.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Tt.android&&Tt.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Tt.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=kJ.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||g$e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ip(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Tt.safari&&!Tt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function N9(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){Ws(t.state,i)}}}function m$e(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let a=i.domEventHandlers[s];a&&t(s).handlers.push(N9(r.value,a))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let a=i.domEventObservers[s];a&&t(s).observers.push(N9(r.value,a))}}for(let r in Po)t(r).handlers.push(Po[r]);for(let r in ro)t(r).observers.push(ro[r]);return e}const kJ=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],g$e="dthko",LJ=[16,17,18,20,91,92,224,225],bb=6;function wb(n){return Math.max(0,n)*.7+8}function v$e(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class y$e{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=I7e(e.contentDOM),this.atoms=e.state.facet(vO).map(a=>a(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(bn.allowMultipleSelections)&&x$e(e,t),this.dragging=w$e(e,t)&&UJ(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&v$e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,s=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},a=RJ(this.view);e.clientX-a.left<=s.left+bb?r=-wb(s.left-e.clientX):e.clientX+a.right>=s.right-bb&&(r=wb(e.clientX-s.right)),e.clientY-a.top<=s.top+bb?i=-wb(s.top-e.clientY):e.clientY+a.bottom>=s.bottom-bb&&(i=wb(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let a=yw(this.atoms,i.from,0);a!=i.from&&(s=it.cursor(a,-1))}else{let a=yw(this.atoms,i.from,-1),o=yw(this.atoms,i.to,1);(a!=i.from||o!=i.to)&&(s=it.range(i.from==i.anchor?a:o,i.from==i.head?a:o))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?it.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function x$e(n,e){let t=n.state.facet(yJ);return t.length?t[0](e):Tt.mac?e.metaKey:e.ctrlKey}function b$e(n,e){let t=n.state.facet(xJ);return t.length?t[0](e):Tt.mac?!e.altKey:!e.ctrlKey}function w$e(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=F0(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let a=i[s];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function S$e(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Kn.get(t))&&r.ignoreEvent(e))return!1;return!0}const Po=Object.create(null),ro=Object.create(null),FJ=Tt.ie&&Tt.ie_version<15||Tt.ios&&Tt.webkit_version<604;function _$e(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),BJ(n,t.value)},50)}function BJ(n,e){let{state:t}=n,r,i=1,s=t.toText(e),a=s.lines==t.selection.ranges.length;if(GD!=null&&t.selection.ranges.every(l=>l.empty)&&GD==s.toString()){let l=-1;r=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let f=t.toText((a?s.line(i++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:f},range:it.cursor(u.from+f.length)}})}else a?r=t.changeByRange(l=>{let u=s.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:it.cursor(l.from+u.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}ro.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Po.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);ro.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};ro.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Po.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(bJ))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=C$e(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new y$e(n,e,t,r)),r&&n.observer.ignore(()=>{QZ(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function P9(n,e,t,r){if(r==1)return it.cursor(e,t);if(r==2)return a$e(n.state,e,t);{let i=Jr.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),a=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<n.state.doc.length&&o==s.to&&o++,it.range(a,o)}}let zJ=(n,e)=>n>=e.top&&n<=e.bottom,R9=(n,e,t)=>zJ(e,t)&&n>=t.left&&n<=t.right;function E$e(n,e,t,r){let i=Jr.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let a=i.coordsAt(s,-1);if(a&&R9(t,r,a))return-1;let o=i.coordsAt(s,1);return o&&R9(t,r,o)?1:a&&zJ(r,a)?-1:1}function O9(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:E$e(n,t,e.clientX,e.clientY)}}const M$e=Tt.ie&&Tt.ie_version<=11;let I9=null,k9=0,L9=0;function UJ(n){if(!M$e)return n.detail;let e=I9,t=L9;return I9=n,L9=Date.now(),k9=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(k9+1)%3:1}function C$e(n,e){let t=O9(n,e),r=UJ(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,a,o){let l=O9(n,s),u,c=P9(n,l.pos,l.bias,r);if(t.pos!=l.pos&&!a){let f=P9(n,t.pos,t.bias,r),d=Math.min(f.from,c.from),h=Math.max(f.to,c.to);c=d<c.from?it.range(d,h):it.range(h,d)}return a?i.replaceRange(i.main.extend(c.from,c.to)):o&&r==1&&i.ranges.length>1&&(u=A$e(i,l.pos))?u:o?i.addRange(c):it.create([c])}}}function A$e(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return it.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Po.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,a=s+i.length;(s>=t.to||a<=t.from)&&(t=it.range(s,a))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};Po.dragend=n=>(n.inputState.draggedContent=null,!1);function F9(n,e,t,r){if(!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,a=r&&s&&b$e(n,e)?{from:s.from,to:s.to}:null,o={from:i,insert:t},l=n.state.changes(a?[a,o]:o);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Po.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,s=()=>{++i==t.length&&F9(n,e,r.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[a]=o.result),s()},o.readAsText(t[a])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return F9(n,e,r,!0),!0}return!1};Po.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=FJ?null:e.clipboardData;return t?(BJ(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(_$e(n),!1)};function T$e(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function D$e(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let a=n.doc.lineAt(s);a.number>i&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),i=a.number}r=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:r}}let GD=null;Po.copy=Po.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=D$e(n.state);if(!t&&!i)return!1;GD=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=FJ?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(T$e(n,t),!1)};const $J=Pl.define();function VJ(n,e){let t=[];for(let r of n.facet(_J)){let i=r(n,e);i&&t.push(i)}return t?n.update({effects:t,annotations:$J.of(!0)}):null}function HJ(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=VJ(n.state,e);t?n.dispatch(t):n.update([])}},10)}ro.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),HJ(n)};ro.blur=n=>{n.observer.clearSelectionRange(),HJ(n)};ro.compositionstart=ro.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};ro.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Tt.chrome&&Tt.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};ro.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Po.beforeinput=(n,e)=>{var t;let r;if(Tt.chrome&&Tt.android&&(r=kJ.find(i=>i.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Tt.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Tt.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>ro.compositionend(n,e),20),!1};const B9=new Set;function N$e(n){B9.has(n)||(B9.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const z9=["pre-wrap","normal","pre-line","break-spaces"];class P$e{constructor(e){this.lineWrapping=e,this.doc=Pn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return z9.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s,a){let o=z9.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<a.length;u++){let c=a[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class R$e{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ol{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Es.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Zc?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ol(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ar=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(ar||(ar={}));const xw=.001;class Ms{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>xw&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return Ms.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,a=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:l,toA:u,fromB:c,toB:f}=i[o],d=s.lineAt(l,ar.ByPosNoHeight,r.setDoc(t),0,0),h=d.to>=u?d:s.lineAt(u,ar.ByPosNoHeight,r,0,0);for(f+=h.to-u,u=h.to;o>0&&d.from<=i[o-1].toA;)l=i[o-1].fromA,c=i[o-1].fromB,o--,l<d.from&&(d=s.lineAt(l,ar.ByPosNoHeight,r,0,0));c+=d.from-l,l=d.from;let p=yO.build(r.setDoc(a),e,c,f);s=s.replace(l,u,p)}return s.updateHeight(r,0)}static empty(){return new la(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let o=e[t-1];o.break?e.splice(--t,1,o.left,null,o.right):e.splice(--t,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[t++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,r++),new O$e(Ms.of(e.slice(0,t)),a,Ms.of(e.slice(r)))}}Ms.prototype.size=1;class WJ extends Ms{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new ol(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,a){e<=s+this.length&&t>=s&&a(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class la extends WJ{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new ol(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof la||i instanceof Mi&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Mi?i=new la(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Ms.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Mi extends Ms{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,a,o=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);a=l/s,this.length>s+1&&(o=(this.height-l)/(this.length-s-1))}else a=this.height/s;return{firstLine:r,lastLine:i,perLine:a,perChar:o}}blockAt(e,t,r,i){let{firstLine:s,lastLine:a,perLine:o,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let u=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=t.doc.lineAt(u),f=o+c.length*l,d=Math.max(r,e-f/2);return new ol(c.from,c.length,d,f,0)}else{let u=Math.max(0,Math.min(a-s,Math.floor((e-r)/o))),{from:c,length:f}=t.doc.line(s+u);return new ol(c,f,r+o*u,o,0)}}lineAt(e,t,r,i,s){if(t==ar.ByHeight)return this.blockAt(e,r,i,s);if(t==ar.ByPosNoHeight){let{from:h,to:p}=r.doc.lineAt(e);return new ol(h,p-h,0,0,0)}let{firstLine:a,perLine:o,perChar:l}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=o+u.length*l,f=u.number-a,d=i+o*f+l*(u.from-s-f);return new ol(u.from,u.length,Math.max(i,Math.min(d,i+this.height-c)),c,0)}forEachLine(e,t,r,i,s,a){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:o,perLine:l,perChar:u}=this.heightMetrics(r,s);for(let c=e,f=i;c<=t;){let d=r.doc.lineAt(c);if(c==e){let p=d.number-o;f+=l*p+u*(e-s-p)}let h=l+u*d.length;a(new ol(d.from,d.length,f,h,0)),f+=h,c=d.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof Mi?r[r.length-1]=new Mi(s.length+i):r.push(null,new Mi(i-1))}if(e>0){let s=r[0];s instanceof Mi?r[0]=new Mi(e+s.length):r.unshift(new Mi(e-1),null)}return Ms.of(r)}decomposeLeft(e,t){t.push(new Mi(e-1),null)}decomposeRight(e,t){t.push(null,new Mi(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let a=[],o=Math.max(t,i.from),l=-1;for(i.from>t&&a.push(new Mi(i.from-t-1).updateHeight(e,t));o<=s&&i.more;){let c=e.doc.lineAt(o).length;a.length&&a.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=xw&&(l=-2);let d=new la(c,f);d.outdated=!1,a.push(d),o+=c+1}o<=s&&a.push(null,new Mi(s-o).updateHeight(e,o));let u=Ms.of(a);return(l<0||Math.abs(u.height-this.height)>=xw||Math.abs(l-this.heightMetrics(e,t).perLine)>=xw)&&(e.heightChanged=!0),u}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class O$e extends Ms{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let a=i+this.left.height,o=s+this.left.length+this.break,l=t==ar.ByHeight?e<a:e<o,u=l?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,a,o);if(this.break||(l?u.to<o:u.from>o))return u;let c=t==ar.ByPosNoHeight?ar.ByPosNoHeight:ar.ByPos;return l?u.join(this.right.lineAt(o,c,r,a,o)):this.left.lineAt(o,c,r,i,s).join(u)}forEachLine(e,t,r,i,s,a){let o=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,s,a),t>=l&&this.right.forEachLine(e,t,r,o,l,a);else{let u=this.lineAt(l,ar.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,a),u.to>=e&&u.from<=t&&a(u),t>u.to&&this.right.forEachLine(u.to+1,t,r,o,l,a)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let a=s.length;for(let o of r)s.push(o);if(e>0&&U9(s,a-1),t<this.length){let o=s.length;this.decomposeRight(t,s),U9(s,o)}return Ms.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ms.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:a}=this,o=t+s.length+this.break,l=null;return i&&i.from<=t+s.length&&i.more?l=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=o+a.length&&i.more?l=a=a.updateHeight(e,o,r,i):a.updateHeight(e,o,r),l?this.balanced(s,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function U9(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof Mi&&(r=n[e+1])instanceof Mi&&n.splice(e-1,3,new Mi(t.length+1+r.length))}const I$e=5;class yO{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof la?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new la(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let a=t-e;r.block?this.addBlock(new WJ(a,i,r)):(a||s||i>=I$e)&&this.addLineDeco(i,s,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new la(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new Mi(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof la)return e;let t=new la(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof la)&&!this.isCovered?this.nodes.push(new la(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof la&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new yO(r,e);return Cn.spans(t,r,i,s,0),s.finish(r)}}function k$e(n,e,t){let r=new L$e;return Cn.compare(n,e,t,r,0),r.changes}class L$e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&BD(e,t,this.changes,5)}}function F$e(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),a=Math.min(i.innerWidth,t.right),o=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let u=n.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let d=c.getBoundingClientRect();s=Math.max(s,d.left),a=Math.min(a,d.right),o=Math.max(o,d.top),l=u==n.parentNode?d.bottom:Math.min(l,d.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-t.left,right:Math.max(s,a)-t.left,top:o-(t.top+e),bottom:Math.max(o,l)-(t.top+e)}}function B$e(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class dA{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,t){return zt.replace({widget:new z$e(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class z$e extends Lu{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class $9{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=V9,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ur.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(gO).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new P$e(t),this.stateDeco=e.facet(B0).filter(r=>typeof r!="function"),this.heightMap=Ms.empty().applyChanges(this.stateDeco,Pn.empty,this.heightOracle.setDoc(e.doc),[new Za(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=zt.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:a})=>i>=s&&i<=a)){let{from:s,to:a}=this.lineBlockAt(i);e.push(new Sb(s,a))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?V9:new xO(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(nv(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(B0).filter(c=>typeof c!="function");let i=e.changedRanges,s=Za.extendWithRanges(i,k$e(r,this.stateDeco,e?e.changes:ni.empty(this.state.doc.length))),a=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=a&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(MJ)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?ur.RTL:ur.LTR;let a=this.heightOracle.mustRefreshForWrapping(s),o=t.getBoundingClientRect(),l=a||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,c=0;if(o.width&&o.height){let{scaleX:g,scaleY:w}=JZ(t,o);(g>.005&&Math.abs(this.scaleX-g)>.005||w>.005&&Math.abs(this.scaleY-w)>.005)&&(this.scaleX=g,this.scaleY=w,u|=8,a=l=!0)}let f=(parseInt(r.paddingTop)||0)*this.scaleY,d=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=d)&&(this.paddingTop=f,this.paddingBottom=d,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let h=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=h&&(this.scrollAnchorHeight=-1,this.scrollTop=h),this.scrolledToBottom=tJ(e.scrollDOM);let p=(this.printing?B$e:F$e)(t,this.paddingTop),v=p.top-this.pixelViewport.top,y=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let S=o.width;if((this.contentDOMWidth!=S||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let g=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(g)&&(a=!0),a||i.lineWrapping&&Math.abs(S-this.contentDOMWidth)>i.charWidth){let{lineHeight:w,charWidth:x,textHeight:M}=e.docView.measureTextSize();a=w>0&&i.refresh(s,w,x,M,S/x,g),a&&(e.docView.minWidth=0,u|=8)}v>0&&y>0?c=Math.max(v,y):v<0&&y<0&&(c=Math.min(v,y)),i.heightChanged=!1;for(let w of this.viewports){let x=w.from==this.viewport.from?g:e.docView.measureVisibleLineHeights(w);this.heightMap=(a?Ms.empty().applyChanges(this.stateDeco,Pn.empty,this.heightOracle,[new Za(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,a,new R$e(w.from,x))}i.heightChanged&&(u|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:a,visibleBottom:o}=this,l=new Sb(i.lineAt(a-r*1e3,ar.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,ar.ByHeight,s,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,ar.ByPos,s,0,0),d;t.y=="center"?d=(f.top+f.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<l.from?d=f.top:d=f.bottom-c,l=new Sb(i.lineAt(d-1e3/2,ar.ByHeight,s,0,0).from,i.lineAt(d+c+1e3/2,ar.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Sb(this.heightMap.lineAt(r,ar.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,ar.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,ar.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,ar.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:o}=this;return(e==0||i<=a-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>a-2*1e3&&s<o+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new dA(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,a=i<<1;if(this.defaultTextDirection!=ur.LTR&&!r)return[];let o=[],l=(c,f,d,h)=>{if(f-c<s)return;let p=this.state.selection.main,v=[p.from];p.empty||v.push(p.to);for(let m of v)if(m>c&&m<f){l(c,m-10,d,h),l(m+10,f,d,h);return}let y=$$e(e,m=>m.from>=d.from&&m.to<=d.to&&Math.abs(m.from-c)<s&&Math.abs(m.to-f)<s&&!v.some(S=>m.from<S&&m.to>S));if(!y){if(f<d.to&&t&&r&&t.visibleRanges.some(m=>m.from<=f&&m.to>=f)){let m=t.moveToLineBoundary(it.cursor(f),!1,!0).head;m>c&&(f=m)}y=new dA(c,f,this.gapSize(d,c,f,h))}o.push(y)},u=c=>{if(c.length<a||c.type!=Es.Text)return;let f=U$e(c.from,c.to,this.stateDeco);if(f.total<a)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,p;if(r){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,m;if(d!=null){let S=Eb(f,d),b=((this.visibleBottom-this.visibleTop)/2+v)/c.height;y=S-b,m=S+b}else y=(this.visibleTop-c.top-v)/c.height,m=(this.visibleBottom-c.top+v)/c.height;h=_b(f,y),p=_b(f,m)}else{let v=f.total*this.heightOracle.charWidth,y=i*this.heightOracle.charWidth,m,S;if(d!=null){let b=Eb(f,d),g=((this.pixelViewport.right-this.pixelViewport.left)/2+y)/v;m=b-g,S=b+g}else m=(this.pixelViewport.left-y)/v,S=(this.pixelViewport.right+y)/v;h=_b(f,m),p=_b(f,S)}h>c.from&&l(c.from,h,c,f),p<c.to&&l(p,c.to,c,f)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return o}gapSize(e,t,r,i){let s=Eb(i,r)-Eb(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){dA.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=zt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Cn.spans(e,this.viewport.from,this.viewport.to,{span(i,s){t.push({from:i,to:s})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=t[s].from||i.to!=t[s].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||nv(this.heightMap.lineAt(e,ar.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||nv(this.heightMap.lineAt(this.scaler.fromDOM(e),ar.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return nv(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Sb{constructor(e,t){this.from=e,this.to=t}}function U$e(n,e,t){let r=[],i=n,s=0;return Cn.spans(t,n,e,{span(){},point(a,o){a>i&&(r.push({from:i,to:a}),s+=a-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function _b({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:a}=e[i],o=a-s;if(r<=o)return s+r;r-=o}}function Eb(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function $$e(n,e){for(let t of n)if(e(t))return t}const V9={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class xO{constructor(e,t,r){let i=0,s=0,a=0;this.viewports=r.map(({from:o,to:l})=>{let u=t.lineAt(o,ar.ByPos,e,0,0).top,c=t.lineAt(l,ar.ByPos,e,0,0).bottom;return i+=c-u,{from:o,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let o of this.viewports)o.domTop=a+(o.top-s)*this.scale,a=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof xO?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function nv(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new ol(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>nv(i,e)):n._content)}const Mb=Pt.define({combine:n=>n.join(" ")}),jD=Pt.define({combine:n=>n.indexOf(!0)>-1}),qD=Yc.newName(),GJ=Yc.newName(),jJ=Yc.newName(),qJ={"&light":"."+GJ,"&dark":"."+jJ};function XD(n,e,t){return new Yc(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const V$e=XD("."+qD,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},qJ),rv="￿";class H$e{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(bn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=rv}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let a=i.nextSibling;if(a==t)break;let o=Kn.get(i),l=Kn.get(a);(o&&l?o.breakAfter:(o?o.breakAfter:ZS(i))||ZS(a)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=a}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,a=1,o;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(o=i.exec(t))&&(s=o.index,a=o[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),a>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=a-1);r=s+a}}readNode(e){if(e.cmIgnore)return;let t=Kn.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(W$e(e,r.node,r.offset)?t:0))}}function W$e(n,e,t){for(;;){if(!e||t<Du(e))return!1;if(e==n)return!0;t=Dd(e)+1,e=e.parentNode}}class H9{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class G$e{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let o=s||a?[]:X$e(e),l=new H$e(o,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Y$e(o,this.bounds.from)}else{let o=e.observer.selectionRange,l=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!RD(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=a&&a.node==o.anchorNode&&a.offset==o.anchorOffset||!RD(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),c=e.viewport;if((Tt.ios||Tt.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let f=Math.min(l,u),d=Math.max(l,u),h=c.from-f,p=c.to-d;(h==0||h==1||f==0)&&(p==0||p==-1||d==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=it.single(u,l)}}}function XJ(n,e){let t,{newSel:r}=e,i=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:o}=e.bounds,l=i.from,u=null;(s===8||Tt.android&&e.text.length<o-a)&&(l=i.to,u="end");let c=q$e(n.state.doc.sliceString(a,o,rv),e.text,l-a,u);c&&(Tt.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==rv+rv&&c.toB--,t={from:a+c.from,to:a+c.toA,insert:Pn.of(e.text.slice(c.from,c.toB).split(rv))})}else r&&(!n.hasFocus&&n.state.facet(XE)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:(Tt.mac||Tt.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=it.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Pn.of([" "])}):Tt.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=it.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Pn.of([" "])}),t)return YJ(n,t,r,s);if(r&&!r.main.eq(i)){let a=!1,o="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),o=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:a,userEvent:o}),!0}else return!1}function YJ(n,e,t,r=-1){if(Tt.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(Tt.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ip(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Ip(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Ip(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,o=()=>a||(a=j$e(n,e,t));return n.state.facet(SJ).some(l=>l(n,e.from,e.to,s,o))||n.dispatch(o()),!0}function j$e(n,e,t){let r,i=n.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let o=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(n.state.toText(o+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let o=i.changes(e),l=t&&t.main.to<=o.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=n.state.sliceDoc(e.from,e.to),c,f=t&&OJ(n,t.main.head);if(f){let p=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-p}}else c=n.state.doc.lineAt(s.head);let d=s.to-e.to,h=s.to-s.from;r=i.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:o,range:l||p.map(o)};let v=p.to-d,y=v-u.length;if(p.to-p.from!=h||n.state.sliceDoc(y,v)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let m=i.changes({from:y,to:v,insert:e.insert}),S=p.to-s.to;return{changes:m,range:l?it.range(Math.max(0,l.anchor+S),Math.max(0,l.head+S)):p.map(m)}})}else r={changes:o,selection:l&&i.selection.replaceRange(l)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:a,scrollIntoView:!0})}function q$e(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let a=n.length,o=e.length;for(;a>0&&o>0&&n.charCodeAt(a-1)==e.charCodeAt(o-1);)a--,o--;if(r=="end"){let l=Math.max(0,s-Math.min(a,o));t-=a+l-s}if(a<s&&n.length<e.length){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}else if(o<s){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}return{from:s,toA:a,toB:o}}function X$e(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new H9(t,r)),(i!=t||s!=r)&&e.push(new H9(i,s))),e}function Y$e(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?it.single(t+e,r+e):null}const K$e={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},hA=Tt.ie&&Tt.ie_version<=11;class Z$e{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new k7e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(Tt.ie&&Tt.ie_version<=11||Tt.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&(this.editContext=new Q$e(e),e.contentDOM.editContext=this.editContext.editContext),hA&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){e.type=="change"&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(XE)?r.root.activeElement!=this.dom:!vw(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Tt.ie&&Tt.ie_version<=11||Tt.android&&Tt.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Cv(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=F0(e.root);if(!t)return!1;let r=Tt.safari&&e.root.nodeType==11&&P7e(this.dom.ownerDocument)==this.dom&&J$e(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=vw(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&F7e(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,K$e),hA&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),hA&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Ip(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let a=this.readMutation(s);a&&(a.typeOver&&(i=!0),t==-1?{from:t,to:r}=a:(t=Math.min(a.from,t),r=Math.max(a.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&vw(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new G$e(this.view,e,t,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=XJ(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=W9(t,e.previousSibling||e.target.previousSibling,-1),i=W9(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&this.editContext.update(e)}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function W9(n,e,t){for(;e;){let r=Kn.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function G9(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return Cv(a.node,a.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function J$e(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return G9(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?G9(n,t):null}class Q$e{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});t.addEventListener("textupdate",r=>{let{anchor:i}=e.state.selection.main,s={from:this.toEditorPos(r.updateRangeStart),to:this.toEditorPos(r.updateRangeEnd),insert:Pn.of(r.text.split(`
`))};s.from==this.from&&i<this.from?s.from=i:s.to==this.to&&i>this.to&&(s.to=i),!(s.from==s.to&&!s.insert.length)&&(this.pendingContextChange=s,YJ(e,s,it.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd))),this.pendingContextChange&&this.revertPending(e.state))}),t.addEventListener("characterboundsupdate",r=>{let i=[],s=null;for(let a=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);a<o;a++){let l=e.coordsForChar(a);s=l&&new DOMRect(l.left,l.right,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}t.updateCharacterBounds(r.rangeStart,i)}),t.addEventListener("textformatupdate",r=>{let i=[];for(let s of r.getTextFormats()){let a=s.underlineStyle,o=s.underlineThickness;if(a!="None"&&o!="None"){let l=`text-decoration: underline ${a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${o=="Thin"?1:2}px`;i.push(zt.mark({attributes:{style:l}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:AJ.of(zt.set(i))})}),t.addEventListener("compositionstart",()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)}),t.addEventListener("compositionend",()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null}),this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=F0(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,a,o,l,u)=>{if(r)return;let c=u.length-(a-s);if(i&&a>=i.to)if(i.from==s&&i.to==a&&i.insert.eq(u)){i=this.pendingContextChange=null,t+=c;return}else i=null,this.revertPending(e.state);if(s+=t,a+=t,a<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||a>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(a),u.toString()),this.to+=c}t+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.to+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}}class bt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(r=>r.forEach(i=>t(i,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||L7e(e.parent)||document,this.viewState=new $9(e.state||bn.create(e)),e.scrollTo&&e.scrollTo.is(xb)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ev).map(r=>new uA(r));for(let r of this.plugins)r.update(this);this.observer=new Z$e(this),this.inputState=new p$e(this),this.inputState.ensureHandlers(this.plugins),this.docView=new _9(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let t=e.length==1&&e[0]instanceof si?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let d of e){if(d.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=d.state}if(this.destroyed){this.viewState.state=s;return}let a=this.hasFocus,o=0,l=null;e.some(d=>d.annotation($J))?(this.inputState.notifiedFocused=a,o=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,l=VJ(s,a),l||(o=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(bn.phrases)!=this.state.facet(bn.phrases))return this.setState(s);i=JS.create(this,s,e),i.flags|=o;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(f&&(f=f.map(d.changes)),d.scrollIntoView){let{main:h}=d.state.selection;f=new kp(h.empty?h:it.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of d.effects)h.is(xb)&&(f=h.value.clip(this.state))}this.viewState.update(i,f),this.bidiCache=QS.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(tv)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Mb)!=i.state.facet(Mb)&&(this.viewState.mustMeasureContent=!0),(t||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let d of this.state.facet(VD))try{d(i)}catch(h){Ws(this.state,h,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!XJ(this,c)&&u.force&&Ip(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new $9(e),this.plugins=e.facet(ev).map(r=>new uA(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new _9(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ev),r=e.state.facet(ev);if(t!=r){let i=[];for(let s of r){let a=t.indexOf(s);if(a<0)i.push(new uA(s));else{let o=this.plugins[a];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){Ws(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:a}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(a<0)if(tJ(r))s=-1,a=this.viewState.heightMap.height;else{let h=this.viewState.scrollAnchorAt(i);s=h.from,a=h.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(h=>{try{return h.read(this)}catch(p){return Ws(this.state,p),j9}}),f=JS.create(this,this.state,[]),d=!1;f.flags|=l,t?t.flags|=l:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),d=this.docView.update(f),d&&this.docViewUpdate());for(let h=0;h<u.length;h++)if(c[h]!=j9)try{let p=u[h];p.write&&p.write(c[h],this)}catch(p){Ws(this.state,p)}if(d&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-a;if(p>1||p<-1){i=i+p,r.scrollTop=i/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let o of this.state.facet(VD))o(t)}get themeClasses(){return qD+" "+(this.state.facet(jD)?jJ:GJ)+" "+this.state.facet(Mb)}updateAttrs(){let e=q9(this,TJ,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(XE)?"true":"false",class:"cm-content",style:`${Tt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),q9(this,gO,t);let r=this.observer.ignore(()=>{let i=FD(this.contentDOM,this.contentAttrs,t),s=FD(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(bt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(tv);let e=this.state.facet(bt.cspNonce);Yc.mount(this.root,this.styleModules.concat(V$e).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return fA(this,e,D9(this,e,t,r))}moveByGroup(e,t){return fA(this,e,D9(this,e,t,r=>d$e(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[t?r.length-1:0];return it.cursor(s.side(t,i)+e.from,s.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return f$e(this,e,t,r)}moveVertically(e,t,r){return fA(this,e,h$e(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),IJ(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),a=s[wc.find(s,e-i.from,-1,t)];return jE(r,a.dir==ur.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(EJ)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>eVe)return gJ(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||mJ(s.isolates,r=S9(this,e))))return s.order;r||(r=S9(this,e));let i=Y7e(e.text,t,r);return this.bidiCache.push(new QS(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Tt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{QZ(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return xb.of(new kp(typeof e=="number"?it.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return xb.of(new kp(it.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Vr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Vr.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=Yc.newName(),i=[Mb.of(r),tv.of(XD(`.${r}`,e))];return t&&t.dark&&i.push(jD.of(!0)),i}static baseTheme(e){return jd.lowest(tv.of(XD("."+qD,e,qJ)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&Kn.get(r)||Kn.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}bt.styleModule=tv;bt.inputHandler=SJ;bt.scrollHandler=CJ;bt.focusChangeEffect=_J;bt.perLineTextDirection=EJ;bt.exceptionSink=wJ;bt.updateListener=VD;bt.editable=XE;bt.mouseSelectionStyle=bJ;bt.dragMovesSelection=xJ;bt.clickAddsSelectionRange=yJ;bt.decorations=B0;bt.outerDecorations=DJ;bt.atomicRanges=vO;bt.bidiIsolatedRanges=NJ;bt.scrollMargins=PJ;bt.darkTheme=jD;bt.cspNonce=Pt.define({combine:n=>n.length?n[0]:""});bt.contentAttributes=gO;bt.editorAttributes=TJ;bt.lineWrapping=bt.contentAttributes.of({class:"cm-lineWrapping"});bt.announce=dn.define();const eVe=4096,j9={};class QS{constructor(e,t,r,i,s,a){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=s,this.order=a}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:ur.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let a=e[s];a.dir==i&&!t.touchesRange(a.from,a.to)&&r.push(new QS(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return r}}function q9(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],a=typeof s=="function"?s(n):s;a&&LD(a,t)}return t}const tVe=Tt.mac?"mac":Tt.windows?"win":Tt.linux?"linux":"key";function nVe(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,s,a,o;for(let l=0;l<t.length-1;++l){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))a=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function Cb(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const rVe=jd.default(bt.domEventHandlers({keydown(n,e){return ZJ(KJ(e.state),n,e,"editor")}})),Ty=Pt.define({enables:rVe}),X9=new WeakMap;function KJ(n){let e=n.facet(Ty),t=X9.get(e);return t||X9.set(e,t=aVe(e.reduce((r,i)=>r.concat(i),[]))),t}function iVe(n,e,t){return ZJ(KJ(n.state),e,n,t)}let dc=null;const sVe=4e3;function aVe(n,e=tVe){let t=Object.create(null),r=Object.create(null),i=(a,o)=>{let l=r[a];if(l==null)r[a]=o;else if(l!=o)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},s=(a,o,l,u,c)=>{var f,d;let h=t[a]||(t[a]=Object.create(null)),p=o.split(/ (?!$)/).map(m=>nVe(m,e));for(let m=1;m<p.length;m++){let S=p.slice(0,m).join(" ");i(S,!0),h[S]||(h[S]={preventDefault:!0,stopPropagation:!1,run:[b=>{let g=dc={view:b,prefix:S,scope:a};return setTimeout(()=>{dc==g&&(dc=null)},sVe),!0}]})}let v=p.join(" ");i(v,!1);let y=h[v]||(h[v]={preventDefault:!1,stopPropagation:!1,run:((d=(f=h._any)===null||f===void 0?void 0:f.run)===null||d===void 0?void 0:d.slice())||[]});l&&y.run.push(l),u&&(y.preventDefault=!0),c&&(y.stopPropagation=!0)};for(let a of n){let o=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let u of o){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=a;for(let d in c)c[d].run.push(h=>f(h,YD))}let l=a[e]||a.key;if(l)for(let u of o)s(u,l,a.run,a.preventDefault,a.stopPropagation),a.shift&&s(u,"Shift-"+l,a.shift,a.preventDefault,a.stopPropagation)}return t}let YD=null;function ZJ(n,e,t,r){YD=e;let i=N7e(e),s=Ti(i,0),a=Ga(s)==i.length&&i!=" ",o="",l=!1,u=!1,c=!1;dc&&dc.view==t&&dc.scope==r&&(o=dc.prefix+" ",LJ.indexOf(e.keyCode)<0&&(u=!0,dc=null));let f=new Set,d=y=>{if(y){for(let m of y.run)if(!f.has(m)&&(f.add(m),m(t)))return y.stopPropagation&&(c=!0),!0;y.preventDefault&&(y.stopPropagation&&(c=!0),u=!0)}return!1},h=n[r],p,v;return h&&(d(h[o+Cb(i,e,!a)])?l=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Tt.windows&&e.ctrlKey&&e.altKey)&&(p=Kc[e.keyCode])&&p!=i?(d(h[o+Cb(p,e,!0)])||e.shiftKey&&(v=L0[e.keyCode])!=i&&v!=p&&d(h[o+Cb(v,e,!1)]))&&(l=!0):a&&e.shiftKey&&d(h[o+Cb(i,e,!0)])&&(l=!0),!l&&d(h._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),YD=null,l}class Dy{constructor(e,t,r,i,s){this.className=e,this.left=t,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=JJ(e);return[new Dy(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return oVe(e,t,r)}}function JJ(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==ur.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function Y9(n,e,t,r){let i=n.coordsAtPos(e,t*2);if(!i)return r;let s=n.dom.getBoundingClientRect(),a=(i.top+i.bottom)/2,o=n.posAtCoords({x:s.left+1,y:a}),l=n.posAtCoords({x:s.right-1,y:a});return o==null||l==null?r:{from:Math.max(r.from,Math.min(o,l)),to:Math.min(r.to,Math.max(o,l))}}function oVe(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),s=n.textDirection==ur.LTR,a=n.contentDOM,o=a.getBoundingClientRect(),l=JJ(n),u=a.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),f=o.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=o.right-(c?parseInt(c.paddingRight):0),h=WD(n,r),p=WD(n,i),v=h.type==Es.Text?h:null,y=p.type==Es.Text?p:null;if(v&&(n.lineWrapping||h.widgetLineBreaks)&&(v=Y9(n,r,1,v)),y&&(n.lineWrapping||p.widgetLineBreaks)&&(y=Y9(n,i,-1,y)),v&&y&&v.from==y.from&&v.to==y.to)return S(b(t.from,t.to,v));{let w=v?b(t.from,null,v):g(h,!1),x=y?b(null,t.to,y):g(p,!0),M=[];return(v||h).to<(y||p).from-(v&&y?1:0)||h.widgetLineBreaks>1&&w.bottom+n.defaultLineHeight/2<x.top?M.push(m(f,w.bottom,d,x.top)):w.bottom<x.top&&n.elementAtHeight((w.bottom+x.top)/2).type==Es.Text&&(w.bottom=x.top=(w.bottom+x.top)/2),S(w).concat(M).concat(S(x))}function m(w,x,M,A){return new Dy(e,w-l.left,x-l.top-.01,M-w,A-x+.01)}function S({top:w,bottom:x,horizontal:M}){let A=[];for(let N=0;N<M.length;N+=2)A.push(m(M[N],w,M[N+1],x));return A}function b(w,x,M){let A=1e9,N=-1e9,C=[];function T(F,B,D,O,$){let L=n.coordsAtPos(F,F==M.to?-2:2),X=n.coordsAtPos(D,D==M.from?2:-2);!L||!X||(A=Math.min(L.top,X.top,A),N=Math.max(L.bottom,X.bottom,N),$==ur.LTR?C.push(s&&B?f:L.left,s&&O?d:X.right):C.push(!s&&O?f:X.left,!s&&B?d:L.right))}let R=w??M.from,U=x??M.to;for(let F of n.visibleRanges)if(F.to>R&&F.from<U)for(let B=Math.max(F.from,R),D=Math.min(F.to,U);;){let O=n.state.doc.lineAt(B);for(let $ of n.bidiSpans(O)){let L=$.from+O.from,X=$.to+O.from;if(L>=D)break;X>B&&T(Math.max(L,B),w==null&&L<=R,Math.min(X,D),x==null&&X>=U,$.dir)}if(B=O.to+1,B>=D)break}return C.length==0&&T(R,w==null,U,x==null,n.textDirection),{top:A,bottom:N,horizontal:C}}function g(w,x){let M=o.top+(x?w.top:w.bottom);return{top:M,bottom:M,horizontal:[]}}}function lVe(n,e){return n.constructor==e.constructor&&n.eq(e)}class uVe{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(bw)!=e.state.facet(bw)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(bw);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!lVe(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const bw=Pt.define();function QJ(n){return[Vr.define(e=>new uVe(e,n)),bw.of(n)]}const eQ=!Tt.ios,z0=Pt.define({combine(n){return Rl(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function cVe(n={}){return[z0.of(n),fVe,dVe,hVe,MJ.of(!0)]}function tQ(n){return n.startState.facet(z0)!=n.state.facet(z0)}const fVe=QJ({above:!0,markers(n){let{state:e}=n,t=e.facet(z0),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||eQ:t.drawRangeCursor){let a=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",o=i.empty?i:it.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Dy.forRange(n,a,o))r.push(l)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=tQ(n);return t&&K9(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){K9(e.state,n)},class:"cm-cursorLayer"});function K9(n,e){e.style.animationDuration=n.facet(z0).cursorBlinkRate+"ms"}const dVe=QJ({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Dy.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||tQ(n)},class:"cm-selectionLayer"}),KD={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};eQ&&(KD[".cm-line"].caretColor=KD[".cm-content"].caretColor="transparent !important");const hVe=jd.highest(bt.theme(KD)),nQ=dn.define({map(n,e){return n==null?null:e.mapPos(n)}}),iv=Bi.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(nQ)?r.value:t,n)}}),pVe=Vr.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(iv);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(iv)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(iv),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let r=n.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-r.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(iv)!=n&&this.view.dispatch({effects:nQ.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function mVe(){return[iv,pVe]}function Z9(n,e,t,r,i){e.lastIndex=0;for(let s=n.iterRange(t,r),a=t,o;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=e.exec(s.value);)i(a+o.index,o)}function gVe(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class vVe{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:s,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(o,l,u,c)=>i(c,u,u+o[0].length,o,l);else if(typeof r=="function")this.addMatch=(o,l,u,c)=>{let f=r(o,l,u);f&&c(u,u+o[0].length,f)};else if(r)this.addMatch=(o,l,u,c)=>c(u,u+o[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=a}createDeco(e){let t=new Xc,r=t.add.bind(t);for(let{from:i,to:s}of gVe(e,this.maxLength))Z9(e.state.doc,this.regexp,i,s,(a,o)=>this.addMatch(o,e,a,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,a,o,l)=>{l>e.view.viewport.from&&o<e.view.viewport.to&&(r=Math.min(o,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let a=Math.max(s.from,r),o=Math.min(s.to,i);if(o>a){let l=e.state.doc.lineAt(a),u=l.to<o?e.state.doc.lineAt(o):l,c=Math.max(s.from,l.from),f=Math.min(s.to,u.to);if(this.boundary){for(;a>l.from;a--)if(this.boundary.test(l.text[a-1-l.from])){c=a;break}for(;o<u.to;o++)if(this.boundary.test(u.text[o-u.from])){f=o;break}}let d=[],h,p=(v,y,m)=>d.push(m.range(v,y));if(l==u)for(this.regexp.lastIndex=c-l.from;(h=this.regexp.exec(l.text))&&h.index<f-l.from;)this.addMatch(h,e,h.index+l.from,p);else Z9(e.state.doc,this.regexp,c,f,(v,y)=>this.addMatch(y,e,v,p));t=t.update({filterFrom:c,filterTo:f,filter:(v,y)=>v<c||y>f,add:d})}}return t}}const ZD=/x/.unicode!=null?"gu":"g",yVe=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,ZD),xVe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let pA=null;function bVe(){var n;if(pA==null&&typeof document<"u"&&document.body){let e=document.body.style;pA=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return pA||!1}const ww=Pt.define({combine(n){let e=Rl(n,{render:null,specialChars:yVe,addSpecialChars:null});return(e.replaceTabs=!bVe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,ZD)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,ZD)),e}});function wVe(n={}){return[ww.of(n),SVe()]}let J9=null;function SVe(){return J9||(J9=Vr.fromClass(class{constructor(n){this.view=n,this.decorations=zt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(ww)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new vVe({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=Ti(e[0],0);if(s==9){let a=i.lineAt(r),o=t.state.tabSize,l=$m(a.text,o,r-a.from);return zt.replace({widget:new CVe((o-l%o)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=zt.replace({widget:new MVe(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(ww);n.startState.facet(ww)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const _Ve="•";function EVe(n){return n>=32?_Ve:n==10?"␤":String.fromCharCode(9216+n)}class MVe extends Lu{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=EVe(this.code),r=e.state.phrase("Control character")+" "+(xVe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class CVe extends Lu{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function AVe(){return DVe}const TVe=zt.line({class:"cm-activeLine"}),DVe=Vr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(TVe.range(i.from)),e=i.from)}return zt.set(t)}},{decorations:n=>n.decorations});class NVe extends Lu{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?am(e.firstChild):[];if(!t.length)return null;let r=window.getComputedStyle(e.parentNode),i=jE(t[0],r.direction!="rtl"),s=parseInt(r.lineHeight);return i.bottom-i.top>s*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}}function PVe(n){return Vr.fromClass(class{constructor(e){this.view=e,this.placeholder=n?zt.set([zt.widget({widget:new NVe(n),side:1}).range(0)]):zt.none}get decorations(){return this.view.state.doc.length?zt.none:this.placeholder}},{decorations:e=>e.decorations})}const JD=2e3;function RVe(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),s=[];if(e.off>JD||t.off>JD||e.col<0||t.col<0){let a=Math.min(e.off,t.off),o=Math.max(e.off,t.off);for(let l=r;l<=i;l++){let u=n.doc.line(l);u.length<=o&&s.push(it.range(u.from+a,u.to+o))}}else{let a=Math.min(e.col,t.col),o=Math.max(e.col,t.col);for(let l=r;l<=i;l++){let u=n.doc.line(l),c=DD(u.text,a,n.tabSize,!0);if(c<0)s.push(it.cursor(u.to));else{let f=DD(u.text,o,n.tabSize);s.push(it.range(u.from+c,u.from+f))}}}return s}function OVe(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function Q9(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,s=i>JD?-1:i==r.length?OVe(n,e.clientX):$m(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:s,off:i}}function IVe(n,e){let t=Q9(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(t.line).from),a=i.state.doc.lineAt(s);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},r=r.map(i.changes)}},get(i,s,a){let o=Q9(n,i);if(!o)return r;let l=RVe(n.state,t,o);return l.length?a?it.create(l.concat(r.ranges)):it.create(l):r}}:null}function kVe(n){let e=t=>t.altKey&&t.button==0;return bt.mouseSelectionStyle.of((t,r)=>e(r)?IVe(t,r):null)}const LVe={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},FVe={style:"cursor: crosshair"};function BVe(n={}){let[e,t]=LVe[n.key||"Alt"],r=Vr.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,bt.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?FVe:null})]}const Ug="-10000px";class rQ{constructor(e,t,r,i){this.facet=t,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(a=>a);let s=null;this.tooltipViews=this.tooltips.map(a=>s=r(a,s))}update(e,t){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let a=[],o=t?[]:null;for(let l=0;l<s.length;l++){let u=s[l],c=-1;if(u){for(let f=0;f<this.tooltips.length;f++){let d=this.tooltips[f];d&&d.create==u.create&&(c=f)}if(c<0)a[l]=this.createTooltipView(u,l?a[l-1]:null),o&&(o[l]=!!u.above);else{let f=a[l]=this.tooltipViews[c];o&&(o[l]=t[c]),f.update&&f.update(e)}}}for(let l of this.tooltipViews)a.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return t&&(o.forEach((l,u)=>t[u]=l),t.length=o.length),this.input=i,this.tooltips=s,this.tooltipViews=a,!0}}function zVe(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const mA=Pt.define({combine:n=>{var e,t,r;return{position:Tt.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||zVe}}}),e7=new WeakMap,bO=Vr.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(mA);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new rQ(n,wO,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(mA);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Ug,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect(),e=1,t=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(Tt.gecko)r=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==Ug&&i.style.left=="0px"){let s=i.getBoundingClientRect();r=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(r||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,t=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((i,s)=>{let a=this.manager.tooltipViews[s];return a.getCoords?a.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(mA).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:r}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let o of this.manager.tooltipViews)o.dom.style.position="absolute"}let{editor:t,space:r,scaleX:i,scaleY:s}=n,a=[];for(let o=0;o<this.manager.tooltips.length;o++){let l=this.manager.tooltips[o],u=this.manager.tooltipViews[o],{dom:c}=u,f=n.pos[o],d=n.size[o];if(!f||f.bottom<=Math.max(t.top,r.top)||f.top>=Math.min(t.bottom,r.bottom)||f.right<Math.max(t.left,r.left)-.1||f.left>Math.min(t.right,r.right)+.1){c.style.top=Ug;continue}let h=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=h?7:0,v=d.right-d.left,y=(e=e7.get(u))!==null&&e!==void 0?e:d.bottom-d.top,m=u.offset||$Ve,S=this.view.textDirection==ur.LTR,b=d.width>r.right-r.left?S?r.left:r.right-d.width:S?Math.min(f.left-(h?14:0)+m.x,r.right-v):Math.max(r.left,f.left-v+(h?14:0)-m.x),g=this.above[o];!l.strictSide&&(g?f.top-(d.bottom-d.top)-m.y<r.top:f.bottom+(d.bottom-d.top)+m.y>r.bottom)&&g==r.bottom-f.bottom>f.top-r.top&&(g=this.above[o]=!g);let w=(g?f.top-r.top:r.bottom-f.bottom)-p;if(w<y&&u.resize!==!1){if(w<this.view.defaultLineHeight){c.style.top=Ug;continue}e7.set(u,y),c.style.height=(y=w)/s+"px"}else c.style.height&&(c.style.height="");let x=g?f.top-y-p-m.y:f.bottom+p+m.y,M=b+v;if(u.overlap!==!0)for(let A of a)A.left<M&&A.right>b&&A.top<x+y&&A.bottom>x&&(x=g?A.top-y-2-p:A.bottom+p+2);if(this.position=="absolute"?(c.style.top=(x-n.parent.top)/s+"px",c.style.left=(b-n.parent.left)/i+"px"):(c.style.top=x/s+"px",c.style.left=b/i+"px"),h){let A=f.left+(S?m.x:-m.x)-(b+14-7);h.style.left=A/i+"px"}u.overlap!==!0&&a.push({left:b,top:x,right:M,bottom:x+y}),c.classList.toggle("cm-tooltip-above",g),c.classList.toggle("cm-tooltip-below",!g),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Ug}},{eventObservers:{scroll(){this.maybeMeasure()}}}),UVe=bt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),$Ve={x:0,y:0},wO=Pt.define({enables:[bO,UVe]}),e_=Pt.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class YE{static create(e){return new YE(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new rQ(e,e_,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const VVe=wO.compute([e_],n=>{let e=n.facet(e_);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:YE.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class HVe{constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,s=1;if(r instanceof bc)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let o=e.coordsAtPos(i);if(!o||t.y<o.top||t.y>o.bottom||t.x<o.left-e.defaultCharacterWidth||t.x>o.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=l&&l.dir==ur.RTL?-1:1;s=t.x<o.left?-u:u}let a=this.source(e,i,s);if(a!=null&&a.then){let o=this.pending={pos:i};a.then(l=>{this.pending==o&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Ws(e.state,l,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(bO),t=e?e.manager.tooltips.findIndex(r=>r.create==YE.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!WVe(s.dom,e)||this.pending){let{pos:a}=i[0]||this.pending,o=(r=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:a;(a==o?this.view.posAtCoords(this.lastMove)!=a:!GVe(this.view,a,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Ab=4;function WVe(n,e){let t=n.getBoundingClientRect();return e.clientX>=t.left-Ab&&e.clientX<=t.right+Ab&&e.clientY>=t.top-Ab&&e.clientY<=t.bottom+Ab}function GVe(n,e,t,r,i,s){let a=n.scrollDOM.getBoundingClientRect(),o=n.documentTop+n.documentPadding.top+n.contentHeight;if(a.left>r||a.right<r||a.top>i||Math.min(a.bottom,o)<i)return!1;let l=n.posAtCoords({x:r,y:i},!1);return l>=e&&l<=t}function jVe(n,e={}){let t=dn.define(),r=Bi.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(a=>!e.hideOn(s,a))),s.docChanged)){let a=[];for(let o of i){let l=s.changes.mapPos(o.pos,-1,ys.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),o);u.pos=l,u.end!=null&&(u.end=s.changes.mapPos(u.end)),a.push(u)}}i=a}for(let a of s.effects)a.is(t)&&(i=a.value),a.is(qVe)&&(i=[]);return i},provide:i=>e_.from(i)});return[r,Vr.define(i=>new HVe(i,n,r,t,e.hoverTime||300)),VVe]}function iQ(n,e){let t=n.plugin(bO);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const qVe=dn.define(),t7=Pt.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function U0(n,e){let t=n.plugin(sQ),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const sQ=Vr.fromClass(class{constructor(n){this.input=n.state.facet($0),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(t7);this.top=new Tb(n,!0,e.topContainer),this.bottom=new Tb(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(t7);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Tb(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Tb(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet($0);if(t!=this.input){let r=t.filter(l=>l),i=[],s=[],a=[],o=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(n.view),o.push(c)):(c=this.panels[u],c.update&&c.update(n)),i.push(c),(c.top?s:a).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(a);for(let l of o)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>bt.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Tb{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=n7(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=n7(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function n7(n){let e=n.nextSibling;return n.remove(),e}const $0=Pt.define({enables:sQ});class Pu extends Td{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Pu.prototype.elementClass="";Pu.prototype.toDOM=void 0;Pu.prototype.mapMode=ys.TrackBefore;Pu.prototype.startSide=Pu.prototype.endSide=-1;Pu.prototype.point=!0;const Sw=Pt.define(),XVe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Cn.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Tv=Pt.define();function YVe(n){return[aQ(),Tv.of(Object.assign(Object.assign({},XVe),n))]}const r7=Pt.define({combine:n=>n.some(e=>e)});function aQ(n){return[KVe]}const KVe=Vr.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(Tv).map(e=>new s7(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(r7),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(r7)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Cn.iter(this.view.state.facet(Sw),this.view.viewport.from),r=[],i=this.gutters.map(s=>new ZVe(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let a=!0;for(let o of s.type)if(o.type==Es.Text&&a){QD(t,r,o.from);for(let l of i)l.line(this.view,o,r);a=!1}else if(o.widget)for(let l of i)l.widget(this.view,o)}else if(s.type==Es.Text){QD(t,r,s.from);for(let a of i)a.line(this.view,s,r)}else if(s.widget)for(let a of i)a.widget(this.view,s);for(let s of i)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Tv),t=n.state.facet(Tv),r=n.docChanged||n.heightChanged||n.viewportChanged||!Cn.eq(n.startState.facet(Sw),n.state.facet(Sw),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let a=e.indexOf(s);a<0?i.push(new s7(this.view,s)):(this.gutters[a].update(n),i.push(this.gutters[a]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>bt.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==ur.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function i7(n){return Array.isArray(n)?n:[n]}function QD(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class ZVe{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Cn.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,s=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==i.elements.length){let o=new oQ(e,a,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,a,s,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];QD(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let a=this.gutter;i.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t);r&&this.addElement(e,t,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class s7{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,a;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();a=(l.top+l.bottom)/2}else a=i.clientY;let o=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=i7(t.markers(e)),t.initialSpacer&&(this.spacer=new oQ(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=i7(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Cn.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class oQ{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),JVe(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,a=0;;){let o=a,l=s<t.length?t[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let f=a;f<this.markers.length;f++)if(this.markers[f].compare(l)){o=f,u=!0;break}}else o=this.markers.length;for(;a<o;){let c=this.markers[a++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&a++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function JVe(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const QVe=Pt.define(),gp=Pt.define({combine(n){return Rl(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],a=t[i];r[i]=s?(o,l,u)=>s(o,l,u)||a(o,l,u):a}return r}})}});class gA extends Pu{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function vA(n,e){return n.state.facet(gp).formatNumber(e,n.state)}const eHe=Tv.compute([gp],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(QVe)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new gA(vA(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(gp)!=e.state.facet(gp),initialSpacer(e){return new gA(vA(e,a7(e.state.doc.lines)))},updateSpacer(e,t){let r=vA(t.view,a7(t.view.state.doc.lines));return r==e.number?e:new gA(r)},domEventHandlers:n.facet(gp).domEventHandlers}));function tHe(n={}){return[gp.of(n),aQ(),eHe]}function a7(n){let e=9;for(;e<n;)e=e*10+9;return e}const nHe=new class extends Pu{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},rHe=Sw.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(nHe.range(i)))}return Cn.of(e)});function iHe(){return rHe}const sHe=1024;let aHe=0;class yA{constructor(e,t){this.from=e,this.to=t}}class Sn{constructor(e={}){this.id=aHe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=io.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Sn.closedBy=new Sn({deserialize:n=>n.split(" ")});Sn.openedBy=new Sn({deserialize:n=>n.split(" ")});Sn.group=new Sn({deserialize:n=>n.split(" ")});Sn.isolate=new Sn({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Sn.contextHash=new Sn({perNode:!0});Sn.lookAhead=new Sn({perNode:!0});Sn.mounted=new Sn({perNode:!0});class t_{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Sn.mounted.id]}}const oHe=Object.create(null);class io{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):oHe,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new io(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Sn.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(Sn.group),s=-1;s<(i?i.length:0);s++){let a=t[s<0?r.name:i[s]];if(a)return a}}}}io.none=new io("",Object.create(null),0,8);const Db=new WeakMap,o7=new WeakMap;var Ni;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Ni||(Ni={}));class es{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,o]of s)this.props[typeof a=="number"?a:a.id]=o}}toString(){let e=t_.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new tN(this.topNode,e)}cursorAt(e,t=0,r=0){let i=Db.get(this)||this.topNode,s=new tN(i);return s.moveTo(e,t),Db.set(this,s._tree),s}get topNode(){return new Ja(this,0,0,null)}resolve(e,t=0){let r=V0(Db.get(this)||this.topNode,e,t,!1);return Db.set(this,r),r}resolveInner(e,t=0){let r=V0(o7.get(this)||this.topNode,e,t,!0);return o7.set(this,r),r}resolveStack(e,t=0){return cHe(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,a=e.mode||0,o=(a&Ni.IncludeAnonymous)>0;for(let l=this.cursor(a|Ni.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=i&&(!o&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(o||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:EO(io.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new es(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new es(io.none,t,r,i)))}static build(e){return fHe(e)}}es.empty=new es(io.none,[],[],0);class SO{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new SO(this.buffer,this.index)}}class Jc{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return io.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return s+"("+a.join(",")+")"}findChild(e,t,r,i,s){let{buffer:a}=this,o=-1;for(let l=e;l!=t&&!(lQ(s,i,a[l+1],a[l+2])&&(o=l,r>0));l=a[l+3]);return o}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),a=0;for(let o=e,l=0;o<t;){s[l++]=i[o++],s[l++]=i[o++]-r;let u=s[l++]=i[o++]-r;s[l++]=i[o++]-e,a=Math.max(a,u)}return new Jc(s,a,this.set)}}function lQ(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function V0(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!r&&n instanceof Ja&&n.index<0?null:n.parent;if(!a)return n;n=a}let s=r?0:Ni.IgnoreOverlays;if(r)for(let a=n,o=a.parent;o;a=o,o=a.parent)a instanceof Ja&&a.index<0&&((i=o.enter(e,t,s))===null||i===void 0?void 0:i.from)!=a.from&&(n=o);for(;;){let a=n.enter(e,t,s);if(!a)return n;n=a}}class uQ{cursor(e=0){return new tN(this,e)}getChild(e,t=null,r=null){let i=l7(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return l7(this,e,t,r)}resolve(e,t=0){return V0(this,e,t,!1)}resolveInner(e,t=0){return V0(this,e,t,!0)}matchContext(e){return eN(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class Ja extends uQ{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let a=this;;){for(let{children:o,positions:l}=a._tree,u=t>0?o.length:-1;e!=u;e+=t){let c=o[e],f=l[e]+a.from;if(lQ(i,r,f,f+c.length)){if(c instanceof Jc){if(s&Ni.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,t,r-f,i);if(d>-1)return new Sc(new lHe(a,c,e,f),null,d)}else if(s&Ni.IncludeAnonymous||!c.type.isAnonymous||_O(c)){let d;if(!(s&Ni.IgnoreMounts)&&(d=t_.get(c))&&!d.overlay)return new Ja(d.tree,f,e,a);let h=new Ja(c,f,e,a);return s&Ni.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(t<0?c.children.length-1:0,t,r,i)}}}if(s&Ni.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&Ni.IgnoreOverlays)&&(i=t_.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:a,to:o}of i.overlay)if((t>0?a<=s:a<s)&&(t<0?o>=s:o>s))return new Ja(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function l7(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let a=!1;!a;)if(a=i.type.is(t),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function eN(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class lHe{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class Sc extends uQ{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new Sc(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&Ni.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Sc(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Sc(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Sc(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let a=r.buffer[this.index+1];e.push(r.slice(i,s,a)),t.push(0)}return new es(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function cQ(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let a=n[s];(a.from>t.from||a.to<t.to)&&(t=a,e=s)}let r=t instanceof Ja&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new uHe(i,t)}class uHe{constructor(e,t){this.heads=e,this.node=t}get next(){return cQ(this.heads)}}function cHe(n,e,t){let r=n.resolveInner(e,t),i=null;for(let s=r instanceof Ja?r:r.context.parent;s;s=s.parent)if(s.index<0){let a=s.parent;(i||(i=[r])).push(a.resolve(e,t)),s=a}else{let a=t_.get(s.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let o=new Ja(a.tree,a.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(V0(o,e,t,!1))}}return i?cQ(i):r}class tN{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ja)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Ja?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&Ni.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ni.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ni.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,a=e<0?-1:r._tree.children.length;s!=a;s+=e){let o=r._tree.children[s];if(this.mode&Ni.IncludeAnonymous||o instanceof Jc||!o.type.isAnonymous||_O(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let a=e;a;a=a._parent)if(a.index==i){if(i==this.index)return a;t=a,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new Sc(this.buffer,t,this.stack[i]);return this.bufferNode=new Sc(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return eN(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return eN(this.node,e,i);let a=r[t.buffer[this.stack[s]]];if(!a.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}}function _O(n){return n.children.some(e=>e instanceof Jc||!e.type.isAnonymous||_O(e))}function fHe(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=sHe,reused:s=[],minRepeatType:a=r.types.length}=n,o=Array.isArray(t)?new SO(t,t.length):t,l=r.types,u=0,c=0;function f(w,x,M,A,N,C){let{id:T,start:R,end:U,size:F}=o,B=c;for(;F<0;)if(o.next(),F==-1){let X=s[T];M.push(X),A.push(R-w);return}else if(F==-3){u=T;return}else if(F==-4){c=T;return}else throw new RangeError(`Unrecognized record size: ${F}`);let D=l[T],O,$,L=R-w;if(U-R<=i&&($=y(o.pos-x,N))){let X=new Uint16Array($.size-$.skip),Z=o.pos-$.size,Q=X.length;for(;o.pos>Z;)Q=m($.start,X,Q);O=new Jc(X,U-$.start,r),L=$.start-w}else{let X=o.pos-F;o.next();let Z=[],Q=[],K=T>=a?T:-1,re=0,ce=U;for(;o.pos>X;)K>=0&&o.id==K&&o.size>=0?(o.end<=ce-i&&(p(Z,Q,R,re,o.end,ce,K,B),re=Z.length,ce=o.end),o.next()):C>2500?d(R,X,Z,Q):f(R,X,Z,Q,K,C+1);if(K>=0&&re>0&&re<Z.length&&p(Z,Q,R,re,R,ce,K,B),Z.reverse(),Q.reverse(),K>-1&&re>0){let ue=h(D);O=EO(D,Z,Q,0,Z.length,0,U-R,ue,ue)}else O=v(D,Z,Q,U-R,B-U)}M.push(O),A.push(L)}function d(w,x,M,A){let N=[],C=0,T=-1;for(;o.pos>x;){let{id:R,start:U,end:F,size:B}=o;if(B>4)o.next();else{if(T>-1&&U<T)break;T<0&&(T=F-i),N.push(R,U,F),C++,o.next()}}if(C){let R=new Uint16Array(C*4),U=N[N.length-2];for(let F=N.length-3,B=0;F>=0;F-=3)R[B++]=N[F],R[B++]=N[F+1]-U,R[B++]=N[F+2]-U,R[B++]=B;M.push(new Jc(R,N[2]-U,r)),A.push(U-w)}}function h(w){return(x,M,A)=>{let N=0,C=x.length-1,T,R;if(C>=0&&(T=x[C])instanceof es){if(!C&&T.type==w&&T.length==A)return T;(R=T.prop(Sn.lookAhead))&&(N=M[C]+T.length+R)}return v(w,x,M,A,N)}}function p(w,x,M,A,N,C,T,R){let U=[],F=[];for(;w.length>A;)U.push(w.pop()),F.push(x.pop()+M-N);w.push(v(r.types[T],U,F,C-N,R-C)),x.push(N-M)}function v(w,x,M,A,N=0,C){if(u){let T=[Sn.contextHash,u];C=C?[T].concat(C):[T]}if(N>25){let T=[Sn.lookAhead,N];C=C?[T].concat(C):[T]}return new es(w,x,M,A,C)}function y(w,x){let M=o.fork(),A=0,N=0,C=0,T=M.end-i,R={size:0,start:0,skip:0};e:for(let U=M.pos-w;M.pos>U;){let F=M.size;if(M.id==x&&F>=0){R.size=A,R.start=N,R.skip=C,C+=4,A+=4,M.next();continue}let B=M.pos-F;if(F<0||B<U||M.start<T)break;let D=M.id>=a?4:0,O=M.start;for(M.next();M.pos>B;){if(M.size<0)if(M.size==-3)D+=4;else break e;else M.id>=a&&(D+=4);M.next()}N=O,A+=F,C+=D}return(x<0||A==w)&&(R.size=A,R.start=N,R.skip=C),R.size>4?R:void 0}function m(w,x,M){let{id:A,start:N,end:C,size:T}=o;if(o.next(),T>=0&&A<a){let R=M;if(T>4){let U=o.pos-(T-4);for(;o.pos>U;)M=m(w,x,M)}x[--M]=R,x[--M]=C-w,x[--M]=N-w,x[--M]=A}else T==-3?u=A:T==-4&&(c=A);return M}let S=[],b=[];for(;o.pos>0;)f(n.start||0,n.bufferStart||0,S,b,-1,0);let g=(e=n.length)!==null&&e!==void 0?e:S.length?b[0]+S[0].length:0;return new es(l[n.topID],S.reverse(),b.reverse(),g)}const u7=new WeakMap;function _w(n,e){if(!n.isAnonymous||e instanceof Jc||e.type!=n)return 1;let t=u7.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof es)){t=1;break}t+=_w(n,r)}u7.set(e,t)}return t}function EO(n,e,t,r,i,s,a,o,l){let u=0;for(let p=r;p<i;p++)u+=_w(n,e[p]);let c=Math.ceil(u*1.5/8),f=[],d=[];function h(p,v,y,m,S){for(let b=y;b<m;){let g=b,w=v[b],x=_w(n,p[b]);for(b++;b<m;b++){let M=_w(n,p[b]);if(x+M>=c)break;x+=M}if(b==g+1){if(x>c){let M=p[g];h(M.children,M.positions,0,M.children.length,v[g]+S);continue}f.push(p[g])}else{let M=v[b-1]+p[b-1].length-w;f.push(EO(n,p,v,g,b,w,M,null,l))}d.push(w+S-s)}}return h(e,t,r,i,0),(o||l)(f,d,a)}class pd{constructor(e,t,r,i,s=!1,a=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new pd(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,a=e.length?e[0]:null;for(let o=0,l=0,u=0;;o++){let c=o<t.length?t[o]:null,f=c?c.fromA:1e9;if(f-l>=r)for(;a&&a.from<f;){let d=a;if(l>=d.from||f<=d.to||u){let h=Math.max(d.from,l)-u,p=Math.min(d.to,f)-u;d=h>=p?null:new pd(h,p,d.tree,d.offset+u,o>0,!!c)}if(d&&i.push(d),a.to>f)break;a=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}class dHe{startParse(e,t,r){return typeof e=="string"&&(e=new hHe(e)),r=r?r.length?r.map(i=>new yA(i.from,i.to)):[new yA(0,0)]:[new yA(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class hHe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Sn({perNode:!0});let pHe=0;class il{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=pHe++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new il([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new n_;return t=>t.modified.indexOf(e)>-1?t:n_.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let mHe=0;class n_{constructor(){this.instances=[],this.id=mHe++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(o=>o.base==e&&gHe(t,o.modified));if(r)return r;let i=[],s=new il(i,e,t);for(let o of t)o.instances.push(s);let a=vHe(t);for(let o of e.set)if(!o.modified.length)for(let l of a)i.push(n_.get(o,l));return s}}function gHe(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function vHe(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function yHe(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],a=2,o=i;for(let f=0;;){if(o=="..."&&f>0&&f+3==i.length){a=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!d)throw new RangeError("Invalid path: "+i);if(s.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),f+=d[0].length,f==i.length)break;let h=i[f++];if(f==i.length&&h=="!"){a=0;break}if(h!="/")throw new RangeError("Invalid path: "+i);o=i.slice(f)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new r_(r,a,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return fQ.add(e)}const fQ=new Sn;class r_{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}r_.empty=new r_([],2,null);function dQ(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let a of s.tag)t[a.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let a=i;for(let o of s)for(let l of o.set){let u=t[l.id];if(u){a=a?a+" "+u:u;break}}return a},scope:r}}function xHe(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function bHe(n,e,t,r=0,i=n.length){let s=new wHe(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class wHe{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:a,from:o,to:l}=e;if(o>=r||l<=t)return;a.isTop&&(s=this.highlighters.filter(h=>!h.scope||h.scope(a)));let u=i,c=SHe(e)||r_.empty,f=xHe(s,c.tags);if(f&&(u&&(u+=" "),u+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(t,o),u),c.opaque)return;let d=e.tree&&e.tree.prop(Sn.mounted);if(d&&d.overlay){let h=e.node.enter(d.overlay[0].from+o,1),p=this.highlighters.filter(y=>!y.scope||y.scope(d.tree.type)),v=e.firstChild();for(let y=0,m=o;;y++){let S=y<d.overlay.length?d.overlay[y]:null,b=S?S.from+o:l,g=Math.max(t,m),w=Math.min(r,b);if(g<w&&v)for(;e.from<w&&(this.highlightRange(e,g,w,i,s),this.startSpan(Math.min(w,e.to),u),!(e.to>=b||!e.nextSibling())););if(!S||b>r)break;m=S.to+o,m>t&&(this.highlightRange(h.cursor(),Math.max(t,S.from+o),Math.min(r,m),"",p),this.startSpan(Math.min(r,m),u))}v&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function SHe(n){let e=n.type.prop(fQ);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const pt=il.define,Nb=pt(),oc=pt(),c7=pt(oc),f7=pt(oc),lc=pt(),Pb=pt(lc),xA=pt(lc),el=pt(),Rf=pt(el),Jo=pt(),Qo=pt(),nN=pt(),$g=pt(nN),Rb=pt(),nt={comment:Nb,lineComment:pt(Nb),blockComment:pt(Nb),docComment:pt(Nb),name:oc,variableName:pt(oc),typeName:c7,tagName:pt(c7),propertyName:f7,attributeName:pt(f7),className:pt(oc),labelName:pt(oc),namespace:pt(oc),macroName:pt(oc),literal:lc,string:Pb,docString:pt(Pb),character:pt(Pb),attributeValue:pt(Pb),number:xA,integer:pt(xA),float:pt(xA),bool:pt(lc),regexp:pt(lc),escape:pt(lc),color:pt(lc),url:pt(lc),keyword:Jo,self:pt(Jo),null:pt(Jo),atom:pt(Jo),unit:pt(Jo),modifier:pt(Jo),operatorKeyword:pt(Jo),controlKeyword:pt(Jo),definitionKeyword:pt(Jo),moduleKeyword:pt(Jo),operator:Qo,derefOperator:pt(Qo),arithmeticOperator:pt(Qo),logicOperator:pt(Qo),bitwiseOperator:pt(Qo),compareOperator:pt(Qo),updateOperator:pt(Qo),definitionOperator:pt(Qo),typeOperator:pt(Qo),controlOperator:pt(Qo),punctuation:nN,separator:pt(nN),bracket:$g,angleBracket:pt($g),squareBracket:pt($g),paren:pt($g),brace:pt($g),content:el,heading:Rf,heading1:pt(Rf),heading2:pt(Rf),heading3:pt(Rf),heading4:pt(Rf),heading5:pt(Rf),heading6:pt(Rf),contentSeparator:pt(el),list:pt(el),quote:pt(el),emphasis:pt(el),strong:pt(el),link:pt(el),monospace:pt(el),strikethrough:pt(el),inserted:pt(),deleted:pt(),changed:pt(),invalid:pt(),meta:Rb,documentMeta:pt(Rb),annotation:pt(Rb),processingInstruction:pt(Rb),definition:il.defineModifier(),constant:il.defineModifier(),function:il.defineModifier(),standard:il.defineModifier(),local:il.defineModifier(),special:il.defineModifier()};dQ([{tag:nt.link,class:"tok-link"},{tag:nt.heading,class:"tok-heading"},{tag:nt.emphasis,class:"tok-emphasis"},{tag:nt.strong,class:"tok-strong"},{tag:nt.keyword,class:"tok-keyword"},{tag:nt.atom,class:"tok-atom"},{tag:nt.bool,class:"tok-bool"},{tag:nt.url,class:"tok-url"},{tag:nt.labelName,class:"tok-labelName"},{tag:nt.inserted,class:"tok-inserted"},{tag:nt.deleted,class:"tok-deleted"},{tag:nt.literal,class:"tok-literal"},{tag:nt.string,class:"tok-string"},{tag:nt.number,class:"tok-number"},{tag:[nt.regexp,nt.escape,nt.special(nt.string)],class:"tok-string2"},{tag:nt.variableName,class:"tok-variableName"},{tag:nt.local(nt.variableName),class:"tok-variableName tok-local"},{tag:nt.definition(nt.variableName),class:"tok-variableName tok-definition"},{tag:nt.special(nt.variableName),class:"tok-variableName2"},{tag:nt.definition(nt.propertyName),class:"tok-propertyName tok-definition"},{tag:nt.typeName,class:"tok-typeName"},{tag:nt.namespace,class:"tok-namespace"},{tag:nt.className,class:"tok-className"},{tag:nt.macroName,class:"tok-macroName"},{tag:nt.propertyName,class:"tok-propertyName"},{tag:nt.operator,class:"tok-operator"},{tag:nt.comment,class:"tok-comment"},{tag:nt.meta,class:"tok-meta"},{tag:nt.invalid,class:"tok-invalid"},{tag:nt.punctuation,class:"tok-punctuation"}]);var bA;const sv=new Sn,_He=new Sn;class fl{constructor(e,t,r=[],i=""){this.data=e,this.name=i,bn.prototype.hasOwnProperty("tree")||Object.defineProperty(bn.prototype,"tree",{get(){return is(this)}}),this.parser=t,this.extension=[Qc.of(this),bn.languageData.of((s,a,o)=>{let l=d7(s,a,o),u=l.type.prop(sv);if(!u)return[];let c=s.facet(u),f=l.type.prop(_He);if(f){let d=l.resolve(a-l.from,o);for(let h of f)if(h.test(d,s)){let p=s.facet(h.facet);return h.type=="replace"?p:p.concat(c)}}return c})].concat(r)}isActiveAt(e,t,r=-1){return d7(e,t,r).type.prop(sv)==this.data}findRegions(e){let t=e.facet(Qc);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,a)=>{if(s.prop(sv)==this.data){r.push({from:a,to:a+s.length});return}let o=s.prop(Sn.mounted);if(o){if(o.tree.prop(sv)==this.data){if(o.overlay)for(let l of o.overlay)r.push({from:l.from+a,to:l.to+a});else r.push({from:a,to:a+s.length});return}else if(o.overlay){let l=r.length;if(i(o.tree,o.overlay[0].from+a),r.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof es&&i(u,s.positions[l]+a)}};return i(is(e),0),r}get allowsNesting(){return!0}}fl.setState=dn.define();function d7(n,e,t){let r=n.facet(Qc),i=is(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,Ni.ExcludeBuffers))s.type.isTop&&(i=s);return i}function is(n){let e=n.field(fl.state,!1);return e?e.tree:es.empty}class EHe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let Vg=null;class i_{constructor(e,t,r=[],i,s,a,o,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=a,this.skipped=o,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new i_(e,t,[],es.empty,0,r,[],null)}startParse(){return this.parser.startParse(new EHe(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=es.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(pd.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(pd.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Vg;Vg=this;try{return e()}finally{Vg=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=h7(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:a,skipped:o}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,f,d)=>l.push({fromA:u,toA:c,fromB:f,toB:d})),r=pd.applyChanges(r,l),i=es.empty,s=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&o.push({from:c,to:f})}}}return new i_(this.parser,t,r,i,s,a,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=h7(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends dHe{createParse(t,r,i){let s=i[0].from,a=i[i.length-1].to;return{parsedPos:s,advance(){let l=Vg;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=a,new es(io.none,[],[],a-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Vg}}function h7(n,e,t){return pd.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class um{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new um(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=i_.create(e.facet(Qc).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new um(r)}}fl.state=Bi.define({create:um.init,update(n,e){for(let t of e.effects)if(t.is(fl.setState))return t.value;return e.startState.facet(Qc)!=e.state.facet(Qc)?um.init(e.state):n.apply(e)}});let hQ=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(hQ=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const wA=typeof navigator<"u"&&(!((bA=navigator.scheduling)===null||bA===void 0)&&bA.isInputPending)?()=>navigator.scheduling.isInputPending():null,MHe=Vr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(fl.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(fl.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=hQ(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(fl.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!wA?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>wA&&wA()||Date.now()>a,i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:fl.setState.of(new um(s.context))})),this.chunkBudget>0&&!(l&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Ws(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Qc=Pt.define({combine(n){return n.length?n[0]:null},enables:n=>[fl.state,MHe,bt.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]}),CHe=Pt.define(),KE=Pt.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function s_(n){let e=n.facet(KE);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function H0(n,e){let t="",r=n.tabSize,i=n.facet(KE)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function MO(n,e){n instanceof bn&&(n=new ZE(n));for(let r of n.state.facet(CHe)){let i=r(n,e);if(i!==void 0)return i}let t=is(n.state);return t.length>=e?THe(n,t,e):null}class ZE{constructor(e,t={}){this.state=e,this.options=t,this.unit=s_(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),a=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return a>-1&&(s+=a-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return $m(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let a=s(i);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const AHe=new Sn;function THe(n,e,t){let r=e.resolveStack(t),i=r.node.enterUnfinishedNodesBefore(t);if(i!=r.node){let s=[];for(let a=i;a!=r.node;a=a.parent)s.push(a);for(let a=s.length-1;a>=0;a--)r={node:s[a],next:r}}return pQ(r,n,t)}function pQ(n,e,t){for(let r=n;r;r=r.next){let i=NHe(r.node);if(i)return i(CO.create(e,t,r))}return 0}function DHe(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function NHe(n){let e=n.type.prop(AHe);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Sn.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return a=>IHe(a,!0,1,void 0,s&&!DHe(a)?i.from:void 0)}return n.parent==null?PHe:null}function PHe(){return 0}class CO extends ZE{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new CO(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(RHe(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return pQ(this.context.next,this.base,this.pos)}}function RHe(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function OHe(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),a=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=t.to;;){let l=e.childAfter(o);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<a?t:null;o=l.to}}function IHe(n,e,t,r,i){let s=n.textAfter,a=s.match(/^\s*/)[0].length,o=i==n.pos+a,l=OHe(n);return l?o?n.column(l.from):n.column(l.to):n.baseIndent+(o?0:n.unit*t)}const kHe=200;function LHe(){return bn.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+kHe)return n;let s=t.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return n;let{state:a}=n,o=-1,l=[];for(let{head:u}of a.selection.ranges){let c=a.doc.lineAt(u);if(c.from==o)continue;o=c.from;let f=MO(a,c.from);if(f==null)continue;let d=/^\s*/.exec(c.text)[0],h=H0(a,f);d!=h&&l.push({from:c.from,to:c.from+d.length,insert:h})}return l.length?[n,{changes:l,sequential:!0}]:n})}const FHe=Pt.define(),BHe=new Sn;function zHe(n,e,t){let r=is(n);if(r.length<t)return null;let i=r.resolveStack(t,1),s=null;for(let a=i;a;a=a.next){let o=a.node;if(o.to<=t||o.from>t)continue;if(s&&o.from<e)break;let l=o.type.prop(BHe);if(l&&(o.to<r.length-50||r.length==n.doc.length||!UHe(o))){let u=l(o,n);u&&u.from<=t&&u.from>=e&&u.to>t&&(s=u)}}return s}function UHe(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function a_(n,e,t){for(let r of n.facet(FHe)){let i=r(n,e,t);if(i)return i}return zHe(n,e,t)}function mQ(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const JE=dn.define({map:mQ}),Ny=dn.define({map:mQ});function gQ(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const Rd=Bi.define({create(){return zt.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(JE)&&!$He(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(xQ),i=r?zt.replace({widget:new XHe(r(e.state,t.value))}):p7;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(Ny)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,s)=>{i<r&&s>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return n},provide:n=>bt.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(p7.range(r,i))}return zt.set(e,!0)}});function o_(n,e,t){var r;let i=null;return(r=n.field(Rd,!1))===null||r===void 0||r.between(e,t,(s,a)=>{(!i||i.from>s)&&(i={from:s,to:a})}),i}function $He(n,e,t){let r=!1;return n.between(e,e,(i,s)=>{i==e&&s==t&&(r=!0)}),r}function vQ(n,e){return n.field(Rd,!1)?e:e.concat(dn.appendConfig.of(bQ()))}const VHe=n=>{for(let e of gQ(n)){let t=a_(n.state,e.from,e.to);if(t)return n.dispatch({effects:vQ(n.state,[JE.of(t),yQ(n,t)])}),!0}return!1},HHe=n=>{if(!n.state.field(Rd,!1))return!1;let e=[];for(let t of gQ(n)){let r=o_(n.state,t.from,t.to);r&&e.push(Ny.of(r),yQ(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function yQ(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return bt.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const WHe=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),s=a_(e,i.from,i.to);s&&t.push(JE.of(s)),r=(s?n.lineBlockAt(s.to):i).to+1}return t.length&&n.dispatch({effects:vQ(n.state,t)}),!!t.length},GHe=n=>{let e=n.state.field(Rd,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(Ny.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},jHe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:VHe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:HHe},{key:"Ctrl-Alt-[",run:WHe},{key:"Ctrl-Alt-]",run:GHe}],qHe={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},xQ=Pt.define({combine(n){return Rl(n,qHe)}});function bQ(n){return[Rd,ZHe]}function wQ(n,e){let{state:t}=n,r=t.facet(xQ),i=a=>{let o=n.lineBlockAt(n.posAtDOM(a.target)),l=o_(n.state,o.from,o.to);l&&n.dispatch({effects:Ny.of(l)}),a.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const p7=zt.replace({widget:new class extends Lu{toDOM(n){return wQ(n,null)}}});class XHe extends Lu{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return wQ(e,this.value)}}const YHe={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class SA extends Pu{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function KHe(n={}){let e=Object.assign(Object.assign({},YHe),n),t=new SA(e,!0),r=new SA(e,!1),i=Vr.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(Qc)!=a.state.facet(Qc)||a.startState.field(Rd,!1)!=a.state.field(Rd,!1)||is(a.startState)!=is(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let o=new Xc;for(let l of a.viewportLineBlocks){let u=o_(a.state,l.from,l.to)?r:a_(a.state,l.from,l.to)?t:null;u&&o.add(l.from,l.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,YVe({class:"cm-foldGutter",markers(a){var o;return((o=a.plugin(i))===null||o===void 0?void 0:o.markers)||Cn.empty},initialSpacer(){return new SA(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(a,o,l)=>{if(s.click&&s.click(a,o,l))return!0;let u=o_(a.state,o.from,o.to);if(u)return a.dispatch({effects:Ny.of(u)}),!0;let c=a_(a.state,o.from,o.to);return c?(a.dispatch({effects:JE.of(c)}),!0):!1}})}),bQ()]}const ZHe=bt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Py{constructor(e,t){this.specs=e;let r;function i(o){let l=Yc.newName();return(r||(r=Object.create(null)))["."+l]=o,l}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,a=t.scope;this.scope=a instanceof fl?o=>o.prop(sv)==a.data:a?o=>o==a:void 0,this.style=dQ(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new Yc(r):null,this.themeType=t.themeType}static define(e,t){return new Py(e,t||{})}}const rN=Pt.define(),SQ=Pt.define({combine(n){return n.length?[n[0]]:null}});function _A(n){let e=n.facet(rN);return e.length?e:n.facet(SQ)}function _Q(n,e){let t=[QHe],r;return n instanceof Py&&(n.module&&t.push(bt.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(SQ.of(n)):r?t.push(rN.computeN([bt.darkTheme],i=>i.facet(bt.darkTheme)==(r=="dark")?[n]:[])):t.push(rN.of(n)),t}class JHe{constructor(e){this.markCache=Object.create(null),this.tree=is(e.state),this.decorations=this.buildDeco(e,_A(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=is(e.state),r=_A(e.state),i=r!=_A(e.startState),{viewport:s}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&a>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return zt.none;let r=new Xc;for(let{from:i,to:s}of e.visibleRanges)bHe(this.tree,t,(a,o,l)=>{r.add(a,o,this.markCache[l]||(this.markCache[l]=zt.mark({class:l})))},i,s);return r.finish()}}const QHe=jd.high(Vr.fromClass(JHe,{decorations:n=>n.decorations})),eWe=Py.define([{tag:nt.meta,color:"#404740"},{tag:nt.link,textDecoration:"underline"},{tag:nt.heading,textDecoration:"underline",fontWeight:"bold"},{tag:nt.emphasis,fontStyle:"italic"},{tag:nt.strong,fontWeight:"bold"},{tag:nt.strikethrough,textDecoration:"line-through"},{tag:nt.keyword,color:"#708"},{tag:[nt.atom,nt.bool,nt.url,nt.contentSeparator,nt.labelName],color:"#219"},{tag:[nt.literal,nt.inserted],color:"#164"},{tag:[nt.string,nt.deleted],color:"#a11"},{tag:[nt.regexp,nt.escape,nt.special(nt.string)],color:"#e40"},{tag:nt.definition(nt.variableName),color:"#00f"},{tag:nt.local(nt.variableName),color:"#30a"},{tag:[nt.typeName,nt.namespace],color:"#085"},{tag:nt.className,color:"#167"},{tag:[nt.special(nt.variableName),nt.macroName],color:"#256"},{tag:nt.definition(nt.propertyName),color:"#00c"},{tag:nt.comment,color:"#940"},{tag:nt.invalid,color:"#f00"}]),tWe=bt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),EQ=1e4,MQ="()[]{}",CQ=Pt.define({combine(n){return Rl(n,{afterCursor:!0,brackets:MQ,maxScanDistance:EQ,renderMatch:iWe})}}),nWe=zt.mark({class:"cm-matchingBracket"}),rWe=zt.mark({class:"cm-nonmatchingBracket"});function iWe(n){let e=[],t=n.matched?nWe:rWe;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const sWe=Bi.define({create(){return zt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(CQ);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=dl(e.state,i.head,-1,r)||i.head>0&&dl(e.state,i.head-1,1,r)||r.afterCursor&&(dl(e.state,i.head,1,r)||i.head<e.state.doc.length&&dl(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return zt.set(t,!0)},provide:n=>bt.decorations.from(n)}),aWe=[sWe,tWe];function oWe(n={}){return[CQ.of(n),aWe]}const lWe=new Sn;function iN(n,e,t){let r=n.prop(e<0?Sn.openedBy:Sn.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function sN(n){let e=n.type.prop(lWe);return e?e(n.node):n}function dl(n,e,t,r={}){let i=r.maxScanDistance||EQ,s=r.brackets||MQ,a=is(n),o=a.resolveInner(e,t);for(let l=o;l;l=l.parent){let u=iN(l.type,t,s);if(u&&l.from<l.to){let c=sN(l);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return uWe(n,e,t,l,c,u,s)}}return cWe(n,e,t,a,o.type,i,s)}function uWe(n,e,t,r,i,s,a){let o=r.parent,l={from:i.from,to:i.to},u=0,c=o==null?void 0:o.cursor();if(c&&(t<0?c.childBefore(r.from):c.childAfter(r.to)))do if(t<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let f=sN(c);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(iN(c.type,t,a))u++;else if(iN(c.type,-t,a)){if(u==0){let f=sN(c);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function cWe(n,e,t,r,i,s,a){let o=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=a.indexOf(o);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let d=0;!c.next().done&&d<=s;){let h=c.value;t<0&&(d+=h.length);let p=e+d*t;for(let v=t>0?0:h.length-1,y=t>0?h.length:-1;v!=y;v+=t){let m=a.indexOf(h[v]);if(!(m<0||r.resolveInner(p+v,1).type!=i))if(m%2==0==t>0)f++;else{if(f==1)return{start:u,end:{from:p+v,to:p+v+1},matched:m>>1==l>>1};f--}}t>0&&(d+=h.length)}return c.done?{start:u,matched:!1}:null}const fWe=Object.create(null),m7=[io.none],g7=[],v7=Object.create(null),dWe=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])dWe[n]=hWe(fWe,e);function EA(n,e){g7.indexOf(n)>-1||(g7.push(n),console.warn(e))}function hWe(n,e){let t=[];for(let o of e.split(" ")){let l=[];for(let u of o.split(".")){let c=n[u]||nt[u];c?typeof c=="function"?l.length?l=l.map(c):EA(u,`Modifier ${u} used at start of tag`):l.length?EA(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:EA(u,`Unknown highlighting tag ${u}`)}for(let u of l)t.push(u)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(o=>o.id),s=v7[i];if(s)return s.id;let a=v7[i]=io.define({id:m7.length,name:r,props:[yHe({[r]:t})]});return m7.push(a),a.id}ur.RTL,ur.LTR;const pWe=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=TO(n.state,t.from);return r.line?mWe(n):r.block?vWe(n):!1};function AO(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const mWe=AO(bWe,0),gWe=AO(AQ,0),vWe=AO((n,e)=>AQ(n,e,xWe(e)),0);function TO(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Hg=50;function yWe(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-Hg,r),a=n.sliceDoc(i,i+Hg),o=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(a)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&a.slice(l,l+t.length)==t)return{open:{pos:r-o,margin:o&&1},close:{pos:i+l,margin:l&&1}};let c,f;i-r<=2*Hg?c=f=n.sliceDoc(r,i):(c=n.sliceDoc(r,r+Hg),f=n.sliceDoc(i-Hg,i));let d=/^\s*/.exec(c)[0].length,h=/\s*$/.exec(f)[0].length,p=f.length-h-t.length;return c.slice(d,d+e.length)==e&&f.slice(p,p+t.length)==t?{open:{pos:r+d+e.length,margin:/\s/.test(c.charAt(d+e.length))?1:0},close:{pos:i-h-t.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function xWe(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function AQ(n,e,t=e.selection.ranges){let r=t.map(s=>TO(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,a)=>yWe(e,r[a],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,a)=>i[a]?[]:[{from:s.from,insert:r[a].open+" "},{from:s.to,insert:" "+r[a].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let a=0,o;a<i.length;a++)if(o=i[a]){let l=r[a],{open:u,close:c}=o;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function bWe(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:a}of t){let o=r.length,l=1e9,u=TO(e,s).line;if(u){for(let c=s;c<=a;){let f=e.doc.lineAt(c);if(f.from>i&&(s==a||a>f.from)){i=f.from;let d=/^\s*/.exec(f.text)[0].length,h=d==f.length,p=f.text.slice(d,d+u.length)==u?d:-1;d<f.text.length&&d<l&&(l=d),r.push({line:f,comment:p,token:u,indent:d,empty:h,single:!1})}c=f.to+1}if(l<1e9)for(let c=o;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==o+1&&(r[o].single=!0)}}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:l,indent:u,empty:c,single:f}of r)(f||!c)&&s.push({from:o.from+u,insert:l+" "});let a=e.changes(s);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:a,comment:o,token:l}of r)if(o>=0){let u=a.from+o,c=u+l.length;a.text[c-a.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const aN=Pl.define(),wWe=Pl.define(),SWe=Pt.define(),TQ=Pt.define({combine(n){return Rl(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}}),DQ=Bi.define({create(){return hl.empty},update(n,e){let t=e.state.facet(TQ),r=e.annotation(aN);if(r){let l=Gs.fromTransaction(e,r.selection),u=r.side,c=u==0?n.undone:n.done;return l?c=l_(c,c.length,t.minDepth,l):c=RQ(c,e.startState.selection),new hl(u==0?r.rest:c,u==0?c:r.rest)}let i=e.annotation(wWe);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(si.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=Gs.fromTransaction(e),a=e.annotation(si.time),o=e.annotation(si.userEvent);return s?n=n.addChanges(s,a,o,t,e):e.selection&&(n=n.addSelection(e.startState.selection,a,o,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new hl(n.done.map(Gs.fromJSON),n.undone.map(Gs.fromJSON))}});function _We(n={}){return[DQ,TQ.of(n),bt.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?NQ:e.inputType=="historyRedo"?oN:null;return r?(e.preventDefault(),r(t)):!1}})]}function QE(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(DQ,!1);if(!i)return!1;let s=i.pop(n,t,e);return s?(r(s),!0):!1}}const NQ=QE(0,!1),oN=QE(1,!1),EWe=QE(0,!0),MWe=QE(1,!0);class Gs{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Gs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Gs(e.changes&&ni.fromJSON(e.changes),[],e.mapped&&bl.fromJSON(e.mapped),e.startSelection&&it.fromJSON(e.startSelection),e.selectionsAfter.map(it.fromJSON))}static fromTransaction(e,t){let r=Xa;for(let i of e.startState.facet(SWe)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Gs(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,Xa)}static selection(e){return new Gs(void 0,Xa,void 0,void 0,e)}}function l_(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function CWe(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,a,o)=>{for(let l=0;l<t.length;){let u=t[l++],c=t[l++];o>=u&&a<=c&&(r=!0)}}),r}function AWe(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function PQ(n,e){return n.length?e.length?n.concat(e):n:e}const Xa=[],TWe=200;function RQ(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-TWe));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),l_(n,n.length-1,1e9,t.setSelAfter(r)))}else return[Gs.selection([e])]}function DWe(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function MA(n,e){if(!n.length)return n;let t=n.length,r=Xa;for(;t;){let i=NWe(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[Gs.selection(r)]:Xa}function NWe(n,e,t){let r=PQ(n.selectionsAfter.length?n.selectionsAfter.map(o=>o.map(e)):Xa,t);if(!n.changes)return Gs.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),a=n.mapped?n.mapped.composeDesc(s):s;return new Gs(i,dn.mapEffects(n.effects,e),a,n.startSelection.map(s),r)}const PWe=/^(input\.type|delete)($|\.)/;class hl{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new hl(this.done,this.undone):this}addChanges(e,t,r,i,s){let a=this.done,o=a[a.length-1];return o&&o.changes&&!o.changes.empty&&e.changes&&(!r||PWe.test(r))&&(!o.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,CWe(o.changes,e.changes))||r=="input.type.compose")?a=l_(a,a.length-1,i.minDepth,new Gs(e.changes.compose(o.changes),PQ(e.effects,o.effects),o.mapped,o.startSelection,Xa)):a=l_(a,a.length,i.minDepth,e),new hl(a,Xa,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Xa;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&AWe(s[s.length-1],e)?this:new hl(RQ(this.done,e),this.undone,t,r)}addMapping(e){return new hl(MA(this.done,e),MA(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],a=s.selectionsAfter[0]||t.selection;if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:aN.of({side:e,rest:DWe(i),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=i.length==1?Xa:i.slice(0,i.length-1);return s.mapped&&(o=MA(o,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:aN.of({side:e,rest:o,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}hl.empty=new hl(Xa,Xa);const RWe=[{key:"Mod-z",run:NQ,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:oN,preventDefault:!0},{linux:"Ctrl-Shift-z",run:oN,preventDefault:!0},{key:"Mod-u",run:EWe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:MWe,preventDefault:!0}];function Vm(n,e){return it.create(n.ranges.map(e),n.mainIndex)}function Ol(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Bo({state:n,dispatch:e},t){let r=Vm(n.selection,t);return r.eq(n.selection,!0)?!1:(e(Ol(n,r)),!0)}function eM(n,e){return it.cursor(e?n.to:n.from)}function OQ(n,e){return Bo(n,t=>t.empty?n.moveByChar(t,e):eM(t,e))}function os(n){return n.textDirectionAt(n.state.selection.main.head)==ur.LTR}const IQ=n=>OQ(n,!os(n)),kQ=n=>OQ(n,os(n));function LQ(n,e){return Bo(n,t=>t.empty?n.moveByGroup(t,e):eM(t,e))}const OWe=n=>LQ(n,!os(n)),IWe=n=>LQ(n,os(n));function kWe(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function tM(n,e,t){let r=is(n).resolveInner(e.head),i=t?Sn.closedBy:Sn.openedBy;for(let l=e.head;;){let u=t?r.childAfter(l):r.childBefore(l);if(!u)break;kWe(n,u,i)?r=u:l=t?u.to:u.from}let s=r.type.prop(i),a,o;return s&&(a=t?dl(n,r.from,1):dl(n,r.to,-1))&&a.matched?o=t?a.end.to:a.end.from:o=t?r.to:r.from,it.cursor(o,t?-1:1)}const LWe=n=>Bo(n,e=>tM(n.state,e,!os(n))),FWe=n=>Bo(n,e=>tM(n.state,e,os(n)));function FQ(n,e){return Bo(n,t=>{if(!t.empty)return eM(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const BQ=n=>FQ(n,!1),zQ=n=>FQ(n,!0);function UQ(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let s of n.state.facet(bt.scrollMargins)){let a=s(n);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(r=Math.max(a==null?void 0:a.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function $Q(n,e){let t=UQ(n),{state:r}=n,i=Vm(r.selection,a=>a.empty?n.moveVertically(a,e,t.height):eM(a,e));if(i.eq(r.selection))return!1;let s;if(t.selfScroll){let a=n.coordsAtPos(r.selection.main.head),o=n.scrollDOM.getBoundingClientRect(),l=o.top+t.marginTop,u=o.bottom-t.marginBottom;a&&a.top>l&&a.bottom<u&&(s=bt.scrollIntoView(i.main.head,{y:"start",yMargin:a.top-l}))}return n.dispatch(Ol(r,i),{effects:s}),!0}const y7=n=>$Q(n,!1),lN=n=>$Q(n,!0);function df(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=it.cursor(r.from+s))}return i}const BWe=n=>Bo(n,e=>df(n,e,!0)),zWe=n=>Bo(n,e=>df(n,e,!1)),UWe=n=>Bo(n,e=>df(n,e,!os(n))),$We=n=>Bo(n,e=>df(n,e,os(n))),VWe=n=>Bo(n,e=>it.cursor(n.lineBlockAt(e.head).from,1)),HWe=n=>Bo(n,e=>it.cursor(n.lineBlockAt(e.head).to,-1));function WWe(n,e,t){let r=!1,i=Vm(n.selection,s=>{let a=dl(n,s.head,-1)||dl(n,s.head,1)||s.head>0&&dl(n,s.head-1,1)||s.head<n.doc.length&&dl(n,s.head+1,-1);if(!a||!a.end)return s;r=!0;let o=a.start.from==s.head?a.end.to:a.end.from;return it.cursor(o)});return r?(e(Ol(n,i)),!0):!1}const GWe=({state:n,dispatch:e})=>WWe(n,e);function lo(n,e){let t=Vm(n.state.selection,r=>{let i=e(r);return it.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Ol(n.state,t)),!0)}function VQ(n,e){return lo(n,t=>n.moveByChar(t,e))}const HQ=n=>VQ(n,!os(n)),WQ=n=>VQ(n,os(n));function GQ(n,e){return lo(n,t=>n.moveByGroup(t,e))}const jWe=n=>GQ(n,!os(n)),qWe=n=>GQ(n,os(n)),XWe=n=>lo(n,e=>tM(n.state,e,!os(n))),YWe=n=>lo(n,e=>tM(n.state,e,os(n)));function jQ(n,e){return lo(n,t=>n.moveVertically(t,e))}const qQ=n=>jQ(n,!1),XQ=n=>jQ(n,!0);function YQ(n,e){return lo(n,t=>n.moveVertically(t,e,UQ(n).height))}const x7=n=>YQ(n,!1),b7=n=>YQ(n,!0),KWe=n=>lo(n,e=>df(n,e,!0)),ZWe=n=>lo(n,e=>df(n,e,!1)),JWe=n=>lo(n,e=>df(n,e,!os(n))),QWe=n=>lo(n,e=>df(n,e,os(n))),eGe=n=>lo(n,e=>it.cursor(n.lineBlockAt(e.head).from)),tGe=n=>lo(n,e=>it.cursor(n.lineBlockAt(e.head).to)),w7=({state:n,dispatch:e})=>(e(Ol(n,{anchor:0})),!0),S7=({state:n,dispatch:e})=>(e(Ol(n,{anchor:n.doc.length})),!0),_7=({state:n,dispatch:e})=>(e(Ol(n,{anchor:n.selection.main.anchor,head:0})),!0),E7=({state:n,dispatch:e})=>(e(Ol(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),nGe=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),rGe=({state:n,dispatch:e})=>{let t=nM(n).map(({from:r,to:i})=>it.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:it.create(t),userEvent:"select"})),!0},iGe=({state:n,dispatch:e})=>{let t=Vm(n.selection,r=>{var i;let s=is(n).resolveStack(r.from,1);for(let a=s;a;a=a.next){let{node:o}=a;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&(!((i=o.parent)===null||i===void 0)&&i.parent))return it.range(o.to,o.from)}return r});return e(Ol(n,t)),!0},sGe=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=it.create([t.main]):t.main.empty||(r=it.create([it.cursor(t.main.head)])),r?(e(Ol(n,r)),!0):!1};function Ry(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:a,to:o}=s;if(a==o){let l=e(s);l<a?(t="delete.backward",l=Ob(n,l,!1)):l>a&&(t="delete.forward",l=Ob(n,l,!0)),a=Math.min(a,l),o=Math.max(o,l)}else a=Ob(n,a,!1),o=Ob(n,o,!0);return a==o?{range:s}:{changes:{from:a,to:o},range:it.cursor(a,a<s.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?bt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Ob(n,e,t){if(n instanceof bt)for(let r of n.state.facet(bt.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const KQ=(n,e,t)=>Ry(n,r=>{let i=r.from,{state:s}=n,a=s.doc.lineAt(i),o,l;if(t&&!e&&i>a.from&&i<a.from+200&&!/[^ \t]/.test(o=a.text.slice(0,i-a.from))){if(o[o.length-1]=="	")return i-1;let u=$m(o,s.tabSize),c=u%s_(s)||s_(s);for(let f=0;f<c&&o[o.length-1-f]==" ";f++)i--;l=i}else l=Oi(a.text,i-a.from,e,e)+a.from,l==i&&a.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(l-a.from,i-a.from))&&(l=Oi(a.text,l-a.from,!1,!1)+a.from);return l}),uN=n=>KQ(n,!1,!0),ZQ=n=>KQ(n,!0,!1),JQ=(n,e)=>Ry(n,t=>{let r=t.head,{state:i}=n,s=i.doc.lineAt(r),a=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==t.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Oi(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),c=a(u);if(o!=null&&c!=o)break;(u!=" "||r!=t.head)&&(o=c),r=l}return r}),QQ=n=>JQ(n,!1),aGe=n=>JQ(n,!0),oGe=n=>Ry(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),lGe=n=>Ry(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),uGe=n=>Ry(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),cGe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Pn.of(["",""])},range:it.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},fGe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),a=i==s.from?i-1:Oi(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:Oi(s.text,i-s.from,!0)+s.from;return{changes:{from:a,to:o,insert:n.doc.slice(i,o).append(n.doc.slice(a,i))},range:it.cursor(o)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function nM(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let a=e[e.length-1];a.to=s.to,a.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function eee(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of nM(n)){if(t?s.to==n.doc.length:s.from==0)continue;let a=n.doc.lineAt(t?s.to+1:s.from-1),o=a.length+1;if(t){r.push({from:s.to,to:a.to},{from:s.from,insert:a.text+n.lineBreak});for(let l of s.ranges)i.push(it.range(Math.min(n.doc.length,l.anchor+o),Math.min(n.doc.length,l.head+o)))}else{r.push({from:a.from,to:s.from},{from:s.to,insert:n.lineBreak+a.text});for(let l of s.ranges)i.push(it.range(l.anchor-o,l.head-o))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:it.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const dGe=({state:n,dispatch:e})=>eee(n,e,!1),hGe=({state:n,dispatch:e})=>eee(n,e,!0);function tee(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of nM(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const pGe=({state:n,dispatch:e})=>tee(n,e,!1),mGe=({state:n,dispatch:e})=>tee(n,e,!0),gGe=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(nM(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Vm(e.selection,i=>{let s;if(n.lineWrapping){let a=n.lineBlockAt(i.head),o=n.coordsAtPos(i.head,i.assoc||1);o&&(s=a.bottom+n.documentTop-o.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,s)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function vGe(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=is(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Sn.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const yGe=nee(!1),xGe=nee(!0);function nee(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:a}=i,o=e.doc.lineAt(s),l=!n&&s==a&&vGe(e,s);n&&(s=a=(a<=o.to?o:e.doc.lineAt(a)).to);let u=new ZE(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=MO(u,s);for(c==null&&(c=$m(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));a<o.to&&/\s/.test(o.text[a-o.from]);)a++;l?{from:s,to:a}=l:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let f=["",H0(e,c)];return l&&f.push(H0(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:a,insert:Pn.of(f)},range:it.cursor(s+1+f[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function DO(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let a=r.from;a<=r.to;){let o=n.doc.lineAt(a);o.number>t&&(r.empty||r.to>o.from)&&(e(o,i,r),t=o.number),a=o.to+1}let s=n.changes(i);return{changes:i,range:it.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const bGe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new ZE(n,{overrideIndentation:s=>{let a=t[s];return a??-1}}),i=DO(n,(s,a,o)=>{let l=MO(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let u=/^\s*/.exec(s.text)[0],c=H0(n,l);(u!=c||o.from<s.from+u.length)&&(t[s.from]=l,a.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},ree=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(DO(n,(t,r)=>{r.push({from:t.from,insert:n.facet(KE)})}),{userEvent:"input.indent"})),!0),iee=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(DO(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=$m(i,n.tabSize),a=0,o=H0(n,Math.max(0,s-s_(n)));for(;a<i.length&&a<o.length&&i.charCodeAt(a)==o.charCodeAt(a);)a++;r.push({from:t.from+a,to:t.from+i.length,insert:o.slice(a)})}),{userEvent:"delete.dedent"})),!0),wGe=n=>(n.setTabFocusMode(),!0),SGe=[{key:"Ctrl-b",run:IQ,shift:HQ,preventDefault:!0},{key:"Ctrl-f",run:kQ,shift:WQ},{key:"Ctrl-p",run:BQ,shift:qQ},{key:"Ctrl-n",run:zQ,shift:XQ},{key:"Ctrl-a",run:VWe,shift:eGe},{key:"Ctrl-e",run:HWe,shift:tGe},{key:"Ctrl-d",run:ZQ},{key:"Ctrl-h",run:uN},{key:"Ctrl-k",run:oGe},{key:"Ctrl-Alt-h",run:QQ},{key:"Ctrl-o",run:cGe},{key:"Ctrl-t",run:fGe},{key:"Ctrl-v",run:lN}],_Ge=[{key:"ArrowLeft",run:IQ,shift:HQ,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:OWe,shift:jWe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:UWe,shift:JWe,preventDefault:!0},{key:"ArrowRight",run:kQ,shift:WQ,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:IWe,shift:qWe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:$We,shift:QWe,preventDefault:!0},{key:"ArrowUp",run:BQ,shift:qQ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:w7,shift:_7},{mac:"Ctrl-ArrowUp",run:y7,shift:x7},{key:"ArrowDown",run:zQ,shift:XQ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:S7,shift:E7},{mac:"Ctrl-ArrowDown",run:lN,shift:b7},{key:"PageUp",run:y7,shift:x7},{key:"PageDown",run:lN,shift:b7},{key:"Home",run:zWe,shift:ZWe,preventDefault:!0},{key:"Mod-Home",run:w7,shift:_7},{key:"End",run:BWe,shift:KWe,preventDefault:!0},{key:"Mod-End",run:S7,shift:E7},{key:"Enter",run:yGe},{key:"Mod-a",run:nGe},{key:"Backspace",run:uN,shift:uN},{key:"Delete",run:ZQ},{key:"Mod-Backspace",mac:"Alt-Backspace",run:QQ},{key:"Mod-Delete",mac:"Alt-Delete",run:aGe},{mac:"Mod-Backspace",run:lGe},{mac:"Mod-Delete",run:uGe}].concat(SGe.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),see=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:LWe,shift:XWe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:FWe,shift:YWe},{key:"Alt-ArrowUp",run:dGe},{key:"Shift-Alt-ArrowUp",run:pGe},{key:"Alt-ArrowDown",run:hGe},{key:"Shift-Alt-ArrowDown",run:mGe},{key:"Escape",run:sGe},{key:"Mod-Enter",run:xGe},{key:"Alt-l",mac:"Ctrl-l",run:rGe},{key:"Mod-i",run:iGe,preventDefault:!0},{key:"Mod-[",run:iee},{key:"Mod-]",run:ree},{key:"Mod-Alt-\\",run:bGe},{key:"Shift-Mod-k",run:gGe},{key:"Shift-Mod-\\",run:GWe},{key:"Mod-/",run:pWe},{key:"Alt-A",run:gWe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:wGe}].concat(_Ge),EGe={key:"Tab",run:ree,shift:iee};function tr(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)aee(n,arguments[e]);return n}function aee(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)aee(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const M7=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class cm{constructor(e,t,r=0,i=e.length,s,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(M7(o)):M7,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ti(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=uO(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Ga(e);let i=this.normalize(t);for(let s=0,a=r;;s++){let o=i.charCodeAt(s),l=this.match(o,a,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}a==r&&s<t.length&&t.charCodeAt(s)==o&&a++}}}match(e,t,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let a=this.matches[s],o=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:r}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(cm.prototype[Symbol.iterator]=function(){return this});const oee={from:-1,to:-1,match:/.*/.exec("")},NO="gm"+(/x/.unicode==null?"":"u");class lee{constructor(e,t,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=oee,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new uee(e,t,r,i,s);this.re=new RegExp(t,NO+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let a=e.lineAt(i);this.curLineStart=a.from,this.matchPos=u_(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=u_(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const CA=new WeakMap;class Lp{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=CA.get(e);if(!i||i.from>=r||i.to<=t){let o=new Lp(t,e.sliceString(t,r));return CA.set(e,o),o}if(i.from==t&&i.to==r)return i;let{text:s,from:a}=i;return a>t&&(s=e.sliceString(t,a)+s,a=t),i.to<r&&(s+=e.sliceString(i.to,r)),CA.set(e,new Lp(a,s)),new Lp(t,s.slice(t-a,r-a))}}class uee{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=oee,this.matchPos=u_(e,i),this.re=new RegExp(t,NO+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Lp.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=u_(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Lp.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(lee.prototype[Symbol.iterator]=uee.prototype[Symbol.iterator]=function(){return this});function MGe(n){try{return new RegExp(n,NO),!0}catch{return!1}}function u_(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function cN(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=tr("input",{class:"cm-textfield",name:"line",value:e}),r=tr("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:c_.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},tr("label",n.state.phrase("Go to line"),": ",t)," ",tr("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:a}=n,o=a.doc.lineAt(a.selection.main.head),[,l,u,c,f]=s,d=c?+c.slice(1):0,h=u?+u:o.number;if(u&&f){let y=h/100;l&&(y=y*(l=="-"?-1:1)+o.number/a.doc.lines),h=Math.round(a.doc.lines*y)}else u&&l&&(h=h*(l=="-"?-1:1)+o.number);let p=a.doc.line(Math.max(1,Math.min(a.doc.lines,h))),v=it.cursor(p.from+Math.max(0,Math.min(d,p.length)));n.dispatch({effects:[c_.of(!1),bt.scrollIntoView(v.from,{y:"center"})],selection:v}),n.focus()}return{dom:r}}const c_=dn.define(),C7=Bi.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(c_)&&(n=t.value);return n},provide:n=>$0.from(n,e=>e?cN:null)}),CGe=n=>{let e=U0(n,cN);if(!e){let t=[c_.of(!0)];n.state.field(C7,!1)==null&&t.push(dn.appendConfig.of([C7,AGe])),n.dispatch({effects:t}),e=U0(n,cN)}return e&&e.dom.querySelector("input").select(),!0},AGe=bt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),TGe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},DGe=Pt.define({combine(n){return Rl(n,TGe,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function NGe(n){return[kGe,IGe]}const PGe=zt.mark({class:"cm-selectionMatch"}),RGe=zt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function A7(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=pr.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=pr.Word)}function OGe(n,e,t,r){return n(e.sliceDoc(t,t+1))==pr.Word&&n(e.sliceDoc(r-1,r))==pr.Word}const IGe=Vr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(DGe),{state:t}=n,r=t.selection;if(r.ranges.length>1)return zt.none;let i=r.main,s,a=null;if(i.empty){if(!e.highlightWordAroundCursor)return zt.none;let l=t.wordAt(i.head);if(!l)return zt.none;a=t.charCategorizer(i.head),s=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return zt.none;if(e.wholeWords){if(s=t.sliceDoc(i.from,i.to),a=t.charCategorizer(i.head),!(A7(a,t,i.from,i.to)&&OGe(a,t,i.from,i.to)))return zt.none}else if(s=t.sliceDoc(i.from,i.to),!s)return zt.none}let o=[];for(let l of n.visibleRanges){let u=new cm(t.doc,s,l.from,l.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!a||A7(a,t,c,f))&&(i.empty&&c<=i.from&&f>=i.to?o.push(RGe.range(c,f)):(c>=i.to||f<=i.from)&&o.push(PGe.range(c,f)),o.length>e.maxMatches))return zt.none}}return zt.set(o)}},{decorations:n=>n.decorations}),kGe=bt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),LGe=({state:n,dispatch:e})=>{let{selection:t}=n,r=it.create(t.ranges.map(i=>n.wordAt(i.head)||it.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function FGe(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let a=!1,o=new cm(n.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(a)return null;o=new cm(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),a=!0}else{if(a&&r.some(l=>l.from==o.value.from))continue;if(s){let l=n.wordAt(o.value.from);if(!l||l.from!=o.value.from||l.to!=o.value.to)continue}return o.value}}const BGe=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return LGe({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=r))return!1;let i=FGe(n,r);return i?(e(n.update({selection:n.selection.addRange(it.range(i.from,i.to),!1),effects:bt.scrollIntoView(i.to)})),!0):!1},Hm=Pt.define({combine(n){return Rl(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new KGe(e),scrollToMatch:e=>bt.scrollIntoView(e)})}});class cee{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||MGe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new VGe(this):new UGe(this)}getCursor(e,t=0,r){let i=e.doc?e:bn.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Xh(this,i,t,r):qh(this,i,t,r)}}class fee{constructor(e){this.spec=e}}function qh(n,e,t,r){return new cm(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?zGe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function zGe(n,e){return(t,r,i,s)=>((s>t||s+i.length<r)&&(s=Math.max(0,t-2),i=n.sliceString(s,Math.min(n.length,r+2))),(e(f_(i,t-s))!=pr.Word||e(d_(i,t-s))!=pr.Word)&&(e(d_(i,r-s))!=pr.Word||e(f_(i,r-s))!=pr.Word))}class UGe extends fee{constructor(e){super(e)}nextMatch(e,t,r){let i=qh(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=qh(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),a=qh(this.spec,e,s,i),o=null;for(;!a.nextOverlapping().done;)o=a.value;if(o)return o;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=qh(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=qh(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Xh(n,e,t,r){return new lee(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?$Ge(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function f_(n,e){return n.slice(Oi(n,e,!1),e)}function d_(n,e){return n.slice(e,Oi(n,e))}function $Ge(n){return(e,t,r)=>!r[0].length||(n(f_(r.input,r.index))!=pr.Word||n(d_(r.input,r.index))!=pr.Word)&&(n(d_(r.input,r.index+r[0].length))!=pr.Word||n(f_(r.input,r.index+r[0].length))!=pr.Word)}class VGe extends fee{nextMatch(e,t,r){let i=Xh(this.spec,e,r,e.doc.length).next();return i.done&&(i=Xh(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-i*1e4),a=Xh(this.spec,e,s,r),o=null;for(;!a.next().done;)o=a.value;if(o&&(s==t||o.from>s+10))return o;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:t)}matchAll(e,t){let r=Xh(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=Xh(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const W0=dn.define(),PO=dn.define(),Lc=Bi.define({create(n){return new AA(fN(n).create(),null)},update(n,e){for(let t of e.effects)t.is(W0)?n=new AA(t.value.create(),n.panel):t.is(PO)&&(n=new AA(n.query,t.value?RO:null));return n},provide:n=>$0.from(n,e=>e.panel)});class AA{constructor(e,t){this.query=e,this.panel=t}}const HGe=zt.mark({class:"cm-searchMatch"}),WGe=zt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),GGe=Vr.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Lc))}update(n){let e=n.state.field(Lc);(e!=n.startState.field(Lc)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return zt.none;let{view:t}=this,r=new Xc;for(let i=0,s=t.visibleRanges,a=s.length;i<a;i++){let{from:o,to:l}=s[i];for(;i<a-1&&l>s[i+1].from-2*250;)l=s[++i].to;n.highlight(t.state,o,l,(u,c)=>{let f=t.state.selection.ranges.some(d=>d.from==u&&d.to==c);r.add(u,c,f?WGe:HGe)})}return r.finish()}},{decorations:n=>n.decorations});function Oy(n){return e=>{let t=e.state.field(Lc,!1);return t&&t.query.spec.valid?n(e,t):pee(e)}}const h_=Oy((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=it.single(r.from,r.to),s=n.state.facet(Hm);return n.dispatch({selection:i,effects:[OO(n,r),s.scrollToMatch(i.main,n)],userEvent:"select.search"}),hee(n),!0}),p_=Oy((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let s=it.single(i.from,i.to),a=n.state.facet(Hm);return n.dispatch({selection:s,effects:[OO(n,i),a.scrollToMatch(s.main,n)],userEvent:"select.search"}),hee(n),!0}),jGe=Oy((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:it.create(t.map(r=>it.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),qGe=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,s=[],a=0;for(let o=new cm(n.doc,n.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(a=s.length),s.push(it.range(o.value.from,o.value.to))}return e(n.update({selection:it.create(s,a),userEvent:"select.search.matches"})),!0},T7=Oy((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let a=[],o,l,u=[];if(s.from==r&&s.to==i&&(l=t.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(t,s.from,s.to),u.push(bt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),s){let c=a.length==0||a[0].from>=s.to?0:s.to-s.from-l.length;o=it.single(s.from-c,s.to-c),u.push(OO(n,s)),u.push(t.facet(Hm).scrollToMatch(o.main,n))}return n.dispatch({changes:a,selection:o,effects:u,userEvent:"input.replace"}),!0}),XGe=Oy((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:s,to:a}=i;return{from:s,to:a,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:bt.announce.of(r),userEvent:"input.replace.all"}),!0});function RO(n){return n.state.facet(Hm).createPanel(n)}function fN(n,e){var t,r,i,s,a;let o=n.selection.main,l=o.empty||o.to>o.from+100?"":n.sliceDoc(o.from,o.to);if(e&&!l)return e;let u=n.facet(Hm);return new cee({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(a=e==null?void 0:e.wholeWord)!==null&&a!==void 0?a:u.wholeWord})}function dee(n){let e=U0(n,RO);return e&&e.dom.querySelector("[main-field]")}function hee(n){let e=dee(n);e&&e==n.root.activeElement&&e.select()}const pee=n=>{let e=n.state.field(Lc,!1);if(e&&e.panel){let t=dee(n);if(t&&t!=n.root.activeElement){let r=fN(n.state,e.query.spec);r.valid&&n.dispatch({effects:W0.of(r)}),t.focus(),t.select()}}else n.dispatch({effects:[PO.of(!0),e?W0.of(fN(n.state,e.query.spec)):dn.appendConfig.of(JGe)]});return!0},mee=n=>{let e=n.state.field(Lc,!1);if(!e||!e.panel)return!1;let t=U0(n,RO);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:PO.of(!1)}),!0},YGe=[{key:"Mod-f",run:pee,scope:"editor search-panel"},{key:"F3",run:h_,shift:p_,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:h_,shift:p_,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:mee,scope:"editor search-panel"},{key:"Mod-Shift-l",run:qGe},{key:"Mod-Alt-g",run:CGe},{key:"Mod-d",run:BGe,preventDefault:!0}];class KGe{constructor(e){this.view=e;let t=this.query=e.state.field(Lc).query.spec;this.commit=this.commit.bind(this),this.searchField=tr("input",{value:t.search,placeholder:sa(e,"Find"),"aria-label":sa(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=tr("input",{value:t.replace,placeholder:sa(e,"Replace"),"aria-label":sa(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=tr("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=tr("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=tr("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,s,a){return tr("button",{class:"cm-button",name:i,onclick:s,type:"button"},a)}this.dom=tr("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>h_(e),[sa(e,"next")]),r("prev",()=>p_(e),[sa(e,"previous")]),r("select",()=>jGe(e),[sa(e,"all")]),tr("label",null,[this.caseField,sa(e,"match case")]),tr("label",null,[this.reField,sa(e,"regexp")]),tr("label",null,[this.wordField,sa(e,"by word")]),...e.state.readOnly?[]:[tr("br"),this.replaceField,r("replace",()=>T7(e),[sa(e,"replace")]),r("replaceAll",()=>XGe(e),[sa(e,"replace all")])],tr("button",{name:"close",onclick:()=>mee(e),"aria-label":sa(e,"close"),type:"button"},["×"])])}commit(){let e=new cee({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:W0.of(e)}))}keydown(e){iVe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?p_:h_)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),T7(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(W0)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Hm).top}}function sa(n,e){return n.state.phrase(e)}const Ib=30,kb=/[\s\.,:;?!]/;function OO(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-Ib),a=Math.min(i,t+Ib),o=n.state.sliceDoc(s,a);if(s!=r.from){for(let l=0;l<Ib;l++)if(!kb.test(o[l+1])&&kb.test(o[l])){o=o.slice(l);break}}if(a!=i){for(let l=o.length-1;l>o.length-Ib;l--)if(!kb.test(o[l-1])&&kb.test(o[l])){o=o.slice(0,l);break}}return bt.announce.of(`${n.state.phrase("current match")}. ${o} ${n.state.phrase("on line")} ${r.number}.`)}const ZGe=bt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),JGe=[Lc,jd.low(GGe),ZGe];class gee{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=is(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(vee(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function D7(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function QGe(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=D7(e)+D7(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function eje(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:QGe(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}class N7{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function Fc(n){return n.selection.main.from}function vee(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const yee=Pl.define();function tje(n,e,t,r){let{main:i}=n.selection,s=t-i.from,a=r-i.from;return Object.assign(Object.assign({},n.changeByRange(o=>o!=i&&t!=r&&n.sliceDoc(o.from+s,o.from+a)!=n.sliceDoc(t,r)?{range:o}:{changes:{from:o.from+s,to:r==i.from?o.to:o.from+a,insert:e},range:it.cursor(o.from+s+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const P7=new WeakMap;function nje(n){if(!Array.isArray(n))return n;let e=P7.get(n);return e||P7.set(n,e=eje(n)),e}const m_=dn.define(),G0=dn.define();class rje{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=Ti(e,t),i=Ga(r);this.chars.push(r);let s=e.slice(t,t+i),a=s.toUpperCase();this.folded.push(Ti(a==s?s.toLowerCase():a,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:a}=this;if(t.length==1){let S=Ti(e,0),b=Ga(S),g=b==e.length?0:-100;if(S!=t[0])if(S==r[0])g+=-200;else return null;return this.ret(g,[0,b])}let o=e.indexOf(this.pattern);if(o==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,u=0;if(o<0){for(let S=0,b=Math.min(e.length,200);S<b&&u<l;){let g=Ti(e,S);(g==t[u]||g==r[u])&&(i[u++]=S),S+=Ga(g)}if(u<l)return null}let c=0,f=0,d=!1,h=0,p=-1,v=-1,y=/[a-z]/.test(e),m=!0;for(let S=0,b=Math.min(e.length,200),g=0;S<b&&f<l;){let w=Ti(e,S);o<0&&(c<l&&w==t[c]&&(s[c++]=S),h<l&&(w==t[h]||w==r[h]?(h==0&&(p=S),v=S+1,h++):h=0));let x,M=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(x=uO(w))!=x.toLowerCase()?1:x!=x.toUpperCase()?2:0;(!S||M==1&&y||g==0&&M!=0)&&(t[f]==w||r[f]==w&&(d=!0)?a[f++]=S:a.length&&(m=!1)),g=M,S+=Ga(w)}return f==l&&a[0]==0&&m?this.result(-100+(d?-200:0),a,e):h==l&&p==0?this.ret(-200-e.length+(v==e.length?0:-100),[0,v]):o>-1?this.ret(-700-e.length,[o,o+this.pattern.length]):h==l?this.ret(-900-e.length,[p,v]):f==l?this.result(-100+(d?-200:0)+-700+(m?0:-1100),a,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],s=0;for(let a of t){let o=a+(this.astral?Ga(Ti(r,a)):1);s&&i[s-1]==a?i[s-1]=o:(i[s++]=a,i[s++]=o)}return this.ret(e-r.length,i)}}class ije{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Pi=Pt.define({combine(n){return Rl(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:sje,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>R7(e(r),t(r)),optionClass:(e,t)=>r=>R7(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function R7(n,e){return n?e?n+" "+e:n:e}function sje(n,e,t,r,i,s){let a=n.textDirection==ur.RTL,o=a,l=!1,u="top",c,f,d=e.left-i.left,h=i.right-e.right,p=r.right-r.left,v=r.bottom-r.top;if(o&&d<Math.min(p,h)?o=!1:!o&&h<Math.min(p,d)&&(o=!0),p<=(o?d:h))c=Math.max(i.top,Math.min(t.top,i.bottom-v))-e.top,f=Math.min(400,o?d:h);else{l=!0,f=Math.min(400,(a?e.right:i.right-e.left)-30);let S=i.bottom-e.bottom;S>=v||S>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let y=(e.bottom-e.top)/s.offsetHeight,m=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${c/y}px; max-width: ${f/m}px`,class:"cm-completionInfo-"+(l?a?"left-narrow":"right-narrow":o?"left":"right")}}function aje(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,s){let a=document.createElement("span");a.className="cm-completionLabel";let o=t.displayLabel||t.label,l=0;for(let u=0;u<s.length;){let c=s[u++],f=s[u++];c>l&&a.appendChild(document.createTextNode(o.slice(l,c)));let d=a.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(o.slice(c,f))),d.className="cm-completionMatchedText",l=f}return l<o.length&&a.appendChild(document.createTextNode(o.slice(l))),a},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function TA(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class oje{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:a}=i.open,o=e.state.facet(Pi);this.optionContent=aje(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=TA(s.length,a,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(t).open;for(let c=l.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<u.length){this.applyCompletion(e,u[+f[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Pi).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:G0.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:a,disabled:o}=r.open;(!i.open||i.open.options!=s)&&(this.range=TA(s.length,a,e.state.facet(Pi).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),o!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!o)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=TA(t.options.length,t.selected,this.view.state.facet(Pi).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,r)}).catch(a=>Ws(this.view.state,a,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&uje(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let a=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:a.innerWidth,bottom:a.innerHeight}}return i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(Pi).positionInfo(this.view,t,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let a=r.from;a<r.to;a++){let{completion:o,match:l}=e[a],{section:u}=o;if(u){let d=typeof u=="string"?u:u.name;if(d!=s&&(a>r.from||r.from==0))if(s=d,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let h=i.appendChild(document.createElement("completion-section"));h.textContent=d}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+a,c.setAttribute("role","option");let f=this.optionClass(o);f&&(c.className=f);for(let d of this.optionContent){let h=d(o,this.view.state,this.view,l);h&&c.appendChild(h)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function lje(n,e){return t=>new oje(t,n,e)}function uje(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function O7(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function cje(n,e){let t=[],r=null,i=u=>{t.push(u);let{section:c}=u.completion;if(c){r||(r=[]);let f=typeof c=="string"?c:c.name;r.some(d=>d.name==f)||r.push(typeof c=="string"?{name:f}:c)}},s=e.facet(Pi);for(let u of n)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let f of u.result.options)i(new N7(f,u.source,c?c(f):[],1e9-t.length));else{let f=e.sliceDoc(u.from,u.to),d,h=s.filterStrict?new ije(f):new rje(f);for(let p of u.result.options)if(d=h.match(p.label)){let v=p.displayLabel?c?c(p,d.matched):[]:d.matched;i(new N7(p,u.source,v,d.score+(p.boost||0)))}}}if(r){let u=Object.create(null),c=0,f=(d,h)=>{var p,v;return((p=d.rank)!==null&&p!==void 0?p:1e9)-((v=h.rank)!==null&&v!==void 0?v:1e9)||(d.name<h.name?-1:1)};for(let d of r.sort(f))c-=1e5,u[d.name]=c;for(let d of t){let{section:h}=d.completion;h&&(d.score+=u[typeof h=="string"?h:h.name])}}let a=[],o=null,l=s.compareCompletions;for(let u of t.sort((c,f)=>f.score-c.score||l(c.completion,f.completion))){let c=u.completion;!o||o.label!=c.label||o.detail!=c.detail||o.type!=null&&c.type!=null&&o.type!=c.type||o.apply!=c.apply||o.boost!=c.boost?a.push(u):O7(u.completion)>O7(o)&&(a[a.length-1]=u),o=u.completion}return a}class vp{constructor(e,t,r,i,s,a){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new vp(this.options,I7(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s){let a=cje(e,t);if(!a.length)return i&&e.some(l=>l.state==1)?new vp(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let o=t.facet(Pi).selectOnOpen?0:-1;if(i&&i.selected!=o&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==l){o=u;break}}return new vp(a,I7(r,o),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:mje,above:s.aboveCursor},i?i.timestamp:Date.now(),o,!1)}map(e){return new vp(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class g_{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new g_(hje,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(Pi),s=(r.override||t.languageDataAt("autocomplete",Fc(t)).map(nje)).map(o=>(this.active.find(u=>u.source==o)||new ms(o,this.active.some(u=>u.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((o,l)=>o==this.active[l])&&(s=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||s.some(o=>o.hasResult()&&e.changes.touchesRange(o.from,o.to))||!fje(s,this.active)?a=vp.build(s,t,this.id,a,r):a&&a.disabled&&!s.some(o=>o.state==1)&&(a=null),!a&&s.every(o=>o.state!=1)&&s.some(o=>o.hasResult())&&(s=s.map(o=>o.hasResult()?new ms(o.source,0):o));for(let o of e.effects)o.is(bee)&&(a=a&&a.setSelected(o.value,this.id));return s==this.active&&a==this.open?this:new g_(s,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:dje}}function fje(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}const dje={"aria-autocomplete":"list"};function I7(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const hje=[];function dN(n,e){if(n.isUserEvent("input.complete")){let t=n.annotation(yee);if(t&&e.activateOnCompletion(t))return"input"}return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class ms{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=dN(e,t),i=this;r?i=i.handleUserEvent(e,r,t):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new ms(i.source,0));for(let s of e.effects)if(s.is(m_))i=new ms(i.source,1,s.value?Fc(e.state):-1);else if(s.is(G0))i=new ms(i.source,0);else if(s.is(xee))for(let a of s.value)a.source==i.source&&(i=a);return i}handleUserEvent(e,t,r){return t=="delete"||!r.activateOnTyping?this.map(e.changes):new ms(this.source,1)}handleChange(e){return e.changes.touchesRange(Fc(e.startState))?new ms(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ms(this.source,this.state,e.mapPos(this.explicitPos))}}class Fp extends ms{constructor(e,t,r,i,s){super(e,2,t),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,t,r){var i;let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let a=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Fc(e.state);if((this.explicitPos<0?l<=a:l<this.from)||l>o||!s||t=="delete"&&Fc(e.startState)==this.from)return new ms(this.source,t=="input"&&r.activateOnTyping?1:0);let u=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return pje(s.validFor,e.state,a,o)?new Fp(this.source,u,s,a,o):s.update&&(s=s.update(s,a,o,new gee(e.state,l,u>=0)))?new Fp(this.source,u,s,s.from,(i=s.to)!==null&&i!==void 0?i:Fc(e.state)):new ms(this.source,1,u)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ms(this.source,0):this.map(e.changes)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Fp(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ms(this.source,0)}}function pje(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):vee(n,!0).test(i)}const xee=dn.define({map(n,e){return n.map(t=>t.map(e))}}),bee=dn.define(),$s=Bi.define({create(){return g_.start()},update(n,e){return n.update(e)},provide:n=>[wO.from(n,e=>e.tooltip),bt.contentAttributes.from(n,e=>e.attrs)]});function IO(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field($s).active.find(i=>i.source==e.source);return r instanceof Fp?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},tje(n.state,t,r.from,r.to)),{annotations:yee.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}const mje=lje($s,IO);function Lb(n,e="option"){return t=>{let r=t.state.field($s,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(Pi).interactionDelay)return!1;let i=1,s;e=="page"&&(s=iQ(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:a}=r.open.options,o=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:a-1;return o<0?o=e=="page"?0:a-1:o>=a&&(o=e=="page"?a-1:0),t.dispatch({effects:bee.of(o)}),!0}}const gje=n=>{let e=n.state.field($s,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Pi).interactionDelay?!1:IO(n,e.open.options[e.open.selected])},vje=n=>n.state.field($s,!1)?(n.dispatch({effects:m_.of(!0)}),!0):!1,yje=n=>{let e=n.state.field($s,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:G0.of(null)}),!0)};class xje{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const bje=50,wje=1e3,Sje=Vr.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field($s).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field($s),t=n.state.facet(Pi);if(!n.selectionSet&&!n.docChanged&&n.startState.field($s)==e)return;let r=n.transactions.some(s=>(s.selection||s.docChanged)&&!dN(s,t));for(let s=0;s<this.running.length;s++){let a=this.running[s];if(r||a.updates.length+n.transactions.length>bje&&Date.now()-a.time>wje){for(let o of a.context.abortListeners)try{o()}catch(l){Ws(this.view.state,l)}a.context.abortListeners=null,this.running.splice(s--,1)}else a.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(a=>a.is(m_)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.state==1&&!this.running.some(a=>a.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of n.transactions)dN(s,t)=="input"?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field($s);for(let t of e.active)t.state==1&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Fc(e),r=new gee(e,t,n.explicitPos==t),i=new xje(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:G0.of(null)}),Ws(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Pi).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Pi);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let a=new Fp(i.active.source,i.active.explicitPos,i.done,i.done.from,(n=i.done.to)!==null&&n!==void 0?n:Fc(i.updates.length?i.updates[0].startState:this.view.state));for(let o of i.updates)a=a.update(o,t);if(a.hasResult()){e.push(a);continue}}let s=this.view.state.field($s).active.find(a=>a.source==i.active.source);if(s&&s.state==1)if(i.done==null){let a=new ms(i.active.source,0);for(let o of i.updates)a=a.update(o,t);a.state!=1&&e.push(a)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:xee.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field($s,!1);if(e&&e.tooltip&&this.view.state.facet(Pi).closeOnBlur){let t=e.open&&iQ(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:G0.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:m_.of(!1)}),20),this.composing=0}}}),_je=typeof navigator=="object"&&/Win/.test(navigator.platform),Eje=jd.highest(bt.domEventHandlers({keydown(n,e){let t=e.state.field($s,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(_je&&n.altKey)||n.metaKey)return!1;let r=t.open.options[t.open.selected],i=t.active.find(a=>a.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&IO(e,r),!1}})),Mje=bt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),j0={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},nd=dn.define({map(n,e){let t=e.mapPos(n,-1,ys.TrackAfter);return t??void 0}}),kO=new class extends Td{};kO.startSide=1;kO.endSide=-1;const wee=Bi.define({create(){return Cn.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(nd)&&(n=n.update({add:[kO.range(t.value,t.value+1)]}));return n}});function Cje(){return[Tje,wee]}const DA="()[]{}<>";function See(n){for(let e=0;e<DA.length;e+=2)if(DA.charCodeAt(e)==n)return DA.charAt(e+1);return uO(n<128?n:n+1)}function _ee(n,e){return n.languageDataAt("closeBrackets",e)[0]||j0}const Aje=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Tje=bt.inputHandler.of((n,e,t,r)=>{if((Aje?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&Ga(Ti(r,0))==1||e!=i.from||t!=i.to)return!1;let s=Pje(n.state,r);return s?(n.dispatch(s),!0):!1}),Dje=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=_ee(n,n.selection.main.head).brackets||j0.brackets,i=null,s=n.changeByRange(a=>{if(a.empty){let o=Rje(n.doc,a.head);for(let l of r)if(l==o&&rM(n.doc,a.head)==See(Ti(l,0)))return{changes:{from:a.head-l.length,to:a.head+l.length},range:it.cursor(a.head-l.length)}}return{range:i=a}});return i||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},Nje=[{key:"Backspace",run:Dje}];function Pje(n,e){let t=_ee(n,n.selection.main.head),r=t.brackets||j0.brackets;for(let i of r){let s=See(Ti(i,0));if(e==i)return s==i?kje(n,i,r.indexOf(i+i+i)>-1,t):Oje(n,i,s,t.before||j0.before);if(e==s&&Eee(n,n.selection.main.from))return Ije(n,i,s)}return null}function Eee(n,e){let t=!1;return n.field(wee).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function rM(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Ga(Ti(t,0)))}function Rje(n,e){let t=n.sliceString(e-2,e);return Ga(Ti(t,0))==t.length?t:t.slice(1)}function Oje(n,e,t,r){let i=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:nd.of(a.to+e.length),range:it.range(a.anchor+e.length,a.head+e.length)};let o=rM(n.doc,a.head);return!o||/\s/.test(o)||r.indexOf(o)>-1?{changes:{insert:e+t,from:a.head},effects:nd.of(a.head+e.length),range:it.cursor(a.head+e.length)}:{range:i=a}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Ije(n,e,t){let r=null,i=n.changeByRange(s=>s.empty&&rM(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:it.cursor(s.head+t.length)}:r={range:s});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function kje(n,e,t,r){let i=r.stringPrefixes||j0.stringPrefixes,s=null,a=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:nd.of(o.to+e.length),range:it.range(o.anchor+e.length,o.head+e.length)};let l=o.head,u=rM(n.doc,l),c;if(u==e){if(k7(n,l))return{changes:{insert:e+e,from:l},effects:nd.of(l+e.length),range:it.cursor(l+e.length)};if(Eee(n,l)){let d=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+d.length,insert:d},range:it.cursor(l+d.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(c=L7(n,l-2*e.length,i))>-1&&k7(n,c))return{changes:{insert:e+e+e+e,from:l},effects:nd.of(l+e.length),range:it.cursor(l+e.length)};if(n.charCategorizer(l)(u)!=pr.Word&&L7(n,l,i)>-1&&!Lje(n,l,e,i))return{changes:{insert:e+e,from:l},effects:nd.of(l+e.length),range:it.cursor(l+e.length)}}return{range:s=o}});return s?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function k7(n,e){let t=is(n).resolveInner(e+1);return t.parent&&t.from==e}function Lje(n,e,t,r){let i=is(n).resolveInner(e,-1),s=r.reduce((a,o)=>Math.max(a,o.length),0);for(let a=0;a<5;a++){let o=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),l=o.indexOf(t);if(!l||l>-1&&r.indexOf(o.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>t.length+l;){if(n.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function L7(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=pr.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=pr.Word)return s}return-1}function Fje(n={}){return[Eje,$s,Pi.of(n),Sje,Bje,Mje]}const Mee=[{key:"Ctrl-Space",run:vje},{key:"Escape",run:yje},{key:"ArrowDown",run:Lb(!0)},{key:"ArrowUp",run:Lb(!1)},{key:"PageDown",run:Lb(!0,"page")},{key:"PageUp",run:Lb(!1,"page")},{key:"Enter",run:gje}],Bje=jd.highest(Ty.computeN([Pi],n=>n.facet(Pi).defaultKeymap?[Mee]:[]));class zje{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class Gf{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,s=r.facet(q0).markerFilter;s&&(i=s(i,r));let a=zt.set(i.map(o=>o.from==o.to||o.from==o.to-1&&r.doc.lineAt(o.from).to==o.from?zt.widget({widget:new Xje(o),diagnostic:o}).range(o.from):zt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+o.severity+(o.markClass?" "+o.markClass:"")},diagnostic:o,inclusive:!0}).range(o.from,o.to)),!0);return new Gf(a,t,fm(a))}}function fm(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:a})=>{if(!(e&&a.diagnostic!=e))return r=new zje(i,s,a.diagnostic),!1}),r}function Uje(n,e){let t=e.pos,r=e.end||t,i=n.state.facet(q0).hideOn(n,t,r);if(i!=null)return i;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(a=>a.is(Cee))||n.changes.touchesRange(s.from,Math.max(s.to,r)))}function $je(n,e){return n.field(va,!1)?e:e.concat(dn.appendConfig.of(Zje))}const Cee=dn.define(),LO=dn.define(),Aee=dn.define(),va=Bi.define({create(){return new Gf(zt.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),r=null,i=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);r=fm(t,n.selected.diagnostic,s)||fm(t,null,s)}!t.size&&i&&e.state.facet(q0).autoPanel&&(i=null),n=new Gf(t,i,r)}for(let t of e.effects)if(t.is(Cee)){let r=e.state.facet(q0).autoPanel?t.value.length?X0.open:null:n.panel;n=Gf.init(t.value,r,e.state)}else t.is(LO)?n=new Gf(n.diagnostics,t.value?X0.open:null,n.selected):t.is(Aee)&&(n=new Gf(n.diagnostics,n.panel,t.value));return n},provide:n=>[$0.from(n,e=>e.panel),bt.decorations.from(n,e=>e.diagnostics)]}),Vje=zt.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function Hje(n,e,t){let{diagnostics:r}=n.state.field(va),i=[],s=2e8,a=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||t>0)&&(e<u||t<0))&&(i.push(c.diagnostic),s=Math.min(l,s),a=Math.max(u,a))});let o=n.state.facet(q0).tooltipFilter;return o&&(i=o(i,n.state)),i.length?{pos:s,end:a,above:n.state.doc.lineAt(s).to<a,create(){return{dom:Wje(n,i)}}}:null}function Wje(n,e){return tr("ul",{class:"cm-tooltip-lint"},e.map(t=>Dee(n,t,!1)))}const Gje=n=>{let e=n.state.field(va,!1);(!e||!e.panel)&&n.dispatch({effects:$je(n.state,[LO.of(!0)])});let t=U0(n,X0.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},F7=n=>{let e=n.state.field(va,!1);return!e||!e.panel?!1:(n.dispatch({effects:LO.of(!1)}),!0)},jje=n=>{let e=n.state.field(va,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},qje=[{key:"Mod-Shift-m",run:Gje,preventDefault:!0},{key:"F8",run:jje}],q0=Pt.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},Rl(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))}});function Tee(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Dee(n,e,t){var r;let i=t?Tee(e.actions):[];return tr("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},tr("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,a)=>{let o=!1,l=d=>{if(d.preventDefault(),o)return;o=!0;let h=fm(n.state.field(va).diagnostics,e);h&&s.apply(n,h.from,h.to)},{name:u}=s,c=i[a]?u.indexOf(i[a]):-1,f=c<0?u:[u.slice(0,c),tr("u",u.slice(c,c+1)),u.slice(c+1)];return tr("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[a]})"`}.`},f)}),e.source&&tr("div",{class:"cm-diagnosticSource"},e.source))}class Xje extends Lu{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return tr("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class B7{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Dee(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class X0{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)F7(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],a=Tee(s.actions);for(let o=0;o<a.length;o++)if(a[o].toUpperCase().charCodeAt(0)==i.keyCode){let l=fm(this.view.state.field(va).diagnostics,s);l&&s.actions[o].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=tr("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=tr("div",{class:"cm-panel-lint"},this.list,tr("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>F7(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(va).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(va),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(a,o,{spec:l})=>{let u=-1,c;for(let f=r;f<this.items.length;f++)if(this.items[f].diagnostic==l.diagnostic){u=f;break}u<0?(c=new B7(this.view,l.diagnostic),this.items.splice(r,0,c),i=!0):(c=this.items[u],u>r&&(this.items.splice(r,u-r),i=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new B7(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:o})=>{let l=o.height/this.list.offsetHeight;a.top<o.top?this.list.scrollTop-=(o.top-a.top)/l:a.bottom>o.bottom&&(this.list.scrollTop+=(a.bottom-o.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(va),r=fm(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Aee.of(r)})}static open(e){return new X0(e)}}function Yje(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Fb(n){return Yje(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Kje=bt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Fb("#d11")},".cm-lintRange-warning":{backgroundImage:Fb("orange")},".cm-lintRange-info":{backgroundImage:Fb("#999")},".cm-lintRange-hint":{backgroundImage:Fb("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Zje=[va,bt.decorations.compute([va],n=>{let{selected:e,panel:t}=n.field(va);return!e||!t||e.from==e.to?zt.none:zt.set([Vje.range(e.from,e.to)])}),jVe(Hje,{hideOn:Uje}),Kje];var z7=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,r=[];e.closeBracketsKeymap!==!1&&(r=r.concat(Nje)),e.defaultKeymap!==!1&&(r=r.concat(see)),e.searchKeymap!==!1&&(r=r.concat(YGe)),e.historyKeymap!==!1&&(r=r.concat(RWe)),e.foldKeymap!==!1&&(r=r.concat(jHe)),e.completionKeymap!==!1&&(r=r.concat(Mee)),e.lintKeymap!==!1&&(r=r.concat(qje));var i=[];return e.lineNumbers!==!1&&i.push(tHe()),e.highlightActiveLineGutter!==!1&&i.push(iHe()),e.highlightSpecialChars!==!1&&i.push(wVe()),e.history!==!1&&i.push(_We()),e.foldGutter!==!1&&i.push(KHe()),e.drawSelection!==!1&&i.push(cVe()),e.dropCursor!==!1&&i.push(mVe()),e.allowMultipleSelections!==!1&&i.push(bn.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(LHe()),e.syntaxHighlighting!==!1&&i.push(_Q(eWe,{fallback:!0})),e.bracketMatching!==!1&&i.push(oWe()),e.closeBrackets!==!1&&i.push(Cje()),e.autocompletion!==!1&&i.push(Fje()),e.rectangularSelection!==!1&&i.push(kVe()),t!==!1&&i.push(BVe()),e.highlightActiveLine!==!1&&i.push(AVe()),e.highlightSelectionMatches!==!1&&i.push(NGe()),e.tabSize&&typeof e.tabSize=="number"&&i.push(KE.of(" ".repeat(e.tabSize))),i.concat([Ty.of(r.flat())]).filter(Boolean)};const Jje="#e5c07b",U7="#e06c75",Qje="#56b6c2",eqe="#ffffff",Ew="#abb2bf",hN="#7d8799",tqe="#61afef",nqe="#98c379",$7="#d19a66",rqe="#c678dd",iqe="#21252b",V7="#2c313a",H7="#282c34",NA="#353a42",sqe="#3E4451",W7="#528bff",aqe=bt.theme({"&":{color:Ew,backgroundColor:H7},".cm-content":{caretColor:W7},".cm-cursor, .cm-dropCursor":{borderLeftColor:W7},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:sqe},".cm-panels":{backgroundColor:iqe,color:Ew},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:H7,color:hN,border:"none"},".cm-activeLineGutter":{backgroundColor:V7},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:NA},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:NA,borderBottomColor:NA},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:V7,color:Ew}}},{dark:!0}),oqe=Py.define([{tag:nt.keyword,color:rqe},{tag:[nt.name,nt.deleted,nt.character,nt.propertyName,nt.macroName],color:U7},{tag:[nt.function(nt.variableName),nt.labelName],color:tqe},{tag:[nt.color,nt.constant(nt.name),nt.standard(nt.name)],color:$7},{tag:[nt.definition(nt.name),nt.separator],color:Ew},{tag:[nt.typeName,nt.className,nt.number,nt.changed,nt.annotation,nt.modifier,nt.self,nt.namespace],color:Jje},{tag:[nt.operator,nt.operatorKeyword,nt.url,nt.escape,nt.regexp,nt.link,nt.special(nt.string)],color:Qje},{tag:[nt.meta,nt.comment],color:hN},{tag:nt.strong,fontWeight:"bold"},{tag:nt.emphasis,fontStyle:"italic"},{tag:nt.strikethrough,textDecoration:"line-through"},{tag:nt.link,color:hN,textDecoration:"underline"},{tag:nt.heading,fontWeight:"bold",color:U7},{tag:[nt.atom,nt.bool,nt.special(nt.variableName)],color:$7},{tag:[nt.processingInstruction,nt.string,nt.inserted],color:nqe},{tag:nt.invalid,color:eqe}]),lqe=[aqe,_Q(oqe)];var uqe=bt.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),cqe=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:r=!0,readOnly:i=!1,theme:s="light",placeholder:a="",basicSetup:o=!0}=e,l=[];switch(t&&l.unshift(Ty.of([EGe])),o&&(typeof o=="boolean"?l.unshift(z7()):l.unshift(z7(o))),a&&l.unshift(PVe(a)),s){case"light":l.push(uqe);break;case"dark":l.push(lqe);break;case"none":break;default:l.push(s);break}return r===!1&&l.push(bt.editable.of(!1)),i&&l.push(bn.readOnly.of(!0)),[...l]},fqe=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)}),G7=Pl.define(),dqe=[];function hqe(n){var{value:e,selection:t,onChange:r,onStatistics:i,onCreateEditor:s,onUpdate:a,extensions:o=dqe,autoFocus:l,theme:u="light",height:c=null,minHeight:f=null,maxHeight:d=null,width:h=null,minWidth:p=null,maxWidth:v=null,placeholder:y="",editable:m=!0,readOnly:S=!1,indentWithTab:b=!0,basicSetup:g=!0,root:w,initialState:x}=n,[M,A]=z.useState(),[N,C]=z.useState(),[T,R]=z.useState(),U=bt.theme({"&":{height:c,minHeight:f,maxHeight:d,width:h,minWidth:p,maxWidth:v},"& .cm-scroller":{height:"100% !important"}}),F=bt.updateListener.of(O=>{if(O.docChanged&&typeof r=="function"&&!O.transactions.some(X=>X.annotation(G7))){var $=O.state.doc,L=$.toString();r(L,O)}i&&i(fqe(O))}),B=cqe({theme:u,editable:m,readOnly:S,placeholder:y,indentWithTab:b,basicSetup:g}),D=[F,U,...B];return a&&typeof a=="function"&&D.push(bt.updateListener.of(a)),D=D.concat(o),z.useEffect(()=>{if(M&&!T){var O={doc:e,selection:t,extensions:D},$=x?bn.fromJSON(x.json,O,x.fields):bn.create(O);if(R($),!N){var L=new bt({state:$,parent:M,root:w});C(L),s&&s(L,$)}}return()=>{N&&(R(void 0),C(void 0))}},[M,T]),z.useEffect(()=>A(n.container),[n.container]),z.useEffect(()=>()=>{N&&(N.destroy(),C(void 0))},[N]),z.useEffect(()=>{l&&N&&N.focus()},[l,N]),z.useEffect(()=>{N&&N.dispatch({effects:dn.reconfigure.of(D)})},[u,o,c,f,d,h,p,v,y,m,S,b,g,r,a]),z.useEffect(()=>{if(e!==void 0){var O=N?N.state.doc.toString():"";N&&e!==O&&N.dispatch({changes:{from:0,to:O.length,insert:e||""},annotations:[G7.of(!0)]})}},[e,N]),{state:T,setState:R,view:N,setView:C,container:M,setContainer:A}}var pqe=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Nee=z.forwardRef((n,e)=>{var{className:t,value:r="",selection:i,extensions:s=[],onChange:a,onStatistics:o,onCreateEditor:l,onUpdate:u,autoFocus:c,theme:f="light",height:d,minHeight:h,maxHeight:p,width:v,minWidth:y,maxWidth:m,basicSetup:S,placeholder:b,indentWithTab:g,editable:w,readOnly:x,root:M,initialState:A}=n,N=dX(n,pqe),C=z.useRef(null),{state:T,view:R,container:U}=hqe({container:C.current,root:M,value:r,autoFocus:c,theme:f,height:d,minHeight:h,maxHeight:p,width:v,minWidth:y,maxWidth:m,basicSetup:S,placeholder:b,indentWithTab:g,editable:w,readOnly:x,selection:i,onChange:a,onStatistics:o,onCreateEditor:l,onUpdate:u,extensions:s,initialState:A});if(z.useImperativeHandle(e,()=>({editor:C.current,state:T,view:R}),[C,U,T,R]),typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var F=typeof f=="string"?"cm-theme-"+f:"cm-theme";return le.jsx("div",ot({ref:C,className:""+F+(t?" "+t:"")},N))});Nee.displayName="CodeMirror";function mqe(n){const[e,t]=z.useState(""),r=[Ty.of(see)];z.useEffect(()=>{n.activeAtom!=null&&t(n.activeAtom.code)},[n.activeAtom]);function i(){document.getElementById("code-window").classList.add("code-off")}return le.jsxs("div",{id:"code-window",className:" code-off login-page code-window-div",children:[le.jsx(Nee,{width:"100%",extensions:r,value:e,onChange:s=>{t(s)},theme:"dark"}),le.jsx("button",{type:"button",onClick:()=>n.activeAtom.updateCode(e),style:{display:"none"},id:"save-code-button",children:"Save Code"}),le.jsx("button",{type:"button",style:{display:"none"},id:"close-code-button",onClick:()=>i(),children:"Close Editor"})]})}function gqe(n){const e=vm();let t=n.props.authorizedUserOcto,r=n.props.activeAtom,i=n.props.setActiveAtom;const s=n.props.exportPopUp,a=n.props.setExportPopUp,[o,l]=z.useState(!0),[u,c]=z.useState(!0),[f,d]=z.useState(!0),[h,p]=z.useState(!0),[v,y]=z.useState(0),[m,S]=z.useState(!1);z.useState(0);const[b,g]=z.useState(!1);var w={a:"Assembly",b:"Loft",c:"Copy",d:"Difference",e:"Extrude",g:"GitHub",i:"Input",j:"Translate",r:"Rotate",u:"Rectangle",l:"Circle",m:"Molecule",s:"Save",v:"Paste",x:"Equation",y:"Code",z:"Undo"};z.useEffect(()=>{r&&r.atomType=="Molecule"&&g(!r.topLevel)},[r]),z.useEffect(()=>(window.addEventListener("keydown",x),()=>{window.removeEventListener("keydown",x)})),z.useEffect(()=>{const O=setInterval(()=>{S(!0),B(y)},12e4);return()=>clearInterval(O)},[]);const x=O=>{O.metaKey&&O.key=="s"&&(O.preventDefault(),S(!0),B(y))};let M=n.displayProps.cad,A=n.displayProps.setMesh,N=n.displayProps.mesh,C=n.displayProps.setWireMesh,T=n.displayProps.wireMesh;const R=async function(O,{owner:$,repo:L,base:X,changes:Z},Q){Q(35),X||O.request("GET /repos/{owner}/{repo}",{owner:$,repo:L}).then(K=>{Q(40),X=K.data.default_branch,O.rest.repos.listCommits({owner:$,repo:L,sha:X,per_page:1}).then(re=>{Q(50);let ce=re.data[0].sha;const ue=re.data[0].commit.tree.sha;O.rest.git.createTree({owner:$,repo:L,base_tree:ue,tree:Object.keys(Z.files).map(me=>Z.files[me]!=null?{path:me,mode:"100644",content:Z.files[me]}:{path:me,mode:"100644",sha:null})}).then(me=>{Q(60);const Ee=me.data.sha;O.rest.git.createCommit({owner:$,repo:L,message:Z.commit,tree:Ee,parents:[ce]}).then(xe=>{Q(80),ce=xe.data.sha,O.rest.git.updateRef({owner:$,repo:L,sha:ce,ref:"heads/"+X,force:!0}).then(Te=>{Q(90),console.warn("Project saved"),Q(100)})})})})})},U=async function(O){var $=new FileReader;$.onload=function(L){let X=L.target.result.split(",")[1];t.rest.repos.createOrUpdateFileContents({owner:k.currentUser,repo:k.currentRepoName,path:O.name,message:"Import File",content:X}).then(Z=>{r.updateFile(O,Z.data.content.sha),B(y)})},$.readAsDataURL(O)},F=async function(O,$){console.log("deleting file"),t.rest.repos.deleteFile({owner:k.currentUser,repo:k.currentRepoName,path:O,message:"Deleted node",sha:$})},B=async O=>{O(5);let $;$=await k.topLevelMolecule.generateProjectThumbnail().catch(xe=>{console.error("Error generating final project thumbnail: ",xe)}),O(10);var L=k.topLevelMolecule.serialize();L.filetypeVersion=1;const X=JSON.stringify(L,null,4);let Z=k.topLevelMolecule.formatBom();var Q="###### Note: Do not edit this file directly, it is automatically generated from the CAD model",K=Q+`

# `+k.currentRepoName+`

![](/project.svg)

`;O(20);let re=await k.topLevelMolecule.requestReadme(),ce=" ";re.forEach(xe=>{ce=ce.concat(xe.readMeText)+`

`}),K=K+`

`+ce+`

`;let ue={"BillOfMaterials.md":Z,"README.md":K,"project.abundance":X};const me=re;let Ee;me&&me.forEach(xe=>{xe.svg!=null&&(ue["readme"+xe.uniqueID+".svg"]=xe.svg,Ee=xe.svg)}),ue["project.svg"]=$||Ee||"",O(30),R(t,{owner:k.currentUser,repo:k.currentRepo.name,changes:{files:ue,commit:"Autosave"}},O)};if(t){if(k.currentRepo.owner.login==k.currentRepo.owner.login)return le.jsxs(le.Fragment,{children:[le.jsx("div",{id:"headerBar",children:le.jsx("img",{className:"thumnail-logo",src:"/imgs/abundance_logo.png",alt:"logo"})}),s?le.jsxs("div",{className:"login-popup",id:"exporting-popup-back",style:{padding:"0",border:"10px solid #3e3d3d"},children:[le.jsxs("div",{children:[" ",k.currentRepo?le.jsx(Xv,{to:`/${k.currentRepo.id}`,children:le.jsx("button",{className:"closeButton",children:le.jsx("img",{})})}):null]}),le.jsx(FX,{setExportPopUp:a,exporting:!0,authorizedUserOcto:t})]}):null,le.jsx(MZ,{run:!1}),le.jsx("button",{className:"shortcut-button",children:le.jsx("img",{style:{width:"20px"},src:"/imgs/keyboard.svg",alt:"keyboard"})}),le.jsxs("div",{id:"shortcutDiv",className:"hidden",children:[le.jsx("li",{style:{fontSize:"12px"},children:"Keyboard Shortcuts (Cmmd +)"}),Object.entries(w).map(([O,$])=>le.jsxs("li",{className:"shortcut",children:[O," : ",$]},O))]}),le.jsx(d9e,{authorizedUserOcto:t,savePopUp:m,setSavePopUp:S,saveProject:B,setExportPopUp:a,saveState:v,setSaveState:y,currentMoleculeTop:b,activeAtom:r,setActiveAtom:i}),le.jsx(mqe,{activeAtom:r}),le.jsx("input",{type:"file",id:"fileLoaderInput",style:{display:"none"},onChange:O=>{let $=O.target.files[0];U($)}}),le.jsx("input",{type:"button",id:"fileDeleteInput",style:{display:"none"},onClick:()=>{F(r.fileName,r.sha)}}),le.jsx(l7e,{props:{activeAtom:r,loadProject:n.props.loadProject,setActiveAtom:i,setSavePopUp:S,setSaveState:y,setTop:g,shortCuts:w},displayProps:{setMesh:A,cad:M,setWireMesh:C}}),le.jsxs("div",{className:"parent flex-parent",id:"lowerHalf",children:[r?le.jsx(CZ,{activeAtom:r,setActiveAtom:i,setGrid:l,setAxes:c,setWire:d,setSolid:p}):null,le.jsx(c7e,{props:{gridParam:o,axesParam:u,wireParam:f,solidParam:h,setSaveState:y,setSaveState:y},displayProps:{mesh:N,wireMesh:T,outdatedMesh:n.displayProps.outdatedMesh,setOutdatedMesh:n.displayProps.setOutdatedMesh}})]})]});e(`/run/${k.currentRepo.id}`)}else{console.warn("You are not logged in");const{id:O}=mH();var D=new mu;D.request("GET /repositories/:id",{id:O}).then($=>{k.currentRepoName=$.data.name,k.currentRepo=$.data})}}function vqe(n){return new Worker("/Abundance/assets/worker-D9wy17Eg.js",{name:n==null?void 0:n.name})}var Vh=null;const Hh=EH(new vqe);function yqe(){const[n,e]=z.useState(5),[t,r]=z.useState({}),[i,s]=z.useState(null),[a,o]=z.useState(!1);z.useEffect(()=>{Hh.createMesh(n).then(y=>r(y)),Hh.createMesh(n).then(y=>s(y))},[n]);const[l,u]=z.useState(!1),[c,f]=z.useState(null),[d,h]=z.useState(!1);z.useEffect(()=>{k.writeToDisplay=(y,m=!1)=>{console.log("write to display running "+y),o(!0),Hh.generateDisplayMesh(y).then(S=>{r(S),o(!1)}).catch(S=>{console.error("Can't display Mesh "+S)}),Hh.generateDisplayMesh(k.currentMolecule.output.value).then(S=>s(S)).catch(S=>{console.error("Can't comput Wireframe/No output "+S)})},k.cad=Hh});const p=function(){return new Promise((y,m)=>{window.location.href.includes("private")?I2.OAuth.initialize("6CQQE8MMCBFjdWEjevnTBMCQpsw"):I2.OAuth.initialize("BYP9iFpD7aTV9SDhnalvhZ4fwD8"),I2.OAuth.popup("github").then(S=>{Vh=new mu({auth:S.access_token}),Vh.request("GET /user",{}).then(b=>{k.currentUser=b.data.login,k.currentUser&&(u(!0),y(Vh))})})})},v=function(y){k.loadedRepo=y,k.currentRepoName=y.name,k.currentRepo=y,k.totalAtomCount=0,k.numberOfAtomsToLoad=0,k.startTime=new Date().getTime();var m=new mu;m.request("GET /repos/{owner}/{repo}/contents/project.abundance",{owner:y.owner.login,repo:y.name}).then(S=>{let b=JSON.parse(atob(S.data.content));b.filetypeVersion==1?k.topLevelMolecule.deserialize(b):k.topLevelMolecule.deserialize(convertFromOldFormat(b)),f(k.currentMolecule),k.currentMolecule.selected=!0})};return le.jsx("main",{children:le.jsx(Hie,{children:le.jsxs(Lie,{children:[le.jsx(Kb,{exact:!0,path:"/",element:le.jsx(Gke,{authorizedUserOcto:Vh,tryLogin:p,setIsLoggedIn:u,isloggedIn:l,exportPopUp:d,setExportPopUp:h})}),le.jsx(Kb,{path:"/:id",element:le.jsx(gqe,{props:{activeAtom:c,setActiveAtom:f,authorizedUserOcto:Vh,tryLogin:p,loadProject:v,exportPopUp:d,setExportPopUp:h},displayProps:{mesh:t,setMesh:r,size:n,cad:Hh,wireMesh:i,setWireMesh:s,outdatedMesh:a,setOutdatedMesh:o}})}),le.jsx(Kb,{path:"/run/:id",element:le.jsx(c9e,{props:{isloggedIn:l,setActiveAtom:f,activeAtom:k.currentMolecule,authorizedUserOcto:Vh,tryLogin:p,loadProject:v},displayProps:{mesh:t,wireMesh:i,outdatedMesh:a,setOutdatedMesh:o}})})]})})})}const xqe=PA.createRoot(document.getElementById("root"));xqe.render(le.jsx(Ae.StrictMode,{children:le.jsx(yqe,{})}));
