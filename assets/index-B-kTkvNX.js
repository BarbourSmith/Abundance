import{Octokit as fu}from"https://esm.sh/octokit@2.0.19";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();var cte=Object.defineProperty,hte=(n,e,t)=>e in n?cte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dte=(n,e,t)=>(hte(n,e+"",t),t);function fte(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();var fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function is(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function pte(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var I7={exports:{}},fE={},L7={exports:{}},vn={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var qv=Symbol.for("react.element"),mte=Symbol.for("react.portal"),gte=Symbol.for("react.fragment"),vte=Symbol.for("react.strict_mode"),yte=Symbol.for("react.profiler"),bte=Symbol.for("react.provider"),xte=Symbol.for("react.context"),wte=Symbol.for("react.forward_ref"),Ste=Symbol.for("react.suspense"),Ete=Symbol.for("react.memo"),_te=Symbol.for("react.lazy"),oI=Symbol.iterator;function Cte(n){return n===null||typeof n!="object"?null:(n=oI&&n[oI]||n["@@iterator"],typeof n=="function"?n:null)}var F7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B7=Object.assign,z7={};function cm(n,e,t){this.props=n,this.context=e,this.refs=z7,this.updater=t||F7}cm.prototype.isReactComponent={};cm.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};cm.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function U7(){}U7.prototype=cm.prototype;function hk(n,e,t){this.props=n,this.context=e,this.refs=z7,this.updater=t||F7}var dk=hk.prototype=new U7;dk.constructor=hk;B7(dk,cm.prototype);dk.isPureReactComponent=!0;var sI=Array.isArray,j7=Object.prototype.hasOwnProperty,fk={current:null},H7={key:!0,ref:!0,__self:!0,__source:!0};function V7(n,e,t){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)j7.call(e,r)&&!H7.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=t;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in s=n.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:qv,type:n,key:a,ref:o,props:i,_owner:fk.current}}function Ate(n,e){return{$$typeof:qv,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function pk(n){return typeof n=="object"&&n!==null&&n.$$typeof===qv}function Tte(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var lI=/\/+/g;function iC(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Tte(""+n.key):e.toString(36)}function Px(n,e,t,r,i){var a=typeof n;(a==="undefined"||a==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case qv:case mte:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+iC(o,0):r,sI(i)?(t="",n!=null&&(t=n.replace(lI,"$&/")+"/"),Px(i,e,t,"",function(u){return u})):i!=null&&(pk(i)&&(i=Ate(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(lI,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",sI(n))for(var s=0;s<n.length;s++){a=n[s];var l=r+iC(a,s);o+=Px(a,e,t,l,i)}else if(l=Cte(n),typeof l=="function")for(n=l.call(n),s=0;!(a=n.next()).done;)a=a.value,l=r+iC(a,s++),o+=Px(a,e,t,l,i);else if(a==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function E1(n,e,t){if(n==null)return n;var r=[],i=0;return Px(n,r,"","",function(a){return e.call(t,a,i++)}),r}function Mte(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ka={current:null},Rx={transition:null},Dte={ReactCurrentDispatcher:ka,ReactCurrentBatchConfig:Rx,ReactCurrentOwner:fk};vn.Children={map:E1,forEach:function(n,e,t){E1(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return E1(n,function(){e++}),e},toArray:function(n){return E1(n,function(e){return e})||[]},only:function(n){if(!pk(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};vn.Component=cm;vn.Fragment=gte;vn.Profiler=yte;vn.PureComponent=hk;vn.StrictMode=vte;vn.Suspense=Ste;vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dte;vn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=B7({},n.props),i=n.key,a=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=fk.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var s=n.type.defaultProps;for(l in e)j7.call(e,l)&&!H7.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:qv,type:n.type,key:i,ref:a,props:r,_owner:o}};vn.createContext=function(n){return n={$$typeof:xte,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:bte,_context:n},n.Consumer=n};vn.createElement=V7;vn.createFactory=function(n){var e=V7.bind(null,n);return e.type=n,e};vn.createRef=function(){return{current:null}};vn.forwardRef=function(n){return{$$typeof:wte,render:n}};vn.isValidElement=pk;vn.lazy=function(n){return{$$typeof:_te,_payload:{_status:-1,_result:n},_init:Mte}};vn.memo=function(n,e){return{$$typeof:Ete,type:n,compare:e===void 0?null:e}};vn.startTransition=function(n){var e=Rx.transition;Rx.transition={};try{n()}finally{Rx.transition=e}};vn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};vn.useCallback=function(n,e){return ka.current.useCallback(n,e)};vn.useContext=function(n){return ka.current.useContext(n)};vn.useDebugValue=function(){};vn.useDeferredValue=function(n){return ka.current.useDeferredValue(n)};vn.useEffect=function(n,e){return ka.current.useEffect(n,e)};vn.useId=function(){return ka.current.useId()};vn.useImperativeHandle=function(n,e,t){return ka.current.useImperativeHandle(n,e,t)};vn.useInsertionEffect=function(n,e){return ka.current.useInsertionEffect(n,e)};vn.useLayoutEffect=function(n,e){return ka.current.useLayoutEffect(n,e)};vn.useMemo=function(n,e){return ka.current.useMemo(n,e)};vn.useReducer=function(n,e,t){return ka.current.useReducer(n,e,t)};vn.useRef=function(n){return ka.current.useRef(n)};vn.useState=function(n){return ka.current.useState(n)};vn.useSyncExternalStore=function(n,e,t){return ka.current.useSyncExternalStore(n,e,t)};vn.useTransition=function(){return ka.current.useTransition()};vn.version="18.2.0";L7.exports=vn;var j=L7.exports;const Te=is(j),xw=fte({__proto__:null,default:Te},[j]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var kte=j,Nte=Symbol.for("react.element"),Ote=Symbol.for("react.fragment"),Pte=Object.prototype.hasOwnProperty,Rte=kte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ite={key:!0,ref:!0,__self:!0,__source:!0};function W7(n,e,t){var r,i={},a=null,o=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Pte.call(e,r)&&!Ite.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Nte,type:n,key:a,ref:o,props:i,_owner:Rte.current}}fE.Fragment=Ote;fE.jsx=W7;fE.jsxs=W7;I7.exports=fE;var ue=I7.exports,DT={},q7={exports:{}},Co={},G7={exports:{}},$7={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(n){function e(z,B){var X=z.length;z.push(B);e:for(;0<X;){var J=X-1>>>1,Q=z[J];if(0<i(Q,B))z[J]=B,z[X]=Q,X=J;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var B=z[0],X=z.pop();if(X!==B){z[0]=X;e:for(var J=0,Q=z.length,Z=Q>>>1;J<Z;){var re=2*(J+1)-1,fe=z[re],se=re+1,ye=z[se];if(0>i(fe,X))se<Q&&0>i(ye,fe)?(z[J]=ye,z[se]=X,J=se):(z[J]=fe,z[re]=X,J=re);else if(se<Q&&0>i(ye,X))z[J]=ye,z[se]=X,J=se;else break e}}return B}function i(z,B){var X=z.sortIndex-B.sortIndex;return X!==0?X:z.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var B=t(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=z)r(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=t(u)}}function m(z){if(v=!1,b(z),!p)if(t(l)!==null)p=!0,k(x);else{var B=t(u);B!==null&&P(m,B.startTime-z)}}function x(z,B){p=!1,v&&(v=!1,g(T),T=-1),f=!0;var X=d;try{for(b(B),h=t(l);h!==null&&(!(h.expirationTime>B)||z&&!D());){var J=h.callback;if(typeof J=="function"){h.callback=null,d=h.priorityLevel;var Q=J(h.expirationTime<=B);B=n.unstable_now(),typeof Q=="function"?h.callback=Q:h===t(l)&&r(l),b(B)}else r(l);h=t(l)}if(h!==null)var Z=!0;else{var re=t(u);re!==null&&P(m,re.startTime-B),Z=!1}return Z}finally{h=null,d=X,f=!1}}var S=!1,C=null,T=-1,M=5,A=-1;function D(){return!(n.unstable_now()-A<M)}function O(){if(C!==null){var z=n.unstable_now();A=z;var B=!0;try{B=C(!0,z)}finally{B?U():(S=!1,C=null)}}else S=!1}var U;if(typeof w=="function")U=function(){w(O)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,F=L.port2;L.port1.onmessage=O,U=function(){F.postMessage(null)}}else U=function(){y(O,0)};function k(z){C=z,S||(S=!0,U())}function P(z,B){T=y(function(){z(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,k(x))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var X=d;d=B;try{return z()}finally{d=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,B){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=d;d=z;try{return B()}finally{d=X}},n.unstable_scheduleCallback=function(z,B,X){var J=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?J+X:J):X=J,z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=X+Q,z={id:c++,callback:B,priorityLevel:z,startTime:X,expirationTime:Q,sortIndex:-1},X>J?(z.sortIndex=X,e(u,z),t(l)===null&&z===t(u)&&(v?(g(T),T=-1):v=!0,P(m,X-J))):(z.sortIndex=Q,e(l,z),p||f||(p=!0,k(x))),z},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(z){var B=d;return function(){var X=d;d=B;try{return z.apply(this,arguments)}finally{d=X}}}})($7);G7.exports=$7;var Lte=G7.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var X7=j,Eo=Lte;function ut(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y7=new Set,A0={};function Od(n,e){Lp(n,e),Lp(n+"Capture",e)}function Lp(n,e){for(A0[n]=e,n=0;n<e.length;n++)Y7.add(e[n])}var pu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kT=Object.prototype.hasOwnProperty,Fte=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uI={},cI={};function Bte(n){return kT.call(cI,n)?!0:kT.call(uI,n)?!1:Fte.test(n)?cI[n]=!0:(uI[n]=!0,!1)}function zte(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Ute(n,e,t,r){if(e===null||typeof e>"u"||zte(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Na(n,e,t,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ri[n]=new Na(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ri[e]=new Na(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ri[n]=new Na(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ri[n]=new Na(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ri[n]=new Na(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ri[n]=new Na(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ri[n]=new Na(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ri[n]=new Na(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ri[n]=new Na(n,5,!1,n.toLowerCase(),null,!1,!1)});var mk=/[\-:]([a-z])/g;function gk(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(mk,gk);Ri[e]=new Na(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(mk,gk);Ri[e]=new Na(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(mk,gk);Ri[e]=new Na(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ri[n]=new Na(n,1,!1,n.toLowerCase(),null,!1,!1)});Ri.xlinkHref=new Na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ri[n]=new Na(n,1,!1,n.toLowerCase(),null,!0,!0)});function vk(n,e,t,r){var i=Ri.hasOwnProperty(e)?Ri[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ute(e,t,i,r)&&(t=null),r||i===null?Bte(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ku=X7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_1=Symbol.for("react.element"),$f=Symbol.for("react.portal"),Xf=Symbol.for("react.fragment"),yk=Symbol.for("react.strict_mode"),NT=Symbol.for("react.profiler"),Z7=Symbol.for("react.provider"),J7=Symbol.for("react.context"),bk=Symbol.for("react.forward_ref"),OT=Symbol.for("react.suspense"),PT=Symbol.for("react.suspense_list"),xk=Symbol.for("react.memo"),rc=Symbol.for("react.lazy"),K7=Symbol.for("react.offscreen"),hI=Symbol.iterator;function sg(n){return n===null||typeof n!="object"?null:(n=hI&&n[hI]||n["@@iterator"],typeof n=="function"?n:null)}var Er=Object.assign,aC;function jg(n){if(aC===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);aC=e&&e[1]||""}return`
`+aC+n}var oC=!1;function sC(n,e){if(!n||oC)return"";oC=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=s);break}}}finally{oC=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?jg(n):""}function jte(n){switch(n.tag){case 5:return jg(n.type);case 16:return jg("Lazy");case 13:return jg("Suspense");case 19:return jg("SuspenseList");case 0:case 2:case 15:return n=sC(n.type,!1),n;case 11:return n=sC(n.type.render,!1),n;case 1:return n=sC(n.type,!0),n;default:return""}}function RT(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Xf:return"Fragment";case $f:return"Portal";case NT:return"Profiler";case yk:return"StrictMode";case OT:return"Suspense";case PT:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case J7:return(n.displayName||"Context")+".Consumer";case Z7:return(n._context.displayName||"Context")+".Provider";case bk:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case xk:return e=n.displayName||null,e!==null?e:RT(n.type)||"Memo";case rc:e=n._payload,n=n._init;try{return RT(n(e))}catch{}}return null}function Hte(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return RT(e);case 8:return e===yk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Q7(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Vte(n){var e=Q7(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,a=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function C1(n){n._valueTracker||(n._valueTracker=Vte(n))}function ej(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Q7(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function ww(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function IT(n,e){var t=e.checked;return Er({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function dI(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Bc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tj(n,e){e=e.checked,e!=null&&vk(n,"checked",e,!1)}function LT(n,e){tj(n,e);var t=Bc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?FT(n,e.type,t):e.hasOwnProperty("defaultValue")&&FT(n,e.type,Bc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function fI(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function FT(n,e,t){(e!=="number"||ww(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Hg=Array.isArray;function gp(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Bc(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function BT(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ut(91));return Er({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function pI(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ut(92));if(Hg(t)){if(1<t.length)throw Error(ut(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Bc(t)}}function nj(n,e){var t=Bc(e.value),r=Bc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function mI(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function rj(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zT(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?rj(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var A1,ij=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(A1=A1||document.createElement("div"),A1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=A1.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function T0(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var r0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wte=["Webkit","ms","Moz","O"];Object.keys(r0).forEach(function(n){Wte.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),r0[e]=r0[n]})});function aj(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||r0.hasOwnProperty(n)&&r0[n]?(""+e).trim():e+"px"}function oj(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=aj(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var qte=Er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function UT(n,e){if(e){if(qte[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ut(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ut(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ut(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ut(62))}}function jT(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var HT=null;function wk(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var VT=null,vp=null,yp=null;function gI(n){if(n=Xv(n)){if(typeof VT!="function")throw Error(ut(280));var e=n.stateNode;e&&(e=yE(e),VT(n.stateNode,n.type,e))}}function sj(n){vp?yp?yp.push(n):yp=[n]:vp=n}function lj(){if(vp){var n=vp,e=yp;if(yp=vp=null,gI(n),e)for(n=0;n<e.length;n++)gI(e[n])}}function uj(n,e){return n(e)}function cj(){}var lC=!1;function hj(n,e,t){if(lC)return n(e,t);lC=!0;try{return uj(n,e,t)}finally{lC=!1,(vp!==null||yp!==null)&&(cj(),lj())}}function M0(n,e){var t=n.stateNode;if(t===null)return null;var r=yE(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ut(231,e,typeof t));return t}var WT=!1;if(pu)try{var lg={};Object.defineProperty(lg,"passive",{get:function(){WT=!0}}),window.addEventListener("test",lg,lg),window.removeEventListener("test",lg,lg)}catch{WT=!1}function Gte(n,e,t,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var i0=!1,Sw=null,Ew=!1,qT=null,$te={onError:function(n){i0=!0,Sw=n}};function Xte(n,e,t,r,i,a,o,s,l){i0=!1,Sw=null,Gte.apply($te,arguments)}function Yte(n,e,t,r,i,a,o,s,l){if(Xte.apply(this,arguments),i0){if(i0){var u=Sw;i0=!1,Sw=null}else throw Error(ut(198));Ew||(Ew=!0,qT=u)}}function Pd(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function dj(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function vI(n){if(Pd(n)!==n)throw Error(ut(188))}function Zte(n){var e=n.alternate;if(!e){if(e=Pd(n),e===null)throw Error(ut(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===t)return vI(i),n;if(a===r)return vI(i),e;a=a.sibling}throw Error(ut(188))}if(t.return!==r.return)t=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===t){o=!0,t=i,r=a;break}if(s===r){o=!0,r=i,t=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===t){o=!0,t=a,r=i;break}if(s===r){o=!0,r=a,t=i;break}s=s.sibling}if(!o)throw Error(ut(189))}}if(t.alternate!==r)throw Error(ut(190))}if(t.tag!==3)throw Error(ut(188));return t.stateNode.current===t?n:e}function fj(n){return n=Zte(n),n!==null?pj(n):null}function pj(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=pj(n);if(e!==null)return e;n=n.sibling}return null}var mj=Eo.unstable_scheduleCallback,yI=Eo.unstable_cancelCallback,Jte=Eo.unstable_shouldYield,Kte=Eo.unstable_requestPaint,Ur=Eo.unstable_now,Qte=Eo.unstable_getCurrentPriorityLevel,Sk=Eo.unstable_ImmediatePriority,gj=Eo.unstable_UserBlockingPriority,_w=Eo.unstable_NormalPriority,ene=Eo.unstable_LowPriority,vj=Eo.unstable_IdlePriority,pE=null,dl=null;function tne(n){if(dl&&typeof dl.onCommitFiberRoot=="function")try{dl.onCommitFiberRoot(pE,n,void 0,(n.current.flags&128)===128)}catch{}}var Ss=Math.clz32?Math.clz32:ine,nne=Math.log,rne=Math.LN2;function ine(n){return n>>>=0,n===0?32:31-(nne(n)/rne|0)|0}var T1=64,M1=4194304;function Vg(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Cw(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,a=n.pingedLanes,o=t&268435455;if(o!==0){var s=o&~i;s!==0?r=Vg(s):(a&=o,a!==0&&(r=Vg(a)))}else o=t&~i,o!==0?r=Vg(o):a!==0&&(r=Vg(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ss(e),i=1<<t,r|=n[t],e&=~i;return r}function ane(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function one(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,a=n.pendingLanes;0<a;){var o=31-Ss(a),s=1<<o,l=i[o];l===-1?(!(s&t)||s&r)&&(i[o]=ane(s,e)):l<=e&&(n.expiredLanes|=s),a&=~s}}function GT(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function yj(){var n=T1;return T1<<=1,!(T1&4194240)&&(T1=64),n}function uC(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Gv(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ss(e),n[e]=t}function sne(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ss(t),a=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~a}}function Ek(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ss(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Un=0;function bj(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var xj,_k,wj,Sj,Ej,$T=!1,D1=[],Ec=null,_c=null,Cc=null,D0=new Map,k0=new Map,uc=[],lne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bI(n,e){switch(n){case"focusin":case"focusout":Ec=null;break;case"dragenter":case"dragleave":_c=null;break;case"mouseover":case"mouseout":Cc=null;break;case"pointerover":case"pointerout":D0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":k0.delete(e.pointerId)}}function ug(n,e,t,r,i,a){return n===null||n.nativeEvent!==a?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Xv(e),e!==null&&_k(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function une(n,e,t,r,i){switch(e){case"focusin":return Ec=ug(Ec,n,e,t,r,i),!0;case"dragenter":return _c=ug(_c,n,e,t,r,i),!0;case"mouseover":return Cc=ug(Cc,n,e,t,r,i),!0;case"pointerover":var a=i.pointerId;return D0.set(a,ug(D0.get(a)||null,n,e,t,r,i)),!0;case"gotpointercapture":return a=i.pointerId,k0.set(a,ug(k0.get(a)||null,n,e,t,r,i)),!0}return!1}function _j(n){var e=qh(n.target);if(e!==null){var t=Pd(e);if(t!==null){if(e=t.tag,e===13){if(e=dj(t),e!==null){n.blockedOn=e,Ej(n.priority,function(){wj(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ix(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=XT(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);HT=r,t.target.dispatchEvent(r),HT=null}else return e=Xv(t),e!==null&&_k(e),n.blockedOn=t,!1;e.shift()}return!0}function xI(n,e,t){Ix(n)&&t.delete(e)}function cne(){$T=!1,Ec!==null&&Ix(Ec)&&(Ec=null),_c!==null&&Ix(_c)&&(_c=null),Cc!==null&&Ix(Cc)&&(Cc=null),D0.forEach(xI),k0.forEach(xI)}function cg(n,e){n.blockedOn===e&&(n.blockedOn=null,$T||($T=!0,Eo.unstable_scheduleCallback(Eo.unstable_NormalPriority,cne)))}function N0(n){function e(i){return cg(i,n)}if(0<D1.length){cg(D1[0],n);for(var t=1;t<D1.length;t++){var r=D1[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Ec!==null&&cg(Ec,n),_c!==null&&cg(_c,n),Cc!==null&&cg(Cc,n),D0.forEach(e),k0.forEach(e),t=0;t<uc.length;t++)r=uc[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<uc.length&&(t=uc[0],t.blockedOn===null);)_j(t),t.blockedOn===null&&uc.shift()}var bp=ku.ReactCurrentBatchConfig,Aw=!0;function hne(n,e,t,r){var i=Un,a=bp.transition;bp.transition=null;try{Un=1,Ck(n,e,t,r)}finally{Un=i,bp.transition=a}}function dne(n,e,t,r){var i=Un,a=bp.transition;bp.transition=null;try{Un=4,Ck(n,e,t,r)}finally{Un=i,bp.transition=a}}function Ck(n,e,t,r){if(Aw){var i=XT(n,e,t,r);if(i===null)bC(n,e,r,Tw,t),bI(n,r);else if(une(i,n,e,t,r))r.stopPropagation();else if(bI(n,r),e&4&&-1<lne.indexOf(n)){for(;i!==null;){var a=Xv(i);if(a!==null&&xj(a),a=XT(n,e,t,r),a===null&&bC(n,e,r,Tw,t),a===i)break;i=a}i!==null&&r.stopPropagation()}else bC(n,e,r,null,t)}}var Tw=null;function XT(n,e,t,r){if(Tw=null,n=wk(r),n=qh(n),n!==null)if(e=Pd(n),e===null)n=null;else if(t=e.tag,t===13){if(n=dj(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Tw=n,null}function Cj(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qte()){case Sk:return 1;case gj:return 4;case _w:case ene:return 16;case vj:return 536870912;default:return 16}default:return 16}}var fc=null,Ak=null,Lx=null;function Aj(){if(Lx)return Lx;var n,e=Ak,t=e.length,r,i="value"in fc?fc.value:fc.textContent,a=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[a-r];r++);return Lx=i.slice(n,1<r?1-r:void 0)}function Fx(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function k1(){return!0}function wI(){return!1}function Ao(n){function e(t,r,i,a,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in n)n.hasOwnProperty(s)&&(t=n[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?k1:wI,this.isPropagationStopped=wI,this}return Er(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=k1)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=k1)},persist:function(){},isPersistent:k1}),e}var hm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tk=Ao(hm),$v=Er({},hm,{view:0,detail:0}),fne=Ao($v),cC,hC,hg,mE=Er({},$v,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mk,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hg&&(hg&&n.type==="mousemove"?(cC=n.screenX-hg.screenX,hC=n.screenY-hg.screenY):hC=cC=0,hg=n),cC)},movementY:function(n){return"movementY"in n?n.movementY:hC}}),SI=Ao(mE),pne=Er({},mE,{dataTransfer:0}),mne=Ao(pne),gne=Er({},$v,{relatedTarget:0}),dC=Ao(gne),vne=Er({},hm,{animationName:0,elapsedTime:0,pseudoElement:0}),yne=Ao(vne),bne=Er({},hm,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xne=Ao(bne),wne=Er({},hm,{data:0}),EI=Ao(wne),Sne={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ene={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_ne={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cne(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=_ne[n])?!!e[n]:!1}function Mk(){return Cne}var Ane=Er({},$v,{key:function(n){if(n.key){var e=Sne[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Fx(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ene[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mk,charCode:function(n){return n.type==="keypress"?Fx(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fx(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Tne=Ao(Ane),Mne=Er({},mE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_I=Ao(Mne),Dne=Er({},$v,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mk}),kne=Ao(Dne),Nne=Er({},hm,{propertyName:0,elapsedTime:0,pseudoElement:0}),One=Ao(Nne),Pne=Er({},mE,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Rne=Ao(Pne),Ine=[9,13,27,32],Dk=pu&&"CompositionEvent"in window,a0=null;pu&&"documentMode"in document&&(a0=document.documentMode);var Lne=pu&&"TextEvent"in window&&!a0,Tj=pu&&(!Dk||a0&&8<a0&&11>=a0),CI=" ",AI=!1;function Mj(n,e){switch(n){case"keyup":return Ine.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dj(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Yf=!1;function Fne(n,e){switch(n){case"compositionend":return Dj(e);case"keypress":return e.which!==32?null:(AI=!0,CI);case"textInput":return n=e.data,n===CI&&AI?null:n;default:return null}}function Bne(n,e){if(Yf)return n==="compositionend"||!Dk&&Mj(n,e)?(n=Aj(),Lx=Ak=fc=null,Yf=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tj&&e.locale!=="ko"?null:e.data;default:return null}}var zne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TI(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!zne[n.type]:e==="textarea"}function kj(n,e,t,r){sj(r),e=Mw(e,"onChange"),0<e.length&&(t=new Tk("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var o0=null,O0=null;function Une(n){jj(n,0)}function gE(n){var e=Kf(n);if(ej(e))return n}function jne(n,e){if(n==="change")return e}var Nj=!1;if(pu){var fC;if(pu){var pC="oninput"in document;if(!pC){var MI=document.createElement("div");MI.setAttribute("oninput","return;"),pC=typeof MI.oninput=="function"}fC=pC}else fC=!1;Nj=fC&&(!document.documentMode||9<document.documentMode)}function DI(){o0&&(o0.detachEvent("onpropertychange",Oj),O0=o0=null)}function Oj(n){if(n.propertyName==="value"&&gE(O0)){var e=[];kj(e,O0,n,wk(n)),hj(Une,e)}}function Hne(n,e,t){n==="focusin"?(DI(),o0=e,O0=t,o0.attachEvent("onpropertychange",Oj)):n==="focusout"&&DI()}function Vne(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return gE(O0)}function Wne(n,e){if(n==="click")return gE(e)}function qne(n,e){if(n==="input"||n==="change")return gE(e)}function Gne(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var As=typeof Object.is=="function"?Object.is:Gne;function P0(n,e){if(As(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!kT.call(e,i)||!As(n[i],e[i]))return!1}return!0}function kI(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function NI(n,e){var t=kI(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=kI(t)}}function Pj(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Pj(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Rj(){for(var n=window,e=ww();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=ww(n.document)}return e}function kk(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function $ne(n){var e=Rj(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Pj(t.ownerDocument.documentElement,t)){if(r!==null&&kk(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!n.extend&&a>r&&(i=r,r=a,a=i),i=NI(t,a);var o=NI(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),a>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Xne=pu&&"documentMode"in document&&11>=document.documentMode,Zf=null,YT=null,s0=null,ZT=!1;function OI(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ZT||Zf==null||Zf!==ww(r)||(r=Zf,"selectionStart"in r&&kk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),s0&&P0(s0,r)||(s0=r,r=Mw(YT,"onSelect"),0<r.length&&(e=new Tk("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Zf)))}function N1(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Jf={animationend:N1("Animation","AnimationEnd"),animationiteration:N1("Animation","AnimationIteration"),animationstart:N1("Animation","AnimationStart"),transitionend:N1("Transition","TransitionEnd")},mC={},Ij={};pu&&(Ij=document.createElement("div").style,"AnimationEvent"in window||(delete Jf.animationend.animation,delete Jf.animationiteration.animation,delete Jf.animationstart.animation),"TransitionEvent"in window||delete Jf.transitionend.transition);function vE(n){if(mC[n])return mC[n];if(!Jf[n])return n;var e=Jf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Ij)return mC[n]=e[t];return n}var Lj=vE("animationend"),Fj=vE("animationiteration"),Bj=vE("animationstart"),zj=vE("transitionend"),Uj=new Map,PI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eh(n,e){Uj.set(n,e),Od(e,[n])}for(var gC=0;gC<PI.length;gC++){var vC=PI[gC],Yne=vC.toLowerCase(),Zne=vC[0].toUpperCase()+vC.slice(1);eh(Yne,"on"+Zne)}eh(Lj,"onAnimationEnd");eh(Fj,"onAnimationIteration");eh(Bj,"onAnimationStart");eh("dblclick","onDoubleClick");eh("focusin","onFocus");eh("focusout","onBlur");eh(zj,"onTransitionEnd");Lp("onMouseEnter",["mouseout","mouseover"]);Lp("onMouseLeave",["mouseout","mouseover"]);Lp("onPointerEnter",["pointerout","pointerover"]);Lp("onPointerLeave",["pointerout","pointerover"]);Od("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Od("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Od("onBeforeInput",["compositionend","keypress","textInput","paste"]);Od("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Od("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Od("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jne=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wg));function RI(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Yte(r,e,void 0,n),n.currentTarget=null}function jj(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;RI(i,s,u),a=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;RI(i,s,u),a=l}}}if(Ew)throw n=qT,Ew=!1,qT=null,n}function ar(n,e){var t=e[tM];t===void 0&&(t=e[tM]=new Set);var r=n+"__bubble";t.has(r)||(Hj(e,n,2,!1),t.add(r))}function yC(n,e,t){var r=0;e&&(r|=4),Hj(t,n,r,e)}var O1="_reactListening"+Math.random().toString(36).slice(2);function R0(n){if(!n[O1]){n[O1]=!0,Y7.forEach(function(t){t!=="selectionchange"&&(Jne.has(t)||yC(t,!1,n),yC(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[O1]||(e[O1]=!0,yC("selectionchange",!1,e))}}function Hj(n,e,t,r){switch(Cj(e)){case 1:var i=hne;break;case 4:i=dne;break;default:i=Ck}t=i.bind(null,e,t,n),i=void 0,!WT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function bC(n,e,t,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=qh(s),o===null)return;if(l=o.tag,l===5||l===6){r=a=o;continue e}s=s.parentNode}}r=r.return}hj(function(){var u=a,c=wk(t),h=[];e:{var d=Uj.get(n);if(d!==void 0){var f=Tk,p=n;switch(n){case"keypress":if(Fx(t)===0)break e;case"keydown":case"keyup":f=Tne;break;case"focusin":p="focus",f=dC;break;case"focusout":p="blur",f=dC;break;case"beforeblur":case"afterblur":f=dC;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=SI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=mne;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=kne;break;case Lj:case Fj:case Bj:f=yne;break;case zj:f=One;break;case"scroll":f=fne;break;case"wheel":f=Rne;break;case"copy":case"cut":case"paste":f=xne;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=_I}var v=(e&4)!==0,y=!v&&n==="scroll",g=v?d!==null?d+"Capture":null:d;v=[];for(var w=u,b;w!==null;){b=w;var m=b.stateNode;if(b.tag===5&&m!==null&&(b=m,g!==null&&(m=M0(w,g),m!=null&&v.push(I0(w,m,b)))),y)break;w=w.return}0<v.length&&(d=new f(d,p,null,t,c),h.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&t!==HT&&(p=t.relatedTarget||t.fromElement)&&(qh(p)||p[mu]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=u,p=p?qh(p):null,p!==null&&(y=Pd(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(v=SI,m="onMouseLeave",g="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(v=_I,m="onPointerLeave",g="onPointerEnter",w="pointer"),y=f==null?d:Kf(f),b=p==null?d:Kf(p),d=new v(m,w+"leave",f,t,c),d.target=y,d.relatedTarget=b,m=null,qh(c)===u&&(v=new v(g,w+"enter",p,t,c),v.target=b,v.relatedTarget=y,m=v),y=m,f&&p)t:{for(v=f,g=p,w=0,b=v;b;b=af(b))w++;for(b=0,m=g;m;m=af(m))b++;for(;0<w-b;)v=af(v),w--;for(;0<b-w;)g=af(g),b--;for(;w--;){if(v===g||g!==null&&v===g.alternate)break t;v=af(v),g=af(g)}v=null}else v=null;f!==null&&II(h,d,f,v,!1),p!==null&&y!==null&&II(h,y,p,v,!0)}}e:{if(d=u?Kf(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var x=jne;else if(TI(d))if(Nj)x=qne;else{x=Vne;var S=Hne}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=Wne);if(x&&(x=x(n,u))){kj(h,x,t,c);break e}S&&S(n,d,u),n==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&FT(d,"number",d.value)}switch(S=u?Kf(u):window,n){case"focusin":(TI(S)||S.contentEditable==="true")&&(Zf=S,YT=u,s0=null);break;case"focusout":s0=YT=Zf=null;break;case"mousedown":ZT=!0;break;case"contextmenu":case"mouseup":case"dragend":ZT=!1,OI(h,t,c);break;case"selectionchange":if(Xne)break;case"keydown":case"keyup":OI(h,t,c)}var C;if(Dk)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Yf?Mj(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(Tj&&t.locale!=="ko"&&(Yf||T!=="onCompositionStart"?T==="onCompositionEnd"&&Yf&&(C=Aj()):(fc=c,Ak="value"in fc?fc.value:fc.textContent,Yf=!0)),S=Mw(u,T),0<S.length&&(T=new EI(T,n,null,t,c),h.push({event:T,listeners:S}),C?T.data=C:(C=Dj(t),C!==null&&(T.data=C)))),(C=Lne?Fne(n,t):Bne(n,t))&&(u=Mw(u,"onBeforeInput"),0<u.length&&(c=new EI("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=C))}jj(h,e)})}function I0(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Mw(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=M0(n,t),a!=null&&r.unshift(I0(n,a,i)),a=M0(n,e),a!=null&&r.push(I0(n,a,i))),n=n.return}return r}function af(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function II(n,e,t,r,i){for(var a=e._reactName,o=[];t!==null&&t!==r;){var s=t,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,i?(l=M0(t,a),l!=null&&o.unshift(I0(t,l,s))):i||(l=M0(t,a),l!=null&&o.push(I0(t,l,s)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Kne=/\r\n?/g,Qne=/\u0000|\uFFFD/g;function LI(n){return(typeof n=="string"?n:""+n).replace(Kne,`
`).replace(Qne,"")}function P1(n,e,t){if(e=LI(e),LI(n)!==e&&t)throw Error(ut(425))}function Dw(){}var JT=null,KT=null;function QT(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var eM=typeof setTimeout=="function"?setTimeout:void 0,ere=typeof clearTimeout=="function"?clearTimeout:void 0,FI=typeof Promise=="function"?Promise:void 0,tre=typeof queueMicrotask=="function"?queueMicrotask:typeof FI<"u"?function(n){return FI.resolve(null).then(n).catch(nre)}:eM;function nre(n){setTimeout(function(){throw n})}function xC(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),N0(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);N0(e)}function Ac(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function BI(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var dm=Math.random().toString(36).slice(2),rl="__reactFiber$"+dm,L0="__reactProps$"+dm,mu="__reactContainer$"+dm,tM="__reactEvents$"+dm,rre="__reactListeners$"+dm,ire="__reactHandles$"+dm;function qh(n){var e=n[rl];if(e)return e;for(var t=n.parentNode;t;){if(e=t[mu]||t[rl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=BI(n);n!==null;){if(t=n[rl])return t;n=BI(n)}return e}n=t,t=n.parentNode}return null}function Xv(n){return n=n[rl]||n[mu],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Kf(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ut(33))}function yE(n){return n[L0]||null}var nM=[],Qf=-1;function th(n){return{current:n}}function lr(n){0>Qf||(n.current=nM[Qf],nM[Qf]=null,Qf--)}function ir(n,e){Qf++,nM[Qf]=n.current,n.current=e}var zc={},ta=th(zc),Xa=th(!1),pd=zc;function Fp(n,e){var t=n.type.contextTypes;if(!t)return zc;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in t)i[a]=e[a];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ya(n){return n=n.childContextTypes,n!=null}function kw(){lr(Xa),lr(ta)}function zI(n,e,t){if(ta.current!==zc)throw Error(ut(168));ir(ta,e),ir(Xa,t)}function Vj(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ut(108,Hte(n)||"Unknown",i));return Er({},t,r)}function Nw(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||zc,pd=ta.current,ir(ta,n),ir(Xa,Xa.current),!0}function UI(n,e,t){var r=n.stateNode;if(!r)throw Error(ut(169));t?(n=Vj(n,e,pd),r.__reactInternalMemoizedMergedChildContext=n,lr(Xa),lr(ta),ir(ta,n)):lr(Xa),ir(Xa,t)}var Yl=null,bE=!1,wC=!1;function Wj(n){Yl===null?Yl=[n]:Yl.push(n)}function are(n){bE=!0,Wj(n)}function nh(){if(!wC&&Yl!==null){wC=!0;var n=0,e=Un;try{var t=Yl;for(Un=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Yl=null,bE=!1}catch(i){throw Yl!==null&&(Yl=Yl.slice(n+1)),mj(Sk,nh),i}finally{Un=e,wC=!1}}return null}var ep=[],tp=0,Ow=null,Pw=0,zo=[],Uo=0,md=null,eu=1,tu="";function Oh(n,e){ep[tp++]=Pw,ep[tp++]=Ow,Ow=n,Pw=e}function qj(n,e,t){zo[Uo++]=eu,zo[Uo++]=tu,zo[Uo++]=md,md=n;var r=eu;n=tu;var i=32-Ss(r)-1;r&=~(1<<i),t+=1;var a=32-Ss(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,eu=1<<32-Ss(e)+i|t<<i|r,tu=a+n}else eu=1<<a|t<<i|r,tu=n}function Nk(n){n.return!==null&&(Oh(n,1),qj(n,1,0))}function Ok(n){for(;n===Ow;)Ow=ep[--tp],ep[tp]=null,Pw=ep[--tp],ep[tp]=null;for(;n===md;)md=zo[--Uo],zo[Uo]=null,tu=zo[--Uo],zo[Uo]=null,eu=zo[--Uo],zo[Uo]=null}var bo=null,vo=null,dr=!1,vs=null;function Gj(n,e){var t=Wo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function jI(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,bo=n,vo=Ac(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,bo=n,vo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=md!==null?{id:eu,overflow:tu}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Wo(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,bo=n,vo=null,!0):!1;default:return!1}}function rM(n){return(n.mode&1)!==0&&(n.flags&128)===0}function iM(n){if(dr){var e=vo;if(e){var t=e;if(!jI(n,e)){if(rM(n))throw Error(ut(418));e=Ac(t.nextSibling);var r=bo;e&&jI(n,e)?Gj(r,t):(n.flags=n.flags&-4097|2,dr=!1,bo=n)}}else{if(rM(n))throw Error(ut(418));n.flags=n.flags&-4097|2,dr=!1,bo=n}}}function HI(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;bo=n}function R1(n){if(n!==bo)return!1;if(!dr)return HI(n),dr=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!QT(n.type,n.memoizedProps)),e&&(e=vo)){if(rM(n))throw $j(),Error(ut(418));for(;e;)Gj(n,e),e=Ac(e.nextSibling)}if(HI(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ut(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){vo=Ac(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}vo=null}}else vo=bo?Ac(n.stateNode.nextSibling):null;return!0}function $j(){for(var n=vo;n;)n=Ac(n.nextSibling)}function Bp(){vo=bo=null,dr=!1}function Pk(n){vs===null?vs=[n]:vs.push(n)}var ore=ku.ReactCurrentBatchConfig;function ps(n,e){if(n&&n.defaultProps){e=Er({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Rw=th(null),Iw=null,np=null,Rk=null;function Ik(){Rk=np=Iw=null}function Lk(n){var e=Rw.current;lr(Rw),n._currentValue=e}function aM(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function xp(n,e){Iw=n,Rk=np=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Wa=!0),n.firstContext=null)}function Jo(n){var e=n._currentValue;if(Rk!==n)if(n={context:n,memoizedValue:e,next:null},np===null){if(Iw===null)throw Error(ut(308));np=n,Iw.dependencies={lanes:0,firstContext:n}}else np=np.next=n;return e}var Gh=null;function Fk(n){Gh===null?Gh=[n]:Gh.push(n)}function Xj(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Fk(e)):(t.next=i.next,i.next=t),e.interleaved=t,gu(n,r)}function gu(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ic=!1;function Bk(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yj(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function su(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Tc(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Tn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,gu(n,t)}return i=r.interleaved,i===null?(e.next=e,Fk(r)):(e.next=i.next,i.next=e),r.interleaved=e,gu(n,t)}function Bx(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Ek(n,t)}}function VI(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,a=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};a===null?i=a=o:a=a.next=o,t=t.next}while(t!==null);a===null?i=a=e:a=a.next=e}else i=a=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Lw(n,e,t,r){var i=n.updateQueue;ic=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(a!==null){var h=i.baseState;o=0,c=u=l=null,s=a;do{var d=s.lane,f=s.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=n,v=s;switch(d=e,f=t,v.tag){case 1:if(p=v.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Er({},h,d);break e;case 2:ic=!0}}s.callback!==null&&s.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);vd|=o,n.lanes=o,n.memoizedState=h}}function WI(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(ut(191,i));i.call(r)}}}var Zj=new X7.Component().refs;function oM(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Er({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var xE={isMounted:function(n){return(n=n._reactInternals)?Pd(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Sa(),i=Dc(n),a=su(r,i);a.payload=e,t!=null&&(a.callback=t),e=Tc(n,a,i),e!==null&&(Es(e,n,i,r),Bx(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Sa(),i=Dc(n),a=su(r,i);a.tag=1,a.payload=e,t!=null&&(a.callback=t),e=Tc(n,a,i),e!==null&&(Es(e,n,i,r),Bx(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Sa(),r=Dc(n),i=su(t,r);i.tag=2,e!=null&&(i.callback=e),e=Tc(n,i,r),e!==null&&(Es(e,n,r,t),Bx(e,n,r))}};function qI(n,e,t,r,i,a,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!P0(t,r)||!P0(i,a):!0}function Jj(n,e,t){var r=!1,i=zc,a=e.contextType;return typeof a=="object"&&a!==null?a=Jo(a):(i=Ya(e)?pd:ta.current,r=e.contextTypes,a=(r=r!=null)?Fp(n,i):zc),e=new e(t,a),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xE,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=a),e}function GI(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&xE.enqueueReplaceState(e,e.state,null)}function sM(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Zj,Bk(n);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Jo(a):(a=Ya(e)?pd:ta.current,i.context=Fp(n,a)),i.state=n.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(oM(n,e,a,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xE.enqueueReplaceState(i,i.state,null),Lw(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function dg(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ut(309));var r=t.stateNode}if(!r)throw Error(ut(147,n));var i=r,a=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;s===Zj&&(s=i.refs={}),o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof n!="string")throw Error(ut(284));if(!t._owner)throw Error(ut(290,n))}return n}function I1(n,e){throw n=Object.prototype.toString.call(e),Error(ut(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function $I(n){var e=n._init;return e(n._payload)}function Kj(n){function e(g,w){if(n){var b=g.deletions;b===null?(g.deletions=[w],g.flags|=16):b.push(w)}}function t(g,w){if(!n)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function r(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function i(g,w){return g=kc(g,w),g.index=0,g.sibling=null,g}function a(g,w,b){return g.index=b,n?(b=g.alternate,b!==null?(b=b.index,b<w?(g.flags|=2,w):b):(g.flags|=2,w)):(g.flags|=1048576,w)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function s(g,w,b,m){return w===null||w.tag!==6?(w=MC(b,g.mode,m),w.return=g,w):(w=i(w,b),w.return=g,w)}function l(g,w,b,m){var x=b.type;return x===Xf?c(g,w,b.props.children,m,b.key):w!==null&&(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===rc&&$I(x)===w.type)?(m=i(w,b.props),m.ref=dg(g,w,b),m.return=g,m):(m=Wx(b.type,b.key,b.props,null,g.mode,m),m.ref=dg(g,w,b),m.return=g,m)}function u(g,w,b,m){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=DC(b,g.mode,m),w.return=g,w):(w=i(w,b.children||[]),w.return=g,w)}function c(g,w,b,m,x){return w===null||w.tag!==7?(w=rd(b,g.mode,m,x),w.return=g,w):(w=i(w,b),w.return=g,w)}function h(g,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=MC(""+w,g.mode,b),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _1:return b=Wx(w.type,w.key,w.props,null,g.mode,b),b.ref=dg(g,null,w),b.return=g,b;case $f:return w=DC(w,g.mode,b),w.return=g,w;case rc:var m=w._init;return h(g,m(w._payload),b)}if(Hg(w)||sg(w))return w=rd(w,g.mode,b,null),w.return=g,w;I1(g,w)}return null}function d(g,w,b,m){var x=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:s(g,w,""+b,m);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _1:return b.key===x?l(g,w,b,m):null;case $f:return b.key===x?u(g,w,b,m):null;case rc:return x=b._init,d(g,w,x(b._payload),m)}if(Hg(b)||sg(b))return x!==null?null:c(g,w,b,m,null);I1(g,b)}return null}function f(g,w,b,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return g=g.get(b)||null,s(w,g,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case _1:return g=g.get(m.key===null?b:m.key)||null,l(w,g,m,x);case $f:return g=g.get(m.key===null?b:m.key)||null,u(w,g,m,x);case rc:var S=m._init;return f(g,w,b,S(m._payload),x)}if(Hg(m)||sg(m))return g=g.get(b)||null,c(w,g,m,x,null);I1(w,m)}return null}function p(g,w,b,m){for(var x=null,S=null,C=w,T=w=0,M=null;C!==null&&T<b.length;T++){C.index>T?(M=C,C=null):M=C.sibling;var A=d(g,C,b[T],m);if(A===null){C===null&&(C=M);break}n&&C&&A.alternate===null&&e(g,C),w=a(A,w,T),S===null?x=A:S.sibling=A,S=A,C=M}if(T===b.length)return t(g,C),dr&&Oh(g,T),x;if(C===null){for(;T<b.length;T++)C=h(g,b[T],m),C!==null&&(w=a(C,w,T),S===null?x=C:S.sibling=C,S=C);return dr&&Oh(g,T),x}for(C=r(g,C);T<b.length;T++)M=f(C,g,T,b[T],m),M!==null&&(n&&M.alternate!==null&&C.delete(M.key===null?T:M.key),w=a(M,w,T),S===null?x=M:S.sibling=M,S=M);return n&&C.forEach(function(D){return e(g,D)}),dr&&Oh(g,T),x}function v(g,w,b,m){var x=sg(b);if(typeof x!="function")throw Error(ut(150));if(b=x.call(b),b==null)throw Error(ut(151));for(var S=x=null,C=w,T=w=0,M=null,A=b.next();C!==null&&!A.done;T++,A=b.next()){C.index>T?(M=C,C=null):M=C.sibling;var D=d(g,C,A.value,m);if(D===null){C===null&&(C=M);break}n&&C&&D.alternate===null&&e(g,C),w=a(D,w,T),S===null?x=D:S.sibling=D,S=D,C=M}if(A.done)return t(g,C),dr&&Oh(g,T),x;if(C===null){for(;!A.done;T++,A=b.next())A=h(g,A.value,m),A!==null&&(w=a(A,w,T),S===null?x=A:S.sibling=A,S=A);return dr&&Oh(g,T),x}for(C=r(g,C);!A.done;T++,A=b.next())A=f(C,g,T,A.value,m),A!==null&&(n&&A.alternate!==null&&C.delete(A.key===null?T:A.key),w=a(A,w,T),S===null?x=A:S.sibling=A,S=A);return n&&C.forEach(function(O){return e(g,O)}),dr&&Oh(g,T),x}function y(g,w,b,m){if(typeof b=="object"&&b!==null&&b.type===Xf&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case _1:e:{for(var x=b.key,S=w;S!==null;){if(S.key===x){if(x=b.type,x===Xf){if(S.tag===7){t(g,S.sibling),w=i(S,b.props.children),w.return=g,g=w;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===rc&&$I(x)===S.type){t(g,S.sibling),w=i(S,b.props),w.ref=dg(g,S,b),w.return=g,g=w;break e}t(g,S);break}else e(g,S);S=S.sibling}b.type===Xf?(w=rd(b.props.children,g.mode,m,b.key),w.return=g,g=w):(m=Wx(b.type,b.key,b.props,null,g.mode,m),m.ref=dg(g,w,b),m.return=g,g=m)}return o(g);case $f:e:{for(S=b.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){t(g,w.sibling),w=i(w,b.children||[]),w.return=g,g=w;break e}else{t(g,w);break}else e(g,w);w=w.sibling}w=DC(b,g.mode,m),w.return=g,g=w}return o(g);case rc:return S=b._init,y(g,w,S(b._payload),m)}if(Hg(b))return p(g,w,b,m);if(sg(b))return v(g,w,b,m);I1(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(t(g,w.sibling),w=i(w,b),w.return=g,g=w):(t(g,w),w=MC(b,g.mode,m),w.return=g,g=w),o(g)):t(g,w)}return y}var zp=Kj(!0),Qj=Kj(!1),Yv={},fl=th(Yv),F0=th(Yv),B0=th(Yv);function $h(n){if(n===Yv)throw Error(ut(174));return n}function zk(n,e){switch(ir(B0,e),ir(F0,n),ir(fl,Yv),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zT(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=zT(e,n)}lr(fl),ir(fl,e)}function Up(){lr(fl),lr(F0),lr(B0)}function eH(n){$h(B0.current);var e=$h(fl.current),t=zT(e,n.type);e!==t&&(ir(F0,n),ir(fl,t))}function Uk(n){F0.current===n&&(lr(fl),lr(F0))}var yr=th(0);function Fw(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var SC=[];function jk(){for(var n=0;n<SC.length;n++)SC[n]._workInProgressVersionPrimary=null;SC.length=0}var zx=ku.ReactCurrentDispatcher,EC=ku.ReactCurrentBatchConfig,gd=0,wr=null,ei=null,mi=null,Bw=!1,l0=!1,z0=0,sre=0;function Hi(){throw Error(ut(321))}function Hk(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!As(n[t],e[t]))return!1;return!0}function Vk(n,e,t,r,i,a){if(gd=a,wr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zx.current=n===null||n.memoizedState===null?hre:dre,n=t(r,i),l0){a=0;do{if(l0=!1,z0=0,25<=a)throw Error(ut(301));a+=1,mi=ei=null,e.updateQueue=null,zx.current=fre,n=t(r,i)}while(l0)}if(zx.current=zw,e=ei!==null&&ei.next!==null,gd=0,mi=ei=wr=null,Bw=!1,e)throw Error(ut(300));return n}function Wk(){var n=z0!==0;return z0=0,n}function Qs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?wr.memoizedState=mi=n:mi=mi.next=n,mi}function Ko(){if(ei===null){var n=wr.alternate;n=n!==null?n.memoizedState:null}else n=ei.next;var e=mi===null?wr.memoizedState:mi.next;if(e!==null)mi=e,ei=n;else{if(n===null)throw Error(ut(310));ei=n,n={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},mi===null?wr.memoizedState=mi=n:mi=mi.next=n}return mi}function U0(n,e){return typeof e=="function"?e(n):e}function _C(n){var e=Ko(),t=e.queue;if(t===null)throw Error(ut(311));t.lastRenderedReducer=n;var r=ei,i=r.baseQueue,a=t.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,t.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,l=null,u=a;do{var c=u.lane;if((gd&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=h,o=r):l=l.next=h,wr.lanes|=c,vd|=c}u=u.next}while(u!==null&&u!==a);l===null?o=r:l.next=s,As(r,e.memoizedState)||(Wa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do a=i.lane,wr.lanes|=a,vd|=a,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function CC(n){var e=Ko(),t=e.queue;if(t===null)throw Error(ut(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,a=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do a=n(a,o.action),o=o.next;while(o!==i);As(a,e.memoizedState)||(Wa=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),t.lastRenderedState=a}return[a,r]}function tH(){}function nH(n,e){var t=wr,r=Ko(),i=e(),a=!As(r.memoizedState,i);if(a&&(r.memoizedState=i,Wa=!0),r=r.queue,qk(aH.bind(null,t,r,n),[n]),r.getSnapshot!==e||a||mi!==null&&mi.memoizedState.tag&1){if(t.flags|=2048,j0(9,iH.bind(null,t,r,i,e),void 0,null),vi===null)throw Error(ut(349));gd&30||rH(t,e,i)}return i}function rH(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function iH(n,e,t,r){e.value=t,e.getSnapshot=r,oH(e)&&sH(n)}function aH(n,e,t){return t(function(){oH(e)&&sH(n)})}function oH(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!As(n,t)}catch{return!0}}function sH(n){var e=gu(n,1);e!==null&&Es(e,n,1,-1)}function XI(n){var e=Qs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:U0,lastRenderedState:n},e.queue=n,n=n.dispatch=cre.bind(null,wr,n),[e.memoizedState,n]}function j0(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function lH(){return Ko().memoizedState}function Ux(n,e,t,r){var i=Qs();wr.flags|=n,i.memoizedState=j0(1|e,t,void 0,r===void 0?null:r)}function wE(n,e,t,r){var i=Ko();r=r===void 0?null:r;var a=void 0;if(ei!==null){var o=ei.memoizedState;if(a=o.destroy,r!==null&&Hk(r,o.deps)){i.memoizedState=j0(e,t,a,r);return}}wr.flags|=n,i.memoizedState=j0(1|e,t,a,r)}function YI(n,e){return Ux(8390656,8,n,e)}function qk(n,e){return wE(2048,8,n,e)}function uH(n,e){return wE(4,2,n,e)}function cH(n,e){return wE(4,4,n,e)}function hH(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function dH(n,e,t){return t=t!=null?t.concat([n]):null,wE(4,4,hH.bind(null,e,n),t)}function Gk(){}function fH(n,e){var t=Ko();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Hk(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function pH(n,e){var t=Ko();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Hk(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function mH(n,e,t){return gd&21?(As(t,e)||(t=yj(),wr.lanes|=t,vd|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Wa=!0),n.memoizedState=t)}function lre(n,e){var t=Un;Un=t!==0&&4>t?t:4,n(!0);var r=EC.transition;EC.transition={};try{n(!1),e()}finally{Un=t,EC.transition=r}}function gH(){return Ko().memoizedState}function ure(n,e,t){var r=Dc(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},vH(n))yH(e,t);else if(t=Xj(n,e,t,r),t!==null){var i=Sa();Es(t,n,r,i),bH(t,e,r)}}function cre(n,e,t){var r=Dc(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(vH(n))yH(e,i);else{var a=n.alternate;if(n.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,t);if(i.hasEagerState=!0,i.eagerState=s,As(s,o)){var l=e.interleaved;l===null?(i.next=i,Fk(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Xj(n,e,i,r),t!==null&&(i=Sa(),Es(t,n,r,i),bH(t,e,r))}}function vH(n){var e=n.alternate;return n===wr||e!==null&&e===wr}function yH(n,e){l0=Bw=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function bH(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Ek(n,t)}}var zw={readContext:Jo,useCallback:Hi,useContext:Hi,useEffect:Hi,useImperativeHandle:Hi,useInsertionEffect:Hi,useLayoutEffect:Hi,useMemo:Hi,useReducer:Hi,useRef:Hi,useState:Hi,useDebugValue:Hi,useDeferredValue:Hi,useTransition:Hi,useMutableSource:Hi,useSyncExternalStore:Hi,useId:Hi,unstable_isNewReconciler:!1},hre={readContext:Jo,useCallback:function(n,e){return Qs().memoizedState=[n,e===void 0?null:e],n},useContext:Jo,useEffect:YI,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ux(4194308,4,hH.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ux(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ux(4,2,n,e)},useMemo:function(n,e){var t=Qs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Qs();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=ure.bind(null,wr,n),[r.memoizedState,n]},useRef:function(n){var e=Qs();return n={current:n},e.memoizedState=n},useState:XI,useDebugValue:Gk,useDeferredValue:function(n){return Qs().memoizedState=n},useTransition:function(){var n=XI(!1),e=n[0];return n=lre.bind(null,n[1]),Qs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=wr,i=Qs();if(dr){if(t===void 0)throw Error(ut(407));t=t()}else{if(t=e(),vi===null)throw Error(ut(349));gd&30||rH(r,e,t)}i.memoizedState=t;var a={value:t,getSnapshot:e};return i.queue=a,YI(aH.bind(null,r,a,n),[n]),r.flags|=2048,j0(9,iH.bind(null,r,a,t,e),void 0,null),t},useId:function(){var n=Qs(),e=vi.identifierPrefix;if(dr){var t=tu,r=eu;t=(r&~(1<<32-Ss(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=z0++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=sre++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},dre={readContext:Jo,useCallback:fH,useContext:Jo,useEffect:qk,useImperativeHandle:dH,useInsertionEffect:uH,useLayoutEffect:cH,useMemo:pH,useReducer:_C,useRef:lH,useState:function(){return _C(U0)},useDebugValue:Gk,useDeferredValue:function(n){var e=Ko();return mH(e,ei.memoizedState,n)},useTransition:function(){var n=_C(U0)[0],e=Ko().memoizedState;return[n,e]},useMutableSource:tH,useSyncExternalStore:nH,useId:gH,unstable_isNewReconciler:!1},fre={readContext:Jo,useCallback:fH,useContext:Jo,useEffect:qk,useImperativeHandle:dH,useInsertionEffect:uH,useLayoutEffect:cH,useMemo:pH,useReducer:CC,useRef:lH,useState:function(){return CC(U0)},useDebugValue:Gk,useDeferredValue:function(n){var e=Ko();return ei===null?e.memoizedState=n:mH(e,ei.memoizedState,n)},useTransition:function(){var n=CC(U0)[0],e=Ko().memoizedState;return[n,e]},useMutableSource:tH,useSyncExternalStore:nH,useId:gH,unstable_isNewReconciler:!1};function jp(n,e){try{var t="",r=e;do t+=jte(r),r=r.return;while(r);var i=t}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:n,source:e,stack:i,digest:null}}function AC(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function lM(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var pre=typeof WeakMap=="function"?WeakMap:Map;function xH(n,e,t){t=su(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){jw||(jw=!0,vM=r),lM(n,e)},t}function wH(n,e,t){t=su(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){lM(n,e)}}var a=n.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){lM(n,e),typeof r!="function"&&(Mc===null?Mc=new Set([this]):Mc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function ZI(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new pre;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Mre.bind(null,n,e,t),e.then(n,n))}function JI(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function KI(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=su(-1,1),e.tag=2,Tc(t,e,1))),t.lanes|=1),n)}var mre=ku.ReactCurrentOwner,Wa=!1;function ma(n,e,t,r){e.child=n===null?Qj(e,null,t,r):zp(e,n.child,t,r)}function QI(n,e,t,r,i){t=t.render;var a=e.ref;return xp(e,i),r=Vk(n,e,t,r,a,i),t=Wk(),n!==null&&!Wa?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,vu(n,e,i)):(dr&&t&&Nk(e),e.flags|=1,ma(n,e,r,i),e.child)}function eL(n,e,t,r,i){if(n===null){var a=t.type;return typeof a=="function"&&!eN(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=a,SH(n,e,a,r,i)):(n=Wx(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(a=n.child,!(n.lanes&i)){var o=a.memoizedProps;if(t=t.compare,t=t!==null?t:P0,t(o,r)&&n.ref===e.ref)return vu(n,e,i)}return e.flags|=1,n=kc(a,r),n.ref=e.ref,n.return=e,e.child=n}function SH(n,e,t,r,i){if(n!==null){var a=n.memoizedProps;if(P0(a,r)&&n.ref===e.ref)if(Wa=!1,e.pendingProps=r=a,(n.lanes&i)!==0)n.flags&131072&&(Wa=!0);else return e.lanes=n.lanes,vu(n,e,i)}return uM(n,e,t,r,i)}function EH(n,e,t){var r=e.pendingProps,i=r.children,a=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ir(ip,lo),lo|=t;else{if(!(t&1073741824))return n=a!==null?a.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ir(ip,lo),lo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:t,ir(ip,lo),lo|=r}else a!==null?(r=a.baseLanes|t,e.memoizedState=null):r=t,ir(ip,lo),lo|=r;return ma(n,e,i,t),e.child}function _H(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function uM(n,e,t,r,i){var a=Ya(t)?pd:ta.current;return a=Fp(e,a),xp(e,i),t=Vk(n,e,t,r,a,i),r=Wk(),n!==null&&!Wa?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,vu(n,e,i)):(dr&&r&&Nk(e),e.flags|=1,ma(n,e,t,i),e.child)}function tL(n,e,t,r,i){if(Ya(t)){var a=!0;Nw(e)}else a=!1;if(xp(e,i),e.stateNode===null)jx(n,e),Jj(e,t,r),sM(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Jo(u):(u=Ya(t)?pd:ta.current,u=Fp(e,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&GI(e,o,r,u),ic=!1;var d=e.memoizedState;o.state=d,Lw(e,r,o,i),l=e.memoizedState,s!==r||d!==l||Xa.current||ic?(typeof c=="function"&&(oM(e,t,c,r),l=e.memoizedState),(s=ic||qI(e,t,s,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Yj(n,e),s=e.memoizedProps,u=e.type===e.elementType?s:ps(e.type,s),o.props=u,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Jo(l):(l=Ya(t)?pd:ta.current,l=Fp(e,l));var f=t.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==h||d!==l)&&GI(e,o,r,l),ic=!1,d=e.memoizedState,o.state=d,Lw(e,r,o,i);var p=e.memoizedState;s!==h||d!==p||Xa.current||ic?(typeof f=="function"&&(oM(e,t,f,r),p=e.memoizedState),(u=ic||qI(e,t,u,r,d,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return cM(n,e,t,r,a,i)}function cM(n,e,t,r,i,a){_H(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&UI(e,t,!1),vu(n,e,a);r=e.stateNode,mre.current=e;var s=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=zp(e,n.child,null,a),e.child=zp(e,null,s,a)):ma(n,e,s,a),e.memoizedState=r.state,i&&UI(e,t,!0),e.child}function CH(n){var e=n.stateNode;e.pendingContext?zI(n,e.pendingContext,e.pendingContext!==e.context):e.context&&zI(n,e.context,!1),zk(n,e.containerInfo)}function nL(n,e,t,r,i){return Bp(),Pk(i),e.flags|=256,ma(n,e,t,r),e.child}var hM={dehydrated:null,treeContext:null,retryLane:0};function dM(n){return{baseLanes:n,cachePool:null,transitions:null}}function AH(n,e,t){var r=e.pendingProps,i=yr.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=n!==null&&n.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ir(yr,i&1),n===null)return iM(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=_E(o,r,0,null),n=rd(n,r,t,null),a.return=e,n.return=e,a.sibling=n,e.child=a,e.child.memoizedState=dM(t),e.memoizedState=hM,n):$k(e,o));if(i=n.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return gre(n,e,o,r,s,i,t);if(a){a=r.fallback,o=e.mode,i=n.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=kc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=kc(s,a):(a=rd(a,o,t,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=n.child.memoizedState,o=o===null?dM(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=n.childLanes&~t,e.memoizedState=hM,r}return a=n.child,n=a.sibling,r=kc(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function $k(n,e){return e=_E({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function L1(n,e,t,r){return r!==null&&Pk(r),zp(e,n.child,null,t),n=$k(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function gre(n,e,t,r,i,a,o){if(t)return e.flags&256?(e.flags&=-257,r=AC(Error(ut(422))),L1(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=_E({mode:"visible",children:r.children},i,0,null),a=rd(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&zp(e,n.child,null,o),e.child.memoizedState=dM(o),e.memoizedState=hM,a);if(!(e.mode&1))return L1(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(ut(419)),r=AC(a,r,void 0),L1(n,e,o,r)}if(s=(o&n.childLanes)!==0,Wa||s){if(r=vi,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,gu(n,i),Es(r,n,i,-1))}return Qk(),r=AC(Error(ut(421))),L1(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Dre.bind(null,n),i._reactRetry=e,null):(n=a.treeContext,vo=Ac(i.nextSibling),bo=e,dr=!0,vs=null,n!==null&&(zo[Uo++]=eu,zo[Uo++]=tu,zo[Uo++]=md,eu=n.id,tu=n.overflow,md=e),e=$k(e,r.children),e.flags|=4096,e)}function rL(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),aM(n.return,e,t)}function TC(n,e,t,r,i){var a=n.memoizedState;a===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=i)}function TH(n,e,t){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(ma(n,e,r.children,t),r=yr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&rL(n,t,e);else if(n.tag===19)rL(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ir(yr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Fw(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),TC(e,!1,i,t,a);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Fw(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}TC(e,!0,t,null,a);break;case"together":TC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jx(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function vu(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),vd|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ut(153));if(e.child!==null){for(n=e.child,t=kc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=kc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function vre(n,e,t){switch(e.tag){case 3:CH(e),Bp();break;case 5:eH(e);break;case 1:Ya(e.type)&&Nw(e);break;case 4:zk(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ir(Rw,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ir(yr,yr.current&1),e.flags|=128,null):t&e.child.childLanes?AH(n,e,t):(ir(yr,yr.current&1),n=vu(n,e,t),n!==null?n.sibling:null);ir(yr,yr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return TH(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ir(yr,yr.current),r)break;return null;case 22:case 23:return e.lanes=0,EH(n,e,t)}return vu(n,e,t)}var MH,fM,DH,kH;MH=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};fM=function(){};DH=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,$h(fl.current);var a=null;switch(t){case"input":i=IT(n,i),r=IT(n,r),a=[];break;case"select":i=Er({},i,{value:void 0}),r=Er({},r,{value:void 0}),a=[];break;case"textarea":i=BT(n,i),r=BT(n,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Dw)}UT(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(A0.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(a||(a=[]),a.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(A0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ar("scroll",n),a||s===l||(a=[])):(a=a||[]).push(u,l))}t&&(a=a||[]).push("style",t);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};kH=function(n,e,t,r){t!==r&&(e.flags|=4)};function fg(n,e){if(!dr)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Vi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function yre(n,e,t){var r=e.pendingProps;switch(Ok(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(e),null;case 1:return Ya(e.type)&&kw(),Vi(e),null;case 3:return r=e.stateNode,Up(),lr(Xa),lr(ta),jk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(R1(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vs!==null&&(xM(vs),vs=null))),fM(n,e),Vi(e),null;case 5:Uk(e);var i=$h(B0.current);if(t=e.type,n!==null&&e.stateNode!=null)DH(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ut(166));return Vi(e),null}if(n=$h(fl.current),R1(e)){r=e.stateNode,t=e.type;var a=e.memoizedProps;switch(r[rl]=e,r[L0]=a,n=(e.mode&1)!==0,t){case"dialog":ar("cancel",r),ar("close",r);break;case"iframe":case"object":case"embed":ar("load",r);break;case"video":case"audio":for(i=0;i<Wg.length;i++)ar(Wg[i],r);break;case"source":ar("error",r);break;case"img":case"image":case"link":ar("error",r),ar("load",r);break;case"details":ar("toggle",r);break;case"input":dI(r,a),ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ar("invalid",r);break;case"textarea":pI(r,a),ar("invalid",r)}UT(t,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&P1(r.textContent,s,n),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&P1(r.textContent,s,n),i=["children",""+s]):A0.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&ar("scroll",r)}switch(t){case"input":C1(r),fI(r,a,!0);break;case"textarea":C1(r),mI(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Dw)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=rj(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[rl]=e,n[L0]=r,MH(n,e,!1,!1),e.stateNode=n;e:{switch(o=jT(t,r),t){case"dialog":ar("cancel",n),ar("close",n),i=r;break;case"iframe":case"object":case"embed":ar("load",n),i=r;break;case"video":case"audio":for(i=0;i<Wg.length;i++)ar(Wg[i],n);i=r;break;case"source":ar("error",n),i=r;break;case"img":case"image":case"link":ar("error",n),ar("load",n),i=r;break;case"details":ar("toggle",n),i=r;break;case"input":dI(n,r),i=IT(n,r),ar("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Er({},r,{value:void 0}),ar("invalid",n);break;case"textarea":pI(n,r),i=BT(n,r),ar("invalid",n);break;default:i=r}UT(t,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?oj(n,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ij(n,l)):a==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&T0(n,l):typeof l=="number"&&T0(n,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(A0.hasOwnProperty(a)?l!=null&&a==="onScroll"&&ar("scroll",n):l!=null&&vk(n,a,l,o))}switch(t){case"input":C1(n),fI(n,r,!1);break;case"textarea":C1(n),mI(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Bc(r.value));break;case"select":n.multiple=!!r.multiple,a=r.value,a!=null?gp(n,!!r.multiple,a,!1):r.defaultValue!=null&&gp(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Dw)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vi(e),null;case 6:if(n&&e.stateNode!=null)kH(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ut(166));if(t=$h(B0.current),$h(fl.current),R1(e)){if(r=e.stateNode,t=e.memoizedProps,r[rl]=e,(a=r.nodeValue!==t)&&(n=bo,n!==null))switch(n.tag){case 3:P1(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&P1(r.nodeValue,t,(n.mode&1)!==0)}a&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[rl]=e,e.stateNode=r}return Vi(e),null;case 13:if(lr(yr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(dr&&vo!==null&&e.mode&1&&!(e.flags&128))$j(),Bp(),e.flags|=98560,a=!1;else if(a=R1(e),r!==null&&r.dehydrated!==null){if(n===null){if(!a)throw Error(ut(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ut(317));a[rl]=e}else Bp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vi(e),a=!1}else vs!==null&&(xM(vs),vs=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||yr.current&1?ii===0&&(ii=3):Qk())),e.updateQueue!==null&&(e.flags|=4),Vi(e),null);case 4:return Up(),fM(n,e),n===null&&R0(e.stateNode.containerInfo),Vi(e),null;case 10:return Lk(e.type._context),Vi(e),null;case 17:return Ya(e.type)&&kw(),Vi(e),null;case 19:if(lr(yr),a=e.memoizedState,a===null)return Vi(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)fg(a,!1);else{if(ii!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Fw(n),o!==null){for(e.flags|=128,fg(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)a=t,n=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=n,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,n=o.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ir(yr,yr.current&1|2),e.child}n=n.sibling}a.tail!==null&&Ur()>Hp&&(e.flags|=128,r=!0,fg(a,!1),e.lanes=4194304)}else{if(!r)if(n=Fw(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),fg(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!dr)return Vi(e),null}else 2*Ur()-a.renderingStartTime>Hp&&t!==1073741824&&(e.flags|=128,r=!0,fg(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(t=a.last,t!==null?t.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ur(),e.sibling=null,t=yr.current,ir(yr,r?t&1|2:t&1),e):(Vi(e),null);case 22:case 23:return Kk(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?lo&1073741824&&(Vi(e),e.subtreeFlags&6&&(e.flags|=8192)):Vi(e),null;case 24:return null;case 25:return null}throw Error(ut(156,e.tag))}function bre(n,e){switch(Ok(e),e.tag){case 1:return Ya(e.type)&&kw(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Up(),lr(Xa),lr(ta),jk(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Uk(e),null;case 13:if(lr(yr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ut(340));Bp()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return lr(yr),null;case 4:return Up(),null;case 10:return Lk(e.type._context),null;case 22:case 23:return Kk(),null;case 24:return null;default:return null}}var F1=!1,Yi=!1,xre=typeof WeakSet=="function"?WeakSet:Set,St=null;function rp(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Mr(n,e,r)}else t.current=null}function NH(n,e,t){try{t()}catch(r){Mr(n,e,r)}}var iL=!1;function wre(n,e){if(JT=Aw,n=Rj(),kk(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{t.nodeType,a.nodeType}catch{t=null;break e}var o=0,s=-1,l=-1,u=0,c=0,h=n,d=null;t:for(;;){for(var f;h!==t||i!==0&&h.nodeType!==3||(s=o+i),h!==a||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break t;if(d===t&&++u===i&&(s=o),d===a&&++c===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=s===-1||l===-1?null:{start:s,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(KT={focusedElem:n,selectionRange:t},Aw=!1,St=e;St!==null;)if(e=St,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,St=n;else for(;St!==null;){e=St;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,y=p.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:ps(e.type,v),y);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(m){Mr(e,e.return,m)}if(n=e.sibling,n!==null){n.return=e.return,St=n;break}St=e.return}return p=iL,iL=!1,p}function u0(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var a=i.destroy;i.destroy=void 0,a!==void 0&&NH(e,t,a)}i=i.next}while(i!==r)}}function SE(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function pM(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function OH(n){var e=n.alternate;e!==null&&(n.alternate=null,OH(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[rl],delete e[L0],delete e[tM],delete e[rre],delete e[ire])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function PH(n){return n.tag===5||n.tag===3||n.tag===4}function aL(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||PH(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mM(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Dw));else if(r!==4&&(n=n.child,n!==null))for(mM(n,e,t),n=n.sibling;n!==null;)mM(n,e,t),n=n.sibling}function gM(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(gM(n,e,t),n=n.sibling;n!==null;)gM(n,e,t),n=n.sibling}var Ei=null,gs=!1;function Gu(n,e,t){for(t=t.child;t!==null;)RH(n,e,t),t=t.sibling}function RH(n,e,t){if(dl&&typeof dl.onCommitFiberUnmount=="function")try{dl.onCommitFiberUnmount(pE,t)}catch{}switch(t.tag){case 5:Yi||rp(t,e);case 6:var r=Ei,i=gs;Ei=null,Gu(n,e,t),Ei=r,gs=i,Ei!==null&&(gs?(n=Ei,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ei.removeChild(t.stateNode));break;case 18:Ei!==null&&(gs?(n=Ei,t=t.stateNode,n.nodeType===8?xC(n.parentNode,t):n.nodeType===1&&xC(n,t),N0(n)):xC(Ei,t.stateNode));break;case 4:r=Ei,i=gs,Ei=t.stateNode.containerInfo,gs=!0,Gu(n,e,t),Ei=r,gs=i;break;case 0:case 11:case 14:case 15:if(!Yi&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&NH(t,e,o),i=i.next}while(i!==r)}Gu(n,e,t);break;case 1:if(!Yi&&(rp(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(s){Mr(t,e,s)}Gu(n,e,t);break;case 21:Gu(n,e,t);break;case 22:t.mode&1?(Yi=(r=Yi)||t.memoizedState!==null,Gu(n,e,t),Yi=r):Gu(n,e,t);break;default:Gu(n,e,t)}}function oL(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new xre),e.forEach(function(r){var i=kre.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function cs(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var a=n,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:Ei=s.stateNode,gs=!1;break e;case 3:Ei=s.stateNode.containerInfo,gs=!0;break e;case 4:Ei=s.stateNode.containerInfo,gs=!0;break e}s=s.return}if(Ei===null)throw Error(ut(160));RH(a,o,i),Ei=null,gs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Mr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IH(e,n),e=e.sibling}function IH(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(cs(e,n),$s(n),r&4){try{u0(3,n,n.return),SE(3,n)}catch(v){Mr(n,n.return,v)}try{u0(5,n,n.return)}catch(v){Mr(n,n.return,v)}}break;case 1:cs(e,n),$s(n),r&512&&t!==null&&rp(t,t.return);break;case 5:if(cs(e,n),$s(n),r&512&&t!==null&&rp(t,t.return),n.flags&32){var i=n.stateNode;try{T0(i,"")}catch(v){Mr(n,n.return,v)}}if(r&4&&(i=n.stateNode,i!=null)){var a=n.memoizedProps,o=t!==null?t.memoizedProps:a,s=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&tj(i,a),jT(s,o);var u=jT(s,a);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?oj(i,h):c==="dangerouslySetInnerHTML"?ij(i,h):c==="children"?T0(i,h):vk(i,c,h,u)}switch(s){case"input":LT(i,a);break;case"textarea":nj(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;f!=null?gp(i,!!a.multiple,f,!1):d!==!!a.multiple&&(a.defaultValue!=null?gp(i,!!a.multiple,a.defaultValue,!0):gp(i,!!a.multiple,a.multiple?[]:"",!1))}i[L0]=a}catch(v){Mr(n,n.return,v)}}break;case 6:if(cs(e,n),$s(n),r&4){if(n.stateNode===null)throw Error(ut(162));i=n.stateNode,a=n.memoizedProps;try{i.nodeValue=a}catch(v){Mr(n,n.return,v)}}break;case 3:if(cs(e,n),$s(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{N0(e.containerInfo)}catch(v){Mr(n,n.return,v)}break;case 4:cs(e,n),$s(n);break;case 13:cs(e,n),$s(n),i=n.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Zk=Ur())),r&4&&oL(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(Yi=(u=Yi)||c,cs(e,n),Yi=u):cs(e,n),$s(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(St=n,c=n.child;c!==null;){for(h=St=c;St!==null;){switch(d=St,f=d.child,d.tag){case 0:case 11:case 14:case 15:u0(4,d,d.return);break;case 1:rp(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){Mr(r,t,v)}}break;case 5:rp(d,d.return);break;case 22:if(d.memoizedState!==null){lL(h);continue}}f!==null?(f.return=d,St=f):lL(h)}c=c.sibling}e:for(c=null,h=n;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=aj("display",o))}catch(v){Mr(n,n.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Mr(n,n.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:cs(e,n),$s(n),r&4&&oL(n);break;case 21:break;default:cs(e,n),$s(n)}}function $s(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(PH(t)){var r=t;break e}t=t.return}throw Error(ut(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(T0(i,""),r.flags&=-33);var a=aL(n);gM(n,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=aL(n);mM(n,s,o);break;default:throw Error(ut(161))}}catch(l){Mr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Sre(n,e,t){St=n,LH(n)}function LH(n,e,t){for(var r=(n.mode&1)!==0;St!==null;){var i=St,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||F1;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||Yi;s=F1;var u=Yi;if(F1=o,(Yi=l)&&!u)for(St=i;St!==null;)o=St,l=o.child,o.tag===22&&o.memoizedState!==null?uL(i):l!==null?(l.return=o,St=l):uL(i);for(;a!==null;)St=a,LH(a),a=a.sibling;St=i,F1=s,Yi=u}sL(n)}else i.subtreeFlags&8772&&a!==null?(a.return=i,St=a):sL(n)}}function sL(n){for(;St!==null;){var e=St;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yi||SE(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yi)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:ps(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&WI(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}WI(e,o,t)}break;case 5:var s=e.stateNode;if(t===null&&e.flags&4){t=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&N0(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ut(163))}Yi||e.flags&512&&pM(e)}catch(d){Mr(e,e.return,d)}}if(e===n){St=null;break}if(t=e.sibling,t!==null){t.return=e.return,St=t;break}St=e.return}}function lL(n){for(;St!==null;){var e=St;if(e===n){St=null;break}var t=e.sibling;if(t!==null){t.return=e.return,St=t;break}St=e.return}}function uL(n){for(;St!==null;){var e=St;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{SE(4,e)}catch(l){Mr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Mr(e,i,l)}}var a=e.return;try{pM(e)}catch(l){Mr(e,a,l)}break;case 5:var o=e.return;try{pM(e)}catch(l){Mr(e,o,l)}}}catch(l){Mr(e,e.return,l)}if(e===n){St=null;break}var s=e.sibling;if(s!==null){s.return=e.return,St=s;break}St=e.return}}var Ere=Math.ceil,Uw=ku.ReactCurrentDispatcher,Xk=ku.ReactCurrentOwner,$o=ku.ReactCurrentBatchConfig,Tn=0,vi=null,Xr=null,Pi=0,lo=0,ip=th(0),ii=0,H0=null,vd=0,EE=0,Yk=0,c0=null,Ua=null,Zk=0,Hp=1/0,Xl=null,jw=!1,vM=null,Mc=null,B1=!1,pc=null,Hw=0,h0=0,yM=null,Hx=-1,Vx=0;function Sa(){return Tn&6?Ur():Hx!==-1?Hx:Hx=Ur()}function Dc(n){return n.mode&1?Tn&2&&Pi!==0?Pi&-Pi:ore.transition!==null?(Vx===0&&(Vx=yj()),Vx):(n=Un,n!==0||(n=window.event,n=n===void 0?16:Cj(n.type)),n):1}function Es(n,e,t,r){if(50<h0)throw h0=0,yM=null,Error(ut(185));Gv(n,t,r),(!(Tn&2)||n!==vi)&&(n===vi&&(!(Tn&2)&&(EE|=t),ii===4&&cc(n,Pi)),Za(n,r),t===1&&Tn===0&&!(e.mode&1)&&(Hp=Ur()+500,bE&&nh()))}function Za(n,e){var t=n.callbackNode;one(n,e);var r=Cw(n,n===vi?Pi:0);if(r===0)t!==null&&yI(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&yI(t),e===1)n.tag===0?are(cL.bind(null,n)):Wj(cL.bind(null,n)),tre(function(){!(Tn&6)&&nh()}),t=null;else{switch(bj(r)){case 1:t=Sk;break;case 4:t=gj;break;case 16:t=_w;break;case 536870912:t=vj;break;default:t=_w}t=WH(t,FH.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function FH(n,e){if(Hx=-1,Vx=0,Tn&6)throw Error(ut(327));var t=n.callbackNode;if(wp()&&n.callbackNode!==t)return null;var r=Cw(n,n===vi?Pi:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Vw(n,r);else{e=r;var i=Tn;Tn|=2;var a=zH();(vi!==n||Pi!==e)&&(Xl=null,Hp=Ur()+500,nd(n,e));do try{Are();break}catch(s){BH(n,s)}while(!0);Ik(),Uw.current=a,Tn=i,Xr!==null?e=0:(vi=null,Pi=0,e=ii)}if(e!==0){if(e===2&&(i=GT(n),i!==0&&(r=i,e=bM(n,i))),e===1)throw t=H0,nd(n,0),cc(n,r),Za(n,Ur()),t;if(e===6)cc(n,r);else{if(i=n.current.alternate,!(r&30)&&!_re(i)&&(e=Vw(n,r),e===2&&(a=GT(n),a!==0&&(r=a,e=bM(n,a))),e===1))throw t=H0,nd(n,0),cc(n,r),Za(n,Ur()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(ut(345));case 2:Ph(n,Ua,Xl);break;case 3:if(cc(n,r),(r&130023424)===r&&(e=Zk+500-Ur(),10<e)){if(Cw(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Sa(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=eM(Ph.bind(null,n,Ua,Xl),e);break}Ph(n,Ua,Xl);break;case 4:if(cc(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Ss(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=Ur()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ere(r/1960))-r,10<r){n.timeoutHandle=eM(Ph.bind(null,n,Ua,Xl),r);break}Ph(n,Ua,Xl);break;case 5:Ph(n,Ua,Xl);break;default:throw Error(ut(329))}}}return Za(n,Ur()),n.callbackNode===t?FH.bind(null,n):null}function bM(n,e){var t=c0;return n.current.memoizedState.isDehydrated&&(nd(n,e).flags|=256),n=Vw(n,e),n!==2&&(e=Ua,Ua=t,e!==null&&xM(e)),n}function xM(n){Ua===null?Ua=n:Ua.push.apply(Ua,n)}function _re(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],a=i.getSnapshot;i=i.value;try{if(!As(a(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cc(n,e){for(e&=~Yk,e&=~EE,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ss(e),r=1<<t;n[t]=-1,e&=~r}}function cL(n){if(Tn&6)throw Error(ut(327));wp();var e=Cw(n,0);if(!(e&1))return Za(n,Ur()),null;var t=Vw(n,e);if(n.tag!==0&&t===2){var r=GT(n);r!==0&&(e=r,t=bM(n,r))}if(t===1)throw t=H0,nd(n,0),cc(n,e),Za(n,Ur()),t;if(t===6)throw Error(ut(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ph(n,Ua,Xl),Za(n,Ur()),null}function Jk(n,e){var t=Tn;Tn|=1;try{return n(e)}finally{Tn=t,Tn===0&&(Hp=Ur()+500,bE&&nh())}}function yd(n){pc!==null&&pc.tag===0&&!(Tn&6)&&wp();var e=Tn;Tn|=1;var t=$o.transition,r=Un;try{if($o.transition=null,Un=1,n)return n()}finally{Un=r,$o.transition=t,Tn=e,!(Tn&6)&&nh()}}function Kk(){lo=ip.current,lr(ip)}function nd(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,ere(t)),Xr!==null)for(t=Xr.return;t!==null;){var r=t;switch(Ok(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kw();break;case 3:Up(),lr(Xa),lr(ta),jk();break;case 5:Uk(r);break;case 4:Up();break;case 13:lr(yr);break;case 19:lr(yr);break;case 10:Lk(r.type._context);break;case 22:case 23:Kk()}t=t.return}if(vi=n,Xr=n=kc(n.current,null),Pi=lo=e,ii=0,H0=null,Yk=EE=vd=0,Ua=c0=null,Gh!==null){for(e=0;e<Gh.length;e++)if(t=Gh[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,a=t.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}t.pending=r}Gh=null}return n}function BH(n,e){do{var t=Xr;try{if(Ik(),zx.current=zw,Bw){for(var r=wr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bw=!1}if(gd=0,mi=ei=wr=null,l0=!1,z0=0,Xk.current=null,t===null||t.return===null){ii=1,H0=e,Xr=null;break}e:{var a=n,o=t.return,s=t,l=e;if(e=Pi,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=JI(o);if(f!==null){f.flags&=-257,KI(f,o,s,a,e),f.mode&1&&ZI(a,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){ZI(a,u,e),Qk();break e}l=Error(ut(426))}}else if(dr&&s.mode&1){var y=JI(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),KI(y,o,s,a,e),Pk(jp(l,s));break e}}a=l=jp(l,s),ii!==4&&(ii=2),c0===null?c0=[a]:c0.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=xH(a,l,e);VI(a,g);break e;case 1:s=l;var w=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Mc===null||!Mc.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var m=wH(a,s,e);VI(a,m);break e}}a=a.return}while(a!==null)}jH(t)}catch(x){e=x,Xr===t&&t!==null&&(Xr=t=t.return);continue}break}while(!0)}function zH(){var n=Uw.current;return Uw.current=zw,n===null?zw:n}function Qk(){(ii===0||ii===3||ii===2)&&(ii=4),vi===null||!(vd&268435455)&&!(EE&268435455)||cc(vi,Pi)}function Vw(n,e){var t=Tn;Tn|=2;var r=zH();(vi!==n||Pi!==e)&&(Xl=null,nd(n,e));do try{Cre();break}catch(i){BH(n,i)}while(!0);if(Ik(),Tn=t,Uw.current=r,Xr!==null)throw Error(ut(261));return vi=null,Pi=0,ii}function Cre(){for(;Xr!==null;)UH(Xr)}function Are(){for(;Xr!==null&&!Jte();)UH(Xr)}function UH(n){var e=VH(n.alternate,n,lo);n.memoizedProps=n.pendingProps,e===null?jH(n):Xr=e,Xk.current=null}function jH(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=bre(t,e),t!==null){t.flags&=32767,Xr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ii=6,Xr=null;return}}else if(t=yre(t,e,lo),t!==null){Xr=t;return}if(e=e.sibling,e!==null){Xr=e;return}Xr=e=n}while(e!==null);ii===0&&(ii=5)}function Ph(n,e,t){var r=Un,i=$o.transition;try{$o.transition=null,Un=1,Tre(n,e,t,r)}finally{$o.transition=i,Un=r}return null}function Tre(n,e,t,r){do wp();while(pc!==null);if(Tn&6)throw Error(ut(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ut(177));n.callbackNode=null,n.callbackPriority=0;var a=t.lanes|t.childLanes;if(sne(n,a),n===vi&&(Xr=vi=null,Pi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||B1||(B1=!0,WH(_w,function(){return wp(),null})),a=(t.flags&15990)!==0,t.subtreeFlags&15990||a){a=$o.transition,$o.transition=null;var o=Un;Un=1;var s=Tn;Tn|=4,Xk.current=null,wre(n,t),IH(t,n),$ne(KT),Aw=!!JT,KT=JT=null,n.current=t,Sre(t),Kte(),Tn=s,Un=o,$o.transition=a}else n.current=t;if(B1&&(B1=!1,pc=n,Hw=i),a=n.pendingLanes,a===0&&(Mc=null),tne(t.stateNode),Za(n,Ur()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(jw)throw jw=!1,n=vM,vM=null,n;return Hw&1&&n.tag!==0&&wp(),a=n.pendingLanes,a&1?n===yM?h0++:(h0=0,yM=n):h0=0,nh(),null}function wp(){if(pc!==null){var n=bj(Hw),e=$o.transition,t=Un;try{if($o.transition=null,Un=16>n?16:n,pc===null)var r=!1;else{if(n=pc,pc=null,Hw=0,Tn&6)throw Error(ut(331));var i=Tn;for(Tn|=4,St=n.current;St!==null;){var a=St,o=a.child;if(St.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(St=u;St!==null;){var c=St;switch(c.tag){case 0:case 11:case 15:u0(8,c,a)}var h=c.child;if(h!==null)h.return=c,St=h;else for(;St!==null;){c=St;var d=c.sibling,f=c.return;if(OH(c),c===u){St=null;break}if(d!==null){d.return=f,St=d;break}St=f}}}var p=a.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}St=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,St=o;else e:for(;St!==null;){if(a=St,a.flags&2048)switch(a.tag){case 0:case 11:case 15:u0(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,St=g;break e}St=a.return}}var w=n.current;for(St=w;St!==null;){o=St;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,St=b;else e:for(o=w;St!==null;){if(s=St,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:SE(9,s)}}catch(x){Mr(s,s.return,x)}if(s===o){St=null;break e}var m=s.sibling;if(m!==null){m.return=s.return,St=m;break e}St=s.return}}if(Tn=i,nh(),dl&&typeof dl.onPostCommitFiberRoot=="function")try{dl.onPostCommitFiberRoot(pE,n)}catch{}r=!0}return r}finally{Un=t,$o.transition=e}}return!1}function hL(n,e,t){e=jp(t,e),e=xH(n,e,1),n=Tc(n,e,1),e=Sa(),n!==null&&(Gv(n,1,e),Za(n,e))}function Mr(n,e,t){if(n.tag===3)hL(n,n,t);else for(;e!==null;){if(e.tag===3){hL(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mc===null||!Mc.has(r))){n=jp(t,n),n=wH(e,n,1),e=Tc(e,n,1),n=Sa(),e!==null&&(Gv(e,1,n),Za(e,n));break}}e=e.return}}function Mre(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Sa(),n.pingedLanes|=n.suspendedLanes&t,vi===n&&(Pi&t)===t&&(ii===4||ii===3&&(Pi&130023424)===Pi&&500>Ur()-Zk?nd(n,0):Yk|=t),Za(n,e)}function HH(n,e){e===0&&(n.mode&1?(e=M1,M1<<=1,!(M1&130023424)&&(M1=4194304)):e=1);var t=Sa();n=gu(n,e),n!==null&&(Gv(n,e,t),Za(n,t))}function Dre(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),HH(n,t)}function kre(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(ut(314))}r!==null&&r.delete(e),HH(n,t)}var VH;VH=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Xa.current)Wa=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Wa=!1,vre(n,e,t);Wa=!!(n.flags&131072)}else Wa=!1,dr&&e.flags&1048576&&qj(e,Pw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jx(n,e),n=e.pendingProps;var i=Fp(e,ta.current);xp(e,t),i=Vk(null,e,r,n,i,t);var a=Wk();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ya(r)?(a=!0,Nw(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Bk(e),i.updater=xE,e.stateNode=i,i._reactInternals=e,sM(e,r,n,t),e=cM(null,e,r,!0,a,t)):(e.tag=0,dr&&a&&Nk(e),ma(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(jx(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Ore(r),n=ps(r,n),i){case 0:e=uM(null,e,r,n,t);break e;case 1:e=tL(null,e,r,n,t);break e;case 11:e=QI(null,e,r,n,t);break e;case 14:e=eL(null,e,r,ps(r.type,n),t);break e}throw Error(ut(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ps(r,i),uM(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ps(r,i),tL(n,e,r,i,t);case 3:e:{if(CH(e),n===null)throw Error(ut(387));r=e.pendingProps,a=e.memoizedState,i=a.element,Yj(n,e),Lw(e,r,null,t);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=jp(Error(ut(423)),e),e=nL(n,e,r,t,i);break e}else if(r!==i){i=jp(Error(ut(424)),e),e=nL(n,e,r,t,i);break e}else for(vo=Ac(e.stateNode.containerInfo.firstChild),bo=e,dr=!0,vs=null,t=Qj(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Bp(),r===i){e=vu(n,e,t);break e}ma(n,e,r,t)}e=e.child}return e;case 5:return eH(e),n===null&&iM(e),r=e.type,i=e.pendingProps,a=n!==null?n.memoizedProps:null,o=i.children,QT(r,i)?o=null:a!==null&&QT(r,a)&&(e.flags|=32),_H(n,e),ma(n,e,o,t),e.child;case 6:return n===null&&iM(e),null;case 13:return AH(n,e,t);case 4:return zk(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=zp(e,null,r,t):ma(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ps(r,i),QI(n,e,r,i,t);case 7:return ma(n,e,e.pendingProps,t),e.child;case 8:return ma(n,e,e.pendingProps.children,t),e.child;case 12:return ma(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,ir(Rw,r._currentValue),r._currentValue=o,a!==null)if(As(a.value,o)){if(a.children===i.children&&!Xa.current){e=vu(n,e,t);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=su(-1,t&-t),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),aM(a.return,t,e),s.lanes|=t;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ut(341));o.lanes|=t,s=o.alternate,s!==null&&(s.lanes|=t),aM(o,t,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ma(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xp(e,t),i=Jo(i),r=r(i),e.flags|=1,ma(n,e,r,t),e.child;case 14:return r=e.type,i=ps(r,e.pendingProps),i=ps(r.type,i),eL(n,e,r,i,t);case 15:return SH(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ps(r,i),jx(n,e),e.tag=1,Ya(r)?(n=!0,Nw(e)):n=!1,xp(e,t),Jj(e,r,i),sM(e,r,i,t),cM(null,e,r,!0,n,t);case 19:return TH(n,e,t);case 22:return EH(n,e,t)}throw Error(ut(156,e.tag))};function WH(n,e){return mj(n,e)}function Nre(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wo(n,e,t,r){return new Nre(n,e,t,r)}function eN(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ore(n){if(typeof n=="function")return eN(n)?1:0;if(n!=null){if(n=n.$$typeof,n===bk)return 11;if(n===xk)return 14}return 2}function kc(n,e){var t=n.alternate;return t===null?(t=Wo(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Wx(n,e,t,r,i,a){var o=2;if(r=n,typeof n=="function")eN(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Xf:return rd(t.children,i,a,e);case yk:o=8,i|=8;break;case NT:return n=Wo(12,t,e,i|2),n.elementType=NT,n.lanes=a,n;case OT:return n=Wo(13,t,e,i),n.elementType=OT,n.lanes=a,n;case PT:return n=Wo(19,t,e,i),n.elementType=PT,n.lanes=a,n;case K7:return _E(t,i,a,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Z7:o=10;break e;case J7:o=9;break e;case bk:o=11;break e;case xk:o=14;break e;case rc:o=16,r=null;break e}throw Error(ut(130,n==null?n:typeof n,""))}return e=Wo(o,t,e,i),e.elementType=n,e.type=r,e.lanes=a,e}function rd(n,e,t,r){return n=Wo(7,n,r,e),n.lanes=t,n}function _E(n,e,t,r){return n=Wo(22,n,r,e),n.elementType=K7,n.lanes=t,n.stateNode={isHidden:!1},n}function MC(n,e,t){return n=Wo(6,n,null,e),n.lanes=t,n}function DC(n,e,t){return e=Wo(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Pre(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uC(0),this.expirationTimes=uC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uC(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function tN(n,e,t,r,i,a,o,s,l){return n=new Pre(n,e,t,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Wo(3,null,null,e),n.current=a,a.stateNode=n,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bk(a),n}function Rre(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$f,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function qH(n){if(!n)return zc;n=n._reactInternals;e:{if(Pd(n)!==n||n.tag!==1)throw Error(ut(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ya(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ut(171))}if(n.tag===1){var t=n.type;if(Ya(t))return Vj(n,t,e)}return e}function GH(n,e,t,r,i,a,o,s,l){return n=tN(t,r,!0,n,i,a,o,s,l),n.context=qH(null),t=n.current,r=Sa(),i=Dc(t),a=su(r,i),a.callback=e??null,Tc(t,a,i),n.current.lanes=i,Gv(n,i,r),Za(n,r),n}function CE(n,e,t,r){var i=e.current,a=Sa(),o=Dc(i);return t=qH(t),e.context===null?e.context=t:e.pendingContext=t,e=su(a,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Tc(i,e,o),n!==null&&(Es(n,i,o,a),Bx(n,i,o)),o}function Ww(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function dL(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function nN(n,e){dL(n,e),(n=n.alternate)&&dL(n,e)}function Ire(){return null}var $H=typeof reportError=="function"?reportError:function(n){console.error(n)};function rN(n){this._internalRoot=n}AE.prototype.render=rN.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ut(409));CE(n,e,null,null)};AE.prototype.unmount=rN.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;yd(function(){CE(null,n,null,null)}),e[mu]=null}};function AE(n){this._internalRoot=n}AE.prototype.unstable_scheduleHydration=function(n){if(n){var e=Sj();n={blockedOn:null,target:n,priority:e};for(var t=0;t<uc.length&&e!==0&&e<uc[t].priority;t++);uc.splice(t,0,n),t===0&&_j(n)}};function iN(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function TE(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function fL(){}function Lre(n,e,t,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Ww(o);a.call(u)}}var o=GH(e,r,n,0,null,!1,!1,"",fL);return n._reactRootContainer=o,n[mu]=o.current,R0(n.nodeType===8?n.parentNode:n),yd(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=Ww(l);s.call(u)}}var l=tN(n,0,!1,null,null,!1,!1,"",fL);return n._reactRootContainer=l,n[mu]=l.current,R0(n.nodeType===8?n.parentNode:n),yd(function(){CE(e,l,t,r)}),l}function ME(n,e,t,r,i){var a=t._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=Ww(o);s.call(l)}}CE(e,o,n,i)}else o=Lre(t,e,n,i,r);return Ww(o)}xj=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Vg(e.pendingLanes);t!==0&&(Ek(e,t|1),Za(e,Ur()),!(Tn&6)&&(Hp=Ur()+500,nh()))}break;case 13:yd(function(){var r=gu(n,1);if(r!==null){var i=Sa();Es(r,n,1,i)}}),nN(n,1)}};_k=function(n){if(n.tag===13){var e=gu(n,134217728);if(e!==null){var t=Sa();Es(e,n,134217728,t)}nN(n,134217728)}};wj=function(n){if(n.tag===13){var e=Dc(n),t=gu(n,e);if(t!==null){var r=Sa();Es(t,n,e,r)}nN(n,e)}};Sj=function(){return Un};Ej=function(n,e){var t=Un;try{return Un=n,e()}finally{Un=t}};VT=function(n,e,t){switch(e){case"input":if(LT(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=yE(r);if(!i)throw Error(ut(90));ej(r),LT(r,i)}}}break;case"textarea":nj(n,t);break;case"select":e=t.value,e!=null&&gp(n,!!t.multiple,e,!1)}};uj=Jk;cj=yd;var Fre={usingClientEntryPoint:!1,Events:[Xv,Kf,yE,sj,lj,Jk]},pg={findFiberByHostInstance:qh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Bre={bundleType:pg.bundleType,version:pg.version,rendererPackageName:pg.rendererPackageName,rendererConfig:pg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ku.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=fj(n),n===null?null:n.stateNode},findFiberByHostInstance:pg.findFiberByHostInstance||Ire,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var z1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!z1.isDisabled&&z1.supportsFiber)try{pE=z1.inject(Bre),dl=z1}catch{}}Co.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fre;Co.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iN(e))throw Error(ut(200));return Rre(n,e,null,t)};Co.createRoot=function(n,e){if(!iN(n))throw Error(ut(299));var t=!1,r="",i=$H;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=tN(n,1,!1,null,null,t,!1,r,i),n[mu]=e.current,R0(n.nodeType===8?n.parentNode:n),new rN(e)};Co.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ut(188)):(n=Object.keys(n).join(","),Error(ut(268,n)));return n=fj(e),n=n===null?null:n.stateNode,n};Co.flushSync=function(n){return yd(n)};Co.hydrate=function(n,e,t){if(!TE(e))throw Error(ut(200));return ME(null,n,e,!0,t)};Co.hydrateRoot=function(n,e,t){if(!iN(n))throw Error(ut(405));var r=t!=null&&t.hydratedSources||null,i=!1,a="",o=$H;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=GH(e,null,n,1,t??null,i,!1,a,o),n[mu]=e.current,R0(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new AE(e)};Co.render=function(n,e,t){if(!TE(e))throw Error(ut(200));return ME(null,n,e,!1,t)};Co.unmountComponentAtNode=function(n){if(!TE(n))throw Error(ut(40));return n._reactRootContainer?(yd(function(){ME(null,null,n,!1,function(){n._reactRootContainer=null,n[mu]=null})}),!0):!1};Co.unstable_batchedUpdates=Jk;Co.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!TE(t))throw Error(ut(200));if(n==null||n._reactInternals===void 0)throw Error(ut(38));return ME(n,e,t,!1,r)};Co.version="18.2.0-next-9e3b772b8-20220608";function XH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XH)}catch(n){console.error(n)}}XH(),q7.exports=Co;var fm=q7.exports;const YH=is(fm);var pL=fm;DT.createRoot=pL.createRoot,DT.hydrateRoot=pL.hydrateRoot;function U1(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ZH={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,a){function o(u,c){if(!i[u]){if(!r[u]){var h=typeof U1=="function"&&U1;if(!c&&h)return h(u,!0);if(s)return s(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var f=i[u]={exports:{}};r[u][0].call(f.exports,function(p){var v=r[u][1][p];return o(v||p)},f,f.exports,t,r,i,a)}return i[u].exports}for(var s=typeof U1=="function"&&U1,l=0;l<a.length;l++)o(a[l]);return o}({1:[function(t,r,i){r.exports={oauthd_url:"https://oauth.io",oauthd_api:"https://oauth.io/api",version:"web-0.6.1",options:{}}},{}],2:[function(t,r,i){r.exports=function(a){var o,s;return o=a.getJquery(),s=function(l){return function(u,c,h){var d,f,p;return f=o.Deferred(),d=a.getOAuthdURL(),p={url:d+c,type:u},u==="post"||u==="put"?(p.dataType="json",p.contentType="application/json",p.data=JSON.stringify(h)):p.data=h,o.ajax(p).then(function(v){return f.resolve(v)},function(v){return f.reject(v&&v.responseJSON)}),f.promise()}}(),{get:function(l){return function(u,c){return s("get",u,c)}}(),post:function(l){return function(u,c){return s("post",u,c)}}(),put:function(l){return function(u,c){return s("put",u,c)}}(),del:function(l){return function(u,c){return s("delete",u,c)}}()}}},{}],3:[function(t,r,i){var a,o,s,l,u,c;l=t("../config"),o=t("../tools/url"),a=t("../tools/location_operations"),u=t("../tools/cookies"),c=t("../tools/lstorage"),s=t("../tools/cache"),r.exports=function(h,d,f,p){var v,y;return o=o(d),v=a(d),y=c.active()&&c||u,u.init(l,d),s.init(y,l),{initialize:function(g,w){var b;if(l.key=g,w)for(b in w)l.options[b]=w[b]},setOAuthdURL:function(g){l.oauthd_url=g,l.oauthd_base=o.getAbsUrl(l.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0]},getOAuthdURL:function(){return l.oauthd_url},getVersion:function(){return l.version},extend:function(g,w){return this[g]=w(this)},getConfig:function(){return l},getWindow:function(){return h},getDocument:function(){return d},getNavigator:function(){return p},getJquery:function(){return f},getUrl:function(){return o},getCache:function(){return s},getStorage:function(){return y},getLocationOperations:function(){return v}}}},{"../config":1,"../tools/cache":9,"../tools/cookies":10,"../tools/location_operations":12,"../tools/lstorage":13,"../tools/url":15}],4:[function(t,r,i){var a,o,s;a=t("../tools/cookies"),o=t("./request"),s=t("../tools/sha1"),r.exports=function(l){var u,c,h,d,f,p,v,y,g,w,b,m;return c=l.getUrl(),f=l.getConfig(),p=l.getDocument(),m=l.getWindow(),u=l.getJquery(),h=l.getCache(),b=t("./providers")(l),f.oauthd_base=c.getAbsUrl(f.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0],d=[],g=void 0,function(){var x,S;S=/[\\#&]oauthio=([^&]*)/.exec(p.location.hash),S&&(p.location.hash=p.location.hash.replace(/&?oauthio=[^&]*/,""),g=decodeURIComponent(S[1].replace(/\+/g," ")),x=a.read("oauthio_state"),x&&(d.push(x),a.erase("oauthio_state")))}(),v=l.getLocationOperations(),w={request:o(l,d,b)},y={initialize:function(x,S){return l.initialize(x,S)},setOAuthdURL:function(x){f.oauthd_url=x,f.oauthd_base=c.getAbsUrl(f.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0]},create:function(x,S,C){var T,M,A;if(!S)return h.tryCache(y,x,!0);typeof C!="object"&&b.fetchDescription(x),M=function(D){return w.request.mkHttp(x,S,C,D)},A={};for(T in S)A[T]=S[T];return A.toJson=function(){var D;return D={},A.access_token!=null&&(D.access_token=A.access_token),A.oauth_token!=null&&(D.oauth_token=A.oauth_token),A.oauth_token_secret!=null&&(D.oauth_token_secret=A.oauth_token_secret),A.expires_in!=null&&(D.expires_in=A.expires_in),A.token_type!=null&&(D.token_type=A.token_type),A.id_token!=null&&(D.id_token=A.id_token),A.provider!=null&&(D.provider=A.provider),A.email!=null&&(D.email=A.email),D},A.get=M("GET"),A.post=M("POST"),A.put=M("PUT"),A.patch=M("PATCH"),A.del=M("DELETE"),A.me=w.request.mkHttpMe(x,S,C,"GET"),A},popup:function(x,S,C){var T,M,A,D,O,U,L,F,k,P,z;return D=!1,A=function(B){if(!D){if(B.origin!==f.oauthd_base)return;try{F.close()}catch{}return S.data=B.data,w.request.sendCallback(S,T),D=!0}},F=void 0,M=void 0,k=void 0,T=u.Deferred(),S=S||{},f.key?(arguments.length===2&&typeof S=="function"&&(C=S,S={}),h.cacheEnabled(S.cache)&&(U=h.tryCache(y,x,S.cache))?(T!=null&&T.resolve(U),C?C(null,U):T.promise()):(S.state||(S.state=s.create_hash(),S.state_type="client"),d.push(S.state),L=f.oauthd_url+"/auth/"+x+"?k="+f.key,L+="&d="+encodeURIComponent(c.getAbsUrl("/")),S&&(L+="&opts="+encodeURIComponent(JSON.stringify(S))),S.wnd_settings?(z=S.wnd_settings,delete S.wnd_settings):z={width:Math.floor(.8*m.outerWidth),height:Math.floor(.5*m.outerHeight)},z.width<1e3&&(z.width=1e3),z.height<630&&(z.height=630),z.left=Math.floor(m.screenX+(m.outerWidth-z.width)/2),z.top=Math.floor(m.screenY+(m.outerHeight-z.height)/8),P="width="+z.width+",height="+z.height,P+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0",P+=",left="+z.left+",top="+z.top,S={provider:x,cache:S.cache},S.callback=function(B,X){return m.removeEventListener?m.removeEventListener("message",A,!1):m.detachEvent?m.detachEvent("onmessage",A):p.detachEvent&&p.detachEvent("onmessage",A),S.callback=function(){},k&&(clearTimeout(k),k=void 0),C?C(B,X):void 0},m.attachEvent?m.attachEvent("onmessage",A):p.attachEvent?p.attachEvent("onmessage",A):m.addEventListener&&m.addEventListener("message",A,!1),typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessageExternal&&chrome.runtime.onMessageExternal.addListener(function(B,X,J){return B.origin=X.url.match(/^.{2,5}:\/\/[^\/]+/)[0],A(B)}),!M&&(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0)&&(M=p.createElement("iframe"),M.src=f.oauthd_url+"/auth/iframe?d="+encodeURIComponent(c.getAbsUrl("/")),M.width=0,M.height=0,M.frameBorder=0,M.style.visibility="hidden",p.body.appendChild(M)),k=setTimeout(function(){T!=null&&T.reject(new Error("Authorization timed out")),S.callback&&typeof S.callback=="function"&&S.callback(new Error("Authorization timed out"));try{F.close()}catch{}},12e5),F=m.open(L,"Authorization",P),F?(F.focus(),O=m.setInterval(function(){return F!==null&&!F.closed||(m.clearInterval(O),D||(T!=null&&T.reject(new Error("The popup was closed")),!S.callback||typeof S.callback!="function"))?void 0:S.callback(new Error("The popup was closed"))},500)):(T!=null&&T.reject(new Error("Could not open a popup")),S.callback&&typeof S.callback=="function"&&S.callback(new Error("Could not open a popup"))),T!=null?T.promise():void 0)):(T!=null&&T.reject(new Error("OAuth object must be initialized")),C==null?T.promise():C(new Error("OAuth object must be initialized")))},redirect:function(x,S,C){var T;if(arguments.length===2&&(C=S,S={}),typeof C!="string")throw new Error("You must specify an url");return h.cacheEnabled(S.cache)&&h.tryCache(y,x,S.cache)?(C=c.getAbsUrl(C)+(C.indexOf("#")===-1?"#":"&")+"oauthio=cache:"+x,v.changeHref(C),void v.reload()):(S.state||(S.state=s.create_hash(),S.state_type="client"),a.create("oauthio_state",S.state),T=encodeURIComponent(c.getAbsUrl(C)),C=f.oauthd_url+"/auth/"+x+"?k="+f.key,C+="&redirect_uri="+T,S&&(C+="&opts="+encodeURIComponent(JSON.stringify(S))),void v.changeHref(C))},isRedirect:function(x){var S,C;if(g==null)return!1;if((g!=null?g.substr(0,6):void 0)==="cache:")return S=g!=null?g.substr(6):void 0,x?S.toLowerCase()===x.toLowerCase():S;try{C=JSON.parse(g)}catch{return!1}return x?C.provider.toLowerCase()===x.toLowerCase():C.provider},callback:function(x,S,C){var T,M,A;if(T=u.Deferred(),arguments.length===1&&typeof x=="function"&&(C=x,x=void 0,S={}),arguments.length===1&&typeof x=="string"&&(S={}),arguments.length===2&&typeof S=="function"&&(C=S,S={}),h.cacheEnabled(S!=null?S.cache:void 0)||(g!=null?g.substr(0,6):void 0)==="cache:"){if(x||(g!=null?g.substr(0,6):void 0)!=="cache:"||(x=g.substr(6)),A=h.tryCache(y,x,!0)){if(!C)return T!=null&&T.resolve(A),T!=null?T.promise():void 0;if(A)return C(null,A)}else if((g!=null?g.substr(0,6):void 0)==="cache:")return M=new Error("Could not fetch data from cache"),C?C(M):(T!=null&&T.reject(M),T!=null?T.promise():void 0)}return g?(w.request.sendCallback({data:g,provider:x,cache:S!=null?S.cache:void 0,expires:S!=null?S.expires:void 0,callback:C},T),T!=null?T.promise():void 0):void 0},clearCache:function(x){return h.clearCache(x)},http_me:function(x){w.request.http_me&&w.request.http_me(x)},http:function(x){w.request.http&&w.request.http(x)},getVersion:function(){return l.getVersion.apply(this)}}}},{"../tools/cookies":10,"../tools/sha1":14,"./providers":5,"./request":6}],5:[function(t,r,i){var a;a=t("../config"),r.exports=function(o){var s,l,u,c;return s=o.getJquery(),c={},u={},l={execProvidersCb:function(h,d,f){var p,v;if(u[h]){p=u[h],delete u[h];for(v in p)p[v](d,f)}},fetchDescription:function(h){c[h]||(c[h]=!0,s.ajax({url:a.oauthd_api+"/providers/"+h,data:{extend:!0},dataType:"json"}).done(function(d){c[h]=d.data,l.execProvidersCb(h,null,d.data)}).always(function(){typeof c[h]!="object"&&(delete c[h],l.execProvidersCb(h,new Error("Unable to fetch request description")))}))},getDescription:function(h,d,f){return d=d||{},typeof c[h]=="object"?f(null,c[h]):(c[h]||l.fetchDescription(h),d.wait?(u[h]=u[h]||[],void u[h].push(f)):f(null,{}))}}}},{"../config":1}],6:[function(t,r,i){var a,o=[].indexOf||function(s){for(var l=0,u=this.length;u>l;l++)if(l in this&&this[l]===s)return l;return-1};a=t("../tools/url")(),r.exports=function(s,l,u){var c,h,d,f,p;return c=s.getJquery(),d=s.getConfig(),h=s.getCache(),f=[],p=!1,{retrieveMethods:function(){var v;return v=c.Deferred(),p?v.resolve(f):c.ajax(d.oauthd_url+"/api/extended-endpoints").then(function(y){return f=y.data,p=!0,v.resolve()}).fail(function(y){return p=!0,v.reject(y)}),v.promise()},generateMethods:function(v,y,g){var w,b,m,x,S,C,T,M,A;if(f!=null){for(T=[],b=w=0,x=f.length;x>w;b=++w)M=f[b],S=M.name.split("."),C=v,T.push((function(){var D,O,U;for(U=[],m=D=0,O=S.length;O>D;m=++D)A=S[m],m<S.length-1?(C[A]==null&&(C[A]={}),U.push(C=C[A])):U.push(C[A]=this.mkHttpAll(g,y,M,arguments));return U}).apply(this,arguments));return T}},http:function(v){var y,g,w,b,m;w=function(){var x,S,C,T;if(T=m.oauthio.request||{},!T.cors){m.url=encodeURIComponent(m.url),m.url[0]!=="/"&&(m.url="/"+m.url),m.url=d.oauthd_url+"/request/"+m.oauthio.provider+m.url,m.headers=m.headers||{},m.headers.oauthio="k="+d.key,m.oauthio.tokens.oauth_token&&m.oauthio.tokens.oauth_token_secret&&(m.headers.oauthio+="&oauthv=1");for(S in m.oauthio.tokens)m.headers.oauthio+="&"+encodeURIComponent(S)+"="+encodeURIComponent(m.oauthio.tokens[S]);return delete m.oauthio,c.ajax(m)}if(m.oauthio.tokens){if(m.oauthio.tokens.access_token&&(m.oauthio.tokens.token=m.oauthio.tokens.access_token),m.url.match(/^[a-z]{2,16}:\/\//)||(m.url[0]!=="/"&&(m.url="/"+m.url),m.url=T.url+m.url),m.url=a.replaceParam(m.url,m.oauthio.tokens,T.parameters),T.query){C=[];for(x in T.query)C.push(encodeURIComponent(x)+"="+encodeURIComponent(a.replaceParam(T.query[x],m.oauthio.tokens,T.parameters)));o.call(m.url,"?")>=0?m.url+="&"+C:m.url+="?"+C}if(T.headers){m.headers=m.headers||{};for(x in T.headers)m.headers[x]=a.replaceParam(T.headers[x],m.oauthio.tokens,T.parameters)}return delete m.oauthio,c.ajax(m)}},m={},b=void 0;for(b in v)m[b]=v[b];return m.oauthio.request&&m.oauthio.request!==!0?w():(g={wait:!!m.oauthio.request},y=c.Deferred(),u.getDescription(m.oauthio.provider,g,function(x,S){return x?y.reject(x):(m.oauthio.tokens.oauth_token&&m.oauthio.tokens.oauth_token_secret?m.oauthio.request=S.oauth1&&S.oauth1.request:m.oauthio.request=S.oauth2&&S.oauth2.request,void y.resolve())}),y.then(w))},http_me:function(v){var y,g,w,b,m;w=function(){var x,S,C;x=c.Deferred(),m.oauthio.request,m.url=d.oauthd_url+"/auth/"+m.oauthio.provider+"/me",m.headers=m.headers||{},m.headers.oauthio="k="+d.key,m.oauthio.tokens.oauth_token&&m.oauthio.tokens.oauth_token_secret&&(m.headers.oauthio+="&oauthv=1");for(S in m.oauthio.tokens)m.headers.oauthio+="&"+encodeURIComponent(S)+"="+encodeURIComponent(m.oauthio.tokens[S]);return delete m.oauthio,C=c.ajax(m),c.when(C).done(function(T){x.resolve(T.data)}).fail(function(T){T.responseJSON?x.reject(T.responseJSON.data):x.reject(new Error("An error occured while trying to access the resource"))}),x.promise()},m={};for(b in v)m[b]=v[b];return m.oauthio.request&&m.oauthio.request!==!0?w():(g={wait:!!m.oauthio.request},y=c.Deferred(),u.getDescription(m.oauthio.provider,g,function(x,S){return x?y.reject(x):(m.oauthio.tokens.oauth_token&&m.oauthio.tokens.oauth_token_secret?m.oauthio.request=S.oauth1&&S.oauth1.request:m.oauthio.request=S.oauth2&&S.oauth2.request,void y.resolve())}),y.then(w))},http_all:function(v,y,g){return function(){var w,b,m;w=c.Deferred(),v.oauthio.request,v.headers=v.headers||{},v.headers.oauthio="k="+d.key,v.oauthio.tokens.oauth_token&&v.oauthio.tokens.oauth_token_secret&&(v.headers.oauthio+="&oauthv=1");for(b in v.oauthio.tokens)v.headers.oauthio+="&"+encodeURIComponent(b)+"="+encodeURIComponent(v.oauthio.tokens[b]);return delete v.oauthio,m=c.ajax(v),c.when(m).done(function(x){if(typeof x.data=="string")try{x.data=JSON.parse(x.data)}catch{x.data=x.data}finally{w.resolve(x.data)}}).fail(function(x){x.responseJSON?w.reject(x.responseJSON.data):w.reject(new Error("An error occured while trying to access the resource"))}),w.promise()}()},mkHttp:function(v,y,g,w){var b;return b=this,function(m,x){var S,C;if(C={},typeof m=="string"){if(typeof x=="object")for(S in x)C[S]=x[S];C.url=m}else if(typeof m=="object")for(S in m)C[S]=m[S];return C.type=C.type||w,C.oauthio={provider:v,tokens:y,request:g},b.http(C)}},mkHttpMe:function(v,y,g,w){var b;return b=this,function(m){var x;return x={},x.type=x.type||w,x.oauthio={provider:v,tokens:y,request:g},x.data=x.data||{},m&&(x.data.filter=m.join(",")),b.http_me(x)}},mkHttpAll:function(v,y,g){var w;return w=this,function(){var b,m,x,S;m={},m.type=g.method,m.url=d.oauthd_url+g.endpoint.replace(":provider",v),m.oauthio={provider:v,tokens:y},m.data={};for(b in arguments)S=arguments[b],x=g.params[b],x!=null&&(m.data[x.name]=S);return m.data=m.data||{},w.http_all(m,g,arguments)}},sendCallback:function(v,y){var g,w,b,m,x,S,C,T;g=this,w=void 0,b=void 0;try{w=JSON.parse(v.data)}catch{return y.reject(new Error("Error while parsing result")),v.callback(new Error("Error while parsing result"))}if(w&&w.provider){if(v.provider&&w.provider.toLowerCase()!==v.provider.toLowerCase())return b=new Error("Returned provider name does not match asked provider"),y.reject(b),v.callback&&typeof v.callback=="function"?v.callback(b):void 0;if(w.status==="error"||w.status==="fail")return b=new Error(w.message),b.body=w.data,y.reject(b),v.callback&&typeof v.callback=="function"?v.callback(b):void 0;if(w.status!=="success"||!w.data)return b=new Error,b.body=w.data,y.reject(b),v.callback&&typeof v.callback=="function"?v.callback(b):void 0;for(w.state=w.state.replace(/\s+/g,""),m=0;m<l.length;)l[m]=l[m].replace(/\s+/g,""),m++;if(!w.state||l.indexOf(w.state)===-1)return y.reject(new Error("State is not matching")),v.callback&&typeof v.callback=="function"?v.callback(new Error("State is not matching")):void 0;if(v.provider||(w.data.provider=w.provider),C=w.data,C.provider=w.provider.toLowerCase(),h.cacheEnabled(v.cache)&&C&&(v.expires&&!C.expires_in&&(C.expires_in=v.expires),h.storeCache(w.provider,C)),S=C.request,delete C.request,T=void 0,C.access_token?T={access_token:C.access_token}:C.oauth_token&&C.oauth_token_secret&&(T={oauth_token:C.oauth_token,oauth_token_secret:C.oauth_token_secret}),!S)return y.resolve(C),v.callback&&typeof v.callback=="function"?v.callback(null,C):void 0;if(S.required)for(m in S.required)T[S.required[m]]=C[S.required[m]];return x=function(M){return g.mkHttp(w.provider,T,S,M)},C.toJson=function(){var M;return M={},C.access_token!=null&&(M.access_token=C.access_token),C.oauth_token!=null&&(M.oauth_token=C.oauth_token),C.oauth_token_secret!=null&&(M.oauth_token_secret=C.oauth_token_secret),C.expires_in!=null&&(M.expires_in=C.expires_in),C.token_type!=null&&(M.token_type=C.token_type),C.id_token!=null&&(M.id_token=C.id_token),C.provider!=null&&(M.provider=C.provider),C.email!=null&&(M.email=C.email),M},C.get=x("GET"),C.post=x("POST"),C.put=x("PUT"),C.patch=x("PATCH"),C.del=x("DELETE"),C.me=g.mkHttpMe(w.provider,T,S,"GET"),this.retrieveMethods().then(function(M){return function(){return M.generateMethods(C,T,w.provider),y.resolve(C),v.callback&&typeof v.callback=="function"?v.callback(null,C):void 0}}(this)).fail(function(M){return function(A){return console.log("Could not retrieve methods",A),y.resolve(C),v.callback&&typeof v.callback=="function"?v.callback(null,C):void 0}}())}}}}},{"../tools/url":15}],7:[function(t,r,i){r.exports=function(a){var o,s,l,u,c;return o=a.getJquery(),l=a.getConfig(),c=a.getStorage(),u=null,s=function(){function h(d){this.token=d.token,this.data=d.user,this.providers=d.providers,u=this.getEditableData()}return h.prototype.getEditableData=function(){var d,f;d=[];for(f in this.data)["id","email"].indexOf(f)===-1&&d.push({key:f,value:this.data[f]});return d},h.prototype.save=function(){var d,f,p,v,y,g,w,b;for(f={},p=0,g=u.length;g>p;p++)d=u[p],this.data[d.key]!==d.value&&(f[d.key]=this.data[d.key]),this.data[d.key]===null&&delete this.data[d.key];for(y=function(m){var x,S,C;for(x=0,S=u.length;S>x;x++)if(C=u[x],C.key===m)return!0;return!1},b=this.getEditableData(),v=0,w=b.length;w>v;v++)d=b[v],y(d.key)||(f[d.key]=this.data[d.key]);return this.saveLocal(),a.API.put("/api/usermanagement/user?k="+l.key+"&token="+this.token,f)},h.prototype.select=function(d){return null},h.prototype.saveLocal=function(){var d;return d={token:this.token,user:this.data,providers:this.providers},c.erase("oio_auth"),c.create("oio_auth",JSON.stringify(d),21600)},h.prototype.hasProvider=function(d){return!!this.providers&&this.providers.indexOf(d)!==-1},h.prototype.getProviders=function(){var d;return d=o.Deferred(),a.API.get("/api/usermanagement/user/providers?k="+l.key+"&token="+this.token).done(function(f){return function(p){return f.providers=p.data,f.saveLocal(),d.resolve(f.providers)}}(this)).fail(function(f){return d.reject(f)}),d.promise()},h.prototype.addProvider=function(d){var f;return f=o.Deferred(),typeof d.toJson=="function"&&(d=d.toJson()),d.email=this.data.email,this.providers||(this.providers=[]),this.providers.push(d.provider),a.API.post("/api/usermanagement/user/providers?k="+l.key+"&token="+this.token,d).done(function(p){return function(v){return p.data=v.data,p.saveLocal(),f.resolve()}}(this)).fail(function(p){return function(v){return p.providers.splice(p.providers.indexOf(d.provider),1),f.reject(v)}}(this)),f.promise()},h.prototype.removeProvider=function(d){var f;return f=o.Deferred(),this.providers.splice(this.providers.indexOf(d),1),a.API.del("/api/usermanagement/user/providers/"+d+"?k="+l.key+"&token="+this.token).done(function(p){return function(v){return p.saveLocal(),f.resolve(v)}}(this)).fail(function(p){return function(v){return p.providers.push(d),f.reject(v)}}(this)),f.promise()},h.prototype.changePassword=function(d,f){return a.API.post("/api/usermanagement/user/password?k="+l.key+"&token="+this.token,{password:f})},h.prototype.isLoggued=function(){return a.User.isLogged()},h.prototype.isLogged=function(){return a.User.isLogged()},h.prototype.logout=function(){var d;return d=o.Deferred(),c.erase("oio_auth"),a.API.post("/api/usermanagement/user/logout?k="+l.key+"&token="+this.token).done(function(){return d.resolve()}).fail(function(f){return d.reject(f)}),d.promise()},h}(),{initialize:function(h,d){return a.initialize(h,d)},setOAuthdURL:function(h){return a.setOAuthdURL(h)},signup:function(h){var d;return d=o.Deferred(),typeof h.toJson=="function"&&(h=h.toJson()),a.API.post("/api/usermanagement/signup?k="+l.key,h).done(function(f){return c.create("oio_auth",JSON.stringify(f.data),f.data.expires_in||21600),d.resolve(new s(f.data))}).fail(function(f){return d.reject(f)}),d.promise()},signin:function(h,d){var f,p;return f=o.Deferred(),typeof h=="string"||d?a.API.post("/api/usermanagement/signin?k="+l.key,{email:h,password:d}).done(function(v){return c.create("oio_auth",JSON.stringify(v.data),v.data.expires_in||21600),f.resolve(new s(v.data))}).fail(function(v){return f.reject(v)}):(p=h,typeof p.toJson=="function"&&(p=p.toJson()),a.API.post("/api/usermanagement/signin?k="+l.key,p).done(function(v){return c.create("oio_auth",JSON.stringify(v.data),v.data.expires_in||21600),f.resolve(new s(v.data))}).fail(function(v){return f.reject(v)})),f.promise()},confirmResetPassword:function(h,d){return a.API.post("/api/usermanagement/user/password?k="+l.key,{password:h,token:d})},resetPassword:function(h,d){return a.API.post("/api/usermanagement/user/password/reset?k="+l.key,{email:h})},refreshIdentity:function(){var h;return h=o.Deferred(),a.API.get("/api/usermanagement/user?k="+l.key+"&token="+JSON.parse(c.read("oio_auth")).token).done(function(d){return h.resolve(new s(d.data))}).fail(function(d){return h.reject(d)}),h.promise()},getIdentity:function(){var h;return h=c.read("oio_auth"),h?new s(JSON.parse(h)):null},isLogged:function(){var h;return h=c.read("oio_auth"),!!h}}}},{}],8:[function(t,r,i){(function(){var a,o;return o=t("./tools/jquery-lite.js"),a=t("./lib/core")(window,document,o,navigator),a.extend("OAuth",t("./lib/oauth")),a.extend("API",t("./lib/api")),a.extend("User",t("./lib/user")),typeof angular<"u"&&angular!==null&&angular.module("oauthio",[]).factory("OAuth",[function(){return a.OAuth}]).factory("User",[function(){return a.User}]),i.OAuthio=a,window.User=i.User=i.OAuthio.User,window.OAuth=i.OAuth=i.OAuthio.OAuth,typeof r<"u"&&r!==null&&r.exports&&(r.exports=i),i})()},{"./lib/api":2,"./lib/core":3,"./lib/oauth":4,"./lib/user":7,"./tools/jquery-lite.js":11}],9:[function(t,r,i){r.exports={init:function(a,o){return this.config=o,this.storage=a},tryCache:function(a,o,s){var l,u;if(this.cacheEnabled(s)){if(s=this.storage.read("oauthio_provider_"+o),!s)return!1;s=decodeURIComponent(s)}if(typeof s=="string")try{s=JSON.parse(s)}catch{return!1}if(typeof s=="object"){u={};for(l in s)l!=="request"&&typeof s[l]!="function"&&(u[l]=s[l]);return a.create(o,u,s.request)}return!1},storeCache:function(a,o){var s;s=3600,o.expires_in?s=o.expires_in:(this.config.options.expires||this.config.options.expires===!1)&&(s=this.config.options.expires),this.storage.create("oauthio_provider_"+a,encodeURIComponent(JSON.stringify(o)),s)},cacheEnabled:function(a){return typeof a>"u"?this.config.options.cache:a},clearCache:function(a){a?this.storage.erase("oauthio_provider_"+a):this.storage.eraseFrom("oauthio_provider_")}}},{}],10:[function(t,r,i){r.exports={init:function(a,o){return this.config=a,this.document=o},create:function(a,o,s){var l;this.erase(a),l=new Date,s?l.setTime(l.getTime()+1e3*(s||1200)):l.setFullYear(l.getFullYear()+3),s="; expires="+l.toGMTString(),this.document.cookie=a+"="+o+s+"; path=/"},read:function(a){var o,s,l,u;for(u=a+"=",s=this.document.cookie.split(";"),l=0;l<s.length;){for(o=s[l];o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(u)===0)return o.substring(u.length,o.length);l++}return null},erase:function(a){var o;o=new Date,o.setTime(o.getTime()-864e5),this.document.cookie=a+"=; expires="+o.toGMTString()+"; path=/"},eraseFrom:function(a){var o,s,l,u,c;for(l=this.document.cookie.split(";"),u=0,c=l.length;c>u;u++)s=l[u],o=s.split("=")[0].trim(),o.substr(0,a.length)===a&&this.erase(o)}}},{}],11:[function(t,r,i){(function(a,o){typeof r=="object"&&typeof r.exports=="object"?r.exports=a.document?o(a,!0):function(s){if(!s.document)throw new Error("jQuery requires a window with a document");return o(s)}:o(a)})(typeof window<"u"?window:this,function(a,o){function s(H){var te=H.length,le=k.type(H);return le==="function"||k.isWindow(H)?!1:H.nodeType===1&&te?!0:le==="array"||te===0||typeof te=="number"&&te>0&&te-1 in H}function l(H){var te=se[H]={};return k.each(H.match(fe)||[],function(le,ve){te[ve]=!0}),te}function u(){L.removeEventListener("DOMContentLoaded",u,!1),a.removeEventListener("load",u,!1),k.ready()}function c(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=k.expando+Math.random()}function h(H,te,le){var ve;if(le===void 0&&H.nodeType===1)if(ve="data-"+te.replace(be,"-$1").toLowerCase(),le=H.getAttribute(ve),typeof le=="string"){try{le=le==="true"?!0:le==="false"?!1:le==="null"?null:+le+""===le?+le:Me.test(le)?k.parseJSON(le):le}catch{}data_user.set(H,te,le)}else le=void 0;return le}function d(){return!0}function f(){return!1}function p(){try{return L.activeElement}catch{}}function v(H){return function(te,le){typeof te!="string"&&(le=te,te="*");var ve,Ce=0,Oe=te.toLowerCase().match(fe)||[];if(k.isFunction(le))for(;ve=Oe[Ce++];)ve[0]==="+"?(ve=ve.slice(1)||"*",(H[ve]=H[ve]||[]).unshift(le)):(H[ve]=H[ve]||[]).push(le)}}function y(H,te,le,ve){function Ce($e){var nt;return Oe[$e]=!0,k.each(H[$e]||[],function(ft,Et){var rt=Et(te,le,ve);return typeof rt!="string"||He||Oe[rt]?He?!(nt=rt):void 0:(te.dataTypes.unshift(rt),Ce(rt),!1)}),nt}var Oe={},He=H===qe;return Ce(te.dataTypes[0])||!Oe["*"]&&Ce("*")}function g(H,te){var le,ve,Ce=k.ajaxSettings.flatOptions||{};for(le in te)te[le]!==void 0&&((Ce[le]?H:ve||(ve={}))[le]=te[le]);return ve&&k.extend(!0,H,ve),H}function w(H,te,le){for(var ve,Ce,Oe,He,$e=H.contents,nt=H.dataTypes;nt[0]==="*";)nt.shift(),ve===void 0&&(ve=H.mimeType||te.getResponseHeader("Content-Type"));if(ve){for(Ce in $e)if($e[Ce]&&$e[Ce].test(ve)){nt.unshift(Ce);break}}if(nt[0]in le)Oe=nt[0];else{for(Ce in le){if(!nt[0]||H.converters[Ce+" "+nt[0]]){Oe=Ce;break}He||(He=Ce)}Oe=Oe||He}return Oe?(Oe!==nt[0]&&nt.unshift(Oe),le[Oe]):void 0}function b(H,te,le,ve){var Ce,Oe,He,$e,nt,ft={},Et=H.dataTypes.slice();if(Et[1])for(He in H.converters)ft[He.toLowerCase()]=H.converters[He];for(Oe=Et.shift();Oe;)if(H.responseFields[Oe]&&(le[H.responseFields[Oe]]=te),!nt&&ve&&H.dataFilter&&(te=H.dataFilter(te,H.dataType)),nt=Oe,Oe=Et.shift()){if(Oe==="*")Oe=nt;else if(nt!=="*"&&nt!==Oe){if(He=ft[nt+" "+Oe]||ft["* "+Oe],!He){for(Ce in ft)if($e=Ce.split(" "),$e[1]===Oe&&(He=ft[nt+" "+$e[0]]||ft["* "+$e[0]])){He===!0?He=ft[Ce]:ft[Ce]!==!0&&(Oe=$e[0],Et.unshift($e[1]));break}}if(He!==!0)if(He&&H.throws)te=He(te);else try{te=He(te)}catch(rt){return{state:"parsererror",error:He?rt:"No conversion from "+nt+" to "+Oe}}}}return{state:"success",data:te}}function m(H,te,le,ve){var Ce;if(k.isArray(te))k.each(te,function(Oe,He){le||Ze.test(H)?ve(H,He):m(H+"["+(typeof He=="object"?Oe:"")+"]",He,le,ve)});else if(le||k.type(te)!=="object")ve(H,te);else for(Ce in te)m(H+"["+Ce+"]",te[Ce],le,ve)}var x=[],S=x.slice,C=x.concat,T=x.push,M=x.indexOf,A={},D=A.toString,O=A.hasOwnProperty,U={},L=a.document,F="2.1.1 -attributes,-attributes/attr,-attributes/classes,-attributes/prop,-attributes/support,-attributes/val,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var,-css/var/cssExpand,-css/var/getStyles,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-css,-effects,-effects/Tween,-effects/animatedSelector,-dimensions,-offset,-data/var/data_user,-deprecated,-event/alias,-event/support,-intro,-manipulation/_evalUrl,-manipulation/support,-manipulation/var,-manipulation/var/rcheckableType,-manipulation,-outro,-queue,-queue/delay,-selector-native,-selector-sizzle,-sizzle/dist,-sizzle/dist/sizzle,-sizzle/dist/min,-sizzle/test,-sizzle/test/jquery,-traversing,-traversing/findFilter,-traversing/var/rneedsContext,-traversing/var,-wrap,-exports,-exports/amd",k=function(H,te){return new k.fn.init(H,te)},P=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,z=/^-ms-/,B=/-([\da-z])/gi,X=function(H,te){return te.toUpperCase()};k.fn=k.prototype={jquery:F,constructor:k,selector:"",length:0,toArray:function(){return S.call(this)},get:function(H){return H!=null?0>H?this[H+this.length]:this[H]:S.call(this)},pushStack:function(H){var te=k.merge(this.constructor(),H);return te.prevObject=this,te.context=this.context,te},each:function(H,te){return k.each(this,H,te)},map:function(H){return this.pushStack(k.map(this,function(te,le){return H.call(te,le,te)}))},slice:function(){return this.pushStack(S.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(H){var te=this.length,le=+H+(0>H?te:0);return this.pushStack(le>=0&&te>le?[this[le]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:T,sort:x.sort,splice:x.splice},k.extend=k.fn.extend=function(){var H,te,le,ve,Ce,Oe,He=arguments[0]||{},$e=1,nt=arguments.length,ft=!1;for(typeof He=="boolean"&&(ft=He,He=arguments[$e]||{},$e++),typeof He=="object"||k.isFunction(He)||(He={}),$e===nt&&(He=this,$e--);nt>$e;$e++)if((H=arguments[$e])!=null)for(te in H)le=He[te],ve=H[te],He!==ve&&(ft&&ve&&(k.isPlainObject(ve)||(Ce=k.isArray(ve)))?(Ce?(Ce=!1,Oe=le&&k.isArray(le)?le:[]):Oe=le&&k.isPlainObject(le)?le:{},He[te]=k.extend(ft,Oe,ve)):ve!==void 0&&(He[te]=ve));return He},k.extend({expando:"jQuery"+(F+Math.random()).replace(/\D/g,""),isReady:!0,error:function(H){throw new Error(H)},noop:function(){},isFunction:function(H){return k.type(H)==="function"},isArray:Array.isArray,isWindow:function(H){return H!=null&&H===H.window},isNumeric:function(H){return!k.isArray(H)&&H-parseFloat(H)>=0},isPlainObject:function(H){return k.type(H)!=="object"||H.nodeType||k.isWindow(H)?!1:!H.constructor||O.call(H.constructor.prototype,"isPrototypeOf")},isEmptyObject:function(H){var te;for(te in H)return!1;return!0},type:function(H){return H==null?H+"":typeof H=="object"||typeof H=="function"?A[D.call(H)]||"object":typeof H},globalEval:function(H){var te,le=eval;H=k.trim(H),H&&(H.indexOf("use strict")===1?(te=L.createElement("script"),te.text=H,L.head.appendChild(te).parentNode.removeChild(te)):le(H))},camelCase:function(H){return H.replace(z,"ms-").replace(B,X)},nodeName:function(H,te){return H.nodeName&&H.nodeName.toLowerCase()===te.toLowerCase()},each:function(H,te,le){var ve,Ce=0,Oe=H.length,He=s(H);if(le){if(He)for(;Oe>Ce&&(ve=te.apply(H[Ce],le),ve!==!1);Ce++);else for(Ce in H)if(ve=te.apply(H[Ce],le),ve===!1)break}else if(He)for(;Oe>Ce&&(ve=te.call(H[Ce],Ce,H[Ce]),ve!==!1);Ce++);else for(Ce in H)if(ve=te.call(H[Ce],Ce,H[Ce]),ve===!1)break;return H},trim:function(H){return H==null?"":(H+"").replace(P,"")},makeArray:function(H,te){var le=te||[];return H!=null&&(s(Object(H))?k.merge(le,typeof H=="string"?[H]:H):T.call(le,H)),le},inArray:function(H,te,le){return te==null?-1:M.call(te,H,le)},merge:function(H,te){for(var le=+te.length,ve=0,Ce=H.length;le>ve;ve++)H[Ce++]=te[ve];return H.length=Ce,H},grep:function(H,te,le){for(var ve,Ce=[],Oe=0,He=H.length,$e=!le;He>Oe;Oe++)ve=!te(H[Oe],Oe),ve!==$e&&Ce.push(H[Oe]);return Ce},map:function(H,te,le){var ve,Ce=0,Oe=H.length,He=s(H),$e=[];if(He)for(;Oe>Ce;Ce++)ve=te(H[Ce],Ce,le),ve!=null&&$e.push(ve);else for(Ce in H)ve=te(H[Ce],Ce,le),ve!=null&&$e.push(ve);return C.apply([],$e)},guid:1,proxy:function(H,te){var le,ve,Ce;return typeof te=="string"&&(le=H[te],te=H,H=le),k.isFunction(H)?(ve=S.call(arguments,2),Ce=function(){return H.apply(te||this,ve.concat(S.call(arguments)))},Ce.guid=H.guid=H.guid||k.guid++,Ce):void 0},now:Date.now,support:U}),k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(H,te){A["[object "+te+"]"]=te.toLowerCase()});var J,Q=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,re=k.fn.init=function(H,te){var le,ve;if(!H)return this;if(typeof H=="string"){if(le=H[0]==="<"&&H[H.length-1]===">"&&H.length>=3?[null,H,null]:Z.exec(H),!le||!le[1]&&te)return!te||te.jquery?(te||J).find(H):this.constructor(te).find(H);if(le[1]){if(te=te instanceof k?te[0]:te,k.merge(this,k.parseHTML(le[1],te&&te.nodeType?te.ownerDocument||te:L,!0)),Q.test(le[1])&&k.isPlainObject(te))for(le in te)k.isFunction(this[le])?this[le](te[le]):this.attr(le,te[le]);return this}return ve=L.getElementById(le[2]),ve&&ve.parentNode&&(this.length=1,this[0]=ve),this.context=L,this.selector=H,this}return H.nodeType?(this.context=this[0]=H,this.length=1,this):k.isFunction(H)?typeof J.ready<"u"?J.ready(H):H(k):(H.selector!==void 0&&(this.selector=H.selector,this.context=H.context),k.makeArray(H,this))};re.prototype=k.fn,J=k(L);var fe=/\S+/g,se={};k.Callbacks=function(H){H=typeof H=="string"?se[H]||l(H):k.extend({},H);var te,le,ve,Ce,Oe,He,$e=[],nt=!H.once&&[],ft=function(rt){for(te=H.memory&&rt,le=!0,He=Ce||0,Ce=0,Oe=$e.length,ve=!0;$e&&Oe>He;He++)if($e[He].apply(rt[0],rt[1])===!1&&H.stopOnFalse){te=!1;break}ve=!1,$e&&(nt?nt.length&&ft(nt.shift()):te?$e=[]:Et.disable())},Et={add:function(){if($e){var rt=$e.length;(function xt($t){k.each($t,function(Pr,Cr){var Kn=k.type(Cr);Kn==="function"?H.unique&&Et.has(Cr)||$e.push(Cr):Cr&&Cr.length&&Kn!=="string"&&xt(Cr)})})(arguments),ve?Oe=$e.length:te&&(Ce=rt,ft(te))}return this},remove:function(){return $e&&k.each(arguments,function(rt,xt){for(var $t;($t=k.inArray(xt,$e,$t))>-1;)$e.splice($t,1),ve&&(Oe>=$t&&Oe--,He>=$t&&He--)}),this},has:function(rt){return rt?k.inArray(rt,$e)>-1:!(!$e||!$e.length)},empty:function(){return $e=[],Oe=0,this},disable:function(){return $e=nt=te=void 0,this},disabled:function(){return!$e},lock:function(){return nt=void 0,te||Et.disable(),this},locked:function(){return!nt},fireWith:function(rt,xt){return!$e||le&&!nt||(xt=xt||[],xt=[rt,xt.slice?xt.slice():xt],ve?nt.push(xt):ft(xt)),this},fire:function(){return Et.fireWith(this,arguments),this},fired:function(){return!!le}};return Et},k.extend({Deferred:function(H){var te=[["resolve","done",k.Callbacks("once memory"),"resolved"],["reject","fail",k.Callbacks("once memory"),"rejected"],["notify","progress",k.Callbacks("memory")]],le="pending",ve={state:function(){return le},always:function(){return Ce.done(arguments).fail(arguments),this},then:function(){var Oe=arguments;return k.Deferred(function(He){k.each(te,function($e,nt){var ft=k.isFunction(Oe[$e])&&Oe[$e];Ce[nt[1]](function(){var Et=ft&&ft.apply(this,arguments);Et&&k.isFunction(Et.promise)?Et.promise().done(He.resolve).fail(He.reject).progress(He.notify):He[nt[0]+"With"](this===ve?He.promise():this,ft?[Et]:arguments)})}),Oe=null}).promise()},promise:function(Oe){return Oe!=null?k.extend(Oe,ve):ve}},Ce={};return ve.pipe=ve.then,k.each(te,function(Oe,He){var $e=He[2],nt=He[3];ve[He[1]]=$e.add,nt&&$e.add(function(){le=nt},te[1^Oe][2].disable,te[2][2].lock),Ce[He[0]]=function(){return Ce[He[0]+"With"](this===Ce?ve:this,arguments),this},Ce[He[0]+"With"]=$e.fireWith}),ve.promise(Ce),H&&H.call(Ce,Ce),Ce},when:function(H){var te,le,ve,Ce=0,Oe=S.call(arguments),He=Oe.length,$e=He!==1||H&&k.isFunction(H.promise)?He:0,nt=$e===1?H:k.Deferred(),ft=function(Et,rt,xt){return function($t){rt[Et]=this,xt[Et]=arguments.length>1?S.call(arguments):$t,xt===te?nt.notifyWith(rt,xt):--$e||nt.resolveWith(rt,xt)}};if(He>1)for(te=new Array(He),le=new Array(He),ve=new Array(He);He>Ce;Ce++)Oe[Ce]&&k.isFunction(Oe[Ce].promise)?Oe[Ce].promise().done(ft(Ce,ve,Oe)).fail(nt.reject).progress(ft(Ce,le,te)):--$e;return $e||nt.resolveWith(ve,Oe),nt.promise()}});var ye;k.fn.ready=function(H){return k.ready.promise().done(H),this},k.extend({isReady:!1,readyWait:1,holdReady:function(H){H?k.readyWait++:k.ready(!0)},ready:function(H){(H===!0?--k.readyWait:k.isReady)||(k.isReady=!0,H!==!0&&--k.readyWait>0||(ye.resolveWith(L,[k]),k.fn.triggerHandler&&(k(L).triggerHandler("ready"),k(L).off("ready"))))}}),k.ready.promise=function(H){return ye||(ye=k.Deferred(),L.readyState==="complete"?setTimeout(k.ready):(L.addEventListener("DOMContentLoaded",u,!1),a.addEventListener("load",u,!1))),ye.promise(H)},k.ready.promise();var De=k.access=function(H,te,le,ve,Ce,Oe,He){var $e=0,nt=H.length,ft=le==null;if(k.type(le)==="object"){Ce=!0;for($e in le)k.access(H,te,$e,le[$e],!0,Oe,He)}else if(ve!==void 0&&(Ce=!0,k.isFunction(ve)||(He=!0),ft&&(He?(te.call(H,ve),te=null):(ft=te,te=function(Et,rt,xt){return ft.call(k(Et),xt)})),te))for(;nt>$e;$e++)te(H[$e],le,He?ve:ve.call(H[$e],$e,te(H[$e],le)));return Ce?H:ft?te.call(H):nt?te(H[0],le):Oe};k.acceptData=function(H){return H.nodeType===1||H.nodeType===9||!+H.nodeType},c.uid=1,c.accepts=k.acceptData,c.prototype={key:function(H){if(!c.accepts(H))return 0;var te={},le=H[this.expando];if(!le){le=c.uid++;try{te[this.expando]={value:le},Object.defineProperties(H,te)}catch{te[this.expando]=le,k.extend(H,te)}}return this.cache[le]||(this.cache[le]={}),le},set:function(H,te,le){var ve,Ce=this.key(H),Oe=this.cache[Ce];if(typeof te=="string")Oe[te]=le;else if(k.isEmptyObject(Oe))k.extend(this.cache[Ce],te);else for(ve in te)Oe[ve]=te[ve];return Oe},get:function(H,te){var le=this.cache[this.key(H)];return te===void 0?le:le[te]},access:function(H,te,le){var ve;return te===void 0||te&&typeof te=="string"&&le===void 0?(ve=this.get(H,te),ve!==void 0?ve:this.get(H,k.camelCase(te))):(this.set(H,te,le),le!==void 0?le:te)},remove:function(H,te){var le,ve,Ce,Oe=this.key(H),He=this.cache[Oe];if(te===void 0)this.cache[Oe]={};else for(k.isArray(te)?ve=te.concat(te.map(k.camelCase)):(Ce=k.camelCase(te),te in He?ve=[te,Ce]:(ve=Ce,ve=ve in He?[ve]:ve.match(fe)||[])),le=ve.length;le--;)delete He[ve[le]]},hasData:function(H){return!k.isEmptyObject(this.cache[H[this.expando]]||{})},discard:function(H){H[this.expando]&&delete this.cache[H[this.expando]]}};var pe=new c,Me=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;k.extend({hasData:function(H){return data_user.hasData(H)||pe.hasData(H)},data:function(H,te,le){return data_user.access(H,te,le)},removeData:function(H,te){data_user.remove(H,te)},_data:function(H,te,le){return pe.access(H,te,le)},_removeData:function(H,te){pe.remove(H,te)}}),k.fn.extend({data:function(H,te){var le,ve,Ce,Oe=this[0],He=Oe&&Oe.attributes;if(H===void 0){if(this.length&&(Ce=data_user.get(Oe),Oe.nodeType===1&&!pe.get(Oe,"hasDataAttrs"))){for(le=He.length;le--;)He[le]&&(ve=He[le].name,ve.indexOf("data-")===0&&(ve=k.camelCase(ve.slice(5)),h(Oe,ve,Ce[ve])));pe.set(Oe,"hasDataAttrs",!0)}return Ce}return typeof H=="object"?this.each(function(){data_user.set(this,H)}):De(this,function($e){var nt,ft=k.camelCase(H);if(Oe&&$e===void 0){if(nt=data_user.get(Oe,H),nt!==void 0||(nt=data_user.get(Oe,ft),nt!==void 0)||(nt=h(Oe,ft,void 0),nt!==void 0))return nt}else this.each(function(){var Et=data_user.get(this,ft);data_user.set(this,ft,$e),H.indexOf("-")!==-1&&Et!==void 0&&data_user.set(this,H,$e)})},null,te,arguments.length>1,null,!0)},removeData:function(H){return this.each(function(){data_user.remove(this,H)})}});var ne="undefined",Pe=/^key/,ze=/^(?:mouse|pointer|contextmenu)|click/,K=/^(?:focusinfocus|focusoutblur)$/,ie=/^([^.]*)(?:\.(.+)|)$/;k.event={global:{},add:function(H,te,le,ve,Ce){var Oe,He,$e,nt,ft,Et,rt,xt,$t,Pr,Cr,Kn=pe.get(H);if(Kn)for(le.handler&&(Oe=le,le=Oe.handler,Ce=Oe.selector),le.guid||(le.guid=k.guid++),(nt=Kn.events)||(nt=Kn.events={}),(He=Kn.handle)||(He=Kn.handle=function(Bs){return typeof k!==ne&&k.event.triggered!==Bs.type?k.event.dispatch.apply(H,arguments):void 0}),te=(te||"").match(fe)||[""],ft=te.length;ft--;)$e=ie.exec(te[ft])||[],$t=Cr=$e[1],Pr=($e[2]||"").split(".").sort(),$t&&(rt=k.event.special[$t]||{},$t=(Ce?rt.delegateType:rt.bindType)||$t,rt=k.event.special[$t]||{},Et=k.extend({type:$t,origType:Cr,data:ve,handler:le,guid:le.guid,selector:Ce,needsContext:Ce&&k.expr.match.needsContext.test(Ce),namespace:Pr.join(".")},Oe),(xt=nt[$t])||(xt=nt[$t]=[],xt.delegateCount=0,rt.setup&&rt.setup.call(H,ve,Pr,He)!==!1||H.addEventListener&&H.addEventListener($t,He,!1)),rt.add&&(rt.add.call(H,Et),Et.handler.guid||(Et.handler.guid=le.guid)),Ce?xt.splice(xt.delegateCount++,0,Et):xt.push(Et),k.event.global[$t]=!0)},remove:function(H,te,le,ve,Ce){var Oe,He,$e,nt,ft,Et,rt,xt,$t,Pr,Cr,Kn=pe.hasData(H)&&pe.get(H);if(Kn&&(nt=Kn.events)){for(te=(te||"").match(fe)||[""],ft=te.length;ft--;)if($e=ie.exec(te[ft])||[],$t=Cr=$e[1],Pr=($e[2]||"").split(".").sort(),$t){for(rt=k.event.special[$t]||{},$t=(ve?rt.delegateType:rt.bindType)||$t,xt=nt[$t]||[],$e=$e[2]&&new RegExp("(^|\\.)"+Pr.join("\\.(?:.*\\.|)")+"(\\.|$)"),He=Oe=xt.length;Oe--;)Et=xt[Oe],!Ce&&Cr!==Et.origType||le&&le.guid!==Et.guid||$e&&!$e.test(Et.namespace)||ve&&ve!==Et.selector&&(ve!=="**"||!Et.selector)||(xt.splice(Oe,1),Et.selector&&xt.delegateCount--,rt.remove&&rt.remove.call(H,Et));He&&!xt.length&&(rt.teardown&&rt.teardown.call(H,Pr,Kn.handle)!==!1||k.removeEvent(H,$t,Kn.handle),delete nt[$t])}else for($t in nt)k.event.remove(H,$t+te[ft],le,ve,!0);k.isEmptyObject(nt)&&(delete Kn.handle,pe.remove(H,"events"))}},trigger:function(H,te,le,ve){var Ce,Oe,He,$e,nt,ft,Et,rt=[le||L],xt=O.call(H,"type")?H.type:H,$t=O.call(H,"namespace")?H.namespace.split("."):[];if(Oe=He=le=le||L,le.nodeType!==3&&le.nodeType!==8&&!K.test(xt+k.event.triggered)&&(xt.indexOf(".")>=0&&($t=xt.split("."),xt=$t.shift(),$t.sort()),nt=xt.indexOf(":")<0&&"on"+xt,H=H[k.expando]?H:new k.Event(xt,typeof H=="object"&&H),H.isTrigger=ve?2:3,H.namespace=$t.join("."),H.namespace_re=H.namespace?new RegExp("(^|\\.)"+$t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,H.result=void 0,H.target||(H.target=le),te=te==null?[H]:k.makeArray(te,[H]),Et=k.event.special[xt]||{},ve||!Et.trigger||Et.trigger.apply(le,te)!==!1)){if(!ve&&!Et.noBubble&&!k.isWindow(le)){for($e=Et.delegateType||xt,K.test($e+xt)||(Oe=Oe.parentNode);Oe;Oe=Oe.parentNode)rt.push(Oe),He=Oe;He===(le.ownerDocument||L)&&rt.push(He.defaultView||He.parentWindow||a)}for(Ce=0;(Oe=rt[Ce++])&&!H.isPropagationStopped();)H.type=Ce>1?$e:Et.bindType||xt,ft=(pe.get(Oe,"events")||{})[H.type]&&pe.get(Oe,"handle"),ft&&ft.apply(Oe,te),ft=nt&&Oe[nt],ft&&ft.apply&&k.acceptData(Oe)&&(H.result=ft.apply(Oe,te),H.result===!1&&H.preventDefault());return H.type=xt,ve||H.isDefaultPrevented()||Et._default&&Et._default.apply(rt.pop(),te)!==!1||!k.acceptData(le)||nt&&k.isFunction(le[xt])&&!k.isWindow(le)&&(He=le[nt],He&&(le[nt]=null),k.event.triggered=xt,le[xt](),k.event.triggered=void 0,He&&(le[nt]=He)),H.result}},dispatch:function(H){H=k.event.fix(H);var te,le,ve,Ce,Oe,He=[],$e=S.call(arguments),nt=(pe.get(this,"events")||{})[H.type]||[],ft=k.event.special[H.type]||{};if($e[0]=H,H.delegateTarget=this,!ft.preDispatch||ft.preDispatch.call(this,H)!==!1){for(He=k.event.handlers.call(this,H,nt),te=0;(Ce=He[te++])&&!H.isPropagationStopped();)for(H.currentTarget=Ce.elem,le=0;(Oe=Ce.handlers[le++])&&!H.isImmediatePropagationStopped();)H.namespace_re&&!H.namespace_re.test(Oe.namespace)||(H.handleObj=Oe,H.data=Oe.data,ve=((k.event.special[Oe.origType]||{}).handle||Oe.handler).apply(Ce.elem,$e),ve!==void 0&&(H.result=ve)===!1&&(H.preventDefault(),H.stopPropagation()));return ft.postDispatch&&ft.postDispatch.call(this,H),H.result}},handlers:function(H,te){var le,ve,Ce,Oe,He=[],$e=te.delegateCount,nt=H.target;if($e&&nt.nodeType&&(!H.button||H.type!=="click")){for(;nt!==this;nt=nt.parentNode||this)if(nt.disabled!==!0||H.type!=="click"){for(ve=[],le=0;$e>le;le++)Oe=te[le],Ce=Oe.selector+" ",ve[Ce]===void 0&&(ve[Ce]=Oe.needsContext?k(Ce,this).index(nt)>=0:k.find(Ce,this,null,[nt]).length),ve[Ce]&&ve.push(Oe);ve.length&&He.push({elem:nt,handlers:ve})}}return $e<te.length&&He.push({elem:this,handlers:te.slice($e)}),He},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(H,te){return H.which==null&&(H.which=te.charCode!=null?te.charCode:te.keyCode),H}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(H,te){var le,ve,Ce,Oe=te.button;return H.pageX==null&&te.clientX!=null&&(le=H.target.ownerDocument||L,ve=le.documentElement,Ce=le.body,H.pageX=te.clientX+(ve&&ve.scrollLeft||Ce&&Ce.scrollLeft||0)-(ve&&ve.clientLeft||Ce&&Ce.clientLeft||0),H.pageY=te.clientY+(ve&&ve.scrollTop||Ce&&Ce.scrollTop||0)-(ve&&ve.clientTop||Ce&&Ce.clientTop||0)),H.which||Oe===void 0||(H.which=1&Oe?1:2&Oe?3:4&Oe?2:0),H}},fix:function(H){if(H[k.expando])return H;var te,le,ve,Ce=H.type,Oe=H,He=this.fixHooks[Ce];for(He||(this.fixHooks[Ce]=He=ze.test(Ce)?this.mouseHooks:Pe.test(Ce)?this.keyHooks:{}),ve=He.props?this.props.concat(He.props):this.props,H=new k.Event(Oe),te=ve.length;te--;)le=ve[te],H[le]=Oe[le];return H.target||(H.target=L),H.target.nodeType===3&&(H.target=H.target.parentNode),He.filter?He.filter(H,Oe):H},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==p()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return this.type==="checkbox"&&this.click&&k.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(H){return k.nodeName(H.target,"a")}},beforeunload:{postDispatch:function(H){H.result!==void 0&&H.originalEvent&&(H.originalEvent.returnValue=H.result)}}},simulate:function(H,te,le,ve){var Ce=k.extend(new k.Event,le,{type:H,isSimulated:!0,originalEvent:{}});ve?k.event.trigger(Ce,null,te):k.event.dispatch.call(te,Ce),Ce.isDefaultPrevented()&&le.preventDefault()}},k.removeEvent=function(H,te,le){H.removeEventListener&&H.removeEventListener(te,le,!1)},k.Event=function(H,te){return this instanceof k.Event?(H&&H.type?(this.originalEvent=H,this.type=H.type,this.isDefaultPrevented=H.defaultPrevented||H.defaultPrevented===void 0&&H.returnValue===!1?d:f):this.type=H,te&&k.extend(this,te),this.timeStamp=H&&H.timeStamp||k.now(),void(this[k.expando]=!0)):new k.Event(H,te)},k.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var H=this.originalEvent;this.isDefaultPrevented=d,H&&H.preventDefault&&H.preventDefault()},stopPropagation:function(){var H=this.originalEvent;this.isPropagationStopped=d,H&&H.stopPropagation&&H.stopPropagation()},stopImmediatePropagation:function(){var H=this.originalEvent;this.isImmediatePropagationStopped=d,H&&H.stopImmediatePropagation&&H.stopImmediatePropagation(),this.stopPropagation()}},k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(H,te){k.event.special[H]={delegateType:te,bindType:te,handle:function(le){var ve,Ce=this,Oe=le.relatedTarget,He=le.handleObj;return Oe&&(Oe===Ce||k.contains(Ce,Oe))||(le.type=He.origType,ve=He.handler.apply(this,arguments),le.type=te),ve}}}),U.focusinBubbles||k.each({focus:"focusin",blur:"focusout"},function(H,te){var le=function(ve){k.event.simulate(te,ve.target,k.event.fix(ve),!0)};k.event.special[te]={setup:function(){var ve=this.ownerDocument||this,Ce=pe.access(ve,te);Ce||ve.addEventListener(H,le,!0),pe.access(ve,te,(Ce||0)+1)},teardown:function(){var ve=this.ownerDocument||this,Ce=pe.access(ve,te)-1;Ce?pe.access(ve,te,Ce):(ve.removeEventListener(H,le,!0),pe.remove(ve,te))}}}),k.fn.extend({on:function(H,te,le,ve,Ce){var Oe,He;if(typeof H=="object"){typeof te!="string"&&(le=le||te,te=void 0);for(He in H)this.on(He,te,le,H[He],Ce);return this}if(le==null&&ve==null?(ve=te,le=te=void 0):ve==null&&(typeof te=="string"?(ve=le,le=void 0):(ve=le,le=te,te=void 0)),ve===!1)ve=f;else if(!ve)return this;return Ce===1&&(Oe=ve,ve=function($e){return k().off($e),Oe.apply(this,arguments)},ve.guid=Oe.guid||(Oe.guid=k.guid++)),this.each(function(){k.event.add(this,H,ve,le,te)})},one:function(H,te,le,ve){return this.on(H,te,le,ve,1)},off:function(H,te,le){var ve,Ce;if(H&&H.preventDefault&&H.handleObj)return ve=H.handleObj,k(H.delegateTarget).off(ve.namespace?ve.origType+"."+ve.namespace:ve.origType,ve.selector,ve.handler),this;if(typeof H=="object"){for(Ce in H)this.off(Ce,te,H[Ce]);return this}return te!==!1&&typeof te!="function"||(le=te,te=void 0),le===!1&&(le=f),this.each(function(){k.event.remove(this,H,le,te)})},trigger:function(H,te){return this.each(function(){k.event.trigger(H,te,this)})},triggerHandler:function(H,te){var le=this[0];return le?k.event.trigger(H,te,le,!0):void 0}});var _e=k.now(),oe=/\?/;k.parseJSON=function(H){return JSON.parse(H+"")},k.parseXML=function(H){var te,le;if(!H||typeof H!="string")return null;try{le=new DOMParser,te=le.parseFromString(H,"text/xml")}catch{te=void 0}return te&&!te.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+H),te};var G,q,ce=/#.*$/,Ae=/([?&])_=[^&]*/,$=/^(.*?):[ \t]*([^\r\n]*)$/gm,ee=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ge=/^(?:GET|HEAD)$/,xe=/^\/\//,Ne=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Fe={},qe={},ke="*/".concat("*");try{q=location.href}catch{q=L.createElement("a"),q.href="",q=q.href}G=Ne.exec(q.toLowerCase())||[],k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:q,type:"GET",isLocal:ee.test(G[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ke,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":k.parseJSON,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(H,te){return te?g(g(H,k.ajaxSettings),te):g(k.ajaxSettings,H)},ajaxPrefilter:v(Fe),ajaxTransport:v(qe),ajax:function(H,te){function le(je,Ve,We,dt){var Tt,kt,ct,Ot,Ut,Pt=Ve;xi!==2&&(xi=2,$e&&clearTimeout($e),ve=void 0,Oe=dt||"",Ie.readyState=je>0?4:0,Tt=je>=200&&300>je||je===304,We&&(Ot=w(rt,Ie,We)),Ot=b(rt,Ot,Ie,Tt),Tt?(rt.ifModified&&(Ut=Ie.getResponseHeader("Last-Modified"),Ut&&(k.lastModified[Ce]=Ut),Ut=Ie.getResponseHeader("etag"),Ut&&(k.etag[Ce]=Ut)),je===204||rt.type==="HEAD"?Pt="nocontent":je===304?Pt="notmodified":(Pt=Ot.state,kt=Ot.data,ct=Ot.error,Tt=!ct)):(ct=Pt,!je&&Pt||(Pt="error",0>je&&(je=0))),Ie.status=je,Ie.statusText=(Ve||Pt)+"",Tt?Pr.resolveWith(xt,[kt,Pt,Ie]):Pr.rejectWith(xt,[Ie,Pt,ct]),Ie.statusCode(Kn),Kn=void 0,ft&&$t.trigger(Tt?"ajaxSuccess":"ajaxError",[Ie,rt,Tt?kt:ct]),Cr.fireWith(xt,[Ie,Pt]),ft&&($t.trigger("ajaxComplete",[Ie,rt]),--k.active||k.event.trigger("ajaxStop")))}typeof H=="object"&&(te=H,H=void 0),te=te||{};var ve,Ce,Oe,He,$e,nt,ft,Et,rt=k.ajaxSetup({},te),xt=rt.context||rt,$t=rt.context&&(xt.nodeType||xt.jquery)?k(xt):k.event,Pr=k.Deferred(),Cr=k.Callbacks("once memory"),Kn=rt.statusCode||{},Bs={},Iu={},xi=0,de="canceled",Ie={readyState:0,getResponseHeader:function(je){var Ve;if(xi===2){if(!He)for(He={};Ve=$.exec(Oe);)He[Ve[1].toLowerCase()]=Ve[2];Ve=He[je.toLowerCase()]}return Ve??null},getAllResponseHeaders:function(){return xi===2?Oe:null},setRequestHeader:function(je,Ve){var We=je.toLowerCase();return xi||(je=Iu[We]=Iu[We]||je,Bs[je]=Ve),this},overrideMimeType:function(je){return xi||(rt.mimeType=je),this},statusCode:function(je){var Ve;if(je)if(2>xi)for(Ve in je)Kn[Ve]=[Kn[Ve],je[Ve]];else Ie.always(je[Ie.status]);return this},abort:function(je){var Ve=je||de;return ve&&ve.abort(Ve),le(0,Ve),this}};if(Pr.promise(Ie).complete=Cr.add,Ie.success=Ie.done,Ie.error=Ie.fail,rt.url=((H||rt.url||q)+"").replace(ce,"").replace(xe,G[1]+"//"),rt.type=te.method||te.type||rt.method||rt.type,rt.dataTypes=k.trim(rt.dataType||"*").toLowerCase().match(fe)||[""],rt.crossDomain==null&&(nt=Ne.exec(rt.url.toLowerCase()),rt.crossDomain=!(!nt||nt[1]===G[1]&&nt[2]===G[2]&&(nt[3]||(nt[1]==="http:"?"80":"443"))===(G[3]||(G[1]==="http:"?"80":"443")))),rt.data&&rt.processData&&typeof rt.data!="string"&&(rt.data=k.param(rt.data,rt.traditional)),y(Fe,rt,te,Ie),xi===2)return Ie;ft=rt.global,ft&&k.active++===0&&k.event.trigger("ajaxStart"),rt.type=rt.type.toUpperCase(),rt.hasContent=!ge.test(rt.type),Ce=rt.url,rt.hasContent||(rt.data&&(Ce=rt.url+=(oe.test(Ce)?"&":"?")+rt.data,delete rt.data),rt.cache===!1&&(rt.url=Ae.test(Ce)?Ce.replace(Ae,"$1_="+_e++):Ce+(oe.test(Ce)?"&":"?")+"_="+_e++)),rt.ifModified&&(k.lastModified[Ce]&&Ie.setRequestHeader("If-Modified-Since",k.lastModified[Ce]),k.etag[Ce]&&Ie.setRequestHeader("If-None-Match",k.etag[Ce])),(rt.data&&rt.hasContent&&rt.contentType!==!1||te.contentType)&&Ie.setRequestHeader("Content-Type",rt.contentType),Ie.setRequestHeader("Accept",rt.dataTypes[0]&&rt.accepts[rt.dataTypes[0]]?rt.accepts[rt.dataTypes[0]]+(rt.dataTypes[0]!=="*"?", "+ke+"; q=0.01":""):rt.accepts["*"]);for(Et in rt.headers)Ie.setRequestHeader(Et,rt.headers[Et]);if(rt.beforeSend&&(rt.beforeSend.call(xt,Ie,rt)===!1||xi===2))return Ie.abort();de="abort";for(Et in{success:1,error:1,complete:1})Ie[Et](rt[Et]);if(ve=y(qe,rt,te,Ie)){Ie.readyState=1,ft&&$t.trigger("ajaxSend",[Ie,rt]),rt.async&&rt.timeout>0&&($e=setTimeout(function(){Ie.abort("timeout")},rt.timeout));try{xi=1,ve.send(Bs,le)}catch(je){if(!(2>xi))throw je;le(-1,je)}}else le(-1,"No Transport");return Ie},getJSON:function(H,te,le){return k.get(H,te,le,"json")},getScript:function(H,te){return k.get(H,void 0,te,"script")}}),k.each(["get","post"],function(H,te){k[te]=function(le,ve,Ce,Oe){return k.isFunction(ve)&&(Oe=Oe||Ce,Ce=ve,ve=void 0),k.ajax({url:le,type:te,dataType:Oe,data:ve,success:Ce})}}),k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(H,te){k.fn[te]=function(le){return this.on(te,le)}});var it=/%20/g,Ze=/\[\]$/,st=/\r?\n/g,we=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;k.param=function(H,te){var le,ve=[],Ce=function(Oe,He){He=k.isFunction(He)?He():He??"",ve[ve.length]=encodeURIComponent(Oe)+"="+encodeURIComponent(He)};if(te===void 0&&(te=k.ajaxSettings&&k.ajaxSettings.traditional),k.isArray(H)||H.jquery&&!k.isPlainObject(H))k.each(H,function(){Ce(this.name,this.value)});else for(le in H)m(le,H[le],te,Ce);return ve.join("&").replace(it,"+")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var H=k.prop(this,"elements");return H?k.makeArray(H):this}).filter(function(){var H=this.type;return this.name&&!k(this).is(":disabled")&&Re.test(this.nodeName)&&!we.test(H)&&(this.checked||!rcheckableType.test(H))}).map(function(H,te){var le=k(this).val();return le==null?null:k.isArray(le)?k.map(le,function(ve){return{name:te.name,value:ve.replace(st,`\r
`)}}):{name:te.name,value:le.replace(st,`\r
`)}}).get()}}),k.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch{}};var et=0,V={},Ee={0:200,1223:204},Le=k.ajaxSettings.xhr();a.ActiveXObject&&k(a).on("unload",function(){for(var H in V)V[H]()}),U.cors=!!Le&&"withCredentials"in Le,U.ajax=Le=!!Le,k.ajaxTransport(function(H){var te;return U.cors||Le&&!H.crossDomain?{send:function(le,ve){var Ce,Oe=H.xhr(),He=++et;if(Oe.open(H.type,H.url,H.async,H.username,H.password),H.xhrFields)for(Ce in H.xhrFields)Oe[Ce]=H.xhrFields[Ce];H.mimeType&&Oe.overrideMimeType&&Oe.overrideMimeType(H.mimeType),H.crossDomain||le["X-Requested-With"]||(le["X-Requested-With"]="XMLHttpRequest");for(Ce in le)Oe.setRequestHeader(Ce,le[Ce]);te=function($e){return function(){te&&(delete V[He],te=Oe.onload=Oe.onerror=null,$e==="abort"?Oe.abort():$e==="error"?ve(Oe.status,Oe.statusText):ve(Ee[Oe.status]||Oe.status,Oe.statusText,typeof Oe.responseText=="string"?{text:Oe.responseText}:void 0,Oe.getAllResponseHeaders()))}},Oe.onload=te(),Oe.onerror=te("error"),te=V[He]=te("abort");try{Oe.send(H.hasContent&&H.data||null)}catch($e){if(te)throw $e}},abort:function(){te&&te()}}:void 0}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(H){return k.globalEval(H),H}}}),k.ajaxPrefilter("script",function(H){H.cache===void 0&&(H.cache=!1),H.crossDomain&&(H.type="GET")}),k.ajaxTransport("script",function(H){if(H.crossDomain){var te,le;return{send:function(ve,Ce){te=k("<script>").prop({async:!0,charset:H.scriptCharset,src:H.url}).on("load error",le=function(Oe){te.remove(),le=null,Oe&&Ce(Oe.type==="error"?404:200,Oe.type)}),L.head.appendChild(te[0])},abort:function(){le&&le()}}}});var Je=[],he=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var H=Je.pop()||k.expando+"_"+_e++;return this[H]=!0,H}}),k.ajaxPrefilter("json jsonp",function(H,te,le){var ve,Ce,Oe,He=H.jsonp!==!1&&(he.test(H.url)?"url":typeof H.data=="string"&&!(H.contentType||"").indexOf("application/x-www-form-urlencoded")&&he.test(H.data)&&"data");return He||H.dataTypes[0]==="jsonp"?(ve=H.jsonpCallback=k.isFunction(H.jsonpCallback)?H.jsonpCallback():H.jsonpCallback,He?H[He]=H[He].replace(he,"$1"+ve):H.jsonp!==!1&&(H.url+=(oe.test(H.url)?"&":"?")+H.jsonp+"="+ve),H.converters["script json"]=function(){return Oe||k.error(ve+" was not called"),Oe[0]},H.dataTypes[0]="json",Ce=a[ve],a[ve]=function(){Oe=arguments},le.always(function(){a[ve]=Ce,H[ve]&&(H.jsonpCallback=te.jsonpCallback,Je.push(ve)),Oe&&k.isFunction(Ce)&&Ce(Oe[0]),Oe=Ce=void 0}),"script"):void 0}),k.parseHTML=function(H,te,le){if(!H||typeof H!="string")return null;typeof te=="boolean"&&(le=te,te=!1),te=te||L;var ve=Q.exec(H),Ce=!le&&[];return ve?[te.createElement(ve[1])]:(ve=k.buildFragment([H],te,Ce),Ce&&Ce.length&&k(Ce).remove(),k.merge([],ve.childNodes))};var Xe=k.fn.load;return k.fn.load=function(H,te,le){if(typeof H!="string"&&Xe)return Xe.apply(this,arguments);var ve,Ce,Oe,He=this,$e=H.indexOf(" ");return $e>=0&&(ve=k.trim(H.slice($e)),H=H.slice(0,$e)),k.isFunction(te)?(le=te,te=void 0):te&&typeof te=="object"&&(Ce="POST"),He.length>0&&k.ajax({url:H,type:Ce,dataType:"html",data:te}).done(function(nt){Oe=arguments,He.html(ve?k("<div>").append(k.parseHTML(nt)).find(ve):nt)}).complete(le&&function(nt,ft){He.each(le,Oe||[nt.responseText,ft,nt])}),this},k.noConflict=function(){},k})},{}],12:[function(t,r,i){r.exports=function(a){return{reload:function(){return a.location.reload()},getHash:function(){return a.location.hash},setHash:function(o){return a.location.hash=o},changeHref:function(o){return a.location.href=o}}}},{}],13:[function(t,r,i){var a;a=function(o){var s;return s=localStorage.getItem("oauthio_cache"),s=s?JSON.parse(s):{},o(s,function(){return localStorage.setItem("oauthio_cache",JSON.stringify(s))})},r.exports={init:function(o,s){return this.config=o,this.document=s},active:function(){return typeof localStorage<"u"&&localStorage!==null},create:function(o,s,l){var u;this.erase(o),u=new Date,localStorage.setItem(o,s),a(function(c,h){return c[o]=l?u.getTime()+1e3*(l||1200):!1,h()})},read:function(o){return a(function(s,l){return s[o]==null?null:s[o]===!1?localStorage.getItem(o):new Date().getTime()>s[o]?(localStorage.removeItem(o),delete s[o],l(),null):localStorage.getItem(o)})},erase:function(o){return a(function(s,l){return localStorage.removeItem(o),delete s[o],l()})},eraseFrom:function(o){a(function(s,l){var u,c,h,d;for(u=Object.keys(s),c=0,h=u.length;h>c;c++)d=u[c],d.substr(0,o.length)===o&&(localStorage.removeItem(d),delete s[d]);return l()})}}},{}],14:[function(t,r,i){var a,o;o=0,a="",r.exports={hex_sha1:function(s){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(s)))},b64_sha1:function(s){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(s)))},any_sha1:function(s,l){return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(s)),l)},hex_hmac_sha1:function(s,l){return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(s),this.str2rstr_utf8(l)))},b64_hmac_sha1:function(s,l){return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(s),this.str2rstr_utf8(l)))},any_hmac_sha1:function(s,l,u){return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(s),this.str2rstr_utf8(l)),u)},sha1_vm_test:function(){return thishex_sha1("abc").toLowerCase()==="a9993e364706816aba3e25717850c26c9cd0d89d"},rstr_sha1:function(s){return this.binb2rstr(this.binb_sha1(this.rstr2binb(s),8*s.length))},rstr_hmac_sha1:function(s,l){var u,c,h,d,f;for(u=this.rstr2binb(s),u.length>16&&(u=this.binb_sha1(u,8*s.length)),d=Array(16),f=Array(16),h=0;16>h;)d[h]=909522486^u[h],f[h]=1549556828^u[h],h++;return c=this.binb_sha1(d.concat(this.rstr2binb(l)),512+8*l.length),this.binb2rstr(this.binb_sha1(f.concat(c),672))},rstr2hex:function(s){var l,u,c,h;for(l=o?"0123456789ABCDEF":"0123456789abcdef",c="",h=void 0,u=0;u<s.length;)h=s.charCodeAt(u),c+=l.charAt(h>>>4&15)+l.charAt(15&h),u++;return c},rstr2b64:function(s){var l,u,c,h,d,f;for(d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="",c=s.length,l=0;c>l;){for(f=s.charCodeAt(l)<<16|(c>l+1?s.charCodeAt(l+1)<<8:0)|(c>l+2?s.charCodeAt(l+2):0),u=0;4>u;)h+=8*l+6*u>8*s.length?a:d.charAt(f>>>6*(3-u)&63),u++;l+=3}return h},rstr2any:function(s,l){var u,c,h,d,f,p,v,y,g;for(c=l.length,y=Array(),d=void 0,p=void 0,g=void 0,v=void 0,u=Array(Math.ceil(s.length/2)),d=0;d<u.length;)u[d]=s.charCodeAt(2*d)<<8|s.charCodeAt(2*d+1),d++;for(;u.length>0;){for(v=Array(),g=0,d=0;d<u.length;)g=(g<<16)+u[d],p=Math.floor(g/c),g-=p*c,(v.length>0||p>0)&&(v[v.length]=p),d++;y[y.length]=g,u=v}for(f="",d=y.length-1;d>=0;)f+=l.charAt(y[d]),d--;for(h=Math.ceil(8*s.length/(Math.log(l.length)/Math.log(2))),d=f.length;h>d;)f=l[0]+f,d++;return f},str2rstr_utf8:function(s){var l,u,c,h;for(u="",l=-1,c=void 0,h=void 0;++l<s.length;)c=s.charCodeAt(l),h=l+1<s.length?s.charCodeAt(l+1):0,c>=55296&&56319>=c&&h>=56320&&57343>=h&&(c=65536+((1023&c)<<10)+(1023&h),l++),127>=c?u+=String.fromCharCode(c):2047>=c?u+=String.fromCharCode(192|c>>>6&31,128|63&c):65535>=c?u+=String.fromCharCode(224|c>>>12&15,128|c>>>6&63,128|63&c):2097151>=c&&(u+=String.fromCharCode(240|c>>>18&7,128|c>>>12&63,128|c>>>6&63,128|63&c));return u},str2rstr_utf16le:function(s){var l,u;for(u="",l=0;l<s.length;)u+=String.fromCharCode(255&s.charCodeAt(l),s.charCodeAt(l)>>>8&255),l++;return u},str2rstr_utf16be:function(s){var l,u;for(u="",l=0;l<s.length;)u+=String.fromCharCode(s.charCodeAt(l)>>>8&255,255&s.charCodeAt(l)),l++;return u},rstr2binb:function(s){var l,u;for(u=Array(s.length>>2),l=0;l<u.length;)u[l]=0,l++;for(l=0;l<8*s.length;)u[l>>5]|=(255&s.charCodeAt(l/8))<<24-l%32,l+=8;return u},binb2rstr:function(s){var l,u;for(u="",l=0;l<32*s.length;)u+=String.fromCharCode(s[l>>5]>>>24-l%32&255),l+=8;return u},binb_sha1:function(s,l){var u,c,h,d,f,p,v,y,g,w,b,m,x,S;for(s[l>>5]|=128<<24-l%32,s[(l+64>>9<<4)+15]=l,S=Array(80),u=1732584193,c=-271733879,h=-1732584194,d=271733878,f=-1009589776,p=0;p<s.length;){for(y=u,g=c,w=h,b=d,m=f,v=0;80>v;)16>v?S[v]=s[p+v]:S[v]=this.bit_rol(S[v-3]^S[v-8]^S[v-14]^S[v-16],1),x=this.safe_add(this.safe_add(this.bit_rol(u,5),this.sha1_ft(v,c,h,d)),this.safe_add(this.safe_add(f,S[v]),this.sha1_kt(v))),f=d,d=h,h=this.bit_rol(c,30),c=u,u=x,v++;u=this.safe_add(u,y),c=this.safe_add(c,g),h=this.safe_add(h,w),d=this.safe_add(d,b),f=this.safe_add(f,m),p+=16}return Array(u,c,h,d,f)},sha1_ft:function(s,l,u,c){return 20>s?l&u|~l&c:40>s?l^u^c:60>s?l&u|l&c|u&c:l^u^c},sha1_kt:function(s){return 20>s?1518500249:40>s?1859775393:60>s?-1894007588:-899497514},safe_add:function(s,l){var u,c;return u=(65535&s)+(65535&l),c=(s>>16)+(l>>16)+(u>>16),c<<16|65535&u},bit_rol:function(s,l){return s<<l|s>>>32-l},create_hash:function(){var s;return s=this.b64_sha1(new Date().getTime()+":"+Math.floor(9999999*Math.random())),s.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}}},{}],15:[function(t,r,i){r.exports=function(a){return{getAbsUrl:function(o){var s;return o.match(/^.{2,5}:\/\//)?o:o[0]==="/"?a.location.protocol+"//"+a.location.host+o:(s=a.location.protocol+"//"+a.location.host+a.location.pathname,s[s.length-1]!=="/"&&o[0]!=="#"?s+"/"+o:s+o)},replaceParam:function(o,s,l){return o=o.replace(/\{\{(.*?)\}\}/g,function(u,c){return s[c]||""}),l&&(o=o.replace(/\{(.*?)\}/g,function(u,c){return l[c]||""})),o}}}},{}]},{},[8])(8)})})(ZH);var kC=ZH.exports;/**
* @remix-run/router v1.16.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function V0(){return V0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},V0.apply(this,arguments)}var mc;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(mc||(mc={}));const mL="popstate";function zre(n){n===void 0&&(n={});function e(r,i){let{pathname:a,search:o,hash:s}=r.location;return wM("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:qw(i)}return jre(e,t,null,n)}function Zr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function JH(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ure(){return Math.random().toString(36).substr(2,8)}function gL(n,e){return{usr:n.state,key:n.key,idx:e}}function wM(n,e,t,r){return t===void 0&&(t=null),V0({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?pm(e):e,{state:t,key:e&&e.key||r||Ure()})}function qw(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function pm(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function jre(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=mc.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(V0({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){s=mc.Pop;let y=c(),g=y==null?null:y-u;u=y,l&&l({action:s,location:v.location,delta:g})}function d(y,g){s=mc.Push;let w=wM(v.location,y,g);u=c()+1;let b=gL(w,u),m=v.createHref(w);try{o.pushState(b,"",m)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(m)}a&&l&&l({action:s,location:v.location,delta:1})}function f(y,g){s=mc.Replace;let w=wM(v.location,y,g);u=c();let b=gL(w,u),m=v.createHref(w);o.replaceState(b,"",m),a&&l&&l({action:s,location:v.location,delta:0})}function p(y){let g=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof y=="string"?y:qw(y);return w=w.replace(/ $/,"%20"),Zr(g,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,g)}let v={get action(){return s},get location(){return n(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(mL,h),l=y,()=>{i.removeEventListener(mL,h),l=null}},createHref(y){return e(i,y)},createURL:p,encodeLocation(y){let g=p(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:f,go(y){return o.go(y)}};return v}var vL;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(vL||(vL={}));function Hre(n,e,t){t===void 0&&(t="/");let r=typeof e=="string"?pm(e):e,i=aN(r.pathname||"/",t);if(i==null)return null;let a=KH(n);Vre(a);let o=null;for(let s=0;o==null&&s<a.length;++s){let l=tie(i);o=Kre(a[s],l)}return o}function KH(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(Zr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Nc([r,l.relativePath]),c=t.concat(l);a.children&&a.children.length>0&&(Zr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),KH(a.children,e,c,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:Zre(u,a.index),routesMeta:c})};return n.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of QH(a.path))i(a,o,l)}),e}function QH(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=QH(r.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>n.startsWith("/")&&l===""?"/":l)}function Vre(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Jre(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const Wre=/^:[\w-]+$/,qre=3,Gre=2,$re=1,Xre=10,Yre=-2,yL=n=>n==="*";function Zre(n,e){let t=n.split("/"),r=t.length;return t.some(yL)&&(r+=Yre),e&&(r+=Gre),t.filter(i=>!yL(i)).reduce((i,a)=>i+(Wre.test(a)?qre:a===""?$re:Xre),r)}function Jre(n,e){return n.length===e.length&&n.slice(0,-1).every((t,r)=>t===e[r])?n[n.length-1]-e[e.length-1]:0}function Kre(n,e){let{routesMeta:t}=n,r={},i="/",a=[];for(let o=0;o<t.length;++o){let s=t[o],l=o===t.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=Qre({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let h=s.route;a.push({params:r,pathname:Nc([i,c.pathname]),pathnameBase:aie(Nc([i,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(i=Nc([i,c.pathnameBase]))}return a}function Qre(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=eie(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,u,c)=>{let{paramName:h,isOptional:d}=u;if(h==="*"){let p=s[c]||"";o=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const f=s[c];return d&&!f?l[h]=void 0:l[h]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:a,pathnameBase:o,pattern:n}}function eie(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),JH(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,s)=>(r.push({paramName:o,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function tie(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return JH(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function aN(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function nie(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?pm(n):n;return{pathname:t?t.startsWith("/")?t:rie(t,e):e,search:oie(r),hash:sie(i)}}function rie(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function NC(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iie(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function eV(n,e){let t=iie(n);return e?t.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function tV(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=pm(n):(i=V0({},n),Zr(!i.pathname||!i.pathname.includes("?"),NC("?","pathname","search",i)),Zr(!i.pathname||!i.pathname.includes("#"),NC("#","pathname","hash",i)),Zr(!i.search||!i.search.includes("#"),NC("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=t;else{let h=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}s=h>=0?e[h]:"/"}let l=nie(i,s),u=o&&o!=="/"&&o.endsWith("/"),c=(a||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Nc=n=>n.join("/").replace(/\/\/+/g,"/"),aie=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),oie=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,sie=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function lie(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const nV=["post","put","patch","delete"];new Set(nV);const uie=["get",...nV];new Set(uie);/**
* React Router v6.23.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function W0(){return W0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},W0.apply(this,arguments)}const oN=j.createContext(null),cie=j.createContext(null),Rd=j.createContext(null),DE=j.createContext(null),rh=j.createContext({outlet:null,matches:[],isDataRoute:!1}),rV=j.createContext(null);function hie(n,e){let{relative:t}=e===void 0?{}:e;Zv()||Zr(!1);let{basename:r,navigator:i}=j.useContext(Rd),{hash:a,pathname:o,search:s}=oV(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:Nc([r,o])),i.createHref({pathname:l,search:s,hash:a})}function Zv(){return j.useContext(DE)!=null}function kE(){return Zv()||Zr(!1),j.useContext(DE).location}function iV(n){j.useContext(Rd).static||j.useLayoutEffect(n)}function mm(){let{isDataRoute:n}=j.useContext(rh);return n?_ie():die()}function die(){Zv()||Zr(!1);let n=j.useContext(oN),{basename:e,future:t,navigator:r}=j.useContext(Rd),{matches:i}=j.useContext(rh),{pathname:a}=kE(),o=JSON.stringify(eV(i,t.v7_relativeSplatPath)),s=j.useRef(!1);return iV(()=>{s.current=!0}),j.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let c=tV(l,JSON.parse(o),a,u.relative==="path");n==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Nc([e,c.pathname])),(u.replace?r.replace:r.push)(c,u.state,u)},[e,r,o,a,n])}function aV(){let{matches:n}=j.useContext(rh),e=n[n.length-1];return e?e.params:{}}function oV(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=j.useContext(Rd),{matches:i}=j.useContext(rh),{pathname:a}=kE(),o=JSON.stringify(eV(i,r.v7_relativeSplatPath));return j.useMemo(()=>tV(n,JSON.parse(o),a,t==="path"),[n,o,a,t])}function fie(n,e){return pie(n,e)}function pie(n,e,t,r){Zv()||Zr(!1);let{navigator:i}=j.useContext(Rd),{matches:a}=j.useContext(rh),o=a[a.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=kE(),c;if(e){var h;let y=typeof e=="string"?pm(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||Zr(!1),c=y}else c=u;let d=c.pathname||"/",f=d;if(l!=="/"){let y=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=Hre(n,{pathname:f}),v=bie(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},s,y.params),pathname:Nc([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Nc([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,t,r);return e&&v?j.createElement(DE.Provider,{value:{location:W0({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:mc.Pop}},v):v}function mie(){let n=Eie(),e=lie(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:r},t):null,null)}const gie=j.createElement(mie,null);class vie extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(rh.Provider,{value:this.props.routeContext},j.createElement(rV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yie(n){let{routeContext:e,match:t,children:r}=n,i=j.useContext(oN);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(rh.Provider,{value:e},r)}function bie(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if((a=t)!=null&&a.errors)n=t.matches;else return null}let o=n,s=(i=t)==null?void 0:i.errors;if(s!=null){let c=o.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);c>=0||Zr(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let h=o[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:d,errors:f}=t,p=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,h,d)=>{let f,p=!1,v=null,y=null;t&&(f=s&&h.route.id?s[h.route.id]:void 0,v=h.route.errorElement||gie,l&&(u<0&&d===0?(p=!0,y=null):u===d&&(p=!0,y=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,d+1)),w=()=>{let b;return f?b=v:p?b=y:h.route.Component?b=j.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=c,j.createElement(yie,{match:h,routeContext:{outlet:c,matches:g,isDataRoute:t!=null},children:b})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?j.createElement(vie,{location:t.location,revalidation:t.revalidation,component:v,error:f,children:w(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):w()},null)}var sV=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(sV||{}),Gw=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Gw||{});function xie(n){let e=j.useContext(oN);return e||Zr(!1),e}function wie(n){let e=j.useContext(cie);return e||Zr(!1),e}function Sie(n){let e=j.useContext(rh);return e||Zr(!1),e}function lV(n){let e=Sie(),t=e.matches[e.matches.length-1];return t.route.id||Zr(!1),t.route.id}function Eie(){var n;let e=j.useContext(rV),t=wie(Gw.UseRouteError),r=lV(Gw.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function _ie(){let{router:n}=xie(sV.UseNavigateStable),e=lV(Gw.UseNavigateStable),t=j.useRef(!1);return iV(()=>{t.current=!0}),j.useCallback(function(r,i){i===void 0&&(i={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,W0({fromRouteId:e},i)))},[n,e])}function qx(n){Zr(!1)}function Cie(n){let{basename:e="/",children:t=null,location:r,navigationType:i=mc.Pop,navigator:a,static:o=!1,future:s}=n;Zv()&&Zr(!1);let l=e.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:a,static:o,future:W0({v7_relativeSplatPath:!1},s)}),[l,s,a,o]);typeof r=="string"&&(r=pm(r));let{pathname:c="/",search:h="",hash:d="",state:f=null,key:p="default"}=r,v=j.useMemo(()=>{let y=aN(c,l);return y==null?null:{location:{pathname:y,search:h,hash:d,state:f,key:p},navigationType:i}},[l,c,h,d,f,p,i]);return v==null?null:j.createElement(Rd.Provider,{value:u},j.createElement(DE.Provider,{children:t,value:v}))}function Aie(n){let{children:e,location:t}=n;return fie(SM(e),t)}new Promise(()=>{});function SM(n,e){e===void 0&&(e=[]);let t=[];return j.Children.forEach(n,(r,i)=>{if(!j.isValidElement(r))return;let a=[...e,i];if(r.type===j.Fragment){t.push.apply(t,SM(r.props.children,a));return}r.type!==qx&&Zr(!1),!r.props.index||!r.props.children||Zr(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=SM(r.props.children,a)),t.push(o)}),t}/**
* React Router DOM v6.23.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function EM(){return EM=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},EM.apply(this,arguments)}function Tie(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Mie(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Die(n,e){return n.button===0&&(!e||e==="_self")&&!Mie(n)}const kie=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Nie="6";try{window.__reactRouterVersion=Nie}catch{}const Oie="startTransition",bL=xw[Oie];function Pie(n){let{basename:e,children:t,future:r,window:i}=n,a=j.useRef();a.current==null&&(a.current=zre({window:i,v5Compat:!0}));let o=a.current,[s,l]=j.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=j.useCallback(h=>{u&&bL?bL(()=>l(h)):l(h)},[l,u]);return j.useLayoutEffect(()=>o.listen(c),[o,c]),j.createElement(Cie,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:o,future:r})}const Rie=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Iie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$w=j.forwardRef(function(n,e){let{onClick:t,relative:r,reloadDocument:i,replace:a,state:o,target:s,to:l,preventScrollReset:u,unstable_viewTransition:c}=n,h=Tie(n,kie),{basename:d}=j.useContext(Rd),f,p=!1;if(typeof l=="string"&&Iie.test(l)&&(f=l,Rie))try{let w=new URL(window.location.href),b=l.startsWith("//")?new URL(w.protocol+l):new URL(l),m=aN(b.pathname,d);b.origin===w.origin&&m!=null?l=m+b.search+b.hash:p=!0}catch{}let v=hie(l,{relative:r}),y=Lie(l,{replace:a,state:o,target:s,preventScrollReset:u,relative:r,unstable_viewTransition:c});function g(w){t&&t(w),w.defaultPrevented||y(w)}return j.createElement("a",EM({},h,{href:f||v,onClick:p||i?t:g,ref:e,target:s}))});var xL;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(xL||(xL={}));var wL;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(wL||(wL={}));function Lie(n,e){let{target:t,replace:r,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:s}=e===void 0?{}:e,l=mm(),u=kE(),c=oV(n,{relative:o});return j.useCallback(h=>{if(Die(h,t)){h.preventDefault();let d=r!==void 0?r:qw(u)===qw(c);l(n,{replace:d,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:s})}},[u,l,c,r,i,t,n,a,o,s])}/**
* @license
* Copyright 2019 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const uV=Symbol("Comlink.proxy"),Fie=Symbol("Comlink.endpoint"),Bie=Symbol("Comlink.releaseProxy"),OC=Symbol("Comlink.finalizer"),Gx=Symbol("Comlink.thrown"),cV=n=>typeof n=="object"&&n!==null||typeof n=="function",zie={canHandle:n=>cV(n)&&n[uV],serialize(n){const{port1:e,port2:t}=new MessageChannel;return dV(n,e),[t,[t]]},deserialize(n){return n.start(),pV(n)}},Uie={canHandle:n=>cV(n)&&Gx in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},hV=new Map([["proxy",zie],["throw",Uie]]);function jie(n,e){for(const t of n)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function dV(n,e=globalThis,t=["*"]){e.addEventListener("message",function r(i){if(!i||!i.data)return;if(!jie(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:a,type:o,path:s}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(Bh);let u;try{const c=s.slice(0,-1).reduce((d,f)=>d[f],n),h=s.reduce((d,f)=>d[f],n);switch(o){case"GET":u=h;break;case"SET":c[s.slice(-1)[0]]=Bh(i.data.value),u=!0;break;case"APPLY":u=h.apply(c,l);break;case"CONSTRUCT":{const d=new h(...l);u=$ie(d)}break;case"ENDPOINT":{const{port1:d,port2:f}=new MessageChannel;dV(n,f),u=Gie(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[Gx]:0}}Promise.resolve(u).catch(c=>({value:c,[Gx]:0})).then(c=>{const[h,d]=Zw(c);e.postMessage(Object.assign(Object.assign({},h),{id:a}),d),o==="RELEASE"&&(e.removeEventListener("message",r),fV(e),OC in n&&typeof n[OC]=="function"&&n[OC]())}).catch(c=>{const[h,d]=Zw({value:new TypeError("Unserializable return value"),[Gx]:0});e.postMessage(Object.assign(Object.assign({},h),{id:a}),d)})}),e.start&&e.start()}function Hie(n){return n.constructor.name==="MessagePort"}function fV(n){Hie(n)&&n.close()}function pV(n,e){return _M(n,[],e)}function j1(n){if(n)throw new Error("Proxy has been released and is not useable")}function mV(n){return Hf(n,{type:"RELEASE"}).then(()=>{fV(n)})}const Xw=new WeakMap,Yw="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{const e=(Xw.get(n)||0)-1;Xw.set(n,e),e===0&&mV(n)});function Vie(n,e){const t=(Xw.get(e)||0)+1;Xw.set(e,t),Yw&&Yw.register(n,e,n)}function Wie(n){Yw&&Yw.unregister(n)}function _M(n,e=[],t=function(){}){let r=!1;const i=new Proxy(t,{get(a,o){if(j1(r),o===Bie)return()=>{Wie(i),mV(n),r=!0};if(o==="then"){if(e.length===0)return{then:()=>i};const s=Hf(n,{type:"GET",path:e.map(l=>l.toString())}).then(Bh);return s.then.bind(s)}return _M(n,[...e,o])},set(a,o,s){j1(r);const[l,u]=Zw(s);return Hf(n,{type:"SET",path:[...e,o].map(c=>c.toString()),value:l},u).then(Bh)},apply(a,o,s){j1(r);const l=e[e.length-1];if(l===Fie)return Hf(n,{type:"ENDPOINT"}).then(Bh);if(l==="bind")return _M(n,e.slice(0,-1));const[u,c]=SL(s);return Hf(n,{type:"APPLY",path:e.map(h=>h.toString()),argumentList:u},c).then(Bh)},construct(a,o){j1(r);const[s,l]=SL(o);return Hf(n,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:s},l).then(Bh)}});return Vie(i,n),i}function qie(n){return Array.prototype.concat.apply([],n)}function SL(n){const e=n.map(Zw);return[e.map(t=>t[0]),qie(e.map(t=>t[1]))]}const gV=new WeakMap;function Gie(n,e){return gV.set(n,e),n}function $ie(n){return Object.assign(n,{[uV]:!0})}function Zw(n){for(const[e,t]of hV)if(t.canHandle(n)){const[r,i]=t.serialize(n);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:n},gV.get(n)||[]]}function Bh(n){switch(n.type){case"HANDLER":return hV.get(n.name).deserialize(n.value);case"RAW":return n.value}}function Hf(n,e,t){return new Promise(r=>{const i=Xie();n.addEventListener("message",function a(o){!o.data||!o.data.id||o.data.id!==i||(n.removeEventListener("message",a),r(o.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:i},e),t)})}function Xie(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function lt(){return lt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lt.apply(null,arguments)}var vV={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function tn(n){return typeof n=="number"}function Kt(n){return!n||typeof n!="object"||typeof n.constructor!="function"?!1:n.isBigNumber===!0&&typeof n.constructor.prototype=="object"&&n.constructor.prototype.isBigNumber===!0||typeof n.constructor.isDecimal=="function"&&n.constructor.isDecimal(n)===!0}function _s(n){return n&&typeof n=="object"&&Object.getPrototypeOf(n).isComplex===!0||!1}function Id(n){return n&&typeof n=="object"&&Object.getPrototypeOf(n).isFraction===!0||!1}function ja(n){return n&&n.constructor.prototype.isUnit===!0||!1}function Ai(n){return typeof n=="string"}var En=Array.isArray;function Ft(n){return n&&n.constructor.prototype.isMatrix===!0||!1}function _o(n){return Array.isArray(n)||Ft(n)}function q0(n){return n&&n.isDenseMatrix&&n.constructor.prototype.isMatrix===!0||!1}function gc(n){return n&&n.isSparseMatrix&&n.constructor.prototype.isMatrix===!0||!1}function NE(n){return n&&n.constructor.prototype.isRange===!0||!1}function Jv(n){return n&&n.constructor.prototype.isIndex===!0||!1}function yV(n){return typeof n=="boolean"}function bV(n){return n&&n.constructor.prototype.isResultSet===!0||!1}function sN(n){return n&&n.constructor.prototype.isHelp===!0||!1}function xV(n){return typeof n=="function"}function wV(n){return n instanceof Date}function SV(n){return n instanceof RegExp}function Kv(n){return!!(n&&typeof n=="object"&&n.constructor===Object&&!_s(n)&&!Id(n))}function EV(n){return n===null}function _V(n){return n===void 0}function Uc(n){return n&&n.isAccessorNode===!0&&n.constructor.prototype.isNode===!0||!1}function co(n){return n&&n.isArrayNode===!0&&n.constructor.prototype.isNode===!0||!1}function CV(n){return n&&n.isAssignmentNode===!0&&n.constructor.prototype.isNode===!0||!1}function AV(n){return n&&n.isBlockNode===!0&&n.constructor.prototype.isNode===!0||!1}function TV(n){return n&&n.isConditionalNode===!0&&n.constructor.prototype.isNode===!0||!1}function gn(n){return n&&n.isConstantNode===!0&&n.constructor.prototype.isNode===!0||!1}function CM(n){return gn(n)||Fr(n)&&n.args.length===1&&gn(n.args[0])&&"-+~".includes(n.op)}function gm(n){return n&&n.isFunctionAssignmentNode===!0&&n.constructor.prototype.isNode===!0||!1}function yu(n){return n&&n.isFunctionNode===!0&&n.constructor.prototype.isNode===!0||!1}function Ld(n){return n&&n.isIndexNode===!0&&n.constructor.prototype.isNode===!0||!1}function Rn(n){return n&&n.isNode===!0&&n.constructor.prototype.isNode===!0||!1}function Qv(n){return n&&n.isObjectNode===!0&&n.constructor.prototype.isNode===!0||!1}function Fr(n){return n&&n.isOperatorNode===!0&&n.constructor.prototype.isNode===!0||!1}function bl(n){return n&&n.isParenthesisNode===!0&&n.constructor.prototype.isNode===!0||!1}function MV(n){return n&&n.isRangeNode===!0&&n.constructor.prototype.isNode===!0||!1}function DV(n){return n&&n.isRelationalNode===!0&&n.constructor.prototype.isNode===!0||!1}function ai(n){return n&&n.isSymbolNode===!0&&n.constructor.prototype.isNode===!0||!1}function lN(n){return n&&n.constructor.prototype.isChain===!0||!1}function zn(n){var e=typeof n;return e==="object"?n===null?"null":Kt(n)?"BigNumber":n.constructor&&n.constructor.name?n.constructor.name:"Object":e}function Gt(n){var e=typeof n;if(e==="number"||e==="string"||e==="boolean"||n===null||n===void 0)return n;if(typeof n.clone=="function")return n.clone();if(Array.isArray(n))return n.map(function(t){return Gt(t)});if(n instanceof Date)return new Date(n.valueOf());if(Kt(n))return n;if(Kv(n))return qg(n,Gt);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(n,")"))}function qg(n,e){var t={};for(var r in n)gt(n,r)&&(t[r]=e(n[r]));return t}function kV(n,e){for(var t in e)gt(e,t)&&(n[t]=e[t]);return n}function NV(n,e){if(Array.isArray(e))throw new TypeError("Arrays are not supported by deepExtend");for(var t in e)if(gt(e,t)&&!(t in Object.prototype)&&!(t in Function.prototype))if(e[t]&&e[t].constructor===Object)n[t]===void 0&&(n[t]={}),n[t]&&n[t].constructor===Object?NV(n[t],e[t]):n[t]=e[t];else{if(Array.isArray(e[t]))throw new TypeError("Arrays are not supported by deepExtend");n[t]=e[t]}return n}function bd(n,e){var t,r,i;if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(r=0,i=n.length;r<i;r++)if(!bd(n[r],e[r]))return!1;return!0}else{if(typeof n=="function")return n===e;if(n instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in n)if(!(t in e)||!bd(n[t],e[t]))return!1;for(t in e)if(!(t in n))return!1;return!0}else return n===e}}function Yie(n){var e={};return OV(n,e),e}function OV(n,e){for(var t in n)if(gt(n,t)){var r=n[t];typeof r=="object"&&r!==null?OV(r,e):e[t]=r}}function $x(n,e,t){var r=!0,i;Object.defineProperty(n,e,{get:function(){return r&&(i=t(),r=!1),i},set:function(a){i=a,r=!1},configurable:!0,enumerable:!0})}function gt(n,e){return n&&Object.hasOwnProperty.call(n,e)}function Zie(n){return n&&typeof n.factory=="function"}function Jie(n,e){for(var t={},r=0;r<e.length;r++){var i=e[r],a=n[i];a!==void 0&&(t[i]=a)}return t}var EL=["Matrix","Array"],_L=["number","BigNumber","Fraction"];function Kie(n,e){function t(r){if(r){var i=qg(n,Gt);CL(r,"matrix",EL),CL(r,"number",_L),NV(n,r);var a=qg(n,Gt),o=qg(r,Gt);return e("config",a,i,o),a}else return qg(n,Gt)}return t.MATRIX_OPTIONS=EL,t.NUMBER_OPTIONS=_L,Object.keys(vV).forEach(r=>{Object.defineProperty(t,r,{get:()=>n[r],enumerable:!0,configurable:!0})}),t}function CL(n,e,t){n[e]!==void 0&&!t.includes(n[e])&&console.warn('Warning: Unknown value "'+n[e]+'" for configuration option "'+e+'". Available options: '+t.map(r=>JSON.stringify(r)).join(", ")+".")}function AL(){return!0}function Fo(){return!1}function of(){}const TL="Argument is not a typed-function.";function PV(){function n($){return typeof $=="object"&&$!==null&&$.constructor===Object}const e=[{name:"number",test:function($){return typeof $=="number"}},{name:"string",test:function($){return typeof $=="string"}},{name:"boolean",test:function($){return typeof $=="boolean"}},{name:"Function",test:function($){return typeof $=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function($){return $ instanceof Date}},{name:"RegExp",test:function($){return $ instanceof RegExp}},{name:"Object",test:n},{name:"null",test:function($){return $===null}},{name:"undefined",test:function($){return $===void 0}}],t={name:"any",test:AL,isAny:!0};let r,i,a=0,o={createCount:0};function s($){const ee=r.get($);if(ee)return ee;let ge='Unknown type "'+$+'"';const xe=$.toLowerCase();let Ne;for(Ne of i)if(Ne.toLowerCase()===xe){ge+='. Did you mean "'+Ne+'" ?';break}throw new TypeError(ge)}function l($){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const ge=ee?s(ee).index:i.length,xe=[];for(let Fe=0;Fe<$.length;++Fe){if(!$[Fe]||typeof $[Fe].name!="string"||typeof $[Fe].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const qe=$[Fe].name;if(r.has(qe))throw new TypeError('Duplicate type name "'+qe+'"');xe.push(qe),r.set(qe,{name:qe,test:$[Fe].test,isAny:$[Fe].isAny,index:ge+Fe,conversionsTo:[]})}const Ne=i.slice(ge);i=i.slice(0,ge).concat(xe).concat(Ne);for(let Fe=ge+xe.length;Fe<i.length;++Fe)r.get(i[Fe]).index=Fe}function u(){r=new Map,i=[],a=0,l([t],!1)}u(),l(e);function c(){let $;for($ of i)r.get($).conversionsTo=[];a=0}function h($){const ee=i.filter(ge=>{const xe=r.get(ge);return!xe.isAny&&xe.test($)});return ee.length?ee:["any"]}function d($){return $&&typeof $=="function"&&"_typedFunctionData"in $}function f($,ee,ge){if(!d($))throw new TypeError(TL);const xe=ge&&ge.exact,Ne=Array.isArray(ee)?ee.join(","):ee,Fe=m(Ne),qe=y(Fe);if(!xe||qe in $.signatures){const st=$._typedFunctionData.signatureMap.get(qe);if(st)return st}const ke=Fe.length;let it;if(xe){it=[];let st;for(st in $.signatures)it.push($._typedFunctionData.signatureMap.get(st))}else it=$._typedFunctionData.signatures;for(let st=0;st<ke;++st){const we=Fe[st],Re=[];let et;for(et of it){const V=T(et.params,st);if(!(!V||we.restParam&&!V.restParam)){if(!V.hasAny){const Ee=b(V);if(we.types.some(Le=>!Ee.has(Le.name)))continue}Re.push(et)}}if(it=Re,it.length===0)break}let Ze;for(Ze of it)if(Ze.params.length<=ke)return Ze;throw new TypeError("Signature not found (signature: "+($.name||"unnamed")+"("+y(Fe,", ")+"))")}function p($,ee,ge){return f($,ee,ge).implementation}function v($,ee){const ge=s(ee);if(ge.test($))return $;const xe=ge.conversionsTo;if(xe.length===0)throw new Error("There are no conversions to "+ee+" defined.");for(let Ne=0;Ne<xe.length;Ne++)if(s(xe[Ne].from).test($))return xe[Ne].convert($);throw new Error("Cannot convert "+$+" to "+ee)}function y($){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return $.map(ge=>ge.name).join(ee)}function g($){const ee=$.indexOf("...")===0,ge=(ee?$.length>3?$.slice(3):"any":$).split("|").map(Fe=>s(Fe.trim()));let xe=!1,Ne=ee?"...":"";return{types:ge.map(function(Fe){return xe=Fe.isAny||xe,Ne+=Fe.name+"|",{name:Fe.name,typeIndex:Fe.index,test:Fe.test,isAny:Fe.isAny,conversion:null,conversionIndex:-1}}),name:Ne.slice(0,-1),hasAny:xe,hasConversion:!1,restParam:ee}}function w($){const ee=$.types.map(qe=>qe.name),ge=P(ee);let xe=$.hasAny,Ne=$.name;const Fe=ge.map(function(qe){const ke=s(qe.from);return xe=ke.isAny||xe,Ne+="|"+qe.from,{name:qe.from,typeIndex:ke.index,test:ke.test,isAny:ke.isAny,conversion:qe,conversionIndex:qe.index}});return{types:$.types.concat(Fe),name:Ne,hasAny:xe,hasConversion:Fe.length>0,restParam:$.restParam}}function b($){return $.typeSet||($.typeSet=new Set,$.types.forEach(ee=>$.typeSet.add(ee.name))),$.typeSet}function m($){const ee=[];if(typeof $!="string")throw new TypeError("Signatures must be strings");const ge=$.trim();if(ge==="")return ee;const xe=ge.split(",");for(let Ne=0;Ne<xe.length;++Ne){const Fe=g(xe[Ne].trim());if(Fe.restParam&&Ne!==xe.length-1)throw new SyntaxError('Unexpected rest parameter "'+xe[Ne]+'": only allowed for the last parameter');if(Fe.types.length===0)return null;ee.push(Fe)}return ee}function x($){const ee=pe($);return ee?ee.restParam:!1}function S($){if(!$||$.types.length===0)return AL;if($.types.length===1)return s($.types[0].name).test;if($.types.length===2){const ee=s($.types[0].name).test,ge=s($.types[1].name).test;return function(xe){return ee(xe)||ge(xe)}}else{const ee=$.types.map(function(ge){return s(ge.name).test});return function(ge){for(let xe=0;xe<ee.length;xe++)if(ee[xe](ge))return!0;return!1}}}function C($){let ee,ge,xe;if(x($)){ee=De($).map(S);const Ne=ee.length,Fe=S(pe($)),qe=function(ke){for(let it=Ne;it<ke.length;it++)if(!Fe(ke[it]))return!1;return!0};return function(ke){for(let it=0;it<ee.length;it++)if(!ee[it](ke[it]))return!1;return qe(ke)&&ke.length>=Ne+1}}else return $.length===0?function(Ne){return Ne.length===0}:$.length===1?(ge=S($[0]),function(Ne){return ge(Ne[0])&&Ne.length===1}):$.length===2?(ge=S($[0]),xe=S($[1]),function(Ne){return ge(Ne[0])&&xe(Ne[1])&&Ne.length===2}):(ee=$.map(S),function(Ne){for(let Fe=0;Fe<ee.length;Fe++)if(!ee[Fe](Ne[Fe]))return!1;return Ne.length===ee.length})}function T($,ee){return ee<$.length?$[ee]:x($)?pe($):null}function M($,ee){const ge=T($,ee);return ge?b(ge):new Set}function A($){return $.conversion===null||$.conversion===void 0}function D($,ee){const ge=new Set;return $.forEach(xe=>{const Ne=M(xe.params,ee);let Fe;for(Fe of Ne)ge.add(Fe)}),ge.has("any")?["any"]:Array.from(ge)}function O($,ee,ge){let xe,Ne;const Fe=$||"unnamed";let qe=ge,ke;for(ke=0;ke<ee.length;ke++){const we=[];if(qe.forEach(Re=>{const et=T(Re.params,ke),V=S(et);(ke<Re.params.length||x(Re.params))&&V(ee[ke])&&we.push(Re)}),we.length===0){if(Ne=D(qe,ke),Ne.length>0){const Re=h(ee[ke]);return xe=new TypeError("Unexpected type of argument in function "+Fe+" (expected: "+Ne.join(" or ")+", actual: "+Re.join(" | ")+", index: "+ke+")"),xe.data={category:"wrongType",fn:Fe,index:ke,actual:Re,expected:Ne},xe}}else qe=we}const it=qe.map(function(we){return x(we.params)?1/0:we.params.length});if(ee.length<Math.min.apply(null,it))return Ne=D(qe,ke),xe=new TypeError("Too few arguments in function "+Fe+" (expected: "+Ne.join(" or ")+", index: "+ee.length+")"),xe.data={category:"tooFewArgs",fn:Fe,index:ee.length,expected:Ne},xe;const Ze=Math.max.apply(null,it);if(ee.length>Ze)return xe=new TypeError("Too many arguments in function "+Fe+" (expected: "+Ze+", actual: "+ee.length+")"),xe.data={category:"tooManyArgs",fn:Fe,index:ee.length,expectedLength:Ze},xe;const st=[];for(let we=0;we<ee.length;++we)st.push(h(ee[we]).join("|"));return xe=new TypeError('Arguments of type "'+st.join(", ")+'" do not match any of the defined signatures of function '+Fe+"."),xe.data={category:"mismatch",actual:st},xe}function U($){let ee=i.length+1;for(let ge=0;ge<$.types.length;ge++)A($.types[ge])&&(ee=Math.min(ee,$.types[ge].typeIndex));return ee}function L($){let ee=a+1;for(let ge=0;ge<$.types.length;ge++)A($.types[ge])||(ee=Math.min(ee,$.types[ge].conversionIndex));return ee}function F($,ee){if($.hasAny){if(!ee.hasAny)return 1}else if(ee.hasAny)return-1;if($.restParam){if(!ee.restParam)return 1}else if(ee.restParam)return-1;if($.hasConversion){if(!ee.hasConversion)return 1}else if(ee.hasConversion)return-1;const ge=U($)-U(ee);if(ge<0)return-1;if(ge>0)return 1;const xe=L($)-L(ee);return xe<0?-1:xe>0?1:0}function k($,ee){const ge=$.params,xe=ee.params,Ne=pe(ge),Fe=pe(xe),qe=x(ge),ke=x(xe);if(qe&&Ne.hasAny){if(!ke||!Fe.hasAny)return 1}else if(ke&&Fe.hasAny)return-1;let it=0,Ze=0,st;for(st of ge)st.hasAny&&++it,st.hasConversion&&++Ze;let we=0,Re=0;for(st of xe)st.hasAny&&++we,st.hasConversion&&++Re;if(it!==we)return it-we;if(qe&&Ne.hasConversion){if(!ke||!Fe.hasConversion)return 1}else if(ke&&Fe.hasConversion)return-1;if(Ze!==Re)return Ze-Re;if(qe){if(!ke)return 1}else if(ke)return-1;const et=(ge.length-xe.length)*(qe?-1:1);if(et!==0)return et;const V=[];let Ee=0;for(let Je=0;Je<ge.length;++Je){const he=F(ge[Je],xe[Je]);V.push(he),Ee+=he}if(Ee!==0)return Ee;let Le;for(Le of V)if(Le!==0)return Le;return 0}function P($){if($.length===0)return[];const ee=$.map(s);$.length>1&&ee.sort((Ne,Fe)=>Ne.index-Fe.index);let ge=ee[0].conversionsTo;if($.length===1)return ge;ge=ge.concat([]);const xe=new Set($);for(let Ne=1;Ne<ee.length;++Ne){let Fe;for(Fe of ee[Ne].conversionsTo)xe.has(Fe.from)||(ge.push(Fe),xe.add(Fe.from))}return ge}function z($,ee){let ge=ee;if($.some(Ne=>Ne.hasConversion)){const Ne=x($),Fe=$.map(B);ge=function(){const qe=[],ke=Ne?arguments.length-1:arguments.length;for(let it=0;it<ke;it++)qe[it]=Fe[it](arguments[it]);return Ne&&(qe[ke]=arguments[ke].map(Fe[ke])),ee.apply(this,qe)}}let xe=ge;if(x($)){const Ne=$.length-1;xe=function(){return ge.apply(this,Me(arguments,0,Ne).concat([Me(arguments,Ne)]))}}return xe}function B($){let ee,ge,xe,Ne;const Fe=[],qe=[];switch($.types.forEach(function(ke){ke.conversion&&(Fe.push(s(ke.conversion.from).test),qe.push(ke.conversion.convert))}),qe.length){case 0:return function(ke){return ke};case 1:return ee=Fe[0],xe=qe[0],function(ke){return ee(ke)?xe(ke):ke};case 2:return ee=Fe[0],ge=Fe[1],xe=qe[0],Ne=qe[1],function(ke){return ee(ke)?xe(ke):ge(ke)?Ne(ke):ke};default:return function(ke){for(let it=0;it<qe.length;it++)if(Fe[it](ke))return qe[it](ke);return ke}}}function X($){function ee(ge,xe,Ne){if(xe<ge.length){const Fe=ge[xe];let qe=[];if(Fe.restParam){const ke=Fe.types.filter(A);ke.length<Fe.types.length&&qe.push({types:ke,name:"..."+ke.map(it=>it.name).join("|"),hasAny:ke.some(it=>it.isAny),hasConversion:!1,restParam:!0}),qe.push(Fe)}else qe=Fe.types.map(function(ke){return{types:[ke],name:ke.name,hasAny:ke.isAny,hasConversion:ke.conversion,restParam:!1}});return ne(qe,function(ke){return ee(ge,xe+1,Ne.concat([ke]))})}else return[Ne]}return ee($,0,[])}function J($,ee){const ge=Math.max($.length,ee.length);for(let ke=0;ke<ge;ke++){const it=M($,ke),Ze=M(ee,ke);let st=!1,we;for(we of Ze)if(it.has(we)){st=!0;break}if(!st)return!1}const xe=$.length,Ne=ee.length,Fe=x($),qe=x(ee);return Fe?qe?xe===Ne:Ne>=xe:qe?xe>=Ne:xe===Ne}function Q($){return $.map(ee=>_e(ee)?K(ee.referToSelf.callback):ie(ee)?ze(ee.referTo.references,ee.referTo.callback):ee)}function Z($,ee,ge){const xe=[];let Ne;for(Ne of $){let Fe=ge[Ne];if(typeof Fe!="number")throw new TypeError('No definition for referenced signature "'+Ne+'"');if(Fe=ee[Fe],typeof Fe!="function")return!1;xe.push(Fe)}return xe}function re($,ee,ge){const xe=Q($),Ne=new Array(xe.length).fill(!1);let Fe=!0;for(;Fe;){Fe=!1;let qe=!0;for(let ke=0;ke<xe.length;++ke){if(Ne[ke])continue;const it=xe[ke];if(_e(it))xe[ke]=it.referToSelf.callback(ge),xe[ke].referToSelf=it.referToSelf,Ne[ke]=!0,qe=!1;else if(ie(it)){const Ze=Z(it.referTo.references,xe,ee);Ze?(xe[ke]=it.referTo.callback.apply(this,Ze),xe[ke].referTo=it.referTo,Ne[ke]=!0,qe=!1):Fe=!0}}if(qe&&Fe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return xe}function fe($){const ee=/\bthis(\(|\.signatures\b)/;Object.keys($).forEach(ge=>{const xe=$[ge];if(ee.test(xe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function se($,ee){if(o.createCount++,Object.keys(ee).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&fe(ee);const ge=[],xe=[],Ne={},Fe=[];let qe;for(qe in ee){if(!Object.prototype.hasOwnProperty.call(ee,qe))continue;const ct=m(qe);if(!ct)continue;ge.forEach(function(Qn){if(J(Qn,ct))throw new TypeError('Conflicting signatures "'+y(Qn)+'" and "'+y(ct)+'".')}),ge.push(ct);const Ot=xe.length;xe.push(ee[qe]);const Ut=ct.map(w);let Pt;for(Pt of X(Ut)){const Qn=y(Pt);Fe.push({params:Pt,name:Qn,fn:Ot}),Pt.every(qn=>!qn.hasConversion)&&(Ne[Qn]=Ot)}}Fe.sort(k);const ke=re(xe,Ne,kt);let it;for(it in Ne)Object.prototype.hasOwnProperty.call(Ne,it)&&(Ne[it]=ke[Ne[it]]);const Ze=[],st=new Map;for(it of Fe)st.has(it.name)||(it.fn=ke[it.fn],Ze.push(it),st.set(it.name,it));const we=Ze[0]&&Ze[0].params.length<=2&&!x(Ze[0].params),Re=Ze[1]&&Ze[1].params.length<=2&&!x(Ze[1].params),et=Ze[2]&&Ze[2].params.length<=2&&!x(Ze[2].params),V=Ze[3]&&Ze[3].params.length<=2&&!x(Ze[3].params),Ee=Ze[4]&&Ze[4].params.length<=2&&!x(Ze[4].params),Le=Ze[5]&&Ze[5].params.length<=2&&!x(Ze[5].params),Je=we&&Re&&et&&V&&Ee&&Le;for(let ct=0;ct<Ze.length;++ct)Ze[ct].test=C(Ze[ct].params);const he=we?S(Ze[0].params[0]):Fo,Xe=Re?S(Ze[1].params[0]):Fo,H=et?S(Ze[2].params[0]):Fo,te=V?S(Ze[3].params[0]):Fo,le=Ee?S(Ze[4].params[0]):Fo,ve=Le?S(Ze[5].params[0]):Fo,Ce=we?S(Ze[0].params[1]):Fo,Oe=Re?S(Ze[1].params[1]):Fo,He=et?S(Ze[2].params[1]):Fo,$e=V?S(Ze[3].params[1]):Fo,nt=Ee?S(Ze[4].params[1]):Fo,ft=Le?S(Ze[5].params[1]):Fo;for(let ct=0;ct<Ze.length;++ct)Ze[ct].implementation=z(Ze[ct].params,Ze[ct].fn);const Et=we?Ze[0].implementation:of,rt=Re?Ze[1].implementation:of,xt=et?Ze[2].implementation:of,$t=V?Ze[3].implementation:of,Pr=Ee?Ze[4].implementation:of,Cr=Le?Ze[5].implementation:of,Kn=we?Ze[0].params.length:-1,Bs=Re?Ze[1].params.length:-1,Iu=et?Ze[2].params.length:-1,xi=V?Ze[3].params.length:-1,de=Ee?Ze[4].params.length:-1,Ie=Le?Ze[5].params.length:-1,je=Je?6:0,Ve=Ze.length,We=Ze.map(ct=>ct.test),dt=Ze.map(ct=>ct.implementation),Tt=function(){for(let ct=je;ct<Ve;ct++)if(We[ct](arguments))return dt[ct].apply(this,arguments);return o.onMismatch($,arguments,Ze)};function kt(ct,Ot){return arguments.length===Kn&&he(ct)&&Ce(Ot)?Et.apply(this,arguments):arguments.length===Bs&&Xe(ct)&&Oe(Ot)?rt.apply(this,arguments):arguments.length===Iu&&H(ct)&&He(Ot)?xt.apply(this,arguments):arguments.length===xi&&te(ct)&&$e(Ot)?$t.apply(this,arguments):arguments.length===de&&le(ct)&&nt(Ot)?Pr.apply(this,arguments):arguments.length===Ie&&ve(ct)&&ft(Ot)?Cr.apply(this,arguments):Tt.apply(this,arguments)}try{Object.defineProperty(kt,"name",{value:$})}catch{}return kt.signatures=Ne,kt._typedFunctionData={signatures:Ze,signatureMap:st},kt}function ye($,ee,ge){throw O($,ee,ge)}function De($){return Me($,0,$.length-1)}function pe($){return $[$.length-1]}function Me($,ee,ge){return Array.prototype.slice.call($,ee,ge)}function be($,ee){for(let ge=0;ge<$.length;ge++)if(ee($[ge]))return $[ge]}function ne($,ee){return Array.prototype.concat.apply([],$.map(ee))}function Pe(){const $=De(arguments).map(ge=>y(m(ge))),ee=pe(arguments);if(typeof ee!="function")throw new TypeError("Callback function expected as last argument");return ze($,ee)}function ze($,ee){return{referTo:{references:$,callback:ee}}}function K($){if(typeof $!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:$}}}function ie($){return $&&typeof $.referTo=="object"&&Array.isArray($.referTo.references)&&typeof $.referTo.callback=="function"}function _e($){return $&&typeof $.referToSelf=="object"&&typeof $.referToSelf.callback=="function"}function oe($,ee){if(!$)return ee;if(ee&&ee!==$){const ge=new Error("Function names do not match (expected: "+$+", actual: "+ee+")");throw ge.data={actual:ee,expected:$},ge}return $}function G($){let ee;for(const ge in $)Object.prototype.hasOwnProperty.call($,ge)&&(d($[ge])||typeof $[ge].signature=="string")&&(ee=oe(ee,$[ge].name));return ee}function q($,ee){let ge;for(ge in ee)if(Object.prototype.hasOwnProperty.call(ee,ge)){if(ge in $&&ee[ge]!==$[ge]){const xe=new Error('Signature "'+ge+'" is defined twice');throw xe.data={signature:ge,sourceFunction:ee[ge],destFunction:$[ge]},xe}$[ge]=ee[ge]}}const ce=o;o=function($){const ee=typeof $=="string",ge=ee?1:0;let xe=ee?$:"";const Ne={};for(let Fe=ge;Fe<arguments.length;++Fe){const qe=arguments[Fe];let ke={},it;if(typeof qe=="function"?(it=qe.name,typeof qe.signature=="string"?ke[qe.signature]=qe:d(qe)&&(ke=qe.signatures)):n(qe)&&(ke=qe,ee||(it=G(qe))),Object.keys(ke).length===0){const Ze=new TypeError("Argument to 'typed' at index "+Fe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ze.data={index:Fe,argument:qe},Ze}ee||(xe=oe(xe,it)),q(Ne,ke)}return se(xe||"",Ne)},o.create=PV,o.createCount=ce.createCount,o.onMismatch=ye,o.throwMismatchError=ye,o.createError=O,o.clear=u,o.clearConversions=c,o.addTypes=l,o._findType=s,o.referTo=Pe,o.referToSelf=K,o.convert=v,o.findSignature=f,o.find=p,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function($,ee){let ge="any";ee!==!1&&r.has("Object")&&(ge="Object"),o.addTypes([$],ge)};function Ae($){if(!$||typeof $.from!="string"||typeof $.to!="string"||typeof $.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if($.to===$.from)throw new SyntaxError('Illegal to define conversion from "'+$.from+'" to itself.')}return o.addConversion=function($){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Ae($);const ge=s($.to),xe=ge.conversionsTo.find(Ne=>Ne.from===$.from);if(xe)if(ee&&ee.override)o.removeConversion({from:xe.from,to:$.to,convert:xe.convert});else throw new Error('There is already a conversion from "'+$.from+'" to "'+ge.name+'"');ge.conversionsTo.push({from:$.from,convert:$.convert,index:a++})},o.addConversions=function($,ee){$.forEach(ge=>o.addConversion(ge,ee))},o.removeConversion=function($){Ae($);const ee=s($.to),ge=be(ee.conversionsTo,Ne=>Ne.from===$.from);if(!ge)throw new Error("Attempt to remove nonexistent conversion from "+$.from+" to "+$.to);if(ge.convert!==$.convert)throw new Error("Conversion to remove does not match existing conversion");const xe=ee.conversionsTo.indexOf(ge);ee.conversionsTo.splice(xe,1)},o.resolve=function($,ee){if(!d($))throw new TypeError(TL);const ge=$._typedFunctionData.signatures;for(let xe=0;xe<ge.length;++xe)if(ge[xe].test(ee))return ge[xe];return null},o}const Xh=PV();function Nt(n){return typeof n=="boolean"?!0:isFinite(n)?n===Math.round(n):!1}var vc=Math.sign||function(n){return n>0?1:n<0?-1:0},Qie=Math.log2||function(n){return Math.log(n)/Math.LN2},eae=Math.log10||function(n){return Math.log(n)/Math.LN10},tae=Math.log1p||function(n){return Math.log(n+1)},nae=Math.cbrt||function(n){if(n===0)return n;var e=n<0,t;return e&&(n=-n),isFinite(n)?(t=Math.exp(Math.log(n)/3),t=(n/(t*t)+2*t)/3):t=n,e?-t:t},rae=Math.expm1||function(n){return n>=2e-4||n<=-2e-4?Math.exp(n)-1:n+n*n/2+n*n*n/6};function PC(n,e,t){var r={2:"0b",8:"0o",16:"0x"},i=r[e],a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Nt(t))throw new Error("size must be an integer");if(n>2**(t-1)-1||n<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!Nt(n))throw new Error("Value must be an integer");n<0&&(n=n+2**t),a="i".concat(t)}var o="";return n<0&&(n=-n,o="-"),"".concat(o).concat(i).concat(n.toString(e)).concat(a)}function id(n,e){if(typeof e=="function")return e(n);if(n===1/0)return"Infinity";if(n===-1/0)return"-Infinity";if(isNaN(n))return"NaN";var{notation:t,precision:r,wordSize:i}=RV(e);switch(t){case"fixed":return IV(n,r);case"exponential":return LV(n,r);case"engineering":return iae(n,r);case"bin":return PC(n,2,i);case"oct":return PC(n,8,i);case"hex":return PC(n,16,i);case"auto":return aae(n,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function RV(n){var e="auto",t,r;if(n!==void 0)if(tn(n))t=n;else if(Kt(n))t=n.toNumber();else if(Kv(n))n.precision!==void 0&&(t=ML(n.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),n.wordSize!==void 0&&(r=ML(n.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),n.notation&&(e=n.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:r}}function ey(n){var e=String(n).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+n);var t=e[1],r=e[2],i=parseFloat(e[4]||"0"),a=r.indexOf(".");i+=a!==-1?a-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:t,coefficients:o,exponent:i}}function iae(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=ey(n),r=OE(t,e),i=r.exponent,a=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(tn(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),l=0;l<s;l++)a.push(0);for(var u=Math.abs(i-o),c=1;u>0;)c++,u--;var h=a.slice(c).join(""),d=tn(e)&&h.length||h.match(/[1-9]/)?"."+h:"",f=a.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return r.sign+f}function IV(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=ey(n),r=typeof e=="number"?OE(t,t.exponent+1+e):t,i=r.coefficients,a=r.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(Sp(o-i.length))),a<0&&(i=Sp(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),r.sign+i.join("")}function LV(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=ey(n),r=e?OE(t,e):t,i=r.coefficients,a=r.exponent;i.length<e&&(i=i.concat(Sp(e-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function aae(n,e,t){if(isNaN(n)||!isFinite(n))return String(n);var r=DL(t==null?void 0:t.lowerExp,-3),i=DL(t==null?void 0:t.upperExp,5),a=ey(n),o=e?OE(a,e):a;if(o.exponent<r||o.exponent>=i)return LV(n,e);var s=o.coefficients,l=o.exponent;s.length<e&&(s=s.concat(Sp(e-s.length))),s=s.concat(Sp(l-s.length+1+(s.length<e?e-s.length:0))),s=Sp(-l).concat(s);var u=l>0?l:0;return u<s.length-1&&s.splice(u+1,0,"."),o.sign+s.join("")}function OE(n,e){for(var t={sign:n.sign,coefficients:n.coefficients,exponent:n.exponent},r=t.coefficients;e<=0;)r.unshift(0),t.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var a=e-1;for(r[a]++;r[a]===10;)r.pop(),a===0&&(r.unshift(0),t.exponent++,a++),a--,r[a]++}}return t}function Sp(n){for(var e=[],t=0;t<n;t++)e.push(0);return e}function oae(n){return n.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var sae=Number.EPSILON||2220446049250313e-31;function Ma(n,e,t){if(t==null)return n===e;if(n===e)return!0;if(isNaN(n)||isNaN(e))return!1;if(isFinite(n)&&isFinite(e)){var r=Math.abs(n-e);return r<=sae?!0:r<=Math.max(Math.abs(n),Math.abs(e))*t}return!1}var lae=Math.acosh||function(n){return Math.log(Math.sqrt(n*n-1)+n)},uae=Math.asinh||function(n){return Math.log(Math.sqrt(n*n+1)+n)},cae=Math.atanh||function(n){return Math.log((1+n)/(1-n))/2},hae=Math.cosh||function(n){return(Math.exp(n)+Math.exp(-n))/2},dae=Math.sinh||function(n){return(Math.exp(n)-Math.exp(-n))/2},fae=Math.tanh||function(n){var e=Math.exp(2*n);return(e-1)/(e+1)};function pae(n,e){var t=!0,r=e>0?!0:e<0?!1:1/e===1/0;return t^r?-n:n}function ML(n,e){if(tn(n))return n;if(Kt(n))return n.toNumber();e()}function DL(n,e){return tn(n)?n:Kt(n)?n.toNumber():e}function ae(n,e,t,r){function i(a){var o=Jie(a,e.map(FV));return mae(n,e,a),t(o)}return i.isFactory=!0,i.fn=n,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function d0(n){return typeof n=="function"&&typeof n.fn=="string"&&Array.isArray(n.dependencies)}function mae(n,e,t){var r=e.filter(a=>!gae(a)).every(a=>t[a]!==void 0);if(!r){var i=e.filter(a=>t[a]===void 0);throw new Error('Cannot create function "'.concat(n,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function gae(n){return n&&n[0]==="?"}function FV(n){return n&&n[0]==="?"?n.slice(1):n}function Ea(n,e){if(zV(n)&&BV(n,e))return n[e];throw typeof n[e]=="function"&&uN(n,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Vp(n,e,t){if(zV(n)&&BV(n,e))return n[e]=t,t;throw new Error('No access to property "'+e+'"')}function vae(n,e){return e in n}function BV(n,e){return!n||typeof n!="object"?!1:gt(bae,e)?!0:!(e in Object.prototype||e in Function.prototype)}function yae(n,e){if(!uN(n,e))throw new Error('No access to method "'+e+'"');return n[e]}function uN(n,e){return n==null||typeof n[e]!="function"||gt(n,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(n)?!1:gt(xae,e)?!0:!(e in Object.prototype||e in Function.prototype)}function zV(n){return typeof n=="object"&&n&&n.constructor===Object}var bae={length:!0,name:!0},xae={toString:!0,valueOf:!0,toLocaleString:!0};class PE{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(e){return Ea(this.wrappedObject,e)}set(e,t){return Vp(this.wrappedObject,e,t),this}has(e){return vae(this.wrappedObject,e)}entries(){return jV(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class UV{constructor(e,t,r){this.a=e,this.b=t,this.bKeys=r,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return jV(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function jV(n,e){return{next:()=>{var t=n.next();return t.done?t:{value:e(t.value),done:!1}}}}function G0(){return new Map}function Ep(n){if(!n)return G0();if(HV(n))return n;if(Kv(n))return new PE(n);throw new Error("createMap can create maps from objects or Maps")}function wae(n){if(n instanceof PE)return n.wrappedObject;var e={};for(var t of n.keys()){var r=n.get(t);Vp(e,t,r)}return e}function HV(n){return n?n instanceof Map||n instanceof PE||typeof n.set=="function"&&typeof n.get=="function"&&typeof n.keys=="function"&&typeof n.has=="function":!1}var VV=function(){return VV=Xh.create,Xh},Sae=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Eae=ae("typed",Sae,function(n){var{BigNumber:e,Complex:t,DenseMatrix:r,Fraction:i}=n,a=VV();return a.clear(),a.addTypes([{name:"number",test:tn},{name:"Complex",test:_s},{name:"BigNumber",test:Kt},{name:"Fraction",test:Id},{name:"Unit",test:ja},{name:"identifier",test:o=>Ai&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:Ai},{name:"Chain",test:lN},{name:"Array",test:En},{name:"Matrix",test:Ft},{name:"DenseMatrix",test:q0},{name:"SparseMatrix",test:gc},{name:"Range",test:NE},{name:"Index",test:Jv},{name:"boolean",test:yV},{name:"ResultSet",test:bV},{name:"Help",test:sN},{name:"function",test:xV},{name:"Date",test:wV},{name:"RegExp",test:SV},{name:"null",test:EV},{name:"undefined",test:_V},{name:"AccessorNode",test:Uc},{name:"ArrayNode",test:co},{name:"AssignmentNode",test:CV},{name:"BlockNode",test:AV},{name:"ConditionalNode",test:TV},{name:"ConstantNode",test:gn},{name:"FunctionNode",test:yu},{name:"FunctionAssignmentNode",test:gm},{name:"IndexNode",test:Ld},{name:"Node",test:Rn},{name:"ObjectNode",test:Qv},{name:"OperatorNode",test:Fr},{name:"ParenthesisNode",test:bl},{name:"RangeNode",test:MV},{name:"RelationalNode",test:DV},{name:"SymbolNode",test:ai},{name:"Map",test:HV},{name:"Object",test:Kv}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(o){if(e||RC(o),oae(o)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+o+"). Use function bignumber(x) to convert to BigNumber.");return new e(o)}},{from:"number",to:"Complex",convert:function(o){return t||H1(o),new t(o,0)}},{from:"BigNumber",to:"Complex",convert:function(o){return t||H1(o),new t(o.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(o){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(o){return t||H1(o),new t(o.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(o){i||IC(o);var s=new i(o);if(s.valueOf()!==o)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+o+"). Use function fraction(x) to convert to Fraction.");return s}},{from:"string",to:"number",convert:function(o){var s=Number(o);if(isNaN(s))throw new Error('Cannot convert "'+o+'" to a number');return s}},{from:"string",to:"BigNumber",convert:function(o){e||RC(o);try{return new e(o)}catch{throw new Error('Cannot convert "'+o+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(o){i||IC(o);try{return new i(o)}catch{throw new Error('Cannot convert "'+o+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(o){t||H1(o);try{return new t(o)}catch{throw new Error('Cannot convert "'+o+'" to Complex')}}},{from:"boolean",to:"number",convert:function(o){return+o}},{from:"boolean",to:"BigNumber",convert:function(o){return e||RC(o),new e(+o)}},{from:"boolean",to:"Fraction",convert:function(o){return i||IC(o),new i(+o)}},{from:"boolean",to:"string",convert:function(o){return String(o)}},{from:"Array",to:"Matrix",convert:function(o){return r||_ae(),new r(o)}},{from:"Matrix",to:"Array",convert:function(o){return o.valueOf()}}]),a.onMismatch=(o,s,l)=>{var u=a.createError(o,s,l);if(["wrongType","mismatch"].includes(u.data.category)&&s.length===1&&_o(s[0])&&l.some(h=>!h.params.includes(","))){var c=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw c.data=u.data,c}throw u},a.onMismatch=(o,s,l)=>{var u=a.createError(o,s,l);if(["wrongType","mismatch"].includes(u.data.category)&&s.length===1&&_o(s[0])&&l.some(h=>!h.params.includes(","))){var c=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw c.data=u.data,c}throw u},a});function RC(n){throw new Error("Cannot convert value ".concat(n," into a BigNumber: no class 'BigNumber' provided"))}function H1(n){throw new Error("Cannot convert value ".concat(n," into a Complex number: no class 'Complex' provided"))}function _ae(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function IC(n){throw new Error("Cannot convert value ".concat(n," into a Fraction, no class 'Fraction' provided."))}var Cae="ResultSet",Aae=[],Tae=ae(Cae,Aae,()=>{function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return n.prototype.type="ResultSet",n.prototype.isResultSet=!0,n.prototype.valueOf=function(){return this.entries},n.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},n.fromJSON=function(e){return new n(e.entries)},n},{isClass:!0});/*!
*  decimal.js v10.4.3
*  An arbitrary-precision Decimal type for JavaScript.
*  https://github.com/MikeMcl/decimal.js
*  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
*  MIT Licence
*/var ap=9e15,ih=1e9,AM="0123456789abcdef",Jw="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Kw="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",TM={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ap,maxE:ap,crypto:!1},WV,nu,Qt=!0,RE="[DecimalError] ",jc=RE+"Invalid argument: ",qV=RE+"Precision limit exceeded",GV=RE+"crypto unavailable",$V="[object Decimal]",na=Math.floor,ti=Math.pow,Mae=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Dae=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,kae=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,XV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cs=1e7,qt=7,Nae=9007199254740991,Oae=Jw.length-1,MM=Kw.length-1,ot={toStringTag:$V};ot.absoluteValue=ot.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Lt(n)};ot.ceil=function(){return Lt(new this.constructor(this),this.e+1,2)};ot.clampedTo=ot.clamp=function(n,e){var t,r=this,i=r.constructor;if(n=new i(n),e=new i(e),!n.s||!e.s)return new i(NaN);if(n.gt(e))throw Error(jc+e);return t=r.cmp(n),t<0?n:r.cmp(e)>0?e:new i(r)};ot.comparedTo=ot.cmp=function(n){var e,t,r,i,a=this,o=a.d,s=(n=new a.constructor(n)).d,l=a.s,u=n.s;if(!o||!s)return!l||!u?NaN:l!==u?l:o===s?0:!o^l<0?1:-1;if(!o[0]||!s[0])return o[0]?l:s[0]?-u:0;if(l!==u)return l;if(a.e!==n.e)return a.e>n.e^l<0?1:-1;for(r=o.length,i=s.length,e=0,t=r<i?r:i;e<t;++e)if(o[e]!==s[e])return o[e]>s[e]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1};ot.cosine=ot.cos=function(){var n,e,t=this,r=t.constructor;return t.d?t.d[0]?(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+qt,r.rounding=1,t=Pae(r,QV(r,t)),r.precision=n,r.rounding=e,Lt(nu==2||nu==3?t.neg():t,n,e,!0)):new r(1):new r(NaN)};ot.cubeRoot=ot.cbrt=function(){var n,e,t,r,i,a,o,s,l,u,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(Qt=!1,a=c.s*ti(c.s*c,1/3),!a||Math.abs(a)==1/0?(t=Ni(c.d),n=c.e,(a=(n-t.length+1)%3)&&(t+=a==1||a==-2?"0":"00"),a=ti(t,1/3),n=na((n+1)/3)-(n%3==(n<0?-1:2)),a==1/0?t="5e"+n:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),r=new h(t),r.s=c.s):r=new h(a.toString()),o=(n=h.precision)+3;;)if(s=r,l=s.times(s).times(s),u=l.plus(c),r=Jn(u.plus(c).times(s),u.plus(l),o+2,1),Ni(s.d).slice(0,o)===(t=Ni(r.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!i&&t=="4999"){if(!i&&(Lt(s,n+1,0),s.times(s).times(s).eq(c))){r=s;break}o+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Lt(r,n+1,1),e=!r.times(r).times(r).eq(c));break}return Qt=!0,Lt(r,n,h.rounding,e)};ot.decimalPlaces=ot.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-na(this.e/qt))*qt,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};ot.dividedBy=ot.div=function(n){return Jn(this,new this.constructor(n))};ot.dividedToIntegerBy=ot.divToInt=function(n){var e=this,t=e.constructor;return Lt(Jn(e,new t(n),0,1,1),t.precision,t.rounding)};ot.equals=ot.eq=function(n){return this.cmp(n)===0};ot.floor=function(){return Lt(new this.constructor(this),this.e+1,3)};ot.greaterThan=ot.gt=function(n){return this.cmp(n)>0};ot.greaterThanOrEqualTo=ot.gte=function(n){var e=this.cmp(n);return e==1||e===0};ot.hyperbolicCosine=ot.cosh=function(){var n,e,t,r,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;t=o.precision,r=o.rounding,o.precision=t+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(n=Math.ceil(i/3),e=(1/LE(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),a=Wp(o,1,a.times(e),new o(1),!0);for(var l,u=n,c=new o(8);u--;)l=a.times(a),a=s.minus(l.times(c.minus(l.times(c))));return Lt(a,o.precision=t,o.rounding=r,!0)};ot.hyperbolicSine=ot.sinh=function(){var n,e,t,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,t=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=Wp(a,2,i,i,!0);else{n=1.4*Math.sqrt(r),n=n>16?16:n|0,i=i.times(1/LE(5,n)),i=Wp(a,2,i,i,!0);for(var o,s=new a(5),l=new a(16),u=new a(20);n--;)o=i.times(i),i=i.times(s.plus(o.times(l.times(o).plus(u))))}return a.precision=e,a.rounding=t,Lt(i,e,t,!0)};ot.hyperbolicTangent=ot.tanh=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+7,r.rounding=1,Jn(t.sinh(),t.cosh(),r.precision=n,r.rounding=e)):new r(t.s)};ot.inverseCosine=ot.acos=function(){var n,e=this,t=e.constructor,r=e.abs().cmp(1),i=t.precision,a=t.rounding;return r!==-1?r===0?e.isNeg()?ws(t,i,a):new t(0):new t(NaN):e.isZero()?ws(t,i+4,a).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),n=ws(t,i+4,a).times(.5),t.precision=i,t.rounding=a,n.minus(e))};ot.inverseHyperbolicCosine=ot.acosh=function(){var n,e,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(n=r.precision,e=r.rounding,r.precision=n+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,Qt=!1,t=t.times(t).minus(1).sqrt().plus(t),Qt=!0,r.precision=n,r.rounding=e,t.ln()):new r(t)};ot.inverseHyperbolicSine=ot.asinh=function(){var n,e,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,Qt=!1,t=t.times(t).plus(1).sqrt().plus(t),Qt=!0,r.precision=n,r.rounding=e,t.ln())};ot.inverseHyperbolicTangent=ot.atanh=function(){var n,e,t,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(n=a.precision,e=a.rounding,r=i.sd(),Math.max(r,n)<2*-i.e-1?Lt(new a(i),n,e,!0):(a.precision=t=r-i.e,i=Jn(i.plus(1),new a(1).minus(i),t+n,1),a.precision=n+4,a.rounding=1,i=i.ln(),a.precision=n,a.rounding=e,i.times(.5))):new a(NaN)};ot.inverseSine=ot.asin=function(){var n,e,t,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),t=a.precision,r=a.rounding,e!==-1?e===0?(n=ws(a,t+4,r).times(.5),n.s=i.s,n):new a(NaN):(a.precision=t+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=t,a.rounding=r,i.times(2)))};ot.inverseTangent=ot.atan=function(){var n,e,t,r,i,a,o,s,l,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&h+4<=MM)return o=ws(c,h+4,d).times(.25),o.s=u.s,o}else{if(!u.s)return new c(NaN);if(h+4<=MM)return o=ws(c,h+4,d).times(.5),o.s=u.s,o}for(c.precision=s=h+10,c.rounding=1,t=Math.min(28,s/qt+2|0),n=t;n;--n)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Qt=!1,e=Math.ceil(s/qt),r=1,l=u.times(u),o=new c(u),i=u;n!==-1;)if(i=i.times(l),a=o.minus(i.div(r+=2)),i=i.times(l),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(n=e;o.d[n]===a.d[n]&&n--;);return t&&(o=o.times(2<<t-1)),Qt=!0,Lt(o,c.precision=h,c.rounding=d,!0)};ot.isFinite=function(){return!!this.d};ot.isInteger=ot.isInt=function(){return!!this.d&&na(this.e/qt)>this.d.length-2};ot.isNaN=function(){return!this.s};ot.isNegative=ot.isNeg=function(){return this.s<0};ot.isPositive=ot.isPos=function(){return this.s>0};ot.isZero=function(){return!!this.d&&this.d[0]===0};ot.lessThan=ot.lt=function(n){return this.cmp(n)<0};ot.lessThanOrEqualTo=ot.lte=function(n){return this.cmp(n)<1};ot.logarithm=ot.log=function(n){var e,t,r,i,a,o,s,l,u=this,c=u.constructor,h=c.precision,d=c.rounding,f=5;if(n==null)n=new c(10),e=!0;else{if(n=new c(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new c(NaN);e=n.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new c(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)a=!0;else{for(i=t[0];i%10===0;)i/=10;a=i!==1}if(Qt=!1,s=h+f,o=yc(u,s),r=e?Qw(c,s+10):yc(n,s),l=Jn(o,r,s,1),$0(l.d,i=h,d))do if(s+=10,o=yc(u,s),r=e?Qw(c,s+10):yc(n,s),l=Jn(o,r,s,1),!a){+Ni(l.d).slice(i+1,i+15)+1==1e14&&(l=Lt(l,h+1,0));break}while($0(l.d,i+=10,d));return Qt=!0,Lt(l,h,d)};ot.minus=ot.sub=function(n){var e,t,r,i,a,o,s,l,u,c,h,d,f=this,p=f.constructor;if(n=new p(n),!f.d||!n.d)return!f.s||!n.s?n=new p(NaN):f.d?n.s=-n.s:n=new p(n.d||f.s!==n.s?f:NaN),n;if(f.s!=n.s)return n.s=-n.s,f.plus(n);if(u=f.d,d=n.d,s=p.precision,l=p.rounding,!u[0]||!d[0]){if(d[0])n.s=-n.s;else if(u[0])n=new p(f);else return new p(l===3?-0:0);return Qt?Lt(n,s,l):n}if(t=na(n.e/qt),c=na(f.e/qt),u=u.slice(),a=c-t,a){for(h=a<0,h?(e=u,a=-a,o=d.length):(e=d,t=c,o=u.length),r=Math.max(Math.ceil(s/qt),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=u.length,o=d.length,h=r<o,h&&(o=r),r=0;r<o;r++)if(u[r]!=d[r]){h=u[r]<d[r];break}a=0}for(h&&(e=u,u=d,d=e,n.s=-n.s),o=u.length,r=d.length-o;r>0;--r)u[o++]=0;for(r=d.length;r>a;){if(u[--r]<d[r]){for(i=r;i&&u[--i]===0;)u[i]=Cs-1;--u[i],u[r]+=Cs}u[r]-=d[r]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(n.d=u,n.e=IE(u,t),Qt?Lt(n,s,l):n):new p(l===3?-0:0)};ot.modulo=ot.mod=function(n){var e,t=this,r=t.constructor;return n=new r(n),!t.d||!n.s||n.d&&!n.d[0]?new r(NaN):!n.d||t.d&&!t.d[0]?Lt(new r(t),r.precision,r.rounding):(Qt=!1,r.modulo==9?(e=Jn(t,n.abs(),0,3,1),e.s*=n.s):e=Jn(t,n,0,r.modulo,1),e=e.times(n),Qt=!0,t.minus(e))};ot.naturalExponential=ot.exp=function(){return DM(this)};ot.naturalLogarithm=ot.ln=function(){return yc(this)};ot.negated=ot.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Lt(n)};ot.plus=ot.add=function(n){var e,t,r,i,a,o,s,l,u,c,h=this,d=h.constructor;if(n=new d(n),!h.d||!n.d)return!h.s||!n.s?n=new d(NaN):h.d||(n=new d(n.d||h.s===n.s?h:NaN)),n;if(h.s!=n.s)return n.s=-n.s,h.minus(n);if(u=h.d,c=n.d,s=d.precision,l=d.rounding,!u[0]||!c[0])return c[0]||(n=new d(h)),Qt?Lt(n,s,l):n;if(a=na(h.e/qt),r=na(n.e/qt),u=u.slice(),i=a-r,i){for(i<0?(t=u,i=-i,o=c.length):(t=c,r=a,o=u.length),a=Math.ceil(s/qt),o=a>o?a+1:o+1,i>o&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(o=u.length,i=c.length,o-i<0&&(i=o,t=c,c=u,u=t),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/Cs|0,u[i]%=Cs;for(e&&(u.unshift(e),++r),o=u.length;u[--o]==0;)u.pop();return n.d=u,n.e=IE(u,r),Qt?Lt(n,s,l):n};ot.precision=ot.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(jc+n);return t.d?(e=YV(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};ot.round=function(){var n=this,e=n.constructor;return Lt(new e(n),n.e+1,e.rounding)};ot.sine=ot.sin=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+qt,r.rounding=1,t=Iae(r,QV(r,t)),r.precision=n,r.rounding=e,Lt(nu>2?t.neg():t,n,e,!0)):new r(NaN)};ot.squareRoot=ot.sqrt=function(){var n,e,t,r,i,a,o=this,s=o.d,l=o.e,u=o.s,c=o.constructor;if(u!==1||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?o:1/0);for(Qt=!1,u=Math.sqrt(+o),u==0||u==1/0?(e=Ni(s),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=na((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),r=new c(e)):r=new c(u.toString()),t=(l=c.precision)+3;;)if(a=r,r=a.plus(Jn(o,a,t+2,1)).times(.5),Ni(a.d).slice(0,t)===(e=Ni(r.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Lt(a,l+1,0),a.times(a).eq(o))){r=a;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Lt(r,l+1,1),n=!r.times(r).eq(o));break}return Qt=!0,Lt(r,l,c.rounding,n)};ot.tangent=ot.tan=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+10,r.rounding=1,t=t.sin(),t.s=1,t=Jn(t,new r(1).minus(t.times(t)).sqrt(),n+10,0),r.precision=n,r.rounding=e,Lt(nu==2||nu==4?t.neg():t,n,e,!0)):new r(NaN)};ot.times=ot.mul=function(n){var e,t,r,i,a,o,s,l,u,c=this,h=c.constructor,d=c.d,f=(n=new h(n)).d;if(n.s*=c.s,!d||!d[0]||!f||!f[0])return new h(!n.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:!d||!f?n.s/0:n.s*0);for(t=na(c.e/qt)+na(n.e/qt),l=d.length,u=f.length,l<u&&(a=d,d=f,f=a,o=l,l=u,u=o),a=[],o=l+u,r=o;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)s=a[i]+f[r]*d[i-r-1]+e,a[i--]=s%Cs|0,e=s/Cs|0;a[i]=(a[i]+e)%Cs|0}for(;!a[--o];)a.pop();return e?++t:a.shift(),n.d=a,n.e=IE(a,t),Qt?Lt(n,h.precision,h.rounding):n};ot.toBinary=function(n,e){return cN(this,2,n,e)};ot.toDecimalPlaces=ot.toDP=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(Ja(n,0,ih),e===void 0?e=r.rounding:Ja(e,0,8),Lt(t,n+t.e+1,e))};ot.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=xl(r,!0):(Ja(n,0,ih),e===void 0?e=i.rounding:Ja(e,0,8),r=Lt(new i(r),n+1,e),t=xl(r,!0,n+1)),r.isNeg()&&!r.isZero()?"-"+t:t};ot.toFixed=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?t=xl(i):(Ja(n,0,ih),e===void 0?e=a.rounding:Ja(e,0,8),r=Lt(new a(i),n+i.e+1,e),t=xl(r,!1,n+r.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};ot.toFraction=function(n){var e,t,r,i,a,o,s,l,u,c,h,d,f=this,p=f.d,v=f.constructor;if(!p)return new v(f);if(u=t=new v(1),r=l=new v(0),e=new v(r),a=e.e=YV(p)-f.e-1,o=a%qt,e.d[0]=ti(10,o<0?qt+o:o),n==null)n=a>0?e:u;else{if(s=new v(n),!s.isInt()||s.lt(u))throw Error(jc+s);n=s.gt(e)?a>0?e:u:s}for(Qt=!1,s=new v(Ni(p)),c=v.precision,v.precision=a=p.length*qt*2;h=Jn(s,e,0,1,1),i=t.plus(h.times(r)),i.cmp(n)!=1;)t=r,r=i,i=u,u=l.plus(h.times(i)),l=i,i=e,e=s.minus(h.times(i)),s=i;return i=Jn(n.minus(t),r,0,1,1),l=l.plus(i.times(u)),t=t.plus(i.times(r)),l.s=u.s=f.s,d=Jn(u,r,a,1).minus(f).abs().cmp(Jn(l,t,a,1).minus(f).abs())<1?[u,r]:[l,t],v.precision=c,Qt=!0,d};ot.toHexadecimal=ot.toHex=function(n,e){return cN(this,16,n,e)};ot.toNearest=function(n,e){var t=this,r=t.constructor;if(t=new r(t),n==null){if(!t.d)return t;n=new r(1),e=r.rounding}else{if(n=new r(n),e===void 0?e=r.rounding:Ja(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(Qt=!1,t=Jn(t,n,0,e,1).times(n),Qt=!0,Lt(t)):(n.s=t.s,t=n),t};ot.toNumber=function(){return+this};ot.toOctal=function(n,e){return cN(this,8,n,e)};ot.toPower=ot.pow=function(n){var e,t,r,i,a,o,s=this,l=s.constructor,u=+(n=new l(n));if(!s.d||!n.d||!s.d[0]||!n.d[0])return new l(ti(+s,u));if(s=new l(s),s.eq(1))return s;if(r=l.precision,a=l.rounding,n.eq(1))return Lt(s,r,a);if(e=na(n.e/qt),e>=n.d.length-1&&(t=u<0?-u:u)<=Nae)return i=ZV(l,s,t,r),n.s<0?new l(1).div(i):Lt(i,r,a);if(o=s.s,o<0){if(e<n.d.length-1)return new l(NaN);if(n.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return t=ti(+s,u),e=t==0||!isFinite(t)?na(u*(Math.log("0."+Ni(s.d))/Math.LN10+s.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(Qt=!1,l.rounding=s.s=1,t=Math.min(12,(e+"").length),i=DM(n.times(yc(s,r+t)),r),i.d&&(i=Lt(i,r+5,1),$0(i.d,r,a)&&(e=r+10,i=Lt(DM(n.times(yc(s,e+t)),e),e+5,1),+Ni(i.d).slice(r+1,r+15)+1==1e14&&(i=Lt(i,r+1,0)))),i.s=o,Qt=!0,l.rounding=a,Lt(i,r,a))};ot.toPrecision=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=xl(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Ja(n,1,ih),e===void 0?e=i.rounding:Ja(e,0,8),r=Lt(new i(r),n,e),t=xl(r,n<=r.e||r.e<=i.toExpNeg,n)),r.isNeg()&&!r.isZero()?"-"+t:t};ot.toSignificantDigits=ot.toSD=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(Ja(n,1,ih),e===void 0?e=r.rounding:Ja(e,0,8)),Lt(new r(t),n,e)};ot.toString=function(){var n=this,e=n.constructor,t=xl(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};ot.truncated=ot.trunc=function(){return Lt(new this.constructor(this),this.e+1,1)};ot.valueOf=ot.toJSON=function(){var n=this,e=n.constructor,t=xl(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function Ni(n){var e,t,r,i=n.length-1,a="",o=n[0];if(i>0){for(a+=o,e=1;e<i;e++)r=n[e]+"",t=qt-r.length,t&&(a+=ac(t)),a+=r;o=n[e],r=o+"",t=qt-r.length,t&&(a+=ac(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Ja(n,e,t){if(n!==~~n||n<e||n>t)throw Error(jc+n)}function $0(n,e,t,r){var i,a,o,s;for(a=n[0];a>=10;a/=10)--e;return--e<0?(e+=qt,i=0):(i=Math.ceil((e+1)/qt),e%=qt),a=ti(10,qt-e),s=n[i]%a|0,r==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=t<4&&s==99999||t>3&&s==49999||s==5e4||s==0):o=(t<4&&s+1==a||t>3&&s+1==a/2)&&(n[i+1]/a/100|0)==ti(10,e-2)-1||(s==a/2||s==0)&&(n[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(r||t<4)&&s==9999||!r&&t>3&&s==4999):o=((r||t<4)&&s+1==a||!r&&t>3&&s+1==a/2)&&(n[i+1]/a/1e3|0)==ti(10,e-3)-1,o}function Xx(n,e,t){for(var r,i=[0],a,o=0,s=n.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=AM.indexOf(n.charAt(o++)),r=0;r<i.length;r++)i[r]>t-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/t|0,i[r]%=t)}return i.reverse()}function Pae(n,e){var t,r,i;if(e.isZero())return e;r=e.d.length,r<32?(t=Math.ceil(r/3),i=(1/LE(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),n.precision+=t,e=Wp(n,1,e.times(i),new n(1));for(var a=t;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return n.precision-=t,e}var Jn=function(){function n(r,i,a){var o,s=0,l=r.length;for(r=r.slice();l--;)o=r[l]*i+s,r[l]=o%a|0,s=o/a|0;return s&&r.unshift(s),r}function e(r,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function t(r,i,a,o){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,s,l){var u,c,h,d,f,p,v,y,g,w,b,m,x,S,C,T,M,A,D,O,U=r.constructor,L=r.s==i.s?1:-1,F=r.d,k=i.d;if(!F||!F[0]||!k||!k[0])return new U(!r.s||!i.s||(F?k&&F[0]==k[0]:!k)?NaN:F&&F[0]==0||!k?L*0:L/0);for(l?(f=1,c=r.e-i.e):(l=Cs,f=qt,c=na(r.e/f)-na(i.e/f)),D=k.length,M=F.length,g=new U(L),w=g.d=[],h=0;k[h]==(F[h]||0);h++);if(k[h]>(F[h]||0)&&c--,a==null?(S=a=U.precision,o=U.rounding):s?S=a+(r.e-i.e)+1:S=a,S<0)w.push(1),p=!0;else{if(S=S/f+2|0,h=0,D==1){for(d=0,k=k[0],S++;(h<M||d)&&S--;h++)C=d*l+(F[h]||0),w[h]=C/k|0,d=C%k|0;p=d||h<M}else{for(d=l/(k[0]+1)|0,d>1&&(k=n(k,d,l),F=n(F,d,l),D=k.length,M=F.length),T=D,b=F.slice(0,D),m=b.length;m<D;)b[m++]=0;O=k.slice(),O.unshift(0),A=k[0],k[1]>=l/2&&++A;do d=0,u=e(k,b,D,m),u<0?(x=b[0],D!=m&&(x=x*l+(b[1]||0)),d=x/A|0,d>1?(d>=l&&(d=l-1),v=n(k,d,l),y=v.length,m=b.length,u=e(v,b,y,m),u==1&&(d--,t(v,D<y?O:k,y,l))):(d==0&&(u=d=1),v=k.slice()),y=v.length,y<m&&v.unshift(0),t(b,v,m,l),u==-1&&(m=b.length,u=e(k,b,D,m),u<1&&(d++,t(b,D<m?O:k,m,l))),m=b.length):u===0&&(d++,b=[0]),w[h++]=d,u&&b[0]?b[m++]=F[T]||0:(b=[F[T]],m=1);while((T++<M||b[0]!==void 0)&&S--);p=b[0]!==void 0}w[0]||w.shift()}if(f==1)g.e=c,WV=p;else{for(h=1,d=w[0];d>=10;d/=10)h++;g.e=h+c*f-1,Lt(g,s?a+g.e+1:a,o,p)}return g}}();function Lt(n,e,t,r){var i,a,o,s,l,u,c,h,d,f=n.constructor;e:if(e!=null){if(h=n.d,!h)return n;for(i=1,s=h[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=qt,o=e,c=h[d=0],l=c/ti(10,i-o-1)%10|0;else if(d=Math.ceil((a+1)/qt),s=h.length,d>=s)if(r){for(;s++<=d;)h.push(0);c=l=0,i=1,a%=qt,o=a-qt+1}else break e;else{for(c=s=h[d],i=1;s>=10;s/=10)i++;a%=qt,o=a-qt+i,l=o<0?0:c/ti(10,i-o-1)%10|0}if(r=r||e<0||h[d+1]!==void 0||(o<0?c:c%ti(10,i-o-1)),u=t<4?(l||r)&&(t==0||t==(n.s<0?3:2)):l>5||l==5&&(t==4||r||t==6&&(a>0?o>0?c/ti(10,i-o):0:h[d-1])%10&1||t==(n.s<0?8:7)),e<1||!h[0])return h.length=0,u?(e-=n.e+1,h[0]=ti(10,(qt-e%qt)%qt),n.e=-e||0):h[0]=n.e=0,n;if(a==0?(h.length=d,s=1,d--):(h.length=d+1,s=ti(10,qt-a),h[d]=o>0?(c/ti(10,i-o)%ti(10,o)|0)*s:0),u)for(;;)if(d==0){for(a=1,o=h[0];o>=10;o/=10)a++;for(o=h[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(n.e++,h[0]==Cs&&(h[0]=1));break}else{if(h[d]+=s,h[d]!=Cs)break;h[d--]=0,s=1}for(a=h.length;h[--a]===0;)h.pop()}return Qt&&(n.e>f.maxE?(n.d=null,n.e=NaN):n.e<f.minE&&(n.e=0,n.d=[0])),n}function xl(n,e,t){if(!n.isFinite())return KV(n);var r,i=n.e,a=Ni(n.d),o=a.length;return e?(t&&(r=t-o)>0?a=a.charAt(0)+"."+a.slice(1)+ac(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(n.e<0?"e":"e+")+n.e):i<0?(a="0."+ac(-i-1)+a,t&&(r=t-o)>0&&(a+=ac(r))):i>=o?(a+=ac(i+1-o),t&&(r=t-i-1)>0&&(a=a+"."+ac(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),t&&(r=t-o)>0&&(i+1===o&&(a+="."),a+=ac(r))),a}function IE(n,e){var t=n[0];for(e*=qt;t>=10;t/=10)e++;return e}function Qw(n,e,t){if(e>Oae)throw Qt=!0,t&&(n.precision=t),Error(qV);return Lt(new n(Jw),e,1,!0)}function ws(n,e,t){if(e>MM)throw Error(qV);return Lt(new n(Kw),e,t,!0)}function YV(n){var e=n.length-1,t=e*qt+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function ac(n){for(var e="";n--;)e+="0";return e}function ZV(n,e,t,r){var i,a=new n(1),o=Math.ceil(r/qt+4);for(Qt=!1;;){if(t%2&&(a=a.times(e),NL(a.d,o)&&(i=!0)),t=na(t/2),t===0){t=a.d.length-1,i&&a.d[t]===0&&++a.d[t];break}e=e.times(e),NL(e.d,o)}return Qt=!0,a}function kL(n){return n.d[n.d.length-1]&1}function JV(n,e,t){for(var r,i=new n(e[0]),a=0;++a<e.length;)if(r=new n(e[a]),r.s)i[t](r)&&(i=r);else{i=r;break}return i}function DM(n,e){var t,r,i,a,o,s,l,u=0,c=0,h=0,d=n.constructor,f=d.rounding,p=d.precision;if(!n.d||!n.d[0]||n.e>17)return new d(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(Qt=!1,l=p):l=e,s=new d(.03125);n.e>-2;)n=n.times(s),h+=5;for(r=Math.log(ti(2,h))/Math.LN10*2+5|0,l+=r,t=a=o=new d(1),d.precision=l;;){if(a=Lt(a.times(n),l,1),t=t.times(++c),s=o.plus(Jn(a,t,l,1)),Ni(s.d).slice(0,l)===Ni(o.d).slice(0,l)){for(i=h;i--;)o=Lt(o.times(o),l,1);if(e==null)if(u<3&&$0(o.d,l-r,f,u))d.precision=l+=10,t=a=s=new d(1),c=0,u++;else return Lt(o,d.precision=p,f,Qt=!0);else return d.precision=p,o}o=s}}function yc(n,e){var t,r,i,a,o,s,l,u,c,h,d,f=1,p=10,v=n,y=v.d,g=v.constructor,w=g.rounding,b=g.precision;if(v.s<0||!y||!y[0]||!v.e&&y[0]==1&&y.length==1)return new g(y&&!y[0]?-1/0:v.s!=1?NaN:y?0:v);if(e==null?(Qt=!1,c=b):c=e,g.precision=c+=p,t=Ni(y),r=t.charAt(0),Math.abs(a=v.e)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)v=v.times(n),t=Ni(v.d),r=t.charAt(0),f++;a=v.e,r>1?(v=new g("0."+t),a++):v=new g(r+"."+t.slice(1))}else return u=Qw(g,c+2,b).times(a+""),v=yc(new g(r+"."+t.slice(1)),c-p).plus(u),g.precision=b,e==null?Lt(v,b,w,Qt=!0):v;for(h=v,l=o=v=Jn(v.minus(1),v.plus(1),c,1),d=Lt(v.times(v),c,1),i=3;;){if(o=Lt(o.times(d),c,1),u=l.plus(Jn(o,new g(i),c,1)),Ni(u.d).slice(0,c)===Ni(l.d).slice(0,c))if(l=l.times(2),a!==0&&(l=l.plus(Qw(g,c+2,b).times(a+""))),l=Jn(l,new g(f),c,1),e==null)if($0(l.d,c-p,w,s))g.precision=c+=p,u=o=v=Jn(h.minus(1),h.plus(1),c,1),d=Lt(v.times(v),c,1),i=s=1;else return Lt(l,g.precision=b,w,Qt=!0);else return g.precision=b,l;l=u,i+=2}}function KV(n){return String(n.s*n.s/0)}function kM(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,n.e=t=t-r-1,n.d=[],r=(t+1)%qt,t<0&&(r+=qt),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=qt;r<i;)n.d.push(+e.slice(r,r+=qt));e=e.slice(r),r=qt-e.length}else r-=i;for(;r--;)e+="0";n.d.push(+e),Qt&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function Rae(n,e){var t,r,i,a,o,s,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),XV.test(e))return kM(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(Dae.test(e))t=16,e=e.toLowerCase();else if(Mae.test(e))t=2;else if(kae.test(e))t=8;else throw Error(jc+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=n.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=ZV(r,new r(t),a,a*2)),u=Xx(e,t,Cs),c=u.length-1,a=c;u[a]===0;--a)u.pop();return a<0?new r(n.s*0):(n.e=IE(u,c),n.d=u,Qt=!1,o&&(n=Jn(n,i,s*4)),l&&(n=n.times(Math.abs(l)<54?ti(2,l):Hc.pow(2,l))),Qt=!0,n)}function Iae(n,e){var t,r=e.d.length;if(r<3)return e.isZero()?e:Wp(n,2,e,e);t=1.4*Math.sqrt(r),t=t>16?16:t|0,e=e.times(1/LE(5,t)),e=Wp(n,2,e,e);for(var i,a=new n(5),o=new n(16),s=new n(20);t--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function Wp(n,e,t,r,i){var a,o,s,l,u=n.precision,c=Math.ceil(u/qt);for(Qt=!1,l=t.times(t),s=new n(r);;){if(o=Jn(s.times(l),new n(e++*e++),u,1),s=i?r.plus(o):r.minus(o),r=Jn(o.times(l),new n(e++*e++),u,1),o=s.plus(r),o.d[c]!==void 0){for(a=c;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=r,r=o,o=a}return Qt=!0,o.d.length=c+1,o}function LE(n,e){for(var t=n;--e;)t*=n;return t}function QV(n,e){var t,r=e.s<0,i=ws(n,n.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return nu=r?4:1,e;if(t=e.divToInt(i),t.isZero())nu=r?3:2;else{if(e=e.minus(t.times(i)),e.lte(a))return nu=kL(t)?r?2:3:r?4:1,e;nu=kL(t)?r?1:4:r?3:2}return e.minus(i).abs()}function cN(n,e,t,r){var i,a,o,s,l,u,c,h,d,f=n.constructor,p=t!==void 0;if(p?(Ja(t,1,ih),r===void 0?r=f.rounding:Ja(r,0,8)):(t=f.precision,r=f.rounding),!n.isFinite())c=KV(n);else{for(c=xl(n),o=c.indexOf("."),p?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,o>=0&&(c=c.replace(".",""),d=new f(1),d.e=c.length-o,d.d=Xx(xl(d),10,i),d.e=d.d.length),h=Xx(c,10,i),a=l=h.length;h[--l]==0;)h.pop();if(!h[0])c=p?"0p+0":"0";else{if(o<0?a--:(n=new f(n),n.d=h,n.e=a,n=Jn(n,d,t,r,0,i),h=n.d,a=n.e,u=WV),o=h[t],s=i/2,u=u||h[t+1]!==void 0,u=r<4?(o!==void 0||u)&&(r===0||r===(n.s<0?3:2)):o>s||o===s&&(r===4||u||r===6&&h[t-1]&1||r===(n.s<0?8:7)),h.length=t,u)for(;++h[--t]>i-1;)h[t]=0,t||(++a,h.unshift(1));for(l=h.length;!h[l-1];--l);for(o=0,c="";o<l;o++)c+=AM.charAt(h[o]);if(p){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)c+="0";for(h=Xx(c,i,e),l=h.length;!h[l-1];--l);for(o=1,c="1.";o<l;o++)c+=AM.charAt(h[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return n.s<0?"-"+c:c}function NL(n,e){if(n.length>e)return n.length=e,!0}function Lae(n){return new this(n).abs()}function Fae(n){return new this(n).acos()}function Bae(n){return new this(n).acosh()}function zae(n,e){return new this(n).plus(e)}function Uae(n){return new this(n).asin()}function jae(n){return new this(n).asinh()}function Hae(n){return new this(n).atan()}function Vae(n){return new this(n).atanh()}function Wae(n,e){n=new this(n),e=new this(e);var t,r=this.precision,i=this.rounding,a=r+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=ws(this,a,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?ws(this,r,i):new this(0),t.s=n.s):!n.d||e.isZero()?(t=ws(this,a,1).times(.5),t.s=n.s):e.s<0?(this.precision=a,this.rounding=1,t=this.atan(Jn(n,e,a,1)),e=ws(this,a,1),this.precision=r,this.rounding=i,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(Jn(n,e,a,1)),t}function qae(n){return new this(n).cbrt()}function Gae(n){return Lt(n=new this(n),n.e+1,2)}function $ae(n,e,t){return new this(n).clamp(e,t)}function Xae(n){if(!n||typeof n!="object")throw Error(RE+"Object expected");var e,t,r,i=n.defaults===!0,a=["precision",1,ih,"rounding",0,8,"toExpNeg",-ap,0,"toExpPos",0,ap,"maxE",0,ap,"minE",-ap,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(t=a[e],i&&(this[t]=TM[t]),(r=n[t])!==void 0)if(na(r)===r&&r>=a[e+1]&&r<=a[e+2])this[t]=r;else throw Error(jc+t+": "+r);if(t="crypto",i&&(this[t]=TM[t]),(r=n[t])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(GV);else this[t]=!1;else throw Error(jc+t+": "+r);return this}function Yae(n){return new this(n).cos()}function Zae(n){return new this(n).cosh()}function eW(n){var e,t,r;function i(a){var o,s,l,u=this;if(!(u instanceof i))return new i(a);if(u.constructor=i,OL(a)){u.s=a.s,Qt?!a.d||a.e>i.maxE?(u.e=NaN,u.d=null):a.e<i.minE?(u.e=0,u.d=[0]):(u.e=a.e,u.d=a.d.slice()):(u.e=a.e,u.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){u.s=1/a<0?-1:1,u.e=0,u.d=[0];return}if(a<0?(a=-a,u.s=-1):u.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;Qt?o>i.maxE?(u.e=NaN,u.d=null):o<i.minE?(u.e=0,u.d=[0]):(u.e=o,u.d=[a]):(u.e=o,u.d=[a]);return}else if(a*0!==0){a||(u.s=NaN),u.e=NaN,u.d=null;return}return kM(u,a.toString())}else if(l!=="string")throw Error(jc+a);return(s=a.charCodeAt(0))===45?(a=a.slice(1),u.s=-1):(s===43&&(a=a.slice(1)),u.s=1),XV.test(a)?kM(u,a):Rae(u,a)}if(i.prototype=ot,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Xae,i.clone=eW,i.isDecimal=OL,i.abs=Lae,i.acos=Fae,i.acosh=Bae,i.add=zae,i.asin=Uae,i.asinh=jae,i.atan=Hae,i.atanh=Vae,i.atan2=Wae,i.cbrt=qae,i.ceil=Gae,i.clamp=$ae,i.cos=Yae,i.cosh=Zae,i.div=Jae,i.exp=Kae,i.floor=Qae,i.hypot=eoe,i.ln=toe,i.log=noe,i.log10=ioe,i.log2=roe,i.max=aoe,i.min=ooe,i.mod=soe,i.mul=loe,i.pow=uoe,i.random=coe,i.round=hoe,i.sign=doe,i.sin=foe,i.sinh=poe,i.sqrt=moe,i.sub=goe,i.sum=voe,i.tan=yoe,i.tanh=boe,i.trunc=xoe,n===void 0&&(n={}),n&&n.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function Jae(n,e){return new this(n).div(e)}function Kae(n){return new this(n).exp()}function Qae(n){return Lt(n=new this(n),n.e+1,3)}function eoe(){var n,e,t=new this(0);for(Qt=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Qt=!0,new this(1/0);t=e}return Qt=!0,t.sqrt()}function OL(n){return n instanceof Hc||n&&n.toStringTag===$V||!1}function toe(n){return new this(n).ln()}function noe(n,e){return new this(n).log(e)}function roe(n){return new this(n).log(2)}function ioe(n){return new this(n).log(10)}function aoe(){return JV(this,arguments,"lt")}function ooe(){return JV(this,arguments,"gt")}function soe(n,e){return new this(n).mod(e)}function loe(n,e){return new this(n).mul(e)}function uoe(n,e){return new this(n).pow(e)}function coe(n){var e,t,r,i,a=0,o=new this(1),s=[];if(n===void 0?n=this.precision:Ja(n,1,ih),r=Math.ceil(n/qt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=r/4}else throw Error(GV);else for(;a<r;)s[a++]=Math.random()*1e7|0;for(r=s[--a],n%=qt,r&&n&&(i=ti(10,qt-n),s[a]=(r/i|0)*i);s[a]===0;a--)s.pop();if(a<0)t=0,s=[0];else{for(t=-1;s[0]===0;t-=qt)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<qt&&(t-=qt-r)}return o.e=t,o.d=s,o}function hoe(n){return Lt(n=new this(n),n.e+1,this.rounding)}function doe(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function foe(n){return new this(n).sin()}function poe(n){return new this(n).sinh()}function moe(n){return new this(n).sqrt()}function goe(n,e){return new this(n).sub(e)}function voe(){var n=0,e=arguments,t=new this(e[n]);for(Qt=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return Qt=!0,Lt(t,this.precision,this.rounding)}function yoe(n){return new this(n).tan()}function boe(n){return new this(n).tanh()}function xoe(n){return Lt(n=new this(n),n.e+1,1)}ot[Symbol.for("nodejs.util.inspect.custom")]=ot.toString;ot[Symbol.toStringTag]="Decimal";var Hc=ot.constructor=eW(TM);Jw=new Hc(Jw);Kw=new Hc(Kw);var woe="BigNumber",Soe=["?on","config"],Eoe=ae(woe,Soe,n=>{var{on:e,config:t}=n,r=Hc.clone({precision:t.precision,modulo:Hc.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&r.config({precision:i.precision})}),r},{isClass:!0}),tW={exports:{}};/**
* @license Complex.js v2.1.1 12/05/2020
*
* Copyright (c) 2020, Robert Eisele (robert@xarg.org)
* Dual licensed under the MIT or GPL Version 2 licenses.
**/(function(n,e){(function(t){var r=Math.cosh||function(h){return Math.abs(h)<1e-9?1-h:(Math.exp(h)+Math.exp(-h))*.5},i=Math.sinh||function(h){return Math.abs(h)<1e-9?h:(Math.exp(h)-Math.exp(-h))*.5},a=function(h){var d=Math.PI/4;if(-d>h||h>d)return Math.cos(h)-1;var f=h*h;return f*(f*(f*(f*(f*(f*(f*(f/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(h,d){var f=Math.abs(h),p=Math.abs(d);return f<3e3&&p<3e3?Math.sqrt(f*f+p*p):(f<p?(f=p,p=h/d):p=d/h,f*Math.sqrt(1+p*p))},s=function(){throw SyntaxError("Invalid Param")};function l(h,d){var f=Math.abs(h),p=Math.abs(d);return h===0?Math.log(p):d===0?Math.log(f):f<3e3&&p<3e3?Math.log(h*h+d*d)*.5:(h=h/2,d=d/2,.5*Math.log(h*h+d*d)+Math.LN2)}var u=function(h,d){var f={re:0,im:0};if(h==null)f.re=f.im=0;else if(d!==void 0)f.re=h,f.im=d;else switch(typeof h){case"object":if("im"in h&&"re"in h)f.re=h.re,f.im=h.im;else if("abs"in h&&"arg"in h){if(!Number.isFinite(h.abs)&&Number.isFinite(h.arg))return c.INFINITY;f.re=h.abs*Math.cos(h.arg),f.im=h.abs*Math.sin(h.arg)}else if("r"in h&&"phi"in h){if(!Number.isFinite(h.r)&&Number.isFinite(h.phi))return c.INFINITY;f.re=h.r*Math.cos(h.phi),f.im=h.r*Math.sin(h.phi)}else h.length===2?(f.re=h[0],f.im=h[1]):s();break;case"string":f.im=f.re=0;var p=h.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,y=0;p===null&&s();for(var g=0;g<p.length;g++){var w=p[g];w===" "||w==="	"||w===`
`||(w==="+"?v++:w==="-"?y++:w==="i"||w==="I"?(v+y===0&&s(),p[g+1]!==" "&&!isNaN(p[g+1])?(f.im+=parseFloat((y%2?"-":"")+p[g+1]),g++):f.im+=parseFloat((y%2?"-":"")+"1"),v=y=0):((v+y===0||isNaN(w))&&s(),p[g+1]==="i"||p[g+1]==="I"?(f.im+=parseFloat((y%2?"-":"")+w),g++):f.re+=parseFloat((y%2?"-":"")+w),v=y=0))}v+y>0&&s();break;case"number":f.im=0,f.re=h;break;default:s()}return isNaN(f.re)||isNaN(f.im),f};function c(h,d){if(!(this instanceof c))return new c(h,d);var f=u(h,d);this.re=f.re,this.im=f.im}c.prototype={re:0,im:0,sign:function(){var h=this.abs();return new c(this.re/h,this.im/h)},add:function(h,d){var f=new c(h,d);return this.isInfinite()&&f.isInfinite()?c.NAN:this.isInfinite()||f.isInfinite()?c.INFINITY:new c(this.re+f.re,this.im+f.im)},sub:function(h,d){var f=new c(h,d);return this.isInfinite()&&f.isInfinite()?c.NAN:this.isInfinite()||f.isInfinite()?c.INFINITY:new c(this.re-f.re,this.im-f.im)},mul:function(h,d){var f=new c(h,d);return this.isInfinite()&&f.isZero()||this.isZero()&&f.isInfinite()?c.NAN:this.isInfinite()||f.isInfinite()?c.INFINITY:f.im===0&&this.im===0?new c(this.re*f.re,0):new c(this.re*f.re-this.im*f.im,this.re*f.im+this.im*f.re)},div:function(h,d){var f=new c(h,d);if(this.isZero()&&f.isZero()||this.isInfinite()&&f.isInfinite())return c.NAN;if(this.isInfinite()||f.isZero())return c.INFINITY;if(this.isZero()||f.isInfinite())return c.ZERO;h=this.re,d=this.im;var p=f.re,v=f.im,y,g;return v===0?new c(h/p,d/p):Math.abs(p)<Math.abs(v)?(g=p/v,y=p*g+v,new c((h*g+d)/y,(d*g-h)/y)):(g=v/p,y=v*g+p,new c((h+d*g)/y,(d-h*g)/y))},pow:function(h,d){var f=new c(h,d);if(h=this.re,d=this.im,f.isZero())return c.ONE;if(f.im===0){if(d===0&&h>0)return new c(Math.pow(h,f.re),0);if(h===0)switch((f.re%4+4)%4){case 0:return new c(Math.pow(d,f.re),0);case 1:return new c(0,Math.pow(d,f.re));case 2:return new c(-Math.pow(d,f.re),0);case 3:return new c(0,-Math.pow(d,f.re))}}if(h===0&&d===0&&f.re>0&&f.im>=0)return c.ZERO;var p=Math.atan2(d,h),v=l(h,d);return h=Math.exp(f.re*v-f.im*p),d=f.im*v+f.re*p,new c(h*Math.cos(d),h*Math.sin(d))},sqrt:function(){var h=this.re,d=this.im,f=this.abs(),p,v;if(h>=0){if(d===0)return new c(Math.sqrt(h),0);p=.5*Math.sqrt(2*(f+h))}else p=Math.abs(d)/Math.sqrt(2*(f-h));return h<=0?v=.5*Math.sqrt(2*(f-h)):v=Math.abs(d)/Math.sqrt(2*(f+h)),new c(p,d<0?-v:v)},exp:function(){var h=Math.exp(this.re);return this.im,new c(h*Math.cos(this.im),h*Math.sin(this.im))},expm1:function(){var h=this.re,d=this.im;return new c(Math.expm1(h)*Math.cos(d)+a(d),Math.exp(h)*Math.sin(d))},log:function(){var h=this.re,d=this.im;return new c(l(h,d),Math.atan2(d,h))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var h=this.re,d=this.im;return new c(Math.sin(h)*r(d),Math.cos(h)*i(d))},cos:function(){var h=this.re,d=this.im;return new c(Math.cos(h)*r(d),-Math.sin(h)*i(d))},tan:function(){var h=2*this.re,d=2*this.im,f=Math.cos(h)+r(d);return new c(Math.sin(h)/f,i(d)/f)},cot:function(){var h=2*this.re,d=2*this.im,f=Math.cos(h)-r(d);return new c(-Math.sin(h)/f,i(d)/f)},sec:function(){var h=this.re,d=this.im,f=.5*r(2*d)+.5*Math.cos(2*h);return new c(Math.cos(h)*r(d)/f,Math.sin(h)*i(d)/f)},csc:function(){var h=this.re,d=this.im,f=.5*r(2*d)-.5*Math.cos(2*h);return new c(Math.sin(h)*r(d)/f,-Math.cos(h)*i(d)/f)},asin:function(){var h=this.re,d=this.im,f=new c(d*d-h*h+1,-2*h*d).sqrt(),p=new c(f.re-d,f.im+h).log();return new c(p.im,-p.re)},acos:function(){var h=this.re,d=this.im,f=new c(d*d-h*h+1,-2*h*d).sqrt(),p=new c(f.re-d,f.im+h).log();return new c(Math.PI/2-p.im,p.re)},atan:function(){var h=this.re,d=this.im;if(h===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var f=h*h+(1-d)*(1-d),p=new c((1-d*d-h*h)/f,-2*h/f).log();return new c(-.5*p.im,.5*p.re)},acot:function(){var h=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,h),0);var f=h*h+d*d;return f!==0?new c(h/f,-d/f).atan():new c(h!==0?h/0:0,d!==0?-d/0:0).atan()},asec:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new c(0,1/0);var f=h*h+d*d;return f!==0?new c(h/f,-d/f).acos():new c(h!==0?h/0:0,d!==0?-d/0:0).acos()},acsc:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new c(Math.PI/2,1/0);var f=h*h+d*d;return f!==0?new c(h/f,-d/f).asin():new c(h!==0?h/0:0,d!==0?-d/0:0).asin()},sinh:function(){var h=this.re,d=this.im;return new c(i(h)*Math.cos(d),r(h)*Math.sin(d))},cosh:function(){var h=this.re,d=this.im;return new c(r(h)*Math.cos(d),i(h)*Math.sin(d))},tanh:function(){var h=2*this.re,d=2*this.im,f=r(h)+Math.cos(d);return new c(i(h)/f,Math.sin(d)/f)},coth:function(){var h=2*this.re,d=2*this.im,f=r(h)-Math.cos(d);return new c(i(h)/f,-Math.sin(d)/f)},csch:function(){var h=this.re,d=this.im,f=Math.cos(2*d)-r(2*h);return new c(-2*i(h)*Math.cos(d)/f,2*r(h)*Math.sin(d)/f)},sech:function(){var h=this.re,d=this.im,f=Math.cos(2*d)+r(2*h);return new c(2*r(h)*Math.cos(d)/f,-2*i(h)*Math.sin(d)/f)},asinh:function(){var h=this.im;this.im=-this.re,this.re=h;var d=this.asin();return this.re=-this.im,this.im=h,h=d.re,d.re=-d.im,d.im=h,d},acosh:function(){var h=this.acos();if(h.im<=0){var d=h.re;h.re=-h.im,h.im=d}else{var d=h.im;h.im=-h.re,h.re=d}return h},atanh:function(){var h=this.re,d=this.im,f=h>1&&d===0,p=1-h,v=1+h,y=p*p+d*d,g=y!==0?new c((v*p-d*d)/y,(d*p+v*d)/y):new c(h!==-1?h/0:0,d!==0?d/0:0),w=g.re;return g.re=l(g.re,g.im)/2,g.im=Math.atan2(g.im,w)/2,f&&(g.im=-g.im),g},acoth:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new c(0,Math.PI/2);var f=h*h+d*d;return f!==0?new c(h/f,-d/f).atanh():new c(h!==0?h/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var h=this.re,d=this.im;if(d===0)return new c(h!==0?Math.log(h+Math.sqrt(h*h+1)):1/0,0);var f=h*h+d*d;return f!==0?new c(h/f,-d/f).asinh():new c(h!==0?h/0:0,d!==0?-d/0:0).asinh()},asech:function(){var h=this.re,d=this.im;if(this.isZero())return c.INFINITY;var f=h*h+d*d;return f!==0?new c(h/f,-d/f).acosh():new c(h!==0?h/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var h=this.re,d=this.im,f=h*h+d*d;return new c(h/f,-d/f)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(h){return h=Math.pow(10,h||0),new c(Math.ceil(this.re*h)/h,Math.ceil(this.im*h)/h)},floor:function(h){return h=Math.pow(10,h||0),new c(Math.floor(this.re*h)/h,Math.floor(this.im*h)/h)},round:function(h){return h=Math.pow(10,h||0),new c(Math.round(this.re*h)/h,Math.round(this.im*h)/h)},equals:function(h,d){var f=new c(h,d);return Math.abs(f.re-this.re)<=c.EPSILON&&Math.abs(f.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var h=this.re,d=this.im,f="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(h)<c.EPSILON&&(h=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?f+h:(h!==0?(f+=h,f+=" ",d<0?(d=-d,f+="-"):f+="+",f+=" "):d<0&&(d=-d,f+="-"),d!==1&&(f+=d),f+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,n.exports=c})()})(tW);var _oe=tW.exports;const Si=is(_oe);var Coe="Complex",Aoe=[],Toe=ae(Coe,Aoe,()=>(Object.defineProperty(Si,"name",{value:"Complex"}),Si.prototype.constructor=Si,Si.prototype.type="Complex",Si.prototype.isComplex=!0,Si.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Si.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Si.prototype.format=function(n){var e="",t=this.im,r=this.re,i=id(this.re,n),a=id(this.im,n),o=tn(n)?n:n?n.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(r/t)<s&&(r=0),Math.abs(t/r)<s&&(t=0)}return t===0?e=i:r===0?t===1?e="i":t===-1?e="-i":e=a+"i":t<0?t===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+a+"i",e},Si.fromPolar=function(n){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Si(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],r=arguments[1];if(tn(t)){if(ja(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),tn(r))return new Si({r:t,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Si.prototype.valueOf=Si.prototype.toString,Si.fromJSON=function(n){return new Si(n)},Si.compare=function(n,e){return n.re>e.re?1:n.re<e.re?-1:n.im>e.im?1:n.im<e.im?-1:0},Si),{isClass:!0}),nW={exports:{}};/**
* @license Fraction.js v4.3.0 20/08/2023
* https://www.xarg.org/2014/03/rational-numbers-in-javascript/
*
* Copyright (c) 2023, Robert Eisele (robert@raw.org)
* Dual licensed under the MIT or GPL Version 2 licenses.
**/(function(n,e){(function(t){var r=2e3,i={s:1,n:0,d:1};function a(g,w){if(isNaN(g=parseInt(g,10)))throw v();return g*w}function o(g,w){if(w===0)throw p();var b=Object.create(f.prototype);b.s=g<0?-1:1,g=g<0?-g:g;var m=d(g,w);return b.n=g/m,b.d=w/m,b}function s(g){for(var w={},b=g,m=2,x=4;x<=b;){for(;b%m===0;)b/=m,w[m]=(w[m]||0)+1;x+=1+2*m++}return b!==g?b>1&&(w[b]=(w[b]||0)+1):w[g]=(w[g]||0)+1,w}var l=function(g,w){var b=0,m=1,x=1,S=0,C=0,T=0,M=1,A=1,D=0,O=1,U=1,L=1,F=1e7,k;if(g!=null)if(w!==void 0){if(b=g,m=w,x=b*m,b%1!==0||m%1!==0)throw y()}else switch(typeof g){case"object":{if("d"in g&&"n"in g)b=g.n,m=g.d,"s"in g&&(b*=g.s);else if(0 in g)b=g[0],1 in g&&(m=g[1]);else throw v();x=b*m;break}case"number":{if(g<0&&(x=g,g=-g),g%1===0)b=g;else if(g>0){for(g>=1&&(A=Math.pow(10,Math.floor(1+Math.log(g)/Math.LN10)),g/=A);O<=F&&L<=F;)if(k=(D+U)/(O+L),g===k){O+L<=F?(b=D+U,m=O+L):L>O?(b=U,m=L):(b=D,m=O);break}else g>k?(D+=U,O+=L):(U+=D,L+=O),O>F?(b=U,m=L):(b=D,m=O);b*=A}else(isNaN(g)||isNaN(w))&&(m=b=NaN);break}case"string":{if(O=g.match(/\d+|./g),O===null)throw v();if(O[D]==="-"?(x=-1,D++):O[D]==="+"&&D++,O.length===D+1?C=a(O[D++],x):O[D+1]==="."||O[D]==="."?(O[D]!=="."&&(S=a(O[D++],x)),D++,(D+1===O.length||O[D+1]==="("&&O[D+3]===")"||O[D+1]==="'"&&O[D+3]==="'")&&(C=a(O[D],x),M=Math.pow(10,O[D].length),D++),(O[D]==="("&&O[D+2]===")"||O[D]==="'"&&O[D+2]==="'")&&(T=a(O[D+1],x),A=Math.pow(10,O[D+1].length)-1,D+=3)):O[D+1]==="/"||O[D+1]===":"?(C=a(O[D],x),M=a(O[D+2],1),D+=3):O[D+3]==="/"&&O[D+1]===" "&&(S=a(O[D],x),C=a(O[D+2],x),M=a(O[D+4],1),D+=5),O.length<=D){m=M*A,x=b=T+m*S+A*C;break}}default:throw v()}if(m===0)throw p();i.s=x<0?-1:1,i.n=Math.abs(b),i.d=Math.abs(m)};function u(g,w,b){for(var m=1;w>0;g=g*g%b,w>>=1)w&1&&(m=m*g%b);return m}function c(g,w){for(;w%2===0;w/=2);for(;w%5===0;w/=5);if(w===1)return 0;for(var b=10%w,m=1;b!==1;m++)if(b=b*10%w,m>r)return 0;return m}function h(g,w,b){for(var m=1,x=u(10,b,w),S=0;S<300;S++){if(m===x)return S;m=m*10%w,x=x*10%w}return 0}function d(g,w){if(!g)return w;if(!w)return g;for(;;){if(g%=w,!g)return w;if(w%=g,!w)return g}}function f(g,w){if(l(g,w),this instanceof f)g=d(i.d,i.n),this.s=i.s,this.n=i.n/g,this.d=i.d/g;else return o(i.s*i.n,i.d)}var p=function(){return new Error("Division by Zero")},v=function(){return new Error("Invalid argument")},y=function(){return new Error("Parameters must be integer")};f.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(g,w){return l(g,w),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(g,w){return l(g,w),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(g,w){return l(g,w),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(g,w){return l(g,w),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(g,w){if(isNaN(this.n)||isNaN(this.d))return new f(NaN);if(g===void 0)return o(this.s*this.n%this.d,1);if(l(g,w),i.n===0&&this.d===0)throw p();return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(g,w){return l(g,w),o(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(g,w){return l(g,w),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):o(Math.ceil(g*this.s*this.n/this.d),g)},floor:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):o(Math.floor(g*this.s*this.n/this.d),g)},round:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):o(Math.round(g*this.s*this.n/this.d),g)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(g,w){if(l(g,w),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var b=s(this.n),m=s(this.d),x=1,S=1;for(var C in b)if(C!=="1"){if(C==="0"){x=0;break}if(b[C]*=i.n,b[C]%i.d===0)b[C]/=i.d;else return null;x*=Math.pow(C,b[C])}for(var C in m)if(C!=="1"){if(m[C]*=i.n,m[C]%i.d===0)m[C]/=i.d;else return null;S*=Math.pow(C,m[C])}return i.s<0?o(S,x):o(x,S)},equals:function(g,w){return l(g,w),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(g,w){l(g,w);var b=this.s*this.n*i.d-i.s*i.n*this.d;return(0<b)-(b<0)},simplify:function(g){if(isNaN(this.n)||isNaN(this.d))return this;g=g||.001;for(var w=this.abs(),b=w.toContinued(),m=1;m<b.length;m++){for(var x=o(b[m-1],1),S=m-2;S>=0;S--)x=x.inverse().add(b[S]);if(Math.abs(x.sub(w).valueOf())<g)return x.mul(this.s)}return this},divisible:function(g,w){return l(g,w),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(g){var w,b="",m=this.n,x=this.d;return this.s<0&&(b+="-"),x===1?b+=m:(g&&(w=Math.floor(m/x))>0&&(b+=w,b+=" ",m%=x),b+=m,b+="/",b+=x),b},toLatex:function(g){var w,b="",m=this.n,x=this.d;return this.s<0&&(b+="-"),x===1?b+=m:(g&&(w=Math.floor(m/x))>0&&(b+=w,m%=x),b+="\\frac{",b+=m,b+="}{",b+=x,b+="}"),b},toContinued:function(){var g,w=this.n,b=this.d,m=[];if(isNaN(w)||isNaN(b))return m;do m.push(Math.floor(w/b)),g=w%b,w=b,b=g;while(w!==1);return m},toString:function(g){var w=this.n,b=this.d;if(isNaN(w)||isNaN(b))return"NaN";g=g||15;var m=c(w,b),x=h(w,b,m),S=this.s<0?"-":"";if(S+=w/b|0,w%=b,w*=10,w&&(S+="."),m){for(var C=x;C--;)S+=w/b|0,w%=b,w*=10;S+="(";for(var C=m;C--;)S+=w/b|0,w%=b,w*=10;S+=")"}else for(var C=g;w&&C--;)S+=w/b|0,w%=b,w*=10;return S}},Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Fraction=f,n.exports=f})()})(nW);var Moe=nW.exports;const zl=is(Moe);var Doe="Fraction",koe=[],Noe=ae(Doe,koe,()=>(Object.defineProperty(zl,"name",{value:"Fraction"}),zl.prototype.constructor=zl,zl.prototype.type="Fraction",zl.prototype.isFraction=!0,zl.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},zl.fromJSON=function(n){return new zl(n)},zl),{isClass:!0}),Ooe="Range",Poe=[],Roe=ae(Ooe,Poe,()=>{function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,a=t!=null,o=r!=null;if(i){if(Kt(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(a){if(Kt(t))t=t.toNumber();else if(typeof t!="number")throw new TypeError("Parameter end must be a number")}if(o){if(Kt(r))r=r.toNumber();else if(typeof r!="number")throw new TypeError("Parameter step must be a number")}this.start=i?parseFloat(e):0,this.end=a?parseFloat(t):0,this.step=o?parseFloat(r):1}return n.prototype.type="Range",n.prototype.isRange=!0,n.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),r=t.map(function(a){return parseFloat(a)}),i=r.some(function(a){return isNaN(a)});if(i)return null;switch(r.length){case 2:return new n(r[0],r[1]);case 3:return new n(r[0],r[2],r[1]);default:return null}},n.prototype.clone=function(){return new n(this.start,this.end,this.step)},n.prototype.size=function(){var e=0,t=this.start,r=this.step,i=this.end,a=i-t;return vc(r)===vc(a)?e=Math.ceil(a/r):a===0&&(e=0),isNaN(e)&&(e=0),[e]},n.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},n.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},n.prototype.forEach=function(e){var t=this.start,r=this.step,i=this.end,a=0;if(r>0)for(;t<i;)e(t,[a],this),t+=r,a++;else if(r<0)for(;t>i;)e(t,[a],this),t+=r,a++},n.prototype.map=function(e){var t=[];return this.forEach(function(r,i,a){t[i[0]]=e(r,i,a)}),t},n.prototype.toArray=function(){var e=[];return this.forEach(function(t,r){e[r[0]]=t}),e},n.prototype.valueOf=function(){return this.toArray()},n.prototype.format=function(e){var t=id(this.start,e);return this.step!==1&&(t+=":"+id(this.step,e)),t+=":"+id(this.end,e),t},n.prototype.toString=function(){return this.format()},n.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},n.fromJSON=function(e){return new n(e.start,e.end,e.step)},n},{isClass:!0}),Ioe="Matrix",Loe=[],Foe=ae(Ioe,Loe,()=>{function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator")}return n.prototype.type="Matrix",n.prototype.isMatrix=!0,n.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},n.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},n.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},n.prototype.subset=function(e,t,r){throw new Error("Cannot invoke subset on a Matrix interface")},n.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},n.prototype.set=function(e,t,r){throw new Error("Cannot invoke set on a Matrix interface")},n.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},n.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},n.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},n.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},n.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},n.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},n.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},n.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},n.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},n.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},n.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},n},{isClass:!0});function LC(n,e,t){var r=n.constructor,i=new r(2),a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Nt(t))throw new Error("size must be an integer");if(n.greaterThan(i.pow(t-1).sub(1))||n.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!n.isInteger())throw new Error("Value must be an integer");n.lessThan(0)&&(n=n.add(i.pow(t))),a="i".concat(t)}switch(e){case 2:return"".concat(n.toBinary()).concat(a);case 8:return"".concat(n.toOctal()).concat(a);case 16:return"".concat(n.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function Boe(n,e){if(typeof e=="function")return e(n);if(!n.isFinite())return n.isNaN()?"NaN":n.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:r,wordSize:i}=RV(e);switch(t){case"fixed":return Uoe(n,r);case"exponential":return PL(n,r);case"engineering":return zoe(n,r);case"bin":return LC(n,2,i);case"oct":return LC(n,8,i);case"hex":return LC(n,16,i);case"auto":{var a=RL(e==null?void 0:e.lowerExp,-3),o=RL(e==null?void 0:e.upperExp,5);if(n.isZero())return"0";var s,l=n.toSignificantDigits(r),u=l.e;return u>=a&&u<o?s=l.toFixed():s=PL(n,r),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],h=arguments[4];return c!=="."?c+h:h})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function zoe(n,e){var t=n.e,r=t%3===0?t:t<0?t-3-t%3:t-t%3,i=n.mul(Math.pow(10,-r)),a=i.toPrecision(e);if(a.includes("e")){var o=n.constructor;a=new o(a).toFixed()}return a+"e"+(t>=0?"+":"")+r.toString()}function PL(n,e){return e!==void 0?n.toExponential(e-1):n.toExponential()}function Uoe(n,e){return n.toFixed(e)}function RL(n,e){return tn(n)?n:Kt(n)?n.toNumber():e}function joe(n,e){var t=n.length-e.length,r=n.length;return n.substring(t,r)===e}function un(n,e){var t=Hoe(n,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function Hoe(n,e){if(typeof n=="number")return id(n,e);if(Kt(n))return Boe(n,e);if(Voe(n))return!e||e.fraction!=="decimal"?n.s*n.n+"/"+n.d:n.toString();if(Array.isArray(n))return rW(n,e);if(Ai(n))return op(n);if(typeof n=="function")return n.syntax?String(n.syntax):"function";if(n&&typeof n=="object"){if(typeof n.format=="function")return n.format(e);if(n&&n.toString(e)!=={}.toString())return n.toString(e);var t=Object.keys(n).map(r=>op(r)+": "+un(n[r],e));return"{"+t.join(", ")+"}"}return String(n)}function op(n){for(var e=String(n),t="",r=0;r<e.length;){var i=e.charAt(r);t+=i in IL?IL[i]:i,r++}return'"'+t+'"'}var IL={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Ho(n){var e=String(n);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function rW(n,e){if(Array.isArray(n)){for(var t="[",r=n.length,i=0;i<r;i++)i!==0&&(t+=", "),t+=rW(n[i],e);return t+="]",t}else return un(n,e)}function Voe(n){return n&&typeof n=="object"&&typeof n.s=="number"&&typeof n.n=="number"&&typeof n.d=="number"||!1}function NM(n,e){if(!Ai(n))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+zn(n)+", index: 0)");if(!Ai(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+zn(e)+", index: 1)");return n===e?0:n>e?1:-1}function on(n,e,t){if(!(this instanceof on))throw new SyntaxError("Constructor must be called with the new operator");this.actual=n,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(n)?"["+n.join(", ")+"]":n)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}on.prototype=new RangeError;on.prototype.constructor=RangeError;on.prototype.name="DimensionError";on.prototype.isDimensionError=!0;function as(n,e,t){if(!(this instanceof as))throw new SyntaxError("Constructor must be called with the new operator");this.index=n,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}as.prototype=new RangeError;as.prototype.constructor=RangeError;as.prototype.name="IndexError";as.prototype.isIndexError=!0;function nn(n){for(var e=[];Array.isArray(n);)e.push(n.length),n=n[0];return e}function iW(n,e,t){var r,i=n.length;if(i!==e[t])throw new on(i,e[t]);if(t<e.length-1){var a=t+1;for(r=0;r<i;r++){var o=n[r];if(!Array.isArray(o))throw new on(e.length-1,e.length,"<");iW(n[r],e,a)}}else for(r=0;r<i;r++)if(Array.isArray(n[r]))throw new on(e.length+1,e.length,">")}function LL(n,e){var t=e.length===0;if(t){if(Array.isArray(n))throw new on(n.length,0)}else iW(n,e,0)}function eS(n,e){var t=n.isMatrix?n._size:nn(n),r=e._sourceSize;r.forEach((i,a)=>{if(i!==null&&i!==t[a])throw new on(i,t[a])})}function In(n,e){if(n!==void 0){if(!tn(n)||!Nt(n))throw new TypeError("Index must be an integer (value: "+n+")");if(n<0||typeof e=="number"&&n>=e)throw new as(n,e)}}function qp(n){for(var e=0;e<n._dimensions.length;++e){var t=n._dimensions[e];if(t._data&&En(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(Ai(t)&&t.length===0)return!0}return!1}function Gp(n,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!tn(i)||!Nt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+un(e)+")")}),(tn(n)||Kt(n))&&(n=[n]);var r=t!==void 0?t:0;return OM(n,e,0,r),n}function OM(n,e,t,r){var i,a,o=n.length,s=e[t],l=Math.min(o,s);if(n.length=s,t<e.length-1){var u=t+1;for(i=0;i<l;i++)a=n[i],Array.isArray(a)||(a=[a],n[i]=a),OM(a,e,u,r);for(i=l;i<s;i++)a=[],n[i]=a,OM(a,e,u,r)}else{for(i=0;i<l;i++)for(;Array.isArray(n[i]);)n[i]=n[i][0];for(i=l;i<s;i++)n[i]=r}}function hN(n,e){var t=wn(n),r=t.length;if(!Array.isArray(n)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new on(0,r,"!=");e=dN(e,r);var i=aW(e);if(r!==i)throw new on(i,r,"!=");try{return Woe(t,e)}catch(a){throw a instanceof on?new on(i,r,"!="):a}}function dN(n,e){var t=aW(n),r=n.slice(),i=-1,a=n.indexOf(i),o=n.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,l=e%t===0;if(s)if(l)r[a]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return r}function aW(n){return n.reduce((e,t)=>e*t,1)}function Woe(n,e){for(var t=n,r,i=e.length-1;i>0;i--){var a=e[i];r=[];for(var o=t.length/a,s=0;s<o;s++)r.push(t.slice(s*a,(s+1)*a));t=r}return t}function tS(n,e){for(var t=nn(n);Array.isArray(n)&&n.length===1;)n=n[0],t.shift();for(var r=t.length;t[r-1]===1;)r--;return r<t.length&&(n=oW(n,r,0),t.length=r),n}function oW(n,e,t){var r,i;if(t<e){var a=t+1;for(r=0,i=n.length;r<i;r++)n[r]=oW(n[r],e,a)}else for(;Array.isArray(n);)n=n[0];return n}function sW(n,e,t,r){var i=r||nn(n);if(t)for(var a=0;a<t;a++)n=[n],i.unshift(1);for(n=lW(n,e,0);i.length<e;)i.push(1);return n}function lW(n,e,t){var r,i;if(Array.isArray(n)){var a=t+1;for(r=0,i=n.length;r<i;r++)n[r]=lW(n[r],e,a)}else for(var o=t;o<e;o++)n=[n];return n}function wn(n){if(!Array.isArray(n))return n;var e=[];return n.forEach(function t(r){Array.isArray(r)?r.forEach(t):e.push(r)}),e}function lu(n,e){return Array.prototype.map.call(n,e)}function FE(n,e){Array.prototype.forEach.call(n,e)}function uW(n,e){if(nn(n).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(n,e)}function nS(n,e){if(nn(n).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(n,t=>e.test(t))}function FL(n,e){return Array.prototype.join.call(n,e)}function $p(n){if(!Array.isArray(n))throw new TypeError("Array input expected");if(n.length===0)return n;var e=[],t=0;e[0]={value:n[0],identifier:0};for(var r=1;r<n.length;r++)n[r]===n[r-1]?t++:t=0,e.push({value:n[r],identifier:t});return e}function rS(n){if(!Array.isArray(n))throw new TypeError("Array input expected");if(n.length===0)return n;for(var e=[],t=0;t<n.length;t++)e.push(n[t].value);return e}function X0(n,e){for(var t,r=0,i=0;i<n.length;i++){var a=n[i],o=Array.isArray(a);if(i===0&&o&&(r=a.length),o&&a.length!==r)return;var s=o?X0(a,e):e(a);if(t===void 0)t=s;else if(t!==s)return"mixed"}return t}function cW(n,e,t,r){if(r<t){if(n.length!==e.length)throw new on(n.length,e.length);for(var i=[],a=0;a<n.length;a++)i[a]=cW(n[a],e[a],t,r+1);return i}else return n.concat(e)}function hW(){var n=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(n.length===1)return n[0];if(n.length>1)return n.slice(1).reduce(function(t,r){return cW(t,r,e,0)},n[0]);throw new Error("Wrong number of arguments in function concat")}function qoe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];for(var r=e.map(d=>d.length),i=Math.max(...r),a=new Array(i).fill(null),o=0;o<e.length;o++)for(var s=e[o],l=r[o],u=0;u<l;u++){var c=i-l+u;s[u]>a[c]&&(a[c]=s[u])}for(var h=0;h<e.length;h++)iS(e[h],a);return a}function iS(n,e){for(var t=e.length,r=n.length,i=0;i<r;i++){var a=t-r+i;if(n[i]<e[a]&&n[i]>1||n[i]>e[a])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(n,") not possible to broadcast dimension ").concat(r," with size ").concat(n[i]," to size ").concat(e[a]))}}function BL(n,e){var t=nn(n);if(bd(t,e))return n;iS(t,e);var r=qoe(t,e),i=r.length,a=[...Array(i-t.length).fill(1),...t],o=$oe(n);t.length<i&&(o=hN(o,a),t=nn(o));for(var s=0;s<i;s++)t[s]<r[s]&&(o=Goe(o,r[s],s),t=nn(o));return o}function Goe(n,e,t){return hW(...Array(e).fill(n),t)}function $oe(n){return lt([],n)}function Xoe(n){var e=0,t=1,r=Object.create(null),i=Object.create(null),a=0,o=function(s){var l=i[s];if(l&&(delete r[l],delete i[s],--e,t===l)){if(!e){a=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++t););}};return n=Math.abs(n),{hit:function(s){var l=i[s],u=++a;if(r[u]=s,i[s]=u,!l)return++e,e<=n?void 0:(s=r[t],o(s),s);if(delete r[l],t===l)for(;!Object.prototype.hasOwnProperty.call(r,++t););},delete:o,clear:function(){e=a=0,t=1,r=Object.create(null),i=Object.create(null)}}}function ty(n){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:Xoe(t||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e(i);if(r.cache.values.has(o))return r.cache.lru.hit(o),r.cache.values.get(o);var s=n.apply(n,i);return r.cache.values.set(o,s),r.cache.values.delete(r.cache.lru.hit(o)),s}}function dW(n){return Object.keys(n.signatures||{}).reduce(function(e,t){var r=(t.match(/,/g)||[]).length+1;return Math.max(e,r)},-1)}var Yoe="DenseMatrix",Zoe=["Matrix"],Joe=ae(Yoe,Zoe,n=>{var{Matrix:e}=n;function t(c,h){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!Ai(h))throw new Error("Invalid datatype: "+h);if(Ft(c))c.type==="DenseMatrix"?(this._data=Gt(c._data),this._size=Gt(c._size),this._datatype=h||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=h||c._datatype);else if(c&&En(c.data)&&En(c.size))this._data=c.data,this._size=c.size,LL(this._data,this._size),this._datatype=h||c.datatype;else if(En(c))this._data=u(c),this._size=nn(this._data),LL(this._data,this._size),this._datatype=h;else{if(c)throw new TypeError("Unsupported type of data ("+zn(c)+")");this._data=[],this._size=[0],this._datatype=h}}t.prototype=new e,t.prototype.createDenseMatrix=function(c,h){return new t(c,h)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return X0(this._data,zn)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(c,h){return new t(c,h)},t.prototype.subset=function(c,h,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return a(this,c,h,d);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(c){if(!En(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new on(c.length,this._size.length);for(var h=0;h<c.length;h++)In(c[h],this._size[h]);for(var d=this._data,f=0,p=c.length;f<p;f++){var v=c[f];In(v,d.length),d=d[v]}return d},t.prototype.set=function(c,h,d){if(!En(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new on(c.length,this._size.length,"<");var f,p,v,y=c.map(function(w){return w+1});l(this,y,d);var g=this._data;for(f=0,p=c.length-1;f<p;f++)v=c[f],In(v,g.length),g=g[v];return v=c[c.length-1],In(v,g.length),g[v]=h,this};function r(c,h){if(!Jv(h))throw new TypeError("Invalid index");var d=h.isScalar();if(d)return c.get(h.min());var f=h.size();if(f.length!==c._size.length)throw new on(f.length,c._size.length);for(var p=h.min(),v=h.max(),y=0,g=c._size.length;y<g;y++)In(p[y],c._size[y]),In(v[y],c._size[y]);return new t(i(c._data,h,f.length,0),c._datatype)}function i(c,h,d,f){var p=f===d-1,v=h.dimension(f);return p?v.map(function(y){return In(y,c.length),c[y]}).valueOf():v.map(function(y){In(y,c.length);var g=c[y];return i(g,h,d,f+1)}).valueOf()}function a(c,h,d,f){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var p=h.size(),v=h.isScalar(),y;if(Ft(d)?(y=d.size(),d=d.valueOf()):y=nn(d),v){if(y.length!==0)throw new TypeError("Scalar expected");c.set(h.min(),d,f)}else{if(!bd(y,p))try{y.length===0?d=BL([d],p):d=BL(d,p),y=nn(d)}catch{}if(p.length<c._size.length)throw new on(p.length,c._size.length,"<");if(y.length<p.length){for(var g=0,w=0;p[g]===1&&y[g]===1;)g++;for(;p[g]===1;)w++,g++;d=sW(d,p.length,w,y)}if(!bd(p,y))throw new on(p,y,">");var b=h.max().map(function(S){return S+1});l(c,b,f);var m=p.length,x=0;o(c._data,h,d,m,x)}return c}function o(c,h,d,f,p){var v=p===f-1,y=h.dimension(p);v?y.forEach(function(g,w){In(g),c[g]=d[w[0]]}):y.forEach(function(g,w){In(g),o(c[g],h,d[w[0]],f,p+1)})}t.prototype.resize=function(c,h,d){if(!_o(c))throw new TypeError("Array or Matrix expected");var f=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),p=d?this.clone():this;return s(p,f,h)};function s(c,h,d){if(h.length===0){for(var f=c._data;En(f);)f=f[0];return f}return c._size=h.slice(0),c._data=Gp(c._data,c._size,d),c}t.prototype.reshape=function(c,h){var d=h?this.clone():this;d._data=hN(d._data,c);var f=d._size.reduce((p,v)=>p*v);return d._size=dN(c,f),d};function l(c,h,d){for(var f=c._size.slice(0),p=!1;f.length<h.length;)f.push(0),p=!0;for(var v=0,y=h.length;v<y;v++)h[v]>f[v]&&(f[v]=h[v],p=!0);p&&s(c,f,d)}t.prototype.clone=function(){var c=new t({data:Gt(this._data),size:Gt(this._size),datatype:this._datatype});return c},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(c){var h=this,d=dW(c),f=function y(g,w){return En(g)?g.map(function(b,m){return y(b,w.concat(m))}):d===1?c(g):d===2?c(g,w):c(g,w,h)},p=f(this._data,[]),v=this._datatype!==void 0?X0(p,zn):void 0;return new t(p,v)},t.prototype.forEach=function(c){var h=this,d=function f(p,v){En(p)?p.forEach(function(y,g){f(y,v.concat(g))}):c(p,v,h)};d(this._data,[])},t.prototype[Symbol.iterator]=function*(){var c=function*h(d,f){if(En(d))for(var p=0;p<d.length;p++)yield*h(d[p],f.concat(p));else yield{value:d,index:f}};yield*c(this._data,[])},t.prototype.rows=function(){var c=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var f of d)c.push(new t([f],this._datatype));return c},t.prototype.columns=function(){var c=this,h=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var f=this._data,p=function(y){var g=f.map(w=>[w[y]]);h.push(new t(g,c._datatype))},v=0;v<d[1];v++)p(v);return h},t.prototype.toArray=function(){return Gt(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(c){return un(this._data,c)},t.prototype.toString=function(){return un(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(c){if(c){if(Kt(c)&&(c=c.toNumber()),!tn(c)||!Nt(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var h=c>0?c:0,d=c<0?-c:0,f=this._size[0],p=this._size[1],v=Math.min(f-d,p-h),y=[],g=0;g<v;g++)y[g]=this._data[g+d][g+h];return new t({data:y,size:[v],datatype:this._datatype})},t.diagonal=function(c,h,d,f){if(!En(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(C){if(Kt(C)&&(C=C.toNumber()),!tn(C)||!Nt(C)||C<1)throw new Error("Size values must be positive integers");return C}),d){if(Kt(d)&&(d=d.toNumber()),!tn(d)||!Nt(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var p=d>0?d:0,v=d<0?-d:0,y=c[0],g=c[1],w=Math.min(y-v,g-p),b;if(En(h)){if(h.length!==w)throw new Error("Invalid value array length");b=function(C){return h[C]}}else if(Ft(h)){var m=h.size();if(m.length!==1||m[0]!==w)throw new Error("Invalid matrix length");b=function(C){return h.get([C])}}else b=function(){return h};f||(f=Kt(b(0))?b(0).mul(0):0);var x=[];if(c.length>0){x=Gp(x,c,f);for(var S=0;S<w;S++)x[S+v][S+p]=b(S)}return new t({data:x,size:[y,g]})},t.fromJSON=function(c){return new t(c)},t.prototype.swapRows=function(c,h){if(!tn(c)||!Nt(c)||!tn(h)||!Nt(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return In(c,this._size[0]),In(h,this._size[0]),t._swapRows(c,h,this._data),this},t._swapRows=function(c,h,d){var f=d[c];d[c]=d[h],d[h]=f};function u(c){return Ft(c)?u(c.valueOf()):En(c)?c.map(u):c}return t},{isClass:!0}),zL="clone",Koe=["typed"],Qoe=ae(zL,Koe,n=>{var{typed:e}=n;return e(zL,{any:Gt})});function fW(n){var e=n.length,t=n[0].length,r,i,a=[];for(i=0;i<t;i++){var o=[];for(r=0;r<e;r++)o.push(n[r][i]);a.push(o)}return a}function vm(n){for(var e=0;e<n.length;e++)if(_o(n[e]))return!0;return!1}function bu(n,e){Ft(n)&&(n=n.valueOf());for(var t=0,r=n.length;t<r;t++){var i=n[t];Array.isArray(i)?bu(i,e):e(i)}}function cn(n,e,t){return n&&typeof n.map=="function"?n.map(function(r){return cn(r,e)}):e(n)}function BE(n,e,t){var r=Array.isArray(n)?nn(n):n.size();if(e<0||e>=r.length)throw new as(e,r.length);return Ft(n)?n.create(aS(n.valueOf(),e,t)):aS(n,e,t)}function aS(n,e,t){var r,i,a,o;if(e<=0)if(Array.isArray(n[0])){for(o=fW(n),i=[],r=0;r<o.length;r++)i[r]=aS(o[r],e-1,t);return i}else{for(a=n[0],r=1;r<n.length;r++)a=t(a,n[r]);return a}else{for(i=[],r=0;r<n.length;r++)i[r]=aS(n[r],e-1,t);return i}}function UL(n,e,t,r,i,a,o,s,l,u,c){var h=n._values,d=n._index,f=n._ptr,p,v,y,g;if(r)for(v=f[e],y=f[e+1],p=v;p<y;p++)g=d[p],t[g]!==a?(t[g]=a,o.push(g),r[g]=h[p]):(r[g]=s(r[g],h[p]),i[g]=a);else for(v=f[e],y=f[e+1],p=v;p<y;p++)g=d[p],t[g]!==a?(t[g]=a,o.push(g)):i[g]=a}var jL="isInteger",ese=["typed"],tse=ae(jL,ese,n=>{var{typed:e}=n;return e(jL,{number:Nt,BigNumber:function(t){return t.isInt()},Fraction:function(t){return t.d===1&&isFinite(t.n)},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),Ns="number",ym="number, number";function pW(n){return Math.abs(n)}pW.signature=Ns;function mW(n,e){return n+e}mW.signature=ym;function gW(n,e){return n-e}gW.signature=ym;function vW(n,e){return n*e}vW.signature=ym;function yW(n){return-n}yW.signature=Ns;function bW(n){return n}bW.signature=Ns;function Gg(n){return nae(n)}Gg.signature=Ns;function xW(n){return n*n*n}xW.signature=Ns;function wW(n){return Math.exp(n)}wW.signature=Ns;function SW(n){return rae(n)}SW.signature=Ns;function EW(n,e){if(!Nt(n)||!Nt(e))throw new Error("Parameters in function lcm must be integer numbers");if(n===0||e===0)return 0;for(var t,r=n*e;e!==0;)t=e,e=n%t,n=t;return Math.abs(r/n)}EW.signature=ym;function nse(n,e){return Math.log(n)}function _W(n){return eae(n)}_W.signature=Ns;function CW(n){return Qie(n)}CW.signature=Ns;function HL(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(n<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(n===0)return t?1/0:0;if(!isFinite(n))return t?0:n;var r=Math.pow(Math.abs(n),1/e);return r=n<0?-r:r,t?1/r:r}function PM(n){return vc(n)}PM.signature=Ns;function AW(n){return n*n}AW.signature=Ns;function TW(n,e){var t,r,i,a=0,o=1,s=1,l=0;if(!Nt(n)||!Nt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)r=Math.floor(n/e),i=n-r*e,t=a,a=o-r*a,o=t,t=s,s=l-r*s,l=t,n=e,e=i;var u;return n<0?u=[-n,-o,-l]:u=[n,n?o:0,l],u}TW.signature=ym;function MW(n,e){return n*n<1&&e===1/0||n*n>1&&e===-1/0?0:Math.pow(n,e)}MW.signature=ym;function mg(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!Nt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(IV(n,e))}var rse="number",bm="number, number";function DW(n,e){if(!Nt(n)||!Nt(e))throw new Error("Integers expected in function bitAnd");return n&e}DW.signature=bm;function kW(n){if(!Nt(n))throw new Error("Integer expected in function bitNot");return~n}kW.signature=rse;function NW(n,e){if(!Nt(n)||!Nt(e))throw new Error("Integers expected in function bitOr");return n|e}NW.signature=bm;function OW(n,e){if(!Nt(n)||!Nt(e))throw new Error("Integers expected in function bitXor");return n^e}OW.signature=bm;function PW(n,e){if(!Nt(n)||!Nt(e))throw new Error("Integers expected in function leftShift");return n<<e}PW.signature=bm;function RW(n,e){if(!Nt(n)||!Nt(e))throw new Error("Integers expected in function rightArithShift");return n>>e}RW.signature=bm;function IW(n,e){if(!Nt(n)||!Nt(e))throw new Error("Integers expected in function rightLogShift");return n>>>e}IW.signature=bm;function ru(n,e){if(e<n)return 1;if(e===n)return e;var t=e+n>>1;return ru(n,t)*ru(t+1,e)}function LW(n,e){if(!Nt(n)||n<0)throw new TypeError("Positive integer value expected in function combinations");if(!Nt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>n)throw new TypeError("k must be less than or equal to n");for(var t=n-e,r=1,i=e<t?t+1:e+1,a=2,o=e<t?e:t,s=i;s<=n;++s)for(r*=s;a<=o&&r%a===0;)r/=a,++a;return a<=o&&(r/=ru(a,o)),r}LW.signature="number, number";var ise=Math.PI,ase=2*Math.PI,ose=Math.E,sse=1.618033988749895,lse="number",fN="number, number";function FW(n){return!n}FW.signature=lse;function BW(n,e){return!!(n||e)}BW.signature=fN;function zW(n,e){return!!n!=!!e}zW.signature=fN;function UW(n,e){return!!(n&&e)}UW.signature=fN;function oS(n){var e;if(Nt(n))return n<=0?isFinite(n)?1/0:NaN:n>171?1/0:ru(1,n-1);if(n<.5)return Math.PI/(Math.sin(Math.PI*n)*oS(1-n));if(n>=171.35)return 1/0;if(n>85){var t=n*n,r=t*n,i=r*n,a=i*n;return Math.sqrt(2*Math.PI/n)*Math.pow(n/Math.E,n)*(1+1/(12*n)+1/(288*t)-139/(51840*r)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*n))}--n,e=_p[0];for(var o=1;o<_p.length;++o)e+=_p[o]/(n+o);var s=n+jW+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,n+.5)*Math.exp(-s)*e}oS.signature="number";var jW=4.7421875,_p=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],HW=.9189385332046728,use=5,cse=7,VL=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function sS(n){if(n<0)return NaN;if(n===0)return 1/0;if(!isFinite(n))return n;if(n<.5)return Math.log(Math.PI/Math.sin(Math.PI*n))-sS(1-n);n=n-1;for(var e=n+use+.5,t=VL[0],r=cse-1;r>=1;r--)t+=VL[r]/(n+r);return HW+(n+.5)*Math.log(e)-e+Math.log(t)}sS.signature="number";var ia="number";function VW(n){return lae(n)}VW.signature=ia;function WW(n){return Math.atan(1/n)}WW.signature=ia;function qW(n){return isFinite(n)?(Math.log((n+1)/n)+Math.log(n/(n-1)))/2:0}qW.signature=ia;function GW(n){return Math.asin(1/n)}GW.signature=ia;function $W(n){var e=1/n;return Math.log(e+Math.sqrt(e*e+1))}$W.signature=ia;function XW(n){return Math.acos(1/n)}XW.signature=ia;function YW(n){var e=1/n,t=Math.sqrt(e*e-1);return Math.log(t+e)}YW.signature=ia;function ZW(n){return uae(n)}ZW.signature=ia;function JW(n){return cae(n)}JW.signature=ia;function KW(n){return 1/Math.tan(n)}KW.signature=ia;function QW(n){var e=Math.exp(2*n);return(e+1)/(e-1)}QW.signature=ia;function eq(n){return 1/Math.sin(n)}eq.signature=ia;function tq(n){return n===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(n)-Math.exp(-n)))*vc(n)}tq.signature=ia;function nq(n){return 1/Math.cos(n)}nq.signature=ia;function rq(n){return 2/(Math.exp(n)+Math.exp(-n))}rq.signature=ia;function iq(n){return dae(n)}iq.signature=ia;var zE="number";function aq(n){return n<0}aq.signature=zE;function oq(n){return n>0}oq.signature=zE;function sq(n){return n===0}sq.signature=zE;function lq(n){return Number.isNaN(n)}lq.signature=zE;var WL="isNegative",hse=["typed"],dse=ae(WL,hse,n=>{var{typed:e}=n;return e(WL,{number:aq,BigNumber:function(t){return t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s<0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),qL="isNumeric",fse=["typed"],pse=ae(qL,fse,n=>{var{typed:e}=n;return e(qL,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),GL="hasNumericValue",mse=["typed","isNumeric"],gse=ae(GL,mse,n=>{var{typed:e,isNumeric:t}=n;return e(GL,{boolean:()=>!0,string:function(r){return r.trim().length>0&&!isNaN(Number(r))},any:function(r){return t(r)}})}),$L="isPositive",vse=["typed"],yse=ae($L,vse,n=>{var{typed:e}=n;return e($L,{number:oq,BigNumber:function(t){return!t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s>0&&t.n>0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),XL="isZero",bse=["typed"],xse=ae(XL,bse,n=>{var{typed:e}=n;return e(XL,{number:sq,BigNumber:function(t){return t.isZero()},Complex:function(t){return t.re===0&&t.im===0},Fraction:function(t){return t.d===1&&t.n===0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),YL="isNaN",wse=["typed"],Sse=ae(YL,wse,n=>{var{typed:e}=n;return e(YL,{number:lq,BigNumber:function(t){return t.isNaN()},Fraction:function(t){return!1},Complex:function(t){return t.isNaN()},Unit:function(t){return Number.isNaN(t.value)},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),ZL="typeOf",Ese=["typed"],_se=ae(ZL,Ese,n=>{var{typed:e}=n;return e(ZL,{any:zn})});function Qo(n,e,t){if(t==null)return n.eq(e);if(n.eq(e))return!0;if(n.isNaN()||e.isNaN())return!1;if(n.isFinite()&&e.isFinite()){var r=n.minus(e).abs();if(r.isZero())return!0;var i=n.constructor.max(n.abs(),e.abs());return r.lte(i.times(t))}return!1}function Cse(n,e,t){return Ma(n.re,e.re,t)&&Ma(n.im,e.im,t)}var xm=ae("compareUnits",["typed"],n=>{var{typed:e}=n;return{"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[r.valueType(),i.valueType()])(r.value,i.value)})}}),lS="equalScalar",Ase=["typed","config"],Tse=ae(lS,Ase,n=>{var{typed:e,config:t}=n,r=xm({typed:e});return e(lS,{"boolean, boolean":function(i,a){return i===a},"number, number":function(i,a){return Ma(i,a,t.epsilon)},"BigNumber, BigNumber":function(i,a){return i.eq(a)||Qo(i,a,t.epsilon)},"Fraction, Fraction":function(i,a){return i.equals(a)},"Complex, Complex":function(i,a){return Cse(i,a,t.epsilon)}},r)});ae(lS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(lS,{"number, number":function(r,i){return Ma(r,i,t.epsilon)}})});var Mse="SparseMatrix",Dse=["typed","equalScalar","Matrix"],kse=ae(Mse,Dse,n=>{var{typed:e,equalScalar:t,Matrix:r}=n;function i(v,y){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(y&&!Ai(y))throw new Error("Invalid datatype: "+y);if(Ft(v))a(this,v,y);else if(v&&En(v.index)&&En(v.ptr)&&En(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=y||v.datatype;else if(En(v))o(this,v,y);else{if(v)throw new TypeError("Unsupported type of data ("+zn(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=y}}function a(v,y,g){y.type==="SparseMatrix"?(v._values=y._values?Gt(y._values):void 0,v._index=Gt(y._index),v._ptr=Gt(y._ptr),v._size=Gt(y._size),v._datatype=g||y._datatype):o(v,y.valueOf(),g||y._datatype)}function o(v,y,g){v._values=[],v._index=[],v._ptr=[],v._datatype=g;var w=y.length,b=0,m=t,x=0;if(Ai(g)&&(m=e.find(t,[g,g])||t,x=e.convert(0,g)),w>0){var S=0;do{v._ptr.push(v._index.length);for(var C=0;C<w;C++){var T=y[C];if(En(T)){if(S===0&&b<T.length&&(b=T.length),S<T.length){var M=T[S];m(M,x)||(v._values.push(M),v._index.push(C))}}else S===0&&b<1&&(b=1),m(T,x)||(v._values.push(T),v._index.push(C))}S++}while(S<b)}v._ptr.push(v._index.length),v._size=[w,b]}i.prototype=new r,i.prototype.createSparseMatrix=function(v,y){return new i(v,y)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return X0(this._values,zn)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,y){return new i(v,y)},i.prototype.density=function(){var v=this._size[0],y=this._size[1];return v!==0&&y!==0?this._index.length/(v*y):0},i.prototype.subset=function(v,y,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,v);case 2:case 3:return l(this,v,y,g);default:throw new SyntaxError("Wrong number of arguments")}};function s(v,y){if(!Jv(y))throw new TypeError("Invalid index");var g=y.isScalar();if(g)return v.get(y.min());var w=y.size();if(w.length!==v._size.length)throw new on(w.length,v._size.length);var b,m,x,S,C=y.min(),T=y.max();for(b=0,m=v._size.length;b<m;b++)In(C[b],v._size[b]),In(T[b],v._size[b]);var M=v._values,A=v._index,D=v._ptr,O=y.dimension(0),U=y.dimension(1),L=[],F=[];O.forEach(function(B,X){F[B]=X[0],L[B]=!0});var k=M?[]:void 0,P=[],z=[];return U.forEach(function(B){for(z.push(P.length),x=D[B],S=D[B+1];x<S;x++)b=A[x],L[b]===!0&&(P.push(F[b]),k&&k.push(M[x]))}),z.push(P.length),new i({values:k,index:P,ptr:z,size:w,datatype:v._datatype})}function l(v,y,g,w){if(!y||y.isIndex!==!0)throw new TypeError("Invalid index");var b=y.size(),m=y.isScalar(),x;if(Ft(g)?(x=g.size(),g=g.toArray()):x=nn(g),m){if(x.length!==0)throw new TypeError("Scalar expected");v.set(y.min(),g,w)}else{if(b.length!==1&&b.length!==2)throw new on(b.length,v._size.length,"<");if(x.length<b.length){for(var S=0,C=0;b[S]===1&&x[S]===1;)S++;for(;b[S]===1;)C++,S++;g=sW(g,b.length,C,x)}if(!bd(b,x))throw new on(b,x,">");if(b.length===1){var T=y.dimension(0);T.forEach(function(D,O){In(D),v.set([D,0],g[O[0]],w)})}else{var M=y.dimension(0),A=y.dimension(1);M.forEach(function(D,O){In(D),A.forEach(function(U,L){In(U),v.set([D,U],g[O[0]][L[0]],w)})})}}return v}i.prototype.get=function(v){if(!En(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new on(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var y=v[0],g=v[1];In(y,this._size[0]),In(g,this._size[1]);var w=u(y,this._ptr[g],this._ptr[g+1],this._index);return w<this._ptr[g+1]&&this._index[w]===y?this._values[w]:0},i.prototype.set=function(v,y,g){if(!En(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new on(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var w=v[0],b=v[1],m=this._size[0],x=this._size[1],S=t,C=0;Ai(this._datatype)&&(S=e.find(t,[this._datatype,this._datatype])||t,C=e.convert(0,this._datatype)),(w>m-1||b>x-1)&&(d(this,Math.max(w+1,m),Math.max(b+1,x),g),m=this._size[0],x=this._size[1]),In(w,m),In(b,x);var T=u(w,this._ptr[b],this._ptr[b+1],this._index);return T<this._ptr[b+1]&&this._index[T]===w?S(y,C)?c(T,b,this._values,this._index,this._ptr):this._values[T]=y:S(y,C)||h(T,w,b,y,this._values,this._index,this._ptr),this};function u(v,y,g,w){if(g-y===0)return g;for(var b=y;b<g;b++)if(w[b]===v)return b;return y}function c(v,y,g,w,b){g.splice(v,1),w.splice(v,1);for(var m=y+1;m<b.length;m++)b[m]--}function h(v,y,g,w,b,m,x){b.splice(v,0,w),m.splice(v,0,y);for(var S=g+1;S<x.length;S++)x[S]++}i.prototype.resize=function(v,y,g){if(!_o(v))throw new TypeError("Array or Matrix expected");var w=v.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m);if(w.length!==2)throw new Error("Only two dimensions matrix are supported");w.forEach(function(m){if(!tn(m)||!Nt(m)||m<0)throw new TypeError("Invalid size, must contain positive integers (size: "+un(w)+")")});var b=g?this.clone():this;return d(b,w[0],w[1],y)};function d(v,y,g,w){var b=w||0,m=t,x=0;Ai(v._datatype)&&(m=e.find(t,[v._datatype,v._datatype])||t,x=e.convert(0,v._datatype),b=e.convert(b,v._datatype));var S=!m(b,x),C=v._size[0],T=v._size[1],M,A,D;if(g>T){for(A=T;A<g;A++)if(v._ptr[A]=v._values.length,S)for(M=0;M<C;M++)v._values.push(b),v._index.push(M);v._ptr[g]=v._values.length}else g<T&&(v._ptr.splice(g+1,T-g),v._values.splice(v._ptr[g],v._values.length),v._index.splice(v._ptr[g],v._index.length));if(T=g,y>C){if(S){var O=0;for(A=0;A<T;A++){v._ptr[A]=v._ptr[A]+O,D=v._ptr[A+1]+O;var U=0;for(M=C;M<y;M++,U++)v._values.splice(D+U,0,b),v._index.splice(D+U,0,M),O++}v._ptr[T]=v._values.length}}else if(y<C){var L=0;for(A=0;A<T;A++){v._ptr[A]=v._ptr[A]-L;var F=v._ptr[A],k=v._ptr[A+1]-L;for(D=F;D<k;D++)M=v._index[D],M>y-1&&(v._values.splice(D,1),v._index.splice(D,1),L++)}v._ptr[A]=v._values.length}return v._size[0]=y,v._size[1]=g,v}i.prototype.reshape=function(v,y){if(!En(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(B){if(!tn(B)||!Nt(B)||B<=-2||B===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+un(v)+")")});var g=this._size[0]*this._size[1];v=dN(v,g);var w=v[0]*v[1];if(g!==w)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=y?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return b;for(var m=[],x=0;x<b._ptr.length;x++)for(var S=0;S<b._ptr[x+1]-b._ptr[x];S++)m.push(x);for(var C=b._values.slice(),T=b._index.slice(),M=0;M<b._index.length;M++){var A=T[M],D=m[M],O=A*b._size[1]+D;m[M]=O%v[1],T[M]=Math.floor(O/v[1])}b._values.length=0,b._index.length=0,b._ptr.length=v[1]+1,b._size=v.slice();for(var U=0;U<b._ptr.length;U++)b._ptr[U]=0;for(var L=0;L<C.length;L++){var F=T[L],k=m[L],P=C[L],z=u(F,b._ptr[k],b._ptr[k+1],b._index);h(z,F,k,P,b._values,b._index,b._ptr)}return b},i.prototype.clone=function(){var v=new i({values:this._values?Gt(this._values):void 0,index:Gt(this._index),ptr:Gt(this._ptr),size:Gt(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,y){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,w=this._size[0],b=this._size[1],m=dW(v),x=function(S,C,T){return m===1?v(S):m===2?v(S,[C,T]):v(S,[C,T],g)};return f(this,0,w-1,0,b-1,x,y)};function f(v,y,g,w,b,m,x){var S=[],C=[],T=[],M=t,A=0;Ai(v._datatype)&&(M=e.find(t,[v._datatype,v._datatype])||t,A=e.convert(0,v._datatype));for(var D=function(Q,Z,re){Q=m(Q,Z,re),M(Q,A)||(S.push(Q),C.push(Z))},O=w;O<=b;O++){T.push(S.length);var U=v._ptr[O],L=v._ptr[O+1];if(x)for(var F=U;F<L;F++){var k=v._index[F];k>=y&&k<=g&&D(v._values[F],k-y,O-w)}else{for(var P={},z=U;z<L;z++){var B=v._index[z];P[B]=v._values[z]}for(var X=y;X<=g;X++){var J=X in P?P[X]:0;D(J,X-y,O-w)}}}return T.push(S.length),new i({values:S,index:C,ptr:T,size:[g-y+1,b-w+1]})}i.prototype.forEach=function(v,y){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,w=this._size[0],b=this._size[1],m=0;m<b;m++){var x=this._ptr[m],S=this._ptr[m+1];if(y)for(var C=x;C<S;C++){var T=this._index[C];v(this._values[C],[T,m],g)}else{for(var M={},A=x;A<S;A++){var D=this._index[A];M[D]=this._values[A]}for(var O=0;O<w;O++){var U=O in M?M[O]:0;v(U,[O,m],g)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],y=0;y<v;y++)for(var g=this._ptr[y],w=this._ptr[y+1],b=g;b<w;b++){var m=this._index[b];yield{value:this._values[b],index:[m,y]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(v,y,g,w,b){var m=w[0],x=w[1],S=[],C,T;for(C=0;C<m;C++)for(S[C]=[],T=0;T<x;T++)S[C][T]=0;for(T=0;T<x;T++)for(var M=g[T],A=g[T+1],D=M;D<A;D++)C=y[D],S[C][T]=v?b?Gt(v[D]):v[D]:1;return S}return i.prototype.format=function(v){for(var y=this._size[0],g=this._size[1],w=this.density(),b="Sparse Matrix ["+un(y,v)+" x "+un(g,v)+"] density: "+un(w,v)+`
`,m=0;m<g;m++)for(var x=this._ptr[m],S=this._ptr[m+1],C=x;C<S;C++){var T=this._index[C];b+=`
    (`+un(T,v)+", "+un(m,v)+") ==> "+(this._values?un(this._values[C],v):"X")}return b},i.prototype.toString=function(){return un(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Kt(v)&&(v=v.toNumber()),!tn(v)||!Nt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var y=v>0?v:0,g=v<0?-v:0,w=this._size[0],b=this._size[1],m=Math.min(w-g,b-y),x=[],S=[],C=[];C[0]=0;for(var T=y;T<b&&x.length<m;T++)for(var M=this._ptr[T],A=this._ptr[T+1],D=M;D<A;D++){var O=this._index[D];if(O===T-y+g){x.push(this._values[D]),S[x.length-1]=O-g;break}}return C.push(x.length),new i({values:x,index:S,ptr:C,size:[m,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,y,g,w,b){if(!En(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(B){if(Kt(B)&&(B=B.toNumber()),!tn(B)||!Nt(B)||B<1)throw new Error("Size values must be positive integers");return B}),g){if(Kt(g)&&(g=g.toNumber()),!tn(g)||!Nt(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var m=t,x=0;Ai(b)&&(m=e.find(t,[b,b])||t,x=e.convert(0,b));var S=g>0?g:0,C=g<0?-g:0,T=v[0],M=v[1],A=Math.min(T-C,M-S),D;if(En(y)){if(y.length!==A)throw new Error("Invalid value array length");D=function(B){return y[B]}}else if(Ft(y)){var O=y.size();if(O.length!==1||O[0]!==A)throw new Error("Invalid matrix length");D=function(B){return y.get([B])}}else D=function(){return y};for(var U=[],L=[],F=[],k=0;k<M;k++){F.push(U.length);var P=k-S;if(P>=0&&P<A){var z=D(P);m(z,x)||(L.push(P+C),U.push(z))}}return F.push(U.length),new i({values:U,index:L,ptr:F,size:[T,M]})},i.prototype.swapRows=function(v,y){if(!tn(v)||!Nt(v)||!tn(y)||!Nt(y))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return In(v,this._size[0]),In(y,this._size[0]),i._swapRows(v,y,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,y,g,w,b){for(var m=w[v],x=w[v+1],S=m;S<x;S++)b(g[S],y[S])},i._swapRows=function(v,y,g,w,b,m){for(var x=0;x<g;x++){var S=m[x],C=m[x+1],T=u(v,S,C,b),M=u(y,S,C,b);if(T<C&&M<C&&b[T]===v&&b[M]===y){if(w){var A=w[T];w[T]=w[M],w[M]=A}continue}if(T<C&&b[T]===v&&(M>=C||b[M]!==y)){var D=w?w[T]:void 0;b.splice(M,0,y),w&&w.splice(M,0,D),b.splice(M<=T?T+1:T,1),w&&w.splice(M<=T?T+1:T,1);continue}if(M<C&&b[M]===y&&(T>=C||b[T]!==v)){var O=w?w[M]:void 0;b.splice(T,0,v),w&&w.splice(T,0,O),b.splice(T<=M?M+1:M,1),w&&w.splice(T<=M?M+1:M,1)}}},i},{isClass:!0}),Nse="number",Ose=["typed"];function Pse(n){var e=n.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],i=e[3];return{input:n,radix:t,integerPart:r,fractionalPart:i}}else return null}function Rse(n){for(var e=parseInt(n.integerPart,n.radix),t=0,r=0;r<n.fractionalPart.length;r++){var i=parseInt(n.fractionalPart[r],n.radix);t+=i/Math.pow(n.radix,r+1)}var a=e+t;if(isNaN(a))throw new SyntaxError('String "'+n.input+'" is not a valid number');return a}var Ise=ae(Nse,Ose,n=>{var{typed:e}=n,t=e("number",{"":function(){return 0},number:function(r){return r},string:function(r){if(r==="NaN")return NaN;var i=Pse(r);if(i)return Rse(i);var a=0,o=r.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(a=Number(o[2]),r=o[1]);var s=Number(r);if(isNaN(s))throw new SyntaxError('String "'+r+'" is not a valid number');if(o){if(s>2**a-1)throw new SyntaxError('String "'.concat(r,'" is out of range'));s>=2**(a-1)&&(s=s-2**a)}return s},BigNumber:function(r){return r.toNumber()},Fraction:function(r){return r.valueOf()},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),null:function(r){return 0},"Unit, string | Unit":function(r,i){return r.toNumber(i)},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))});return t.fromJSON=function(r){return parseFloat(r.value)},t}),JL="string",Lse=["typed"],Fse=ae(JL,Lse,n=>{var{typed:e}=n;return e(JL,{"":function(){return""},number:id,null:function(t){return"null"},boolean:function(t){return t+""},string:function(t){return t},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t)),any:function(t){return String(t)}})}),KL="boolean",Bse=["typed"],zse=ae(KL,Bse,n=>{var{typed:e}=n;return e(KL,{"":function(){return!1},boolean:function(t){return t},number:function(t){return!!t},null:function(t){return!1},BigNumber:function(t){return!t.isZero()},string:function(t){var r=t.toLowerCase();if(r==="true")return!0;if(r==="false")return!1;var i=Number(t);if(t!==""&&!isNaN(i))return!!i;throw new Error('Cannot convert "'+t+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),Use="bignumber",jse=["typed","BigNumber"],Hse=ae(Use,jse,n=>{var{typed:e,BigNumber:t}=n;return e("bignumber",{"":function(){return new t(0)},number:function(r){return new t(r+"")},string:function(r){var i=r.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(i){var a=i[2],o=t(i[1]),s=new t(2).pow(Number(a));if(o.gt(s.sub(1)))throw new SyntaxError('String "'.concat(r,'" is out of range'));var l=new t(2).pow(Number(a)-1);return o.gte(l)?o.sub(s):o}return new t(r)},BigNumber:function(r){return r},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),Fraction:function(r){return new t(r.n).div(r.d).times(r.s)},null:function(r){return new t(0)},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),Vse="complex",Wse=["typed","Complex"],qse=ae(Vse,Wse,n=>{var{typed:e,Complex:t}=n;return e("complex",{"":function(){return t.ZERO},number:function(r){return new t(r,0)},"number, number":function(r,i){return new t(r,i)},"BigNumber, BigNumber":function(r,i){return new t(r.toNumber(),i.toNumber())},Fraction:function(r){return new t(r.valueOf(),0)},Complex:function(r){return r.clone()},string:function(r){return t(r)},null:function(r){return t(0)},Object:function(r){if("re"in r&&"im"in r)return new t(r.re,r.im);if("r"in r&&"phi"in r||"abs"in r&&"arg"in r)return new t(r);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),Gse="fraction",$se=["typed","Fraction"],Xse=ae(Gse,$se,n=>{var{typed:e,Fraction:t}=n;return e("fraction",{number:function(r){if(!isFinite(r)||isNaN(r))throw new Error(r+" cannot be represented as a fraction");return new t(r)},string:function(r){return new t(r)},"number, number":function(r,i){return new t(r,i)},null:function(r){return new t(0)},BigNumber:function(r){return new t(r.toString())},Fraction:function(r){return r},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),Object:function(r){return new t(r)},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),QL="matrix",Yse=["typed","Matrix","DenseMatrix","SparseMatrix"],Zse=ae(QL,Yse,n=>{var{typed:e,Matrix:t,DenseMatrix:r,SparseMatrix:i}=n;return e(QL,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,s){return a([],o,s)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,l){if(s==="dense"||s==="default"||s===void 0)return new r(o,l);if(s==="sparse")return new i(o,l);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),e4="matrixFromFunction",Jse=["typed","matrix","isZero"],Kse=ae(e4,Jse,n=>{var{typed:e,matrix:t,isZero:r}=n;return e(e4,{"Array | Matrix, function, string, string":function(a,o,s,l){return i(a,o,s,l)},"Array | Matrix, function, string":function(a,o,s){return i(a,o,s)},"Matrix, function":function(a,o){return i(a,o,"dense")},"Array, function":function(a,o){return i(a,o,"dense").toArray()},"Array | Matrix, string, function":function(a,o,s){return i(a,s,o)},"Array | Matrix, string, string, function":function(a,o,s,l){return i(a,l,o,s)}});function i(a,o,s,l){var u;return l!==void 0?u=t(s,l):u=t(s),u.resize(a),u.forEach(function(c,h){var d=o(h);r(d)||u.set(h,d)}),u}}),t4="matrixFromRows",Qse=["typed","matrix","flatten","size"],ele=ae(t4,Qse,n=>{var{typed:e,matrix:t,flatten:r,size:i}=n;return e(t4,{"...Array":function(s){return a(s)},"...Matrix":function(s){return t(a(s.map(l=>l.toArray())))}});function a(s){if(s.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=o(s[0]),u=[];for(var c of s){var h=o(c);if(h!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(h|0));u.push(r(c))}return u}function o(s){var l=i(s);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),n4="matrixFromColumns",tle=["typed","matrix","flatten","size"],nle=ae(n4,tle,n=>{var{typed:e,matrix:t,flatten:r,size:i}=n;return e(n4,{"...Array":function(s){return a(s)},"...Matrix":function(s){return t(a(s.map(l=>l.toArray())))}});function a(s){if(s.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=o(s[0]),u=[],c=0;c<l;c++)u[c]=[];for(var h of s){var d=o(h);if(d!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(d|0));for(var f=r(h),p=0;p<l;p++)u[p].push(f[p])}return u}function o(s){var l=i(s);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),r4="splitUnit",rle=["typed"],ile=ae(r4,rle,n=>{var{typed:e}=n;return e(r4,{"Unit, Array":function(t,r){return t.splitUnit(r)}})}),i4="unaryMinus",ale=["typed"],ole=ae(i4,ale,n=>{var{typed:e}=n;return e(i4,{number:yW,"Complex | BigNumber | Fraction":t=>t.neg(),Unit:e.referToSelf(t=>r=>{var i=r.clone();return i.value=e.find(t,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),a4="unaryPlus",sle=["typed","config","BigNumber"],lle=ae(a4,sle,n=>{var{typed:e,config:t,BigNumber:r}=n;return e(a4,{number:bW,Complex:function(i){return i},BigNumber:function(i){return i},Fraction:function(i){return i},Unit:function(i){return i.clone()},"Array | Matrix":e.referToSelf(i=>a=>cn(a,i)),"boolean | string":function(i){return t.number==="BigNumber"?new r(+i):+i}})}),o4="abs",ule=["typed"],cle=ae(o4,ule,n=>{var{typed:e}=n;return e(o4,{number:pW,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),s4="apply",hle=["typed","isInteger"],pN=ae(s4,hle,n=>{var{typed:e,isInteger:t}=n;return e(s4,{"Array | Matrix, number | BigNumber, function":function(r,i,a){if(!t(i))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(r)?nn(r):r.size();if(i<0||i>=o.length)throw new as(i,o.length);return Ft(r)?r.create(uS(r.valueOf(),i,a)):uS(r,i,a)}})});function uS(n,e,t){var r,i,a;if(e<=0)if(Array.isArray(n[0])){for(a=dle(n),i=[],r=0;r<a.length;r++)i[r]=uS(a[r],e-1,t);return i}else return t(n);else{for(i=[],r=0;r<n.length;r++)i[r]=uS(n[r],e-1,t);return i}}function dle(n){var e=n.length,t=n[0].length,r,i,a=[];for(i=0;i<t;i++){var o=[];for(r=0;r<e;r++)o.push(n[r][i]);a.push(o)}return a}var l4="addScalar",fle=["typed"],ple=ae(l4,fle,n=>{var{typed:e}=n;return e(l4,{"number, number":mW,"Complex, Complex":function(t,r){return t.add(r)},"BigNumber, BigNumber":function(t,r){return t.plus(r)},"Fraction, Fraction":function(t,r){return t.add(r)},"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var a=r.clone();return a.value=e.find(t,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),u4="subtractScalar",mle=["typed"],gle=ae(u4,mle,n=>{var{typed:e}=n;return e(u4,{"number, number":gW,"Complex, Complex":function(t,r){return t.sub(r)},"BigNumber, BigNumber":function(t,r){return t.minus(r)},"Fraction, Fraction":function(t,r){return t.sub(r)},"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var a=r.clone();return a.value=e.find(t,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),c4="cbrt",vle=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],yle=ae(c4,vle,n=>{var{config:e,typed:t,isNegative:r,unaryMinus:i,matrix:a,Complex:o,BigNumber:s,Fraction:l}=n;return t(c4,{number:Gg,Complex:u,"Complex, boolean":u,BigNumber:function(h){return h.cbrt()},Unit:c});function u(h,d){var f=h.arg()/3,p=h.abs(),v=new o(Gg(p),0).mul(new o(0,f).exp());if(d){var y=[v,new o(Gg(p),0).mul(new o(0,f+Math.PI*2/3).exp()),new o(Gg(p),0).mul(new o(0,f-Math.PI*2/3).exp())];return e.matrix==="Array"?y:a(y)}else return v}function c(h){if(h.value&&_s(h.value)){var d=h.clone();return d.value=1,d=d.pow(1/3),d.value=u(h.value),d}else{var f=r(h.value);f&&(h.value=i(h.value));var p;Kt(h.value)?p=new s(1).div(3):Id(h.value)?p=new l(1,3):p=1/3;var v=h.pow(p);return f&&(v.value=i(v.value)),v}}}),ble="matAlgo11xS0s",xle=["typed","equalScalar"],Ii=ae(ble,xle,n=>{var{typed:e,equalScalar:t}=n;return function(r,i,a,o){var s=r._values,l=r._index,u=r._ptr,c=r._size,h=r._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=c[0],f=c[1],p,v=t,y=0,g=a;typeof h=="string"&&(p=h,v=e.find(t,[p,p]),y=e.convert(0,p),i=e.convert(i,p),g=e.find(a,[p,p]));for(var w=[],b=[],m=[],x=0;x<f;x++){m[x]=b.length;for(var S=u[x],C=u[x+1],T=S;T<C;T++){var M=l[T],A=o?g(i,s[T]):g(s[T],i);v(A,y)||(b.push(M),w.push(A))}}return m[f]=b.length,r.createSparseMatrix({values:w,index:b,ptr:m,size:[d,f],datatype:p})}}),wle="matAlgo12xSfs",Sle=["typed","DenseMatrix"],ui=ae(wle,Sle,n=>{var{typed:e,DenseMatrix:t}=n;return function(r,i,a,o){var s=r._values,l=r._index,u=r._ptr,c=r._size,h=r._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=c[0],f=c[1],p,v=a;typeof h=="string"&&(p=h,i=e.convert(i,p),v=e.find(a,[p,p]));for(var y=[],g=[],w=[],b=0;b<f;b++){for(var m=b+1,x=u[b],S=u[b+1],C=x;C<S;C++){var T=l[C];g[T]=s[C],w[T]=m}for(var M=0;M<d;M++)b===0&&(y[M]=[]),w[M]===m?y[M][b]=o?v(i,g[M]):v(g[M],i):y[M][b]=o?v(i,0):v(0,i)}return new t({data:y,size:[d,f],datatype:p})}}),Ele="matAlgo14xDs",_le=["typed"],Os=ae(Ele,_le,n=>{var{typed:e}=n;return function(r,i,a,o){var s=r._data,l=r._size,u=r._datatype,c,h=a;typeof u=="string"&&(c=u,i=e.convert(i,c),h=e.find(a,[c,c]));var d=l.length>0?t(h,0,l,l[0],s,i,o):[];return r.createDenseMatrix({data:d,size:Gt(l),datatype:c})};function t(r,i,a,o,s,l,u){var c=[];if(i===a.length-1)for(var h=0;h<o;h++)c[h]=u?r(l,s[h]):r(s[h],l);else for(var d=0;d<o;d++)c[d]=t(r,i+1,a,a[i+1],s[d],l,u);return c}}),RM="ceil",Cle=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Ale=ae(RM,["typed","config","round"],n=>{var{typed:e,config:t,round:r}=n;return e(RM,{number:function(i){return Ma(i,r(i),t.epsilon)?r(i):Math.ceil(i)},"number, number":function(i,a){if(Ma(i,r(i,a),t.epsilon))return r(i,a);var[o,s]="".concat(i,"e").split("e"),l=Math.ceil(Number("".concat(o,"e").concat(Number(s)+a)));return[o,s]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(s)-a))}})}),Tle=ae(RM,Cle,n=>{var{typed:e,config:t,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=n,l=Ii({typed:e,equalScalar:a}),u=ui({typed:e,DenseMatrix:s}),c=Os({typed:e}),h=Ale({typed:e,config:t,round:r});return e("ceil",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(d){return d.ceil()},"Complex, number":function(d,f){return d.ceil(f)},"Complex, BigNumber":function(d,f){return d.ceil(f.toNumber())},BigNumber:function(d){return Qo(d,r(d),t.epsilon)?r(d):d.ceil()},"BigNumber, BigNumber":function(d,f){return Qo(d,r(d,f),t.epsilon)?r(d,f):d.toDecimalPlaces(f.toNumber(),Hc.ROUND_CEIL)},Fraction:function(d){return d.ceil()},"Fraction, number":function(d,f){return d.ceil(f)},"Fraction, BigNumber":function(d,f){return d.ceil(f.toNumber())},"Array | Matrix":e.referToSelf(d=>f=>cn(f,d)),"Array, number | BigNumber":e.referToSelf(d=>(f,p)=>cn(f,v=>d(v,p))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>l(f,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>c(f,p,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(f,p)=>c(i(p),f,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(f,p)=>a(f,0)?o(p.size(),p.storage()):p.storage()==="dense"?c(p,f,d,!0):u(p,f,d,!0))})}),h4="cube",Mle=["typed"],Dle=ae(h4,Mle,n=>{var{typed:e}=n;return e(h4,{number:xW,Complex:function(t){return t.mul(t).mul(t)},BigNumber:function(t){return t.times(t).times(t)},Fraction:function(t){return t.pow(3)},Unit:function(t){return t.pow(3)}})}),d4="exp",kle=["typed"],Nle=ae(d4,kle,n=>{var{typed:e}=n;return e(d4,{number:wW,Complex:function(t){return t.exp()},BigNumber:function(t){return t.exp()}})}),f4="expm1",Ole=["typed","Complex"],Ple=ae(f4,Ole,n=>{var{typed:e,Complex:t}=n;return e(f4,{number:SW,Complex:function(r){var i=Math.exp(r.re);return new t(i*Math.cos(r.im)-1,i*Math.sin(r.im))},BigNumber:function(r){return r.exp().minus(1)}})}),IM="fix",Rle=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],Ile=ae(IM,["typed","ceil","floor"],n=>{var{typed:e,ceil:t,floor:r}=n;return e(IM,{number:function(i){return i>0?r(i):t(i)},"number, number":function(i,a){return i>0?r(i,a):t(i,a)}})}),Lle=ae(IM,Rle,n=>{var{typed:e,Complex:t,matrix:r,ceil:i,floor:a,equalScalar:o,zeros:s,DenseMatrix:l}=n,u=ui({typed:e,DenseMatrix:l}),c=Os({typed:e}),h=Ile({typed:e,ceil:i,floor:a});return e("fix",{number:h.signatures.number,"number, number | BigNumber":h.signatures["number,number"],Complex:function(d){return new t(d.re>0?Math.floor(d.re):Math.ceil(d.re),d.im>0?Math.floor(d.im):Math.ceil(d.im))},"Complex, number":function(d,f){return new t(d.re>0?a(d.re,f):i(d.re,f),d.im>0?a(d.im,f):i(d.im,f))},"Complex, BigNumber":function(d,f){var p=f.toNumber();return new t(d.re>0?a(d.re,p):i(d.re,p),d.im>0?a(d.im,p):i(d.im,p))},BigNumber:function(d){return d.isNegative()?i(d):a(d)},"BigNumber, number | BigNumber":function(d,f){return d.isNegative()?i(d,f):a(d,f)},Fraction:function(d){return d.s<0?d.ceil():d.floor()},"Fraction, number | BigNumber":function(d,f){return d.s<0?i(d,f):a(d,f)},"Array | Matrix":e.referToSelf(d=>f=>cn(f,d)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(f,p)=>cn(f,v=>d(v,p))),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(f,p)=>c(r(p),f,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(f,p)=>o(f,0)?s(p.size(),p.storage()):p.storage()==="dense"?c(p,f,d,!0):u(p,f,d,!0))})}),LM="floor",Fle=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Ble=ae(LM,["typed","config","round"],n=>{var{typed:e,config:t,round:r}=n;return e(LM,{number:function(i){return Ma(i,r(i),t.epsilon)?r(i):Math.floor(i)},"number, number":function(i,a){if(Ma(i,r(i,a),t.epsilon))return r(i,a);var[o,s]="".concat(i,"e").split("e"),l=Math.floor(Number("".concat(o,"e").concat(Number(s)+a)));return[o,s]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(s)-a))}})}),uq=ae(LM,Fle,n=>{var{typed:e,config:t,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=n,l=Ii({typed:e,equalScalar:a}),u=ui({typed:e,DenseMatrix:s}),c=Os({typed:e}),h=Ble({typed:e,config:t,round:r});return e("floor",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(d){return d.floor()},"Complex, number":function(d,f){return d.floor(f)},"Complex, BigNumber":function(d,f){return d.floor(f.toNumber())},BigNumber:function(d){return Qo(d,r(d),t.epsilon)?r(d):d.floor()},"BigNumber, BigNumber":function(d,f){return Qo(d,r(d,f),t.epsilon)?r(d,f):d.toDecimalPlaces(f.toNumber(),Hc.ROUND_FLOOR)},Fraction:function(d){return d.floor()},"Fraction, number":function(d,f){return d.floor(f)},"Fraction, BigNumber":function(d,f){return d.floor(f.toNumber())},"Array | Matrix":e.referToSelf(d=>f=>cn(f,d)),"Array, number | BigNumber":e.referToSelf(d=>(f,p)=>cn(f,v=>d(v,p))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>l(f,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>c(f,p,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(f,p)=>c(i(p),f,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(f,p)=>a(f,0)?o(p.size(),p.storage()):p.storage()==="dense"?c(p,f,d,!0):u(p,f,d,!0))})}),zle="matAlgo02xDS0",Ule=["typed","equalScalar"],Ps=ae(zle,Ule,n=>{var{typed:e,equalScalar:t}=n;return function(r,i,a,o){var s=r._data,l=r._size,u=r._datatype||r.getDataType(),c=i._values,h=i._index,d=i._ptr,f=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==f.length)throw new on(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],y=l[1],g,w=t,b=0,m=a;typeof u=="string"&&u===p&&u!=="mixed"&&(g=u,w=e.find(t,[g,g]),b=e.convert(0,g),m=e.find(a,[g,g]));for(var x=[],S=[],C=[],T=0;T<y;T++){C[T]=S.length;for(var M=d[T],A=d[T+1],D=M;D<A;D++){var O=h[D],U=o?m(c[D],s[O][T]):m(s[O][T],c[D]);w(U,b)||(S.push(O),x.push(U))}}return C[y]=S.length,i.createSparseMatrix({values:x,index:S,ptr:C,size:[v,y],datatype:u===r._datatype&&p===i._datatype?g:void 0})}}),jle="matAlgo03xDSf",Hle=["typed"],Oa=ae(jle,Hle,n=>{var{typed:e}=n;return function(t,r,i,a){var o=t._data,s=t._size,l=t._datatype||t.getDataType(),u=r._values,c=r._index,h=r._ptr,d=r._size,f=r._datatype||r._data===void 0?r._datatype:r.getDataType();if(s.length!==d.length)throw new on(s.length,d.length);if(s[0]!==d[0]||s[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+d+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=s[0],v=s[1],y,g=0,w=i;typeof l=="string"&&l===f&&l!=="mixed"&&(y=l,g=e.convert(0,y),w=e.find(i,[y,y]));for(var b=[],m=0;m<p;m++)b[m]=[];for(var x=[],S=[],C=0;C<v;C++){for(var T=C+1,M=h[C],A=h[C+1],D=M;D<A;D++){var O=c[D];x[O]=a?w(u[D],o[O][C]):w(o[O][C],u[D]),S[O]=T}for(var U=0;U<p;U++)S[U]===T?b[U][C]=x[U]:b[U][C]=a?w(g,o[U][C]):w(o[U][C],g)}return t.createDenseMatrix({data:b,size:[p,v],datatype:l===t._datatype&&f===r._datatype?y:void 0})}}),Vle="matAlgo05xSfSf",Wle=["typed","equalScalar"],UE=ae(Vle,Wle,n=>{var{typed:e,equalScalar:t}=n;return function(r,i,a){var o=r._values,s=r._index,l=r._ptr,u=r._size,c=r._datatype||r._data===void 0?r._datatype:r.getDataType(),h=i._values,d=i._index,f=i._ptr,p=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==p.length)throw new on(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");var y=u[0],g=u[1],w,b=t,m=0,x=a;typeof c=="string"&&c===v&&c!=="mixed"&&(w=c,b=e.find(t,[w,w]),m=e.convert(0,w),x=e.find(a,[w,w]));var S=o&&h?[]:void 0,C=[],T=[],M=S?[]:void 0,A=S?[]:void 0,D=[],O=[],U,L,F,k;for(L=0;L<g;L++){T[L]=C.length;var P=L+1;for(F=l[L],k=l[L+1];F<k;F++)U=s[F],C.push(U),D[U]=P,M&&(M[U]=o[F]);for(F=f[L],k=f[L+1];F<k;F++)U=d[F],D[U]!==P&&C.push(U),O[U]=P,A&&(A[U]=h[F]);if(S)for(F=T[L];F<C.length;){U=C[F];var z=D[U],B=O[U];if(z===P||B===P){var X=z===P?M[U]:m,J=B===P?A[U]:m,Q=x(X,J);b(Q,m)?C.splice(F,1):(S.push(Q),F++)}}}return T[g]=C.length,r.createSparseMatrix({values:S,index:C,ptr:T,size:[y,g],datatype:c===r._datatype&&v===i._datatype?w:void 0})}}),qle="matAlgo13xDD",Gle=["typed"],$le=ae(qle,Gle,n=>{var{typed:e}=n;return function(r,i,a){var o=r._data,s=r._size,l=r._datatype,u=i._data,c=i._size,h=i._datatype,d=[];if(s.length!==c.length)throw new on(s.length,c.length);for(var f=0;f<s.length;f++){if(s[f]!==c[f])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");d[f]=s[f]}var p,v=a;typeof l=="string"&&l===h&&(p=l,v=e.find(a,[p,p]));var y=d.length>0?t(v,0,d,d[0],o,u):[];return r.createDenseMatrix({data:y,size:d,datatype:p})};function t(r,i,a,o,s,l){var u=[];if(i===a.length-1)for(var c=0;c<o;c++)u[c]=r(s[c],l[c]);else for(var h=0;h<o;h++)u[h]=t(r,i+1,a,a[i+1],s[h],l[h]);return u}}),Xle="broadcast",Yle=["concat"],Zle=ae(Xle,Yle,n=>{var{concat:e}=n;return function(i,a){var o=Math.max(i._size.length,a._size.length);if(i._size.length===a._size.length&&i._size.every((p,v)=>p===a._size[v]))return[i,a];for(var s=t(i._size,o,0),l=t(a._size,o,0),u=[],c=0;c<o;c++)u[c]=Math.max(s[c],l[c]);iS(s,u),iS(l,u);var h=i.clone(),d=a.clone();h._size.length<o?h.reshape(t(h._size,o,1)):d._size.length<o&&d.reshape(t(d._size,o,1));for(var f=0;f<o;f++)h._size[f]<u[f]&&(h=r(h,u[f],f)),d._size[f]<u[f]&&(d=r(d,u[f],f));return[h,d]};function t(i,a,o){return[...Array(a-i.length).fill(o),...i]}function r(i,a,o){return e(...Array(a).fill(i),o)}}),Jle="matrixAlgorithmSuite",Kle=["typed","matrix","concat"],$n=ae(Jle,Kle,n=>{var{typed:e,matrix:t,concat:r}=n,i=$le({typed:e}),a=Os({typed:e}),o=Zle({concat:r});return function(s){var l=s.elop,u=s.SD||s.DS,c;l?(c={"DenseMatrix, DenseMatrix":(p,v)=>i(...o(p,v),l),"Array, Array":(p,v)=>i(...o(t(p),t(v)),l).valueOf(),"Array, DenseMatrix":(p,v)=>i(...o(t(p),v),l),"DenseMatrix, Array":(p,v)=>i(...o(p,t(v)),l)},s.SS&&(c["SparseMatrix, SparseMatrix"]=(p,v)=>s.SS(...o(p,v),l,!1)),s.DS&&(c["DenseMatrix, SparseMatrix"]=(p,v)=>s.DS(...o(p,v),l,!1),c["Array, SparseMatrix"]=(p,v)=>s.DS(...o(t(p),v),l,!1)),u&&(c["SparseMatrix, DenseMatrix"]=(p,v)=>u(...o(v,p),l,!0),c["SparseMatrix, Array"]=(p,v)=>u(...o(t(v),p),l,!0))):(c={"DenseMatrix, DenseMatrix":e.referToSelf(p=>(v,y)=>i(...o(v,y),p)),"Array, Array":e.referToSelf(p=>(v,y)=>i(...o(t(v),t(y)),p).valueOf()),"Array, DenseMatrix":e.referToSelf(p=>(v,y)=>i(...o(t(v),y),p)),"DenseMatrix, Array":e.referToSelf(p=>(v,y)=>i(...o(v,t(y)),p))},s.SS&&(c["SparseMatrix, SparseMatrix"]=e.referToSelf(p=>(v,y)=>s.SS(...o(v,y),p,!1))),s.DS&&(c["DenseMatrix, SparseMatrix"]=e.referToSelf(p=>(v,y)=>s.DS(...o(v,y),p,!1)),c["Array, SparseMatrix"]=e.referToSelf(p=>(v,y)=>s.DS(...o(t(v),y),p,!1))),u&&(c["SparseMatrix, DenseMatrix"]=e.referToSelf(p=>(v,y)=>u(...o(y,v),p,!0)),c["SparseMatrix, Array"]=e.referToSelf(p=>(v,y)=>u(...o(t(y),v),p,!0))));var h=s.scalar||"any",d=s.Ds||s.Ss;d&&(l?(c["DenseMatrix,"+h]=(p,v)=>a(p,v,l,!1),c[h+", DenseMatrix"]=(p,v)=>a(v,p,l,!0),c["Array,"+h]=(p,v)=>a(t(p),v,l,!1).valueOf(),c[h+", Array"]=(p,v)=>a(t(v),p,l,!0).valueOf()):(c["DenseMatrix,"+h]=e.referToSelf(p=>(v,y)=>a(v,y,p,!1)),c[h+", DenseMatrix"]=e.referToSelf(p=>(v,y)=>a(y,v,p,!0)),c["Array,"+h]=e.referToSelf(p=>(v,y)=>a(t(v),y,p,!1).valueOf()),c[h+", Array"]=e.referToSelf(p=>(v,y)=>a(t(y),v,p,!0).valueOf())));var f=s.sS!==void 0?s.sS:s.Ss;return l?(s.Ss&&(c["SparseMatrix,"+h]=(p,v)=>s.Ss(p,v,l,!1)),f&&(c[h+", SparseMatrix"]=(p,v)=>f(v,p,l,!0))):(s.Ss&&(c["SparseMatrix,"+h]=e.referToSelf(p=>(v,y)=>s.Ss(v,y,p,!1))),f&&(c[h+", SparseMatrix"]=e.referToSelf(p=>(v,y)=>f(y,v,p,!0)))),l&&l.signatures&&kV(c,l.signatures),c}}),p4="mod",Qle=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],cq=ae(p4,Qle,n=>{var{typed:e,config:t,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s,concat:l}=n,u=uq({typed:e,config:t,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}),c=Ps({typed:e,equalScalar:a}),h=Oa({typed:e}),d=UE({typed:e,equalScalar:a}),f=Ii({typed:e,equalScalar:a}),p=ui({typed:e,DenseMatrix:s}),v=$n({typed:e,matrix:i,concat:l});return e(p4,{"number, number":y,"BigNumber, BigNumber":function(g,w){return w.isZero()?g:g.sub(w.mul(u(g.div(w))))},"Fraction, Fraction":function(g,w){return w.equals(0)?g:g.sub(w.mul(u(g.div(w))))}},v({SS:d,DS:h,SD:c,Ss:f,sS:p}));function y(g,w){return w===0?g:g-w*u(g/w)}}),eue="matAlgo01xDSid",tue=["typed"],ah=ae(eue,tue,n=>{var{typed:e}=n;return function(t,r,i,a){var o=t._data,s=t._size,l=t._datatype||t.getDataType(),u=r._values,c=r._index,h=r._ptr,d=r._size,f=r._datatype||r._data===void 0?r._datatype:r.getDataType();if(s.length!==d.length)throw new on(s.length,d.length);if(s[0]!==d[0]||s[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+d+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=s[0],v=s[1],y=typeof l=="string"&&l!=="mixed"&&l===f?l:void 0,g=y?e.find(i,[y,y]):i,w,b,m=[];for(w=0;w<p;w++)m[w]=[];var x=[],S=[];for(b=0;b<v;b++){for(var C=b+1,T=h[b],M=h[b+1],A=T;A<M;A++)w=c[A],x[w]=a?g(u[A],o[w][b]):g(o[w][b],u[A]),S[w]=C;for(w=0;w<p;w++)S[w]===C?m[w][b]=x[w]:m[w][b]=o[w][b]}return t.createDenseMatrix({data:m,size:[p,v],datatype:l===t._datatype&&f===r._datatype?y:void 0})}}),nue="matAlgo04xSidSid",rue=["typed","equalScalar"],mN=ae(nue,rue,n=>{var{typed:e,equalScalar:t}=n;return function(r,i,a){var o=r._values,s=r._index,l=r._ptr,u=r._size,c=r._datatype||r._data===void 0?r._datatype:r.getDataType(),h=i._values,d=i._index,f=i._ptr,p=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==p.length)throw new on(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");var y=u[0],g=u[1],w,b=t,m=0,x=a;typeof c=="string"&&c===v&&c!=="mixed"&&(w=c,b=e.find(t,[w,w]),m=e.convert(0,w),x=e.find(a,[w,w]));var S=o&&h?[]:void 0,C=[],T=[],M=o&&h?[]:void 0,A=o&&h?[]:void 0,D=[],O=[],U,L,F,k,P;for(L=0;L<g;L++){T[L]=C.length;var z=L+1;for(k=l[L],P=l[L+1],F=k;F<P;F++)U=s[F],C.push(U),D[U]=z,M&&(M[U]=o[F]);for(k=f[L],P=f[L+1],F=k;F<P;F++)if(U=d[F],D[U]===z){if(M){var B=x(M[U],h[F]);b(B,m)?D[U]=null:M[U]=B}}else C.push(U),O[U]=z,A&&(A[U]=h[F]);if(M&&A)for(F=T[L];F<C.length;)U=C[F],D[U]===z?(S[F]=M[U],F++):O[U]===z?(S[F]=A[U],F++):C.splice(F,1)}return T[g]=C.length,r.createSparseMatrix({values:S,index:C,ptr:T,size:[y,g],datatype:c===r._datatype&&v===i._datatype?w:void 0})}}),iue="matAlgo10xSids",aue=["typed","DenseMatrix"],Fd=ae(iue,aue,n=>{var{typed:e,DenseMatrix:t}=n;return function(r,i,a,o){var s=r._values,l=r._index,u=r._ptr,c=r._size,h=r._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=c[0],f=c[1],p,v=a;typeof h=="string"&&(p=h,i=e.convert(i,p),v=e.find(a,[p,p]));for(var y=[],g=[],w=[],b=0;b<f;b++){for(var m=b+1,x=u[b],S=u[b+1],C=x;C<S;C++){var T=l[C];g[T]=s[C],w[T]=m}for(var M=0;M<d;M++)b===0&&(y[M]=[]),w[M]===m?y[M][b]=o?v(i,g[M]):v(g[M],i):y[M][b]=i}return new t({data:y,size:[d,f],datatype:p})}});function Nu(n,e,t,r){if(!(this instanceof Nu))throw new SyntaxError("Constructor must be called with the new operator");this.fn=n,this.count=e,this.min=t,this.max=r,this.message="Wrong number of arguments in function "+n+" ("+e+" provided, "+t+(r!=null?"-"+r:"")+" expected)",this.stack=new Error().stack}Nu.prototype=new Error;Nu.prototype.constructor=Error;Nu.prototype.name="ArgumentsError";Nu.prototype.isArgumentsError=!0;var m4="gcd",oue=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],FC="number | BigNumber | Fraction | Matrix | Array",sue="".concat(FC,", ").concat(FC,", ...").concat(FC);function g4(n){return!n.some(e=>Array.isArray(e))}var lue=ae(m4,oue,n=>{var{typed:e,matrix:t,config:r,round:i,equalScalar:a,zeros:o,BigNumber:s,DenseMatrix:l,concat:u}=n,c=cq({typed:e,config:r,round:i,matrix:t,equalScalar:a,zeros:o,DenseMatrix:l,concat:u}),h=ah({typed:e}),d=mN({typed:e,equalScalar:a}),f=Fd({typed:e,DenseMatrix:l}),p=$n({typed:e,matrix:t,concat:u});return e(m4,{"number, number":v,"BigNumber, BigNumber":y,"Fraction, Fraction":(g,w)=>g.gcd(w)},p({SS:d,DS:h,Ss:f}),{[sue]:e.referToSelf(g=>(w,b,m)=>{for(var x=g(w,b),S=0;S<m.length;S++)x=g(x,m[S]);return x}),Array:e.referToSelf(g=>w=>{if(w.length===1&&Array.isArray(w[0])&&g4(w[0]))return g(...w[0]);if(g4(w))return g(...w);throw new Nu("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(g=>w=>g(w.toArray()))});function v(g,w){if(!Nt(g)||!Nt(w))throw new Error("Parameters in function gcd must be integer numbers");for(var b;w!==0;)b=c(g,w),g=w,w=b;return g<0?-g:g}function y(g,w){if(!g.isInt()||!w.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var b=new s(0);!w.isZero();){var m=c(g,w);g=w,w=m}return g.lt(b)?g.neg():g}}),uue="matAlgo06xS0S0",cue=["typed","equalScalar"],jE=ae(uue,cue,n=>{var{typed:e,equalScalar:t}=n;return function(r,i,a){var o=r._values,s=r._size,l=r._datatype||r._data===void 0?r._datatype:r.getDataType(),u=i._values,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(s.length!==c.length)throw new on(s.length,c.length);if(s[0]!==c[0]||s[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");var d=s[0],f=s[1],p,v=t,y=0,g=a;typeof l=="string"&&l===h&&l!=="mixed"&&(p=l,v=e.find(t,[p,p]),y=e.convert(0,p),g=e.find(a,[p,p]));for(var w=o&&u?[]:void 0,b=[],m=[],x=w?[]:void 0,S=[],C=[],T=0;T<f;T++){m[T]=b.length;var M=T+1;if(UL(r,T,S,x,C,M,b,g),UL(i,T,S,x,C,M,b,g),x)for(var A=m[T];A<b.length;){var D=b[A];if(C[D]===M){var O=x[D];v(O,y)?b.splice(A,1):(w.push(O),A++)}else b.splice(A,1)}else for(var U=m[T];U<b.length;){var L=b[U];C[L]!==M?b.splice(U,1):U++}}return m[f]=b.length,r.createSparseMatrix({values:w,index:b,ptr:m,size:[d,f],datatype:l===r._datatype&&h===i._datatype?p:void 0})}}),v4="lcm",hue=["typed","matrix","equalScalar","concat"],due=ae(v4,hue,n=>{var{typed:e,matrix:t,equalScalar:r,concat:i}=n,a=Ps({typed:e,equalScalar:r}),o=jE({typed:e,equalScalar:r}),s=Ii({typed:e,equalScalar:r}),l=$n({typed:e,matrix:t,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(d=>(f,p,v)=>{for(var y=d(f,p),g=0;g<v.length;g++)y=d(y,v[g]);return y}),e(v4,{"number, number":EW,"BigNumber, BigNumber":h,"Fraction, Fraction":(d,f)=>d.lcm(f)},l({SS:o,DS:a,Ss:s}),c);function h(d,f){if(!d.isInt()||!f.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(f.isZero())return f;for(var p=d.times(f);!f.isZero();){var v=f;f=d.mod(v),d=v}return p.div(d).abs()}}),y4="log10",fue=["typed","config","Complex"],pue=ae(y4,fue,n=>{var{typed:e,config:t,Complex:r}=n;return e(y4,{number:function(i){return i>=0||t.predictable?_W(i):new r(i,0).log().div(Math.LN10)},Complex:function(i){return new r(i).log().div(Math.LN10)},BigNumber:function(i){return!i.isNegative()||t.predictable?i.log():new r(i.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(i=>a=>cn(a,i))})}),b4="log2",mue=["typed","config","Complex"],gue=ae(b4,mue,n=>{var{typed:e,config:t,Complex:r}=n;return e(b4,{number:function(a){return a>=0||t.predictable?CW(a):i(new r(a,0))},Complex:i,BigNumber:function(a){return!a.isNegative()||t.predictable?a.log(2):i(new r(a.toNumber(),0))},"Array | Matrix":e.referToSelf(a=>o=>cn(o,a))});function i(a){var o=Math.sqrt(a.re*a.re+a.im*a.im);return new r(Math.log2?Math.log2(o):Math.log(o)/Math.LN2,Math.atan2(a.im,a.re)/Math.LN2)}}),vue="multiplyScalar",yue=["typed"],bue=ae(vue,yue,n=>{var{typed:e}=n;return e("multiplyScalar",{"number, number":vW,"Complex, Complex":function(t,r){return t.mul(r)},"BigNumber, BigNumber":function(t,r){return t.times(r)},"Fraction, Fraction":function(t,r){return t.mul(r)},"number | Fraction | BigNumber | Complex, Unit":(t,r)=>r.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,r)=>t.multiply(r)})}),x4="multiply",xue=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],wue=ae(x4,xue,n=>{var{typed:e,matrix:t,addScalar:r,multiplyScalar:i,equalScalar:a,dot:o}=n,s=Ii({typed:e,equalScalar:a}),l=Os({typed:e});function u(x,S){switch(x.length){case 1:switch(S.length){case 1:if(x[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(x[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+x[0]+") must match Matrix rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;case 2:switch(S.length){case 1:if(x[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+x[1]+") must match Vector length ("+S[0]+")");break;case 2:if(x[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+x[1]+") must match Matrix B rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+x.length+" dimensions)")}}function c(x,S,C){if(C===0)throw new Error("Cannot multiply two empty vectors");return o(x,S)}function h(x,S){if(S.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(x,S)}function d(x,S){var C=x._data,T=x._size,M=x._datatype||x.getDataType(),A=S._data,D=S._size,O=S._datatype||S.getDataType(),U=T[0],L=D[1],F,k=r,P=i;M&&O&&M===O&&typeof M=="string"&&M!=="mixed"&&(F=M,k=e.find(r,[F,F]),P=e.find(i,[F,F]));for(var z=[],B=0;B<L;B++){for(var X=P(C[0],A[0][B]),J=1;J<U;J++)X=k(X,P(C[J],A[J][B]));z[B]=X}return x.createDenseMatrix({data:z,size:[L],datatype:M===x._datatype&&O===S._datatype?F:void 0})}var f=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":w}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":y,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":m});function v(x,S){var C=x._data,T=x._size,M=x._datatype||x.getDataType(),A=S._data,D=S._datatype||S.getDataType(),O=T[0],U=T[1],L,F=r,k=i;M&&D&&M===D&&typeof M=="string"&&M!=="mixed"&&(L=M,F=e.find(r,[L,L]),k=e.find(i,[L,L]));for(var P=[],z=0;z<O;z++){for(var B=C[z],X=k(B[0],A[0]),J=1;J<U;J++)X=F(X,k(B[J],A[J]));P[z]=X}return x.createDenseMatrix({data:P,size:[O],datatype:M===x._datatype&&D===S._datatype?L:void 0})}function y(x,S){var C=x._data,T=x._size,M=x._datatype||x.getDataType(),A=S._data,D=S._size,O=S._datatype||S.getDataType(),U=T[0],L=T[1],F=D[1],k,P=r,z=i;M&&O&&M===O&&typeof M=="string"&&M!=="mixed"&&M!=="mixed"&&(k=M,P=e.find(r,[k,k]),z=e.find(i,[k,k]));for(var B=[],X=0;X<U;X++){var J=C[X];B[X]=[];for(var Q=0;Q<F;Q++){for(var Z=z(J[0],A[0][Q]),re=1;re<L;re++)Z=P(Z,z(J[re],A[re][Q]));B[X][Q]=Z}}return x.createDenseMatrix({data:B,size:[U,F],datatype:M===x._datatype&&O===S._datatype?k:void 0})}function g(x,S){var C=x._data,T=x._size,M=x._datatype||x.getDataType(),A=S._values,D=S._index,O=S._ptr,U=S._size,L=S._datatype||S._data===void 0?S._datatype:S.getDataType();if(!A)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var F=T[0],k=U[1],P,z=r,B=i,X=a,J=0;M&&L&&M===L&&typeof M=="string"&&M!=="mixed"&&(P=M,z=e.find(r,[P,P]),B=e.find(i,[P,P]),X=e.find(a,[P,P]),J=e.convert(0,P));for(var Q=[],Z=[],re=[],fe=S.createSparseMatrix({values:Q,index:Z,ptr:re,size:[F,k],datatype:M===x._datatype&&L===S._datatype?P:void 0}),se=0;se<k;se++){re[se]=Z.length;var ye=O[se],De=O[se+1];if(De>ye)for(var pe=0,Me=0;Me<F;Me++){for(var be=Me+1,ne=void 0,Pe=ye;Pe<De;Pe++){var ze=D[Pe];pe!==be?(ne=B(C[Me][ze],A[Pe]),pe=be):ne=z(ne,B(C[Me][ze],A[Pe]))}pe===be&&!X(ne,J)&&(Z.push(Me),Q.push(ne))}}return re[k]=Z.length,fe}function w(x,S){var C=x._values,T=x._index,M=x._ptr,A=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!C)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=S._data,O=S._datatype||S.getDataType(),U=x._size[0],L=S._size[0],F=[],k=[],P=[],z,B=r,X=i,J=a,Q=0;A&&O&&A===O&&typeof A=="string"&&A!=="mixed"&&(z=A,B=e.find(r,[z,z]),X=e.find(i,[z,z]),J=e.find(a,[z,z]),Q=e.convert(0,z));var Z=[],re=[];P[0]=0;for(var fe=0;fe<L;fe++){var se=D[fe];if(!J(se,Q))for(var ye=M[fe],De=M[fe+1],pe=ye;pe<De;pe++){var Me=T[pe];re[Me]?Z[Me]=B(Z[Me],X(se,C[pe])):(re[Me]=!0,k.push(Me),Z[Me]=X(se,C[pe]))}}for(var be=k.length,ne=0;ne<be;ne++){var Pe=k[ne];F[ne]=Z[Pe]}return P[1]=k.length,x.createSparseMatrix({values:F,index:k,ptr:P,size:[U,1],datatype:A===x._datatype&&O===S._datatype?z:void 0})}function b(x,S){var C=x._values,T=x._index,M=x._ptr,A=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!C)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=S._data,O=S._datatype||S.getDataType(),U=x._size[0],L=S._size[0],F=S._size[1],k,P=r,z=i,B=a,X=0;A&&O&&A===O&&typeof A=="string"&&A!=="mixed"&&(k=A,P=e.find(r,[k,k]),z=e.find(i,[k,k]),B=e.find(a,[k,k]),X=e.convert(0,k));for(var J=[],Q=[],Z=[],re=x.createSparseMatrix({values:J,index:Q,ptr:Z,size:[U,F],datatype:A===x._datatype&&O===S._datatype?k:void 0}),fe=[],se=[],ye=0;ye<F;ye++){Z[ye]=Q.length;for(var De=ye+1,pe=0;pe<L;pe++){var Me=D[pe][ye];if(!B(Me,X))for(var be=M[pe],ne=M[pe+1],Pe=be;Pe<ne;Pe++){var ze=T[Pe];se[ze]!==De?(se[ze]=De,Q.push(ze),fe[ze]=z(Me,C[Pe])):fe[ze]=P(fe[ze],z(Me,C[Pe]))}}for(var K=Z[ye],ie=Q.length,_e=K;_e<ie;_e++){var oe=Q[_e];J[_e]=fe[oe]}}return Z[F]=Q.length,re}function m(x,S){var C=x._values,T=x._index,M=x._ptr,A=x._datatype||x._data===void 0?x._datatype:x.getDataType(),D=S._values,O=S._index,U=S._ptr,L=S._datatype||S._data===void 0?S._datatype:S.getDataType(),F=x._size[0],k=S._size[1],P=C&&D,z,B=r,X=i;A&&L&&A===L&&typeof A=="string"&&A!=="mixed"&&(z=A,B=e.find(r,[z,z]),X=e.find(i,[z,z]));for(var J=P?[]:void 0,Q=[],Z=[],re=x.createSparseMatrix({values:J,index:Q,ptr:Z,size:[F,k],datatype:A===x._datatype&&L===S._datatype?z:void 0}),fe=P?[]:void 0,se=[],ye,De,pe,Me,be,ne,Pe,ze,K=0;K<k;K++){Z[K]=Q.length;var ie=K+1;for(be=U[K],ne=U[K+1],Me=be;Me<ne;Me++)if(ze=O[Me],P)for(De=M[ze],pe=M[ze+1],ye=De;ye<pe;ye++)Pe=T[ye],se[Pe]!==ie?(se[Pe]=ie,Q.push(Pe),fe[Pe]=X(D[Me],C[ye])):fe[Pe]=B(fe[Pe],X(D[Me],C[ye]));else for(De=M[ze],pe=M[ze+1],ye=De;ye<pe;ye++)Pe=T[ye],se[Pe]!==ie&&(se[Pe]=ie,Q.push(Pe));if(P)for(var _e=Z[K],oe=Q.length,G=_e;G<oe;G++){var q=Q[G];J[G]=fe[q]}}return Z[k]=Q.length,re}return e(x4,i,{"Array, Array":e.referTo("Matrix, Matrix",x=>(S,C)=>{u(nn(S),nn(C));var T=x(t(S),t(C));return Ft(T)?T.valueOf():T}),"Matrix, Matrix":function(x,S){var C=x.size(),T=S.size();return u(C,T),C.length===1?T.length===1?c(x,S,C[0]):h(x,S):T.length===1?f(x,S):p(x,S)},"Matrix, Array":e.referTo("Matrix,Matrix",x=>(S,C)=>x(S,t(C))),"Array, Matrix":e.referToSelf(x=>(S,C)=>x(t(S,C.storage()),C)),"SparseMatrix, any":function(x,S){return s(x,S,i,!1)},"DenseMatrix, any":function(x,S){return l(x,S,i,!1)},"any, SparseMatrix":function(x,S){return s(S,x,i,!0)},"any, DenseMatrix":function(x,S){return l(S,x,i,!0)},"Array, any":function(x,S){return l(t(x),S,i,!1).valueOf()},"any, Array":function(x,S){return l(t(S),x,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(x=>(S,C,T)=>{for(var M=x(S,C),A=0;A<T.length;A++)M=x(M,T[A]);return M})})}),w4="nthRoot",Sue=["typed","matrix","equalScalar","BigNumber","concat"],Eue=ae(w4,Sue,n=>{var{typed:e,matrix:t,equalScalar:r,BigNumber:i,concat:a}=n,o=ah({typed:e}),s=Ps({typed:e,equalScalar:r}),l=jE({typed:e,equalScalar:r}),u=Ii({typed:e,equalScalar:r}),c=$n({typed:e,matrix:t,concat:a});function h(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(w4,{number:HL,"number, number":HL,BigNumber:f=>d(f,new i(2)),"BigNumber, BigNumber":d,Complex:h,"Complex, number":h,Array:e.referTo("DenseMatrix,number",f=>p=>f(t(p),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",f=>p=>f(p,2)),SparseMatrix:e.referTo("SparseMatrix,number",f=>p=>f(p,2)),"SparseMatrix, SparseMatrix":e.referToSelf(f=>(p,v)=>{if(v.density()===1)return l(p,v,f);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(f=>(p,v)=>{if(v.density()===1)return o(p,v,f,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",f=>(p,v)=>f(t(p),v)),"number | BigNumber, SparseMatrix":e.referToSelf(f=>(p,v)=>{if(v.density()===1)return u(v,p,f,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:s,Ss:u,sS:!1}));function d(f,p){var v=i.precision,y=i.clone({precision:v+2}),g=new i(0),w=new y(1),b=p.isNegative();if(b&&(p=p.neg()),p.isZero())throw new Error("Root must be non-zero");if(f.isNegative()&&!p.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(f.isZero())return b?new y(1/0):0;if(!f.isFinite())return b?g:f;var m=f.abs().pow(w.div(p));return m=f.isNeg()?m.neg():m,new i((b?w.div(m):m).toPrecision(v))}}),S4="sign",_ue=["typed","BigNumber","Fraction","complex"],Cue=ae(S4,_ue,n=>{var{typed:e,BigNumber:t,complex:r,Fraction:i}=n;return e(S4,{number:PM,Complex:function(a){return a.im===0?r(PM(a.re)):a.sign()},BigNumber:function(a){return new t(a.cmp(0))},Fraction:function(a){return new i(a.s,1)},"Array | Matrix":e.referToSelf(a=>o=>cn(o,a)),Unit:e.referToSelf(a=>o=>{if(!o._isDerived()&&o.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(a,o.valueType())(o.value)})})}),Aue="sqrt",Tue=["config","typed","Complex"],Mue=ae(Aue,Tue,n=>{var{config:e,typed:t,Complex:r}=n;return t("sqrt",{number:i,Complex:function(a){return a.sqrt()},BigNumber:function(a){return!a.isNegative()||e.predictable?a.sqrt():i(a.toNumber())},Unit:function(a){return a.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new r(a,0).sqrt()}}),E4="square",Due=["typed"],kue=ae(E4,Due,n=>{var{typed:e}=n;return e(E4,{number:AW,Complex:function(t){return t.mul(t)},BigNumber:function(t){return t.times(t)},Fraction:function(t){return t.mul(t)},Unit:function(t){return t.pow(2)}})}),_4="subtract",Nue=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],Oue=ae(_4,Nue,n=>{var{typed:e,matrix:t,equalScalar:r,subtractScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=n,l=ah({typed:e}),u=Oa({typed:e}),c=UE({typed:e,equalScalar:r}),h=Fd({typed:e,DenseMatrix:o}),d=ui({typed:e,DenseMatrix:o}),f=$n({typed:e,matrix:t,concat:s});return e(_4,{"any, any":i},f({elop:i,SS:c,DS:l,SD:u,Ss:d,sS:h}))}),C4="xgcd",Pue=["typed","config","matrix","BigNumber"],Rue=ae(C4,Pue,n=>{var{typed:e,config:t,matrix:r,BigNumber:i}=n;return e(C4,{"number, number":function(o,s){var l=TW(o,s);return t.matrix==="Array"?l:r(l)},"BigNumber, BigNumber":a});function a(o,s){var l,u,c,h=new i(0),d=new i(1),f=h,p=d,v=d,y=h;if(!o.isInt()||!s.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!s.isZero();)u=o.div(s).floor(),c=o.mod(s),l=f,f=p.minus(u.times(f)),p=l,l=v,v=y.minus(u.times(v)),y=l,o=s,s=c;var g;return o.lt(h)?g=[o.neg(),p.neg(),y.neg()]:g=[o,o.isZero()?0:p,y],t.matrix==="Array"?g:r(g)}}),A4="invmod",Iue=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],Lue=ae(A4,Iue,n=>{var{typed:e,config:t,BigNumber:r,xgcd:i,equal:a,smaller:o,mod:s,add:l,isInteger:u}=n;return e(A4,{"number, number":c,"BigNumber, BigNumber":c});function c(h,d){if(!u(h)||!u(d))throw new Error("Parameters in function invmod must be integer numbers");if(h=s(h,d),a(d,0))throw new Error("Divisor must be non zero");var f=i(h,d);f=f.valueOf();var[p,v]=f;return a(p,r(1))?(v=s(v,d),o(v,r(0))&&(v=l(v,d)),v):NaN}}),Fue="matAlgo09xS0Sf",Bue=["typed","equalScalar"],hq=ae(Fue,Bue,n=>{var{typed:e,equalScalar:t}=n;return function(r,i,a){var o=r._values,s=r._index,l=r._ptr,u=r._size,c=r._datatype||r._data===void 0?r._datatype:r.getDataType(),h=i._values,d=i._index,f=i._ptr,p=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==p.length)throw new on(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");var y=u[0],g=u[1],w,b=t,m=0,x=a;typeof c=="string"&&c===v&&c!=="mixed"&&(w=c,b=e.find(t,[w,w]),m=e.convert(0,w),x=e.find(a,[w,w]));var S=o&&h?[]:void 0,C=[],T=[],M=S?[]:void 0,A=[],D,O,U,L,F;for(O=0;O<g;O++){T[O]=C.length;var k=O+1;if(M)for(L=f[O],F=f[O+1],U=L;U<F;U++)D=d[U],A[D]=k,M[D]=h[U];for(L=l[O],F=l[O+1],U=L;U<F;U++)if(D=s[U],M){var P=A[D]===k?M[D]:m,z=x(o[U],P);b(z,m)||(C.push(D),S.push(z))}else C.push(D)}return T[g]=C.length,r.createSparseMatrix({values:S,index:C,ptr:T,size:[y,g],datatype:c===r._datatype&&v===i._datatype?w:void 0})}}),T4="dotMultiply",zue=["typed","matrix","equalScalar","multiplyScalar","concat"],Uue=ae(T4,zue,n=>{var{typed:e,matrix:t,equalScalar:r,multiplyScalar:i,concat:a}=n,o=Ps({typed:e,equalScalar:r}),s=hq({typed:e,equalScalar:r}),l=Ii({typed:e,equalScalar:r}),u=$n({typed:e,matrix:t,concat:a});return e(T4,u({elop:i,SS:s,DS:o,Ss:l}))});function jue(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=n.constructor;if(n.isNaN()||e.isNaN())return new t(NaN);if(n.isZero()||e.eq(-1)||n.eq(e))return n;if(e.isZero()||n.eq(-1))return e;if(!n.isFinite()||!e.isFinite()){if(!n.isFinite()&&!e.isFinite())return n.isNegative()===e.isNegative()?n:new t(0);if(!n.isFinite())return e.isNegative()?n:n.isNegative()?new t(0):e;if(!e.isFinite())return n.isNegative()?e:e.isNegative()?new t(0):n}return gN(n,e,function(r,i){return r&i})}function Y0(n){if(n.isFinite()&&!n.isInteger())throw new Error("Integer expected in function bitNot");var e=n.constructor,t=e.precision;e.config({precision:1e9});var r=n.plus(new e(1));return r.s=-r.s||null,e.config({precision:t}),r}function Hue(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=n.constructor;if(n.isNaN()||e.isNaN())return new t(NaN);var r=new t(-1);return n.isZero()||e.eq(r)||n.eq(e)?e:e.isZero()||n.eq(r)?n:!n.isFinite()||!e.isFinite()?!n.isFinite()&&!n.isNegative()&&e.isNegative()||n.isNegative()&&!e.isNegative()&&!e.isFinite()?r:n.isNegative()&&e.isNegative()?n.isFinite()?n:e:n.isFinite()?e:n:gN(n,e,function(i,a){return i|a})}function gN(n,e,t){var r=n.constructor,i,a,o=+(n.s<0),s=+(e.s<0);if(o){i=V1(Y0(n));for(var l=0;l<i.length;++l)i[l]^=1}else i=V1(n);if(s){a=V1(Y0(e));for(var u=0;u<a.length;++u)a[u]^=1}else a=V1(e);var c,h,d;i.length<=a.length?(c=i,h=a,d=o):(c=a,h=i,d=s);var f=c.length,p=h.length,v=t(o,s)^1,y=new r(v^1),g=new r(1),w=new r(2),b=r.precision;for(r.config({precision:1e9});f>0;)t(c[--f],h[--p])===v&&(y=y.plus(g)),g=g.times(w);for(;p>0;)t(d,h[--p])===v&&(y=y.plus(g)),g=g.times(w);return r.config({precision:b}),v===0&&(y.s=-y.s),y}function V1(n){for(var e=n.d,t=e[0]+"",r=1;r<e.length;++r){for(var i=e[r]+"",a=7-i.length;a--;)i="0"+i;t+=i}for(var o=t.length;t.charAt(o)==="0";)o--;var s=n.e,l=t.slice(0,o+1||1),u=l.length;if(s>0)if(++s>u)for(s-=u;s--;)l+="0";else s<u&&(l=l.slice(0,s)+"."+l.slice(s));for(var c=[0],h=0;h<l.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(l.charAt(h++));for(var f=0;f<c.length;++f)c[f]>1&&((c[f+1]===null||c[f+1]===void 0)&&(c[f+1]=0),c[f+1]+=c[f]>>1,c[f]&=1)}return c.reverse()}function Vue(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=n.constructor;if(n.isNaN()||e.isNaN())return new t(NaN);if(n.isZero())return e;if(e.isZero())return n;if(n.eq(e))return new t(0);var r=new t(-1);return n.eq(r)?Y0(e):e.eq(r)?Y0(n):!n.isFinite()||!e.isFinite()?!n.isFinite()&&!e.isFinite()?r:new t(n.isNegative()===e.isNegative()?1/0:-1/0):gN(n,e,function(i,a){return i^a})}function Wue(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=n.constructor;return n.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):n.isZero()||e.isZero()?n:!n.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?n.times(Math.pow(2,e.toNumber())+""):n.times(new t(2).pow(e))}function que(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=n.constructor;return n.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):n.isZero()||e.isZero()?n:e.isFinite()?e.lt(55)?n.div(Math.pow(2,e.toNumber())+"").floor():n.div(new t(2).pow(e)).floor():n.isNegative()?new t(-1):n.isFinite()?new t(0):new t(NaN)}var M4="bitAnd",Gue=["typed","matrix","equalScalar","concat"],dq=ae(M4,Gue,n=>{var{typed:e,matrix:t,equalScalar:r,concat:i}=n,a=Ps({typed:e,equalScalar:r}),o=jE({typed:e,equalScalar:r}),s=Ii({typed:e,equalScalar:r}),l=$n({typed:e,matrix:t,concat:i});return e(M4,{"number, number":DW,"BigNumber, BigNumber":jue},l({SS:o,DS:a,Ss:s}))}),D4="bitNot",$ue=["typed"],Xue=ae(D4,$ue,n=>{var{typed:e}=n;return e(D4,{number:kW,BigNumber:Y0,"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),k4="bitOr",Yue=["typed","matrix","equalScalar","DenseMatrix","concat"],fq=ae(k4,Yue,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:a}=n,o=ah({typed:e}),s=mN({typed:e,equalScalar:r}),l=Fd({typed:e,DenseMatrix:i}),u=$n({typed:e,matrix:t,concat:a});return e(k4,{"number, number":NW,"BigNumber, BigNumber":Hue},u({SS:s,DS:o,Ss:l}))}),Zue="matAlgo07xSSf",Jue=["typed","DenseMatrix"],Cl=ae(Zue,Jue,n=>{var{typed:e,DenseMatrix:t}=n;return function(i,a,o){var s=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),u=a._size,c=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(s.length!==u.length)throw new on(s.length,u.length);if(s[0]!==u[0]||s[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+u+")");var h=s[0],d=s[1],f,p=0,v=o;typeof l=="string"&&l===c&&l!=="mixed"&&(f=l,p=e.convert(0,f),v=e.find(o,[f,f]));var y,g,w=[];for(y=0;y<h;y++)w[y]=[];var b=[],m=[],x=[],S=[];for(g=0;g<d;g++){var C=g+1;for(r(i,g,x,b,C),r(a,g,S,m,C),y=0;y<h;y++){var T=x[y]===C?b[y]:p,M=S[y]===C?m[y]:p;w[y][g]=v(T,M)}}return new t({data:w,size:[h,d],datatype:l===i._datatype&&c===a._datatype?f:void 0})};function r(i,a,o,s,l){for(var u=i._values,c=i._index,h=i._ptr,d=h[a],f=h[a+1];d<f;d++){var p=c[d];o[p]=l,s[p]=u[d]}}}),N4="bitXor",Kue=["typed","matrix","DenseMatrix","concat"],Que=ae(N4,Kue,n=>{var{typed:e,matrix:t,DenseMatrix:r,concat:i}=n,a=Oa({typed:e}),o=Cl({typed:e,DenseMatrix:r}),s=ui({typed:e,DenseMatrix:r}),l=$n({typed:e,matrix:t,concat:i});return e(N4,{"number, number":OW,"BigNumber, BigNumber":Vue},l({SS:o,DS:a,Ss:s}))}),O4="arg",ece=["typed"],tce=ae(O4,ece,n=>{var{typed:e}=n;return e(O4,{number:function(t){return Math.atan2(0,t)},BigNumber:function(t){return t.constructor.atan2(0,t)},Complex:function(t){return t.arg()},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),P4="conj",nce=["typed"],rce=ae(P4,nce,n=>{var{typed:e}=n;return e(P4,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),R4="im",ice=["typed"],ace=ae(R4,ice,n=>{var{typed:e}=n;return e(R4,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),I4="re",oce=["typed"],sce=ae(I4,oce,n=>{var{typed:e}=n;return e(I4,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),L4="not",lce=["typed"],uce=ae(L4,lce,n=>{var{typed:e}=n;return e(L4,{"null | undefined":()=>!0,number:FW,Complex:function(t){return t.re===0&&t.im===0},BigNumber:function(t){return t.isZero()||t.isNaN()},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),F4="or",cce=["typed","matrix","equalScalar","DenseMatrix","concat"],pq=ae(F4,cce,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:a}=n,o=Oa({typed:e}),s=UE({typed:e,equalScalar:r}),l=ui({typed:e,DenseMatrix:i}),u=$n({typed:e,matrix:t,concat:a});return e(F4,{"number, number":BW,"Complex, Complex":function(c,h){return c.re!==0||c.im!==0||h.re!==0||h.im!==0},"BigNumber, BigNumber":function(c,h){return!c.isZero()&&!c.isNaN()||!h.isZero()&&!h.isNaN()},"Unit, Unit":e.referToSelf(c=>(h,d)=>c(h.value||0,d.value||0))},u({SS:s,DS:o,Ss:l}))}),B4="xor",hce=["typed","matrix","DenseMatrix","concat"],dce=ae(B4,hce,n=>{var{typed:e,matrix:t,DenseMatrix:r,concat:i}=n,a=Oa({typed:e}),o=Cl({typed:e,DenseMatrix:r}),s=ui({typed:e,DenseMatrix:r}),l=$n({typed:e,matrix:t,concat:i});return e(B4,{"number, number":zW,"Complex, Complex":function(u,c){return(u.re!==0||u.im!==0)!=(c.re!==0||c.im!==0)},"BigNumber, BigNumber":function(u,c){return(!u.isZero()&&!u.isNaN())!=(!c.isZero()&&!c.isNaN())},"Unit, Unit":e.referToSelf(u=>(c,h)=>u(c.value||0,h.value||0))},l({SS:o,DS:a,Ss:s}))}),z4="concat",fce=["typed","matrix","isInteger"],mq=ae(z4,fce,n=>{var{typed:e,matrix:t,isInteger:r}=n;return e(z4,{"...Array | Matrix | number | BigNumber":function(i){var a,o=i.length,s=-1,l,u=!1,c=[];for(a=0;a<o;a++){var h=i[a];if(Ft(h)&&(u=!0),tn(h)||Kt(h)){if(a!==o-1)throw new Error("Dimension must be specified as last argument");if(l=s,s=h.valueOf(),!r(s))throw new TypeError("Integer number expected for dimension");if(s<0||a>0&&s>l)throw new as(s,l+1)}else{var d=Gt(h).valueOf(),f=nn(d);if(c[a]=d,l=s,s=f.length-1,a>0&&s!==l)throw new on(l+1,s+1)}}if(c.length===0)throw new SyntaxError("At least one matrix expected");for(var p=c.shift();c.length;)p=hW(p,c.shift(),s);return u?t(p):p},"...string":function(i){return i.join("")}})}),U4="column",pce=["typed","Index","matrix","range"],gq=ae(U4,pce,n=>{var{typed:e,Index:t,matrix:r,range:i}=n;return e(U4,{"Matrix, number":a,"Array, number":function(o,s){return a(r(Gt(o)),s).valueOf()}});function a(o,s){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");In(s,o.size()[1]);var l=i(0,o.size()[0]),u=new t(l,s),c=o.subset(u);return Ft(c)?c:r([[c]])}}),j4="count",mce=["typed","size","prod"],gce=ae(j4,mce,n=>{var{typed:e,size:t,prod:r}=n;return e(j4,{string:function(i){return i.length},"Matrix | Array":function(i){return r(t(i))}})}),H4="cross",vce=["typed","matrix","subtract","multiply"],yce=ae(H4,vce,n=>{var{typed:e,matrix:t,subtract:r,multiply:i}=n;return e(H4,{"Matrix, Matrix":function(o,s){return t(a(o.toArray(),s.toArray()))},"Matrix, Array":function(o,s){return t(a(o.toArray(),s))},"Array, Matrix":function(o,s){return t(a(o,s.toArray()))},"Array, Array":a});function a(o,s){var l=Math.max(nn(o).length,nn(s).length);o=tS(o),s=tS(s);var u=nn(o),c=nn(s);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var h=[r(i(o[1],s[2]),i(o[2],s[1])),r(i(o[2],s[0]),i(o[0],s[2])),r(i(o[0],s[1]),i(o[1],s[0]))];return l>1?[h]:h}}),V4="diag",bce=["typed","matrix","DenseMatrix","SparseMatrix"],xce=ae(V4,bce,n=>{var{typed:e,matrix:t,DenseMatrix:r,SparseMatrix:i}=n;return e(V4,{Array:function(l){return a(l,0,nn(l),null)},"Array, number":function(l,u){return a(l,u,nn(l),null)},"Array, BigNumber":function(l,u){return a(l,u.toNumber(),nn(l),null)},"Array, string":function(l,u){return a(l,0,nn(l),u)},"Array, number, string":function(l,u,c){return a(l,u,nn(l),c)},"Array, BigNumber, string":function(l,u,c){return a(l,u.toNumber(),nn(l),c)},Matrix:function(l){return a(l,0,l.size(),l.storage())},"Matrix, number":function(l,u){return a(l,u,l.size(),l.storage())},"Matrix, BigNumber":function(l,u){return a(l,u.toNumber(),l.size(),l.storage())},"Matrix, string":function(l,u){return a(l,0,l.size(),u)},"Matrix, number, string":function(l,u,c){return a(l,u,l.size(),c)},"Matrix, BigNumber, string":function(l,u,c){return a(l,u.toNumber(),l.size(),c)}});function a(l,u,c,h){if(!Nt(u))throw new TypeError("Second parameter in function diag must be an integer");var d=u>0?u:0,f=u<0?-u:0;switch(c.length){case 1:return o(l,u,h,c[0],f,d);case 2:return s(l,u,h,c,f,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function o(l,u,c,h,d,f){var p=[h+d,h+f];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var v=c==="sparse"?i.diagonal(p,l,u):r.diagonal(p,l,u);return c!==null?v:v.valueOf()}function s(l,u,c,h,d,f){if(Ft(l)){var p=l.diagonal(u);return c!==null?c!==p.storage()?t(p,c):p:p.valueOf()}for(var v=Math.min(h[0]-d,h[1]-f),y=[],g=0;g<v;g++)y[g]=l[g+d][g+f];return c!==null?t(y):y}});function wm(n,e,t,r,i){if(Xh.isTypedFunction(n)){var a=[e,t,r],o=Xh.resolve(n,a);if(o)return h(o.implementation,a);var s=[e,t],l=Xh.resolve(n,s);if(l)return h(l.implementation,s);var u=[e],c=Xh.resolve(n,u);return c?h(c.implementation,u):h(n,a)}else return n(e,t,r);function h(d,f){try{return d.apply(d,f)}catch(y){var p;if(y instanceof TypeError&&((p=y.data)===null||p===void 0?void 0:p.category)==="wrongType"){var v=[];throw v.push("value: ".concat(zn(e))),f.length>=2&&v.push("index: ".concat(zn(t))),f.length>=3&&v.push("array: ".concat(zn(r))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(n.name,"(").concat(v.join(", "),") at index ").concat(JSON.stringify(t)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(n.name,": ").concat(y.message))}}}var wce="filter",Sce=["typed"],Ece=ae(wce,Sce,n=>{var{typed:e}=n;return e("filter",{"Array, function":W4,"Matrix, function":function(t,r){return t.create(W4(t.toArray(),r))},"Array, RegExp":nS,"Matrix, RegExp":function(t,r){return t.create(nS(t.toArray(),r))}})});function W4(n,e){return uW(n,function(t,r,i){return wm(e,t,[r],i,"filter")})}var q4="flatten",_ce=["typed","matrix"],Cce=ae(q4,_ce,n=>{var{typed:e,matrix:t}=n;return e(q4,{Array:function(r){return wn(r)},Matrix:function(r){var i=wn(r.toArray());return t(i)}})}),G4="forEach",Ace=["typed"],Tce=ae(G4,Ace,n=>{var{typed:e}=n;return e(G4,{"Array, function":Mce,"Matrix, function":function(t,r){t.forEach(r)}})});function Mce(n,e){var t=function r(i,a){if(Array.isArray(i))FE(i,function(o,s){r(o,a.concat(s))});else return wm(e,i,a,n,"forEach")};t(n,[])}var $4="getMatrixDataType",Dce=["typed"],kce=ae($4,Dce,n=>{var{typed:e}=n;return e($4,{Array:function(t){return X0(t,zn)},Matrix:function(t){return t.getDataType()}})}),X4="identity",Nce=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Oce=ae(X4,Nce,n=>{var{typed:e,config:t,matrix:r,BigNumber:i,DenseMatrix:a,SparseMatrix:o}=n;return e(X4,{"":function(){return t.matrix==="Matrix"?r([]):[]},string:function(u){return r(u)},"number | BigNumber":function(u){return l(u,u,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(u,c){return l(u,u,c)},"number | BigNumber, number | BigNumber":function(u,c){return l(u,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(u,c,h){return l(u,c,h)},Array:function(u){return s(u)},"Array, string":function(u,c){return s(u,c)},Matrix:function(u){return s(u.valueOf(),u.storage())},"Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(u,c){switch(u.length){case 0:return c?r(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,h){var d=Kt(u)||Kt(c)?i:null;if(Kt(u)&&(u=u.toNumber()),Kt(c)&&(c=c.toNumber()),!Nt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!Nt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var f=d?new i(1):1,p=d?new d(0):0,v=[u,c];if(h){if(h==="sparse")return o.diagonal(v,f,0,p);if(h==="dense")return a.diagonal(v,f,0,p);throw new TypeError('Unknown matrix type "'.concat(h,'"'))}for(var y=Gp([],v,p),g=u<c?u:c,w=0;w<g;w++)y[w][w]=f;return y}}),Y4="kron",Pce=["typed","matrix","multiplyScalar"],Rce=ae(Y4,Pce,n=>{var{typed:e,matrix:t,multiplyScalar:r}=n;return e(Y4,{"Matrix, Matrix":function(a,o){return t(i(a.toArray(),o.toArray()))},"Matrix, Array":function(a,o){return t(i(a.toArray(),o))},"Array, Matrix":function(a,o){return t(i(a,o.toArray()))},"Array, Array":i});function i(a,o){if(nn(a).length===1&&(a=[a]),nn(o).length===1&&(o=[o]),nn(a).length>2||nn(o).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(a.length)+", y = "+JSON.stringify(o.length)+")");var s=[],l=[];return a.map(function(u){return o.map(function(c){return l=[],s.push(l),u.map(function(h){return c.map(function(d){return l.push(r(h,d))})})})})&&s}}),Z4="map",Ice=["typed"],Lce=ae(Z4,Ice,n=>{var{typed:e}=n;return e(Z4,{"Array, function":Fce,"Matrix, function":function(t,r){return t.map(r)}})});function Fce(n,e){var t=function r(i,a){return Array.isArray(i)?i.map(function(o,s){return r(o,a.concat(s))}):wm(e,i,a,n,"map")};return t(n,[])}var J4="diff",Bce=["typed","matrix","subtract","number"],vq=ae(J4,Bce,n=>{var{typed:e,matrix:t,subtract:r,number:i}=n;return e(J4,{"Array | Matrix":function(u){return Ft(u)?t(o(u.toArray())):o(u)},"Array | Matrix, number":function(u,c){if(!Nt(c))throw new RangeError("Dimension must be a whole number");return Ft(u)?t(a(u.toArray(),c)):a(u,c)},"Array, BigNumber":e.referTo("Array,number",u=>(c,h)=>u(c,i(h))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,h)=>u(c,i(h)))});function a(u,c){if(Ft(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var h=[];return u.forEach(d=>{h.push(a(d,c-1))}),h}else{if(c===0)return o(u);throw RangeError("Cannot have negative dimension")}}function o(u){for(var c=[],h=u.length,d=1;d<h;d++)c.push(s(u[d-1],u[d]));return c}function s(u,c){Ft(u)&&(u=u.toArray()),Ft(c)&&(c=c.toArray());var h=Array.isArray(u),d=Array.isArray(c);if(h&&d)return l(u,c);if(!h&&!d)return r(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var h=[],d=u.length,f=0;f<d;f++)h.push(s(u[f],c[f]));return h}}),zce="ones",Uce=["typed","config","matrix","BigNumber"],jce=ae(zce,Uce,n=>{var{typed:e,config:t,matrix:r,BigNumber:i}=n;return e("ones",{"":function(){return t.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var u=l[l.length-1];if(typeof u=="string"){var c=l.pop();return a(l,c)}else return t.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var u=l.storage();return a(l.valueOf(),u)},"Array | Matrix, string":function(l,u){return a(l.valueOf(),u)}});function a(l,u){var c=o(l),h=c?new i(1):1;if(s(l),u){var d=r(u);return l.length>0?d.resize(l,h):d}else{var f=[];return l.length>0?Gp(f,l,h):f}}function o(l){var u=!1;return l.forEach(function(c,h,d){Kt(c)&&(u=!0,d[h]=c.toNumber())}),u}function s(l){l.forEach(function(u){if(typeof u!="number"||!Nt(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function vN(){throw new Error('No "bignumber" implementation available')}function yq(){throw new Error('No "fraction" implementation available')}function bq(){throw new Error('No "matrix" implementation available')}var K4="range",Hce=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],xq=ae(K4,Hce,n=>{var{typed:e,config:t,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:l,add:u,isPositive:c}=n;return e(K4,{string:d,"string, boolean":d,"number, number":function(v,y){return h(f(v,y,1,!1))},"number, number, number":function(v,y,g){return h(f(v,y,g,!1))},"number, number, boolean":function(v,y,g){return h(f(v,y,1,g))},"number, number, number, boolean":function(v,y,g,w){return h(f(v,y,g,w))},"BigNumber, BigNumber":function(v,y){var g=v.constructor;return h(f(v,y,new g(1),!1))},"BigNumber, BigNumber, BigNumber":function(v,y,g){return h(f(v,y,g,!1))},"BigNumber, BigNumber, boolean":function(v,y,g){var w=v.constructor;return h(f(v,y,new w(1),g))},"BigNumber, BigNumber, BigNumber, boolean":function(v,y,g,w){return h(f(v,y,g,w))},"Unit, Unit, Unit":function(v,y,g){return h(f(v,y,g,!1))},"Unit, Unit, Unit, boolean":function(v,y,g,w){return h(f(v,y,g,w))}});function h(v){return t.matrix==="Matrix"?r?r(v):bq():v}function d(v,y){var g=p(v);if(!g)throw new SyntaxError('String "'+v+'" is no valid range');return t.number==="BigNumber"?(i===void 0&&vN(),h(f(i(g.start),i(g.end),i(g.step)))):h(f(g.start,g.end,g.step,y))}function f(v,y,g,w){for(var b=[],m=c(g)?w?o:a:w?l:s,x=v;m(x,y);)b.push(x),x=u(x,g);return b}function p(v){var y=v.split(":"),g=y.map(function(b){return Number(b)}),w=g.some(function(b){return isNaN(b)});if(w)return null;switch(g.length){case 2:return{start:g[0],end:g[1],step:1};case 3:return{start:g[0],end:g[2],step:g[1]};default:return null}}}),Q4="reshape",Vce=["typed","isInteger","matrix"],Wce=ae(Q4,Vce,n=>{var{typed:e,isInteger:t}=n;return e(Q4,{"Matrix, Array":function(r,i){return r.reshape(i,!0)},"Array, Array":function(r,i){return i.forEach(function(a){if(!t(a))throw new TypeError("Invalid size for dimension: "+a)}),hN(r,i)}})}),qce="resize",Gce=["config","matrix"],$ce=ae(qce,Gce,n=>{var{config:e,matrix:t}=n;return function(i,a,o){if(arguments.length!==2&&arguments.length!==3)throw new Nu("resize",arguments.length,2,3);if(Ft(a)&&(a=a.valueOf()),Kt(a[0])&&(a=a.map(function(u){return Kt(u)?u.toNumber():u})),Ft(i))return i.resize(a,o,!0);if(typeof i=="string")return r(i,a,o);var s=Array.isArray(i)?!1:e.matrix!=="Array";if(a.length===0){for(;Array.isArray(i);)i=i[0];return Gt(i)}else{Array.isArray(i)||(i=[i]),i=Gt(i);var l=Gp(i,a,o);return s?t(l):l}};function r(i,a,o){if(o!==void 0){if(typeof o!="string"||o.length!==1)throw new TypeError("Single character expected as defaultValue")}else o=" ";if(a.length!==1)throw new on(a.length,1);var s=a[0];if(typeof s!="number"||!Nt(s))throw new TypeError("Invalid size, must contain positive integers (size: "+un(a)+")");if(i.length>s)return i.substring(0,s);if(i.length<s){for(var l=i,u=0,c=s-i.length;u<c;u++)l+=o;return l}else return i}}),eF="rotate",Xce=["typed","multiply","rotationMatrix"],Yce=ae(eF,Xce,n=>{var{typed:e,multiply:t,rotationMatrix:r}=n;return e(eF,{"Array , number | BigNumber | Complex | Unit":function(a,o){i(a,2);var s=t(r(o),a);return s.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(a,o){return i(a,2),t(r(o),a)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(a,o,s){i(a,3);var l=t(r(o,s),a);return l},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(a,o,s){return i(a,3),t(r(o,s),a)}});function i(a,o){var s=Array.isArray(a)?nn(a):a.size();if(s.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(s.length===2&&s[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(s[0]!==o)throw new RangeError("Vector must be of dimensions 1x".concat(o))}}),tF="rotationMatrix",Zce=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],Jce=ae(tF,Zce,n=>{var{typed:e,config:t,multiplyScalar:r,addScalar:i,unaryMinus:a,norm:o,BigNumber:s,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:h,sin:d}=n;return e(tF,{"":function(){return t.matrix==="Matrix"?l([]):[]},string:function(w){return l(w)},"number | BigNumber | Complex | Unit":function(w){return f(w,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(w,b){return f(w,b)},"number | BigNumber | Complex | Unit, Array":function(w,b){var m=l(b);return p(m),g(w,m,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(w,b){p(b);var m=b.storage()||(t.matrix==="Matrix"?"dense":void 0);return g(w,b,m)},"number | BigNumber | Complex | Unit, Array, string":function(w,b,m){var x=l(b);return p(x),g(w,x,m)},"number | BigNumber | Complex | Unit, Matrix, string":function(w,b,m){return p(b),g(w,b,m)}});function f(w,b){var m=Kt(w),x=m?new s(-1):-1,S=h(w),C=d(w),T=[[S,r(x,C)],[C,S]];return y(T,b)}function p(w){var b=w.size();if(b.length<1||b[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function v(w){return w.reduce((b,m)=>r(b,m))}function y(w,b){if(b){if(b==="sparse")return new c(w);if(b==="dense")return new u(w);throw new TypeError('Unknown matrix type "'.concat(b,'"'))}return w}function g(w,b,m){var x=o(b);if(x===0)throw new RangeError("Rotation around zero vector");var S=Kt(w)?s:null,C=S?new S(1):1,T=S?new S(-1):-1,M=S?new S(b.get([0])/x):b.get([0])/x,A=S?new S(b.get([1])/x):b.get([1])/x,D=S?new S(b.get([2])/x):b.get([2])/x,O=h(w),U=i(C,a(O)),L=d(w),F=i(O,v([M,M,U])),k=i(v([M,A,U]),v([T,D,L])),P=i(v([M,D,U]),v([A,L])),z=i(v([M,A,U]),v([D,L])),B=i(O,v([A,A,U])),X=i(v([A,D,U]),v([T,M,L])),J=i(v([M,D,U]),v([T,A,L])),Q=i(v([A,D,U]),v([M,L])),Z=i(O,v([D,D,U])),re=[[F,k,P],[z,B,X],[J,Q,Z]];return y(re,m)}}),nF="row",Kce=["typed","Index","matrix","range"],wq=ae(nF,Kce,n=>{var{typed:e,Index:t,matrix:r,range:i}=n;return e(nF,{"Matrix, number":a,"Array, number":function(o,s){return a(r(Gt(o)),s).valueOf()}});function a(o,s){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");In(s,o.size()[0]);var l=i(0,o.size()[1]),u=new t(s,l),c=o.subset(u);return Ft(c)?c:r([[c]])}}),rF="size",Qce=["typed","config","?matrix"],ehe=ae(rF,Qce,n=>{var{typed:e,config:t,matrix:r}=n;return e(rF,{Matrix:function(i){return i.create(i.size())},Array:nn,string:function(i){return t.matrix==="Array"?[i.length]:r([i.length])},"number | Complex | BigNumber | Unit | boolean | null":function(i){return t.matrix==="Array"?[]:r?r([]):bq()}})}),iF="squeeze",the=["typed","matrix"],nhe=ae(iF,the,n=>{var{typed:e,matrix:t}=n;return e(iF,{Array:function(r){return tS(Gt(r))},Matrix:function(r){var i=tS(r.toArray());return Array.isArray(i)?t(i):i},any:function(r){return Gt(r)}})}),aF="subset",rhe=["typed","matrix","zeros","add"],Sq=ae(aF,rhe,n=>{var{typed:e,matrix:t,zeros:r,add:i}=n;return e(aF,{"Matrix, Index":function(o,s){return qp(s)?t():(eS(o,s),o.subset(s))},"Array, Index":e.referTo("Matrix, Index",function(o){return function(s,l){var u=o(t(s),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":ahe,"string, Index":ihe,"Matrix, Index, any, any":function(o,s,l,u){return qp(s)?o:(eS(o,s),o.clone().subset(s,a(l,s),u))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,l,u,c){var h=o(t(s),l,u,c);return h.isMatrix?h.valueOf():h}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,l,u){return o(t(s),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,l,u){return o(s,l,u,void 0)}}),"string, Index, string":oF,"string, Index, string, string":oF,"Object, Index, any":ohe});function a(o,s){if(typeof o=="string")throw new Error("can't boradcast a string");if(s._isScalar)return o;var l=s.size();if(l.every(u=>u>0))try{return i(o,r(l))}catch{return o}else return o}});function ihe(n,e){if(!Jv(e))throw new TypeError("Index expected");if(qp(e))return"";if(eS(Array.from(n),e),e.size().length!==1)throw new on(e.size().length,1);var t=n.length;In(e.min()[0],t),In(e.max()[0],t);var r=e.dimension(0),i="";return r.forEach(function(a){i+=n.charAt(a)}),i}function oF(n,e,t,r){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(qp(e))return n;if(eS(Array.from(n),e),e.size().length!==1)throw new on(e.size().length,1);if(r!==void 0){if(typeof r!="string"||r.length!==1)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=e.dimension(0),a=i.size()[0];if(a!==t.length)throw new on(i.size()[0],t.length);var o=n.length;In(e.min()[0]),In(e.max()[0]);for(var s=[],l=0;l<o;l++)s[l]=n.charAt(l);if(i.forEach(function(h,d){s[h]=t.charAt(d[0])}),s.length>o)for(var u=o-1,c=s.length;u<c;u++)s[u]||(s[u]=r);return s.join("")}function ahe(n,e){if(!qp(e)){if(e.size().length!==1)throw new on(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return Ea(n,t)}}function ohe(n,e,t){if(qp(e))return n;if(e.size().length!==1)throw new on(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");var i=Gt(n);return Vp(i,r,t),i}var sF="transpose",she=["typed","matrix"],lhe=ae(sF,she,n=>{var{typed:e,matrix:t}=n;return e(sF,{Array:o=>r(t(o)).valueOf(),Matrix:r,any:Gt});function r(o){var s=o.size(),l;switch(s.length){case 1:l=o.clone();break;case 2:{var u=s[0],c=s[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+un(s)+")");switch(o.storage()){case"dense":l=i(o,u,c);break;case"sparse":l=a(o,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+un(s)+")")}return l}function i(o,s,l){for(var u=o._data,c=[],h,d=0;d<l;d++){h=c[d]=[];for(var f=0;f<s;f++)h[f]=Gt(u[f][d])}return o.createDenseMatrix({data:c,size:[l,s],datatype:o._datatype})}function a(o,s,l){for(var u=o._values,c=o._index,h=o._ptr,d=u?[]:void 0,f=[],p=[],v=[],y=0;y<s;y++)v[y]=0;var g,w,b;for(g=0,w=c.length;g<w;g++)v[c[g]]++;for(var m=0,x=0;x<s;x++)p.push(m),m+=v[x],v[x]=p[x];for(p.push(m),b=0;b<l;b++)for(var S=h[b],C=h[b+1],T=S;T<C;T++){var M=v[c[T]]++;f[M]=b,u&&(d[M]=Gt(u[T]))}return o.createSparseMatrix({values:d,index:f,ptr:p,size:[l,s],datatype:o._datatype})}}),lF="ctranspose",uhe=["typed","transpose","conj"],che=ae(lF,uhe,n=>{var{typed:e,transpose:t,conj:r}=n;return e(lF,{any:function(i){return r(t(i))}})}),uF="zeros",hhe=["typed","config","matrix","BigNumber"],dhe=ae(uF,hhe,n=>{var{typed:e,config:t,matrix:r,BigNumber:i}=n;return e(uF,{"":function(){return t.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var u=l[l.length-1];if(typeof u=="string"){var c=l.pop();return a(l,c)}else return t.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var u=l.storage();return a(l.valueOf(),u)},"Array | Matrix, string":function(l,u){return a(l.valueOf(),u)}});function a(l,u){var c=o(l),h=c?new i(0):0;if(s(l),u){var d=r(u);return l.length>0?d.resize(l,h):d}else{var f=[];return l.length>0?Gp(f,l,h):f}}function o(l){var u=!1;return l.forEach(function(c,h,d){Kt(c)&&(u=!0,d[h]=c.toNumber())}),u}function s(l){l.forEach(function(u){if(typeof u!="number"||!Nt(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),cF="fft",fhe=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],phe=ae(cF,fhe,n=>{var{typed:e,matrix:t,addScalar:r,multiplyScalar:i,divideScalar:a,exp:o,tau:s,i:l,dotDivide:u,conj:c,pow:h,ceil:d,log2:f}=n;return e(cF,{Array:p,Matrix:function(w){return w.create(p(w.toArray()))}});function p(w){var b=nn(w);return b.length===1?g(w,b[0]):v(w.map(m=>p(m,b.slice(1))),0)}function v(w,b){var m=nn(w);if(b!==0)return new Array(m[0]).fill(0).map((S,C)=>v(w[C],b-1));if(m.length===1)return g(w);function x(S){var C=nn(S);return new Array(C[1]).fill(0).map((T,M)=>new Array(C[0]).fill(0).map((A,D)=>S[D][M]))}return x(v(x(w),1))}function y(w){for(var b=w.length,m=o(a(i(-1,i(l,s)),b)),x=[],S=1-b;S<b;S++)x.push(h(m,a(h(S,2),2)));for(var C=h(2,d(f(b+b-1))),T=[...new Array(b).fill(0).map((k,P)=>i(w[P],x[b-1+P])),...new Array(C-b).fill(0)],M=[...new Array(b+b-1).fill(0).map((k,P)=>a(1,x[P])),...new Array(C-(b+b-1)).fill(0)],A=g(T),D=g(M),O=new Array(C).fill(0).map((k,P)=>i(A[P],D[P])),U=u(c(p(c(O))),C),L=[],F=b-1;F<b+b-1;F++)L.push(i(U[F],x[F]));return L}function g(w){var b=w.length;if(b===1)return[w[0]];if(b%2===0){for(var m=[...g(w.filter((T,M)=>M%2===0)),...g(w.filter((T,M)=>M%2===1))],x=0;x<b/2;x++){var S=m[x],C=i(m[x+b/2],o(i(i(s,l),a(-x,b))));m[x]=r(S,C),m[x+b/2]=r(S,i(-1,C))}return m}else return y(w)}}),hF="ifft",mhe=["typed","fft","dotDivide","conj"],ghe=ae(hF,mhe,n=>{var{typed:e,fft:t,dotDivide:r,conj:i}=n;return e(hF,{"Array | Matrix":function(a){var o=Ft(a)?a.size():nn(a);return r(i(t(i(a))),o.reduce((s,l)=>s*l,1))}})});function xd(n){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(n)}function vhe(n,e){if(xd(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Eq(n){var e=vhe(n,"string");return xd(e)=="symbol"?e:e+""}function fr(n,e,t){return(e=Eq(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function yhe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dF(Object(t),!0).forEach(function(r){fr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var bhe="solveODE",xhe=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],whe=ae(bhe,xhe,n=>{var{typed:e,add:t,subtract:r,multiply:i,divide:a,max:o,map:s,abs:l,isPositive:u,isNegative:c,larger:h,smaller:d,matrix:f,bignumber:p,unaryMinus:v}=n;function y(T){return function(M,A,D,O){var U=!(A.length===2&&(A.every(S)||A.every(ja)));if(U)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var L=A[0],F=A[1],k=h(F,L),P=O.firstStep;if(P!==void 0&&!u(P))throw new Error('"firstStep" must be positive');var z=O.maxStep;if(z!==void 0&&!u(z))throw new Error('"maxStep" must be positive');var B=O.minStep;if(B&&c(B))throw new Error('"minStep" must be positive or zero');var X=[L,F,P,B,z].filter($=>$!==void 0);if(!(X.every(S)||X.every(ja)))throw new Error('Inconsistent type of "t" dependant variables');for(var J=1,Q=O.tol?O.tol:1e-4,Z=O.minDelta?O.minDelta:.2,re=O.maxDelta?O.maxDelta:5,fe=O.maxIter?O.maxIter:1e4,se=[L,F,...D,z,B].some(Kt),[ye,De,pe,Me]=se?[p(T.a),p(T.c),p(T.b),p(T.bp)]:[T.a,T.c,T.b,T.bp],be=P?k?P:v(P):a(r(F,L),J),ne=[L],Pe=[D],ze=r(pe,Me),K=0,ie=0,_e=m(k),oe=x(k);_e(ne[K],F);){var G=[];be=oe(ne[K],F,be),G.push(M(ne[K],Pe[K]));for(var q=1;q<De.length;++q)G.push(M(t(ne[K],i(De[q],be)),t(Pe[K],i(be,ye[q],G))));var ce=o(l(s(i(ze,G),$=>ja($)?$.value:$)));ce<Q&&Q/ce>1/4&&(ne.push(t(ne[K],be)),Pe.push(t(Pe[K],i(be,pe,G))),K++);var Ae=.84*(Q/ce)**(1/5);if(d(Ae,Z)?Ae=Z:h(Ae,re)&&(Ae=re),Ae=se?p(Ae):Ae,be=i(be,Ae),z&&h(l(be),z)?be=k?z:v(z):B&&d(l(be),B)&&(be=k?B:v(B)),ie++,ie>fe)throw new Error("Maximum number of iterations reached, try changing options")}return{t:ne,y:Pe}}}function g(T,M,A,D){var O=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],U=[null,1/2,3/4,1],L=[2/9,1/3,4/9,0],F=[7/24,1/4,1/3,1/8],k={a:O,c:U,b:L,bp:F};return y(k)(T,M,A,D)}function w(T,M,A,D){var O=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],U=[null,1/5,3/10,4/5,8/9,1,1],L=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],F=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],k={a:O,c:U,b:L,bp:F};return y(k)(T,M,A,D)}function b(T,M,A,D){var O=D.method?D.method:"RK45",U={RK23:g,RK45:w};if(O.toUpperCase()in U){var L=yhe({},D);return delete L.method,U[O.toUpperCase()](T,M,A,L)}else{var F=Object.keys(U).map(P=>'"'.concat(P,'"')),k="".concat(F.slice(0,-1).join(", ")," and ").concat(F.slice(-1));throw new Error('Unavailable method "'.concat(O,'". Available methods are ').concat(k))}}function m(T){return T?d:h}function x(T){var M=T?h:d;return function(A,D,O){var U=t(A,O);return M(U,D)?r(D,A):O}}function S(T){return Kt(T)||tn(T)}function C(T,M,A,D){var O=b(T,M.toArray(),A.toArray(),D);return{t:f(O.t),y:f(O.y)}}return e("solveODE",{"function, Array, Array, Object":b,"function, Matrix, Matrix, Object":C,"function, Array, Array":(T,M,A)=>b(T,M,A,{}),"function, Matrix, Matrix":(T,M,A)=>C(T,M,A,{}),"function, Array, number | BigNumber | Unit":(T,M,A)=>{var D=b(T,M,[A],{});return{t:D.t,y:D.y.map(O=>O[0])}},"function, Matrix, number | BigNumber | Unit":(T,M,A)=>{var D=b(T,M.toArray(),[A],{});return{t:f(D.t),y:f(D.y.map(O=>O[0]))}},"function, Array, number | BigNumber | Unit, Object":(T,M,A,D)=>{var O=b(T,M,[A],D);return{t:O.t,y:O.y.map(U=>U[0])}},"function, Matrix, number | BigNumber | Unit, Object":(T,M,A,D)=>{var O=b(T,M.toArray(),[A],D);return{t:f(O.t),y:f(O.y.map(U=>U[0]))}}})}),She="erf",Ehe=["typed"],_he=ae(She,Ehe,n=>{var{typed:e}=n;return e("name",{number:function(a){var o=Math.abs(a);return o>=The?vc(a):o<=Che?vc(a)*t(o):o<=4?vc(a)*(1-r(o)):vc(a)*(1-i(o))},"Array | Matrix":e.referToSelf(a=>o=>cn(o,a))});function t(a){var o=a*a,s=Ul[0][4]*o,l=o,u;for(u=0;u<3;u+=1)s=(s+Ul[0][u])*o,l=(l+sf[0][u])*o;return a*(s+Ul[0][3])/(l+sf[0][3])}function r(a){var o=Ul[1][8]*a,s=a,l;for(l=0;l<7;l+=1)o=(o+Ul[1][l])*a,s=(s+sf[1][l])*a;var u=(o+Ul[1][7])/(s+sf[1][7]),c=parseInt(a*16)/16,h=(a-c)*(a+c);return Math.exp(-c*c)*Math.exp(-h)*u}function i(a){var o=1/(a*a),s=Ul[2][5]*o,l=o,u;for(u=0;u<4;u+=1)s=(s+Ul[2][u])*o,l=(l+sf[2][u])*o;var c=o*(s+Ul[2][4])/(l+sf[2][4]);c=(Ahe-c)/a,o=parseInt(a*16)/16;var h=(a-o)*(a+o);return Math.exp(-o*o)*Math.exp(-h)*c}}),Che=.46875,Ahe=.5641895835477563,Ul=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],sf=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],The=Math.pow(2,53),fF="zeta",Mhe=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],Dhe=ae(fF,Mhe,n=>{var{typed:e,config:t,multiply:r,pow:i,divide:a,factorial:o,equal:s,smallerEq:l,isNegative:u,gamma:c,sin:h,subtract:d,add:f,Complex:p,BigNumber:v,pi:y}=n;return e(fF,{number:S=>g(S,C=>C,()=>20),BigNumber:S=>g(S,C=>new v(C),()=>Math.abs(Math.log10(t.epsilon))),Complex:w});function g(S,C,T){return s(S,0)?C(-.5):s(S,1)?C(NaN):isFinite(S)?b(S,C,T,M=>M):u(S)?C(NaN):C(1)}function w(S){return S.re===0&&S.im===0?new p(-.5):S.re===1?new p(NaN,NaN):S.re===1/0&&S.im===0?new p(1):S.im===1/0||S.re===-1/0?new p(NaN,NaN):b(S,C=>C,C=>Math.round(1.3*15+.9*Math.abs(C.im)),C=>C.re)}function b(S,C,T,M){var A=T(S);if(M(S)>-(A-1)/2)return x(S,C(A),C);var D=r(i(2,S),i(C(y),d(S,1)));return D=r(D,h(r(a(C(y),2),S))),D=r(D,c(d(1,S))),r(D,b(d(1,S),C,T,M))}function m(S,C){for(var T=S,M=S;l(M,C);M=f(M,1)){var A=a(r(o(f(C,d(M,1))),i(4,M)),r(o(d(C,M)),o(r(2,M))));T=f(T,A)}return r(C,T)}function x(S,C,T){for(var M=a(1,r(m(T(0),C),d(1,i(2,d(1,S))))),A=T(0),D=T(1);l(D,C);D=f(D,1))A=f(A,a(r((-1)**(D-1),m(D,C)),i(D,S)));return r(M,A)}}),pF="mode",khe=["typed","isNaN","isNumeric"],Nhe=ae(pF,khe,n=>{var{typed:e,isNaN:t,isNumeric:r}=n;return e(pF,{"Array | Matrix":i,"...":function(a){return i(a)}});function i(a){a=wn(a.valueOf());var o=a.length;if(o===0)throw new Error("Cannot calculate mode of an empty array");for(var s={},l=[],u=0,c=0;c<a.length;c++){var h=a[c];if(r(h)&&t(h))throw new Error("Cannot calculate mode of an array containing NaN values");h in s||(s[h]=0),s[h]++,s[h]===u?l.push(h):s[h]>u&&(u=s[h],l=[h])}return l}});function Da(n,e,t){var r;return String(n).includes("Unexpected type")?(r=arguments.length>2?" (type: "+zn(t)+", value: "+JSON.stringify(t)+")":" (type: "+n.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(n).includes("complex numbers")?(r=arguments.length>2?" (type: "+zn(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):n}var mF="prod",Ohe=["typed","config","multiplyScalar","numeric"],Phe=ae(mF,Ohe,n=>{var{typed:e,config:t,multiplyScalar:r,numeric:i}=n;return e(mF,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(o,s){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return a(o)}});function a(o){var s;if(bu(o,function(l){try{s=s===void 0?l:r(s,l)}catch(u){throw Da(u,"prod",l)}}),typeof s=="string"&&(s=i(s,t.number)),s===void 0)throw new Error("Cannot calculate prod of an empty array");return s}}),gF="format",Rhe=["typed"],Ihe=ae(gF,Rhe,n=>{var{typed:e}=n;return e(gF,{any:un,"any, Object | function | number | BigNumber":un})}),vF="bin",Lhe=["typed","format"],Fhe=ae(vF,Lhe,n=>{var{typed:e,format:t}=n;return e(vF,{"number | BigNumber":function(r){return t(r,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(r,i){return t(r,{notation:"bin",wordSize:i})}})}),yF="oct",Bhe=["typed","format"],zhe=ae(yF,Bhe,n=>{var{typed:e,format:t}=n;return e(yF,{"number | BigNumber":function(r){return t(r,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(r,i){return t(r,{notation:"oct",wordSize:i})}})}),bF="hex",Uhe=["typed","format"],jhe=ae(bF,Uhe,n=>{var{typed:e,format:t}=n;return e(bF,{"number | BigNumber":function(r){return t(r,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(r,i){return t(r,{notation:"hex",wordSize:i})}})}),_q=/\$([\w.]+)/g,xF="print",Hhe=["typed"],Cq=ae(xF,Hhe,n=>{var{typed:e}=n;return e(xF,{"string, Object | Array":wF,"string, Object | Array, number | Object":wF})});function wF(n,e,t){return n.replace(_q,function(r,i){var a=i.split("."),o=e[a.shift()];for(o!==void 0&&o.isMatrix&&(o=o.toArray());a.length&&o!==void 0;){var s=a.shift();o=s?o[s]:o+"."}return o!==void 0?Ai(o)?o:un(o,t):r})}var SF="to",Vhe=["typed","matrix","concat"],Whe=ae(SF,Vhe,n=>{var{typed:e,matrix:t,concat:r}=n,i=$n({typed:e,matrix:t,concat:r});return e(SF,{"Unit, Unit | string":(a,o)=>a.to(o)},i({Ds:!0}))}),EF="isPrime",qhe=["typed"],Ghe=ae(EF,qhe,n=>{var{typed:e}=n;return e(EF,{number:function(t){if(t*0!==0)return!1;if(t<=3)return t>1;if(t%2===0||t%3===0)return!1;for(var r=5;r*r<=t;r+=6)if(t%r===0||t%(r+2)===0)return!1;return!0},BigNumber:function(t){if(t.toNumber()*0!==0)return!1;if(t.lte(3))return t.gt(1);if(t.mod(2).eq(0)||t.mod(3).eq(0))return!1;if(t.lt(Math.pow(2,32))){for(var r=t.toNumber(),i=5;i*i<=r;i+=6)if(r%i===0||r%(i+2)===0)return!1;return!0}function a(g,w,b){for(var m=1;!w.eq(0);)w.mod(2).eq(0)?(w=w.div(2),g=g.mul(g).mod(b)):(w=w.sub(1),m=g.mul(m).mod(b));return m}var o=t.constructor.clone({precision:t.toFixed(0).length*2});t=new o(t);for(var s=0,l=t.sub(1);l.mod(2).eq(0);)l=l.div(2),s+=1;var u=null;if(t.lt("3317044064679887385961981"))u=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(g=>g<t);else{var c=Math.min(t.toNumber()-2,Math.floor(2*Math.pow(t.toFixed(0).length*Math.log(10),2)));u=[];for(var h=2;h<=c;h+=1)u.push(c)}for(var d=0;d<u.length;d+=1){var f=u[d],p=a(t.sub(t).add(f),l,t);if(!p.eq(1)){for(var v=0,y=p;!y.eq(t.sub(1));v+=1,y=y.mul(y).mod(t))if(v===s-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),$he="numeric",Xhe=["number","?bignumber","?fraction"],Yhe=ae($he,Xhe,n=>{var{number:e,bignumber:t,fraction:r}=n,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:o=>e(o),BigNumber:t?o=>t(o):vN,Fraction:r?o=>r(o):yq};return function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var u=zn(o);if(!(u in i))throw new TypeError("Cannot convert "+o+' of type "'+u+'"; valid input types are '+Object.keys(i).join(", "));if(!(s in a))throw new TypeError("Cannot convert "+o+' to type "'+s+'"; valid output types are '+Object.keys(a).join(", "));return s===u?o:a[s](o)}}),_F="divideScalar",Zhe=["typed","numeric"],Jhe=ae(_F,Zhe,n=>{var{typed:e,numeric:t}=n;return e(_F,{"number, number":function(r,i){return r/i},"Complex, Complex":function(r,i){return r.div(i)},"BigNumber, BigNumber":function(r,i){return r.div(i)},"Fraction, Fraction":function(r,i){return r.div(i)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),CF="pow",Khe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Qhe=ae(CF,Khe,n=>{var{typed:e,config:t,identity:r,multiply:i,matrix:a,inv:o,number:s,fraction:l,Complex:u}=n;return e(CF,{"number, number":c,"Complex, Complex":function(f,p){return f.pow(p)},"BigNumber, BigNumber":function(f,p){return p.isInteger()||f>=0||t.predictable?f.pow(p):new u(f.toNumber(),0).pow(p.toNumber(),0)},"Fraction, Fraction":function(f,p){var v=f.pow(p);if(v!=null)return v;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(f.valueOf(),p.valueOf())},"Array, number":h,"Array, BigNumber":function(f,p){return h(f,p.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(f,p){return d(f,p.toNumber())},"Unit, number | BigNumber":function(f,p){return f.pow(p)}});function c(f,p){if(t.predictable&&!Nt(p)&&f<0)try{var v=l(p),y=s(v);if((p===y||Math.abs((p-y)/p)<1e-14)&&v.d%2===1)return(v.n%2===0?1:-1)*Math.pow(-f,p)}catch{}return t.predictable&&(f<-1&&p===1/0||f>-1&&f<0&&p===-1/0)?NaN:Nt(p)||f>=0||t.predictable?MW(f,p):f*f<1&&p===1/0||f*f>1&&p===-1/0?0:new u(f,0).pow(p,0)}function h(f,p){if(!Nt(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var v=nn(f);if(v.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+v.length+" dimensions)");if(v[0]!==v[1])throw new Error("For A^b, A must be square (size is "+v[0]+"x"+v[1]+")");if(p<0)try{return h(o(f),-p)}catch(w){throw w.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):w}for(var y=r(v[0]).valueOf(),g=f;p>=1;)(p&1)===1&&(y=i(g,y)),p>>=1,g=i(g,g);return y}function d(f,p){return a(h(f.valueOf(),p))}}),lf="Number of decimals in function round must be an integer",AF="round",ede=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],tde=ae(AF,ede,n=>{var{typed:e,config:t,matrix:r,equalScalar:i,zeros:a,BigNumber:o,DenseMatrix:s}=n,l=Ii({typed:e,equalScalar:i}),u=ui({typed:e,DenseMatrix:s}),c=Os({typed:e});function h(d){return Math.abs(ey(d).exponent)}return e(AF,{number:function(d){var f=mg(d,h(t.epsilon)),p=Ma(d,f,t.epsilon)?f:d;return mg(p)},"number, number":function(d,f){var p=h(t.epsilon);if(f>=p)return mg(d,f);var v=mg(d,p),y=Ma(d,v,t.epsilon)?v:d;return mg(y,f)},"number, BigNumber":function(d,f){if(!f.isInteger())throw new TypeError(lf);return new o(d).toDecimalPlaces(f.toNumber())},Complex:function(d){return d.round()},"Complex, number":function(d,f){if(f%1)throw new TypeError(lf);return d.round(f)},"Complex, BigNumber":function(d,f){if(!f.isInteger())throw new TypeError(lf);var p=f.toNumber();return d.round(p)},BigNumber:function(d){var f=new o(d).toDecimalPlaces(h(t.epsilon)),p=Qo(d,f,t.epsilon)?f:d;return p.toDecimalPlaces(0)},"BigNumber, BigNumber":function(d,f){if(!f.isInteger())throw new TypeError(lf);var p=h(t.epsilon);if(f>=p)return d.toDecimalPlaces(f.toNumber());var v=d.toDecimalPlaces(p),y=Qo(d,v,t.epsilon)?v:d;return y.toDecimalPlaces(f.toNumber())},Fraction:function(d){return d.round()},"Fraction, number":function(d,f){if(f%1)throw new TypeError(lf);return d.round(f)},"Fraction, BigNumber":function(d,f){if(!f.isInteger())throw new TypeError(lf);return d.round(f.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(f,p,v){var y=f.toNumeric(v);return v.multiply(d(y,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(f,p,v)=>d(f,p.toNumber(),v)),"Unit, Unit":e.referToSelf(d=>(f,p)=>d(f,0,p)),"Array | Matrix, number, Unit":e.referToSelf(d=>(f,p,v)=>cn(f,y=>d(y,p,v))),"Array | Matrix, BigNumber, Unit":e.referToSelf(d=>(f,p,v)=>d(f,p.toNumber(),v)),"Array | Matrix, Unit":e.referToSelf(d=>(f,p)=>d(f,0,p)),"Array | Matrix":e.referToSelf(d=>f=>cn(f,d)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>l(f,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>c(f,p,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(f,p)=>c(r(f),p,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(f,p)=>i(f,0)?a(p.size(),p.storage()):u(p,f,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(f,p)=>i(f,0)?a(p.size(),p.storage()):c(p,f,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(f,p)=>c(r(p),f,d,!0).valueOf())})}),TF="log",nde=["config","typed","divideScalar","Complex"],rde=ae(TF,nde,n=>{var{typed:e,config:t,divideScalar:r,Complex:i}=n;return e(TF,{number:function(a){return a>=0||t.predictable?nse(a):new i(a,0).log()},Complex:function(a){return a.log()},BigNumber:function(a){return!a.isNegative()||t.predictable?a.ln():new i(a.toNumber(),0).log()},"any, any":e.referToSelf(a=>(o,s)=>r(a(o),a(s)))})}),MF="log1p",ide=["typed","config","divideScalar","log","Complex"],ade=ae(MF,ide,n=>{var{typed:e,config:t,divideScalar:r,log:i,Complex:a}=n;return e(MF,{number:function(s){return s>=-1||t.predictable?tae(s):o(new a(s,0))},Complex:o,BigNumber:function(s){var l=s.plus(1);return!l.isNegative()||t.predictable?l.ln():o(new a(s.toNumber(),0))},"Array | Matrix":e.referToSelf(s=>l=>cn(l,s)),"any, any":e.referToSelf(s=>(l,u)=>r(s(l),i(u)))});function o(s){var l=s.re+1;return new a(Math.log(Math.sqrt(l*l+s.im*s.im)),Math.atan2(s.im,l))}}),DF="nthRoots",ode=["config","typed","divideScalar","Complex"],sde=ae(DF,ode,n=>{var{typed:e,config:t,divideScalar:r,Complex:i}=n,a=[function(s){return new i(s,0)},function(s){return new i(0,s)},function(s){return new i(-s,0)},function(s){return new i(0,-s)}];function o(s,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(s===0||s.abs()===0)return[new i(0,0)];var u=typeof s=="number",c;(u||s.re===0||s.im===0)&&(u?c=2*+(s<0):s.im===0?c=2*+(s.re<0):c=2*+(s.im<0)+1);for(var h=s.arg(),d=s.abs(),f=[],p=Math.pow(d,1/l),v=0;v<l;v++){var y=(c+4*v)/l;if(y===Math.round(y)){f.push(a[y%4](p));continue}f.push(new i({r:p,phi:(h+2*Math.PI*v)/l}))}return f}return e(DF,{Complex:function(s){return o(s,2)},"Complex, number":o})}),kF="dotPow",lde=["typed","equalScalar","matrix","pow","DenseMatrix","concat"],ude=ae(kF,lde,n=>{var{typed:e,equalScalar:t,matrix:r,pow:i,DenseMatrix:a,concat:o}=n,s=Oa({typed:e}),l=Cl({typed:e,DenseMatrix:a}),u=Ii({typed:e,equalScalar:t}),c=ui({typed:e,DenseMatrix:a}),h=$n({typed:e,matrix:r,concat:o}),d={};for(var f in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,f)&&!f.includes("Matrix")&&!f.includes("Array")&&(d[f]=i.signatures[f]);var p=e(d);return e(kF,h({elop:p,SS:l,DS:s,Ss:u,sS:c}))}),NF="dotDivide",cde=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],hde=ae(NF,cde,n=>{var{typed:e,matrix:t,equalScalar:r,divideScalar:i,DenseMatrix:a,concat:o}=n,s=Ps({typed:e,equalScalar:r}),l=Oa({typed:e}),u=Cl({typed:e,DenseMatrix:a}),c=Ii({typed:e,equalScalar:r}),h=ui({typed:e,DenseMatrix:a}),d=$n({typed:e,matrix:t,concat:o});return e(NF,d({elop:i,SS:u,DS:l,SD:s,Ss:c,sS:h}))});function ny(n){var{DenseMatrix:e}=n;return function(t,r,i){var a=t.size();if(a.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+un(a)+")");var o=a[0],s=a[1];if(o!==s)throw new RangeError("Matrix must be square (size: "+un(a)+")");var l=[];if(Ft(r)){var u=r.size(),c=r._data;if(u.length===1){if(u[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var h=0;h<o;h++)l[h]=[c[h]];return new e({data:l,size:[o,1],datatype:r._datatype})}if(u.length===2){if(u[0]!==o||u[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(q0(r)){if(i){l=[];for(var d=0;d<o;d++)l[d]=[c[d][0]];return new e({data:l,size:[o,1],datatype:r._datatype})}return r}if(gc(r)){for(var f=0;f<o;f++)l[f]=[0];for(var p=r._values,v=r._index,y=r._ptr,g=y[1],w=y[0];w<g;w++){var b=v[w];l[b][0]=p[w]}return new e({data:l,size:[o,1],datatype:r._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(En(r)){var m=nn(r);if(m.length===1){if(m[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var x=0;x<o;x++)l[x]=[r[x]];return new e({data:l,size:[o,1]})}if(m.length===2){if(m[0]!==o||m[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var S=0;S<o;S++)l[S]=[r[S][0]];return new e({data:l,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var OF="lsolve",dde=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],fde=ae(OF,dde,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=n,l=ny({DenseMatrix:s});return e(OF,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var f=t(h),p=u(f,d);return p.valueOf()}});function u(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],v=h._size[1],y=[],g=h._data,w=0;w<v;w++){var b=f[w][0]||0,m=void 0;if(o(b,0))m=0;else{var x=g[w][w];if(o(x,0))throw new Error("Linear system cannot be solved since matrix is singular");m=r(b,x);for(var S=w+1;S<p;S++)f[S]=[a(f[S][0]||0,i(m,g[S][w]))]}y[w]=[m]}return new s({data:y,size:[p,1]})}function c(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],v=h._size[1],y=h._values,g=h._index,w=h._ptr,b=[],m=0;m<v;m++){var x=f[m][0]||0;if(o(x,0))b[m]=[0];else{for(var S=0,C=[],T=[],M=w[m],A=w[m+1],D=M;D<A;D++){var O=g[D];O===m?S=y[D]:O>m&&(C.push(y[D]),T.push(O))}if(o(S,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var U=r(x,S),L=0,F=T.length;L<F;L++){var k=T[L];f[k]=[a(f[k][0]||0,i(U,C[L]))]}b[m]=[U]}}return new s({data:b,size:[p,1]})}}),PF="usolve",pde=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],mde=ae(PF,pde,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=n,l=ny({DenseMatrix:s});return e(PF,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var f=t(h),p=u(f,d);return p.valueOf()}});function u(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],v=h._size[1],y=[],g=h._data,w=v-1;w>=0;w--){var b=f[w][0]||0,m=void 0;if(o(b,0))m=0;else{var x=g[w][w];if(o(x,0))throw new Error("Linear system cannot be solved since matrix is singular");m=r(b,x);for(var S=w-1;S>=0;S--)f[S]=[a(f[S][0]||0,i(m,g[S][w]))]}y[w]=[m]}return new s({data:y,size:[p,1]})}function c(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],v=h._size[1],y=h._values,g=h._index,w=h._ptr,b=[],m=v-1;m>=0;m--){var x=f[m][0]||0;if(o(x,0))b[m]=[0];else{for(var S=0,C=[],T=[],M=w[m],A=w[m+1],D=A-1;D>=M;D--){var O=g[D];O===m?S=y[D]:O<m&&(C.push(y[D]),T.push(O))}if(o(S,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var U=r(x,S),L=0,F=T.length;L<F;L++){var k=T[L];f[k]=[a(f[k][0],i(U,C[L]))]}b[m]=[U]}}return new s({data:b,size:[p,1]})}}),RF="lsolveAll",gde=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],vde=ae(RF,gde,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=n,l=ny({DenseMatrix:s});return e(RF,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var f=t(h),p=u(f,d);return p.map(v=>v.valueOf())}});function u(h,d){for(var f=[l(h,d,!0)._data.map(T=>T[0])],p=h._data,v=h._size[0],y=h._size[1],g=0;g<y;g++)for(var w=f.length,b=0;b<w;b++){var m=f[b];if(o(p[g][g],0))if(o(m[g],0)){if(b===0){var x=[...m];x[g]=1;for(var S=g+1;S<y;S++)x[S]=a(x[S],p[S][g]);f.push(x)}}else{if(b===0)return[];f.splice(b,1),b-=1,w-=1}else{m[g]=r(m[g],p[g][g]);for(var C=g+1;C<y;C++)m[C]=a(m[C],i(m[g],p[C][g]))}}return f.map(T=>new s({data:T.map(M=>[M]),size:[v,1]}))}function c(h,d){for(var f=[l(h,d,!0)._data.map(J=>J[0])],p=h._size[0],v=h._size[1],y=h._values,g=h._index,w=h._ptr,b=0;b<v;b++)for(var m=f.length,x=0;x<m;x++){for(var S=f[x],C=[],T=[],M=w[b],A=w[b+1],D=0,O=M;O<A;O++){var U=g[O];U===b?D=y[O]:U>b&&(C.push(y[O]),T.push(U))}if(o(D,0))if(o(S[b],0)){if(x===0){var L=[...S];L[b]=1;for(var F=0,k=T.length;F<k;F++){var P=T[F];L[P]=a(L[P],C[F])}f.push(L)}}else{if(x===0)return[];f.splice(x,1),x-=1,m-=1}else{S[b]=r(S[b],D);for(var z=0,B=T.length;z<B;z++){var X=T[z];S[X]=a(S[X],i(S[b],C[z]))}}}return f.map(J=>new s({data:J.map(Q=>[Q]),size:[p,1]}))}}),IF="usolveAll",yde=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],bde=ae(IF,yde,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=n,l=ny({DenseMatrix:s});return e(IF,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var f=t(h),p=u(f,d);return p.map(v=>v.valueOf())}});function u(h,d){for(var f=[l(h,d,!0)._data.map(T=>T[0])],p=h._data,v=h._size[0],y=h._size[1],g=y-1;g>=0;g--)for(var w=f.length,b=0;b<w;b++){var m=f[b];if(o(p[g][g],0))if(o(m[g],0)){if(b===0){var x=[...m];x[g]=1;for(var S=g-1;S>=0;S--)x[S]=a(x[S],p[S][g]);f.push(x)}}else{if(b===0)return[];f.splice(b,1),b-=1,w-=1}else{m[g]=r(m[g],p[g][g]);for(var C=g-1;C>=0;C--)m[C]=a(m[C],i(m[g],p[C][g]))}}return f.map(T=>new s({data:T.map(M=>[M]),size:[v,1]}))}function c(h,d){for(var f=[l(h,d,!0)._data.map(J=>J[0])],p=h._size[0],v=h._size[1],y=h._values,g=h._index,w=h._ptr,b=v-1;b>=0;b--)for(var m=f.length,x=0;x<m;x++){for(var S=f[x],C=[],T=[],M=w[b],A=w[b+1],D=0,O=A-1;O>=M;O--){var U=g[O];U===b?D=y[O]:U<b&&(C.push(y[O]),T.push(U))}if(o(D,0))if(o(S[b],0)){if(x===0){var L=[...S];L[b]=1;for(var F=0,k=T.length;F<k;F++){var P=T[F];L[P]=a(L[P],C[F])}f.push(L)}}else{if(x===0)return[];f.splice(x,1),x-=1,m-=1}else{S[b]=r(S[b],D);for(var z=0,B=T.length;z<B;z++){var X=T[z];S[X]=a(S[X],i(S[b],C[z]))}}}return f.map(J=>new s({data:J.map(Q=>[Q]),size:[p,1]}))}}),xde="matAlgo08xS0Sid",wde=["typed","equalScalar"],yN=ae(xde,wde,n=>{var{typed:e,equalScalar:t}=n;return function(r,i,a){var o=r._values,s=r._index,l=r._ptr,u=r._size,c=r._datatype||r._data===void 0?r._datatype:r.getDataType(),h=i._values,d=i._index,f=i._ptr,p=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==p.length)throw new on(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");if(!o||!h)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var y=u[0],g=u[1],w,b=t,m=0,x=a;typeof c=="string"&&c===v&&c!=="mixed"&&(w=c,b=e.find(t,[w,w]),m=e.convert(0,w),x=e.find(a,[w,w]));for(var S=[],C=[],T=[],M=[],A=[],D,O,U,L,F=0;F<g;F++){T[F]=C.length;var k=F+1;for(O=l[F],U=l[F+1],D=O;D<U;D++)L=s[D],A[L]=k,M[L]=o[D],C.push(L);for(O=f[F],U=f[F+1],D=O;D<U;D++)L=d[D],A[L]===k&&(M[L]=x(M[L],h[D]));for(D=T[F];D<C.length;){L=C[D];var P=M[L];b(P,m)?C.splice(D,1):(S.push(P),D++)}}return T[g]=C.length,r.createSparseMatrix({values:S,index:C,ptr:T,size:[y,g],datatype:c===r._datatype&&v===i._datatype?w:void 0})}}),bN=ae("useMatrixForArrayScalar",["typed","matrix"],n=>{var{typed:e,matrix:t}=n;return{"Array, number":e.referTo("DenseMatrix, number",r=>(i,a)=>r(t(i),a).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",r=>(i,a)=>r(t(i),a).valueOf()),"number, Array":e.referTo("number, DenseMatrix",r=>(i,a)=>r(i,t(a)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",r=>(i,a)=>r(i,t(a)).valueOf())}}),LF="leftShift",Sde=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],Ede=ae(LF,Sde,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=n,s=ah({typed:e}),l=Ps({typed:e,equalScalar:r}),u=yN({typed:e,equalScalar:r}),c=Fd({typed:e,DenseMatrix:a}),h=Ii({typed:e,equalScalar:r}),d=Os({typed:e}),f=$n({typed:e,matrix:t,concat:o}),p=bN({typed:e,matrix:t});return e(LF,{"number, number":PW,"BigNumber, BigNumber":Wue,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,g)=>r(g,0)?y.clone():h(y,g,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,g)=>r(g,0)?y.clone():d(y,g,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,g)=>r(y,0)?i(g.size(),g.storage()):c(g,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,g)=>r(y,0)?i(g.size(),g.storage()):d(g,y,v,!0))},p,f({SS:u,DS:s,SD:l}))}),FF="rightArithShift",_de=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],Cde=ae(FF,_de,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=n,s=ah({typed:e}),l=Ps({typed:e,equalScalar:r}),u=yN({typed:e,equalScalar:r}),c=Fd({typed:e,DenseMatrix:a}),h=Ii({typed:e,equalScalar:r}),d=Os({typed:e}),f=$n({typed:e,matrix:t,concat:o}),p=bN({typed:e,matrix:t});return e(FF,{"number, number":RW,"BigNumber, BigNumber":que,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,g)=>r(g,0)?y.clone():h(y,g,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,g)=>r(g,0)?y.clone():d(y,g,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,g)=>r(y,0)?i(g.size(),g.storage()):c(g,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,g)=>r(y,0)?i(g.size(),g.storage()):d(g,y,v,!0))},p,f({SS:u,DS:s,SD:l}))}),BF="rightLogShift",Ade=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],Tde=ae(BF,Ade,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=n,s=ah({typed:e}),l=Ps({typed:e,equalScalar:r}),u=yN({typed:e,equalScalar:r}),c=Fd({typed:e,DenseMatrix:a}),h=Ii({typed:e,equalScalar:r}),d=Os({typed:e}),f=$n({typed:e,matrix:t,concat:o}),p=bN({typed:e,matrix:t});return e(BF,{"number, number":IW,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,g)=>r(g,0)?y.clone():h(y,g,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,g)=>r(g,0)?y.clone():d(y,g,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,g)=>r(y,0)?i(g.size(),g.storage()):c(g,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,g)=>r(y,0)?i(g.size(),g.storage()):d(g,y,v,!0))},p,f({SS:u,DS:s,SD:l}))}),zF="and",Mde=["typed","matrix","equalScalar","zeros","not","concat"],Aq=ae(zF,Mde,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,not:a,concat:o}=n,s=Ps({typed:e,equalScalar:r}),l=jE({typed:e,equalScalar:r}),u=Ii({typed:e,equalScalar:r}),c=Os({typed:e}),h=$n({typed:e,matrix:t,concat:o});return e(zF,{"number, number":UW,"Complex, Complex":function(d,f){return(d.re!==0||d.im!==0)&&(f.re!==0||f.im!==0)},"BigNumber, BigNumber":function(d,f){return!d.isZero()&&!f.isZero()&&!d.isNaN()&&!f.isNaN()},"Unit, Unit":e.referToSelf(d=>(f,p)=>d(f.value||0,p.value||0)),"SparseMatrix, any":e.referToSelf(d=>(f,p)=>a(p)?i(f.size(),f.storage()):u(f,p,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(f,p)=>a(p)?i(f.size(),f.storage()):c(f,p,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(f,p)=>a(f)?i(f.size(),f.storage()):u(p,f,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(f,p)=>a(f)?i(f.size(),f.storage()):c(p,f,d,!0)),"Array, any":e.referToSelf(d=>(f,p)=>d(t(f),p).valueOf()),"any, Array":e.referToSelf(d=>(f,p)=>d(f,t(p)).valueOf())},h({SS:l,DS:s}))}),cS="compare",Dde=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],kde=ae(cS,Dde,n=>{var{typed:e,config:t,equalScalar:r,matrix:i,BigNumber:a,Fraction:o,DenseMatrix:s,concat:l}=n,u=Oa({typed:e}),c=UE({typed:e,equalScalar:r}),h=ui({typed:e,DenseMatrix:s}),d=$n({typed:e,matrix:i,concat:l}),f=xm({typed:e});return e(cS,Nde({typed:e,config:t}),{"boolean, boolean":function(p,v){return p===v?0:p>v?1:-1},"BigNumber, BigNumber":function(p,v){return Qo(p,v,t.epsilon)?new a(0):new a(p.cmp(v))},"Fraction, Fraction":function(p,v){return new o(p.compare(v))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,d({SS:c,DS:u,Ss:h}))}),Nde=ae(cS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(cS,{"number, number":function(r,i){return Ma(r,i,t.epsilon)?0:r>i?1:-1}})}),Ode=function n(e,t){var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,o=/^0x[0-9a-f]+$/i,s=/^0/,l=function(b){return n.insensitive&&(""+b).toLowerCase()||""+b},u=l(e).replace(i,"")||"",c=l(t).replace(i,"")||"",h=u.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=parseInt(u.match(o),16)||h.length!==1&&u.match(a)&&Date.parse(u),p=parseInt(c.match(o),16)||f&&c.match(a)&&Date.parse(c)||null,v,y;if(p){if(f<p)return-1;if(f>p)return 1}for(var g=0,w=Math.max(h.length,d.length);g<w;g++){if(v=!(h[g]||"").match(s)&&parseFloat(h[g])||h[g]||0,y=!(d[g]||"").match(s)&&parseFloat(d[g])||d[g]||0,isNaN(v)!==isNaN(y))return isNaN(v)?1:-1;if(typeof v!=typeof y&&(v+="",y+=""),v<y)return-1;if(v>y)return 1}return 0};const uf=is(Ode);var UF="compareNatural",Pde=["typed","compare"],Rde=ae(UF,Pde,n=>{var{typed:e,compare:t}=n,r=t.signatures["boolean,boolean"];return e(UF,{"any, any":i});function i(l,u){var c=zn(l),h=zn(u),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(h==="number"||h==="BigNumber"||h==="Fraction"))return d=t(l,u),d.toString()!=="0"?d>0?1:-1:uf(c,h);var f=["Array","DenseMatrix","SparseMatrix"];if(f.includes(c)||f.includes(h))return d=a(i,l,u),d!==0?d:uf(c,h);if(c!==h)return uf(c,h);if(c==="Complex")return Ide(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):o(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return r(l,u);if(c==="string")return uf(l,u);if(c==="Object")return s(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function a(l,u,c){return gc(u)&&gc(c)?o(l,u.toJSON().values,c.toJSON().values):gc(u)?a(l,u.toArray(),c):gc(c)?a(l,u,c.toArray()):q0(u)?a(l,u.toJSON().data,c):q0(c)?a(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?o(l,u,c):a(l,u,[c]):a(l,[u],c)}function o(l,u,c){for(var h=0,d=Math.min(u.length,c.length);h<d;h++){var f=l(u[h],c[h]);if(f!==0)return f}return u.length>c.length?1:u.length<c.length?-1:0}function s(l,u,c){var h=Object.keys(u),d=Object.keys(c);h.sort(uf),d.sort(uf);var f=o(l,h,d);if(f!==0)return f;for(var p=0;p<h.length;p++){var v=l(u[h[p]],c[d[p]]);if(v!==0)return v}return 0}});function Ide(n,e){return n.re>e.re?1:n.re<e.re?-1:n.im>e.im?1:n.im<e.im?-1:0}var jF="compareText",Lde=["typed","matrix","concat"];NM.signature="any, any";var Fde=ae(jF,Lde,n=>{var{typed:e,matrix:t,concat:r}=n,i=$n({typed:e,matrix:t,concat:r});return e(jF,NM,i({elop:NM,Ds:!0}))}),hS="equal",Bde=["typed","matrix","equalScalar","DenseMatrix","concat"],zde=ae(hS,Bde,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:a}=n,o=Oa({typed:e}),s=Cl({typed:e,DenseMatrix:i}),l=ui({typed:e,DenseMatrix:i}),u=$n({typed:e,matrix:t,concat:a});return e(hS,Ude({typed:e,equalScalar:r}),u({elop:r,SS:s,DS:o,Ss:l}))}),Ude=ae(hS,["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return e(hS,{"any, any":function(r,i){return r===null?i===null:i===null?r===null:r===void 0?i===void 0:i===void 0?r===void 0:t(r,i)}})}),HF="equalText",jde=["typed","compareText","isZero"],Hde=ae(HF,jde,n=>{var{typed:e,compareText:t,isZero:r}=n;return e(HF,{"any, any":function(i,a){return r(t(i,a))}})}),dS="smaller",Vde=["typed","config","matrix","DenseMatrix","concat"],Wde=ae(dS,Vde,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:a}=n,o=Oa({typed:e}),s=Cl({typed:e,DenseMatrix:i}),l=ui({typed:e,DenseMatrix:i}),u=$n({typed:e,matrix:r,concat:a}),c=xm({typed:e});return e(dS,qde({typed:e,config:t}),{"boolean, boolean":(h,d)=>h<d,"BigNumber, BigNumber":function(h,d){return h.lt(d)&&!Qo(h,d,t.epsilon)},"Fraction, Fraction":(h,d)=>h.compare(d)===-1,"Complex, Complex":function(h,d){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:o,Ss:l}))}),qde=ae(dS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(dS,{"number, number":function(r,i){return r<i&&!Ma(r,i,t.epsilon)}})}),fS="smallerEq",Gde=["typed","config","matrix","DenseMatrix","concat"],$de=ae(fS,Gde,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:a}=n,o=Oa({typed:e}),s=Cl({typed:e,DenseMatrix:i}),l=ui({typed:e,DenseMatrix:i}),u=$n({typed:e,matrix:r,concat:a}),c=xm({typed:e});return e(fS,Xde({typed:e,config:t}),{"boolean, boolean":(h,d)=>h<=d,"BigNumber, BigNumber":function(h,d){return h.lte(d)||Qo(h,d,t.epsilon)},"Fraction, Fraction":(h,d)=>h.compare(d)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:o,Ss:l}))}),Xde=ae(fS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(fS,{"number, number":function(r,i){return r<=i||Ma(r,i,t.epsilon)}})}),pS="larger",Yde=["typed","config","matrix","DenseMatrix","concat"],Zde=ae(pS,Yde,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:a}=n,o=Oa({typed:e}),s=Cl({typed:e,DenseMatrix:i}),l=ui({typed:e,DenseMatrix:i}),u=$n({typed:e,matrix:r,concat:a}),c=xm({typed:e});return e(pS,Jde({typed:e,config:t}),{"boolean, boolean":(h,d)=>h>d,"BigNumber, BigNumber":function(h,d){return h.gt(d)&&!Qo(h,d,t.epsilon)},"Fraction, Fraction":(h,d)=>h.compare(d)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:o,Ss:l}))}),Jde=ae(pS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(pS,{"number, number":function(r,i){return r>i&&!Ma(r,i,t.epsilon)}})}),mS="largerEq",Kde=["typed","config","matrix","DenseMatrix","concat"],Qde=ae(mS,Kde,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:a}=n,o=Oa({typed:e}),s=Cl({typed:e,DenseMatrix:i}),l=ui({typed:e,DenseMatrix:i}),u=$n({typed:e,matrix:r,concat:a}),c=xm({typed:e});return e(mS,efe({typed:e,config:t}),{"boolean, boolean":(h,d)=>h>=d,"BigNumber, BigNumber":function(h,d){return h.gte(d)||Qo(h,d,t.epsilon)},"Fraction, Fraction":(h,d)=>h.compare(d)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:o,Ss:l}))}),efe=ae(mS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(mS,{"number, number":function(r,i){return r>=i||Ma(r,i,t.epsilon)}})}),VF="deepEqual",tfe=["typed","equal"],nfe=ae(VF,tfe,n=>{var{typed:e,equal:t}=n;return e(VF,{"any, any":function(i,a){return r(i.valueOf(),a.valueOf())}});function r(i,a){if(Array.isArray(i))if(Array.isArray(a)){var o=i.length;if(o!==a.length)return!1;for(var s=0;s<o;s++)if(!r(i[s],a[s]))return!1;return!0}else return!1;else return Array.isArray(a)?!1:t(i,a)}}),gS="unequal",rfe=["typed","config","equalScalar","matrix","DenseMatrix","concat"],ife=ae(gS,rfe,n=>{var{typed:e,config:t,equalScalar:r,matrix:i,DenseMatrix:a,concat:o}=n,s=Oa({typed:e}),l=Cl({typed:e,DenseMatrix:a}),u=ui({typed:e,DenseMatrix:a}),c=$n({typed:e,matrix:i,concat:o});return e(gS,afe({typed:e,equalScalar:r}),c({elop:h,SS:l,DS:s,Ss:u}));function h(d,f){return!r(d,f)}}),afe=ae(gS,["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return e(gS,{"any, any":function(r,i){return r===null?i!==null:i===null?r!==null:r===void 0?i!==void 0:i===void 0?r!==void 0:!t(r,i)}})}),WF="partitionSelect",ofe=["typed","isNumeric","isNaN","compare"],sfe=ae(WF,ofe,n=>{var{typed:e,isNumeric:t,isNaN:r,compare:i}=n,a=i,o=(u,c)=>-i(u,c);return e(WF,{"Array | Matrix, number":function(u,c){return s(u,c,a)},"Array | Matrix, number, string":function(u,c,h){if(h==="asc")return s(u,c,a);if(h==="desc")return s(u,c,o);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(u,c,h){if(!Nt(c)||c<0)throw new Error("k must be a non-negative integer");if(Ft(u)){var d=u.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,h)}if(Array.isArray(u))return l(u,c,h)}function l(u,c,h){if(c>=u.length)throw new Error("k out of bounds");for(var d=0;d<u.length;d++)if(t(u[d])&&r(u[d]))return u[d];for(var f=0,p=u.length-1;f<p;){for(var v=f,y=p,g=u[Math.floor(Math.random()*(p-f+1))+f];v<y;)if(h(u[v],g)>=0){var w=u[y];u[y]=u[v],u[v]=w,--y}else++v;h(u[v],g)>0&&--v,c<=v?p=v:f=v+1}return u[c]}}),qF="sort",lfe=["typed","matrix","compare","compareNatural"],ufe=ae(qF,lfe,n=>{var{typed:e,matrix:t,compare:r,compareNatural:i}=n,a=r,o=(c,h)=>-r(c,h);return e(qF,{Array:function(c){return l(c),c.sort(a)},Matrix:function(c){return u(c),t(c.toArray().sort(a),c.storage())},"Array, function":function(c,h){return l(c),c.sort(h)},"Matrix, function":function(c,h){return u(c),t(c.toArray().sort(h),c.storage())},"Array, string":function(c,h){return l(c),c.sort(s(h))},"Matrix, string":function(c,h){return u(c),t(c.toArray().sort(s(h)),c.storage())}});function s(c){if(c==="asc")return a;if(c==="desc")return o;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(nn(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),GF="max",cfe=["typed","config","numeric","larger"],Tq=ae(GF,cfe,n=>{var{typed:e,config:t,numeric:r,larger:i}=n;return e(GF,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(s,l){return BE(s,l.valueOf(),a)},"...":function(s){if(vm(s))throw new TypeError("Scalar values expected in function max");return o(s)}});function a(s,l){try{return i(s,l)?s:l}catch(u){throw Da(u,"max",l)}}function o(s){var l;if(bu(s,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw Da(c,"max",u)}}),l===void 0)throw new Error("Cannot calculate max of an empty array");return typeof l=="string"&&(l=r(l,t.number)),l}}),$F="min",hfe=["typed","config","numeric","smaller"],Mq=ae($F,hfe,n=>{var{typed:e,config:t,numeric:r,smaller:i}=n;return e($F,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(s,l){return BE(s,l.valueOf(),a)},"...":function(s){if(vm(s))throw new TypeError("Scalar values expected in function min");return o(s)}});function a(s,l){try{return i(s,l)?s:l}catch(u){throw Da(u,"min",l)}}function o(s){var l;if(bu(s,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw Da(c,"min",u)}}),l===void 0)throw new Error("Cannot calculate min of an empty array");return typeof l=="string"&&(l=r(l,t.number)),l}}),dfe="ImmutableDenseMatrix",ffe=["smaller","DenseMatrix"],pfe=ae(dfe,ffe,n=>{var{smaller:e,DenseMatrix:t}=n;function r(i,a){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!Ai(a))throw new Error("Invalid datatype: "+a);if(Ft(i)||En(i)){var o=new t(i,a);this._data=o._data,this._size=o._size,this._datatype=o._datatype,this._min=null,this._max=null}else if(i&&En(i.data)&&En(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+zn(i)+")");this._data=[],this._size=[0],this._datatype=a,this._min=null,this._max=null}}return r.prototype=new t,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(i){switch(arguments.length){case 1:{var a=t.prototype.subset.call(this,i);return Ft(a)?new r({data:a._data,size:a._size,datatype:a._datatype}):a}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:Gt(this._data),size:Gt(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(i){return new r(i)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(a){(i===null||e(a,i))&&(i=a)}),this._min=i!==null?i:void 0}return this._min},r.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(a){(i===null||e(i,a))&&(i=a)}),this._max=i!==null?i:void 0}return this._max},r},{isClass:!0}),mfe="Index",gfe=["ImmutableDenseMatrix","getMatrixDataType"],vfe=ae(mfe,gfe,n=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=n;function r(a){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var o=0,s=arguments.length;o<s;o++){var l=arguments[o],u=En(l),c=Ft(l),h=null;if(NE(l))this._dimensions.push(l),this._isScalar=!1;else if(u||c){var d=void 0;t(l)==="boolean"?(u&&(d=i(XF(l).valueOf())),c&&(d=i(XF(l._data).valueOf())),h=l.valueOf().length):d=i(l.valueOf()),this._dimensions.push(d);var f=d.size();(f.length!==1||f[0]!==1||h!==null)&&(this._isScalar=!1)}else if(typeof l=="number")this._dimensions.push(i([l]));else if(typeof l=="string")this._dimensions.push(l);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(h)}}r.prototype.type="Index",r.prototype.isIndex=!0;function i(a){for(var o=0,s=a.length;o<s;o++)if(typeof a[o]!="number"||!Nt(a[o]))throw new TypeError("Index parameters must be positive integer numbers");return new e(a)}return r.prototype.clone=function(){var a=new r;return a._dimensions=Gt(this._dimensions),a._isScalar=this._isScalar,a._sourceSize=this._sourceSize,a},r.create=function(a){var o=new r;return r.apply(o,a),o},r.prototype.size=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var l=this._dimensions[o];a[o]=typeof l=="string"?1:l.size()[0]}return a},r.prototype.max=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var l=this._dimensions[o];a[o]=typeof l=="string"?l:l.max()}return a},r.prototype.min=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var l=this._dimensions[o];a[o]=typeof l=="string"?l:l.min()}return a},r.prototype.forEach=function(a){for(var o=0,s=this._dimensions.length;o<s;o++)a(this._dimensions[o],o,this)},r.prototype.dimension=function(a){return this._dimensions[a]||null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var l=this._dimensions[o];a.push(typeof l=="string"?l:l.toArray())}return a},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var l=this._dimensions[o];typeof l=="string"?a.push(JSON.stringify(l)):a.push(l.toString())}return"["+a.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(a){return r.create(a.dimensions)},r},{isClass:!0});function XF(n){var e=[];return n.forEach((t,r)=>{t&&e.push(r)}),e}var yfe="FibonacciHeap",bfe=["smaller","larger"],xfe=ae(yfe,bfe,n=>{var{smaller:e,larger:t}=n,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,h){var d={key:c,value:h,degree:0};if(this._minimum){var f=this._minimum;d.left=f,d.right=f.right,f.right=d,d.right.left=d,e(c,f.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var h=this._minimum,d=c.degree,f=c.child;d>0;){var p=f.right;f.left.right=f.right,f.right.left=f.left,f.left=h,f.right=h.right,h.right=f,f.right.left=f,f.parent=null,f=p,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?h=null:(h=c.right,h=u(h,this._size)),this._size--,this._minimum=h,c},i.prototype.remove=function(c){this._minimum=a(this._minimum,c,-1),this.extractMinimum()};function a(c,h,d){h.key=d;var f=h.parent;return f&&e(h.key,f.key)&&(o(c,h,f),s(c,f)),e(h.key,c.key)&&(c=h),c}function o(c,h,d){h.left.right=h.right,h.right.left=h.left,d.degree--,d.child===h&&(d.child=h.right),d.degree===0&&(d.child=null),h.left=c,h.right=c.right,c.right=h,h.right.left=h,h.parent=null,h.mark=!1}function s(c,h){var d=h.parent;d&&(h.mark?(o(c,h,d),s(d)):h.mark=!0)}var l=function(c,h){c.left.right=c.right,c.right.left=c.left,c.parent=h,h.child?(c.left=h.child,c.right=h.child.right,h.child.right=c,c.right.left=c):(h.child=c,c.right=c,c.left=c),h.degree++,c.mark=!1};function u(c,h){var d=Math.floor(Math.log(h)*r)+1,f=new Array(d),p=0,v=c;if(v)for(p++,v=v.right;v!==c;)p++,v=v.right;for(var y;p>0;){for(var g=v.degree,w=v.right;y=f[g],!!y;){if(t(v.key,y.key)){var b=y;y=v,v=b}l(y,v),f[g]=null,g++}f[g]=v,v=w,p--}c=null;for(var m=0;m<d;m++)y=f[m],y&&(c?(y.left.right=y.right,y.right.left=y.left,y.left=c,y.right=c.right,c.right=y,y.right.left=y,e(y.key,c.key)&&(c=y)):c=y);return c}return i},{isClass:!0}),wfe="Spa",Sfe=["addScalar","equalScalar","FibonacciHeap"],Efe=ae(wfe,Sfe,n=>{var{addScalar:e,equalScalar:t,FibonacciHeap:r}=n;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(a,o){if(this._values[a])this._values[a].value=o;else{var s=this._heap.insert(a,o);this._values[a]=s}},i.prototype.get=function(a){var o=this._values[a];return o?o.value:0},i.prototype.accumulate=function(a,o){var s=this._values[a];s?s.value=e(s.value,o):(s=this._heap.insert(a,o),this._values[a]=s)},i.prototype.forEach=function(a,o,s){var l=this._heap,u=this._values,c=[],h=l.extractMinimum();for(h&&c.push(h);h&&h.key<=o;)h.key>=a&&(t(h.value,0)||s(h.key,h.value,this)),h=l.extractMinimum(),h&&c.push(h);for(var d=0;d<c.length;d++){var f=c[d];h=l.insert(f.key,f.value),u[h.key]=h}},i.prototype.swap=function(a,o){var s=this._values[a],l=this._values[o];if(!s&&l)s=this._heap.insert(a,l.value),this._heap.remove(l),this._values[a]=s,this._values[o]=void 0;else if(s&&!l)l=this._heap.insert(o,s.value),this._heap.remove(s),this._values[o]=l,this._values[a]=void 0;else if(s&&l){var u=s.value;s.value=l.value,l.value=u}},i},{isClass:!0}),_fe=ty(function(n){return new n(1).exp()},{hasher:HE}),Cfe=ty(function(n){return new n(1).plus(new n(5).sqrt()).div(2)},{hasher:HE}),xN=ty(function(n){return n.acos(-1)},{hasher:HE}),Afe=ty(function(n){return xN(n).times(2)},{hasher:HE});function HE(n){return n[0].precision}function YF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function BC(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YF(Object(t),!0).forEach(function(r){fr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):YF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Tfe="Unit",Mfe=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],Dfe=ae(Tfe,Mfe,n=>{var{on:e,config:t,addScalar:r,subtractScalar:i,multiplyScalar:a,divideScalar:o,pow:s,abs:l,fix:u,round:c,equal:h,isNumeric:d,format:f,number:p,Complex:v,BigNumber:y,Fraction:g}=n,w=p;function b(K,ie){if(!(this instanceof b))throw new Error("Constructor must be called with the new operator");if(!(K==null||d(K)||_s(K)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,ie===void 0)this.units=[],this.dimensions=z.map(oe=>0);else if(typeof ie=="string"){var _e=b.parse(ie);this.units=_e.units,this.dimensions=_e.dimensions}else if(ja(ie)&&ie.value===null)this.fixPrefix=ie.fixPrefix,this.skipAutomaticSimplification=ie.skipAutomaticSimplification,this.dimensions=ie.dimensions.slice(0),this.units=ie.units.map(oe=>lt({},oe));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(K)}Object.defineProperty(b,"name",{value:"Unit"}),b.prototype.constructor=b,b.prototype.type="Unit",b.prototype.isUnit=!0;var m,x,S;function C(){for(;S===" "||S==="	";)A()}function T(K){return K>="0"&&K<="9"||K==="."}function M(K){return K>="0"&&K<="9"}function A(){x++,S=m.charAt(x)}function D(K){x=K,S=m.charAt(x)}function O(){var K="",ie=x;if(S==="+"?A():S==="-"&&(K+=S,A()),!T(S))return D(ie),null;if(S==="."){if(K+=S,A(),!M(S))return D(ie),null}else{for(;M(S);)K+=S,A();S==="."&&(K+=S,A())}for(;M(S);)K+=S,A();if(S==="E"||S==="e"){var _e="",oe=x;if(_e+=S,A(),(S==="+"||S==="-")&&(_e+=S,A()),!M(S))return D(oe),K;for(K=K+_e;M(S);)K+=S,A()}return K}function U(){for(var K="";M(S)||b.isValidAlpha(S);)K+=S,A();var ie=K.charAt(0);return b.isValidAlpha(ie)?K:null}function L(K){return S===K?(A(),K):null}b.parse=function(K,ie){if(ie=ie||{},m=K,x=-1,S="",typeof m!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var _e=new b;_e.units=[];var oe=1,G=!1;A(),C();var q=O(),ce=null;if(q){if(t.number==="BigNumber")ce=new y(q);else if(t.number==="Fraction")try{ce=new g(q)}catch{ce=parseFloat(q)}else ce=parseFloat(q);C(),L("*")?(oe=1,G=!0):L("/")&&(oe=-1,G=!0)}for(var Ae=[],$=1;;){for(C();S==="(";)Ae.push(oe),$*=oe,oe=1,A(),C();var ee=void 0;if(S){var ge=S;if(ee=U(),ee===null)throw new SyntaxError('Unexpected "'+ge+'" in "'+m+'" at index '+x.toString())}else break;var xe=F(ee);if(xe===null)throw new SyntaxError('Unit "'+ee+'" not found.');var Ne=oe*$;if(C(),L("^")){C();var Fe=O();if(Fe===null)throw new SyntaxError('In "'+K+'", "^" must be followed by a floating-point number');Ne*=Fe}_e.units.push({unit:xe.unit,prefix:xe.prefix,power:Ne});for(var qe=0;qe<z.length;qe++)_e.dimensions[qe]+=(xe.unit.dimensions[qe]||0)*Ne;for(C();S===")";){if(Ae.length===0)throw new SyntaxError('Unmatched ")" in "'+m+'" at index '+x.toString());$/=Ae.pop(),A(),C()}if(G=!1,L("*")?(oe=1,G=!0):L("/")?(oe=-1,G=!0):oe=1,xe.unit.base){var ke=xe.unit.base.key;se.auto[ke]={unit:xe.unit,prefix:xe.prefix}}}if(C(),S)throw new SyntaxError('Could not parse: "'+K+'"');if(G)throw new SyntaxError('Trailing characters: "'+K+'"');if(Ae.length!==0)throw new SyntaxError('Unmatched "(" in "'+m+'"');if(_e.units.length===0&&!ie.allowNoUnits)throw new SyntaxError('"'+K+'" contains no units');return _e.value=ce!==void 0?_e._normalize(ce):null,_e},b.prototype.clone=function(){var K=new b;K.fixPrefix=this.fixPrefix,K.skipAutomaticSimplification=this.skipAutomaticSimplification,K.value=Gt(this.value),K.dimensions=this.dimensions.slice(0),K.units=[];for(var ie=0;ie<this.units.length;ie++){K.units[ie]={};for(var _e in this.units[ie])gt(this.units[ie],_e)&&(K.units[ie][_e]=this.units[ie][_e])}return K},b.prototype.valueType=function(){return zn(this.value)},b.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},b.prototype._normalize=function(K){if(K==null||this.units.length===0)return K;for(var ie=K,_e=b._getNumberConverter(zn(K)),oe=0;oe<this.units.length;oe++){var G=_e(this.units[oe].unit.value),q=_e(this.units[oe].prefix.value),ce=_e(this.units[oe].power);ie=a(ie,s(a(G,q),ce))}return ie},b.prototype._denormalize=function(K,ie){if(K==null||this.units.length===0)return K;for(var _e=K,oe=b._getNumberConverter(zn(K)),G=0;G<this.units.length;G++){var q=oe(this.units[G].unit.value),ce=oe(this.units[G].prefix.value),Ae=oe(this.units[G].power);_e=o(_e,s(a(q,ce),Ae))}return _e};var F=ty(K=>{if(gt(Z,K)){var ie=Z[K],_e=ie.prefixes[""];return{unit:ie,prefix:_e}}for(var oe in Z)if(gt(Z,oe)&&joe(K,oe)){var G=Z[oe],q=K.length-oe.length,ce=K.substring(0,q),Ae=gt(G.prefixes,ce)?G.prefixes[ce]:void 0;if(Ae!==void 0)return{unit:G,prefix:Ae}}return null},{hasher:K=>K[0],limit:100});b.isValuelessUnit=function(K){return F(K)!==null},b.prototype.hasBase=function(K){if(typeof K=="string"&&(K=B[K]),!K)return!1;for(var ie=0;ie<z.length;ie++)if(Math.abs((this.dimensions[ie]||0)-(K.dimensions[ie]||0))>1e-12)return!1;return!0},b.prototype.equalBase=function(K){for(var ie=0;ie<z.length;ie++)if(Math.abs((this.dimensions[ie]||0)-(K.dimensions[ie]||0))>1e-12)return!1;return!0},b.prototype.equals=function(K){return this.equalBase(K)&&h(this.value,K.value)},b.prototype.multiply=function(K){for(var ie=this.clone(),_e=ja(K)?K:new b(K),oe=0;oe<z.length;oe++)ie.dimensions[oe]=(this.dimensions[oe]||0)+(_e.dimensions[oe]||0);for(var G=0;G<_e.units.length;G++){var q=BC({},_e.units[G]);ie.units.push(q)}if(this.value!==null||_e.value!==null){var ce=this.value===null?this._normalize(1):this.value,Ae=_e.value===null?_e._normalize(1):_e.value;ie.value=a(ce,Ae)}else ie.value=null;return ja(K)&&(ie.skipAutomaticSimplification=!1),k(ie)},b.prototype.divideInto=function(K){return new b(K).divide(this)},b.prototype.divide=function(K){for(var ie=this.clone(),_e=ja(K)?K:new b(K),oe=0;oe<z.length;oe++)ie.dimensions[oe]=(this.dimensions[oe]||0)-(_e.dimensions[oe]||0);for(var G=0;G<_e.units.length;G++){var q=BC(BC({},_e.units[G]),{},{power:-_e.units[G].power});ie.units.push(q)}if(this.value!==null||_e.value!==null){var ce=this.value===null?this._normalize(1):this.value,Ae=_e.value===null?_e._normalize(1):_e.value;ie.value=o(ce,Ae)}else ie.value=null;return ja(K)&&(ie.skipAutomaticSimplification=!1),k(ie)},b.prototype.pow=function(K){for(var ie=this.clone(),_e=0;_e<z.length;_e++)ie.dimensions[_e]=(this.dimensions[_e]||0)*K;for(var oe=0;oe<ie.units.length;oe++)ie.units[oe].power*=K;return ie.value!==null?ie.value=s(ie.value,K):ie.value=null,ie.skipAutomaticSimplification=!1,k(ie)};function k(K){return K.equalBase(B.NONE)&&K.value!==null&&!t.predictable?K.value:K}b.prototype.abs=function(){var K=this.clone();if(K.value!==null)if(K._isDerived()||K.units.length===0||K.units[0].unit.offset===0)K.value=l(K.value);else{var ie=K._numberConverter(),_e=ie(K.units[0].unit.value),oe=ie(K.units[0].unit.offset),G=a(_e,oe);K.value=i(l(r(K.value,G)),G)}for(var q in K.units)(K.units[q].unit.name==="VA"||K.units[q].unit.name==="VAR")&&(K.units[q].unit=Z.W);return K},b.prototype.to=function(K){var ie=this.value===null?this._normalize(1):this.value,_e;if(typeof K=="string")_e=b.parse(K);else if(ja(K))_e=K.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(_e))throw new Error("Units do not match ('".concat(_e.toString(),"' != '").concat(this.toString(),"')"));if(_e.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||_e.units.length===0||this.units[0].unit.offset===_e.units[0].unit.offset)_e.value=Gt(ie);else{var oe=b._getNumberConverter(zn(ie)),G=this.units[0].unit.value,q=this.units[0].unit.offset,ce=a(G,q),Ae=_e.units[0].unit.value,$=_e.units[0].unit.offset,ee=a(Ae,$);_e.value=r(ie,oe(i(ce,ee)))}return _e.fixPrefix=!0,_e.skipAutomaticSimplification=!0,_e},b.prototype.toNumber=function(K){return w(this.toNumeric(K))},b.prototype.toNumeric=function(K){var ie;return K?ie=this.to(K):ie=this.clone(),ie._isDerived()||ie.units.length===0?ie._denormalize(ie.value):ie._denormalize(ie.value,ie.units[0].prefix.value)},b.prototype.toString=function(){return this.format()},b.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},b.fromJSON=function(K){var ie,_e=new b(K.value,(ie=K.unit)!==null&&ie!==void 0?ie:void 0);return _e.fixPrefix=K.fixPrefix||!1,_e},b.prototype.valueOf=b.prototype.toString,b.prototype.simplify=function(){var K=this.clone(),ie=[],_e;for(var oe in ye)if(gt(ye,oe)&&K.hasBase(B[oe])){_e=oe;break}if(_e==="NONE")K.units=[];else{var G;if(_e&&gt(ye,_e)&&(G=ye[_e]),G)K.units=[{unit:G.unit,prefix:G.prefix,power:1}];else{for(var q=!1,ce=0;ce<z.length;ce++){var Ae=z[ce];Math.abs(K.dimensions[ce]||0)>1e-12&&(gt(ye,Ae)?ie.push({unit:ye[Ae].unit,prefix:ye[Ae].prefix,power:K.dimensions[ce]||0}):q=!0)}ie.length<K.units.length&&!q&&(K.units=ie)}}return K},b.prototype.toSI=function(){for(var K=this.clone(),ie=[],_e=0;_e<z.length;_e++){var oe=z[_e];if(Math.abs(K.dimensions[_e]||0)>1e-12)if(gt(se.si,oe))ie.push({unit:se.si[oe].unit,prefix:se.si[oe].prefix,power:K.dimensions[_e]||0});else throw new Error("Cannot express custom unit "+oe+" in SI units")}return K.units=ie,K.fixPrefix=!0,K.skipAutomaticSimplification=!0,this.value!==null?(K.value=null,this.to(K)):K},b.prototype.formatUnits=function(){for(var K="",ie="",_e=0,oe=0,G=0;G<this.units.length;G++)this.units[G].power>0?(_e++,K+=" "+this.units[G].prefix.name+this.units[G].unit.name,Math.abs(this.units[G].power-1)>1e-15&&(K+="^"+this.units[G].power)):this.units[G].power<0&&oe++;if(oe>0)for(var q=0;q<this.units.length;q++)this.units[q].power<0&&(_e>0?(ie+=" "+this.units[q].prefix.name+this.units[q].unit.name,Math.abs(this.units[q].power+1)>1e-15&&(ie+="^"+-this.units[q].power)):(ie+=" "+this.units[q].prefix.name+this.units[q].unit.name,ie+="^"+this.units[q].power));K=K.substr(1),ie=ie.substr(1),_e>1&&oe>0&&(K="("+K+")"),oe>1&&_e>0&&(ie="("+ie+")");var ce=K;return _e>0&&oe>0&&(ce+=" / "),ce+=ie,ce},b.prototype.format=function(K){var ie=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),_e=!1;typeof ie.value<"u"&&ie.value!==null&&_s(ie.value)&&(_e=Math.abs(ie.value.re)<1e-14);for(var oe in ie.units)gt(ie.units,oe)&&ie.units[oe].unit&&(ie.units[oe].unit.name==="VA"&&_e?ie.units[oe].unit=Z.VAR:ie.units[oe].unit.name==="VAR"&&!_e&&(ie.units[oe].unit=Z.VA));ie.units.length===1&&!ie.fixPrefix&&Math.abs(ie.units[0].power-Math.round(ie.units[0].power))<1e-14&&(ie.units[0].prefix=ie._bestPrefix());var G=ie._denormalize(ie.value),q=ie.value!==null?f(G,K||{}):"",ce=ie.formatUnits();return ie.value&&_s(ie.value)&&(q="("+q+")"),ce.length>0&&q.length>0&&(q+=" "),q+=ce,q},b.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var K=this.value!==null?l(this.value):0,ie=l(this.units[0].unit.value),_e=this.units[0].prefix;if(K===0)return _e;var oe=this.units[0].power,G=Math.log(K/Math.pow(_e.value*ie,oe))/Math.LN10-1.2;if(G>-2.200001&&G<1.800001)return _e;G=Math.abs(G);var q=this.units[0].unit.prefixes;for(var ce in q)if(gt(q,ce)){var Ae=q[ce];if(Ae.scientific){var $=Math.abs(Math.log(K/Math.pow(Ae.value*ie,oe))/Math.LN10-1.2);($<G||$===G&&Ae.name.length<_e.name.length)&&(_e=Ae,G=$)}}return _e},b.prototype.splitUnit=function(K){for(var ie=this.clone(),_e=[],oe=0;oe<K.length&&(ie=ie.to(K[oe]),oe!==K.length-1);oe++){var G=ie.toNumeric(),q=c(G),ce=void 0,Ae=h(q,G);Ae?ce=q:ce=u(ie.toNumeric());var $=new b(ce,K[oe].toString());_e.push($),ie=i(ie,$)}for(var ee=0,ge=0;ge<_e.length;ge++)ee=r(ee,_e[ge].value);return h(ee,this.value)&&(ie.value=0),_e.push(ie),_e};var P={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};P.SHORTLONG=lt({},P.SHORT,P.LONG),P.BINARY_SHORT=lt({},P.BINARY_SHORT_SI,P.BINARY_SHORT_IEC),P.BINARY_LONG=lt({},P.BINARY_LONG_SI,P.BINARY_LONG_IEC);var z=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],B={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var X in B)gt(B,X)&&(B[X].key=X);var J={},Q={name:"",base:J,value:1,offset:0,dimensions:z.map(K=>0)},Z={meter:{name:"meter",base:B.LENGTH,prefixes:P.LONG,value:1,offset:0},inch:{name:"inch",base:B.LENGTH,prefixes:P.NONE,value:.0254,offset:0},foot:{name:"foot",base:B.LENGTH,prefixes:P.NONE,value:.3048,offset:0},yard:{name:"yard",base:B.LENGTH,prefixes:P.NONE,value:.9144,offset:0},mile:{name:"mile",base:B.LENGTH,prefixes:P.NONE,value:1609.344,offset:0},link:{name:"link",base:B.LENGTH,prefixes:P.NONE,value:.201168,offset:0},rod:{name:"rod",base:B.LENGTH,prefixes:P.NONE,value:5.0292,offset:0},chain:{name:"chain",base:B.LENGTH,prefixes:P.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:B.LENGTH,prefixes:P.NONE,value:1e-10,offset:0},m:{name:"m",base:B.LENGTH,prefixes:P.SHORT,value:1,offset:0},in:{name:"in",base:B.LENGTH,prefixes:P.NONE,value:.0254,offset:0},ft:{name:"ft",base:B.LENGTH,prefixes:P.NONE,value:.3048,offset:0},yd:{name:"yd",base:B.LENGTH,prefixes:P.NONE,value:.9144,offset:0},mi:{name:"mi",base:B.LENGTH,prefixes:P.NONE,value:1609.344,offset:0},li:{name:"li",base:B.LENGTH,prefixes:P.NONE,value:.201168,offset:0},rd:{name:"rd",base:B.LENGTH,prefixes:P.NONE,value:5.02921,offset:0},ch:{name:"ch",base:B.LENGTH,prefixes:P.NONE,value:20.1168,offset:0},mil:{name:"mil",base:B.LENGTH,prefixes:P.NONE,value:254e-7,offset:0},m2:{name:"m2",base:B.SURFACE,prefixes:P.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:B.SURFACE,prefixes:P.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:B.SURFACE,prefixes:P.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:B.SURFACE,prefixes:P.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:B.SURFACE,prefixes:P.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:B.SURFACE,prefixes:P.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:B.SURFACE,prefixes:P.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:B.SURFACE,prefixes:P.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:B.SURFACE,prefixes:P.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:B.SURFACE,prefixes:P.NONE,value:1e4,offset:0},m3:{name:"m3",base:B.VOLUME,prefixes:P.CUBIC,value:1,offset:0},L:{name:"L",base:B.VOLUME,prefixes:P.SHORT,value:.001,offset:0},l:{name:"l",base:B.VOLUME,prefixes:P.SHORT,value:.001,offset:0},litre:{name:"litre",base:B.VOLUME,prefixes:P.LONG,value:.001,offset:0},cuin:{name:"cuin",base:B.VOLUME,prefixes:P.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:B.VOLUME,prefixes:P.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:B.VOLUME,prefixes:P.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:B.VOLUME,prefixes:P.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:B.VOLUME,prefixes:P.NONE,value:15e-6,offset:0},drop:{name:"drop",base:B.VOLUME,prefixes:P.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:B.VOLUME,prefixes:P.NONE,value:5e-8,offset:0},minim:{name:"minim",base:B.VOLUME,prefixes:P.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:B.VOLUME,prefixes:P.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:B.VOLUME,prefixes:P.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:B.VOLUME,prefixes:P.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:B.VOLUME,prefixes:P.NONE,value:1e-6,offset:0},cup:{name:"cup",base:B.VOLUME,prefixes:P.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:B.VOLUME,prefixes:P.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:B.VOLUME,prefixes:P.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:B.VOLUME,prefixes:P.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:B.VOLUME,prefixes:P.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:B.VOLUME,prefixes:P.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:B.VOLUME,prefixes:P.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:B.VOLUME,prefixes:P.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:B.VOLUME,prefixes:P.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:B.VOLUME,prefixes:P.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:B.VOLUME,prefixes:P.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:B.VOLUME,prefixes:P.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:B.VOLUME,prefixes:P.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:B.VOLUME,prefixes:P.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:B.VOLUME,prefixes:P.NONE,value:.1173478,offset:0},obl:{name:"obl",base:B.VOLUME,prefixes:P.NONE,value:.1589873,offset:0},g:{name:"g",base:B.MASS,prefixes:P.SHORT,value:.001,offset:0},gram:{name:"gram",base:B.MASS,prefixes:P.LONG,value:.001,offset:0},ton:{name:"ton",base:B.MASS,prefixes:P.SHORT,value:907.18474,offset:0},t:{name:"t",base:B.MASS,prefixes:P.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:B.MASS,prefixes:P.LONG,value:1e3,offset:0},grain:{name:"grain",base:B.MASS,prefixes:P.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:B.MASS,prefixes:P.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:B.MASS,prefixes:P.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:B.MASS,prefixes:P.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:B.MASS,prefixes:P.NONE,value:45.359237,offset:0},stick:{name:"stick",base:B.MASS,prefixes:P.NONE,value:.115,offset:0},stone:{name:"stone",base:B.MASS,prefixes:P.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:B.MASS,prefixes:P.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:B.MASS,prefixes:P.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:B.MASS,prefixes:P.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:B.MASS,prefixes:P.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:B.MASS,prefixes:P.NONE,value:45.359237,offset:0},s:{name:"s",base:B.TIME,prefixes:P.SHORT,value:1,offset:0},min:{name:"min",base:B.TIME,prefixes:P.NONE,value:60,offset:0},h:{name:"h",base:B.TIME,prefixes:P.NONE,value:3600,offset:0},second:{name:"second",base:B.TIME,prefixes:P.LONG,value:1,offset:0},sec:{name:"sec",base:B.TIME,prefixes:P.LONG,value:1,offset:0},minute:{name:"minute",base:B.TIME,prefixes:P.NONE,value:60,offset:0},hour:{name:"hour",base:B.TIME,prefixes:P.NONE,value:3600,offset:0},day:{name:"day",base:B.TIME,prefixes:P.NONE,value:86400,offset:0},week:{name:"week",base:B.TIME,prefixes:P.NONE,value:7*86400,offset:0},month:{name:"month",base:B.TIME,prefixes:P.NONE,value:2629800,offset:0},year:{name:"year",base:B.TIME,prefixes:P.NONE,value:31557600,offset:0},decade:{name:"decade",base:B.TIME,prefixes:P.NONE,value:315576e3,offset:0},century:{name:"century",base:B.TIME,prefixes:P.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:B.TIME,prefixes:P.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:B.FREQUENCY,prefixes:P.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:B.FREQUENCY,prefixes:P.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:B.ANGLE,prefixes:P.SHORT,value:1,offset:0},radian:{name:"radian",base:B.ANGLE,prefixes:P.LONG,value:1,offset:0},deg:{name:"deg",base:B.ANGLE,prefixes:P.SHORT,value:null,offset:0},degree:{name:"degree",base:B.ANGLE,prefixes:P.LONG,value:null,offset:0},grad:{name:"grad",base:B.ANGLE,prefixes:P.SHORT,value:null,offset:0},gradian:{name:"gradian",base:B.ANGLE,prefixes:P.LONG,value:null,offset:0},cycle:{name:"cycle",base:B.ANGLE,prefixes:P.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:B.ANGLE,prefixes:P.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:B.ANGLE,prefixes:P.NONE,value:null,offset:0},A:{name:"A",base:B.CURRENT,prefixes:P.SHORT,value:1,offset:0},ampere:{name:"ampere",base:B.CURRENT,prefixes:P.LONG,value:1,offset:0},K:{name:"K",base:B.TEMPERATURE,prefixes:P.SHORT,value:1,offset:0},degC:{name:"degC",base:B.TEMPERATURE,prefixes:P.SHORT,value:1,offset:273.15},degF:{name:"degF",base:B.TEMPERATURE,prefixes:P.SHORT,value:new g(5,9),offset:459.67},degR:{name:"degR",base:B.TEMPERATURE,prefixes:P.SHORT,value:new g(5,9),offset:0},kelvin:{name:"kelvin",base:B.TEMPERATURE,prefixes:P.LONG,value:1,offset:0},celsius:{name:"celsius",base:B.TEMPERATURE,prefixes:P.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:B.TEMPERATURE,prefixes:P.LONG,value:new g(5,9),offset:459.67},rankine:{name:"rankine",base:B.TEMPERATURE,prefixes:P.LONG,value:new g(5,9),offset:0},mol:{name:"mol",base:B.AMOUNT_OF_SUBSTANCE,prefixes:P.SHORT,value:1,offset:0},mole:{name:"mole",base:B.AMOUNT_OF_SUBSTANCE,prefixes:P.LONG,value:1,offset:0},cd:{name:"cd",base:B.LUMINOUS_INTENSITY,prefixes:P.SHORT,value:1,offset:0},candela:{name:"candela",base:B.LUMINOUS_INTENSITY,prefixes:P.LONG,value:1,offset:0},N:{name:"N",base:B.FORCE,prefixes:P.SHORT,value:1,offset:0},newton:{name:"newton",base:B.FORCE,prefixes:P.LONG,value:1,offset:0},dyn:{name:"dyn",base:B.FORCE,prefixes:P.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:B.FORCE,prefixes:P.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:B.FORCE,prefixes:P.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:B.FORCE,prefixes:P.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:B.FORCE,prefixes:P.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:B.FORCE,prefixes:P.NONE,value:9.80665,offset:0},J:{name:"J",base:B.ENERGY,prefixes:P.SHORT,value:1,offset:0},joule:{name:"joule",base:B.ENERGY,prefixes:P.LONG,value:1,offset:0},erg:{name:"erg",base:B.ENERGY,prefixes:P.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:B.ENERGY,prefixes:P.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:B.ENERGY,prefixes:P.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:B.ENERGY,prefixes:P.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:B.ENERGY,prefixes:P.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:B.POWER,prefixes:P.SHORT,value:1,offset:0},watt:{name:"watt",base:B.POWER,prefixes:P.LONG,value:1,offset:0},hp:{name:"hp",base:B.POWER,prefixes:P.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:B.POWER,prefixes:P.SHORT,value:v.I,offset:0},VA:{name:"VA",base:B.POWER,prefixes:P.SHORT,value:1,offset:0},Pa:{name:"Pa",base:B.PRESSURE,prefixes:P.SHORT,value:1,offset:0},psi:{name:"psi",base:B.PRESSURE,prefixes:P.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:B.PRESSURE,prefixes:P.NONE,value:101325,offset:0},bar:{name:"bar",base:B.PRESSURE,prefixes:P.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:B.PRESSURE,prefixes:P.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:B.PRESSURE,prefixes:P.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:B.PRESSURE,prefixes:P.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:B.PRESSURE,prefixes:P.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:B.ELECTRIC_CHARGE,prefixes:P.LONG,value:1,offset:0},C:{name:"C",base:B.ELECTRIC_CHARGE,prefixes:P.SHORT,value:1,offset:0},farad:{name:"farad",base:B.ELECTRIC_CAPACITANCE,prefixes:P.LONG,value:1,offset:0},F:{name:"F",base:B.ELECTRIC_CAPACITANCE,prefixes:P.SHORT,value:1,offset:0},volt:{name:"volt",base:B.ELECTRIC_POTENTIAL,prefixes:P.LONG,value:1,offset:0},V:{name:"V",base:B.ELECTRIC_POTENTIAL,prefixes:P.SHORT,value:1,offset:0},ohm:{name:"ohm",base:B.ELECTRIC_RESISTANCE,prefixes:P.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:B.ELECTRIC_INDUCTANCE,prefixes:P.LONG,value:1,offset:0},H:{name:"H",base:B.ELECTRIC_INDUCTANCE,prefixes:P.SHORT,value:1,offset:0},siemens:{name:"siemens",base:B.ELECTRIC_CONDUCTANCE,prefixes:P.LONG,value:1,offset:0},S:{name:"S",base:B.ELECTRIC_CONDUCTANCE,prefixes:P.SHORT,value:1,offset:0},weber:{name:"weber",base:B.MAGNETIC_FLUX,prefixes:P.LONG,value:1,offset:0},Wb:{name:"Wb",base:B.MAGNETIC_FLUX,prefixes:P.SHORT,value:1,offset:0},tesla:{name:"tesla",base:B.MAGNETIC_FLUX_DENSITY,prefixes:P.LONG,value:1,offset:0},T:{name:"T",base:B.MAGNETIC_FLUX_DENSITY,prefixes:P.SHORT,value:1,offset:0},b:{name:"b",base:B.BIT,prefixes:P.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:B.BIT,prefixes:P.BINARY_LONG,value:1,offset:0},B:{name:"B",base:B.BIT,prefixes:P.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:B.BIT,prefixes:P.BINARY_LONG,value:8,offset:0}},re={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function fe(K){if(K.number==="BigNumber"){var ie=xN(y);Z.rad.value=new y(1),Z.deg.value=ie.div(180),Z.grad.value=ie.div(200),Z.cycle.value=ie.times(2),Z.arcsec.value=ie.div(648e3),Z.arcmin.value=ie.div(10800)}else Z.rad.value=1,Z.deg.value=Math.PI/180,Z.grad.value=Math.PI/200,Z.cycle.value=Math.PI*2,Z.arcsec.value=Math.PI/648e3,Z.arcmin.value=Math.PI/10800;Z.radian.value=Z.rad.value,Z.degree.value=Z.deg.value,Z.gradian.value=Z.grad.value}fe(t),e&&e("config",function(K,ie){K.number!==ie.number&&fe(K)});var se={si:{NONE:{unit:Q,prefix:P.NONE[""]},LENGTH:{unit:Z.m,prefix:P.SHORT[""]},MASS:{unit:Z.g,prefix:P.SHORT.k},TIME:{unit:Z.s,prefix:P.SHORT[""]},CURRENT:{unit:Z.A,prefix:P.SHORT[""]},TEMPERATURE:{unit:Z.K,prefix:P.SHORT[""]},LUMINOUS_INTENSITY:{unit:Z.cd,prefix:P.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:Z.mol,prefix:P.SHORT[""]},ANGLE:{unit:Z.rad,prefix:P.SHORT[""]},BIT:{unit:Z.bits,prefix:P.SHORT[""]},FORCE:{unit:Z.N,prefix:P.SHORT[""]},ENERGY:{unit:Z.J,prefix:P.SHORT[""]},POWER:{unit:Z.W,prefix:P.SHORT[""]},PRESSURE:{unit:Z.Pa,prefix:P.SHORT[""]},ELECTRIC_CHARGE:{unit:Z.C,prefix:P.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:Z.F,prefix:P.SHORT[""]},ELECTRIC_POTENTIAL:{unit:Z.V,prefix:P.SHORT[""]},ELECTRIC_RESISTANCE:{unit:Z.ohm,prefix:P.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:Z.H,prefix:P.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:Z.S,prefix:P.SHORT[""]},MAGNETIC_FLUX:{unit:Z.Wb,prefix:P.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:Z.T,prefix:P.SHORT[""]},FREQUENCY:{unit:Z.Hz,prefix:P.SHORT[""]}}};se.cgs=JSON.parse(JSON.stringify(se.si)),se.cgs.LENGTH={unit:Z.m,prefix:P.SHORT.c},se.cgs.MASS={unit:Z.g,prefix:P.SHORT[""]},se.cgs.FORCE={unit:Z.dyn,prefix:P.SHORT[""]},se.cgs.ENERGY={unit:Z.erg,prefix:P.NONE[""]},se.us=JSON.parse(JSON.stringify(se.si)),se.us.LENGTH={unit:Z.ft,prefix:P.NONE[""]},se.us.MASS={unit:Z.lbm,prefix:P.NONE[""]},se.us.TEMPERATURE={unit:Z.degF,prefix:P.NONE[""]},se.us.FORCE={unit:Z.lbf,prefix:P.NONE[""]},se.us.ENERGY={unit:Z.BTU,prefix:P.BTU[""]},se.us.POWER={unit:Z.hp,prefix:P.NONE[""]},se.us.PRESSURE={unit:Z.psi,prefix:P.NONE[""]},se.auto=JSON.parse(JSON.stringify(se.si));var ye=se.auto;b.setUnitSystem=function(K){if(gt(se,K))ye=se[K];else throw new Error("Unit system "+K+" does not exist. Choices are: "+Object.keys(se).join(", "))},b.getUnitSystem=function(){for(var K in se)if(gt(se,K)&&se[K]===ye)return K},b.typeConverters={BigNumber:function(K){return K!=null&&K.isFraction?new y(K.n).div(K.d).times(K.s):new y(K+"")},Fraction:function(K){return new g(K)},Complex:function(K){return K},number:function(K){return K!=null&&K.isFraction?p(K):K}},b.prototype._numberConverter=function(){var K=b.typeConverters[this.valueType()];if(K)return K;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},b._getNumberConverter=function(K){if(!b.typeConverters[K])throw new TypeError('Unsupported type "'+K+'"');return b.typeConverters[K]};for(var De in Z)if(gt(Z,De)){var pe=Z[De];pe.dimensions=pe.base.dimensions}for(var Me in re)if(gt(re,Me)){var be=Z[re[Me]],ne={};for(var Pe in be)gt(be,Pe)&&(ne[Pe]=be[Pe]);ne.name=Me,Z[Me]=ne}b.isValidAlpha=function(K){return/^[a-zA-Z]$/.test(K)};function ze(K){for(var ie=0;ie<K.length;ie++){if(S=K.charAt(ie),ie===0&&!b.isValidAlpha(S))throw new Error('Invalid unit name (must begin with alpha character): "'+K+'"');if(ie>0&&!(b.isValidAlpha(S)||M(S)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+K+'"')}}return b.createUnit=function(K,ie){if(typeof K!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(ie&&ie.override){for(var _e in K)if(gt(K,_e)&&b.deleteUnit(_e),K[_e].aliases)for(var oe=0;oe<K[_e].aliases.length;oe++)b.deleteUnit(K[_e].aliases[oe])}var G;for(var q in K)gt(K,q)&&(G=b.createUnitSingle(q,K[q]));return G},b.createUnitSingle=function(K,ie){if((typeof ie>"u"||ie===null)&&(ie={}),typeof K!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(gt(Z,K))throw new Error('Cannot create unit "'+K+'": a unit with that name already exists');ze(K);var _e=null,oe=[],G=0,q,ce,Ae;if(ie&&ie.type==="Unit")_e=ie.clone();else if(typeof ie=="string")ie!==""&&(q=ie);else if(typeof ie=="object")q=ie.definition,ce=ie.prefixes,G=ie.offset,Ae=ie.baseName,ie.aliases&&(oe=ie.aliases.valueOf());else throw new TypeError('Cannot create unit "'+K+'" from "'+ie.toString()+'": expecting "string" or "Unit" or "Object"');if(oe){for(var $=0;$<oe.length;$++)if(gt(Z,oe[$]))throw new Error('Cannot create alias "'+oe[$]+'": a unit with that name already exists')}if(q&&typeof q=="string"&&!_e)try{_e=b.parse(q,{allowNoUnits:!0})}catch(V){throw V.message='Could not create unit "'+K+'" from "'+q+'": '+V.message,V}else q&&q.type==="Unit"&&(_e=q.clone());oe=oe||[],G=G||0,ce&&ce.toUpperCase?ce=P[ce.toUpperCase()]||P.NONE:ce=P.NONE;var ee={};if(_e){ee={name:K,value:_e.value,dimensions:_e.dimensions.slice(0),prefixes:ce,offset:G};var ge=!1;for(var xe in B)if(gt(B,xe)){for(var Ne=!0,Fe=0;Fe<z.length;Fe++)if(Math.abs((ee.dimensions[Fe]||0)-(B[xe].dimensions[Fe]||0))>1e-12){Ne=!1;break}if(Ne){ge=!0,ee.base=B[xe];break}}if(!ge){Ae=Ae||K+"_STUFF";var qe={dimensions:_e.dimensions.slice(0)};qe.key=Ae,B[Ae]=qe,ye[Ae]={unit:ee,prefix:P.NONE[""]},ee.base=B[Ae]}}else{if(Ae=Ae||K+"_STUFF",z.indexOf(Ae)>=0)throw new Error('Cannot create new base unit "'+K+'": a base unit with that name already exists (and cannot be overridden)');z.push(Ae);for(var ke in B)gt(B,ke)&&(B[ke].dimensions[z.length-1]=0);for(var it={dimensions:[]},Ze=0;Ze<z.length;Ze++)it.dimensions[Ze]=0;it.dimensions[z.length-1]=1,it.key=Ae,B[Ae]=it,ee={name:K,value:1,dimensions:B[Ae].dimensions.slice(0),prefixes:ce,offset:G,base:B[Ae]},ye[Ae]={unit:ee,prefix:P.NONE[""]}}b.UNITS[K]=ee;for(var st=0;st<oe.length;st++){var we=oe[st],Re={};for(var et in ee)gt(ee,et)&&(Re[et]=ee[et]);Re.name=we,b.UNITS[we]=Re}return delete F.cache,new b(null,K)},b.deleteUnit=function(K){delete b.UNITS[K],delete F.cache},b.PREFIXES=P,b.BASE_DIMENSIONS=z,b.BASE_UNITS=B,b.UNIT_SYSTEMS=se,b.UNITS=Z,b},{isClass:!0}),ZF="unit",kfe=["typed","Unit"],Nfe=ae(ZF,kfe,n=>{var{typed:e,Unit:t}=n;return e(ZF,{Unit:function(r){return r.clone()},string:function(r){return t.isValuelessUnit(r)?new t(null,r):t.parse(r,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(r,i){return new t(r,i)},"number | BigNumber | Fraction":function(r){return new t(r)},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),JF="sparse",Ofe=["typed","SparseMatrix"],Pfe=ae(JF,Ofe,n=>{var{typed:e,SparseMatrix:t}=n;return e(JF,{"":function(){return new t([])},string:function(r){return new t([],r)},"Array | Matrix":function(r){return new t(r)},"Array | Matrix, string":function(r,i){return new t(r,i)}})}),KF="createUnit",Rfe=["typed","Unit"],Ife=ae(KF,Rfe,n=>{var{typed:e,Unit:t}=n;return e(KF,{"Object, Object":function(r,i){return t.createUnit(r,i)},Object:function(r){return t.createUnit(r,{})},"string, Unit | string | Object, Object":function(r,i,a){var o={};return o[r]=i,t.createUnit(o,a)},"string, Unit | string | Object":function(r,i){var a={};return a[r]=i,t.createUnit(a,{})},string:function(r){var i={};return i[r]={},t.createUnit(i,{})}})}),QF="acos",Lfe=["typed","config","Complex"],Ffe=ae(QF,Lfe,n=>{var{typed:e,config:t,Complex:r}=n;return e(QF,{number:function(i){return i>=-1&&i<=1||t.predictable?Math.acos(i):new r(i,0).acos()},Complex:function(i){return i.acos()},BigNumber:function(i){return i.acos()}})}),e5="acosh",Bfe=["typed","config","Complex"],zfe=ae(e5,Bfe,n=>{var{typed:e,config:t,Complex:r}=n;return e(e5,{number:function(i){return i>=1||t.predictable?VW(i):i<=-1?new r(Math.log(Math.sqrt(i*i-1)-i),Math.PI):new r(i,0).acosh()},Complex:function(i){return i.acosh()},BigNumber:function(i){return i.acosh()}})}),t5="acot",Ufe=["typed","BigNumber"],jfe=ae(t5,Ufe,n=>{var{typed:e,BigNumber:t}=n;return e(t5,{number:WW,Complex:function(r){return r.acot()},BigNumber:function(r){return new t(1).div(r).atan()}})}),n5="acoth",Hfe=["typed","config","Complex","BigNumber"],Vfe=ae(n5,Hfe,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(n5,{number:function(a){return a>=1||a<=-1||t.predictable?qW(a):new r(a,0).acoth()},Complex:function(a){return a.acoth()},BigNumber:function(a){return new i(1).div(a).atanh()}})}),r5="acsc",Wfe=["typed","config","Complex","BigNumber"],qfe=ae(r5,Wfe,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(r5,{number:function(a){return a<=-1||a>=1||t.predictable?GW(a):new r(a,0).acsc()},Complex:function(a){return a.acsc()},BigNumber:function(a){return new i(1).div(a).asin()}})}),i5="acsch",Gfe=["typed","BigNumber"],$fe=ae(i5,Gfe,n=>{var{typed:e,BigNumber:t}=n;return e(i5,{number:$W,Complex:function(r){return r.acsch()},BigNumber:function(r){return new t(1).div(r).asinh()}})}),a5="asec",Xfe=["typed","config","Complex","BigNumber"],Yfe=ae(a5,Xfe,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(a5,{number:function(a){return a<=-1||a>=1||t.predictable?XW(a):new r(a,0).asec()},Complex:function(a){return a.asec()},BigNumber:function(a){return new i(1).div(a).acos()}})}),o5="asech",Zfe=["typed","config","Complex","BigNumber"],Jfe=ae(o5,Zfe,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(o5,{number:function(a){if(a<=1&&a>=-1||t.predictable){var o=1/a;if(o>0||t.predictable)return YW(a);var s=Math.sqrt(o*o-1);return new r(Math.log(s-o),Math.PI)}return new r(a,0).asech()},Complex:function(a){return a.asech()},BigNumber:function(a){return new i(1).div(a).acosh()}})}),s5="asin",Kfe=["typed","config","Complex"],Qfe=ae(s5,Kfe,n=>{var{typed:e,config:t,Complex:r}=n;return e(s5,{number:function(i){return i>=-1&&i<=1||t.predictable?Math.asin(i):new r(i,0).asin()},Complex:function(i){return i.asin()},BigNumber:function(i){return i.asin()}})}),epe="asinh",tpe=["typed"],npe=ae(epe,tpe,n=>{var{typed:e}=n;return e("asinh",{number:ZW,Complex:function(t){return t.asinh()},BigNumber:function(t){return t.asinh()}})}),rpe="atan",ipe=["typed"],ape=ae(rpe,ipe,n=>{var{typed:e}=n;return e("atan",{number:function(t){return Math.atan(t)},Complex:function(t){return t.atan()},BigNumber:function(t){return t.atan()}})}),l5="atan2",ope=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],spe=ae(l5,ope,n=>{var{typed:e,matrix:t,equalScalar:r,BigNumber:i,DenseMatrix:a,concat:o}=n,s=Ps({typed:e,equalScalar:r}),l=Oa({typed:e}),u=hq({typed:e,equalScalar:r}),c=Ii({typed:e,equalScalar:r}),h=ui({typed:e,DenseMatrix:a}),d=$n({typed:e,matrix:t,concat:o});return e(l5,{"number, number":Math.atan2,"BigNumber, BigNumber":(f,p)=>i.atan2(f,p)},d({scalar:"number | BigNumber",SS:u,DS:l,SD:s,Ss:c,sS:h}))}),u5="atanh",lpe=["typed","config","Complex"],upe=ae(u5,lpe,n=>{var{typed:e,config:t,Complex:r}=n;return e(u5,{number:function(i){return i<=1&&i>=-1||t.predictable?JW(i):new r(i,0).atanh()},Complex:function(i){return i.atanh()},BigNumber:function(i){return i.atanh()}})}),Sm=ae("trigUnit",["typed"],n=>{var{typed:e}=n;return{Unit:e.referToSelf(t=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,r.valueType())(r.value)})}}),c5="cos",cpe=["typed"],hpe=ae(c5,cpe,n=>{var{typed:e}=n,t=Sm({typed:e});return e(c5,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},t)}),h5="cosh",dpe=["typed"],fpe=ae(h5,dpe,n=>{var{typed:e}=n;return e(h5,{number:hae,"Complex | BigNumber":t=>t.cosh()})}),d5="cot",ppe=["typed","BigNumber"],mpe=ae(d5,ppe,n=>{var{typed:e,BigNumber:t}=n,r=Sm({typed:e});return e(d5,{number:KW,Complex:i=>i.cot(),BigNumber:i=>new t(1).div(i.tan())},r)}),f5="coth",gpe=["typed","BigNumber"],vpe=ae(f5,gpe,n=>{var{typed:e,BigNumber:t}=n;return e(f5,{number:QW,Complex:r=>r.coth(),BigNumber:r=>new t(1).div(r.tanh())})}),p5="csc",ype=["typed","BigNumber"],bpe=ae(p5,ype,n=>{var{typed:e,BigNumber:t}=n,r=Sm({typed:e});return e(p5,{number:eq,Complex:i=>i.csc(),BigNumber:i=>new t(1).div(i.sin())},r)}),m5="csch",xpe=["typed","BigNumber"],wpe=ae(m5,xpe,n=>{var{typed:e,BigNumber:t}=n;return e(m5,{number:tq,Complex:r=>r.csch(),BigNumber:r=>new t(1).div(r.sinh())})}),g5="sec",Spe=["typed","BigNumber"],Epe=ae(g5,Spe,n=>{var{typed:e,BigNumber:t}=n,r=Sm({typed:e});return e(g5,{number:nq,Complex:i=>i.sec(),BigNumber:i=>new t(1).div(i.cos())},r)}),v5="sech",_pe=["typed","BigNumber"],Cpe=ae(v5,_pe,n=>{var{typed:e,BigNumber:t}=n;return e(v5,{number:rq,Complex:r=>r.sech(),BigNumber:r=>new t(1).div(r.cosh())})}),y5="sin",Ape=["typed"],Tpe=ae(y5,Ape,n=>{var{typed:e}=n,t=Sm({typed:e});return e(y5,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},t)}),b5="sinh",Mpe=["typed"],Dpe=ae(b5,Mpe,n=>{var{typed:e}=n;return e(b5,{number:iq,"Complex | BigNumber":t=>t.sinh()})}),x5="tan",kpe=["typed"],Npe=ae(x5,kpe,n=>{var{typed:e}=n,t=Sm({typed:e});return e(x5,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},t)}),Ope="tanh",Ppe=["typed"],Rpe=ae(Ope,Ppe,n=>{var{typed:e}=n;return e("tanh",{number:fae,"Complex | BigNumber":t=>t.tanh()})}),w5="setCartesian",Ipe=["typed","size","subset","compareNatural","Index","DenseMatrix"],Lpe=ae(w5,Ipe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=n;return e(w5,{"Array | Matrix, Array | Matrix":function(s,l){var u=[];if(r(t(s),new a(0))!==0&&r(t(l),new a(0))!==0){var c=wn(Array.isArray(s)?s:s.toArray()).sort(i),h=wn(Array.isArray(l)?l:l.toArray()).sort(i);u=[];for(var d=0;d<c.length;d++)for(var f=0;f<h.length;f++)u.push([c[d],h[f]])}return Array.isArray(s)&&Array.isArray(l)?u:new o(u)}})}),S5="setDifference",Fpe=["typed","size","subset","compareNatural","Index","DenseMatrix"],Bpe=ae(S5,Fpe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=n;return e(S5,{"Array | Matrix, Array | Matrix":function(s,l){var u;if(r(t(s),new a(0))===0)u=[];else{if(r(t(l),new a(0))===0)return wn(s.toArray());var c=$p(wn(Array.isArray(s)?s:s.toArray()).sort(i)),h=$p(wn(Array.isArray(l)?l:l.toArray()).sort(i));u=[];for(var d,f=0;f<c.length;f++){d=!1;for(var p=0;p<h.length;p++)if(i(c[f].value,h[p].value)===0&&c[f].identifier===h[p].identifier){d=!0;break}d||u.push(c[f])}}return Array.isArray(s)&&Array.isArray(l)?rS(u):new o(rS(u))}})}),E5="setDistinct",zpe=["typed","size","subset","compareNatural","Index","DenseMatrix"],Upe=ae(E5,zpe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=n;return e(E5,{"Array | Matrix":function(s){var l;if(r(t(s),new a(0))===0)l=[];else{var u=wn(Array.isArray(s)?s:s.toArray()).sort(i);l=[],l.push(u[0]);for(var c=1;c<u.length;c++)i(u[c],u[c-1])!==0&&l.push(u[c])}return Array.isArray(s)?l:new o(l)}})}),_5="setIntersect",jpe=["typed","size","subset","compareNatural","Index","DenseMatrix"],Hpe=ae(_5,jpe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=n;return e(_5,{"Array | Matrix, Array | Matrix":function(s,l){var u;if(r(t(s),new a(0))===0||r(t(l),new a(0))===0)u=[];else{var c=$p(wn(Array.isArray(s)?s:s.toArray()).sort(i)),h=$p(wn(Array.isArray(l)?l:l.toArray()).sort(i));u=[];for(var d=0;d<c.length;d++)for(var f=0;f<h.length;f++)if(i(c[d].value,h[f].value)===0&&c[d].identifier===h[f].identifier){u.push(c[d]);break}}return Array.isArray(s)&&Array.isArray(l)?rS(u):new o(rS(u))}})}),C5="setIsSubset",Vpe=["typed","size","subset","compareNatural","Index"],Wpe=ae(C5,Vpe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:a}=n;return e(C5,{"Array | Matrix, Array | Matrix":function(o,s){if(r(t(o),new a(0))===0)return!0;if(r(t(s),new a(0))===0)return!1;for(var l=$p(wn(Array.isArray(o)?o:o.toArray()).sort(i)),u=$p(wn(Array.isArray(s)?s:s.toArray()).sort(i)),c,h=0;h<l.length;h++){c=!1;for(var d=0;d<u.length;d++)if(i(l[h].value,u[d].value)===0&&l[h].identifier===u[d].identifier){c=!0;break}if(c===!1)return!1}return!0}})}),A5="setMultiplicity",qpe=["typed","size","subset","compareNatural","Index"],Gpe=ae(A5,qpe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:a}=n;return e(A5,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,s){if(r(t(s),new a(0))===0)return 0;for(var l=wn(Array.isArray(s)?s:s.toArray()),u=0,c=0;c<l.length;c++)i(l[c],o)===0&&u++;return u}})}),T5="setPowerset",$pe=["typed","size","subset","compareNatural","Index"],Xpe=ae(T5,$pe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:a}=n;return e(T5,{"Array | Matrix":function(l){if(r(t(l),new a(0))===0)return[];for(var u=wn(Array.isArray(l)?l:l.toArray()).sort(i),c=[],h=0;h.toString(2).length<=u.length;)c.push(o(u,h.toString(2).split("").reverse())),h++;return s(c)}});function o(l,u){for(var c=[],h=0;h<u.length;h++)u[h]==="1"&&c.push(l[h]);return c}function s(l){for(var u=[],c=l.length-1;c>0;c--)for(var h=0;h<c;h++)l[h].length>l[h+1].length&&(u=l[h],l[h]=l[h+1],l[h+1]=u);return l}}),M5="setSize",Ype=["typed","compareNatural"],Zpe=ae(M5,Ype,n=>{var{typed:e,compareNatural:t}=n;return e(M5,{"Array | Matrix":function(r){return Array.isArray(r)?wn(r).length:wn(r.toArray()).length},"Array | Matrix, boolean":function(r,i){if(i===!1||r.length===0)return Array.isArray(r)?wn(r).length:wn(r.toArray()).length;for(var a=wn(Array.isArray(r)?r:r.toArray()).sort(t),o=1,s=1;s<a.length;s++)t(a[s],a[s-1])!==0&&o++;return o}})}),D5="setSymDifference",Jpe=["typed","size","concat","subset","setDifference","Index"],Kpe=ae(D5,Jpe,n=>{var{typed:e,size:t,concat:r,subset:i,setDifference:a,Index:o}=n;return e(D5,{"Array | Matrix, Array | Matrix":function(s,l){if(i(t(s),new o(0))===0)return wn(l);if(i(t(l),new o(0))===0)return wn(s);var u=wn(s),c=wn(l);return r(a(u,c),a(c,u))}})}),k5="setUnion",Qpe=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],eme=ae(k5,Qpe,n=>{var{typed:e,size:t,concat:r,subset:i,setIntersect:a,setSymDifference:o,Index:s}=n;return e(k5,{"Array | Matrix, Array | Matrix":function(l,u){if(i(t(l),new s(0))===0)return wn(u);if(i(t(u),new s(0))===0)return wn(l);var c=wn(l),h=wn(u);return r(o(c,h),a(c,h))}})}),N5="add",tme=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],nme=ae(N5,tme,n=>{var{typed:e,matrix:t,addScalar:r,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=n,l=ah({typed:e}),u=mN({typed:e,equalScalar:i}),c=Fd({typed:e,DenseMatrix:a}),h=$n({typed:e,matrix:t,concat:s});return e(N5,{"any, any":r,"any, any, ...any":e.referToSelf(d=>(f,p,v)=>{for(var y=d(f,p),g=0;g<v.length;g++)y=d(y,v[g]);return y})},h({elop:r,DS:l,SS:u,Ss:c}))}),O5="hypot",rme=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],ime=ae(O5,rme,n=>{var{typed:e,abs:t,addScalar:r,divideScalar:i,multiplyScalar:a,sqrt:o,smaller:s,isPositive:l}=n;return e(O5,{"... number | BigNumber":u,Array:u,Matrix:c=>u(wn(c.toArray()))});function u(c){for(var h=0,d=0,f=0;f<c.length;f++){if(_s(c[f]))throw new TypeError("Unexpected type of argument to hypot");var p=t(c[f]);s(d,p)?(h=a(h,a(i(d,p),i(d,p))),h=r(h,1),d=p):h=r(h,l(p)?a(i(p,d),i(p,d)):p)}return a(d,o(h))}}),P5="norm",ame=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],ome=ae(P5,ame,n=>{var{typed:e,abs:t,add:r,pow:i,conj:a,sqrt:o,multiply:s,equalScalar:l,larger:u,smaller:c,matrix:h,ctranspose:d,eigs:f}=n;return e(P5,{number:Math.abs,Complex:function(C){return C.abs()},BigNumber:function(C){return C.abs()},boolean:function(C){return Math.abs(C)},Array:function(C){return S(h(C),2)},Matrix:function(C){return S(C,2)},"Array, number | BigNumber | string":function(C,T){return S(h(C),T)},"Matrix, number | BigNumber | string":function(C,T){return S(C,T)}});function p(C){var T=0;return C.forEach(function(M){var A=t(M);u(A,T)&&(T=A)},!0),T}function v(C){var T;return C.forEach(function(M){var A=t(M);(!T||c(A,T))&&(T=A)},!0),T||0}function y(C,T){if(T===Number.POSITIVE_INFINITY||T==="inf")return p(C);if(T===Number.NEGATIVE_INFINITY||T==="-inf")return v(C);if(T==="fro")return S(C,2);if(typeof T=="number"&&!isNaN(T)){if(!l(T,0)){var M=0;return C.forEach(function(A){M=r(i(t(A),T),M)},!0),i(M,1/T)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function g(C){var T=0;return C.forEach(function(M,A){T=r(T,s(M,a(M)))}),t(o(T))}function w(C){var T=[],M=0;return C.forEach(function(A,D){var O=D[1],U=r(T[O]||0,t(A));u(U,M)&&(M=U),T[O]=U},!0),M}function b(C){var T=C.size();if(T[0]!==T[1])throw new RangeError("Invalid matrix dimensions");var M=d(C),A=s(M,C),D=f(A).values.toArray(),O=D[D.length-1];return t(o(O))}function m(C){var T=[],M=0;return C.forEach(function(A,D){var O=D[0],U=r(T[O]||0,t(A));u(U,M)&&(M=U),T[O]=U},!0),M}function x(C,T){if(T===1)return w(C);if(T===Number.POSITIVE_INFINITY||T==="inf")return m(C);if(T==="fro")return g(C);if(T===2)return b(C);throw new Error("Unsupported parameter value "+T)}function S(C,T){var M=C.size();if(M.length===1)return y(C,T);if(M.length===2){if(M[0]&&M[1])return x(C,T);throw new RangeError("Invalid matrix dimensions")}}}),R5="dot",sme=["typed","addScalar","multiplyScalar","conj","size"],lme=ae(R5,sme,n=>{var{typed:e,addScalar:t,multiplyScalar:r,conj:i,size:a}=n;return e(R5,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":l});function o(c,h){var d=u(c),f=u(h),p,v;if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(f.length===1)v=f[0];else if(f.length===2&&f[1]===1)v=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(p!==v)throw new RangeError("Vectors must have equal length ("+p+" != "+v+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function s(c,h){var d=o(c,h),f=Ft(c)?c._data:c,p=Ft(c)?c._datatype||c.getDataType():void 0,v=Ft(h)?h._data:h,y=Ft(h)?h._datatype||h.getDataType():void 0,g=u(c).length===2,w=u(h).length===2,b=t,m=r;if(p&&y&&p===y&&typeof p=="string"&&p!=="mixed"){var x=p;b=e.find(t,[x,x]),m=e.find(r,[x,x])}if(!g&&!w){for(var S=m(i(f[0]),v[0]),C=1;C<d;C++)S=b(S,m(i(f[C]),v[C]));return S}if(!g&&w){for(var T=m(i(f[0]),v[0][0]),M=1;M<d;M++)T=b(T,m(i(f[M]),v[M][0]));return T}if(g&&!w){for(var A=m(i(f[0][0]),v[0]),D=1;D<d;D++)A=b(A,m(i(f[D][0]),v[D]));return A}if(g&&w){for(var O=m(i(f[0][0]),v[0][0]),U=1;U<d;U++)O=b(O,m(i(f[U][0]),v[U][0]));return O}}function l(c,h){o(c,h);for(var d=c._index,f=c._values,p=h._index,v=h._values,y=0,g=t,w=r,b=0,m=0;b<d.length&&m<p.length;){var x=d[b],S=p[m];if(x<S){b++;continue}if(x>S){m++;continue}x===S&&(y=g(y,w(f[b],v[m])),b++,m++)}return y}function u(c){return Ft(c)?c.size():a(c)}}),ume="trace",cme=["typed","matrix","add"],hme=ae(ume,cme,n=>{var{typed:e,matrix:t,add:r}=n;return e("trace",{Array:function(o){return i(t(o))},SparseMatrix:a,DenseMatrix:i,any:Gt});function i(o){var s=o._size,l=o._data;switch(s.length){case 1:if(s[0]===1)return Gt(l[0]);throw new RangeError("Matrix must be square (size: "+un(s)+")");case 2:{var u=s[0],c=s[1];if(u===c){for(var h=0,d=0;d<u;d++)h=r(h,l[d][d]);return h}else throw new RangeError("Matrix must be square (size: "+un(s)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+un(s)+")")}}function a(o){var s=o._values,l=o._index,u=o._ptr,c=o._size,h=c[0],d=c[1];if(h===d){var f=0;if(s.length>0)for(var p=0;p<d;p++)for(var v=u[p],y=u[p+1],g=v;g<y;g++){var w=l[g];if(w===p){f=r(f,s[g]);break}if(w>p)break}return f}throw new RangeError("Matrix must be square (size: "+un(c)+")")}}),I5="index",dme=["typed","Index"],fme=ae(I5,dme,n=>{var{typed:e,Index:t}=n;return e(I5,{"...number | string | BigNumber | Range | Array | Matrix":function(r){var i=r.map(function(o){return Kt(o)?o.toNumber():En(o)||Ft(o)?o.map(function(s){return Kt(s)?s.toNumber():s}):o}),a=new t;return t.apply(a,i),a}})}),Dq=new Set(["end"]),pme="Node",mme=["mathWithTransform"],gme=ae(pme,mme,n=>{var{mathWithTransform:e}=n;function t(i){for(var a of[...Dq])if(i.has(a))throw new Error('Scope contains an illegal symbol, "'+a+'" is a reserved keyword')}class r{get type(){return"Node"}get isNode(){return!0}evaluate(a){return this.compile().evaluate(a)}compile(){var a=this._compile(e,{}),o={},s=null;function l(u){var c=Ep(u);return t(c),a(c,o,s)}return{evaluate:l}}_compile(a,o){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(a){throw new Error("Cannot run forEach on a Node interface")}map(a){throw new Error("Cannot run map on a Node interface")}_ifNode(a){if(!Rn(a))throw new TypeError("Callback function must return a Node");return a}traverse(a){a(this,null,null);function o(s,l){s.forEach(function(u,c,h){l(u,c,h),o(u,l)})}o(this,a)}transform(a){function o(s,l,u){var c=a(s,l,u);return c!==s?c:s.map(o)}return o(this,null,null)}filter(a){var o=[];return this.traverse(function(s,l,u){a(s,l,u)&&o.push(s)}),o}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(a){return a.cloneDeep()})}equals(a){return a?this.type===a.type&&bd(this,a):!1}toString(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toString(a)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toHTML(a)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toTex(a)}_toTex(a){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(a){if(a&&typeof a=="object")switch(typeof a.handler){case"object":case"undefined":return;case"function":return a.handler(this,a);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return r},{isClass:!0,isNode:!0});function Pa(n){return n&&n.isIndexError?new as(n.index+1,n.min+1,n.max!==void 0?n.max+1:void 0):n}function kq(n){var{subset:e}=n;return function(t,r){try{if(Array.isArray(t))return e(t,r);if(t&&typeof t.subset=="function")return t.subset(r);if(typeof t=="string")return e(t,r);if(typeof t=="object"){if(!r.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Ea(t,r.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(i){throw Pa(i)}}}var W1="AccessorNode",vme=["subset","Node"],yme=ae(W1,vme,n=>{var{subset:e,Node:t}=n,r=kq({subset:e});function i(o){return!(Uc(o)||co(o)||gn(o)||yu(o)||Qv(o)||bl(o)||ai(o))}class a extends t{constructor(s,l){if(super(),!Rn(s))throw new TypeError('Node expected for parameter "object"');if(!Ld(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=s,this.index=l}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return W1}get isAccessorNode(){return!0}_compile(s,l){var u=this.object._compile(s,l),c=this.index._compile(s,l);if(this.index.isObjectProperty()){var h=this.index.getObjectProperty();return function(d,f,p){return Ea(u(d,f,p),h)}}else return function(d,f,p){var v=u(d,f,p),y=c(d,f,v);return r(v,y)}}forEach(s){s(this.object,"object",this),s(this.index,"index",this)}map(s){return new a(this._ifNode(s(this.object,"object",this)),this._ifNode(s(this.index,"index",this)))}clone(){return new a(this.object,this.index)}_toString(s){var l=this.object.toString(s);return i(this.object)&&(l="("+l+")"),l+this.index.toString(s)}_toHTML(s){var l=this.object.toHTML(s);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(s)}_toTex(s){var l=this.object.toTex(s);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(s)}toJSON(){return{mathjs:W1,object:this.object,index:this.index}}static fromJSON(s){return new a(s.object,s.index)}}return fr(a,"name",W1),a},{isClass:!0,isNode:!0}),q1="ArrayNode",bme=["Node"],xme=ae(q1,bme,n=>{var{Node:e}=n;class t extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(Rn))throw new TypeError("Array containing Nodes expected")}get type(){return q1}get isArrayNode(){return!0}_compile(i,a){var o=lu(this.items,function(u){return u._compile(i,a)}),s=i.config.matrix!=="Array";if(s){var l=i.matrix;return function(u,c,h){return l(lu(o,function(d){return d(u,c,h)}))}}else return function(u,c,h){return lu(o,function(d){return d(u,c,h)})}}forEach(i){for(var a=0;a<this.items.length;a++){var o=this.items[a];i(o,"items["+a+"]",this)}}map(i){for(var a=[],o=0;o<this.items.length;o++)a[o]=this._ifNode(i(this.items[o],"items["+o+"]",this));return new t(a)}clone(){return new t(this.items.slice(0))}_toString(i){var a=this.items.map(function(o){return o.toString(i)});return"["+a.join(", ")+"]"}toJSON(){return{mathjs:q1,items:this.items}}static fromJSON(i){return new t(i.items)}_toHTML(i){var a=this.items.map(function(o){return o.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function a(o,s){var l=o.some(co)&&!o.every(co),u=s||l,c=u?"&":"\\\\",h=o.map(function(d){return d.items?a(d.items,!s):d.toTex(i)}).join(c);return l||!u||u&&!s?"\\begin{bmatrix}"+h+"\\end{bmatrix}":h}return a(this.items,!1)}}return fr(t,"name",q1),t},{isClass:!0,isNode:!0});function wme(n){var{subset:e,matrix:t}=n;return function(r,i,a){try{if(Array.isArray(r)){var o=t(r).subset(i,a).valueOf();return o.forEach((s,l)=>{r[l]=s}),r}else{if(r&&typeof r.subset=="function")return r.subset(i,a);if(typeof r=="string")return e(r,i,a);if(typeof r=="object"){if(!i.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Vp(r,i.getObjectProperty(),a),r}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(s){throw Pa(s)}}}var ys=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function G1(n,e){if(!e||e!=="auto")return n;for(var t=n;bl(t);)t=t.content;return t}function Fn(n,e,t,r){var i=n;e!=="keep"&&(i=n.getContent());for(var a=i.getIdentifier(),o=null,s=0;s<ys.length;s++)if(a in ys[s]){o=s;break}if(a==="OperatorNode:multiply"&&i.implicit&&t!=="show"){var l=G1(i.args[0],e);!(gn(l)&&r&&r.getIdentifier()==="OperatorNode:divide"&&CM(G1(r.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&CM(G1(l.args[0],e))&&gn(G1(l.args[1])))&&(o+=1)}return o}function gg(n,e){var t=n;e!=="keep"&&(t=n.getContent());var r=t.getIdentifier(),i=Fn(t,e);if(i===null)return null;var a=ys[i][r];if(gt(a,"associativity")){if(a.associativity==="left")return"left";if(a.associativity==="right")return"right";throw Error("'"+r+"' has the invalid associativity '"+a.associativity+"'.")}return null}function zC(n,e,t){var r=t!=="keep"?n.getContent():n,i=t!=="keep"?n.getContent():e,a=r.getIdentifier(),o=i.getIdentifier(),s=Fn(r,t);if(s===null)return null;var l=ys[s][a];if(gt(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===o)return!0;return!1}return null}function Sme(n){var e="OperatorNode:"+n;for(var t of ys)if(e in t)return t[e].op;return null}var $1="AssignmentNode",Eme=["subset","?matrix","Node"],_me=ae($1,Eme,n=>{var{subset:e,matrix:t,Node:r}=n,i=kq({subset:e}),a=wme({subset:e,matrix:t});function o(l,u,c){u||(u="keep");var h=Fn(l,u,c),d=Fn(l.value,u,c);return u==="all"||d!==null&&d<=h}class s extends r{constructor(u,c,h){if(super(),this.object=u,this.index=h?c:null,this.value=h||c,!ai(u)&&!Uc(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(ai(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!Ld(this.index))throw new TypeError('IndexNode expected as "index"');if(!Rn(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return $1}get isAssignmentNode(){return!0}_compile(u,c){var h=this.object._compile(u,c),d=this.index?this.index._compile(u,c):null,f=this.value._compile(u,c),p=this.object.name;if(this.index)if(this.index.isObjectProperty()){var v=this.index.getObjectProperty();return function(b,m,x){var S=h(b,m,x),C=f(b,m,x);return Vp(S,v,C),C}}else{if(ai(this.object))return function(b,m,x){var S=h(b,m,x),C=f(b,m,x),T=d(b,m,S);return b.set(p,a(S,T,C)),C};var y=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var g=this.object.index.getObjectProperty();return function(b,m,x){var S=y(b,m,x),C=Ea(S,g),T=d(b,m,C),M=f(b,m,x);return Vp(S,g,a(C,T,M)),M}}else{var w=this.object.index._compile(u,c);return function(b,m,x){var S=y(b,m,x),C=w(b,m,S),T=i(S,C),M=d(b,m,T),A=f(b,m,x);return a(S,C,a(T,M,A)),A}}}else{if(!ai(this.object))throw new TypeError("SymbolNode expected as object");return function(b,m,x){var S=f(b,m,x);return b.set(p,S),S}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),h=this.index?this._ifNode(u(this.index,"index",this)):null,d=this._ifNode(u(this.value,"value",this));return new s(c,h,d)}clone(){return new s(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),h=this.index?this.index.toString(u):"",d=this.value.toString(u);return o(this,u&&u.parenthesis,u&&u.implicit)&&(d="("+d+")"),c+h+" = "+d}toJSON(){return{mathjs:$1,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new s(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),h=this.index?this.index.toHTML(u):"",d=this.value.toHTML(u);return o(this,u&&u.parenthesis,u&&u.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+h+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(u){var c=this.object.toTex(u),h=this.index?this.index.toTex(u):"",d=this.value.toTex(u);return o(this,u&&u.parenthesis,u&&u.implicit)&&(d="\\left(".concat(d,"\\right)")),c+h+"="+d}}return fr(s,"name",$1),s},{isClass:!0,isNode:!0}),X1="BlockNode",Cme=["ResultSet","Node"],Ame=ae(X1,Cme,n=>{var{ResultSet:e,Node:t}=n;class r extends t{constructor(a){if(super(),!Array.isArray(a))throw new Error("Array expected");this.blocks=a.map(function(o){var s=o&&o.node,l=o&&o.visible!==void 0?o.visible:!0;if(!Rn(s))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:s,visible:l}})}get type(){return X1}get isBlockNode(){return!0}_compile(a,o){var s=lu(this.blocks,function(l){return{evaluate:l.node._compile(a,o),visible:l.visible}});return function(l,u,c){var h=[];return FE(s,function(d){var f=d.evaluate(l,u,c);d.visible&&h.push(f)}),new e(h)}}forEach(a){for(var o=0;o<this.blocks.length;o++)a(this.blocks[o].node,"blocks["+o+"].node",this)}map(a){for(var o=[],s=0;s<this.blocks.length;s++){var l=this.blocks[s],u=this._ifNode(a(l.node,"blocks["+s+"].node",this));o[s]={node:u,visible:l.visible}}return new r(o)}clone(){var a=this.blocks.map(function(o){return{node:o.node,visible:o.visible}});return new r(a)}_toString(a){return this.blocks.map(function(o){return o.node.toString(a)+(o.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:X1,blocks:this.blocks}}static fromJSON(a){return new r(a.blocks)}_toHTML(a){return this.blocks.map(function(o){return o.node.toHTML(a)+(o.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(a){return this.blocks.map(function(o){return o.node.toTex(a)+(o.visible?"":";")}).join(`\\;\\;
`)}}return fr(r,"name",X1),r},{isClass:!0,isNode:!0}),Y1="ConditionalNode",Tme=["Node"],Mme=ae(Y1,Tme,n=>{var{Node:e}=n;function t(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(Kt(i))return!i.isZero();if(_s(i))return!!(i.re||i.im);if(ja(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+zn(i)+'"')}class r extends e{constructor(a,o,s){if(super(),!Rn(a))throw new TypeError("Parameter condition must be a Node");if(!Rn(o))throw new TypeError("Parameter trueExpr must be a Node");if(!Rn(s))throw new TypeError("Parameter falseExpr must be a Node");this.condition=a,this.trueExpr=o,this.falseExpr=s}get type(){return Y1}get isConditionalNode(){return!0}_compile(a,o){var s=this.condition._compile(a,o),l=this.trueExpr._compile(a,o),u=this.falseExpr._compile(a,o);return function(c,h,d){return t(s(c,h,d))?l(c,h,d):u(c,h,d)}}forEach(a){a(this.condition,"condition",this),a(this.trueExpr,"trueExpr",this),a(this.falseExpr,"falseExpr",this)}map(a){return new r(this._ifNode(a(this.condition,"condition",this)),this._ifNode(a(this.trueExpr,"trueExpr",this)),this._ifNode(a(this.falseExpr,"falseExpr",this)))}clone(){return new r(this.condition,this.trueExpr,this.falseExpr)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=Fn(this,o,a&&a.implicit),l=this.condition.toString(a),u=Fn(this.condition,o,a&&a.implicit);(o==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=s)&&(l="("+l+")");var c=this.trueExpr.toString(a),h=Fn(this.trueExpr,o,a&&a.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=s)&&(c="("+c+")");var d=this.falseExpr.toString(a),f=Fn(this.falseExpr,o,a&&a.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||f!==null&&f<=s)&&(d="("+d+")"),l+" ? "+c+" : "+d}toJSON(){return{mathjs:Y1,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(a){return new r(a.condition,a.trueExpr,a.falseExpr)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=Fn(this,o,a&&a.implicit),l=this.condition.toHTML(a),u=Fn(this.condition,o,a&&a.implicit);(o==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=s)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(a),h=Fn(this.trueExpr,o,a&&a.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=s)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(a),f=Fn(this.falseExpr,o,a&&a.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||f!==null&&f<=s)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(a){return"\\begin{cases} {"+this.trueExpr.toTex(a)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(a)+"}\\\\{"+this.falseExpr.toTex(a)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return fr(r,"name",Y1),r},{isClass:!0,isNode:!0}),FM=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Dme={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},kme={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},Nme=function(n,e){return FM({},n,e)},Ome=function(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.preserveFormatting,r=t===void 0?!1:t,i=e.escapeMapFn,a=i===void 0?Nme:i,o=String(n),s="",l=a(FM({},Dme),r?FM({},kme):{}),u=Object.keys(l),c=function(){var h=!1;u.forEach(function(d,f){h||o.length>=d.length&&o.slice(0,d.length)===d&&(s+=l[u[f]],o=o.slice(d.length,o.length),h=!0)}),h||(s+=o.slice(0,1),o=o.slice(1,o.length))};o;)c();return s};const Pme=is(Ome);var BM={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},bn={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},L5={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(bn.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(bn.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(bn.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(bn.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(bn.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(bn.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(bn.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(bn.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(bn.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(bn.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(bn.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(bn.bitAnd,"${args[1]}\\right)")},bitNot:{1:bn.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(bn.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(bn.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(bn.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(bn.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(bn.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(bn.and,"${args[1]}\\right)")},not:{1:bn.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(bn.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(bn.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(bn.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(bn.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(bn.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(bn.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(bn.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(bn.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(bn.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(bn.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(bn.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(bn.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(bn.to,"${args[1]}\\right)")},numeric:function(n,e){return n.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(BM.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},Rme="\\mathrm{${name}}\\left(${args}\\right)",F5={deg:"^\\circ"};function zM(n){return Pme(n,{preserveFormatting:!0})}function Nq(n,e){return e=typeof e>"u"?!1:e,e?gt(F5,n)?F5[n]:"\\mathrm{"+zM(n)+"}":gt(BM,n)?BM[n]:zM(n)}var Z1="ConstantNode",Ime=["Node"],Lme=ae(Z1,Ime,n=>{var{Node:e}=n;class t extends e{constructor(i){super(),this.value=i}get type(){return Z1}get isConstantNode(){return!0}_compile(i,a){var o=this.value;return function(){return o}}forEach(i){}map(i){return this.clone()}clone(){return new t(this.value)}_toString(i){return un(this.value,i)}_toHTML(i){var a=this._toString(i);switch(zn(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:Z1,value:this.value}}static fromJSON(i){return new t(i.value)}_toTex(i){var a=this._toString(i),o=zn(this.value);switch(o){case"string":return"\\mathtt{"+zM(a)+"}";case"number":case"BigNumber":{var s=o==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!s)return this.value.valueOf()<0?"-\\infty":"\\infty";var l=a.toLowerCase().indexOf("e");return l!==-1?a.substring(0,l)+"\\cdot10^{"+a.substring(l+1)+"}":a}case"Fraction":return this.value.toLatex();default:return a}}}return fr(t,"name",Z1),t},{isClass:!0,isNode:!0}),J1="FunctionAssignmentNode",Fme=["typed","Node"],Bme=ae(J1,Fme,n=>{var{typed:e,Node:t}=n;function r(a,o,s){var l=Fn(a,o,s),u=Fn(a.expr,o,s);return o==="all"||u!==null&&u<=l}class i extends t{constructor(o,s,l){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(s))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Rn(l))throw new TypeError('Node expected for parameter "expr"');if(Dq.has(o))throw new Error('Illegal function name, "'+o+'" is a reserved keyword');var u=new Set;for(var c of s){var h=typeof c=="string"?c:c.name;if(u.has(h))throw new Error('Duplicate parameter name "'.concat(h,'"'));u.add(h)}this.name=o,this.params=s.map(function(d){return d&&d.name||d}),this.types=s.map(function(d){return d&&d.type||"any"}),this.expr=l}get type(){return J1}get isFunctionAssignmentNode(){return!0}_compile(o,s){var l=Object.create(s);FE(this.params,function(p){l[p]=!0});var u=this.expr._compile(o,l),c=this.name,h=this.params,d=FL(this.types,","),f=c+"("+FL(this.params,", ")+")";return function(p,v,y){var g={};g[d]=function(){for(var b=Object.create(v),m=0;m<h.length;m++)b[h[m]]=arguments[m];return u(p,b,y)};var w=e(c,g);return w.syntax=f,p.set(c,w),w}}forEach(o){o(this.expr,"expr",this)}map(o){var s=this._ifNode(o(this.expr,"expr",this));return new i(this.name,this.params.slice(0),s)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(o){var s=o&&o.parenthesis?o.parenthesis:"keep",l=this.expr.toString(o);return r(this,s,o&&o.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var o=this.types;return{mathjs:J1,name:this.name,params:this.params.map(function(s,l){return{name:s,type:o[l]}}),expr:this.expr}}static fromJSON(o){return new i(o.name,o.params,o.expr)}_toHTML(o){for(var s=o&&o.parenthesis?o.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+Ho(this.params[u])+"</span>");var c=this.expr.toHTML(o);return r(this,s,o&&o.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Ho(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(o){var s=o&&o.parenthesis?o.parenthesis:"keep",l=this.expr.toTex(o);return r(this,s,o&&o.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(Nq).join(",")+"\\right)="+l}}return fr(i,"name",J1),i},{isClass:!0,isNode:!0}),K1="IndexNode",zme=["Node","size"],Ume=ae(K1,zme,n=>{var{Node:e,size:t}=n;class r extends e{constructor(a,o){if(super(),this.dimensions=a,this.dotNotation=o||!1,!Array.isArray(a)||!a.every(Rn))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return K1}get isIndexNode(){return!0}_compile(a,o){var s=lu(this.dimensions,function(u,c){var h=u.filter(p=>p.isSymbolNode&&p.name==="end").length>0;if(h){var d=Object.create(o);d.end=!0;var f=u._compile(a,d);return function(p,v,y){if(!Ft(y)&&!En(y)&&!Ai(y))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+zn(y));var g=t(y).valueOf(),w=Object.create(v);return w.end=g[c],f(p,w,y)}}else return u._compile(a,o)}),l=Ea(a,"index");return function(u,c,h){var d=lu(s,function(f){return f(u,c,h)});return l(...d)}}forEach(a){for(var o=0;o<this.dimensions.length;o++)a(this.dimensions[o],"dimensions["+o+"]",this)}map(a){for(var o=[],s=0;s<this.dimensions.length;s++)o[s]=this._ifNode(a(this.dimensions[s],"dimensions["+s+"]",this));return new r(o,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&gn(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(a){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:K1,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(a){return new r(a.dimensions,a.dotNotation)}_toHTML(a){for(var o=[],s=0;s<this.dimensions.length;s++)o[s]=this.dimensions[s].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Ho(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){var o=this.dimensions.map(function(s){return s.toTex(a)});return this.dotNotation?"."+this.getObjectProperty():"_{"+o.join(",")+"}"}}return fr(r,"name",K1),r},{isClass:!0,isNode:!0}),Q1="ObjectNode",jme=["Node"],Hme=ae(Q1,jme,n=>{var{Node:e}=n;class t extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(a){return Rn(i[a])})))throw new TypeError("Object containing Nodes expected")}get type(){return Q1}get isObjectNode(){return!0}_compile(i,a){var o={};for(var s in this.properties)if(gt(this.properties,s)){var l=op(s),u=JSON.parse(l),c=Ea(this.properties,s);o[u]=c._compile(i,a)}return function(h,d,f){var p={};for(var v in o)gt(o,v)&&(p[v]=o[v](h,d,f));return p}}forEach(i){for(var a in this.properties)gt(this.properties,a)&&i(this.properties[a],"properties["+op(a)+"]",this)}map(i){var a={};for(var o in this.properties)gt(this.properties,o)&&(a[o]=this._ifNode(i(this.properties[o],"properties["+op(o)+"]",this)));return new t(a)}clone(){var i={};for(var a in this.properties)gt(this.properties,a)&&(i[a]=this.properties[a]);return new t(i)}_toString(i){var a=[];for(var o in this.properties)gt(this.properties,o)&&a.push(op(o)+": "+this.properties[o].toString(i));return"{"+a.join(", ")+"}"}toJSON(){return{mathjs:Q1,properties:this.properties}}static fromJSON(i){return new t(i.properties)}_toHTML(i){var a=[];for(var o in this.properties)gt(this.properties,o)&&a.push('<span class="math-symbol math-property">'+Ho(o)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[o].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var a=[];for(var o in this.properties)gt(this.properties,o)&&a.push("\\mathbf{"+o+":} & "+this.properties[o].toTex(i)+"\\\\");var s="\\left\\{\\begin{array}{ll}"+a.join(`
`)+"\\end{array}\\right\\}";return s}}return fr(t,"name",Q1),t},{isClass:!0,isNode:!0});function $g(n,e){return new UV(n,new PE(e),new Set(Object.keys(e)))}var eb="OperatorNode",Vme=["Node"],Wme=ae(eb,Vme,n=>{var{Node:e}=n;function t(a,o){var s=a;if(o==="auto")for(;bl(s);)s=s.content;return gn(s)?!0:Fr(s)?t(s.args[0],o):!1}function r(a,o,s,l,u){var c=Fn(a,o,s),h=gg(a,o);if(o==="all"||l.length>2&&a.getIdentifier()!=="OperatorNode:add"&&a.getIdentifier()!=="OperatorNode:multiply")return l.map(function(A){switch(A.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(l.length){case 0:d=[];break;case 1:{var f=Fn(l[0],o,s,a);if(u&&f!==null){var p,v;if(o==="keep"?(p=l[0].getIdentifier(),v=a.getIdentifier()):(p=l[0].getContent().getIdentifier(),v=a.getContent().getIdentifier()),ys[c][v].latexLeftParens===!1){d=[!1];break}if(ys[f][p].latexParens===!1){d=[!1];break}}if(f===null){d=[!1];break}if(f<=c){d=[!0];break}d=[!1]}break;case 2:{var y,g=Fn(l[0],o,s,a),w=zC(a,l[0],o);g===null?y=!1:g===c&&h==="right"&&!w||g<c?y=!0:y=!1;var b,m=Fn(l[1],o,s,a),x=zC(a,l[1],o);if(m===null?b=!1:m===c&&h==="left"&&!x||m<c?b=!0:b=!1,u){var S,C,T;o==="keep"?(S=a.getIdentifier(),C=a.args[0].getIdentifier(),T=a.args[1].getIdentifier()):(S=a.getContent().getIdentifier(),C=a.args[0].getContent().getIdentifier(),T=a.args[1].getContent().getIdentifier()),g!==null&&(ys[c][S].latexLeftParens===!1&&(y=!1),ys[g][C].latexParens===!1&&(y=!1)),m!==null&&(ys[c][S].latexRightParens===!1&&(b=!1),ys[m][T].latexParens===!1&&(b=!1))}d=[y,b]}break;default:(a.getIdentifier()==="OperatorNode:add"||a.getIdentifier()==="OperatorNode:multiply")&&(d=l.map(function(A){var D=Fn(A,o,s,a),O=zC(a,A,o),U=gg(A,o);return D===null?!1:c===D&&h===U&&!O?!0:D<c}));break}if(l.length>=2&&a.getIdentifier()==="OperatorNode:multiply"&&a.implicit&&o!=="all"&&s==="hide")for(var M=1;M<d.length;++M)t(l[M],o)&&!d[M-1]&&(o!=="keep"||!bl(l[M-1]))&&(d[M]=!0);return d}class i extends e{constructor(o,s,l,u,c){if(super(),typeof o!="string")throw new TypeError('string expected for parameter "op"');if(typeof s!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(Rn))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=o,this.fn=s,this.args=l||[]}get type(){return eb}get isOperatorNode(){return!0}_compile(o,s){if(typeof this.fn!="string"||!uN(o,this.fn))throw o[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=Ea(o,this.fn),u=lu(this.args,function(p){return p._compile(o,s)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(p,v,y){return l(c,o,$g(p,v))}}else if(u.length===1){var h=u[0];return function(p,v,y){return l(h(p,v,y))}}else if(u.length===2){var d=u[0],f=u[1];return function(p,v,y){return l(d(p,v,y),f(p,v,y))}}else return function(p,v,y){return l.apply(null,lu(u,function(g){return g(p,v,y)}))}}forEach(o){for(var s=0;s<this.args.length;s++)o(this.args[s],"args["+s+"]",this)}map(o){for(var s=[],l=0;l<this.args.length;l++)s[l]=this._ifNode(o(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,s,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(o){var s=o&&o.parenthesis?o.parenthesis:"keep",l=o&&o.implicit?o.implicit:"hide",u=this.args,c=r(this,s,l,u,!1);if(u.length===1){var h=gg(this,s),d=u[0].toString(o);c[0]&&(d="("+d+")");var f=/[a-zA-Z]+/.test(this.op);return h==="right"?this.op+(f?" ":"")+d:h==="left"?d+(f?" ":"")+this.op:d+this.op}else if(u.length===2){var p=u[0].toString(o),v=u[1].toString(o);return c[0]&&(p="("+p+")"),c[1]&&(v="("+v+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?p+" "+v:p+" "+this.op+" "+v}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=u.map(function(g,w){return g=g.toString(o),c[w]&&(g="("+g+")"),g});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?y.join(" "):y.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:eb,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(o){return new i(o.op,o.fn,o.args,o.implicit,o.isPercentage)}_toHTML(o){var s=o&&o.parenthesis?o.parenthesis:"keep",l=o&&o.implicit?o.implicit:"hide",u=this.args,c=r(this,s,l,u,!1);if(u.length===1){var h=gg(this,s),d=u[0].toHTML(o);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Ho(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Ho(this.op)+"</span>"}else if(u.length===2){var f=u[0].toHTML(o),p=u[1].toHTML(o);return c[0]&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?f+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:f+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ho(this.op)+"</span>"+p}else{var v=u.map(function(y,g){return y=y.toHTML(o),c[g]&&(y='<span class="math-parenthesis math-round-parenthesis">(</span>'+y+'<span class="math-parenthesis math-round-parenthesis">)</span>'),y});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?v.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):v.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ho(this.op)+"</span>"):'<span class="math-function">'+Ho(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+v.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(o){var s=o&&o.parenthesis?o.parenthesis:"keep",l=o&&o.implicit?o.implicit:"hide",u=this.args,c=r(this,s,l,u,!0),h=bn[this.fn];if(h=typeof h>"u"?this.op:h,u.length===1){var d=gg(this,s),f=u[0].toTex(o);return c[0]&&(f="\\left(".concat(f,"\\right)")),d==="right"?h+f:f+h}else if(u.length===2){var p=u[0],v=p.toTex(o);c[0]&&(v="\\left(".concat(v,"\\right)"));var y=u[1],g=y.toTex(o);c[1]&&(g="\\left(".concat(g,"\\right)"));var w;switch(s==="keep"?w=p.getIdentifier():w=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return h+"{"+v+"}{"+g+"}";case"OperatorNode:pow":switch(v="{"+v+"}",g="{"+g+"}",w){case"ConditionalNode":case"OperatorNode:divide":v="\\left(".concat(v,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return v+"~"+g}return v+h+g}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=u.map(function(m,x){return m=m.toTex(o),c[x]&&(m="\\left(".concat(m,"\\right)")),m});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?b.join("~"):b.join(h)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(m){return m.toTex(o)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return fr(i,"name",eb),i},{isClass:!0,isNode:!0}),tb="ParenthesisNode",qme=["Node"],Gme=ae(tb,qme,n=>{var{Node:e}=n;class t extends e{constructor(i){if(super(),!Rn(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return tb}get isParenthesisNode(){return!0}_compile(i,a){return this.content._compile(i,a)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var a=i(this.content,"content",this);return new t(a)}clone(){return new t(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:tb,content:this.content}}static fromJSON(i){return new t(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return fr(t,"name",tb),t},{isClass:!0,isNode:!0}),nb="RangeNode",$me=["Node"],Xme=ae(nb,$me,n=>{var{Node:e}=n;function t(i,a,o){var s=Fn(i,a,o),l={},u=Fn(i.start,a,o);if(l.start=u!==null&&u<=s||a==="all",i.step){var c=Fn(i.step,a,o);l.step=c!==null&&c<=s||a==="all"}var h=Fn(i.end,a,o);return l.end=h!==null&&h<=s||a==="all",l}class r extends e{constructor(a,o,s){if(super(),!Rn(a))throw new TypeError("Node expected");if(!Rn(o))throw new TypeError("Node expected");if(s&&!Rn(s))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=a,this.end=o,this.step=s||null}get type(){return nb}get isRangeNode(){return!0}needsEnd(){var a=this.filter(function(o){return ai(o)&&o.name==="end"});return a.length>0}_compile(a,o){var s=a.range,l=this.start._compile(a,o),u=this.end._compile(a,o);if(this.step){var c=this.step._compile(a,o);return function(h,d,f){return s(l(h,d,f),u(h,d,f),c(h,d,f))}}else return function(h,d,f){return s(l(h,d,f),u(h,d,f))}}forEach(a){a(this.start,"start",this),a(this.end,"end",this),this.step&&a(this.step,"step",this)}map(a){return new r(this._ifNode(a(this.start,"start",this)),this._ifNode(a(this.end,"end",this)),this.step&&this._ifNode(a(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=t(this,o,a&&a.implicit),l,u=this.start.toString(a);if(s.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(a);s.step&&(c="("+c+")"),l+=":"+c}var h=this.end.toString(a);return s.end&&(h="("+h+")"),l+=":"+h,l}toJSON(){return{mathjs:nb,start:this.start,end:this.end,step:this.step}}static fromJSON(a){return new r(a.start,a.end,a.step)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=t(this,o,a&&a.implicit),l,u=this.start.toHTML(a);if(s.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(a);s.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var h=this.end.toHTML(a);return s.end&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+h,l}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=t(this,o,a&&a.implicit),l=this.start.toTex(a);if(s.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(a);s.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(a);return s.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return fr(r,"name",nb),r},{isClass:!0,isNode:!0}),rb="RelationalNode",Yme=["Node"],Zme=ae(rb,Yme,n=>{var{Node:e}=n,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends e{constructor(a,o){if(super(),!Array.isArray(a))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(o))throw new TypeError("Parameter params must be an array");if(a.length!==o.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=a,this.params=o}get type(){return rb}get isRelationalNode(){return!0}_compile(a,o){var s=this,l=this.params.map(u=>u._compile(a,o));return function(u,c,h){for(var d,f=l[0](u,c,h),p=0;p<s.conditionals.length;p++){d=f,f=l[p+1](u,c,h);var v=Ea(a,s.conditionals[p]);if(!v(d,f))return!1}return!0}}forEach(a){this.params.forEach((o,s)=>a(o,"params["+s+"]",this),this)}map(a){return new r(this.conditionals.slice(),this.params.map((o,s)=>this._ifNode(a(o,"params["+s+"]",this)),this))}clone(){return new r(this.conditionals,this.params)}_toString(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=Fn(this,o,a&&a.implicit),l=this.params.map(function(h,d){var f=Fn(h,o,a&&a.implicit);return o==="all"||f!==null&&f<=s?"("+h.toString(a)+")":h.toString(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+t[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:rb,conditionals:this.conditionals,params:this.params}}static fromJSON(a){return new r(a.conditionals,a.params)}_toHTML(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=Fn(this,o,a&&a.implicit),l=this.params.map(function(h,d){var f=Fn(h,o,a&&a.implicit);return o==="all"||f!==null&&f<=s?'<span class="math-parenthesis math-round-parenthesis">(</span>'+h.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':h.toHTML(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ho(t[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=Fn(this,o,a&&a.implicit),l=this.params.map(function(h,d){var f=Fn(h,o,a&&a.implicit);return o==="all"||f!==null&&f<=s?"\\left("+h.toTex(a)+"\right)":h.toTex(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=bn[this.conditionals[c]]+l[c+1];return u}}return fr(r,"name",rb),r},{isClass:!0,isNode:!0}),Jme="SymbolNode",Kme=["math","?Unit","Node"],Qme=ae(Jme,Kme,n=>{var{math:e,Unit:t,Node:r}=n;function i(o){return t?t.isValuelessUnit(o):!1}class a extends r{constructor(s){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');this.name=s}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(s,l){var u=this.name;if(l[u]===!0)return function(h,d,f){return Ea(d,u)};if(u in s)return function(h,d,f){return h.has(u)?h.get(u):Ea(s,u)};var c=i(u);return function(h,d,f){return h.has(u)?h.get(u):c?new t(null,u):a.onUndefinedSymbol(u)}}forEach(s){}map(s){return this.clone()}static onUndefinedSymbol(s){throw new Error("Undefined symbol "+s)}clone(){return new a(this.name)}_toString(s){return this.name}_toHTML(s){var l=Ho(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(s){return new a(s.name)}_toTex(s){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=Nq(this.name,l);return u[0]==="\\"?u:" "+u}}return a},{isClass:!0,isNode:!0}),ib="FunctionNode",ege=["math","Node","SymbolNode"],tge=ae(ib,ege,n=>{var e,{math:t,Node:r,SymbolNode:i}=n,a=l=>un(l,{truncate:78});function o(l,u,c){for(var h="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,f=0,p;(p=d.exec(l))!==null;)if(h+=l.substring(f,p.index),f=p.index,p[0]==="$$")h+="$",f++;else{f+=p[0].length;var v=u[p[1]];if(!v)throw new ReferenceError("Template: Property "+p[1]+" does not exist.");if(p[2]===void 0)switch(typeof v){case"string":h+=v;break;case"object":if(Rn(v))h+=v.toTex(c);else if(Array.isArray(v))h+=v.map(function(y,g){if(Rn(y))return y.toTex(c);throw new TypeError("Template: "+p[1]+"["+g+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes")}else if(Rn(v[p[2]]&&v[p[2]]))h+=v[p[2]].toTex(c);else throw new TypeError("Template: "+p[1]+"["+p[2]+"] is not a Node.")}return h+=l.slice(f),h}class s extends r{constructor(u,c){if(super(),typeof u=="string"&&(u=new i(u)),!Rn(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(Rn))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=u,this.args=c||[]}get name(){return this.fn.name||""}get type(){return ib}get isFunctionNode(){return!0}_compile(u,c){var h=this.args.map(T=>T._compile(u,c));if(ai(this.fn)){var d=this.fn.name;if(c[d]){var f=this.args;return function(T,M,A){var D=Ea(M,d);if(typeof D!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(a(D)));if(D.rawArgs)return D(f,u,$g(T,M));var O=h.map(U=>U(T,M,A));return D.apply(D,O)}}else{var p=d in u?Ea(u,d):void 0,v=typeof p=="function"&&p.rawArgs===!0,y=T=>{var M;if(T.has(d))M=T.get(d);else if(d in u)M=Ea(u,d);else return s.onUndefinedFunction(d);if(typeof M=="function")return M;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(a(M)))};if(v){var g=this.args;return function(T,M,A){var D=y(T);return D(g,u,$g(T,M))}}else switch(h.length){case 0:return function(T,M,A){var D=y(T);return D()};case 1:return function(T,M,A){var D=y(T),O=h[0];return D(O(T,M,A))};case 2:return function(T,M,A){var D=y(T),O=h[0],U=h[1];return D(O(T,M,A),U(T,M,A))};default:return function(T,M,A){var D=y(T),O=h.map(U=>U(T,M,A));return D(...O)}}}}else if(Uc(this.fn)&&Ld(this.fn.index)&&this.fn.index.isObjectProperty()){var w=this.fn.object._compile(u,c),b=this.fn.index.getObjectProperty(),m=this.args;return function(T,M,A){var D=w(T,M,A),O=yae(D,b);if(O!=null&&O.rawArgs)return O(m,u,$g(T,M));var U=h.map(L=>L(T,M,A));return O.apply(D,U)}}else{var x=this.fn.toString(),S=this.fn._compile(u,c),C=this.args;return function(T,M,A){var D=S(T,M,A);if(typeof D!="function")throw new TypeError("Expression '".concat(x,"' did not evaluate to a function; value is:")+`
  `.concat(a(D)));if(D.rawArgs)return D(C,u,$g(T,M));var O=h.map(U=>U(T,M,A));return D.apply(D,O)}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),h=[],d=0;d<this.args.length;d++)h[d]=this._ifNode(u(this.args[d],"args["+d+"]",this));return new s(c,h)}clone(){return new s(this.fn,this.args.slice(0))}toString(u){var c,h=this.fn.toString(u);return u&&typeof u.handler=="object"&&gt(u.handler,h)&&(c=u.handler[h](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(d){return d.toString(u)}),h=gm(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return h+"("+c.join(", ")+")"}toJSON(){return{mathjs:ib,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(h){return h.toHTML(u)});return'<span class="math-function">'+Ho(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&gt(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(f){return f.toTex(u)}),h;L5[this.name]&&(h=L5[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(h=t[this.name].toTex);var d;switch(typeof h){case"function":d=h(this,u);break;case"string":d=o(h,this,u);break;case"object":switch(typeof h[c.length]){case"function":d=h[c.length](this,u);break;case"string":d=o(h[c.length],this,u);break}}return typeof d<"u"?d:o(Rme,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=s,fr(s,"name",ib),fr(s,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),fr(s,"fromJSON",function(l){return new e(l.fn,l.args)}),s},{isClass:!0,isNode:!0}),B5="parse",nge=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],rge=ae(B5,nge,n=>{var{typed:e,numeric:t,config:r,AccessorNode:i,ArrayNode:a,AssignmentNode:o,BlockNode:s,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:h,IndexNode:d,ObjectNode:f,OperatorNode:p,ParenthesisNode:v,RangeNode:y,RelationalNode:g,SymbolNode:w}=n,b=e(B5,{string:function(V){return J(V,{})},"Array | Matrix":function(V){return m(V,{})},"string, Object":function(V,Ee){var Le=Ee.nodes!==void 0?Ee.nodes:{};return J(V,Le)},"Array | Matrix, Object":m});function m(V){var Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Le=Ee.nodes!==void 0?Ee.nodes:{};return cn(V,function(Je){if(typeof Je!="string")throw new TypeError("String expected");return J(Je,Le)})}var x={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},S={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},C={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},T={true:!0,false:!1,null:null,undefined:void 0},M=["NaN","Infinity"],A={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function D(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:x.NULL,nestingLevel:0,conditionalLevel:null}}function O(V,Ee){return V.expression.substr(V.index,Ee)}function U(V){return O(V,1)}function L(V){V.index++}function F(V){return V.expression.charAt(V.index-1)}function k(V){return V.expression.charAt(V.index+1)}function P(V){for(V.tokenType=x.NULL,V.token="",V.comment="";;){if(U(V)==="#")for(;U(V)!==`
`&&U(V)!=="";)V.comment+=U(V),L(V);if(b.isWhitespace(U(V),V.nestingLevel))L(V);else break}if(U(V)===""){V.tokenType=x.DELIMITER;return}if(U(V)===`
`&&!V.nestingLevel){V.tokenType=x.DELIMITER,V.token=U(V),L(V);return}var Ee=U(V),Le=O(V,2),Je=O(V,3);if(Je.length===3&&S[Je]){V.tokenType=x.DELIMITER,V.token=Je,L(V),L(V),L(V);return}if(Le.length===2&&S[Le]){V.tokenType=x.DELIMITER,V.token=Le,L(V),L(V);return}if(S[Ee]){V.tokenType=x.DELIMITER,V.token=Ee,L(V);return}if(b.isDigitDot(Ee)){V.tokenType=x.NUMBER;var he=O(V,2);if(he==="0b"||he==="0o"||he==="0x"){for(V.token+=U(V),L(V),V.token+=U(V),L(V);b.isHexDigit(U(V));)V.token+=U(V),L(V);if(U(V)===".")for(V.token+=".",L(V);b.isHexDigit(U(V));)V.token+=U(V),L(V);else if(U(V)==="i")for(V.token+="i",L(V);b.isDigit(U(V));)V.token+=U(V),L(V);return}if(U(V)==="."){if(V.token+=U(V),L(V),!b.isDigit(U(V))){V.tokenType=x.DELIMITER;return}}else{for(;b.isDigit(U(V));)V.token+=U(V),L(V);b.isDecimalMark(U(V),k(V))&&(V.token+=U(V),L(V))}for(;b.isDigit(U(V));)V.token+=U(V),L(V);if(U(V)==="E"||U(V)==="e"){if(b.isDigit(k(V))||k(V)==="-"||k(V)==="+"){if(V.token+=U(V),L(V),(U(V)==="+"||U(V)==="-")&&(V.token+=U(V),L(V)),!b.isDigit(U(V)))throw Re(V,'Digit expected, got "'+U(V)+'"');for(;b.isDigit(U(V));)V.token+=U(V),L(V);if(b.isDecimalMark(U(V),k(V)))throw Re(V,'Digit expected, got "'+U(V)+'"')}else if(k(V)===".")throw L(V),Re(V,'Digit expected, got "'+U(V)+'"')}return}if(b.isAlpha(U(V),F(V),k(V))){for(;b.isAlpha(U(V),F(V),k(V))||b.isDigit(U(V));)V.token+=U(V),L(V);gt(C,V.token)?V.tokenType=x.DELIMITER:V.tokenType=x.SYMBOL;return}for(V.tokenType=x.UNKNOWN;U(V)!=="";)V.token+=U(V),L(V);throw Re(V,'Syntax error in part "'+V.token+'"')}function z(V){do P(V);while(V.token===`
`)}function B(V){V.nestingLevel++}function X(V){V.nestingLevel--}b.isAlpha=function(V,Ee,Le){return b.isValidLatinOrGreek(V)||b.isValidMathSymbol(V,Le)||b.isValidMathSymbol(Ee,V)},b.isValidLatinOrGreek=function(V){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(V)},b.isValidMathSymbol=function(V,Ee){return/^[\uD835]$/.test(V)&&/^[\uDC00-\uDFFF]$/.test(Ee)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(Ee)},b.isWhitespace=function(V,Ee){return V===" "||V==="	"||V===`
`&&Ee>0},b.isDecimalMark=function(V,Ee){return V==="."&&Ee!=="/"&&Ee!=="*"&&Ee!=="^"},b.isDigitDot=function(V){return V>="0"&&V<="9"||V==="."},b.isDigit=function(V){return V>="0"&&V<="9"},b.isHexDigit=function(V){return V>="0"&&V<="9"||V>="a"&&V<="f"||V>="A"&&V<="F"};function J(V,Ee){var Le=D();lt(Le,{expression:V,extraNodes:Ee}),P(Le);var Je=Q(Le);if(Le.token!=="")throw Le.tokenType===x.DELIMITER?et(Le,"Unexpected operator "+Le.token):Re(Le,'Unexpected part "'+Le.token+'"');return Je}function Q(V){var Ee,Le=[],Je;for(V.token!==""&&V.token!==`
`&&V.token!==";"&&(Ee=Z(V),V.comment&&(Ee.comment=V.comment));V.token===`
`||V.token===";";)Le.length===0&&Ee&&(Je=V.token!==";",Le.push({node:Ee,visible:Je})),P(V),V.token!==`
`&&V.token!==";"&&V.token!==""&&(Ee=Z(V),V.comment&&(Ee.comment=V.comment),Je=V.token!==";",Le.push({node:Ee,visible:Je}));return Le.length>0?new s(Le):(Ee||(Ee=new u(void 0),V.comment&&(Ee.comment=V.comment)),Ee)}function Z(V){var Ee,Le,Je,he,Xe=re(V);if(V.token==="="){if(ai(Xe))return Ee=Xe.name,z(V),Je=Z(V),new o(new w(Ee),Je);if(Uc(Xe))return z(V),Je=Z(V),new o(Xe.object,Xe.index,Je);if(yu(Xe)&&ai(Xe.fn)&&(he=!0,Le=[],Ee=Xe.name,Xe.args.forEach(function(H,te){ai(H)?Le[te]=H.name:he=!1}),he))return z(V),Je=Z(V),new c(Ee,Le,Je);throw Re(V,"Invalid left hand side of assignment operator =")}return Xe}function re(V){for(var Ee=fe(V);V.token==="?";){var Le=V.conditionalLevel;V.conditionalLevel=V.nestingLevel,z(V);var Je=Ee,he=Z(V);if(V.token!==":")throw Re(V,"False part of conditional expression expected");V.conditionalLevel=null,z(V);var Xe=Z(V);Ee=new l(Je,he,Xe),V.conditionalLevel=Le}return Ee}function fe(V){for(var Ee=se(V);V.token==="or";)z(V),Ee=new p("or","or",[Ee,se(V)]);return Ee}function se(V){for(var Ee=ye(V);V.token==="xor";)z(V),Ee=new p("xor","xor",[Ee,ye(V)]);return Ee}function ye(V){for(var Ee=De(V);V.token==="and";)z(V),Ee=new p("and","and",[Ee,De(V)]);return Ee}function De(V){for(var Ee=pe(V);V.token==="|";)z(V),Ee=new p("|","bitOr",[Ee,pe(V)]);return Ee}function pe(V){for(var Ee=Me(V);V.token==="^|";)z(V),Ee=new p("^|","bitXor",[Ee,Me(V)]);return Ee}function Me(V){for(var Ee=be(V);V.token==="&";)z(V),Ee=new p("&","bitAnd",[Ee,be(V)]);return Ee}function be(V){for(var Ee=[ne(V)],Le=[],Je={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};gt(Je,V.token);){var he={name:V.token,fn:Je[V.token]};Le.push(he),z(V),Ee.push(ne(V))}return Ee.length===1?Ee[0]:Ee.length===2?new p(Le[0].name,Le[0].fn,Ee):new g(Le.map(Xe=>Xe.fn),Ee)}function ne(V){var Ee,Le,Je,he;Ee=Pe(V);for(var Xe={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};gt(Xe,V.token);)Le=V.token,Je=Xe[Le],z(V),he=[Ee,Pe(V)],Ee=new p(Le,Je,he);return Ee}function Pe(V){var Ee,Le,Je,he;Ee=ze(V);for(var Xe={to:"to",in:"to"};gt(Xe,V.token);)Le=V.token,Je=Xe[Le],z(V),Le==="in"&&V.token===""?Ee=new p("*","multiply",[Ee,new w("in")],!0):(he=[Ee,ze(V)],Ee=new p(Le,Je,he));return Ee}function ze(V){var Ee,Le=[];if(V.token===":"?Ee=new u(1):Ee=K(V),V.token===":"&&V.conditionalLevel!==V.nestingLevel){for(Le.push(Ee);V.token===":"&&Le.length<3;)z(V),V.token===")"||V.token==="]"||V.token===","||V.token===""?Le.push(new w("end")):Le.push(K(V));Le.length===3?Ee=new y(Le[0],Le[2],Le[1]):Ee=new y(Le[0],Le[1])}return Ee}function K(V){var Ee,Le,Je,he;Ee=ie(V);for(var Xe={"+":"add","-":"subtract"};gt(Xe,V.token);){Le=V.token,Je=Xe[Le],z(V);var H=ie(V);H.isPercentage?he=[Ee,new p("*","multiply",[Ee,H])]:he=[Ee,H],Ee=new p(Le,Je,he)}return Ee}function ie(V){var Ee,Le,Je,he;Ee=_e(V),Le=Ee;for(var Xe={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};gt(Xe,V.token);)Je=V.token,he=Xe[Je],z(V),Le=_e(V),Ee=new p(Je,he,[Ee,Le]);return Ee}function _e(V){var Ee,Le;for(Ee=oe(V),Le=Ee;V.tokenType===x.SYMBOL||V.token==="in"&&gn(Ee)||V.tokenType===x.NUMBER&&!gn(Le)&&(!Fr(Le)||Le.op==="!")||V.token==="(";)Le=oe(V),Ee=new p("*","multiply",[Ee,Le],!0);return Ee}function oe(V){for(var Ee=G(V),Le=Ee,Je=[];V.token==="/"&&CM(Le);)if(Je.push(lt({},V)),z(V),V.tokenType===x.NUMBER)if(Je.push(lt({},V)),z(V),V.tokenType===x.SYMBOL||V.token==="(")lt(V,Je.pop()),Je.pop(),Le=G(V),Ee=new p("/","divide",[Ee,Le]);else{Je.pop(),lt(V,Je.pop());break}else{lt(V,Je.pop());break}return Ee}function G(V){var Ee,Le,Je,he;Ee=q(V);for(var Xe={"%":"mod",mod:"mod"};gt(Xe,V.token);)Le=V.token,Je=Xe[Le],z(V),Le==="%"&&V.tokenType===x.DELIMITER&&V.token!=="("?Ee=new p("/","divide",[Ee,new u(100)],!1,!0):(he=[Ee,q(V)],Ee=new p(Le,Je,he));return Ee}function q(V){var Ee,Le,Je,he={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return gt(he,V.token)?(Je=he[V.token],Ee=V.token,z(V),Le=[q(V)],new p(Ee,Je,Le)):ce(V)}function ce(V){var Ee,Le,Je,he;return Ee=Ae(V),(V.token==="^"||V.token===".^")&&(Le=V.token,Je=Le==="^"?"pow":"dotPow",z(V),he=[Ee,q(V)],Ee=new p(Le,Je,he)),Ee}function Ae(V){var Ee,Le,Je,he;Ee=$(V);for(var Xe={"!":"factorial","'":"ctranspose"};gt(Xe,V.token);)Le=V.token,Je=Xe[Le],P(V),he=[Ee],Ee=new p(Le,Je,he),Ee=ge(V,Ee);return Ee}function $(V){var Ee=[];if(V.tokenType===x.SYMBOL&&gt(V.extraNodes,V.token)){var Le=V.extraNodes[V.token];if(P(V),V.token==="("){if(Ee=[],B(V),P(V),V.token!==")")for(Ee.push(Z(V));V.token===",";)P(V),Ee.push(Z(V));if(V.token!==")")throw Re(V,"Parenthesis ) expected");X(V),P(V)}return new Le(Ee)}return ee(V)}function ee(V){var Ee,Le;return V.tokenType===x.SYMBOL||V.tokenType===x.DELIMITER&&V.token in C?(Le=V.token,P(V),gt(T,Le)?Ee=new u(T[Le]):M.includes(Le)?Ee=new u(t(Le,"number")):Ee=new w(Le),Ee=ge(V,Ee),Ee):xe(V)}function ge(V,Ee,Le){for(var Je;(V.token==="("||V.token==="["||V.token===".")&&!Le;)if(Je=[],V.token==="(")if(ai(Ee)||Uc(Ee)){if(B(V),P(V),V.token!==")")for(Je.push(Z(V));V.token===",";)P(V),Je.push(Z(V));if(V.token!==")")throw Re(V,"Parenthesis ) expected");X(V),P(V),Ee=new h(Ee,Je)}else return Ee;else if(V.token==="["){if(B(V),P(V),V.token!=="]")for(Je.push(Z(V));V.token===",";)P(V),Je.push(Z(V));if(V.token!=="]")throw Re(V,"Parenthesis ] expected");X(V),P(V),Ee=new i(Ee,new d(Je))}else{P(V);var he=V.tokenType===x.SYMBOL||V.tokenType===x.DELIMITER&&V.token in C;if(!he)throw Re(V,"Property name expected after dot");Je.push(new u(V.token)),P(V);var Xe=!0;Ee=new i(Ee,new d(Je,Xe))}return Ee}function xe(V){var Ee,Le;return V.token==='"'||V.token==="'"?(Le=Ne(V,V.token),Ee=new u(Le),Ee=ge(V,Ee),Ee):Fe(V)}function Ne(V,Ee){for(var Le="";U(V)!==""&&U(V)!==Ee;)if(U(V)==="\\"){L(V);var Je=U(V),he=A[Je];if(he!==void 0)Le+=he,V.index+=1;else if(Je==="u"){var Xe=V.expression.slice(V.index+1,V.index+5);if(/^[0-9A-Fa-f]{4}$/.test(Xe))Le+=String.fromCharCode(parseInt(Xe,16)),V.index+=5;else throw Re(V,"Invalid unicode character \\u".concat(Xe))}else throw Re(V,"Bad escape character \\".concat(Je))}else Le+=U(V),L(V);if(P(V),V.token!==Ee)throw Re(V,"End of string ".concat(Ee," expected"));return P(V),Le}function Fe(V){var Ee,Le,Je,he;if(V.token==="["){if(B(V),P(V),V.token!=="]"){var Xe=qe(V);if(V.token===";"){for(Je=1,Le=[Xe];V.token===";";)P(V),V.token!=="]"&&(Le[Je]=qe(V),Je++);if(V.token!=="]")throw Re(V,"End of matrix ] expected");X(V),P(V),he=Le[0].items.length;for(var H=1;H<Je;H++)if(Le[H].items.length!==he)throw et(V,"Column dimensions mismatch ("+Le[H].items.length+" !== "+he+")");Ee=new a(Le)}else{if(V.token!=="]")throw Re(V,"End of matrix ] expected");X(V),P(V),Ee=Xe}}else X(V),P(V),Ee=new a([]);return ge(V,Ee)}return ke(V)}function qe(V){for(var Ee=[Z(V)],Le=1;V.token===",";)P(V),V.token!=="]"&&V.token!==";"&&(Ee[Le]=Z(V),Le++);return new a(Ee)}function ke(V){if(V.token==="{"){B(V);var Ee,Le={};do if(P(V),V.token!=="}"){if(V.token==='"'||V.token==="'")Ee=Ne(V,V.token);else if(V.tokenType===x.SYMBOL||V.tokenType===x.DELIMITER&&V.token in C)Ee=V.token,P(V);else throw Re(V,"Symbol or string expected as object key");if(V.token!==":")throw Re(V,"Colon : expected after object key");P(V),Le[Ee]=Z(V)}while(V.token===",");if(V.token!=="}")throw Re(V,"Comma , or bracket } expected after object value");X(V),P(V);var Je=new f(Le);return Je=ge(V,Je),Je}return it(V)}function it(V){var Ee;return V.tokenType===x.NUMBER?(Ee=V.token,P(V),new u(t(Ee,r.number))):Ze(V)}function Ze(V){var Ee;if(V.token==="("){if(B(V),P(V),Ee=Z(V),V.token!==")")throw Re(V,"Parenthesis ) expected");return X(V),P(V),Ee=new v(Ee),Ee=ge(V,Ee),Ee}return st(V)}function st(V){throw V.token===""?Re(V,"Unexpected end of expression"):Re(V,"Value expected")}function we(V){return V.index-V.token.length+1}function Re(V,Ee){var Le=we(V),Je=new SyntaxError(Ee+" (char "+Le+")");return Je.char=Le,Je}function et(V,Ee){var Le=we(V),Je=new SyntaxError(Ee+" (char "+Le+")");return Je.char=Le,Je}return e.addConversion({from:"string",to:"Node",convert:b}),b}),z5="compile",ige=["typed","parse"],age=ae(z5,ige,n=>{var{typed:e,parse:t}=n;return e(z5,{string:function(r){return t(r).compile()},"Array | Matrix":function(r){return cn(r,function(i){return t(i).compile()})}})}),U5="evaluate",oge=["typed","parse"],sge=ae(U5,oge,n=>{var{typed:e,parse:t}=n;return e(U5,{string:function(r){var i=G0();return t(r).compile().evaluate(i)},"string, Map | Object":function(r,i){return t(r).compile().evaluate(i)},"Array | Matrix":function(r){var i=G0();return cn(r,function(a){return t(a).compile().evaluate(i)})},"Array | Matrix, Map | Object":function(r,i){return cn(r,function(a){return t(a).compile().evaluate(i)})}})}),lge="Parser",uge=["evaluate"],cge=ae(lge,uge,n=>{var{evaluate:e}=n;function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:G0(),writable:!1})}return t.prototype.type="Parser",t.prototype.isParser=!0,t.prototype.evaluate=function(r){return e(r,this.scope)},t.prototype.get=function(r){if(this.scope.has(r))return this.scope.get(r)},t.prototype.getAll=function(){return wae(this.scope)},t.prototype.getAllAsMap=function(){return this.scope},t.prototype.set=function(r,i){return this.scope.set(r,i),i},t.prototype.remove=function(r){this.scope.delete(r)},t.prototype.clear=function(){this.scope.clear()},t},{isClass:!0}),j5="parser",hge=["typed","Parser"],dge=ae(j5,hge,n=>{var{typed:e,Parser:t}=n;return e(j5,{"":function(){return new t}})}),H5="lup",fge=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],pge=ae(H5,fge,n=>{var{typed:e,matrix:t,abs:r,addScalar:i,divideScalar:a,multiplyScalar:o,subtractScalar:s,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:h,SparseMatrix:d,Spa:f}=n;return e(H5,{DenseMatrix:function(y){return p(y)},SparseMatrix:function(y){return v(y)},Array:function(y){var g=t(y),w=p(g);return{L:w.L.valueOf(),U:w.U.valueOf(),p:w.p}}});function p(y){var g=y._size[0],w=y._size[1],b=Math.min(g,w),m=Gt(y._data),x=[],S=[g,b],C=[],T=[b,w],M,A,D,O=[];for(M=0;M<g;M++)O[M]=M;for(A=0;A<w;A++){if(A>0)for(M=0;M<g;M++){var U=Math.min(M,A),L=0;for(D=0;D<U;D++)L=i(L,o(m[M][D],m[D][A]));m[M][A]=s(m[M][A],L)}var F=A,k=0,P=0;for(M=A;M<g;M++){var z=m[M][A],B=r(z);l(B,k)&&(F=M,k=B,P=z)}if(A!==F&&(O[A]=[O[F],O[F]=O[A]][0],h._swapRows(A,F,m)),A<g)for(M=A+1;M<g;M++){var X=m[M][A];u(X,0)||(m[M][A]=a(m[M][A],P))}}for(A=0;A<w;A++)for(M=0;M<g;M++){if(A===0&&(M<w&&(C[M]=[]),x[M]=[]),M<A){M<w&&(C[M][A]=m[M][A]),A<g&&(x[M][A]=0);continue}if(M===A){M<w&&(C[M][A]=m[M][A]),A<g&&(x[M][A]=1);continue}M<w&&(C[M][A]=0),A<g&&(x[M][A]=m[M][A])}var J=new h({data:x,size:S}),Q=new h({data:C,size:T}),Z=[];for(M=0,b=O.length;M<b;M++)Z[O[M]]=M;return{L:J,U:Q,p:Z,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(y){var g=y._size[0],w=y._size[1],b=Math.min(g,w),m=y._values,x=y._index,S=y._ptr,C=[],T=[],M=[],A=[g,b],D=[],O=[],U=[],L=[b,w],F,k,P,z=[],B=[];for(F=0;F<g;F++)z[F]=F,B[F]=F;var X=function(Q,Z){var re=B[Q],fe=B[Z];z[re]=Z,z[fe]=Q,B[Q]=fe,B[Z]=re},J=function(){var Q=new f;k<g&&(M.push(C.length),C.push(1),T.push(k)),U.push(D.length);var Z=S[k],re=S[k+1];for(P=Z;P<re;P++)F=x[P],Q.set(z[F],m[P]);k>0&&Q.forEach(0,k-1,function(De,pe){d._forEachRow(De,C,T,M,function(Me,be){Me>De&&Q.accumulate(Me,c(o(be,pe)))})});var fe=k,se=Q.get(k),ye=r(se);Q.forEach(k+1,g-1,function(De,pe){var Me=r(pe);l(Me,ye)&&(fe=De,ye=Me,se=pe)}),k!==fe&&(d._swapRows(k,fe,A[1],C,T,M),d._swapRows(k,fe,L[1],D,O,U),Q.swap(k,fe),X(k,fe)),Q.forEach(0,g-1,function(De,pe){De<=k?(D.push(pe),O.push(De)):(pe=a(pe,se),u(pe,0)||(C.push(pe),T.push(De)))})};for(k=0;k<w;k++)J();return U.push(D.length),M.push(C.length),{L:new d({values:C,index:T,ptr:M,size:A}),U:new d({values:D,index:O,ptr:U,size:L}),p:z,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),V5="qr",mge=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],gge=ae(V5,mge,n=>{var{typed:e,matrix:t,zeros:r,identity:i,isZero:a,equal:o,sign:s,sqrt:l,conj:u,unaryMinus:c,addScalar:h,divideScalar:d,multiplyScalar:f,subtractScalar:p,complex:v}=n;return lt(e(V5,{DenseMatrix:function(b){return g(b)},SparseMatrix:function(b){return w()},Array:function(b){var m=t(b),x=g(m);return{Q:x.Q.valueOf(),R:x.R.valueOf()}}}),{_denseQRimpl:y});function y(b){var m=b._size[0],x=b._size[1],S=i([m],"dense"),C=S._data,T=b.clone(),M=T._data,A,D,O,U=r([m],"");for(O=0;O<Math.min(x,m);++O){var L=M[O][O],F=c(o(L,0)?1:s(L)),k=u(F),P=0;for(A=O;A<m;A++)P=h(P,f(M[A][O],u(M[A][O])));var z=f(F,l(P));if(!a(z)){var B=p(L,z);for(U[O]=1,A=O+1;A<m;A++)U[A]=d(M[A][O],B);var X=c(u(d(B,z))),J=void 0;for(D=O;D<x;D++){for(J=0,A=O;A<m;A++)J=h(J,f(u(U[A]),M[A][D]));for(J=f(J,X),A=O;A<m;A++)M[A][D]=f(p(M[A][D],f(U[A],J)),k)}for(A=0;A<m;A++){for(J=0,D=O;D<m;D++)J=h(J,f(C[A][D],U[D]));for(J=f(J,X),D=O;D<m;++D)C[A][D]=d(p(C[A][D],f(J,u(U[D]))),k)}}}return{Q:S,R:T,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function g(b){var m=y(b),x=m.R._data;if(b._data.length>0)for(var S=x[0][0].type==="Complex"?v(0):0,C=0;C<x.length;++C)for(var T=0;T<C&&T<(x[0]||[]).length;++T)x[C][T]=S;return m}function w(b){throw new Error("qr not implemented for sparse matrices yet")}});function vge(n,e,t,r){n._values;for(var i=n._index,a=n._ptr,o=n._size,s=n._datatype,l=o[0],u=o[1],c=null,h=[],d=[],f=0,p=0;p<u;p++){d[p]=f;for(var v=t?t[p]:p,y=a[v],g=a[v+1],w=y;w<g;w++){var b=i[w];h[f]=b,f++}}return d[u]=f,n.createSparseMatrix({values:c,index:h,ptr:d,size:[l,u],datatype:s})}function Oq(n,e,t,r,i,a,o){var s=0;for(t[o]=n;s>=0;){var l=t[o+s],u=t[r+l];u===-1?(s--,a[e++]=l):(t[r+l]=t[i+u],++s,t[o+s]=u)}return e}function yge(n,e){if(!n)return null;var t=0,r,i=[],a=[],o=0,s=e,l=2*e;for(r=0;r<e;r++)a[o+r]=-1;for(r=e-1;r>=0;r--)n[r]!==-1&&(a[s+r]=a[o+n[r]],a[o+n[r]]=r);for(r=0;r<e;r++)n[r]===-1&&(t=Oq(r,t,a,o,s,i,l));return i}function bge(n,e){if(!n)return null;var t=n._index,r=n._ptr,i=n._size,a=i[0],o=i[1],s=[],l=[],u=0,c=o,h,d;for(h=0;h<a;h++)l[c+h]=-1;for(var f=0;f<o;f++){s[f]=-1,l[u+f]=-1;for(var p=r[f],v=r[f+1],y=p;y<v;y++){var g=t[y];for(h=l[c+g];h!==-1&&h<f;h=d)d=l[u+h],l[u+h]=f,d===-1&&(s[h]=f);l[c+g]=f}}return s}function xge(n,e,t){for(var r=n._values,i=n._index,a=n._ptr,o=n._size,s=o[1],l=0,u=0;u<s;u++){var c=a[u];for(a[u]=l;c<a[u+1];c++)e(i[c],u,r?r[c]:1,t)&&(i[l]=i[c],r&&(r[l]=r[c]),l++)}return a[s]=l,i.splice(l,i.length-l),r&&r.splice(l,r.length-l),l}function oc(n){return-n-2}var wge="csAmd",Sge=["add","multiply","transpose"],Ege=ae(wge,Sge,n=>{var{add:e,multiply:t,transpose:r}=n;return function(u,c){if(!c||u<=0||u>3)return null;var h=c._size,d=h[0],f=h[1],p=0,v=Math.max(16,10*Math.sqrt(f));v=Math.min(f-2,v);var y=i(u,c,d,f,v);xge(y,l,null);for(var g=y._index,w=y._ptr,b=w[f],m=[],x=[],S=0,C=f+1,T=2*(f+1),M=3*(f+1),A=4*(f+1),D=5*(f+1),O=6*(f+1),U=7*(f+1),L=m,F=a(f,w,x,S,M,L,T,U,C,O,A,D),k=o(f,w,x,D,A,O,v,C,M,L,T),P=0,z,B,X,J,Q,Z,re,fe,se,ye,De,pe,Me,be,ne,Pe;k<f;){for(X=-1;P<f&&(X=x[M+P])===-1;P++);x[T+X]!==-1&&(L[x[T+X]]=-1),x[M+P]=x[T+X];var ze=x[A+X],K=x[C+X];k+=K;var ie=0;x[C+X]=-K;var _e=w[X],oe=ze===0?_e:b,G=oe;for(J=1;J<=ze+1;J++){for(J>ze?(Z=X,re=_e,fe=x[S+X]-ze):(Z=g[_e++],re=w[Z],fe=x[S+Z]),Q=1;Q<=fe;Q++)z=g[re++],!((se=x[C+z])<=0)&&(ie+=se,x[C+z]=-se,g[G++]=z,x[T+z]!==-1&&(L[x[T+z]]=L[z]),L[z]!==-1?x[T+L[z]]=x[T+z]:x[M+x[D+z]]=x[T+z]);Z!==X&&(w[Z]=oc(X),x[O+Z]=0)}for(ze!==0&&(b=G),x[D+X]=ie,w[X]=oe,x[S+X]=G-oe,x[A+X]=-2,F=s(F,p,x,O,f),ye=oe;ye<G;ye++)if(z=g[ye],!((De=x[A+z])<=0)){se=-x[C+z];var q=F-se;for(_e=w[z],pe=w[z]+De-1;_e<=pe;_e++)Z=g[_e],x[O+Z]>=F?x[O+Z]-=se:x[O+Z]!==0&&(x[O+Z]=x[D+Z]+q)}for(ye=oe;ye<G;ye++){for(z=g[ye],pe=w[z],Me=pe+x[A+z]-1,be=pe,ne=0,Pe=0,_e=pe;_e<=Me;_e++)if(Z=g[_e],x[O+Z]!==0){var ce=x[O+Z]-F;ce>0?(Pe+=ce,g[be++]=Z,ne+=Z):(w[Z]=oc(X),x[O+Z]=0)}x[A+z]=be-pe+1;var Ae=be,$=pe+x[S+z];for(_e=Me+1;_e<$;_e++){B=g[_e];var ee=x[C+B];ee<=0||(Pe+=ee,g[be++]=B,ne+=B)}Pe===0?(w[z]=oc(X),se=-x[C+z],ie-=se,K+=se,k+=se,x[C+z]=0,x[A+z]=-1):(x[D+z]=Math.min(x[D+z],Pe),g[be]=g[Ae],g[Ae]=g[pe],g[pe]=X,x[S+z]=be-pe+1,ne=(ne<0?-ne:ne)%f,x[T+z]=x[U+ne],x[U+ne]=z,L[z]=ne)}for(x[D+X]=ie,p=Math.max(p,ie),F=s(F+p,p,x,O,f),ye=oe;ye<G;ye++)if(z=g[ye],!(x[C+z]>=0))for(ne=L[z],z=x[U+ne],x[U+ne]=-1;z!==-1&&x[T+z]!==-1;z=x[T+z],F++){for(fe=x[S+z],De=x[A+z],_e=w[z]+1;_e<=w[z]+fe-1;_e++)x[O+g[_e]]=F;var ge=z;for(B=x[T+z];B!==-1;){var xe=x[S+B]===fe&&x[A+B]===De;for(_e=w[B]+1;xe&&_e<=w[B]+fe-1;_e++)x[O+g[_e]]!==F&&(xe=0);xe?(w[B]=oc(z),x[C+z]+=x[C+B],x[C+B]=0,x[A+B]=-1,B=x[T+B],x[T+ge]=B):(ge=B,B=x[T+B])}}for(_e=oe,ye=oe;ye<G;ye++)z=g[ye],!((se=-x[C+z])<=0)&&(x[C+z]=se,Pe=x[D+z]+ie-se,Pe=Math.min(Pe,f-k-se),x[M+Pe]!==-1&&(L[x[M+Pe]]=z),x[T+z]=x[M+Pe],L[z]=-1,x[M+Pe]=z,P=Math.min(P,Pe),x[D+z]=Pe,g[_e++]=z);x[C+X]=K,(x[S+X]=_e-oe)===0&&(w[X]=-1,x[O+X]=0),ze!==0&&(b=_e)}for(z=0;z<f;z++)w[z]=oc(w[z]);for(B=0;B<=f;B++)x[M+B]=-1;for(B=f;B>=0;B--)x[C+B]>0||(x[T+B]=x[M+w[B]],x[M+w[B]]=B);for(Z=f;Z>=0;Z--)x[C+Z]<=0||w[Z]!==-1&&(x[T+Z]=x[M+w[Z]],x[M+w[Z]]=Z);for(X=0,z=0;z<=f;z++)w[z]===-1&&(X=Oq(z,X,x,M,T,m,O));return m.splice(m.length-1,1),m};function i(u,c,h,d,f){var p=r(c);if(u===1&&d===h)return e(c,p);if(u===2){for(var v=p._index,y=p._ptr,g=0,w=0;w<h;w++){var b=y[w];if(y[w]=g,!(y[w+1]-b>f))for(var m=y[w+1];b<m;b++)v[g++]=v[b]}return y[h]=g,c=r(p),t(p,c)}return t(p,c)}function a(u,c,h,d,f,p,v,y,g,w,b,m){for(var x=0;x<u;x++)h[d+x]=c[x+1]-c[x];h[d+u]=0;for(var S=0;S<=u;S++)h[f+S]=-1,p[S]=-1,h[v+S]=-1,h[y+S]=-1,h[g+S]=1,h[w+S]=1,h[b+S]=0,h[m+S]=h[d+S];var C=s(0,0,h,w,u);return h[b+u]=-2,c[u]=-1,h[w+u]=0,C}function o(u,c,h,d,f,p,v,y,g,w,b){for(var m=0,x=0;x<u;x++){var S=h[d+x];if(S===0)h[f+x]=-2,m++,c[x]=-1,h[p+x]=0;else if(S>v)h[y+x]=0,h[f+x]=-1,m++,c[x]=oc(u),h[y+u]++;else{var C=h[g+S];C!==-1&&(w[C]=x),h[b+x]=h[g+S],h[g+S]=x}}return m}function s(u,c,h,d,f){if(u<2||u+c<0){for(var p=0;p<f;p++)h[d+p]!==0&&(h[d+p]=1);u=2}return u}function l(u,c){return u!==c}});function _ge(n,e,t,r,i,a,o){var s,l,u=0,c;if(n<=e||t[r+e]<=t[i+n])return-1;t[i+n]=t[r+e];var h=t[a+n];if(t[a+n]=e,h===-1)u=1,c=n;else{for(u=2,c=h;c!==t[o+c];c=t[o+c]);for(s=h;s!==c;s=l)l=t[o+s],t[o+s]=c}return{jleaf:u,q:c}}var Cge="csCounts",Age=["transpose"],Tge=ae(Cge,Age,n=>{var{transpose:e}=n;return function(t,r,i,a){if(!t||!r||!i)return null;var o=t._size,s=o[0],l=o[1],u,c,h,d,f,p,v,y=4*l+(a?l+s+1:0),g=[],w=0,b=l,m=2*l,x=3*l,S=4*l,C=5*l+1;for(h=0;h<y;h++)g[h]=-1;var T=[],M=e(t),A=M._index,D=M._ptr;for(h=0;h<l;h++)for(c=i[h],T[c]=g[x+c]===-1?1:0;c!==-1&&g[x+c]===-1;c=r[c])g[x+c]=h;if(a){for(h=0;h<l;h++)g[i[h]]=h;for(u=0;u<s;u++){for(h=l,p=D[u],v=D[u+1],f=p;f<v;f++)h=Math.min(h,g[A[f]]);g[C+u]=g[S+h],g[S+h]=u}}for(u=0;u<l;u++)g[w+u]=u;for(h=0;h<l;h++){for(c=i[h],r[c]!==-1&&T[r[c]]--,d=a?g[S+h]:c;d!==-1;d=a?g[C+d]:-1)for(f=D[d];f<D[d+1];f++){u=A[f];var O=_ge(u,c,g,x,b,m,w);O.jleaf>=1&&T[c]++,O.jleaf===2&&T[O.q]--}r[c]!==-1&&(g[w+c]=r[c])}for(c=0;c<l;c++)r[c]!==-1&&(T[r[c]]+=T[c]);return T}}),Mge="csSqr",Dge=["add","multiply","transpose"],kge=ae(Mge,Dge,n=>{var{add:e,multiply:t,transpose:r}=n,i=Ege({add:e,multiply:t,transpose:r}),a=Tge({transpose:r});return function(s,l,u){var c=l._ptr,h=l._size,d=h[1],f,p={};if(p.q=i(s,l),s&&!p.q)return null;if(u){var v=s?vge(l,null,p.q):l;p.parent=bge(v);var y=yge(p.parent,d);if(p.cp=a(v,p.parent,y,1),v&&p.parent&&p.cp&&o(v,p))for(p.unz=0,f=0;f<d;f++)p.unz+=p.cp[f]}else p.unz=4*c[d]+d,p.lnz=p.unz;return p};function o(s,l){var u=s._ptr,c=s._index,h=s._size,d=h[0],f=h[1];l.pinv=[],l.leftmost=[];var p=l.parent,v=l.pinv,y=l.leftmost,g=[],w=0,b=d,m=d+f,x=d+2*f,S,C,T,M,A;for(C=0;C<f;C++)g[b+C]=-1,g[m+C]=-1,g[x+C]=0;for(S=0;S<d;S++)y[S]=-1;for(C=f-1;C>=0;C--)for(M=u[C],A=u[C+1],T=M;T<A;T++)y[c[T]]=C;for(S=d-1;S>=0;S--)v[S]=-1,C=y[S],C!==-1&&(g[x+C]++===0&&(g[m+C]=S),g[w+S]=g[b+C],g[b+C]=S);for(l.lnz=0,l.m2=d,C=0;C<f;C++)if(S=g[b+C],l.lnz++,S<0&&(S=l.m2++),v[S]=C,!(--x[C]<=0)){l.lnz+=g[x+C];var D=p[C];D!==-1&&(g[x+D]===0&&(g[m+D]=g[m+C]),g[w+g[m+C]]=g[b+D],g[b+D]=g[w+S],g[x+D]+=g[x+C])}for(S=0;S<d;S++)v[S]<0&&(v[S]=C++);return!0}});function UM(n,e){return n[e]<0}function Pq(n,e){n[e]=oc(n[e])}function W5(n){return n<0?oc(n):n}function Nge(n,e,t,r,i){var a=e._index,o=e._ptr,s=e._size,l=s[1],u,c,h,d=0;for(r[0]=n;d>=0;){n=r[d];var f=i?i[n]:n;UM(o,n)||(Pq(o,n),r[l+d]=f<0?0:W5(o[f]));var p=1;for(c=r[l+d],h=f<0?0:W5(o[f+1]);c<h;c++)if(u=a[c],!UM(o,u)){r[l+d]=c,r[++d]=u,p=0;break}p&&(d--,r[--t]=n)}return t}function Oge(n,e,t,r,i){var a=n._ptr,o=n._size,s=e._index,l=e._ptr,u=o[1],c,h,d,f=u;for(h=l[t],d=l[t+1],c=h;c<d;c++){var p=s[c];UM(a,p)||(f=Nge(p,n,f,r,i))}for(c=f;c<u;c++)Pq(a,r[c]);return f}var Pge="csSpsolve",Rge=["divideScalar","multiply","subtract"],Ige=ae(Pge,Rge,n=>{var{divideScalar:e,multiply:t,subtract:r}=n;return function(i,a,o,s,l,u,c){var h=i._values,d=i._index,f=i._ptr,p=i._size,v=p[1],y=a._values,g=a._index,w=a._ptr,b,m,x,S,C=Oge(i,a,o,s,u);for(b=C;b<v;b++)l[s[b]]=0;for(m=w[o],x=w[o+1],b=m;b<x;b++)l[g[b]]=y[b];for(var T=C;T<v;T++){var M=s[T],A=u?u[M]:M;if(!(A<0))for(m=f[A],x=f[A+1],l[M]=e(l[M],h[c?m:x-1]),b=c?m+1:m,S=c?x:x-1;b<S;b++){var D=d[b];l[D]=r(l[D],t(h[b],l[M]))}}return C}}),Lge="csLu",Fge=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],Bge=ae(Lge,Fge,n=>{var{abs:e,divideScalar:t,multiply:r,subtract:i,larger:a,largerEq:o,SparseMatrix:s}=n,l=Ige({divideScalar:t,multiply:r,subtract:i});return function(u,c,h){if(!u)return null;var d=u._size,f=d[1],p,v=100,y=100;c&&(p=c.q,v=c.lnz||v,y=c.unz||y);var g=[],w=[],b=[],m=new s({values:g,index:w,ptr:b,size:[f,f]}),x=[],S=[],C=[],T=new s({values:x,index:S,ptr:C,size:[f,f]}),M=[],A,D,O=[],U=[];for(A=0;A<f;A++)O[A]=0,M[A]=-1,b[A+1]=0;v=0,y=0;for(var L=0;L<f;L++){b[L]=v,C[L]=y;var F=p?p[L]:L,k=l(m,u,F,U,O,M,1),P=-1,z=-1;for(D=k;D<f;D++)if(A=U[D],M[A]<0){var B=e(O[A]);a(B,z)&&(z=B,P=A)}else S[y]=M[A],x[y++]=O[A];if(P===-1||z<=0)return null;M[F]<0&&o(e(O[F]),r(z,h))&&(P=F);var X=O[P];for(S[y]=L,x[y++]=X,M[P]=L,w[v]=P,g[v++]=1,D=k;D<f;D++)A=U[D],M[A]<0&&(w[v]=A,g[v++]=t(O[A],X)),O[A]=0}for(b[f]=v,C[f]=y,D=0;D<v;D++)w[D]=M[w[D]];return g.splice(v,g.length-v),w.splice(v,w.length-v),x.splice(y,x.length-y),S.splice(y,S.length-y),{L:m,U:T,pinv:M}}}),q5="slu",zge=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],Uge=ae(q5,zge,n=>{var{typed:e,abs:t,add:r,multiply:i,transpose:a,divideScalar:o,subtract:s,larger:l,largerEq:u,SparseMatrix:c}=n,h=kge({add:r,multiply:i,transpose:a}),d=Bge({abs:t,divideScalar:o,multiply:i,subtract:s,larger:l,largerEq:u,SparseMatrix:c});return e(q5,{"SparseMatrix, number, number":function(f,p,v){if(!Nt(p)||p<0||p>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(v<0||v>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var y=h(p,f,!1),g=d(f,y,v);return{L:g.L,U:g.U,p:g.pinv,q:y.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function G5(n,e){var t,r=e.length,i=[];if(n)for(t=0;t<r;t++)i[n[t]]=e[t];else for(t=0;t<r;t++)i[t]=e[t];return i}var $5="lusolve",jge=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Hge=ae($5,jge,n=>{var{typed:e,matrix:t,lup:r,slu:i,usolve:a,lsolve:o,DenseMatrix:s}=n,l=ny({DenseMatrix:s});return e($5,{"Array, Array | Matrix":function(h,d){h=t(h);var f=r(h),p=c(f.L,f.U,f.p,null,d);return p.valueOf()},"DenseMatrix, Array | Matrix":function(h,d){var f=r(h);return c(f.L,f.U,f.p,null,d)},"SparseMatrix, Array | Matrix":function(h,d){var f=r(h);return c(f.L,f.U,f.p,null,d)},"SparseMatrix, Array | Matrix, number, number":function(h,d,f,p){var v=i(h,f,p);return c(v.L,v.U,v.p,v.q,d)},"Object, Array | Matrix":function(h,d){return c(h.L,h.U,h.p,h.q,d)}});function u(h){if(Ft(h))return h;if(En(h))return t(h);throw new TypeError("Invalid Matrix LU decomposition")}function c(h,d,f,p,v){h=u(h),d=u(d),f&&(v=l(h,v,!0),v._data=G5(f,v._data));var y=o(h,v),g=a(d,y);return p&&(g._data=G5(p,g._data)),g}}),X5="polynomialRoot",Vge=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],Wge=ae(X5,Vge,n=>{var{typed:e,isZero:t,equalScalar:r,add:i,subtract:a,multiply:o,divide:s,sqrt:l,unaryMinus:u,cbrt:c,typeOf:h,im:d,re:f}=n;return e(X5,{"number|Complex, ...number|Complex":(p,v)=>{for(var y=[p,...v];y.length>0&&t(y[y.length-1]);)y.pop();if(y.length<2)throw new RangeError("Polynomial [".concat(p,", ").concat(v,"] must have a non-zero non-constant coefficient"));switch(y.length){case 2:return[u(s(y[0],y[1]))];case 3:{var[g,w,b]=y,m=o(2,b),x=o(w,w),S=o(4,b,g);if(r(x,S))return[s(u(w),m)];var C=l(a(x,S));return[s(a(C,w),m),s(a(u(C),w),m)]}case 4:{var[T,M,A,D]=y,O=u(o(3,D)),U=o(A,A),L=o(3,D,M),F=i(o(2,A,A,A),o(27,D,D,T)),k=o(9,D,A,M);if(r(U,L)&&r(F,k))return[s(A,O)];var P=a(U,L),z=a(F,k),B=i(o(18,D,A,M,T),o(A,A,M,M)),X=i(o(4,A,A,A,T),o(4,D,M,M,M),o(27,D,D,T,T));if(r(B,X))return[s(a(o(4,D,A,M),i(o(9,D,D,T),o(A,A,A))),o(D,P)),s(a(o(9,D,T),o(A,M)),o(2,P))];var J;r(U,L)?J=z:J=s(i(z,l(a(o(z,z),o(4,P,P,P)))),2);var Q=!0,Z=c(J,Q).toArray().map(re=>s(i(A,re,s(P,re)),O));return Z.map(re=>h(re)==="Complex"&&r(f(re),f(re)+d(re))?f(re):re)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(y))}}})}),qge="Help",Gge=["evaluate"],$ge=ae(qge,Gge,n=>{var{evaluate:e}=n;function t(r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!r)throw new Error('Argument "doc" missing');this.doc=r}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var r=this.doc||{},i=`
`;if(r.name&&(i+="Name: "+r.name+`

`),r.category&&(i+="Category: "+r.category+`

`),r.description&&(i+=`Description:
    `+r.description+`

`),r.syntax&&(i+=`Syntax:
    `+r.syntax.join(`
    `)+`

`),r.examples){i+=`Examples:
`;for(var a=!1,o=e("config()"),s={config:h=>(a=!0,e("config(newConfig)",{newConfig:h}))},l=0;l<r.examples.length;l++){var u=r.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,s)}catch(h){c=h}c!==void 0&&!sN(c)&&(i+="        "+un(c,{precision:14})+`
`)}i+=`
`,a&&e("config(originalConfig)",{originalConfig:o})}return r.mayThrow&&r.mayThrow.length&&(i+="Throws: "+r.mayThrow.join(", ")+`

`),r.seealso&&r.seealso.length&&(i+="See also: "+r.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var r=Gt(this.doc);return r.mathjs="Help",r},t.fromJSON=function(r){var i={};return Object.keys(r).filter(a=>a!=="mathjs").forEach(a=>{i[a]=r[a]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0}),Xge="Chain",Yge=["?on","math","typed"],Zge=ae(Xge,Yge,n=>{var{on:e,math:t,typed:r}=n;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");lN(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return un(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function a(u,c){typeof c=="function"&&(i.prototype[u]=s(c))}function o(u,c){$x(i.prototype,u,function(){var h=c();if(typeof h=="function")return s(h)})}function s(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],h=0;h<arguments.length;h++)c[h+1]=arguments[h];if(r.isTypedFunction(u)){var d=r.resolve(u,c);if(d.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")a(u,c);else{var h=function(f){gt(u,f)&&l[f]===void 0&&o(f,()=>u[f])};for(var d in u)h(d)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(t),e&&e("import",function(u,c,h){h||o(u,c)}),i},{isClass:!0}),Y5={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},Jge={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},Kge={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Qge={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},e0e={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},t0e={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},n0e={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},r0e={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},i0e={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},a0e={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},o0e={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},Z5={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},s0e={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},l0e={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},u0e={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},c0e={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},h0e={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},d0e={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},f0e={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},p0e={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},m0e={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},g0e={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},v0e={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},y0e={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},b0e={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},x0e={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},w0e={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},S0e={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},E0e={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},_0e={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},C0e={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},A0e={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},T0e={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},M0e={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},D0e={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},k0e={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},N0e={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},O0e={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},P0e={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},R0e={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},I0e={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},L0e={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},F0e={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},B0e={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},z0e={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},U0e={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},j0e={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},H0e={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},V0e={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},W0e={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},q0e={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},G0e={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},$0e={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},X0e={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},Y0e={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},Z0e={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},J0e={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},K0e={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},Q0e={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},eve={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},tve={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},nve={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},rve={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},ive={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},ave={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},ove={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},sve={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},lve={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},uve={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},cve={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},hve={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},dve={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},fve={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},pve={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},mve={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},gve={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},vve={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},yve={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},bve={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},xve={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},wve={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},Sve={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},Eve={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},_ve={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},Cve={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},Ave={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},Tve={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},Mve={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},Dve={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},kve={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Nve={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Ove={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},Pve={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},Rve={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},Ive={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},Lve={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},Fve={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},Bve={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},zve={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},Uve={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},jve={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},Hve={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},Vve={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},Wve={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},qve={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},Gve={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},$ve={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},Xve={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},Yve={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},Zve={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},Jve={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},Kve={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},Qve={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},eye={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},tye={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},nye={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},rye={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},iye={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},aye={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},oye={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},sye={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},lye={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},uye={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},cye={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},hye={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},dye={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},fye={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},pye={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},mye={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},gye={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},vye={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},yye={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},bye={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},xye={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},wye={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},Sye={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},Eye={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},_ye={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},Cye={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},Aye={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},Tye={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},Mye={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},Dye={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},kye={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},Nye={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},Oye={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},Pye={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},Rye={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},Iye={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},Lye={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},Fye={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},Bye={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},zye={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},Uye={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},jye={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},Hye={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},Vye={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},Wye={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},qye={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},Gye={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},$ye={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},Xye={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},Yye={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},Zye={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},Jye={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},Kye={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},Qye={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},e1e={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},t1e={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},n1e={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},r1e={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},i1e={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},a1e={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},o1e={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},s1e={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},l1e={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},u1e={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},c1e={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},h1e={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},d1e={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},f1e={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},p1e={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},m1e={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},g1e={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},v1e={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},y1e={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},b1e={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemanns Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},x1e={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},w1e={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},S1e={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},E1e={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},_1e={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},C1e={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},A1e={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},T1e={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},M1e={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},D1e={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},k1e={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},N1e={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},O1e={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},P1e={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},R1e={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},I1e={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},L1e={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},F1e={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},B1e={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},z1e={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},U1e={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},j1e={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},H1e={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},V1e={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},W1e={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},q1e={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},G1e={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},$1e={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},X1e={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},Y1e={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},Z1e={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},J1e={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},K1e={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},Q1e={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},ebe={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},tbe={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},nbe={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},rbe={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},ibe={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},abe={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},obe={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},sbe={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},lbe={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},ube={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},cbe={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},hbe={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},dbe={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},fbe={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},pbe={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},mbe={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},gbe={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},vbe={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","fraction","bignumber","string","format"]},ybe={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},bbe={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},xbe={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},wbe={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},Sbe={bignumber:d0e,boolean:f0e,complex:p0e,createUnit:m0e,fraction:g0e,index:v0e,matrix:y0e,number:b0e,sparse:x0e,splitUnit:w0e,string:S0e,unit:E0e,e:Y5,E:Y5,false:Jge,i:Kge,Infinity:Qge,LN2:t0e,LN10:e0e,LOG2E:r0e,LOG10E:n0e,NaN:i0e,null:a0e,pi:Z5,PI:Z5,phi:o0e,SQRT1_2:s0e,SQRT2:l0e,tau:u0e,true:c0e,version:h0e,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:T0e,lsolve:D0e,lsolveAll:k0e,lup:N0e,lusolve:O0e,leafCount:M0e,polynomialRoot:P0e,resolve:L0e,simplify:F0e,simplifyConstant:B0e,simplifyCore:z0e,symbolicEqual:j0e,rationalize:I0e,slu:U0e,usolve:H0e,usolveAll:V0e,qr:R0e,abs:W0e,add:q0e,cbrt:G0e,ceil:$0e,cube:X0e,divide:Y0e,dotDivide:Z0e,dotMultiply:J0e,dotPow:K0e,exp:Q0e,expm:eve,expm1:tve,fix:nve,floor:rve,gcd:ive,hypot:ave,lcm:sve,log:lve,log2:hve,log1p:cve,log10:uve,mod:dve,multiply:fve,norm:pve,nthRoot:mve,nthRoots:gve,pow:vve,round:yve,sign:bve,sqrt:xve,sqrtm:wve,square:Cve,subtract:Ave,unaryMinus:Tve,unaryPlus:Mve,xgcd:Dve,invmod:ove,bitAnd:kve,bitNot:Nve,bitOr:Ove,bitXor:Pve,leftShift:Rve,rightArithShift:Ive,rightLogShift:Lve,bellNumbers:Fve,catalan:Bve,composition:zve,stirlingS2:Uve,config:_0e,import:C0e,typed:A0e,arg:jve,conj:Hve,re:Wve,im:Vve,evaluate:qve,help:Gve,distance:$ve,intersect:Xve,and:Yve,not:Zve,or:Jve,xor:Kve,concat:eye,count:tye,cross:nye,column:Qve,ctranspose:rye,det:iye,diag:aye,diff:oye,dot:sye,getMatrixDataType:dye,identity:fye,filter:uye,flatten:cye,forEach:hye,inv:pye,pinv:mye,eigs:lye,kron:gye,matrixFromFunction:bye,matrixFromRows:xye,matrixFromColumns:yye,map:vye,ones:wye,partitionSelect:Sye,range:Eye,resize:Cye,reshape:_ye,rotate:Aye,rotationMatrix:Tye,row:Mye,size:Dye,sort:kye,squeeze:Nye,subset:Oye,trace:Pye,transpose:Rye,zeros:Iye,fft:Lye,ifft:Fye,sylvester:Sve,schur:Eve,lyap:_ve,solveODE:wbe,combinations:Bye,combinationsWithRep:zye,factorial:Uye,gamma:jye,kldivergence:Vye,lgamma:Hye,multinomial:Wye,permutations:qye,pickRandom:Gye,random:$ye,randomInt:Xye,compare:Yye,compareNatural:Zye,compareText:Jye,deepEqual:Kye,equal:Qye,equalText:e1e,larger:t1e,largerEq:n1e,smaller:r1e,smallerEq:i1e,unequal:a1e,setCartesian:o1e,setDifference:s1e,setDistinct:l1e,setIntersect:u1e,setIsSubset:c1e,setMultiplicity:h1e,setPowerset:d1e,setSize:f1e,setSymDifference:p1e,setUnion:m1e,zpk2tf:g1e,freqz:v1e,erf:y1e,zeta:b1e,cumsum:D1e,mad:x1e,max:w1e,mean:S1e,median:E1e,min:_1e,mode:C1e,prod:A1e,quantileSeq:T1e,std:M1e,sum:k1e,variance:N1e,corr:O1e,acos:P1e,acosh:R1e,acot:I1e,acoth:L1e,acsc:F1e,acsch:B1e,asec:z1e,asech:U1e,asin:j1e,asinh:H1e,atan:V1e,atanh:q1e,atan2:W1e,cos:G1e,cosh:$1e,cot:X1e,coth:Y1e,csc:Z1e,csch:J1e,sec:K1e,sech:Q1e,sin:ebe,sinh:tbe,tan:nbe,tanh:rbe,to:ibe,clone:obe,format:sbe,bin:abe,oct:ybe,hex:ube,isNaN:hbe,isInteger:cbe,isNegative:dbe,isNumeric:fbe,hasNumericValue:lbe,isPositive:pbe,isPrime:mbe,isZero:gbe,print:bbe,typeOf:xbe,numeric:vbe},J5="help",Ebe=["typed","mathWithTransform","Help"],_be=ae(J5,Ebe,n=>{var{typed:e,mathWithTransform:t,Help:r}=n;return e(J5,{any:function(i){var a,o=i;if(typeof i!="string"){for(a in t)if(gt(t,a)&&i===t[a]){o=a;break}}var s=Ea(Sbe,o);if(!s){var l=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+l+'"')}return new r(s)}})}),K5="chain",Cbe=["typed","Chain"],Abe=ae(K5,Cbe,n=>{var{typed:e,Chain:t}=n;return e(K5,{"":function(){return new t},any:function(r){return new t(r)}})}),Q5="det",Tbe=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Mbe=ae(Q5,Tbe,n=>{var{typed:e,matrix:t,subtractScalar:r,multiply:i,divideScalar:a,isZero:o,unaryMinus:s}=n;return e(Q5,{any:function(u){return Gt(u)},"Array | Matrix":function(u){var c;switch(Ft(u)?c=u.size():Array.isArray(u)?(u=t(u),c=u.size()):c=[],c.length){case 0:return Gt(u);case 1:if(c[0]===1)return Gt(u.valueOf()[0]);if(c[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+un(c)+")");case 2:{var h=c[0],d=c[1];if(h===d)return l(u.clone().valueOf(),h);if(d===0)return 1;throw new RangeError("Matrix must be square (size: "+un(c)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+un(c)+")")}}});function l(u,c,h){if(c===1)return Gt(u[0][0]);if(c===2)return r(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var d=!1,f=new Array(c).fill(0).map((C,T)=>T),p=0;p<c;p++){var v=f[p];if(o(u[v][p])){var y=void 0;for(y=p+1;y<c;y++)if(!o(u[f[y]][p])){v=f[y],f[y]=f[p],f[p]=v,d=!d;break}if(y===c)return u[v][p]}for(var g=u[v][p],w=p===0?1:u[f[p-1]][p-1],b=p+1;b<c;b++)for(var m=f[b],x=p+1;x<c;x++)u[m][x]=a(r(i(u[m][x],g),i(u[m][p],u[v][x])),w)}var S=u[f[c-1]][c-1];return d?s(S):S}}),eB="inv",Dbe=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],kbe=ae(eB,Dbe,n=>{var{typed:e,matrix:t,divideScalar:r,addScalar:i,multiply:a,unaryMinus:o,det:s,identity:l,abs:u}=n;return e(eB,{"Array | Matrix":function(h){var d=Ft(h)?h.size():nn(h);switch(d.length){case 1:if(d[0]===1)return Ft(h)?t([r(1,h.valueOf()[0])]):[r(1,h[0])];throw new RangeError("Matrix must be square (size: "+un(d)+")");case 2:{var f=d[0],p=d[1];if(f===p)return Ft(h)?t(c(h.valueOf(),f,p),h.storage()):c(h,f,p);throw new RangeError("Matrix must be square (size: "+un(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+un(d)+")")}},any:function(h){return r(1,h)}});function c(h,d,f){var p,v,y,g,w;if(d===1){if(g=h[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,g)]]}else if(d===2){var b=s(h);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(h[1][1],b),r(o(h[0][1]),b)],[r(o(h[1][0]),b),r(h[0][0],b)]]}else{var m=h.concat();for(p=0;p<d;p++)m[p]=m[p].concat();for(var x=l(d).valueOf(),S=0;S<f;S++){var C=u(m[S][S]),T=S;for(p=S+1;p<d;)u(m[p][S])>C&&(C=u(m[p][S]),T=p),p++;if(C===0)throw Error("Cannot calculate inverse, determinant is zero");p=T,p!==S&&(w=m[S],m[S]=m[p],m[p]=w,w=x[S],x[S]=x[p],x[p]=w);var M=m[S],A=x[S];for(p=0;p<d;p++){var D=m[p],O=x[p];if(p!==S){if(D[S]!==0){for(y=r(o(D[S]),M[S]),v=S;v<f;v++)D[v]=i(D[v],a(y,M[v]));for(v=0;v<f;v++)O[v]=i(O[v],a(y,A[v]))}}else{for(y=M[S],v=S;v<f;v++)D[v]=r(D[v],y);for(v=0;v<f;v++)O[v]=r(O[v],y)}}}return x}}}),tB="pinv",Nbe=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],Obe=ae(tB,Nbe,n=>{var{typed:e,matrix:t,inv:r,deepEqual:i,equal:a,dotDivide:o,dot:s,ctranspose:l,divideScalar:u,multiply:c,add:h,Complex:d}=n;return e(tB,{"Array | Matrix":function(w){var b=Ft(w)?w.size():nn(w);switch(b.length){case 1:return g(w)?l(w):b[0]===1?r(w):o(l(w),s(w,w));case 2:{if(g(w))return l(w);var m=b[0],x=b[1];if(m===x)try{return r(w)}catch(S){if(!(S instanceof Error&&S.message.match(/Cannot calculate inverse, determinant is zero/)))throw S}return Ft(w)?t(f(w.valueOf(),m,x),w.storage()):f(w,m,x)}default:throw new RangeError("Matrix must be two dimensional (size: "+un(b)+")")}},any:function(w){return a(w,0)?Gt(w):u(1,w)}});function f(w,b,m){var{C:x,F:S}=v(w,b,m),C=c(r(c(l(x),x)),l(x)),T=c(l(S),r(c(S,l(S))));return c(T,C)}function p(w,b,m){for(var x=Gt(w),S=0,C=0;C<b;C++){if(m<=S)return x;for(var T=C;y(x[T][S]);)if(T++,b===T&&(T=C,S++,m===S))return x;[x[T],x[C]]=[x[C],x[T]];for(var M=x[C][S],A=0;A<m;A++)x[C][A]=o(x[C][A],M);for(var D=0;D<b;D++)if(D!==C){M=x[D][S];for(var O=0;O<m;O++)x[D][O]=h(x[D][O],c(-1,c(M,x[C][O])))}S++}return x}function v(w,b,m){var x=p(w,b,m),S=w.map((T,M)=>T.filter((A,D)=>D<b&&!y(s(x[D],x[D])))),C=x.filter((T,M)=>!y(s(x[M],x[M])));return{C:S,F:C}}function y(w){return a(h(w,d(1,1)),h(0,d(1,1)))}function g(w){return i(h(w,d(1,1)),h(c(w,0),d(1,1)))}});function Pbe(n){var{addScalar:e,subtract:t,flatten:r,multiply:i,multiplyScalar:a,divideScalar:o,sqrt:s,abs:l,bignumber:u,diag:c,size:h,reshape:d,inv:f,qr:p,usolve:v,usolveAll:y,equal:g,complex:w,larger:b,smaller:m,matrixFromColumns:x,dot:S}=n;function C(Q,Z,re,fe){var se=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,ye=T(Q,Z,re,fe,se);M(Q,Z,re,fe,se,ye);var{values:De,C:pe}=A(Q,Z,re,fe,se);if(se){var Me=D(Q,Z,pe,ye,De,re,fe);return{values:De,eigenvectors:Me}}return{values:De}}function T(Q,Z,re,fe,se){var ye=fe==="BigNumber",De=fe==="Complex",pe=ye?u(0):0,Me=ye?u(1):De?w(1):1,be=ye?u(1):1,ne=ye?u(10):2,Pe=a(ne,ne),ze;se&&(ze=Array(Z).fill(Me));for(var K=!1;!K;){K=!0;for(var ie=0;ie<Z;ie++){for(var _e=pe,oe=pe,G=0;G<Z;G++)ie!==G&&(_e=e(_e,l(Q[G][ie])),oe=e(oe,l(Q[ie][G])));if(!g(_e,0)&&!g(oe,0)){for(var q=be,ce=_e,Ae=o(oe,ne),$=a(oe,ne);m(ce,Ae);)ce=a(ce,Pe),q=a(q,ne);for(;b(ce,$);)ce=o(ce,Pe),q=o(q,ne);var ee=m(o(e(ce,oe),q),a(e(_e,oe),.95));if(ee){K=!1;for(var ge=o(1,q),xe=0;xe<Z;xe++)ie!==xe&&(Q[ie][xe]=a(Q[ie][xe],ge),Q[xe][ie]=a(Q[xe][ie],q));se&&(ze[ie]=a(ze[ie],ge))}}}}return se?c(ze):null}function M(Q,Z,re,fe,se,ye){var De=fe==="BigNumber",pe=fe==="Complex",Me=De?u(0):pe?w(0):0;De&&(re=u(re));for(var be=0;be<Z-2;be++){for(var ne=0,Pe=Me,ze=be+1;ze<Z;ze++){var K=Q[ze][be];m(l(Pe),l(K))&&(Pe=K,ne=ze)}if(!m(l(Pe),re)){if(ne!==be+1){var ie=Q[ne];Q[ne]=Q[be+1],Q[be+1]=ie;for(var _e=0;_e<Z;_e++){var oe=Q[_e][ne];Q[_e][ne]=Q[_e][be+1],Q[_e][be+1]=oe}if(se){var G=ye[ne];ye[ne]=ye[be+1],ye[be+1]=G}}for(var q=be+2;q<Z;q++){var ce=o(Q[q][be],Pe);if(ce!==0){for(var Ae=0;Ae<Z;Ae++)Q[q][Ae]=t(Q[q][Ae],a(ce,Q[be+1][Ae]));for(var $=0;$<Z;$++)Q[$][be+1]=e(Q[$][be+1],a(ce,Q[$][q]));if(se)for(var ee=0;ee<Z;ee++)ye[q][ee]=t(ye[q][ee],a(ce,ye[be+1][ee]))}}}}return ye}function A(Q,Z,re,fe,se){var ye=fe==="BigNumber",De=fe==="Complex",pe=ye?u(1):De?w(1):1;ye&&(re=u(re));for(var Me=Gt(Q),be=[],ne=Z,Pe=[],ze=se?c(Array(Z).fill(pe)):void 0,K=se?c(Array(ne).fill(pe)):void 0,ie=0;ie<=100;){ie+=1;for(var _e=Me[ne-1][ne-1],oe=0;oe<ne;oe++)Me[oe][oe]=t(Me[oe][oe],_e);var{Q:G,R:q}=p(Me);Me=i(q,G);for(var ce=0;ce<ne;ce++)Me[ce][ce]=e(Me[ce][ce],_e);if(se&&(K=i(K,G)),ne===1||m(l(Me[ne-1][ne-2]),re)){ie=0,be.push(Me[ne-1][ne-1]),se&&(Pe.unshift([[1]]),L(K,Z),ze=i(ze,K),ne>1&&(K=c(Array(ne-1).fill(pe)))),ne-=1,Me.pop();for(var Ae=0;Ae<ne;Ae++)Me[Ae].pop()}else if(ne===2||m(l(Me[ne-2][ne-3]),re)){ie=0;var $=O(Me[ne-2][ne-2],Me[ne-2][ne-1],Me[ne-1][ne-2],Me[ne-1][ne-1]);be.push(...$),se&&(Pe.unshift(U(Me[ne-2][ne-2],Me[ne-2][ne-1],Me[ne-1][ne-2],Me[ne-1][ne-1],$[0],$[1],re,fe)),L(K,Z),ze=i(ze,K),ne>2&&(K=c(Array(ne-2).fill(pe)))),ne-=2,Me.pop(),Me.pop();for(var ee=0;ee<ne;ee++)Me[ee].pop(),Me[ee].pop()}if(ne===0)break}if(be.sort((Ne,Fe)=>+t(l(Ne),l(Fe))),ie>100){var ge=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+be.join(", "));throw ge.values=be,ge.vectors=[],ge}var xe=se?i(ze,F(Pe,Z)):void 0;return{values:be,C:xe}}function D(Q,Z,re,fe,se,ye,De){var pe=f(re),Me=i(pe,Q,re),be=De==="BigNumber",ne=De==="Complex",Pe=be?u(0):ne?w(0):0,ze=be?u(1):ne?w(1):1,K=[],ie=[];for(var _e of se){var oe=k(K,_e,g);oe===-1?(K.push(_e),ie.push(1)):ie[oe]+=1}for(var G=[],q=K.length,ce=Array(Z).fill(Pe),Ae=c(Array(Z).fill(ze)),$=function(){var ge=K[ee],xe=t(Me,i(ge,Ae)),Ne=y(xe,ce);for(Ne.shift();Ne.length<ie[ee];){var Fe=P(xe,Z,Ne,ye,De);if(Fe===null)break;Ne.push(Fe)}var qe=i(f(fe),re);Ne=Ne.map(ke=>i(qe,ke)),G.push(...Ne.map(ke=>({value:ge,vector:r(ke)})))},ee=0;ee<q;ee++)$();return G}function O(Q,Z,re,fe){var se=e(Q,fe),ye=t(a(Q,fe),a(Z,re)),De=a(se,.5),pe=a(s(t(a(se,se),a(4,ye))),.5);return[e(De,pe),t(De,pe)]}function U(Q,Z,re,fe,se,ye,De,pe){var Me=pe==="BigNumber",be=pe==="Complex",ne=Me?u(0):be?w(0):0,Pe=Me?u(1):be?w(1):1;if(m(l(re),De))return[[Pe,ne],[ne,Pe]];if(b(l(t(se,ye)),De))return[[t(se,fe),t(ye,fe)],[re,re]];var ze=t(Q,se),K=t(fe,se);return m(l(Z),De)&&m(l(K),De)?[[ze,Pe],[re,ne]]:[[Z,ne],[K,Pe]]}function L(Q,Z){for(var re=0;re<Q.length;re++)Q[re].push(...Array(Z-Q[re].length).fill(0));for(var fe=Q.length;fe<Z;fe++)Q.push(Array(Z).fill(0)),Q[fe][fe]=1;return Q}function F(Q,Z){for(var re=[],fe=0;fe<Z;fe++)re[fe]=Array(Z).fill(0);var se=0;for(var ye of Q){for(var De=ye.length,pe=0;pe<De;pe++)for(var Me=0;Me<De;Me++)re[se+pe][se+Me]=ye[pe][Me];se+=De}return re}function k(Q,Z,re){for(var fe=0;fe<Q.length;fe++)if(re(Q[fe],Z))return fe;return-1}function P(Q,Z,re,fe,se){for(var ye=se==="BigNumber"?u(1e3):1e3,De,pe=0;pe<5;++pe){De=z(Z,re,se);try{De=v(Q,De)}catch{continue}if(b(X(De),ye))break}if(pe>=5)return null;for(pe=0;;){var Me=v(Q,De);if(m(X(B(De,[Me])),fe))break;if(++pe>=10)return null;De=J(Me)}return De}function z(Q,Z,re){var fe=re==="BigNumber",se=re==="Complex",ye=Array(Q).fill(0).map(De=>2*Math.random()-1);return fe&&(ye=ye.map(De=>u(De))),se&&(ye=ye.map(De=>w(De))),ye=B(ye,Z),J(ye,re)}function B(Q,Z){var re=h(Q);for(var fe of Z)fe=d(fe,re),Q=t(Q,i(o(S(fe,Q),S(fe,fe)),fe));return Q}function X(Q){return l(s(S(Q,Q)))}function J(Q,Z){var re=Z==="BigNumber",fe=Z==="Complex",se=re?u(1):fe?w(1):1;return i(o(se,X(Q)),Q)}return C}function Rbe(n){var{config:e,addScalar:t,subtract:r,abs:i,atan:a,cos:o,sin:s,multiplyScalar:l,inv:u,bignumber:c,multiply:h,add:d}=n;function f(M,A){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.epsilon,O=arguments.length>3?arguments[3]:void 0,U=arguments.length>4?arguments[4]:void 0;if(O==="number")return p(M,D,U);if(O==="BigNumber")return v(M,D,U);throw TypeError("Unsupported data type: "+O)}function p(M,A,D){var O=M.length,U=Math.abs(A/O),L,F;if(D){F=new Array(O);for(var k=0;k<O;k++)F[k]=Array(O).fill(0),F[k][k]=1}for(var P=S(M);Math.abs(P[1])>=Math.abs(U);){var z=P[0][0],B=P[0][1];L=y(M[z][z],M[B][B],M[z][B]),M=x(M,L,z,B),D&&(F=w(F,L,z,B)),P=S(M)}for(var X=Array(O).fill(0),J=0;J<O;J++)X[J]=M[J][J];return T(Gt(X),F,D)}function v(M,A,D){var O=M.length,U=i(A/O),L,F;if(D){F=new Array(O);for(var k=0;k<O;k++)F[k]=Array(O).fill(0),F[k][k]=1}for(var P=C(M);i(P[1])>=i(U);){var z=P[0][0],B=P[0][1];L=g(M[z][z],M[B][B],M[z][B]),M=m(M,L,z,B),D&&(F=b(F,L,z,B)),P=C(M)}for(var X=Array(O).fill(0),J=0;J<O;J++)X[J]=M[J][J];return T(Gt(X),F,D)}function y(M,A,D){var O=A-M;return Math.abs(O)<=e.epsilon?Math.PI/4:.5*Math.atan(2*D/(A-M))}function g(M,A,D){var O=r(A,M);return i(O)<=e.epsilon?c(-1).acos().div(4):l(.5,a(h(2,D,u(O))))}function w(M,A,D,O){for(var U=M.length,L=Math.cos(A),F=Math.sin(A),k=Array(U).fill(0),P=Array(U).fill(0),z=0;z<U;z++)k[z]=L*M[z][D]-F*M[z][O],P[z]=F*M[z][D]+L*M[z][O];for(var B=0;B<U;B++)M[B][D]=k[B],M[B][O]=P[B];return M}function b(M,A,D,O){for(var U=M.length,L=o(A),F=s(A),k=Array(U).fill(c(0)),P=Array(U).fill(c(0)),z=0;z<U;z++)k[z]=r(l(L,M[z][D]),l(F,M[z][O])),P[z]=t(l(F,M[z][D]),l(L,M[z][O]));for(var B=0;B<U;B++)M[B][D]=k[B],M[B][O]=P[B];return M}function m(M,A,D,O){for(var U=M.length,L=c(o(A)),F=c(s(A)),k=l(L,L),P=l(F,F),z=Array(U).fill(c(0)),B=Array(U).fill(c(0)),X=h(c(2),L,F,M[D][O]),J=t(r(l(k,M[D][D]),X),l(P,M[O][O])),Q=d(l(P,M[D][D]),X,l(k,M[O][O])),Z=0;Z<U;Z++)z[Z]=r(l(L,M[D][Z]),l(F,M[O][Z])),B[Z]=t(l(F,M[D][Z]),l(L,M[O][Z]));M[D][D]=J,M[O][O]=Q,M[D][O]=c(0),M[O][D]=c(0);for(var re=0;re<U;re++)re!==D&&re!==O&&(M[D][re]=z[re],M[re][D]=z[re],M[O][re]=B[re],M[re][O]=B[re]);return M}function x(M,A,D,O){for(var U=M.length,L=Math.cos(A),F=Math.sin(A),k=L*L,P=F*F,z=Array(U).fill(0),B=Array(U).fill(0),X=k*M[D][D]-2*L*F*M[D][O]+P*M[O][O],J=P*M[D][D]+2*L*F*M[D][O]+k*M[O][O],Q=0;Q<U;Q++)z[Q]=L*M[D][Q]-F*M[O][Q],B[Q]=F*M[D][Q]+L*M[O][Q];M[D][D]=X,M[O][O]=J,M[D][O]=0,M[O][D]=0;for(var Z=0;Z<U;Z++)Z!==D&&Z!==O&&(M[D][Z]=z[Z],M[Z][D]=z[Z],M[O][Z]=B[Z],M[Z][O]=B[Z]);return M}function S(M){for(var A=M.length,D=0,O=[0,1],U=0;U<A;U++)for(var L=U+1;L<A;L++)Math.abs(D)<Math.abs(M[U][L])&&(D=Math.abs(M[U][L]),O=[U,L]);return[O,D]}function C(M){for(var A=M.length,D=0,O=[0,1],U=0;U<A;U++)for(var L=U+1;L<A;L++)i(D)<i(M[U][L])&&(D=i(M[U][L]),O=[U,L]);return[O,D]}function T(M,A,D){var O=M.length,U=Array(O),L;if(D){L=Array(O);for(var F=0;F<O;F++)L[F]=Array(O)}for(var k=0;k<O;k++){for(var P=0,z=M[0],B=0;B<M.length;B++)i(M[B])<i(z)&&(P=B,z=M[P]);if(U[k]=M.splice(P,1)[0],D)for(var X=0;X<O;X++)L[k][X]=A[X][P],A[X].splice(P,1)}if(!D)return{values:U};var J=L.map((Q,Z)=>({value:U[Z],vector:Q}));return{values:U,eigenvectors:J}}return f}var Ibe="eigs",Lbe=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],Fbe=ae(Ibe,Lbe,n=>{var{config:e,typed:t,matrix:r,addScalar:i,subtract:a,equal:o,abs:s,atan:l,cos:u,sin:c,multiplyScalar:h,divideScalar:d,inv:f,bignumber:p,multiply:v,add:y,larger:g,column:w,flatten:b,number:m,complex:x,sqrt:S,diag:C,size:T,reshape:M,qr:A,usolve:D,usolveAll:O,im:U,re:L,smaller:F,matrixFromColumns:k,dot:P}=n,z=Rbe({config:e,addScalar:i,subtract:a,column:w,flatten:b,equal:o,abs:s,atan:l,cos:u,sin:c,multiplyScalar:h,inv:f,bignumber:p,complex:x,multiply:v,add:y}),B=Pbe({config:e,addScalar:i,subtract:a,multiply:v,multiplyScalar:h,flatten:b,divideScalar:d,sqrt:S,abs:s,bignumber:p,diag:C,size:T,reshape:M,qr:A,inv:f,usolve:D,usolveAll:O,equal:o,complex:x,larger:g,smaller:F,matrixFromColumns:k,dot:P});return t("eigs",{Array:function(se){return X(r(se))},"Array, number|BigNumber":function(se,ye){return X(r(se),{precision:ye})},"Array, Object"(se,ye){return X(r(se),ye)},Matrix:function(se){return X(se,{matricize:!0})},"Matrix, number|BigNumber":function(se,ye){return X(se,{precision:ye,matricize:!0})},"Matrix, Object":function(se,ye){var De={matricize:!0};return lt(De,ye),X(se,De)}});function X(se){var ye,De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe="eigenvectors"in De?De.eigenvectors:!0,Me=(ye=De.precision)!==null&&ye!==void 0?ye:e.epsilon,be=J(se,Me,pe);return De.matricize&&(be.values=r(be.values),pe&&(be.eigenvectors=be.eigenvectors.map(ne=>{var{value:Pe,vector:ze}=ne;return{value:Pe,vector:r(ze)}}))),pe&&Object.defineProperty(be,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),be}function J(se,ye,De){var pe=se.toArray(),Me=se.size();if(Me.length!==2||Me[0]!==Me[1])throw new RangeError("Matrix must be square (size: ".concat(un(Me),")"));var be=Me[0];if(Z(pe,be,ye)&&(re(pe,be),Q(pe,be,ye))){var ne=fe(se,pe,be);return z(pe,be,ye,ne,De)}var Pe=fe(se,pe,be);return B(pe,be,ye,Pe,De)}function Q(se,ye,De){for(var pe=0;pe<ye;pe++)for(var Me=pe;Me<ye;Me++)if(g(p(s(a(se[pe][Me],se[Me][pe]))),De))return!1;return!0}function Z(se,ye,De){for(var pe=0;pe<ye;pe++)for(var Me=0;Me<ye;Me++)if(g(p(s(U(se[pe][Me]))),De))return!1;return!0}function re(se,ye){for(var De=0;De<ye;De++)for(var pe=0;pe<ye;pe++)se[De][pe]=L(se[De][pe])}function fe(se,ye,De){var pe=se.datatype();if(pe==="number"||pe==="BigNumber"||pe==="Complex")return pe;for(var Me=!1,be=!1,ne=!1,Pe=0;Pe<De;Pe++)for(var ze=0;ze<De;ze++){var K=ye[Pe][ze];if(tn(K)||Id(K))Me=!0;else if(Kt(K))be=!0;else if(_s(K))ne=!0;else throw TypeError("Unsupported type in Matrix: "+zn(K))}if(be&&ne&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),ne){for(var ie=0;ie<De;ie++)for(var _e=0;_e<De;_e++)ye[ie][_e]=x(ye[ie][_e]);return"Complex"}if(be){for(var oe=0;oe<De;oe++)for(var G=0;G<De;G++)ye[oe][G]=p(ye[oe][G]);return"BigNumber"}if(Me){for(var q=0;q<De;q++)for(var ce=0;ce<De;ce++)ye[q][ce]=m(ye[q][ce]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),nB="expm",Bbe=["typed","abs","add","identity","inv","multiply"],zbe=ae(nB,Bbe,n=>{var{typed:e,abs:t,add:r,identity:i,inv:a,multiply:o}=n;return e(nB,{Matrix:function(c){var h=c.size();if(h.length!==2||h[0]!==h[1])throw new RangeError("Matrix must be square (size: "+un(h)+")");for(var d=h[0],f=1e-15,p=s(c),v=l(p,f),y=v.q,g=v.j,w=o(c,Math.pow(2,-g)),b=i(d),m=i(d),x=1,S=w,C=-1,T=1;T<=y;T++)T>1&&(S=o(S,w),C=-C),x=x*(y-T+1)/((2*y-T+1)*T),b=r(b,o(x,S)),m=r(m,o(x*C,S));for(var M=o(a(m),b),A=0;A<g;A++)M=o(M,M);return gc(c)?c.createSparseMatrix(M):M}});function s(c){for(var h=c.size()[0],d=0,f=0;f<h;f++){for(var p=0,v=0;v<h;v++)p+=t(c.get([f,v]));d=Math.max(p,d)}return d}function l(c,h){for(var d=30,f=0;f<d;f++)for(var p=0;p<=f;p++){var v=f-p;if(u(c,p,v)<h)return{q:p,j:v}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,h,d){for(var f=1,p=2;p<=h;p++)f*=p;for(var v=f,y=h+1;y<=2*h;y++)v*=y;var g=v*(2*h+1);return 8*Math.pow(c/Math.pow(2,d),2*h)*f*f/(v*g)}}),rB="sqrtm",Ube=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],jbe=ae(rB,Ube,n=>{var{typed:e,abs:t,add:r,multiply:i,map:a,sqrt:o,subtract:s,inv:l,size:u,max:c,identity:h}=n,d=1e3,f=1e-6;function p(v){var y,g=0,w=v,b=h(u(v));do{var m=w;if(w=i(.5,r(m,l(b))),b=i(.5,r(b,l(m))),y=c(t(s(w,m))),y>f&&++g>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(y>f);return w}return e(rB,{"Array | Matrix":function(v){var y=Ft(v)?v.size():nn(v);switch(y.length){case 1:if(y[0]===1)return a(v,o);throw new RangeError("Matrix must be square (size: "+un(y)+")");case 2:{var g=y[0],w=y[1];if(g===w)return p(v);throw new RangeError("Matrix must be square (size: "+un(y)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+un(y)+")")}}})}),iB="sylvester",Hbe=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],Vbe=ae(iB,Hbe,n=>{var{typed:e,schur:t,matrixFromColumns:r,matrix:i,multiply:a,range:o,concat:s,transpose:l,index:u,subset:c,add:h,subtract:d,identity:f,lusolve:p,abs:v}=n;return e(iB,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(g,w,b){return y(i(g),w,b)},"Array, Array, Matrix":function(g,w,b){return y(i(g),i(w),b)},"Array, Matrix, Array":function(g,w,b){return y(i(g),w,i(b))},"Matrix, Array, Matrix":function(g,w,b){return y(g,i(w),b)},"Matrix, Array, Array":function(g,w,b){return y(g,i(w),i(b))},"Matrix, Matrix, Array":function(g,w,b){return y(g,w,i(b))},"Array, Array, Array":function(g,w,b){return y(i(g),i(w),i(b)).toArray()}});function y(g,w,b){for(var m=w.size()[0],x=g.size()[0],S=t(g),C=S.T,T=S.U,M=t(a(-1,w)),A=M.T,D=M.U,O=a(a(l(T),b),D),U=o(0,x),L=[],F=(ne,Pe)=>s(ne,Pe,1),k=(ne,Pe)=>s(ne,Pe,0),P=0;P<m;P++)if(P<m-1&&v(c(A,u(P+1,P)))>1e-5){for(var z=k(c(O,u(U,P)),c(O,u(U,P+1))),B=0;B<P;B++)z=h(z,k(a(L[B],c(A,u(B,P))),a(L[B],c(A,u(B,P+1)))));var X=a(f(x),a(-1,c(A,u(P,P)))),J=a(f(x),a(-1,c(A,u(P+1,P)))),Q=a(f(x),a(-1,c(A,u(P,P+1)))),Z=a(f(x),a(-1,c(A,u(P+1,P+1)))),re=k(F(h(C,X),J),F(Q,h(C,Z))),fe=p(re,z);L[P]=fe.subset(u(o(0,x),0)),L[P+1]=fe.subset(u(o(x,2*x),0)),P++}else{for(var se=c(O,u(U,P)),ye=0;ye<P;ye++)se=h(se,a(L[ye],c(A,u(ye,P))));var De=c(A,u(P,P)),pe=d(C,a(De,f(x)));L[P]=p(pe,se)}var Me=i(r(...L)),be=a(T,a(Me,l(D)));return be}}),aB="schur",Wbe=["typed","matrix","identity","multiply","qr","norm","subtract"],qbe=ae(aB,Wbe,n=>{var{typed:e,matrix:t,identity:r,multiply:i,qr:a,norm:o,subtract:s}=n;return e(aB,{Array:function(u){var c=l(t(u));return{U:c.U.valueOf(),T:c.T.valueOf()}},Matrix:function(u){return l(u)}});function l(u){var c=u.size()[0],h=u,d=r(c),f=0,p;do{p=h;var v=a(h),y=v.Q,g=v.R;if(h=i(g,y),d=i(d,y),f++>100)break}while(o(s(h,p))>1e-4);return{U:d,T:h}}}),oB="lyap",Gbe=["typed","matrix","sylvester","multiply","transpose"],$be=ae(oB,Gbe,n=>{var{typed:e,matrix:t,sylvester:r,multiply:i,transpose:a}=n;return e(oB,{"Matrix, Matrix":function(o,s){return r(o,a(o),i(-1,s))},"Array, Matrix":function(o,s){return r(t(o),a(t(o)),i(-1,s))},"Matrix, Array":function(o,s){return r(o,a(t(o)),t(i(-1,s)))},"Array, Array":function(o,s){return r(t(o),a(t(o)),t(i(-1,s))).toArray()}})}),Xbe="divide",Ybe=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Zbe=ae(Xbe,Ybe,n=>{var{typed:e,matrix:t,multiply:r,equalScalar:i,divideScalar:a,inv:o}=n,s=Ii({typed:e,equalScalar:i}),l=Os({typed:e});return e("divide",kV({"Array | Matrix, Array | Matrix":function(u,c){return r(u,o(c))},"DenseMatrix, any":function(u,c){return l(u,c,a,!1)},"SparseMatrix, any":function(u,c){return s(u,c,a,!1)},"Array, any":function(u,c){return l(t(u),c,a,!1).valueOf()},"any, Array | Matrix":function(u,c){return r(u,o(c))}},a.signatures))}),sB="distance",Jbe=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],Kbe=ae(sB,Jbe,n=>{var{typed:e,addScalar:t,subtractScalar:r,multiplyScalar:i,divideScalar:a,deepEqual:o,sqrt:s,abs:l}=n;return e(sB,{"Array, Array, Array":function(m,x,S){if(m.length===2&&x.length===2&&S.length===2){if(!c(m))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(o(x,S))throw new TypeError("LinePoint1 should not be same with LinePoint2");var C=r(S[1],x[1]),T=r(x[0],S[0]),M=r(i(S[0],x[1]),i(x[0],S[1]));return y(m[0],m[1],C,T,M)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(m,x,S){if(Object.keys(m).length===2&&Object.keys(x).length===2&&Object.keys(S).length===2){if(!c(m))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(S))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(o(p(x),p(S)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in m&&"pointY"in m&&"lineOnePtX"in x&&"lineOnePtY"in x&&"lineTwoPtX"in S&&"lineTwoPtY"in S){var C=r(S.lineTwoPtY,x.lineOnePtY),T=r(x.lineOnePtX,S.lineTwoPtX),M=r(i(S.lineTwoPtX,x.lineOnePtY),i(x.lineOnePtX,S.lineTwoPtY));return y(m.pointX,m.pointY,C,T,M)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(m,x){if(m.length===2&&x.length===3){if(!c(m))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(m[0],m[1],x[0],x[1],x[2])}else if(m.length===3&&x.length===6){if(!h(m))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!f(x))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return g(m[0],m[1],m[2],x[0],x[1],x[2],x[3],x[4],x[5])}else if(m.length===x.length&&m.length>0){if(!d(m))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(x))throw new TypeError("All values of an array should be numbers or BigNumbers");return w(m,x)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(m,x){if(Object.keys(m).length===2&&Object.keys(x).length===3){if(!c(m))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!h(x))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in m&&"pointY"in m&&"xCoeffLine"in x&&"yCoeffLine"in x&&"constant"in x)return y(m.pointX,m.pointY,x.xCoeffLine,x.yCoeffLine,x.constant);throw new TypeError("Key names do not match")}else if(Object.keys(m).length===3&&Object.keys(x).length===6){if(!h(m))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!f(x))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in m&&"pointY"in m&&"x0"in x&&"y0"in x&&"z0"in x&&"a"in x&&"b"in x&&"c"in x)return g(m.pointX,m.pointY,m.pointZ,x.x0,x.y0,x.z0,x.a,x.b,x.c);throw new TypeError("Key names do not match")}else if(Object.keys(m).length===2&&Object.keys(x).length===2){if(!c(m))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in m&&"pointOneY"in m&&"pointTwoX"in x&&"pointTwoY"in x)return w([m.pointOneX,m.pointOneY],[x.pointTwoX,x.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(m).length===3&&Object.keys(x).length===3){if(!h(m))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!h(x))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in m&&"pointOneY"in m&&"pointOneZ"in m&&"pointTwoX"in x&&"pointTwoY"in x&&"pointTwoZ"in x)return w([m.pointOneX,m.pointOneY,m.pointOneZ],[x.pointTwoX,x.pointTwoY,x.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(m){if(!v(m))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return b(m)}});function u(m){return typeof m=="number"||Kt(m)}function c(m){return m.constructor!==Array&&(m=p(m)),u(m[0])&&u(m[1])}function h(m){return m.constructor!==Array&&(m=p(m)),u(m[0])&&u(m[1])&&u(m[2])}function d(m){return Array.isArray(m)||(m=p(m)),m.every(u)}function f(m){return m.constructor!==Array&&(m=p(m)),u(m[0])&&u(m[1])&&u(m[2])&&u(m[3])&&u(m[4])&&u(m[5])}function p(m){for(var x=Object.keys(m),S=[],C=0;C<x.length;C++)S.push(m[x[C]]);return S}function v(m){if(m[0].length===2&&u(m[0][0])&&u(m[0][1])){if(m.some(x=>x.length!==2||!u(x[0])||!u(x[1])))return!1}else if(m[0].length===3&&u(m[0][0])&&u(m[0][1])&&u(m[0][2])){if(m.some(x=>x.length!==3||!u(x[0])||!u(x[1])||!u(x[2])))return!1}else return!1;return!0}function y(m,x,S,C,T){var M=l(t(t(i(S,m),i(C,x)),T)),A=s(t(i(S,S),i(C,C)));return a(M,A)}function g(m,x,S,C,T,M,A,D,O){var U=[r(i(r(T,x),O),i(r(M,S),D)),r(i(r(M,S),A),i(r(C,m),O)),r(i(r(C,m),D),i(r(T,x),A))];U=s(t(t(i(U[0],U[0]),i(U[1],U[1])),i(U[2],U[2])));var L=s(t(t(i(A,A),i(D,D)),i(O,O)));return a(U,L)}function w(m,x){for(var S=m.length,C=0,T=0,M=0;M<S;M++)T=r(m[M],x[M]),C=t(i(T,T),C);return s(C)}function b(m){for(var x=[],S=[],C=[],T=0;T<m.length-1;T++)for(var M=T+1;M<m.length;M++)m[0].length===2?(S=[m[T][0],m[T][1]],C=[m[M][0],m[M][1]]):m[0].length===3&&(S=[m[T][0],m[T][1],m[T][2]],C=[m[M][0],m[M][1],m[M][2]]),x.push(w(S,C));return x}}),Qbe="intersect",exe=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],txe=ae(Qbe,exe,n=>{var{typed:e,config:t,abs:r,add:i,addScalar:a,matrix:o,multiply:s,multiplyScalar:l,divideScalar:u,subtract:c,smaller:h,equalScalar:d,flatten:f,isZero:p,isNumeric:v}=n;return e("intersect",{"Array, Array, Array":y,"Array, Array, Array, Array":g,"Matrix, Matrix, Matrix":function(A,D,O){var U=y(A.valueOf(),D.valueOf(),O.valueOf());return U===null?null:o(U)},"Matrix, Matrix, Matrix, Matrix":function(A,D,O,U){var L=g(A.valueOf(),D.valueOf(),O.valueOf(),U.valueOf());return L===null?null:o(L)}});function y(A,D,O){if(A=w(A),D=w(D),O=w(O),!m(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!x(O))throw new TypeError("Array with 4 numbers expected as third argument");return M(A[0],A[1],A[2],D[0],D[1],D[2],O[0],O[1],O[2],O[3])}function g(A,D,O,U){if(A=w(A),D=w(D),O=w(O),U=w(U),A.length===2){if(!b(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!b(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!b(O))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!b(U))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return S(A,D,O,U)}else if(A.length===3){if(!m(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!m(O))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!m(U))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return T(A[0],A[1],A[2],D[0],D[1],D[2],O[0],O[1],O[2],U[0],U[1],U[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function w(A){return A.length===1?A[0]:A.length>1&&Array.isArray(A[0])&&A.every(D=>Array.isArray(D)&&D.length===1)?f(A):A}function b(A){return A.length===2&&v(A[0])&&v(A[1])}function m(A){return A.length===3&&v(A[0])&&v(A[1])&&v(A[2])}function x(A){return A.length===4&&v(A[0])&&v(A[1])&&v(A[2])&&v(A[3])}function S(A,D,O,U){var L=A,F=O,k=c(L,D),P=c(F,U),z=c(l(k[0],P[1]),l(P[0],k[1]));if(p(z)||h(r(z),t.epsilon))return null;var B=l(P[0],L[1]),X=l(P[1],L[0]),J=l(P[0],F[1]),Q=l(P[1],F[0]),Z=u(a(c(c(B,X),J),Q),z);return i(s(k,Z),L)}function C(A,D,O,U,L,F,k,P,z,B,X,J){var Q=l(c(A,D),c(O,U)),Z=l(c(L,F),c(k,P)),re=l(c(z,B),c(X,J));return a(a(Q,Z),re)}function T(A,D,O,U,L,F,k,P,z,B,X,J){var Q=C(A,k,B,k,D,P,X,P,O,z,J,z),Z=C(B,k,U,A,X,P,L,D,J,z,F,O),re=C(A,k,U,A,D,P,L,D,O,z,F,O),fe=C(B,k,B,k,X,P,X,P,J,z,J,z),se=C(U,A,U,A,L,D,L,D,F,O,F,O),ye=c(l(Q,Z),l(re,fe)),De=c(l(se,fe),l(Z,Z));if(p(De))return null;var pe=u(ye,De),Me=u(a(Q,l(pe,Z)),fe),be=a(A,l(pe,c(U,A))),ne=a(D,l(pe,c(L,D))),Pe=a(O,l(pe,c(F,O))),ze=a(k,l(Me,c(B,k))),K=a(P,l(Me,c(X,P))),ie=a(z,l(Me,c(J,z)));return d(be,ze)&&d(ne,K)&&d(Pe,ie)?[be,ne,Pe]:null}function M(A,D,O,U,L,F,k,P,z,B){var X=l(A,k),J=l(U,k),Q=l(D,P),Z=l(L,P),re=l(O,z),fe=l(F,z),se=c(c(c(B,X),Q),re),ye=c(c(c(a(a(J,Z),fe),X),Q),re),De=u(se,ye),pe=a(A,l(De,c(U,A))),Me=a(D,l(De,c(L,D))),be=a(O,l(De,c(F,O)));return[pe,Me,be]}}),lB="sum",nxe=["typed","config","add","numeric"],Rq=ae(lB,nxe,n=>{var{typed:e,config:t,add:r,numeric:i}=n;return e(lB,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":o,"...":function(s){if(vm(s))throw new TypeError("Scalar values expected in function sum");return a(s)}});function a(s){var l;return bu(s,function(u){try{l=l===void 0?u:r(l,u)}catch(c){throw Da(c,"sum",u)}}),l===void 0&&(l=i(0,t.number)),typeof l=="string"&&(l=i(l,t.number)),l}function o(s,l){try{var u=BE(s,l,r);return u}catch(c){throw Da(c,"sum")}}}),ab="cumsum",rxe=["typed","add","unaryPlus"],Iq=ae(ab,rxe,n=>{var{typed:e,add:t,unaryPlus:r}=n;return e(ab,{Array:i,Matrix:function(l){return l.create(i(l.valueOf()))},"Array, number | BigNumber":o,"Matrix, number | BigNumber":function(l,u){return l.create(o(l.valueOf(),u))},"...":function(l){if(vm(l))throw new TypeError("All values expected to be scalar in function cumsum");return i(l)}});function i(l){try{return a(l)}catch(u){throw Da(u,ab)}}function a(l){if(l.length===0)return[];for(var u=[r(l[0])],c=1;c<l.length;++c)u.push(t(u[c-1],l[c]));return u}function o(l,u){var c=nn(l);if(u<0||u>=c.length)throw new as(u,c.length);try{return s(l,u)}catch(h){throw Da(h,ab)}}function s(l,u){var c,h,d;if(u<=0){var f=l[0][0];if(Array.isArray(f)){for(d=fW(l),h=[],c=0;c<d.length;c++)h[c]=s(d[c],u-1);return h}else return a(l)}else{for(h=[],c=0;c<l.length;c++)h[c]=s(l[c],u-1);return h}}}),uB="mean",ixe=["typed","add","divide"],Lq=ae(uB,ixe,n=>{var{typed:e,add:t,divide:r}=n;return e(uB,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":i,"...":function(o){if(vm(o))throw new TypeError("Scalar values expected in function mean");return a(o)}});function i(o,s){try{var l=BE(o,s,t),u=Array.isArray(o)?nn(o):o.size();return r(l,u[s])}catch(c){throw Da(c,"mean")}}function a(o){var s,l=0;if(bu(o,function(u){try{s=s===void 0?u:t(s,u),l++}catch(c){throw Da(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return r(s,l)}}),cB="median",axe=["typed","add","divide","compare","partitionSelect"],oxe=ae(cB,axe,n=>{var{typed:e,add:t,divide:r,compare:i,partitionSelect:a}=n;function o(u){try{u=wn(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var h=c/2-1,d=a(u,h+1),f=u[h],p=0;p<h;++p)i(u[p],f)>0&&(f=u[p]);return l(f,d)}else{var v=a(u,(c-1)/2);return s(v)}}catch(y){throw Da(y,"median")}}var s=e({"number | BigNumber | Complex | Unit":function(u){return u}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(u,c){return r(t(u,c),2)}});return e(cB,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,c){throw new Error("median(A, dim) is not yet supported")},"...":function(u){if(vm(u))throw new TypeError("Scalar values expected in function median");return o(u)}})}),hB="mad",sxe=["typed","abs","map","median","subtract"],lxe=ae(hB,sxe,n=>{var{typed:e,abs:t,map:r,median:i,subtract:a}=n;return e(hB,{"Array | Matrix":o,"...":function(s){return o(s)}});function o(s){if(s=wn(s.valueOf()),s.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(s);return i(r(s,function(u){return t(a(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):Da(u,"mad")}}}),UC="unbiased",dB="variance",uxe=["typed","add","subtract","multiply","divide","apply","isNaN"],Fq=ae(dB,uxe,n=>{var{typed:e,add:t,subtract:r,multiply:i,divide:a,apply:o,isNaN:s}=n;return e(dB,{"Array | Matrix":function(c){return l(c,UC)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(c,h){return u(c,h,UC)},"Array | Matrix, number | BigNumber, string":u,"...":function(c){return l(c,UC)}});function l(c,h){var d,f=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(bu(c,function(y){try{d=d===void 0?y:t(d,y),f++}catch(g){throw Da(g,"variance",y)}}),f===0)throw new Error("Cannot calculate variance of an empty array");var p=a(d,f);if(d=void 0,bu(c,function(y){var g=r(y,p);d=d===void 0?i(g,g):t(d,i(g,g))}),s(d))return d;switch(h){case"uncorrected":return a(d,f);case"biased":return a(d,f+1);case"unbiased":{var v=Kt(d)?d.mul(0):0;return f===1?v:a(d,f-1)}default:throw new Error('Unknown normalization "'+h+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,h,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(c,h,f=>l(f,d))}catch(f){throw Da(f,"variance")}}}),fB="quantileSeq",cxe=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],Bq=ae(fB,cxe,n=>{var{typed:e,bignumber:t,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d}=n,f=pN({typed:e,isInteger:u});return e(fB,{"Array | Matrix, number | BigNumber":(w,b)=>v(w,b,!1),"Array | Matrix, number | BigNumber, number":(w,b,m)=>p(w,b,!1,m,v),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(w,b,m,x)=>p(w,b,m,x,v),"Array | Matrix, Array | Matrix":(w,b)=>y(w,b,!1),"Array | Matrix, Array | Matrix, number":(w,b,m)=>p(w,b,!1,m,y),"Array | Matrix, Array | Matrix, boolean":y,"Array | Matrix, Array | Matrix, boolean, number":(w,b,m,x)=>p(w,b,m,x,y)});function p(w,b,m,x,S){return f(w,x,C=>S(C,b,m))}function v(w,b,m){var x,S=w.valueOf();if(c(b,0))throw new Error("N/prob must be non-negative");if(h(b,1))return tn(b)?g(S,b,m):t(g(S,b,m));if(d(b,1)){if(!u(b))throw new Error("N must be a positive integer");if(d(b,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var C=r(b,1);x=[];for(var T=0;c(T,b);T++){var M=a(T+1,C);x.push(g(S,M,m))}return tn(b)?x:t(x)}}function y(w,b,m){for(var x=w.valueOf(),S=b.valueOf(),C=[],T=0;T<S.length;++T)C.push(g(x,S[T],m));return C}function g(w,b,m){var x=wn(w),S=x.length;if(S===0)throw new Error("Cannot calculate quantile of an empty sequence");var C=tn(b)?b*(S-1):b.times(S-1),T=tn(b)?Math.floor(C):C.floor().toNumber(),M=tn(b)?C%1:C.minus(T);if(u(C))return m?x[C]:s(x,tn(b)?C:C.valueOf());var A,D;if(m)A=x[T],D=x[T+1];else{D=s(x,T+1),A=x[T];for(var O=0;O<T;++O)l(x[O],A)>0&&(A=x[O])}return r(o(A,i(1,M)),o(D,M))}}),pB="std",hxe=["typed","map","sqrt","variance"],zq=ae(pB,hxe,n=>{var{typed:e,map:t,sqrt:r,variance:i}=n;return e(pB,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(o){return a(o)}});function a(o,s){if(o.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return _o(l)?t(l,r):r(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),mB="corr",dxe=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],fxe=ae(mB,dxe,n=>{var{typed:e,matrix:t,sqrt:r,sum:i,add:a,subtract:o,multiply:s,pow:l,divide:u}=n;return e(mB,{"Array, Array":function(d,f){return c(d,f)},"Matrix, Matrix":function(d,f){var p=c(d.toArray(),f.toArray());return Array.isArray(p)?t(p):p}});function c(d,f){var p=[];if(Array.isArray(d[0])&&Array.isArray(f[0])){if(d.length!==f.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var v=0;v<d.length;v++){if(d[v].length!==f[v].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");p.push(h(d[v],f[v]))}return p}else{if(d.length!==f.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return h(d,f)}}function h(d,f){var p=d.length,v=i(d),y=i(f),g=d.reduce((S,C,T)=>a(S,s(C,f[T])),0),w=i(d.map(S=>l(S,2))),b=i(f.map(S=>l(S,2))),m=o(s(p,g),s(v,y)),x=r(s(o(s(p,w),l(v,2)),o(s(p,b),l(y,2))));return u(m,x)}}),gB="combinations",pxe=["typed"],mxe=ae(gB,pxe,n=>{var{typed:e}=n;return e(gB,{"number, number":LW,"BigNumber, BigNumber":function(t,r){var i=t.constructor,a,o,s=t.minus(r),l=new i(1);if(!vB(t)||!vB(r))throw new TypeError("Positive integer value expected in function combinations");if(r.gt(t))throw new TypeError("k must be less than n in function combinations");if(a=l,r.lt(s))for(o=l;o.lte(s);o=o.plus(l))a=a.times(r.plus(o)).dividedBy(o);else for(o=l;o.lte(r);o=o.plus(l))a=a.times(s.plus(o)).dividedBy(o);return a}})});function vB(n){return n.isInteger()&&n.gte(0)}var yB="combinationsWithRep",gxe=["typed"],vxe=ae(yB,gxe,n=>{var{typed:e}=n;return e(yB,{"number, number":function(t,r){if(!Nt(t)||t<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Nt(r)||r<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(t<1)throw new TypeError("k must be less than or equal to n + k - 1");if(r<t-1){var i=ru(t,t+r-1);return i/ru(1,r)}var a=ru(r+1,t+r-1);return a/ru(1,t-1)},"BigNumber, BigNumber":function(t,r){var i=t.constructor,a,o,s=new i(1),l=t.minus(s);if(!bB(t)||!bB(r))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(t.lt(s))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(a=s,r.lt(l))for(o=s;o.lte(l);o=o.plus(s))a=a.times(r.plus(o)).dividedBy(o);else for(o=s;o.lte(r);o=o.plus(s))a=a.times(l.plus(o)).dividedBy(o);return a}})});function bB(n){return n.isInteger()&&n.gte(0)}var xB="gamma",yxe=["typed","config","multiplyScalar","pow","BigNumber","Complex"],bxe=ae(xB,yxe,n=>{var{typed:e,config:t,multiplyScalar:r,pow:i,BigNumber:a,Complex:o}=n;function s(u){if(u.im===0)return oS(u.re);if(u.re<.5){var c=new o(1-u.re,-u.im),h=new o(Math.PI*u.re,Math.PI*u.im);return new o(Math.PI).div(h.sin()).div(s(c))}u=new o(u.re-1,u.im);for(var d=new o(_p[0],0),f=1;f<_p.length;++f){var p=new o(_p[f],0);d=d.add(p.div(u.add(f)))}var v=new o(u.re+jW+.5,u.im),y=Math.sqrt(2*Math.PI),g=v.pow(u.add(.5)),w=v.neg().exp();return d.mul(y).mul(g).mul(w)}return e(xB,{number:oS,Complex:s,BigNumber:function(u){if(u.isInteger())return u.isNegative()||u.isZero()?new a(1/0):l(u.minus(1));if(!u.isFinite())return new a(u.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new a([1,1,2,6,24,120,720,5040][u]);var c=t.precision+(Math.log(u.toNumber())|0),h=a.clone({precision:c});if(u%2===1)return u.times(l(new a(u-1)));for(var d=u,f=new h(u),p=u.toNumber();d>2;)d-=2,p+=d,f=f.times(p);return new a(f.toPrecision(a.precision))}}),wB="lgamma",xxe=["Complex","typed"],wxe=ae(wB,xxe,n=>{var{Complex:e,typed:t}=n,r=7,i=7,a=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(wB,{number:sS,Complex:o,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function o(u){var c=6.283185307179586,h=1.1447298858494002,d=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(sS(u.re),0);if(u.re>=r||Math.abs(u.im)>=i)return s(u);if(u.re<=d){var f=pae(c,u.im)*Math.floor(.5*u.re+.25),p=u.mul(Math.PI).sin().log(),v=o(new e(1-u.re,-u.im));return new e(h,f).sub(p).sub(v)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function s(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(HW),h=new e(1,0).div(u),d=h.div(u),f=a[0],p=a[1],v=2*d.re,y=d.re*d.re+d.im*d.im,g=2;g<8;g++){var w=p;p=-y*f+a[g],f=v*f+w}var b=h.mul(d.mul(f).add(p));return c.add(b)}function l(u){var c=0,h=0,d=u;for(u=u.add(1);u.re<=r;){d=d.mul(u);var f=d.im<0?1:0;f!==0&&h===0&&c++,h=f,u=u.add(1)}return s(u).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),SB="factorial",Sxe=["typed","gamma"],Exe=ae(SB,Sxe,n=>{var{typed:e,gamma:t}=n;return e(SB,{number:function(r){if(r<0)throw new Error("Value must be non-negative");return t(r+1)},BigNumber:function(r){if(r.isNegative())throw new Error("Value must be non-negative");return t(r.plus(1))},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),EB="kldivergence",_xe=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],Cxe=ae(EB,_xe,n=>{var{typed:e,matrix:t,divide:r,sum:i,multiply:a,map:o,dotDivide:s,log:l,isNumeric:u}=n;return e(EB,{"Array, Array":function(h,d){return c(t(h),t(d))},"Matrix, Array":function(h,d){return c(h,t(d))},"Array, Matrix":function(h,d){return c(t(h),d)},"Matrix, Matrix":function(h,d){return c(h,d)}});function c(h,d){var f=d.size().length,p=h.size().length;if(f>1)throw new Error("first object must be one dimensional");if(p>1)throw new Error("second object must be one dimensional");if(f!==p)throw new Error("Length of two vectors must be equal");var v=i(h);if(v===0)throw new Error("Sum of elements in first object must be non zero");var y=i(d);if(y===0)throw new Error("Sum of elements in second object must be non zero");var g=r(h,i(h)),w=r(d,i(d)),b=i(a(g,o(s(g,w),m=>l(m))));return u(b)?b:Number.NaN}}),_B="multinomial",Axe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],Txe=ae(_B,Axe,n=>{var{typed:e,add:t,divide:r,multiply:i,factorial:a,isInteger:o,isPositive:s}=n;return e(_B,{"Array | Matrix":function(l){var u=0,c=1;return bu(l,function(h){if(!o(h)||!s(h))throw new TypeError("Positive integer value expected in function multinomial");u=t(u,h),c=i(c,a(h))}),r(a(u),c)}})}),CB="permutations",Mxe=["typed","factorial"],Dxe=ae(CB,Mxe,n=>{var{typed:e,factorial:t}=n;return e(CB,{"number | BigNumber":t,"number, number":function(r,i){if(!Nt(r)||r<0)throw new TypeError("Positive integer value expected in function permutations");if(!Nt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(i>r)throw new TypeError("second argument k must be less than or equal to first argument n");return ru(r-i+1,r)},"BigNumber, BigNumber":function(r,i){var a,o;if(!AB(r)||!AB(i))throw new TypeError("Positive integer value expected in function permutations");if(i.gt(r))throw new TypeError("second argument k must be less than or equal to first argument n");var s=r.mul(0).add(1);for(a=s,o=r.minus(i).plus(1);o.lte(r);o=o.plus(1))a=a.times(o);return a}})});function AB(n){return n.isInteger()&&n.gte(0)}var Uq={exports:{}};(function(n){(function(e,t,r){function i(l){var u=this,c=s();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function a(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new i(l),h=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,h&&(typeof h=="object"&&a(h,c),d.state=function(){return a(c,{})}),d}function s(){var l=4022871197,u=function(c){c=String(c);for(var h=0;h<c.length;h++){l+=c.charCodeAt(h);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=o:this.alea=o})(fo,n)})(Uq);var kxe=Uq.exports,jq={exports:{}};(function(n){(function(e,t,r){function i(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function a(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var u=new i(s),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=o:this.xor128=o})(fo,n)})(jq);var Nxe=jq.exports,Hq={exports:{}};(function(n){(function(e,t,r){function i(s){var l=this,u="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var u=new i(s),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=o:this.xorwow=o})(fo,n)})(Hq);var Oxe=Hq.exports,Vq={exports:{}};(function(n){(function(e,t,r){function i(s){var l=this;l.next=function(){var c=l.x,h=l.i,d,f;return d=c[h],d^=d>>>7,f=d^d<<24,d=c[h+1&7],f^=d^d>>>10,d=c[h+3&7],f^=d^d>>>3,d=c[h+4&7],f^=d^d<<7,d=c[h+7&7],d=d^d<<13,f^=d^d<<9,c[h]=f,l.i=h+1&7,f};function u(c,h){var d,f=[];if(h===(h|0))f[0]=h;else for(h=""+h,d=0;d<h.length;++d)f[d&7]=f[d&7]<<15^h.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],c.x=f,c.i=0,d=256;d>0;--d)c.next()}u(l,s)}function a(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var u=new i(s),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.x&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=o:this.xorshift7=o})(fo,n)})(Vq);var Pxe=Vq.exports,Wq={exports:{}};(function(n){(function(e,t,r){function i(s){var l=this;l.next=function(){var c=l.w,h=l.X,d=l.i,f,p;return l.w=c=c+1640531527|0,p=h[d+34&127],f=h[d=d+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=h[d]=p^f,l.i=d,p+(c^c>>>16)|0};function u(c,h){var d,f,p,v,y,g=[],w=128;for(h===(h|0)?(f=h,h=null):(h=h+"\0",f=0,w=Math.max(w,h.length)),p=0,v=-32;v<w;++v)h&&(f^=h.charCodeAt((v+32)%h.length)),v===0&&(y=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,v>=0&&(y=y+1640531527|0,d=g[v&127]^=f+y,p=d==0?p+1:0);for(p>=128&&(g[(h&&h.length||0)&127]=-1),p=127,v=4*128;v>0;--v)f=g[p+34&127],d=g[p=p+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,g[p]=f^d;c.w=y,c.X=g,c.i=p}u(l,s)}function a(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var u=new i(s),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.X&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=o:this.xor4096=o})(fo,n)})(Wq);var Rxe=Wq.exports,qq={exports:{}};(function(n){(function(e,t,r){function i(s){var l=this,u="";l.next=function(){var h=l.b,d=l.c,f=l.d,p=l.a;return h=h<<25^h>>>7^d,d=d-f|0,f=f<<24^f>>>8^p,p=p-h|0,l.b=h=h<<20^h>>>12^d,l.c=d=d-f|0,l.d=f<<16^d>>>16^p,l.a=p-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function a(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var u=new i(s),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=o:this.tychei=o})(fo,n)})(qq);var Ixe=qq.exports,Gq={exports:{}};const Lxe={},Fxe=Object.freeze(Object.defineProperty({__proto__:null,default:Lxe},Symbol.toStringTag,{value:"Module"})),Bxe=pte(Fxe);(function(n){(function(e,t,r){var i=256,a=6,o=52,s="random",l=r.pow(i,a),u=r.pow(2,o),c=u*2,h=i-1,d;function f(m,x,S){var C=[];x=x==!0?{entropy:!0}:x||{};var T=g(y(x.entropy?[m,b(t)]:m??w(),3),C),M=new p(C),A=function(){for(var D=M.g(a),O=l,U=0;D<u;)D=(D+U)*i,O*=i,U=M.g(1);for(;D>=c;)D/=2,O/=2,U>>>=1;return(D+U)/O};return A.int32=function(){return M.g(4)|0},A.quick=function(){return M.g(4)/4294967296},A.double=A,g(b(M.S),t),(x.pass||S||function(D,O,U,L){return L&&(L.S&&v(L,M),D.state=function(){return v(M,{})}),U?(r[s]=D,O):D})(A,T,"global"in x?x.global:this==r,x.state)}function p(m){var x,S=m.length,C=this,T=0,M=C.i=C.j=0,A=C.S=[];for(S||(m=[S++]);T<i;)A[T]=T++;for(T=0;T<i;T++)A[T]=A[M=h&M+m[T%S]+(x=A[T])],A[M]=x;(C.g=function(D){for(var O,U=0,L=C.i,F=C.j,k=C.S;D--;)O=k[L=h&L+1],U=U*i+k[h&(k[L]=k[F=h&F+O])+(k[F]=O)];return C.i=L,C.j=F,U})(i)}function v(m,x){return x.i=m.i,x.j=m.j,x.S=m.S.slice(),x}function y(m,x){var S=[],C=typeof m,T;if(x&&C=="object")for(T in m)try{S.push(y(m[T],x-1))}catch{}return S.length?S:C=="string"?m:m+"\0"}function g(m,x){for(var S=m+"",C,T=0;T<S.length;)x[h&T]=h&(C^=x[h&T]*19)+S.charCodeAt(T++);return b(x)}function w(){try{var m;return d&&(m=d.randomBytes)?m=m(i):(m=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(m)),b(m)}catch{var x=e.navigator,S=x&&x.plugins;return[+new Date,e,S,e.screen,b(t)]}}function b(m){return String.fromCharCode.apply(0,m)}if(g(r.random(),t),n.exports){n.exports=f;try{d=Bxe}catch{}}else r["seed"+s]=f})(typeof self<"u"?self:fo,[],Math)})(Gq);var zxe=Gq.exports,Uxe=kxe,jxe=Nxe,Hxe=Oxe,Vxe=Pxe,Wxe=Rxe,qxe=Ixe,Bd=zxe;Bd.alea=Uxe;Bd.xor128=jxe;Bd.xorwow=Hxe;Bd.xorshift7=Vxe;Bd.xor4096=Wxe;Bd.tychei=qxe;var Gxe=Bd;const $q=is(Gxe);var $xe=$q(Date.now());function Xp(n){var e;function t(i){e=i===null?$xe:$q(String(i))}t(n);function r(){return e()}return r}var TB="pickRandom",Xxe=["typed","config","?on"],Yxe=ae(TB,Xxe,n=>{var{typed:e,config:t,on:r}=n,i=Xp(t.randomSeed);return r&&r("config",function(o,s){o.randomSeed!==s.randomSeed&&(i=Xp(o.randomSeed))}),e(TB,{"Array | Matrix":function(o){return a(o,{})},"Array | Matrix, Object":function(o,s){return a(o,s)},"Array | Matrix, number":function(o,s){return a(o,{number:s})},"Array | Matrix, Array | Matrix":function(o,s){return a(o,{weights:s})},"Array | Matrix, Array | Matrix, number":function(o,s,l){return a(o,{number:l,weights:s})},"Array | Matrix, number, Array | Matrix":function(o,s,l){return a(o,{number:s,weights:l})}});function a(o,s){var{number:l,weights:u,elementWise:c=!0}=s,h=typeof l>"u";h&&(l=1);var d=Ft(o)?o.create:Ft(u)?u.create:null;o=o.valueOf(),u&&(u=u.valueOf()),c===!0&&(o=wn(o),u=wn(u));var f=0;if(typeof u<"u"){if(u.length!==o.length)throw new Error("Weights must have the same length as possibles");for(var p=0,v=u.length;p<v;p++){if(!tn(u[p])||u[p]<0)throw new Error("Weights must be an array of positive numbers");f+=u[p]}}for(var y=o.length,g=[],w;g.length<l;){if(typeof u>"u")w=o[Math.floor(i()*y)];else for(var b=i()*f,m=0,x=o.length;m<x;m++)if(b-=u[m],b<0){w=o[m];break}g.push(w)}return h?g[0]:d?d(g):g}});function wN(n,e){var t=[];if(n=n.slice(0),n.length>1)for(var r=0,i=n.shift();r<i;r++)t.push(wN(n,e));else for(var a=0,o=n.shift();a<o;a++)t.push(e());return t}var MB="random",Zxe=["typed","config","?on"],Jxe=ae(MB,Zxe,n=>{var{typed:e,config:t,on:r}=n,i=Xp(t.randomSeed);return r&&r("config",function(s,l){s.randomSeed!==l.randomSeed&&(i=Xp(s.randomSeed))}),e(MB,{"":()=>o(0,1),number:s=>o(0,s),"number, number":(s,l)=>o(s,l),"Array | Matrix":s=>a(s,0,1),"Array | Matrix, number":(s,l)=>a(s,0,l),"Array | Matrix, number, number":(s,l,u)=>a(s,l,u)});function a(s,l,u){var c=wN(s.valueOf(),()=>o(l,u));return Ft(s)?s.create(c):c}function o(s,l){return s+i()*(l-s)}}),DB="randomInt",Kxe=["typed","config","?on"],Qxe=ae(DB,Kxe,n=>{var{typed:e,config:t,on:r}=n,i=Xp(t.randomSeed);return r&&r("config",function(s,l){s.randomSeed!==l.randomSeed&&(i=Xp(s.randomSeed))}),e(DB,{"":()=>o(0,1),number:s=>o(0,s),"number, number":(s,l)=>o(s,l),"Array | Matrix":s=>a(s,0,1),"Array | Matrix, number":(s,l)=>a(s,0,l),"Array | Matrix, number, number":(s,l,u)=>a(s,l,u)});function a(s,l,u){var c=wN(s.valueOf(),()=>o(l,u));return Ft(s)?s.create(c):c}function o(s,l){return Math.floor(s+i()*(l-s))}}),kB="stirlingS2",ewe=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],twe=ae(kB,ewe,n=>{var{typed:e,addScalar:t,subtractScalar:r,multiplyScalar:i,divideScalar:a,pow:o,factorial:s,combinations:l,isNegative:u,isInteger:c,number:h,bignumber:d,larger:f}=n,p=[],v=[];return e(kB,{"number | BigNumber, number | BigNumber":function(y,g){if(!c(y)||u(y)||!c(g)||u(g))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(f(g,y))throw new TypeError("k must be less than or equal to n in function stirlingS2");var w=!(tn(y)&&tn(g)),b=w?v:p,m=w?d:h,x=h(y),S=h(g);if(b[x]&&b[x].length>S)return b[x][S];for(var C=0;C<=x;++C)if(b[C]||(b[C]=[m(C===0?1:0)]),C!==0)for(var T=b[C],M=b[C-1],A=T.length;A<=C&&A<=S;++A)A===C?T[A]=1:T[A]=t(i(m(A),M[A]),M[A-1]);return b[x][S]}})}),NB="bellNumbers",nwe=["typed","addScalar","isNegative","isInteger","stirlingS2"],rwe=ae(NB,nwe,n=>{var{typed:e,addScalar:t,isNegative:r,isInteger:i,stirlingS2:a}=n;return e(NB,{"number | BigNumber":function(o){if(!i(o)||r(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var s=0,l=0;l<=o;l++)s=t(s,a(o,l));return s}})}),OB="catalan",iwe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],awe=ae(OB,iwe,n=>{var{typed:e,addScalar:t,divideScalar:r,multiplyScalar:i,combinations:a,isNegative:o,isInteger:s}=n;return e(OB,{"number | BigNumber":function(l){if(!s(l)||o(l))throw new TypeError("Non-negative integer value expected in function catalan");return r(a(i(l,2),l),t(l,1))}})}),PB="composition",owe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],swe=ae(PB,owe,n=>{var{typed:e,addScalar:t,combinations:r,isPositive:i,isNegative:a,isInteger:o,larger:s}=n;return e(PB,{"number | BigNumber, number | BigNumber":function(l,u){if(!o(l)||!i(l)||!o(u)||!i(u))throw new TypeError("Positive integer value expected in function composition");if(s(u,l))throw new TypeError("k must be less than or equal to n in function composition");return r(t(l,-1),t(u,-1))}})}),RB="leafCount",lwe=["parse","typed"],uwe=ae(RB,lwe,n=>{var{parse:e,typed:t}=n;function r(i){var a=0;return i.forEach(o=>{a+=r(o)}),a||1}return t(RB,{Node:function(i){return r(i)}})});function IB(n){return gn(n)||Fr(n)&&n.isUnary()&&gn(n.args[0])}function vS(n){return!!(gn(n)||(yu(n)||Fr(n))&&n.args.every(vS)||bl(n)&&vS(n.content))}function LB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function jC(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LB(Object(t),!0).forEach(function(r){fr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):LB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var cwe="simplifyUtil",hwe=["FunctionNode","OperatorNode","SymbolNode"],SN=ae(cwe,hwe,n=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:r}=n,i=!0,a=!1,o="defaultF",s={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}},l={divide:{total:a},log:{total:a}},u={subtract:{total:a},abs:{trivial:i},log:{total:i}};function c(b,m){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s,S=o;if(typeof b=="string"?S=b:Fr(b)?S=b.fn.toString():yu(b)?S=b.name:bl(b)&&(S="paren"),gt(x,S)){var C=x[S];if(gt(C,m))return C[m];if(gt(s,S))return s[S][m]}if(gt(x,o)){var T=x[o];return gt(T,m)?T[m]:s[o][m]}if(gt(s,S)){var M=s[S];if(gt(M,m))return M[m]}return s[o][m]}function h(b){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(b,"commutative",m)}function d(b){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(b,"associative",m)}function f(b,m){var x=jC({},b);for(var S in m)gt(b,S)?x[S]=jC(jC({},m[S]),b[S]):x[S]=m[S];return x}function p(b,m){if(!b.args||b.args.length===0)return b;b.args=v(b,m);for(var x=0;x<b.args.length;x++)p(b.args[x],m)}function v(b,m){var x,S=[],C=function T(M){for(var A=0;A<M.args.length;A++){var D=M.args[A];Fr(D)&&x===D.op?T(D):S.push(D)}};return d(b,m)?(x=b.op,C(b),S):b.args}function y(b,m){if(!(!b.args||b.args.length===0)){for(var x=w(b),S=b.args.length,C=0;C<S;C++)y(b.args[C],m);if(S>2&&d(b,m)){for(var T=b.args.pop();b.args.length>0;)T=x([b.args.pop(),T]);b.args=T.args}}}function g(b,m){if(!(!b.args||b.args.length===0)){for(var x=w(b),S=b.args.length,C=0;C<S;C++)g(b.args[C],m);if(S>2&&d(b,m)){for(var T=b.args.shift();b.args.length>0;)T=x([T,b.args.shift()]);b.args=T.args}}}function w(b){return Fr(b)?function(m){try{return new t(b.op,b.fn,m,b.implicit)}catch(x){return console.error(x),[]}}:function(m){return new e(new r(b.name),m)}}return{createMakeNodeFunction:w,hasProperty:c,isCommutative:h,isAssociative:d,mergeContext:f,flatten:p,allChildren:v,unflattenr:y,unflattenl:g,defaultContext:s,realContext:l,positiveContext:u}}),dwe="simplify",fwe=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","resolve","simplifyConstant","simplifyCore","?fraction","?bignumber","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],pwe=ae(dwe,fwe,n=>{var{config:e,typed:t,parse:r,add:i,subtract:a,multiply:o,divide:s,pow:l,isZero:u,equal:c,resolve:h,simplifyConstant:d,simplifyCore:f,fraction:p,bignumber:v,mathWithTransform:y,matrix:g,AccessorNode:w,ArrayNode:b,ConstantNode:m,FunctionNode:x,IndexNode:S,ObjectNode:C,OperatorNode:T,ParenthesisNode:M,SymbolNode:A}=n,{hasProperty:D,isCommutative:O,isAssociative:U,mergeContext:L,flatten:F,unflattenr:k,unflattenl:P,createMakeNodeFunction:z,defaultContext:B,realContext:X,positiveContext:J}=SN({FunctionNode:x,OperatorNode:T,SymbolNode:A});t.addConversion({from:"Object",to:"Map",convert:Ep});var Q=t("simplify",{Node:pe,"Node, Map":(oe,G)=>pe(oe,!1,G),"Node, Map, Object":(oe,G,q)=>pe(oe,!1,G,q),"Node, Array":pe,"Node, Array, Map":pe,"Node, Array, Map, Object":pe});t.removeConversion({from:"Object",to:"Map",convert:Ep}),Q.defaultContext=B,Q.realContext=X,Q.positiveContext=J;function Z(oe){return oe.transform(function(G,q,ce){return bl(G)?Z(G.content):G})}var re={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};Q.rules=[f,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},d,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},d,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function fe(oe,G){var q={};if(oe.s){var ce=oe.s.split("->");if(ce.length===2)q.l=ce[0],q.r=ce[1];else throw SyntaxError("Could not parse rule: "+oe.s)}else q.l=oe.l,q.r=oe.r;q.l=Z(r(q.l)),q.r=Z(r(q.r));for(var Ae of["imposeContext","repeat","assuming"])Ae in oe&&(q[Ae]=oe[Ae]);if(oe.evaluate&&(q.evaluate=r(oe.evaluate)),U(q.l,G)){var $=!O(q.l,G),ee;$&&(ee=De());var ge=z(q.l),xe=De();q.expanded={},q.expanded.l=ge([q.l,xe]),F(q.expanded.l,G),k(q.expanded.l,G),q.expanded.r=ge([q.r,xe]),$&&(q.expandedNC1={},q.expandedNC1.l=ge([ee,q.l]),q.expandedNC1.r=ge([ee,q.r]),q.expandedNC2={},q.expandedNC2.l=ge([ee,q.expanded.l]),q.expandedNC2.r=ge([ee,q.expanded.r]))}return q}function se(oe,G){for(var q=[],ce=0;ce<oe.length;ce++){var Ae=oe[ce],$=void 0,ee=typeof Ae;switch(ee){case"string":Ae={s:Ae};case"object":$=fe(Ae,G);break;case"function":$=Ae;break;default:throw TypeError("Unsupported type of rule: "+ee)}q.push($)}return q}var ye=0;function De(){return new A("_p"+ye++)}function pe(oe,G){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:G0(),ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Ae=ce.consoleDebug;G=se(G||Q.rules,ce.context);var $=h(oe,q);$=Z($);for(var ee={},ge=$.toString({parenthesis:"all"});!ee[ge];){ee[ge]=!0,ye=0;var xe=ge;Ae&&console.log("Working on: ",ge);for(var Ne=0;Ne<G.length;Ne++){var Fe="";if(typeof G[Ne]=="function"?($=G[Ne]($,ce),Ae&&(Fe=G[Ne].name)):(F($,ce.context),$=be($,G[Ne],ce.context),Ae&&(Fe="".concat(G[Ne].l.toString()," -> ").concat(G[Ne].r.toString()))),Ae){var qe=$.toString({parenthesis:"all"});qe!==xe&&(console.log("Applying",Fe,"produced",qe),xe=qe)}P($,ce.context)}ge=$.toString({parenthesis:"all"})}return $}function Me(oe,G,q){var ce=oe;if(oe)for(var Ae=0;Ae<oe.length;++Ae){var $=be(oe[Ae],G,q);$!==oe[Ae]&&(ce===oe&&(ce=oe.slice()),ce[Ae]=$)}return ce}function be(oe,G,q){if(G.assuming){for(var ce in G.assuming)for(var Ae in G.assuming[ce])if(D(ce,Ae,q)!==G.assuming[ce][Ae])return oe}var $=L(G.imposeContext,q),ee=oe;if(ee instanceof T||ee instanceof x){var ge=Me(ee.args,G,q);ge!==ee.args&&(ee=ee.clone(),ee.args=ge)}else if(ee instanceof M){if(ee.content){var xe=be(ee.content,G,q);xe!==ee.content&&(ee=new M(xe))}}else if(ee instanceof b){var Ne=Me(ee.items,G,q);Ne!==ee.items&&(ee=new b(Ne))}else if(ee instanceof w){var Fe=ee.object;ee.object&&(Fe=be(ee.object,G,q));var qe=ee.index;ee.index&&(qe=be(ee.index,G,q)),(Fe!==ee.object||qe!==ee.index)&&(ee=new w(Fe,qe))}else if(ee instanceof S){var ke=Me(ee.dimensions,G,q);ke!==ee.dimensions&&(ee=new S(ke))}else if(ee instanceof C){var it=!1,Ze={};for(var st in ee.properties)Ze[st]=be(ee.properties[st],G,q),Ze[st]!==ee.properties[st]&&(it=!0);it&&(ee=new C(Ze))}var we=G.r,Re=ie(G.l,ee,$)[0];if(!Re&&G.expanded&&(we=G.expanded.r,Re=ie(G.expanded.l,ee,$)[0]),!Re&&G.expandedNC1&&(we=G.expandedNC1.r,Re=ie(G.expandedNC1.l,ee,$)[0],Re||(we=G.expandedNC2.r,Re=ie(G.expandedNC2.l,ee,$)[0])),Re){var et=ee.implicit;ee=we.clone(),et&&"implicit"in we&&(ee.implicit=!0),ee=ee.transform(function(V){return V.isSymbolNode&&gt(Re.placeholders,V.name)?Re.placeholders[V.name].clone():V})}return G.repeat&&ee!==oe&&(ee=be(ee,G,q)),ee}function ne(oe,G){var q=[],ce,Ae,$=z(oe);if(O(oe,G))for(var ee=0;ee<oe.args.length;ee++)Ae=oe.args.slice(0),Ae.splice(ee,1),ce=Ae.length===1?Ae[0]:$(Ae),q.push($([oe.args[ee],ce]));else for(var ge=1;ge<oe.args.length;ge++){var xe=oe.args[0];ge>1&&(xe=$(oe.args.slice(0,ge))),Ae=oe.args.slice(ge),ce=Ae.length===1?Ae[0]:$(Ae),q.push($([xe,ce]))}return q}function Pe(oe,G){var q={placeholders:{}};if(!oe.placeholders&&!G.placeholders)return q;if(oe.placeholders){if(!G.placeholders)return oe}else return G;for(var ce in oe.placeholders)if(gt(oe.placeholders,ce)&&(q.placeholders[ce]=oe.placeholders[ce],gt(G.placeholders,ce)&&!_e(oe.placeholders[ce],G.placeholders[ce])))return null;for(var Ae in G.placeholders)gt(G.placeholders,Ae)&&(q.placeholders[Ae]=G.placeholders[Ae]);return q}function ze(oe,G){var q=[];if(oe.length===0||G.length===0)return q;for(var ce,Ae=0;Ae<oe.length;Ae++)for(var $=0;$<G.length;$++)ce=Pe(oe[Ae],G[$]),ce&&q.push(ce);return q}function K(oe){if(oe.length===0)return oe;for(var G=oe.reduce(ze),q=[],ce={},Ae=0;Ae<G.length;Ae++){var $=JSON.stringify(G[Ae]);ce[$]||(ce[$]=!0,q.push(G[Ae]))}return q}function ie(oe,G,q,ce){var Ae=[{placeholders:{}}];if(oe instanceof T&&G instanceof T||oe instanceof x&&G instanceof x){if(oe instanceof T){if(oe.op!==G.op||oe.fn!==G.fn)return[]}else if(oe instanceof x&&oe.name!==G.name)return[];if(G.args.length===1&&oe.args.length===1||!U(G,q)&&G.args.length===oe.args.length||ce){for(var $=[],ee=0;ee<oe.args.length;ee++){var ge=ie(oe.args[ee],G.args[ee],q);if(ge.length===0)break;$.push(ge)}if($.length!==oe.args.length){if(!O(G,q)||oe.args.length===1)return[];if(oe.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var xe=ie(oe.args[0],G.args[1],q);if(xe.length===0)return[];var Ne=ie(oe.args[1],G.args[0],q);if(Ne.length===0)return[];$=[xe,Ne]}Ae=K($)}else if(G.args.length>=2&&oe.args.length===2){for(var Fe=ne(G,q),qe=[],ke=0;ke<Fe.length;ke++){var it=ie(oe,Fe[ke],q,!0);qe=qe.concat(it)}return qe}else{if(oe.args.length>2)throw Error("Unexpected non-binary associative function: "+oe.toString());return[]}}else if(oe instanceof A){if(oe.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(re[oe.name]){if(oe.name!==G.name)return[]}else switch(oe.name[1]>="a"&&oe.name[1]<="z"?oe.name.substring(0,2):oe.name[0]){case"n":case"_p":Ae[0].placeholders[oe.name]=G;break;case"c":case"cl":if(gn(G))Ae[0].placeholders[oe.name]=G;else return[];break;case"v":if(!gn(G))Ae[0].placeholders[oe.name]=G;else return[];break;case"vl":if(ai(G))Ae[0].placeholders[oe.name]=G;else return[];break;case"cd":if(IB(G))Ae[0].placeholders[oe.name]=G;else return[];break;case"vd":if(!IB(G))Ae[0].placeholders[oe.name]=G;else return[];break;case"ce":if(vS(G))Ae[0].placeholders[oe.name]=G;else return[];break;case"ve":if(!vS(G))Ae[0].placeholders[oe.name]=G;else return[];break;default:throw new Error("Invalid symbol in rule: "+oe.name)}}else if(oe instanceof m){if(!c(oe.value,G.value))return[]}else return[];return Ae}function _e(oe,G){if(oe instanceof m&&G instanceof m){if(!c(oe.value,G.value))return!1}else if(oe instanceof A&&G instanceof A){if(oe.name!==G.name)return!1}else if(oe instanceof T&&G instanceof T||oe instanceof x&&G instanceof x){if(oe instanceof T){if(oe.op!==G.op||oe.fn!==G.fn)return!1}else if(oe instanceof x&&oe.name!==G.name)return!1;if(oe.args.length!==G.args.length)return!1;for(var q=0;q<oe.args.length;q++)if(!_e(oe.args[q],G.args[q]))return!1}else return!1;return!0}return Q}),mwe="simplifyConstant",gwe=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],vwe=ae(mwe,gwe,n=>{var{typed:e,config:t,mathWithTransform:r,matrix:i,fraction:a,bignumber:o,AccessorNode:s,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:h,ObjectNode:d,OperatorNode:f,SymbolNode:p}=n,{isCommutative:v,isAssociative:y,allChildren:g,createMakeNodeFunction:w}=SN({FunctionNode:c,OperatorNode:f,SymbolNode:p}),b=e("simplifyConstant",{Node:F=>C(L(F,{})),"Node, Object":function(F,k){return C(L(F,k))}});function m(F){return Id(F)?F.valueOf():F instanceof Array?F.map(m):Ft(F)?i(m(F.valueOf())):F}function x(F,k,P){try{return r[F].apply(null,k)}catch{return k=k.map(m),M(r[F].apply(null,k),P)}}var S=e({Fraction:D,number:function(F){return F<0?A(new u(-F)):new u(F)},BigNumber:function(F){return F<0?A(new u(-F)):new u(F)},Complex:function(F){throw new Error("Cannot convert Complex number to Node")},string:function(F){return new u(F)},Matrix:function(F){return new l(F.valueOf().map(k=>S(k)))}});function C(F){return Rn(F)?F:S(F)}function T(F,k){var P=k&&k.exactFractions!==!1;if(P&&isFinite(F)&&a){var z=a(F),B=k&&typeof k.fractionsLimit=="number"?k.fractionsLimit:1/0;if(z.valueOf()===F&&z.n<B&&z.d<B)return z}return F}var M=e({"string, Object":function(F,k){if(t.number==="BigNumber")return o===void 0&&vN(),o(F);if(t.number==="Fraction")return a===void 0&&yq(),a(F);var P=parseFloat(F);return T(P,k)},"Fraction, Object":function(F,k){return F},"BigNumber, Object":function(F,k){return F},"number, Object":function(F,k){return T(F,k)},"Complex, Object":function(F,k){return F.im!==0?F:T(F.re,k)},"Matrix, Object":function(F,k){return i(T(F.valueOf()))},"Array, Object":function(F,k){return F.map(T)}});function A(F){return new f("-","unaryMinus",[F])}function D(F){var k,P=F.s*F.n;return P<0?k=new f("-","unaryMinus",[new u(-P)]):k=new u(P),F.d===1?k:new f("/","divide",[k,new u(F.d)])}function O(F,k,P){if(!Ld(k))return new s(C(F),C(k));if(co(F)||Ft(F)){for(var z=Array.from(k.dimensions);z.length>0;)if(gn(z[0])&&typeof z[0].value!="string"){var B=M(z.shift().value,P);co(F)?F=F.items[B-1]:(F=F.valueOf()[B-1],F instanceof Array&&(F=i(F)))}else if(z.length>1&&gn(z[1])&&typeof z[1].value!="string"){var X=M(z[1].value,P),J=[],Q=co(F)?F.items:F.valueOf();for(var Z of Q)if(co(Z))J.push(Z.items[X-1]);else if(Ft(F))J.push(Z[X-1]);else break;if(J.length===Q.length)co(F)?F=new l(J):F=i(J),z.splice(1,1);else break}else break;return z.length===k.dimensions.length?new s(C(F),k):z.length>0?(k=new h(z),new s(C(F),k)):F}if(Qv(F)&&k.dimensions.length===1&&gn(k.dimensions[0])){var re=k.dimensions[0].value;return re in F.properties?F.properties[re]:new u}return new s(C(F),k)}function U(F,k,P,z){var B=k.shift(),X=k.reduce((J,Q)=>{if(!Rn(Q)){var Z=J.pop();if(Rn(Z))return[Z,Q];try{return J.push(x(F,[Z,Q],z)),J}catch{J.push(Z)}}J.push(C(J.pop()));var re=J.length===1?J[0]:P(J);return[P([re,C(Q)])]},[B]);return X.length===1?X[0]:P([X[0],S(X[1])])}function L(F,k){switch(F.type){case"SymbolNode":return F;case"ConstantNode":switch(typeof F.value){case"number":return M(F.value,k);case"string":return F.value;default:if(!isNaN(F.value))return M(F.value,k)}return F;case"FunctionNode":if(r[F.name]&&r[F.name].rawArgs)return F;{var P=["add","multiply"];if(!P.includes(F.name)){var z=F.args.map(be=>L(be,k));if(!z.some(Rn))try{return x(F.name,z,k)}catch{}if(F.name==="size"&&z.length===1&&co(z[0])){for(var B=[],X=z[0];co(X);)B.push(X.items.length),X=X.items[0];return i(B)}return new c(F.name,z.map(C))}}case"OperatorNode":{var J=F.fn.toString(),Q,Z,re=w(F);if(Fr(F)&&F.isUnary())Q=[L(F.args[0],k)],Rn(Q[0])?Z=re(Q):Z=x(J,Q,k);else if(y(F,k.context))if(Q=g(F,k.context),Q=Q.map(be=>L(be,k)),v(J,k.context)){for(var fe=[],se=[],ye=0;ye<Q.length;ye++)Rn(Q[ye])?se.push(Q[ye]):fe.push(Q[ye]);fe.length>1?(Z=U(J,fe,re,k),se.unshift(Z),Z=U(J,se,re,k)):Z=U(J,Q,re,k)}else Z=U(J,Q,re,k);else Q=F.args.map(be=>L(be,k)),Z=U(J,Q,re,k);return Z}case"ParenthesisNode":return L(F.content,k);case"AccessorNode":return O(L(F.object,k),L(F.index,k),k);case"ArrayNode":{var De=F.items.map(be=>L(be,k));return De.some(Rn)?new l(De.map(C)):i(De)}case"IndexNode":return new h(F.dimensions.map(be=>b(be,k)));case"ObjectNode":{var pe={};for(var Me in F.properties)pe[Me]=b(F.properties[Me],k);return new d(pe)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(F.type))}}return b}),FB="simplifyCore",ywe=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],bwe=ae(FB,ywe,n=>{var{typed:e,parse:t,equal:r,isZero:i,add:a,subtract:o,multiply:s,divide:l,pow:u,AccessorNode:c,ArrayNode:h,ConstantNode:d,FunctionNode:f,IndexNode:p,ObjectNode:v,OperatorNode:y,ParenthesisNode:g,SymbolNode:w}=n,b=new d(0),m=new d(1),x=new d(!0),S=new d(!1);function C(D){return Fr(D)&&["and","not","or"].includes(D.op)}var{hasProperty:T,isCommutative:M}=SN({FunctionNode:f,OperatorNode:y,SymbolNode:w});function A(D){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=O?O.context:void 0;if(T(D,"trivial",U)){if(yu(D)&&D.args.length===1)return A(D.args[0],O);var L=!1,F=0;if(D.forEach(se=>{++F,F===1&&(L=A(se,O))}),F===1)return L}var k=D;if(yu(k)){var P=Sme(k.name);if(P){if(k.args.length>2&&T(k,"associative",U))for(;k.args.length>2;){var z=k.args.pop(),B=k.args.pop();k.args.push(new y(P,k.name,[z,B]))}k=new y(P,k.name,k.args)}else return new f(A(k.fn),k.args.map(se=>A(se,O)))}if(Fr(k)&&k.isUnary()){var X=A(k.args[0],O);if(k.op==="~"&&Fr(X)&&X.isUnary()&&X.op==="~"||k.op==="not"&&Fr(X)&&X.isUnary()&&X.op==="not"&&C(X.args[0]))return X.args[0];var J=!0;if(k.op==="-"&&Fr(X)&&(X.isBinary()&&X.fn==="subtract"&&(k=new y("-","subtract",[X.args[1],X.args[0]]),J=!1),X.isUnary()&&X.op==="-"))return X.args[0];if(J)return new y(k.op,k.fn,[X])}if(Fr(k)&&k.isBinary()){var Q=A(k.args[0],O),Z=A(k.args[1],O);if(k.op==="+"){if(gn(Q)&&i(Q.value))return Z;if(gn(Z)&&i(Z.value))return Q;Fr(Z)&&Z.isUnary()&&Z.op==="-"&&(Z=Z.args[0],k=new y("-","subtract",[Q,Z]))}if(k.op==="-")return Fr(Z)&&Z.isUnary()&&Z.op==="-"?A(new y("+","add",[Q,Z.args[0]]),O):gn(Q)&&i(Q.value)?A(new y("-","unaryMinus",[Z])):gn(Z)&&i(Z.value)?Q:new y(k.op,k.fn,[Q,Z]);if(k.op==="*"){if(gn(Q)){if(i(Q.value))return b;if(r(Q.value,1))return Z}if(gn(Z)){if(i(Z.value))return b;if(r(Z.value,1))return Q;if(M(k,U))return new y(k.op,k.fn,[Z,Q],k.implicit)}return new y(k.op,k.fn,[Q,Z],k.implicit)}if(k.op==="/")return gn(Q)&&i(Q.value)?b:gn(Z)&&r(Z.value,1)?Q:new y(k.op,k.fn,[Q,Z]);if(k.op==="^"&&gn(Z)){if(i(Z.value))return m;if(r(Z.value,1))return Q}if(k.op==="and"){if(gn(Q))if(Q.value){if(C(Z))return Z;if(gn(Z))return Z.value?x:S}else return S;if(gn(Z))if(Z.value){if(C(Q))return Q}else return S}if(k.op==="or"){if(gn(Q)){if(Q.value)return x;if(C(Z))return Z}if(gn(Z)){if(Z.value)return x;if(C(Q))return Q}}return new y(k.op,k.fn,[Q,Z])}if(Fr(k))return new y(k.op,k.fn,k.args.map(se=>A(se,O)));if(co(k))return new h(k.items.map(se=>A(se,O)));if(Uc(k))return new c(A(k.object,O),A(k.index,O));if(Ld(k))return new p(k.dimensions.map(se=>A(se,O)));if(Qv(k)){var re={};for(var fe in k.properties)re[fe]=A(k.properties[fe],O);return new v(re)}return k}return e(FB,{Node:A,"Node,Object":A})}),xwe="resolve",wwe=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],Swe=ae(xwe,wwe,n=>{var{typed:e,parse:t,ConstantNode:r,FunctionNode:i,OperatorNode:a,ParenthesisNode:o}=n;function s(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if(ai(l)){if(c.has(l.name)){var h=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(h,"}"))}var d=u.get(l.name);if(Rn(d)){var f=new Set(c);return f.add(l.name),s(d,u,f)}else return typeof d=="number"?t(String(d)):d!==void 0?new r(d):l}else if(Fr(l)){var p=l.args.map(function(y){return s(y,u,c)});return new a(l.op,l.fn,p,l.implicit)}else{if(bl(l))return new o(s(l.content,u,c));if(yu(l)){var v=l.args.map(function(y){return s(y,u,c)});return new i(l.name,v)}}return l.map(y=>s(y,u,c))}return e("resolve",{Node:s,"Node, Map | null | undefined":s,"Node, Object":(l,u)=>s(l,Ep(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,Ep(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,Ep(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(h=>l(h,c)))})}),BB="symbolicEqual",Ewe=["parse","simplify","typed","OperatorNode"],_we=ae(BB,Ewe,n=>{var{parse:e,simplify:t,typed:r,OperatorNode:i}=n;function a(o,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[o,s]),c=t(u,{},l);return gn(c)&&!c.value}return r(BB,{"Node, Node":a,"Node, Node, Object":a})}),zB="derivative",Cwe=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],Awe=ae(zB,Cwe,n=>{var{typed:e,config:t,parse:r,simplify:i,equal:a,isZero:o,numeric:s,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:h,SymbolNode:d}=n;function f(b,m){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},S={};y(S,b,m.name);var C=g(b,S);return x.simplify?i(C):C}e.addConversion({from:"identifier",to:"SymbolNode",convert:r});var p=e(zB,{"Node, SymbolNode":f,"Node, SymbolNode, Object":f});e.removeConversion({from:"identifier",to:"SymbolNode",convert:r}),p._simplify=!0,p.toTex=function(b){return v.apply(null,b.args)};var v=e("_derivTex",{"Node, SymbolNode":function(b,m){return gn(b)&&zn(b.value)==="string"?v(r(b.value).toString(),m.toString(),1):v(b.toTex(),m.toString(),1)},"Node, ConstantNode":function(b,m){if(zn(m.value)==="string")return v(b,r(m.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(b,m,x){return v(b.toString(),m.name,x.value)},"string, string, number":function(b,m,x){var S;return x===1?S="{d\\over d"+m+"}":S="{d^{"+x+"}\\over d"+m+"^{"+x+"}}",S+"\\left[".concat(b,"\\right]")}}),y=e("constTag",{"Object, ConstantNode, string":function(b,m){return b[m]=!0,!0},"Object, SymbolNode, string":function(b,m,x){return m.name!==x?(b[m]=!0,!0):!1},"Object, ParenthesisNode, string":function(b,m,x){return y(b,m.content,x)},"Object, FunctionAssignmentNode, string":function(b,m,x){return m.params.includes(x)?y(b,m.expr,x):(b[m]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(b,m,x){if(m.args.length>0){for(var S=y(b,m.args[0],x),C=1;C<m.args.length;++C)S=y(b,m.args[C],x)&&S;if(S)return b[m]=!0,!0}return!1}}),g=e("_derivative",{"ConstantNode, Object":function(b){return w(0)},"SymbolNode, Object":function(b,m){return m[b]!==void 0?w(0):w(1)},"ParenthesisNode, Object":function(b,m){return new h(g(b.content,m))},"FunctionAssignmentNode, Object":function(b,m){return m[b]!==void 0?w(0):g(b.expr,m)},"FunctionNode, Object":function(b,m){if(m[b]!==void 0)return w(0);var x=b.args[0],S,C=!1,T=!1,M;switch(b.name){case"cbrt":C=!0,M=new c("*","multiply",[w(3),new c("^","pow",[x,new c("/","divide",[w(2),w(3)])])]);break;case"sqrt":case"nthRoot":if(b.args.length===1)C=!0,M=new c("*","multiply",[w(2),new u("sqrt",[x])]);else if(b.args.length===2)return S=new c("/","divide",[w(1),b.args[1]]),m[S]=m[b.args[1]],g(new c("^","pow",[x,S]),m);break;case"log10":S=w(10);case"log":if(!S&&b.args.length===1)M=x.clone(),C=!0;else if(b.args.length===1&&S||b.args.length===2&&m[b.args[1]]!==void 0)M=new c("*","multiply",[x.clone(),new u("log",[S||b.args[1]])]),C=!0;else if(b.args.length===2)return g(new c("/","divide",[new u("log",[x]),new u("log",[b.args[1]])]),m);break;case"pow":if(b.args.length===2)return m[S]=m[b.args[1]],g(new c("^","pow",[x,b.args[1]]),m);break;case"exp":M=new u("exp",[x.clone()]);break;case"sin":M=new u("cos",[x.clone()]);break;case"cos":M=new c("-","unaryMinus",[new u("sin",[x.clone()])]);break;case"tan":M=new c("^","pow",[new u("sec",[x.clone()]),w(2)]);break;case"sec":M=new c("*","multiply",[b,new u("tan",[x.clone()])]);break;case"csc":T=!0,M=new c("*","multiply",[b,new u("cot",[x.clone()])]);break;case"cot":T=!0,M=new c("^","pow",[new u("csc",[x.clone()]),w(2)]);break;case"asin":C=!0,M=new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])])]);break;case"acos":C=!0,T=!0,M=new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])])]);break;case"atan":C=!0,M=new c("+","add",[new c("^","pow",[x.clone(),w(2)]),w(1)]);break;case"asec":C=!0,M=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),w(2)]),w(1)])])]);break;case"acsc":C=!0,T=!0,M=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),w(2)]),w(1)])])]);break;case"acot":C=!0,T=!0,M=new c("+","add",[new c("^","pow",[x.clone(),w(2)]),w(1)]);break;case"sinh":M=new u("cosh",[x.clone()]);break;case"cosh":M=new u("sinh",[x.clone()]);break;case"tanh":M=new c("^","pow",[new u("sech",[x.clone()]),w(2)]);break;case"sech":T=!0,M=new c("*","multiply",[b,new u("tanh",[x.clone()])]);break;case"csch":T=!0,M=new c("*","multiply",[b,new u("coth",[x.clone()])]);break;case"coth":T=!0,M=new c("^","pow",[new u("csch",[x.clone()]),w(2)]);break;case"asinh":C=!0,M=new u("sqrt",[new c("+","add",[new c("^","pow",[x.clone(),w(2)]),w(1)])]);break;case"acosh":C=!0,M=new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),w(2)]),w(1)])]);break;case"atanh":C=!0,M=new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])]);break;case"asech":C=!0,T=!0,M=new c("*","multiply",[x.clone(),new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])])])]);break;case"acsch":C=!0,T=!0,M=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[x.clone(),w(2)]),w(1)])])]);break;case"acoth":C=!0,T=!0,M=new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])]);break;case"abs":M=new c("/","divide",[new u(new d("abs"),[x.clone()]),x.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+b.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var A,D;C?(A="/",D="divide"):(A="*",D="multiply");var O=g(x,m);return T&&(O=new c("-","unaryMinus",[O])),new c(A,D,[O,M])},"OperatorNode, Object":function(b,m){if(m[b]!==void 0)return w(0);if(b.op==="+")return new c(b.op,b.fn,b.args.map(function(L){return g(L,m)}));if(b.op==="-"){if(b.isUnary())return new c(b.op,b.fn,[g(b.args[0],m)]);if(b.isBinary())return new c(b.op,b.fn,[g(b.args[0],m),g(b.args[1],m)])}if(b.op==="*"){var x=b.args.filter(function(L){return m[L]!==void 0});if(x.length>0){var S=b.args.filter(function(L){return m[L]===void 0}),C=S.length===1?S[0]:new c("*","multiply",S),T=x.concat(g(C,m));return new c("*","multiply",T)}return new c("+","add",b.args.map(function(L){return new c("*","multiply",b.args.map(function(F){return F===L?g(F,m):F.clone()}))}))}if(b.op==="/"&&b.isBinary()){var M=b.args[0],A=b.args[1];return m[A]!==void 0?new c("/","divide",[g(M,m),A]):m[M]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[M]),new c("/","divide",[g(A,m),new c("^","pow",[A.clone(),w(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[g(M,m),A.clone()]),new c("*","multiply",[M.clone(),g(A,m)])]),new c("^","pow",[A.clone(),w(2)])])}if(b.op==="^"&&b.isBinary()){var D=b.args[0],O=b.args[1];if(m[D]!==void 0)return gn(D)&&(o(D.value)||a(D.value,1))?w(0):new c("*","multiply",[b,new c("*","multiply",[new u("log",[D.clone()]),g(O.clone(),m)])]);if(m[O]!==void 0){if(gn(O)){if(o(O.value))return w(0);if(a(O.value,1))return g(D,m)}var U=new c("^","pow",[D.clone(),new c("-","subtract",[O,w(1)])]);return new c("*","multiply",[O.clone(),new c("*","multiply",[g(D,m),U])])}return new c("*","multiply",[new c("^","pow",[D.clone(),O.clone()]),new c("+","add",[new c("*","multiply",[g(D,m),new c("/","divide",[O.clone(),D.clone()])]),new c("*","multiply",[g(O,m),new u("log",[D.clone()])])])])}throw new Error('Cannot process operator "'+b.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function w(b,m){return new l(s(b,t.number))}return p}),UB="rationalize",Twe=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],Mwe=ae(UB,Twe,n=>{var{config:e,typed:t,equal:r,isZero:i,add:a,subtract:o,multiply:s,divide:l,pow:u,parse:c,simplifyConstant:h,simplifyCore:d,simplify:f,fraction:p,bignumber:v,mathWithTransform:y,matrix:g,AccessorNode:w,ArrayNode:b,ConstantNode:m,FunctionNode:x,IndexNode:S,ObjectNode:C,OperatorNode:T,SymbolNode:M,ParenthesisNode:A}=n;function D(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,B=U(),X=O(k,P,!0,B.firstRules),J=X.variables.length,Q={exactFractions:!1},Z={exactFractions:!0};if(k=X.expression,J>=1){k=L(k);var re,fe,se=!0,ye=!1;k=f(k,B.firstRules,{},Q);for(var De;fe=se?B.distrDivRules:B.sucDivRules,k=f(k,fe,{},Z),se=!se,De=k.toString(),De!==re;)ye=!0,re=De;ye&&(k=f(k,B.firstRulesAgain,{},Q)),k=f(k,B.finalRules,{},Q)}var pe=[],Me={};return k.type==="OperatorNode"&&k.isBinary()&&k.op==="/"?(J===1&&(k.args[0]=F(k.args[0],pe),k.args[1]=F(k.args[1])),z&&(Me.numerator=k.args[0],Me.denominator=k.args[1])):(J===1&&(k=F(k,pe)),z&&(Me.numerator=k,Me.denominator=null)),z?(Me.coefficients=pe,Me.variables=X.variables,Me.expression=k,Me):k}return t(UB,{Node:D,"Node, boolean":(k,P)=>D(k,{},P),"Node, Object":D,"Node, Object, boolean":D});function O(k,P,z,B){var X=[],J=f(k,B,P,{exactFractions:!1});z=!!z;var Q="+-*"+(z?"/":"");re(J);var Z={};return Z.expression=J,Z.variables=X,Z;function re(fe){var se=fe.type;if(se==="FunctionNode")throw new Error("There is an unsolved function call");if(se==="OperatorNode")if(fe.op==="^"){if(fe.args[1].type!=="ConstantNode"||!Nt(parseFloat(fe.args[1].value)))throw new Error("There is a non-integer exponent");re(fe.args[0])}else{if(!Q.includes(fe.op))throw new Error("Operator "+fe.op+" invalid in polynomial expression");for(var ye=0;ye<fe.args.length;ye++)re(fe.args[ye])}else if(se==="SymbolNode"){var De=fe.name,pe=X.indexOf(De);pe===-1&&X.push(De)}else if(se==="ParenthesisNode")re(fe.content);else if(se!=="ConstantNode")throw new Error("type "+se+" is not allowed in polynomial expression")}}function U(){var k=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},h,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],P=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],z=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],B=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],X={};return X.firstRules=k.concat(P,B),X.distrDivRules=z,X.sucDivRules=B,X.firstRulesAgain=k.concat(P),X.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},h,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],X}function L(k,P,z){var B=k.type,X=arguments.length>1;if(B==="OperatorNode"&&k.isBinary()){var J=!1,Q;if(k.op==="^"&&(k.args[0].type==="ParenthesisNode"||k.args[0].type==="OperatorNode")&&k.args[1].type==="ConstantNode"&&(Q=parseFloat(k.args[1].value),J=Q>=2&&Nt(Q)),J){if(Q>2){var Z=k.args[0],re=new T("^","pow",[k.args[0].cloneDeep(),new m(Q-1)]);k=new T("*","multiply",[Z,re])}else k=new T("*","multiply",[k.args[0],k.args[0].cloneDeep()]);X&&(z==="content"?P.content=k:P.args[z]=k)}}if(B==="ParenthesisNode")L(k.content,k,"content");else if(B!=="ConstantNode"&&B!=="SymbolNode")for(var fe=0;fe<k.args.length;fe++)L(k.args[fe],k,fe);if(!X)return k}function F(k,P){P===void 0&&(P=[]),P[0]=0;var z={};z.cte=1,z.oper="+",z.fire="";var B=0,X="";De(k,null,z),B=P.length-1;for(var J=!0,Q,Z=B;Z>=0;Z--)if(P[Z]!==0){var re=new m(J?P[Z]:Math.abs(P[Z])),fe=P[Z]<0?"-":"+";if(Z>0){var se=new M(X);if(Z>1){var ye=new m(Z);se=new T("^","pow",[se,ye])}P[Z]===-1&&J?re=new T("-","unaryMinus",[se]):Math.abs(P[Z])===1?re=se:re=new T("*","multiply",[re,se])}J?Q=re:fe==="+"?Q=new T("+","add",[Q,re]):Q=new T("-","subtract",[Q,re]),J=!1}if(J)return new m(0);return Q;function De(pe,Me,be){var ne=pe.type;if(ne==="FunctionNode")throw new Error("There is an unsolved function call");if(ne==="OperatorNode"){if(!"+-*^".includes(pe.op))throw new Error("Operator "+pe.op+" invalid");if(Me!==null){if((pe.fn==="unaryMinus"||pe.fn==="pow")&&Me.fn!=="add"&&Me.fn!=="subtract"&&Me.fn!=="multiply")throw new Error("Invalid "+pe.op+" placing");if((pe.fn==="subtract"||pe.fn==="add"||pe.fn==="multiply")&&Me.fn!=="add"&&Me.fn!=="subtract")throw new Error("Invalid "+pe.op+" placing");if((pe.fn==="subtract"||pe.fn==="add"||pe.fn==="unaryMinus")&&be.noFil!==0)throw new Error("Invalid "+pe.op+" placing")}(pe.op==="^"||pe.op==="*")&&(be.fire=pe.op);for(var Pe=0;Pe<pe.args.length;Pe++)pe.fn==="unaryMinus"&&(be.oper="-"),(pe.op==="+"||pe.fn==="subtract")&&(be.fire="",be.cte=1,be.oper=Pe===0?"+":pe.op),be.noFil=Pe,De(pe.args[Pe],pe,be)}else if(ne==="SymbolNode"){if(pe.name!==X&&X!=="")throw new Error("There is more than one variable");if(X=pe.name,Me===null){P[1]=1;return}if(Me.op==="^"&&be.noFil!==0)throw new Error("In power the variable should be the first parameter");if(Me.op==="*"&&be.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(be.fire===""||be.fire==="*")&&(B<1&&(P[1]=0),P[1]+=be.cte*(be.oper==="+"?1:-1),B=Math.max(1,B))}else if(ne==="ConstantNode"){var ze=parseFloat(pe.value);if(Me===null){P[0]=ze;return}if(Me.op==="^"){if(be.noFil!==1)throw new Error("Constant cannot be powered");if(!Nt(ze)||ze<=0)throw new Error("Non-integer exponent is not allowed");for(var K=B+1;K<ze;K++)P[K]=0;ze>B&&(P[ze]=0),P[ze]+=be.cte*(be.oper==="+"?1:-1),B=Math.max(ze,B);return}be.cte=ze,be.fire===""&&(P[0]+=be.cte*(be.oper==="+"?1:-1))}else throw new Error("Type "+ne+" is not allowed")}}}),jB="zpk2tf",Dwe=["typed","add","multiply","Complex","number"],kwe=ae(jB,Dwe,n=>{var{typed:e,add:t,multiply:r,Complex:i,number:a}=n;return e(jB,{"Array,Array,number":function(l,u,c){return o(l,u,c)},"Array,Array":function(l,u){return o(l,u,1)},"Matrix,Matrix,number":function(l,u,c){return o(l.valueOf(),u.valueOf(),c)},"Matrix,Matrix":function(l,u){return o(l.valueOf(),u.valueOf(),1)}});function o(l,u,c){l.some(w=>w.type==="BigNumber")&&(l=l.map(w=>a(w))),u.some(w=>w.type==="BigNumber")&&(u=u.map(w=>a(w)));for(var h=[i(1,0)],d=[i(1,0)],f=0;f<l.length;f++){var p=l[f];typeof p=="number"&&(p=i(p,0)),h=s(h,[i(1,0),i(-p.re,-p.im)])}for(var v=0;v<u.length;v++){var y=u[v];typeof y=="number"&&(y=i(y,0)),d=s(d,[i(1,0),i(-y.re,-y.im)])}for(var g=0;g<h.length;g++)h[g]=r(h[g],c);return[h,d]}function s(l,u){for(var c=[],h=0;h<l.length+u.length-1;h++){c[h]=i(0,0);for(var d=0;d<l.length;d++)h-d>=0&&h-d<u.length&&(c[h]=t(c[h],r(l[d],u[h-d])))}return c}}),HB="freqz",Nwe=["typed","add","multiply","Complex","divide","matrix"],Owe=ae(HB,Nwe,n=>{var{typed:e,add:t,multiply:r,Complex:i,divide:a,matrix:o}=n;return e(HB,{"Array, Array":function(u,c){var h=l(512);return s(u,c,h)},"Array, Array, Array":function(u,c,h){return s(u,c,h)},"Array, Array, number":function(u,c,h){if(h<0)throw new Error("w must be a positive number");var d=l(h);return s(u,c,d)},"Matrix, Matrix":function(u,c){var h=l(512),{w:d,h:f}=s(u.valueOf(),c.valueOf(),h);return{w:o(d),h:o(f)}},"Matrix, Matrix, Matrix":function(u,c,h){var{h:d}=s(u.valueOf(),c.valueOf(),h.valueOf());return{h:o(d),w:o(h)}},"Matrix, Matrix, number":function(u,c,h){if(h<0)throw new Error("w must be a positive number");var d=l(h),{h:f}=s(u.valueOf(),c.valueOf(),d);return{h:o(f),w:o(d)}}});function s(u,c,h){for(var d=[],f=[],p=0;p<h.length;p++){for(var v=i(0,0),y=i(0,0),g=0;g<u.length;g++)v=t(v,r(u[g],i(Math.cos(-g*h[p]),Math.sin(-g*h[p]))));for(var w=0;w<c.length;w++)y=t(y,r(c[w],i(Math.cos(-w*h[p]),Math.sin(-w*h[p]))));d.push(v),f.push(y)}for(var b=[],m=0;m<d.length;m++)b.push(a(d[m],f[m]));return{h:b,w:h}}function l(u){for(var c=[],h=0;h<u;h++)c.push(h/u*Math.PI);return c}}),Pwe="reviver",Rwe=["classes"],Iwe=ae(Pwe,Rwe,n=>{var{classes:e}=n;return function(t,r){var i=e[r&&r.mathjs];return i&&typeof i.fromJSON=="function"?i.fromJSON(r):r}}),Lwe="replacer",Fwe=[],Bwe=ae(Lwe,Fwe,()=>function(n,e){return typeof e=="number"&&(!isFinite(e)||isNaN(e))?{mathjs:"number",value:String(e)}:e}),zwe="12.4.3",Uwe=ae("true",[],()=>!0),jwe=ae("false",[],()=>!1),Hwe=ae("null",[],()=>null),Vwe=To("Infinity",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(1/0):1/0}),Wwe=To("NaN",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(NaN):NaN}),qwe=To("pi",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?xN(t):ise}),Gwe=To("tau",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?Afe(t):ase}),$we=To("e",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?_fe(t):ose}),Xwe=To("phi",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?Cfe(t):sse}),Ywe=To("LN2",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),Zwe=To("LN10",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),Jwe=To("LOG2E",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),Kwe=To("LOG10E",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),Qwe=To("SQRT1_2",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),eSe=To("SQRT2",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),tSe=To("i",["Complex"],n=>{var{Complex:e}=n;return e.I}),nSe=ae("PI",["pi"],n=>{var{pi:e}=n;return e}),rSe=ae("E",["e"],n=>{var{e}=n;return e}),iSe=ae("version",[],()=>zwe);function To(n,e,t){return ae(n,e,t,{recreateOnConfigChange:!0})}var aSe=en("speedOfLight","299792458","m s^-1"),oSe=en("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),sSe=en("planckConstant","6.62607015e-34","J s"),lSe=en("reducedPlanckConstant","1.0545718176461565e-34","J s"),uSe=en("magneticConstant","1.25663706212e-6","N A^-2"),cSe=en("electricConstant","8.8541878128e-12","F m^-1"),hSe=en("vacuumImpedance","376.730313667","ohm"),dSe=en("coulomb","8.987551792261171e9","N m^2 C^-2"),fSe=en("elementaryCharge","1.602176634e-19","C"),pSe=en("bohrMagneton","9.2740100783e-24","J T^-1"),mSe=en("conductanceQuantum","7.748091729863649e-5","S"),gSe=en("inverseConductanceQuantum","12906.403729652257","ohm"),vSe=en("magneticFluxQuantum","2.0678338484619295e-15","Wb"),ySe=en("nuclearMagneton","5.0507837461e-27","J T^-1"),bSe=en("klitzing","25812.807459304513","ohm"),xSe=en("bohrRadius","5.29177210903e-11","m"),wSe=en("classicalElectronRadius","2.8179403262e-15","m"),SSe=en("electronMass","9.1093837015e-31","kg"),ESe=en("fermiCoupling","1.1663787e-5","GeV^-2"),_Se=VE("fineStructure",.0072973525693),CSe=en("hartreeEnergy","4.3597447222071e-18","J"),ASe=en("protonMass","1.67262192369e-27","kg"),TSe=en("deuteronMass","3.3435830926e-27","kg"),MSe=en("neutronMass","1.6749271613e-27","kg"),DSe=en("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),kSe=en("rydberg","10973731.568160","m^-1"),NSe=en("thomsonCrossSection","6.6524587321e-29","m^2"),OSe=VE("weakMixingAngle",.2229),PSe=VE("efimovFactor",22.7),RSe=en("atomicMass","1.66053906660e-27","kg"),ISe=en("avogadro","6.02214076e23","mol^-1"),LSe=en("boltzmann","1.380649e-23","J K^-1"),FSe=en("faraday","96485.33212331001","C mol^-1"),BSe=en("firstRadiation","3.7417718521927573e-16","W m^2"),zSe=en("loschmidt","2.686780111798444e25","m^-3"),USe=en("gasConstant","8.31446261815324","J K^-1 mol^-1"),jSe=en("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),HSe=en("molarVolume","0.022413969545014137","m^3 mol^-1"),VSe=VE("sackurTetrode",-1.16487052358),WSe=en("secondRadiation","0.014387768775039337","m K"),qSe=en("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),GSe=en("wienDisplacement","2.897771955e-3","m K"),$Se=en("molarMass","0.99999999965e-3","kg mol^-1"),XSe=en("molarMassC12","11.9999999958e-3","kg mol^-1"),YSe=en("gravity","9.80665","m s^-2"),ZSe=en("planckLength","1.616255e-35","m"),JSe=en("planckMass","2.176435e-8","kg"),KSe=en("planckTime","5.391245e-44","s"),QSe=en("planckCharge","1.87554603778e-18","C"),eEe=en("planckTemperature","1.416785e+32","K");function en(n,e,t){var r=["config","Unit","BigNumber"];return ae(n,r,i=>{var{config:a,Unit:o,BigNumber:s}=i,l=a.number==="BigNumber"?new s(e):parseFloat(e),u=new o(l,t);return u.fixPrefix=!0,u})}function VE(n,e){var t=["config","BigNumber"];return ae(n,t,r=>{var{config:i,BigNumber:a}=r;return i.number==="BigNumber"?new a(e):e})}var tEe="apply",nEe=["typed","isInteger"],rEe=ae(tEe,nEe,n=>{var{typed:e,isInteger:t}=n,r=pN({typed:e,isInteger:t});return e("apply",{"...any":function(i){var a=i[1];tn(a)?i[1]=a-1:Kt(a)&&(i[1]=a.minus(1));try{return r.apply(null,i)}catch(o){throw Pa(o)}}})},{isTransformFunction:!0}),iEe="column",aEe=["typed","Index","matrix","range"],oEe=ae(iEe,aEe,n=>{var{typed:e,Index:t,matrix:r,range:i}=n,a=gq({typed:e,Index:t,matrix:r,range:i});return e("column",{"...any":function(o){var s=o.length-1,l=o[s];tn(l)&&(o[s]=l-1);try{return a.apply(null,o)}catch(u){throw Pa(u)}}})},{isTransformFunction:!0});function EN(n,e,t){var r=n.filter(function(l){return ai(l)&&!(l.name in e)&&!t.has(l.name)})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+n+'"');var i=r.name,a=new Map,o=new UV(t,a,new Set([i])),s=n.compile();return function(l){return a.set(i,l),s.evaluate(o)}}var sEe="filter",lEe=["typed"],uEe=ae(sEe,lEe,n=>{var{typed:e}=n;function t(i,a,o){var s,l;return i[0]&&(s=i[0].compile().evaluate(o)),i[1]&&(ai(i[1])||gm(i[1])?l=i[1].compile().evaluate(o):l=EN(i[1],a,o)),r(s,l)}t.rawArgs=!0;var r=e("filter",{"Array, function":VB,"Matrix, function":function(i,a){return i.create(VB(i.toArray(),a))},"Array, RegExp":nS,"Matrix, RegExp":function(i,a){return i.create(nS(i.toArray(),a))}});return t},{isTransformFunction:!0});function VB(n,e){return uW(n,function(t,r,i){return wm(e,t,[r+1],i,"filter")})}var cEe="forEach",hEe=["typed"],dEe=ae(cEe,hEe,n=>{var{typed:e}=n;function t(i,a,o){var s,l;return i[0]&&(s=i[0].compile().evaluate(o)),i[1]&&(ai(i[1])||gm(i[1])?l=i[1].compile().evaluate(o):l=EN(i[1],a,o)),r(s,l)}t.rawArgs=!0;var r=e("forEach",{"Array | Matrix, function":function(i,a){var o=function s(l,u){if(Array.isArray(l))FE(l,function(c,h){s(c,u.concat(h+1))});else return wm(a,l,u,i,"forEach")};o(i.valueOf(),[])}});return t},{isTransformFunction:!0}),fEe="index",pEe=["Index","getMatrixDataType"],mEe=ae(fEe,pEe,n=>{var{Index:e,getMatrixDataType:t}=n;return function(){for(var r=[],i=0,a=arguments.length;i<a;i++){var o=arguments[i];if(NE(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(l){return l-1});else if(En(o)||Ft(o))t(o)!=="boolean"&&(o=o.map(function(l){return l-1}));else if(tn(o))o--;else if(Kt(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");r[i]=o}var s=new e;return e.apply(s,r),s}},{isTransformFunction:!0}),gEe="map",vEe=["typed"],yEe=ae(gEe,vEe,n=>{var{typed:e}=n;function t(i,a,o){var s,l;return i[0]&&(s=i[0].compile().evaluate(o)),i[1]&&(ai(i[1])||gm(i[1])?l=i[1].compile().evaluate(o):l=EN(i[1],a,o)),r(s,l)}t.rawArgs=!0;var r=e("map",{"Array, function":function(i,a){return WB(i,a,i)},"Matrix, function":function(i,a){return i.create(WB(i.valueOf(),a,i))}});return t},{isTransformFunction:!0});function WB(n,e,t){function r(i,a){return Array.isArray(i)?lu(i,function(o,s){return r(o,a.concat(s+1))}):wm(e,i,a,t,"map")}return r(n,[])}function oh(n){if(n.length===2&&_o(n[0])){n=n.slice();var e=n[1];tn(e)?n[1]=e-1:Kt(e)&&(n[1]=e.minus(1))}return n}var bEe="max",xEe=["typed","config","numeric","larger"],wEe=ae(bEe,xEe,n=>{var{typed:e,config:t,numeric:r,larger:i}=n,a=Tq({typed:e,config:t,numeric:r,larger:i});return e("max",{"...any":function(o){o=oh(o);try{return a.apply(null,o)}catch(s){throw Pa(s)}}})},{isTransformFunction:!0}),SEe="mean",EEe=["typed","add","divide"],_Ee=ae(SEe,EEe,n=>{var{typed:e,add:t,divide:r}=n,i=Lq({typed:e,add:t,divide:r});return e("mean",{"...any":function(a){a=oh(a);try{return i.apply(null,a)}catch(o){throw Pa(o)}}})},{isTransformFunction:!0}),CEe="min",AEe=["typed","config","numeric","smaller"],TEe=ae(CEe,AEe,n=>{var{typed:e,config:t,numeric:r,smaller:i}=n,a=Mq({typed:e,config:t,numeric:r,smaller:i});return e("min",{"...any":function(o){o=oh(o);try{return a.apply(null,o)}catch(s){throw Pa(s)}}})},{isTransformFunction:!0}),MEe="range",DEe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],kEe=ae(MEe,DEe,n=>{var{typed:e,config:t,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:l,add:u,isPositive:c}=n,h=xq({typed:e,config:t,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:l,add:u,isPositive:c});return e("range",{"...any":function(d){var f=d.length-1,p=d[f];return typeof p!="boolean"&&d.push(!0),h.apply(null,d)}})},{isTransformFunction:!0}),NEe="row",OEe=["typed","Index","matrix","range"],PEe=ae(NEe,OEe,n=>{var{typed:e,Index:t,matrix:r,range:i}=n,a=wq({typed:e,Index:t,matrix:r,range:i});return e("row",{"...any":function(o){var s=o.length-1,l=o[s];tn(l)&&(o[s]=l-1);try{return a.apply(null,o)}catch(u){throw Pa(u)}}})},{isTransformFunction:!0}),REe="subset",IEe=["typed","matrix","zeros","add"],LEe=ae(REe,IEe,n=>{var{typed:e,matrix:t,zeros:r,add:i}=n,a=Sq({typed:e,matrix:t,zeros:r,add:i});return e("subset",{"...any":function(o){try{return a.apply(null,o)}catch(s){throw Pa(s)}}})},{isTransformFunction:!0}),FEe="concat",BEe=["typed","matrix","isInteger"],zEe=ae(FEe,BEe,n=>{var{typed:e,matrix:t,isInteger:r}=n,i=mq({typed:e,matrix:t,isInteger:r});return e("concat",{"...any":function(a){var o=a.length-1,s=a[o];tn(s)?a[o]=s-1:Kt(s)&&(a[o]=s.minus(1));try{return i.apply(null,a)}catch(l){throw Pa(l)}}})},{isTransformFunction:!0}),qB="diff",UEe=["typed","matrix","subtract","number","bignumber"],jEe=ae(qB,UEe,n=>{var{typed:e,matrix:t,subtract:r,number:i,bignumber:a}=n,o=vq({typed:e,matrix:t,subtract:r,number:i,bignumber:a});return e(qB,{"...any":function(s){s=oh(s);try{return o.apply(null,s)}catch(l){throw Pa(l)}}})},{isTransformFunction:!0}),HEe="std",VEe=["typed","map","sqrt","variance"],WEe=ae(HEe,VEe,n=>{var{typed:e,map:t,sqrt:r,variance:i}=n,a=zq({typed:e,map:t,sqrt:r,variance:i});return e("std",{"...any":function(o){o=oh(o);try{return a.apply(null,o)}catch(s){throw Pa(s)}}})},{isTransformFunction:!0}),GB="sum",qEe=["typed","config","add","numeric"],GEe=ae(GB,qEe,n=>{var{typed:e,config:t,add:r,numeric:i}=n,a=Rq({typed:e,config:t,add:r,numeric:i});return e(GB,{"...any":function(o){o=oh(o);try{return a.apply(null,o)}catch(s){throw Pa(s)}}})},{isTransformFunction:!0}),$Ee="quantileSeq",XEe=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],YEe=ae($Ee,XEe,n=>{var{typed:e,bignumber:t,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d}=n,f=Bq({typed:e,bignumber:t,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d});return e("quantileSeq",{"Array | Matrix, number | BigNumber":f,"Array | Matrix, number | BigNumber, number":(v,y,g)=>f(v,y,p(g)),"Array | Matrix, number | BigNumber, boolean":f,"Array | Matrix, number | BigNumber, boolean, number":(v,y,g,w)=>f(v,y,g,p(w)),"Array | Matrix, Array | Matrix":f,"Array | Matrix, Array | Matrix, number":(v,y,g)=>f(v,y,p(g)),"Array | Matrix, Array | Matrix, boolean":f,"Array | Matrix, Array | Matrix, boolean, number":(v,y,g,w)=>f(v,y,g,p(w))});function p(v){return oh([[],v])[1]}},{isTransformFunction:!0}),$B="cumsum",ZEe=["typed","add","unaryPlus"],JEe=ae($B,ZEe,n=>{var{typed:e,add:t,unaryPlus:r}=n,i=Iq({typed:e,add:t,unaryPlus:r});return e($B,{"...any":function(a){if(a.length===2&&_o(a[0])){var o=a[1];tn(o)?a[1]=o-1:Kt(o)&&(a[1]=o.minus(1))}try{return i.apply(null,a)}catch(s){throw Pa(s)}}})},{isTransformFunction:!0}),XB="variance",KEe=["typed","add","subtract","multiply","divide","apply","isNaN"],QEe=ae(XB,KEe,n=>{var{typed:e,add:t,subtract:r,multiply:i,divide:a,apply:o,isNaN:s}=n,l=Fq({typed:e,add:t,subtract:r,multiply:i,divide:a,apply:o,isNaN:s});return e(XB,{"...any":function(u){u=oh(u);try{return l.apply(null,u)}catch(c){throw Pa(c)}}})},{isTransformFunction:!0}),YB="print",e_e=["typed","matrix","zeros","add"],t_e=ae(YB,e_e,n=>{var{typed:e,matrix:t,zeros:r,add:i}=n,a=Cq({typed:e,matrix:t,zeros:r,add:i});return e(YB,{"string, Object | Array":function(s,l){return a(o(s),l)},"string, Object | Array, number | Object":function(s,l,u){return a(o(s),l,u)}});function o(s){return s.replace(_q,l=>{var u=l.slice(1).split("."),c=u.map(function(h){return!isNaN(h)&&h.length>0?parseInt(h)-1:h});return"$"+c.join(".")})}},{isTransformFunction:!0}),n_e="and",r_e=["typed","matrix","zeros","add","equalScalar","not","concat"],i_e=ae(n_e,r_e,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,not:a,concat:o}=n,s=Aq({typed:e,matrix:t,equalScalar:r,zeros:i,not:a,concat:o});function l(u,c,h){var d=u[0].compile().evaluate(h);if(!_o(d)&&!s(d,!0))return!1;var f=u[1].compile().evaluate(h);return s(d,f)}return l.rawArgs=!0,l},{isTransformFunction:!0}),a_e="or",o_e=["typed","matrix","equalScalar","DenseMatrix","concat"],s_e=ae(a_e,o_e,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:a}=n,o=pq({typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:a});function s(l,u,c){var h=l[0].compile().evaluate(c);if(!_o(h)&&o(h,!1))return!0;var d=l[1].compile().evaluate(c);return o(h,d)}return s.rawArgs=!0,s},{isTransformFunction:!0}),l_e="bitAnd",u_e=["typed","matrix","zeros","add","equalScalar","not","concat"],c_e=ae(l_e,u_e,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,not:a,concat:o}=n,s=dq({typed:e,matrix:t,equalScalar:r,zeros:i,not:a,concat:o});function l(u,c,h){var d=u[0].compile().evaluate(h);if(!_o(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var f=u[1].compile().evaluate(h);return s(d,f)}return l.rawArgs=!0,l},{isTransformFunction:!0}),h_e="bitOr",d_e=["typed","matrix","equalScalar","DenseMatrix","concat"],f_e=ae(h_e,d_e,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:a}=n,o=fq({typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:a});function s(l,u,c){var h=l[0].compile().evaluate(c);if(!_o(h)){if(isNaN(h))return NaN;if(h===-1)return-1;if(h===!0)return 1}var d=l[1].compile().evaluate(c);return o(h,d)}return s.rawArgs=!0,s},{isTransformFunction:!0});const p_e=Object.freeze(Object.defineProperty({__proto__:null,createAbs:cle,createAccessorNode:yme,createAcos:Ffe,createAcosh:zfe,createAcot:jfe,createAcoth:Vfe,createAcsc:qfe,createAcsch:$fe,createAdd:nme,createAddScalar:ple,createAnd:Aq,createAndTransform:i_e,createApply:pN,createApplyTransform:rEe,createArg:tce,createArrayNode:xme,createAsec:Yfe,createAsech:Jfe,createAsin:Qfe,createAsinh:npe,createAssignmentNode:_me,createAtan:ape,createAtan2:spe,createAtanh:upe,createAtomicMass:RSe,createAvogadro:ISe,createBellNumbers:rwe,createBigNumberClass:Eoe,createBignumber:Hse,createBin:Fhe,createBitAnd:dq,createBitAndTransform:c_e,createBitNot:Xue,createBitOr:fq,createBitOrTransform:f_e,createBitXor:Que,createBlockNode:Ame,createBohrMagneton:pSe,createBohrRadius:xSe,createBoltzmann:LSe,createBoolean:zse,createCatalan:awe,createCbrt:yle,createCeil:Tle,createChain:Abe,createChainClass:Zge,createClassicalElectronRadius:wSe,createClone:Qoe,createColumn:gq,createColumnTransform:oEe,createCombinations:mxe,createCombinationsWithRep:vxe,createCompare:kde,createCompareNatural:Rde,createCompareText:Fde,createCompile:age,createComplex:qse,createComplexClass:Toe,createComposition:swe,createConcat:mq,createConcatTransform:zEe,createConditionalNode:Mme,createConductanceQuantum:mSe,createConj:rce,createConstantNode:Lme,createCorr:fxe,createCos:hpe,createCosh:fpe,createCot:mpe,createCoth:vpe,createCoulomb:dSe,createCount:gce,createCreateUnit:Ife,createCross:yce,createCsc:bpe,createCsch:wpe,createCtranspose:che,createCube:Dle,createCumSum:Iq,createCumSumTransform:JEe,createDeepEqual:nfe,createDenseMatrixClass:Joe,createDerivative:Awe,createDet:Mbe,createDeuteronMass:TSe,createDiag:xce,createDiff:vq,createDiffTransform:jEe,createDistance:Kbe,createDivide:Zbe,createDivideScalar:Jhe,createDot:lme,createDotDivide:hde,createDotMultiply:Uue,createDotPow:ude,createE:$we,createEfimovFactor:PSe,createEigs:Fbe,createElectricConstant:cSe,createElectronMass:SSe,createElementaryCharge:fSe,createEqual:zde,createEqualScalar:Tse,createEqualText:Hde,createErf:_he,createEvaluate:sge,createExp:Nle,createExpm:zbe,createExpm1:Ple,createFactorial:Exe,createFalse:jwe,createFaraday:FSe,createFermiCoupling:ESe,createFft:phe,createFibonacciHeapClass:xfe,createFilter:Ece,createFilterTransform:uEe,createFineStructure:_Se,createFirstRadiation:BSe,createFix:Lle,createFlatten:Cce,createFloor:uq,createForEach:Tce,createForEachTransform:dEe,createFormat:Ihe,createFraction:Xse,createFractionClass:Noe,createFreqz:Owe,createFunctionAssignmentNode:Bme,createFunctionNode:tge,createGamma:bxe,createGasConstant:USe,createGcd:lue,createGetMatrixDataType:kce,createGravitationConstant:oSe,createGravity:YSe,createHartreeEnergy:CSe,createHasNumericValue:gse,createHelp:_be,createHelpClass:$ge,createHex:jhe,createHypot:ime,createI:tSe,createIdentity:Oce,createIfft:ghe,createIm:ace,createImmutableDenseMatrixClass:pfe,createIndex:fme,createIndexClass:vfe,createIndexNode:Ume,createIndexTransform:mEe,createInfinity:Vwe,createIntersect:txe,createInv:kbe,createInverseConductanceQuantum:gSe,createInvmod:Lue,createIsInteger:tse,createIsNaN:Sse,createIsNegative:dse,createIsNumeric:pse,createIsPositive:yse,createIsPrime:Ghe,createIsZero:xse,createKldivergence:Cxe,createKlitzing:bSe,createKron:Rce,createLN10:Zwe,createLN2:Ywe,createLOG10E:Kwe,createLOG2E:Jwe,createLarger:Zde,createLargerEq:Qde,createLcm:due,createLeafCount:uwe,createLeftShift:Ede,createLgamma:wxe,createLog:rde,createLog10:pue,createLog1p:ade,createLog2:gue,createLoschmidt:zSe,createLsolve:fde,createLsolveAll:vde,createLup:pge,createLusolve:Hge,createLyap:$be,createMad:lxe,createMagneticConstant:uSe,createMagneticFluxQuantum:vSe,createMap:Lce,createMapTransform:yEe,createMatrix:Zse,createMatrixClass:Foe,createMatrixFromColumns:nle,createMatrixFromFunction:Kse,createMatrixFromRows:ele,createMax:Tq,createMaxTransform:wEe,createMean:Lq,createMeanTransform:_Ee,createMedian:oxe,createMin:Mq,createMinTransform:TEe,createMod:cq,createMode:Nhe,createMolarMass:$Se,createMolarMassC12:XSe,createMolarPlanckConstant:jSe,createMolarVolume:HSe,createMultinomial:Txe,createMultiply:wue,createMultiplyScalar:bue,createNaN:Wwe,createNeutronMass:MSe,createNode:gme,createNorm:ome,createNot:uce,createNthRoot:Eue,createNthRoots:sde,createNuclearMagneton:ySe,createNull:Hwe,createNumber:Ise,createNumeric:Yhe,createObjectNode:Hme,createOct:zhe,createOnes:jce,createOperatorNode:Wme,createOr:pq,createOrTransform:s_e,createParenthesisNode:Gme,createParse:rge,createParser:dge,createParserClass:cge,createPartitionSelect:sfe,createPermutations:Dxe,createPhi:Xwe,createPi:qwe,createPickRandom:Yxe,createPinv:Obe,createPlanckCharge:QSe,createPlanckConstant:sSe,createPlanckLength:ZSe,createPlanckMass:JSe,createPlanckTemperature:eEe,createPlanckTime:KSe,createPolynomialRoot:Wge,createPow:Qhe,createPrint:Cq,createPrintTransform:t_e,createProd:Phe,createProtonMass:ASe,createQr:gge,createQuantileSeq:Bq,createQuantileSeqTransform:YEe,createQuantumOfCirculation:DSe,createRandom:Jxe,createRandomInt:Qxe,createRange:xq,createRangeClass:Roe,createRangeNode:Xme,createRangeTransform:kEe,createRationalize:Mwe,createRe:sce,createReducedPlanckConstant:lSe,createRelationalNode:Zme,createReplacer:Bwe,createReshape:Wce,createResize:$ce,createResolve:Swe,createResultSet:Tae,createReviver:Iwe,createRightArithShift:Cde,createRightLogShift:Tde,createRotate:Yce,createRotationMatrix:Jce,createRound:tde,createRow:wq,createRowTransform:PEe,createRydberg:kSe,createSQRT1_2:Qwe,createSQRT2:eSe,createSackurTetrode:VSe,createSchur:qbe,createSec:Epe,createSech:Cpe,createSecondRadiation:WSe,createSetCartesian:Lpe,createSetDifference:Bpe,createSetDistinct:Upe,createSetIntersect:Hpe,createSetIsSubset:Wpe,createSetMultiplicity:Gpe,createSetPowerset:Xpe,createSetSize:Zpe,createSetSymDifference:Kpe,createSetUnion:eme,createSign:Cue,createSimplify:pwe,createSimplifyConstant:vwe,createSimplifyCore:bwe,createSin:Tpe,createSinh:Dpe,createSize:ehe,createSlu:Uge,createSmaller:Wde,createSmallerEq:$de,createSolveODE:whe,createSort:ufe,createSpaClass:Efe,createSparse:Pfe,createSparseMatrixClass:kse,createSpeedOfLight:aSe,createSplitUnit:ile,createSqrt:Mue,createSqrtm:jbe,createSquare:kue,createSqueeze:nhe,createStd:zq,createStdTransform:WEe,createStefanBoltzmann:qSe,createStirlingS2:twe,createString:Fse,createSubset:Sq,createSubsetTransform:LEe,createSubtract:Oue,createSubtractScalar:gle,createSum:Rq,createSumTransform:GEe,createSylvester:Vbe,createSymbolNode:Qme,createSymbolicEqual:_we,createTan:Npe,createTanh:Rpe,createTau:Gwe,createThomsonCrossSection:NSe,createTo:Whe,createTrace:hme,createTranspose:lhe,createTrue:Uwe,createTypeOf:_se,createTyped:Eae,createUnaryMinus:ole,createUnaryPlus:lle,createUnequal:ife,createUnitClass:Dfe,createUnitFunction:Nfe,createUppercaseE:rSe,createUppercasePi:nSe,createUsolve:mde,createUsolveAll:bde,createVacuumImpedance:hSe,createVariance:Fq,createVarianceTransform:QEe,createVersion:iSe,createWeakMixingAngle:OSe,createWienDisplacement:GSe,createXgcd:Rue,createXor:dce,createZeros:dhe,createZeta:Dhe,createZpk2tf:kwe},Symbol.toStringTag,{value:"Module"}));var m_e=p_e,_N={exports:{}};function CN(){}CN.prototype={on:function(n,e,t){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:e,ctx:t}),this},once:function(n,e,t){var r=this;function i(){r.off(n,i),e.apply(t,arguments)}return i._=e,this.on(n,i,t)},emit:function(n){var e=[].slice.call(arguments,1),t=((this.e||(this.e={}))[n]||[]).slice(),r=0,i=t.length;for(r;r<i;r++)t[r].fn.apply(t[r].ctx,e);return this},off:function(n,e){var t=this.e||(this.e={}),r=t[n],i=[];if(r&&e)for(var a=0,o=r.length;a<o;a++)r[a].fn!==e&&r[a].fn._!==e&&i.push(r[a]);return i.length?t[n]=i:delete t[n],this}};_N.exports=CN;_N.exports.TinyEmitter=CN;var g_e=_N.exports;const v_e=is(g_e);function y_e(n){var e=new v_e;return n.on=e.on.bind(e),n.off=e.off.bind(e),n.once=e.once.bind(e),n.emit=e.emit.bind(e),n}function b_e(n,e,t,r){function i(y,g){var w=arguments.length;if(w!==1&&w!==2)throw new Nu("import",w,1,2);g||(g={});function b(C,T,M){if(Array.isArray(T))T.forEach(O=>b(C,O));else if(typeof T=="object")for(var A in T)gt(T,A)&&b(C,T[A],A);else if(d0(T)||M!==void 0){var D=d0(T)?p(T)?T.fn+".transform":T.fn:M;if(gt(C,D)&&C[D]!==T&&!g.silent)throw new Error('Cannot import "'+D+'" twice');C[D]=T}else if(!g.silent)throw new TypeError("Factory, Object, or Array expected")}var m={};b(m,y);for(var x in m)if(gt(m,x)){var S=m[x];if(d0(S))u(S,g);else if(c(S))a(x,S,g);else if(!g.silent)throw new TypeError("Factory, Object, or Array expected")}}function a(y,g,w){if(w.wrap&&typeof g=="function"&&(g=l(g)),h(g)&&(g=n(y,{[g.signature]:g})),n.isTypedFunction(t[y])&&n.isTypedFunction(g)){w.override?g=n(y,g.signatures):g=n(t[y],g),t[y]=g,delete r[y],o(y,g),t.emit("import",y,function(){return g});return}if(t[y]===void 0||w.override){t[y]=g,delete r[y],o(y,g),t.emit("import",y,function(){return g});return}if(!w.silent)throw new Error('Cannot import "'+y+'": already exists')}function o(y,g){g&&typeof g.transform=="function"?(t.expression.transform[y]=g.transform,d(y)&&(t.expression.mathWithTransform[y]=g.transform)):(delete t.expression.transform[y],d(y)&&(t.expression.mathWithTransform[y]=g))}function s(y){delete t.expression.transform[y],d(y)?t.expression.mathWithTransform[y]=t[y]:delete t.expression.mathWithTransform[y]}function l(y){var g=function(){for(var w=[],b=0,m=arguments.length;b<m;b++){var x=arguments[b];w[b]=x&&x.valueOf()}return y.apply(t,w)};return y.transform&&(g.transform=y.transform),g}function u(y,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.fn;if(w.includes("."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(w));var b=p(y)?t.expression.transform:t,m=w in t.expression.transform,x=gt(b,w)?b[w]:void 0,S=function(){var C={};y.dependencies.map(FV).forEach(M=>{if(M.includes("."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(M));M==="math"?C.math=t:M==="mathWithTransform"?C.mathWithTransform=t.expression.mathWithTransform:M==="classes"?C.classes=t:C[M]=t[M]});var T=y(C);if(T&&typeof T.transform=="function")throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(x===void 0||g.override)return T;if(n.isTypedFunction(x)&&n.isTypedFunction(T))return n(x,T);if(g.silent)return x;throw new Error('Cannot import "'+w+'": already exists')};!y.meta||y.meta.lazy!==!1?($x(b,w,S),x&&m?s(w):(p(y)||f(y))&&$x(t.expression.mathWithTransform,w,()=>b[w])):(b[w]=S(),x&&m?s(w):(p(y)||f(y))&&$x(t.expression.mathWithTransform,w,()=>b[w])),r[w]=y,t.emit("import",w,S)}function c(y){return typeof y=="function"||typeof y=="number"||typeof y=="string"||typeof y=="boolean"||y===null||ja(y)||_s(y)||Kt(y)||Id(y)||Ft(y)||Array.isArray(y)}function h(y){return typeof y=="function"&&typeof y.signature=="string"}function d(y){return!gt(v,y)}function f(y){return!y.fn.includes(".")&&!gt(v,y.fn)&&(!y.meta||!y.meta.isClass)}function p(y){return y!==void 0&&y.meta!==void 0&&y.meta.isTransformFunction===!0||!1}var v={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return i}function Xq(n,e){var t=lt({},vV,e);if(typeof Object.create!="function")throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var r=y_e({isNumber:tn,isComplex:_s,isBigNumber:Kt,isFraction:Id,isUnit:ja,isString:Ai,isArray:En,isMatrix:Ft,isCollection:_o,isDenseMatrix:q0,isSparseMatrix:gc,isRange:NE,isIndex:Jv,isBoolean:yV,isResultSet:bV,isHelp:sN,isFunction:xV,isDate:wV,isRegExp:SV,isObject:Kv,isNull:EV,isUndefined:_V,isAccessorNode:Uc,isArrayNode:co,isAssignmentNode:CV,isBlockNode:AV,isConditionalNode:TV,isConstantNode:gn,isFunctionAssignmentNode:gm,isFunctionNode:yu,isIndexNode:Ld,isNode:Rn,isObjectNode:Qv,isOperatorNode:Fr,isParenthesisNode:bl,isRangeNode:MV,isRelationalNode:DV,isSymbolNode:ai,isChain:lN});r.config=Kie(t,r.emit),r.expression={transform:{},mathWithTransform:{config:r.config}};var i=[],a=[];function o(c){if(d0(c))return c(r);var h=c[Object.keys(c)[0]];if(d0(h))return h(r);if(!Zie(c))throw console.warn("Factory object with properties `type`, `name`, and `factory` expected",c),new Error("Factory object with properties `type`, `name`, and `factory` expected");var d=i.indexOf(c),f;return d===-1?(c.math===!0?f=c.factory(r.type,t,o,r.typed,r):f=c.factory(r.type,t,o,r.typed),i.push(c),a.push(f)):f=a[d],f}var s={};function l(){for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];return r.typed.apply(r.typed,h)}l.isTypedFunction=Xh.isTypedFunction;var u=b_e(l,o,r,s);return r.import=u,r.on("config",()=>{Object.values(s).forEach(c=>{c&&c.meta&&c.meta.recreateOnConfigChange&&u(c,{override:!0})})}),r.create=Xq.bind(null,n),r.factory=ae,r.import(Object.values(Yie(n))),r.ArgumentsError=Nu,r.DimensionError=on,r.IndexError=as,r}class Yq{constructor(e){this.isMoving=!1,this.color="black",this.atomType="Connector",this.selected=!1,this.attachmentPoint1=null,this.attachmentPoint2=null;for(var t in e)this[t]=e[t];this.startX=this.attachmentPoint1.parentMolecule.outputX,this.startY=this.attachmentPoint1.parentMolecule.y,this.attachmentPoint1.connectors.push(this),this.attachmentPoint2!=null&&this.attachmentPoint2.connectors.push(this)}draw(){let e=I.widthToPixels(this.startX),t=I.heightToPixels(this.startY),r=I.widthToPixels(this.endX),i=I.heightToPixels(this.endY);I.c.beginPath(),I.c.fillStyle=this.color,I.c.strokeStyle=this.color,I.c.globalCompositeOperation="destination-over",this.selected?I.c.lineWidth=3:I.c.lineWidth=1,I.c.moveTo(e,t),I.c.bezierCurveTo(e+100,t,r-100,i,r,i),I.c.stroke(),I.c.globalCompositeOperation="source-over"}clickUp(e,t){if(this.isMoving){var r=!1;I.currentMolecule.nodesOnTheScreen.forEach(i=>{i.inputs.forEach(a=>{a.wasConnectionMade(e,t)&&!r&&this.attachmentPoint1.parentMolecule!==a.parentMolecule&&(r=!0,this.attachmentPoint2=a,a.attach(this),this.propogate())})}),r||this.deleteSelf(),this.isMoving=!1}}mouseMove(e,t){this.isMoving==!0&&(this.endX=I.pixelsToWidth(e),this.endY=I.pixelsToHeight(t))}keyPress(e){this.selected&&["Delete","Backspace"].includes(e)&&this.deleteSelf()}deleteSelf(e=!1){this.attachmentPoint1.deleteConnector(this),this.attachmentPoint2!=null&&(this.attachmentPoint2.deleteConnector(this),e||this.attachmentPoint2.setDefault())}serialize(){if(this.attachmentPoint2!=null){var e={ap1Name:this.attachmentPoint1.name,ap2Name:this.attachmentPoint2.name,ap2Primary:this.attachmentPoint2.primary,ap1ID:this.attachmentPoint1.parentMolecule.uniqueID,ap2ID:this.attachmentPoint2.parentMolecule.uniqueID};return e}}waitOnComingInformation(){this.attachmentPoint2&&this.attachmentPoint2.waitOnComingInformation()}propogate(){this.attachmentPoint1.ready&&this.attachmentPoint2&&this.attachmentPoint2.setValue(this.attachmentPoint1.getValue())}walkBackForConstants(e){this.attachmentPoint1.parentMolecule.walkBackForConstants(e)}update(){this.startX=this.attachmentPoint1.x,this.startY=this.attachmentPoint1.y,this.attachmentPoint2&&(this.endX=this.attachmentPoint2.x,this.endY=this.attachmentPoint2.y),this.draw()}}class so{static get DIST_FROM_PARENT(){return 3.5}static get TARGET_SCALEUP(){return 1.2}static get RADIUS(){return 1/150}constructor(e){this.isVisible=!1,this.isTargetted=!1,this.x,this.y,this.uniqueID=0,this.atomType="AttachmentPoint",this.valueType="number",this.type="output",this.value=10,this.defaultValue=10,this.ready=!0,this.connectors=[];for(var t in e)this[t]=e[t];this.unexpand()}draw(){if(!this.isVisible)return;let e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),r=I.widthToPixels(so.RADIUS);this.isTargetted&&(r=r*so.TARGET_SCALEUP),I.c.font="10px Work Sans";var i=I.c.measureText(this.name).width,a=this.name==="geometry"?this.parentMolecule.selectedColor:"#C300FF",o=r*.5;I.c.globalCompositeOperation="source-over",I.c.beginPath(),I.c.fillStyle=a;var s=t-r,l=e;this.type=="input"&&(l=e-i-r-o);var u=l;this.type=="output"&&(u=l+r+o),I.c.arc(l,t,r,Math.PI/2,-1*Math.PI/2),I.c.rect(l,s,i+r+o,r*2),I.c.arc(l+i+r+o,t,r,-1*Math.PI/2,Math.PI/2),I.c.fill(),I.c.beginPath(),I.c.fillStyle=this.parentMolecule.defaultColor,I.c.fillText(this.name,u,t+2),I.c.fill(),I.c.closePath(),I.c.beginPath(),this.ready?I.c.fillStyle=this.parentMolecule.color:I.c.fillStyle="#6ba4ff",I.c.strokeStyle=this.parentMolecule.strokeColor,I.c.lineWidth=1,I.c.arc(e,t,r,0,Math.PI*2,!1),I.c.fill(),I.c.stroke(),I.c.closePath()}clickDown(e,t,r){return this.isCloseEnoughToTarget(e,t)&&!r?(this.type=="output"&&new Yq({parentMolecule:this.parentMolecule,attachmentPoint1:this,atomType:"Connector",isMoving:!0}),this.type=="input"&&this.connectors.forEach(i=>{i.selected=!0}),!0):(this.type=="input"&&this.connectors.forEach(i=>{i.selected=!1}),!1)}clickUp(e,t){this.connectors.forEach(r=>{r.clickUp(e,t)})}mouseMove(e,t){let r=so.DIST_FROM_PARENT*this.parentMolecule.radius,i=I.widthToPixels(this.parentMolecule.x),a=I.heightToPixels(this.parentMolecule.y);I.distBetweenPoints(i,e,a,t)<=I.widthToPixels(r)?(this.isVisible=!0,[this.x,this.y]=this.computePosition(r),[this.x,this.y]=I.constrainToCanvasBorders(this.x,this.y),this.isTargetted=this.isCloseEnoughToTarget(e,t)):this.unexpand(),this.connectors.forEach(o=>{o.mouseMove(e,t)})}unexpand(){this.isVisible=!1,this.isTargetted=!1,this.y=this.parentMolecule.y,this.type=="input"?this.x=this.parentMolecule.x-this.parentMolecule.radius:this.x=this.parentMolecule.x+this.parentMolecule.radius,[this.x,this.y]=I.constrainToCanvasBorders(this.x,this.y)}computePosition(e){const t=this.parentMolecule.inputs.filter(r=>r.type=="input");if(this.type=="output")return[this.parentMolecule.x+this.parentMolecule.radius+so.RADIUS*.75,this.parentMolecule.y];if(this.type=="input"&&t.length==1)return[this.parentMolecule.x-this.parentMolecule.radius-so.RADIUS*.75,this.parentMolecule.y];{const r=t.indexOf(this),i=Math.PI/(t.length+1),a=e-so.RADIUS*so.TARGET_SCALEUP,o=Math.PI/2+i;let s=a*Math.cos(r*i+o),l=-1*I.pixelsToHeight(I.widthToPixels(a)*Math.sin(r*i+o));return[this.parentMolecule.x+s,this.parentMolecule.y+l]}}isCloseEnoughToTarget(e,t){if(!this.isVisible)return!1;const r=I.distBetweenPoints(e,I.widthToPixels(this.x),t,I.heightToPixels(this.y)),i=I.widthToPixels(so.RADIUS);if(this.type=="output")return r<=i*2;{let a=i*2;const o=this.parentMolecule.inputs.filter(c=>c.type=="input").length;let s=I.widthToPixels(so.DIST_FROM_PARENT*this.parentMolecule.radius-so.RADIUS*so.TARGET_SCALEUP);const l=Math.PI/(o+1),u=s*Math.sin(l/2);return a=Math.max(i,Math.min(a,u)),r<a}}keyPress(e){this.connectors.forEach(t=>{t.keyPress(e)})}deleteSelf(e=!1){var t=[...this.connectors];t.forEach(r=>{r.deleteSelf(e)})}deleteConnector(e="all"){try{const t=this.connectors.indexOf(e);t!=-1?this.connectors.splice(t,1):this.connectors=[]}catch(t){console.warn("Error deleting connector: "),console.warn(t)}}wasConnectionMade(e,t){return this.isCloseEnoughToTarget(e,t)&&this.connectors.length==0}attach(e){this.connectors.push(e)}beginPropagation(){this.connectors.length==0&&this.setValue(this.value)}waitOnComingInformation(){this.type=="output"?this.connectors.forEach(e=>{e.waitOnComingInformation()}):(this.ready=!1,this.parentMolecule.waitOnComingInformation(this.name))}setDefault(){this.setValue(this.defaultValue)}updateDefault(e){var t=this.defaultValue;this.defaultValue=e,this.connectors.length==0&&this.value==t&&(this.value=this.defaultValue)}getValue(){return this.value}setValue(e){this.value=e,this.ready=!0,this.type=="output"?this.connectors.forEach(t=>{t.propogate()}):this.parentMolecule.updateValue(this.name)}update(){this.draw(),this.connectors.forEach(e=>{e.update()})}}var x_e={exports:{}};(function(n){(function(){function e(m){var x={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(m===!1)return JSON.parse(JSON.stringify(x));var S={};for(var C in x)x.hasOwnProperty(C)&&(S[C]=x[C].defaultValue);return S}function t(){var m=e(!0),x={};for(var S in m)m.hasOwnProperty(S)&&(x[S]=!0);return x}var r={},i={},a={},o=e(!0),s="vanilla",l={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:t()};r.helper={},r.extensions={},r.setOption=function(m,x){return o[m]=x,this},r.getOption=function(m){return o[m]},r.getOptions=function(){return o},r.resetOptions=function(){o=e(!0)},r.setFlavor=function(m){if(!l.hasOwnProperty(m))throw Error(m+" flavor was not found");r.resetOptions();var x=l[m];s=m;for(var S in x)x.hasOwnProperty(S)&&(o[S]=x[S])},r.getFlavor=function(){return s},r.getFlavorOptions=function(m){if(l.hasOwnProperty(m))return l[m]},r.getDefaultOptions=function(m){return e(m)},r.subParser=function(m,x){if(r.helper.isString(m))if(typeof x<"u")i[m]=x;else{if(i.hasOwnProperty(m))return i[m];throw Error("SubParser named "+m+" not registered!")}},r.extension=function(m,x){if(!r.helper.isString(m))throw Error("Extension 'name' must be a string");if(m=r.helper.stdExtName(m),r.helper.isUndefined(x)){if(!a.hasOwnProperty(m))throw Error("Extension named "+m+" is not registered!");return a[m]}else{typeof x=="function"&&(x=x()),r.helper.isArray(x)||(x=[x]);var S=u(x,m);if(S.valid)a[m]=x;else throw Error(S.error)}},r.getAllExtensions=function(){return a},r.removeExtension=function(m){delete a[m]},r.resetExtensions=function(){a={}};function u(m,x){var S=x?"Error in "+x+" extension->":"Error in unnamed extension",C={valid:!0,error:""};r.helper.isArray(m)||(m=[m]);for(var T=0;T<m.length;++T){var M=S+" sub-extension "+T+": ",A=m[T];if(typeof A!="object")return C.valid=!1,C.error=M+"must be an object, but "+typeof A+" given",C;if(!r.helper.isString(A.type))return C.valid=!1,C.error=M+'property "type" must be a string, but '+typeof A.type+" given",C;var D=A.type=A.type.toLowerCase();if(D==="language"&&(D=A.type="lang"),D==="html"&&(D=A.type="output"),D!=="lang"&&D!=="output"&&D!=="listener")return C.valid=!1,C.error=M+"type "+D+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',C;if(D==="listener"){if(r.helper.isUndefined(A.listeners))return C.valid=!1,C.error=M+'. Extensions of type "listener" must have a property called "listeners"',C}else if(r.helper.isUndefined(A.filter)&&r.helper.isUndefined(A.regex))return C.valid=!1,C.error=M+D+' extensions must define either a "regex" property or a "filter" method',C;if(A.listeners){if(typeof A.listeners!="object")return C.valid=!1,C.error=M+'"listeners" property must be an object but '+typeof A.listeners+" given",C;for(var O in A.listeners)if(A.listeners.hasOwnProperty(O)&&typeof A.listeners[O]!="function")return C.valid=!1,C.error=M+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+O+" must be a function but "+typeof A.listeners[O]+" given",C}if(A.filter){if(typeof A.filter!="function")return C.valid=!1,C.error=M+'"filter" must be a function, but '+typeof A.filter+" given",C}else if(A.regex){if(r.helper.isString(A.regex)&&(A.regex=new RegExp(A.regex,"g")),!(A.regex instanceof RegExp))return C.valid=!1,C.error=M+'"regex" property must either be a string or a RegExp object, but '+typeof A.regex+" given",C;if(r.helper.isUndefined(A.replace))return C.valid=!1,C.error=M+'"regex" extensions must implement a replace string or function',C}}return C}r.validateExtension=function(m){var x=u(m,null);return x.valid?!0:(console.warn(x.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(m){return typeof m=="string"||m instanceof String},r.helper.isFunction=function(m){var x={};return m&&x.toString.call(m)==="[object Function]"},r.helper.isArray=function(m){return Array.isArray(m)},r.helper.isUndefined=function(m){return typeof m>"u"},r.helper.forEach=function(m,x){if(r.helper.isUndefined(m))throw new Error("obj param is required");if(r.helper.isUndefined(x))throw new Error("callback param is required");if(!r.helper.isFunction(x))throw new Error("callback param must be a function/closure");if(typeof m.forEach=="function")m.forEach(x);else if(r.helper.isArray(m))for(var S=0;S<m.length;S++)x(m[S],S,m);else if(typeof m=="object")for(var C in m)m.hasOwnProperty(C)&&x(m[C],C,m);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(m){return m.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function c(m,x){var S=x.charCodeAt(0);return"E"+S+"E"}r.helper.escapeCharactersCallback=c,r.helper.escapeCharacters=function(m,x,S){var C="(["+x.replace(/([\[\]\\])/g,"\\$1")+"])";S&&(C="\\\\"+C);var T=new RegExp(C,"g");return m=m.replace(T,c),m},r.helper.unescapeHTMLEntities=function(m){return m.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var h=function(m,x,S,C){var T=C||"",M=T.indexOf("g")>-1,A=new RegExp(x+"|"+S,"g"+T.replace(/g/g,"")),D=new RegExp(x,T.replace(/g/g,"")),O=[],U,L,F,k,P;do for(U=0;F=A.exec(m);)if(D.test(F[0]))U++||(L=A.lastIndex,k=L-F[0].length);else if(U&&!--U){P=F.index+F[0].length;var z={left:{start:k,end:L},match:{start:L,end:F.index},right:{start:F.index,end:P},wholeMatch:{start:k,end:P}};if(O.push(z),!M)return O}while(U&&(A.lastIndex=L));return O};r.helper.matchRecursiveRegExp=function(m,x,S,C){for(var T=h(m,x,S,C),M=[],A=0;A<T.length;++A)M.push([m.slice(T[A].wholeMatch.start,T[A].wholeMatch.end),m.slice(T[A].match.start,T[A].match.end),m.slice(T[A].left.start,T[A].left.end),m.slice(T[A].right.start,T[A].right.end)]);return M},r.helper.replaceRecursiveRegExp=function(m,x,S,C,T){if(!r.helper.isFunction(x)){var M=x;x=function(){return M}}var A=h(m,S,C,T),D=m,O=A.length;if(O>0){var U=[];A[0].wholeMatch.start!==0&&U.push(m.slice(0,A[0].wholeMatch.start));for(var L=0;L<O;++L)U.push(x(m.slice(A[L].wholeMatch.start,A[L].wholeMatch.end),m.slice(A[L].match.start,A[L].match.end),m.slice(A[L].left.start,A[L].left.end),m.slice(A[L].right.start,A[L].right.end))),L<O-1&&U.push(m.slice(A[L].wholeMatch.end,A[L+1].wholeMatch.start));A[O-1].wholeMatch.end<m.length&&U.push(m.slice(A[O-1].wholeMatch.end)),D=U.join("")}return D},r.helper.regexIndexOf=function(m,x,S){if(!r.helper.isString(m))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(x instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var C=m.substring(S||0).search(x);return C>=0?C+(S||0):C},r.helper.splitAtIndex=function(m,x){if(!r.helper.isString(m))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[m.substring(0,x),m.substring(x)]},r.helper.encodeEmailAddress=function(m){var x=[function(S){return"&#"+S.charCodeAt(0)+";"},function(S){return"&#x"+S.charCodeAt(0).toString(16)+";"},function(S){return S}];return m=m.replace(/./g,function(S){if(S==="@")S=x[Math.floor(Math.random()*2)](S);else{var C=Math.random();S=C>.9?x[2](S):C>.45?x[1](S):x[0](S)}return S}),m},r.helper.padEnd=function(m,x,S){return x=x>>0,S=String(S||" "),m.length>x?String(m):(x=x-m.length,x>S.length&&(S+=S.repeat(x/S.length)),String(m)+S.slice(0,x))},typeof console>"u"&&(console={warn:function(m){alert(m)},log:function(m){alert(m)},error:function(m){throw m}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"","-1":"",100:"",1234:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"","8ball":"",a:"",ab:"",abc:"",abcd:"",accept:"",aerial_tramway:"",airplane:"",alarm_clock:"",alembic:"",alien:"",ambulance:"",amphora:"",anchor:"",angel:"",anger:"",angry:"",anguished:"",ant:"",apple:"",aquarius:"",aries:"",arrow_backward:"",arrow_double_down:"",arrow_double_up:"",arrow_down:"",arrow_down_small:"",arrow_forward:"",arrow_heading_down:"",arrow_heading_up:"",arrow_left:"",arrow_lower_left:"",arrow_lower_right:"",arrow_right:"",arrow_right_hook:"",arrow_up:"",arrow_up_down:"",arrow_up_small:"",arrow_upper_left:"",arrow_upper_right:"",arrows_clockwise:"",arrows_counterclockwise:"",art:"",articulated_lorry:"",artificial_satellite:"",astonished:"",athletic_shoe:"",atm:"",atom_symbol:"",avocado:"",b:"",baby:"",baby_bottle:"",baby_chick:"",baby_symbol:"",back:"",bacon:"",badminton:"",baggage_claim:"",baguette_bread:"",balance_scale:"",balloon:"",ballot_box:"",ballot_box_with_check:"",bamboo:"",banana:"",bangbang:"",bank:"",bar_chart:"",barber:"",baseball:"",basketball:"",basketball_man:"",basketball_woman:"&zwj;",bat:"",bath:"",bathtub:"",battery:"",beach_umbrella:"",bear:"",bed:"",bee:"",beer:"",beers:"",beetle:"",beginner:"",bell:"",bellhop_bell:"",bento:"",biking_man:"",bike:"",biking_woman:"&zwj;",bikini:"",biohazard:"",bird:"",birthday:"",black_circle:"",black_flag:"",black_heart:"",black_joker:"",black_large_square:"",black_medium_small_square:"",black_medium_square:"",black_nib:"",black_small_square:"",black_square_button:"",blonde_man:"",blonde_woman:"&zwj;",blossom:"",blowfish:"",blue_book:"",blue_car:"",blue_heart:"",blush:"",boar:"",boat:"",bomb:"",book:"",bookmark:"",bookmark_tabs:"",books:"",boom:"",boot:"",bouquet:"",bowing_man:"",bow_and_arrow:"",bowing_woman:"&zwj;",bowling:"",boxing_glove:"",boy:"",bread:"",bride_with_veil:"",bridge_at_night:"",briefcase:"",broken_heart:"",bug:"",building_construction:"",bulb:"",bullettrain_front:"",bullettrain_side:"",burrito:"",bus:"",business_suit_levitating:"",busstop:"",bust_in_silhouette:"",busts_in_silhouette:"",butterfly:"",cactus:"",cake:"",calendar:"",call_me_hand:"",calling:"",camel:"",camera:"",camera_flash:"",camping:"",cancer:"",candle:"",candy:"",canoe:"",capital_abcd:"",capricorn:"",car:"",card_file_box:"",card_index:"",card_index_dividers:"",carousel_horse:"",carrot:"",cat:"",cat2:"",cd:"",chains:"",champagne:"",chart:"",chart_with_downwards_trend:"",chart_with_upwards_trend:"",checkered_flag:"",cheese:"",cherries:"",cherry_blossom:"",chestnut:"",chicken:"",children_crossing:"",chipmunk:"",chocolate_bar:"",christmas_tree:"",church:"",cinema:"",circus_tent:"",city_sunrise:"",city_sunset:"",cityscape:"",cl:"",clamp:"",clap:"",clapper:"",classical_building:"",clinking_glasses:"",clipboard:"",clock1:"",clock10:"",clock1030:"",clock11:"",clock1130:"",clock12:"",clock1230:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",closed_book:"",closed_lock_with_key:"",closed_umbrella:"",cloud:"",cloud_with_lightning:"",cloud_with_lightning_and_rain:"",cloud_with_rain:"",cloud_with_snow:"",clown_face:"",clubs:"",cocktail:"",coffee:"",coffin:"",cold_sweat:"",comet:"",computer:"",computer_mouse:"",confetti_ball:"",confounded:"",confused:"",congratulations:"",construction:"",construction_worker_man:"",construction_worker_woman:"&zwj;",control_knobs:"",convenience_store:"",cookie:"",cool:"",policeman:"",copyright:"",corn:"",couch_and_lamp:"",couple:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"&zwj;&zwj;",couple_with_heart_woman_woman:"&zwj;&zwj;",couplekiss_man_man:"&zwj;&zwj;&zwj;",couplekiss_man_woman:"",couplekiss_woman_woman:"&zwj;&zwj;&zwj;",cow:"",cow2:"",cowboy_hat_face:"",crab:"",crayon:"",credit_card:"",crescent_moon:"",cricket:"",crocodile:"",croissant:"",crossed_fingers:"",crossed_flags:"",crossed_swords:"",crown:"",cry:"",crying_cat_face:"",crystal_ball:"",cucumber:"",cupid:"",curly_loop:"",currency_exchange:"",curry:"",custard:"",customs:"",cyclone:"",dagger:"",dancer:"",dancing_women:"",dancing_men:"&zwj;",dango:"",dark_sunglasses:"",dart:"",dash:"",date:"",deciduous_tree:"",deer:"",department_store:"",derelict_house:"",desert:"",desert_island:"",desktop_computer:"",male_detective:"",diamond_shape_with_a_dot_inside:"",diamonds:"",disappointed:"",disappointed_relieved:"",dizzy:"",dizzy_face:"",do_not_litter:"",dog:"",dog2:"",dollar:"",dolls:"",dolphin:"",door:"",doughnut:"",dove:"",dragon:"",dragon_face:"",dress:"",dromedary_camel:"",drooling_face:"",droplet:"",drum:"",duck:"",dvd:"","e-mail":"",eagle:"",ear:"",ear_of_rice:"",earth_africa:"",earth_americas:"",earth_asia:"",egg:"",eggplant:"",eight_pointed_black_star:"",eight_spoked_asterisk:"",electric_plug:"",elephant:"",email:"",end:"",envelope_with_arrow:"",euro:"",european_castle:"",european_post_office:"",evergreen_tree:"",exclamation:"",expressionless:"",eye:"",eye_speech_bubble:"&zwj;",eyeglasses:"",eyes:"",face_with_head_bandage:"",face_with_thermometer:"",fist_oncoming:"",factory:"",fallen_leaf:"",family_man_woman_boy:"",family_man_boy:"&zwj;",family_man_boy_boy:"&zwj;&zwj;",family_man_girl:"&zwj;",family_man_girl_boy:"&zwj;&zwj;",family_man_girl_girl:"&zwj;&zwj;",family_man_man_boy:"&zwj;&zwj;",family_man_man_boy_boy:"&zwj;&zwj;&zwj;",family_man_man_girl:"&zwj;&zwj;",family_man_man_girl_boy:"&zwj;&zwj;&zwj;",family_man_man_girl_girl:"&zwj;&zwj;&zwj;",family_man_woman_boy_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl:"&zwj;&zwj;",family_man_woman_girl_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl_girl:"&zwj;&zwj;&zwj;",family_woman_boy:"&zwj;",family_woman_boy_boy:"&zwj;&zwj;",family_woman_girl:"&zwj;",family_woman_girl_boy:"&zwj;&zwj;",family_woman_girl_girl:"&zwj;&zwj;",family_woman_woman_boy:"&zwj;&zwj;",family_woman_woman_boy_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl:"&zwj;&zwj;",family_woman_woman_girl_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl_girl:"&zwj;&zwj;&zwj;",fast_forward:"",fax:"",fearful:"",feet:"",female_detective:"&zwj;",ferris_wheel:"",ferry:"",field_hockey:"",file_cabinet:"",file_folder:"",film_projector:"",film_strip:"",fire:"",fire_engine:"",fireworks:"",first_quarter_moon:"",first_quarter_moon_with_face:"",fish:"",fish_cake:"",fishing_pole_and_fish:"",fist_raised:"",fist_left:"",fist_right:"",flags:"",flashlight:"",fleur_de_lis:"",flight_arrival:"",flight_departure:"",floppy_disk:"",flower_playing_cards:"",flushed:"",fog:"",foggy:"",football:"",footprints:"",fork_and_knife:"",fountain:"",fountain_pen:"",four_leaf_clover:"",fox_face:"",framed_picture:"",free:"",fried_egg:"",fried_shrimp:"",fries:"",frog:"",frowning:"",frowning_face:"",frowning_man:"&zwj;",frowning_woman:"",middle_finger:"",fuelpump:"",full_moon:"",full_moon_with_face:"",funeral_urn:"",game_die:"",gear:"",gem:"",gemini:"",ghost:"",gift:"",gift_heart:"",girl:"",globe_with_meridians:"",goal_net:"",goat:"",golf:"",golfing_man:"",golfing_woman:"&zwj;",gorilla:"",grapes:"",green_apple:"",green_book:"",green_heart:"",green_salad:"",grey_exclamation:"",grey_question:"",grimacing:"",grin:"",grinning:"",guardsman:"",guardswoman:"&zwj;",guitar:"",gun:"",haircut_woman:"",haircut_man:"&zwj;",hamburger:"",hammer:"",hammer_and_pick:"",hammer_and_wrench:"",hamster:"",hand:"",handbag:"",handshake:"",hankey:"",hatched_chick:"",hatching_chick:"",headphones:"",hear_no_evil:"",heart:"",heart_decoration:"",heart_eyes:"",heart_eyes_cat:"",heartbeat:"",heartpulse:"",hearts:"",heavy_check_mark:"",heavy_division_sign:"",heavy_dollar_sign:"",heavy_heart_exclamation:"",heavy_minus_sign:"",heavy_multiplication_x:"",heavy_plus_sign:"",helicopter:"",herb:"",hibiscus:"",high_brightness:"",high_heel:"",hocho:"",hole:"",honey_pot:"",horse:"",horse_racing:"",hospital:"",hot_pepper:"",hotdog:"",hotel:"",hotsprings:"",hourglass:"",hourglass_flowing_sand:"",house:"",house_with_garden:"",houses:"",hugs:"",hushed:"",ice_cream:"",ice_hockey:"",ice_skate:"",icecream:"",id:"",ideograph_advantage:"",imp:"",inbox_tray:"",incoming_envelope:"",tipping_hand_woman:"",information_source:"",innocent:"",interrobang:"",iphone:"",izakaya_lantern:"",jack_o_lantern:"",japan:"",japanese_castle:"",japanese_goblin:"",japanese_ogre:"",jeans:"",joy:"",joy_cat:"",joystick:"",kaaba:"",key:"",keyboard:"",keycap_ten:"",kick_scooter:"",kimono:"",kiss:"",kissing:"",kissing_cat:"",kissing_closed_eyes:"",kissing_heart:"",kissing_smiling_eyes:"",kiwi_fruit:"",koala:"",koko:"",label:"",large_blue_circle:"",large_blue_diamond:"",large_orange_diamond:"",last_quarter_moon:"",last_quarter_moon_with_face:"",latin_cross:"",laughing:"",leaves:"",ledger:"",left_luggage:"",left_right_arrow:"",leftwards_arrow_with_hook:"",lemon:"",leo:"",leopard:"",level_slider:"",libra:"",light_rail:"",link:"",lion:"",lips:"",lipstick:"",lizard:"",lock:"",lock_with_ink_pen:"",lollipop:"",loop:"",loud_sound:"",loudspeaker:"",love_hotel:"",love_letter:"",low_brightness:"",lying_face:"",m:"",mag:"",mag_right:"",mahjong:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",man:"",man_artist:"&zwj;",man_astronaut:"&zwj;",man_cartwheeling:"&zwj;",man_cook:"&zwj;",man_dancing:"",man_facepalming:"&zwj;",man_factory_worker:"&zwj;",man_farmer:"&zwj;",man_firefighter:"&zwj;",man_health_worker:"&zwj;",man_in_tuxedo:"",man_judge:"&zwj;",man_juggling:"&zwj;",man_mechanic:"&zwj;",man_office_worker:"&zwj;",man_pilot:"&zwj;",man_playing_handball:"&zwj;",man_playing_water_polo:"&zwj;",man_scientist:"&zwj;",man_shrugging:"&zwj;",man_singer:"&zwj;",man_student:"&zwj;",man_teacher:"&zwj;",man_technologist:"&zwj;",man_with_gua_pi_mao:"",man_with_turban:"",tangerine:"",mans_shoe:"",mantelpiece_clock:"",maple_leaf:"",martial_arts_uniform:"",mask:"",massage_woman:"",massage_man:"&zwj;",meat_on_bone:"",medal_military:"",medal_sports:"",mega:"",melon:"",memo:"",men_wrestling:"&zwj;",menorah:"",mens:"",metal:"",metro:"",microphone:"",microscope:"",milk_glass:"",milky_way:"",minibus:"",minidisc:"",mobile_phone_off:"",money_mouth_face:"",money_with_wings:"",moneybag:"",monkey:"",monkey_face:"",monorail:"",moon:"",mortar_board:"",mosque:"",motor_boat:"",motor_scooter:"",motorcycle:"",motorway:"",mount_fuji:"",mountain:"",mountain_biking_man:"",mountain_biking_woman:"&zwj;",mountain_cableway:"",mountain_railway:"",mountain_snow:"",mouse:"",mouse2:"",movie_camera:"",moyai:"",mrs_claus:"",muscle:"",mushroom:"",musical_keyboard:"",musical_note:"",musical_score:"",mute:"",nail_care:"",name_badge:"",national_park:"",nauseated_face:"",necktie:"",negative_squared_cross_mark:"",nerd_face:"",neutral_face:"",new:"",new_moon:"",new_moon_with_face:"",newspaper:"",newspaper_roll:"",next_track_button:"",ng:"",no_good_man:"&zwj;",no_good_woman:"",night_with_stars:"",no_bell:"",no_bicycles:"",no_entry:"",no_entry_sign:"",no_mobile_phones:"",no_mouth:"",no_pedestrians:"",no_smoking:"","non-potable_water":"",nose:"",notebook:"",notebook_with_decorative_cover:"",notes:"",nut_and_bolt:"",o:"",o2:"",ocean:"",octopus:"",oden:"",office:"",oil_drum:"",ok:"",ok_hand:"",ok_man:"&zwj;",ok_woman:"",old_key:"",older_man:"",older_woman:"",om:"",on:"",oncoming_automobile:"",oncoming_bus:"",oncoming_police_car:"",oncoming_taxi:"",open_file_folder:"",open_hands:"",open_mouth:"",open_umbrella:"",ophiuchus:"",orange_book:"",orthodox_cross:"",outbox_tray:"",owl:"",ox:"",package:"",page_facing_up:"",page_with_curl:"",pager:"",paintbrush:"",palm_tree:"",pancakes:"",panda_face:"",paperclip:"",paperclips:"",parasol_on_ground:"",parking:"",part_alternation_mark:"",partly_sunny:"",passenger_ship:"",passport_control:"",pause_button:"",peace_symbol:"",peach:"",peanuts:"",pear:"",pen:"",pencil2:"",penguin:"",pensive:"",performing_arts:"",persevere:"",person_fencing:"",pouting_woman:"",phone:"",pick:"",pig:"",pig2:"",pig_nose:"",pill:"",pineapple:"",ping_pong:"",pisces:"",pizza:"",place_of_worship:"",plate_with_cutlery:"",play_or_pause_button:"",point_down:"",point_left:"",point_right:"",point_up:"",point_up_2:"",police_car:"",policewoman:"&zwj;",poodle:"",popcorn:"",post_office:"",postal_horn:"",postbox:"",potable_water:"",potato:"",pouch:"",poultry_leg:"",pound:"",rage:"",pouting_cat:"",pouting_man:"&zwj;",pray:"",prayer_beads:"",pregnant_woman:"",previous_track_button:"",prince:"",princess:"",printer:"",purple_heart:"",purse:"",pushpin:"",put_litter_in_its_place:"",question:"",rabbit:"",rabbit2:"",racehorse:"",racing_car:"",radio:"",radio_button:"",radioactive:"",railway_car:"",railway_track:"",rainbow:"",rainbow_flag:"&zwj;",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",raised_hands:"",raising_hand_woman:"",raising_hand_man:"&zwj;",ram:"",ramen:"",rat:"",record_button:"",recycle:"",red_circle:"",registered:"",relaxed:"",relieved:"",reminder_ribbon:"",repeat:"",repeat_one:"",rescue_worker_helmet:"",restroom:"",revolving_hearts:"",rewind:"",rhinoceros:"",ribbon:"",rice:"",rice_ball:"",rice_cracker:"",rice_scene:"",right_anger_bubble:"",ring:"",robot:"",rocket:"",rofl:"",roll_eyes:"",roller_coaster:"",rooster:"",rose:"",rosette:"",rotating_light:"",round_pushpin:"",rowing_man:"",rowing_woman:"&zwj;",rugby_football:"",running_man:"",running_shirt_with_sash:"",running_woman:"&zwj;",sa:"",sagittarius:"",sake:"",sandal:"",santa:"",satellite:"",saxophone:"",school:"",school_satchel:"",scissors:"",scorpion:"",scorpius:"",scream:"",scream_cat:"",scroll:"",seat:"",secret:"",see_no_evil:"",seedling:"",selfie:"",shallow_pan_of_food:"",shamrock:"",shark:"",shaved_ice:"",sheep:"",shell:"",shield:"",shinto_shrine:"",ship:"",shirt:"",shopping:"",shopping_cart:"",shower:"",shrimp:"",signal_strength:"",six_pointed_star:"",ski:"",skier:"",skull:"",skull_and_crossbones:"",sleeping:"",sleeping_bed:"",sleepy:"",slightly_frowning_face:"",slightly_smiling_face:"",slot_machine:"",small_airplane:"",small_blue_diamond:"",small_orange_diamond:"",small_red_triangle:"",small_red_triangle_down:"",smile:"",smile_cat:"",smiley:"",smiley_cat:"",smiling_imp:"",smirk:"",smirk_cat:"",smoking:"",snail:"",snake:"",sneezing_face:"",snowboarder:"",snowflake:"",snowman:"",snowman_with_snow:"",sob:"",soccer:"",soon:"",sos:"",sound:"",space_invader:"",spades:"",spaghetti:"",sparkle:"",sparkler:"",sparkles:"",sparkling_heart:"",speak_no_evil:"",speaker:"",speaking_head:"",speech_balloon:"",speedboat:"",spider:"",spider_web:"",spiral_calendar:"",spiral_notepad:"",spoon:"",squid:"",stadium:"",star:"",star2:"",star_and_crescent:"",star_of_david:"",stars:"",station:"",statue_of_liberty:"",steam_locomotive:"",stew:"",stop_button:"",stop_sign:"",stopwatch:"",straight_ruler:"",strawberry:"",stuck_out_tongue:"",stuck_out_tongue_closed_eyes:"",stuck_out_tongue_winking_eye:"",studio_microphone:"",stuffed_flatbread:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",sun_behind_small_cloud:"",sun_with_face:"",sunflower:"",sunglasses:"",sunny:"",sunrise:"",sunrise_over_mountains:"",surfing_man:"",surfing_woman:"&zwj;",sushi:"",suspension_railway:"",sweat:"",sweat_drops:"",sweat_smile:"",sweet_potato:"",swimming_man:"",swimming_woman:"&zwj;",symbols:"",synagogue:"",syringe:"",taco:"",tada:"",tanabata_tree:"",taurus:"",taxi:"",tea:"",telephone_receiver:"",telescope:"",tennis:"",tent:"",thermometer:"",thinking:"",thought_balloon:"",ticket:"",tickets:"",tiger:"",tiger2:"",timer_clock:"",tipping_hand_man:"&zwj;",tired_face:"",tm:"",toilet:"",tokyo_tower:"",tomato:"",tongue:"",top:"",tophat:"",tornado:"",trackball:"",tractor:"",traffic_light:"",train:"",train2:"",tram:"",triangular_flag_on_post:"",triangular_ruler:"",trident:"",triumph:"",trolleybus:"",trophy:"",tropical_drink:"",tropical_fish:"",truck:"",trumpet:"",tulip:"",tumbler_glass:"",turkey:"",turtle:"",tv:"",twisted_rightwards_arrows:"",two_hearts:"",two_men_holding_hands:"",two_women_holding_hands:"",u5272:"",u5408:"",u55b6:"",u6307:"",u6708:"",u6709:"",u6e80:"",u7121:"",u7533:"",u7981:"",u7a7a:"",umbrella:"",unamused:"",underage:"",unicorn:"",unlock:"",up:"",upside_down_face:"",v:"",vertical_traffic_light:"",vhs:"",vibration_mode:"",video_camera:"",video_game:"",violin:"",virgo:"",volcano:"",volleyball:"",vs:"",vulcan_salute:"",walking_man:"",walking_woman:"&zwj;",waning_crescent_moon:"",waning_gibbous_moon:"",warning:"",wastebasket:"",watch:"",water_buffalo:"",watermelon:"",wave:"",wavy_dash:"",waxing_crescent_moon:"",wc:"",weary:"",wedding:"",weight_lifting_man:"",weight_lifting_woman:"&zwj;",whale:"",whale2:"",wheel_of_dharma:"",wheelchair:"",white_check_mark:"",white_circle:"",white_flag:"",white_flower:"",white_large_square:"",white_medium_small_square:"",white_medium_square:"",white_small_square:"",white_square_button:"",wilted_flower:"",wind_chime:"",wind_face:"",wine_glass:"",wink:"",wolf:"",woman:"",woman_artist:"&zwj;",woman_astronaut:"&zwj;",woman_cartwheeling:"&zwj;",woman_cook:"&zwj;",woman_facepalming:"&zwj;",woman_factory_worker:"&zwj;",woman_farmer:"&zwj;",woman_firefighter:"&zwj;",woman_health_worker:"&zwj;",woman_judge:"&zwj;",woman_juggling:"&zwj;",woman_mechanic:"&zwj;",woman_office_worker:"&zwj;",woman_pilot:"&zwj;",woman_playing_handball:"&zwj;",woman_playing_water_polo:"&zwj;",woman_scientist:"&zwj;",woman_shrugging:"&zwj;",woman_singer:"&zwj;",woman_student:"&zwj;",woman_teacher:"&zwj;",woman_technologist:"&zwj;",woman_with_turban:"&zwj;",womans_clothes:"",womans_hat:"",women_wrestling:"&zwj;",womens:"",world_map:"",worried:"",wrench:"",writing_hand:"",x:"",yellow_heart:"",yen:"",yin_yang:"",yum:"",zap:"",zipper_mouth_face:"",zzz:"",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(m){var x={},S=[],C=[],T={},M=s,A={parsed:{},raw:"",format:""};D();function D(){m=m||{};for(var k in o)o.hasOwnProperty(k)&&(x[k]=o[k]);if(typeof m=="object")for(var P in m)m.hasOwnProperty(P)&&(x[P]=m[P]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof m+" was passed instead.");x.extensions&&r.helper.forEach(x.extensions,O)}function O(k,P){if(P=P||null,r.helper.isString(k))if(k=r.helper.stdExtName(k),P=k,r.extensions[k]){console.warn("DEPRECATION WARNING: "+k+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),U(r.extensions[k],k);return}else if(!r.helper.isUndefined(a[k]))k=a[k];else throw Error('Extension "'+k+'" could not be loaded. It was either not found or is not a valid extension.');typeof k=="function"&&(k=k()),r.helper.isArray(k)||(k=[k]);var z=u(k,P);if(!z.valid)throw Error(z.error);for(var B=0;B<k.length;++B){switch(k[B].type){case"lang":S.push(k[B]);break;case"output":C.push(k[B]);break}if(k[B].hasOwnProperty("listeners"))for(var X in k[B].listeners)k[B].listeners.hasOwnProperty(X)&&L(X,k[B].listeners[X])}}function U(k,P){typeof k=="function"&&(k=k(new r.Converter)),r.helper.isArray(k)||(k=[k]);var z=u(k,P);if(!z.valid)throw Error(z.error);for(var B=0;B<k.length;++B)switch(k[B].type){case"lang":S.push(k[B]);break;case"output":C.push(k[B]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function L(k,P){if(!r.helper.isString(k))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof k+" given");if(typeof P!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof P+" given");T.hasOwnProperty(k)||(T[k]=[]),T[k].push(P)}function F(k){var P=k.match(/^\s*/)[0].length,z=new RegExp("^\\s{0,"+P+"}","gm");return k.replace(z,"")}this._dispatch=function(k,P,z,B){if(T.hasOwnProperty(k))for(var X=0;X<T[k].length;++X){var J=T[k][X](k,P,this,z,B);J&&typeof J<"u"&&(P=J)}return P},this.listen=function(k,P){return L(k,P),this},this.makeHtml=function(k){if(!k)return k;var P={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:S,outputModifiers:C,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return k=k.replace(//g,"T"),k=k.replace(/\$/g,"D"),k=k.replace(/\r\n/g,`
`),k=k.replace(/\r/g,`
`),k=k.replace(/\u00A0/g,"&nbsp;"),x.smartIndentationFix&&(k=F(k)),k=`

`+k+`

`,k=r.subParser("detab")(k,x,P),k=k.replace(/^[ \t]+$/mg,""),r.helper.forEach(S,function(z){k=r.subParser("runExtension")(z,k,x,P)}),k=r.subParser("metadata")(k,x,P),k=r.subParser("hashPreCodeTags")(k,x,P),k=r.subParser("githubCodeBlocks")(k,x,P),k=r.subParser("hashHTMLBlocks")(k,x,P),k=r.subParser("hashCodeTags")(k,x,P),k=r.subParser("stripLinkDefinitions")(k,x,P),k=r.subParser("blockGamut")(k,x,P),k=r.subParser("unhashHTMLSpans")(k,x,P),k=r.subParser("unescapeSpecialChars")(k,x,P),k=k.replace(/D/g,"$$"),k=k.replace(/T/g,""),k=r.subParser("completeHTMLDocument")(k,x,P),r.helper.forEach(C,function(z){k=r.subParser("runExtension")(z,k,x,P)}),A=P.metadata,k},this.makeMarkdown=this.makeMd=function(k,P){if(k=k.replace(/\r\n/g,`
`),k=k.replace(/\r/g,`
`),k=k.replace(/>[ \t]+</,">NBSP;<"),!P)if(window&&window.document)P=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var z=P.createElement("div");z.innerHTML=k;var B={preList:re(z)};Z(z);for(var X=z.childNodes,J="",Q=0;Q<X.length;Q++)J+=r.subParser("makeMarkdown.node")(X[Q],B);function Z(fe){for(var se=0;se<fe.childNodes.length;++se){var ye=fe.childNodes[se];ye.nodeType===3?!/\S/.test(ye.nodeValue)&&!/^[ ]+$/.test(ye.nodeValue)?(fe.removeChild(ye),--se):(ye.nodeValue=ye.nodeValue.split(`
`).join(" "),ye.nodeValue=ye.nodeValue.replace(/(\s)+/g,"$1")):ye.nodeType===1&&Z(ye)}}function re(fe){for(var se=fe.querySelectorAll("pre"),ye=[],De=0;De<se.length;++De)if(se[De].childElementCount===1&&se[De].firstChild.tagName.toLowerCase()==="code"){var pe=se[De].firstChild.innerHTML.trim(),Me=se[De].firstChild.getAttribute("data-language")||"";if(Me==="")for(var be=se[De].firstChild.className.split(" "),ne=0;ne<be.length;++ne){var Pe=be[ne].match(/^language-(.+)$/);if(Pe!==null){Me=Pe[1];break}}pe=r.helper.unescapeHTMLEntities(pe),ye.push(pe),se[De].outerHTML='<precode language="'+Me+'" precodenum="'+De.toString()+'"></precode>'}else ye.push(se[De].innerHTML),se[De].innerHTML="",se[De].setAttribute("prenum",De.toString());return ye}return J},this.setOption=function(k,P){x[k]=P},this.getOption=function(k){return x[k]},this.getOptions=function(){return x},this.addExtension=function(k,P){P=P||null,O(k,P)},this.useExtension=function(k){O(k)},this.setFlavor=function(k){if(!l.hasOwnProperty(k))throw Error(k+" flavor was not found");var P=l[k];M=k;for(var z in P)P.hasOwnProperty(z)&&(x[z]=P[z])},this.getFlavor=function(){return M},this.removeExtension=function(k){r.helper.isArray(k)||(k=[k]);for(var P=0;P<k.length;++P){for(var z=k[P],B=0;B<S.length;++B)S[B]===z&&S.splice(B,1);for(var X=0;X<C.length;++X)C[X]===z&&C.splice(X,1)}},this.getAllExtensions=function(){return{language:S,output:C}},this.getMetadata=function(k){return k?A.raw:A.parsed},this.getMetadataFormat=function(){return A.format},this._setMetadataPair=function(k,P){A.parsed[k]=P},this._setMetadataFormat=function(k){A.format=k},this._setMetadataRaw=function(k){A.raw=k}},r.subParser("anchors",function(m,x,S){m=S.converter._dispatch("anchors.before",m,x,S);var C=function(T,M,A,D,O,U,L){if(r.helper.isUndefined(L)&&(L=""),A=A.toLowerCase(),T.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)D="";else if(!D)if(A||(A=M.toLowerCase().replace(/ ?\n/g," ")),D="#"+A,!r.helper.isUndefined(S.gUrls[A]))D=S.gUrls[A],r.helper.isUndefined(S.gTitles[A])||(L=S.gTitles[A]);else return T;D=D.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var F='<a href="'+D+'"';return L!==""&&L!==null&&(L=L.replace(/"/g,"&quot;"),L=L.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),F+=' title="'+L+'"'),x.openLinksInNewWindow&&!/^#/.test(D)&&(F+=' rel="noopener noreferrer" target="E95Eblank"'),F+=">"+M+"</a>",F};return m=m.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,C),m=m.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,C),m=m.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,C),m=m.replace(/\[([^\[\]]+)]()()()()()/g,C),x.ghMentions&&(m=m.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(T,M,A,D,O){if(A==="\\")return M+D;if(!r.helper.isString(x.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var U=x.ghMentionsLink.replace(/\{u}/g,O),L="";return x.openLinksInNewWindow&&(L=' rel="noopener noreferrer" target="E95Eblank"'),M+'<a href="'+U+'"'+L+">"+D+"</a>"})),m=S.converter._dispatch("anchors.after",m,x,S),m});var d=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,f=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,p=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,v=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,y=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,g=function(m){return function(x,S,C,T,M,A,D){C=C.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var O=C,U="",L="",F=S||"",k=D||"";return/^www\./i.test(C)&&(C=C.replace(/^www\./i,"http://www.")),m.excludeTrailingPunctuationFromURLs&&A&&(U=A),m.openLinksInNewWindow&&(L=' rel="noopener noreferrer" target="E95Eblank"'),F+'<a href="'+C+'"'+L+">"+O+"</a>"+U+k}},w=function(m,x){return function(S,C,T){var M="mailto:";return C=C||"",T=r.subParser("unescapeSpecialChars")(T,m,x),m.encodeEmails?(M=r.helper.encodeEmailAddress(M+T),T=r.helper.encodeEmailAddress(T)):M=M+T,C+'<a href="'+M+'">'+T+"</a>"}};r.subParser("autoLinks",function(m,x,S){return m=S.converter._dispatch("autoLinks.before",m,x,S),m=m.replace(p,g(x)),m=m.replace(y,w(x,S)),m=S.converter._dispatch("autoLinks.after",m,x,S),m}),r.subParser("simplifiedAutoLinks",function(m,x,S){return x.simplifiedAutoLink&&(m=S.converter._dispatch("simplifiedAutoLinks.before",m,x,S),x.excludeTrailingPunctuationFromURLs?m=m.replace(f,g(x)):m=m.replace(d,g(x)),m=m.replace(v,w(x,S)),m=S.converter._dispatch("simplifiedAutoLinks.after",m,x,S)),m}),r.subParser("blockGamut",function(m,x,S){return m=S.converter._dispatch("blockGamut.before",m,x,S),m=r.subParser("blockQuotes")(m,x,S),m=r.subParser("headers")(m,x,S),m=r.subParser("horizontalRule")(m,x,S),m=r.subParser("lists")(m,x,S),m=r.subParser("codeBlocks")(m,x,S),m=r.subParser("tables")(m,x,S),m=r.subParser("hashHTMLBlocks")(m,x,S),m=r.subParser("paragraphs")(m,x,S),m=S.converter._dispatch("blockGamut.after",m,x,S),m}),r.subParser("blockQuotes",function(m,x,S){m=S.converter._dispatch("blockQuotes.before",m,x,S),m=m+`

`;var C=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return x.splitAdjacentBlockquotes&&(C=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),m=m.replace(C,function(T){return T=T.replace(/^[ \t]*>[ \t]?/gm,""),T=T.replace(/0/g,""),T=T.replace(/^[ \t]+$/gm,""),T=r.subParser("githubCodeBlocks")(T,x,S),T=r.subParser("blockGamut")(T,x,S),T=T.replace(/(^|\n)/g,"$1  "),T=T.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(M,A){var D=A;return D=D.replace(/^  /mg,"0"),D=D.replace(/0/g,""),D}),r.subParser("hashBlock")(`<blockquote>
`+T+`
</blockquote>`,x,S)}),m=S.converter._dispatch("blockQuotes.after",m,x,S),m}),r.subParser("codeBlocks",function(m,x,S){m=S.converter._dispatch("codeBlocks.before",m,x,S),m+="0";var C=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return m=m.replace(C,function(T,M,A){var D=M,O=A,U=`
`;return D=r.subParser("outdent")(D,x,S),D=r.subParser("encodeCode")(D,x,S),D=r.subParser("detab")(D,x,S),D=D.replace(/^\n+/g,""),D=D.replace(/\n+$/g,""),x.omitExtraWLInCodeBlocks&&(U=""),D="<pre><code>"+D+U+"</code></pre>",r.subParser("hashBlock")(D,x,S)+O}),m=m.replace(/0/,""),m=S.converter._dispatch("codeBlocks.after",m,x,S),m}),r.subParser("codeSpans",function(m,x,S){return m=S.converter._dispatch("codeSpans.before",m,x,S),typeof m>"u"&&(m=""),m=m.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(C,T,M,A){var D=A;return D=D.replace(/^([ \t]*)/g,""),D=D.replace(/[ \t]*$/g,""),D=r.subParser("encodeCode")(D,x,S),D=T+"<code>"+D+"</code>",D=r.subParser("hashHTMLSpans")(D,x,S),D}),m=S.converter._dispatch("codeSpans.after",m,x,S),m}),r.subParser("completeHTMLDocument",function(m,x,S){if(!x.completeHTMLDocument)return m;m=S.converter._dispatch("completeHTMLDocument.before",m,x,S);var C="html",T=`<!DOCTYPE HTML>
`,M="",A=`<meta charset="utf-8">
`,D="",O="";typeof S.metadata.parsed.doctype<"u"&&(T="<!DOCTYPE "+S.metadata.parsed.doctype+`>
`,C=S.metadata.parsed.doctype.toString().toLowerCase(),(C==="html"||C==="html5")&&(A='<meta charset="utf-8">'));for(var U in S.metadata.parsed)if(S.metadata.parsed.hasOwnProperty(U))switch(U.toLowerCase()){case"doctype":break;case"title":M="<title>"+S.metadata.parsed.title+`</title>
`;break;case"charset":C==="html"||C==="html5"?A='<meta charset="'+S.metadata.parsed.charset+`">
`:A='<meta name="charset" content="'+S.metadata.parsed.charset+`">
`;break;case"language":case"lang":D=' lang="'+S.metadata.parsed[U]+'"',O+='<meta name="'+U+'" content="'+S.metadata.parsed[U]+`">
`;break;default:O+='<meta name="'+U+'" content="'+S.metadata.parsed[U]+`">
`}return m=T+"<html"+D+`>
<head>
`+M+A+O+`</head>
<body>
`+m.trim()+`
</body>
</html>`,m=S.converter._dispatch("completeHTMLDocument.after",m,x,S),m}),r.subParser("detab",function(m,x,S){return m=S.converter._dispatch("detab.before",m,x,S),m=m.replace(/\t(?=\t)/g,"    "),m=m.replace(/\t/g,"AB"),m=m.replace(/B(.+?)A/g,function(C,T){for(var M=T,A=4-M.length%4,D=0;D<A;D++)M+=" ";return M}),m=m.replace(/A/g,"    "),m=m.replace(/B/g,""),m=S.converter._dispatch("detab.after",m,x,S),m}),r.subParser("ellipsis",function(m,x,S){return x.ellipsis&&(m=S.converter._dispatch("ellipsis.before",m,x,S),m=m.replace(/\.\.\./g,""),m=S.converter._dispatch("ellipsis.after",m,x,S)),m}),r.subParser("emoji",function(m,x,S){if(!x.emoji)return m;m=S.converter._dispatch("emoji.before",m,x,S);var C=/:([\S]+?):/g;return m=m.replace(C,function(T,M){return r.helper.emojis.hasOwnProperty(M)?r.helper.emojis[M]:T}),m=S.converter._dispatch("emoji.after",m,x,S),m}),r.subParser("encodeAmpsAndAngles",function(m,x,S){return m=S.converter._dispatch("encodeAmpsAndAngles.before",m,x,S),m=m.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),m=m.replace(/<(?![a-z\/?$!])/gi,"&lt;"),m=m.replace(/</g,"&lt;"),m=m.replace(/>/g,"&gt;"),m=S.converter._dispatch("encodeAmpsAndAngles.after",m,x,S),m}),r.subParser("encodeBackslashEscapes",function(m,x,S){return m=S.converter._dispatch("encodeBackslashEscapes.before",m,x,S),m=m.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),m=m.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),m=S.converter._dispatch("encodeBackslashEscapes.after",m,x,S),m}),r.subParser("encodeCode",function(m,x,S){return m=S.converter._dispatch("encodeCode.before",m,x,S),m=m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),m=S.converter._dispatch("encodeCode.after",m,x,S),m}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(m,x,S){m=S.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",m,x,S);var C=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,T=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return m=m.replace(C,function(M){return M.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),m=m.replace(T,function(M){return M.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),m=S.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",m,x,S),m}),r.subParser("githubCodeBlocks",function(m,x,S){return x.ghCodeBlocks?(m=S.converter._dispatch("githubCodeBlocks.before",m,x,S),m+="0",m=m.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(C,T,M,A){var D=x.omitExtraWLInCodeBlocks?"":`
`;return A=r.subParser("encodeCode")(A,x,S),A=r.subParser("detab")(A,x,S),A=A.replace(/^\n+/g,""),A=A.replace(/\n+$/g,""),A="<pre><code"+(M?' class="'+M+" language-"+M+'"':"")+">"+A+D+"</code></pre>",A=r.subParser("hashBlock")(A,x,S),`

G`+(S.ghCodeBlocks.push({text:C,codeblock:A})-1)+`G

`}),m=m.replace(/0/,""),S.converter._dispatch("githubCodeBlocks.after",m,x,S)):m}),r.subParser("hashBlock",function(m,x,S){return m=S.converter._dispatch("hashBlock.before",m,x,S),m=m.replace(/(^\n+|\n+$)/g,""),m=`

K`+(S.gHtmlBlocks.push(m)-1)+`K

`,m=S.converter._dispatch("hashBlock.after",m,x,S),m}),r.subParser("hashCodeTags",function(m,x,S){m=S.converter._dispatch("hashCodeTags.before",m,x,S);var C=function(T,M,A,D){var O=A+r.subParser("encodeCode")(M,x,S)+D;return"C"+(S.gHtmlSpans.push(O)-1)+"C"};return m=r.helper.replaceRecursiveRegExp(m,C,"<code\\b[^>]*>","</code>","gim"),m=S.converter._dispatch("hashCodeTags.after",m,x,S),m}),r.subParser("hashElement",function(m,x,S){return function(C,T){var M=T;return M=M.replace(/\n\n/g,`
`),M=M.replace(/^\n/,""),M=M.replace(/\n+$/g,""),M=`

K`+(S.gHtmlBlocks.push(M)-1)+`K

`,M}}),r.subParser("hashHTMLBlocks",function(m,x,S){m=S.converter._dispatch("hashHTMLBlocks.before",m,x,S);var C=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],T=function(k,P,z,B){var X=k;return z.search(/\bmarkdown\b/)!==-1&&(X=z+S.converter.makeHtml(P)+B),`

K`+(S.gHtmlBlocks.push(X)-1)+`K

`};x.backslashEscapesHTMLTags&&(m=m.replace(/\\<(\/?[^>]+?)>/g,function(k,P){return"&lt;"+P+"&gt;"}));for(var M=0;M<C.length;++M)for(var A,D=new RegExp("^ {0,3}(<"+C[M]+"\\b[^>]*>)","im"),O="<"+C[M]+"\\b[^>]*>",U="</"+C[M]+">";(A=r.helper.regexIndexOf(m,D))!==-1;){var L=r.helper.splitAtIndex(m,A),F=r.helper.replaceRecursiveRegExp(L[1],T,O,U,"im");if(F===L[1])break;m=L[0].concat(F)}return m=m.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(m,x,S)),m=r.helper.replaceRecursiveRegExp(m,function(k){return`

K`+(S.gHtmlBlocks.push(k)-1)+`K

`},"^ {0,3}<!--","-->","gm"),m=m.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(m,x,S)),m=S.converter._dispatch("hashHTMLBlocks.after",m,x,S),m}),r.subParser("hashHTMLSpans",function(m,x,S){m=S.converter._dispatch("hashHTMLSpans.before",m,x,S);function C(T){return"C"+(S.gHtmlSpans.push(T)-1)+"C"}return m=m.replace(/<[^>]+?\/>/gi,function(T){return C(T)}),m=m.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(T){return C(T)}),m=m.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(T){return C(T)}),m=m.replace(/<[^>]+?>/gi,function(T){return C(T)}),m=S.converter._dispatch("hashHTMLSpans.after",m,x,S),m}),r.subParser("unhashHTMLSpans",function(m,x,S){m=S.converter._dispatch("unhashHTMLSpans.before",m,x,S);for(var C=0;C<S.gHtmlSpans.length;++C){for(var T=S.gHtmlSpans[C],M=0;/C(\d+)C/.test(T);){var A=RegExp.$1;if(T=T.replace("C"+A+"C",S.gHtmlSpans[A]),M===10){console.error("maximum nesting of 10 spans reached!!!");break}++M}m=m.replace("C"+C+"C",T)}return m=S.converter._dispatch("unhashHTMLSpans.after",m,x,S),m}),r.subParser("hashPreCodeTags",function(m,x,S){m=S.converter._dispatch("hashPreCodeTags.before",m,x,S);var C=function(T,M,A,D){var O=A+r.subParser("encodeCode")(M,x,S)+D;return`

G`+(S.ghCodeBlocks.push({text:T,codeblock:O})-1)+`G

`};return m=r.helper.replaceRecursiveRegExp(m,C,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),m=S.converter._dispatch("hashPreCodeTags.after",m,x,S),m}),r.subParser("headers",function(m,x,S){m=S.converter._dispatch("headers.before",m,x,S);var C=isNaN(parseInt(x.headerLevelStart))?1:parseInt(x.headerLevelStart),T=x.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,M=x.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;m=m.replace(T,function(O,U){var L=r.subParser("spanGamut")(U,x,S),F=x.noHeaderId?"":' id="'+D(U)+'"',k=C,P="<h"+k+F+">"+L+"</h"+k+">";return r.subParser("hashBlock")(P,x,S)}),m=m.replace(M,function(O,U){var L=r.subParser("spanGamut")(U,x,S),F=x.noHeaderId?"":' id="'+D(U)+'"',k=C+1,P="<h"+k+F+">"+L+"</h"+k+">";return r.subParser("hashBlock")(P,x,S)});var A=x.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;m=m.replace(A,function(O,U,L){var F=L;x.customizedHeaderId&&(F=L.replace(/\s?\{([^{]+?)}\s*$/,""));var k=r.subParser("spanGamut")(F,x,S),P=x.noHeaderId?"":' id="'+D(L)+'"',z=C-1+U.length,B="<h"+z+P+">"+k+"</h"+z+">";return r.subParser("hashBlock")(B,x,S)});function D(O){var U,L;if(x.customizedHeaderId){var F=O.match(/\{([^{]+?)}\s*$/);F&&F[1]&&(O=F[1])}return U=O,r.helper.isString(x.prefixHeaderId)?L=x.prefixHeaderId:x.prefixHeaderId===!0?L="section-":L="",x.rawPrefixHeaderId||(U=L+U),x.ghCompatibleHeaderId?U=U.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():x.rawHeaderId?U=U.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():U=U.replace(/[^\w]/g,"").toLowerCase(),x.rawPrefixHeaderId&&(U=L+U),S.hashLinkCounts[U]?U=U+"-"+S.hashLinkCounts[U]++:S.hashLinkCounts[U]=1,U}return m=S.converter._dispatch("headers.after",m,x,S),m}),r.subParser("horizontalRule",function(m,x,S){m=S.converter._dispatch("horizontalRule.before",m,x,S);var C=r.subParser("hashBlock")("<hr />",x,S);return m=m.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,C),m=m.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,C),m=m.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,C),m=S.converter._dispatch("horizontalRule.after",m,x,S),m}),r.subParser("images",function(m,x,S){m=S.converter._dispatch("images.before",m,x,S);var C=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,T=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,M=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,A=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,D=/!\[([^\[\]]+)]()()()()()/g;function O(L,F,k,P,z,B,X,J){return P=P.replace(/\s/g,""),U(L,F,k,P,z,B,X,J)}function U(L,F,k,P,z,B,X,J){var Q=S.gUrls,Z=S.gTitles,re=S.gDimensions;if(k=k.toLowerCase(),J||(J=""),L.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)P="";else if(P===""||P===null)if((k===""||k===null)&&(k=F.toLowerCase().replace(/ ?\n/g," ")),P="#"+k,!r.helper.isUndefined(Q[k]))P=Q[k],r.helper.isUndefined(Z[k])||(J=Z[k]),r.helper.isUndefined(re[k])||(z=re[k].width,B=re[k].height);else return L;F=F.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),P=P.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var fe='<img src="'+P+'" alt="'+F+'"';return J&&r.helper.isString(J)&&(J=J.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),fe+=' title="'+J+'"'),z&&B&&(z=z==="*"?"auto":z,B=B==="*"?"auto":B,fe+=' width="'+z+'"',fe+=' height="'+B+'"'),fe+=" />",fe}return m=m.replace(A,U),m=m.replace(M,O),m=m.replace(T,U),m=m.replace(C,U),m=m.replace(D,U),m=S.converter._dispatch("images.after",m,x,S),m}),r.subParser("italicsAndBold",function(m,x,S){m=S.converter._dispatch("italicsAndBold.before",m,x,S);function C(T,M,A){return M+T+A}return x.literalMidWordUnderscores?(m=m.replace(/\b___(\S[\s\S]*?)___\b/g,function(T,M){return C(M,"<strong><em>","</em></strong>")}),m=m.replace(/\b__(\S[\s\S]*?)__\b/g,function(T,M){return C(M,"<strong>","</strong>")}),m=m.replace(/\b_(\S[\s\S]*?)_\b/g,function(T,M){return C(M,"<em>","</em>")})):(m=m.replace(/___(\S[\s\S]*?)___/g,function(T,M){return/\S$/.test(M)?C(M,"<strong><em>","</em></strong>"):T}),m=m.replace(/__(\S[\s\S]*?)__/g,function(T,M){return/\S$/.test(M)?C(M,"<strong>","</strong>"):T}),m=m.replace(/_([^\s_][\s\S]*?)_/g,function(T,M){return/\S$/.test(M)?C(M,"<em>","</em>"):T})),x.literalMidWordAsterisks?(m=m.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(T,M,A){return C(A,M+"<strong><em>","</em></strong>")}),m=m.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(T,M,A){return C(A,M+"<strong>","</strong>")}),m=m.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(T,M,A){return C(A,M+"<em>","</em>")})):(m=m.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(T,M){return/\S$/.test(M)?C(M,"<strong><em>","</em></strong>"):T}),m=m.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(T,M){return/\S$/.test(M)?C(M,"<strong>","</strong>"):T}),m=m.replace(/\*([^\s*][\s\S]*?)\*/g,function(T,M){return/\S$/.test(M)?C(M,"<em>","</em>"):T})),m=S.converter._dispatch("italicsAndBold.after",m,x,S),m}),r.subParser("lists",function(m,x,S){function C(A,D){S.gListLevel++,A=A.replace(/\n{2,}$/,`
`),A+="0";var O=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,U=/\n[ \t]*\n(?!0)/.test(A);return x.disableForced4SpacesIndentedSublists&&(O=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),A=A.replace(O,function(L,F,k,P,z,B,X){X=X&&X.trim()!=="";var J=r.subParser("outdent")(z,x,S),Q="";return B&&x.tasklists&&(Q=' class="task-list-item" style="list-style-type: none;"',J=J.replace(/^[ \t]*\[(x|X| )?]/m,function(){var Z='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return X&&(Z+=" checked"),Z+=">",Z})),J=J.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(Z){return"A"+Z}),F||J.search(/\n{2,}/)>-1?(J=r.subParser("githubCodeBlocks")(J,x,S),J=r.subParser("blockGamut")(J,x,S)):(J=r.subParser("lists")(J,x,S),J=J.replace(/\n$/,""),J=r.subParser("hashHTMLBlocks")(J,x,S),J=J.replace(/\n\n+/g,`

`),U?J=r.subParser("paragraphs")(J,x,S):J=r.subParser("spanGamut")(J,x,S)),J=J.replace("A",""),J="<li"+Q+">"+J+`</li>
`,J}),A=A.replace(/0/g,""),S.gListLevel--,D&&(A=A.replace(/\s+$/,"")),A}function T(A,D){if(D==="ol"){var O=A.match(/^ *(\d+)\./);if(O&&O[1]!=="1")return' start="'+O[1]+'"'}return""}function M(A,D,O){var U=x.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,L=x.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,F=D==="ul"?U:L,k="";if(A.search(F)!==-1)(function z(B){var X=B.search(F),J=T(A,D);X!==-1?(k+=`

<`+D+J+`>
`+C(B.slice(0,X),!!O)+"</"+D+`>
`,D=D==="ul"?"ol":"ul",F=D==="ul"?U:L,z(B.slice(X))):k+=`

<`+D+J+`>
`+C(B,!!O)+"</"+D+`>
`})(A);else{var P=T(A,D);k=`

<`+D+P+`>
`+C(A,!!O)+"</"+D+`>
`}return k}return m=S.converter._dispatch("lists.before",m,x,S),m+="0",S.gListLevel?m=m.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(A,D,O){var U=O.search(/[*+-]/g)>-1?"ul":"ol";return M(D,U,!0)}):m=m.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(A,D,O,U){var L=U.search(/[*+-]/g)>-1?"ul":"ol";return M(O,L,!1)}),m=m.replace(/0/,""),m=S.converter._dispatch("lists.after",m,x,S),m}),r.subParser("metadata",function(m,x,S){if(!x.metadata)return m;m=S.converter._dispatch("metadata.before",m,x,S);function C(T){S.metadata.raw=T,T=T.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),T=T.replace(/\n {4}/g," "),T.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(M,A,D){return S.metadata.parsed[A]=D,""})}return m=m.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(T,M,A){return C(A),"M"}),m=m.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(T,M,A){return M&&(S.metadata.format=M),C(A),"M"}),m=m.replace(/M/g,""),m=S.converter._dispatch("metadata.after",m,x,S),m}),r.subParser("outdent",function(m,x,S){return m=S.converter._dispatch("outdent.before",m,x,S),m=m.replace(/^(\t|[ ]{1,4})/gm,"0"),m=m.replace(/0/g,""),m=S.converter._dispatch("outdent.after",m,x,S),m}),r.subParser("paragraphs",function(m,x,S){m=S.converter._dispatch("paragraphs.before",m,x,S),m=m.replace(/^\n+/g,""),m=m.replace(/\n+$/g,"");for(var C=m.split(/\n{2,}/g),T=[],M=C.length,A=0;A<M;A++){var D=C[A];D.search(/(K|G)(\d+)\1/g)>=0?T.push(D):D.search(/\S/)>=0&&(D=r.subParser("spanGamut")(D,x,S),D=D.replace(/^([ \t]*)/g,"<p>"),D+="</p>",T.push(D))}for(M=T.length,A=0;A<M;A++){for(var O="",U=T[A],L=!1;/(K|G)(\d+)\1/.test(U);){var F=RegExp.$1,k=RegExp.$2;F==="K"?O=S.gHtmlBlocks[k]:L?O=r.subParser("encodeCode")(S.ghCodeBlocks[k].text,x,S):O=S.ghCodeBlocks[k].codeblock,O=O.replace(/\$/g,"$$$$"),U=U.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,O),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(U)&&(L=!0)}T[A]=U}return m=T.join(`
`),m=m.replace(/^\n+/g,""),m=m.replace(/\n+$/g,""),S.converter._dispatch("paragraphs.after",m,x,S)}),r.subParser("runExtension",function(m,x,S,C){if(m.filter)x=m.filter(x,C.converter,S);else if(m.regex){var T=m.regex;T instanceof RegExp||(T=new RegExp(T,"g")),x=x.replace(T,m.replace)}return x}),r.subParser("spanGamut",function(m,x,S){return m=S.converter._dispatch("spanGamut.before",m,x,S),m=r.subParser("codeSpans")(m,x,S),m=r.subParser("escapeSpecialCharsWithinTagAttributes")(m,x,S),m=r.subParser("encodeBackslashEscapes")(m,x,S),m=r.subParser("images")(m,x,S),m=r.subParser("anchors")(m,x,S),m=r.subParser("autoLinks")(m,x,S),m=r.subParser("simplifiedAutoLinks")(m,x,S),m=r.subParser("emoji")(m,x,S),m=r.subParser("underline")(m,x,S),m=r.subParser("italicsAndBold")(m,x,S),m=r.subParser("strikethrough")(m,x,S),m=r.subParser("ellipsis")(m,x,S),m=r.subParser("hashHTMLSpans")(m,x,S),m=r.subParser("encodeAmpsAndAngles")(m,x,S),x.simpleLineBreaks?/\n\nK/.test(m)||(m=m.replace(/\n+/g,`<br />
`)):m=m.replace(/  +\n/g,`<br />
`),m=S.converter._dispatch("spanGamut.after",m,x,S),m}),r.subParser("strikethrough",function(m,x,S){function C(T){return x.simplifiedAutoLink&&(T=r.subParser("simplifiedAutoLinks")(T,x,S)),"<del>"+T+"</del>"}return x.strikethrough&&(m=S.converter._dispatch("strikethrough.before",m,x,S),m=m.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(T,M){return C(M)}),m=S.converter._dispatch("strikethrough.after",m,x,S)),m}),r.subParser("stripLinkDefinitions",function(m,x,S){var C=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,T=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;m+="0";var M=function(A,D,O,U,L,F,k){return D=D.toLowerCase(),m.toLowerCase().split(D).length-1<2?A:(O.match(/^data:.+?\/.+?;base64,/)?S.gUrls[D]=O.replace(/\s/g,""):S.gUrls[D]=r.subParser("encodeAmpsAndAngles")(O,x,S),F?F+k:(k&&(S.gTitles[D]=k.replace(/"|'/g,"&quot;")),x.parseImgDimensions&&U&&L&&(S.gDimensions[D]={width:U,height:L}),""))};return m=m.replace(T,M),m=m.replace(C,M),m=m.replace(/0/,""),m}),r.subParser("tables",function(m,x,S){if(!x.tables)return m;var C=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,T=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function M(L){return/^:[ \t]*--*$/.test(L)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(L)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(L)?' style="text-align:center;"':""}function A(L,F){var k="";return L=L.trim(),(x.tablesHeaderId||x.tableHeaderId)&&(k=' id="'+L.replace(/ /g,"_").toLowerCase()+'"'),L=r.subParser("spanGamut")(L,x,S),"<th"+k+F+">"+L+`</th>
`}function D(L,F){var k=r.subParser("spanGamut")(L,x,S);return"<td"+F+">"+k+`</td>
`}function O(L,F){for(var k=`<table>
<thead>
<tr>
`,P=L.length,z=0;z<P;++z)k+=L[z];for(k+=`</tr>
</thead>
<tbody>
`,z=0;z<F.length;++z){k+=`<tr>
`;for(var B=0;B<P;++B)k+=F[z][B];k+=`</tr>
`}return k+=`</tbody>
</table>
`,k}function U(L){var F,k=L.split(`
`);for(F=0;F<k.length;++F)/^ {0,3}\|/.test(k[F])&&(k[F]=k[F].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(k[F])&&(k[F]=k[F].replace(/\|[ \t]*$/,"")),k[F]=r.subParser("codeSpans")(k[F],x,S);var P=k[0].split("|").map(function(fe){return fe.trim()}),z=k[1].split("|").map(function(fe){return fe.trim()}),B=[],X=[],J=[],Q=[];for(k.shift(),k.shift(),F=0;F<k.length;++F)k[F].trim()!==""&&B.push(k[F].split("|").map(function(fe){return fe.trim()}));if(P.length<z.length)return L;for(F=0;F<z.length;++F)J.push(M(z[F]));for(F=0;F<P.length;++F)r.helper.isUndefined(J[F])&&(J[F]=""),X.push(A(P[F],J[F]));for(F=0;F<B.length;++F){for(var Z=[],re=0;re<X.length;++re)r.helper.isUndefined(B[F][re]),Z.push(D(B[F][re],J[re]));Q.push(Z)}return O(X,Q)}return m=S.converter._dispatch("tables.before",m,x,S),m=m.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),m=m.replace(C,U),m=m.replace(T,U),m=S.converter._dispatch("tables.after",m,x,S),m}),r.subParser("underline",function(m,x,S){return x.underline&&(m=S.converter._dispatch("underline.before",m,x,S),x.literalMidWordUnderscores?(m=m.replace(/\b___(\S[\s\S]*?)___\b/g,function(C,T){return"<u>"+T+"</u>"}),m=m.replace(/\b__(\S[\s\S]*?)__\b/g,function(C,T){return"<u>"+T+"</u>"})):(m=m.replace(/___(\S[\s\S]*?)___/g,function(C,T){return/\S$/.test(T)?"<u>"+T+"</u>":C}),m=m.replace(/__(\S[\s\S]*?)__/g,function(C,T){return/\S$/.test(T)?"<u>"+T+"</u>":C})),m=m.replace(/(_)/g,r.helper.escapeCharactersCallback),m=S.converter._dispatch("underline.after",m,x,S)),m}),r.subParser("unescapeSpecialChars",function(m,x,S){return m=S.converter._dispatch("unescapeSpecialChars.before",m,x,S),m=m.replace(/E(\d+)E/g,function(C,T){var M=parseInt(T);return String.fromCharCode(M)}),m=S.converter._dispatch("unescapeSpecialChars.after",m,x,S),m}),r.subParser("makeMarkdown.blockquote",function(m,x){var S="";if(m.hasChildNodes())for(var C=m.childNodes,T=C.length,M=0;M<T;++M){var A=r.subParser("makeMarkdown.node")(C[M],x);A!==""&&(S+=A)}return S=S.trim(),S="> "+S.split(`
`).join(`
> `),S}),r.subParser("makeMarkdown.codeBlock",function(m,x){var S=m.getAttribute("language"),C=m.getAttribute("precodenum");return"```"+S+`
`+x.preList[C]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(m){return"`"+m.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(m,x){var S="";if(m.hasChildNodes()){S+="*";for(var C=m.childNodes,T=C.length,M=0;M<T;++M)S+=r.subParser("makeMarkdown.node")(C[M],x);S+="*"}return S}),r.subParser("makeMarkdown.header",function(m,x,S){var C=new Array(S+1).join("#"),T="";if(m.hasChildNodes()){T=C+" ";for(var M=m.childNodes,A=M.length,D=0;D<A;++D)T+=r.subParser("makeMarkdown.node")(M[D],x)}return T}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(m){var x="";return m.hasAttribute("src")&&(x+="!["+m.getAttribute("alt")+"](",x+="<"+m.getAttribute("src")+">",m.hasAttribute("width")&&m.hasAttribute("height")&&(x+=" ="+m.getAttribute("width")+"x"+m.getAttribute("height")),m.hasAttribute("title")&&(x+=' "'+m.getAttribute("title")+'"'),x+=")"),x}),r.subParser("makeMarkdown.links",function(m,x){var S="";if(m.hasChildNodes()&&m.hasAttribute("href")){var C=m.childNodes,T=C.length;S="[";for(var M=0;M<T;++M)S+=r.subParser("makeMarkdown.node")(C[M],x);S+="](",S+="<"+m.getAttribute("href")+">",m.hasAttribute("title")&&(S+=' "'+m.getAttribute("title")+'"'),S+=")"}return S}),r.subParser("makeMarkdown.list",function(m,x,S){var C="";if(!m.hasChildNodes())return"";for(var T=m.childNodes,M=T.length,A=m.getAttribute("start")||1,D=0;D<M;++D)if(!(typeof T[D].tagName>"u"||T[D].tagName.toLowerCase()!=="li")){var O="";S==="ol"?O=A.toString()+". ":O="- ",C+=O+r.subParser("makeMarkdown.listItem")(T[D],x),++A}return C+=`
<!-- -->
`,C.trim()}),r.subParser("makeMarkdown.listItem",function(m,x){for(var S="",C=m.childNodes,T=C.length,M=0;M<T;++M)S+=r.subParser("makeMarkdown.node")(C[M],x);return/\n$/.test(S)?S=S.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):S+=`
`,S}),r.subParser("makeMarkdown.node",function(m,x,S){S=S||!1;var C="";if(m.nodeType===3)return r.subParser("makeMarkdown.txt")(m,x);if(m.nodeType===8)return"<!--"+m.data+`-->

`;if(m.nodeType!==1)return"";var T=m.tagName.toLowerCase();switch(T){case"h1":S||(C=r.subParser("makeMarkdown.header")(m,x,1)+`

`);break;case"h2":S||(C=r.subParser("makeMarkdown.header")(m,x,2)+`

`);break;case"h3":S||(C=r.subParser("makeMarkdown.header")(m,x,3)+`

`);break;case"h4":S||(C=r.subParser("makeMarkdown.header")(m,x,4)+`

`);break;case"h5":S||(C=r.subParser("makeMarkdown.header")(m,x,5)+`

`);break;case"h6":S||(C=r.subParser("makeMarkdown.header")(m,x,6)+`

`);break;case"p":S||(C=r.subParser("makeMarkdown.paragraph")(m,x)+`

`);break;case"blockquote":S||(C=r.subParser("makeMarkdown.blockquote")(m,x)+`

`);break;case"hr":S||(C=r.subParser("makeMarkdown.hr")(m,x)+`

`);break;case"ol":S||(C=r.subParser("makeMarkdown.list")(m,x,"ol")+`

`);break;case"ul":S||(C=r.subParser("makeMarkdown.list")(m,x,"ul")+`

`);break;case"precode":S||(C=r.subParser("makeMarkdown.codeBlock")(m,x)+`

`);break;case"pre":S||(C=r.subParser("makeMarkdown.pre")(m,x)+`

`);break;case"table":S||(C=r.subParser("makeMarkdown.table")(m,x)+`

`);break;case"code":C=r.subParser("makeMarkdown.codeSpan")(m,x);break;case"em":case"i":C=r.subParser("makeMarkdown.emphasis")(m,x);break;case"strong":case"b":C=r.subParser("makeMarkdown.strong")(m,x);break;case"del":C=r.subParser("makeMarkdown.strikethrough")(m,x);break;case"a":C=r.subParser("makeMarkdown.links")(m,x);break;case"img":C=r.subParser("makeMarkdown.image")(m,x);break;default:C=m.outerHTML+`

`}return C}),r.subParser("makeMarkdown.paragraph",function(m,x){var S="";if(m.hasChildNodes())for(var C=m.childNodes,T=C.length,M=0;M<T;++M)S+=r.subParser("makeMarkdown.node")(C[M],x);return S=S.trim(),S}),r.subParser("makeMarkdown.pre",function(m,x){var S=m.getAttribute("prenum");return"<pre>"+x.preList[S]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(m,x){var S="";if(m.hasChildNodes()){S+="~~";for(var C=m.childNodes,T=C.length,M=0;M<T;++M)S+=r.subParser("makeMarkdown.node")(C[M],x);S+="~~"}return S}),r.subParser("makeMarkdown.strong",function(m,x){var S="";if(m.hasChildNodes()){S+="**";for(var C=m.childNodes,T=C.length,M=0;M<T;++M)S+=r.subParser("makeMarkdown.node")(C[M],x);S+="**"}return S}),r.subParser("makeMarkdown.table",function(m,x){var S="",C=[[],[]],T=m.querySelectorAll("thead>tr>th"),M=m.querySelectorAll("tbody>tr"),A,D;for(A=0;A<T.length;++A){var O=r.subParser("makeMarkdown.tableCell")(T[A],x),U="---";if(T[A].hasAttribute("style")){var L=T[A].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(L){case"text-align:left;":U=":---";break;case"text-align:right;":U="---:";break;case"text-align:center;":U=":---:";break}}C[0][A]=O.trim(),C[1][A]=U}for(A=0;A<M.length;++A){var F=C.push([])-1,k=M[A].getElementsByTagName("td");for(D=0;D<T.length;++D){var P=" ";typeof k[D]<"u"&&(P=r.subParser("makeMarkdown.tableCell")(k[D],x)),C[F].push(P)}}var z=3;for(A=0;A<C.length;++A)for(D=0;D<C[A].length;++D){var B=C[A][D].length;B>z&&(z=B)}for(A=0;A<C.length;++A){for(D=0;D<C[A].length;++D)A===1?C[A][D].slice(-1)===":"?C[A][D]=r.helper.padEnd(C[A][D].slice(-1),z-1,"-")+":":C[A][D]=r.helper.padEnd(C[A][D],z,"-"):C[A][D]=r.helper.padEnd(C[A][D],z);S+="| "+C[A].join(" | ")+` |
`}return S.trim()}),r.subParser("makeMarkdown.tableCell",function(m,x){var S="";if(!m.hasChildNodes())return"";for(var C=m.childNodes,T=C.length,M=0;M<T;++M)S+=r.subParser("makeMarkdown.node")(C[M],x,!0);return S.trim()}),r.subParser("makeMarkdown.txt",function(m){var x=m.nodeValue;return x=x.replace(/ +/g," "),x=x.replace(/NBSP;/g," "),x=r.helper.unescapeHTMLEntities(x),x=x.replace(/([*_~|`])/g,"\\$1"),x=x.replace(/^(\s*)>/g,"\\$1>"),x=x.replace(/^#/gm,"\\#"),x=x.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),x=x.replace(/^( {0,3}\d+)\./gm,"$1\\."),x=x.replace(/^( {0,3})([+-])/gm,"$1\\$2"),x=x.replace(/]([\s]*)\(/g,"\\]$1\\("),x=x.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),x});var b=this;n.exports?n.exports=r:b.showdown=r}).call(fo)})(x_e);class Vn{constructor(e){this.inputs=[],this.output=null,this.uniqueID=I.generateUniqueID(),this.description="none",this.x=0,this.y=0,this.radius=1/75,this.defaultColor="#F3EFEF",this.selectedColor="#484848",this.strokeColor="#484848",this.selected=!1,this.color="#F3EFEF",this.name="name0",this.parentMolecule=null,this.value=null,this.isMoving=!1,this.showHover=!1,this.x=0,this.y=0,this.alertMessage="",this.processing=!1;for(var t in e)this[t]=e[t]}setValues(e){for(var t in e)this[t]=e[t];typeof this.ioValues<"u"&&this.ioValues.forEach(r=>{this.inputs.forEach(i=>{r.name==i.name&&i.type=="input"&&(i.value=r.ioValue)})})}draw(e){let t=I.widthToPixels(this.x),r=I.heightToPixels(this.y),i=I.widthToPixels(this.radius);if(this.inputs.forEach(a=>{a.draw()}),I.c.beginPath(),I.c.font="10px Work Sans",this.processing?I.c.fillStyle="blue":this.selected?(I.c.fillStyle=this.selectedColor,I.c.strokeStyle=this.selectedColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(I.c.fillStyle=this.defaultColor,I.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),I.c.beginPath(),e=="rect"?I.c.rect(t-i,r-this.height/2,2*i,this.height):I.c.arc(t,r,i,0,Math.PI*2,!1),I.c.textAlign="start",I.c.fill(),I.c.strokeStyle=this.strokeColor,I.c.fillStyle="white",I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.textAlign="start",I.c.fillText(this.name,t+i,r-i),I.c.fill(),I.c.strokeStyle=this.strokeColor,I.c.lineWidth=1,I.c.stroke(),I.c.closePath(),this.showHover&&this.alertMessage.length>0){this.color="red",I.c.beginPath();const a=10;I.c.fillStyle="red",I.c.rect(t+i-a/2,r-i+a/2,I.c.measureText(this.alertMessage.toUpperCase()).width+a,-(parseInt(I.c.font)+a)),I.c.fill(),I.c.strokeStyle="black",I.c.lineWidth=1,I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="black",I.c.fillText(this.alertMessage.toUpperCase(),t+i,r-i),I.c.closePath()}}addIO(e,t,r,i,a,o,s=!1){if(r.inputs.find(c=>c.name===t&&c.type===e)==null){var l;e=="input"?l=-1*r.scaledRadius:l=r.scaledRadius;var u=new so({parentMolecule:r,defaultOffsetX:l,defaultOffsetY:0,type:e,valueType:i,name:t,primary:s,value:a,defaultValue:a,uniqueID:I.generateUniqueID(),atomType:"AttachmentPoint",ready:!0});e=="input"?r.inputs.push(u):r.output=u}}removeIO(e,t,r,i=!1){r.inputs.forEach(a=>{a.name==t&&a.type==e&&(r.inputs.splice(r.inputs.indexOf(a),1),a.deleteSelf(i))})}alertingErrorHandler(){return e=>{this.processing=!1,console.log(e),this.setAlert(e.message)}}setAlert(e){this.color="orange",this.alertMessage=String(e)}clearAlert(){this.color=this.defaultColor,this.alertMessage=""}selectBox(e,t,r,i){let a=Math.min(e,r),o=Math.max(e,r),s=Math.min(t,i),l=Math.max(t,i),u=I.widthToPixels(this.x),c=I.heightToPixels(this.y);u>=a&&u<=o&&c>=s&&c<=l&&(this.selected=!0)}clickDown(e,t,r){let i=I.widthToPixels(this.x),a=I.heightToPixels(this.y),o=I.widthToPixels(this.radius),s;return!r&&I.distBetweenPoints(e,i,t,a)<o?(this.isMoving=!0,this.selected=!0,s=this,this.sendToRender()):I.ctrlDown||(this.selected=!1),this.inputs.forEach(l=>{l.clickDown(e,t,r)==!0&&(r=!0)}),this.output&&!s&&this.output.clickDown(e,t,r)==!0&&(r=!0),s}doubleClick(e,t){let r=I.widthToPixels(this.x),i=I.heightToPixels(this.y);var a=!1,o=I.distBetweenPoints(e,r,t,i);return o<r&&(a=!0),a}clickUp(e,t){this.isMoving=!1,this.inputs.forEach(r=>{r.clickUp(e,t)}),this.output&&this.output.clickUp(e,t)}mouseMove(e,t){let r=I.widthToPixels(this.x),i=I.heightToPixels(this.y),a=I.widthToPixels(this.radius);this.isMoving==!0&&(this.x=I.pixelsToWidth(e),this.y=I.pixelsToHeight(t)),this.inputs.forEach(s=>{s.mouseMove(e,t)}),this.output&&this.output.mouseMove(e,t);var o=I.distBetweenPoints(e,r,t,i);o<a?this.showHover=!0:this.showHover=!1}keyPress(e){this.inputs.forEach(t=>{t.keyPress(e)})}deleteNode(e=!0,t=!0,r=!1){this.inputs.forEach(i=>{i.ready=!1}),[...this.inputs].forEach(i=>{i.deleteSelf(r)}),this.output&&this.output.deleteSelf(r),I.cad.deleteFromLibrary(this.uniqueID).then(()=>{}),this.parent.nodesOnTheScreen.splice(this.parent.nodesOnTheScreen.indexOf(this),1)}update(){this.inputs.forEach(e=>{e.update()}),this.output&&this.output.update(),this.draw()}serialize(e={x:0,y:0}){var t=[];this.inputs.forEach(i=>{if(typeof i.getValue()=="number"||typeof i.getValue()=="string"){var a={name:i.name,ioValue:i.getValue()};t.push(a)}});var r={atomType:this.atomType,name:this.name,x:this.x+e.x,y:this.y-e.y,uniqueID:this.uniqueID,ioValues:t};return r}requestReadme(){return[]}decreaseToProcessCountByOne(){I.topLevelMolecule.census()}updateValue(){this.waitOnComingInformation()}walkBackForConstants(e){this.inputs.forEach(t=>{t.connectors.forEach(r=>{r.walkBackForConstants(e)})})}waitOnComingInformation(){this.output&&this.output.waitOnComingInformation(),this.processing&&console.log("information sent to something processing")}basicThreadValueProcessing(){this.decreaseToProcessCountByOne(),this.clearAlert(),this.output&&(this.output.setValue(this.uniqueID),this.output.ready=!0),this.processing=!1,this.selected&&this.sendToRender()}beginPropagation(){}census(){var e=0;return this.inputs.forEach(t=>{t.ready!=!0&&(e=1)}),[1,e]}sendToRender(){try{I.writeToDisplay(this.uniqueID)}catch(e){this.setAlert(e)}}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,step:.25,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),e}findIOValue(e){e=e.split("~").join("");var t=null;return this.inputs.forEach(r=>{r.name==e&&r.type=="input"&&(t=r.getValue())}),t}}const ZB=function(n){var e=0;return n.inputs.forEach(t=>{t.type=="input"&&t.connectors.length==0&&(e=e+1)}),e},w_e=function(n){var e;for(e=0;e<n.inputs.length-1;e++){var t=n.inputs[e];if(t.type=="input"&&t.connectors.length==0){n.removeIO("input",t.name,n);return}}},JB=function(n){var e=0;return n.inputs.forEach(t=>{e=Math.max(e,parseInt(t.name.match(/\d+$/)[0]))}),e},Z0=n=>{ZB(n)==0&&(JB(n),n.addIO("input","3D shape "+(JB(n)+1),n,"geometry","",!0)),ZB(n)>=2&&w_e(n)};class S_e extends Vn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Join",this.atomType="Join",this.ioValues=[],this.removeCutawayGeometry=!0,this.description="Pick between assembly and fusion to join input geometries. Assembly takes multiple shapes together into one, shapes higher in the inputs list will cut into shapes lower on the input list where they overlap. Fusion takes all shapes or sketches and fuses them permanently into a single shape",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.unionType,this.unionIndex=0,this.setValues([])}beginPropagation(){super.beginPropagation()}draw(){super.draw();const e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),r=I.widthToPixels(this.radius);I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-r/2,t+r/2),I.c.lineTo(e+r/2,t+r/2),I.c.lineTo(e+r/2,t),I.c.lineTo(e-r/2,t),I.c.lineTo(e-r/2,t+r/2),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.lineTo(e+r/4,t-r/2),I.c.lineTo(e-r/4,t-r/2),I.c.lineTo(e-r/4,t),I.c.lineTo(e+r/2,t),I.c.lineTo(e+r/4,t-r/2),I.c.lineWidth=1,I.c.lineJoin="round",I.c.stroke(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&t.type=="input"&&e.push(t.getValue())}),this.unionType==="Fusion"?I.cad.fusion(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()):this.unionType==="Assembly"&&I.cad.assembly(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),Z0(this)}}createLevaInputs(){let e={};const t=["Assembly","Fusion"];return e[this.uniqueID+"union_ops"]={value:this.unionType||t[this.unionIndex],options:t,label:"Union Type",onChange:r=>{this.unionIndex=t.indexOf(r),this.unionType!==t[this.unionIndex]&&(this.unionType=t[this.unionIndex],this.name=this.unionType,this.updateValue())}},e}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.connectors.length>0){var a={name:i.name,ioValue:i.getValue()};r.push(a)}}),t.ioValues=r,t.unionType=this.unionType,t}}class E_e extends Vn{constructor(e){super(e),this.name="Circle",this.atomType="Circle",this.description="Creates a new circle.",this.addIO("input","diameter",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x),I.heightToPixels(this.y),I.widthToPixels(this.radius/2),0,Math.PI*2,!1),I.c.stroke(),I.c.closePath()}updateValue(){super.updateValue();var e=this.findIOValue("diameter");I.cad.circle(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}let __e=class extends Vn{constructor(n){super(n),this.name="Color",this.atomType="Color",this.description="Changes the color of the shape.",this.selectedColorIndex=0,this.colorOptions={Red:"#FF9065",Orange:"#FFB458",Yellow:"#FFD600",Olive:"#C7DF66",Teal:"#71D1C2","Light Blue":"#75DBF2",Green:"#A3CE5B","Lavender ":"#CCABED",Brown:"#CFAB7C",Pink:"#FFB09D",Sand:"#E2C66C",Clay:"#C4D3AC",Blue:"#91C8D5","Light Green":"#96E1BB",Purple:"#ACAFDD","Light Purple":"#DFB1E8",Tan:"#F5D3B6","Mauve ":"#DBADA9",Grey:"#BABABA",Black:"#3C3C3C",White:"#FFFCF7","Keep Out":"#E0E0E0"},this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.setValues(n)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#0000FF",I.c.arc(I.widthToPixels(this.x-this.radius/4),I.heightToPixels(this.y+this.radius/2),I.widthToPixels(this.radius/3),0,Math.PI*2,!1),I.c.fill(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#FF0000",I.c.arc(I.widthToPixels(this.x+this.radius/4),I.heightToPixels(this.y+this.radius/2),I.widthToPixels(this.radius/3),0,Math.PI*2,!1),I.c.fill(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#FFFF00",I.c.arc(I.widthToPixels(this.x),I.heightToPixels(this.y-this.radius),I.widthToPixels(this.radius/3),0,Math.PI*2,!1),I.c.fill(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var n=this.findIOValue("geometry"),e=Object.values(this.colorOptions)[this.selectedColorIndex];I.cad.color(this.uniqueID,n,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}changeColor(n){this.selectedColorIndex=n,this.updateValue()}createLevaInputs(){let n={};if(this.inputs)return this.inputs.map(e=>{const t=()=>e.connectors.length>0;n[this.uniqueID+"color"]={value:Object.keys(this.colorOptions)[this.selectedColorIndex],label:"Color",options:Object.keys(this.colorOptions),onChange:r=>{this.changeColor(Object.keys(this.colorOptions).indexOf(r)),this.sendToRender()}},e.valueType!=="geometry"&&(n[this.uniqueID+e.name]={value:e.value,label:e.name,disabled:t(),onChange:r=>{e.value!==r&&e.setValue(r)}})}),n}updateSidebar(){const n=super.updateSidebar(),e=document.createElement("div");n.appendChild(e),this.createDropDown(e,this,Object.keys(this.colorOptions),this.selectedColorIndex,"Color",t=>{this.changeColor(t)})}serialize(){var n=super.serialize();return n.selectedColorIndex=this.selectedColorIndex,n}};class C_e extends Vn{constructor(e){super(e),this.atomType="Cut Layout",this.type="cutLayout",this.name="Cut Layout",this.description="Extracts all parts tagged for cutting and lays them out on a sheet to cut.",this.addIO("input","geometry",this,"geometry",null),this.addIO("input","Material Thickness",this,"number",I.topLevelMolecule.unitsIndex=="MM"?19:.75),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}draw(){super.draw();const e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),r=I.widthToPixels(this.radius);I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-r/2,t+r/2),I.c.lineTo(e+r/2,t+r/2),I.c.lineTo(e+r/2,t),I.c.lineTo(e-r/2,t),I.c.lineTo(e-r/2,t+r/2),I.c.setLineDash([3,3]),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.lineTo(e+r/4,t-r/1.7),I.c.lineTo(e-r/4,t-r/2),I.c.lineTo(e-r/4,t),I.c.lineTo(e+r/2,t),I.c.lineTo(e+r/4,t-r/1.7),I.c.lineWidth=1,I.c.lineJoin="round",I.c.stroke(),I.c.setLineDash([]),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(i=>i.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("Material Thickness"),r="cutLayout";if(!e){this.setAlert('"geometry" input is missing');return}I.cad.layout(this.uniqueID,e,r,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class A_e extends Vn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Shrink Wrap",this.atomType="Shrink Wrap",this.ioValues=[],this.description="Joins two or more drawings into a single sketch by filling in the space between them. Also called 'hull'",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x+this.radius/4),I.heightToPixels(this.y),I.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),I.c.fill(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x-this.radius/4),I.heightToPixels(this.y),I.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),I.c.fill(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.rect(I.widthToPixels(this.x-this.radius/4),I.heightToPixels(this.y-this.radius),I.widthToPixels(this.radius/2),I.widthToPixels(this.radius/2)),I.c.fill(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&e.push(t.getValue())}),I.cad.shrinkWrapSketches(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),Z0(this)}}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.type=="input"){var a={name:i.name,ioValue:i.getValue()};r.push(a)}}),r.forEach(i=>{t.ioValues.push(i)}),t}}class T_e extends Vn{constructor(e){super(e),this.addIO("input","x length",this,"number",10),this.addIO("input","y length",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.name="Rectangle",this.atomType="Rectangle",this.description="Creates a new rectangle.",this.setValues(e)}beginPropagation(){this.inputs.forEach(e=>{e.beginPropagation()})}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.rect(I.widthToPixels(this.x-this.radius/2),I.heightToPixels(this.y-this.radius*2),I.widthToPixels(this.radius),I.widthToPixels(this.radius)),I.c.stroke(),I.c.closePath()}updateValue(){super.updateValue();var e=this.findIOValue("x length"),t=this.findIOValue("y length");I.cad.rectangle(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}class M_e extends Vn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Loft",this.atomType="Loft",this.ioValues=[],this.description="Joins two or more shapes into a single solid by filling in the space between them. Also called 'hull'",this.closedSelection=0,this.addedIO=!1,this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x+this.radius/4),I.heightToPixels(this.y),I.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),I.c.fill(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x-this.radius/4),I.heightToPixels(this.y),I.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),I.c.fill(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.rect(I.widthToPixels(this.x-this.radius/4),I.heightToPixels(this.y-this.radius),I.widthToPixels(this.radius/2),I.widthToPixels(this.radius/2)),I.c.fill(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&e.push(t.getValue())}),I.cad.loftShapes(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),Z0(this)}}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.type=="input"){var a={name:i.name,ioValue:i.getValue()};r.push(a)}}),r.forEach(i=>{t.ioValues.push(i)}),t.closedSelection=this.closedSelection,t}}class D_e extends Vn{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","xDist",this,"number",0),this.addIO("input","yDist",this,"number",0),this.addIO("input","zDist",this,"number",0),this.addIO("output","geometry",this,"geometry",""),this.name="Move",this.atomType="Move",this.description="Moves a shape laterally in X, Y, Z.",this.setValues(e)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x+this.radius/5),I.heightToPixels(this.y),I.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x-this.radius/5),I.heightToPixels(this.y),I.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),I.c.fill(),I.c.stroke(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(a=>a.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("xDist"),r=this.findIOValue("yDist"),i=this.findIOValue("zDist");I.cad.move(this.uniqueID,e,t,r,i).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}function k_e(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Zq(...n){return e=>n.forEach(t=>k_e(t,e))}function Em(...n){return j.useCallback(Zq(...n),n)}const Jq=j.forwardRef((n,e)=>{const{children:t,...r}=n,i=j.Children.toArray(t),a=i.find(N_e);if(a){const o=a.props.children,s=i.map(l=>l===a?j.Children.count(o)>1?j.Children.only(null):j.isValidElement(o)?o.props.children:null:l);return j.createElement(jM,lt({},r,{ref:e}),j.isValidElement(o)?j.cloneElement(o,void 0,s):null)}return j.createElement(jM,lt({},r,{ref:e}),t)});Jq.displayName="Slot";const jM=j.forwardRef((n,e)=>{const{children:t,...r}=n;return j.isValidElement(t)?j.cloneElement(t,{...O_e(r,t.props),ref:e?Zq(e,t.ref):t.ref}):j.Children.count(t)>1?j.Children.only(null):null});jM.displayName="SlotClone";const Kq=({children:n})=>j.createElement(j.Fragment,null,n);function N_e(n){return j.isValidElement(n)&&n.type===Kq}function O_e(n,e){const t={...e};for(const r in e){const i=n[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?t[r]=(...o)=>{a(...o),i(...o)}:i&&(t[r]=i):r==="style"?t[r]={...i,...a}:r==="className"&&(t[r]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}const P_e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],zd=P_e.reduce((n,e)=>{const t=j.forwardRef((r,i)=>{const{asChild:a,...o}=r,s=a?Jq:e;return j.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),j.createElement(s,lt({},o,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function R_e(n,e){n&&fm.flushSync(()=>n.dispatchEvent(e))}const I_e=j.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?YH.createPortal(j.createElement(zd.div,lt({},i,{ref:e})),r):null}),L_e=I_e;var KB=Object.prototype.hasOwnProperty;function J0(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&J0(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(KB.call(n,t)&&++r&&!KB.call(e,t)||!(t in e)||!J0(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function WE(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}var qE=function(n,e,t,r){this.name=n,this.fn=e,this.args=t,this.modifiers=r};qE.prototype._test=function(n){var e=this.fn;try{Cp(this.modifiers.slice(),e,this)(n)}catch{e=function(){return!1}}try{return Cp(this.modifiers.slice(),e,this)(n)}catch{return!1}};qE.prototype._check=function(n){try{Cp(this.modifiers.slice(),this.fn,this)(n)}catch{if(Cp(this.modifiers.slice(),function(e){return e},this)(!1))return}if(!Cp(this.modifiers.slice(),this.fn,this)(n))throw null};qE.prototype._testAsync=function(n){var e=this;return new Promise(function(t,r){eG(e.modifiers.slice(),e.fn,e)(n).then(function(i){i?t(n):r(null)}).catch(function(i){return r(i)})})};function Qq(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Cp(n,e,t){if(n.length){var r=n.shift(),i=Cp(n,e,t);return r.perform(i,t)}else return Qq(e)}function eG(n,e,t){if(n.length){var r=n.shift(),i=eG(n,e,t);return r.performAsync(i,t)}else return function(a){return Promise.resolve(Qq(e,"async")(a))}}var F_e=function(n,e,t){this.name=n,this.perform=e,this.performAsync=t},AN=function(n){function e(t,r,i,a){for(var o=[],s=arguments.length-4;s-- >0;)o[s]=arguments[s+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=a}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),wl=function(n,e){n===void 0&&(n=[]),e===void 0&&(e=[]),this.chain=n,this.nextRuleModifiers=e};wl.prototype._applyRule=function(n,e){var t=this;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.chain.push(new qE(e,n.apply(t,r),r,t.nextRuleModifiers)),t.nextRuleModifiers=[],t}};wl.prototype._applyModifier=function(n,e){return this.nextRuleModifiers.push(new F_e(e,n.simple,n.async)),this};wl.prototype._clone=function(){return new wl(this.chain.slice(),this.nextRuleModifiers.slice())};wl.prototype.test=function(n){return this.chain.every(function(e){return e._test(n)})};wl.prototype.testAll=function(n){var e=[];return this.chain.forEach(function(t){try{t._check(n)}catch(r){e.push(new AN(t,n,r))}}),e};wl.prototype.check=function(n){this.chain.forEach(function(e){try{e._check(n)}catch(t){throw new AN(e,n,t)}})};wl.prototype.testAsync=function(n){var e=this;return new Promise(function(t,r){tG(n,e.chain.slice(),t,r)})};function tG(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){tG(n,e,t,r)},function(a){r(new AN(i,n,a))})}else t(n)}var QB=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function B_e(n,e){return e===void 0&&(e=!1),{simple:function(t){return QB(t,e)||n.check(t)===void 0},async:function(t){return QB(t,e)||n.testAsync(t)}}}function qa(){return typeof Proxy<"u"?nG(new wl):HM(new wl)}var K0={};qa.extend=function(n){Object.assign(K0,n)};qa.clearCustomRules=function(){K0={}};function nG(n){return new Proxy(n,{get:function(e,t){if(t in e)return e[t];var r=nG(n._clone());if(t in yS)return r._applyModifier(yS[t],t);if(t in K0)return r._applyRule(K0[t],t);if(t in VM)return r._applyRule(VM[t],t)}})}function HM(n){var e=function(i,a){return Object.keys(i).forEach(function(o){a[o]=function(){for(var s=[],l=arguments.length;l--;)s[l]=arguments[l];var u=HM(a._clone()),c=u._applyRule(i[o],o).apply(void 0,s);return c}}),a},t=e(VM,n),r=e(K0,t);return Object.keys(yS).forEach(function(i){Object.defineProperty(r,i,{get:function(){var a=HM(r._clone());return a._applyModifier(yS[i],i)}})}),r}var yS={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return ob(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(ob(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&ob(e).every(n)}},async:function(n){return function(e){return Promise.all(ob(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return ez(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return ez(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function ez(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function ob(n){return typeof n=="string"?n.split(""):n}var VM={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||z_e;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return cf("string")},boolean:function(){return cf("boolean")},undefined:function(){return cf("undefined")},null:function(){return cf("null")},array:function(){return cf("array")},object:function(){return cf("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return U_e(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:B_e};function cf(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function z_e(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function U_e(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(a){a.target=r,t.push(a)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var a=n[i];return a.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var Gn="colors",da="sizes",Ct="space",j_e={gap:Ct,gridGap:Ct,columnGap:Ct,gridColumnGap:Ct,rowGap:Ct,gridRowGap:Ct,inset:Ct,insetBlock:Ct,insetBlockEnd:Ct,insetBlockStart:Ct,insetInline:Ct,insetInlineEnd:Ct,insetInlineStart:Ct,margin:Ct,marginTop:Ct,marginRight:Ct,marginBottom:Ct,marginLeft:Ct,marginBlock:Ct,marginBlockEnd:Ct,marginBlockStart:Ct,marginInline:Ct,marginInlineEnd:Ct,marginInlineStart:Ct,padding:Ct,paddingTop:Ct,paddingRight:Ct,paddingBottom:Ct,paddingLeft:Ct,paddingBlock:Ct,paddingBlockEnd:Ct,paddingBlockStart:Ct,paddingInline:Ct,paddingInlineEnd:Ct,paddingInlineStart:Ct,top:Ct,right:Ct,bottom:Ct,left:Ct,scrollMargin:Ct,scrollMarginTop:Ct,scrollMarginRight:Ct,scrollMarginBottom:Ct,scrollMarginLeft:Ct,scrollMarginX:Ct,scrollMarginY:Ct,scrollMarginBlock:Ct,scrollMarginBlockEnd:Ct,scrollMarginBlockStart:Ct,scrollMarginInline:Ct,scrollMarginInlineEnd:Ct,scrollMarginInlineStart:Ct,scrollPadding:Ct,scrollPaddingTop:Ct,scrollPaddingRight:Ct,scrollPaddingBottom:Ct,scrollPaddingLeft:Ct,scrollPaddingX:Ct,scrollPaddingY:Ct,scrollPaddingBlock:Ct,scrollPaddingBlockEnd:Ct,scrollPaddingBlockStart:Ct,scrollPaddingInline:Ct,scrollPaddingInlineEnd:Ct,scrollPaddingInlineStart:Ct,fontSize:"fontSizes",background:Gn,backgroundColor:Gn,backgroundImage:Gn,borderImage:Gn,border:Gn,borderBlock:Gn,borderBlockEnd:Gn,borderBlockStart:Gn,borderBottom:Gn,borderBottomColor:Gn,borderColor:Gn,borderInline:Gn,borderInlineEnd:Gn,borderInlineStart:Gn,borderLeft:Gn,borderLeftColor:Gn,borderRight:Gn,borderRightColor:Gn,borderTop:Gn,borderTopColor:Gn,caretColor:Gn,color:Gn,columnRuleColor:Gn,fill:Gn,outline:Gn,outlineColor:Gn,stroke:Gn,textDecorationColor:Gn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:da,minBlockSize:da,maxBlockSize:da,inlineSize:da,minInlineSize:da,maxInlineSize:da,width:da,minWidth:da,maxWidth:da,height:da,minHeight:da,maxHeight:da,flexBasis:da,gridTemplateColumns:da,gridTemplateRows:da,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},H_e=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,_m=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(a=>JSON.stringify(a,H_e))(e);return i in n?n[i]:n[i]=t(e,...r)}},ad=Symbol.for("sxs.internal"),TN=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),tz=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:V_e}=Object.prototype,WM=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),W_e=/\s+(?![^()]*\))/,hf=n=>e=>n(...typeof e=="string"?String(e).split(W_e):[e]),nz={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:hf((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:hf((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:hf((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:hf((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:hf((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:hf((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},HC=/([\d.]+)([^]*)/,q_e=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,G_e=(n,e)=>n in $_e&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,a)=>r+(i==="stretch"?`-moz-available${a};${WM(n)}:${r}-webkit-fill-available`:`-moz-fit-content${a};${WM(n)}:${r}fit-content`)+a):String(e),$_e={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},xu=n=>n?n+"-":"",rG=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,a,o,s)=>o=="$"==!!a?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?xu(e)+(s.includes("$")?"":xu(t))+s.replace(/\$/g,"-"):s)+")"+(i||o=="--"?"*"+(i||"")+(a||"1")+")":"")),X_e=/\s*,\s*(?![^()]*\))/,Y_e=Object.prototype.toString,sp=(n,e,t,r,i)=>{let a,o,s;const l=(u,c,h)=>{let d,f;const p=v=>{for(d in v){const w=d.charCodeAt(0)===64,b=w&&Array.isArray(v[d])?v[d]:[v[d]];for(f of b){const m=/[A-Z]/.test(g=d)?g:g.replace(/-[^]/g,S=>S[1].toUpperCase()),x=typeof f=="object"&&f&&f.toString===Y_e&&(!r.utils[m]||!c.length);if(m in r.utils&&!x){const S=r.utils[m];if(S!==o){o=S,p(S(f)),o=null;continue}}else if(m in nz){const S=nz[m];if(S!==s){s=S,p(S(f)),s=null;continue}}if(w&&(y=d.slice(1)in r.media?"@media "+r.media[d.slice(1)]:d,d=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(S,C,T,M,A,D)=>{const O=HC.test(C),U=.0625*(O?-1:1),[L,F]=O?[M,C]:[C,M];return"("+(T[0]==="="?"":T[0]===">"===O?"max-":"min-")+L+":"+(T[0]!=="="&&T.length===1?F.replace(HC,(k,P,z)=>Number(P)+U*(T===">"?1:-1)+z):F)+(A?") and ("+(A[0]===">"?"min-":"max-")+L+":"+(A.length===1?D.replace(HC,(k,P,z)=>Number(P)+U*(A===">"?-1:1)+z):D):"")+")"})),x){const S=w?h.concat(d):[...h],C=w?[...c]:q_e(c,d.split(X_e));a!==void 0&&i(rz(...a)),a=void 0,l(f,C,S)}else a===void 0&&(a=[[],c,h]),d=w||d.charCodeAt(0)!==36?d:`--${xu(r.prefix)}${d.slice(1).replace(/\$/g,"-")}`,f=x?f:typeof f=="number"?f&&m in Z_e?String(f)+"px":String(f):rG(G_e(m,f??""),r.prefix,r.themeMap[m]),a[0].push(`${w?`${d} `:`${WM(d)}:`}${f}`)}}var y,g};p(u),a!==void 0&&i(rz(...a)),a=void 0};l(n,e,t)},rz=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,Z_e={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},iz=n=>String.fromCharCode(n+(n>25?39:97)),od=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=iz(t%52)+r;return iz(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),Xg=["themed","global","styled","onevar","resonevar","allvar","inline"],J_e=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},K_e=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(a,o)=>{const{cssText:s}=a;let l="";if(s.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!a.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===a)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${s}`;return a.cssRules.length?`${l}${s}`:""}return s}).join("")},r=()=>{if(e){const{rules:s,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in s)delete s[u]}const i=Object(n).styleSheets||[];for(const s of i)if(J_e(s)){for(let l=0,u=s.cssRules;u[l];++l){const c=Object(u[l]);if(c.type!==1)continue;const h=Object(u[l+1]);if(h.type!==4)continue;++l;const{cssText:d}=c;if(!d.startsWith("--sxs"))continue;const f=d.slice(14,-3).trim().split(/\s+/),p=Xg[f[0]];p&&(e||(e={sheet:s,reset:r,rules:{},toString:t}),e.rules[p]={group:h,index:l,cache:new Set(f)})}if(e)break}if(!e){const s=(l,u)=>({type:u,cssRules:[],insertRule(c,h){this.cssRules.splice(h,0,s(c,{import:3,undefined:1}[(c.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,c=>c.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:s("","text/css"),rules:{},reset:r,toString:t}}const{sheet:a,rules:o}=e;for(let s=Xg.length-1;s>=0;--s){const l=Xg[s];if(!o[l]){const u=Xg[s+1],c=o[u]?o[u].index:a.cssRules.length;a.insertRule("@media{}",c),a.insertRule(`--sxs{--sxs:${s}}`,c),o[l]={group:a.cssRules[c+1],index:c,cache:new Set([s])}}Q_e(o[l])}};return r(),e},Q_e=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},vg=Symbol(),e2e=_m(),az=(n,e)=>e2e(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[ad]){r.type==null&&(r.type=i[ad].type);for(const a of i[ad].composers)r.composers.add(a)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(t2e(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),n2e(n,r,e)}),t2e=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const a=`${xu(i.prefix)}c-${od(r)}`,o=[],s=[],l=Object.create(null),u=[];for(const d in t)l[d]=String(t[d]);if(typeof n=="object"&&n)for(const d in n){c=l,h=d,V_e.call(c,h)||(l[d]="undefined");const f=n[d];for(const p in f){const v={[d]:String(p)};String(p)==="undefined"&&u.push(d);const y=f[p],g=[v,y,!tz(y)];o.push(g)}}var c,h;if(typeof e=="object"&&e)for(const d of e){let{css:f,...p}=d;f=typeof f=="object"&&f||{};for(const y in p)p[y]=String(p[y]);const v=[p,f,!tz(f)];s.push(v)}return[a,r,o,s,l,u]},n2e=(n,e,t)=>{const[r,i,a,o]=r2e(e.composers),s=typeof e.type=="function"||e.type.$$typeof?(h=>{function d(){for(let f=0;f<d[vg].length;f++){const[p,v]=d[vg][f];h.rules[p].apply(v)}return d[vg]=[],null}return d[vg]=[],d.rules={},Xg.forEach(f=>d.rules[f]={apply:p=>d[vg].push([f,p])}),d})(t):null,l=(s||t).rules,u=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=h=>{h=typeof h=="object"&&h||i2e;const{css:d,...f}=h,p={};for(const g in a)if(delete f[g],g in h){let w=h[g];typeof w=="object"&&w?p[g]={"@initial":a[g],...w}:(w=String(w),p[g]=w!=="undefined"||o.has(g)?w:a[g])}else p[g]=a[g];const v=new Set([...i]);for(const[g,w,b,m]of e.composers){t.rules.styled.cache.has(g)||(t.rules.styled.cache.add(g),sp(w,[`.${g}`],[],n,C=>{l.styled.apply(C)}));const x=oz(b,p,n.media),S=oz(m,p,n.media,!0);for(const C of x)if(C!==void 0)for(const[T,M,A]of C){const D=`${g}-${od(M)}-${T}`;v.add(D);const O=(A?t.rules.resonevar:t.rules.onevar).cache,U=A?l.resonevar:l.onevar;O.has(D)||(O.add(D),sp(M,[`.${D}`],[],n,L=>{U.apply(L)}))}for(const C of S)if(C!==void 0)for(const[T,M]of C){const A=`${g}-${od(M)}-${T}`;v.add(A),t.rules.allvar.cache.has(A)||(t.rules.allvar.cache.add(A),sp(M,[`.${A}`],[],n,D=>{l.allvar.apply(D)}))}}if(typeof d=="object"&&d){const g=`${r}-i${od(d)}-css`;v.add(g),t.rules.inline.cache.has(g)||(t.rules.inline.cache.add(g),sp(d,[`.${g}`],[],n,w=>{l.inline.apply(w)}))}for(const g of String(h.className||"").trim().split(/\s+/))g&&v.add(g);const y=f.className=[...v].join(" ");return{type:e.type,className:y,selector:u,props:f,toString:()=>y,deferredInjector:s}};return TN(c,{className:r,selector:u,[ad]:e,toString:()=>(t.rules.styled.cache.has(r)||c(),r)})},r2e=n=>{let e="";const t=[],r={},i=[];for(const[a,,,,o,s]of n){e===""&&(e=a),t.push(a),i.push(...s);for(const l in o){const u=o[l];(r[l]===void 0||u!=="undefined"||s.includes(u))&&(r[l]=u)}}return[e,t,r,new Set(i)]},oz=(n,e,t,r)=>{const i=[];e:for(let[a,o,s]of n){if(s)continue;let l,u=0,c=!1;for(l in a){const h=a[l];let d=e[l];if(d!==h){if(typeof d!="object"||!d)continue e;{let f,p,v=0;for(const y in d){if(h===String(d[y])){if(y!=="@initial"){const g=y.slice(1);(p=p||[]).push(g in t?t[g]:y.replace(/^@media ?/,"")),c=!0}u+=v,f=!0}++v}if(p&&p.length&&(o={["@media "+p.join(", ")]:o}),!f)continue e}}}(i[u]=i[u]||[]).push([r?"cv":`${l}-${a[l]}`,o,c])}return i},i2e={},a2e=_m(),o2e=(n,e)=>a2e(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let a=od(i);if(!e.rules.global.cache.has(a)){if(e.rules.global.cache.add(a),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let s of[].concat(i["@import"]))s=s.includes('"')||s.includes("'")?s:`"${s}"`,e.sheet.insertRule(`@import ${s};`,o++);delete i["@import"]}sp(i,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return TN(r,{toString:r})}),s2e=_m(),l2e=(n,e)=>s2e(n,()=>t=>{const r=`${xu(n.prefix)}k-${od(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const a=[];sp(t,[],[],n,s=>a.push(s));const o=`@keyframes ${r}{${a.join("")}}`;e.rules.global.apply(o)}return r};return TN(i,{get name(){return i()},toString:i})}),u2e=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+xu(this.prefix)+xu(this.scale)+this.token}toString(){return this.computedValue}},c2e=_m(),h2e=(n,e)=>c2e(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${xu(n.prefix)}t-${od(r)}`}`,a={},o=[];for(const l in r){a[l]={};for(const u in r[l]){const c=`--${xu(n.prefix)}${l}-${u}`,h=rG(String(r[l][u]),n.prefix,l);a[l][u]=new u2e(u,h,l,n.prefix),o.push(`${c}:${h}`)}}const s=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...a,get className(){return s()},selector:i,toString:s}}),d2e=_m(),f2e=_m(),p2e=n=>{const e=(t=>{let r=!1;const i=d2e(t,a=>{r=!0;const o="prefix"in(a=typeof a=="object"&&a||{})?String(a.prefix):"",s=typeof a.media=="object"&&a.media||{},l=typeof a.root=="object"?a.root||null:globalThis.document||null,u=typeof a.theme=="object"&&a.theme||{},c={prefix:o,media:s,theme:u,themeMap:typeof a.themeMap=="object"&&a.themeMap||{...j_e},utils:typeof a.utils=="object"&&a.utils||{}},h=K_e(l),d={css:az(c,h),globalCss:o2e(c,h),keyframes:l2e(c,h),createTheme:h2e(c,h),reset(){h.reset(),d.theme.toString()},theme:{},sheet:h,config:c,prefix:o,getCssText:h.toString,toString:h.toString};return String(d.theme=d.createTheme(u)),d});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>f2e(t,()=>{const i=az(t,r);return(...a)=>{const o=i(...a),s=o[ad].type,l=Te.forwardRef((u,c)=>{const h=u&&u.as||s,{props:d,deferredInjector:f}=o(u);return delete d.as,d.ref=c,f?Te.createElement(Te.Fragment,null,Te.createElement(h,d),Te.createElement(f,null)):Te.createElement(h,d)});return l.className=o.className,l.displayName=`Styled.${s.displayName||s.name||s}`,l.selector=o.selector,l.toString=()=>o.selector,l[ad]=o[ad],l}}))(e),e};function m2e(n,e,t){return Math.max(e,Math.min(n,t))}const Ki={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function sz(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function lz(n,e,t,r=.15){return r===0?m2e(n,e,t):n<e?-sz(e-n,t-e,r)+e:n>t?+sz(n-t,t-e,r)+t:n}function g2e(n,[e,t],[r,i]){const[[a,o],[s,l]]=n;return[lz(e,a,o,r),lz(t,s,l,i)]}function v2e(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function y2e(n){var e=v2e(n,"string");return typeof e=="symbol"?e:String(e)}function za(n,e,t){return e=y2e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uz(Object(t),!0).forEach(function(r){za(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const iG={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function cz(n){return n?n[0].toUpperCase()+n.slice(1):""}const b2e=["enter","leave"];function x2e(n=!1,e){return n&&!b2e.includes(e)}function w2e(n,e="",t=!1){const r=iG[n],i=r&&r[e]||e;return"on"+cz(n)+cz(i)+(x2e(t,i)?"Capture":"")}const S2e=["gotpointercapture","lostpointercapture"];function E2e(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=S2e.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function _2e(n,e=""){const t=iG[n],r=t&&t[e]||e;return n+r}function GE(n){return"touches"in n}function aG(n){return GE(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function C2e(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function A2e(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function oG(n){return GE(n)?A2e(n)[0]:n}function T2e(n){return C2e(n).map(e=>e.identifier)}function VC(n){const e=oG(n);return GE(n)?e.identifier:e.pointerId}function hz(n){const e=oG(n);return[e.clientX,e.clientY]}function M2e(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:a}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:a})}return e}function bS(n,...e){return typeof n=="function"?n(...e):n}function D2e(){}function k2e(...n){return n.length===0?D2e:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function dz(n,e){return Object.assign({},e,n||{})}const N2e=32;class O2e{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?bS(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let a=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,M2e(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const S=t._delta.map(Math.abs);Ki.addTo(t._distance,S)}this.axisIntent&&this.axisIntent(e);const[o,s]=t._movement,[l,u]=r.threshold,{_step:c,values:h}=t;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&h[0]),c[1]===!1&&(c[1]=Math.abs(s)>=u&&h[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(s)>=u&&Math.sign(s)*u)),t.intentional=c[0]!==!1||c[1]!==!1,!t.intentional)return;const d=[0,0];if(r.hasCustomTransform){const[S,C]=h;d[0]=c[0]!==!1?S-c[0]:0,d[1]=c[1]!==!1?C-c[1]:0}else d[0]=c[0]!==!1?o-c[0]:0,d[1]=c[1]!==!1?s-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(d);const f=t.offset,p=t._active&&!t._blocked||t.active;p&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=bS(r.bounds,t)),this.setup&&this.setup()),t.movement=d,this.computeOffset()));const[v,y]=t.offset,[[g,w],[b,m]]=t._bounds;t.overflow=[v<g?-1:v>w?1:0,y<b?-1:y>m?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const x=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=g2e(t._bounds,t.offset,x),t.delta=Ki.sub(t.offset,f),this.computeMovement(),p&&(!t.last||a>N2e)){t.delta=Ki.sub(t.offset,f);const S=t.delta.map(Math.abs);Ki.addTo(t.distance,S),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[S[0]/a,S[1]/a],t.timeDelta=a)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(xr(xr(xr({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function P2e([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class R2e extends O2e{constructor(...e){super(...e),za(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ki.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Ki.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[aG(e)]:r.axisThreshold;t.axis=P2e(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const I2e=n=>n,fz=.15,sG={enabled(n=!0){return n},eventOptions(n,e,t){return xr(xr({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[fz,fz];case!1:return[0,0];default:return Ki.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Ki.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||I2e},threshold(n){return Ki.toVector(n,0)}},L2e=0,ry=xr(xr({},sG),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=L2e){return n},bounds(n={}){if(typeof n=="function")return a=>ry.bounds(n(a));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),pz={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class F2e extends R2e{constructor(...e){super(...e),za(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=ry.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=VC(e),r._pointerActive=!0,this.computeValues(hz(e)),this.computeInitial(),t.preventScrollAxis&&aG(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=VC(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const a=hz(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Ki.sub(a,t._values),this.computeValues(a)),Ki.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=VC(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,o]=t._distance;if(t.tap=a<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[s,l]=t._delta,[u,c]=t._movement,[h,d]=r.swipe.velocity,[f,p]=r.swipe.distance,v=r.swipe.duration;if(t.elapsedTime<v){const y=Math.abs(s/t.timeDelta),g=Math.abs(l/t.timeDelta);y>h&&Math.abs(u)>f&&(t.swipe[0]=Math.sign(s)),g>d&&Math.abs(c)>p&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,B2e(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=pz[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,Ki.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in pz&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function B2e(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const iy=typeof window<"u"&&window.document&&window.document.createElement;function lG(){return iy&&"ontouchstart"in window}function z2e(){return lG()||iy&&window.navigator.maxTouchPoints>1}function U2e(){return iy&&"onpointerdown"in window}function j2e(){return iy&&"exitPointerLock"in window.document}function H2e(){try{return"constructor"in GestureEvent}catch{return!1}}const jo={isBrowser:iy,gesture:H2e(),touch:lG(),touchscreen:z2e(),pointer:U2e(),pointerLock:j2e()},V2e=250,W2e=180,q2e=.5,G2e=50,$2e=250,X2e=10,mz={mouse:0,touch:0,pen:8},Y2e=xr(xr({},ry),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&jo.pointerLock,jo.touch&&t?"touch":this.pointerLock?"mouse":jo.pointer&&!i?"pointer":jo.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?V2e:void 0,!(!jo.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const a=Ki.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,a},swipe({velocity:n=q2e,distance:e=G2e,duration:t=$2e}={}){return{velocity:this.transform(Ki.toVector(n)),distance:this.transform(Ki.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return W2e;case!1:return 0;default:return n}},axisThreshold(n){return n?xr(xr({},mz),n):mz},keyboardDisplacement(n=X2e){return n}});xr(xr({},sG),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!jo.touch&&jo.gesture)return"gesture";if(jo.touch&&r)return"touch";if(jo.touchscreen){if(jo.pointer)return"pointer";if(jo.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const s=dz(bS(t,o),{min:-1/0,max:1/0});return[s.min,s.max]},a=o=>{const s=dz(bS(r,o),{min:-1/0,max:1/0});return[s.min,s.max]};return typeof t!="function"&&typeof r!="function"?[i(),a()]:o=>[i(o),a(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Ki.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});xr(xr({},ry),{},{mouseOnly:(n=!0)=>n});xr(xr({},ry),{},{mouseOnly:(n=!0)=>n});const uG=new Map,qM=new Map;function Z2e(n){uG.set(n.key,n.engine),qM.set(n.key,n.resolver)}const J2e={key:"drag",engine:F2e,resolver:Y2e};function K2e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Q2e(n,e){if(n==null)return{};var t=K2e(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const eCe={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=jo.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},tCe=["target","eventOptions","window","enabled","transform"];function Yx(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=Yx(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function nCe(n,e,t={}){const r=n,{target:i,eventOptions:a,window:o,enabled:s,transform:l}=r,u=Q2e(r,tCe);if(t.shared=Yx({target:i,eventOptions:a,window:o,enabled:s,transform:l},eCe),e){const c=qM.get(e);t[e]=Yx(xr({shared:t.shared},u),c)}else for(const c in u){const h=qM.get(c);h&&(t[c]=Yx(xr({shared:t.shared},u[c]),h))}return t}class cG{constructor(e,t){za(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,a){const o=this._listeners,s=_2e(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=xr(xr({},l),a);e.addEventListener(s,i,u);const c=()=>{e.removeEventListener(s,i,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class rCe{constructor(){za(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class iCe{constructor(e){za(this,"gestures",new Set),za(this,"_targetEventStore",new cG(this)),za(this,"gestureEventStores",{}),za(this,"gestureTimeoutStores",{}),za(this,"handlers",{}),za(this,"config",{}),za(this,"pointerIds",new Set),za(this,"touchIds",new Set),za(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),aCe(this,e)}setEventIds(e){if(GE(e))return this.touchIds=new Set(T2e(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=nCe(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const s=this.config[o],l=gz(r,s.eventOptions,!!i);if(s.enabled){const u=uG.get(o);new u(this,e,o).bind(l)}}const a=gz(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)a(o,"",s=>this.nativeHandlers[o](xr(xr({},this.state.shared),{},{event:s,args:e})),void 0,!0)}for(const a in r)r[a]=k2e(...r[a]);if(!i)return r;for(const a in r){const{device:o,capture:s,passive:l}=E2e(a);this._targetEventStore.add(i,o,"",r[a],{capture:s,passive:l})}}}}function df(n,e){n.gestures.add(e),n.gestureEventStores[e]=new cG(n,e),n.gestureTimeoutStores[e]=new rCe}function aCe(n,e){e.drag&&df(n,"drag"),e.wheel&&df(n,"wheel"),e.scroll&&df(n,"scroll"),e.move&&df(n,"move"),e.pinch&&df(n,"pinch"),e.hover&&df(n,"hover")}const gz=(n,e,t)=>(r,i,a,o={},s=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:e.capture,h=(u=o.passive)!==null&&u!==void 0?u:e.passive;let d=s?r:w2e(r,i,c);t&&h&&(d+="Passive"),n[d]=n[d]||[],n[d].push(a)};function oCe(n,e={},t,r){const i=Te.useMemo(()=>new iCe(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),Te.useEffect(i.effect.bind(i)),Te.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function sCe(n,e){return Z2e(J2e),oCe({drag:n},e||{},"drag")}function Zl(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function hG(n,e=[]){let t=[];function r(a,o){const s=j.createContext(o),l=t.length;t=[...t,o];function u(h){const{scope:d,children:f,...p}=h,v=(d==null?void 0:d[n][l])||s,y=j.useMemo(()=>p,Object.values(p));return j.createElement(v.Provider,{value:y},f)}function c(h,d){const f=(d==null?void 0:d[n][l])||s,p=j.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,c]}const i=()=>{const a=t.map(o=>j.createContext(o));return function(o){const s=(o==null?void 0:o[n])||a;return j.useMemo(()=>({[`__scope${n}`]:{...o,[n]:s}}),[o,s])}};return i.scopeName=n,[r,lCe(i,...e)]}function lCe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(i){const a=r.reduce((o,{useScope:s,scopeName:l})=>{const u=s(i)[`__scope${l}`];return{...o,...u}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function Cm(n){const e=j.useRef(n);return j.useEffect(()=>{e.current=n}),j.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function uCe(n,e=globalThis==null?void 0:globalThis.document){const t=Cm(n);j.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const GM="dismissableLayer.update",cCe="dismissableLayer.pointerDownOutside",hCe="dismissableLayer.focusOutside";let vz;const dCe=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fCe=j.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:s,onDismiss:l,...u}=n,c=j.useContext(dCe),[h,d]=j.useState(null),f=(t=h==null?void 0:h.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,p]=j.useState({}),v=Em(e,T=>d(T)),y=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(g),b=h?y.indexOf(h):-1,m=c.layersWithOutsidePointerEventsDisabled.size>0,x=b>=w,S=pCe(T=>{const M=T.target,A=[...c.branches].some(D=>D.contains(M));!x||A||(a==null||a(T),s==null||s(T),T.defaultPrevented||l==null||l())},f),C=mCe(T=>{const M=T.target;[...c.branches].some(A=>A.contains(M))||(o==null||o(T),s==null||s(T),T.defaultPrevented||l==null||l())},f);return uCe(T=>{b===c.layers.size-1&&(i==null||i(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},f),j.useEffect(()=>{if(h)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(vz=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(h)),c.layers.add(h),yz(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=vz)}},[h,f,r,c]),j.useEffect(()=>()=>{h&&(c.layers.delete(h),c.layersWithOutsidePointerEventsDisabled.delete(h),yz())},[h,c]),j.useEffect(()=>{const T=()=>p({});return document.addEventListener(GM,T),()=>document.removeEventListener(GM,T)},[]),j.createElement(zd.div,lt({},u,{ref:v,style:{pointerEvents:m?x?"auto":"none":void 0,...n.style},onFocusCapture:Zl(n.onFocusCapture,C.onFocusCapture),onBlurCapture:Zl(n.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Zl(n.onPointerDownCapture,S.onPointerDownCapture)}))});function pCe(n,e=globalThis==null?void 0:globalThis.document){const t=Cm(n),r=j.useRef(!1),i=j.useRef(()=>{});return j.useEffect(()=>{const a=s=>{if(s.target&&!r.current){let l=function(){dG(cCe,t,u,{discrete:!0})};const u={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function mCe(n,e=globalThis==null?void 0:globalThis.document){const t=Cm(n),r=j.useRef(!1);return j.useEffect(()=>{const i=a=>{a.target&&!r.current&&dG(hCe,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function yz(){const n=new CustomEvent(GM);document.dispatchEvent(n)}function dG(n,e,t,{discrete:r}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?R_e(i,a):i.dispatchEvent(a)}const Yp=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},gCe=xw.useId||(()=>{});let vCe=0;function yCe(n){const[e,t]=j.useState(gCe());return Yp(()=>{t(r=>r??String(vCe++))},[n]),e?`radix-${e}`:""}const bCe=["top","right","bottom","left"],ol=Math.min,ho=Math.max,xS=Math.round,sb=Math.floor,Vc=n=>({x:n,y:n}),xCe={left:"right",right:"left",bottom:"top",top:"bottom"},wCe={start:"end",end:"start"};function $M(n,e,t){return ho(n,ol(e,t))}function wu(n,e){return typeof n=="function"?n(e):n}function Su(n){return n.split("-")[0]}function Am(n){return n.split("-")[1]}function MN(n){return n==="x"?"y":"x"}function DN(n){return n==="y"?"height":"width"}function Tm(n){return["top","bottom"].includes(Su(n))?"y":"x"}function kN(n){return MN(Tm(n))}function SCe(n,e,t){t===void 0&&(t=!1);const r=Am(n),i=kN(n),a=DN(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=wS(o)),[o,wS(o)]}function ECe(n){const e=wS(n);return[XM(n),e,XM(e)]}function XM(n){return n.replace(/start|end/g,e=>wCe[e])}function _Ce(n,e,t){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?a:o;default:return[]}}function CCe(n,e,t,r){const i=Am(n);let a=_Ce(Su(n),t==="start",r);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(XM)))),a}function wS(n){return n.replace(/left|right|bottom|top/g,e=>xCe[e])}function ACe(n){return{top:0,right:0,bottom:0,left:0,...n}}function fG(n){return typeof n!="number"?ACe(n):{top:n,right:n,bottom:n,left:n}}function SS(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function bz(n,e,t){let{reference:r,floating:i}=n;const a=Tm(e),o=kN(e),s=DN(o),l=Su(e),u=a==="y",c=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,d=r[s]/2-i[s]/2;let f;switch(l){case"top":f={x:c,y:r.y-i.height};break;case"bottom":f={x:c,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-i.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Am(e)){case"start":f[o]-=d*(t&&u?-1:1);break;case"end":f[o]+=d*(t&&u?-1:1);break}return f}const TCe=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=t,s=a.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:c,y:h}=bz(u,r,l),d=r,f={},p=0;for(let v=0;v<s.length;v++){const{name:y,fn:g}=s[v],{x:w,y:b,data:m,reset:x}=await g({x:c,y:h,initialPlacement:r,placement:d,strategy:i,middlewareData:f,rects:u,platform:o,elements:{reference:n,floating:e}});c=w??c,h=b??h,f={...f,[y]:{...f[y],...m}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(u=x.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):x.rects),{x:c,y:h}=bz(u,d,l)),v=-1)}return{x:c,y:h,placement:d,strategy:i,middlewareData:f}};async function Q0(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:o,elements:s,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=wu(e,n),p=fG(f),v=s[d?h==="floating"?"reference":"floating":h],y=SS(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(v)))==null||t?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),g=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),b=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},m=SS(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:g,offsetParent:w,strategy:l}):g);return{top:(y.top-m.top+p.top)/b.y,bottom:(m.bottom-y.bottom+p.bottom)/b.y,left:(y.left-m.left+p.left)/b.x,right:(m.right-y.right+p.right)/b.x}}const MCe=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:a,platform:o,elements:s,middlewareData:l}=e,{element:u,padding:c=0}=wu(n,e)||{};if(u==null)return{};const h=fG(c),d={x:t,y:r},f=kN(i),p=DN(f),v=await o.getDimensions(u),y=f==="y",g=y?"top":"left",w=y?"bottom":"right",b=y?"clientHeight":"clientWidth",m=a.reference[p]+a.reference[f]-d[f]-a.floating[p],x=d[f]-a.reference[f],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=S?S[b]:0;(!C||!await(o.isElement==null?void 0:o.isElement(S)))&&(C=s.floating[b]||a.floating[p]);const T=m/2-x/2,M=C/2-v[p]/2-1,A=ol(h[g],M),D=ol(h[w],M),O=A,U=C-v[p]-D,L=C/2-v[p]/2+T,F=$M(O,L,U),k=!l.arrow&&Am(i)!=null&&L!==F&&a.reference[p]/2-(L<O?A:D)-v[p]/2<0,P=k?L<O?L-O:L-U:0;return{[f]:d[f]+P,data:{[f]:F,centerOffset:L-F-P,...k&&{alignmentOffset:P}},reset:k}}}),DCe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:s,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:v=!0,...y}=wu(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const g=Su(i),w=Su(s)===s,b=await(l.isRTL==null?void 0:l.isRTL(u.floating)),m=d||(w||!v?[wS(s)]:ECe(s));!d&&p!=="none"&&m.push(...CCe(s,v,p,b));const x=[s,...m],S=await Q0(e,y),C=[];let T=((r=a.flip)==null?void 0:r.overflows)||[];if(c&&C.push(S[g]),h){const O=SCe(i,o,b);C.push(S[O[0]],S[O[1]])}if(T=[...T,{placement:i,overflows:C}],!C.every(O=>O<=0)){var M,A;const O=(((M=a.flip)==null?void 0:M.index)||0)+1,U=x[O];if(U)return{data:{index:O,overflows:T},reset:{placement:U}};let L=(A=T.filter(F=>F.overflows[0]<=0).sort((F,k)=>F.overflows[1]-k.overflows[1])[0])==null?void 0:A.placement;if(!L)switch(f){case"bestFit":{var D;const F=(D=T.map(k=>[k.placement,k.overflows.filter(P=>P>0).reduce((P,z)=>P+z,0)]).sort((k,P)=>k[1]-P[1])[0])==null?void 0:D[0];F&&(L=F);break}case"initialPlacement":L=s;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function xz(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function wz(n){return bCe.some(e=>n[e]>=0)}const kCe=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=wu(n,e);switch(r){case"referenceHidden":{const a=await Q0(e,{...i,elementContext:"reference"}),o=xz(a,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:wz(o)}}}case"escaped":{const a=await Q0(e,{...i,altBoundary:!0}),o=xz(a,t.floating);return{data:{escapedOffsets:o,escaped:wz(o)}}}default:return{}}}}};async function NCe(n,e){const{placement:t,platform:r,elements:i}=n,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Su(t),s=Am(t),l=Tm(t)==="y",u=["left","top"].includes(o)?-1:1,c=a&&l?-1:1,h=wu(e,n);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return s&&typeof p=="number"&&(f=s==="end"?p*-1:p),l?{x:f*c,y:d*u}:{x:d*u,y:f*c}}const OCe=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:a,placement:o,middlewareData:s}=e,l=await NCe(e,n);return o===((t=s.offset)==null?void 0:t.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:o}}}}},PCe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:y=>{let{x:g,y:w}=y;return{x:g,y:w}}},...l}=wu(n,e),u={x:t,y:r},c=await Q0(e,l),h=Tm(Su(i)),d=MN(h);let f=u[d],p=u[h];if(a){const y=d==="y"?"top":"left",g=d==="y"?"bottom":"right",w=f+c[y],b=f-c[g];f=$M(w,f,b)}if(o){const y=h==="y"?"top":"left",g=h==="y"?"bottom":"right",w=p+c[y],b=p-c[g];p=$M(w,p,b)}const v=s.fn({...e,[d]:f,[h]:p});return{...v,data:{x:v.x-t,y:v.y-r}}}}},RCe=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:a,middlewareData:o}=e,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=wu(n,e),c={x:t,y:r},h=Tm(i),d=MN(h);let f=c[d],p=c[h];const v=wu(s,e),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const b=d==="y"?"height":"width",m=a.reference[d]-a.floating[b]+y.mainAxis,x=a.reference[d]+a.reference[b]-y.mainAxis;f<m?f=m:f>x&&(f=x)}if(u){var g,w;const b=d==="y"?"width":"height",m=["top","left"].includes(Su(i)),x=a.reference[h]-a.floating[b]+(m&&((g=o.offset)==null?void 0:g[h])||0)+(m?0:y.crossAxis),S=a.reference[h]+a.reference[b]+(m?0:((w=o.offset)==null?void 0:w[h])||0)-(m?y.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[d]:f,[h]:p}}}},ICe=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:a}=e,{apply:o=()=>{},...s}=wu(n,e),l=await Q0(e,s),u=Su(t),c=Am(t),h=Tm(t)==="y",{width:d,height:f}=r.floating;let p,v;u==="top"||u==="bottom"?(p=u,v=c===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(v=u,p=c==="end"?"top":"bottom");const y=f-l.top-l.bottom,g=d-l.left-l.right,w=ol(f-l[p],y),b=ol(d-l[v],g),m=!e.middlewareData.shift;let x=w,S=b;if(h?S=c||m?ol(b,g):g:x=c||m?ol(w,y):y,m&&!c){const T=ho(l.left,0),M=ho(l.right,0),A=ho(l.top,0),D=ho(l.bottom,0);h?S=d-2*(T!==0||M!==0?T+M:ho(l.left,l.right)):x=f-2*(A!==0||D!==0?A+D:ho(l.top,l.bottom))}await o({...e,availableWidth:S,availableHeight:x});const C=await i.getDimensions(a.floating);return d!==C.width||f!==C.height?{reset:{rects:!0}}:{}}}};function Mm(n){return pG(n)?(n.nodeName||"").toLowerCase():"#document"}function xo(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Ou(n){var e;return(e=(pG(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function pG(n){return n instanceof Node||n instanceof xo(n).Node}function Sl(n){return n instanceof Element||n instanceof xo(n).Element}function El(n){return n instanceof HTMLElement||n instanceof xo(n).HTMLElement}function Sz(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof xo(n).ShadowRoot}function ay(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Ts(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function LCe(n){return["table","td","th"].includes(Mm(n))}function NN(n){const e=ON(),t=Ts(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function FCe(n){let e=Wc(n);for(;El(e)&&!Zp(e);){if(NN(e))return e;e=Wc(e)}return null}function ON(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Zp(n){return["html","body","#document"].includes(Mm(n))}function Ts(n){return xo(n).getComputedStyle(n)}function $E(n){return Sl(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function Wc(n){if(Mm(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Sz(n)&&n.host||Ou(n);return Sz(e)?e.host:e}function mG(n){const e=Wc(n);return Zp(e)?n.ownerDocument?n.ownerDocument.body:n.body:El(e)&&ay(e)?e:mG(e)}function ev(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=mG(n),a=i===((r=n.ownerDocument)==null?void 0:r.body),o=xo(i);return a?e.concat(o,o.visualViewport||[],ay(i)?i:[],o.frameElement&&t?ev(o.frameElement):[]):e.concat(i,ev(i,[],t))}function gG(n){const e=Ts(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=El(n),a=i?n.offsetWidth:t,o=i?n.offsetHeight:r,s=xS(t)!==a||xS(r)!==o;return s&&(t=a,r=o),{width:t,height:r,$:s}}function PN(n){return Sl(n)?n:n.contextElement}function Ap(n){const e=PN(n);if(!El(e))return Vc(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:a}=gG(e);let o=(a?xS(t.width):t.width)/r,s=(a?xS(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const BCe=Vc(0);function vG(n){const e=xo(n);return!ON()||!e.visualViewport?BCe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function zCe(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==xo(n)?!1:e}function wd(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=PN(n);let o=Vc(1);e&&(r?Sl(r)&&(o=Ap(r)):o=Ap(n));const s=zCe(a,t,r)?vG(a):Vc(0);let l=(i.left+s.x)/o.x,u=(i.top+s.y)/o.y,c=i.width/o.x,h=i.height/o.y;if(a){const d=xo(a),f=r&&Sl(r)?xo(r):r;let p=d,v=p.frameElement;for(;v&&r&&f!==p;){const y=Ap(v),g=v.getBoundingClientRect(),w=Ts(v),b=g.left+(v.clientLeft+parseFloat(w.paddingLeft))*y.x,m=g.top+(v.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,u*=y.y,c*=y.x,h*=y.y,l+=b,u+=m,p=xo(v),v=p.frameElement}}return SS({width:c,height:h,x:l,y:u})}const UCe=[":popover-open",":modal"];function RN(n){return UCe.some(e=>{try{return n.matches(e)}catch{return!1}})}function jCe(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const a=i==="fixed",o=Ou(r),s=e?RN(e.floating):!1;if(r===o||s&&a)return t;let l={scrollLeft:0,scrollTop:0},u=Vc(1);const c=Vc(0),h=El(r);if((h||!h&&!a)&&((Mm(r)!=="body"||ay(o))&&(l=$E(r)),El(r))){const d=wd(r);u=Ap(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x,y:t.y*u.y-l.scrollTop*u.y+c.y}}function HCe(n){return Array.from(n.getClientRects())}function yG(n){return wd(Ou(n)).left+$E(n).scrollLeft}function VCe(n){const e=Ou(n),t=$E(n),r=n.ownerDocument.body,i=ho(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=ho(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+yG(n);const s=-t.scrollTop;return Ts(r).direction==="rtl"&&(o+=ho(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:s}}function WCe(n,e){const t=xo(n),r=Ou(n),i=t.visualViewport;let a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;const u=ON();(!u||u&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s,y:l}}function qCe(n,e){const t=wd(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,a=El(n)?Ap(n):Vc(1),o=n.clientWidth*a.x,s=n.clientHeight*a.y,l=i*a.x,u=r*a.y;return{width:o,height:s,x:l,y:u}}function Ez(n,e,t){let r;if(e==="viewport")r=WCe(n,t);else if(e==="document")r=VCe(Ou(n));else if(Sl(e))r=qCe(e,t);else{const i=vG(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return SS(r)}function bG(n,e){const t=Wc(n);return t===e||!Sl(t)||Zp(t)?!1:Ts(t).position==="fixed"||bG(t,e)}function GCe(n,e){const t=e.get(n);if(t)return t;let r=ev(n,[],!1).filter(s=>Sl(s)&&Mm(s)!=="body"),i=null;const a=Ts(n).position==="fixed";let o=a?Wc(n):n;for(;Sl(o)&&!Zp(o);){const s=Ts(o),l=NN(o);!l&&s.position==="fixed"&&(i=null),(a?!l&&!i:!l&&s.position==="static"&&i&&["absolute","fixed"].includes(i.position)||ay(o)&&!l&&bG(n,o))?r=r.filter(u=>u!==o):i=s,o=Wc(o)}return e.set(n,r),r}function $Ce(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const a=[...t==="clippingAncestors"?RN(e)?[]:GCe(e,this._c):[].concat(t),r],o=a[0],s=a.reduce((l,u)=>{const c=Ez(e,u,i);return l.top=ho(c.top,l.top),l.right=ol(c.right,l.right),l.bottom=ol(c.bottom,l.bottom),l.left=ho(c.left,l.left),l},Ez(e,o,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function XCe(n){const{width:e,height:t}=gG(n);return{width:e,height:t}}function YCe(n,e,t){const r=El(e),i=Ou(e),a=t==="fixed",o=wd(n,!0,a,e);let s={scrollLeft:0,scrollTop:0};const l=Vc(0);if(r||!r&&!a)if((Mm(e)!=="body"||ay(i))&&(s=$E(e)),r){const h=wd(e,!0,a,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=yG(i));const u=o.left+s.scrollLeft-l.x,c=o.top+s.scrollTop-l.y;return{x:u,y:c,width:o.width,height:o.height}}function WC(n){return Ts(n).position==="static"}function _z(n,e){return!El(n)||Ts(n).position==="fixed"?null:e?e(n):n.offsetParent}function xG(n,e){const t=xo(n);if(RN(n))return t;if(!El(n)){let i=Wc(n);for(;i&&!Zp(i);){if(Sl(i)&&!WC(i))return i;i=Wc(i)}return t}let r=_z(n,e);for(;r&&LCe(r)&&WC(r);)r=_z(r,e);return r&&Zp(r)&&WC(r)&&!NN(r)?t:r||FCe(n)||t}const ZCe=async function(n){const e=this.getOffsetParent||xG,t=this.getDimensions,r=await t(n.floating);return{reference:YCe(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function JCe(n){return Ts(n).direction==="rtl"}const KCe={convertOffsetParentRelativeRectToViewportRelativeRect:jCe,getDocumentElement:Ou,getClippingRect:$Ce,getOffsetParent:xG,getElementRects:ZCe,getClientRects:HCe,getDimensions:XCe,getScale:Ap,isElement:Sl,isRTL:JCe};function QCe(n,e){let t=null,r;const i=Ou(n);function a(){var s;clearTimeout(r),(s=t)==null||s.disconnect(),t=null}function o(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),a();const{left:u,top:c,width:h,height:d}=n.getBoundingClientRect();if(s||e(),!h||!d)return;const f=sb(c),p=sb(i.clientWidth-(u+h)),v=sb(i.clientHeight-(c+d)),y=sb(u),g={rootMargin:-f+"px "+-p+"px "+-v+"px "+-y+"px",threshold:ho(0,ol(1,l))||1};let w=!0;function b(m){const x=m[0].intersectionRatio;if(x!==l){if(!w)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{t=new IntersectionObserver(b,{...g,root:i.ownerDocument})}catch{t=new IntersectionObserver(b,g)}t.observe(n)}return o(!0),a}function wG(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=PN(n),c=i||a?[...u?ev(u):[],...ev(e)]:[];c.forEach(g=>{i&&g.addEventListener("scroll",t,{passive:!0}),a&&g.addEventListener("resize",t)});const h=u&&s?QCe(u,t):null;let d=-1,f=null;o&&(f=new ResizeObserver(g=>{let[w]=g;w&&w.target===u&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=f)==null||b.observe(e)})),t()}),u&&!l&&f.observe(u),f.observe(e));let p,v=l?wd(n):null;l&&y();function y(){const g=wd(n);v&&(g.x!==v.x||g.y!==v.y||g.width!==v.width||g.height!==v.height)&&t(),v=g,p=requestAnimationFrame(y)}return t(),()=>{var g;c.forEach(w=>{i&&w.removeEventListener("scroll",t),a&&w.removeEventListener("resize",t)}),h==null||h(),(g=f)==null||g.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const eAe=OCe,tAe=PCe,nAe=DCe,rAe=ICe,iAe=kCe,Cz=MCe,aAe=RCe,oAe=(n,e,t)=>{const r=new Map,i={platform:KCe,...t},a={...i.platform,_c:r};return TCe(n,e,{...i,platform:a})};var Zx=typeof document<"u"?j.useLayoutEffect:j.useEffect;function ES(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!ES(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const a=i[r];if(!(a==="_owner"&&n.$$typeof)&&!ES(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function SG(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Az(n,e){const t=SG(n);return Math.round(e*t)/t}function Tz(n){const e=j.useRef(n);return Zx(()=>{e.current=n}),e}function sAe(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:s=!0,whileElementsMounted:l,open:u}=n,[c,h]=j.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,f]=j.useState(r);ES(d,r)||f(r);const[p,v]=j.useState(null),[y,g]=j.useState(null),w=j.useCallback(P=>{P!==S.current&&(S.current=P,v(P))},[]),b=j.useCallback(P=>{P!==C.current&&(C.current=P,g(P))},[]),m=a||p,x=o||y,S=j.useRef(null),C=j.useRef(null),T=j.useRef(c),M=l!=null,A=Tz(l),D=Tz(i),O=j.useCallback(()=>{if(!S.current||!C.current)return;const P={placement:e,strategy:t,middleware:d};D.current&&(P.platform=D.current),oAe(S.current,C.current,P).then(z=>{const B={...z,isPositioned:!0};U.current&&!ES(T.current,B)&&(T.current=B,fm.flushSync(()=>{h(B)}))})},[d,e,t,D]);Zx(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[u]);const U=j.useRef(!1);Zx(()=>(U.current=!0,()=>{U.current=!1}),[]),Zx(()=>{if(m&&(S.current=m),x&&(C.current=x),m&&x){if(A.current)return A.current(m,x,O);O()}},[m,x,O,A,M]);const L=j.useMemo(()=>({reference:S,floating:C,setReference:w,setFloating:b}),[w,b]),F=j.useMemo(()=>({reference:m,floating:x}),[m,x]),k=j.useMemo(()=>{const P={position:t,left:0,top:0};if(!F.floating)return P;const z=Az(F.floating,c.x),B=Az(F.floating,c.y);return s?{...P,transform:"translate("+z+"px, "+B+"px)",...SG(F.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:z,top:B}},[t,s,F.floating,c.x,c.y]);return j.useMemo(()=>({...c,update:O,refs:L,elements:F,floatingStyles:k}),[c,O,L,F,k])}const lAe=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?Cz({element:r.current,padding:i}).fn(t):{}:r?Cz({element:r,padding:i}).fn(t):{}}}},uAe=(n,e)=>({...eAe(n),options:[n,e]}),cAe=(n,e)=>({...tAe(n),options:[n,e]}),hAe=(n,e)=>({...aAe(n),options:[n,e]}),dAe=(n,e)=>({...nAe(n),options:[n,e]}),fAe=(n,e)=>({...rAe(n),options:[n,e]}),pAe=(n,e)=>({...iAe(n),options:[n,e]}),mAe=(n,e)=>({...lAe(n),options:[n,e]}),gAe=j.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...a}=n;return j.createElement(zd.svg,lt({},a,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:j.createElement("polygon",{points:"0,0 30,0 15,10"}))}),vAe=gAe;function yAe(n){const[e,t]=j.useState(void 0);return Yp(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,s;if("borderBoxSize"in a){const l=a.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,s=u.blockSize}else o=n.offsetWidth,s=n.offsetHeight;t({width:o,height:s})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const EG="Popper",[_G,CG]=hG(EG),[bAe,AG]=_G(EG),xAe=n=>{const{__scopePopper:e,children:t}=n,[r,i]=j.useState(null);return j.createElement(bAe,{scope:e,anchor:r,onAnchorChange:i},t)},wAe="PopperAnchor",SAe=j.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,a=AG(wAe,t),o=j.useRef(null),s=Em(e,o);return j.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:j.createElement(zd.div,lt({},i,{ref:s}))}),TG="PopperContent",[EAe,_Ae]=_G(TG),CAe=j.forwardRef((n,e)=>{var t,r,i,a,o,s,l,u;const{__scopePopper:c,side:h="bottom",sideOffset:d=0,align:f="center",alignOffset:p=0,arrowPadding:v=0,avoidCollisions:y=!0,collisionBoundary:g=[],collisionPadding:w=0,sticky:b="partial",hideWhenDetached:m=!1,updatePositionStrategy:x="optimized",onPlaced:S,...C}=n,T=AG(TG,c),[M,A]=j.useState(null),D=Em(e,K=>A(K)),[O,U]=j.useState(null),L=yAe(O),F=(t=L==null?void 0:L.width)!==null&&t!==void 0?t:0,k=(r=L==null?void 0:L.height)!==null&&r!==void 0?r:0,P=h+(f!=="center"?"-"+f:""),z=typeof w=="number"?w:{top:0,right:0,bottom:0,left:0,...w},B=Array.isArray(g)?g:[g],X=B.length>0,J={padding:z,boundary:B.filter(DAe),altBoundary:X},{refs:Q,floatingStyles:Z,placement:re,isPositioned:fe,middlewareData:se}=sAe({strategy:"fixed",placement:P,whileElementsMounted:(...K)=>wG(...K,{animationFrame:x==="always"}),elements:{reference:T.anchor},middleware:[uAe({mainAxis:d+k,alignmentAxis:p}),y&&cAe({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?hAe():void 0,...J}),y&&dAe({...J}),fAe({...J,apply:({elements:K,rects:ie,availableWidth:_e,availableHeight:oe})=>{const{width:G,height:q}=ie.reference,ce=K.floating.style;ce.setProperty("--radix-popper-available-width",`${_e}px`),ce.setProperty("--radix-popper-available-height",`${oe}px`),ce.setProperty("--radix-popper-anchor-width",`${G}px`),ce.setProperty("--radix-popper-anchor-height",`${q}px`)}}),O&&mAe({element:O,padding:v}),kAe({arrowWidth:F,arrowHeight:k}),m&&pAe({strategy:"referenceHidden",...J})]}),[ye,De]=MG(re),pe=Cm(S);Yp(()=>{fe&&(pe==null||pe())},[fe,pe]);const Me=(i=se.arrow)===null||i===void 0?void 0:i.x,be=(a=se.arrow)===null||a===void 0?void 0:a.y,ne=((o=se.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Pe,ze]=j.useState();return Yp(()=>{M&&ze(window.getComputedStyle(M).zIndex)},[M]),j.createElement("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:fe?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[(s=se.transformOrigin)===null||s===void 0?void 0:s.x,(l=se.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},j.createElement(EAe,{scope:c,placedSide:ye,onArrowChange:U,arrowX:Me,arrowY:be,shouldHideArrow:ne},j.createElement(zd.div,lt({"data-side":ye,"data-align":De},C,{ref:D,style:{...C.style,animation:fe?void 0:"none",opacity:(u=se.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))}),AAe="PopperArrow",TAe={top:"bottom",right:"left",bottom:"top",left:"right"},MAe=j.forwardRef(function(n,e){const{__scopePopper:t,...r}=n,i=_Ae(AAe,t),a=TAe[i.placedSide];return j.createElement("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0}},j.createElement(vAe,lt({},r,{ref:e,style:{...r.style,display:"block"}})))});function DAe(n){return n!==null}const kAe=n=>({name:"transformOrigin",options:n,fn(e){var t,r,i,a,o;const{placement:s,rects:l,middlewareData:u}=e,c=((t=u.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,h=c?0:n.arrowWidth,d=c?0:n.arrowHeight,[f,p]=MG(s),v={start:"0%",center:"50%",end:"100%"}[p],y=((r=(i=u.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+h/2,g=((a=(o=u.arrow)===null||o===void 0?void 0:o.y)!==null&&a!==void 0?a:0)+d/2;let w="",b="";return f==="bottom"?(w=c?v:`${y}px`,b=`${-d}px`):f==="top"?(w=c?v:`${y}px`,b=`${l.floating.height+d}px`):f==="right"?(w=`${-d}px`,b=c?v:`${g}px`):f==="left"&&(w=`${l.floating.width+d}px`,b=c?v:`${g}px`),{data:{x:w,y:b}}}});function MG(n){const[e,t="center"]=n.split("-");return[e,t]}const NAe=xAe,OAe=SAe,PAe=CAe,RAe=MAe;function IAe(n,e){return j.useReducer((t,r)=>e[t][r]??t,n)}const DG=n=>{const{present:e,children:t}=n,r=LAe(e),i=typeof t=="function"?t({present:r.isPresent}):j.Children.only(t),a=Em(r.ref,i.ref);return typeof t=="function"||r.isPresent?j.cloneElement(i,{ref:a}):null};DG.displayName="Presence";function LAe(n){const[e,t]=j.useState(),r=j.useRef({}),i=j.useRef(n),a=j.useRef("none"),o=n?"mounted":"unmounted",[s,l]=IAe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const u=lb(r.current);a.current=s==="mounted"?u:"none"},[s]),Yp(()=>{const u=r.current,c=i.current;if(c!==n){const h=a.current,d=lb(u);n?l("MOUNT"):d==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&h!==d?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),Yp(()=>{if(e){const u=h=>{const d=lb(r.current).includes(h.animationName);h.target===e&&d&&fm.flushSync(()=>l("ANIMATION_END"))},c=h=>{h.target===e&&(a.current=lb(r.current))};return e.addEventListener("animationstart",c),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{e.removeEventListener("animationstart",c),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:j.useCallback(u=>{u&&(r.current=getComputedStyle(u)),t(u)},[])}}function lb(n){return(n==null?void 0:n.animationName)||"none"}function FAe({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=BAe({defaultProp:e,onChange:t}),a=n!==void 0,o=a?n:r,s=Cm(t),l=j.useCallback(u=>{if(a){const c=typeof u=="function"?u(n):u;c!==n&&s(c)}else i(u)},[a,n,i,s]);return[o,l]}function BAe({defaultProp:n,onChange:e}){const t=j.useState(n),[r]=t,i=j.useRef(r),a=Cm(e);return j.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),t}const zAe=j.forwardRef((n,e)=>j.createElement(zd.span,lt({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),UAe=zAe,[XE,n$e]=hG("Tooltip",[CG]),YE=CG(),jAe="TooltipProvider",YM="tooltip.open",[r$e,IN]=XE(jAe),LN="Tooltip",[HAe,ZE]=XE(LN),VAe=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:s}=n,l=IN(LN,n.__scopeTooltip),u=YE(e),[c,h]=j.useState(null),d=yCe(),f=j.useRef(0),p=o??l.disableHoverableContent,v=s??l.delayDuration,y=j.useRef(!1),[g=!1,w]=FAe({prop:r,defaultProp:i,onChange:C=>{C?(l.onOpen(),document.dispatchEvent(new CustomEvent(YM))):l.onClose(),a==null||a(C)}}),b=j.useMemo(()=>g?y.current?"delayed-open":"instant-open":"closed",[g]),m=j.useCallback(()=>{window.clearTimeout(f.current),y.current=!1,w(!0)},[w]),x=j.useCallback(()=>{window.clearTimeout(f.current),w(!1)},[w]),S=j.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{y.current=!0,w(!0)},v)},[v,w]);return j.useEffect(()=>()=>window.clearTimeout(f.current),[]),j.createElement(NAe,u,j.createElement(HAe,{scope:e,contentId:d,open:g,stateAttribute:b,trigger:c,onTriggerChange:h,onTriggerEnter:j.useCallback(()=>{l.isOpenDelayed?S():m()},[l.isOpenDelayed,S,m]),onTriggerLeave:j.useCallback(()=>{p?x():window.clearTimeout(f.current)},[x,p]),onOpen:m,onClose:x,disableHoverableContent:p},t))},Mz="TooltipTrigger",WAe=j.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=ZE(Mz,t),a=IN(Mz,t),o=YE(t),s=j.useRef(null),l=Em(e,s,i.onTriggerChange),u=j.useRef(!1),c=j.useRef(!1),h=j.useCallback(()=>u.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),j.createElement(OAe,lt({asChild:!0},o),j.createElement(zd.button,lt({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:Zl(n.onPointerMove,d=>{d.pointerType!=="touch"&&!c.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:Zl(n.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:Zl(n.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Zl(n.onFocus,()=>{u.current||i.onOpen()}),onBlur:Zl(n.onBlur,i.onClose),onClick:Zl(n.onClick,i.onClose)})))}),qAe="TooltipPortal",[i$e,GAe]=XE(qAe,{forceMount:void 0}),tv="TooltipContent",$Ae=j.forwardRef((n,e)=>{const t=GAe(tv,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...a}=n,o=ZE(tv,n.__scopeTooltip);return j.createElement(DG,{present:r||o.open},o.disableHoverableContent?j.createElement(kG,lt({side:i},a,{ref:e})):j.createElement(XAe,lt({side:i},a,{ref:e})))}),XAe=j.forwardRef((n,e)=>{const t=ZE(tv,n.__scopeTooltip),r=IN(tv,n.__scopeTooltip),i=j.useRef(null),a=Em(e,i),[o,s]=j.useState(null),{trigger:l,onClose:u}=t,c=i.current,{onPointerInTransitChange:h}=r,d=j.useCallback(()=>{s(null),h(!1)},[h]),f=j.useCallback((p,v)=>{const y=p.currentTarget,g={x:p.clientX,y:p.clientY},w=QAe(g,y.getBoundingClientRect()),b=eTe(g,w),m=tTe(v.getBoundingClientRect()),x=rTe([...b,...m]);s(x),h(!0)},[h]);return j.useEffect(()=>()=>d(),[d]),j.useEffect(()=>{if(l&&c){const p=y=>f(y,c),v=y=>f(y,l);return l.addEventListener("pointerleave",p),c.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",p),c.removeEventListener("pointerleave",v)}}},[l,c,f,d]),j.useEffect(()=>{if(o){const p=v=>{const y=v.target,g={x:v.clientX,y:v.clientY},w=(l==null?void 0:l.contains(y))||(c==null?void 0:c.contains(y)),b=!nTe(g,o);w?d():b&&(d(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,c,o,u,d]),j.createElement(kG,lt({},n,{ref:a}))}),[YAe,ZAe]=XE(LN,{isInside:!1}),kG=j.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...s}=n,l=ZE(tv,t),u=YE(t),{onClose:c}=l;return j.useEffect(()=>(document.addEventListener(YM,c),()=>document.removeEventListener(YM,c)),[c]),j.useEffect(()=>{if(l.trigger){const h=d=>{const f=d.target;f!=null&&f.contains(l.trigger)&&c()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,c]),j.createElement(fCe,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:c},j.createElement(PAe,lt({"data-state":l.stateAttribute},u,s,{ref:e,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),j.createElement(Kq,null,r),j.createElement(YAe,{scope:t,isInside:!0},j.createElement(UAe,{id:l.contentId,role:"tooltip"},i||r))))}),JAe="TooltipArrow",KAe=j.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=YE(t);return ZAe(JAe,t).isInside?null:j.createElement(RAe,lt({},i,r,{ref:e}))});function QAe(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,r,i,a)){case a:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function eTe(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function tTe(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function nTe(n,e){const{x:t,y:r}=n;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const s=e[a].x,l=e[a].y,u=e[o].x,c=e[o].y;l>r!=c>r&&t<(u-s)*(r-l)/(c-l)+s&&(i=!i)}return i}function rTe(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),iTe(e)}function iTe(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const aTe=VAe,oTe=WAe,sTe=$Ae,lTe=KAe;function uTe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function jn(n,e){if(n==null)return{};var t=uTe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let vr;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(vr||(vr={}));const cTe={[vr.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[vr.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[vr.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[vr.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[vr.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[vr.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[vr.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[vr.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[vr.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[vr.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[vr.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function NG(n,e,...t){const[r,...i]=cTe[e](...t);console[n]("LEVA: "+r,...i)}const Kl=NG.bind(null,"warn"),hTe=NG.bind(null,"log"),dTe=["value"],fTe=["schema"],pTe=["value"],OG=[],Sd={};function Dz(n){let{value:e}=n,t=jn(n,dTe);for(let r of OG){const i=r(e,t);if(i)return i}}function Pu(n,e){let{schema:t}=e,r=jn(e,fTe);if(n in Sd){Kl(vr.ALREADY_REGISTERED_TYPE,n);return}OG.push((i,a)=>t(i,a)&&n),Sd[n]=r}function qC(n,e,t,r){const{normalize:i}=Sd[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:a}=e,o=jn(e,pTe);return{value:a,settings:o}}function mTe(n,e,t,r,i,a){const{sanitize:o}=Sd[n];return o?o(e,t,r,i,a):e}function kz(n,e,t){const{format:r}=Sd[n];return r?r(e,t):e}function gTe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Nz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Wt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nz(Object(t),!0).forEach(function(r){gTe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Nz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const qc=(n,e,t)=>n>t?t:n<e?e:n,vTe=n=>{if(n===""||typeof n=="number")return n;try{const e=tc(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},yTe=Math.log(10);function Oz(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/yTe)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const _S=(n,e,t)=>t===e?0:(qc(n,e,t)-e)/(t-e),CS=(n,e,t)=>n*(t-e)+e,bTe=()=>"_"+Math.random().toString(36).substr(2,9),Pz=/\(([0-9+\-*/^ .]+)\)/,Rz=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,Iz=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,Lz=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,Fz=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,Bz=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function tc(n){if(isNaN(Number(n)))if(Pz.test(n)){const e=n.replace(Pz,(t,r)=>String(tc(r)));return tc(e)}else if(Rz.test(n)){const e=n.replace(Rz,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return tc(e)}else if(Iz.test(n)){const e=n.replace(Iz,(t,r,i)=>String(Number(r)*Number(i)));return tc(e)}else if(Lz.test(n)){const e=n.replace(Lz,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return tc(e)}else if(Fz.test(n)){const e=n.replace(Fz,(t,r,i)=>String(Number(r)+Number(i)));return tc(e)}else if(Bz.test(n)){const e=n.replace(Bz,(t,r,i)=>String(Number(r)-Number(i)));return tc(e)}else return Number(n);return Number(n)}function xTe(n,e){return e.reduce((t,r)=>(n&&n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}function wTe(n,e){const t=Wt({},n);return e.forEach(r=>r in n&&delete t[r]),t}function STe(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function PG(n){return Object.prototype.toString.call(n)==="[object Object]"}const ETe=n=>PG(n)&&Object.keys(n).length===0;let Xo;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(Xo||(Xo={}));let Ms;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Ms||(Ms={}));const _Te=["type","__customInput"],CTe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],ATe=["type"];function RG(n,e,t={},r){var i,a;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:Wt({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:x,__customInput:S}=n,C=jn(n,_Te);return RG(S,e,C,x)}const{render:o,label:s,optional:l,order:u=0,disabled:c,hint:h,onChange:d,onEditStart:f,onEditEnd:p,transient:v}=n,y=jn(n,CTe),g=Wt({render:o,key:e,label:s??e,hint:h,transient:v??!!d,onEditStart:f,onEditEnd:p,disabled:c,optional:l,order:u},t);let{type:w}=y,b=jn(y,ATe);if(w=r??w,w in Xo)return{type:w,input:b,options:g};let m;return r&&PG(b)&&"value"in b?m=b.value:m=ETe(b)?void 0:b,{type:w,input:m,options:Wt(Wt({},g),{},{onChange:d,optional:(i=g.optional)!==null&&i!==void 0?i:!1,disabled:(a=g.disabled)!==null&&a!==void 0?a:!1})}}function TTe(n,e,t,r){const i=RG(n,e),{type:a,input:o,options:s}=i;if(a)return a in Xo?i:{type:a,input:qC(a,o,t,r),options:s};let l=Dz(o);return l?{type:l,input:qC(l,o,t,r),options:s}:(l=Dz({value:o}),l?{type:l,input:qC(l,{value:o},t,r),options:s}:!1)}function zz(n,e,t,r,i){const{value:a,type:o,settings:s}=n;n.value=IG({type:o,value:a,settings:s},e,t,r),n.fromPanel=i}const MTe=function(n,e,t){this.type="LEVA_ERROR",this.message="LEVA: "+n,this.previousValue=e,this.error=t};function IG({type:n,value:e,settings:t},r,i,a){const o=n!=="SELECT"&&typeof r=="function"?r(e):r;let s;try{s=mTe(n,o,t,e,i,a)}catch(l){throw new MTe(`The value \`${r}\` did not result in a correct value.`,e,l)}return J0(s,e)?e:s}const LG=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,a=t&&!r,o=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),a&&o()}},FG=n=>n.shiftKey?5:n.altKey?1/5:1;function DTe(n,e){const t=console.error;console.error=()=>{},YH.render(n,e),console.error=t}const kTe=["value"],NTe=["min","max"],OTe=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},BG=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const a=qc(i,e,t);return r?a+r:a},PTe=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},zG=n=>{let{value:e}=n,t=jn(n,kTe);const{min:r=-1/0,max:i=1/0}=t,a=jn(t,NTe);let o=parseFloat(e);const s=typeof e=="string"?e.substring((""+o).length):void 0;o=qc(o,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const u=l?Oz(l)*10:Oz(o);l=l||u/10;const c=Math.round(qc(Math.log10(1/u),0,2));return{value:s?o+s:o,settings:Wt({initialValue:o,step:l,pad:c,min:r,max:i,suffix:s},a)}},UG=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var jG=Object.freeze({__proto__:null,schema:OTe,sanitize:BG,format:PTe,normalize:zG,sanitizeStep:UG});function _r(){return _r=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_r.apply(this,arguments)}const HG=j.createContext({});function aa(){return j.useContext(HG)}const FN=j.createContext(null),VG=j.createContext(null),WG=j.createContext(null);function Dm(){return j.useContext(VG)}function RTe(){return j.useContext(WG)}const qG=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function ub(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const yg={$inputStyle:()=>n=>ub(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>ub(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>ub(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>ub(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Ht,css:a$e,createTheme:ITe,globalCss:LTe,keyframes:o$e}=p2e({prefix:"leva",theme:qG(),utils:Wt(Wt({},yg),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":yg.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":yg.$focusStyle()(n)}),$hover:n=>({"&:hover":yg.$hoverStyle()(n)}),$active:n=>({"&:active":yg.$activeStyle()(n)})})}),FTe=LTe({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function BTe(n){const e=qG();if(!n)return{theme:e,className:""};Object.keys(n).forEach(r=>{Object.assign(e[r],n[r])});const t=ITe(e);return{theme:e,className:t.className}}function uu(n,e){const{theme:t}=j.useContext(FN);if(!(n in t)||!(e in t[n]))return Kl(vr.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const GG=Ht("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),$G=Ht("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${GG}`]:{paddingLeft:0}}),zTe=Ht($G,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),UTe=Ht("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),jTe=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],HTe=["onUpdate"];function BN(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:a,type:o,id:s,inputType:l="text",rows:u=0}=n,c=jn(n,jTe);const{id:h,emitOnEditStart:d,emitOnEditEnd:f,disabled:p}=aa(),v=s||h,y=j.useRef(null),g=u>0,w=g?"textarea":"input",b=j.useCallback(S=>C=>{const T=C.currentTarget.value;S(T)},[]);Te.useEffect(()=>{const S=y.current,C=b(T=>{r(T),f()});return S==null||S.addEventListener("blur",C),()=>S==null?void 0:S.removeEventListener("blur",C)},[b,r,f]);const m=j.useCallback(S=>{S.key==="Enter"&&b(r)(S)},[b,r]),x=Object.assign({as:w},g?{rows:u}:{},c);return Te.createElement(UTe,{textArea:g},e&&typeof e=="string"?Te.createElement($G,null,e):e,Te.createElement(GG,_r({levaType:o,ref:y,id:v,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:b(i),onFocus:()=>d(),onKeyPress:m,onKeyDown:a,disabled:p},x)))}function VTe(n){let{onUpdate:e}=n,t=jn(n,HTe);const r=j.useCallback(a=>e(vTe(a)),[e]),i=j.useCallback(a=>{const o=a.key==="ArrowUp"?1:a.key==="ArrowDown"?-1:0;if(o){a.preventDefault();const s=a.altKey?.1:a.shiftKey?10:1;e(l=>parseFloat(l)+o*s)}},[e]);return Te.createElement(BN,_r({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const AS=Ht("div",{}),ZM=Ht("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),WTe=Ht("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${ZM}::after`]:{opacity:.6},[`${AS}:hover > & + ${ZM}::after`]:{opacity:.6},[`${AS}:hover > & > svg`]:{opacity:1}}),XG=Ht("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${AS}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),YG=Ht("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${XG} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),ZG=Ht(YG,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),qTe=Ht("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),GTe=Ht("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),JM=Ht("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),$Te=Ht("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${JM}`]:{pointerEvents:"auto"}}}}}),JG=Ht("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),XTe=Ht("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),YTe=Ht(lTe,{fill:"$toolTipBackground"});function zN({children:n}){const{className:e}=j.useContext(FN);return Te.createElement(L_e,{className:e},n)}const ZTe=["align"];function JTe(){const{id:n,disable:e,disabled:t}=aa();return Te.createElement(Te.Fragment,null,Te.createElement(GTe,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),Te.createElement("label",{htmlFor:n+"__disable"}))}function KTe(n){const{id:e,optional:t,hint:r}=aa(),i=n.htmlFor||(e?{htmlFor:e}:null),a=!r&&typeof n.children=="string"?{title:n.children}:null;return Te.createElement(Te.Fragment,null,t&&Te.createElement(JTe,null),r!==void 0?Te.createElement(aTe,null,Te.createElement(oTe,{asChild:!0},Te.createElement(JM,_r({},i,n))),Te.createElement(sTe,{side:"top",sideOffset:2},Te.createElement(XTe,null,r,Te.createElement(YTe,null)))):Te.createElement(JM,_r({},i,a,n)))}function Rs(n){let{align:e}=n,t=jn(n,ZTe);const{value:r,label:i,key:a,disabled:o}=aa(),{hideCopyButton:s}=RTe(),l=!s&&a!==void 0,[u,c]=j.useState(!1),h=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[a]:r??""})),c(!0)}catch{Kl(vr.CLIPBOARD_ERROR,{[a]:r})}};return Te.createElement(qTe,{align:e,onPointerLeave:()=>c(!1)},Te.createElement(KTe,t),l&&!o&&Te.createElement("div",{title:`Click to copy ${typeof i=="string"?i:a} value`},u?Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Te.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),Te.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):Te.createElement("svg",{onClick:h,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Te.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),Te.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const QTe=["toggled"],eMe=Ht("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function UN(n){let{toggled:e}=n,t=jn(n,QTe);return Te.createElement(eMe,_r({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),Te.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const tMe=["input"];function os(n){let{input:e}=n,t=jn(n,tMe);return e?Te.createElement(ZG,t):Te.createElement(YG,t)}function KG({value:n,type:e,settings:t,setValue:r}){const[i,a]=j.useState(kz(e,n,t)),o=j.useRef(n),s=j.useRef(t);s.current=t;const l=j.useCallback(c=>a(kz(e,c,s.current)),[e]),u=j.useCallback(c=>{try{r(c)}catch(h){const{type:d,previousValue:f}=h;if(d!=="LEVA_ERROR")throw h;l(f)}},[l,r]);return j.useEffect(()=>{J0(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:i,onChange:a,onUpdate:u}}function oy(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=aa();return sCe(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const a=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),a},e)}function nMe(n){const e=j.useRef(null),t=j.useRef(null),r=j.useRef(!1);return j.useEffect(()=>{const i=LG(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),j.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function QG(){const n=j.useRef(null),e=j.useRef({x:0,y:0}),t=j.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const rMe=["__refCount"],GC=(n,e)=>{if(!n[e])return null;const t=n[e];return jn(t,rMe)};function iMe(n){const e=Dm(),[t,r]=j.useState(GC(e.getData(),n)),i=j.useCallback(u=>e.setValueAtPath(n,u,!0),[n,e]),a=j.useCallback(u=>e.setSettingsAtPath(n,u),[n,e]),o=j.useCallback(u=>e.disableInputAtPath(n,u),[n,e]),s=j.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=j.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return j.useEffect(()=>{r(GC(e.getData(),n));const u=e.useStore.subscribe(c=>GC(c.data,n),r,{equalityFn:WE});return()=>u()},[e,n]),[t,{set:i,setSettings:a,disable:o,storeId:e.storeId,emitOnEditStart:s,emitOnEditEnd:l}]}const aMe=Ht("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),e$=Ht("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),KM=Ht("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),t$=Ht("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),n$=Ht("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function oMe({value:n,min:e,max:t,onDrag:r,step:i,initialValue:a}){const o=j.useRef(null),s=j.useRef(null),l=j.useRef(0),u=uu("sizes","scrubberWidth"),c=oy(({event:d,first:f,xy:[p],movement:[v],memo:y})=>{if(f){const{width:w,left:b}=o.current.getBoundingClientRect();l.current=w-parseFloat(u),y=(d==null?void 0:d.target)===s.current?n:CS((p-b)/w,e,t)}const g=y+CS(v/l.current,0,t-e);return r(UG(g,{step:i,initialValue:a})),y}),h=_S(n,e,t);return Te.createElement(t$,_r({ref:o},c()),Te.createElement(e$,null,Te.createElement(n$,{style:{left:0,right:`${(1-h)*100}%`}})),Te.createElement(KM,{ref:s,style:{left:`calc(${h} * (100% - ${u}))`}}))}const sMe=Te.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,a]=j.useState(!1),o=oy(({active:s,delta:[l],event:u,memo:c=0})=>(a(s),c+=l/2,Math.abs(c)>=1&&(e(h=>parseFloat(h)+Math.floor(c)*t*FG(u)),c=0),c));return Te.createElement(zTe,_r({dragging:i,title:n.length>1?n:""},o()),n.slice(0,r))});function r$({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:a,innerLabelTrim:o=1}){const s=o>0&&Te.createElement(sMe,{label:n,step:a.step,onUpdate:r,innerLabelTrim:o});return Te.createElement(VTe,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:s})}function lMe(){const n=aa(),{label:e,value:t,onUpdate:r,settings:i,id:a}=n,{min:o,max:s}=i,l=s!==1/0&&o!==-1/0;return Te.createElement(os,{input:!0},Te.createElement(Rs,null,e),Te.createElement(aMe,{hasRange:l},l&&Te.createElement(oMe,_r({value:parseFloat(t),onDrag:r},i)),Te.createElement(r$,_r({},n,{id:a,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:uMe}=jG,cMe=jn(jG,["sanitizeStep"]);var hMe=Wt({component:lMe},cMe);const dMe=(n,e)=>qa().schema({options:qa().passesAnyOf(qa().object(),qa().array())}).test(e),fMe=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},pMe=(n,{values:e})=>e.indexOf(n),mMe=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(a=>String(a))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var gMe=Object.freeze({__proto__:null,schema:dMe,sanitize:fMe,format:pMe,normalize:mMe});const vMe=Ht("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),QM=Ht("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),yMe=Ht("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${QM}:focus + &`]:{$focusStyle:""},[`${QM}:hover + &`]:{$hoverStyle:""}});function bMe({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:a}){const{keys:o,values:s}=i,l=j.useRef();return e===s[n]&&(l.current=o[n]),Te.createElement(vMe,null,Te.createElement(QM,{id:r,value:n,onChange:u=>t(s[Number(u.currentTarget.value)]),disabled:a},o.map((u,c)=>Te.createElement("option",{key:u,value:c},u))),Te.createElement(yMe,null,l.current),Te.createElement(UN,{toggled:!0}))}function xMe(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:a,settings:o}=aa();return Te.createElement(os,{input:!0},Te.createElement(Rs,null,n),Te.createElement(bMe,{id:i,value:e,displayValue:t,onUpdate:r,settings:o,disabled:a}))}var wMe=Wt({component:xMe},gMe);const SMe=n=>qa().string().test(n),EMe=n=>{if(typeof n!="string")throw Error("Invalid string");return n},_Me=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var CMe=Object.freeze({__proto__:null,schema:SMe,sanitize:EMe,normalize:_Me});const AMe=["displayValue","onUpdate","onChange","editable"],TMe=Ht("div",{whiteSpace:"pre-wrap"});function MMe(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,a=jn(n,AMe);return i?Te.createElement(BN,_r({value:e,onUpdate:t,onChange:r},a)):Te.createElement(TMe,null,e)}function DMe(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=aa();return Te.createElement(os,{input:!0},Te.createElement(Rs,null,n),Te.createElement(MMe,_r({displayValue:t,onUpdate:r,onChange:i},e)))}var kMe=Wt({component:DMe},CMe);const NMe=n=>qa().boolean().test(n),OMe=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var PMe=Object.freeze({__proto__:null,schema:NMe,sanitize:OMe});const RMe=Ht("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function IMe({value:n,onUpdate:e,id:t,disabled:r}){return Te.createElement(RMe,null,Te.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),Te.createElement("label",{htmlFor:t},Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Te.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function LMe(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=aa();return Te.createElement(os,{input:!0},Te.createElement(Rs,null,n),Te.createElement(IMe,{value:e,onUpdate:t,id:i,disabled:r}))}var FMe=Wt({component:LMe},PMe);const BMe=["locked"];function zMe({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:a}){const o=j.useRef(n[t]);o.current=n[t];const s=j.useCallback(u=>i({[t]:IG({type:"NUMBER",value:o.current,settings:r},u)}),[i,r,t]),l=KG({type:"NUMBER",value:n[t],settings:r,setValue:s});return Te.createElement(r$,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:a})}const UMe=Ht("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function jMe(n){let{locked:e}=n,t=jn(n,BMe);return Te.createElement("svg",_r({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?Te.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):Te.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function jN({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:a}=aa(),{lock:o,locked:s}=t;return Te.createElement(UMe,{withLock:o},o&&Te.createElement(jMe,{locked:s,onClick:()=>a({locked:!s})}),Object.keys(n).map((l,u)=>Te.createElement(zMe,{id:u===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const i$=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([a,o])=>{t[a]=zG(Wt({value:o},e[a])).settings,r=Math.max(r,t[a].step),i=Math.min(i,t[a].pad)});for(let a in t){const{step:o,min:s,max:l}=e[a]||{};!isFinite(o)&&(!isFinite(s)||!isFinite(l))&&(t[a].step=r,t[a].pad=i)}return t},HMe=["lock"],VMe=["value"];function WMe(n){const e=qa().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(a=>isFinite(a))};return r=>e.test(r)||t(r)}function qMe(n){return Array.isArray(n)?"array":"object"}function f0(n,e,t){return qMe(n)===e?n:e==="array"?Object.values(n):STe(n,t)}const GMe=(n,e,t)=>{const r=f0(n,"object",e.keys);for(let o in r)r[o]=BG(r[o],e[o]);const i=Object.keys(r);let a={};if(i.length===e.keys.length)a=r;else{const o=f0(t,"object",e.keys);if(i.length===1&&e.locked){const s=i[0],l=r[s],u=o[s],c=u!==0?l/u:1;for(let h in o)h===s?a[s]=l:a[h]=o[h]*c}else a=Wt(Wt({},o),r)}return f0(a,e.format,e.keys)},$Me=(n,e)=>f0(n,"object",e.keys),XMe=n=>!!n&&("step"in n||"min"in n||"max"in n);function YMe(n,e,t=[]){const{lock:r=!1}=e,i=jn(e,HMe),a=Array.isArray(n)?"array":"object",o=a==="object"?Object.keys(n):t,s=f0(n,"object",o),l=XMe(i)?o.reduce((c,h)=>Object.assign(c,{[h]:i}),{}):i,u=i$(s,l);return{value:a==="array"?n:s,settings:Wt(Wt({},u),{},{format:a,keys:o,lock:r,locked:!1})}}function a$(n){return{schema:WMe(n.length),normalize:e=>{let{value:t}=e,r=jn(e,VMe);return YMe(t,r,n)},format:(e,t)=>$Me(e,t),sanitize:(e,t,r)=>GMe(e,t,r)}}var ZMe={grad:.9,turn:360,rad:360/(2*Math.PI)},jl=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},gi=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},qo=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},o$=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Uz=function(n){return{r:qo(n.r,0,255),g:qo(n.g,0,255),b:qo(n.b,0,255),a:qo(n.a)}},$C=function(n){return{r:gi(n.r),g:gi(n.g),b:gi(n.b),a:gi(n.a,3)}},JMe=/^#([0-9a-f]{3,8})$/i,cb=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},s$=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,a=Math.max(e,t,r),o=a-Math.min(e,t,r),s=o?a===e?(t-r)/o:a===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(s<0?s+6:s),s:a?o/a*100:0,v:a/255*100,a:i}},l$=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var a=Math.floor(e),o=r*(1-t),s=r*(1-(e-a)*t),l=r*(1-(1-e+a)*t),u=a%6;return{r:255*[r,s,o,o,l,r][u],g:255*[l,r,r,s,o,o][u],b:255*[o,o,l,r,r,s][u],a:i}},jz=function(n){return{h:o$(n.h),s:qo(n.s,0,100),l:qo(n.l,0,100),a:qo(n.a)}},Hz=function(n){return{h:gi(n.h),s:gi(n.s),l:gi(n.l),a:gi(n.a,3)}},Vz=function(n){return l$((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},p0=function(n){return{h:(e=s$(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},KMe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,QMe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eDe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tDe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eD={string:[[function(n){var e=JMe.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?gi(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?gi(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=eDe.exec(n)||tDe.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:Uz({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=KMe.exec(n)||QMe.exec(n);if(!e)return null;var t,r,i=jz({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(ZMe[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Vz(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,a=i===void 0?1:i;return jl(e)&&jl(t)&&jl(r)?Uz({r:Number(e),g:Number(t),b:Number(r),a:Number(a)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,a=i===void 0?1:i;if(!jl(e)||!jl(t)||!jl(r))return null;var o=jz({h:Number(e),s:Number(t),l:Number(r),a:Number(a)});return Vz(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,a=i===void 0?1:i;if(!jl(e)||!jl(t)||!jl(r))return null;var o=function(s){return{h:o$(s.h),s:qo(s.s,0,100),v:qo(s.v,0,100),a:qo(s.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(a)});return l$(o)},"hsv"]]},Wz=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},u$=function(n){return typeof n=="string"?Wz(n.trim(),eD.string):typeof n=="object"&&n!==null?Wz(n,eD.object):[null,void 0]},nDe=function(n){return u$(n)[1]},XC=function(n,e){var t=p0(n);return{h:t.h,s:qo(t.s+100*e,0,100),l:t.l,a:t.a}},YC=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},qz=function(n,e){var t=p0(n);return{h:t.h,s:t.s,l:qo(t.l+100*e,0,100),a:t.a}},tD=function(){function n(e){this.parsed=u$(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return gi(YC(this.rgba),2)},n.prototype.isDark=function(){return YC(this.rgba)<.5},n.prototype.isLight=function(){return YC(this.rgba)>=.5},n.prototype.toHex=function(){return e=$C(this.rgba),t=e.r,r=e.g,i=e.b,o=(a=e.a)<1?cb(gi(255*a)):"","#"+cb(t)+cb(r)+cb(i)+o;var e,t,r,i,a,o},n.prototype.toRgb=function(){return $C(this.rgba)},n.prototype.toRgbString=function(){return e=$C(this.rgba),t=e.r,r=e.g,i=e.b,(a=e.a)<1?"rgba("+t+", "+r+", "+i+", "+a+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,a},n.prototype.toHsl=function(){return Hz(p0(this.rgba))},n.prototype.toHslString=function(){return e=Hz(p0(this.rgba)),t=e.h,r=e.s,i=e.l,(a=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+a+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,a},n.prototype.toHsv=function(){return e=s$(this.rgba),{h:gi(e.h),s:gi(e.s),v:gi(e.v),a:gi(e.a,3)};var e},n.prototype.invert=function(){return ga({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),ga(XC(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),ga(XC(this.rgba,-e))},n.prototype.grayscale=function(){return ga(XC(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),ga(qz(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),ga(qz(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?ga({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):gi(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=p0(this.rgba);return typeof e=="number"?ga({h:e,s:t.s,l:t.l,a:t.a}):gi(t.h)},n.prototype.isEqual=function(e){return this.toHex()===ga(e).toHex()},n}(),ga=function(n){return n instanceof tD?n:new tD(n)},Gz=[],rDe=function(n){n.forEach(function(e){Gz.indexOf(e)<0&&(e(tD,eD),Gz.push(e))})};function iDe(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var a={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var s,l,u=r[this.toHex()];if(u)return u;if(o!=null&&o.closest){var c=this.toRgb(),h=1/0,d="black";if(!a.length)for(var f in t)a[f]=new n(t[f]).toRgb();for(var p in t){var v=(s=c,l=a[p],Math.pow(s.r-l.r,2)+Math.pow(s.g-l.g,2)+Math.pow(s.b-l.b,2));v<h&&(h=v,d=p)}return d}},e.string.push([function(o){var s=o.toLowerCase(),l=s==="transparent"?"#0000":t[s];return l?new n(l).toRgb():null},"name"])}function km(){return(km=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function HN(n,e){if(n==null)return{};var t,r,i={},a=Object.keys(n);for(r=0;r<a.length;r++)e.indexOf(t=a[r])>=0||(i[t]=n[t]);return i}function nD(n){var e=j.useRef(n),t=j.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var Jp=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},m0=function(n){return"touches"in n},rD=function(n){return n&&n.ownerDocument.defaultView||self},$z=function(n,e,t){var r=n.getBoundingClientRect(),i=m0(e)?function(a,o){for(var s=0;s<a.length;s++)if(a[s].identifier===o)return a[s];return a[0]}(e.touches,t):e;return{left:Jp((i.pageX-(r.left+rD(n).pageXOffset))/r.width),top:Jp((i.pageY-(r.top+rD(n).pageYOffset))/r.height)}},Xz=function(n){!m0(n)&&n.preventDefault()},VN=Te.memo(function(n){var e=n.onMove,t=n.onKey,r=HN(n,["onMove","onKey"]),i=j.useRef(null),a=nD(e),o=nD(t),s=j.useRef(null),l=j.useRef(!1),u=j.useMemo(function(){var f=function(y){Xz(y),(m0(y)?y.touches.length>0:y.buttons>0)&&i.current?a($z(i.current,y,s.current)):v(!1)},p=function(){return v(!1)};function v(y){var g=l.current,w=rD(i.current),b=y?w.addEventListener:w.removeEventListener;b(g?"touchmove":"mousemove",f),b(g?"touchend":"mouseup",p)}return[function(y){var g=y.nativeEvent,w=i.current;if(w&&(Xz(g),!function(m,x){return x&&!m0(m)}(g,l.current)&&w)){if(m0(g)){l.current=!0;var b=g.changedTouches||[];b.length&&(s.current=b[0].identifier)}w.focus(),a($z(w,g,s.current)),v(!0)}},function(y){var g=y.which||y.keyCode;g<37||g>40||(y.preventDefault(),o({left:g===39?.05:g===37?-.05:0,top:g===40?.05:g===38?-.05:0}))},v]},[o,a]),c=u[0],h=u[1],d=u[2];return j.useEffect(function(){return d},[d]),Te.createElement("div",km({},r,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:h,tabIndex:0,role:"slider"}))}),sy=function(n){return n.filter(Boolean).join(" ")},WN=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,a=sy(["react-colorful__pointer",n.className]);return Te.createElement("div",{className:a,style:{top:100*i+"%",left:100*t+"%"}},Te.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},wa=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},c$=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:wa(n.h),s:wa(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:wa(i/2),a:wa(r,2)}},iD=function(n){var e=c$(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},ZC=function(n){var e=c$(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},h$=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var a=Math.floor(e),o=r*(1-t),s=r*(1-(e-a)*t),l=r*(1-(1-e+a)*t),u=a%6;return{r:wa(255*[r,s,o,o,l,r][u]),g:wa(255*[l,r,r,s,o,o][u]),b:wa(255*[o,o,l,r,r,s][u]),a:wa(i,2)}},d$=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,a=Math.max(e,t,r),o=a-Math.min(e,t,r),s=o?a===e?(t-r)/o:a===t?2+(r-e)/o:4+(e-t)/o:0;return{h:wa(60*(s<0?s+6:s)),s:wa(a?o/a*100:0),v:wa(a/255*100),a:i}},f$=Te.memo(function(n){var e=n.hue,t=n.onChange,r=sy(["react-colorful__hue",n.className]);return Te.createElement("div",{className:r},Te.createElement(VN,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:Jp(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":wa(e),"aria-valuemax":"360","aria-valuemin":"0"},Te.createElement(WN,{className:"react-colorful__hue-pointer",left:e/360,color:iD({h:e,s:100,v:100,a:1})})))}),p$=Te.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:iD({h:e.h,s:100,v:100,a:1})};return Te.createElement("div",{className:"react-colorful__saturation",style:r},Te.createElement(VN,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:Jp(e.s+100*i.left,0,100),v:Jp(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+wa(e.s)+"%, Brightness "+wa(e.v)+"%"},Te.createElement(WN,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:iD(e)})))}),qN=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function m$(n,e,t){var r=nD(t),i=j.useState(function(){return n.toHsva(e)}),a=i[0],o=i[1],s=j.useRef({color:e,hsva:a});j.useEffect(function(){if(!n.equal(e,s.current.color)){var u=n.toHsva(e);s.current={hsva:u,color:e},o(u)}},[e,n]),j.useEffect(function(){var u;qN(a,s.current.hsva)||n.equal(u=n.fromHsva(a),s.current.color)||(s.current={hsva:a,color:u},r(u))},[a,n,r]);var l=j.useCallback(function(u){o(function(c){return Object.assign({},c,u)})},[]);return[a,l]}var aDe=typeof window<"u"?j.useLayoutEffect:j.useEffect,oDe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Yz=new Map,g$=function(n){aDe(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!Yz.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Yz.set(e,t);var r=oDe();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},sDe=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,a=n.onChange,o=HN(n,["className","colorModel","color","onChange"]),s=j.useRef(null);g$(s);var l=m$(t,i,a),u=l[0],c=l[1],h=sy(["react-colorful",e]);return Te.createElement("div",km({},o,{ref:s,className:h}),Te.createElement(p$,{hsva:u,onChange:c}),Te.createElement(f$,{hue:u.h,onChange:c,className:"react-colorful__last-control"}))},lDe=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+ZC(Object.assign({},t,{a:0}))+", "+ZC(Object.assign({},t,{a:1}))+")"},a=sy(["react-colorful__alpha",e]),o=wa(100*t.a);return Te.createElement("div",{className:a},Te.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),Te.createElement(VN,{onMove:function(s){r({a:s.left})},onKey:function(s){r({a:Jp(t.a+s.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},Te.createElement(WN,{className:"react-colorful__alpha-pointer",left:t.a,color:ZC(t)})))},uDe=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,a=n.onChange,o=HN(n,["className","colorModel","color","onChange"]),s=j.useRef(null);g$(s);var l=m$(t,i,a),u=l[0],c=l[1],h=sy(["react-colorful",e]);return Te.createElement("div",km({},o,{ref:s,className:h}),Te.createElement(p$,{hsva:u,onChange:c}),Te.createElement(f$,{hue:u.h,onChange:c}),Te.createElement(lDe,{hsva:u,onChange:c,className:"react-colorful__last-control"}))},cDe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:d$,fromHsva:h$,equal:qN},hDe=function(n){return Te.createElement(uDe,km({},n,{colorModel:cDe}))},dDe={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return d$({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=h$(n)).r,g:e.g,b:e.b};var e},equal:qN},fDe=function(n){return Te.createElement(sDe,km({},n,{colorModel:dDe}))},v$={exports:{}},pDe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mDe=pDe,gDe=mDe;function y$(){}function b$(){}b$.resetWarningCache=y$;var vDe=function(){function n(r,i,a,o,s,l){if(l!==gDe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:b$,resetWarningCache:y$};return t.PropTypes=t,t};v$.exports=vDe();var yDe=v$.exports;const er=is(yDe);function Nm(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(n,[])).next())})}function Om(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function bDe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a}function xDe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(bDe(arguments[e]));return n}var wDe=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ly(n,e){var t=SDe(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function SDe(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=wDe.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var EDe=[".DS_Store","Thumbs.db"];function _De(n){return Nm(this,void 0,void 0,function(){return Om(this,function(e){return TS(n)&&CDe(n)?[2,DDe(n.dataTransfer,n.type)]:ADe(n)?[2,TDe(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,MDe(n)]:[2,[]]})})}function CDe(n){return TS(n.dataTransfer)}function ADe(n){return TS(n)&&TS(n.target)}function TS(n){return typeof n=="object"&&n!==null}function TDe(n){return aD(n.target.files).map(function(e){return ly(e)})}function MDe(n){return Nm(this,void 0,void 0,function(){var e;return Om(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return ly(r)})]}})})}function DDe(n,e){return Nm(this,void 0,void 0,function(){var t,r;return Om(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=aD(n.items).filter(function(a){return a.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(kDe))]):[3,2];case 1:return r=i.sent(),[2,Zz(x$(r))];case 2:return[2,Zz(aD(n.files).map(function(a){return ly(a)}))]}})})}function Zz(n){return n.filter(function(e){return EDe.indexOf(e.name)===-1})}function aD(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function kDe(n){if(typeof n.webkitGetAsEntry!="function")return Jz(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?w$(e):Jz(n)}function x$(n){return n.reduce(function(e,t){return xDe(e,Array.isArray(t)?x$(t):[t])},[])}function Jz(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=ly(e);return Promise.resolve(t)}function NDe(n){return Nm(this,void 0,void 0,function(){return Om(this,function(e){return[2,n.isDirectory?w$(n):ODe(n)]})})}function w$(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function a(){var o=this;e.readEntries(function(s){return Nm(o,void 0,void 0,function(){var l,u,c;return Om(this,function(h){switch(h.label){case 0:if(s.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=h.sent(),t(l),[3,4];case 3:return u=h.sent(),r(u),[3,4];case 4:return[3,6];case 5:c=Promise.all(s.map(NDe)),i.push(c),a(),h.label=6;case 6:return[2]}})})},function(s){r(s)})}a()})}function ODe(n){return Nm(this,void 0,void 0,function(){return Om(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var a=ly(i,n.fullPath);t(a)},function(i){r(i)})})]})})}var PDe=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),r=n.name||"",i=(n.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return t.some(function(o){var s=o.trim().toLowerCase();return s.charAt(0)==="."?r.toLowerCase().endsWith(s):s.endsWith("/*")?a===s.replace(/\/.*$/,""):i===s})}return!0};function Kz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Qz(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kz(Object(t),!0).forEach(function(r){S$(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Kz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function S$(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function e6(n,e){return FDe(n)||LDe(n,e)||IDe(n,e)||RDe()}function RDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IDe(n,e){if(n){if(typeof n=="string")return t6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return t6(n,e)}}function t6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function LDe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,a=!1,o,s;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return r}}function FDe(n){if(Array.isArray(n))return n}var BDe="file-invalid-type",zDe="file-too-large",UDe="file-too-small",jDe="too-many-files",HDe=function(n){n=Array.isArray(n)&&n.length===1?n[0]:n;var e=Array.isArray(n)?"one of ".concat(n.join(", ")):n;return{code:BDe,message:"File type must be ".concat(e)}},n6=function(n){return{code:zDe,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},r6=function(n){return{code:UDe,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},VDe={code:jDe,message:"Too many files"};function E$(n,e){var t=n.type==="application/x-moz-file"||PDe(n,e);return[t,t?null:HDe(e)]}function _$(n,e,t){if(bg(n.size))if(bg(e)&&bg(t)){if(n.size>t)return[!1,n6(t)];if(n.size<e)return[!1,r6(e)]}else{if(bg(e)&&n.size<e)return[!1,r6(e)];if(bg(t)&&n.size>t)return[!1,n6(t)]}return[!0,null]}function bg(n){return n!=null}function WDe(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,a=n.multiple,o=n.maxFiles;return!a&&e.length>1||a&&o>=1&&e.length>o?!1:e.every(function(s){var l=E$(s,t),u=e6(l,1),c=u[0],h=_$(s,r,i),d=e6(h,1),f=d[0];return c&&f})}function MS(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function hb(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function i6(n){n.preventDefault()}function qDe(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function GDe(n){return n.indexOf("Edge/")!==-1}function $De(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return qDe(n)||GDe(n)}function Xs(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return e.some(function(s){return!MS(r)&&s&&s.apply(void 0,[r].concat(a)),MS(r)})}}function XDe(){return"showOpenFilePicker"in window}function YDe(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return Qz(Qz({},e),{},S$({},t,[]))},{}):{}}]}function ZDe(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function JDe(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var KDe=["children"],QDe=["open"],e3e=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],t3e=["refKey","onChange","onClick"];function n3e(n){return a3e(n)||i3e(n)||C$(n)||r3e()}function r3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i3e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function a3e(n){if(Array.isArray(n))return oD(n)}function JC(n,e){return l3e(n)||s3e(n,e)||C$(n,e)||o3e()}function o3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C$(n,e){if(n){if(typeof n=="string")return oD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oD(n,e)}}function oD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function s3e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,a=!1,o,s;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return r}}function l3e(n){if(Array.isArray(n))return n}function a6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function gr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?a6(Object(t),!0).forEach(function(r){sD(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sD(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DS(n,e){if(n==null)return{};var t=u3e(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function u3e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var GN=j.forwardRef(function(n,e){var t=n.children,r=DS(n,KDe),i=T$(r),a=i.open,o=DS(i,QDe);return j.useImperativeHandle(e,function(){return{open:a}},[a]),Te.createElement(j.Fragment,null,t(gr(gr({},o),{},{open:a})))});GN.displayName="Dropzone";var A$={disabled:!1,getFilesFromEvent:_De,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};GN.defaultProps=A$;GN.propTypes={children:er.func,accept:er.oneOfType([er.string,er.arrayOf(er.string)]),multiple:er.bool,preventDropOnDocument:er.bool,noClick:er.bool,noKeyboard:er.bool,noDrag:er.bool,noDragEventsBubbling:er.bool,minSize:er.number,maxSize:er.number,maxFiles:er.number,disabled:er.bool,getFilesFromEvent:er.func,onFileDialogCancel:er.func,onFileDialogOpen:er.func,useFsAccessApi:er.bool,onDragEnter:er.func,onDragLeave:er.func,onDragOver:er.func,onDrop:er.func,onDropAccepted:er.func,onDropRejected:er.func,validator:er.func};var lD={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function T$(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=gr(gr({},A$),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,a=e.maxSize,o=e.minSize,s=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,h=e.onDragOver,d=e.onDrop,f=e.onDropAccepted,p=e.onDropRejected,v=e.onFileDialogCancel,y=e.onFileDialogOpen,g=e.useFsAccessApi,w=e.preventDropOnDocument,b=e.noClick,m=e.noKeyboard,x=e.noDrag,S=e.noDragEventsBubbling,C=e.validator,T=j.useMemo(function(){return typeof y=="function"?y:o6},[y]),M=j.useMemo(function(){return typeof v=="function"?v:o6},[v]),A=j.useRef(null),D=j.useRef(null),O=j.useReducer(c3e,lD),U=JC(O,2),L=U[0],F=U[1],k=L.isFocused,P=L.isFileDialogActive,z=L.draggedFiles,B=j.useRef(typeof window<"u"&&window.isSecureContext&&g&&XDe()),X=function(){!B.current&&P&&setTimeout(function(){if(D.current){var $=D.current.files;$.length||(F({type:"closeDialog"}),M())}},300)};j.useEffect(function(){return window.addEventListener("focus",X,!1),function(){window.removeEventListener("focus",X,!1)}},[D,P,M,B]);var J=j.useRef([]),Q=function($){A.current&&A.current.contains($.target)||($.preventDefault(),J.current=[])};j.useEffect(function(){return w&&(document.addEventListener("dragover",i6,!1),document.addEventListener("drop",Q,!1)),function(){w&&(document.removeEventListener("dragover",i6),document.removeEventListener("drop",Q))}},[A,w]);var Z=j.useCallback(function($){$.preventDefault(),$.persist(),ie($),J.current=[].concat(n3e(J.current),[$.target]),hb($)&&Promise.resolve(i($)).then(function(ee){MS($)&&!S||(F({draggedFiles:ee,isDragActive:!0,type:"setDraggedFiles"}),u&&u($))})},[i,u,S]),re=j.useCallback(function($){$.preventDefault(),$.persist(),ie($);var ee=hb($);if(ee&&$.dataTransfer)try{$.dataTransfer.dropEffect="copy"}catch{}return ee&&h&&h($),!1},[h,S]),fe=j.useCallback(function($){$.preventDefault(),$.persist(),ie($);var ee=J.current.filter(function(xe){return A.current&&A.current.contains(xe)}),ge=ee.indexOf($.target);ge!==-1&&ee.splice(ge,1),J.current=ee,!(ee.length>0)&&(F({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),hb($)&&c&&c($))},[A,c,S]),se=j.useCallback(function($,ee){var ge=[],xe=[];$.forEach(function(Ne){var Fe=E$(Ne,t),qe=JC(Fe,2),ke=qe[0],it=qe[1],Ze=_$(Ne,o,a),st=JC(Ze,2),we=st[0],Re=st[1],et=C?C(Ne):null;if(ke&&we&&!et)ge.push(Ne);else{var V=[it,Re];et&&(V=V.concat(et)),xe.push({file:Ne,errors:V.filter(function(Ee){return Ee})})}}),(!s&&ge.length>1||s&&l>=1&&ge.length>l)&&(ge.forEach(function(Ne){xe.push({file:Ne,errors:[VDe]})}),ge.splice(0)),F({acceptedFiles:ge,fileRejections:xe,type:"setFiles"}),d&&d(ge,xe,ee),xe.length>0&&p&&p(xe,ee),ge.length>0&&f&&f(ge,ee)},[F,s,t,o,a,l,d,f,p,C]),ye=j.useCallback(function($){$.preventDefault(),$.persist(),ie($),J.current=[],hb($)&&Promise.resolve(i($)).then(function(ee){MS($)&&!S||se(ee,$)}),F({type:"reset"})},[i,se,S]),De=j.useCallback(function(){if(B.current){F({type:"openDialog"}),T();var $={multiple:s,types:YDe(t)};window.showOpenFilePicker($).then(function(ee){return i(ee)}).then(function(ee){se(ee,null),F({type:"closeDialog"})}).catch(function(ee){ZDe(ee)?(M(ee),F({type:"closeDialog"})):JDe(ee)&&(B.current=!1,D.current&&(D.current.value=null,D.current.click()))});return}D.current&&(F({type:"openDialog"}),T(),D.current.value=null,D.current.click())},[F,T,M,g,se,t,s]),pe=j.useCallback(function($){!A.current||!A.current.isEqualNode($.target)||($.key===" "||$.key==="Enter"||$.keyCode===32||$.keyCode===13)&&($.preventDefault(),De())},[A,De]),Me=j.useCallback(function(){F({type:"focus"})},[]),be=j.useCallback(function(){F({type:"blur"})},[]),ne=j.useCallback(function(){b||($De()?setTimeout(De,0):De())},[b,De]),Pe=function($){return r?null:$},ze=function($){return m?null:Pe($)},K=function($){return x?null:Pe($)},ie=function($){S&&$.stopPropagation()},_e=j.useMemo(function(){return function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee=$.refKey,ge=ee===void 0?"ref":ee,xe=$.role,Ne=$.onKeyDown,Fe=$.onFocus,qe=$.onBlur,ke=$.onClick,it=$.onDragEnter,Ze=$.onDragOver,st=$.onDragLeave,we=$.onDrop,Re=DS($,e3e);return gr(gr(sD({onKeyDown:ze(Xs(Ne,pe)),onFocus:ze(Xs(Fe,Me)),onBlur:ze(Xs(qe,be)),onClick:Pe(Xs(ke,ne)),onDragEnter:K(Xs(it,Z)),onDragOver:K(Xs(Ze,re)),onDragLeave:K(Xs(st,fe)),onDrop:K(Xs(we,ye)),role:typeof xe=="string"&&xe!==""?xe:"button"},ge,A),!r&&!m?{tabIndex:0}:{}),Re)}},[A,pe,Me,be,ne,Z,re,fe,ye,m,x,r]),oe=j.useCallback(function($){$.stopPropagation()},[]),G=j.useMemo(function(){return function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee=$.refKey,ge=ee===void 0?"ref":ee,xe=$.onChange,Ne=$.onClick,Fe=DS($,t3e),qe=sD({accept:t,multiple:s,type:"file",style:{display:"none"},onChange:Pe(Xs(xe,ye)),onClick:Pe(Xs(Ne,oe)),tabIndex:-1},ge,D);return gr(gr({},qe),Fe)}},[D,t,s,ye,r]),q=z.length,ce=q>0&&WDe({files:z,accept:t,minSize:o,maxSize:a,multiple:s,maxFiles:l}),Ae=q>0&&!ce;return gr(gr({},L),{},{isDragAccept:ce,isDragReject:Ae,isFocused:k&&!r,getRootProps:_e,getInputProps:G,rootRef:A,inputRef:D,open:Pe(De)})}function c3e(n,e){switch(e.type){case"focus":return gr(gr({},n),{},{isFocused:!0});case"blur":return gr(gr({},n),{},{isFocused:!1});case"openDialog":return gr(gr({},lD),{},{isFileDialogActive:!0});case"closeDialog":return gr(gr({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return gr(gr({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return gr(gr({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return gr({},lD);default:return n}}function o6(){}function h3e(n){let e;const t=new Set,r=(s,l)=>{const u=typeof s=="function"?s(e):s;if(u!==e){const c=e;e=l?u:Object.assign({},e,u),t.forEach(h=>h(e,c))}},i=()=>e,a=(s,l=i,u=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let c=l(e);function h(){const d=l(e);if(!u(c,d)){const f=c;s(c=d,f)}}return t.add(h),()=>t.delete(h)},o={setState:r,getState:i,subscribe:(s,l,u)=>l||u?a(s,l,u):(t.add(s),()=>t.delete(s)),destroy:()=>t.clear()};return e=n(r,i,o),o}const d3e=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),s6=d3e?j.useEffect:j.useLayoutEffect;function $N(n){const e=typeof n=="function"?h3e(n):n,t=(r=e.getState,i=Object.is)=>{const[,a]=j.useReducer(y=>y+1,0),o=e.getState(),s=j.useRef(o),l=j.useRef(r),u=j.useRef(i),c=j.useRef(!1),h=j.useRef();h.current===void 0&&(h.current=r(o));let d,f=!1;(s.current!==o||l.current!==r||u.current!==i||c.current)&&(d=r(o),f=!i(h.current,d)),s6(()=>{f&&(h.current=d),s.current=o,l.current=r,u.current=i,c.current=!1});const p=j.useRef(o);s6(()=>{const y=()=>{try{const w=e.getState(),b=l.current(w);u.current(h.current,b)||(s.current=w,h.current=b,a())}catch{c.current=!0,a()}},g=e.subscribe(y);return e.getState()!==p.current&&y(),g},[]);const v=f?d:h.current;return j.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const f3e=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(a,o,s)=>{let l=a;if(o){const u=(s==null?void 0:s.equalityFn)||Object.is;let c=a(r.getState());l=h=>{const d=a(h);if(!u(c,d)){const f=c;o(c=d,f)}},s!=null&&s.fireImmediately&&o(c,c)}return i(l)},n(e,t,r)};/*!
* isobject <https://github.com/jonschlinkert/isobject>
*
* Copyright (c) 2014-2017, Jon Schlinkert.
* Released under the MIT License.
*/var p3e=function(n){return n!=null&&typeof n=="object"&&Array.isArray(n)===!1};/*!
* is-plain-object <https://github.com/jonschlinkert/is-plain-object>
*
* Copyright (c) 2014-2017, Jon Schlinkert.
* Released under the MIT License.
*/var m3e=p3e;function l6(n){return m3e(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var M$=function(n){var e,t;return!(l6(n)===!1||(e=n.constructor,typeof e!="function")||(t=e.prototype,l6(t)===!1)||t.hasOwnProperty("isPrototypeOf")===!1)};/*!
* is-extendable <https://github.com/jonschlinkert/is-extendable>
*
* Copyright (c) 2015-2017, Jon Schlinkert.
* Released under the MIT License.
*/var g3e=M$,XN=function(n){return g3e(n)||typeof n=="function"||Array.isArray(n)};/*!
* for-in <https://github.com/jonschlinkert/for-in>
*
* Copyright (c) 2014-2017, Jon Schlinkert.
* Released under the MIT License.
*/var v3e=function(n,e,t){for(var r in n)if(e.call(t,n[r],r,n)===!1)break},y3e=XN,b3e=v3e;function D$(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];uD(i)&&b3e(i,x3e,n)}return n}function x3e(n,e){if(w3e(e)){var t=this[e];uD(n)&&uD(t)?D$(t,n):this[e]=n}}function uD(n){return y3e(n)&&!Array.isArray(n)}function w3e(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var S3e=D$;/*!
* get-value <https://github.com/jonschlinkert/get-value>
*
* Copyright (c) 2014-2015, Jon Schlinkert.
* Licensed under the MIT License.
*/var E3e=function(n,e,t,r,i){if(!_3e(n)||!e)return n;if(e=db(e),t&&(e+="."+db(t)),r&&(e+="."+db(r)),i&&(e+="."+db(i)),e in n)return n[e];for(var a=e.split("."),o=a.length,s=-1;n&&++s<o;){for(var l=a[s];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+a[++s];n=n[l]}return n};function _3e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function db(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
* assign-symbols <https://github.com/jonschlinkert/assign-symbols>
*
* Copyright (c) 2015, Jon Schlinkert.
* Licensed under the MIT License.
*/var C3e=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,a=0;++a<i;)for(var o=Object(arguments[a]),s=Object.getOwnPropertySymbols(o),l=0;l<s.length;l++){var u=s[l];t.call(o,u)&&(r[u]=o[u])}return r},A3e=XN,T3e=C3e,M3e=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");u6(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];k3e(t)&&(t=N3e(t)),u6(t)&&(D3e(n,t),T3e(n,t))}return n};function D3e(n,e){for(var t in e)O3e(e,t)&&(n[t]=e[t])}function k3e(n){return n&&typeof n=="string"}function N3e(n){var e={};for(var t in n)e[t]=n[t];return e}function u6(n){return n&&typeof n=="object"||A3e(n)}function O3e(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
* split-string <https://github.com/jonschlinkert/split-string>
*
* Copyright (c) 2015-2017, Jon Schlinkert.
* Released under the MIT License.
*/var P3e=M3e,R3e=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=P3e({sep:"."},e),i=r.quotes||['"',"'","`"],a;r.brackets===!0?a={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(a=r.brackets);var o=[],s=[],l=[""],u=r.sep,c=n.length,h=-1,d;function f(){if(a&&s.length)return a[s[s.length-1]]}for(;++h<c;){var p=n[h],v=n[h+1],y={val:p,idx:h,arr:l,str:n};if(o.push(y),p==="\\"){y.val=L3e(r,n,h)===!0?p+v:v,y.escaped=!0,typeof t=="function"&&t(y),l[l.length-1]+=y.val,h++;continue}if(a&&a[p]){s.push(p);var g=f(),w=h+1;if(n.indexOf(g,w+1)!==-1)for(;s.length&&w<c;){var b=n[++w];if(b==="\\"){b++;continue}if(i.indexOf(b)!==-1){w=cD(n,b,w+1);continue}if(g=f(),s.length&&n.indexOf(g,w+1)===-1)break;if(a[b]){s.push(b);continue}g===b&&s.pop()}if(d=w,d===-1){l[l.length-1]+=p;continue}p=n.slice(h,d+1),y.val=p,y.idx=h=d}if(i.indexOf(p)!==-1){if(d=cD(n,p,h+1),d===-1){l[l.length-1]+=p;continue}I3e(p,r)===!0?p=n.slice(h,d+1):p=n.slice(h+1,d),y.val=p,y.idx=h=d}if(typeof t=="function"&&(t(y,o),p=y.val,h=y.idx),y.val===u&&y.split!==!1){l.push("");continue}l[l.length-1]+=y.val}return l};function cD(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?cD(n,e,i+1):i}function I3e(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function L3e(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
* is-extendable <https://github.com/jonschlinkert/is-extendable>
*
* Copyright (c) 2015, Jon Schlinkert.
* Licensed under the MIT License.
*/var F3e=function(n){return typeof n<"u"&&n!==null&&(typeof n=="object"||typeof n=="function")},c6=F3e,B3e=function(n){c6(n)||(n={});for(var e=arguments.length,t=1;t<e;t++){var r=arguments[t];c6(r)&&z3e(n,r)}return n};function z3e(n,e){for(var t in e)U3e(e,t)&&(n[t]=e[t])}function U3e(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
* is-extendable <https://github.com/jonschlinkert/is-extendable>
*
* Copyright (c) 2015, Jon Schlinkert.
* Licensed under the MIT License.
*/var j3e=function(n){return typeof n<"u"&&n!==null&&(typeof n=="object"||typeof n=="function")};/*!
* set-value <https://github.com/jonschlinkert/set-value>
*
* Copyright (c) 2014-2015, 2017, Jon Schlinkert.
* Released under the MIT License.
*/var H3e=R3e,V3e=B3e,h6=M$,d6=j3e,W3e=function(n,e,t){if(!d6(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=H3e(e,{sep:".",brackets:!0}).filter(q3e),i=r.length,a=-1,o=n;++a<i;){var s=r[a];if(a!==i-1){d6(o[s])||(o[s]={}),o=o[s];continue}h6(o[s])&&h6(t)?o[s]=V3e({},o[s],t):o[s]=t}return n};function q3e(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var KC=XN,f6=S3e,G3e=E3e,p6=W3e,$3e=function(n,e,t){if(!KC(n))throw new TypeError("expected an object");if(typeof e!="string"||t==null)return f6.apply(null,arguments);if(typeof t=="string")return p6(n,e,t),n;var r=G3e(n,e);return KC(t)&&KC(r)&&(t=f6({},r,t)),p6(n,e,t),n};const X3e=is($3e),YN=(...n)=>n.filter(Boolean).join(".");function Y3e(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function Z3e(n,e){return Object.entries(xTe(n,e)).reduce((t,[,{value:r,disabled:i,key:a}])=>(t[a]=i?void 0:r,t),{})}function J3e(n,e){const t=j.useRef();return J0(n,t.current)||(t.current=n),t.current}function k$(n,e){return j.useMemo(n,J3e(e))}function K3e(n){const e=j.useRef(null),t=j.useRef(null),r=j.useRef(!0);return j.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),j.useEffect(()=>{if(r.current){r.current=!1;return}let i;const a=e.current,o=()=>{n&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",o,{once:!0});const{height:s}=t.current.getBoundingClientRect();return a.style.height=s+"px",n||(a.style.overflow="hidden",i=window.setTimeout(()=>a.style.height="0px",50)),()=>{a.removeEventListener("transitionend",o),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const Q3e=n=>{const[e,t]=j.useState(n.getVisiblePaths());return j.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:WE});return()=>r()},[n]),e};function eke(n,e,t){return n.useStore(r=>{const i=Wt(Wt({},t),r.data);return Z3e(i,e)},WE)}function N$(n=3){const e=j.useRef(null),t=j.useRef(null),[r,i]=j.useState(!1),a=j.useCallback(()=>i(!0),[]),o=j.useCallback(()=>i(!1),[]);return j.useLayoutEffect(()=>{if(r){const{bottom:s,top:l,left:u}=e.current.getBoundingClientRect(),{height:c}=t.current.getBoundingClientRect(),h=s+c>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",h==="down"?t.current.style.top=s+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:a,hide:o}}rDe([iDe]);const tke={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};qa.extend({color:()=>n=>ga(n).isValid()});const nke=n=>qa().color().test(n);function O$(n,{format:e,hasAlpha:t,isString:r}){const i=tke[e]+(r&&e!=="hex"?"String":""),a=n[i]();return typeof a=="object"&&!t?wTe(a,["a"]):a}const P$=(n,e)=>{const t=ga(n);if(!t.isValid())throw Error("Invalid color");return O$(t,e)},rke=(n,e)=>O$(ga(n),Wt(Wt({},e),{},{isString:!0,format:"hex"})),ike=({value:n})=>{const e=nDe(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:P$(n,i),settings:i}};var ake=Object.freeze({__proto__:null,schema:nke,sanitize:P$,format:rke,normalize:ike});const oke=Ht("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),ske=Ht("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),lke=Ht("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function m6(n,e){return e!=="rgb"?ga(n).toRgb():n}function uke({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:a}=aa(),{format:o,hasAlpha:s}=t,{popinRef:l,wrapperRef:u,shown:c,show:h,hide:d}=N$(),f=j.useRef(0),[p,v]=j.useState(()=>m6(n,o)),y=s?hDe:fDe,g=()=>{v(m6(n,o)),h(),i()},w=()=>{d(),a(),window.clearTimeout(f.current)},b=()=>{f.current=window.setTimeout(w,500)};return j.useEffect(()=>()=>window.clearTimeout(f.current),[]),Te.createElement(Te.Fragment,null,Te.createElement(oke,{ref:l,active:c,onClick:()=>g(),style:{color:e}}),c&&Te.createElement(zN,null,Te.createElement(JG,{onPointerUp:w}),Te.createElement(lke,{ref:u,onMouseEnter:()=>window.clearTimeout(f.current),onMouseLeave:m=>m.buttons===0&&b()},Te.createElement(y,{color:p,onChange:r}))))}function cke(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:a}=aa();return Te.createElement(os,{input:!0},Te.createElement(Rs,null,t),Te.createElement(ske,null,Te.createElement(uke,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:a}),Te.createElement(BN,{value:e,onChange:r,onUpdate:i})))}var hke=Wt({component:cke},ake);function dke(){const{label:n,displayValue:e,onUpdate:t,settings:r}=aa();return Te.createElement(os,{input:!0},Te.createElement(Rs,null,n),Te.createElement(jN,{value:e,settings:r,onUpdate:t}))}var fke=Wt({component:dke},a$(["x","y","z"]));const pke=Ht("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),mke=Ht("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function gke({value:n,settings:e,onUpdate:t}){const r=j.useRef(),i=j.useRef(0),a=j.useRef(0),o=j.useRef(1),[s,l]=j.useState(!1),[u,c]=j.useState(!1),[h,d]=QG(),f=j.useRef(null),p=j.useRef(null);j.useLayoutEffect(()=>{if(s){const{top:O,left:U,width:L,height:F}=f.current.getBoundingClientRect();p.current.style.left=U+L/2+"px",p.current.style.top=O+F/2+"px"}},[s]);const{keys:[v,y],joystick:g}=e,w=g==="invertY"?1:-1,{[v]:{step:b},[y]:{step:m}}=e,x=uu("sizes","joystickWidth"),S=uu("sizes","joystickHeight"),C=parseFloat(x)*.8/2,T=parseFloat(S)*.8/2,M=j.useCallback(()=>{r.current||(c(!0),i.current&&d({x:i.current*C}),a.current&&d({y:a.current*-T}),r.current=window.setInterval(()=>{t(O=>{const U=b*i.current*o.current,L=w*m*a.current*o.current;return Array.isArray(O)?{[v]:O[0]+U,[y]:O[1]+L}:{[v]:O[v]+U,[y]:O[y]+L}})},16))},[C,T,t,d,b,m,v,y,w]),A=j.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,c(!1)},[]);j.useEffect(()=>{function O(U){o.current=FG(U)}return window.addEventListener("keydown",O),window.addEventListener("keyup",O),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",O),window.removeEventListener("keyup",O)}},[]);const D=oy(({first:O,active:U,delta:[L,F],movement:[k,P]})=>{O&&l(!0);const z=qc(k,-C,C),B=qc(P,-T,T);i.current=Math.abs(k)>Math.abs(z)?Math.sign(k-z):0,a.current=Math.abs(P)>Math.abs(B)?Math.sign(B-P):0;let X=n[v],J=n[y];U?(i.current||(X+=L*b*o.current,d({x:z})),a.current||(J-=w*F*m*o.current,d({y:B})),i.current||a.current?M():A(),t({[v]:X,[y]:J})):(l(!1),i.current=0,a.current=0,d({x:0,y:0}),A())});return Te.createElement(pke,_r({ref:f},D()),s&&Te.createElement(zN,null,Te.createElement(mke,{ref:p,isOutOfBounds:u},Te.createElement("div",null),Te.createElement("span",{ref:h}))))}const vke=Ht("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function yke(){const{label:n,displayValue:e,onUpdate:t,settings:r}=aa();return Te.createElement(os,{input:!0},Te.createElement(Rs,null,n),Te.createElement(vke,{withJoystick:!!r.joystick},r.joystick&&Te.createElement(gke,{value:e,settings:r,onUpdate:t}),Te.createElement(jN,{value:e,settings:r,onUpdate:t})))}const bke=["joystick"],R$=a$(["x","y"]),xke=n=>{let{joystick:e=!0}=n,t=jn(n,bke);const{value:r,settings:i}=R$.normalize(t);return{value:r,settings:Wt(Wt({},i),{},{joystick:e})}};var wke=Wt(Wt({component:yke},R$),{},{normalize:xke});const Ske=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},Eke=(n,e)=>typeof e=="object"&&"image"in e,_ke=({image:n})=>({value:n});var Cke=Object.freeze({__proto__:null,sanitize:Ske,schema:Eke,normalize:_ke});const Ake=Ht("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Tke=Ht("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Mke=Ht("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Dke=Ht("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),kke=Ht("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Nke=Ht("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function Oke(){const{label:n,value:e,onUpdate:t,disabled:r}=aa(),{popinRef:i,wrapperRef:a,shown:o,show:s,hide:l}=N$(),u=j.useCallback(p=>{p.length&&t(p[0])},[t]),c=j.useCallback(p=>{p.stopPropagation(),t(void 0)},[t]),{getRootProps:h,getInputProps:d,isDragAccept:f}=T$({maxFiles:1,accept:"image/*",onDrop:u,disabled:r});return Te.createElement(os,{input:!0},Te.createElement(Rs,null,n),Te.createElement(Ake,null,Te.createElement(Mke,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&s(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&Te.createElement(zN,null,Te.createElement(JG,{onPointerUp:l,style:{cursor:"pointer"}}),Te.createElement(Dke,{ref:a,style:{backgroundImage:`url(${e})`}})),Te.createElement(Tke,h({isDragAccept:f}),Te.createElement("input",d()),Te.createElement(kke,null,f?"drop image":"click or drop")),Te.createElement(Nke,{onClick:c,disabled:!e})))}var Pke=Wt({component:Oke},Cke);const g6=qa().number(),Rke=(n,e)=>qa().array().length(2).every.number().test(n)&&qa().schema({min:g6,max:g6}).test(e),kS=n=>({min:n[0],max:n[1]}),I$=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?kS(n):n,a={min:r[0],max:r[1]},{min:o,max:s}=Wt(Wt({},a),i);return[qc(Number(o),e,Math.max(e,s)),qc(Number(s),Math.min(t,o),t)]},Ike=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=i$(kS(n),{min:r,max:r}),a=[e,t],o=Wt(Wt({},i),{},{bounds:a});return{value:I$(kS(n),o,n),settings:o}};var Lke=Object.freeze({__proto__:null,schema:Rke,format:kS,sanitize:I$,normalize:Ike});const Fke=["value","bounds","onDrag"],Bke=["bounds"],zke=Ht("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Uke(n){let{value:e,bounds:[t,r],onDrag:i}=n,a=jn(n,Fke);const o=j.useRef(null),s=j.useRef(null),l=j.useRef(null),u=j.useRef(0),c=uu("sizes","scrubberWidth"),h=oy(({event:p,first:v,xy:[y],movement:[g],memo:w={}})=>{if(v){const{width:m,left:x}=o.current.getBoundingClientRect();u.current=m-parseFloat(c);const S=(p==null?void 0:p.target)===s.current||(p==null?void 0:p.target)===l.current;w.pos=CS((y-x)/m,t,r);const C=Math.abs(w.pos-e.min)-Math.abs(w.pos-e.max);w.key=C<0||C===0&&w.pos<=e.min?"min":"max",S&&(w.pos=e[w.key])}const b=w.pos+CS(g/u.current,0,r-t);return i({[w.key]:uMe(b,a[w.key])}),w}),d=`calc(${_S(e.min,t,r)} * (100% - ${c} - 8px) + 4px)`,f=`calc(${1-_S(e.max,t,r)} * (100% - ${c} - 8px) + 4px)`;return Te.createElement(t$,_r({ref:o},h()),Te.createElement(e$,null,Te.createElement(n$,{style:{left:d,right:f}})),Te.createElement(KM,{position:"left",ref:s,style:{left:d}}),Te.createElement(KM,{position:"right",ref:l,style:{right:f}}))}function jke(){const{label:n,displayValue:e,onUpdate:t,settings:r}=aa(),i=jn(r,Bke);return Te.createElement(Te.Fragment,null,Te.createElement(os,{input:!0},Te.createElement(Rs,null,n),Te.createElement(zke,null,Te.createElement(Uke,_r({value:e},r,{onDrag:t})),Te.createElement(jN,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var Hke=Wt({component:jke},Lke);const Vke=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},Wke=["type","value"],qke=["onChange","transient","onEditStart","onEditEnd"],L$=function(){const n=$N(f3e(()=>({data:{}}))),e=Vke();this.storeId=bTe(),this.useStore=n;const t={},r=new Set;this.getVisiblePaths=()=>{const a=this.getData(),o=Object.keys(a),s=[];Object.entries(t).forEach(([u,c])=>{c.render&&o.some(h=>h.indexOf(u)===0)&&!c.render(this.get)&&s.push(u+".")});const l=[];return r.forEach(u=>{u in a&&a[u].__refCount>0&&s.every(c=>u.indexOf(c)===-1)&&(!a[u].render||a[u].render(this.get))&&l.push(u)}),l},this.setOrderedPaths=a=>{a.forEach(o=>r.add(o))},this.orderPaths=a=>(this.setOrderedPaths(a),a),this.disposePaths=a=>{n.setState(o=>{const s=o.data;return a.forEach(l=>{if(l in s){const u=s[l];u.__refCount--,u.__refCount===0&&u.type in Xo&&delete s[l]}}),{data:s}})},this.dispose=()=>{n.setState(()=>({data:{}}))},this.getFolderSettings=a=>t[a]||{},this.getData=()=>n.getState().data,this.addData=(a,o)=>{n.setState(s=>{const l=s.data;return Object.entries(a).forEach(([u,c])=>{let h=l[u];if(h){const{type:d,value:f}=c,p=jn(c,Wke);d!==h.type?Kl(vr.INPUT_TYPE_OVERRIDE,d):((h.__refCount===0||o)&&Object.assign(h,p),h.__refCount++)}else l[u]=Wt(Wt({},c),{},{__refCount:1})}),{data:l}})},this.setValueAtPath=(a,o,s)=>{n.setState(l=>{const u=l.data;return zz(u[a],o,a,this,s),{data:u}})},this.setSettingsAtPath=(a,o)=>{n.setState(s=>{const l=s.data;return l[a].settings=Wt(Wt({},l[a].settings),o),{data:l}})},this.disableInputAtPath=(a,o)=>{n.setState(s=>{const l=s.data;return l[a].disabled=o,{data:l}})},this.set=(a,o)=>{n.setState(s=>{const l=s.data;return Object.entries(a).forEach(([u,c])=>{try{zz(l[u],c,void 0,void 0,o)}catch{}}),{data:l}})},this.getInput=a=>{try{return this.getData()[a]}catch{Kl(vr.PATH_DOESNT_EXIST,a)}},this.get=a=>{var o;return(o=this.getInput(a))===null||o===void 0?void 0:o.value},this.emitOnEditStart=a=>{e.emit(`onEditStart:${a}`,this.get(a),a,Wt(Wt({},this.getInput(a)),{},{get:this.get}))},this.emitOnEditEnd=a=>{e.emit(`onEditEnd:${a}`,this.get(a),a,Wt(Wt({},this.getInput(a)),{},{get:this.get}))},this.subscribeToEditStart=(a,o)=>{const s=`onEditStart:${a}`;return e.on(s,o),()=>e.off(s,o)},this.subscribeToEditEnd=(a,o)=>{const s=`onEditEnd:${a}`;return e.on(s,o),()=>e.off(s,o)};const i=(a,o,s)=>{const l={};return Object.entries(a).forEach(([u,c])=>{if(u==="")return Kl(vr.EMPTY_KEY);let h=YN(o,u);if(c.type===Xo.FOLDER){const d=i(c.schema,h,s);Object.assign(l,d),h in t||(t[h]=c.settings)}else if(u in s)Kl(vr.DUPLICATE_KEYS,u,h,s[u].path);else{const d=TTe(c,u,h,l);if(d){const{type:f,options:p,input:v}=d,{onChange:y,transient:g,onEditStart:w,onEditEnd:b}=p,m=jn(p,qke);l[h]=Wt(Wt(Wt({type:f},m),v),{},{fromPanel:!0}),s[u]={path:h,onChange:y,transient:g,onEditStart:w,onEditEnd:b}}else Kl(vr.UNKNOWN_INPUT,h,c)}}),l};this.getDataFromSchema=a=>{const o={};return[i(a,"",o),o]}},F$=new L$;function QC(){return j.useMemo(()=>new L$,[])}const Gke={collapsed:!1};function $ke(n,e){return{type:Xo.FOLDER,schema:n,settings:Wt(Wt({},Gke),e)}}const Xke={disabled:!1};function Oc(n,e){return{type:Xo.BUTTON,onClick:n,settings:Wt(Wt({},Xke),e)}}const v6=n=>"__levaInput"in n,Yke=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[a,o]=Y3e(i);(!r||a.toLowerCase().indexOf(r)>-1)&&X3e(t,o,{[a]:{__levaInput:!0,path:i}})}),t},Zke=["type","label","path","valueKey","value","settings","setValue","disabled"];function Jke(n){let{type:e,label:t,path:r,valueKey:i,value:a,settings:o,setValue:s,disabled:l}=n,u=jn(n,Zke);const{displayValue:c,onChange:h,onUpdate:d}=KG({type:e,value:a,settings:o,setValue:s}),f=Sd[e].component;return f?Te.createElement(HG.Provider,{value:Wt({key:i,path:r,id:""+r,label:t,displayValue:c,value:a,onChange:h,onUpdate:d,settings:o,setValue:s,disabled:l},u)},Te.createElement($Te,{disabled:l},Te.createElement(f,null))):(Kl(vr.NO_COMPONENT_FOR_TYPE,e,r),null)}const Kke=Ht("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Qke({onClick:n,settings:e,label:t}){const r=Dm();return Te.createElement(os,null,Te.createElement(Kke,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const eNe=Ht("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),tNe=Ht("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),nNe=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function rNe(n){const{label:e,opts:t}=nNe(n),r=Dm();return Te.createElement(os,{input:!!e},e&&Te.createElement(Rs,null,e),Te.createElement(eNe,null,Object.entries(t).map(([i,a])=>Te.createElement(tNe,{key:i,onClick:()=>a(r.get)},i))))}const iNe=Ht("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),B$=100;function aNe(n,e){n.push(e),n.length>B$&&n.shift()}const oNe=j.forwardRef(function({initialValue:n},e){const t=uu("colors","highlight3"),r=uu("colors","elevation2"),i=uu("colors","highlight1"),[a,o]=j.useMemo(()=>[ga(i).alpha(.4).toRgbString(),ga(i).alpha(.1).toRgbString()],[i]),s=j.useRef([n]),l=j.useRef(n),u=j.useRef(n),c=j.useRef(),h=j.useCallback((p,v)=>{if(!p)return;const{width:y,height:g}=p,w=new Path2D,b=y/B$,m=g*.05;for(let C=0;C<s.current.length;C++){const T=_S(s.current[C],l.current,u.current),M=b*C,A=g-T*(g-m*2)-m;w.lineTo(M,A)}v.clearRect(0,0,y,g);const x=new Path2D(w);x.lineTo(b*(s.current.length+1),g),x.lineTo(0,g),x.lineTo(0,0);const S=v.createLinearGradient(0,0,0,g);S.addColorStop(0,a),S.addColorStop(1,o),v.fillStyle=S,v.fill(x),v.strokeStyle=r,v.lineJoin="round",v.lineWidth=14,v.stroke(w),v.strokeStyle=t,v.lineWidth=2,v.stroke(w)},[t,r,a,o]),[d,f]=nMe(h);return j.useImperativeHandle(e,()=>({frame:p=>{(l.current===void 0||p<l.current)&&(l.current=p),(u.current===void 0||p>u.current)&&(u.current=p),aNe(s.current,p),c.current=requestAnimationFrame(()=>h(d.current,f.current))}}),[d,f,h]),j.useEffect(()=>()=>cancelAnimationFrame(c.current),[]),Te.createElement(iNe,{ref:d})}),y6=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),sNe=j.forwardRef(function({initialValue:n},e){const[t,r]=j.useState(y6(n));return j.useImperativeHandle(e,()=>({frame:i=>r(y6(i))}),[]),Te.createElement("div",null,t)});function b6(n){return typeof n=="function"?n():n.current}function lNe({label:n,objectOrFn:e,settings:t}){const r=j.useRef(),i=j.useRef(b6(e));return j.useEffect(()=>{const a=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(b6(e))},t.interval);return()=>window.clearInterval(a)},[e,t.interval]),Te.createElement(os,{input:!0},Te.createElement(Rs,{align:"top"},n),t.graph?Te.createElement(oNe,{ref:r,initialValue:i.current}):Te.createElement(sNe,{ref:r,initialValue:i.current}))}const uNe=["type","label","key"],cNe={[Xo.BUTTON]:Qke,[Xo.BUTTON_GROUP]:rNe,[Xo.MONITOR]:lNe},hNe=Te.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:a,emitOnEditStart:o,emitOnEditEnd:s}]=iMe(n);if(!e)return null;const{type:l,label:u,key:c}=e,h=jn(e,uNe);if(l in Xo){const d=cNe[l];return Te.createElement(d,_r({label:u,path:n},h))}return l in Sd?Te.createElement(Jke,_r({key:a+n,type:l,label:u,storeId:a,path:n,valueKey:c,setValue:t,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:s},h)):(hTe(vr.UNSUPPORTED_INPUT,l,n),null)});function dNe({toggle:n,toggled:e,name:t}){return Te.createElement(WTe,{onClick:()=>n()},Te.createElement(UN,{toggled:e}),Te.createElement("div",null,t))}const fNe=({name:n,path:e,tree:t})=>{const r=Dm(),i=YN(e,n),{collapsed:a,color:o}=r.getFolderSettings(i),[s,l]=j.useState(!a),u=j.useRef(null),c=uu("colors","folderWidgetColor"),h=uu("colors","folderTextColor");return j.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",o||c),u.current.style.setProperty("--leva-colors-folderTextColor",o||h)},[o,c,h]),Te.createElement(AS,{ref:u},Te.createElement(dNe,{name:n,toggled:s,toggle:()=>l(d=>!d)}),Te.createElement(z$,{parent:i,tree:t,toggled:s}))},z$=Te.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:a})=>{const{wrapperRef:o,contentRef:s}=K3e(a),l=Dm(),u=([h,d])=>{var f;return(v6(d)?(f=l.getInput(d.path))===null||f===void 0?void 0:f.order:l.getFolderSettings(YN(r,h)).order)||0},c=Object.entries(i).sort((h,d)=>u(h)-u(d));return Te.createElement(ZM,{ref:o,isRoot:n,fill:e,flat:t},Te.createElement(XG,{ref:s,isRoot:n,toggled:a},c.map(([h,d])=>v6(d)?Te.createElement(hNe,{key:d.path,valueKey:d.valueKey,path:d.path}):Te.createElement(fNe,{key:h,name:h,path:r,tree:d}))))}),pNe=Ht("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${ZG}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),U$=40,NS=Ht("i",{$flexCenter:"",width:U$,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),mNe=Ht("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),gNe=Ht("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${NS}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),vNe=Ht("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),yNe=Ht("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:U$}}}}),bNe=Te.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=j.useState(""),a=j.useMemo(()=>LG(n,250),[n]),o=()=>{n(""),i("")},s=l=>{const u=l.currentTarget.value;e(!0),i(u)};return j.useEffect(()=>{a(r)},[r,a]),Te.createElement(Te.Fragment,null,Te.createElement(vNe,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:s}),Te.createElement(NS,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},Te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function xNe({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:a,title:o,drag:s,filterEnabled:l,from:u}){const[c,h]=j.useState(!1),d=j.useRef(null);j.useEffect(()=>{var p,v;c?(p=d.current)===null||p===void 0||p.focus():(v=d.current)===null||v===void 0||v.blur()},[c]);const f=oy(({offset:[p,v],first:y,last:g})=>{e({x:p,y:v}),y&&t({x:p,y:v}),g&&r({x:p,y:v})},{filterTaps:!0,from:({offset:[p,v]})=>[(u==null?void 0:u.x)||p,(u==null?void 0:u.y)||v]});return j.useEffect(()=>{const p=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&h(y=>!y)};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[]),Te.createElement(Te.Fragment,null,Te.createElement(mNe,{mode:s?"drag":void 0},Te.createElement(NS,{active:!a,onClick:()=>i()},Te.createElement(UN,{toggled:a,width:12,height:8})),Te.createElement(yNe,_r({},s?f():{},{drag:s,filterEnabled:l}),o===void 0&&s?Te.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},Te.createElement("circle",{cx:"2",cy:"2",r:"2"}),Te.createElement("circle",{cx:"14",cy:"2",r:"2"}),Te.createElement("circle",{cx:"26",cy:"2",r:"2"}),Te.createElement("circle",{cx:"2",cy:"12",r:"2"}),Te.createElement("circle",{cx:"14",cy:"12",r:"2"}),Te.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&Te.createElement(NS,{active:c,onClick:()=>h(p=>!p)},Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},Te.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),Te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),Te.createElement(gNe,{toggled:c},Te.createElement(bNe,{ref:d,setFilter:n,toggle:i})))}const wNe=["store","hidden","theme","collapsed"];function j$(n){let{store:e,hidden:t=!1,theme:r,collapsed:i=!1}=n,a=jn(n,wNe);const o=k$(()=>BTe(r),[r]),[s,l]=j.useState(!i),u=typeof i=="object"?!i.collapsed:s,c=j.useMemo(()=>typeof i=="object"?h=>{typeof h=="function"?i.onChange(!h(!i.collapsed)):i.onChange(!h)}:l,[i]);return!e||t?null:Te.createElement(FN.Provider,{value:o},Te.createElement(SNe,_r({store:e},a,{toggled:u,setToggle:c,rootClass:o.className})))}const SNe=Te.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:a=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:s=!1,toggled:l,setToggle:u})=>{var c,h;const d=Q3e(n),[f,p]=j.useState(""),v=j.useMemo(()=>Yke(d,f),[d,f]),[y,g]=QG(),w=i||d.length>0,b=typeof o=="object"&&o.title||void 0,m=typeof o=="object"&&(c=o.drag)!==null&&c!==void 0?c:!0,x=typeof o=="object"&&(h=o.filter)!==null&&h!==void 0?h:!0,S=typeof o=="object"&&o.position||void 0,C=typeof o=="object"&&o.onDrag||void 0,T=typeof o=="object"&&o.onDragStart||void 0,M=typeof o=="object"&&o.onDragEnd||void 0;return Te.useEffect(()=>{g({x:S==null?void 0:S.x,y:S==null?void 0:S.y})},[S,g]),FTe(),Te.createElement(WG.Provider,{value:{hideCopyButton:s}},Te.createElement(pNe,{ref:y,className:e,fill:t,flat:r,oneLineLabels:a,hideTitleBar:!o,style:{display:w?"block":"none"}},o&&Te.createElement(xNe,{onDrag:A=>{g(A),C==null||C(A)},onDragStart:A=>T==null?void 0:T(A),onDragEnd:A=>M==null?void 0:M(A),setFilter:p,toggle:A=>u(D=>A??!D),toggled:l,title:b,drag:m,filterEnabled:x,from:S}),w&&Te.createElement(VG.Provider,{value:n},Te.createElement(z$,{isRoot:!0,fill:t,flat:r,tree:v,toggled:l}))))}),ENe=["isRoot"];let OS=!1,Yh=null;function _Ne(n){let{isRoot:e=!1}=n,t=jn(n,ENe);return j.useEffect(()=>(OS=!0,!e&&Yh&&(Yh.remove(),Yh=null),()=>{e||(OS=!1)}),[e]),Te.createElement(j$,_r({store:F$},t))}function CNe(n){j.useEffect(()=>{n&&!OS&&(Yh||(Yh=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Yh),DTe(Te.createElement(_Ne,{isRoot:!0}),Yh))),OS=!0)},[n])}const ANe=["store"];function eA(n){let{store:e}=n,t=jn(n,ANe);const r=Dm(),i=e===void 0?r:e;return Te.createElement(j$,_r({store:i},t))}function TNe(n,e,t,r,i){let a,o,s,l,u;return typeof n=="string"?(o=n,a=e,Array.isArray(t)?u=t:t&&("store"in t?(l=t,u=r):(s=t,Array.isArray(r)?u=r:(l=r,u=i)))):(a=n,Array.isArray(e)?u=e:(l=e,u=t)),{schema:a,folderName:o,folderSettings:s,hookSettings:l,deps:u||[]}}function fb(n,e,t,r,i){const{folderName:a,schema:o,folderSettings:s,hookSettings:l,deps:u}=TNe(n,e,t,r,i),c=typeof o=="function",h=j.useRef(!1),d=j.useRef(!0),f=k$(()=>{h.current=!0;const D=typeof o=="function"?o():o;return a?{[a]:$ke(D,s)}:D},u),p=!(l!=null&&l.store);CNe(p);const[v]=j.useState(()=>(l==null?void 0:l.store)||F$),[y,g]=j.useMemo(()=>v.getDataFromSchema(f),[v,f]),[w,b,m,x,S]=j.useMemo(()=>{const D=[],O=[],U={},L={},F={};return Object.values(g).forEach(({path:k,onChange:P,onEditStart:z,onEditEnd:B,transient:X})=>{D.push(k),P?(U[k]=P,X||O.push(k)):O.push(k),z&&(L[k]=z),B&&(F[k]=B)}),[D,O,U,L,F]},[g]),C=j.useMemo(()=>v.orderPaths(w),[w,v]),T=eke(v,b,y),M=j.useCallback(D=>{const O=Object.entries(D).reduce((U,[L,F])=>Object.assign(U,{[g[L].path]:F}),{});v.set(O,!1)},[v,g]),A=j.useCallback(D=>v.get(g[D].path),[v,g]);return j.useEffect(()=>{const D=!d.current&&h.current;return v.addData(y,D),d.current=!1,h.current=!1,()=>v.disposePaths(C)},[v,C,y]),j.useEffect(()=>{const D=[];return Object.entries(m).forEach(([O,U])=>{U(v.get(O),O,Wt({initial:!0,get:v.get},v.getInput(O)));const L=v.useStore.subscribe(F=>{const k=F.data[O];return[k.disabled?void 0:k.value,k]},([F,k])=>U(F,O,Wt({initial:!1,get:v.get},k)),{equalityFn:WE});D.push(L)}),()=>D.forEach(O=>O())},[v,m]),j.useEffect(()=>{const D=[];return Object.entries(x).forEach(([O,U])=>D.push(v.subscribeToEditStart(O,U))),Object.entries(S).forEach(([O,U])=>D.push(v.subscribeToEditEnd(O,U))),()=>D.forEach(O=>O())},[x,S,v]),c?[T,M,A]:T}Pu(Ms.SELECT,wMe);Pu(Ms.IMAGE,Pke);Pu(Ms.NUMBER,hMe);Pu(Ms.COLOR,hke);Pu(Ms.STRING,kMe);Pu(Ms.BOOLEAN,FMe);Pu(Ms.INTERVAL,Hke);Pu(Ms.VECTOR3D,fke);Pu(Ms.VECTOR2D,wke);let MNe=class extends Vn{constructor(n){super(n),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("output","geometry",this,"geometry",""),this.name="Add Tag",this.atomType="Tag",this.height,this.description="Tags geometry so that it can be extracted later.",this.tags=[""],this.cutTag=!1,this.setValues(n)}draw(){super.draw("rect");let n=I.widthToPixels(this.radius);this.height=n,I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${n}px Work Sans Bold`,I.c.fillText("#",I.widthToPixels(this.x-this.radius/3),I.heightToPixels(this.y)+this.height/3),I.c.fill(),I.c.closePath()}checkHasTag(){return this.cutTag}addTagsToAvailableTags(){let n=Array.from(new Set(I.topLevelMolecule.projectAvailableTags.concat(this.tags)));I.topLevelMolecule.projectAvailableTags=n}createLevaInputs(){let n={};return n[this.uniqueID+"cut_string"]={value:this.cutTag,label:"Cut List Tag",onChange:e=>{this.cutTag!==e&&(e===!0?(this.cutTag=!0,this.tags.push("cutLayout"),this.name=this.tags.toString(),this.updateValue()):(this.cutTag=!1,this.tags=this.tags.filter(t=>t!=="cutLayout"),this.name=this.tags.toString(),this.updateValue()))}},n[this.uniqueID+"custom_string"]={value:this.tags.filter(e=>e!=="cutLayout")[0],label:"Add Tag",disabled:!1,onChange:e=>{this.tags=this.cutTag?["cutLayout"]:[],this.tags.push(e),this.name=this.tags.toString(),this.updateValue()}},n}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var n=this.findIOValue("geometry"),e=this.tags;this.addTagsToAvailableTags(),I.cad.tag(this.uniqueID,n,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}sendToRender(){console.log("tag has nothing to render")}serialize(){var n=super.serialize();return n.tags=this.tags,n.cutTag=this.cutTag,n}};class DNe extends Vn{constructor(e){super(e),this.addIO("input","number of sides",this,"number",6),this.addIO("input","diameter",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.name="RegularPolygon",this.atomType="RegularPolygon",this.description="Creates a new regular polygon. Corners are on the diameter.",this.setValues(e)}draw(){super.draw();let e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),r=I.widthToPixels(this.radius);I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-r/3,t+r/1.7),I.c.lineTo(e+r/3,t+r/1.7),I.c.lineTo(e+r/1.5,t),I.c.lineTo(e+r/2.5,t-r/1.7),I.c.lineTo(e-r/2.5,t-r/1.7),I.c.lineTo(e-r/1.5,t),I.c.lineTo(e-r/3,t+r/1.7),I.c.stroke(),I.c.closePath()}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}updateValue(){super.updateValue();var e=this.findIOValue("number of sides"),t=this.findIOValue("diameter");I.cad.regularPolygon(this.uniqueID,t/2,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}class kNe extends Vn{constructor(e){super(e),this.name="Extrude",this.atomType="Extrude",this.description="Extrudes a 2D shape. Input can be negitive. ",this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","height",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.rect(I.widthToPixels(this.x-this.radius/2),I.heightToPixels(this.y+this.radius),I.widthToPixels(this.radius),I.widthToPixels(this.radius/3)),I.c.fill(),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.rect(I.widthToPixels(this.x-this.radius/2),I.heightToPixels(this.y-this.radius*2),I.widthToPixels(this.radius),I.widthToPixels(this.radius)),I.c.stroke(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){var e=this.findIOValue("geometry"),t=this.findIOValue("height");I.cad.extrude(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class NNe extends Vn{constructor(e){super(e),this.addIO("input","geometry1",this,"geometry",""),this.addIO("input","geometry2",this,"geometry",""),this.addIO("output","geometry",this,"geometry",""),this.name="Intersection",this.atomType="Intersection",this.description="The space shared by two shapes.",this.setValues(e)}draw(){super.draw();const e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),r=I.widthToPixels(this.radius);I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-r/2,t+r/2),I.c.lineTo(e+r/2,t+r/2),I.c.lineTo(e+r/2,t),I.c.lineTo(e+r/4,t),I.c.lineTo(e+r/4,t-r/2),I.c.lineTo(e-r/4,t-r/2),I.c.lineTo(e-r/4,t),I.c.lineTo(e-r/2,t),I.c.lineTo(e-r/2,t+r/2),I.c.fill(),I.c.lineWidth=1,I.c.lineJoin="round",I.c.stroke(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;const e=this.findIOValue("geometry1"),t=this.findIOValue("geometry2");I.cad.intersect(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class ONe extends Vn{constructor(e){super(e),this.addIO("input","geometry2",this,"geometry",""),this.addIO("input","geometry1",this,"geometry",""),this.addIO("output","geometry",this,"geometry",""),this.name="Difference",this.atomType="Difference",this.description="Subtracts shape two from shape one.",this.setValues(e)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x),I.heightToPixels(this.y),I.widthToPixels(this.radius/3),0,Math.PI*2,!1),I.c.fill(),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.rect(I.widthToPixels(this.x-this.radius/2),I.heightToPixels(this.y-this.radius*2),I.widthToPixels(this.radius),I.widthToPixels(this.radius)),I.c.stroke(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;const e=this.findIOValue("geometry1"),t=this.findIOValue("geometry2");I.cad.difference(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class PNe extends Vn{constructor(e){super(e),this.type="constant",this.name="Constant",this.atomType="Constant",this.description="Defines a mathematical constant.",this.height=16,this.evolve=!1,this.min=0,this.max=20,this.value=10,this.setValues(e),this.addIO("output","number",this,"number",10),this.decreaseToProcessCountByOne()}draw(){super.draw("rect")}createLevaInputs(){let e={};return e["constant number"]={value:this.name,label:"Constant Name",disabled:!1,onChange:t=>{this.name=t}},e[this.uniqueID+this.name]={value:this.value,label:this.name,disabled:!1,onChange:t=>{this.value!==t&&(this.output.setValue(t),this.updateValue())}},e}updateValue(){this.value=this.output.getValue(),this.output.ready=!0,this.processing=!1}sendToRender(){I.writeToDisplay(this.uniqueID)}}class RNe extends Vn{constructor(e){super(e),this.addIO("output","result",this,"number",0),this.name="Equation",this.atomType="Equation",this.value=0,this.description="Defines a mathematical equation. Edit the output field to add or remove inputs.",this.height,this.currentEquation="x + y",this.setValues(e),this.addAndRemoveInputs(),this.setValues(e)}draw(){super.draw("rect");let e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),r=I.widthToPixels(this.radius);this.height=r,I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${r/1.5}px Work Sans Bold`,I.c.fillText("X + Y",e-r/1.2,t+this.height/3),I.c.fill(),I.c.closePath()}addAndRemoveInputs(){var e=/[a-zA-Z]/g;const t=this.currentEquation.match(e),r=()=>{this.inputs.forEach(a=>{t.includes(a.name)||(this.removeIO("input",a.name,this),r())})};r();for(var i in t)this.inputs.some(a=>a.Name===t[i])||this.addIO("input",t[i],this,"number",1)}evaluateEquation(){var e=this.currentEquation;this.name=this.currentEquation;var t=/[a-zA-Z]/g;const r=this.currentEquation.match(t);for(var i in r)for(var a=0;a<this.inputs.length;a++)this.inputs[a].name==r[i]&&(e=e.replace(this.inputs[a].name,this.findIOValue(this.inputs[a].name)));return I.limitedEvaluate(e)}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;e.equation={value:this.currentEquation,label:"Current Equation",disabled:!1,onChange:i=>{this.currentEquation!==i&&this.setEquation(i)}},e.result={value:this.output.value,label:"Result",disabled:!0},t.valueType!=="geometry"&&(e[t.name]={value:t.value,disabled:r(),onChange:i=>{t.setValue(i)}})}),e}updateValue(){try{this.addAndRemoveInputs(),this.inputs.every(e=>e.ready)&&(this.decreaseToProcessCountByOne(),this.value=this.evaluateEquation(),this.output.setValue(this.value),this.output.ready=!0)}catch(e){console.warn(e),this.setAlert(e)}}serialize(){var e=super.serialize();return e.currentEquation=this.currentEquation,e}setEquation(e){this.currentEquation=e.trim(),this.updateValue()}sendToRender(){console.log("equation")}}class INe extends Vn{constructor(e){super(e),this.atomType="Extract Tag",this.type="extractTag",this.height,this.name="Extract Tag",this.description="Extracts geometry containing the specified tag.",this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.tagIndex=0,this.tag,this.setValues(e)}draw(){super.draw("rect");let e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),r=I.widthToPixels(this.radius);this.height=r,I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${r}px Work Sans Bold`,I.c.fillText("#",e-r/1.2,t+this.height/3),I.c.fill(),I.c.closePath()}createLevaInputs(){let e={};const t=I.topLevelMolecule.projectAvailableTags;return e[this.uniqueID+"tag_ops"]={value:t[this.tagIndex],options:t,label:"Extract Tag",onChange:r=>{this.tagIndex=t.indexOf(r),this.tag!=t[this.tagIndex]&&(this.tag=t[this.tagIndex],this.updateValue())}},e}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.tag;I.cad.extractTag(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}serialize(){var e=super.serialize();return e.tag=this.tag,e.tagIndex=this.tagIndex,e}}class H${constructor(){this.BOMitemName="name",this.numberNeeded=1,this.costUSD=0,this.source="www.example.com",this.height}}class uy extends Vn{constructor(e){super(e),this.nodesOnTheScreen=[],this.inputs=[],this.name="Molecule",this.description="Molecules provide an organizational structure to contain atoms. Double click on a molecule to enter it. Use the up arrow in the upper right hand corner of the screen to go up one level.",this.atomType="Molecule",this.centerColor="#949294",this.topLevel=!1,this.processing=!1,this.totalAtomCount=1,this.toProcess=0,this.awaitingPropagationFlag=!1,this.units={MM:1,Inches:20},this.unitsKey,this.BOMlist,this.compiledBom={},this.projectAvailableTags=[],this.setValues(e),this.color}copyInputsFromParent(){this.parent&&this.parent.nodesOnTheScreen.forEach(e=>{e.atomType=="Input"&&this.placeAtom({parentMolecule:this,y:e.y,parent:this,name:e.name,atomType:"Input",uniqueID:I.generateUniqueID()},null,I.availableTypes,!0)})}draw(){const e=1-this.toProcess/this.totalAtomCount;this.toProcess>1?this.processing=!0:this.processing=!1,super.draw(),I.c.beginPath(),I.c.fillStyle=this.centerColor,I.c.moveTo(I.widthToPixels(this.x),I.heightToPixels(this.y)),I.c.arc(I.widthToPixels(this.x),I.heightToPixels(this.y),I.widthToPixels(this.radius)/2,0,e*Math.PI*2,!1),I.c.closePath(),I.c.fill()}createLevaInputs(){let e={};return e["molecule name"+this.uniqueID]={value:this.name,label:"Molecule Name",disabled:!1,onChange:t=>{this.name=t}},this.inputs&&this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),I.currentRepo.fork&&(e["Reload from Github"]=Oc(()=>{this.reloadFork()})),e}async reloadFork(){const e=new fu;var t=I.currentRepo.owner.login,r=I.currentRepo.name;e.request("GET /repos/{owner}/{repo}",{owner:t,repo:r}).then(i=>{e.rest.repos.getContent({owner:i.data.source.owner.login,repo:i.data.source.name,path:"project.abundance"}).then(a=>{I.topLevelMolecule.nodesOnTheScreen.forEach(s=>{s.deleteNode()});let o=JSON.parse(atob(a.data.content));o.filetypeVersion==1&&I.topLevelMolecule.deserialize(o),I.currentMolecule.selected=!0})})}async extractBomTags(){return await I.cad.extractBomList(this.output.value)}clickUp(e,t){super.clickUp(e,t),I.currentMolecule.nodesOnTheScreen.forEach(r=>{r.isMoving=!1})}doubleClick(e,t){e=I.pixelsToWidth(e),t=I.pixelsToHeight(t);var r=!1,i=I.distBetweenPoints(e,this.x,t,this.y);return i<this.radius*2&&(I.currentMolecule=this,this.selected=!1,r=!0),r}copy(){this.nodesOnTheScreen.forEach(e=>{e.selected&&I.atomsSelected.push(e.serialize({x:.03,y:.03}))})}deselect(){this.selected=!1}updateValue(e){this.nodesOnTheScreen.forEach(t=>{t.atomType=="Input"&&t.name==e&&t.updateValue()})}compileBom(){return this.extractBomTags().then(e=>{let t=[],r=[];if(e)return e.forEach(function(i){t[i.BOMitemName]||(t[i.BOMitemName]=new H$,t[i.BOMitemName].numberNeeded=0,t[i.BOMitemName].BOMitemName=i.BOMitemName,t[i.BOMitemName].source=i.source,r.push(t[i.BOMitemName])),t[i.BOMitemName].numberNeeded+=i.numberNeeded,t[i.BOMitemName].costUSD+=i.costUSD}),r=r.sort((i,a)=>i.source>a.source?1:a.source>i.source?-1:0),r})}createLevaBom(){let e={};if(this.compiledBom&&this.compiledBom.length>0)return this.compiledBom.map(t=>{e[t.BOMitemName]={value:t.costUSD+" USD",label:t.BOMitemName+"(x"+t.numberNeeded+")",disabled:!0}}),e["Download List of Materials"]=Oc(()=>console.log(result)),e}recomputeMolecule(e){console.log("recompute molecule in molecule"+this.name);try{I.cad.molecule(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing(),this.compileBom().then(t=>{this.compiledBom=t}),this.selected&&this.sendToRender()})}catch(t){this.setAlert(t)}}waitOnComingInformation(e){this.nodesOnTheScreen.forEach(t=>{t.name==e&&t.waitOnComingInformation()})}propagate(){try{this.updateValue()}catch(e){this.setAlert(e)}}beginPropagation(e=!1){this.nodesOnTheScreen.forEach(t=>{t.beginPropagation(e)}),this.inputs.forEach(t=>{t.beginPropagation()})}census(){return this.totalAtomCount=0,this.toProcess=0,this.nodesOnTheScreen.forEach(e=>{const t=e.census();this.totalAtomCount=this.totalAtomCount+t[0],this.toProcess=this.toProcess+t[1]}),[this.totalAtomCount,this.toProcess]}changeUnits(e){this.unitsIndex=e}goToParentMolecule(){I.currentMolecule.topLevel||(I.currentMolecule.nodesOnTheScreen.forEach(e=>{e.selected=!1}),I.currentMolecule.awaitingPropagationFlag==!0&&(I.currentMolecule.propagate(),I.currentMolecule.awaitingPropagationFlag=!1),I.currentMolecule=I.currentMolecule.parent)}async generateProjectThumbnail(){return I.cad.generateThumbnail(this.uniqueID)}async requestReadme(){var e=this.nodesOnTheScreen;e=e.filter(i=>i.atomType=="Molecule"||i.atomType=="Readme").sort(function(i,a){return I.distBetweenPoints(i.x,0,i.y,0)-I.distBetweenPoints(a.x,0,a.y,0)});const t=e.map(i=>i.requestReadme());let r=[];return await Promise.all(t).then(i=>{i.forEach(a=>{let o;a instanceof Array?a.forEach(s=>{o=s.readMeText,r.push({uniqueID:s.uniqueID,readMeText:o,svg:s.svg})}):(o=a.readMeText,a.svg&&(o=o.concat(` 

![readme](/readme`+a.uniqueID+`.svg)

`)),r.push({uniqueID:a.uniqueID,readMeText:o,svg:a.svg}))})}),r}serialize(e={x:0,y:0}){var t=[],r=[];this.nodesOnTheScreen.forEach(a=>{t.push(a.serialize()),a.output&&a.output.connectors.forEach(o=>{r.push(o.serialize())})});var i=super.serialize(e);return i.topLevel=this.topLevel,i.allAtoms=t,i.allConnectors=r,i.gitHubUniqueID=this.gitHubUniqueID,i.unitsKey=this.unitsKey,i.fileTypeVersion=1,i.compiledBom=this.compiledBom,i}deserialize(e,t={},r=!1){let i=[];return this.placeAtom({parentMolecule:this,x:.98,y:.5,parent:this,name:"Output",atomType:"Output",uniqueID:I.generateUniqueID()},!1),this.setValues(e),this.setValues(t),e.allAtoms&&e.allAtoms.forEach(a=>{const o=this.placeAtom(a,!1);i.push(o),this.setValues([])}),Promise.all(i).then(()=>{this.setValues([]),this.topLevel&&(I.totalAtomCount=I.numberOfAtomsToLoad,this.census(),this.beginPropagation(r)),e.allConnectors&&e.allConnectors.forEach(a=>{this.placeConnector(a)})})}async loadGithubMoleculeByID(e,t={},r={}){await new fu().request("GET /repositories/:id/contents/project.abundance",{id:e}).then(i=>{let a=JSON.parse(atob(i.data.content)),o=this.remapIDs(a);o.atomType="GitHubMolecule";let s={},l=I.generateUniqueID();t.ioValues!=null?s={uniqueID:l,x:this.x,y:this.y,gitHubUniqueID:e,topLevel:!1,ioValues:t.ioValues}:s={uniqueID:l,gitHubUniqueID:e,x:I.pixelsToWidth(I.lastClick[0]),y:I.pixelsToHeight(I.lastClick[1]),topLevel:!1},I.currentMolecule.placeAtom(o,!0,s).then(()=>{r.forEach(u=>{u.ap1ID==t.uniqueID&&(u.ap1ID=l,this.parent.placeConnector(u)),u.ap2ID==t.uniqueID&&(u.ap2ID=l,this.parent.placeConnector(u))})})})}remapIDs(e){let t={};if(e.allAtoms)return e.allAtoms.forEach(r=>{let i=r.uniqueID,a=I.generateUniqueID();t[i]=a,r.uniqueID=a}),e.allConnectors.forEach(r=>{r.ap1ID&&t[r.ap1ID]&&(r.ap1ID=t[r.ap1ID]),r.ap2ID&&t[r.ap2ID]&&(r.ap2ID=t[r.ap2ID]),r.ap2ID&&t[r.ap2ID]&&(r.ap2ID=t[r.ap2ID])}),e}deleteNode(e=!0,t=!0,r=!1){[...this.nodesOnTheScreen].forEach(i=>{i.deleteNode(e,t,r)}),super.deleteNode(e,t,r)}async placeAtom(e,t,r){try{I.numberOfAtomsToLoad=I.numberOfAtomsToLoad+1;let o=null;for(var i in I.availableTypes)if(I.availableTypes[i].atomType==e.atomType){e.parent=this;var a=new I.availableTypes[i].creator(e);(a.atomType=="Molecule"||a.atomType=="GitHubMolecule")&&(o=a.deserialize(e,r,!0),t&&a.beginPropagation()),a.atomType=="Input"&&typeof e.name<"u"?(a.name=e.name,a.draw()):a.atomType=="Input"&&(a.name=I.incrementVariableName(a.name,this)),a.atomType=="Output"&&this.nodesOnTheScreen.forEach(s=>{s.atomType=="Output"&&s.deleteOutputAtom(!1)}),this.nodesOnTheScreen.push(a),t&&(a.atomType=="Molecule"&&(a.copyInputsFromParent(),o!=null?o.then(()=>{a.beginPropagation()}):a.beginPropagation()),a.updateValue())}return o}catch(o){return console.warn("Unable to place: "+e),console.warn(o),Promise.resolve()}}placeConnector(e){var t=!1,r=!1;this.nodesOnTheScreen.forEach(i=>{i.uniqueID==e.ap1ID&&(t=i.output),i.uniqueID==e.ap2ID&&i.inputs.forEach(a=>{a.name==e.ap2Name&&(r=a)})}),t&&r?new Yq({atomType:"Connector",attachmentPoint1:t,attachmentPoint2:r}):console.warn("Unable to place connector")}sendToRender(){I.writeToDisplay(this.uniqueID)}}class LNe extends Vn{constructor(e){super(e),this.name="Genetic Algorithm",this.atomType="Genetic Algorithm",this.description="Defines a new genetic algorithm which will simulate evolution to maximize the fitness function using the input population size and number of generations. Only constants which are upstream of this atom with evolve checked will be changed.",this.constantsToEvolve=[],this.population=[],this.individualIndex=0,this.generation=0,this.topFitness=0,this.evolutionInProcess=!1,this.addIO("input","fitness function",this,"number",0),this.addIO("input","population size",this,"number",50),this.addIO("input","number of generations",this,"number",10),this.setValues(e),this.updateValue()}draw(){super.draw();const e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),r=I.widthToPixels(this.radius);I.c.beginPath(),I.c.arc(I.widthToPixels(this.x-this.radius/5),I.heightToPixels(this.y),I.widthToPixels(this.radius/2),Math.PI*3.4,Math.PI*2.7,!1),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.arc(I.widthToPixels(this.x+this.radius/5),I.heightToPixels(this.y),I.widthToPixels(this.radius/2),Math.PI*3.6,Math.PI*2.3,!0),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-r/3,t),I.c.lineTo(e+r/3,t),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-r/3,t-r/5),I.c.lineTo(e+r/3,t-r/5),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-r/3,t+r/5),I.c.lineTo(e+r/3,t+r/5),I.c.stroke(),I.c.closePath()}updateValue(){this.decreaseToProcessCountByOne(),this.evolutionInProcess&&(this.updateSidebar(),this.processing=!0,this.population[this.individualIndex].fitness=this.findIOValue("fitness function"),this.individualIndex=this.individualIndex+1,this.individualIndex<this.findIOValue("population size")?this.beginEvaluatingIndividual():(this.generation=this.generation+1,this.generation<this.findIOValue("number of generations")?(this.breedAndCullPopulation(),this.individualIndex=0,this.beginEvaluatingIndividual()):(this.evolutionInProcess=!1,this.processing=!1,this.population=this.population.sort((e,t)=>parseFloat(t.fitness)-parseFloat(e.fitness)),this.individualIndex=0,this.generation=0,this.beginEvaluatingIndividual(),this.updateSidebar())))}updateSidebar(){if(this.evolutionInProcess){let o=document.querySelector(".sideBar");for(;o.firstChild;)o.removeChild(o.firstChild);var e=document.createElement("ul");o.appendChild(e),e.setAttribute("class","sidebar-list");var t=document.createElement("LI");e.appendChild(t);var r=document.createElement("div");t.appendChild(r);var i=document.createTextNode("Evolving...   Individual: "+this.individualIndex+",    Generation: "+this.generation+",    Best Fitness Value: "+this.topFitness);r.appendChild(i),r.setAttribute("class","sidebar-subitem label-item")}else{var a=super.updateSidebar();this.createButton(a,this,"Evolve",()=>{this.evolutionInProcess=!0,this.updateConstantsList(),this.initializePopulation(),this.beginEvaluatingIndividual()})}}beginEvaluatingIndividual(){const e=this.population[this.individualIndex];e.genome.forEach(t=>{t.constantAtom.output.waitOnComingInformation()}),e.genome.forEach(t=>{t.constantAtom.output.value=t.newValue}),e.genome.forEach(t=>{t.constantAtom.updateValue()})}getRandomValue(e,t){return Math.random()*(t-e)+e}initializePopulation(){this.population=[],this.individualIndex=0,this.generation=0,this.topFitness=0;for(var e=0;e<this.findIOValue("population size");){var t=[];this.constantsToEvolve.forEach(i=>{var a={newValue:this.getRandomValue(i.min,i.max),constantAtom:i};t.push(a)});var r={genome:t,fitness:null};this.population.push(r),e++}}breedTwo(e,t){const r=e.genome.length;for(var i={fitness:null,genome:[]},a=0;a<r;){var o={newValue:null,constantAtom:e.genome[a].constantAtom};const l=e.genome[a].constantAtom.max,u=e.genome[a].constantAtom.min,c=.1*(l-u)*(Math.random()-.5);var s=null;Math.random()>.5?s=e.genome[a].newValue+c:s=t.genome[a].newValue+c,o.newValue=Math.min(Math.max(s,u),l),i.genome.push(o),a++}return i}breedAndCullPopulation(){this.population=this.population.sort((a,o)=>parseFloat(o.fitness)-parseFloat(a.fitness)),this.topFitness=this.population[0].fitness;const e=Math.round(this.population.length/5),t=this.population.slice(0,e);for(var r=[],i=0;i<this.population.length-e;){const a=Math.round(Math.random()*(t.length-1)),o=Math.round(Math.random()*(t.length-1)),s=this.breedTwo(t[a],t[o]);r.push(s),i=i+1}this.population=t.concat(r)}updateConstantsList(){this.constantsToEvolve=[],this.inputs.forEach(e=>{e.connectors.forEach(t=>{t.walkBackForConstants(r=>{this.addToConstantsList(r)})})})}addToConstantsList(e){this.constantsToEvolve.push(e)}}let FNe=class extends Vn{constructor(n){super(n),this.name,this.description="Adds an input to the parent molecule. If the parent molecule is the top level of the project then the input will be available when the project is shared or imported into another project. Name is editable",this.value=10,this.atomType="Input",this.height,this.oldName=this.name,this.addIO("output","number or geometry",this,"number or geometry",10),typeof this.parent<"u"&&this.parent.addIO("input",this.name,this.parent,"number or geometry",10),this.setValues(n)}draw(){this.x=this.radius;let n=I.widthToPixels(this.x),e=I.heightToPixels(this.y),t=I.widthToPixels(this.radius);this.height=t*1.3,this.name!=this.oldName&&this.updateParentName(),this.processing?I.c.fillStyle="blue":this.selected?(I.c.fillStyle=this.selectedColor,I.c.strokeStyle=this.defaultColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(I.c.fillStyle=this.defaultColor,I.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),this.inputs.forEach(r=>{r.draw()}),this.output&&this.output.draw(),I.c.font="10px Work Sans",I.c.textAlign="start",I.c.fillText(this.name,n+t,e-t),I.c.beginPath(),I.c.moveTo(n-t,e+this.height/2),I.c.lineTo(n,e+this.height/2),I.c.lineTo(n+t,e),I.c.lineTo(n,e-this.height/2),I.c.lineTo(n-t,e-this.height/2),I.c.lineWidth=1,I.c.fill(),I.c.closePath(),I.c.stroke()}deleteNode(n=!0,e=!0,t=!1){typeof this.parent<"u"&&this.parent.removeIO("input",this.name,this.parent,t),super.deleteNode(n,e,t)}updateParentName(){this.parent.inputs.forEach(n=>{n.name==this.oldName&&(n.name=this.name)}),this.oldName=this.name}updateValue(){this.parent.inputs.forEach(n=>{n.name==this.name&&(this.decreaseToProcessCountByOne(),this.value=n.getValue(),this.output.waitOnComingInformation(),this.output.setValue(this.value))})}createLevaInputs(){let n={};return n[this.uniqueID]={value:this.name,label:"Input Name",disabled:!1,onChange:e=>{this.name!==e&&(this.name=e)}},n}getOutput(){return this.output.getValue()}};class BNe extends Vn{constructor(e){super(e),this.atomType="Readme",this.readmeText="Readme text here",this.type="readme",this.name="README",this.radius=1/72,this.description="A place to put project notes. These will appear in the GitHub readme and in the description of molecules up the chain. Markdown is supported. ",this.height=10,this.global=!0,this.addIO("input","geometry",this,"geometry",void 0),this.setValues(e)}draw(){super.draw("rect");let e=I.widthToPixels(this.radius);this.height=e*1.5,I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${e*1.5}px Work Sans Bold`,I.c.fillText("//",I.widthToPixels(this.x-this.radius/2),I.heightToPixels(this.y)+this.height/3),I.c.fill(),I.c.closePath()}setValue(e){this.readmeText=e}createLevaInputs(){let e={};return e[this.name+this.uniqueID]={value:this.readmeText,label:this.name,rows:10,onChange:t=>{this.readmeText!==t&&this.setValue(t)}},e}async generateProjectThumbnail(){let e=this.findIOValue("geometry");return e!==void 0?I.cad.generateThumbnail(e):null}async requestReadme(){return this.global?this.generateProjectThumbnail().then(e=>e!==null?{readMeText:this.readmeText,svg:e,uniqueID:this.uniqueID}:{readMeText:this.readmeText,svg:null,uniqueID:this.uniqueID}).catch(e=>{console.log(e)}):[]}sendToRender(){console.log("nothing to render in readme")}deleteNode(){super.deleteNode()}serialize(e){var t=super.serialize(e);return t.readmeText=this.readmeText,t.global=this.global,t}}class zNe extends Vn{constructor(e){super(e),this.atomType="Add BOM Tag",this.type="addBOMTag",this.name="Add BOM Tag",this.description="Adds a Bill Of Materials tag which appears in molecules containing this atom and in the GitHub project bill of materials.",this.BOMitem=new H$,this.radius=1/65,this.height,this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.setValues(e)}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){var e=this.findIOValue("geometry"),t=this.BOMitem;I.cad.bom(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}draw(){super.draw("rect");let e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),r=I.widthToPixels(this.radius);this.height=r/1.3,I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${r/1.5}px Work Sans Bold`,I.c.fillText("$$$",e-r/2,t+this.height/3),I.c.fill(),I.c.closePath()}createLevaInputs(){let e={};for(const t in this.BOMitem)e[t]={value:this.BOMitem[t],label:t,disabled:!1,onChange:r=>{this.BOMitem[t]=r,this.updateValue()}};return e}serialize(e){var t=super.serialize(e);return t.BOMitem=Object.assign({},this.BOMitem),t}}class UNe extends Vn{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","x-axis degrees",this,"number",0),this.addIO("input","y-axis degrees",this,"number",0),this.addIO("input","z-axis degrees",this,"number",0),this.addIO("output","geometry",this,"geometry",""),this.name="Rotate",this.atomType="Rotate",this.description="Rotates the input geometry around the X, Y, or Z axis. Inputs are degrees.",this.setValues(e)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.ellipse(I.widthToPixels(this.x),I.heightToPixels(this.y),I.widthToPixels(this.radius/1.5),I.widthToPixels(this.radius/2.3),Math.PI/4,0,Math.PI*2),I.c.stroke(),I.c.closePath()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,step:.5,disabled:r(),onChange:i=>{t.value!==i&&(console.log(t.name,i),t.setValue(i))}})}),e}updateValue(){if(super.updateValue(),this.inputs.every(a=>a.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("x-axis degrees"),r=this.findIOValue("y-axis degrees"),i=this.findIOValue("z-axis degrees");I.cad.rotate(this.uniqueID,e,t,r,i).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class jNe extends uy{constructor(e){super(e),this.name="Github Molecule",this.atomType="GitHubMolecule",this.topLevel=!1,this.centerColor="black",this.description="Project imported from GitHub",this.gitHubUniqueID,this.setValues(e)}doubleClick(e,t){var r=!1,i=I.distBetweenPoints(e,this.x,t,this.y);return i<this.radius&&(r=!0),r}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}}),e["Reload From Github"]=Oc(()=>this.reloadMoleculeFromGithub())}),e}reloadMoleculeFromGithub(){var e=this.serialize(),t=this.parent.serialize().allConnectors;this.deleteNode(!1,!1,!0),this.loadGithubMoleculeByID(this.gitHubUniqueID,e,t)}}class HNe extends Vn{constructor(e){super(e),typeof this.parent<"u"&&this.parent.addIO("output","Geometry",this.parent,"geometry",this.parent.path),this.type="output",this.name="Output",this.value=null,this.atomType="Output",this.height=16,this.radius=1/75,this.path="",this.description="Connect geometry here to make it available in the next level up. ",this.setValues(e),this.addIO("input","number or geometry",this,"geometry",void 0)}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.decreaseToProcessCountByOne();var e=this.findIOValue("number or geometry");I.cad.output(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing(),this.parent.recomputeMolecule(this.uniqueID)}).catch(this.alertingErrorHandler()),this.parent.propagate()}}sendToRender(){try{I.writeToDisplay(this.uniqueID)}catch(e){this.setAlert(e)}}waitOnComingInformation(){this.parent.output.waitOnComingInformation()}deleteNode(){}deleteOutputAtom(e=!0){super.deleteNode(!1,e)}draw(){const e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),r=I.widthToPixels(this.radius);this.height=r,this.processing?I.c.fillStyle="blue":this.selected?(I.c.fillStyle=this.selectedColor,I.c.strokeStyle=this.defaultColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(I.c.fillStyle=this.defaultColor,I.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),this.inputs.forEach(i=>{i.draw()}),I.c.beginPath(),I.c.font="10px Work Sans",I.c.textAlign="start",I.c.fillText(this.name,e-r,t-r*1.5),I.c.moveTo(e+r-r*2,t-this.height),I.c.lineTo(e+r-5,t),I.c.lineTo(e+r-r*2,t+this.height),I.c.lineTo(e+r-r*2,t-this.height),I.c.fillStyle=this.color,I.c.fill(),I.c.lineWidth=3,I.c.lineJoin="round",I.c.stroke(),I.c.closePath()}}class VNe extends Vn{constructor(e){super(e),this.name="Gcode",this.atomType="Gcode",this.height=16,this.description="Generates Maslow gcode from the input geometry.",this.gcodeString="",this.addIO("input","geometry",this,"geometry",null),this.addIO("input","tool size",this,"number",6.35),this.addIO("input","passes",this,"number",6),this.addIO("input","speed",this,"number",500),this.addIO("input","tabs",this,"string","true"),this.addIO("input","safe height",this,"number",6),this.addIO("output","gcode",this,"geometry",""),this.setValues(e)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${I.widthToPixels(this.radius)}px Work Sans Bold`,I.c.fillText("G",I.widthToPixels(this.x-this.radius/3),I.heightToPixels(this.y)+this.height/3),I.c.fill(),I.c.closePath()}updateValue(){super.updateValue();try{var e=this.findIOValue("geometry"),t=this.findIOValue("tool size"),r=this.findIOValue("passes"),i=this.findIOValue("speed"),a=this.findIOValue("tabs"),o=this.findIOValue("safe height");const s={op:"gcode",readPath:e,toolSize:t,passes:r,speed:i,tabs:a,safeHeight:o,writePath:this.path};this.gcodeString=this.basicThreadValueProcessing(s)}catch(s){this.setAlert(s)}}updateSidebar(){const e=super.updateSidebar();this.createButton(e,this,"Download G-Code",()=>{this.downloadGCode()})}downloadGCode(){try{var e=this.findIOValue("geometry"),t=this.findIOValue("tool size"),r=this.findIOValue("passes"),i=this.findIOValue("speed"),a=this.findIOValue("tabs"),o=this.findIOValue("safe height");const s={op:"gcode",readPath:e,toolSize:t,passes:r,speed:i,tabs:a,safeHeight:o,writePath:this.path},{answer:l}=window.ask(s)}catch(s){this.setAlert(s)}}}class WNe extends Vn{constructor(e){super(e),this.name="Code",this.atomType="Code",this.description="Defines a Replicad code block.",this.code=`//Inputs:[input1, height];

let shape = drawRectangle(5,7)

const newPlane = new Plane().pivot(0, 'Y');

 return { geometry: [shape.sketchOnPlane(newPlane).extrude(7)], tags: [],
      color: '#A3CE5B',
      plane: newPlane}


    /**
    To Use the Code Atom, enter your inputs to the input list a.e Inputs:[shape, height]
    If your input is connected to another atom with a replicad geometry you can access its geometry by looking up its ID in your library. a.e library[Input1].geometry[0] 
    Use any replicad available methods to modify your geometry. Learn more about all of the available methods at 
    https://replicad.xyz/docs/introapp/UserGuide.html 
    Return a replicad object that includes geometry, color, tags and plane. 


    Example Code Atom:

      Inputs:[shape, x];

      let finalShape = library[shape].geometry[0].clone.translate[x,0,0]

      return {geometry: finalShape, color: library[shape].color, plane: library[shape].plane, tags: library[shape].tags }

      - See more examples at _______ 


    */
`,this.addIO("output","geometry",this,"geometry",""),this.setValues(e),this.parseInputs(!1)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.font=`${I.widthToPixels(this.radius)}px Work Sans Bold`,I.c.fillText("</>",I.widthToPixels(this.x-this.radius/1.5),I.heightToPixels(this.y+this.radius*1.5))}beginPropagation(){this.inputs.length==0&&this.updateValue();var e=!1;this.inputs.forEach(t=>{t.connectors.length>0&&(e=!0)}),e||this.updateValue()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}}}),e["Edit Code"]=Oc(()=>this.editCode()),e["Save Code"]=Oc(()=>this.saveCode()),e["Close Editor"]=Oc(()=>this.closeCode()),e}updateCode(e){this.code=e,this.updateValue(),this.sendToRender()}updateValue(e){if(super.updateValue(),this.parseInputs(),this.inputs.every(i=>i.ready)){var t=[];this.inputs.forEach(i=>{i.connectors.length>0&&i.type=="input"&&t.push(i.getValue())});var r={};this.inputs.forEach(i=>{r[i.name]=i.value}),I.cad.code(this.uniqueID,this.code,r).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}parseInputs(e=!0){var t=/Inputs:\[\s*([^)]+?)\s*\]/.exec(this.code);if(t){t[1]&&(t=t[1].split(/\s*,\s*/));let a=[];for(var r in t){t[r]=t[r].split(/\s*=\s*/);let o=t[r][0];a.push(o);let s=t[r][1]?t[r][1]:10;this.inputs.some(l=>l.Name===o)||this.addIO("input",o,this,"geometry",s,e)}for(var i in this.inputs)a.includes(this.inputs[i].name)||this.removeIO("input",this.inputs[i].name,this)}}doubleClick(e,t){let r=I.widthToPixels(this.x),i=I.heightToPixels(this.y);var a=!1,o=I.distBetweenPoints(e,r,t,i);return o<this.radius&&(this.editCode(),a=!0),a}editCode(){document.getElementById("code-window").classList.remove("code-off")}saveCode(){document.getElementById("save-code-button").click()}closeCode(){document.getElementById("close-code-button").click()}serialize(e){var t=super.serialize(e);return t.codeVersion=1,t.code=this.code,t}}let qNe=class extends Vn{constructor(n){super(n),this.addIO("output","geometry",this,"geometry",""),this.name="Group",this.atomType="Group",this.ioValues=[],this.removeCutawayGeometry=!0,this.description="Groups shapes together into one. Shapes are allowed to overlap.",this.setValues(n),typeof this.ioValues<"u"&&this.ioValues.forEach(e=>{this.addIO("input",e.name,this,"geometry","")}),this.setValues([])}beginPropagation(){Z0(this),super.beginPropagation()}draw(){super.draw();const n=I.widthToPixels(this.x),e=I.heightToPixels(this.y),t=I.widthToPixels(this.radius);I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(n-t/2,e+t/2),I.c.lineTo(n+t/2,e+t/2),I.c.lineTo(n+t/2,e),I.c.lineTo(n-t/2,e),I.c.lineTo(n-t/2,e+t/2),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.lineTo(n+t/4,e-t/2),I.c.lineTo(n-t/4,e-t/2),I.c.lineTo(n-t/4,e),I.c.lineTo(n+t/2,e),I.c.lineTo(n+t/4,e-t/2),I.c.lineWidth=1,I.c.lineJoin="round",I.c.stroke(),I.c.closePath()}updateValue(){if(this.inputs.every(e=>e.ready)){try{var n=[];this.inputs.forEach(t=>{t.connectors.length>0&&t.type=="input"&&n.push(t.getValue())});const e={op:"group",paths:n,writePath:this.path};this.basicThreadValueProcessing(e,"group"),this.clearAlert()}catch(e){this.setAlert(e)}Z0(this)}}serialize(n){var e=super.serialize(n),t=[];return this.inputs.forEach(r=>{if(r.connectors.length>0){var i={name:r.name,ioValue:r.getValue()};t.push(i)}}),e.ioValues=t,e}};class GNe extends Vn{constructor(e){super(e),dte(this,"getAFile",async function(){const t=new fu,r=this.fileName;return await t.rest.repos.getContent({owner:I.currentUser,repo:I.currentRepoName,path:r})}),this.name="Import",this.atomType="Import",this.description="Import Atom, let's you choose a type of file to import and use in your design.",this.file=null,this.fileName=null,this.type=null,this.sha=null,this.SVGdepth=10,this.SVGwidth=10,this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${I.widthToPixels(this.radius)}px Work Sans Bold`,I.c.fillText("G",I.widthToPixels(this.x-this.radius/3),I.heightToPixels(this.y)+this.height/3),I.c.fill(),I.c.closePath()}updateValue(){super.updateValue();try{if(this.processing=!0,this.file!=null){let e=this.file,t=this.type,r=t=="STL"?I.cad.importingSTL:t=="SVG"?I.cad.importingSVG:t=="STEP"?I.cad.importingSTEP:null;if(r==null)throw"Invalid file type";r(this.uniqueID,e,this.SVGdepth,this.SVGwidth).then(i=>{this.basicThreadValueProcessing(),this.sendToRender()})}else this.getAFile().then(e=>{this.sha=e.data.sha,this.file=this.newBlobFromBase64(e),this.updateValue()})}catch{this.alertingErrorHandler()}}newBlobFromBase64(e){let t=e.data.content,r=atob(t);if(this.type=="SVG")return r;let i=[];for(let a=0;a<r.length;a++)i.push(r.charCodeAt(a));return new Blob([new Uint8Array(i)],{type:"application/octet-stream"})}beginPropagation(){this.fileName!=null&&this.updateValue()}createLevaInputs(){let e={};if(this.fileName==null){const t=["STL","SVG","STEP"];let r=0;e[this.uniqueID+"file_ops"]={options:t,label:"File Type",onChange:i=>{r=t.indexOf(i)}},e["Load File"]=Oc(()=>this.loadFile(t[r]))}else this.type=="SVG"&&(e.Width={value:this.SVGwidth,label:"Width",onChange:t=>{this.SVGwidth=t,this.updateValue()}},e.Depth={value:this.SVGdepth,label:"Depth",onChange:t=>{this.SVGdepth=t,this.updateValue()}}),e["Loaded File"]={value:this.fileName,label:"Loaded File",disabled:!0};return e}loadFile(e){var t=document.getElementById("fileLoaderInput");t.accept="."+e.toLowerCase(),t.click(),this.type=e}deleteNode(){super.deleteNode();var e=document.getElementById("fileDeleteInput");e.value=this.fileName,e.click()}updateFile(e,t){this.file=e,this.fileName=e.name,this.sha=t,this.updateValue(this.type,this.file)}serialize(){var e=super.serialize();return e.fileName=this.fileName,e.name=this.name,e.type=this.type,e.SVGdepth=this.SVGdepth,e.SVGwidth=this.SVGwidth,e}}var V$={exports:{}};(function(n,e){(function(t,r){r()})(fo,function(){function t(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,h){var d=new XMLHttpRequest;d.open("GET",u),d.responseType="blob",d.onload=function(){l(d.response,c,h)},d.onerror=function(){console.error("could not download file")},d.send()}function i(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function a(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof fo=="object"&&fo.global===fo?fo:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,c,h){var d=o.URL||o.webkitURL,f=document.createElement("a");c=c||u.name||"download",f.download=c,f.rel="noopener",typeof u=="string"?(f.href=u,f.origin===location.origin?a(f):i(f.href)?r(u,c,h):a(f,f.target="_blank")):(f.href=d.createObjectURL(u),setTimeout(function(){d.revokeObjectURL(f.href)},4e4),setTimeout(function(){a(f)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,h){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,h),c);else if(i(u))r(u,c,h);else{var d=document.createElement("a");d.href=u,d.target="_blank",setTimeout(function(){a(d)})}}:function(u,c,h,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,h);var f=u.type==="application/octet-stream",p=/constructor/i.test(o.HTMLElement)||o.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||f&&p||s)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var b=y.result;b=v?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=b:location=b,d=null},y.readAsDataURL(u)}else{var g=o.URL||o.webkitURL,w=g.createObjectURL(u);d?d.location=w:location.href=w,d=null,setTimeout(function(){g.revokeObjectURL(w)},4e4)}});o.saveAs=l.saveAs=l,n.exports=l})})(V$);var W$=V$.exports;class $Ne extends Vn{constructor(e){super(e),this.name="Export",this.atomType="Export",this.description="Export Atom, let's you choose a type of file to Export.",this.value=null,this.type=null,this.addIO("input","geometry",this,"geometry",""),this.setValues(e),this.importIndex=0}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${I.widthToPixels(this.radius)}px Work Sans Bold`,I.c.fillText("G",I.widthToPixels(this.x-this.radius/3),I.heightToPixels(this.y)+this.height/3),I.c.fill(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;let e=this.findIOValue("geometry"),t=this.type;I.cad.visExport(this.uniqueID,e,t).then(r=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}createLevaInputs(){let e={};const t=["STL","SVG","STEP"];return e[this.uniqueID+"file_ops"]={value:t[this.importIndex],options:t,label:"File Type",onChange:r=>{this.importIndex=t.indexOf(r),this.type!=t[this.importIndex]&&(this.type=t[this.importIndex],this.updateValue())}},e["Download File"]=Oc(()=>this.exportFile()),e}exportFile(){let e=this.type;I.cad.downExport(this.uniqueID,e).then(t=>{W$.saveAs(t,I.currentMolecule.name+"."+e.toLowerCase())}).catch(this.alertingErrorHandler())}}const XNe={ROBOTO:"https://fonts.gstatic.com/s/roboto/v15/W5F8_SL0XFawnjxHGsZjJA.ttf",NOTOSANS:"http://fonts.gstatic.com/s/notosansdisplay/v20/RLplK4fy6r6tOBEJg0IAKzqdFZVZxokvfn_BDLxR.ttf",ANONYMOUSPRO:"http://fonts.gstatic.com/s/anonymouspro/v14/rP2Bp2a15UIB7Un-bOeISG3pLlw89CH98Ko.ttf",MONSERRAT:"http://fonts.gstatic.com/s/montserrat/v15/JTURjIg1_i6t8kCHKm45_dJE3gnD-w.ttf"};let YNe=class extends Vn{constructor(n){super(n),this.name="Text",this.atomType="Text",this.description="Creates a new text sketch.",this.fontFamily="ROBOTO",this.addIO("input","Font Size",this,"number",10),this.addIO("input","Text",this,"string","Lorem Ipsum"),this.addIO("output","geometry",this,"geometry",""),this.setValues(n)}beginPropagation(n=!1){this.inputs.forEach(e=>{e.beginPropagation()})}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${I.widthToPixels(this.radius)}px Work Sans Bold`,I.c.fillText("T",I.widthToPixels(this.x-this.radius/3),I.heightToPixels(this.y)+this.height/3),I.c.fill(),I.c.closePath()}createLevaInputs(){let n={};this.inputs&&this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(n[this.uniqueID+t.name]={value:t.value,label:t.name,step:.25,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})});const e=XNe;return n["Font Family"]={options:Object.keys(e),label:"Font Family",onChange:t=>{this.fontFamily=t,this.updateValue()}},n}updateValue(){super.updateValue();var n=this.findIOValue("Font Size"),e=this.findIOValue("Text");let t=this.fontFamily;I.cad.text(this.uniqueID,e,n,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}serialize(){var n=super.serialize(),e=[];return this.inputs.forEach(t=>{if(t.connectors.length>0){var r={name:t.name,ioValue:t.getValue()};e.push(r)}}),n.ioValues=e,n.fontFamily=this.fontFamily,n}};class ZNe{constructor(){this.canvas=null,this.c=null,this.availableTypes={intersection:{creator:NNe,atomType:"Intersection",atomCategory:"Interactions"},difference:{creator:ONe,atomType:"Difference",atomCategory:"Interactions"},union:{creator:S_e,atomType:"Join",atomCategory:"Interactions"},group:{creator:qNe,atomType:"Group",atomCategory:"None"},loft:{creator:M_e,atomType:"Loft",atomCategory:"Interactions"},shrinkWrap:{creator:A_e,atomType:"ShrinkWrap",atomCategory:"Interactions"},readme:{creator:BNe,atomType:"Readme",atomCategory:"Tags"},addBOMTag:{creator:zNe,atomType:"Add-BOM-Tag",atomCategory:"Tags"},color:{creator:__e,atomType:"Color",atomCategory:"Actions"},tag:{creator:MNe,atomType:"Tag",atomCategory:"Tags"},extracttag:{creator:INe,atomType:"ExtractTag",atomCategory:"Tags"},cutLayout:{creator:C_e,atomType:"CutLayout",atomCategory:"Tags"},regularPolygon:{creator:DNe,atomType:"RegularPolygon",atomCategory:"Shapes"},costant:{creator:PNe,atomType:"Constant",atomCategory:"Inputs"},circle:{creator:E_e,atomType:"Circle",atomCategory:"Shapes"},text:{creator:YNe,atomType:"Text",atomCategory:"Shapes"},rectangle:{creator:T_e,atomType:"Rectangle",atomCategory:"Shapes"},molecule:{creator:uy,atomType:"Molecule",atomCategory:"Shapes"},input:{creator:FNe,atomType:"Input",atomCategory:"Inputs"},equation:{creator:RNe,atomType:"Equation",atomCategory:"Inputs"},code:{creator:WNe,atomType:"Code",atomCategory:"Inputs"},rotate:{creator:UNe,atomType:"Rotate",atomCategory:"Actions"},extrude:{creator:kNe,atomType:"Extrude",atomCategory:"Actions"},move:{creator:D_e,atomType:"Move",atomCategory:"Actions"},GeneticAlgorithm:{creator:LNe,atomType:"GeneticAlgorithm",atomCategory:"Actions"},gcode:{creator:VNe,atomType:"Gcode",atomCategory:"ImportExport"},import:{creator:GNe,atomType:"Import",atomCategory:"ImportExport"},export:{creator:$Ne,atomType:"Export",atomCategory:"ImportExport"},githubmolecule:{creator:jNe,atomType:"GitHubMolecule",atomCategory:"ImportExport"},output:{creator:HNe,atomType:"Output"}},this.currentMolecule,this.currentUser,this.currentRepoName,this.currentRepo,this.loadedRepo,this.topLevelMolecule,this.touchInterface=!1,this.cad=null,this.totalAtomCount=0,this.numberOfAtomsToLoad=0,this.fork=!1,this.ctrlDown=!1,this.atomsSelected=[],this.circleSegmentSize=2,this.displayProcessing=!1,this.cancelLastDisplayWorker=function(){},this.displayGrid=!0,this.displayAxis=!0,this.displayTriangles=!0,this.displayEdges=!0;const e=Xq(m_e);this.limitedEvaluate=e.evaluate,this.lastClick,e.import({import:function(){throw new Error("Function import is disabled")},createUnit:function(){throw new Error("Function createUnit is disabled")},evaluate:function(){throw new Error("Function evaluate is disabled")},parse:function(){throw new Error("Function parse is disabled")},simplify:function(){throw new Error("Function simplify is disabled")},derivative:function(){throw new Error("Function derivative is disabled")}},{override:!0})}constrainToCanvasBorders(e,t){return[Math.max(0,Math.min(1,e)),Math.max(0,Math.min(1,t))]}constrainToCanvasBordersPixels(e,t){return[Math.max(0,Math.min(this.canvas.current.width,e)),Math.max(0,Math.min(this.canvas.current.height,t))]}widthToPixels(e){return this.canvas.current.width*e}pixelsToWidth(e){return 1/(this.canvas.current.width/e)}heightToPixels(e){return this.canvas.current.height*e}pixelsToHeight(e){return 1/(this.canvas.current.height/e)}toBinaryStr(e){const t=new TextEncoder().encode(e);return String.fromCharCode(...t)}writeToDisplay(e,t=!1){console.log("Write to display not set")}generateUniqueID(){const e=new Date().getTime(),t=Math.floor(Math.random()*1e3);return e+t}incrementVariableName(e,t){if(t.inputs.find(r=>r.name===e)){let r=e.match(/\d+(?=\D*$)/);const i=parseInt(r[0])+1,a=e.replace(new RegExp(r[0]+"(?=D*$)"),i);return this.incrementVariableName(a,t)}else return e}distBetweenPoints(e,t,r,i){var a=Math.pow(e-t,2),o=Math.pow(r-i,2),s=Math.sqrt(a+o);return s}}const I=new ZNe,x6={CC0:`Creative Commons Legal Code

CC0 1.0 Universal

    CREATIVE COMMONS CORPORATION IS NOT A LAW FIRM AND DOES NOT PROVIDE
    LEGAL SERVICES. DISTRIBUTION OF THIS DOCUMENT DOES NOT CREATE AN
    ATTORNEY-CLIENT RELATIONSHIP. CREATIVE COMMONS PROVIDES THIS
    INFORMATION ON AN "AS-IS" BASIS. CREATIVE COMMONS MAKES NO WARRANTIES
    REGARDING THE USE OF THIS DOCUMENT OR THE INFORMATION OR WORKS
    PROVIDED HEREUNDER, AND DISCLAIMS LIABILITY FOR DAMAGES RESULTING FROM
    THE USE OF THIS DOCUMENT OR THE INFORMATION OR WORKS PROVIDED
    HEREUNDER.

Statement of Purpose

The laws of most jurisdictions throughout the world automatically confer
exclusive Copyright and Related Rights (defined below) upon the creator
and subsequent owner(s) (each and all, an "owner") of an original work of
authorship and/or a database (each, a "Work").

Certain owners wish to permanently relinquish those rights to a Work for
the purpose of contributing to a commons of creative, cultural and
scientific works ("Commons") that the public can reliably and without fear
of later claims of infringement build upon, modify, incorporate in other
works, reuse and redistribute as freely as possible in any form whatsoever
and for any purposes, including without limitation commercial purposes.
These owners may contribute to the Commons to promote the ideal of a free
culture and the further production of creative, cultural and scientific
works, or to gain reputation or greater distribution for their Work in
part through the use and efforts of others.

For these and/or other purposes and motivations, and without any
expectation of additional consideration or compensation, the person
associating CC0 with a Work (the "Affirmer"), to the extent that he or she
is an owner of Copyright and Related Rights in the Work, voluntarily
elects to apply CC0 to the Work and publicly distribute the Work under its
terms, with knowledge of his or her Copyright and Related Rights in the
Work and the meaning and intended legal effect of CC0 on those rights.

1. Copyright and Related Rights. A Work made available under CC0 may be
protected by copyright and related or neighboring rights ("Copyright and
Related Rights"). Copyright and Related Rights include, but are not
limited to, the following:

  i. the right to reproduce, adapt, distribute, perform, display,
     communicate, and translate a Work;
 ii. moral rights retained by the original author(s) and/or performer(s);
iii. publicity and privacy rights pertaining to a person's image or
     likeness depicted in a Work;
 iv. rights protecting against unfair competition in regards to a Work,
     subject to the limitations in paragraph 4(a), below;
  v. rights protecting the extraction, dissemination, use and reuse of data
     in a Work;
 vi. database rights (such as those arising under Directive 96/9/EC of the
     European Parliament and of the Council of 11 March 1996 on the legal
     protection of databases, and under any national implementation
     thereof, including any amended or successor version of such
     directive); and
vii. other similar, equivalent or corresponding rights throughout the
     world based on applicable law or treaty, and any national
     implementations thereof.

2. Waiver. To the greatest extent permitted by, but not in contravention
of, applicable law, Affirmer hereby overtly, fully, permanently,
irrevocably and unconditionally waives, abandons, and surrenders all of
Affirmer's Copyright and Related Rights and associated claims and causes
of action, whether now known or unknown (including existing as well as
future claims and causes of action), in the Work (i) in all territories
worldwide, (ii) for the maximum duration provided by applicable law or
treaty (including future time extensions), (iii) in any current or future
medium and for any number of copies, and (iv) for any purpose whatsoever,
including without limitation commercial, advertising or promotional
purposes (the "Waiver"). Affirmer makes the Waiver for the benefit of each
member of the public at large and to the detriment of Affirmer's heirs and
successors, fully intending that such Waiver shall not be subject to
revocation, rescission, cancellation, termination, or any other legal or
equitable action to disrupt the quiet enjoyment of the Work by the public
as contemplated by Affirmer's express Statement of Purpose.

3. Public License Fallback. Should any part of the Waiver for any reason
be judged legally invalid or ineffective under applicable law, then the
Waiver shall be preserved to the maximum extent permitted taking into
account Affirmer's express Statement of Purpose. In addition, to the
extent the Waiver is so judged Affirmer hereby grants to each affected
person a royalty-free, non transferable, non sublicensable, non exclusive,
irrevocable and unconditional license to exercise Affirmer's Copyright and
Related Rights in the Work (i) in all territories worldwide, (ii) for the
maximum duration provided by applicable law or treaty (including future
time extensions), (iii) in any current or future medium and for any number
of copies, and (iv) for any purpose whatsoever, including without
limitation commercial, advertising or promotional purposes (the
"License"). The License shall be deemed effective as of the date CC0 was
applied by Affirmer to the Work. Should any part of the License for any
reason be judged legally invalid or ineffective under applicable law, such
partial invalidity or ineffectiveness shall not invalidate the remainder
of the License, and in such case Affirmer hereby affirms that he or she
will not (i) exercise any of his or her remaining Copyright and Related
Rights in the Work or (ii) assert any associated claims and causes of
action with respect to the Work, in either case contrary to Affirmer's
express Statement of Purpose.

4. Limitations and Disclaimers.

 a. No trademark or patent rights held by Affirmer are waived, abandoned,
    surrendered, licensed or otherwise affected by this document.
 b. Affirmer offers the Work as-is and makes no representations or
    warranties of any kind concerning the Work, express, implied,
    statutory or otherwise, including without limitation warranties of
    title, merchantability, fitness for a particular purpose, non
    infringement, or the absence of latent or other defects, accuracy, or
    the present or absence of errors, whether or not discoverable, all to
    the greatest extent permissible under applicable law.
 c. Affirmer disclaims responsibility for clearing rights of other persons
    that may apply to the Work or any use thereof, including without
    limitation any person's Copyright and Related Rights in the Work.
    Further, Affirmer disclaims responsibility for obtaining any necessary
    consents, permissions or other rights required for any use of the
    Work.
 d. Affirmer understands and acknowledges that Creative Commons is not a
    party to this document and has no duty or obligation with respect to
    this CC0 or use of the Work.`,"CC-BY":`Attribution 4.0 International

=======================================================================

Creative Commons Corporation ("Creative Commons") is not a law firm and
does not provide legal services or legal advice. Distribution of
Creative Commons public licenses does not create a lawyer-client or
other relationship. Creative Commons makes its licenses and related
information available on an "as-is" basis. Creative Commons gives no
warranties regarding its licenses, any material licensed under their
terms and conditions, or any related information. Creative Commons
disclaims all liability for damages resulting from their use to the
fullest extent possible.

Using Creative Commons Public Licenses

Creative Commons public licenses provide a standard set of terms and
conditions that creators and other rights holders may use to share
original works of authorship and other material subject to copyright
and certain other rights specified in the public license below. The
following considerations are for informational purposes only, are not
exhaustive, and do not form part of our licenses.

     Considerations for licensors: Our public licenses are
     intended for use by those authorized to give the public
     permission to use material in ways otherwise restricted by
     copyright and certain other rights. Our licenses are
     irrevocable. Licensors should read and understand the terms
     and conditions of the license they choose before applying it.
     Licensors should also secure all rights necessary before
     applying our licenses so that the public can reuse the
     material as expected. Licensors should clearly mark any
     material not subject to the license. This includes other CC-
     licensed material, or material used under an exception or
     limitation to copyright. More considerations for licensors:
	wiki.creativecommons.org/Considerations_for_licensors

     Considerations for the public: By using one of our public
     licenses, a licensor grants the public permission to use the
     licensed material under specified terms and conditions. If
     the licensor's permission is not necessary for any reason--for
     example, because of any applicable exception or limitation to
     copyright--then that use is not regulated by the license. Our
     licenses grant only permissions under copyright and certain
     other rights that a licensor has authority to grant. Use of
     the licensed material may still be restricted for other
     reasons, including because others have copyright or other
     rights in the material. A licensor may make special requests,
     such as asking that all changes be marked or described.
     Although not required by our licenses, you are encouraged to
     respect those requests where reasonable. More_considerations
     for the public:
	wiki.creativecommons.org/Considerations_for_licensees

=======================================================================

Creative Commons Attribution 4.0 International Public License

By exercising the Licensed Rights (defined below), You accept and agree
to be bound by the terms and conditions of this Creative Commons
Attribution 4.0 International Public License ("Public License"). To the
extent this Public License may be interpreted as a contract, You are
granted the Licensed Rights in consideration of Your acceptance of
these terms and conditions, and the Licensor grants You such rights in
consideration of benefits the Licensor receives from making the
Licensed Material available under these terms and conditions.


Section 1 -- Definitions.

  a. Adapted Material means material subject to Copyright and Similar
     Rights that is derived from or based upon the Licensed Material
     and in which the Licensed Material is translated, altered,
     arranged, transformed, or otherwise modified in a manner requiring
     permission under the Copyright and Similar Rights held by the
     Licensor. For purposes of this Public License, where the Licensed
     Material is a musical work, performance, or sound recording,
     Adapted Material is always produced where the Licensed Material is
     synched in timed relation with a moving image.

  b. Adapter's License means the license You apply to Your Copyright
     and Similar Rights in Your contributions to Adapted Material in
     accordance with the terms and conditions of this Public License.

  c. Copyright and Similar Rights means copyright and/or similar rights
     closely related to copyright including, without limitation,
     performance, broadcast, sound recording, and Sui Generis Database
     Rights, without regard to how the rights are labeled or
     categorized. For purposes of this Public License, the rights
     specified in Section 2(b)(1)-(2) are not Copyright and Similar
     Rights.

  d. Effective Technological Measures means those measures that, in the
     absence of proper authority, may not be circumvented under laws
     fulfilling obligations under Article 11 of the WIPO Copyright
     Treaty adopted on December 20, 1996, and/or similar international
     agreements.

  e. Exceptions and Limitations means fair use, fair dealing, and/or
     any other exception or limitation to Copyright and Similar Rights
     that applies to Your use of the Licensed Material.

  f. Licensed Material means the artistic or literary work, database,
     or other material to which the Licensor applied this Public
     License.

  g. Licensed Rights means the rights granted to You subject to the
     terms and conditions of this Public License, which are limited to
     all Copyright and Similar Rights that apply to Your use of the
     Licensed Material and that the Licensor has authority to license.

  h. Licensor means the individual(s) or entity(ies) granting rights
     under this Public License.

  i. Share means to provide material to the public by any means or
     process that requires permission under the Licensed Rights, such
     as reproduction, public display, public performance, distribution,
     dissemination, communication, or importation, and to make material
     available to the public including in ways that members of the
     public may access the material from a place and at a time
     individually chosen by them.

  j. Sui Generis Database Rights means rights other than copyright
     resulting from Directive 96/9/EC of the European Parliament and of
     the Council of 11 March 1996 on the legal protection of databases,
     as amended and/or succeeded, as well as other essentially
     equivalent rights anywhere in the world.

  k. You means the individual or entity exercising the Licensed Rights
     under this Public License. Your has a corresponding meaning.


Section 2 -- Scope.

  a. License grant.

       1. Subject to the terms and conditions of this Public License,
          the Licensor hereby grants You a worldwide, royalty-free,
          non-sublicensable, non-exclusive, irrevocable license to
          exercise the Licensed Rights in the Licensed Material to:

            a. reproduce and Share the Licensed Material, in whole or
               in part; and

            b. produce, reproduce, and Share Adapted Material.

       2. Exceptions and Limitations. For the avoidance of doubt, where
          Exceptions and Limitations apply to Your use, this Public
          License does not apply, and You do not need to comply with
          its terms and conditions.

       3. Term. The term of this Public License is specified in Section
          6(a).

       4. Media and formats; technical modifications allowed. The
          Licensor authorizes You to exercise the Licensed Rights in
          all media and formats whether now known or hereafter created,
          and to make technical modifications necessary to do so. The
          Licensor waives and/or agrees not to assert any right or
          authority to forbid You from making technical modifications
          necessary to exercise the Licensed Rights, including
          technical modifications necessary to circumvent Effective
          Technological Measures. For purposes of this Public License,
          simply making modifications authorized by this Section 2(a)
          (4) never produces Adapted Material.

       5. Downstream recipients.

            a. Offer from the Licensor -- Licensed Material. Every
               recipient of the Licensed Material automatically
               receives an offer from the Licensor to exercise the
               Licensed Rights under the terms and conditions of this
               Public License.

            b. No downstream restrictions. You may not offer or impose
               any additional or different terms or conditions on, or
               apply any Effective Technological Measures to, the
               Licensed Material if doing so restricts exercise of the
               Licensed Rights by any recipient of the Licensed
               Material.

       6. No endorsement. Nothing in this Public License constitutes or
          may be construed as permission to assert or imply that You
          are, or that Your use of the Licensed Material is, connected
          with, or sponsored, endorsed, or granted official status by,
          the Licensor or others designated to receive attribution as
          provided in Section 3(a)(1)(A)(i).

  b. Other rights.

       1. Moral rights, such as the right of integrity, are not
          licensed under this Public License, nor are publicity,
          privacy, and/or other similar personality rights; however, to
          the extent possible, the Licensor waives and/or agrees not to
          assert any such rights held by the Licensor to the limited
          extent necessary to allow You to exercise the Licensed
          Rights, but not otherwise.

       2. Patent and trademark rights are not licensed under this
          Public License.

       3. To the extent possible, the Licensor waives any right to
          collect royalties from You for the exercise of the Licensed
          Rights, whether directly or through a collecting society
          under any voluntary or waivable statutory or compulsory
          licensing scheme. In all other cases the Licensor expressly
          reserves any right to collect such royalties.


Section 3 -- License Conditions.

Your exercise of the Licensed Rights is expressly made subject to the
following conditions.

  a. Attribution.

       1. If You Share the Licensed Material (including in modified
          form), You must:

            a. retain the following if it is supplied by the Licensor
               with the Licensed Material:

                 i. identification of the creator(s) of the Licensed
                    Material and any others designated to receive
                    attribution, in any reasonable manner requested by
                    the Licensor (including by pseudonym if
                    designated);

                ii. a copyright notice;

               iii. a notice that refers to this Public License;

                iv. a notice that refers to the disclaimer of
                    warranties;

                 v. a URI or hyperlink to the Licensed Material to the
                    extent reasonably practicable;

            b. indicate if You modified the Licensed Material and
               retain an indication of any previous modifications; and

            c. indicate the Licensed Material is licensed under this
               Public License, and include the text of, or the URI or
               hyperlink to, this Public License.

       2. You may satisfy the conditions in Section 3(a)(1) in any
          reasonable manner based on the medium, means, and context in
          which You Share the Licensed Material. For example, it may be
          reasonable to satisfy the conditions by providing a URI or
          hyperlink to a resource that includes the required
          information.

       3. If requested by the Licensor, You must remove any of the
          information required by Section 3(a)(1)(A) to the extent
          reasonably practicable.

       4. If You Share Adapted Material You produce, the Adapter's
          License You apply must not prevent recipients of the Adapted
          Material from complying with this Public License.


Section 4 -- Sui Generis Database Rights.

Where the Licensed Rights include Sui Generis Database Rights that
apply to Your use of the Licensed Material:

  a. for the avoidance of doubt, Section 2(a)(1) grants You the right
     to extract, reuse, reproduce, and Share all or a substantial
     portion of the contents of the database;

  b. if You include all or a substantial portion of the database
     contents in a database in which You have Sui Generis Database
     Rights, then the database in which You have Sui Generis Database
     Rights (but not its individual contents) is Adapted Material; and

  c. You must comply with the conditions in Section 3(a) if You Share
     all or a substantial portion of the contents of the database.

For the avoidance of doubt, this Section 4 supplements and does not
replace Your obligations under this Public License where the Licensed
Rights include other Copyright and Similar Rights.


Section 5 -- Disclaimer of Warranties and Limitation of Liability.

  a. UNLESS OTHERWISE SEPARATELY UNDERTAKEN BY THE LICENSOR, TO THE
     EXTENT POSSIBLE, THE LICENSOR OFFERS THE LICENSED MATERIAL AS-IS
     AND AS-AVAILABLE, AND MAKES NO REPRESENTATIONS OR WARRANTIES OF
     ANY KIND CONCERNING THE LICENSED MATERIAL, WHETHER EXPRESS,
     IMPLIED, STATUTORY, OR OTHER. THIS INCLUDES, WITHOUT LIMITATION,
     WARRANTIES OF TITLE, MERCHANTABILITY, FITNESS FOR A PARTICULAR
     PURPOSE, NON-INFRINGEMENT, ABSENCE OF LATENT OR OTHER DEFECTS,
     ACCURACY, OR THE PRESENCE OR ABSENCE OF ERRORS, WHETHER OR NOT
     KNOWN OR DISCOVERABLE. WHERE DISCLAIMERS OF WARRANTIES ARE NOT
     ALLOWED IN FULL OR IN PART, THIS DISCLAIMER MAY NOT APPLY TO YOU.

  b. TO THE EXTENT POSSIBLE, IN NO EVENT WILL THE LICENSOR BE LIABLE
     TO YOU ON ANY LEGAL THEORY (INCLUDING, WITHOUT LIMITATION,
     NEGLIGENCE) OR OTHERWISE FOR ANY DIRECT, SPECIAL, INDIRECT,
     INCIDENTAL, CONSEQUENTIAL, PUNITIVE, EXEMPLARY, OR OTHER LOSSES,
     COSTS, EXPENSES, OR DAMAGES ARISING OUT OF THIS PUBLIC LICENSE OR
     USE OF THE LICENSED MATERIAL, EVEN IF THE LICENSOR HAS BEEN
     ADVISED OF THE POSSIBILITY OF SUCH LOSSES, COSTS, EXPENSES, OR
     DAMAGES. WHERE A LIMITATION OF LIABILITY IS NOT ALLOWED IN FULL OR
     IN PART, THIS LIMITATION MAY NOT APPLY TO YOU.

  c. The disclaimer of warranties and limitation of liability provided
     above shall be interpreted in a manner that, to the extent
     possible, most closely approximates an absolute disclaimer and
     waiver of all liability.


Section 6 -- Term and Termination.

  a. This Public License applies for the term of the Copyright and
     Similar Rights licensed here. However, if You fail to comply with
     this Public License, then Your rights under this Public License
     terminate automatically.

  b. Where Your right to use the Licensed Material has terminated under
     Section 6(a), it reinstates:

       1. automatically as of the date the violation is cured, provided
          it is cured within 30 days of Your discovery of the
          violation; or

       2. upon express reinstatement by the Licensor.

     For the avoidance of doubt, this Section 6(b) does not affect any
     right the Licensor may have to seek remedies for Your violations
     of this Public License.

  c. For the avoidance of doubt, the Licensor may also offer the
     Licensed Material under separate terms or conditions or stop
     distributing the Licensed Material at any time; however, doing so
     will not terminate this Public License.

  d. Sections 1, 5, 6, 7, and 8 survive termination of this Public
     License.


Section 7 -- Other Terms and Conditions.

  a. The Licensor shall not be bound by any additional or different
     terms or conditions communicated by You unless expressly agreed.

  b. Any arrangements, understandings, or agreements regarding the
     Licensed Material not stated herein are separate from and
     independent of the terms and conditions of this Public License.


Section 8 -- Interpretation.

  a. For the avoidance of doubt, this Public License does not, and
     shall not be interpreted to, reduce, limit, restrict, or impose
     conditions on any use of the Licensed Material that could lawfully
     be made without permission under this Public License.

  b. To the extent possible, if any provision of this Public License is
     deemed unenforceable, it shall be automatically reformed to the
     minimum extent necessary to make it enforceable. If the provision
     cannot be reformed, it shall be severed from this Public License
     without affecting the enforceability of the remaining terms and
     conditions.

  c. No term or condition of this Public License will be waived and no
     failure to comply consented to unless expressly agreed to by the
     Licensor.

  d. Nothing in this Public License constitutes or may be interpreted
     as a limitation upon, or waiver of, any privileges and immunities
     that apply to the Licensor or You, including from the legal
     processes of any jurisdiction or authority.


=======================================================================

Creative Commons is not a party to its public
licenses. Notwithstanding, Creative Commons may elect to apply one of
its public licenses to material it publishes and in those instances
will be considered the Licensor. The text of the Creative Commons
public licenses is dedicated to the public domain under the CC0 Public
Domain Dedication. Except for the limited purpose of indicating that
material is shared under a Creative Commons public license or as
otherwise permitted by the Creative Commons policies published at
creativecommons.org/policies, Creative Commons does not authorize the
use of the trademark "Creative Commons" or any other trademark or logo
of Creative Commons without its prior written consent including,
without limitation, in connection with any unauthorized modifications
to any of its public licenses or any other arrangements,
understandings, or agreements concerning use of licensed material. For
the avoidance of doubt, this paragraph does not form part of the
public licenses.

Creative Commons may be contacted at creativecommons.org.`};function w6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Bt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w6(Object(t),!0).forEach(function(r){fr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function JNe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function S6(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Eq(r.key),r)}}function KNe(n,e,t){return e&&S6(n.prototype,e),t&&S6(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function hD(n,e){return hD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},hD(n,e)}function QNe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&hD(n,e)}function PS(n){return PS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},PS(n)}function q$(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q$=function(){return!!n})()}function eOe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function tOe(n,e){if(e&&(xd(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eOe(n)}function nOe(n){var e=q$();return function(){var t,r=PS(n);if(e){var i=PS(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return tOe(this,t)}}function dD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function rOe(n){if(Array.isArray(n))return dD(n)}function iOe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function G$(n,e){if(n){if(typeof n=="string")return dD(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?dD(n,e):void 0}}function aOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tp(n){return rOe(n)||iOe(n)||G$(n)||aOe()}function oOe(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function sOe(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var lOe=function(){function n(t){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(sOe(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=oOe(r);try{i.insertRule(t,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach(function(t){return t.parentNode&&t.parentNode.removeChild(t)}),this.tags=[],this.ctr=0},n}(),$i="-ms-",RS="-moz-",On="-webkit-",$$="comm",ZN="rule",JN="decl",uOe="@import",X$="@keyframes",cOe="@layer",hOe=Math.abs,JE=String.fromCharCode,dOe=Object.assign;function fOe(n,e){return Ci(n,0)^45?(((e<<2^Ci(n,0))<<2^Ci(n,1))<<2^Ci(n,2))<<2^Ci(n,3):0}function Y$(n){return n.trim()}function pOe(n,e){return(n=e.exec(n))?n[0]:n}function Pn(n,e,t){return n.replace(e,t)}function fD(n,e){return n.indexOf(e)}function Ci(n,e){return n.charCodeAt(e)|0}function nv(n,e,t){return n.slice(e,t)}function el(n){return n.length}function KN(n){return n.length}function pb(n,e){return e.push(n),n}function mOe(n,e){return n.map(e).join("")}var KE=1,Kp=1,Z$=0,Ka=0,$r=0,Pm="";function QE(n,e,t,r,i,a,o){return{value:n,root:e,parent:t,type:r,props:i,children:a,line:KE,column:Kp,length:o,return:""}}function xg(n,e){return dOe(QE("",null,null,"",null,null,0),n,{length:-n.length},e)}function gOe(){return $r}function vOe(){return $r=Ka>0?Ci(Pm,--Ka):0,Kp--,$r===10&&(Kp=1,KE--),$r}function wo(){return $r=Ka<Z$?Ci(Pm,Ka++):0,Kp++,$r===10&&(Kp=1,KE++),$r}function pl(){return Ci(Pm,Ka)}function Jx(){return Ka}function cy(n,e){return nv(Pm,n,e)}function rv(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function J$(n){return KE=Kp=1,Z$=el(Pm=n),Ka=0,[]}function K$(n){return Pm="",n}function Kx(n){return Y$(cy(Ka-1,pD(n===91?n+2:n===40?n+1:n)))}function yOe(n){for(;($r=pl())&&$r<33;)wo();return rv(n)>2||rv($r)>3?"":" "}function bOe(n,e){for(;--e&&wo()&&!($r<48||$r>102||$r>57&&$r<65||$r>70&&$r<97););return cy(n,Jx()+(e<6&&pl()==32&&wo()==32))}function pD(n){for(;wo();)switch($r){case n:return Ka;case 34:case 39:n!==34&&n!==39&&pD($r);break;case 40:n===41&&pD(n);break;case 92:wo();break}return Ka}function xOe(n,e){for(;wo()&&n+$r!==57&&!(n+$r===84&&pl()===47););return"/*"+cy(e,Ka-1)+"*"+JE(n===47?n:wo())}function wOe(n){for(;!rv(pl());)wo();return cy(n,Ka)}function SOe(n){return K$(Qx("",null,null,null,[""],n=J$(n),0,[0],n))}function Qx(n,e,t,r,i,a,o,s,l){for(var u=0,c=0,h=o,d=0,f=0,p=0,v=1,y=1,g=1,w=0,b="",m=i,x=a,S=r,C=b;y;)switch(p=w,w=wo()){case 40:if(p!=108&&Ci(C,h-1)==58){fD(C+=Pn(Kx(w),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:C+=Kx(w);break;case 9:case 10:case 13:case 32:C+=yOe(p);break;case 92:C+=bOe(Jx()-1,7);continue;case 47:switch(pl()){case 42:case 47:pb(EOe(xOe(wo(),Jx()),e,t),l);break;default:C+="/"}break;case 123*v:s[u++]=el(C)*g;case 125*v:case 59:case 0:switch(w){case 0:case 125:y=0;case 59+c:g==-1&&(C=Pn(C,/\f/g,"")),f>0&&el(C)-h&&pb(f>32?_6(C+";",r,t,h-1):_6(Pn(C," ","")+";",r,t,h-2),l);break;case 59:C+=";";default:if(pb(S=E6(C,e,t,u,c,i,s,b,m=[],x=[],h),a),w===123)if(c===0)Qx(C,e,S,S,m,a,h,s,x);else switch(d===99&&Ci(C,3)===110?100:d){case 100:case 108:case 109:case 115:Qx(n,S,S,r&&pb(E6(n,S,S,0,0,i,s,b,i,m=[],h),x),i,x,h,s,r?m:x);break;default:Qx(C,S,S,S,[""],x,0,s,x)}}u=c=f=0,v=g=1,b=C="",h=o;break;case 58:h=1+el(C),f=p;default:if(v<1){if(w==123)--v;else if(w==125&&v++==0&&vOe()==125)continue}switch(C+=JE(w),w*v){case 38:g=c>0?1:(C+="\f",-1);break;case 44:s[u++]=(el(C)-1)*g,g=1;break;case 64:pl()===45&&(C+=Kx(wo())),d=pl(),c=h=el(b=C+=wOe(Jx())),w++;break;case 45:p===45&&el(C)==2&&(v=0)}}return a}function E6(n,e,t,r,i,a,o,s,l,u,c){for(var h=i-1,d=i===0?a:[""],f=KN(d),p=0,v=0,y=0;p<r;++p)for(var g=0,w=nv(n,h+1,h=hOe(v=o[p])),b=n;g<f;++g)(b=Y$(v>0?d[g]+" "+w:Pn(w,/&\f/g,d[g])))&&(l[y++]=b);return QE(n,e,t,i===0?ZN:s,l,u,c)}function EOe(n,e,t){return QE(n,e,t,$$,JE(gOe()),nv(n,2,-2),0)}function _6(n,e,t,r){return QE(n,e,t,JN,nv(n,0,r),nv(n,r+1,-1),r)}function Mp(n,e){for(var t="",r=KN(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function _Oe(n,e,t,r){switch(n.type){case cOe:if(n.children.length)break;case uOe:case JN:return n.return=n.return||n.value;case $$:return"";case X$:return n.return=n.value+"{"+Mp(n.children,r)+"}";case ZN:n.value=n.props.join(",")}return el(t=Mp(n.children,r))?n.return=n.value+"{"+t+"}":""}function COe(n){var e=KN(n);return function(t,r,i,a){for(var o="",s=0;s<e;s++)o+=n[s](t,r,i,a)||"";return o}}function AOe(n){return function(e){e.root||(e=e.return)&&n(e)}}function TOe(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var MOe=function(n,e,t){for(var r=0,i=0;r=i,i=pl(),r===38&&i===12&&(e[t]=1),!rv(i);)wo();return cy(n,Ka)},DOe=function(n,e){var t=-1,r=44;do switch(rv(r)){case 0:r===38&&pl()===12&&(e[t]=1),n[t]+=MOe(Ka-1,e,t);break;case 2:n[t]+=Kx(r);break;case 4:if(r===44){n[++t]=pl()===58?"&\f":"",e[t]=n[t].length;break}default:n[t]+=JE(r)}while(r=wo());return n},kOe=function(n,e){return K$(DOe(J$(n),e))},C6=new WeakMap,NOe=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var e=n.value,t=n.parent,r=n.column===t.column&&n.line===t.line;t.type!=="rule";)if(t=t.parent,!t)return;if(!(n.props.length===1&&e.charCodeAt(0)!==58&&!C6.get(t))&&!r){C6.set(n,!0);for(var i=[],a=kOe(e,i),o=t.props,s=0,l=0;s<a.length;s++)for(var u=0;u<o.length;u++,l++)n.props[l]=i[s]?a[s].replace(/&\f/g,o[u]):o[u]+" "+a[s]}}},OOe=function(n){if(n.type==="decl"){var e=n.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(n.return="",n.value="")}};function Q$(n,e){switch(fOe(n,e)){case 5103:return On+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return On+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return On+n+RS+n+$i+n+n;case 6828:case 4268:return On+n+$i+n+n;case 6165:return On+n+$i+"flex-"+n+n;case 5187:return On+n+Pn(n,/(\w+).+(:[^]+)/,On+"box-$1$2"+$i+"flex-$1$2")+n;case 5443:return On+n+$i+"flex-item-"+Pn(n,/flex-|-self/,"")+n;case 4675:return On+n+$i+"flex-line-pack"+Pn(n,/align-content|flex-|-self/,"")+n;case 5548:return On+n+$i+Pn(n,"shrink","negative")+n;case 5292:return On+n+$i+Pn(n,"basis","preferred-size")+n;case 6060:return On+"box-"+Pn(n,"-grow","")+On+n+$i+Pn(n,"grow","positive")+n;case 4554:return On+Pn(n,/([^-])(transform)/g,"$1"+On+"$2")+n;case 6187:return Pn(Pn(Pn(n,/(zoom-|grab)/,On+"$1"),/(image-set)/,On+"$1"),n,"")+n;case 5495:case 3959:return Pn(n,/(image-set\([^]*)/,On+"$1$`$1");case 4968:return Pn(Pn(n,/(.+:)(flex-)?(.*)/,On+"box-pack:$3"+$i+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+On+n+n;case 4095:case 3583:case 4068:case 2532:return Pn(n,/(.+)-inline(.+)/,On+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(el(n)-1-e>6)switch(Ci(n,e+1)){case 109:if(Ci(n,e+4)!==45)break;case 102:return Pn(n,/(.+:)(.+)-([^]+)/,"$1"+On+"$2-$3$1"+RS+(Ci(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~fD(n,"stretch")?Q$(Pn(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Ci(n,e+1)!==115)break;case 6444:switch(Ci(n,el(n)-3-(~fD(n,"!important")&&10))){case 107:return Pn(n,":",":"+On)+n;case 101:return Pn(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+On+(Ci(n,14)===45?"inline-":"")+"box$3$1"+On+"$2$3$1"+$i+"$2box$3")+n}break;case 5936:switch(Ci(n,e+11)){case 114:return On+n+$i+Pn(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return On+n+$i+Pn(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return On+n+$i+Pn(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return On+n+$i+n+n}return n}var POe=function(n,e,t,r){if(n.length>-1&&!n.return)switch(n.type){case JN:n.return=Q$(n.value,n.length);break;case X$:return Mp([xg(n,{value:Pn(n.value,"@","@"+On)})],r);case ZN:if(n.length)return mOe(n.props,function(i){switch(pOe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Mp([xg(n,{props:[Pn(i,/:(read-\w+)/,":"+RS+"$1")]})],r);case"::placeholder":return Mp([xg(n,{props:[Pn(i,/:(plac\w+)/,":"+On+"input-$1")]}),xg(n,{props:[Pn(i,/:(plac\w+)/,":"+RS+"$1")]}),xg(n,{props:[Pn(i,/:(plac\w+)/,$i+"input-$1")]})],r)}return""})}},ROe=[POe],IOe=function(n){var e=n.key;if(e==="css"){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,function(p){var v=p.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var r=n.stylisPlugins||ROe,i={},a,o=[];a=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(p){for(var v=p.getAttribute("data-emotion").split(" "),y=1;y<v.length;y++)i[v[y]]=!0;o.push(p)});var s,l=[NOe,OOe];{var u,c=[_Oe,AOe(function(p){u.insert(p)})],h=COe(l.concat(r,c)),d=function(p){return Mp(SOe(p),h)};s=function(p,v,y,g){u=y,d(p?p+"{"+v.styles+"}":v.styles),g&&(f.inserted[v.name]=!0)}}var f={key:e,sheet:new lOe({key:e,container:a,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:i,registered:{},insert:s};return f.sheet.hydrate(o),f},eX={exports:{}},Wn={};/** @license React v16.13.1
* react-is.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var bi=typeof Symbol=="function"&&Symbol.for,QN=bi?Symbol.for("react.element"):60103,eO=bi?Symbol.for("react.portal"):60106,e_=bi?Symbol.for("react.fragment"):60107,t_=bi?Symbol.for("react.strict_mode"):60108,n_=bi?Symbol.for("react.profiler"):60114,r_=bi?Symbol.for("react.provider"):60109,i_=bi?Symbol.for("react.context"):60110,tO=bi?Symbol.for("react.async_mode"):60111,a_=bi?Symbol.for("react.concurrent_mode"):60111,o_=bi?Symbol.for("react.forward_ref"):60112,s_=bi?Symbol.for("react.suspense"):60113,LOe=bi?Symbol.for("react.suspense_list"):60120,l_=bi?Symbol.for("react.memo"):60115,u_=bi?Symbol.for("react.lazy"):60116,FOe=bi?Symbol.for("react.block"):60121,BOe=bi?Symbol.for("react.fundamental"):60117,zOe=bi?Symbol.for("react.responder"):60118,UOe=bi?Symbol.for("react.scope"):60119;function Mo(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case QN:switch(n=n.type,n){case tO:case a_:case e_:case n_:case t_:case s_:return n;default:switch(n=n&&n.$$typeof,n){case i_:case o_:case u_:case l_:case r_:return n;default:return e}}case eO:return e}}}function tX(n){return Mo(n)===a_}Wn.AsyncMode=tO;Wn.ConcurrentMode=a_;Wn.ContextConsumer=i_;Wn.ContextProvider=r_;Wn.Element=QN;Wn.ForwardRef=o_;Wn.Fragment=e_;Wn.Lazy=u_;Wn.Memo=l_;Wn.Portal=eO;Wn.Profiler=n_;Wn.StrictMode=t_;Wn.Suspense=s_;Wn.isAsyncMode=function(n){return tX(n)||Mo(n)===tO};Wn.isConcurrentMode=tX;Wn.isContextConsumer=function(n){return Mo(n)===i_};Wn.isContextProvider=function(n){return Mo(n)===r_};Wn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===QN};Wn.isForwardRef=function(n){return Mo(n)===o_};Wn.isFragment=function(n){return Mo(n)===e_};Wn.isLazy=function(n){return Mo(n)===u_};Wn.isMemo=function(n){return Mo(n)===l_};Wn.isPortal=function(n){return Mo(n)===eO};Wn.isProfiler=function(n){return Mo(n)===n_};Wn.isStrictMode=function(n){return Mo(n)===t_};Wn.isSuspense=function(n){return Mo(n)===s_};Wn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===e_||n===a_||n===n_||n===t_||n===s_||n===LOe||typeof n=="object"&&n!==null&&(n.$$typeof===u_||n.$$typeof===l_||n.$$typeof===r_||n.$$typeof===i_||n.$$typeof===o_||n.$$typeof===BOe||n.$$typeof===zOe||n.$$typeof===UOe||n.$$typeof===FOe)};Wn.typeOf=Mo;eX.exports=Wn;var jOe=eX.exports,nX=jOe,HOe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},VOe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},rX={};rX[nX.ForwardRef]=HOe;rX[nX.Memo]=VOe;var WOe=!0;function qOe(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):r+=i+" "}),r}var iX=function(n,e,t){var r=n.key+"-"+e.name;(t===!1||WOe===!1)&&n.registered[r]===void 0&&(n.registered[r]=e.styles)},GOe=function(n,e,t){iX(n,e,t);var r=n.key+"-"+e.name;if(n.inserted[e.name]===void 0){var i=e;do n.insert(e===i?"."+r:"",i,n.sheet,!0),i=i.next;while(i!==void 0)}};function $Oe(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var XOe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},YOe=/[A-Z]|^ms/g,ZOe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,aX=function(n){return n.charCodeAt(1)===45},A6=function(n){return n!=null&&typeof n!="boolean"},tA=TOe(function(n){return aX(n)?n:n.replace(YOe,"-$&").toLowerCase()}),T6=function(n,e){switch(n){case"animation":case"animationName":if(typeof e=="string")return e.replace(ZOe,function(t,r,i){return tl={name:r,styles:i,next:tl},r})}return XOe[n]!==1&&!aX(n)&&typeof e=="number"&&e!==0?e+"px":e};function iv(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return tl={name:t.name,styles:t.styles,next:tl},t.name;if(t.styles!==void 0){var r=t.next;if(r!==void 0)for(;r!==void 0;)tl={name:r.name,styles:r.styles,next:tl},r=r.next;var i=t.styles+";";return i}return JOe(n,e,t)}case"function":{if(n!==void 0){var a=tl,o=t(n);return tl=a,iv(n,e,o)}break}}return t}function JOe(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=iv(n,e,t[i])+";";else for(var a in t){var o=t[a];if(typeof o!="object")A6(o)&&(r+=tA(a)+":"+T6(a,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var s=0;s<o.length;s++)A6(o[s])&&(r+=tA(a)+":"+T6(a,o[s])+";");else{var l=iv(n,e,o);switch(a){case"animation":case"animationName":{r+=tA(a)+":"+l+";";break}default:r+=a+"{"+l+"}"}}}return r}var M6=/label:\s*([^\s;\n{]+)\s*(;|$)/g,tl,oX=function(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,i="";tl=void 0;var a=n[0];a==null||a.raw===void 0?(r=!1,i+=iv(t,e,a)):i+=a[0];for(var o=1;o<n.length;o++)i+=iv(t,e,n[o]),r&&(i+=a[o]);M6.lastIndex=0;for(var s="",l;(l=M6.exec(i))!==null;)s+="-"+l[1];var u=$Oe(i)+s;return{name:u,styles:i,next:tl}},KOe=function(n){return n()},QOe=xw.useInsertionEffect?xw.useInsertionEffect:!1,ePe=QOe||KOe,nO={}.hasOwnProperty,sX=j.createContext(typeof HTMLElement<"u"?IOe({key:"css"}):null);sX.Provider;var tPe=function(n){return j.forwardRef(function(e,t){var r=j.useContext(sX);return n(e,r,t)})},nPe=j.createContext({}),mD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",rPe=function(n,e){var t={};for(var r in e)nO.call(e,r)&&(t[r]=e[r]);return t[mD]=n,t},iPe=function(n){var e=n.cache,t=n.serialized,r=n.isStringTag;return iX(e,t,r),ePe(function(){return GOe(e,t,r)}),null},aPe=tPe(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=n[mD],a=[r],o="";typeof n.className=="string"?o=qOe(e.registered,a,n.className):n.className!=null&&(o=n.className+" ");var s=oX(a,void 0,j.useContext(nPe));o+=e.key+"-"+s.name;var l={};for(var u in n)nO.call(n,u)&&u!=="css"&&u!==mD&&(l[u]=n[u]);return l.ref=t,l.className=o,j.createElement(j.Fragment,null,j.createElement(iPe,{cache:e,serialized:s,isStringTag:typeof i=="string"}),j.createElement(i,l))}),oPe=aPe,zt=function(n,e){var t=arguments;if(e==null||!nO.call(e,"css"))return j.createElement.apply(void 0,t);var r=t.length,i=new Array(r);i[0]=oPe,i[1]=rPe(n,e);for(var a=2;a<r;a++)i[a]=t[a];return j.createElement.apply(null,i)};function rO(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return oX(e)}var sPe=function(){var n=rO.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function lPe(n){if(Array.isArray(n))return n}function uPe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function cPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cu(n,e){return lPe(n)||uPe(n,e)||G$(n,e)||cPe()}function lX(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Al(n,e){if(n==null)return{};var t,r,i=lX(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function hPe(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var gD=j.useLayoutEffect,dPe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],IS=function(){};function fPe(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function pPe(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];var a=[].concat(r);if(e&&n)for(var o in e)e.hasOwnProperty(o)&&e[o]&&a.push("".concat(fPe(n,o)));return a.filter(function(s){return s}).map(function(s){return String(s).trim()}).join(" ")}var LS=function(n){return EPe(n)?n.filter(Boolean):xd(n)==="object"&&n!==null?[n]:[]},uX=function(n){n.className,n.clearValue,n.cx,n.getStyles,n.getClassNames,n.getValue,n.hasValue,n.isMulti,n.isRtl,n.options,n.selectOption,n.selectProps,n.setValue,n.theme;var e=Al(n,dPe);return Bt({},e)},Or=function(n,e,t){var r=n.cx,i=n.getStyles,a=n.getClassNames,o=n.className;return{css:i(e,n),className:r(t??{},a(e,n),o)}};function c_(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function mPe(n){return c_(n)?window.innerHeight:n.clientHeight}function cX(n){return c_(n)?window.pageYOffset:n.scrollTop}function FS(n,e){if(c_(n)){window.scrollTo(0,e);return}n.scrollTop=e}function gPe(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=n;i=i.parentElement;)if(e=getComputedStyle(i),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function vPe(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function mb(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:IS,i=cX(n),a=e-i,o=10,s=0;function l(){s+=o;var u=vPe(s,i,a,t);FS(n,u),s<t?window.requestAnimationFrame(l):r(n)}l()}function D6(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>t.bottom?FS(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+i,n.scrollHeight)):r.top-i<t.top&&FS(n,Math.max(e.offsetTop-i,0))}function yPe(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function k6(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function bPe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var hX=!1,xPe={get passive(){return hX=!0}},gb=typeof window<"u"?window:{};gb.addEventListener&&gb.removeEventListener&&(gb.addEventListener("p",IS,xPe),gb.removeEventListener("p",IS,!1));var wPe=hX;function SPe(n){return n!=null}function EPe(n){return Array.isArray(n)}function Yg(n,e,t){return n?e:t}var _Pe=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var i=Object.entries(n).filter(function(a){var o=cu(a,1),s=o[0];return!t.includes(s)});return i.reduce(function(a,o){var s=cu(o,2),l=s[0],u=s[1];return a[l]=u,a},{})},CPe=["children","innerProps"],APe=["children","innerProps"];function TPe(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,i=n.placement,a=n.shouldScroll,o=n.isFixedPosition,s=n.controlHeight,l=gPe(t),u={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return u;var c=l.getBoundingClientRect(),h=c.height,d=t.getBoundingClientRect(),f=d.bottom,p=d.height,v=d.top,y=t.offsetParent.getBoundingClientRect(),g=y.top,w=o?window.innerHeight:mPe(l),b=cX(l),m=parseInt(getComputedStyle(t).marginBottom,10),x=parseInt(getComputedStyle(t).marginTop,10),S=g-x,C=w-v,T=S+b,M=h-b-v,A=f-w+b+m,D=b+v-x,O=160;switch(i){case"auto":case"bottom":if(C>=p)return{placement:"bottom",maxHeight:e};if(M>=p&&!o)return a&&mb(l,A,O),{placement:"bottom",maxHeight:e};if(!o&&M>=r||o&&C>=r){a&&mb(l,A,O);var U=o?C-m:M-m;return{placement:"bottom",maxHeight:U}}if(i==="auto"||o){var L=e,F=o?S:T;return F>=r&&(L=Math.min(F-m-s,e)),{placement:"top",maxHeight:L}}if(i==="bottom")return a&&FS(l,A),{placement:"bottom",maxHeight:e};break;case"top":if(S>=p)return{placement:"top",maxHeight:e};if(T>=p&&!o)return a&&mb(l,D,O),{placement:"top",maxHeight:e};if(!o&&T>=r||o&&S>=r){var k=e;return(!o&&T>=r||o&&S>=r)&&(k=o?S-x:T-x),a&&mb(l,D,O),{placement:"top",maxHeight:k}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return u}function MPe(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var dX=function(n){return n==="auto"?"bottom":n},DPe=function(n,e){var t,r=n.placement,i=n.theme,a=i.borderRadius,o=i.spacing,s=i.colors;return Bt((t={label:"menu"},fr(t,MPe(r),"100%"),fr(t,"position","absolute"),fr(t,"width","100%"),fr(t,"zIndex",1),t),e?{}:{backgroundColor:s.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},fX=j.createContext(null),kPe=function(n){var e=n.children,t=n.minMenuHeight,r=n.maxMenuHeight,i=n.menuPlacement,a=n.menuPosition,o=n.menuShouldScrollIntoView,s=n.theme,l=j.useContext(fX)||{},u=l.setPortalPlacement,c=j.useRef(null),h=j.useState(r),d=cu(h,2),f=d[0],p=d[1],v=j.useState(null),y=cu(v,2),g=y[0],w=y[1],b=s.spacing.controlHeight;return gD(function(){var m=c.current;if(m){var x=a==="fixed",S=o&&!x,C=TPe({maxHeight:r,menuEl:m,minHeight:t,placement:i,shouldScroll:S,isFixedPosition:x,controlHeight:b});p(C.maxHeight),w(C.placement),u==null||u(C.placement)}},[r,i,a,o,t,u,b]),e({ref:c,placerProps:Bt(Bt({},n),{},{placement:g||dX(i),maxHeight:f})})},NPe=function(n){var e=n.children,t=n.innerRef,r=n.innerProps;return zt("div",lt({},Or(n,"menu",{menu:!0}),{ref:t},r),e)},OPe=NPe,PPe=function(n,e){var t=n.maxHeight,r=n.theme.spacing.baseUnit;return Bt({maxHeight:t,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},e?{}:{paddingBottom:r,paddingTop:r})},RPe=function(n){var e=n.children,t=n.innerProps,r=n.innerRef,i=n.isMulti;return zt("div",lt({},Or(n,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:r},t),e)},pX=function(n,e){var t=n.theme,r=t.spacing.baseUnit,i=t.colors;return Bt({textAlign:"center"},e?{}:{color:i.neutral40,padding:"".concat(r*2,"px ").concat(r*3,"px")})},IPe=pX,LPe=pX,FPe=function(n){var e=n.children,t=e===void 0?"No options":e,r=n.innerProps,i=Al(n,CPe);return zt("div",lt({},Or(Bt(Bt({},i),{},{children:t,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),t)},BPe=function(n){var e=n.children,t=e===void 0?"Loading...":e,r=n.innerProps,i=Al(n,APe);return zt("div",lt({},Or(Bt(Bt({},i),{},{children:t,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),t)},zPe=function(n){var e=n.rect,t=n.offset,r=n.position;return{left:e.left,position:r,top:t,width:e.width,zIndex:1}},UPe=function(n){var e=n.appendTo,t=n.children,r=n.controlElement,i=n.innerProps,a=n.menuPlacement,o=n.menuPosition,s=j.useRef(null),l=j.useRef(null),u=j.useState(dX(a)),c=cu(u,2),h=c[0],d=c[1],f=j.useMemo(function(){return{setPortalPlacement:d}},[]),p=j.useState(null),v=cu(p,2),y=v[0],g=v[1],w=j.useCallback(function(){if(r){var S=yPe(r),C=o==="fixed"?0:window.pageYOffset,T=S[h]+C;(T!==(y==null?void 0:y.offset)||S.left!==(y==null?void 0:y.rect.left)||S.width!==(y==null?void 0:y.rect.width))&&g({offset:T,rect:S})}},[r,o,h,y==null?void 0:y.offset,y==null?void 0:y.rect.left,y==null?void 0:y.rect.width]);gD(function(){w()},[w]);var b=j.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),r&&s.current&&(l.current=wG(r,s.current,w,{elementResize:"ResizeObserver"in window}))},[r,w]);gD(function(){b()},[b]);var m=j.useCallback(function(S){s.current=S,b()},[b]);if(!e&&o!=="fixed"||!y)return null;var x=zt("div",lt({ref:m},Or(Bt(Bt({},n),{},{offset:y.offset,position:o,rect:y.rect}),"menuPortal",{"menu-portal":!0}),i),t);return zt(fX.Provider,{value:f},e?fm.createPortal(x,e):x)},jPe=function(n){var e=n.isDisabled,t=n.isRtl;return{label:"container",direction:t?"rtl":void 0,pointerEvents:e?"none":void 0,position:"relative"}},HPe=function(n){var e=n.children,t=n.innerProps,r=n.isDisabled,i=n.isRtl;return zt("div",lt({},Or(n,"container",{"--is-disabled":r,"--is-rtl":i}),t),e)},VPe=function(n,e){var t=n.theme.spacing,r=n.isMulti,i=n.hasValue,a=n.selectProps.controlShouldRenderValue;return Bt({alignItems:"center",display:r&&i&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},e?{}:{padding:"".concat(t.baseUnit/2,"px ").concat(t.baseUnit*2,"px")})},WPe=function(n){var e=n.children,t=n.innerProps,r=n.isMulti,i=n.hasValue;return zt("div",lt({},Or(n,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":i}),t),e)},qPe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},GPe=function(n){var e=n.children,t=n.innerProps;return zt("div",lt({},Or(n,"indicatorsContainer",{indicators:!0}),t),e)},N6,$Pe=["size"],XPe=["innerProps","isRtl","size"],YPe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},mX=function(n){var e=n.size,t=Al(n,$Pe);return zt("svg",lt({height:e,width:e,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:YPe},t))},iO=function(n){return zt(mX,lt({size:20},n),zt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},gX=function(n){return zt(mX,lt({size:20},n),zt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},vX=function(n,e){var t=n.isFocused,r=n.theme,i=r.spacing.baseUnit,a=r.colors;return Bt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},e?{}:{color:t?a.neutral60:a.neutral20,padding:i*2,":hover":{color:t?a.neutral80:a.neutral40}})},ZPe=vX,JPe=function(n){var e=n.children,t=n.innerProps;return zt("div",lt({},Or(n,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),t),e||zt(gX,null))},KPe=vX,QPe=function(n){var e=n.children,t=n.innerProps;return zt("div",lt({},Or(n,"clearIndicator",{indicator:!0,"clear-indicator":!0}),t),e||zt(iO,null))},eRe=function(n,e){var t=n.isDisabled,r=n.theme,i=r.spacing.baseUnit,a=r.colors;return Bt({label:"indicatorSeparator",alignSelf:"stretch",width:1},e?{}:{backgroundColor:t?a.neutral10:a.neutral20,marginBottom:i*2,marginTop:i*2})},tRe=function(n){var e=n.innerProps;return zt("span",lt({},e,Or(n,"indicatorSeparator",{"indicator-separator":!0})))},nRe=sPe(N6||(N6=hPe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),rRe=function(n,e){var t=n.isFocused,r=n.size,i=n.theme,a=i.colors,o=i.spacing.baseUnit;return Bt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},e?{}:{color:t?a.neutral60:a.neutral20,padding:o*2})},nA=function(n){var e=n.delay,t=n.offset;return zt("span",{css:rO({animation:"".concat(nRe," 1s ease-in-out ").concat(e,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:t?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},iRe=function(n){var e=n.innerProps,t=n.isRtl,r=n.size,i=r===void 0?4:r,a=Al(n,XPe);return zt("div",lt({},Or(Bt(Bt({},a),{},{innerProps:e,isRtl:t,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),e),zt(nA,{delay:0,offset:t}),zt(nA,{delay:160,offset:!0}),zt(nA,{delay:320,offset:!t}))},aRe=function(n,e){var t=n.isDisabled,r=n.isFocused,i=n.theme,a=i.colors,o=i.borderRadius,s=i.spacing;return Bt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:s.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},e?{}:{backgroundColor:t?a.neutral5:a.neutral0,borderColor:t?a.neutral10:r?a.primary:a.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:r?a.primary:a.neutral30}})},oRe=function(n){var e=n.children,t=n.isDisabled,r=n.isFocused,i=n.innerRef,a=n.innerProps,o=n.menuIsOpen;return zt("div",lt({ref:i},Or(n,"control",{control:!0,"control--is-disabled":t,"control--is-focused":r,"control--menu-is-open":o}),a,{"aria-disabled":t||void 0}),e)},sRe=oRe,lRe=["data"],uRe=function(n,e){var t=n.theme.spacing;return e?{}:{paddingBottom:t.baseUnit*2,paddingTop:t.baseUnit*2}},cRe=function(n){var e=n.children,t=n.cx,r=n.getStyles,i=n.getClassNames,a=n.Heading,o=n.headingProps,s=n.innerProps,l=n.label,u=n.theme,c=n.selectProps;return zt("div",lt({},Or(n,"group",{group:!0}),s),zt(a,lt({},o,{selectProps:c,theme:u,getStyles:r,getClassNames:i,cx:t}),l),zt("div",null,e))},hRe=function(n,e){var t=n.theme,r=t.colors,i=t.spacing;return Bt({label:"group",cursor:"default",display:"block"},e?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:i.baseUnit*3,paddingRight:i.baseUnit*3,textTransform:"uppercase"})},dRe=function(n){var e=uX(n);e.data;var t=Al(e,lRe);return zt("div",lt({},Or(n,"groupHeading",{"group-heading":!0}),t))},fRe=cRe,pRe=["innerRef","isDisabled","isHidden","inputClassName"],mRe=function(n,e){var t=n.isDisabled,r=n.value,i=n.theme,a=i.spacing,o=i.colors;return Bt(Bt({visibility:t?"hidden":"visible",transform:r?"translateZ(0)":""},gRe),e?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:o.neutral80})},yX={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},gRe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Bt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},yX)},vRe=function(n){return Bt({label:"input",color:"inherit",background:0,opacity:n?0:1,width:"100%"},yX)},yRe=function(n){var e=n.cx,t=n.value,r=uX(n),i=r.innerRef,a=r.isDisabled,o=r.isHidden,s=r.inputClassName,l=Al(r,pRe);return zt("div",lt({},Or(n,"input",{"input-container":!0}),{"data-value":t||""}),zt("input",lt({className:e({input:!0},s),ref:i,style:vRe(o),disabled:a},l)))},bRe=yRe,xRe=function(n,e){var t=n.theme,r=t.spacing,i=t.borderRadius,a=t.colors;return Bt({label:"multiValue",display:"flex",minWidth:0},e?{}:{backgroundColor:a.neutral10,borderRadius:i/2,margin:r.baseUnit/2})},wRe=function(n,e){var t=n.theme,r=t.borderRadius,i=t.colors,a=n.cropWithEllipsis;return Bt({overflow:"hidden",textOverflow:a||a===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},e?{}:{borderRadius:r/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},SRe=function(n,e){var t=n.theme,r=t.spacing,i=t.borderRadius,a=t.colors,o=n.isFocused;return Bt({alignItems:"center",display:"flex"},e?{}:{borderRadius:i/2,backgroundColor:o?a.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},bX=function(n){var e=n.children,t=n.innerProps;return zt("div",t,e)},ERe=bX,_Re=bX;function CRe(n){var e=n.children,t=n.innerProps;return zt("div",lt({role:"button"},t),e||zt(iO,{size:14}))}var ARe=function(n){var e=n.children,t=n.components,r=n.data,i=n.innerProps,a=n.isDisabled,o=n.removeProps,s=n.selectProps,l=t.Container,u=t.Label,c=t.Remove;return zt(l,{data:r,innerProps:Bt(Bt({},Or(n,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),i),selectProps:s},zt(u,{data:r,innerProps:Bt({},Or(n,"multiValueLabel",{"multi-value__label":!0})),selectProps:s},e),zt(c,{data:r,innerProps:Bt(Bt({},Or(n,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(e||"option")},o),selectProps:s}))},TRe=ARe,MRe=function(n,e){var t=n.isDisabled,r=n.isFocused,i=n.isSelected,a=n.theme,o=a.spacing,s=a.colors;return Bt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},e?{}:{backgroundColor:i?s.primary:r?s.primary25:"transparent",color:t?s.neutral20:i?s.neutral0:"inherit",padding:"".concat(o.baseUnit*2,"px ").concat(o.baseUnit*3,"px"),":active":{backgroundColor:t?void 0:i?s.primary:s.primary50}})},DRe=function(n){var e=n.children,t=n.isDisabled,r=n.isFocused,i=n.isSelected,a=n.innerRef,o=n.innerProps;return zt("div",lt({},Or(n,"option",{option:!0,"option--is-disabled":t,"option--is-focused":r,"option--is-selected":i}),{ref:a,"aria-disabled":t},o),e)},kRe=DRe,NRe=function(n,e){var t=n.theme,r=t.spacing,i=t.colors;return Bt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},e?{}:{color:i.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},ORe=function(n){var e=n.children,t=n.innerProps;return zt("div",lt({},Or(n,"placeholder",{placeholder:!0}),t),e)},PRe=ORe,RRe=function(n,e){var t=n.isDisabled,r=n.theme,i=r.spacing,a=r.colors;return Bt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e?{}:{color:t?a.neutral40:a.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},IRe=function(n){var e=n.children,t=n.isDisabled,r=n.innerProps;return zt("div",lt({},Or(n,"singleValue",{"single-value":!0,"single-value--is-disabled":t}),r),e)},LRe=IRe,FRe={ClearIndicator:QPe,Control:sRe,DropdownIndicator:JPe,DownChevron:gX,CrossIcon:iO,Group:fRe,GroupHeading:dRe,IndicatorsContainer:GPe,IndicatorSeparator:tRe,Input:bRe,LoadingIndicator:iRe,Menu:OPe,MenuList:RPe,MenuPortal:UPe,LoadingMessage:BPe,NoOptionsMessage:FPe,MultiValue:TRe,MultiValueContainer:ERe,MultiValueLabel:_Re,MultiValueRemove:CRe,Option:kRe,Placeholder:PRe,SelectContainer:HPe,SingleValue:LRe,ValueContainer:WPe},BRe=function(n){return Bt(Bt({},FRe),n.components)},O6=Number.isNaN||function(n){return typeof n=="number"&&n!==n};function zRe(n,e){return!!(n===e||O6(n)&&O6(e))}function URe(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!zRe(n[t],e[t]))return!1;return!0}function jRe(n,e){e===void 0&&(e=URe);var t=null;function r(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var o=n.apply(this,i);return t={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){t=null},r}var HRe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},VRe=function(n){return zt("span",lt({css:HRe},n))},P6=VRe,WRe={guidance:function(n){var e=n.isSearchable,t=n.isMulti,r=n.tabSelectsValue,i=n.context,a=n.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return a?"".concat(n["aria-label"]||"Select"," is focused ").concat(e?",type to refine list":"",", press Down to open the menu, ").concat(t?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(n){var e=n.action,t=n.label,r=t===void 0?"":t,i=n.labels,a=n.isDisabled;switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return a?"option ".concat(r," is disabled. Select another option."):"option ".concat(r,", selected.");default:return""}},onFocus:function(n){var e=n.context,t=n.focused,r=n.options,i=n.label,a=i===void 0?"":i,o=n.selectValue,s=n.isDisabled,l=n.isSelected,u=n.isAppleDevice,c=function(f,p){return f&&f.length?"".concat(f.indexOf(p)+1," of ").concat(f.length):""};if(e==="value"&&o)return"value ".concat(a," focused, ").concat(c(o,t),".");if(e==="menu"&&u){var h=s?" disabled":"",d="".concat(l?" selected":"").concat(h);return"".concat(a).concat(d,", ").concat(c(r,t),".")}return""},onFilter:function(n){var e=n.inputValue,t=n.resultsMessage;return"".concat(t).concat(e?" for search term "+e:"",".")}},qRe=function(n){var e=n.ariaSelection,t=n.focusedOption,r=n.focusedValue,i=n.focusableOptions,a=n.isFocused,o=n.selectValue,s=n.selectProps,l=n.id,u=n.isAppleDevice,c=s.ariaLiveMessages,h=s.getOptionLabel,d=s.inputValue,f=s.isMulti,p=s.isOptionDisabled,v=s.isSearchable,y=s.menuIsOpen,g=s.options,w=s.screenReaderStatus,b=s.tabSelectsValue,m=s.isLoading,x=s["aria-label"],S=s["aria-live"],C=j.useMemo(function(){return Bt(Bt({},WRe),c||{})},[c]),T=j.useMemo(function(){var L="";if(e&&C.onChange){var F=e.option,k=e.options,P=e.removedValue,z=e.removedValues,B=e.value,X=function(se){return Array.isArray(se)?null:se},J=P||F||X(B),Q=J?h(J):"",Z=k||z||void 0,re=Z?Z.map(h):[],fe=Bt({isDisabled:J&&p(J,o),label:Q,labels:re},e);L=C.onChange(fe)}return L},[e,C,p,o,h]),M=j.useMemo(function(){var L="",F=t||r,k=!!(t&&o&&o.includes(t));if(F&&C.onFocus){var P={focused:F,label:h(F),isDisabled:p(F,o),isSelected:k,options:i,context:F===t?"menu":"value",selectValue:o,isAppleDevice:u};L=C.onFocus(P)}return L},[t,r,h,p,C,i,o,u]),A=j.useMemo(function(){var L="";if(y&&g.length&&!m&&C.onFilter){var F=w({count:i.length});L=C.onFilter({inputValue:d,resultsMessage:F})}return L},[i,d,y,C,g,w,m]),D=(e==null?void 0:e.action)==="initial-input-focus",O=j.useMemo(function(){var L="";if(C.guidance){var F=r?"value":y?"menu":"input";L=C.guidance({"aria-label":x,context:F,isDisabled:t&&p(t,o),isMulti:f,isSearchable:v,tabSelectsValue:b,isInitialFocus:D})}return L},[x,t,r,f,p,v,y,C,o,b,D]),U=zt(j.Fragment,null,zt("span",{id:"aria-selection"},T),zt("span",{id:"aria-focused"},M),zt("span",{id:"aria-results"},A),zt("span",{id:"aria-guidance"},O));return zt(j.Fragment,null,zt(P6,{id:l},D&&U),zt(P6,{"aria-live":S,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!D&&U))},GRe=qRe,vD=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],$Re=new RegExp("["+vD.map(function(n){return n.letters}).join("")+"]","g"),xX={};for(var rA=0;rA<vD.length;rA++)for(var iA=vD[rA],aA=0;aA<iA.letters.length;aA++)xX[iA.letters[aA]]=iA.base;var wX=function(n){return n.replace($Re,function(e){return xX[e]})},XRe=jRe(wX),R6=function(n){return n.replace(/^\s+|\s+$/g,"")},YRe=function(n){return"".concat(n.label," ").concat(n.value)},ZRe=function(n){return function(e,t){if(e.data.__isNew__)return!0;var r=Bt({ignoreCase:!0,ignoreAccents:!0,stringify:YRe,trim:!0,matchFrom:"any"},n),i=r.ignoreCase,a=r.ignoreAccents,o=r.stringify,s=r.trim,l=r.matchFrom,u=s?R6(t):t,c=s?R6(o(e)):o(e);return i&&(u=u.toLowerCase(),c=c.toLowerCase()),a&&(u=XRe(u),c=wX(c)),l==="start"?c.substr(0,u.length)===u:c.indexOf(u)>-1}},JRe=["innerRef"];function KRe(n){var e=n.innerRef,t=Al(n,JRe),r=_Pe(t,"onExited","in","enter","exit","appear");return zt("input",lt({ref:e},r,{css:rO({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var QRe=function(n){n.cancelable&&n.preventDefault(),n.stopPropagation()};function eIe(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,i=n.onTopArrive,a=n.onTopLeave,o=j.useRef(!1),s=j.useRef(!1),l=j.useRef(0),u=j.useRef(null),c=j.useCallback(function(y,g){if(u.current!==null){var w=u.current,b=w.scrollTop,m=w.scrollHeight,x=w.clientHeight,S=u.current,C=g>0,T=m-x-b,M=!1;T>g&&o.current&&(r&&r(y),o.current=!1),C&&s.current&&(a&&a(y),s.current=!1),C&&g>T?(t&&!o.current&&t(y),S.scrollTop=m,M=!0,o.current=!0):!C&&-g>b&&(i&&!s.current&&i(y),S.scrollTop=0,M=!0,s.current=!0),M&&QRe(y)}},[t,r,i,a]),h=j.useCallback(function(y){c(y,y.deltaY)},[c]),d=j.useCallback(function(y){l.current=y.changedTouches[0].clientY},[]),f=j.useCallback(function(y){var g=l.current-y.changedTouches[0].clientY;c(y,g)},[c]),p=j.useCallback(function(y){if(y){var g=wPe?{passive:!1}:!1;y.addEventListener("wheel",h,g),y.addEventListener("touchstart",d,g),y.addEventListener("touchmove",f,g)}},[f,d,h]),v=j.useCallback(function(y){y&&(y.removeEventListener("wheel",h,!1),y.removeEventListener("touchstart",d,!1),y.removeEventListener("touchmove",f,!1))},[f,d,h]);return j.useEffect(function(){if(e){var y=u.current;return p(y),function(){v(y)}}},[e,p,v]),function(y){u.current=y}}var I6=["boxSizing","height","overflow","paddingRight","position"],L6={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function F6(n){n.preventDefault()}function B6(n){n.stopPropagation()}function z6(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function U6(){return"ontouchstart"in window||navigator.maxTouchPoints}var j6=!!(typeof window<"u"&&window.document&&window.document.createElement),wg=0,ff={capture:!1,passive:!1};function tIe(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,i=j.useRef({}),a=j.useRef(null),o=j.useCallback(function(l){if(j6){var u=document.body,c=u&&u.style;if(r&&I6.forEach(function(p){var v=c&&c[p];i.current[p]=v}),r&&wg<1){var h=parseInt(i.current.paddingRight,10)||0,d=document.body?document.body.clientWidth:0,f=window.innerWidth-d+h||0;Object.keys(L6).forEach(function(p){var v=L6[p];c&&(c[p]=v)}),c&&(c.paddingRight="".concat(f,"px"))}u&&U6()&&(u.addEventListener("touchmove",F6,ff),l&&(l.addEventListener("touchstart",z6,ff),l.addEventListener("touchmove",B6,ff))),wg+=1}},[r]),s=j.useCallback(function(l){if(j6){var u=document.body,c=u&&u.style;wg=Math.max(wg-1,0),r&&wg<1&&I6.forEach(function(h){var d=i.current[h];c&&(c[h]=d)}),u&&U6()&&(u.removeEventListener("touchmove",F6,ff),l&&(l.removeEventListener("touchstart",z6,ff),l.removeEventListener("touchmove",B6,ff)))}},[r]);return j.useEffect(function(){if(e){var l=a.current;return o(l),function(){s(l)}}},[e,o,s]),function(l){a.current=l}}var nIe=function(n){var e=n.target;return e.ownerDocument.activeElement&&e.ownerDocument.activeElement.blur()},rIe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function iIe(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,i=r===void 0?!0:r,a=n.onBottomArrive,o=n.onBottomLeave,s=n.onTopArrive,l=n.onTopLeave,u=eIe({isEnabled:i,onBottomArrive:a,onBottomLeave:o,onTopArrive:s,onTopLeave:l}),c=tIe({isEnabled:t}),h=function(d){u(d),c(d)};return zt(j.Fragment,null,t&&zt("div",{onClick:nIe,css:rIe}),e(h))}var aIe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},oIe=function(n){var e=n.name,t=n.onFocus;return zt("input",{required:!0,name:e,tabIndex:-1,"aria-hidden":"true",onFocus:t,css:aIe,value:"",onChange:function(){}})},sIe=oIe;function aO(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function lIe(){return aO(/^iPhone/i)}function SX(){return aO(/^Mac/i)}function uIe(){return aO(/^iPad/i)||SX()&&navigator.maxTouchPoints>1}function cIe(){return lIe()||uIe()}function hIe(){return SX()||cIe()}var dIe=function(n){return n.label},EX=function(n){return n.label},_X=function(n){return n.value},fIe=function(n){return!!n.isDisabled},pIe={clearIndicator:KPe,container:jPe,control:aRe,dropdownIndicator:ZPe,group:uRe,groupHeading:hRe,indicatorsContainer:qPe,indicatorSeparator:eRe,input:mRe,loadingIndicator:rRe,loadingMessage:LPe,menu:DPe,menuList:PPe,menuPortal:zPe,multiValue:xRe,multiValueLabel:wRe,multiValueRemove:SRe,noOptionsMessage:IPe,option:MRe,placeholder:NRe,singleValue:RRe,valueContainer:VPe},mIe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},gIe=4,CX=4,vIe=38,yIe=CX*2,bIe={baseUnit:CX,controlHeight:vIe,menuGutter:yIe},oA={borderRadius:gIe,colors:mIe,spacing:bIe},xIe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:k6(),captureMenuScroll:!k6(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:ZRe(),formatGroupLabel:dIe,getOptionLabel:EX,getOptionValue:_X,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:fIe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!bPe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(n){var e=n.count;return"".concat(e," result").concat(e!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function H6(n,e,t,r){var i=MX(n,e,t),a=DX(n,e,t),o=TX(n,e),s=BS(n,e);return{type:"option",data:e,isDisabled:i,isSelected:a,label:o,value:s,index:r}}function ew(n,e){return n.options.map(function(t,r){if("options"in t){var i=t.options.map(function(o,s){return H6(n,o,e,s)}).filter(function(o){return W6(n,o)});return i.length>0?{type:"group",data:t,options:i,index:r}:void 0}var a=H6(n,t,e,r);return W6(n,a)?a:void 0}).filter(SPe)}function AX(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Tp(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function V6(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Tp(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function wIe(n,e){return AX(ew(n,e))}function W6(n,e){var t=n.inputValue,r=t===void 0?"":t,i=e.data,a=e.isSelected,o=e.label,s=e.value;return(!NX(n)||!a)&&kX(n,{label:o,value:s,data:i},r)}function SIe(n,e){var t=n.focusedValue,r=n.selectValue,i=r.indexOf(t);if(i>-1){var a=e.indexOf(t);if(a>-1)return t;if(i<e.length)return e[i]}return null}function EIe(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var sA=function(n,e){var t,r=(t=n.find(function(i){return i.data===e}))===null||t===void 0?void 0:t.id;return r||null},TX=function(n,e){return n.getOptionLabel(e)},BS=function(n,e){return n.getOptionValue(e)};function MX(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function DX(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=BS(n,e);return t.some(function(i){return BS(n,i)===r})}function kX(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var NX=function(n){var e=n.hideSelectedOptions,t=n.isMulti;return e===void 0?t:e},_Ie=1,OX=function(n){QNe(t,n);var e=nOe(t);function t(r){var i;if(JNe(this,t),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=hIe(),i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,u){var c=i.props,h=c.onChange,d=c.name;u.name=d,i.ariaOnChange(l,u),h(l,u)},i.setValue=function(l,u,c){var h=i.props,d=h.closeMenuOnSelect,f=h.isMulti,p=h.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:p}),d&&(i.setState({inputIsHiddenAfterUpdate:!f}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:u,option:c})},i.selectOption=function(l){var u=i.props,c=u.blurInputOnSelect,h=u.isMulti,d=u.name,f=i.state.selectValue,p=h&&i.isOptionSelected(l,f),v=i.isOptionDisabled(l,f);if(p){var y=i.getOptionValue(l);i.setValue(f.filter(function(g){return i.getOptionValue(g)!==y}),"deselect-option",l)}else if(!v)h?i.setValue([].concat(Tp(f),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:d});return}c&&i.blurInput()},i.removeValue=function(l){var u=i.props.isMulti,c=i.state.selectValue,h=i.getOptionValue(l),d=c.filter(function(p){return i.getOptionValue(p)!==h}),f=Yg(u,d,d[0]||null);i.onChange(f,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(Yg(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,u=i.state.selectValue,c=u[u.length-1],h=u.slice(0,u.length-1),d=Yg(l,h,h[0]||null);i.onChange(d,{action:"pop-value",removedValue:c})},i.getFocusedOptionId=function(l){return sA(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return V6(ew(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return pPe.apply(void 0,[i.props.classNamePrefix].concat(u))},i.getOptionLabel=function(l){return TX(i.props,l)},i.getOptionValue=function(l){return BS(i.props,l)},i.getStyles=function(l,u){var c=i.props.unstyled,h=pIe[l](u,c);h.boxSizing="border-box";var d=i.props.styles[l];return d?d(h,u):h},i.getClassNames=function(l,u){var c,h;return(c=(h=i.props.classNames)[l])===null||c===void 0?void 0:c.call(h,u)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return BRe(i.props)},i.buildCategorizedOptions=function(){return ew(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return AX(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,u){i.setState({ariaSelection:Bt({value:l},u)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var u=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():u&&i.openMenu("first"):(u&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var u=i.props,c=u.isMulti,h=u.menuIsOpen;i.focusInput(),h?(i.setState({inputIsHiddenAfterUpdate:!c}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&c_(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var u=l.touches,c=u&&u.item(0);c&&(i.initialTouchX=c.clientX,i.initialTouchY=c.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var u=l.touches,c=u&&u.item(0);if(c){var h=Math.abs(c.clientX-i.initialTouchX),d=Math.abs(c.clientY-i.initialTouchY),f=5;i.userIsDragging=h>f||d>f}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var u=i.props.inputValue,c=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(c,{action:"input-change",prevInputValue:u}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var u=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:u}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var u=i.getFocusableOptions(),c=u.indexOf(l);i.setState({focusedOption:l,focusedOptionId:c>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return NX(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var u=i.props,c=u.isMulti,h=u.backspaceRemovesValue,d=u.escapeClearsValue,f=u.inputValue,p=u.isClearable,v=u.isDisabled,y=u.menuIsOpen,g=u.onKeyDown,w=u.tabSelectsValue,b=u.openMenuOnFocus,m=i.state,x=m.focusedOption,S=m.focusedValue,C=m.selectValue;if(!v&&!(typeof g=="function"&&(g(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!c||f)return;i.focusValue("previous");break;case"ArrowRight":if(!c||f)return;i.focusValue("next");break;case"Delete":case"Backspace":if(f)return;if(S)i.removeValue(S);else{if(!h)return;c?i.popValue():p&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!y||!w||!x||b&&i.isOptionSelected(x,C))return;i.selectOption(x);break;case"Enter":if(l.keyCode===229)break;if(y){if(!x||i.isComposing)return;i.selectOption(x);break}return;case"Escape":y?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:f}),i.onMenuClose()):p&&d&&i.clearValue();break;case" ":if(f)return;if(!y){i.openMenu("first");break}if(!x)return;i.selectOption(x);break;case"ArrowUp":y?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":y?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!y)return;i.focusOption("pageup");break;case"PageDown":if(!y)return;i.focusOption("pagedown");break;case"Home":if(!y)return;i.focusOption("first");break;case"End":if(!y)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++_Ie),i.state.selectValue=LS(r.value),r.menuIsOpen&&i.state.selectValue.length){var a=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),s=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=a,i.state.focusedOption=o[s],i.state.focusedOptionId=sA(a,o[s])}return i}return KNe(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&D6(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(r){var i=this.props,a=i.isDisabled,o=i.menuIsOpen,s=this.state.isFocused;(s&&!a&&r.isDisabled||s&&o&&!r.menuIsOpen)&&this.focusInput(),s&&a&&!r.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!s&&!a&&r.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(D6(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(r,i){this.props.onInputChange(r,i)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(r){var i=this,a=this.state,o=a.selectValue,s=a.isFocused,l=this.buildFocusableOptions(),u=r==="first"?0:l.length-1;if(!this.props.isMulti){var c=l.indexOf(o[0]);c>-1&&(u=c)}this.scrollToFocusedOptionOnUpdate=!(s&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:l[u],focusedOptionId:this.getFocusedOptionId(l[u])},function(){return i.onMenuOpen()})}},{key:"focusValue",value:function(r){var i=this.state,a=i.selectValue,o=i.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var s=a.indexOf(o);o||(s=-1);var l=a.length-1,u=-1;if(a.length){switch(r){case"previous":s===0?u=0:s===-1?u=l:u=s-1;break;case"next":s>-1&&s<l&&(u=s+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:a[u]})}}}},{key:"focusOption",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",i=this.props.pageSize,a=this.state.focusedOption,o=this.getFocusableOptions();if(o.length){var s=0,l=o.indexOf(a);a||(l=-1),r==="up"?s=l>0?l-1:o.length-1:r==="down"?s=(l+1)%o.length:r==="pageup"?(s=l-i,s<0&&(s=0)):r==="pagedown"?(s=l+i,s>o.length-1&&(s=o.length-1)):r==="last"&&(s=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[s],focusedValue:null,focusedOptionId:this.getFocusedOptionId(o[s])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(oA):Bt(Bt({},oA),this.props.theme):oA}},{key:"getCommonProps",value:function(){var r=this.clearValue,i=this.cx,a=this.getStyles,o=this.getClassNames,s=this.getValue,l=this.selectOption,u=this.setValue,c=this.props,h=c.isMulti,d=c.isRtl,f=c.options,p=this.hasValue();return{clearValue:r,cx:i,getStyles:a,getClassNames:o,getValue:s,hasValue:p,isMulti:h,isRtl:d,options:f,selectOption:l,selectProps:c,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var r=this.state.selectValue;return r.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var r=this.props,i=r.isClearable,a=r.isMulti;return i===void 0?a:i}},{key:"isOptionDisabled",value:function(r,i){return MX(this.props,r,i)}},{key:"isOptionSelected",value:function(r,i){return DX(this.props,r,i)}},{key:"filterOption",value:function(r,i){return kX(this.props,r,i)}},{key:"formatOptionLabel",value:function(r,i){if(typeof this.props.formatOptionLabel=="function"){var a=this.props.inputValue,o=this.state.selectValue;return this.props.formatOptionLabel(r,{context:i,inputValue:a,selectValue:o})}else return this.getOptionLabel(r)}},{key:"formatGroupLabel",value:function(r){return this.props.formatGroupLabel(r)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var r=this.props,i=r.isDisabled,a=r.isSearchable,o=r.inputId,s=r.inputValue,l=r.tabIndex,u=r.form,c=r.menuIsOpen,h=r.required,d=this.getComponents(),f=d.Input,p=this.state,v=p.inputIsHidden,y=p.ariaSelection,g=this.commonProps,w=o||this.getElementId("input"),b=Bt(Bt(Bt({"aria-autocomplete":"list","aria-expanded":c,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},c&&{"aria-controls":this.getElementId("listbox")}),!a&&{"aria-readonly":!0}),this.hasValue()?(y==null?void 0:y.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return a?j.createElement(f,lt({},g,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:i,isHidden:v,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:l,form:u,type:"text",value:s},b)):j.createElement(KRe,lt({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:IS,onFocus:this.onInputFocus,disabled:i,tabIndex:l,inputMode:"none",form:u,value:""},b))}},{key:"renderPlaceholderOrValue",value:function(){var r=this,i=this.getComponents(),a=i.MultiValue,o=i.MultiValueContainer,s=i.MultiValueLabel,l=i.MultiValueRemove,u=i.SingleValue,c=i.Placeholder,h=this.commonProps,d=this.props,f=d.controlShouldRenderValue,p=d.isDisabled,v=d.isMulti,y=d.inputValue,g=d.placeholder,w=this.state,b=w.selectValue,m=w.focusedValue,x=w.isFocused;if(!this.hasValue()||!f)return y?null:j.createElement(c,lt({},h,{key:"placeholder",isDisabled:p,isFocused:x,innerProps:{id:this.getElementId("placeholder")}}),g);if(v)return b.map(function(C,T){var M=C===m,A="".concat(r.getOptionLabel(C),"-").concat(r.getOptionValue(C));return j.createElement(a,lt({},h,{components:{Container:o,Label:s,Remove:l},isFocused:M,isDisabled:p,key:A,index:T,removeProps:{onClick:function(){return r.removeValue(C)},onTouchEnd:function(){return r.removeValue(C)},onMouseDown:function(D){D.preventDefault()}},data:C}),r.formatOptionLabel(C,"value"))});if(y)return null;var S=b[0];return j.createElement(u,lt({},h,{data:S,isDisabled:p}),this.formatOptionLabel(S,"value"))}},{key:"renderClearIndicator",value:function(){var r=this.getComponents(),i=r.ClearIndicator,a=this.commonProps,o=this.props,s=o.isDisabled,l=o.isLoading,u=this.state.isFocused;if(!this.isClearable()||!i||s||!this.hasValue()||l)return null;var c={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return j.createElement(i,lt({},a,{innerProps:c,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var r=this.getComponents(),i=r.LoadingIndicator,a=this.commonProps,o=this.props,s=o.isDisabled,l=o.isLoading,u=this.state.isFocused;if(!i||!l)return null;var c={"aria-hidden":"true"};return j.createElement(i,lt({},a,{innerProps:c,isDisabled:s,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var r=this.getComponents(),i=r.DropdownIndicator,a=r.IndicatorSeparator;if(!i||!a)return null;var o=this.commonProps,s=this.props.isDisabled,l=this.state.isFocused;return j.createElement(a,lt({},o,{isDisabled:s,isFocused:l}))}},{key:"renderDropdownIndicator",value:function(){var r=this.getComponents(),i=r.DropdownIndicator;if(!i)return null;var a=this.commonProps,o=this.props.isDisabled,s=this.state.isFocused,l={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return j.createElement(i,lt({},a,{innerProps:l,isDisabled:o,isFocused:s}))}},{key:"renderMenu",value:function(){var r=this,i=this.getComponents(),a=i.Group,o=i.GroupHeading,s=i.Menu,l=i.MenuList,u=i.MenuPortal,c=i.LoadingMessage,h=i.NoOptionsMessage,d=i.Option,f=this.commonProps,p=this.state.focusedOption,v=this.props,y=v.captureMenuScroll,g=v.inputValue,w=v.isLoading,b=v.loadingMessage,m=v.minMenuHeight,x=v.maxMenuHeight,S=v.menuIsOpen,C=v.menuPlacement,T=v.menuPosition,M=v.menuPortalTarget,A=v.menuShouldBlockScroll,D=v.menuShouldScrollIntoView,O=v.noOptionsMessage,U=v.onMenuScrollToTop,L=v.onMenuScrollToBottom;if(!S)return null;var F=function(J,Q){var Z=J.type,re=J.data,fe=J.isDisabled,se=J.isSelected,ye=J.label,De=J.value,pe=p===re,Me=fe?void 0:function(){return r.onOptionHover(re)},be=fe?void 0:function(){return r.selectOption(re)},ne="".concat(r.getElementId("option"),"-").concat(Q),Pe={id:ne,onClick:be,onMouseMove:Me,onMouseOver:Me,tabIndex:-1,role:"option","aria-selected":r.isAppleDevice?void 0:se};return j.createElement(d,lt({},f,{innerProps:Pe,data:re,isDisabled:fe,isSelected:se,key:ne,label:ye,type:Z,value:De,isFocused:pe,innerRef:pe?r.getFocusedOptionRef:void 0}),r.formatOptionLabel(J.data,"menu"))},k;if(this.hasOptions())k=this.getCategorizedOptions().map(function(J){if(J.type==="group"){var Q=J.data,Z=J.options,re=J.index,fe="".concat(r.getElementId("group"),"-").concat(re),se="".concat(fe,"-heading");return j.createElement(a,lt({},f,{key:fe,data:Q,options:Z,Heading:o,headingProps:{id:se,data:J.data},label:r.formatGroupLabel(J.data)}),J.options.map(function(ye){return F(ye,"".concat(re,"-").concat(ye.index))}))}else if(J.type==="option")return F(J,"".concat(J.index))});else if(w){var P=b({inputValue:g});if(P===null)return null;k=j.createElement(c,f,P)}else{var z=O({inputValue:g});if(z===null)return null;k=j.createElement(h,f,z)}var B={minMenuHeight:m,maxMenuHeight:x,menuPlacement:C,menuPosition:T,menuShouldScrollIntoView:D},X=j.createElement(kPe,lt({},f,B),function(J){var Q=J.ref,Z=J.placerProps,re=Z.placement,fe=Z.maxHeight;return j.createElement(s,lt({},f,B,{innerRef:Q,innerProps:{onMouseDown:r.onMenuMouseDown,onMouseMove:r.onMenuMouseMove},isLoading:w,placement:re}),j.createElement(iIe,{captureEnabled:y,onTopArrive:U,onBottomArrive:L,lockEnabled:A},function(se){return j.createElement(l,lt({},f,{innerRef:function(ye){r.getMenuListRef(ye),se(ye)},innerProps:{role:"listbox","aria-multiselectable":f.isMulti,id:r.getElementId("listbox")},isLoading:w,maxHeight:fe,focusedOption:p}),k)}))});return M||T==="fixed"?j.createElement(u,lt({},f,{appendTo:M,controlElement:this.controlRef,menuPlacement:C,menuPosition:T}),X):X}},{key:"renderFormField",value:function(){var r=this,i=this.props,a=i.delimiter,o=i.isDisabled,s=i.isMulti,l=i.name,u=i.required,c=this.state.selectValue;if(u&&!this.hasValue()&&!o)return j.createElement(sIe,{name:l,onFocus:this.onValueInputFocus});if(!(!l||o))if(s)if(a){var h=c.map(function(p){return r.getOptionValue(p)}).join(a);return j.createElement("input",{name:l,type:"hidden",value:h})}else{var d=c.length>0?c.map(function(p,v){return j.createElement("input",{key:"i-".concat(v),name:l,type:"hidden",value:r.getOptionValue(p)})}):j.createElement("input",{name:l,type:"hidden",value:""});return j.createElement("div",null,d)}else{var f=c[0]?this.getOptionValue(c[0]):"";return j.createElement("input",{name:l,type:"hidden",value:f})}}},{key:"renderLiveRegion",value:function(){var r=this.commonProps,i=this.state,a=i.ariaSelection,o=i.focusedOption,s=i.focusedValue,l=i.isFocused,u=i.selectValue,c=this.getFocusableOptions();return j.createElement(GRe,lt({},r,{id:this.getElementId("live-region"),ariaSelection:a,focusedOption:o,focusedValue:s,isFocused:l,selectValue:u,focusableOptions:c,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var r=this.getComponents(),i=r.Control,a=r.IndicatorsContainer,o=r.SelectContainer,s=r.ValueContainer,l=this.props,u=l.className,c=l.id,h=l.isDisabled,d=l.menuIsOpen,f=this.state.isFocused,p=this.commonProps=this.getCommonProps();return j.createElement(o,lt({},p,{className:u,innerProps:{id:c,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:f}),this.renderLiveRegion(),j.createElement(i,lt({},p,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:f,menuIsOpen:d}),j.createElement(s,lt({},p,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),j.createElement(a,lt({},p,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(r,i){var a=i.prevProps,o=i.clearFocusValueOnUpdate,s=i.inputIsHiddenAfterUpdate,l=i.ariaSelection,u=i.isFocused,c=i.prevWasFocused,h=i.instancePrefix,d=r.options,f=r.value,p=r.menuIsOpen,v=r.inputValue,y=r.isMulti,g=LS(f),w={};if(a&&(f!==a.value||d!==a.options||p!==a.menuIsOpen||v!==a.inputValue)){var b=p?wIe(r,g):[],m=p?V6(ew(r,g),"".concat(h,"-option")):[],x=o?SIe(i,g):null,S=EIe(i,b),C=sA(m,S);w={selectValue:g,focusedOption:S,focusedOptionId:C,focusableOptionsWithIds:m,focusedValue:x,clearFocusValueOnUpdate:!1}}var T=s!=null&&r!==a?{inputIsHidden:s,inputIsHiddenAfterUpdate:void 0}:{},M=l,A=u&&c;return u&&!A&&(M={value:Yg(y,g,g[0]||null),options:g,action:"initial-input-focus"},A=!c),(l==null?void 0:l.action)==="initial-input-focus"&&(M=null),Bt(Bt(Bt({},w),T),{},{prevProps:r,ariaSelection:M,prevWasFocused:A})}}]),t}(j.Component);OX.defaultProps=xIe;var CIe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function AIe(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,i=r===void 0?!1:r,a=n.defaultValue,o=a===void 0?null:a,s=n.inputValue,l=n.menuIsOpen,u=n.onChange,c=n.onInputChange,h=n.onMenuClose,d=n.onMenuOpen,f=n.value,p=Al(n,CIe),v=j.useState(s!==void 0?s:t),y=cu(v,2),g=y[0],w=y[1],b=j.useState(l!==void 0?l:i),m=cu(b,2),x=m[0],S=m[1],C=j.useState(f!==void 0?f:o),T=cu(C,2),M=T[0],A=T[1],D=j.useCallback(function(z,B){typeof u=="function"&&u(z,B),A(z)},[u]),O=j.useCallback(function(z,B){var X;typeof c=="function"&&(X=c(z,B)),w(X!==void 0?X:z)},[c]),U=j.useCallback(function(){typeof d=="function"&&d(),S(!0)},[d]),L=j.useCallback(function(){typeof h=="function"&&h(),S(!1)},[h]),F=s!==void 0?s:g,k=l!==void 0?l:x,P=f!==void 0?f:M;return Bt(Bt({},p),{},{inputValue:F,menuIsOpen:k,onChange:D,onInputChange:O,onMenuClose:L,onMenuOpen:U,value:P})}var TIe=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],q6=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=String(n).toLowerCase(),i=String(t.getOptionValue(e)).toLowerCase(),a=String(t.getOptionLabel(e)).toLowerCase();return i===r||a===r},lA={formatCreateLabel:function(n){return'Create "'.concat(n,'"')},isValidNewOption:function(n,e,t,r){return!(!n||e.some(function(i){return q6(n,i,r)})||t.some(function(i){return q6(n,i,r)}))},getNewOptionData:function(n,e){return{label:e,value:n,__isNew__:!0}}};function MIe(n){var e=n.allowCreateWhileLoading,t=e===void 0?!1:e,r=n.createOptionPosition,i=r===void 0?"last":r,a=n.formatCreateLabel,o=a===void 0?lA.formatCreateLabel:a,s=n.isValidNewOption,l=s===void 0?lA.isValidNewOption:s,u=n.getNewOptionData,c=u===void 0?lA.getNewOptionData:u,h=n.onCreateOption,d=n.options,f=d===void 0?[]:d,p=n.onChange,v=Al(n,TIe),y=v.getOptionValue,g=y===void 0?_X:y,w=v.getOptionLabel,b=w===void 0?EX:w,m=v.inputValue,x=v.isLoading,S=v.isMulti,C=v.value,T=v.name,M=j.useMemo(function(){return l(m,LS(C),f,{getOptionValue:g,getOptionLabel:b})?c(m,o(m)):void 0},[o,c,b,g,m,l,f,C]),A=j.useMemo(function(){return(t||!x)&&M?i==="first"?[M].concat(Tp(f)):[].concat(Tp(f),[M]):f},[t,i,x,M,f]),D=j.useCallback(function(O,U){if(U.action!=="select-option")return p(O,U);var L=Array.isArray(O)?O:[O];if(L[L.length-1]===M){if(h)h(m);else{var F=c(m,m),k={action:"create-option",name:T,option:F};p(Yg(S,[].concat(Tp(LS(C)),[F]),F),k)}return}p(O,U)},[c,m,S,T,M,h,p,C]);return Bt(Bt({},v),{},{options:A,onChange:D})}var DIe=j.forwardRef(function(n,e){var t=AIe(n),r=MIe(t);return j.createElement(OX,lt({ref:e},r))}),kIe=DIe;const tw=[{value:"abundance-tool",label:"Abundance tool"},{value:"examples",label:"Example"},{value:"furniture",label:"Furniture"},{value:"hardware",label:"Hardware"},{value:"project",label:"Project"}],PX=n=>{var e=null,t=null,r=`###### Note: Do not edit this file directly, it is automatically generated from the CAD model 
# Bill Of Materials 
 |Part|Number Needed|Price|Source| 
 |----|----------|-----|-----|`,i="###### Note: Do not edit this file directly, it is automatically generated from the CAD model";const a=n.authorizedUserOcto,o=n.setExportPopUp,s=n.exporting,l=[];Object.keys(x6).forEach(x=>{l.push(x)});const u=mm(),c=j.useRef(),h=j.useRef(),d=j.useRef(),f=j.useRef(),p=j.useRef(),[v,y]=j.useState(!1),[g,w]=j.useState(0),b=async([x,S,C,T,M],A,D)=>{S.push("abundance-project"),A!==void 0&&D?(I.topLevelMolecule=A,A.topLevel=!0):I.topLevelMolecule=new uy({x:0,y:0,topLevel:!0,name:x,atomType:"Molecule",uniqueID:I.generateUniqueID(),unitsKey:M}),I.currentMolecule=I.topLevelMolecule,await a.request("POST /user/repos",{name:x,description:C,headers:{"X-GitHub-Api-Version":"2022-11-28"}}).catch(O=>{window.alert("Error creating project. That name might be taken already. Please try again with a different name."),y(!1)}).then(O=>{w(10),t=O.data.name,e=I.currentUser,I.currentRepo=O.data;var U=I.topLevelMolecule.serialize();U.filetypeVersion=1;const L=window.btoa(JSON.stringify(U,null,4));a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"project.abundance",message:"Initialize repo",content:L}).then(F=>{w(20);var k=window.btoa(r);a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"BillOfMaterials.md",message:"initialize BOM",content:k}).then(()=>{w(30),k=window.btoa(i),a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"README.md",message:"initialize README",content:k}).then(()=>{w(40),a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"project.svg",message:"SVG Picture",content:""}).then(()=>{w(50),a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:".gitattributes",message:"Create gitattributes",content:window.btoa("data binary")}).then(()=>{w(60),a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"data.json",message:"Data file",content:""}).then(()=>{w(80),a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"LICENSE.txt",message:"Establish license",content:window.btoa(I.toBinaryStr(x6[T]))}).then(()=>{w(90),a.rest.repos.replaceAllTopics({owner:e,repo:t,names:S}).then(()=>{o(!1),u(`/${I.currentRepo.id}`)})})})})})})})})})},m=async x=>{x.preventDefault(),y(!0);const S=c.current.value,C=h.current.getValue(),T=d.current.value,M=[],A=f.current.value,D=p.current.value;if(C.forEach(U=>{M.push(U.value)}),I.currentMolecule)var O=I.currentMolecule;b([S,M,T,A,D],O,s)};return ue.jsx(ue.Fragment,{children:ue.jsx("div",{className:"login-page export-div",children:ue.jsxs("div",{className:"form animate fadeInUp one",children:[ue.jsx("button",{style:{width:"3%",display:"block"},onClick:()=>{o(!1)},className:"closeButton",children:ue.jsx("img",{})}),ue.jsxs("form",{onSubmit:x=>{m(x)},children:[ue.jsx("h2",{children:"Create a New Project"}),ue.jsx("label",{htmlFor:"project-name",children:"Project Name"}),ue.jsx("input",{name:"Project Name",placeholder:"Project Name",ref:c,required:!0}),ue.jsx("label",{htmlFor:"license-options",children:"License"}),ue.jsx("select",{id:"license-options",ref:f,children:l.map(x=>ue.jsx("option",{value:x,children:x},x))}),ue.jsx("label",{htmlFor:"measure-units",children:"Units"}),ue.jsxs("select",{id:"measure-units",ref:p,children:[ue.jsx("option",{value:"Inches",children:"Inches"},"inchesop"),ue.jsx("option",{value:"MM",children:"MM"},"millop")]}),ue.jsx("label",{htmlFor:"project-description",children:"Project Description"}),ue.jsx("input",{placeholder:"Project Description",ref:d}),ue.jsx("label",{htmlFor:"project-topics",children:"Project Topics"}),ue.jsx(kIe,{defaultValue:[tw[0],tw[1]],isMulti:!0,name:"Project Topics",options:tw,className:"basic-multi-select",classNamePrefix:"select",ref:h}),ue.jsx("button",{className:"submit-button",disabled:v,type:"submit",children:v?g+"%":"Submit/Export to Github"})]})]})})})};var G6=null;const NIe=n=>ue.jsx("div",{className:"login-page",children:ue.jsxs("div",{className:"form animate fadeInUp one",children:[ue.jsxs("div",{id:"gitSide",className:"logindiv",children:[ue.jsx("img",{className:"logo",src:"/imgs/abundance_logo.png",alt:"logo"}),ue.jsx("div",{id:"welcome",children:ue.jsx("img",{src:"/imgs/abundance_lettering.png",alt:"logo",style:{width:"300px"}})}),ue.jsxs("p",{style:{padding:"0 20px"},children:["Abundance projects are stored through GitHub. You control your files."," "]}),ue.jsxs("form",{className:"login-form",children:[ue.jsx("button",{type:"button",id:"loginButton",className:"submit-btn",onClick:n.tryLogin,style:{height:"40px"},children:"Login With GitHub"}),ue.jsxs("p",{className:"message",children:["Don't have an account?"," ",ue.jsx("a",{href:"https://github.com/join",children:"Create a free account"})]})]})]}),ue.jsxs("div",{id:"nonGitSide",className:"logindiv curiousBrowse",children:[ue.jsx("p",{style:{justifyContent:"flex-start",display:"inline"},children:"Check out what others have designed in Abundance"}),ue.jsx("button",{type:"button",onClick:()=>{n.setBrowsing(!0)},className:"submit-btn",id:"browseNonGit",style:{padding:"0 30px"},children:"Browse all projects"})]})]})}),OIe=n=>{const[e,t]=j.useState([]),[r,i]=j.useState("thumb"),[a,o]=j.useState("Name");let s=n.searchBarValue;return j.useEffect(()=>{var l;n.user==""||n.userBrowsing?l=s+" topic:abundance-project":l=s+" user:"+n.user+" topic:abundance-project fork:true",G6=new fu,G6.rest.search.repos({q:l}).then(u=>{var c=[];u.data.items.forEach(h=>{c.push(h)}),t([...c])}).catch(u=>{window.alert("Error loading projects. Please wait a few minutes then try again.")})},[n.userBrowsing,s]),ue.jsxs(ue.Fragment,{children:[ue.jsxs("div",{style:{flexDirection:"row",height:"30px",widht:"50%",margin:"-25px 0 10px 20px",display:"flex"},children:[ue.jsx("button",{className:"list_thumb_button",onClick:()=>i("list"),children:ue.jsx("img",{src:"/imgs/list.svg",alt:"list_search",style:{width:"20px",marginRight:"5px",opacity:"0.8"}})},"list-filter-button"),ue.jsx("button",{className:"list_thumb_button",onClick:()=>i("thumb"),children:ue.jsx("img",{src:"/imgs/thumbnail.svg",alt:"thumb_search",style:{width:"20px",marginRight:"5px",opacity:"0.8"}})},"thumb-filter-button"),ue.jsxs("label",{htmlFor:"order-by",children:[ue.jsx("img",{src:"/imgs/sort.svg",alt:"Sort by",style:{width:"15px"}}),ue.jsxs("select",{className:"order_dropdown",id:"order-by",onChange:l=>o(l.target.value),children:[ue.jsx("option",{value:"byName",children:"Name"},"name_order"),ue.jsx("option",{value:"byForks",children:"Forks"},"forks_order"),ue.jsx("option",{value:"byStars",children:"Stars"},"stars_order"),ue.jsx("option",{value:"byOwnerName",children:"Creator"},"owner_order"),ue.jsx("option",{value:"byDateCreated",children:"Date Created"},"date_order")]})]})]}),ue.jsx(PIe,{browseType:r,nodes:e,orderType:a})]})},PIe=n=>{const e=n.nodes,t=n.browseType,r=n.orderType,i=({node:l})=>ue.jsxs("div",{className:"project",id:l.name,onClick:()=>{I.currentRepo=l},children:[ue.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l.name}),ue.jsx("img",{className:"project_image",src:"https://raw.githubusercontent.com/"+l.full_name+"/master/project.svg?sanitize=true",onError:({currentTarget:u})=>{u.onerror=null,u.src="/imgs/defaultThumbnail.svg"},alt:l.name}),ue.jsxs("div",{style:{display:"inline"},children:[ue.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(.7)"},width:"16",height:"16",children:ue.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})}),ue.jsx("p",{style:{fontSize:".7em",display:"inline"},children:l.stargazers_count})]})]},l.id),a=l=>ue.jsxs("div",{className:"project_list",id:l.node.id,onClick:()=>{I.currentRepo=l.node},children:[ue.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l.node.name}),ue.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l.node.owner.login}),ue.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"70%"},children:l.node.forks_count}),ue.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l.node.created_at}),ue.jsxs("div",{style:{width:"10%",display:"flex",flexDirection:"row"},children:[ue.jsx("p",{style:{fontSize:"1em"},children:l.node.stargazers_count}),ue.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(1)"},width:"16",height:"16",children:ue.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})})]})]},l.node.id);var o={byName:function(l,u){return l.name<u.name?-1:l.name>u.name?1:0},byForks:function(l,u){return u.forks_count-l.forks_count},byStars:function(l,u){return u.stargazers_count-l.stargazers_count},byOwnerName:function(l,u){return l.owner.login<u.owner.login?-1:l.owner.login>u.owner.login?1:0},byDateCreated:function(l,u){return new Date(l.created_at)>new Date(u.created_at)?-1:new Date(l.created_at)<new Date(u.created_at)?1:0}};const s={forks_count:"Forks",stargazers_count:"#",created_at:"Date Created",owner:{login:"Creator"},name:"Name"};return ue.jsx(ue.Fragment,{children:ue.jsxs("div",{className:"project-item-div",children:[t=="list"?ue.jsx(a,{node:s}):null,e.sort(o[r]).map(l=>ue.jsx($w,{to:l.owner.login==I.currentUser?`/${l.id}`:`/run/${l.id}`,children:t=="list"?ue.jsx(a,{node:l}):ue.jsx(i,{node:l})},l.id))]})})},$6=n=>{const[e,t]=j.useState(""),r=n.exportPopUp,i=n.setExportPopUp,a=n.authorizedUserOcto,o=()=>{const l=()=>{n.setBrowsing(!n.userBrowsing)},u=c=>{c.code=="Enter"&&t(c.target.value)};return ue.jsxs(ue.Fragment,{children:[n.isloggedIn?ue.jsxs("div",{className:"top_browse_menu",children:[ue.jsxs("div",{onClick:()=>{i(!0)},className:"newProjectDiv",children:[ue.jsx("span",{style:{alignSelf:"center"},children:"Start a new project"}),ue.jsx("img",{src:"/imgs/defaultThumbnail.svg",style:{height:"80%",float:"left"}})]}),ue.jsxs("div",{className:"newProjectDiv",onClick:()=>l(),children:[ue.jsx("span",{style:{alignSelf:"center"},children:n.userBrowsing?"Return to my Projects":"Browse Other Projects"}),ue.jsx("img",{src:"/imgs/defaultThumbnail.svg",style:{height:"80%",float:"right"}})]})]}):null,ue.jsxs("div",{className:"search-bar-div",children:[ue.jsx("input",{type:"text",placeholder:e,onKeyDown:c=>{u(c)},className:"menu_search searchButton",id:"project_search"},"project-search-bar"),ue.jsx("button",{className:"list_thumb_button",children:ue.jsx("img",{src:"/imgs/search_icon.svg",alt:"search",style:{width:"20px",color:"white",marginRight:"5px",opacity:"0.5"}})})]}),ue.jsx(OIe,{searchBarValue:e,user:n.user,userBrowsing:n.userBrowsing})]})},s=l=>{window.open(l,"_blank","noreferrer")};return ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"middleBrowse",style:{marginTop:"35px"},children:ue.jsxs("div",{id:"welcome",style:{display:"flex",margin:"10px",alignItems:"center"},children:[ue.jsx("img",{src:"/imgs/abundance_logo.png",alt:"logo",style:{width:"40px",height:"40px",borderRadius:"50%"}}),ue.jsx("img",{src:"/imgs/abundance_lettering.png",alt:"logo",style:{height:"20px",padding:"10px"}}),n.isloggedIn?null:ue.jsxs(ue.Fragment,{children:[ue.jsx("button",{className:"form browseButton githubSign",id:"loginButton2",onClick:n.tryLogin,style:{width:"90px",fontSize:".7rem",marginLeft:"auto"},children:"Login"}),ue.jsx("button",{className:"form browseButton githubSign",onClick:()=>s("https://github.com/join"),style:{width:"130px",fontSize:".7rem",marginLeft:"5px"},children:"Create an Account"})]})]})}),r?ue.jsx(PX,{setExportPopUp:i,authorizedUserOcto:a,exporting:!1}):ue.jsx(o,{})]})};function RIe(n){const[e,t]=j.useState(!1),r=n.exportPopUp,i=n.setExportPopUp,a=n.authorizedUserOcto;var o=I.currentUser;let s;return n.authorizedUserOcto&&!e?s=ue.jsx($6,{user:o,authorizedUserOcto:a,userBrowsing:e,setBrowsing:t,isloggedIn:n.isloggedIn,exportPopUp:r,setExportPopUp:i}):e?s=ue.jsx($6,{user:"",userBrowsing:e,authorizedUserOcto:a,setBrowsing:t,isloggedIn:n.isloggedIn,tryLogin:n.tryLogin}):s=ue.jsx(NIe,{tryLogin:n.tryLogin,setBrowsing:t}),ue.jsxs("div",{className:"login-popup",id:"projects-popup",style:{padding:"0",border:"10px solid #3e3d3d"},children:[ue.jsxs("div",{children:[" ",I.currentRepo?ue.jsx($w,{to:`/${I.currentRepo.id}`,children:ue.jsx("button",{className:"closeButton",children:ue.jsx("img",{})})}):null]}),s]})}/**
* @license
* Copyright 2010-2023 Three.js Authors
* SPDX-License-Identifier: MIT
*/const h_="161",Rh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ih={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},RX=0,yD=1,IX=2,IIe=3,LX=0,d_=1,g0=2,ms=3,Eu=0,_a=1,xs=2,hu=0,sd=1,bD=2,xD=3,wD=4,FX=5,hc=100,BX=101,zX=102,SD=103,ED=104,UX=200,jX=201,HX=202,VX=203,zS=204,US=205,WX=206,qX=207,GX=208,$X=209,XX=210,YX=211,ZX=212,JX=213,KX=214,QX=0,eY=1,tY=2,av=3,nY=4,rY=5,iY=6,aY=7,hy=0,oY=1,sY=2,ml=0,lY=1,uY=2,cY=3,oO=4,hY=5,dY=6,_D="attached",fY="detached",f_=300,_u=301,Gc=302,ov=303,sv=304,Rm=306,lv=1e3,Zi=1001,uv=1002,zr=1003,jS=1004,LIe=1004,zh=1005,FIe=1005,sr=1006,v0=1007,BIe=1007,sl=1008,zIe=1008,gl=1009,pY=1010,mY=1011,p_=1012,sO=1013,iu=1014,po=1015,Ed=1016,lO=1017,uO=1018,Pc=1020,gY=1021,ya=1023,vY=1024,yY=1025,Rc=1026,_d=1027,bY=1028,cO=1029,xY=1030,hO=1031,dO=1033,nw=33776,rw=33777,iw=33778,aw=33779,CD=35840,AD=35841,TD=35842,MD=35843,fO=36196,DD=37492,kD=37496,ND=37808,OD=37809,PD=37810,RD=37811,ID=37812,LD=37813,FD=37814,BD=37815,zD=37816,UD=37817,jD=37818,HD=37819,VD=37820,WD=37821,ow=36492,qD=36494,GD=36495,wY=36283,$D=36284,XD=36285,YD=36286,SY=2200,EY=2201,_Y=2202,cv=2300,hv=2301,sw=2302,Zh=2400,Jh=2401,dv=2402,m_=2500,pO=2501,UIe=0,jIe=1,HIe=2,mO=3e3,Ic=3001,CY=3200,AY=3201,sh=0,TY=1,mo="",ni="srgb",_l="srgb-linear",g_="display-p3",dy="display-p3-linear",fv="linear",tr="srgb",pv="rec709",mv="p3",VIe=0,Lh=7680,WIe=7681,qIe=7682,GIe=7683,$Ie=34055,XIe=34056,YIe=5386,ZIe=512,JIe=513,KIe=514,QIe=515,eLe=516,tLe=517,nLe=518,ZD=519,MY=512,DY=513,kY=514,gO=515,NY=516,OY=517,PY=518,RY=519,gv=35044,rLe=35048,iLe=35040,aLe=35045,oLe=35049,sLe=35041,lLe=35046,uLe=35050,cLe=35042,hLe="100",JD="300 es",HS=1035,ll=2e3,vv=2001;class Tl{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const r=t.slice(0);for(let i=0,a=r.length;i<a;i++)r[i].call(this,e);e.target=null}}}const Wi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let X6=1234567;const ld=Math.PI/180,Qp=180/Math.PI;function So(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Wi[n&255]+Wi[n>>8&255]+Wi[n>>16&255]+Wi[n>>24&255]+"-"+Wi[e&255]+Wi[e>>8&255]+"-"+Wi[e>>16&15|64]+Wi[e>>24&255]+"-"+Wi[t&63|128]+Wi[t>>8&255]+"-"+Wi[t>>16&255]+Wi[t>>24&255]+Wi[r&255]+Wi[r>>8&255]+Wi[r>>16&255]+Wi[r>>24&255]).toLowerCase()}function kr(n,e,t){return Math.max(e,Math.min(t,n))}function vO(n,e){return(n%e+e)%e}function dLe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function fLe(n,e,t){return n!==e?(t-n)/(e-n):0}function y0(n,e,t){return(1-t)*n+t*e}function pLe(n,e,t,r){return y0(n,e,1-Math.exp(-t*r))}function mLe(n,e=1){return e-Math.abs(vO(n,e*2)-e)}function gLe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function vLe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function yLe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function bLe(n,e){return n+Math.random()*(e-n)}function xLe(n){return n*(.5-Math.random())}function wLe(n){n!==void 0&&(X6=n);let e=X6+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function SLe(n){return n*ld}function ELe(n){return n*Qp}function KD(n){return(n&n-1)===0&&n!==0}function _Le(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function VS(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function CLe(n,e,t,r,i){const a=Math.cos,o=Math.sin,s=a(t/2),l=o(t/2),u=a((e+r)/2),c=o((e+r)/2),h=a((e-r)/2),d=o((e-r)/2),f=a((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":n.set(s*c,l*h,l*d,s*u);break;case"YZY":n.set(l*d,s*c,l*h,s*u);break;case"ZXZ":n.set(l*h,l*d,s*c,s*u);break;case"XZX":n.set(s*c,l*p,l*f,s*u);break;case"YXY":n.set(l*f,s*c,l*p,s*u);break;case"ZYZ":n.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ba(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ln(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const ALe={DEG2RAD:ld,RAD2DEG:Qp,generateUUID:So,clamp:kr,euclideanModulo:vO,mapLinear:dLe,inverseLerp:fLe,lerp:y0,damp:pLe,pingpong:mLe,smoothstep:gLe,smootherstep:vLe,randInt:yLe,randFloat:bLe,randFloatSpread:xLe,seededRandom:wLe,degToRad:SLe,radToDeg:ELe,isPowerOfTwo:KD,ceilPowerOfTwo:_Le,floorPowerOfTwo:VS,setQuaternionFromProperEuler:CLe,normalize:ln,denormalize:ba};class Qe{constructor(e=0,t=0){Qe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(kr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),a=this.x-e.x,o=this.y-e.y;return this.x=a*r-o*i+e.x,this.y=a*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pn{constructor(e,t,r,i,a,o,s,l,u){pn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,o,s,l,u)}set(e,t,r,i,a,o,s,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=a,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,o=r[0],s=r[3],l=r[6],u=r[1],c=r[4],h=r[7],d=r[2],f=r[5],p=r[8],v=i[0],y=i[3],g=i[6],w=i[1],b=i[4],m=i[7],x=i[2],S=i[5],C=i[8];return a[0]=o*v+s*w+l*x,a[3]=o*y+s*b+l*S,a[6]=o*g+s*m+l*C,a[1]=u*v+c*w+h*x,a[4]=u*y+c*b+h*S,a[7]=u*g+c*m+h*C,a[2]=d*v+f*w+p*x,a[5]=d*y+f*b+p*S,a[8]=d*g+f*m+p*C,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*s*u-r*a*c+r*s*l+i*a*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*o-s*u,d=s*l-c*a,f=u*a-o*l,p=t*h+r*d+i*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/p;return e[0]=h*v,e[1]=(i*u-c*r)*v,e[2]=(s*r-i*o)*v,e[3]=d*v,e[4]=(c*t-i*l)*v,e[5]=(i*a-s*t)*v,e[6]=f*v,e[7]=(r*l-u*t)*v,e[8]=(o*t-r*a)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,a,o,s){const l=Math.cos(a),u=Math.sin(a);return this.set(r*l,r*u,-r*(l*o+u*s)+o+e,-i*u,i*l,-i*(-u*o+l*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(uA.makeScale(e,t)),this}rotate(e){return this.premultiply(uA.makeRotation(-e)),this}translate(e,t){return this.premultiply(uA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const uA=new pn;function IY(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const TLe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function lp(n,e){return new TLe[n](e)}function yv(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function LY(){const n=yv("canvas");return n.style.display="block",n}const Y6={};function ud(n){n in Y6||(Y6[n]=!0,console.warn(n))}const Z6=new pn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),J6=new pn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),vb={[_l]:{transfer:fv,primaries:pv,toReference:n=>n,fromReference:n=>n},[ni]:{transfer:tr,primaries:pv,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[dy]:{transfer:fv,primaries:mv,toReference:n=>n.applyMatrix3(J6),fromReference:n=>n.applyMatrix3(Z6)},[g_]:{transfer:tr,primaries:mv,toReference:n=>n.convertSRGBToLinear().applyMatrix3(J6),fromReference:n=>n.applyMatrix3(Z6).convertLinearToSRGB()}},MLe=new Set([_l,dy]),Ln={enabled:!0,_workingColorSpace:_l,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!MLe.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=vb[e].toReference,i=vb[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return vb[n].primaries},getTransfer:function(n){return n===mo?fv:vb[n].transfer}};function Dp(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function cA(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let pf;class yO{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{pf===void 0&&(pf=yv("canvas")),pf.width=e.width,pf.height=e.height;const r=pf.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=pf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=yv("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let o=0;o<a.length;o++)a[o]=Dp(a[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Dp(t[r]/255)*255):t[r]=Dp(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let DLe=0;class Kh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:DLe++}),this.uuid=So(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let o=0,s=i.length;o<s;o++)i[o].isDataTexture?a.push(hA(i[o].image)):a.push(hA(i[o]))}else a=hA(i);r.url=a}return t||(e.images[this.uuid]=r),r}}function hA(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?yO.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let kLe=0;class Sr extends Tl{constructor(e=Sr.DEFAULT_IMAGE,t=Sr.DEFAULT_MAPPING,r=Zi,i=Zi,a=sr,o=sl,s=ya,l=gl,u=Sr.DEFAULT_ANISOTROPY,c=mo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:kLe++}),this.uuid=So(),this.name="",this.source=new Kh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=o,this.anisotropy=u,this.format=s,this.internalFormat=null,this.type=l,this.offset=new Qe(0,0),this.repeat=new Qe(1,1),this.center=new Qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(ud("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===Ic?ni:mo),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==f_)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case lv:e.x=e.x-Math.floor(e.x);break;case Zi:e.x=e.x<0?0:1;break;case uv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case lv:e.y=e.y-Math.floor(e.y);break;case Zi:e.y=e.y<0?0:1;break;case uv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return ud("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ni?Ic:mO}set encoding(e){ud("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ic?ni:mo}}Sr.DEFAULT_IMAGE=null;Sr.DEFAULT_MAPPING=f_;Sr.DEFAULT_ANISOTROPY=1;class Bn{constructor(e=0,t=0,r=0,i=1){Bn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*a,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*a,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*a,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,a;const o=e.elements,s=o[0],l=o[4],u=o[8],c=o[1],h=o[5],d=o[9],f=o[2],p=o[6],v=o[10];if(Math.abs(l-c)<.01&&Math.abs(u-f)<.01&&Math.abs(d-p)<.01){if(Math.abs(l+c)<.1&&Math.abs(u+f)<.1&&Math.abs(d+p)<.1&&Math.abs(s+h+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const g=(s+1)/2,w=(h+1)/2,b=(v+1)/2,m=(l+c)/4,x=(u+f)/4,S=(d+p)/4;return g>w&&g>b?g<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(g),i=m/r,a=x/r):w>b?w<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(w),r=m/i,a=S/i):b<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(b),r=x/a,i=S/a),this.set(r,i,a,t),this}let y=Math.sqrt((p-d)*(p-d)+(u-f)*(u-f)+(c-l)*(c-l));return Math.abs(y)<.001&&(y=1),this.x=(p-d)/y,this.y=(u-f)/y,this.z=(c-l)/y,this.w=Math.acos((s+h+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class FY extends Tl{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Bn(0,0,e,t),this.scissorTest=!1,this.viewport=new Bn(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(ud("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Ic?ni:mo),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:sr,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Sr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Kh(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class es extends FY{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class v_ extends Sr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=zr,this.minFilter=zr,this.wrapR=Zi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class NLe extends es{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new v_(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class bO extends Sr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=zr,this.minFilter=zr,this.wrapR=Zi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class OLe extends es{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new bO(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class PLe extends es{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const a=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=a.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,a=this.texture.length;i<a;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class yi{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,a,o,s){let l=r[i+0],u=r[i+1],c=r[i+2],h=r[i+3];const d=a[o+0],f=a[o+1],p=a[o+2],v=a[o+3];if(s===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h;return}if(s===1){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=v;return}if(h!==v||l!==d||u!==f||c!==p){let y=1-s;const g=l*d+u*f+c*p+h*v,w=g>=0?1:-1,b=1-g*g;if(b>Number.EPSILON){const x=Math.sqrt(b),S=Math.atan2(x,g*w);y=Math.sin(y*S)/x,s=Math.sin(s*S)/x}const m=s*w;if(l=l*y+d*m,u=u*y+f*m,c=c*y+p*m,h=h*y+v*m,y===1-s){const x=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=x,u*=x,c*=x,h*=x}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,a,o){const s=r[i],l=r[i+1],u=r[i+2],c=r[i+3],h=a[o],d=a[o+1],f=a[o+2],p=a[o+3];return e[t]=s*p+c*h+l*f-u*d,e[t+1]=l*p+c*d+u*h-s*f,e[t+2]=u*p+c*f+s*d-l*h,e[t+3]=c*p-s*h-l*d-u*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,a=e._z,o=e._order,s=Math.cos,l=Math.sin,u=s(r/2),c=s(i/2),h=s(a/2),d=l(r/2),f=l(i/2),p=l(a/2);switch(o){case"XYZ":this._x=d*c*h+u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h-d*f*p;break;case"YXZ":this._x=d*c*h+u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h+d*f*p;break;case"ZXY":this._x=d*c*h-u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h-d*f*p;break;case"ZYX":this._x=d*c*h-u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h+d*f*p;break;case"YZX":this._x=d*c*h+u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h-d*f*p;break;case"XZY":this._x=d*c*h-u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],a=t[8],o=t[1],s=t[5],l=t[9],u=t[2],c=t[6],h=t[10],d=r+s+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(c-l)*f,this._y=(a-u)*f,this._z=(o-i)*f}else if(r>s&&r>h){const f=2*Math.sqrt(1+r-s-h);this._w=(c-l)/f,this._x=.25*f,this._y=(i+o)/f,this._z=(a+u)/f}else if(s>h){const f=2*Math.sqrt(1+s-r-h);this._w=(a-u)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(l+c)/f}else{const f=2*Math.sqrt(1+h-r-s);this._w=(o-i)/f,this._x=(a+u)/f,this._y=(l+c)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(kr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,a=e._z,o=e._w,s=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+o*s+i*u-a*l,this._y=i*c+o*l+a*s-r*u,this._z=a*c+o*u+r*l-i*s,this._w=o*c-r*s-i*l-a*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,a=this._z,o=this._w;let s=o*e._w+r*e._x+i*e._y+a*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=r,this._y=i,this._z=a,this;const l=1-s*s;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*a+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,s),h=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=o*h+this._w*d,this._x=r*h+this._x*d,this._y=i*h+this._y*d,this._z=a*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(a),r*Math.cos(a),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class me{constructor(e=0,t=0,r=0){me.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(K6.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(K6.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*i,this.y=a[1]*t+a[4]*r+a[7]*i,this.z=a[2]*t+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=e.elements,o=1/(a[3]*t+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*i+a[12])*o,this.y=(a[1]*t+a[5]*r+a[9]*i+a[13])*o,this.z=(a[2]*t+a[6]*r+a[10]*i+a[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,a=e.x,o=e.y,s=e.z,l=e.w,u=2*(o*i-s*r),c=2*(s*t-a*i),h=2*(a*r-o*t);return this.x=t+l*u+o*h-s*c,this.y=r+l*c+s*u-a*h,this.z=i+l*h+a*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i,this.y=a[1]*t+a[5]*r+a[9]*i,this.z=a[2]*t+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,a=e.z,o=t.x,s=t.y,l=t.z;return this.x=i*l-a*s,this.y=a*o-r*l,this.z=r*s-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return dA.copy(this).projectOnVector(e),this.sub(dA)}reflect(e){return this.sub(dA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(kr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const dA=new me,K6=new yi;class Ca{constructor(e=new me(1/0,1/0,1/0),t=new me(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(hs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(hs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=hs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let o=0,s=a.count;o<s;o++)e.isMesh===!0?e.getVertexPosition(o,hs):hs.fromBufferAttribute(a,o),hs.applyMatrix4(e.matrixWorld),this.expandByPoint(hs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),yb.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),yb.copy(r.boundingBox)),yb.applyMatrix4(e.matrixWorld),this.union(yb)}const i=e.children;for(let a=0,o=i.length;a<o;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,hs),hs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Sg),bb.subVectors(this.max,Sg),mf.subVectors(e.a,Sg),gf.subVectors(e.b,Sg),vf.subVectors(e.c,Sg),$u.subVectors(gf,mf),Xu.subVectors(vf,gf),wh.subVectors(mf,vf);let t=[0,-$u.z,$u.y,0,-Xu.z,Xu.y,0,-wh.z,wh.y,$u.z,0,-$u.x,Xu.z,0,-Xu.x,wh.z,0,-wh.x,-$u.y,$u.x,0,-Xu.y,Xu.x,0,-wh.y,wh.x,0];return!fA(t,mf,gf,vf,bb)||(t=[1,0,0,0,1,0,0,0,1],!fA(t,mf,gf,vf,bb))?!1:(xb.crossVectors($u,Xu),t=[xb.x,xb.y,xb.z],fA(t,mf,gf,vf,bb))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,hs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(hs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Hl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Hl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Hl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Hl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Hl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Hl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Hl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Hl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Hl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Hl=[new me,new me,new me,new me,new me,new me,new me,new me],hs=new me,yb=new Ca,mf=new me,gf=new me,vf=new me,$u=new me,Xu=new me,wh=new me,Sg=new me,bb=new me,xb=new me,Sh=new me;function fA(n,e,t,r,i){for(let a=0,o=n.length-3;a<=o;a+=3){Sh.fromArray(n,a);const s=i.x*Math.abs(Sh.x)+i.y*Math.abs(Sh.y)+i.z*Math.abs(Sh.z),l=e.dot(Sh),u=t.dot(Sh),c=r.dot(Sh);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}const RLe=new Ca,Eg=new me,pA=new me;class ea{constructor(e=new me,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):RLe.setFromPoints(e).getCenter(r);let i=0;for(let a=0,o=e.length;a<o;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Eg.subVectors(e,this.center);const t=Eg.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Eg,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(pA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Eg.copy(e.center).add(pA)),this.expandByPoint(Eg.copy(e.center).sub(pA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Vl=new me,mA=new me,wb=new me,Yu=new me,gA=new me,Sb=new me,vA=new me;class Ud{constructor(e=new me,t=new me(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Vl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Vl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Vl.copy(this.origin).addScaledVector(this.direction,t),Vl.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){mA.copy(e).add(t).multiplyScalar(.5),wb.copy(t).sub(e).normalize(),Yu.copy(this.origin).sub(mA);const a=e.distanceTo(t)*.5,o=-this.direction.dot(wb),s=Yu.dot(this.direction),l=-Yu.dot(wb),u=Yu.lengthSq(),c=Math.abs(1-o*o);let h,d,f,p;if(c>0)if(h=o*l-s,d=o*s-l,p=a*c,h>=0)if(d>=-p)if(d<=p){const v=1/c;h*=v,d*=v,f=h*(h+o*d+2*s)+d*(o*h+d+2*l)+u}else d=a,h=Math.max(0,-(o*d+s)),f=-h*h+d*(d+2*l)+u;else d=-a,h=Math.max(0,-(o*d+s)),f=-h*h+d*(d+2*l)+u;else d<=-p?(h=Math.max(0,-(-o*a+s)),d=h>0?-a:Math.min(Math.max(-a,-l),a),f=-h*h+d*(d+2*l)+u):d<=p?(h=0,d=Math.min(Math.max(-a,-l),a),f=d*(d+2*l)+u):(h=Math.max(0,-(o*a+s)),d=h>0?a:Math.min(Math.max(-a,-l),a),f=-h*h+d*(d+2*l)+u);else d=o>0?-a:a,h=Math.max(0,-(o*d+s)),f=-h*h+d*(d+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(mA).addScaledVector(wb,d),f}intersectSphere(e,t){Vl.subVectors(e.center,this.origin);const r=Vl.dot(this.direction),i=Vl.dot(Vl)-r*r,a=e.radius*e.radius;if(i>a)return null;const o=Math.sqrt(a-i),s=r-o,l=r+o;return l<0?null:s<0?this.at(l,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,a,o,s,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,d=this.origin;return u>=0?(r=(e.min.x-d.x)*u,i=(e.max.x-d.x)*u):(r=(e.max.x-d.x)*u,i=(e.min.x-d.x)*u),c>=0?(a=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(a=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),r>o||a>i||((a>r||isNaN(r))&&(r=a),(o<i||isNaN(i))&&(i=o),h>=0?(s=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(s=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),r>l||s>i)||((s>r||r!==r)&&(r=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Vl)!==null}intersectTriangle(e,t,r,i,a){gA.subVectors(t,e),Sb.subVectors(r,e),vA.crossVectors(gA,Sb);let o=this.direction.dot(vA),s;if(o>0){if(i)return null;s=1}else if(o<0)s=-1,o=-o;else return null;Yu.subVectors(this.origin,e);const l=s*this.direction.dot(Sb.crossVectors(Yu,Sb));if(l<0)return null;const u=s*this.direction.dot(gA.cross(Yu));if(u<0||l+u>o)return null;const c=-s*Yu.dot(vA);return c<0?null:this.at(c/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Yt{constructor(e,t,r,i,a,o,s,l,u,c,h,d,f,p,v,y){Yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,o,s,l,u,c,h,d,f,p,v,y)}set(e,t,r,i,a,o,s,l,u,c,h,d,f,p,v,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=a,g[5]=o,g[9]=s,g[13]=l,g[2]=u,g[6]=c,g[10]=h,g[14]=d,g[3]=f,g[7]=p,g[11]=v,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/yf.setFromMatrixColumn(e,0).length(),a=1/yf.setFromMatrixColumn(e,1).length(),o=1/yf.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,a=e.z,o=Math.cos(r),s=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(a),h=Math.sin(a);if(e.order==="XYZ"){const d=o*c,f=o*h,p=s*c,v=s*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=f+p*u,t[5]=d-v*u,t[9]=-s*l,t[2]=v-d*u,t[6]=p+f*u,t[10]=o*l}else if(e.order==="YXZ"){const d=l*c,f=l*h,p=u*c,v=u*h;t[0]=d+v*s,t[4]=p*s-f,t[8]=o*u,t[1]=o*h,t[5]=o*c,t[9]=-s,t[2]=f*s-p,t[6]=v+d*s,t[10]=o*l}else if(e.order==="ZXY"){const d=l*c,f=l*h,p=u*c,v=u*h;t[0]=d-v*s,t[4]=-o*h,t[8]=p+f*s,t[1]=f+p*s,t[5]=o*c,t[9]=v-d*s,t[2]=-o*u,t[6]=s,t[10]=o*l}else if(e.order==="ZYX"){const d=o*c,f=o*h,p=s*c,v=s*h;t[0]=l*c,t[4]=p*u-f,t[8]=d*u+v,t[1]=l*h,t[5]=v*u+d,t[9]=f*u-p,t[2]=-u,t[6]=s*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*u,p=s*l,v=s*u;t[0]=l*c,t[4]=v-d*h,t[8]=p*h+f,t[1]=h,t[5]=o*c,t[9]=-s*c,t[2]=-u*c,t[6]=f*h+p,t[10]=d-v*h}else if(e.order==="XZY"){const d=o*l,f=o*u,p=s*l,v=s*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=d*h+v,t[5]=o*c,t[9]=f*h-p,t[2]=p*h-f,t[6]=s*c,t[10]=v*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ILe,e,LLe)}lookAt(e,t,r){const i=this.elements;return io.subVectors(e,t),io.lengthSq()===0&&(io.z=1),io.normalize(),Zu.crossVectors(r,io),Zu.lengthSq()===0&&(Math.abs(r.z)===1?io.x+=1e-4:io.z+=1e-4,io.normalize(),Zu.crossVectors(r,io)),Zu.normalize(),Eb.crossVectors(io,Zu),i[0]=Zu.x,i[4]=Eb.x,i[8]=io.x,i[1]=Zu.y,i[5]=Eb.y,i[9]=io.y,i[2]=Zu.z,i[6]=Eb.z,i[10]=io.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,o=r[0],s=r[4],l=r[8],u=r[12],c=r[1],h=r[5],d=r[9],f=r[13],p=r[2],v=r[6],y=r[10],g=r[14],w=r[3],b=r[7],m=r[11],x=r[15],S=i[0],C=i[4],T=i[8],M=i[12],A=i[1],D=i[5],O=i[9],U=i[13],L=i[2],F=i[6],k=i[10],P=i[14],z=i[3],B=i[7],X=i[11],J=i[15];return a[0]=o*S+s*A+l*L+u*z,a[4]=o*C+s*D+l*F+u*B,a[8]=o*T+s*O+l*k+u*X,a[12]=o*M+s*U+l*P+u*J,a[1]=c*S+h*A+d*L+f*z,a[5]=c*C+h*D+d*F+f*B,a[9]=c*T+h*O+d*k+f*X,a[13]=c*M+h*U+d*P+f*J,a[2]=p*S+v*A+y*L+g*z,a[6]=p*C+v*D+y*F+g*B,a[10]=p*T+v*O+y*k+g*X,a[14]=p*M+v*U+y*P+g*J,a[3]=w*S+b*A+m*L+x*z,a[7]=w*C+b*D+m*F+x*B,a[11]=w*T+b*O+m*k+x*X,a[15]=w*M+b*U+m*P+x*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],a=e[12],o=e[1],s=e[5],l=e[9],u=e[13],c=e[2],h=e[6],d=e[10],f=e[14],p=e[3],v=e[7],y=e[11],g=e[15];return p*(+a*l*h-i*u*h-a*s*d+r*u*d+i*s*f-r*l*f)+v*(+t*l*f-t*u*d+a*o*d-i*o*f+i*u*c-a*l*c)+y*(+t*u*h-t*s*f-a*o*h+r*o*f+a*s*c-r*u*c)+g*(-i*s*c-t*l*h+t*s*d+i*o*h-r*o*d+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],v=e[13],y=e[14],g=e[15],w=h*y*u-v*d*u+v*l*f-s*y*f-h*l*g+s*d*g,b=p*d*u-c*y*u-p*l*f+o*y*f+c*l*g-o*d*g,m=c*v*u-p*h*u+p*s*f-o*v*f-c*s*g+o*h*g,x=p*h*l-c*v*l-p*s*d+o*v*d+c*s*y-o*h*y,S=t*w+r*b+i*m+a*x;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/S;return e[0]=w*C,e[1]=(v*d*a-h*y*a-v*i*f+r*y*f+h*i*g-r*d*g)*C,e[2]=(s*y*a-v*l*a+v*i*u-r*y*u-s*i*g+r*l*g)*C,e[3]=(h*l*a-s*d*a-h*i*u+r*d*u+s*i*f-r*l*f)*C,e[4]=b*C,e[5]=(c*y*a-p*d*a+p*i*f-t*y*f-c*i*g+t*d*g)*C,e[6]=(p*l*a-o*y*a-p*i*u+t*y*u+o*i*g-t*l*g)*C,e[7]=(o*d*a-c*l*a+c*i*u-t*d*u-o*i*f+t*l*f)*C,e[8]=m*C,e[9]=(p*h*a-c*v*a-p*r*f+t*v*f+c*r*g-t*h*g)*C,e[10]=(o*v*a-p*s*a+p*r*u-t*v*u-o*r*g+t*s*g)*C,e[11]=(c*s*a-o*h*a-c*r*u+t*h*u+o*r*f-t*s*f)*C,e[12]=x*C,e[13]=(c*v*i-p*h*i+p*r*d-t*v*d-c*r*y+t*h*y)*C,e[14]=(p*s*i-o*v*i-p*r*l+t*v*l+o*r*y-t*s*y)*C,e[15]=(o*h*i-c*s*i+c*r*l-t*h*l-o*r*d+t*s*d)*C,this}scale(e){const t=this.elements,r=e.x,i=e.y,a=e.z;return t[0]*=r,t[4]*=i,t[8]*=a,t[1]*=r,t[5]*=i,t[9]*=a,t[2]*=r,t[6]*=i,t[10]*=a,t[3]*=r,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),a=1-r,o=e.x,s=e.y,l=e.z,u=a*o,c=a*s;return this.set(u*o+r,u*s-i*l,u*l+i*s,0,u*s+i*l,c*s+r,c*l-i*o,0,u*l-i*s,c*l+i*o,a*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,a,o){return this.set(1,r,a,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,a=t._x,o=t._y,s=t._z,l=t._w,u=a+a,c=o+o,h=s+s,d=a*u,f=a*c,p=a*h,v=o*c,y=o*h,g=s*h,w=l*u,b=l*c,m=l*h,x=r.x,S=r.y,C=r.z;return i[0]=(1-(v+g))*x,i[1]=(f+m)*x,i[2]=(p-b)*x,i[3]=0,i[4]=(f-m)*S,i[5]=(1-(d+g))*S,i[6]=(y+w)*S,i[7]=0,i[8]=(p+b)*C,i[9]=(y-w)*C,i[10]=(1-(d+v))*C,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let a=yf.set(i[0],i[1],i[2]).length();const o=yf.set(i[4],i[5],i[6]).length(),s=yf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],ds.copy(this);const l=1/a,u=1/o,c=1/s;return ds.elements[0]*=l,ds.elements[1]*=l,ds.elements[2]*=l,ds.elements[4]*=u,ds.elements[5]*=u,ds.elements[6]*=u,ds.elements[8]*=c,ds.elements[9]*=c,ds.elements[10]*=c,t.setFromRotationMatrix(ds),r.x=a,r.y=o,r.z=s,this}makePerspective(e,t,r,i,a,o,s=ll){const l=this.elements,u=2*a/(t-e),c=2*a/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i);let f,p;if(s===ll)f=-(o+a)/(o-a),p=-2*o*a/(o-a);else if(s===vv)f=-o/(o-a),p=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,a,o,s=ll){const l=this.elements,u=1/(t-e),c=1/(r-i),h=1/(o-a),d=(t+e)*u,f=(r+i)*c;let p,v;if(s===ll)p=(o+a)*h,v=-2*h;else if(s===vv)p=a*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=v,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const yf=new me,ds=new Yt,ILe=new me(0,0,0),LLe=new me(1,1,1),Zu=new me,Eb=new me,io=new me,Q6=new Yt,eU=new yi;class fy{constructor(e=0,t=0,r=0,i=fy.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],h=i[2],d=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(kr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-kr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(kr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-kr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(kr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,f));break;case"XZY":this._z=Math.asin(-kr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return Q6.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Q6,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return eU.setFromEuler(this),this.setFromQuaternion(eU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}fy.DEFAULT_ORDER="XYZ";class cd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let FLe=0;const tU=new me,bf=new yi,Wl=new Yt,_b=new me,_g=new me,BLe=new me,zLe=new yi,nU=new me(1,0,0),rU=new me(0,1,0),iU=new me(0,0,1),ULe={type:"added"},jLe={type:"removed"};class _n extends Tl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:FLe++}),this.uuid=So(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_n.DEFAULT_UP.clone();const e=new me,t=new fy,r=new yi,i=new me(1,1,1);function a(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(a),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Yt},normalMatrix:{value:new pn}}),this.matrix=new Yt,this.matrixWorld=new Yt,this.matrixAutoUpdate=_n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new cd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return bf.setFromAxisAngle(e,t),this.quaternion.multiply(bf),this}rotateOnWorldAxis(e,t){return bf.setFromAxisAngle(e,t),this.quaternion.premultiply(bf),this}rotateX(e){return this.rotateOnAxis(nU,e)}rotateY(e){return this.rotateOnAxis(rU,e)}rotateZ(e){return this.rotateOnAxis(iU,e)}translateOnAxis(e,t){return tU.copy(e).applyQuaternion(this.quaternion),this.position.add(tU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(nU,e)}translateY(e){return this.translateOnAxis(rU,e)}translateZ(e){return this.translateOnAxis(iU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Wl.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?_b.copy(e):_b.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),_g.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wl.lookAt(_g,_b,this.up):Wl.lookAt(_b,_g,this.up),this.quaternion.setFromRotationMatrix(Wl),i&&(Wl.extractRotation(i.matrixWorld),bf.setFromRotationMatrix(Wl),this.quaternion.premultiply(bf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ULe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(jLe)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Wl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Wl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Wl),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let a=0,o=i.length;a<o;a++)i[a].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_g,e,BLe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_g,zLe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const a=t[r];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let a=0,o=i.length;a<o;a++){const s=i[a];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(s=>({boxInitialized:s.boxInitialized,boxMin:s.box.min.toArray(),boxMax:s.box.max.toArray(),sphereInitialized:s.sphereInitialized,sphereRadius:s.sphere.radius,sphereCenter:s.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function a(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];a(e.shapes,h)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,u=this.material.length;l<u;l++)s.push(a(e.materials,this.material[l]));i.material=s}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(a(e.animations,l))}}if(t){const s=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),p=o(e.nodes);s.length>0&&(r.geometries=s),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),f.length>0&&(r.animations=f),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(s){const l=[];for(const u in s){const c=s[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}_n.DEFAULT_UP=new me(0,1,0);_n.DEFAULT_MATRIX_AUTO_UPDATE=!0;_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const fs=new me,ql=new me,yA=new me,Gl=new me,xf=new me,wf=new me,aU=new me,bA=new me,xA=new me,wA=new me;class go{constructor(e=new me,t=new me,r=new me){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),fs.subVectors(e,t),i.cross(fs);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,r,i,a){fs.subVectors(i,t),ql.subVectors(r,t),yA.subVectors(e,t);const o=fs.dot(fs),s=fs.dot(ql),l=fs.dot(yA),u=ql.dot(ql),c=ql.dot(yA),h=o*u-s*s;if(h===0)return a.set(0,0,0),null;const d=1/h,f=(u*l-s*c)*d,p=(o*c-s*l)*d;return a.set(1-f-p,p,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Gl)===null?!1:Gl.x>=0&&Gl.y>=0&&Gl.x+Gl.y<=1}static getInterpolation(e,t,r,i,a,o,s,l){return this.getBarycoord(e,t,r,i,Gl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,Gl.x),l.addScaledVector(o,Gl.y),l.addScaledVector(s,Gl.z),l)}static isFrontFacing(e,t,r,i){return fs.subVectors(r,t),ql.subVectors(e,t),fs.cross(ql).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return fs.subVectors(this.c,this.b),ql.subVectors(this.a,this.b),fs.cross(ql).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return go.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return go.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,a){return go.getInterpolation(e,this.a,this.b,this.c,t,r,i,a)}containsPoint(e){return go.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return go.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,a=this.c;let o,s;xf.subVectors(i,r),wf.subVectors(a,r),bA.subVectors(e,r);const l=xf.dot(bA),u=wf.dot(bA);if(l<=0&&u<=0)return t.copy(r);xA.subVectors(e,i);const c=xf.dot(xA),h=wf.dot(xA);if(c>=0&&h<=c)return t.copy(i);const d=l*h-c*u;if(d<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector(xf,o);wA.subVectors(e,a);const f=xf.dot(wA),p=wf.dot(wA);if(p>=0&&f<=p)return t.copy(a);const v=f*u-l*p;if(v<=0&&u>=0&&p<=0)return s=u/(u-p),t.copy(r).addScaledVector(wf,s);const y=c*p-f*h;if(y<=0&&h-c>=0&&f-p>=0)return aU.subVectors(a,i),s=(h-c)/(h-c+(f-p)),t.copy(i).addScaledVector(aU,s);const g=1/(y+v+d);return o=v*g,s=d*g,t.copy(r).addScaledVector(xf,o).addScaledVector(wf,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const BY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ju={h:0,s:0,l:0},Cb={h:0,s:0,l:0};function SA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class wt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ni){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ln.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Ln.workingColorSpace){return this.r=e,this.g=t,this.b=r,Ln.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Ln.workingColorSpace){if(e=vO(e,1),t=kr(t,0,1),r=kr(r,0,1),t===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+t):r+t-r*t,o=2*r-a;this.r=SA(o,a,e+1/3),this.g=SA(o,a,e),this.b=SA(o,a,e-1/3)}return Ln.toWorkingColorSpace(this,i),this}setStyle(e,t=ni){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const o=i[1],s=i[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ni){const r=BY[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Dp(e.r),this.g=Dp(e.g),this.b=Dp(e.b),this}copyLinearToSRGB(e){return this.r=cA(e.r),this.g=cA(e.g),this.b=cA(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ni){return Ln.fromWorkingColorSpace(qi.copy(this),e),Math.round(kr(qi.r*255,0,255))*65536+Math.round(kr(qi.g*255,0,255))*256+Math.round(kr(qi.b*255,0,255))}getHexString(e=ni){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ln.workingColorSpace){Ln.fromWorkingColorSpace(qi.copy(this),t);const r=qi.r,i=qi.g,a=qi.b,o=Math.max(r,i,a),s=Math.min(r,i,a);let l,u;const c=(s+o)/2;if(s===o)l=0,u=0;else{const h=o-s;switch(u=c<=.5?h/(o+s):h/(2-o-s),o){case r:l=(i-a)/h+(i<a?6:0);break;case i:l=(a-r)/h+2;break;case a:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Ln.workingColorSpace){return Ln.fromWorkingColorSpace(qi.copy(this),t),e.r=qi.r,e.g=qi.g,e.b=qi.b,e}getStyle(e=ni){Ln.fromWorkingColorSpace(qi.copy(this),e);const t=qi.r,r=qi.g,i=qi.b;return e!==ni?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Ju),this.setHSL(Ju.h+e,Ju.s+t,Ju.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Ju),e.getHSL(Cb);const r=y0(Ju.h,Cb.h,t),i=y0(Ju.s,Cb.s,t),a=y0(Ju.l,Cb.l,t);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*t+a[3]*r+a[6]*i,this.g=a[1]*t+a[4]*r+a[7]*i,this.b=a[2]*t+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const qi=new wt;wt.NAMES=BY;let HLe=0;class Li extends Tl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:HLe++}),this.uuid=So(),this.name="",this.type="Material",this.blending=sd,this.side=Eu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=zS,this.blendDst=US,this.blendEquation=hc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new wt(0,0,0),this.blendAlpha=0,this.depthFunc=av,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ZD,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Lh,this.stencilZFail=Lh,this.stencilZPass=Lh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==sd&&(r.blending=this.blending),this.side!==Eu&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==zS&&(r.blendSrc=this.blendSrc),this.blendDst!==US&&(r.blendDst=this.blendDst),this.blendEquation!==hc&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==av&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ZD&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Lh&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Lh&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Lh&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const o=[];for(const s in a){const l=a[s];delete l.metadata,o.push(l)}return o}if(t){const a=i(e.textures),o=i(e.images);a.length>0&&(r.textures=a),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class lh extends Li{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ql=VLe();function VLe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,a[l]=u|c}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(s[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:o,offsetTable:s}}function Ba(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=kr(n,-65504,65504),Ql.floatView[0]=n;const e=Ql.uint32View[0],t=e>>23&511;return Ql.baseTable[t]+((e&8388607)>>Ql.shiftTable[t])}function Zg(n){const e=n>>10;return Ql.uint32View[0]=Ql.mantissaTable[Ql.offsetTable[e]+(n&1023)]+Ql.exponentTable[e],Ql.floatView[0]}const WLe={toHalfFloat:Ba,fromHalfFloat:Zg},Gr=new me,Ab=new Qe;class Hn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=gv,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=po,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return ud("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Ab.fromBufferAttribute(this,t),Ab.applyMatrix3(e),this.setXY(t,Ab.x,Ab.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.applyMatrix3(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.applyMatrix4(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.applyNormalMatrix(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.transformDirection(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=ba(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ln(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ba(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ba(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ba(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ba(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),a=ln(a,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==gv&&(e.usage=this.usage),e}}class qLe extends Hn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class GLe extends Hn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class $Le extends Hn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class XLe extends Hn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class xO extends Hn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class YLe extends Hn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class wO extends Hn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class ZLe extends Hn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Zg(this.array[e*this.itemSize]);return this.normalized&&(t=ba(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=Ba(t),this}getY(e){let t=Zg(this.array[e*this.itemSize+1]);return this.normalized&&(t=ba(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=Ba(t),this}getZ(e){let t=Zg(this.array[e*this.itemSize+2]);return this.normalized&&(t=ba(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=Ba(t),this}getW(e){let t=Zg(this.array[e*this.itemSize+3]);return this.normalized&&(t=ba(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=Ba(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.array[e+0]=Ba(t),this.array[e+1]=Ba(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.array[e+0]=Ba(t),this.array[e+1]=Ba(r),this.array[e+2]=Ba(i),this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),a=ln(a,this.array)),this.array[e+0]=Ba(t),this.array[e+1]=Ba(r),this.array[e+2]=Ba(i),this.array[e+3]=Ba(a),this}}class Mt extends Hn{constructor(e,t,r){super(new Float32Array(e),t,r)}}class JLe extends Hn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let KLe=0;const Bo=new Yt,EA=new _n,Sf=new me,ao=new Ca,Cg=new Ca,pi=new me;class sn extends Tl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:KLe++}),this.uuid=So(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(IY(e)?wO:xO)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new pn().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Bo.makeRotationFromQuaternion(e),this.applyMatrix4(Bo),this}rotateX(e){return Bo.makeRotationX(e),this.applyMatrix4(Bo),this}rotateY(e){return Bo.makeRotationY(e),this.applyMatrix4(Bo),this}rotateZ(e){return Bo.makeRotationZ(e),this.applyMatrix4(Bo),this}translate(e,t,r){return Bo.makeTranslation(e,t,r),this.applyMatrix4(Bo),this}scale(e,t,r){return Bo.makeScale(e,t,r),this.applyMatrix4(Bo),this}lookAt(e){return EA.lookAt(e),EA.updateMatrix(),this.applyMatrix4(EA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Sf).negate(),this.translate(Sf.x,Sf.y,Sf.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const a=e[r];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Mt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ca);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new me(-1/0,-1/0,-1/0),new me(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const a=t[r];ao.setFromBufferAttribute(a),this.morphTargetsRelative?(pi.addVectors(this.boundingBox.min,ao.min),this.boundingBox.expandByPoint(pi),pi.addVectors(this.boundingBox.max,ao.max),this.boundingBox.expandByPoint(pi)):(this.boundingBox.expandByPoint(ao.min),this.boundingBox.expandByPoint(ao.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ea);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new me,1/0);return}if(e){const r=this.boundingSphere.center;if(ao.setFromBufferAttribute(e),t)for(let a=0,o=t.length;a<o;a++){const s=t[a];Cg.setFromBufferAttribute(s),this.morphTargetsRelative?(pi.addVectors(ao.min,Cg.min),ao.expandByPoint(pi),pi.addVectors(ao.max,Cg.max),ao.expandByPoint(pi)):(ao.expandByPoint(Cg.min),ao.expandByPoint(Cg.max))}ao.getCenter(r);let i=0;for(let a=0,o=e.count;a<o;a++)pi.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(pi));if(t)for(let a=0,o=t.length;a<o;a++){const s=t[a],l=this.morphTargetsRelative;for(let u=0,c=s.count;u<c;u++)pi.fromBufferAttribute(s,u),l&&(Sf.fromBufferAttribute(e,u),pi.add(Sf)),i=Math.max(i,r.distanceToSquared(pi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,a=t.normal.array,o=t.uv.array,s=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Hn(new Float32Array(4*s),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let A=0;A<s;A++)u[A]=new me,c[A]=new me;const h=new me,d=new me,f=new me,p=new Qe,v=new Qe,y=new Qe,g=new me,w=new me;function b(A,D,O){h.fromArray(i,A*3),d.fromArray(i,D*3),f.fromArray(i,O*3),p.fromArray(o,A*2),v.fromArray(o,D*2),y.fromArray(o,O*2),d.sub(h),f.sub(h),v.sub(p),y.sub(p);const U=1/(v.x*y.y-y.x*v.y);isFinite(U)&&(g.copy(d).multiplyScalar(y.y).addScaledVector(f,-v.y).multiplyScalar(U),w.copy(f).multiplyScalar(v.x).addScaledVector(d,-y.x).multiplyScalar(U),u[A].add(g),u[D].add(g),u[O].add(g),c[A].add(w),c[D].add(w),c[O].add(w))}let m=this.groups;m.length===0&&(m=[{start:0,count:r.length}]);for(let A=0,D=m.length;A<D;++A){const O=m[A],U=O.start,L=O.count;for(let F=U,k=U+L;F<k;F+=3)b(r[F+0],r[F+1],r[F+2])}const x=new me,S=new me,C=new me,T=new me;function M(A){C.fromArray(a,A*3),T.copy(C);const D=u[A];x.copy(D),x.sub(C.multiplyScalar(C.dot(D))).normalize(),S.crossVectors(T,D);const O=S.dot(c[A])<0?-1:1;l[A*4]=x.x,l[A*4+1]=x.y,l[A*4+2]=x.z,l[A*4+3]=O}for(let A=0,D=m.length;A<D;++A){const O=m[A],U=O.start,L=O.count;for(let F=U,k=U+L;F<k;F+=3)M(r[F+0]),M(r[F+1]),M(r[F+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Hn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,f=r.count;d<f;d++)r.setXYZ(d,0,0,0);const i=new me,a=new me,o=new me,s=new me,l=new me,u=new me,c=new me,h=new me;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),v=e.getX(d+1),y=e.getX(d+2);i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,y),c.subVectors(o,a),h.subVectors(i,a),c.cross(h),s.fromBufferAttribute(r,p),l.fromBufferAttribute(r,v),u.fromBufferAttribute(r,y),s.add(c),l.add(c),u.add(c),r.setXYZ(p,s.x,s.y,s.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(y,u.x,u.y,u.z)}else for(let d=0,f=t.count;d<f;d+=3)i.fromBufferAttribute(t,d+0),a.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),c.subVectors(o,a),h.subVectors(i,a),c.cross(h),r.setXYZ(d+0,c.x,c.y,c.z),r.setXYZ(d+1,c.x,c.y,c.z),r.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)pi.fromBufferAttribute(e,t),pi.normalize(),e.setXYZ(t,pi.x,pi.y,pi.z)}toNonIndexed(){function e(s,l){const u=s.array,c=s.itemSize,h=s.normalized,d=new u.constructor(l.length*c);let f=0,p=0;for(let v=0,y=l.length;v<y;v++){s.isInterleavedBufferAttribute?f=l[v]*s.data.stride+s.offset:f=l[v]*c;for(let g=0;g<c;g++)d[p++]=u[f++]}return new Hn(d,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new sn,r=this.index.array,i=this.attributes;for(const s in i){const l=i[s],u=e(l,r);t.setAttribute(s,u)}const a=this.morphAttributes;for(const s in a){const l=[],u=a[s];for(let c=0,h=u.length;c<h;c++){const d=u[c],f=e(d,r);l.push(f)}t.morphAttributes[s]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,l=o.length;s<l;s++){const u=o[s];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,d=u.length;h<d;h++){const f=u[h];c.push(f.toJSON(e.data))}c.length>0&&(i[l]=c,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const a=e.morphAttributes;for(const u in a){const c=[],h=a[u];for(let d=0,f=h.length;d<f;d++)c.push(h[d].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const oU=new Yt,Eh=new Ud,Tb=new ea,sU=new me,Ef=new me,_f=new me,Cf=new me,_A=new me,Mb=new me,Db=new Qe,kb=new Qe,Nb=new Qe,lU=new me,uU=new me,cU=new me,Ob=new me,Pb=new me;class Yr extends _n{constructor(e=new sn,t=new lh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,a=r.length;i<a;i++){const o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(a&&s){Mb.set(0,0,0);for(let l=0,u=a.length;l<u;l++){const c=s[l],h=a[l];c!==0&&(_A.fromBufferAttribute(h,e),o?Mb.addScaledVector(_A,c):Mb.addScaledVector(_A.sub(t),c))}t.add(Mb)}return t}raycast(e,t){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Tb.copy(r.boundingSphere),Tb.applyMatrix4(a),Eh.copy(e.ray).recast(e.near),!(Tb.containsPoint(Eh.origin)===!1&&(Eh.intersectSphere(Tb,sU)===null||Eh.origin.distanceToSquared(sU)>(e.far-e.near)**2))&&(oU.copy(a).invert(),Eh.copy(e.ray).applyMatrix4(oU),!(r.boundingBox!==null&&Eh.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Eh)))}_computeIntersections(e,t,r){let i;const a=this.geometry,o=this.material,s=a.index,l=a.attributes.position,u=a.attributes.uv,c=a.attributes.uv1,h=a.attributes.normal,d=a.groups,f=a.drawRange;if(s!==null)if(Array.isArray(o))for(let p=0,v=d.length;p<v;p++){const y=d[p],g=o[y.materialIndex],w=Math.max(y.start,f.start),b=Math.min(s.count,Math.min(y.start+y.count,f.start+f.count));for(let m=w,x=b;m<x;m+=3){const S=s.getX(m),C=s.getX(m+1),T=s.getX(m+2);i=Rb(this,g,e,r,u,c,h,S,C,T),i&&(i.faceIndex=Math.floor(m/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),v=Math.min(s.count,f.start+f.count);for(let y=p,g=v;y<g;y+=3){const w=s.getX(y),b=s.getX(y+1),m=s.getX(y+2);i=Rb(this,o,e,r,u,c,h,w,b,m),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,v=d.length;p<v;p++){const y=d[p],g=o[y.materialIndex],w=Math.max(y.start,f.start),b=Math.min(l.count,Math.min(y.start+y.count,f.start+f.count));for(let m=w,x=b;m<x;m+=3){const S=m,C=m+1,T=m+2;i=Rb(this,g,e,r,u,c,h,S,C,T),i&&(i.faceIndex=Math.floor(m/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),v=Math.min(l.count,f.start+f.count);for(let y=p,g=v;y<g;y+=3){const w=y,b=y+1,m=y+2;i=Rb(this,o,e,r,u,c,h,w,b,m),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function QLe(n,e,t,r,i,a,o,s){let l;if(e.side===_a?l=r.intersectTriangle(o,a,i,!0,s):l=r.intersectTriangle(i,a,o,e.side===Eu,s),l===null)return null;Pb.copy(s),Pb.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Pb);return u<t.near||u>t.far?null:{distance:u,point:Pb.clone(),object:n}}function Rb(n,e,t,r,i,a,o,s,l,u){n.getVertexPosition(s,Ef),n.getVertexPosition(l,_f),n.getVertexPosition(u,Cf);const c=QLe(n,e,t,r,Ef,_f,Cf,Ob);if(c){i&&(Db.fromBufferAttribute(i,s),kb.fromBufferAttribute(i,l),Nb.fromBufferAttribute(i,u),c.uv=go.getInterpolation(Ob,Ef,_f,Cf,Db,kb,Nb,new Qe)),a&&(Db.fromBufferAttribute(a,s),kb.fromBufferAttribute(a,l),Nb.fromBufferAttribute(a,u),c.uv1=go.getInterpolation(Ob,Ef,_f,Cf,Db,kb,Nb,new Qe),c.uv2=c.uv1),o&&(lU.fromBufferAttribute(o,s),uU.fromBufferAttribute(o,l),cU.fromBufferAttribute(o,u),c.normal=go.getInterpolation(Ob,Ef,_f,Cf,lU,uU,cU,new me),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const h={a:s,b:l,c:u,normal:new me,materialIndex:0};go.getNormal(Ef,_f,Cf,h.normal),c.face=h}return c}class jd extends sn{constructor(e=1,t=1,r=1,i=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:a,depthSegments:o};const s=this;i=Math.floor(i),a=Math.floor(a),o=Math.floor(o);const l=[],u=[],c=[],h=[];let d=0,f=0;p("z","y","x",-1,-1,r,t,e,o,a,0),p("z","y","x",1,-1,r,t,-e,o,a,1),p("x","z","y",1,1,e,r,t,i,o,2),p("x","z","y",1,-1,e,r,-t,i,o,3),p("x","y","z",1,-1,e,t,r,i,a,4),p("x","y","z",-1,-1,e,t,-r,i,a,5),this.setIndex(l),this.setAttribute("position",new Mt(u,3)),this.setAttribute("normal",new Mt(c,3)),this.setAttribute("uv",new Mt(h,2));function p(v,y,g,w,b,m,x,S,C,T,M){const A=m/C,D=x/T,O=m/2,U=x/2,L=S/2,F=C+1,k=T+1;let P=0,z=0;const B=new me;for(let X=0;X<k;X++){const J=X*D-U;for(let Q=0;Q<F;Q++){const Z=Q*A-O;B[v]=Z*w,B[y]=J*b,B[g]=L,u.push(B.x,B.y,B.z),B[v]=0,B[y]=0,B[g]=S>0?1:-1,c.push(B.x,B.y,B.z),h.push(Q/C),h.push(1-X/T),P+=1}}for(let X=0;X<T;X++)for(let J=0;J<C;J++){const Q=d+J+F*X,Z=d+J+F*(X+1),re=d+(J+1)+F*(X+1),fe=d+(J+1)+F*X;l.push(Q,Z,fe),l.push(Z,re,fe),z+=6}s.addGroup(f,z,M),f+=z,d+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function em(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function pa(n){const e={};for(let t=0;t<n.length;t++){const r=em(n[t]);for(const i in r)e[i]=r[i]}return e}function e4e(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function zY(n){return n.getRenderTarget()===null?n.outputColorSpace:Ln.workingColorSpace}const UY={clone:em,merge:pa};var t4e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,n4e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ts extends Li{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=t4e,this.fragmentShader=n4e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=em(e.uniforms),this.uniformsGroups=e4e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class py extends _n{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Yt,this.projectionMatrix=new Yt,this.projectionMatrixInverse=new Yt,this.coordinateSystem=ll}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ku=new me,hU=new Qe,dU=new Qe;class Nr extends py{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Qp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ld*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Qp*2*Math.atan(Math.tan(ld*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Ku.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ku.x,Ku.y).multiplyScalar(-e/Ku.z),Ku.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Ku.x,Ku.y).multiplyScalar(-e/Ku.z)}getViewSize(e,t){return this.getViewBounds(e,hU,dU),t.subVectors(dU,hU)}setViewOffset(e,t,r,i,a,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ld*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,a=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;a+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const s=this.filmOffset;s!==0&&(a+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Af=-90,Tf=1;class jY extends _n{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Nr(Af,Tf,e,t);i.layers=this.layers,this.add(i);const a=new Nr(Af,Tf,e,t);a.layers=this.layers,this.add(a);const o=new Nr(Af,Tf,e,t);o.layers=this.layers,this.add(o);const s=new Nr(Af,Tf,e,t);s.layers=this.layers,this.add(s);const l=new Nr(Af,Tf,e,t);l.layers=this.layers,this.add(l);const u=new Nr(Af,Tf,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,a,o,s,l]=t;for(const u of t)this.remove(u);if(e===ll)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===vv)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,o,s,l,u,c]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,a),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,s),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(t,c),e.setRenderTarget(h,d,f),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class my extends Sr{constructor(e,t,r,i,a,o,s,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:_u,super(e,t,r,i,a,o,s,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class HY extends es{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(ud("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ic?ni:mo),this.texture=new my(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:sr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new jd(5,5,5),a=new ts({name:"CubemapFromEquirect",uniforms:em(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:_a,blending:hu});a.uniforms.tEquirect.value=t;const o=new Yr(i,a),s=t.minFilter;return t.minFilter===sl&&(t.minFilter=sr),new jY(1,10,this).update(e,o),t.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const a=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(a)}}const CA=new me,r4e=new me,i4e=new pn;let Jl=class{constructor(n=new me(1,0,0),e=0){this.isPlane=!0,this.normal=n,this.constant=e}set(n,e){return this.normal.copy(n),this.constant=e,this}setComponents(n,e,t,r){return this.normal.set(n,e,t),this.constant=r,this}setFromNormalAndCoplanarPoint(n,e){return this.normal.copy(n),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(n,e,t){const r=CA.subVectors(t,e).cross(r4e.subVectors(n,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,n),this}copy(n){return this.normal.copy(n.normal),this.constant=n.constant,this}normalize(){const n=1/this.normal.length();return this.normal.multiplyScalar(n),this.constant*=n,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(n){return this.normal.dot(n)+this.constant}distanceToSphere(n){return this.distanceToPoint(n.center)-n.radius}projectPoint(n,e){return e.copy(n).addScaledVector(this.normal,-this.distanceToPoint(n))}intersectLine(n,e){const t=n.delta(CA),r=this.normal.dot(t);if(r===0)return this.distanceToPoint(n.start)===0?e.copy(n.start):null;const i=-(n.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(n.start).addScaledVector(t,i)}intersectsLine(n){const e=this.distanceToPoint(n.start),t=this.distanceToPoint(n.end);return e<0&&t>0||t<0&&e>0}intersectsBox(n){return n.intersectsPlane(this)}intersectsSphere(n){return n.intersectsPlane(this)}coplanarPoint(n){return n.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(n,e){const t=e||i4e.getNormalMatrix(n),r=this.coplanarPoint(CA).applyMatrix4(n),i=this.normal.applyMatrix3(t).normalize();return this.constant=-r.dot(i),this}translate(n){return this.constant-=n.dot(this.normal),this}equals(n){return n.normal.equals(this.normal)&&n.constant===this.constant}clone(){return new this.constructor().copy(this)}};const _h=new ea,Ib=new me;class gy{constructor(e=new Jl,t=new Jl,r=new Jl,i=new Jl,a=new Jl,o=new Jl){this.planes=[e,t,r,i,a,o]}set(e,t,r,i,a,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(r),s[3].copy(i),s[4].copy(a),s[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=ll){const r=this.planes,i=e.elements,a=i[0],o=i[1],s=i[2],l=i[3],u=i[4],c=i[5],h=i[6],d=i[7],f=i[8],p=i[9],v=i[10],y=i[11],g=i[12],w=i[13],b=i[14],m=i[15];if(r[0].setComponents(l-a,d-u,y-f,m-g).normalize(),r[1].setComponents(l+a,d+u,y+f,m+g).normalize(),r[2].setComponents(l+o,d+c,y+p,m+w).normalize(),r[3].setComponents(l-o,d-c,y-p,m-w).normalize(),r[4].setComponents(l-s,d-h,y-v,m-b).normalize(),t===ll)r[5].setComponents(l+s,d+h,y+v,m+b).normalize();else if(t===vv)r[5].setComponents(s,h,v,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_h.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),_h.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_h)}intersectsSprite(e){return _h.center.set(0,0,0),_h.radius=.7071067811865476,_h.applyMatrix4(e.matrixWorld),this.intersectsSphere(_h)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Ib.x=i.normal.x>0?e.max.x:e.min.x,Ib.y=i.normal.y>0?e.max.y:e.min.y,Ib.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ib)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function VY(){let n=null,e=!1,t=null,r=null;function i(a,o){t(a,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function a4e(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,c){const h=u.array,d=u.usage,f=h.byteLength,p=n.createBuffer();n.bindBuffer(c,p),n.bufferData(c,h,d),u.onUploadCallback();let v;if(h instanceof Float32Array)v=n.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)v=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)v=n.SHORT;else if(h instanceof Uint32Array)v=n.UNSIGNED_INT;else if(h instanceof Int32Array)v=n.INT;else if(h instanceof Int8Array)v=n.BYTE;else if(h instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:p,type:v,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version,size:f}}function a(u,c,h){const d=c.array,f=c._updateRange,p=c.updateRanges;if(n.bindBuffer(h,u),f.count===-1&&p.length===0&&n.bufferSubData(h,0,d),p.length!==0){for(let v=0,y=p.length;v<y;v++){const g=p[v];t?n.bufferSubData(h,g.start*d.BYTES_PER_ELEMENT,d,g.start,g.count):n.bufferSubData(h,g.start*d.BYTES_PER_ELEMENT,d.subarray(g.start,g.start+g.count))}c.clearUpdateRanges()}f.count!==-1&&(t?n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),c.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const d=r.get(u);(!d||d.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);if(h===void 0)r.set(u,i(u,c));else if(h.version<u.version){if(h.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");a(h.buffer,u,c),h.version=u.version}}return{get:o,remove:s,update:l}}class Im extends sn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const a=e/2,o=t/2,s=Math.floor(r),l=Math.floor(i),u=s+1,c=l+1,h=e/s,d=t/l,f=[],p=[],v=[],y=[];for(let g=0;g<c;g++){const w=g*d-o;for(let b=0;b<u;b++){const m=b*h-a;p.push(m,-w,0),v.push(0,0,1),y.push(b/s),y.push(1-g/l)}}for(let g=0;g<l;g++)for(let w=0;w<s;w++){const b=w+u*g,m=w+u*(g+1),x=w+1+u*(g+1),S=w+1+u*g;f.push(b,m,S),f.push(m,x,S)}this.setIndex(f),this.setAttribute("position",new Mt(p,3)),this.setAttribute("normal",new Mt(v,3)),this.setAttribute("uv",new Mt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Im(e.width,e.height,e.widthSegments,e.heightSegments)}}var o4e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,s4e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,l4e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,u4e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,c4e=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,h4e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,d4e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,f4e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,p4e=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,m4e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,g4e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,v4e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,y4e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,b4e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,x4e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,w4e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,S4e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,E4e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,_4e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,C4e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,A4e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,T4e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,M4e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,D4e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,k4e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,N4e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,O4e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,P4e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,R4e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,I4e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,L4e="gl_FragColor = linearToOutputTexel( gl_FragColor );",F4e=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,B4e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,z4e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,U4e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,j4e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,H4e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,V4e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,W4e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,q4e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,G4e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,$4e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,X4e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Y4e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Z4e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,J4e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,K4e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Q4e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,eFe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,tFe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,nFe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,rFe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,iFe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,aFe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,oFe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,sFe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lFe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,uFe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,cFe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hFe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,dFe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,fFe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,pFe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,mFe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gFe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vFe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,yFe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,bFe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,xFe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,wFe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,SFe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,EFe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,_Fe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,CFe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,AFe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,TFe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,MFe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,DFe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,kFe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,NFe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,OFe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,PFe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,RFe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,IFe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,LFe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,FFe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,BFe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,zFe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,UFe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,jFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,HFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,VFe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,WFe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,qFe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,GFe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,$Fe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,XFe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,YFe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ZFe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,JFe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,KFe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,QFe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,e5e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,t5e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,n5e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,r5e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,i5e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const a5e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,o5e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,s5e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,l5e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,u5e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,c5e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,h5e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,d5e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,f5e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,p5e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,m5e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,g5e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,v5e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,y5e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,b5e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,x5e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,w5e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,S5e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,E5e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,_5e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,C5e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,A5e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,T5e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,M5e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,D5e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,k5e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,N5e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,O5e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P5e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,R5e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,I5e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,L5e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,F5e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,B5e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,hn={alphahash_fragment:o4e,alphahash_pars_fragment:s4e,alphamap_fragment:l4e,alphamap_pars_fragment:u4e,alphatest_fragment:c4e,alphatest_pars_fragment:h4e,aomap_fragment:d4e,aomap_pars_fragment:f4e,batching_pars_vertex:p4e,batching_vertex:m4e,begin_vertex:g4e,beginnormal_vertex:v4e,bsdfs:y4e,iridescence_fragment:b4e,bumpmap_pars_fragment:x4e,clipping_planes_fragment:w4e,clipping_planes_pars_fragment:S4e,clipping_planes_pars_vertex:E4e,clipping_planes_vertex:_4e,color_fragment:C4e,color_pars_fragment:A4e,color_pars_vertex:T4e,color_vertex:M4e,common:D4e,cube_uv_reflection_fragment:k4e,defaultnormal_vertex:N4e,displacementmap_pars_vertex:O4e,displacementmap_vertex:P4e,emissivemap_fragment:R4e,emissivemap_pars_fragment:I4e,colorspace_fragment:L4e,colorspace_pars_fragment:F4e,envmap_fragment:B4e,envmap_common_pars_fragment:z4e,envmap_pars_fragment:U4e,envmap_pars_vertex:j4e,envmap_physical_pars_fragment:Q4e,envmap_vertex:H4e,fog_vertex:V4e,fog_pars_vertex:W4e,fog_fragment:q4e,fog_pars_fragment:G4e,gradientmap_pars_fragment:$4e,lightmap_fragment:X4e,lightmap_pars_fragment:Y4e,lights_lambert_fragment:Z4e,lights_lambert_pars_fragment:J4e,lights_pars_begin:K4e,lights_toon_fragment:eFe,lights_toon_pars_fragment:tFe,lights_phong_fragment:nFe,lights_phong_pars_fragment:rFe,lights_physical_fragment:iFe,lights_physical_pars_fragment:aFe,lights_fragment_begin:oFe,lights_fragment_maps:sFe,lights_fragment_end:lFe,logdepthbuf_fragment:uFe,logdepthbuf_pars_fragment:cFe,logdepthbuf_pars_vertex:hFe,logdepthbuf_vertex:dFe,map_fragment:fFe,map_pars_fragment:pFe,map_particle_fragment:mFe,map_particle_pars_fragment:gFe,metalnessmap_fragment:vFe,metalnessmap_pars_fragment:yFe,morphcolor_vertex:bFe,morphnormal_vertex:xFe,morphtarget_pars_vertex:wFe,morphtarget_vertex:SFe,normal_fragment_begin:EFe,normal_fragment_maps:_Fe,normal_pars_fragment:CFe,normal_pars_vertex:AFe,normal_vertex:TFe,normalmap_pars_fragment:MFe,clearcoat_normal_fragment_begin:DFe,clearcoat_normal_fragment_maps:kFe,clearcoat_pars_fragment:NFe,iridescence_pars_fragment:OFe,opaque_fragment:PFe,packing:RFe,premultiplied_alpha_fragment:IFe,project_vertex:LFe,dithering_fragment:FFe,dithering_pars_fragment:BFe,roughnessmap_fragment:zFe,roughnessmap_pars_fragment:UFe,shadowmap_pars_fragment:jFe,shadowmap_pars_vertex:HFe,shadowmap_vertex:VFe,shadowmask_pars_fragment:WFe,skinbase_vertex:qFe,skinning_pars_vertex:GFe,skinning_vertex:$Fe,skinnormal_vertex:XFe,specularmap_fragment:YFe,specularmap_pars_fragment:ZFe,tonemapping_fragment:JFe,tonemapping_pars_fragment:KFe,transmission_fragment:QFe,transmission_pars_fragment:e5e,uv_pars_fragment:t5e,uv_pars_vertex:n5e,uv_vertex:r5e,worldpos_vertex:i5e,background_vert:a5e,background_frag:o5e,backgroundCube_vert:s5e,backgroundCube_frag:l5e,cube_vert:u5e,cube_frag:c5e,depth_vert:h5e,depth_frag:d5e,distanceRGBA_vert:f5e,distanceRGBA_frag:p5e,equirect_vert:m5e,equirect_frag:g5e,linedashed_vert:v5e,linedashed_frag:y5e,meshbasic_vert:b5e,meshbasic_frag:x5e,meshlambert_vert:w5e,meshlambert_frag:S5e,meshmatcap_vert:E5e,meshmatcap_frag:_5e,meshnormal_vert:C5e,meshnormal_frag:A5e,meshphong_vert:T5e,meshphong_frag:M5e,meshphysical_vert:D5e,meshphysical_frag:k5e,meshtoon_vert:N5e,meshtoon_frag:O5e,points_vert:P5e,points_frag:R5e,shadow_vert:I5e,shadow_frag:L5e,sprite_vert:F5e,sprite_frag:B5e},pt={common:{diffuse:{value:new wt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pn},normalScale:{value:new Qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0},uvTransform:{value:new pn}},sprite:{diffuse:{value:new wt(16777215)},opacity:{value:1},center:{value:new Qe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}}},bs={basic:{uniforms:pa([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.fog]),vertexShader:hn.meshbasic_vert,fragmentShader:hn.meshbasic_frag},lambert:{uniforms:pa([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,pt.lights,{emissive:{value:new wt(0)}}]),vertexShader:hn.meshlambert_vert,fragmentShader:hn.meshlambert_frag},phong:{uniforms:pa([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,pt.lights,{emissive:{value:new wt(0)},specular:{value:new wt(1118481)},shininess:{value:30}}]),vertexShader:hn.meshphong_vert,fragmentShader:hn.meshphong_frag},standard:{uniforms:pa([pt.common,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.roughnessmap,pt.metalnessmap,pt.fog,pt.lights,{emissive:{value:new wt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:hn.meshphysical_vert,fragmentShader:hn.meshphysical_frag},toon:{uniforms:pa([pt.common,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.gradientmap,pt.fog,pt.lights,{emissive:{value:new wt(0)}}]),vertexShader:hn.meshtoon_vert,fragmentShader:hn.meshtoon_frag},matcap:{uniforms:pa([pt.common,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,{matcap:{value:null}}]),vertexShader:hn.meshmatcap_vert,fragmentShader:hn.meshmatcap_frag},points:{uniforms:pa([pt.points,pt.fog]),vertexShader:hn.points_vert,fragmentShader:hn.points_frag},dashed:{uniforms:pa([pt.common,pt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hn.linedashed_vert,fragmentShader:hn.linedashed_frag},depth:{uniforms:pa([pt.common,pt.displacementmap]),vertexShader:hn.depth_vert,fragmentShader:hn.depth_frag},normal:{uniforms:pa([pt.common,pt.bumpmap,pt.normalmap,pt.displacementmap,{opacity:{value:1}}]),vertexShader:hn.meshnormal_vert,fragmentShader:hn.meshnormal_frag},sprite:{uniforms:pa([pt.sprite,pt.fog]),vertexShader:hn.sprite_vert,fragmentShader:hn.sprite_frag},background:{uniforms:{uvTransform:{value:new pn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:hn.background_vert,fragmentShader:hn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:hn.backgroundCube_vert,fragmentShader:hn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:hn.cube_vert,fragmentShader:hn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:hn.equirect_vert,fragmentShader:hn.equirect_frag},distanceRGBA:{uniforms:pa([pt.common,pt.displacementmap,{referencePosition:{value:new me},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:hn.distanceRGBA_vert,fragmentShader:hn.distanceRGBA_frag},shadow:{uniforms:pa([pt.lights,pt.fog,{color:{value:new wt(0)},opacity:{value:1}}]),vertexShader:hn.shadow_vert,fragmentShader:hn.shadow_frag}};bs.physical={uniforms:pa([bs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pn},clearcoatNormalScale:{value:new Qe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pn},sheen:{value:0},sheenColor:{value:new wt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pn},transmissionSamplerSize:{value:new Qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pn},attenuationDistance:{value:0},attenuationColor:{value:new wt(0)},specularColor:{value:new wt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pn},anisotropyVector:{value:new Qe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new pn}}]),vertexShader:hn.meshphysical_vert,fragmentShader:hn.meshphysical_frag};const Lb={r:0,b:0,g:0};function z5e(n,e,t,r,i,a,o){const s=new wt(0);let l=a===!0?0:1,u,c,h=null,d=0,f=null;function p(y,g){let w=!1,b=g.isScene===!0?g.background:null;b&&b.isTexture&&(b=(g.backgroundBlurriness>0?t:e).get(b)),b===null?v(s,l):b&&b.isColor&&(v(b,1),w=!0);const m=n.xr.getEnvironmentBlendMode();m==="additive"?r.buffers.color.setClear(0,0,0,1,o):m==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Rm)?(c===void 0&&(c=new Yr(new jd(1,1,1),new ts({name:"BackgroundCubeMaterial",uniforms:em(bs.backgroundCube.uniforms),vertexShader:bs.backgroundCube.vertexShader,fragmentShader:bs.backgroundCube.fragmentShader,side:_a,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(x,S,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=b,c.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=Ln.getTransfer(b.colorSpace)!==tr,(h!==b||d!==b.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,h=b,d=b.version,f=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null)):b&&b.isTexture&&(u===void 0&&(u=new Yr(new Im(2,2),new ts({name:"BackgroundMaterial",uniforms:em(bs.background.uniforms),vertexShader:bs.background.vertexShader,fragmentShader:bs.background.fragmentShader,side:Eu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=b,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=Ln.getTransfer(b.colorSpace)!==tr,b.matrixAutoUpdate===!0&&b.updateMatrix(),u.material.uniforms.uvTransform.value.copy(b.matrix),(h!==b||d!==b.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,h=b,d=b.version,f=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null))}function v(y,g){y.getRGB(Lb,zY(n)),r.buffers.color.setClear(Lb.r,Lb.g,Lb.b,g,o)}return{getClearColor:function(){return s},setClearColor:function(y,g=1){s.set(y),l=g,v(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,v(s,l)},render:p}}function U5e(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||a!==null,s={},l=y(null);let u=l,c=!1;function h(L,F,k,P,z){let B=!1;if(o){const X=v(P,k,F);u!==X&&(u=X,f(u.object)),B=g(L,P,k,z),B&&w(L,P,k,z)}else{const X=F.wireframe===!0;(u.geometry!==P.id||u.program!==k.id||u.wireframe!==X)&&(u.geometry=P.id,u.program=k.id,u.wireframe=X,B=!0)}z!==null&&t.update(z,n.ELEMENT_ARRAY_BUFFER),(B||c)&&(c=!1,T(L,F,k,P),z!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(z).buffer))}function d(){return r.isWebGL2?n.createVertexArray():a.createVertexArrayOES()}function f(L){return r.isWebGL2?n.bindVertexArray(L):a.bindVertexArrayOES(L)}function p(L){return r.isWebGL2?n.deleteVertexArray(L):a.deleteVertexArrayOES(L)}function v(L,F,k){const P=k.wireframe===!0;let z=s[L.id];z===void 0&&(z={},s[L.id]=z);let B=z[F.id];B===void 0&&(B={},z[F.id]=B);let X=B[P];return X===void 0&&(X=y(d()),B[P]=X),X}function y(L){const F=[],k=[],P=[];for(let z=0;z<i;z++)F[z]=0,k[z]=0,P[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:k,attributeDivisors:P,object:L,attributes:{},index:null}}function g(L,F,k,P){const z=u.attributes,B=F.attributes;let X=0;const J=k.getAttributes();for(const Q in J)if(J[Q].location>=0){const Z=z[Q];let re=B[Q];if(re===void 0&&(Q==="instanceMatrix"&&L.instanceMatrix&&(re=L.instanceMatrix),Q==="instanceColor"&&L.instanceColor&&(re=L.instanceColor)),Z===void 0||Z.attribute!==re||re&&Z.data!==re.data)return!0;X++}return u.attributesNum!==X||u.index!==P}function w(L,F,k,P){const z={},B=F.attributes;let X=0;const J=k.getAttributes();for(const Q in J)if(J[Q].location>=0){let Z=B[Q];Z===void 0&&(Q==="instanceMatrix"&&L.instanceMatrix&&(Z=L.instanceMatrix),Q==="instanceColor"&&L.instanceColor&&(Z=L.instanceColor));const re={};re.attribute=Z,Z&&Z.data&&(re.data=Z.data),z[Q]=re,X++}u.attributes=z,u.attributesNum=X,u.index=P}function b(){const L=u.newAttributes;for(let F=0,k=L.length;F<k;F++)L[F]=0}function m(L){x(L,0)}function x(L,F){const k=u.newAttributes,P=u.enabledAttributes,z=u.attributeDivisors;k[L]=1,P[L]===0&&(n.enableVertexAttribArray(L),P[L]=1),z[L]!==F&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,F),z[L]=F)}function S(){const L=u.newAttributes,F=u.enabledAttributes;for(let k=0,P=F.length;k<P;k++)F[k]!==L[k]&&(n.disableVertexAttribArray(k),F[k]=0)}function C(L,F,k,P,z,B,X){X===!0?n.vertexAttribIPointer(L,F,k,z,B):n.vertexAttribPointer(L,F,k,P,z,B)}function T(L,F,k,P){if(r.isWebGL2===!1&&(L.isInstancedMesh||P.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const z=P.attributes,B=k.getAttributes(),X=F.defaultAttributeValues;for(const J in B){const Q=B[J];if(Q.location>=0){let Z=z[J];if(Z===void 0&&(J==="instanceMatrix"&&L.instanceMatrix&&(Z=L.instanceMatrix),J==="instanceColor"&&L.instanceColor&&(Z=L.instanceColor)),Z!==void 0){const re=Z.normalized,fe=Z.itemSize,se=t.get(Z);if(se===void 0)continue;const ye=se.buffer,De=se.type,pe=se.bytesPerElement,Me=r.isWebGL2===!0&&(De===n.INT||De===n.UNSIGNED_INT||Z.gpuType===sO);if(Z.isInterleavedBufferAttribute){const be=Z.data,ne=be.stride,Pe=Z.offset;if(be.isInstancedInterleavedBuffer){for(let ze=0;ze<Q.locationSize;ze++)x(Q.location+ze,be.meshPerAttribute);L.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let ze=0;ze<Q.locationSize;ze++)m(Q.location+ze);n.bindBuffer(n.ARRAY_BUFFER,ye);for(let ze=0;ze<Q.locationSize;ze++)C(Q.location+ze,fe/Q.locationSize,De,re,ne*pe,(Pe+fe/Q.locationSize*ze)*pe,Me)}else{if(Z.isInstancedBufferAttribute){for(let be=0;be<Q.locationSize;be++)x(Q.location+be,Z.meshPerAttribute);L.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let be=0;be<Q.locationSize;be++)m(Q.location+be);n.bindBuffer(n.ARRAY_BUFFER,ye);for(let be=0;be<Q.locationSize;be++)C(Q.location+be,fe/Q.locationSize,De,re,fe*pe,fe/Q.locationSize*be*pe,Me)}}else if(X!==void 0){const re=X[J];if(re!==void 0)switch(re.length){case 2:n.vertexAttrib2fv(Q.location,re);break;case 3:n.vertexAttrib3fv(Q.location,re);break;case 4:n.vertexAttrib4fv(Q.location,re);break;default:n.vertexAttrib1fv(Q.location,re)}}}}S()}function M(){O();for(const L in s){const F=s[L];for(const k in F){const P=F[k];for(const z in P)p(P[z].object),delete P[z];delete F[k]}delete s[L]}}function A(L){if(s[L.id]===void 0)return;const F=s[L.id];for(const k in F){const P=F[k];for(const z in P)p(P[z].object),delete P[z];delete F[k]}delete s[L.id]}function D(L){for(const F in s){const k=s[F];if(k[L.id]===void 0)continue;const P=k[L.id];for(const z in P)p(P[z].object),delete P[z];delete k[L.id]}}function O(){U(),c=!0,u!==l&&(u=l,f(u.object))}function U(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:O,resetDefaultState:U,dispose:M,releaseStatesOfGeometry:A,releaseStatesOfProgram:D,initAttributes:b,enableAttribute:m,disableUnusedAttributes:S}}function j5e(n,e,t,r){const i=r.isWebGL2;let a;function o(c){a=c}function s(c,h){n.drawArrays(a,c,h),t.update(h,a,1)}function l(c,h,d){if(d===0)return;let f,p;if(i)f=n,p="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[p](a,c,h,d),t.update(h,a,d)}function u(c,h,d){if(d===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<d;p++)this.render(c[p],h[p]);else{f.multiDrawArraysWEBGL(a,c,0,h,0,d);let p=0;for(let v=0;v<d;v++)p+=h[v];t.update(p,a,1)}}this.setMode=o,this.render=s,this.renderInstances=l,this.renderMultiDraw=u}function H5e(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(C){if(C==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let s=t.precision!==void 0?t.precision:"highp";const l=a(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const u=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),b=d>0,m=o||e.has("OES_texture_float"),x=b&&m,S=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:v,maxVertexUniforms:y,maxVaryings:g,maxFragmentUniforms:w,vertexTextures:b,floatFragmentTextures:m,floatVertexTextures:x,maxSamples:S}}function V5e(n){const e=this;let t=null,r=0,i=!1,a=!1;const o=new Jl,s=new pn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||r!==0||i;return i=d,r=h.length,f},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(h,d){t=c(h,d,0)},this.setState=function(h,d,f){const p=h.clippingPlanes,v=h.clipIntersection,y=h.clipShadows,g=n.get(h);if(!i||p===null||p.length===0||a&&!y)a?c(null):u();else{const w=a?0:r,b=w*4;let m=g.clippingState||null;l.value=m,m=c(p,d,b,f);for(let x=0;x!==b;++x)m[x]=t[x];g.clippingState=m,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=w}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(h,d,f,p){const v=h!==null?h.length:0;let y=null;if(v!==0){if(y=l.value,p!==!0||y===null){const g=f+v*4,w=d.matrixWorldInverse;s.getNormalMatrix(w),(y===null||y.length<g)&&(y=new Float32Array(g));for(let b=0,m=f;b!==v;++b,m+=4)o.copy(h[b]).applyMatrix4(w,s),o.normal.toArray(y,m),y[m+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function W5e(n){let e=new WeakMap;function t(o,s){return s===ov?o.mapping=_u:s===sv&&(o.mapping=Gc),o}function r(o){if(o&&o.isTexture){const s=o.mapping;if(s===ov||s===sv)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new HY(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const s=o.target;s.removeEventListener("dispose",i);const l=e.get(s);l!==void 0&&(e.delete(s),l.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}let au=class extends py{constructor(n=-1,e=1,t=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n,this.right=e,this.top=t,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(n,e){return super.copy(n,e),this.left=n.left,this.right=n.right,this.top=n.top,this.bottom=n.bottom,this.near=n.near,this.far=n.far,this.zoom=n.zoom,this.view=n.view===null?null:Object.assign({},n.view),this}setViewOffset(n,e,t,r,i,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=e,this.view.offsetX=t,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=t-n,a=t+n,o=r+e,s=r-e;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=l*this.view.offsetX,a=i+l*this.view.width,o-=u*this.view.offsetY,s=o-u*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const e=super.toJSON(n);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}};const up=4,fU=[.125,.215,.35,.446,.526,.582],Uh=20,AA=new au,pU=new wt;let TA=null,MA=0,DA=0;const Fh=(1+Math.sqrt(5))/2,Mf=1/Fh,mU=[new me(1,1,1),new me(-1,1,1),new me(1,1,-1),new me(-1,1,-1),new me(0,Fh,Mf),new me(0,Fh,-Mf),new me(Mf,0,Fh),new me(-Mf,0,Fh),new me(Fh,Mf,0),new me(-Fh,Mf,0)];class QD{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){TA=this._renderer.getRenderTarget(),MA=this._renderer.getActiveCubeFace(),DA=this._renderer.getActiveMipmapLevel(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,i,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=yU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=vU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(TA,MA,DA),e.scissorTest=!1,Fb(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===_u||e.mapping===Gc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),TA=this._renderer.getRenderTarget(),MA=this._renderer.getActiveCubeFace(),DA=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:sr,minFilter:sr,generateMipmaps:!1,type:Ed,format:ya,colorSpace:_l,depthBuffer:!1},i=gU(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=gU(e,t,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=q5e(a)),this._blurMaterial=G5e(a,e,t)}return i}_compileMaterial(e){const t=new Yr(this._lodPlanes[0],e);this._renderer.compile(t,AA)}_sceneToCubeUV(e,t,r,i){const a=new Nr(90,1,t,r),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear,c=l.toneMapping;l.getClearColor(pU),l.toneMapping=ml,l.autoClear=!1;const h=new lh({name:"PMREM.Background",side:_a,depthWrite:!1,depthTest:!1}),d=new Yr(new jd,h);let f=!1;const p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,f=!0):(h.color.copy(pU),f=!0);for(let v=0;v<6;v++){const y=v%3;y===0?(a.up.set(0,o[v],0),a.lookAt(s[v],0,0)):y===1?(a.up.set(0,0,o[v]),a.lookAt(0,s[v],0)):(a.up.set(0,o[v],0),a.lookAt(0,0,s[v]));const g=this._cubeSize;Fb(i,y*g,v>2?g:0,g,g),l.setRenderTarget(i),f&&l.render(d,a),l.render(e,a)}d.geometry.dispose(),d.material.dispose(),l.toneMapping=c,l.autoClear=u,e.background=p}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===_u||e.mapping===Gc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=yU()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=vU());const a=i?this._cubemapMaterial:this._equirectMaterial,o=new Yr(this._lodPlanes[0],a),s=a.uniforms;s.envMap.value=e;const l=this._cubeSize;Fb(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,AA)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=mU[(i-1)%mU.length];this._blur(e,i-1,i,a,o)}t.autoClear=r}_blur(e,t,r,i,a){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",a),this._halfBlur(o,e,r,r,i,"longitudinal",a)}_halfBlur(e,t,r,i,a,o,s){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new Yr(this._lodPlanes[i],u),d=u.uniforms,f=this._sizeLods[r]-1,p=isFinite(a)?Math.PI/(2*f):2*Math.PI/(2*Uh-1),v=a/p,y=isFinite(a)?1+Math.floor(c*v):Uh;y>Uh&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Uh}`);const g=[];let w=0;for(let C=0;C<Uh;++C){const T=C/v,M=Math.exp(-T*T/2);g.push(M),C===0?w+=M:C<y&&(w+=2*M)}for(let C=0;C<g.length;C++)g[C]=g[C]/w;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=g,d.latitudinal.value=o==="latitudinal",s&&(d.poleAxis.value=s);const{_lodMax:b}=this;d.dTheta.value=p,d.mipInt.value=b-r;const m=this._sizeLods[i],x=3*m*(i>b-up?i-b+up:0),S=4*(this._cubeSize-m);Fb(t,x,S,3*m,2*m),l.setRenderTarget(t),l.render(h,AA)}}function q5e(n){const e=[],t=[],r=[];let i=n;const a=n-up+1+fU.length;for(let o=0;o<a;o++){const s=Math.pow(2,i);t.push(s);let l=1/s;o>n-up?l=fU[o-n+up-1]:o===0&&(l=0),r.push(l);const u=1/(s-2),c=-u,h=1+u,d=[c,c,h,c,h,h,c,c,h,h,c,h],f=6,p=6,v=3,y=2,g=1,w=new Float32Array(v*p*f),b=new Float32Array(y*p*f),m=new Float32Array(g*p*f);for(let S=0;S<f;S++){const C=S%3*2/3-1,T=S>2?0:-1,M=[C,T,0,C+2/3,T,0,C+2/3,T+1,0,C,T,0,C+2/3,T+1,0,C,T+1,0];w.set(M,v*p*S),b.set(d,y*p*S);const A=[S,S,S,S,S,S];m.set(A,g*p*S)}const x=new sn;x.setAttribute("position",new Hn(w,v)),x.setAttribute("uv",new Hn(b,y)),x.setAttribute("faceIndex",new Hn(m,g)),e.push(x),i>up&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function gU(n,e,t){const r=new es(n,e,t);return r.texture.mapping=Rm,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Fb(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function G5e(n,e,t){const r=new Float32Array(Uh),i=new me(0,1,0);return new ts({name:"SphericalGaussianBlur",defines:{n:Uh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:SO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:hu,depthTest:!1,depthWrite:!1})}function vU(){return new ts({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:SO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:hu,depthTest:!1,depthWrite:!1})}function yU(){return new ts({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:SO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:hu,depthTest:!1,depthWrite:!1})}function SO(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function $5e(n){let e=new WeakMap,t=null;function r(s){if(s&&s.isTexture){const l=s.mapping,u=l===ov||l===sv,c=l===_u||l===Gc;if(u||c)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let h=e.get(s);return t===null&&(t=new QD(n)),h=u?t.fromEquirectangular(s,h):t.fromCubemap(s,h),e.set(s,h),h.texture}else{if(e.has(s))return e.get(s).texture;{const h=s.image;if(u&&h&&h.height>0||c&&h&&i(h)){t===null&&(t=new QD(n));const d=u?t.fromEquirectangular(s):t.fromCubemap(s);return e.set(s,d),s.addEventListener("dispose",a),d.texture}else return null}}}return s}function i(s){let l=0;const u=6;for(let c=0;c<u;c++)s[c]!==void 0&&l++;return l===u}function a(s){const l=s.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function X5e(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Y5e(n,e,t,r){const i={},a=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);for(const p in d.morphAttributes){const v=d.morphAttributes[p];for(let y=0,g=v.length;y<g;y++)e.remove(v[y])}d.removeEventListener("dispose",o),delete i[d.id];const f=a.get(d);f&&(e.remove(f),a.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function s(h,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const p in d)e.update(d[p],n.ARRAY_BUFFER);const f=h.morphAttributes;for(const p in f){const v=f[p];for(let y=0,g=v.length;y<g;y++)e.update(v[y],n.ARRAY_BUFFER)}}function u(h){const d=[],f=h.index,p=h.attributes.position;let v=0;if(f!==null){const w=f.array;v=f.version;for(let b=0,m=w.length;b<m;b+=3){const x=w[b+0],S=w[b+1],C=w[b+2];d.push(x,S,S,C,C,x)}}else if(p!==void 0){const w=p.array;v=p.version;for(let b=0,m=w.length/3-1;b<m;b+=3){const x=b+0,S=b+1,C=b+2;d.push(x,S,S,C,C,x)}}else return;const y=new(IY(d)?wO:xO)(d,1);y.version=v;const g=a.get(h);g&&e.remove(g),a.set(h,y)}function c(h){const d=a.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&u(h)}else u(h);return a.get(h)}return{get:s,update:l,getWireframeAttribute:c}}function Z5e(n,e,t,r){const i=r.isWebGL2;let a;function o(f){a=f}let s,l;function u(f){s=f.type,l=f.bytesPerElement}function c(f,p){n.drawElements(a,p,s,f*l),t.update(p,a,1)}function h(f,p,v){if(v===0)return;let y,g;if(i)y=n,g="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[g](a,p,s,f*l,v),t.update(p,a,v)}function d(f,p,v){if(v===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let g=0;g<v;g++)this.render(f[g]/l,p[g]);else{y.multiDrawElementsWEBGL(a,p,0,s,f,0,v);let g=0;for(let w=0;w<v;w++)g+=p[w];t.update(g,a,1)}}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=h,this.renderMultiDraw=d}function J5e(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,o,s){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=s*(a/3);break;case n.LINES:t.lines+=s*(a/2);break;case n.LINE_STRIP:t.lines+=s*(a-1);break;case n.LINE_LOOP:t.lines+=s*a;break;case n.POINTS:t.points+=s*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function K5e(n,e){return n[0]-e[0]}function Q5e(n,e){return Math.abs(e[1])-Math.abs(n[1])}function eBe(n,e,t){const r={},i=new Float32Array(8),a=new WeakMap,o=new Bn,s=[];for(let u=0;u<8;u++)s[u]=[u,0];function l(u,c,h){const d=u.morphTargetInfluences;if(e.isWebGL2===!0){const f=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=f!==void 0?f.length:0;let v=a.get(c);if(v===void 0||v.count!==p){let w=function(){U.dispose(),a.delete(c),c.removeEventListener("dispose",w)};v!==void 0&&v.texture.dispose();const b=c.morphAttributes.position!==void 0,m=c.morphAttributes.normal!==void 0,x=c.morphAttributes.color!==void 0,S=c.morphAttributes.position||[],C=c.morphAttributes.normal||[],T=c.morphAttributes.color||[];let M=0;b===!0&&(M=1),m===!0&&(M=2),x===!0&&(M=3);let A=c.attributes.position.count*M,D=1;A>e.maxTextureSize&&(D=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const O=new Float32Array(A*D*4*p),U=new v_(O,A,D,p);U.type=po,U.needsUpdate=!0;const L=M*4;for(let F=0;F<p;F++){const k=S[F],P=C[F],z=T[F],B=A*D*4*F;for(let X=0;X<k.count;X++){const J=X*L;b===!0&&(o.fromBufferAttribute(k,X),O[B+J+0]=o.x,O[B+J+1]=o.y,O[B+J+2]=o.z,O[B+J+3]=0),m===!0&&(o.fromBufferAttribute(P,X),O[B+J+4]=o.x,O[B+J+5]=o.y,O[B+J+6]=o.z,O[B+J+7]=0),x===!0&&(o.fromBufferAttribute(z,X),O[B+J+8]=o.x,O[B+J+9]=o.y,O[B+J+10]=o.z,O[B+J+11]=z.itemSize===4?o.w:1)}}v={count:p,texture:U,size:new Qe(A,D)},a.set(c,v),c.addEventListener("dispose",w)}let y=0;for(let w=0;w<d.length;w++)y+=d[w];const g=c.morphTargetsRelative?1:1-y;h.getUniforms().setValue(n,"morphTargetBaseInfluence",g),h.getUniforms().setValue(n,"morphTargetInfluences",d),h.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const f=d===void 0?0:d.length;let p=r[c.id];if(p===void 0||p.length!==f){p=[];for(let b=0;b<f;b++)p[b]=[b,0];r[c.id]=p}for(let b=0;b<f;b++){const m=p[b];m[0]=b,m[1]=d[b]}p.sort(Q5e);for(let b=0;b<8;b++)b<f&&p[b][1]?(s[b][0]=p[b][0],s[b][1]=p[b][1]):(s[b][0]=Number.MAX_SAFE_INTEGER,s[b][1]=0);s.sort(K5e);const v=c.morphAttributes.position,y=c.morphAttributes.normal;let g=0;for(let b=0;b<8;b++){const m=s[b],x=m[0],S=m[1];x!==Number.MAX_SAFE_INTEGER&&S?(v&&c.getAttribute("morphTarget"+b)!==v[x]&&c.setAttribute("morphTarget"+b,v[x]),y&&c.getAttribute("morphNormal"+b)!==y[x]&&c.setAttribute("morphNormal"+b,y[x]),i[b]=S,g+=S):(v&&c.hasAttribute("morphTarget"+b)===!0&&c.deleteAttribute("morphTarget"+b),y&&c.hasAttribute("morphNormal"+b)===!0&&c.deleteAttribute("morphNormal"+b),i[b]=0)}const w=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(n,"morphTargetBaseInfluence",w),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function tBe(n,e,t,r){let i=new WeakMap;function a(l){const u=r.render.frame,c=l.geometry,h=e.get(l,c);if(i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const d=l.skeleton;i.get(d)!==u&&(d.update(),i.set(d,u))}return h}function o(){i=new WeakMap}function s(l){const u=l.target;u.removeEventListener("dispose",s),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:a,dispose:o}}class y_ extends Sr{constructor(e,t,r,i,a,o,s,l,u,c){if(c=c!==void 0?c:Rc,c!==Rc&&c!==_d)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Rc&&(r=iu),r===void 0&&c===_d&&(r=Pc),super(null,i,a,o,s,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=s!==void 0?s:zr,this.minFilter=l!==void 0?l:zr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const WY=new Sr,qY=new y_(1,1);qY.compareFunction=gO;const GY=new v_,$Y=new bO,XY=new my,bU=[],xU=[],wU=new Float32Array(16),SU=new Float32Array(9),EU=new Float32Array(4);function Lm(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let a=bU[i];if(a===void 0&&(a=new Float32Array(i),bU[i]=a),e!==0){r.toArray(a,0);for(let o=1,s=0;o!==e;++o)s+=t,n[o].toArray(a,s)}return a}function si(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function li(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function b_(n,e){let t=xU[e];t===void 0&&(t=new Int32Array(e),xU[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function nBe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function rBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(si(t,e))return;n.uniform2fv(this.addr,e),li(t,e)}}function iBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(si(t,e))return;n.uniform3fv(this.addr,e),li(t,e)}}function aBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(si(t,e))return;n.uniform4fv(this.addr,e),li(t,e)}}function oBe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(si(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),li(t,e)}else{if(si(t,r))return;EU.set(r),n.uniformMatrix2fv(this.addr,!1,EU),li(t,r)}}function sBe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(si(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),li(t,e)}else{if(si(t,r))return;SU.set(r),n.uniformMatrix3fv(this.addr,!1,SU),li(t,r)}}function lBe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(si(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),li(t,e)}else{if(si(t,r))return;wU.set(r),n.uniformMatrix4fv(this.addr,!1,wU),li(t,r)}}function uBe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function cBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(si(t,e))return;n.uniform2iv(this.addr,e),li(t,e)}}function hBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(si(t,e))return;n.uniform3iv(this.addr,e),li(t,e)}}function dBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(si(t,e))return;n.uniform4iv(this.addr,e),li(t,e)}}function fBe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function pBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(si(t,e))return;n.uniform2uiv(this.addr,e),li(t,e)}}function mBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(si(t,e))return;n.uniform3uiv(this.addr,e),li(t,e)}}function gBe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(si(t,e))return;n.uniform4uiv(this.addr,e),li(t,e)}}function vBe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const a=this.type===n.SAMPLER_2D_SHADOW?qY:WY;t.setTexture2D(e||a,i)}function yBe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||$Y,i)}function bBe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||XY,i)}function xBe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||GY,i)}function wBe(n){switch(n){case 5126:return nBe;case 35664:return rBe;case 35665:return iBe;case 35666:return aBe;case 35674:return oBe;case 35675:return sBe;case 35676:return lBe;case 5124:case 35670:return uBe;case 35667:case 35671:return cBe;case 35668:case 35672:return hBe;case 35669:case 35673:return dBe;case 5125:return fBe;case 36294:return pBe;case 36295:return mBe;case 36296:return gBe;case 35678:case 36198:case 36298:case 36306:case 35682:return vBe;case 35679:case 36299:case 36307:return yBe;case 35680:case 36300:case 36308:case 36293:return bBe;case 36289:case 36303:case 36311:case 36292:return xBe}}function SBe(n,e){n.uniform1fv(this.addr,e)}function EBe(n,e){const t=Lm(e,this.size,2);n.uniform2fv(this.addr,t)}function _Be(n,e){const t=Lm(e,this.size,3);n.uniform3fv(this.addr,t)}function CBe(n,e){const t=Lm(e,this.size,4);n.uniform4fv(this.addr,t)}function ABe(n,e){const t=Lm(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function TBe(n,e){const t=Lm(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function MBe(n,e){const t=Lm(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function DBe(n,e){n.uniform1iv(this.addr,e)}function kBe(n,e){n.uniform2iv(this.addr,e)}function NBe(n,e){n.uniform3iv(this.addr,e)}function OBe(n,e){n.uniform4iv(this.addr,e)}function PBe(n,e){n.uniform1uiv(this.addr,e)}function RBe(n,e){n.uniform2uiv(this.addr,e)}function IBe(n,e){n.uniform3uiv(this.addr,e)}function LBe(n,e){n.uniform4uiv(this.addr,e)}function FBe(n,e,t){const r=this.cache,i=e.length,a=b_(t,i);si(r,a)||(n.uniform1iv(this.addr,a),li(r,a));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||WY,a[o])}function BBe(n,e,t){const r=this.cache,i=e.length,a=b_(t,i);si(r,a)||(n.uniform1iv(this.addr,a),li(r,a));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||$Y,a[o])}function zBe(n,e,t){const r=this.cache,i=e.length,a=b_(t,i);si(r,a)||(n.uniform1iv(this.addr,a),li(r,a));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||XY,a[o])}function UBe(n,e,t){const r=this.cache,i=e.length,a=b_(t,i);si(r,a)||(n.uniform1iv(this.addr,a),li(r,a));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||GY,a[o])}function jBe(n){switch(n){case 5126:return SBe;case 35664:return EBe;case 35665:return _Be;case 35666:return CBe;case 35674:return ABe;case 35675:return TBe;case 35676:return MBe;case 5124:case 35670:return DBe;case 35667:case 35671:return kBe;case 35668:case 35672:return NBe;case 35669:case 35673:return OBe;case 5125:return PBe;case 36294:return RBe;case 36295:return IBe;case 36296:return LBe;case 35678:case 36198:case 36298:case 36306:case 35682:return FBe;case 35679:case 36299:case 36307:return BBe;case 35680:case 36300:case 36308:case 36293:return zBe;case 36289:case 36303:case 36311:case 36292:return UBe}}class HBe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=wBe(t.type)}}class VBe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=jBe(t.type)}}class WBe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let a=0,o=i.length;a!==o;++a){const s=i[a];s.setValue(e,t[s.id],r)}}}const kA=/(\w+)(\])?(\[|\.)?/g;function _U(n,e){n.seq.push(e),n.map[e.id]=e}function qBe(n,e,t){const r=n.name,i=r.length;for(kA.lastIndex=0;;){const a=kA.exec(r),o=kA.lastIndex;let s=a[1];const l=a[2]==="]",u=a[3];if(l&&(s=s|0),u===void 0||u==="["&&o+2===i){_U(t,u===void 0?new HBe(s,n,e):new VBe(s,n,e));break}else{let c=t.map[s];c===void 0&&(c=new WBe(s),_U(t,c)),t=c}}}class lw{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const a=e.getActiveUniform(t,i),o=e.getUniformLocation(t,a.name);qBe(a,o,this)}}setValue(e,t,r,i){const a=this.map[t];a!==void 0&&a.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let a=0,o=t.length;a!==o;++a){const s=t[a],l=r[s.id];l.needsUpdate!==!1&&s.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,a=e.length;i!==a;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function CU(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const GBe=37297;let $Be=0;function XBe(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let o=i;o<a;o++){const s=o+1;r.push(`${s===e?">":" "} ${s}: ${t[o]}`)}return r.join(`
`)}function YBe(n){const e=Ln.getPrimaries(Ln.workingColorSpace),t=Ln.getPrimaries(n);let r;switch(e===t?r="":e===mv&&t===pv?r="LinearDisplayP3ToLinearSRGB":e===pv&&t===mv&&(r="LinearSRGBToLinearDisplayP3"),n){case _l:case dy:return[r,"LinearTransferOETF"];case ni:case g_:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function AU(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const o=parseInt(a[1]);return t.toUpperCase()+`

`+i+`

`+XBe(n.getShaderSource(e),o)}else return i}function ZBe(n,e){const t=YBe(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function JBe(n,e){let t;switch(e){case lY:t="Linear";break;case uY:t="Reinhard";break;case cY:t="OptimizedCineon";break;case oO:t="ACESFilmic";break;case dY:t="AgX";break;case hY:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function KBe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.alphaToCoverage||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(cp).join(`
`)}function QBe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(cp).join(`
`)}function eze(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function tze(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=n.getActiveAttrib(e,i),o=a.name;let s=1;a.type===n.FLOAT_MAT2&&(s=2),a.type===n.FLOAT_MAT3&&(s=3),a.type===n.FLOAT_MAT4&&(s=4),t[o]={type:a.type,location:n.getAttribLocation(e,o),locationSize:s}}return t}function cp(n){return n!==""}function TU(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function MU(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const nze=/^[ \t]*#include +<([\w\d./]+)>/gm;function e3(n){return n.replace(nze,ize)}const rze=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function ize(n,e){let t=hn[e];if(t===void 0){const r=rze.get(e);if(r!==void 0)t=hn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return e3(t)}const aze=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DU(n){return n.replace(aze,oze)}function oze(n,e,t,r){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function kU(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	`;return n.isWebGL2&&(e+=`precision ${n.precision} sampler3D;
		precision ${n.precision} sampler2DArray;
		precision ${n.precision} sampler2DShadow;
		precision ${n.precision} samplerCubeShadow;
		precision ${n.precision} sampler2DArrayShadow;
		precision ${n.precision} isampler2D;
		precision ${n.precision} isampler3D;
		precision ${n.precision} isamplerCube;
		precision ${n.precision} isampler2DArray;
		precision ${n.precision} usampler2D;
		precision ${n.precision} usampler3D;
		precision ${n.precision} usamplerCube;
		precision ${n.precision} usampler2DArray;
		`),n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function sze(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===d_?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===g0?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ms&&(e="SHADOWMAP_TYPE_VSM"),e}function lze(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case _u:case Gc:e="ENVMAP_TYPE_CUBE";break;case Rm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function uze(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Gc:e="ENVMAP_MODE_REFRACTION";break}return e}function cze(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case hy:e="ENVMAP_BLENDING_MULTIPLY";break;case oY:e="ENVMAP_BLENDING_MIX";break;case sY:e="ENVMAP_BLENDING_ADD";break}return e}function hze(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function dze(n,e,t,r){const i=n.getContext(),a=t.defines;let o=t.vertexShader,s=t.fragmentShader;const l=sze(t),u=lze(t),c=uze(t),h=cze(t),d=hze(t),f=t.isWebGL2?"":KBe(t),p=QBe(t),v=eze(a),y=i.createProgram();let g,w,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(cp).join(`
`),g.length>0&&(g+=`
`),w=[f,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(cp).join(`
`),w.length>0&&(w+=`
`)):(g=[kU(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(cp).join(`
`),w=[f,kU(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ml?"#define TONE_MAPPING":"",t.toneMapping!==ml?hn.tonemapping_pars_fragment:"",t.toneMapping!==ml?JBe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",hn.colorspace_pars_fragment,ZBe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(cp).join(`
`)),o=e3(o),o=TU(o,t),o=MU(o,t),s=e3(s),s=TU(s,t),s=MU(s,t),o=DU(o),s=DU(s),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,g=[p,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,w=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===JD?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===JD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const m=b+g+o,x=b+w+s,S=CU(i,i.VERTEX_SHADER,m),C=CU(i,i.FRAGMENT_SHADER,x);i.attachShader(y,S),i.attachShader(y,C),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function T(O){if(n.debug.checkShaderErrors){const U=i.getProgramInfoLog(y).trim(),L=i.getShaderInfoLog(S).trim(),F=i.getShaderInfoLog(C).trim();let k=!0,P=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(k=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,y,S,C);else{const z=AU(i,S,"vertex"),B=AU(i,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Material Name: `+O.name+`
Material Type: `+O.type+`

Program Info Log: `+U+`
`+z+`
`+B)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(L===""||F==="")&&(P=!1);P&&(O.diagnostics={runnable:k,programLog:U,vertexShader:{log:L,prefix:g},fragmentShader:{log:F,prefix:w}})}i.deleteShader(S),i.deleteShader(C),M=new lw(i,y),A=tze(i,y)}let M;this.getUniforms=function(){return M===void 0&&T(this),M};let A;this.getAttributes=function(){return A===void 0&&T(this),A};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=i.getProgramParameter(y,GBe)),D},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=$Be++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=C,this}let fze=0;class pze{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(a)===!1&&(o.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new mze(e),t.set(e,r)),r}}class mze{constructor(e){this.id=fze++,this.code=e,this.usedTimes=0}}function gze(n,e,t,r,i,a,o){const s=new cd,l=new pze,u=new Set,c=[],h=i.isWebGL2,d=i.logarithmicDepthBuffer,f=i.vertexTextures;let p=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(A){return u.add(A),A===0?"uv":`uv${A}`}function g(A,D,O,U,L){const F=U.fog,k=L.geometry,P=A.isMeshStandardMaterial?U.environment:null,z=(A.isMeshStandardMaterial?t:e).get(A.envMap||P),B=z&&z.mapping===Rm?z.image.height:null,X=v[A.type];A.precision!==null&&(p=i.getMaxPrecision(A.precision),p!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",p,"instead."));const J=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,Q=J!==void 0?J.length:0;let Z=0;k.morphAttributes.position!==void 0&&(Z=1),k.morphAttributes.normal!==void 0&&(Z=2),k.morphAttributes.color!==void 0&&(Z=3);let re,fe,se,ye;if(X){const Ce=bs[X];re=Ce.vertexShader,fe=Ce.fragmentShader}else re=A.vertexShader,fe=A.fragmentShader,l.update(A),se=l.getVertexShaderID(A),ye=l.getFragmentShaderID(A);const De=n.getRenderTarget(),pe=L.isInstancedMesh===!0,Me=L.isBatchedMesh===!0,be=!!A.map,ne=!!A.matcap,Pe=!!z,ze=!!A.aoMap,K=!!A.lightMap,ie=!!A.bumpMap,_e=!!A.normalMap,oe=!!A.displacementMap,G=!!A.emissiveMap,q=!!A.metalnessMap,ce=!!A.roughnessMap,Ae=A.anisotropy>0,$=A.clearcoat>0,ee=A.iridescence>0,ge=A.sheen>0,xe=A.transmission>0,Ne=Ae&&!!A.anisotropyMap,Fe=$&&!!A.clearcoatMap,qe=$&&!!A.clearcoatNormalMap,ke=$&&!!A.clearcoatRoughnessMap,it=ee&&!!A.iridescenceMap,Ze=ee&&!!A.iridescenceThicknessMap,st=ge&&!!A.sheenColorMap,we=ge&&!!A.sheenRoughnessMap,Re=!!A.specularMap,et=!!A.specularColorMap,V=!!A.specularIntensityMap,Ee=xe&&!!A.transmissionMap,Le=xe&&!!A.thicknessMap,Je=!!A.gradientMap,he=!!A.alphaMap,Xe=A.alphaTest>0,H=!!A.alphaHash,te=!!A.extensions;let le=ml;A.toneMapped&&(De===null||De.isXRRenderTarget===!0)&&(le=n.toneMapping);const ve={isWebGL2:h,shaderID:X,shaderType:A.type,shaderName:A.name,vertexShader:re,fragmentShader:fe,defines:A.defines,customVertexShaderID:se,customFragmentShaderID:ye,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:p,batching:Me,instancing:pe,instancingColor:pe&&L.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:De===null?n.outputColorSpace:De.isXRRenderTarget===!0?De.texture.colorSpace:_l,alphaToCoverage:!!A.alphaToCoverage,map:be,matcap:ne,envMap:Pe,envMapMode:Pe&&z.mapping,envMapCubeUVHeight:B,aoMap:ze,lightMap:K,bumpMap:ie,normalMap:_e,displacementMap:f&&oe,emissiveMap:G,normalMapObjectSpace:_e&&A.normalMapType===TY,normalMapTangentSpace:_e&&A.normalMapType===sh,metalnessMap:q,roughnessMap:ce,anisotropy:Ae,anisotropyMap:Ne,clearcoat:$,clearcoatMap:Fe,clearcoatNormalMap:qe,clearcoatRoughnessMap:ke,iridescence:ee,iridescenceMap:it,iridescenceThicknessMap:Ze,sheen:ge,sheenColorMap:st,sheenRoughnessMap:we,specularMap:Re,specularColorMap:et,specularIntensityMap:V,transmission:xe,transmissionMap:Ee,thicknessMap:Le,gradientMap:Je,opaque:A.transparent===!1&&A.blending===sd&&A.alphaToCoverage===!1,alphaMap:he,alphaTest:Xe,alphaHash:H,combine:A.combine,mapUv:be&&y(A.map.channel),aoMapUv:ze&&y(A.aoMap.channel),lightMapUv:K&&y(A.lightMap.channel),bumpMapUv:ie&&y(A.bumpMap.channel),normalMapUv:_e&&y(A.normalMap.channel),displacementMapUv:oe&&y(A.displacementMap.channel),emissiveMapUv:G&&y(A.emissiveMap.channel),metalnessMapUv:q&&y(A.metalnessMap.channel),roughnessMapUv:ce&&y(A.roughnessMap.channel),anisotropyMapUv:Ne&&y(A.anisotropyMap.channel),clearcoatMapUv:Fe&&y(A.clearcoatMap.channel),clearcoatNormalMapUv:qe&&y(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ke&&y(A.clearcoatRoughnessMap.channel),iridescenceMapUv:it&&y(A.iridescenceMap.channel),iridescenceThicknessMapUv:Ze&&y(A.iridescenceThicknessMap.channel),sheenColorMapUv:st&&y(A.sheenColorMap.channel),sheenRoughnessMapUv:we&&y(A.sheenRoughnessMap.channel),specularMapUv:Re&&y(A.specularMap.channel),specularColorMapUv:et&&y(A.specularColorMap.channel),specularIntensityMapUv:V&&y(A.specularIntensityMap.channel),transmissionMapUv:Ee&&y(A.transmissionMap.channel),thicknessMapUv:Le&&y(A.thicknessMap.channel),alphaMapUv:he&&y(A.alphaMap.channel),vertexTangents:!!k.attributes.tangent&&(_e||Ae),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!k.attributes.color&&k.attributes.color.itemSize===4,pointsUvs:L.isPoints===!0&&!!k.attributes.uv&&(be||he),fog:!!F,useFog:A.fog===!0,fogExp2:!!F&&F.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:L.isSkinnedMesh===!0,morphTargets:k.morphAttributes.position!==void 0,morphNormals:k.morphAttributes.normal!==void 0,morphColors:k.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:Z,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:n.shadowMap.enabled&&O.length>0,shadowMapType:n.shadowMap.type,toneMapping:le,useLegacyLights:n._useLegacyLights,decodeVideoTexture:be&&A.map.isVideoTexture===!0&&Ln.getTransfer(A.map.colorSpace)===tr,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===xs,flipSided:A.side===_a,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:te&&A.extensions.derivatives===!0,extensionFragDepth:te&&A.extensions.fragDepth===!0,extensionDrawBuffers:te&&A.extensions.drawBuffers===!0,extensionShaderTextureLOD:te&&A.extensions.shaderTextureLOD===!0,extensionClipCullDistance:te&&A.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:te&&A.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:h||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return ve.vertexUv1s=u.has(1),ve.vertexUv2s=u.has(2),ve.vertexUv3s=u.has(3),u.clear(),ve}function w(A){const D=[];if(A.shaderID?D.push(A.shaderID):(D.push(A.customVertexShaderID),D.push(A.customFragmentShaderID)),A.defines!==void 0)for(const O in A.defines)D.push(O),D.push(A.defines[O]);return A.isRawShaderMaterial===!1&&(b(D,A),m(D,A),D.push(n.outputColorSpace)),D.push(A.customProgramCacheKey),D.join()}function b(A,D){A.push(D.precision),A.push(D.outputColorSpace),A.push(D.envMapMode),A.push(D.envMapCubeUVHeight),A.push(D.mapUv),A.push(D.alphaMapUv),A.push(D.lightMapUv),A.push(D.aoMapUv),A.push(D.bumpMapUv),A.push(D.normalMapUv),A.push(D.displacementMapUv),A.push(D.emissiveMapUv),A.push(D.metalnessMapUv),A.push(D.roughnessMapUv),A.push(D.anisotropyMapUv),A.push(D.clearcoatMapUv),A.push(D.clearcoatNormalMapUv),A.push(D.clearcoatRoughnessMapUv),A.push(D.iridescenceMapUv),A.push(D.iridescenceThicknessMapUv),A.push(D.sheenColorMapUv),A.push(D.sheenRoughnessMapUv),A.push(D.specularMapUv),A.push(D.specularColorMapUv),A.push(D.specularIntensityMapUv),A.push(D.transmissionMapUv),A.push(D.thicknessMapUv),A.push(D.combine),A.push(D.fogExp2),A.push(D.sizeAttenuation),A.push(D.morphTargetsCount),A.push(D.morphAttributeCount),A.push(D.numDirLights),A.push(D.numPointLights),A.push(D.numSpotLights),A.push(D.numSpotLightMaps),A.push(D.numHemiLights),A.push(D.numRectAreaLights),A.push(D.numDirLightShadows),A.push(D.numPointLightShadows),A.push(D.numSpotLightShadows),A.push(D.numSpotLightShadowsWithMaps),A.push(D.numLightProbes),A.push(D.shadowMapType),A.push(D.toneMapping),A.push(D.numClippingPlanes),A.push(D.numClipIntersection),A.push(D.depthPacking)}function m(A,D){s.disableAll(),D.isWebGL2&&s.enable(0),D.supportsVertexTextures&&s.enable(1),D.instancing&&s.enable(2),D.instancingColor&&s.enable(3),D.matcap&&s.enable(4),D.envMap&&s.enable(5),D.normalMapObjectSpace&&s.enable(6),D.normalMapTangentSpace&&s.enable(7),D.clearcoat&&s.enable(8),D.iridescence&&s.enable(9),D.alphaTest&&s.enable(10),D.vertexColors&&s.enable(11),D.vertexAlphas&&s.enable(12),D.vertexUv1s&&s.enable(13),D.vertexUv2s&&s.enable(14),D.vertexUv3s&&s.enable(15),D.vertexTangents&&s.enable(16),D.anisotropy&&s.enable(17),D.alphaHash&&s.enable(18),D.batching&&s.enable(19),A.push(s.mask),s.disableAll(),D.fog&&s.enable(0),D.useFog&&s.enable(1),D.flatShading&&s.enable(2),D.logarithmicDepthBuffer&&s.enable(3),D.skinning&&s.enable(4),D.morphTargets&&s.enable(5),D.morphNormals&&s.enable(6),D.morphColors&&s.enable(7),D.premultipliedAlpha&&s.enable(8),D.shadowMapEnabled&&s.enable(9),D.useLegacyLights&&s.enable(10),D.doubleSided&&s.enable(11),D.flipSided&&s.enable(12),D.useDepthPacking&&s.enable(13),D.dithering&&s.enable(14),D.transmission&&s.enable(15),D.sheen&&s.enable(16),D.opaque&&s.enable(17),D.pointsUvs&&s.enable(18),D.decodeVideoTexture&&s.enable(19),D.alphaToCoverage&&s.enable(20),A.push(s.mask)}function x(A){const D=v[A.type];let O;if(D){const U=bs[D];O=UY.clone(U.uniforms)}else O=A.uniforms;return O}function S(A,D){let O;for(let U=0,L=c.length;U<L;U++){const F=c[U];if(F.cacheKey===D){O=F,++O.usedTimes;break}}return O===void 0&&(O=new dze(n,D,A,a),c.push(O)),O}function C(A){if(--A.usedTimes===0){const D=c.indexOf(A);c[D]=c[c.length-1],c.pop(),A.destroy()}}function T(A){l.remove(A)}function M(){l.dispose()}return{getParameters:g,getProgramCacheKey:w,getUniforms:x,acquireProgram:S,releaseProgram:C,releaseShaderCache:T,programs:c,dispose:M}}function vze(){let n=new WeakMap;function e(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function t(a){n.delete(a)}function r(a,o,s){n.get(a)[o]=s}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function yze(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function NU(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function OU(){const n=[];let e=0;const t=[],r=[],i=[];function a(){e=0,t.length=0,r.length=0,i.length=0}function o(h,d,f,p,v,y){let g=n[e];return g===void 0?(g={id:h.id,object:h,geometry:d,material:f,groupOrder:p,renderOrder:h.renderOrder,z:v,group:y},n[e]=g):(g.id=h.id,g.object=h,g.geometry=d,g.material=f,g.groupOrder=p,g.renderOrder=h.renderOrder,g.z=v,g.group=y),e++,g}function s(h,d,f,p,v,y){const g=o(h,d,f,p,v,y);f.transmission>0?r.push(g):f.transparent===!0?i.push(g):t.push(g)}function l(h,d,f,p,v,y){const g=o(h,d,f,p,v,y);f.transmission>0?r.unshift(g):f.transparent===!0?i.unshift(g):t.unshift(g)}function u(h,d){t.length>1&&t.sort(h||yze),r.length>1&&r.sort(d||NU),i.length>1&&i.sort(d||NU)}function c(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:r,transparent:i,init:a,push:s,unshift:l,finish:c,sort:u}}function bze(){let n=new WeakMap;function e(r,i){const a=n.get(r);let o;return a===void 0?(o=new OU,n.set(r,[o])):i>=a.length?(o=new OU,a.push(o)):o=a[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function xze(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new me,color:new wt};break;case"SpotLight":t={position:new me,direction:new me,color:new wt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new me,color:new wt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new me,skyColor:new wt,groundColor:new wt};break;case"RectAreaLight":t={color:new wt,position:new me,halfWidth:new me,halfHeight:new me};break}return n[e.id]=t,t}}}function wze(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Sze=0;function Eze(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function _ze(n,e){const t=new xze,r=wze(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new me);const a=new me,o=new Yt,s=new Yt;function l(c,h){let d=0,f=0,p=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let v=0,y=0,g=0,w=0,b=0,m=0,x=0,S=0,C=0,T=0,M=0;c.sort(Eze);const A=h===!0?Math.PI:1;for(let O=0,U=c.length;O<U;O++){const L=c[O],F=L.color,k=L.intensity,P=L.distance,z=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)d+=F.r*k*A,f+=F.g*k*A,p+=F.b*k*A;else if(L.isLightProbe){for(let B=0;B<9;B++)i.probe[B].addScaledVector(L.sh.coefficients[B],k);M++}else if(L.isDirectionalLight){const B=t.get(L);if(B.color.copy(L.color).multiplyScalar(L.intensity*A),L.castShadow){const X=L.shadow,J=r.get(L);J.shadowBias=X.bias,J.shadowNormalBias=X.normalBias,J.shadowRadius=X.radius,J.shadowMapSize=X.mapSize,i.directionalShadow[v]=J,i.directionalShadowMap[v]=z,i.directionalShadowMatrix[v]=L.shadow.matrix,m++}i.directional[v]=B,v++}else if(L.isSpotLight){const B=t.get(L);B.position.setFromMatrixPosition(L.matrixWorld),B.color.copy(F).multiplyScalar(k*A),B.distance=P,B.coneCos=Math.cos(L.angle),B.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),B.decay=L.decay,i.spot[g]=B;const X=L.shadow;if(L.map&&(i.spotLightMap[C]=L.map,C++,X.updateMatrices(L),L.castShadow&&T++),i.spotLightMatrix[g]=X.matrix,L.castShadow){const J=r.get(L);J.shadowBias=X.bias,J.shadowNormalBias=X.normalBias,J.shadowRadius=X.radius,J.shadowMapSize=X.mapSize,i.spotShadow[g]=J,i.spotShadowMap[g]=z,S++}g++}else if(L.isRectAreaLight){const B=t.get(L);B.color.copy(F).multiplyScalar(k),B.halfWidth.set(L.width*.5,0,0),B.halfHeight.set(0,L.height*.5,0),i.rectArea[w]=B,w++}else if(L.isPointLight){const B=t.get(L);if(B.color.copy(L.color).multiplyScalar(L.intensity*A),B.distance=L.distance,B.decay=L.decay,L.castShadow){const X=L.shadow,J=r.get(L);J.shadowBias=X.bias,J.shadowNormalBias=X.normalBias,J.shadowRadius=X.radius,J.shadowMapSize=X.mapSize,J.shadowCameraNear=X.camera.near,J.shadowCameraFar=X.camera.far,i.pointShadow[y]=J,i.pointShadowMap[y]=z,i.pointShadowMatrix[y]=L.shadow.matrix,x++}i.point[y]=B,y++}else if(L.isHemisphereLight){const B=t.get(L);B.skyColor.copy(L.color).multiplyScalar(k*A),B.groundColor.copy(L.groundColor).multiplyScalar(k*A),i.hemi[b]=B,b++}}w>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=pt.LTC_FLOAT_1,i.rectAreaLTC2=pt.LTC_FLOAT_2):(i.rectAreaLTC1=pt.LTC_HALF_1,i.rectAreaLTC2=pt.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=pt.LTC_FLOAT_1,i.rectAreaLTC2=pt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=pt.LTC_HALF_1,i.rectAreaLTC2=pt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=d,i.ambient[1]=f,i.ambient[2]=p;const D=i.hash;(D.directionalLength!==v||D.pointLength!==y||D.spotLength!==g||D.rectAreaLength!==w||D.hemiLength!==b||D.numDirectionalShadows!==m||D.numPointShadows!==x||D.numSpotShadows!==S||D.numSpotMaps!==C||D.numLightProbes!==M)&&(i.directional.length=v,i.spot.length=g,i.rectArea.length=w,i.point.length=y,i.hemi.length=b,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=x,i.pointShadowMap.length=x,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=x,i.spotLightMatrix.length=S+C-T,i.spotLightMap.length=C,i.numSpotLightShadowsWithMaps=T,i.numLightProbes=M,D.directionalLength=v,D.pointLength=y,D.spotLength=g,D.rectAreaLength=w,D.hemiLength=b,D.numDirectionalShadows=m,D.numPointShadows=x,D.numSpotShadows=S,D.numSpotMaps=C,D.numLightProbes=M,i.version=Sze++)}function u(c,h){let d=0,f=0,p=0,v=0,y=0;const g=h.matrixWorldInverse;for(let w=0,b=c.length;w<b;w++){const m=c[w];if(m.isDirectionalLight){const x=i.directional[d];x.direction.setFromMatrixPosition(m.matrixWorld),a.setFromMatrixPosition(m.target.matrixWorld),x.direction.sub(a),x.direction.transformDirection(g),d++}else if(m.isSpotLight){const x=i.spot[p];x.position.setFromMatrixPosition(m.matrixWorld),x.position.applyMatrix4(g),x.direction.setFromMatrixPosition(m.matrixWorld),a.setFromMatrixPosition(m.target.matrixWorld),x.direction.sub(a),x.direction.transformDirection(g),p++}else if(m.isRectAreaLight){const x=i.rectArea[v];x.position.setFromMatrixPosition(m.matrixWorld),x.position.applyMatrix4(g),s.identity(),o.copy(m.matrixWorld),o.premultiply(g),s.extractRotation(o),x.halfWidth.set(m.width*.5,0,0),x.halfHeight.set(0,m.height*.5,0),x.halfWidth.applyMatrix4(s),x.halfHeight.applyMatrix4(s),v++}else if(m.isPointLight){const x=i.point[f];x.position.setFromMatrixPosition(m.matrixWorld),x.position.applyMatrix4(g),f++}else if(m.isHemisphereLight){const x=i.hemi[y];x.direction.setFromMatrixPosition(m.matrixWorld),x.direction.transformDirection(g),y++}}}return{setup:l,setupView:u,state:i}}function PU(n,e){const t=new _ze(n,e),r=[],i=[];function a(){r.length=0,i.length=0}function o(c){r.push(c)}function s(c){i.push(c)}function l(c){t.setup(r,c)}function u(c){t.setupView(r,c)}return{init:a,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:s}}function Cze(n,e){let t=new WeakMap;function r(a,o=0){const s=t.get(a);let l;return s===void 0?(l=new PU(n,e),t.set(a,[l])):o>=s.length?(l=new PU(n,e),s.push(l)):l=s[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class EO extends Li{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=CY,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class _O extends Li{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Aze=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Tze=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Mze(n,e,t){let r=new gy;const i=new Qe,a=new Qe,o=new Bn,s=new EO({depthPacking:AY}),l=new _O,u={},c=t.maxTextureSize,h={[Eu]:_a,[_a]:Eu,[xs]:xs},d=new ts({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qe},radius:{value:4}},vertexShader:Aze,fragmentShader:Tze}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new sn;p.setAttribute("position",new Hn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Yr(p,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=d_;let g=this.type;this.render=function(S,C,T){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||S.length===0)return;const M=n.getRenderTarget(),A=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),O=n.state;O.setBlending(hu),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const U=g!==ms&&this.type===ms,L=g===ms&&this.type!==ms;for(let F=0,k=S.length;F<k;F++){const P=S[F],z=P.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",P,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;i.copy(z.mapSize);const B=z.getFrameExtents();if(i.multiply(B),a.copy(z.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/B.x),i.x=a.x*B.x,z.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/B.y),i.y=a.y*B.y,z.mapSize.y=a.y)),z.map===null||U===!0||L===!0){const J=this.type!==ms?{minFilter:zr,magFilter:zr}:{};z.map!==null&&z.map.dispose(),z.map=new es(i.x,i.y,J),z.map.texture.name=P.name+".shadowMap",z.camera.updateProjectionMatrix()}n.setRenderTarget(z.map),n.clear();const X=z.getViewportCount();for(let J=0;J<X;J++){const Q=z.getViewport(J);o.set(a.x*Q.x,a.y*Q.y,a.x*Q.z,a.y*Q.w),O.viewport(o),z.updateMatrices(P,J),r=z.getFrustum(),m(C,T,z.camera,P,this.type)}z.isPointLightShadow!==!0&&this.type===ms&&w(z,T),z.needsUpdate=!1}g=this.type,y.needsUpdate=!1,n.setRenderTarget(M,A,D)};function w(S,C){const T=e.update(v);d.defines.VSM_SAMPLES!==S.blurSamples&&(d.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new es(i.x,i.y)),d.uniforms.shadow_pass.value=S.map.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(C,null,T,d,v,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(C,null,T,f,v,null)}function b(S,C,T,M){let A=null;const D=T.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(D!==void 0)A=D;else if(A=T.isPointLight===!0?l:s,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const O=A.uuid,U=C.uuid;let L=u[O];L===void 0&&(L={},u[O]=L);let F=L[U];F===void 0&&(F=A.clone(),L[U]=F,C.addEventListener("dispose",x)),A=F}if(A.visible=C.visible,A.wireframe=C.wireframe,M===ms?A.side=C.shadowSide!==null?C.shadowSide:C.side:A.side=C.shadowSide!==null?C.shadowSide:h[C.side],A.alphaMap=C.alphaMap,A.alphaTest=C.alphaTest,A.map=C.map,A.clipShadows=C.clipShadows,A.clippingPlanes=C.clippingPlanes,A.clipIntersection=C.clipIntersection,A.displacementMap=C.displacementMap,A.displacementScale=C.displacementScale,A.displacementBias=C.displacementBias,A.wireframeLinewidth=C.wireframeLinewidth,A.linewidth=C.linewidth,T.isPointLight===!0&&A.isMeshDistanceMaterial===!0){const O=n.properties.get(A);O.light=T}return A}function m(S,C,T,M,A){if(S.visible===!1)return;if(S.layers.test(C.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&A===ms)&&(!S.frustumCulled||r.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,S.matrixWorld);const O=e.update(S),U=S.material;if(Array.isArray(U)){const L=O.groups;for(let F=0,k=L.length;F<k;F++){const P=L[F],z=U[P.materialIndex];if(z&&z.visible){const B=b(S,z,M,A);S.onBeforeShadow(n,S,C,T,O,B,P),n.renderBufferDirect(T,null,O,B,S,P),S.onAfterShadow(n,S,C,T,O,B,P)}}}else if(U.visible){const L=b(S,U,M,A);S.onBeforeShadow(n,S,C,T,O,L,null),n.renderBufferDirect(T,null,O,L,S,null),S.onAfterShadow(n,S,C,T,O,L,null)}}const D=S.children;for(let O=0,U=D.length;O<U;O++)m(D[O],C,T,M,A)}function x(S){S.target.removeEventListener("dispose",x);for(const C in u){const T=u[C],M=S.target.uuid;M in T&&(T[M].dispose(),delete T[M])}}}function Dze(n,e,t){const r=t.isWebGL2;function i(){let he=!1;const Xe=new Bn;let H=null;const te=new Bn(0,0,0,0);return{setMask:function(le){H!==le&&!he&&(n.colorMask(le,le,le,le),H=le)},setLocked:function(le){he=le},setClear:function(le,ve,Ce,Oe,He){He===!0&&(le*=Oe,ve*=Oe,Ce*=Oe),Xe.set(le,ve,Ce,Oe),te.equals(Xe)===!1&&(n.clearColor(le,ve,Ce,Oe),te.copy(Xe))},reset:function(){he=!1,H=null,te.set(-1,0,0,0)}}}function a(){let he=!1,Xe=null,H=null,te=null;return{setTest:function(le){le?pe(n.DEPTH_TEST):Me(n.DEPTH_TEST)},setMask:function(le){Xe!==le&&!he&&(n.depthMask(le),Xe=le)},setFunc:function(le){if(H!==le){switch(le){case QX:n.depthFunc(n.NEVER);break;case eY:n.depthFunc(n.ALWAYS);break;case tY:n.depthFunc(n.LESS);break;case av:n.depthFunc(n.LEQUAL);break;case nY:n.depthFunc(n.EQUAL);break;case rY:n.depthFunc(n.GEQUAL);break;case iY:n.depthFunc(n.GREATER);break;case aY:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}H=le}},setLocked:function(le){he=le},setClear:function(le){te!==le&&(n.clearDepth(le),te=le)},reset:function(){he=!1,Xe=null,H=null,te=null}}}function o(){let he=!1,Xe=null,H=null,te=null,le=null,ve=null,Ce=null,Oe=null,He=null;return{setTest:function($e){he||($e?pe(n.STENCIL_TEST):Me(n.STENCIL_TEST))},setMask:function($e){Xe!==$e&&!he&&(n.stencilMask($e),Xe=$e)},setFunc:function($e,nt,ft){(H!==$e||te!==nt||le!==ft)&&(n.stencilFunc($e,nt,ft),H=$e,te=nt,le=ft)},setOp:function($e,nt,ft){(ve!==$e||Ce!==nt||Oe!==ft)&&(n.stencilOp($e,nt,ft),ve=$e,Ce=nt,Oe=ft)},setLocked:function($e){he=$e},setClear:function($e){He!==$e&&(n.clearStencil($e),He=$e)},reset:function(){he=!1,Xe=null,H=null,te=null,le=null,ve=null,Ce=null,Oe=null,He=null}}}const s=new i,l=new a,u=new o,c=new WeakMap,h=new WeakMap;let d={},f={},p=new WeakMap,v=[],y=null,g=!1,w=null,b=null,m=null,x=null,S=null,C=null,T=null,M=new wt(0,0,0),A=0,D=!1,O=null,U=null,L=null,F=null,k=null;const P=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,B=0;const X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(X)[1]),z=B>=1):X.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),z=B>=2);let J=null,Q={};const Z=n.getParameter(n.SCISSOR_BOX),re=n.getParameter(n.VIEWPORT),fe=new Bn().fromArray(Z),se=new Bn().fromArray(re);function ye(he,Xe,H,te){const le=new Uint8Array(4),ve=n.createTexture();n.bindTexture(he,ve),n.texParameteri(he,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(he,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ce=0;Ce<H;Ce++)r&&(he===n.TEXTURE_3D||he===n.TEXTURE_2D_ARRAY)?n.texImage3D(Xe,0,n.RGBA,1,1,te,0,n.RGBA,n.UNSIGNED_BYTE,le):n.texImage2D(Xe+Ce,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,le);return ve}const De={};De[n.TEXTURE_2D]=ye(n.TEXTURE_2D,n.TEXTURE_2D,1),De[n.TEXTURE_CUBE_MAP]=ye(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(De[n.TEXTURE_2D_ARRAY]=ye(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),De[n.TEXTURE_3D]=ye(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),pe(n.DEPTH_TEST),l.setFunc(av),oe(!1),G(yD),pe(n.CULL_FACE),ie(hu);function pe(he){d[he]!==!0&&(n.enable(he),d[he]=!0)}function Me(he){d[he]!==!1&&(n.disable(he),d[he]=!1)}function be(he,Xe){return f[he]!==Xe?(n.bindFramebuffer(he,Xe),f[he]=Xe,r&&(he===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=Xe),he===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=Xe)),!0):!1}function ne(he,Xe){let H=v,te=!1;if(he)if(H=p.get(Xe),H===void 0&&(H=[],p.set(Xe,H)),he.isWebGLMultipleRenderTargets){const le=he.texture;if(H.length!==le.length||H[0]!==n.COLOR_ATTACHMENT0){for(let ve=0,Ce=le.length;ve<Ce;ve++)H[ve]=n.COLOR_ATTACHMENT0+ve;H.length=le.length,te=!0}}else H[0]!==n.COLOR_ATTACHMENT0&&(H[0]=n.COLOR_ATTACHMENT0,te=!0);else H[0]!==n.BACK&&(H[0]=n.BACK,te=!0);te&&(t.isWebGL2?n.drawBuffers(H):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(H))}function Pe(he){return y!==he?(n.useProgram(he),y=he,!0):!1}const ze={[hc]:n.FUNC_ADD,[BX]:n.FUNC_SUBTRACT,[zX]:n.FUNC_REVERSE_SUBTRACT};if(r)ze[SD]=n.MIN,ze[ED]=n.MAX;else{const he=e.get("EXT_blend_minmax");he!==null&&(ze[SD]=he.MIN_EXT,ze[ED]=he.MAX_EXT)}const K={[UX]:n.ZERO,[jX]:n.ONE,[HX]:n.SRC_COLOR,[zS]:n.SRC_ALPHA,[XX]:n.SRC_ALPHA_SATURATE,[GX]:n.DST_COLOR,[WX]:n.DST_ALPHA,[VX]:n.ONE_MINUS_SRC_COLOR,[US]:n.ONE_MINUS_SRC_ALPHA,[$X]:n.ONE_MINUS_DST_COLOR,[qX]:n.ONE_MINUS_DST_ALPHA,[YX]:n.CONSTANT_COLOR,[ZX]:n.ONE_MINUS_CONSTANT_COLOR,[JX]:n.CONSTANT_ALPHA,[KX]:n.ONE_MINUS_CONSTANT_ALPHA};function ie(he,Xe,H,te,le,ve,Ce,Oe,He,$e){if(he===hu){g===!0&&(Me(n.BLEND),g=!1);return}if(g===!1&&(pe(n.BLEND),g=!0),he!==FX){if(he!==w||$e!==D){if((b!==hc||S!==hc)&&(n.blendEquation(n.FUNC_ADD),b=hc,S=hc),$e)switch(he){case sd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case bD:n.blendFunc(n.ONE,n.ONE);break;case xD:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case wD:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}else switch(he){case sd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case bD:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case xD:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case wD:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}m=null,x=null,C=null,T=null,M.set(0,0,0),A=0,w=he,D=$e}return}le=le||Xe,ve=ve||H,Ce=Ce||te,(Xe!==b||le!==S)&&(n.blendEquationSeparate(ze[Xe],ze[le]),b=Xe,S=le),(H!==m||te!==x||ve!==C||Ce!==T)&&(n.blendFuncSeparate(K[H],K[te],K[ve],K[Ce]),m=H,x=te,C=ve,T=Ce),(Oe.equals(M)===!1||He!==A)&&(n.blendColor(Oe.r,Oe.g,Oe.b,He),M.copy(Oe),A=He),w=he,D=!1}function _e(he,Xe){he.side===xs?Me(n.CULL_FACE):pe(n.CULL_FACE);let H=he.side===_a;Xe&&(H=!H),oe(H),he.blending===sd&&he.transparent===!1?ie(hu):ie(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.blendColor,he.blendAlpha,he.premultipliedAlpha),l.setFunc(he.depthFunc),l.setTest(he.depthTest),l.setMask(he.depthWrite),s.setMask(he.colorWrite);const te=he.stencilWrite;u.setTest(te),te&&(u.setMask(he.stencilWriteMask),u.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),u.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),ce(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?pe(n.SAMPLE_ALPHA_TO_COVERAGE):Me(n.SAMPLE_ALPHA_TO_COVERAGE)}function oe(he){O!==he&&(he?n.frontFace(n.CW):n.frontFace(n.CCW),O=he)}function G(he){he!==RX?(pe(n.CULL_FACE),he!==U&&(he===yD?n.cullFace(n.BACK):he===IX?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Me(n.CULL_FACE),U=he}function q(he){he!==L&&(z&&n.lineWidth(he),L=he)}function ce(he,Xe,H){he?(pe(n.POLYGON_OFFSET_FILL),(F!==Xe||k!==H)&&(n.polygonOffset(Xe,H),F=Xe,k=H)):Me(n.POLYGON_OFFSET_FILL)}function Ae(he){he?pe(n.SCISSOR_TEST):Me(n.SCISSOR_TEST)}function $(he){he===void 0&&(he=n.TEXTURE0+P-1),J!==he&&(n.activeTexture(he),J=he)}function ee(he,Xe,H){H===void 0&&(J===null?H=n.TEXTURE0+P-1:H=J);let te=Q[H];te===void 0&&(te={type:void 0,texture:void 0},Q[H]=te),(te.type!==he||te.texture!==Xe)&&(J!==H&&(n.activeTexture(H),J=H),n.bindTexture(he,Xe||De[he]),te.type=he,te.texture=Xe)}function ge(){const he=Q[J];he!==void 0&&he.type!==void 0&&(n.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function xe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ne(){try{n.compressedTexImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Fe(){try{n.texSubImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function qe(){try{n.texSubImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function ke(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function it(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ze(){try{n.texStorage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function st(){try{n.texStorage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function we(){try{n.texImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Re(){try{n.texImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function et(he){fe.equals(he)===!1&&(n.scissor(he.x,he.y,he.z,he.w),fe.copy(he))}function V(he){se.equals(he)===!1&&(n.viewport(he.x,he.y,he.z,he.w),se.copy(he))}function Ee(he,Xe){let H=h.get(Xe);H===void 0&&(H=new WeakMap,h.set(Xe,H));let te=H.get(he);te===void 0&&(te=n.getUniformBlockIndex(Xe,he.name),H.set(he,te))}function Le(he,Xe){const H=h.get(Xe).get(he);c.get(Xe)!==H&&(n.uniformBlockBinding(Xe,H,he.__bindingPointIndex),c.set(Xe,H))}function Je(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},J=null,Q={},f={},p=new WeakMap,v=[],y=null,g=!1,w=null,b=null,m=null,x=null,S=null,C=null,T=null,M=new wt(0,0,0),A=0,D=!1,O=null,U=null,L=null,F=null,k=null,fe.set(0,0,n.canvas.width,n.canvas.height),se.set(0,0,n.canvas.width,n.canvas.height),s.reset(),l.reset(),u.reset()}return{buffers:{color:s,depth:l,stencil:u},enable:pe,disable:Me,bindFramebuffer:be,drawBuffers:ne,useProgram:Pe,setBlending:ie,setMaterial:_e,setFlipSided:oe,setCullFace:G,setLineWidth:q,setPolygonOffset:ce,setScissorTest:Ae,activeTexture:$,bindTexture:ee,unbindTexture:ge,compressedTexImage2D:xe,compressedTexImage3D:Ne,texImage2D:we,texImage3D:Re,updateUBOMapping:Ee,uniformBlockBinding:Le,texStorage2D:Ze,texStorage3D:st,texSubImage2D:Fe,texSubImage3D:qe,compressedTexSubImage2D:ke,compressedTexSubImage3D:it,scissor:et,viewport:V,reset:Je}}function kze(n,e,t,r,i,a,o){const s=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(G,q){return f?new OffscreenCanvas(G,q):yv("canvas")}function v(G,q,ce,Ae){let $=1;if((G.width>Ae||G.height>Ae)&&($=Ae/Math.max(G.width,G.height)),$<1||q===!0)if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap){const ee=q?VS:Math.floor,ge=ee($*G.width),xe=ee($*G.height);h===void 0&&(h=p(ge,xe));const Ne=ce?p(ge,xe):h;return Ne.width=ge,Ne.height=xe,Ne.getContext("2d").drawImage(G,0,0,ge,xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+ge+"x"+xe+")."),Ne}else return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G;return G}function y(G){return KD(G.width)&&KD(G.height)}function g(G){return s?!1:G.wrapS!==Zi||G.wrapT!==Zi||G.minFilter!==zr&&G.minFilter!==sr}function w(G,q){return G.generateMipmaps&&q&&G.minFilter!==zr&&G.minFilter!==sr}function b(G){n.generateMipmap(G)}function m(G,q,ce,Ae,$=!1){if(s===!1)return q;if(G!==null){if(n[G]!==void 0)return n[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let ee=q;if(q===n.RED&&(ce===n.FLOAT&&(ee=n.R32F),ce===n.HALF_FLOAT&&(ee=n.R16F),ce===n.UNSIGNED_BYTE&&(ee=n.R8)),q===n.RED_INTEGER&&(ce===n.UNSIGNED_BYTE&&(ee=n.R8UI),ce===n.UNSIGNED_SHORT&&(ee=n.R16UI),ce===n.UNSIGNED_INT&&(ee=n.R32UI),ce===n.BYTE&&(ee=n.R8I),ce===n.SHORT&&(ee=n.R16I),ce===n.INT&&(ee=n.R32I)),q===n.RG&&(ce===n.FLOAT&&(ee=n.RG32F),ce===n.HALF_FLOAT&&(ee=n.RG16F),ce===n.UNSIGNED_BYTE&&(ee=n.RG8)),q===n.RGBA){const ge=$?fv:Ln.getTransfer(Ae);ce===n.FLOAT&&(ee=n.RGBA32F),ce===n.HALF_FLOAT&&(ee=n.RGBA16F),ce===n.UNSIGNED_BYTE&&(ee=ge===tr?n.SRGB8_ALPHA8:n.RGBA8),ce===n.UNSIGNED_SHORT_4_4_4_4&&(ee=n.RGBA4),ce===n.UNSIGNED_SHORT_5_5_5_1&&(ee=n.RGB5_A1)}return(ee===n.R16F||ee===n.R32F||ee===n.RG16F||ee===n.RG32F||ee===n.RGBA16F||ee===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ee}function x(G,q,ce){return w(G,ce)===!0||G.isFramebufferTexture&&G.minFilter!==zr&&G.minFilter!==sr?Math.log2(Math.max(q.width,q.height))+1:G.mipmaps!==void 0&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?q.mipmaps.length:1}function S(G){return G===zr||G===jS||G===zh?n.NEAREST:n.LINEAR}function C(G){const q=G.target;q.removeEventListener("dispose",C),M(q),q.isVideoTexture&&c.delete(q)}function T(G){const q=G.target;q.removeEventListener("dispose",T),D(q)}function M(G){const q=r.get(G);if(q.__webglInit===void 0)return;const ce=G.source,Ae=d.get(ce);if(Ae){const $=Ae[q.__cacheKey];$.usedTimes--,$.usedTimes===0&&A(G),Object.keys(Ae).length===0&&d.delete(ce)}r.remove(G)}function A(G){const q=r.get(G);n.deleteTexture(q.__webglTexture);const ce=G.source,Ae=d.get(ce);delete Ae[q.__cacheKey],o.memory.textures--}function D(G){const q=G.texture,ce=r.get(G),Ae=r.get(q);if(Ae.__webglTexture!==void 0&&(n.deleteTexture(Ae.__webglTexture),o.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let $=0;$<6;$++){if(Array.isArray(ce.__webglFramebuffer[$]))for(let ee=0;ee<ce.__webglFramebuffer[$].length;ee++)n.deleteFramebuffer(ce.__webglFramebuffer[$][ee]);else n.deleteFramebuffer(ce.__webglFramebuffer[$]);ce.__webglDepthbuffer&&n.deleteRenderbuffer(ce.__webglDepthbuffer[$])}else{if(Array.isArray(ce.__webglFramebuffer))for(let $=0;$<ce.__webglFramebuffer.length;$++)n.deleteFramebuffer(ce.__webglFramebuffer[$]);else n.deleteFramebuffer(ce.__webglFramebuffer);if(ce.__webglDepthbuffer&&n.deleteRenderbuffer(ce.__webglDepthbuffer),ce.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ce.__webglMultisampledFramebuffer),ce.__webglColorRenderbuffer)for(let $=0;$<ce.__webglColorRenderbuffer.length;$++)ce.__webglColorRenderbuffer[$]&&n.deleteRenderbuffer(ce.__webglColorRenderbuffer[$]);ce.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ce.__webglDepthRenderbuffer)}if(G.isWebGLMultipleRenderTargets)for(let $=0,ee=q.length;$<ee;$++){const ge=r.get(q[$]);ge.__webglTexture&&(n.deleteTexture(ge.__webglTexture),o.memory.textures--),r.remove(q[$])}r.remove(q),r.remove(G)}let O=0;function U(){O=0}function L(){const G=O;return G>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+i.maxTextures),O+=1,G}function F(G){const q=[];return q.push(G.wrapS),q.push(G.wrapT),q.push(G.wrapR||0),q.push(G.magFilter),q.push(G.minFilter),q.push(G.anisotropy),q.push(G.internalFormat),q.push(G.format),q.push(G.type),q.push(G.generateMipmaps),q.push(G.premultiplyAlpha),q.push(G.flipY),q.push(G.unpackAlignment),q.push(G.colorSpace),q.join()}function k(G,q){const ce=r.get(G);if(G.isVideoTexture&&_e(G),G.isRenderTargetTexture===!1&&G.version>0&&ce.__version!==G.version){const Ae=G.image;if(Ae===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ae.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{fe(ce,G,q);return}}t.bindTexture(n.TEXTURE_2D,ce.__webglTexture,n.TEXTURE0+q)}function P(G,q){const ce=r.get(G);if(G.version>0&&ce.__version!==G.version){fe(ce,G,q);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ce.__webglTexture,n.TEXTURE0+q)}function z(G,q){const ce=r.get(G);if(G.version>0&&ce.__version!==G.version){fe(ce,G,q);return}t.bindTexture(n.TEXTURE_3D,ce.__webglTexture,n.TEXTURE0+q)}function B(G,q){const ce=r.get(G);if(G.version>0&&ce.__version!==G.version){se(ce,G,q);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ce.__webglTexture,n.TEXTURE0+q)}const X={[lv]:n.REPEAT,[Zi]:n.CLAMP_TO_EDGE,[uv]:n.MIRRORED_REPEAT},J={[zr]:n.NEAREST,[jS]:n.NEAREST_MIPMAP_NEAREST,[zh]:n.NEAREST_MIPMAP_LINEAR,[sr]:n.LINEAR,[v0]:n.LINEAR_MIPMAP_NEAREST,[sl]:n.LINEAR_MIPMAP_LINEAR},Q={[MY]:n.NEVER,[RY]:n.ALWAYS,[DY]:n.LESS,[gO]:n.LEQUAL,[kY]:n.EQUAL,[PY]:n.GEQUAL,[NY]:n.GREATER,[OY]:n.NOTEQUAL};function Z(G,q,ce){if(q.type===po&&e.has("OES_texture_float_linear")===!1&&(q.magFilter===sr||q.magFilter===v0||q.magFilter===zh||q.magFilter===sl||q.minFilter===sr||q.minFilter===v0||q.minFilter===zh||q.minFilter===sl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),ce?(n.texParameteri(G,n.TEXTURE_WRAP_S,X[q.wrapS]),n.texParameteri(G,n.TEXTURE_WRAP_T,X[q.wrapT]),(G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY)&&n.texParameteri(G,n.TEXTURE_WRAP_R,X[q.wrapR]),n.texParameteri(G,n.TEXTURE_MAG_FILTER,J[q.magFilter]),n.texParameteri(G,n.TEXTURE_MIN_FILTER,J[q.minFilter])):(n.texParameteri(G,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(G,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY)&&n.texParameteri(G,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(q.wrapS!==Zi||q.wrapT!==Zi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(G,n.TEXTURE_MAG_FILTER,S(q.magFilter)),n.texParameteri(G,n.TEXTURE_MIN_FILTER,S(q.minFilter)),q.minFilter!==zr&&q.minFilter!==sr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),q.compareFunction&&(n.texParameteri(G,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(G,n.TEXTURE_COMPARE_FUNC,Q[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ae=e.get("EXT_texture_filter_anisotropic");if(q.magFilter===zr||q.minFilter!==zh&&q.minFilter!==sl||q.type===po&&e.has("OES_texture_float_linear")===!1||s===!1&&q.type===Ed&&e.has("OES_texture_half_float_linear")===!1)return;(q.anisotropy>1||r.get(q).__currentAnisotropy)&&(n.texParameterf(G,Ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,i.getMaxAnisotropy())),r.get(q).__currentAnisotropy=q.anisotropy)}}function re(G,q){let ce=!1;G.__webglInit===void 0&&(G.__webglInit=!0,q.addEventListener("dispose",C));const Ae=q.source;let $=d.get(Ae);$===void 0&&($={},d.set(Ae,$));const ee=F(q);if(ee!==G.__cacheKey){$[ee]===void 0&&($[ee]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ce=!0),$[ee].usedTimes++;const ge=$[G.__cacheKey];ge!==void 0&&($[G.__cacheKey].usedTimes--,ge.usedTimes===0&&A(q)),G.__cacheKey=ee,G.__webglTexture=$[ee].texture}return ce}function fe(G,q,ce){let Ae=n.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(Ae=n.TEXTURE_2D_ARRAY),q.isData3DTexture&&(Ae=n.TEXTURE_3D);const $=re(G,q),ee=q.source;t.bindTexture(Ae,G.__webglTexture,n.TEXTURE0+ce);const ge=r.get(ee);if(ee.version!==ge.__version||$===!0){t.activeTexture(n.TEXTURE0+ce);const xe=Ln.getPrimaries(Ln.workingColorSpace),Ne=q.colorSpace===mo?null:Ln.getPrimaries(q.colorSpace),Fe=q.colorSpace===mo||xe===Ne?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);const qe=g(q)&&y(q.image)===!1;let ke=v(q.image,qe,!1,i.maxTextureSize);ke=oe(q,ke);const it=y(ke)||s,Ze=a.convert(q.format,q.colorSpace);let st=a.convert(q.type),we=m(q.internalFormat,Ze,st,q.colorSpace,q.isVideoTexture);Z(Ae,q,it);let Re;const et=q.mipmaps,V=s&&q.isVideoTexture!==!0&&we!==fO,Ee=ge.__version===void 0||$===!0,Le=ee.dataReady,Je=x(q,ke,it);if(q.isDepthTexture)we=n.DEPTH_COMPONENT,s?q.type===po?we=n.DEPTH_COMPONENT32F:q.type===iu?we=n.DEPTH_COMPONENT24:q.type===Pc?we=n.DEPTH24_STENCIL8:we=n.DEPTH_COMPONENT16:q.type===po&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),q.format===Rc&&we===n.DEPTH_COMPONENT&&q.type!==p_&&q.type!==iu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),q.type=iu,st=a.convert(q.type)),q.format===_d&&we===n.DEPTH_COMPONENT&&(we=n.DEPTH_STENCIL,q.type!==Pc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),q.type=Pc,st=a.convert(q.type))),Ee&&(V?t.texStorage2D(n.TEXTURE_2D,1,we,ke.width,ke.height):t.texImage2D(n.TEXTURE_2D,0,we,ke.width,ke.height,0,Ze,st,null));else if(q.isDataTexture)if(et.length>0&&it){V&&Ee&&t.texStorage2D(n.TEXTURE_2D,Je,we,et[0].width,et[0].height);for(let he=0,Xe=et.length;he<Xe;he++)Re=et[he],V?Le&&t.texSubImage2D(n.TEXTURE_2D,he,0,0,Re.width,Re.height,Ze,st,Re.data):t.texImage2D(n.TEXTURE_2D,he,we,Re.width,Re.height,0,Ze,st,Re.data);q.generateMipmaps=!1}else V?(Ee&&t.texStorage2D(n.TEXTURE_2D,Je,we,ke.width,ke.height),Le&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ke.width,ke.height,Ze,st,ke.data)):t.texImage2D(n.TEXTURE_2D,0,we,ke.width,ke.height,0,Ze,st,ke.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){V&&Ee&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Je,we,et[0].width,et[0].height,ke.depth);for(let he=0,Xe=et.length;he<Xe;he++)Re=et[he],q.format!==ya?Ze!==null?V?Le&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,he,0,0,0,Re.width,Re.height,ke.depth,Ze,Re.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,he,we,Re.width,Re.height,ke.depth,0,Re.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):V?Le&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,he,0,0,0,Re.width,Re.height,ke.depth,Ze,st,Re.data):t.texImage3D(n.TEXTURE_2D_ARRAY,he,we,Re.width,Re.height,ke.depth,0,Ze,st,Re.data)}else{V&&Ee&&t.texStorage2D(n.TEXTURE_2D,Je,we,et[0].width,et[0].height);for(let he=0,Xe=et.length;he<Xe;he++)Re=et[he],q.format!==ya?Ze!==null?V?Le&&t.compressedTexSubImage2D(n.TEXTURE_2D,he,0,0,Re.width,Re.height,Ze,Re.data):t.compressedTexImage2D(n.TEXTURE_2D,he,we,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):V?Le&&t.texSubImage2D(n.TEXTURE_2D,he,0,0,Re.width,Re.height,Ze,st,Re.data):t.texImage2D(n.TEXTURE_2D,he,we,Re.width,Re.height,0,Ze,st,Re.data)}else if(q.isDataArrayTexture)V?(Ee&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Je,we,ke.width,ke.height,ke.depth),Le&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ke.width,ke.height,ke.depth,Ze,st,ke.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,we,ke.width,ke.height,ke.depth,0,Ze,st,ke.data);else if(q.isData3DTexture)V?(Ee&&t.texStorage3D(n.TEXTURE_3D,Je,we,ke.width,ke.height,ke.depth),Le&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ke.width,ke.height,ke.depth,Ze,st,ke.data)):t.texImage3D(n.TEXTURE_3D,0,we,ke.width,ke.height,ke.depth,0,Ze,st,ke.data);else if(q.isFramebufferTexture){if(Ee)if(V)t.texStorage2D(n.TEXTURE_2D,Je,we,ke.width,ke.height);else{let he=ke.width,Xe=ke.height;for(let H=0;H<Je;H++)t.texImage2D(n.TEXTURE_2D,H,we,he,Xe,0,Ze,st,null),he>>=1,Xe>>=1}}else if(et.length>0&&it){V&&Ee&&t.texStorage2D(n.TEXTURE_2D,Je,we,et[0].width,et[0].height);for(let he=0,Xe=et.length;he<Xe;he++)Re=et[he],V?Le&&t.texSubImage2D(n.TEXTURE_2D,he,0,0,Ze,st,Re):t.texImage2D(n.TEXTURE_2D,he,we,Ze,st,Re);q.generateMipmaps=!1}else V?(Ee&&t.texStorage2D(n.TEXTURE_2D,Je,we,ke.width,ke.height),Le&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ze,st,ke)):t.texImage2D(n.TEXTURE_2D,0,we,Ze,st,ke);w(q,it)&&b(Ae),ge.__version=ee.version,q.onUpdate&&q.onUpdate(q)}G.__version=q.version}function se(G,q,ce){if(q.image.length!==6)return;const Ae=re(G,q),$=q.source;t.bindTexture(n.TEXTURE_CUBE_MAP,G.__webglTexture,n.TEXTURE0+ce);const ee=r.get($);if($.version!==ee.__version||Ae===!0){t.activeTexture(n.TEXTURE0+ce);const ge=Ln.getPrimaries(Ln.workingColorSpace),xe=q.colorSpace===mo?null:Ln.getPrimaries(q.colorSpace),Ne=q.colorSpace===mo||ge===xe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ne);const Fe=q.isCompressedTexture||q.image[0].isCompressedTexture,qe=q.image[0]&&q.image[0].isDataTexture,ke=[];for(let he=0;he<6;he++)!Fe&&!qe?ke[he]=v(q.image[he],!1,!0,i.maxCubemapSize):ke[he]=qe?q.image[he].image:q.image[he],ke[he]=oe(q,ke[he]);const it=ke[0],Ze=y(it)||s,st=a.convert(q.format,q.colorSpace),we=a.convert(q.type),Re=m(q.internalFormat,st,we,q.colorSpace),et=s&&q.isVideoTexture!==!0,V=ee.__version===void 0||Ae===!0,Ee=$.dataReady;let Le=x(q,it,Ze);Z(n.TEXTURE_CUBE_MAP,q,Ze);let Je;if(Fe){et&&V&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Le,Re,it.width,it.height);for(let he=0;he<6;he++){Je=ke[he].mipmaps;for(let Xe=0;Xe<Je.length;Xe++){const H=Je[Xe];q.format!==ya?st!==null?et?Ee&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe,0,0,H.width,H.height,st,H.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe,Re,H.width,H.height,0,H.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):et?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe,0,0,H.width,H.height,st,we,H.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe,Re,H.width,H.height,0,st,we,H.data)}}}else{Je=q.mipmaps,et&&V&&(Je.length>0&&Le++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Le,Re,ke[0].width,ke[0].height));for(let he=0;he<6;he++)if(qe){et?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,ke[he].width,ke[he].height,st,we,ke[he].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,Re,ke[he].width,ke[he].height,0,st,we,ke[he].data);for(let Xe=0;Xe<Je.length;Xe++){const H=Je[Xe].image[he].image;et?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe+1,0,0,H.width,H.height,st,we,H.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe+1,Re,H.width,H.height,0,st,we,H.data)}}else{et?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,st,we,ke[he]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,Re,st,we,ke[he]);for(let Xe=0;Xe<Je.length;Xe++){const H=Je[Xe];et?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe+1,0,0,st,we,H.image[he]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe+1,Re,st,we,H.image[he])}}}w(q,Ze)&&b(n.TEXTURE_CUBE_MAP),ee.__version=$.version,q.onUpdate&&q.onUpdate(q)}G.__version=q.version}function ye(G,q,ce,Ae,$,ee){const ge=a.convert(ce.format,ce.colorSpace),xe=a.convert(ce.type),Ne=m(ce.internalFormat,ge,xe,ce.colorSpace);if(!r.get(q).__hasExternalTextures){const Fe=Math.max(1,q.width>>ee),qe=Math.max(1,q.height>>ee);$===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY?t.texImage3D($,ee,Ne,Fe,qe,q.depth,0,ge,xe,null):t.texImage2D($,ee,Ne,Fe,qe,0,ge,xe,null)}t.bindFramebuffer(n.FRAMEBUFFER,G),ie(q)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ae,$,r.get(ce).__webglTexture,0,K(q)):($===n.TEXTURE_2D||$>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&$<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ae,$,r.get(ce).__webglTexture,ee),t.bindFramebuffer(n.FRAMEBUFFER,null)}function De(G,q,ce){if(n.bindRenderbuffer(n.RENDERBUFFER,G),q.depthBuffer&&!q.stencilBuffer){let Ae=s===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(ce||ie(q)){const $=q.depthTexture;$&&$.isDepthTexture&&($.type===po?Ae=n.DEPTH_COMPONENT32F:$.type===iu&&(Ae=n.DEPTH_COMPONENT24));const ee=K(q);ie(q)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ee,Ae,q.width,q.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,ee,Ae,q.width,q.height)}else n.renderbufferStorage(n.RENDERBUFFER,Ae,q.width,q.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,G)}else if(q.depthBuffer&&q.stencilBuffer){const Ae=K(q);ce&&ie(q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ae,n.DEPTH24_STENCIL8,q.width,q.height):ie(q)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ae,n.DEPTH24_STENCIL8,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,q.width,q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,G)}else{const Ae=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let $=0;$<Ae.length;$++){const ee=Ae[$],ge=a.convert(ee.format,ee.colorSpace),xe=a.convert(ee.type),Ne=m(ee.internalFormat,ge,xe,ee.colorSpace),Fe=K(q);ce&&ie(q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Fe,Ne,q.width,q.height):ie(q)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Fe,Ne,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,Ne,q.width,q.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function pe(G,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,G),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(q.depthTexture).__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),k(q.depthTexture,0);const ce=r.get(q.depthTexture).__webglTexture,Ae=K(q);if(q.depthTexture.format===Rc)ie(q)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ce,0,Ae):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ce,0);else if(q.depthTexture.format===_d)ie(q)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ce,0,Ae):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ce,0);else throw new Error("Unknown depthTexture format")}function Me(G){const q=r.get(G),ce=G.isWebGLCubeRenderTarget===!0;if(G.depthTexture&&!q.__autoAllocateDepthBuffer){if(ce)throw new Error("target.depthTexture not supported in Cube render targets");pe(q.__webglFramebuffer,G)}else if(ce){q.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer[Ae]),q.__webglDepthbuffer[Ae]=n.createRenderbuffer(),De(q.__webglDepthbuffer[Ae],G,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer=n.createRenderbuffer(),De(q.__webglDepthbuffer,G,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function be(G,q,ce){const Ae=r.get(G);q!==void 0&&ye(Ae.__webglFramebuffer,G,G.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ce!==void 0&&Me(G)}function ne(G){const q=G.texture,ce=r.get(G),Ae=r.get(q);G.addEventListener("dispose",T),G.isWebGLMultipleRenderTargets!==!0&&(Ae.__webglTexture===void 0&&(Ae.__webglTexture=n.createTexture()),Ae.__version=q.version,o.memory.textures++);const $=G.isWebGLCubeRenderTarget===!0,ee=G.isWebGLMultipleRenderTargets===!0,ge=y(G)||s;if($){ce.__webglFramebuffer=[];for(let xe=0;xe<6;xe++)if(s&&q.mipmaps&&q.mipmaps.length>0){ce.__webglFramebuffer[xe]=[];for(let Ne=0;Ne<q.mipmaps.length;Ne++)ce.__webglFramebuffer[xe][Ne]=n.createFramebuffer()}else ce.__webglFramebuffer[xe]=n.createFramebuffer()}else{if(s&&q.mipmaps&&q.mipmaps.length>0){ce.__webglFramebuffer=[];for(let xe=0;xe<q.mipmaps.length;xe++)ce.__webglFramebuffer[xe]=n.createFramebuffer()}else ce.__webglFramebuffer=n.createFramebuffer();if(ee)if(i.drawBuffers){const xe=G.texture;for(let Ne=0,Fe=xe.length;Ne<Fe;Ne++){const qe=r.get(xe[Ne]);qe.__webglTexture===void 0&&(qe.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&G.samples>0&&ie(G)===!1){const xe=ee?q:[q];ce.__webglMultisampledFramebuffer=n.createFramebuffer(),ce.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ce.__webglMultisampledFramebuffer);for(let Ne=0;Ne<xe.length;Ne++){const Fe=xe[Ne];ce.__webglColorRenderbuffer[Ne]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ce.__webglColorRenderbuffer[Ne]);const qe=a.convert(Fe.format,Fe.colorSpace),ke=a.convert(Fe.type),it=m(Fe.internalFormat,qe,ke,Fe.colorSpace,G.isXRRenderTarget===!0),Ze=K(G);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ze,it,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ne,n.RENDERBUFFER,ce.__webglColorRenderbuffer[Ne])}n.bindRenderbuffer(n.RENDERBUFFER,null),G.depthBuffer&&(ce.__webglDepthRenderbuffer=n.createRenderbuffer(),De(ce.__webglDepthRenderbuffer,G,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if($){t.bindTexture(n.TEXTURE_CUBE_MAP,Ae.__webglTexture),Z(n.TEXTURE_CUBE_MAP,q,ge);for(let xe=0;xe<6;xe++)if(s&&q.mipmaps&&q.mipmaps.length>0)for(let Ne=0;Ne<q.mipmaps.length;Ne++)ye(ce.__webglFramebuffer[xe][Ne],G,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ne);else ye(ce.__webglFramebuffer[xe],G,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0);w(q,ge)&&b(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ee){const xe=G.texture;for(let Ne=0,Fe=xe.length;Ne<Fe;Ne++){const qe=xe[Ne],ke=r.get(qe);t.bindTexture(n.TEXTURE_2D,ke.__webglTexture),Z(n.TEXTURE_2D,qe,ge),ye(ce.__webglFramebuffer,G,qe,n.COLOR_ATTACHMENT0+Ne,n.TEXTURE_2D,0),w(qe,ge)&&b(n.TEXTURE_2D)}t.unbindTexture()}else{let xe=n.TEXTURE_2D;if((G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(s?xe=G.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(xe,Ae.__webglTexture),Z(xe,q,ge),s&&q.mipmaps&&q.mipmaps.length>0)for(let Ne=0;Ne<q.mipmaps.length;Ne++)ye(ce.__webglFramebuffer[Ne],G,q,n.COLOR_ATTACHMENT0,xe,Ne);else ye(ce.__webglFramebuffer,G,q,n.COLOR_ATTACHMENT0,xe,0);w(q,ge)&&b(xe),t.unbindTexture()}G.depthBuffer&&Me(G)}function Pe(G){const q=y(G)||s,ce=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let Ae=0,$=ce.length;Ae<$;Ae++){const ee=ce[Ae];if(w(ee,q)){const ge=G.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,xe=r.get(ee).__webglTexture;t.bindTexture(ge,xe),b(ge),t.unbindTexture()}}}function ze(G){if(s&&G.samples>0&&ie(G)===!1){const q=G.isWebGLMultipleRenderTargets?G.texture:[G.texture],ce=G.width,Ae=G.height;let $=n.COLOR_BUFFER_BIT;const ee=[],ge=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,xe=r.get(G),Ne=G.isWebGLMultipleRenderTargets===!0;if(Ne)for(let Fe=0;Fe<q.length;Fe++)t.bindFramebuffer(n.FRAMEBUFFER,xe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,xe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,xe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,xe.__webglFramebuffer);for(let Fe=0;Fe<q.length;Fe++){ee.push(n.COLOR_ATTACHMENT0+Fe),G.depthBuffer&&ee.push(ge);const qe=xe.__ignoreDepthValues!==void 0?xe.__ignoreDepthValues:!1;if(qe===!1&&(G.depthBuffer&&($|=n.DEPTH_BUFFER_BIT),G.stencilBuffer&&($|=n.STENCIL_BUFFER_BIT)),Ne&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,xe.__webglColorRenderbuffer[Fe]),qe===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[ge]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[ge])),Ne){const ke=r.get(q[Fe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ke,0)}n.blitFramebuffer(0,0,ce,Ae,0,0,ce,Ae,$,n.NEAREST),u&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ee)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ne)for(let Fe=0;Fe<q.length;Fe++){t.bindFramebuffer(n.FRAMEBUFFER,xe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,xe.__webglColorRenderbuffer[Fe]);const qe=r.get(q[Fe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,xe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,qe,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,xe.__webglMultisampledFramebuffer)}}function K(G){return Math.min(i.maxSamples,G.samples)}function ie(G){const q=r.get(G);return s&&G.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function _e(G){const q=o.render.frame;c.get(G)!==q&&(c.set(G,q),G.update())}function oe(G,q){const ce=G.colorSpace,Ae=G.format,$=G.type;return G.isCompressedTexture===!0||G.isVideoTexture===!0||G.format===HS||ce!==_l&&ce!==mo&&(Ln.getTransfer(ce)===tr?s===!1?e.has("EXT_sRGB")===!0&&Ae===ya?(G.format=HS,G.minFilter=sr,G.generateMipmaps=!1):q=yO.sRGBToLinear(q):(Ae!==ya||$!==gl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ce)),q}this.allocateTextureUnit=L,this.resetTextureUnits=U,this.setTexture2D=k,this.setTexture2DArray=P,this.setTexture3D=z,this.setTextureCube=B,this.rebindTextures=be,this.setupRenderTarget=ne,this.updateRenderTargetMipmap=Pe,this.updateMultisampleRenderTarget=ze,this.setupDepthRenderbuffer=Me,this.setupFrameBufferTexture=ye,this.useMultisampledRTT=ie}function YY(n,e,t){const r=t.isWebGL2;function i(a,o=mo){let s;const l=Ln.getTransfer(o);if(a===gl)return n.UNSIGNED_BYTE;if(a===lO)return n.UNSIGNED_SHORT_4_4_4_4;if(a===uO)return n.UNSIGNED_SHORT_5_5_5_1;if(a===pY)return n.BYTE;if(a===mY)return n.SHORT;if(a===p_)return n.UNSIGNED_SHORT;if(a===sO)return n.INT;if(a===iu)return n.UNSIGNED_INT;if(a===po)return n.FLOAT;if(a===Ed)return r?n.HALF_FLOAT:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(a===gY)return n.ALPHA;if(a===ya)return n.RGBA;if(a===vY)return n.LUMINANCE;if(a===yY)return n.LUMINANCE_ALPHA;if(a===Rc)return n.DEPTH_COMPONENT;if(a===_d)return n.DEPTH_STENCIL;if(a===HS)return s=e.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(a===bY)return n.RED;if(a===cO)return n.RED_INTEGER;if(a===xY)return n.RG;if(a===hO)return n.RG_INTEGER;if(a===dO)return n.RGBA_INTEGER;if(a===nw||a===rw||a===iw||a===aw)if(l===tr)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(a===nw)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===rw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===iw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===aw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(a===nw)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===rw)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===iw)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===aw)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===CD||a===AD||a===TD||a===MD)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(a===CD)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===AD)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===TD)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===MD)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===fO)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===DD||a===kD)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(a===DD)return l===tr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(a===kD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===ND||a===OD||a===PD||a===RD||a===ID||a===LD||a===FD||a===BD||a===zD||a===UD||a===jD||a===HD||a===VD||a===WD)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(a===ND)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===OD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===PD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===RD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===ID)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===LD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===FD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===BD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===zD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===UD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===jD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===HD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===VD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===WD)return l===tr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===ow||a===qD||a===GD)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(a===ow)return l===tr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(a===qD)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(a===GD)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(a===wY||a===$D||a===XD||a===YD)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(a===ow)return s.COMPRESSED_RED_RGTC1_EXT;if(a===$D)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===XD)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===YD)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===Pc?r?n.UNSIGNED_INT_24_8:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):n[a]!==void 0?n[a]:null}return{convert:i}}class ZY extends Nr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class hp extends _n{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Nze={type:"move"};class NA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new hp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new hp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new me,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new me),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new hp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new me,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new me),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,a=null,o=null;const s=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const v of e.hand.values()){const y=t.getJointPose(v,r),g=this._getHandJoint(u,v);y!==null&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=y.radius),g.visible=y!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],d=c.position.distanceTo(h.position),f=.02,p=.005;u.inputState.pinching&&d>f+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=f-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));s!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Nze)))}return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new hp;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const Oze=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Pze=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Rze{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Sr,a=e.properties.get(i);a.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}render(e,t){if(this.texture!==null){if(this.mesh===null){const r=t.cameras[0].viewport,i=new ts({extensions:{fragDepth:!0},vertexShader:Oze,fragmentShader:Pze,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Yr(new Im(20,20),i)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class Ize extends Tl{constructor(e,t){super();const r=this;let i=null,a=1,o=null,s="local-floor",l=1,u=null,c=null,h=null,d=null,f=null,p=null;const v=new Rze,y=t.getContextAttributes();let g=null,w=null;const b=[],m=[],x=new Qe;let S=null;const C=new Nr;C.layers.enable(1),C.viewport=new Bn;const T=new Nr;T.layers.enable(2),T.viewport=new Bn;const M=[C,T],A=new ZY;A.layers.enable(1),A.layers.enable(2);let D=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let fe=b[re];return fe===void 0&&(fe=new NA,b[re]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(re){let fe=b[re];return fe===void 0&&(fe=new NA,b[re]=fe),fe.getGripSpace()},this.getHand=function(re){let fe=b[re];return fe===void 0&&(fe=new NA,b[re]=fe),fe.getHandSpace()};function U(re){const fe=m.indexOf(re.inputSource);if(fe===-1)return;const se=b[fe];se!==void 0&&(se.update(re.inputSource,re.frame,u||o),se.dispatchEvent({type:re.type,data:re.inputSource}))}function L(){i.removeEventListener("select",U),i.removeEventListener("selectstart",U),i.removeEventListener("selectend",U),i.removeEventListener("squeeze",U),i.removeEventListener("squeezestart",U),i.removeEventListener("squeezeend",U),i.removeEventListener("end",L),i.removeEventListener("inputsourceschange",F);for(let re=0;re<b.length;re++){const fe=m[re];fe!==null&&(m[re]=null,b[re].disconnect(fe))}D=null,O=null,v.reset(),e.setRenderTarget(g),f=null,d=null,h=null,i=null,w=null,Z.stop(),r.isPresenting=!1,e.setPixelRatio(S),e.setSize(x.width,x.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){a=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){s=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(re){u=re},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(re){if(i=re,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",U),i.addEventListener("selectstart",U),i.addEventListener("selectend",U),i.addEventListener("squeeze",U),i.addEventListener("squeezestart",U),i.addEventListener("squeezeend",U),i.addEventListener("end",L),i.addEventListener("inputsourceschange",F),y.xrCompatible!==!0&&await t.makeXRCompatible(),S=e.getPixelRatio(),e.getSize(x),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const fe={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:a};f=new XRWebGLLayer(i,t,fe),i.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),w=new es(f.framebufferWidth,f.framebufferHeight,{format:ya,type:gl,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let fe=null,se=null,ye=null;y.depth&&(ye=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,fe=y.stencil?_d:Rc,se=y.stencil?Pc:iu);const De={colorFormat:t.RGBA8,depthFormat:ye,scaleFactor:a};h=new XRWebGLBinding(i,t),d=h.createProjectionLayer(De),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),w=new es(d.textureWidth,d.textureHeight,{format:ya,type:gl,depthTexture:new y_(d.textureWidth,d.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,fe),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const pe=e.properties.get(w);pe.__ignoreDepthValues=d.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(s),Z.setContext(i),Z.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function F(re){for(let fe=0;fe<re.removed.length;fe++){const se=re.removed[fe],ye=m.indexOf(se);ye>=0&&(m[ye]=null,b[ye].disconnect(se))}for(let fe=0;fe<re.added.length;fe++){const se=re.added[fe];let ye=m.indexOf(se);if(ye===-1){for(let pe=0;pe<b.length;pe++)if(pe>=m.length){m.push(se),ye=pe;break}else if(m[pe]===null){m[pe]=se,ye=pe;break}if(ye===-1)break}const De=b[ye];De&&De.connect(se)}}const k=new me,P=new me;function z(re,fe,se){k.setFromMatrixPosition(fe.matrixWorld),P.setFromMatrixPosition(se.matrixWorld);const ye=k.distanceTo(P),De=fe.projectionMatrix.elements,pe=se.projectionMatrix.elements,Me=De[14]/(De[10]-1),be=De[14]/(De[10]+1),ne=(De[9]+1)/De[5],Pe=(De[9]-1)/De[5],ze=(De[8]-1)/De[0],K=(pe[8]+1)/pe[0],ie=Me*ze,_e=Me*K,oe=ye/(-ze+K),G=oe*-ze;fe.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(G),re.translateZ(oe),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert();const q=Me+oe,ce=be+oe,Ae=ie-G,$=_e+(ye-G),ee=ne*be/ce*q,ge=Pe*be/ce*q;re.projectionMatrix.makePerspective(Ae,$,ee,ge,q,ce),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}function B(re,fe){fe===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(fe.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(i===null)return;v.texture!==null&&(re.near=v.depthNear,re.far=v.depthFar),A.near=T.near=C.near=re.near,A.far=T.far=C.far=re.far,(D!==A.near||O!==A.far)&&(i.updateRenderState({depthNear:A.near,depthFar:A.far}),D=A.near,O=A.far,C.near=D,C.far=O,T.near=D,T.far=O,C.updateProjectionMatrix(),T.updateProjectionMatrix(),re.updateProjectionMatrix());const fe=re.parent,se=A.cameras;B(A,fe);for(let ye=0;ye<se.length;ye++)B(se[ye],fe);se.length===2?z(A,C,T):A.projectionMatrix.copy(C.projectionMatrix),X(re,A,fe)};function X(re,fe,se){se===null?re.matrix.copy(fe.matrixWorld):(re.matrix.copy(se.matrixWorld),re.matrix.invert(),re.matrix.multiply(fe.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0),re.projectionMatrix.copy(fe.projectionMatrix),re.projectionMatrixInverse.copy(fe.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=Qp*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return A},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(re){l=re,d!==null&&(d.fixedFoveation=re),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=re)},this.hasDepthSensing=function(){return v.texture!==null};let J=null;function Q(re,fe){if(c=fe.getViewerPose(u||o),p=fe,c!==null){const se=c.views;f!==null&&(e.setRenderTargetFramebuffer(w,f.framebuffer),e.setRenderTarget(w));let ye=!1;se.length!==A.cameras.length&&(A.cameras.length=0,ye=!0);for(let pe=0;pe<se.length;pe++){const Me=se[pe];let be=null;if(f!==null)be=f.getViewport(Me);else{const Pe=h.getViewSubImage(d,Me);be=Pe.viewport,pe===0&&(e.setRenderTargetTextures(w,Pe.colorTexture,d.ignoreDepthValues?void 0:Pe.depthStencilTexture),e.setRenderTarget(w))}let ne=M[pe];ne===void 0&&(ne=new Nr,ne.layers.enable(pe),ne.viewport=new Bn,M[pe]=ne),ne.matrix.fromArray(Me.transform.matrix),ne.matrix.decompose(ne.position,ne.quaternion,ne.scale),ne.projectionMatrix.fromArray(Me.projectionMatrix),ne.projectionMatrixInverse.copy(ne.projectionMatrix).invert(),ne.viewport.set(be.x,be.y,be.width,be.height),pe===0&&(A.matrix.copy(ne.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),ye===!0&&A.cameras.push(ne)}const De=i.enabledFeatures;if(De&&De.includes("depth-sensing")){const pe=h.getDepthInformation(se[0]);pe&&pe.isValid&&pe.texture&&v.init(e,pe,i.renderState)}}for(let se=0;se<b.length;se++){const ye=m[se],De=b[se];ye!==null&&De!==void 0&&De.update(ye,fe,u||o)}v.render(e,A),J&&J(re,fe),fe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:fe}),p=null}const Z=new VY;Z.setAnimationLoop(Q),this.setAnimationLoop=function(re){J=re},this.dispose=function(){}}}function Lze(n,e){function t(y,g){y.matrixAutoUpdate===!0&&y.updateMatrix(),g.value.copy(y.matrix)}function r(y,g){g.color.getRGB(y.fogColor.value,zY(n)),g.isFog?(y.fogNear.value=g.near,y.fogFar.value=g.far):g.isFogExp2&&(y.fogDensity.value=g.density)}function i(y,g,w,b,m){g.isMeshBasicMaterial||g.isMeshLambertMaterial?a(y,g):g.isMeshToonMaterial?(a(y,g),h(y,g)):g.isMeshPhongMaterial?(a(y,g),c(y,g)):g.isMeshStandardMaterial?(a(y,g),d(y,g),g.isMeshPhysicalMaterial&&f(y,g,m)):g.isMeshMatcapMaterial?(a(y,g),p(y,g)):g.isMeshDepthMaterial?a(y,g):g.isMeshDistanceMaterial?(a(y,g),v(y,g)):g.isMeshNormalMaterial?a(y,g):g.isLineBasicMaterial?(o(y,g),g.isLineDashedMaterial&&s(y,g)):g.isPointsMaterial?l(y,g,w,b):g.isSpriteMaterial?u(y,g):g.isShadowMaterial?(y.color.value.copy(g.color),y.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function a(y,g){y.opacity.value=g.opacity,g.color&&y.diffuse.value.copy(g.color),g.emissive&&y.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.bumpMap&&(y.bumpMap.value=g.bumpMap,t(g.bumpMap,y.bumpMapTransform),y.bumpScale.value=g.bumpScale,g.side===_a&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,t(g.normalMap,y.normalMapTransform),y.normalScale.value.copy(g.normalScale),g.side===_a&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,t(g.displacementMap,y.displacementMapTransform),y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,y.emissiveMapTransform)),g.specularMap&&(y.specularMap.value=g.specularMap,t(g.specularMap,y.specularMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest);const w=e.get(g).envMap;if(w&&(y.envMap.value=w,y.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=g.reflectivity,y.ior.value=g.ior,y.refractionRatio.value=g.refractionRatio),g.lightMap){y.lightMap.value=g.lightMap;const b=n._useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=g.lightMapIntensity*b,t(g.lightMap,y.lightMapTransform)}g.aoMap&&(y.aoMap.value=g.aoMap,y.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,y.aoMapTransform))}function o(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform))}function s(y,g){y.dashSize.value=g.dashSize,y.totalSize.value=g.dashSize+g.gapSize,y.scale.value=g.scale}function l(y,g,w,b){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.size.value=g.size*w,y.scale.value=b*.5,g.map&&(y.map.value=g.map,t(g.map,y.uvTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function u(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.rotation.value=g.rotation,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function c(y,g){y.specular.value.copy(g.specular),y.shininess.value=Math.max(g.shininess,1e-4)}function h(y,g){g.gradientMap&&(y.gradientMap.value=g.gradientMap)}function d(y,g){y.metalness.value=g.metalness,g.metalnessMap&&(y.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,y.metalnessMapTransform)),y.roughness.value=g.roughness,g.roughnessMap&&(y.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,y.roughnessMapTransform)),e.get(g).envMap&&(y.envMapIntensity.value=g.envMapIntensity)}function f(y,g,w){y.ior.value=g.ior,g.sheen>0&&(y.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),y.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(y.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,y.sheenColorMapTransform)),g.sheenRoughnessMap&&(y.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,y.sheenRoughnessMapTransform))),g.clearcoat>0&&(y.clearcoat.value=g.clearcoat,y.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(y.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,y.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(y.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===_a&&y.clearcoatNormalScale.value.negate())),g.iridescence>0&&(y.iridescence.value=g.iridescence,y.iridescenceIOR.value=g.iridescenceIOR,y.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(y.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,y.iridescenceMapTransform)),g.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),g.transmission>0&&(y.transmission.value=g.transmission,y.transmissionSamplerMap.value=w.texture,y.transmissionSamplerSize.value.set(w.width,w.height),g.transmissionMap&&(y.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,y.transmissionMapTransform)),y.thickness.value=g.thickness,g.thicknessMap&&(y.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=g.attenuationDistance,y.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(y.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(y.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=g.specularIntensity,y.specularColor.value.copy(g.specularColor),g.specularColorMap&&(y.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,y.specularColorMapTransform)),g.specularIntensityMap&&(y.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,y.specularIntensityMapTransform))}function p(y,g){g.matcap&&(y.matcap.value=g.matcap)}function v(y,g){const w=e.get(g).light;y.referencePosition.value.setFromMatrixPosition(w.matrixWorld),y.nearDistance.value=w.shadow.camera.near,y.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Fze(n,e,t,r){let i={},a={},o=[];const s=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(w,b){const m=b.program;r.uniformBlockBinding(w,m)}function u(w,b){let m=i[w.id];m===void 0&&(p(w),m=c(w),i[w.id]=m,w.addEventListener("dispose",y));const x=b.program;r.updateUBOMapping(w,x);const S=e.render.frame;a[w.id]!==S&&(d(w),a[w.id]=S)}function c(w){const b=h();w.__bindingPointIndex=b;const m=n.createBuffer(),x=w.__size,S=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,m),n.bufferData(n.UNIFORM_BUFFER,x,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,m),m}function h(){for(let w=0;w<s;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(w){const b=i[w.id],m=w.uniforms,x=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let S=0,C=m.length;S<C;S++){const T=Array.isArray(m[S])?m[S]:[m[S]];for(let M=0,A=T.length;M<A;M++){const D=T[M];if(f(D,S,M,x)===!0){const O=D.__offset,U=Array.isArray(D.value)?D.value:[D.value];let L=0;for(let F=0;F<U.length;F++){const k=U[F],P=v(k);typeof k=="number"||typeof k=="boolean"?(D.__data[0]=k,n.bufferSubData(n.UNIFORM_BUFFER,O+L,D.__data)):k.isMatrix3?(D.__data[0]=k.elements[0],D.__data[1]=k.elements[1],D.__data[2]=k.elements[2],D.__data[3]=0,D.__data[4]=k.elements[3],D.__data[5]=k.elements[4],D.__data[6]=k.elements[5],D.__data[7]=0,D.__data[8]=k.elements[6],D.__data[9]=k.elements[7],D.__data[10]=k.elements[8],D.__data[11]=0):(k.toArray(D.__data,L),L+=P.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,O,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(w,b,m,x){const S=w.value,C=b+"_"+m;if(x[C]===void 0)return typeof S=="number"||typeof S=="boolean"?x[C]=S:x[C]=S.clone(),!0;{const T=x[C];if(typeof S=="number"||typeof S=="boolean"){if(T!==S)return x[C]=S,!0}else if(T.equals(S)===!1)return T.copy(S),!0}return!1}function p(w){const b=w.uniforms;let m=0;const x=16;for(let C=0,T=b.length;C<T;C++){const M=Array.isArray(b[C])?b[C]:[b[C]];for(let A=0,D=M.length;A<D;A++){const O=M[A],U=Array.isArray(O.value)?O.value:[O.value];for(let L=0,F=U.length;L<F;L++){const k=U[L],P=v(k),z=m%x;z!==0&&x-z<P.boundary&&(m+=x-z),O.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=m,m+=P.storage}}}const S=m%x;return S>0&&(m+=x-S),w.__size=m,w.__cache={},this}function v(w){const b={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(b.boundary=4,b.storage=4):w.isVector2?(b.boundary=8,b.storage=8):w.isVector3||w.isColor?(b.boundary=16,b.storage=12):w.isVector4?(b.boundary=16,b.storage=16):w.isMatrix3?(b.boundary=48,b.storage=48):w.isMatrix4?(b.boundary=64,b.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),b}function y(w){const b=w.target;b.removeEventListener("dispose",y);const m=o.indexOf(b.__bindingPointIndex);o.splice(m,1),n.deleteBuffer(i[b.id]),delete i[b.id],delete a[b.id]}function g(){for(const w in i)n.deleteBuffer(i[w]);o=[],i={},a={}}return{bind:l,update:u,dispose:g}}class CO{constructor(e={}){const{canvas:t=LY(),context:r=null,depth:i=!0,stencil:a=!0,alpha:o=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let d;r!==null?d=r.getContextAttributes().alpha:d=o;const f=new Uint32Array(4),p=new Int32Array(4);let v=null,y=null;const g=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ni,this._useLegacyLights=!1,this.toneMapping=ml,this.toneMappingExposure=1;const b=this;let m=!1,x=0,S=0,C=null,T=-1,M=null;const A=new Bn,D=new Bn;let O=null;const U=new wt(0);let L=0,F=t.width,k=t.height,P=1,z=null,B=null;const X=new Bn(0,0,F,k),J=new Bn(0,0,F,k);let Q=!1;const Z=new gy;let re=!1,fe=!1,se=null;const ye=new Yt,De=new Qe,pe=new me,Me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function be(){return C===null?P:1}let ne=r;function Pe(de,Ie){for(let je=0;je<de.length;je++){const Ve=de[je],We=t.getContext(Ve,Ie);if(We!==null)return We}return null}try{const de={alpha:!0,depth:i,stencil:a,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${h_}`),t.addEventListener("webglcontextlost",Je,!1),t.addEventListener("webglcontextrestored",he,!1),t.addEventListener("webglcontextcreationerror",Xe,!1),ne===null){const Ie=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&Ie.shift(),ne=Pe(Ie,de),ne===null)throw Pe(Ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ne instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ne.getShaderPrecisionFormat===void 0&&(ne.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(de){throw console.error("THREE.WebGLRenderer: "+de.message),de}let ze,K,ie,_e,oe,G,q,ce,Ae,$,ee,ge,xe,Ne,Fe,qe,ke,it,Ze,st,we,Re,et,V;function Ee(){ze=new X5e(ne),K=new H5e(ne,ze,e),ze.init(K),Re=new YY(ne,ze,K),ie=new Dze(ne,ze,K),_e=new J5e(ne),oe=new vze,G=new kze(ne,ze,ie,oe,K,Re,_e),q=new W5e(b),ce=new $5e(b),Ae=new a4e(ne,K),et=new U5e(ne,ze,Ae,K),$=new Y5e(ne,Ae,_e,et),ee=new tBe(ne,$,Ae,_e),Ze=new eBe(ne,K,G),qe=new V5e(oe),ge=new gze(b,q,ce,ze,K,et,qe),xe=new Lze(b,oe),Ne=new bze,Fe=new Cze(ze,K),it=new z5e(b,q,ce,ie,ee,d,l),ke=new Mze(b,ee,K),V=new Fze(ne,_e,K,ie),st=new j5e(ne,ze,_e,K),we=new Z5e(ne,ze,_e,K),_e.programs=ge.programs,b.capabilities=K,b.extensions=ze,b.properties=oe,b.renderLists=Ne,b.shadowMap=ke,b.state=ie,b.info=_e}Ee();const Le=new Ize(b,ne);this.xr=Le,this.getContext=function(){return ne},this.getContextAttributes=function(){return ne.getContextAttributes()},this.forceContextLoss=function(){const de=ze.get("WEBGL_lose_context");de&&de.loseContext()},this.forceContextRestore=function(){const de=ze.get("WEBGL_lose_context");de&&de.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(de){de!==void 0&&(P=de,this.setSize(F,k,!1))},this.getSize=function(de){return de.set(F,k)},this.setSize=function(de,Ie,je=!0){if(Le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=de,k=Ie,t.width=Math.floor(de*P),t.height=Math.floor(Ie*P),je===!0&&(t.style.width=de+"px",t.style.height=Ie+"px"),this.setViewport(0,0,de,Ie)},this.getDrawingBufferSize=function(de){return de.set(F*P,k*P).floor()},this.setDrawingBufferSize=function(de,Ie,je){F=de,k=Ie,P=je,t.width=Math.floor(de*je),t.height=Math.floor(Ie*je),this.setViewport(0,0,de,Ie)},this.getCurrentViewport=function(de){return de.copy(A)},this.getViewport=function(de){return de.copy(X)},this.setViewport=function(de,Ie,je,Ve){de.isVector4?X.set(de.x,de.y,de.z,de.w):X.set(de,Ie,je,Ve),ie.viewport(A.copy(X).multiplyScalar(P).floor())},this.getScissor=function(de){return de.copy(J)},this.setScissor=function(de,Ie,je,Ve){de.isVector4?J.set(de.x,de.y,de.z,de.w):J.set(de,Ie,je,Ve),ie.scissor(D.copy(J).multiplyScalar(P).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(de){ie.setScissorTest(Q=de)},this.setOpaqueSort=function(de){z=de},this.setTransparentSort=function(de){B=de},this.getClearColor=function(de){return de.copy(it.getClearColor())},this.setClearColor=function(){it.setClearColor.apply(it,arguments)},this.getClearAlpha=function(){return it.getClearAlpha()},this.setClearAlpha=function(){it.setClearAlpha.apply(it,arguments)},this.clear=function(de=!0,Ie=!0,je=!0){let Ve=0;if(de){let We=!1;if(C!==null){const dt=C.texture.format;We=dt===dO||dt===hO||dt===cO}if(We){const dt=C.texture.type,Tt=dt===gl||dt===iu||dt===p_||dt===Pc||dt===lO||dt===uO,kt=it.getClearColor(),ct=it.getClearAlpha(),Ot=kt.r,Ut=kt.g,Pt=kt.b;Tt?(f[0]=Ot,f[1]=Ut,f[2]=Pt,f[3]=ct,ne.clearBufferuiv(ne.COLOR,0,f)):(p[0]=Ot,p[1]=Ut,p[2]=Pt,p[3]=ct,ne.clearBufferiv(ne.COLOR,0,p))}else Ve|=ne.COLOR_BUFFER_BIT}Ie&&(Ve|=ne.DEPTH_BUFFER_BIT),je&&(Ve|=ne.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ne.clear(Ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Je,!1),t.removeEventListener("webglcontextrestored",he,!1),t.removeEventListener("webglcontextcreationerror",Xe,!1),Ne.dispose(),Fe.dispose(),oe.dispose(),q.dispose(),ce.dispose(),ee.dispose(),et.dispose(),V.dispose(),ge.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",He),Le.removeEventListener("sessionend",$e),se&&(se.dispose(),se=null),nt.stop()};function Je(de){de.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function he(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const de=_e.autoReset,Ie=ke.enabled,je=ke.autoUpdate,Ve=ke.needsUpdate,We=ke.type;Ee(),_e.autoReset=de,ke.enabled=Ie,ke.autoUpdate=je,ke.needsUpdate=Ve,ke.type=We}function Xe(de){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",de.statusMessage)}function H(de){const Ie=de.target;Ie.removeEventListener("dispose",H),te(Ie)}function te(de){le(de),oe.remove(de)}function le(de){const Ie=oe.get(de).programs;Ie!==void 0&&(Ie.forEach(function(je){ge.releaseProgram(je)}),de.isShaderMaterial&&ge.releaseShaderCache(de))}this.renderBufferDirect=function(de,Ie,je,Ve,We,dt){Ie===null&&(Ie=Me);const Tt=We.isMesh&&We.matrixWorld.determinant()<0,kt=Bs(de,Ie,je,Ve,We);ie.setMaterial(Ve,Tt);let ct=je.index,Ot=1;if(Ve.wireframe===!0){if(ct=$.getWireframeAttribute(je),ct===void 0)return;Ot=2}const Ut=je.drawRange,Pt=je.attributes.position;let Qn=Ut.start*Ot,qn=(Ut.start+Ut.count)*Ot;dt!==null&&(Qn=Math.max(Qn,dt.start*Ot),qn=Math.min(qn,(dt.start+dt.count)*Ot)),ct!==null?(Qn=Math.max(Qn,0),qn=Math.min(qn,ct.count)):Pt!=null&&(Qn=Math.max(Qn,0),qn=Math.min(qn,Pt.count));const Rr=qn-Qn;if(Rr<0||Rr===1/0)return;et.setup(We,Ve,kt,je,ct);let yn,Xt=st;if(ct!==null&&(yn=Ae.get(ct),Xt=we,Xt.setIndex(yn)),We.isMesh)Ve.wireframe===!0?(ie.setLineWidth(Ve.wireframeLinewidth*be()),Xt.setMode(ne.LINES)):Xt.setMode(ne.TRIANGLES);else if(We.isLine){let Zt=Ve.linewidth;Zt===void 0&&(Zt=1),ie.setLineWidth(Zt*be()),We.isLineSegments?Xt.setMode(ne.LINES):We.isLineLoop?Xt.setMode(ne.LINE_LOOP):Xt.setMode(ne.LINE_STRIP)}else We.isPoints?Xt.setMode(ne.POINTS):We.isSprite&&Xt.setMode(ne.TRIANGLES);if(We.isBatchedMesh)Xt.renderMultiDraw(We._multiDrawStarts,We._multiDrawCounts,We._multiDrawCount);else if(We.isInstancedMesh)Xt.renderInstances(Qn,Rr,We.count);else if(je.isInstancedBufferGeometry){const Zt=je._maxInstanceCount!==void 0?je._maxInstanceCount:1/0,Hr=Math.min(je.instanceCount,Zt);Xt.renderInstances(Qn,Rr,Hr)}else Xt.render(Qn,Rr)};function ve(de,Ie,je){de.transparent===!0&&de.side===xs&&de.forceSinglePass===!1?(de.side=_a,de.needsUpdate=!0,Pr(de,Ie,je),de.side=Eu,de.needsUpdate=!0,Pr(de,Ie,je),de.side=xs):Pr(de,Ie,je)}this.compile=function(de,Ie,je=null){je===null&&(je=de),y=Fe.get(je),y.init(),w.push(y),je.traverseVisible(function(We){We.isLight&&We.layers.test(Ie.layers)&&(y.pushLight(We),We.castShadow&&y.pushShadow(We))}),de!==je&&de.traverseVisible(function(We){We.isLight&&We.layers.test(Ie.layers)&&(y.pushLight(We),We.castShadow&&y.pushShadow(We))}),y.setupLights(b._useLegacyLights);const Ve=new Set;return de.traverse(function(We){const dt=We.material;if(dt)if(Array.isArray(dt))for(let Tt=0;Tt<dt.length;Tt++){const kt=dt[Tt];ve(kt,je,We),Ve.add(kt)}else ve(dt,je,We),Ve.add(dt)}),w.pop(),y=null,Ve},this.compileAsync=function(de,Ie,je=null){const Ve=this.compile(de,Ie,je);return new Promise(We=>{function dt(){if(Ve.forEach(function(Tt){oe.get(Tt).currentProgram.isReady()&&Ve.delete(Tt)}),Ve.size===0){We(de);return}setTimeout(dt,10)}ze.get("KHR_parallel_shader_compile")!==null?dt():setTimeout(dt,10)})};let Ce=null;function Oe(de){Ce&&Ce(de)}function He(){nt.stop()}function $e(){nt.start()}const nt=new VY;nt.setAnimationLoop(Oe),typeof self<"u"&&nt.setContext(self),this.setAnimationLoop=function(de){Ce=de,Le.setAnimationLoop(de),de===null?nt.stop():nt.start()},Le.addEventListener("sessionstart",He),Le.addEventListener("sessionend",$e),this.render=function(de,Ie){if(Ie!==void 0&&Ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;de.matrixWorldAutoUpdate===!0&&de.updateMatrixWorld(),Ie.parent===null&&Ie.matrixWorldAutoUpdate===!0&&Ie.updateMatrixWorld(),Le.enabled===!0&&Le.isPresenting===!0&&(Le.cameraAutoUpdate===!0&&Le.updateCamera(Ie),Ie=Le.getCamera()),de.isScene===!0&&de.onBeforeRender(b,de,Ie,C),y=Fe.get(de,w.length),y.init(),w.push(y),ye.multiplyMatrices(Ie.projectionMatrix,Ie.matrixWorldInverse),Z.setFromProjectionMatrix(ye),fe=this.localClippingEnabled,re=qe.init(this.clippingPlanes,fe),v=Ne.get(de,g.length),v.init(),g.push(v),ft(de,Ie,0,b.sortObjects),v.finish(),b.sortObjects===!0&&v.sort(z,B),this.info.render.frame++,re===!0&&qe.beginShadows();const je=y.state.shadowsArray;if(ke.render(je,de,Ie),re===!0&&qe.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Le.enabled===!1||Le.isPresenting===!1||Le.hasDepthSensing()===!1)&&it.render(v,de),y.setupLights(b._useLegacyLights),Ie.isArrayCamera){const Ve=Ie.cameras;for(let We=0,dt=Ve.length;We<dt;We++){const Tt=Ve[We];Et(v,de,Tt,Tt.viewport)}}else Et(v,de,Ie);C!==null&&(G.updateMultisampleRenderTarget(C),G.updateRenderTargetMipmap(C)),de.isScene===!0&&de.onAfterRender(b,de,Ie),et.resetDefaultState(),T=-1,M=null,w.pop(),w.length>0?y=w[w.length-1]:y=null,g.pop(),g.length>0?v=g[g.length-1]:v=null};function ft(de,Ie,je,Ve){if(de.visible===!1)return;if(de.layers.test(Ie.layers)){if(de.isGroup)je=de.renderOrder;else if(de.isLOD)de.autoUpdate===!0&&de.update(Ie);else if(de.isLight)y.pushLight(de),de.castShadow&&y.pushShadow(de);else if(de.isSprite){if(!de.frustumCulled||Z.intersectsSprite(de)){Ve&&pe.setFromMatrixPosition(de.matrixWorld).applyMatrix4(ye);const dt=ee.update(de),Tt=de.material;Tt.visible&&v.push(de,dt,Tt,je,pe.z,null)}}else if((de.isMesh||de.isLine||de.isPoints)&&(!de.frustumCulled||Z.intersectsObject(de))){const dt=ee.update(de),Tt=de.material;if(Ve&&(de.boundingSphere!==void 0?(de.boundingSphere===null&&de.computeBoundingSphere(),pe.copy(de.boundingSphere.center)):(dt.boundingSphere===null&&dt.computeBoundingSphere(),pe.copy(dt.boundingSphere.center)),pe.applyMatrix4(de.matrixWorld).applyMatrix4(ye)),Array.isArray(Tt)){const kt=dt.groups;for(let ct=0,Ot=kt.length;ct<Ot;ct++){const Ut=kt[ct],Pt=Tt[Ut.materialIndex];Pt&&Pt.visible&&v.push(de,dt,Pt,je,pe.z,Ut)}}else Tt.visible&&v.push(de,dt,Tt,je,pe.z,null)}}const We=de.children;for(let dt=0,Tt=We.length;dt<Tt;dt++)ft(We[dt],Ie,je,Ve)}function Et(de,Ie,je,Ve){const We=de.opaque,dt=de.transmissive,Tt=de.transparent;y.setupLightsView(je),re===!0&&qe.setGlobalState(b.clippingPlanes,je),dt.length>0&&rt(We,dt,Ie,je),Ve&&ie.viewport(A.copy(Ve)),We.length>0&&xt(We,Ie,je),dt.length>0&&xt(dt,Ie,je),Tt.length>0&&xt(Tt,Ie,je),ie.buffers.depth.setTest(!0),ie.buffers.depth.setMask(!0),ie.buffers.color.setMask(!0),ie.setPolygonOffset(!1)}function rt(de,Ie,je,Ve){if((je.isScene===!0?je.overrideMaterial:null)!==null)return;const We=K.isWebGL2;se===null&&(se=new es(1,1,{generateMipmaps:!0,type:ze.has("EXT_color_buffer_half_float")?Ed:gl,minFilter:sl,samples:We?4:0})),b.getDrawingBufferSize(De),We?se.setSize(De.x,De.y):se.setSize(VS(De.x),VS(De.y));const dt=b.getRenderTarget();b.setRenderTarget(se),b.getClearColor(U),L=b.getClearAlpha(),L<1&&b.setClearColor(16777215,.5),b.clear();const Tt=b.toneMapping;b.toneMapping=ml,xt(de,je,Ve),G.updateMultisampleRenderTarget(se),G.updateRenderTargetMipmap(se);let kt=!1;for(let ct=0,Ot=Ie.length;ct<Ot;ct++){const Ut=Ie[ct],Pt=Ut.object,Qn=Ut.geometry,qn=Ut.material,Rr=Ut.group;if(qn.side===xs&&Pt.layers.test(Ve.layers)){const yn=qn.side;qn.side=_a,qn.needsUpdate=!0,$t(Pt,je,Ve,Qn,qn,Rr),qn.side=yn,qn.needsUpdate=!0,kt=!0}}kt===!0&&(G.updateMultisampleRenderTarget(se),G.updateRenderTargetMipmap(se)),b.setRenderTarget(dt),b.setClearColor(U,L),b.toneMapping=Tt}function xt(de,Ie,je){const Ve=Ie.isScene===!0?Ie.overrideMaterial:null;for(let We=0,dt=de.length;We<dt;We++){const Tt=de[We],kt=Tt.object,ct=Tt.geometry,Ot=Ve===null?Tt.material:Ve,Ut=Tt.group;kt.layers.test(je.layers)&&$t(kt,Ie,je,ct,Ot,Ut)}}function $t(de,Ie,je,Ve,We,dt){de.onBeforeRender(b,Ie,je,Ve,We,dt),de.modelViewMatrix.multiplyMatrices(je.matrixWorldInverse,de.matrixWorld),de.normalMatrix.getNormalMatrix(de.modelViewMatrix),We.onBeforeRender(b,Ie,je,Ve,de,dt),We.transparent===!0&&We.side===xs&&We.forceSinglePass===!1?(We.side=_a,We.needsUpdate=!0,b.renderBufferDirect(je,Ie,Ve,We,de,dt),We.side=Eu,We.needsUpdate=!0,b.renderBufferDirect(je,Ie,Ve,We,de,dt),We.side=xs):b.renderBufferDirect(je,Ie,Ve,We,de,dt),de.onAfterRender(b,Ie,je,Ve,We,dt)}function Pr(de,Ie,je){Ie.isScene!==!0&&(Ie=Me);const Ve=oe.get(de),We=y.state.lights,dt=y.state.shadowsArray,Tt=We.state.version,kt=ge.getParameters(de,We.state,dt,Ie,je),ct=ge.getProgramCacheKey(kt);let Ot=Ve.programs;Ve.environment=de.isMeshStandardMaterial?Ie.environment:null,Ve.fog=Ie.fog,Ve.envMap=(de.isMeshStandardMaterial?ce:q).get(de.envMap||Ve.environment),Ot===void 0&&(de.addEventListener("dispose",H),Ot=new Map,Ve.programs=Ot);let Ut=Ot.get(ct);if(Ut!==void 0){if(Ve.currentProgram===Ut&&Ve.lightsStateVersion===Tt)return Kn(de,kt),Ut}else kt.uniforms=ge.getUniforms(de),de.onBuild(je,kt,b),de.onBeforeCompile(kt,b),Ut=ge.acquireProgram(kt,ct),Ot.set(ct,Ut),Ve.uniforms=kt.uniforms;const Pt=Ve.uniforms;return(!de.isShaderMaterial&&!de.isRawShaderMaterial||de.clipping===!0)&&(Pt.clippingPlanes=qe.uniform),Kn(de,kt),Ve.needsLights=xi(de),Ve.lightsStateVersion=Tt,Ve.needsLights&&(Pt.ambientLightColor.value=We.state.ambient,Pt.lightProbe.value=We.state.probe,Pt.directionalLights.value=We.state.directional,Pt.directionalLightShadows.value=We.state.directionalShadow,Pt.spotLights.value=We.state.spot,Pt.spotLightShadows.value=We.state.spotShadow,Pt.rectAreaLights.value=We.state.rectArea,Pt.ltc_1.value=We.state.rectAreaLTC1,Pt.ltc_2.value=We.state.rectAreaLTC2,Pt.pointLights.value=We.state.point,Pt.pointLightShadows.value=We.state.pointShadow,Pt.hemisphereLights.value=We.state.hemi,Pt.directionalShadowMap.value=We.state.directionalShadowMap,Pt.directionalShadowMatrix.value=We.state.directionalShadowMatrix,Pt.spotShadowMap.value=We.state.spotShadowMap,Pt.spotLightMatrix.value=We.state.spotLightMatrix,Pt.spotLightMap.value=We.state.spotLightMap,Pt.pointShadowMap.value=We.state.pointShadowMap,Pt.pointShadowMatrix.value=We.state.pointShadowMatrix),Ve.currentProgram=Ut,Ve.uniformsList=null,Ut}function Cr(de){if(de.uniformsList===null){const Ie=de.currentProgram.getUniforms();de.uniformsList=lw.seqWithValue(Ie.seq,de.uniforms)}return de.uniformsList}function Kn(de,Ie){const je=oe.get(de);je.outputColorSpace=Ie.outputColorSpace,je.batching=Ie.batching,je.instancing=Ie.instancing,je.instancingColor=Ie.instancingColor,je.skinning=Ie.skinning,je.morphTargets=Ie.morphTargets,je.morphNormals=Ie.morphNormals,je.morphColors=Ie.morphColors,je.morphTargetsCount=Ie.morphTargetsCount,je.numClippingPlanes=Ie.numClippingPlanes,je.numIntersection=Ie.numClipIntersection,je.vertexAlphas=Ie.vertexAlphas,je.vertexTangents=Ie.vertexTangents,je.toneMapping=Ie.toneMapping}function Bs(de,Ie,je,Ve,We){Ie.isScene!==!0&&(Ie=Me),G.resetTextureUnits();const dt=Ie.fog,Tt=Ve.isMeshStandardMaterial?Ie.environment:null,kt=C===null?b.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:_l,ct=(Ve.isMeshStandardMaterial?ce:q).get(Ve.envMap||Tt),Ot=Ve.vertexColors===!0&&!!je.attributes.color&&je.attributes.color.itemSize===4,Ut=!!je.attributes.tangent&&(!!Ve.normalMap||Ve.anisotropy>0),Pt=!!je.morphAttributes.position,Qn=!!je.morphAttributes.normal,qn=!!je.morphAttributes.color;let Rr=ml;Ve.toneMapped&&(C===null||C.isXRRenderTarget===!0)&&(Rr=b.toneMapping);const yn=je.morphAttributes.position||je.morphAttributes.normal||je.morphAttributes.color,Xt=yn!==void 0?yn.length:0,Zt=oe.get(Ve),Hr=y.state.lights;if(re===!0&&(fe===!0||de!==M)){const la=de===M&&Ve.id===T;qe.setState(Ve,de,la)}let ci=!1;Ve.version===Zt.__version?(Zt.needsLights&&Zt.lightsStateVersion!==Hr.state.version||Zt.outputColorSpace!==kt||We.isBatchedMesh&&Zt.batching===!1||!We.isBatchedMesh&&Zt.batching===!0||We.isInstancedMesh&&Zt.instancing===!1||!We.isInstancedMesh&&Zt.instancing===!0||We.isSkinnedMesh&&Zt.skinning===!1||!We.isSkinnedMesh&&Zt.skinning===!0||We.isInstancedMesh&&Zt.instancingColor===!0&&We.instanceColor===null||We.isInstancedMesh&&Zt.instancingColor===!1&&We.instanceColor!==null||Zt.envMap!==ct||Ve.fog===!0&&Zt.fog!==dt||Zt.numClippingPlanes!==void 0&&(Zt.numClippingPlanes!==qe.numPlanes||Zt.numIntersection!==qe.numIntersection)||Zt.vertexAlphas!==Ot||Zt.vertexTangents!==Ut||Zt.morphTargets!==Pt||Zt.morphNormals!==Qn||Zt.morphColors!==qn||Zt.toneMapping!==Rr||K.isWebGL2===!0&&Zt.morphTargetsCount!==Xt)&&(ci=!0):(ci=!0,Zt.__version=Ve.version);let sa=Zt.currentProgram;ci===!0&&(sa=Pr(Ve,Ie,We));let Ol=!1,Vr=!1,Lu=!1;const Jr=sa.getUniforms(),zs=Zt.uniforms;if(ie.useProgram(sa.program)&&(Ol=!0,Vr=!0,Lu=!0),Ve.id!==T&&(T=Ve.id,Vr=!0),Ol||M!==de){Jr.setValue(ne,"projectionMatrix",de.projectionMatrix),Jr.setValue(ne,"viewMatrix",de.matrixWorldInverse);const la=Jr.map.cameraPosition;la!==void 0&&la.setValue(ne,pe.setFromMatrixPosition(de.matrixWorld)),K.logarithmicDepthBuffer&&Jr.setValue(ne,"logDepthBufFC",2/(Math.log(de.far+1)/Math.LN2)),(Ve.isMeshPhongMaterial||Ve.isMeshToonMaterial||Ve.isMeshLambertMaterial||Ve.isMeshBasicMaterial||Ve.isMeshStandardMaterial||Ve.isShaderMaterial)&&Jr.setValue(ne,"isOrthographic",de.isOrthographicCamera===!0),M!==de&&(M=de,Vr=!0,Lu=!0)}if(We.isSkinnedMesh){Jr.setOptional(ne,We,"bindMatrix"),Jr.setOptional(ne,We,"bindMatrixInverse");const la=We.skeleton;la&&(K.floatVertexTextures?(la.boneTexture===null&&la.computeBoneTexture(),Jr.setValue(ne,"boneTexture",la.boneTexture,G)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}We.isBatchedMesh&&(Jr.setOptional(ne,We,"batchingTexture"),Jr.setValue(ne,"batchingTexture",We._matricesTexture,G));const Fu=je.morphAttributes;if((Fu.position!==void 0||Fu.normal!==void 0||Fu.color!==void 0&&K.isWebGL2===!0)&&Ze.update(We,je,sa),(Vr||Zt.receiveShadow!==We.receiveShadow)&&(Zt.receiveShadow=We.receiveShadow,Jr.setValue(ne,"receiveShadow",We.receiveShadow)),Ve.isMeshGouraudMaterial&&Ve.envMap!==null&&(zs.envMap.value=ct,zs.flipEnvMap.value=ct.isCubeTexture&&ct.isRenderTargetTexture===!1?-1:1),Vr&&(Jr.setValue(ne,"toneMappingExposure",b.toneMappingExposure),Zt.needsLights&&Iu(zs,Lu),dt&&Ve.fog===!0&&xe.refreshFogUniforms(zs,dt),xe.refreshMaterialUniforms(zs,Ve,P,k,se),lw.upload(ne,Cr(Zt),zs,G)),Ve.isShaderMaterial&&Ve.uniformsNeedUpdate===!0&&(lw.upload(ne,Cr(Zt),zs,G),Ve.uniformsNeedUpdate=!1),Ve.isSpriteMaterial&&Jr.setValue(ne,"center",We.center),Jr.setValue(ne,"modelViewMatrix",We.modelViewMatrix),Jr.setValue(ne,"normalMatrix",We.normalMatrix),Jr.setValue(ne,"modelMatrix",We.matrixWorld),Ve.isShaderMaterial||Ve.isRawShaderMaterial){const la=Ve.uniformsGroups;for(let ua=0,e2=la.length;ua<e2;ua++)if(K.isWebGL2){const ky=la[ua];V.update(ky,sa),V.bind(ky,sa)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return sa}function Iu(de,Ie){de.ambientLightColor.needsUpdate=Ie,de.lightProbe.needsUpdate=Ie,de.directionalLights.needsUpdate=Ie,de.directionalLightShadows.needsUpdate=Ie,de.pointLights.needsUpdate=Ie,de.pointLightShadows.needsUpdate=Ie,de.spotLights.needsUpdate=Ie,de.spotLightShadows.needsUpdate=Ie,de.rectAreaLights.needsUpdate=Ie,de.hemisphereLights.needsUpdate=Ie}function xi(de){return de.isMeshLambertMaterial||de.isMeshToonMaterial||de.isMeshPhongMaterial||de.isMeshStandardMaterial||de.isShadowMaterial||de.isShaderMaterial&&de.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(de,Ie,je){oe.get(de.texture).__webglTexture=Ie,oe.get(de.depthTexture).__webglTexture=je;const Ve=oe.get(de);Ve.__hasExternalTextures=!0,Ve.__hasExternalTextures&&(Ve.__autoAllocateDepthBuffer=je===void 0,Ve.__autoAllocateDepthBuffer||ze.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ve.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(de,Ie){const je=oe.get(de);je.__webglFramebuffer=Ie,je.__useDefaultFramebuffer=Ie===void 0},this.setRenderTarget=function(de,Ie=0,je=0){C=de,x=Ie,S=je;let Ve=!0,We=null,dt=!1,Tt=!1;if(de){const kt=oe.get(de);kt.__useDefaultFramebuffer!==void 0?(ie.bindFramebuffer(ne.FRAMEBUFFER,null),Ve=!1):kt.__webglFramebuffer===void 0?G.setupRenderTarget(de):kt.__hasExternalTextures&&G.rebindTextures(de,oe.get(de.texture).__webglTexture,oe.get(de.depthTexture).__webglTexture);const ct=de.texture;(ct.isData3DTexture||ct.isDataArrayTexture||ct.isCompressedArrayTexture)&&(Tt=!0);const Ot=oe.get(de).__webglFramebuffer;de.isWebGLCubeRenderTarget?(Array.isArray(Ot[Ie])?We=Ot[Ie][je]:We=Ot[Ie],dt=!0):K.isWebGL2&&de.samples>0&&G.useMultisampledRTT(de)===!1?We=oe.get(de).__webglMultisampledFramebuffer:Array.isArray(Ot)?We=Ot[je]:We=Ot,A.copy(de.viewport),D.copy(de.scissor),O=de.scissorTest}else A.copy(X).multiplyScalar(P).floor(),D.copy(J).multiplyScalar(P).floor(),O=Q;if(ie.bindFramebuffer(ne.FRAMEBUFFER,We)&&K.drawBuffers&&Ve&&ie.drawBuffers(de,We),ie.viewport(A),ie.scissor(D),ie.setScissorTest(O),dt){const kt=oe.get(de.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,kt.__webglTexture,je)}else if(Tt){const kt=oe.get(de.texture),ct=Ie||0;ne.framebufferTextureLayer(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,kt.__webglTexture,je||0,ct)}T=-1},this.readRenderTargetPixels=function(de,Ie,je,Ve,We,dt,Tt){if(!(de&&de.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let kt=oe.get(de).__webglFramebuffer;if(de.isWebGLCubeRenderTarget&&Tt!==void 0&&(kt=kt[Tt]),kt){ie.bindFramebuffer(ne.FRAMEBUFFER,kt);try{const ct=de.texture,Ot=ct.format,Ut=ct.type;if(Ot!==ya&&Re.convert(Ot)!==ne.getParameter(ne.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Pt=Ut===Ed&&(ze.has("EXT_color_buffer_half_float")||K.isWebGL2&&ze.has("EXT_color_buffer_float"));if(Ut!==gl&&Re.convert(Ut)!==ne.getParameter(ne.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ut===po&&(K.isWebGL2||ze.has("OES_texture_float")||ze.has("WEBGL_color_buffer_float")))&&!Pt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ie>=0&&Ie<=de.width-Ve&&je>=0&&je<=de.height-We&&ne.readPixels(Ie,je,Ve,We,Re.convert(Ot),Re.convert(Ut),dt)}finally{const ct=C!==null?oe.get(C).__webglFramebuffer:null;ie.bindFramebuffer(ne.FRAMEBUFFER,ct)}}},this.copyFramebufferToTexture=function(de,Ie,je=0){const Ve=Math.pow(2,-je),We=Math.floor(Ie.image.width*Ve),dt=Math.floor(Ie.image.height*Ve);G.setTexture2D(Ie,0),ne.copyTexSubImage2D(ne.TEXTURE_2D,je,0,0,de.x,de.y,We,dt),ie.unbindTexture()},this.copyTextureToTexture=function(de,Ie,je,Ve=0){const We=Ie.image.width,dt=Ie.image.height,Tt=Re.convert(je.format),kt=Re.convert(je.type);G.setTexture2D(je,0),ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,je.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,je.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,je.unpackAlignment),Ie.isDataTexture?ne.texSubImage2D(ne.TEXTURE_2D,Ve,de.x,de.y,We,dt,Tt,kt,Ie.image.data):Ie.isCompressedTexture?ne.compressedTexSubImage2D(ne.TEXTURE_2D,Ve,de.x,de.y,Ie.mipmaps[0].width,Ie.mipmaps[0].height,Tt,Ie.mipmaps[0].data):ne.texSubImage2D(ne.TEXTURE_2D,Ve,de.x,de.y,Tt,kt,Ie.image),Ve===0&&je.generateMipmaps&&ne.generateMipmap(ne.TEXTURE_2D),ie.unbindTexture()},this.copyTextureToTexture3D=function(de,Ie,je,Ve,We=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const dt=de.max.x-de.min.x+1,Tt=de.max.y-de.min.y+1,kt=de.max.z-de.min.z+1,ct=Re.convert(Ve.format),Ot=Re.convert(Ve.type);let Ut;if(Ve.isData3DTexture)G.setTexture3D(Ve,0),Ut=ne.TEXTURE_3D;else if(Ve.isDataArrayTexture||Ve.isCompressedArrayTexture)G.setTexture2DArray(Ve,0),Ut=ne.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,Ve.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ve.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,Ve.unpackAlignment);const Pt=ne.getParameter(ne.UNPACK_ROW_LENGTH),Qn=ne.getParameter(ne.UNPACK_IMAGE_HEIGHT),qn=ne.getParameter(ne.UNPACK_SKIP_PIXELS),Rr=ne.getParameter(ne.UNPACK_SKIP_ROWS),yn=ne.getParameter(ne.UNPACK_SKIP_IMAGES),Xt=je.isCompressedTexture?je.mipmaps[We]:je.image;ne.pixelStorei(ne.UNPACK_ROW_LENGTH,Xt.width),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,Xt.height),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,de.min.x),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,de.min.y),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,de.min.z),je.isDataTexture||je.isData3DTexture?ne.texSubImage3D(Ut,We,Ie.x,Ie.y,Ie.z,dt,Tt,kt,ct,Ot,Xt.data):je.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ne.compressedTexSubImage3D(Ut,We,Ie.x,Ie.y,Ie.z,dt,Tt,kt,ct,Xt.data)):ne.texSubImage3D(Ut,We,Ie.x,Ie.y,Ie.z,dt,Tt,kt,ct,Ot,Xt),ne.pixelStorei(ne.UNPACK_ROW_LENGTH,Pt),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,Qn),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,qn),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,Rr),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,yn),We===0&&Ve.generateMipmaps&&ne.generateMipmap(Ut),ie.unbindTexture()},this.initTexture=function(de){de.isCubeTexture?G.setTextureCube(de,0):de.isData3DTexture?G.setTexture3D(de,0):de.isDataArrayTexture||de.isCompressedArrayTexture?G.setTexture2DArray(de,0):G.setTexture2D(de,0),ie.unbindTexture()},this.resetState=function(){x=0,S=0,C=null,ie.reset(),et.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ll}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===g_?"display-p3":"srgb",t.unpackColorSpace=Ln.workingColorSpace===dy?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ni?Ic:mO}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ic?ni:_l}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class JY extends CO{}JY.prototype.isWebGL1Renderer=!0;class x_{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new wt(e),this.density=t}clone(){return new x_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class w_{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new wt(e),this.near=t,this.far=r}clone(){return new w_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class bv extends _n{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class S_{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=gv,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=So()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return ud("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=So()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=So()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fa=new me;class Cd{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)fa.fromBufferAttribute(this,t),fa.applyMatrix4(e),this.setXYZ(t,fa.x,fa.y,fa.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)fa.fromBufferAttribute(this,t),fa.applyNormalMatrix(e),this.setXYZ(t,fa.x,fa.y,fa.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)fa.fromBufferAttribute(this,t),fa.transformDirection(e),this.setXYZ(t,fa.x,fa.y,fa.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=ba(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ln(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ba(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ba(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ba(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ba(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),a=ln(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new Hn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Cd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class AO extends Li{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new wt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Df;const Ag=new me,kf=new me,Nf=new me,Of=new Qe,Tg=new Qe,KY=new Yt,Bb=new me,Mg=new me,zb=new me,RU=new Qe,OA=new Qe,IU=new Qe;class QY extends _n{constructor(e=new AO){if(super(),this.isSprite=!0,this.type="Sprite",Df===void 0){Df=new sn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new S_(t,5);Df.setIndex([0,1,2,0,2,3]),Df.setAttribute("position",new Cd(r,3,0,!1)),Df.setAttribute("uv",new Cd(r,2,3,!1))}this.geometry=Df,this.material=e,this.center=new Qe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),kf.setFromMatrixScale(this.matrixWorld),KY.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Nf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&kf.multiplyScalar(-Nf.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const o=this.center;Ub(Bb.set(-.5,-.5,0),Nf,o,kf,i,a),Ub(Mg.set(.5,-.5,0),Nf,o,kf,i,a),Ub(zb.set(.5,.5,0),Nf,o,kf,i,a),RU.set(0,0),OA.set(1,0),IU.set(1,1);let s=e.ray.intersectTriangle(Bb,Mg,zb,!1,Ag);if(s===null&&(Ub(Mg.set(-.5,.5,0),Nf,o,kf,i,a),OA.set(0,1),s=e.ray.intersectTriangle(Bb,zb,Mg,!1,Ag),s===null))return;const l=e.ray.origin.distanceTo(Ag);l<e.near||l>e.far||t.push({distance:l,point:Ag.clone(),uv:go.getInterpolation(Ag,Bb,Mg,zb,RU,OA,IU,new Qe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Ub(n,e,t,r,i,a){Of.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Tg.x=a*Of.x-i*Of.y,Tg.y=i*Of.x+a*Of.y):Tg.copy(Of),n.copy(e),n.x+=Tg.x,n.y+=Tg.y,n.applyMatrix4(KY)}const jb=new me,LU=new me;class eZ extends _n{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const a=t[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let a;for(a=0;a<i.length&&!(t<i[a].distance);a++);return i.splice(a,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),e<a)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){jb.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(jb);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){jb.setFromMatrixPosition(e.matrixWorld),LU.setFromMatrixPosition(this.matrixWorld);const r=jb.distanceTo(LU)/e.zoom;t[0].object.visible=!0;let i,a;for(i=1,a=t.length;i<a;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,a=r.length;i<a;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const FU=new me,BU=new Bn,zU=new Bn,Bze=new me,UU=new Yt,Hb=new me,PA=new ea,jU=new Yt,RA=new Ud;class tZ extends Yr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=_D,this.bindMatrix=new Yt,this.bindMatrixInverse=new Yt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ca),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Hb),this.boundingBox.expandByPoint(Hb)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ea),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Hb),this.boundingSphere.expandByPoint(Hb)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),PA.copy(this.boundingSphere),PA.applyMatrix4(i),e.ray.intersectsSphere(PA)!==!1&&(jU.copy(i).invert(),RA.copy(e.ray).applyMatrix4(jU),!(this.boundingBox!==null&&RA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,RA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Bn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===_D?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===fY?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;BU.fromBufferAttribute(i.attributes.skinIndex,e),zU.fromBufferAttribute(i.attributes.skinWeight,e),FU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const o=zU.getComponent(a);if(o!==0){const s=BU.getComponent(a);UU.multiplyMatrices(r.bones[s].matrixWorld,r.boneInverses[s]),t.addScaledVector(Bze.copy(FU).applyMatrix4(UU),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class TO extends _n{constructor(){super(),this.isBone=!0,this.type="Bone"}}class hd extends Sr{constructor(e=null,t=1,r=1,i,a,o,s,l,u=zr,c=zr,h,d){super(null,o,s,l,u,c,i,a,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const HU=new Yt,zze=new Yt;class E_{constructor(e=[],t=[]){this.uuid=So(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Yt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Yt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,o=e.length;a<o;a++){const s=e[a]?e[a].matrixWorld:zze;HU.multiplyMatrices(s,t[a]),HU.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new E_(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new hd(t,e,e,ya,po);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const a=e.bones[r];let o=t[a];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),o=new TO),this.bones.push(o),this.boneInverses.push(new Yt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,a=t.length;i<a;i++){const o=t[i];e.bones.push(o.uuid);const s=r[i];e.boneInverses.push(s.toArray())}return e}}class tm extends Hn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Pf=new Yt,VU=new Yt,Vb=[],WU=new Ca,Uze=new Yt,Dg=new Yr,kg=new ea;class nZ extends Yr{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new tm(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Uze)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ca),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Pf),WU.copy(e.boundingBox).applyMatrix4(Pf),this.boundingBox.union(WU)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ea),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Pf),kg.copy(e.boundingSphere).applyMatrix4(Pf),this.boundingSphere.union(kg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Dg.geometry=this.geometry,Dg.material=this.material,Dg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),kg.copy(this.boundingSphere),kg.applyMatrix4(r),e.ray.intersectsSphere(kg)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,Pf),VU.multiplyMatrices(r,Pf),Dg.matrixWorld=VU,Dg.raycast(e,Vb);for(let o=0,s=Vb.length;o<s;o++){const l=Vb[o];l.instanceId=a,l.object=this,t.push(l)}Vb.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new tm(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function jze(n,e){return n.z-e.z}function Hze(n,e){return e.z-n.z}class Vze{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const a=r[this.index];i.push(a),this.index++,a.start=e.start,a.count=e.count,a.z=t}reset(){this.list.length=0,this.index=0}}const Rf="batchId",Qu=new Yt,qU=new Yt,Wze=new Yt,GU=new Yt,IA=new gy,Wb=new Ca,Ch=new ea,Ng=new me,LA=new Vze,Gi=new Yr,qb=[];function qze(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let a=0;a<i;a++)for(let o=0;o<r;o++)e.setComponent(a+t,o,n.getComponent(a,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class rZ extends Yr{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new sn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new hd(t,e,e,ya,po);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const l=e.getAttribute(s),{array:u,itemSize:c,normalized:h}=l,d=new u.constructor(r*c),f=new l.constructor(d,c,h);f.setUsage(l.usage),t.setAttribute(s,f)}if(e.getIndex()!==null){const s=r>65536?new Uint32Array(a):new Uint16Array(a);t.setIndex(new Hn(s,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(Rf,new Hn(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Rf))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Rf}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===Rf)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),a=t.getAttribute(r);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ca);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Qu),this.getBoundingBoxAt(i,Wb).applyMatrix4(Qu),t.union(Wb))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ea);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Qu),this.getBoundingSphereAt(i,Ch).applyMatrix4(Qu),t.union(Ch))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let a=null;const o=this._reservedRanges,s=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(a=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,a===null?i.vertexStart=0:i.vertexStart=a.vertexStart+a.vertexCount;const u=e.getIndex(),c=u!==null;if(c&&(r===-1?i.indexCount=u.count:i.indexCount=r,a===null?i.indexStart=0:i.indexStart=a.indexStart+a.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const h=this._visibility,d=this._active,f=this._matricesTexture,p=this._matricesTexture.image.data;h.push(!0),d.push(!0);const v=this._geometryCount;this._geometryCount++,Wze.toArray(p,v*16),f.needsUpdate=!0,o.push(i),s.push({start:c?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Ca,sphereInitialized:!1,sphere:new ea});const y=this.geometry.getAttribute(Rf);for(let g=0;g<i.vertexCount;g++)y.setX(i.vertexStart+g,v);return y.needsUpdate=!0,this.setGeometryAt(v,e),v}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,a=r.getIndex(),o=t.getIndex(),s=this._reservedRanges[e];if(i&&o.count>s.indexCount||t.attributes.position.count>s.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=s.vertexStart,u=s.vertexCount;for(const f in r.attributes){if(f===Rf)continue;const p=t.getAttribute(f),v=r.getAttribute(f);qze(p,v,l);const y=p.itemSize;for(let g=p.count,w=u;g<w;g++){const b=l+g;for(let m=0;m<y;m++)v.setComponent(b,m,0)}v.needsUpdate=!0}if(i){const f=s.indexStart;for(let p=0;p<o.count;p++)a.setX(f+p,l+o.getX(p));for(let p=o.count,v=s.indexCount;p<v;p++)a.setX(f+p,l);a.needsUpdate=!0}const c=this._bounds[e];t.boundingBox!==null?(c.box.copy(t.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,t.boundingSphere!==null?(c.sphere.copy(t.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const h=this._drawRanges[e],d=t.getAttribute("position");return h.count=i?o.count:d.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],i=r.box,a=this.geometry;if(r.boxInitialized===!1){i.makeEmpty();const o=a.index,s=a.attributes.position,l=this._drawRanges[e];for(let u=l.start,c=l.start+l.count;u<c;u++){let h=u;o&&(h=o.getX(h)),i.expandByPoint(Ng.fromBufferAttribute(s,h))}r.boxInitialized=!0}return t.copy(i),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],i=r.sphere,a=this.geometry;if(r.sphereInitialized===!1){i.makeEmpty(),this.getBoundingBoxAt(e,Wb),Wb.getCenter(i.center);const o=a.index,s=a.attributes.position,l=this._drawRanges[e];let u=0;for(let c=l.start,h=l.start+l.count;c<h;c++){let d=c;o&&(d=o.getX(d)),Ng.fromBufferAttribute(s,d),u=Math.max(u,i.center.distanceToSquared(Ng))}i.radius=Math.sqrt(u),r.sphereInitialized=!0}return t.copy(i),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,a=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(t.toArray(a,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,a=this._geometryCount;return e>=a||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,a=this._drawRanges,o=this._geometryCount,s=this.matrixWorld,l=this.geometry;Gi.material=this.material,Gi.geometry.index=l.index,Gi.geometry.attributes=l.attributes,Gi.geometry.boundingBox===null&&(Gi.geometry.boundingBox=new Ca),Gi.geometry.boundingSphere===null&&(Gi.geometry.boundingSphere=new ea);for(let u=0;u<o;u++){if(!r[u]||!i[u])continue;const c=a[u];Gi.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(u,Gi.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Gi.geometry.boundingBox),this.getBoundingSphereAt(u,Gi.geometry.boundingSphere),Gi.raycast(e,qb);for(let h=0,d=qb.length;h<d;h++){const f=qb[h];f.object=this,f.batchId=u,t.push(f)}qb.length=0}Gi.material=null,Gi.geometry.index=null,Gi.geometry.attributes={},Gi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),s=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,u=this._visibility,c=this._multiDrawStarts,h=this._multiDrawCounts,d=this._drawRanges,f=this.perObjectFrustumCulled;f&&(GU.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),IA.setFromProjectionMatrix(GU,e.coordinateSystem));let p=0;if(this.sortObjects){qU.copy(this.matrixWorld).invert(),Ng.setFromMatrixPosition(r.matrixWorld).applyMatrix4(qU);for(let g=0,w=u.length;g<w;g++)if(u[g]&&l[g]){this.getMatrixAt(g,Qu),this.getBoundingSphereAt(g,Ch).applyMatrix4(Qu);let b=!1;if(f&&(b=!IA.intersectsSphere(Ch)),!b){const m=Ng.distanceTo(Ch.center);LA.push(d[g],m)}}const v=LA.list,y=this.customSort;y===null?v.sort(a.transparent?Hze:jze):y.call(this,v,r);for(let g=0,w=v.length;g<w;g++){const b=v[g];c[p]=b.start*s,h[p]=b.count,p++}LA.reset()}else for(let v=0,y=u.length;v<y;v++)if(u[v]&&l[v]){let g=!1;if(f&&(this.getMatrixAt(v,Qu),this.getBoundingSphereAt(v,Ch).applyMatrix4(Qu),g=!IA.intersectsSphere(Ch)),!g){const w=d[v];c[p]=w.start*s,h[p]=w.count,p++}}this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,a,o){this.onBeforeRender(e,null,i,a,o)}}class Ra extends Li{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new wt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const $U=new me,XU=new me,YU=new Yt,FA=new Ud,Gb=new ea;let $c=class extends _n{constructor(n=new sn,e=new Ra){super(),this.isLine=!0,this.type="Line",this.geometry=n,this.material=e,this.updateMorphTargets()}copy(n,e){return super.copy(n,e),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}computeLineDistances(){const n=this.geometry;if(n.index===null){const e=n.attributes.position,t=[0];for(let r=1,i=e.count;r<i;r++)$U.fromBufferAttribute(e,r-1),XU.fromBufferAttribute(e,r),t[r]=t[r-1],t[r]+=$U.distanceTo(XU);n.setAttribute("lineDistance",new Mt(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(n,e){const t=this.geometry,r=this.matrixWorld,i=n.params.Line.threshold,a=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),Gb.copy(t.boundingSphere),Gb.applyMatrix4(r),Gb.radius+=i,n.ray.intersectsSphere(Gb)===!1)return;YU.copy(r).invert(),FA.copy(n.ray).applyMatrix4(YU);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new me,u=new me,c=new me,h=new me,d=this.isLineSegments?2:1,f=t.index,p=t.attributes.position;if(f!==null){const v=Math.max(0,a.start),y=Math.min(f.count,a.start+a.count);for(let g=v,w=y-1;g<w;g+=d){const b=f.getX(g),m=f.getX(g+1);if(l.fromBufferAttribute(p,b),u.fromBufferAttribute(p,m),FA.distanceSqToSegment(l,u,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const x=n.ray.origin.distanceTo(h);x<n.near||x>n.far||e.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,a.start),y=Math.min(p.count,a.start+a.count);for(let g=v,w=y-1;g<w;g+=d){if(l.fromBufferAttribute(p,g),u.fromBufferAttribute(p,g+1),FA.distanceSqToSegment(l,u,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const b=n.ray.origin.distanceTo(h);b<n.near||b>n.far||e.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,e=Object.keys(n);if(e.length>0){const t=n[e[0]];if(t!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++){const a=t[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}};const ZU=new me,JU=new me;class Ml extends $c{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,a=t.count;i<a;i+=2)ZU.fromBufferAttribute(t,i),JU.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+ZU.distanceTo(JU);e.setAttribute("lineDistance",new Mt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class iZ extends $c{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class MO extends Li{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new wt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const KU=new Yt,t3=new Ud,$b=new ea,Xb=new me;class aZ extends _n{constructor(e=new sn,t=new MO){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),$b.copy(r.boundingSphere),$b.applyMatrix4(i),$b.radius+=a,e.ray.intersectsSphere($b)===!1)return;KU.copy(i).invert(),t3.copy(e.ray).applyMatrix4(KU);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,u=r.index,c=r.attributes.position;if(u!==null){const h=Math.max(0,o.start),d=Math.min(u.count,o.start+o.count);for(let f=h,p=d;f<p;f++){const v=u.getX(f);Xb.fromBufferAttribute(c,v),QU(Xb,v,l,i,e,t,this)}}else{const h=Math.max(0,o.start),d=Math.min(c.count,o.start+o.count);for(let f=h,p=d;f<p;f++)Xb.fromBufferAttribute(c,f),QU(Xb,f,l,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,a=r.length;i<a;i++){const o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}}function QU(n,e,t,r,i,a,o){const s=t3.distanceSqToPoint(n);if(s<t){const l=new me;t3.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:o})}}class Gze extends Sr{constructor(e,t,r,i,a,o,s,l,u){super(e,t,r,i,a,o,s,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:sr,this.magFilter=a!==void 0?a:sr,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class $ze extends Sr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=zr,this.minFilter=zr,this.generateMipmaps=!1,this.needsUpdate=!0}}class __ extends Sr{constructor(e,t,r,i,a,o,s,l,u,c,h,d){super(null,o,s,l,u,c,i,a,h,d),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Xze extends __{constructor(e,t,r,i,a,o){super(e,t,r,a,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Zi}}class Yze extends __{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,_u),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class oZ extends Sr{constructor(e,t,r,i,a,o,s,l,u){super(e,t,r,i,a,o,s,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Is{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),a=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),a+=r.distanceTo(i),t.push(a),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const a=r.length;let o;t?o=t:o=e*r[a-1];let s=0,l=a-1,u;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),u=r[i]-o,u<0)s=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(a-1);const c=r[i],h=r[i+1]-c,d=(o-c)/h;return(i+d)/(a-1)}getTangent(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);const a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new Qe:new me);return s.copy(o).sub(a).normalize(),s}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new me,i=[],a=[],o=[],s=new me,l=new Yt;for(let f=0;f<=e;f++){const p=f/e;i[f]=this.getTangentAt(p,new me)}a[0]=new me,o[0]=new me;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),d<=u&&r.set(0,0,1),s.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],s),o[0].crossVectors(i[0],a[0]);for(let f=1;f<=e;f++){if(a[f]=a[f-1].clone(),o[f]=o[f-1].clone(),s.crossVectors(i[f-1],i[f]),s.length()>Number.EPSILON){s.normalize();const p=Math.acos(kr(i[f-1].dot(i[f]),-1,1));a[f].applyMatrix4(l.makeRotationAxis(s,p))}o[f].crossVectors(i[f],a[f])}if(t===!0){let f=Math.acos(kr(a[0].dot(a[e]),-1,1));f/=e,i[0].dot(s.crossVectors(a[0],a[e]))>0&&(f=-f);for(let p=1;p<=e;p++)a[p].applyMatrix4(l.makeRotationAxis(i[p],f*p)),o[p].crossVectors(i[p],a[p])}return{tangents:i,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class C_ extends Is{constructor(e=0,t=0,r=1,i=1,a=0,o=Math.PI*2,s=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=s,this.aRotation=l}getPoint(e,t){const r=t||new Qe,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const o=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(o?a=0:a=i),this.aClockwise===!0&&!o&&(a===i?a=-i:a=a-i);const s=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(s),u=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,f=u-this.aY;l=d*c-f*h+this.aX,u=d*h+f*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class sZ extends C_{constructor(e,t,r,i,a,o){super(e,t,r,r,i,a,o),this.isArcCurve=!0,this.type="ArcCurve"}}function DO(){let n=0,e=0,t=0,r=0;function i(a,o,s,l){n=a,e=s,t=-3*a+3*o-2*s-l,r=2*a-2*o+s+l}return{initCatmullRom:function(a,o,s,l,u){i(o,s,u*(s-a),u*(l-o))},initNonuniformCatmullRom:function(a,o,s,l,u,c,h){let d=(o-a)/u-(s-a)/(u+c)+(s-o)/c,f=(s-o)/c-(l-o)/(c+h)+(l-s)/h;d*=c,f*=c,i(o,s,d,f)},calc:function(a){const o=a*a,s=o*a;return n+e*a+t*o+r*s}}}const Yb=new me,BA=new DO,zA=new DO,UA=new DO;class lZ extends Is{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new me){const r=t,i=this.points,a=i.length,o=(a-(this.closed?0:1))*e;let s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:l===0&&s===a-1&&(s=a-2,l=1);let u,c;this.closed||s>0?u=i[(s-1)%a]:(Yb.subVectors(i[0],i[1]).add(i[0]),u=Yb);const h=i[s%a],d=i[(s+1)%a];if(this.closed||s+2<a?c=i[(s+2)%a]:(Yb.subVectors(i[a-1],i[a-2]).add(i[a-1]),c=Yb),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(u.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(d),f),y=Math.pow(d.distanceToSquared(c),f);v<1e-4&&(v=1),p<1e-4&&(p=v),y<1e-4&&(y=v),BA.initNonuniformCatmullRom(u.x,h.x,d.x,c.x,p,v,y),zA.initNonuniformCatmullRom(u.y,h.y,d.y,c.y,p,v,y),UA.initNonuniformCatmullRom(u.z,h.z,d.z,c.z,p,v,y)}else this.curveType==="catmullrom"&&(BA.initCatmullRom(u.x,h.x,d.x,c.x,this.tension),zA.initCatmullRom(u.y,h.y,d.y,c.y,this.tension),UA.initCatmullRom(u.z,h.z,d.z,c.z,this.tension));return r.set(BA.calc(l),zA.calc(l),UA.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new me().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function e8(n,e,t,r,i){const a=(r-e)*.5,o=(i-t)*.5,s=n*n,l=n*s;return(2*t-2*r+a+o)*l+(-3*t+3*r-2*a-o)*s+a*n+t}function Zze(n,e){const t=1-n;return t*t*e}function Jze(n,e){return 2*(1-n)*n*e}function Kze(n,e){return n*n*e}function b0(n,e,t,r){return Zze(n,e)+Jze(n,t)+Kze(n,r)}function Qze(n,e){const t=1-n;return t*t*t*e}function e6e(n,e){const t=1-n;return 3*t*t*n*e}function t6e(n,e){return 3*(1-n)*n*n*e}function n6e(n,e){return n*n*n*e}function x0(n,e,t,r,i){return Qze(n,e)+e6e(n,t)+t6e(n,r)+n6e(n,i)}class kO extends Is{constructor(e=new Qe,t=new Qe,r=new Qe,i=new Qe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Qe){const r=t,i=this.v0,a=this.v1,o=this.v2,s=this.v3;return r.set(x0(e,i.x,a.x,o.x,s.x),x0(e,i.y,a.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uZ extends Is{constructor(e=new me,t=new me,r=new me,i=new me){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new me){const r=t,i=this.v0,a=this.v1,o=this.v2,s=this.v3;return r.set(x0(e,i.x,a.x,o.x,s.x),x0(e,i.y,a.y,o.y,s.y),x0(e,i.z,a.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class NO extends Is{constructor(e=new Qe,t=new Qe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Qe){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Qe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cZ extends Is{constructor(e=new me,t=new me){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new me){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new me){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OO extends Is{constructor(e=new Qe,t=new Qe,r=new Qe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Qe){const r=t,i=this.v0,a=this.v1,o=this.v2;return r.set(b0(e,i.x,a.x,o.x),b0(e,i.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PO extends Is{constructor(e=new me,t=new me,r=new me){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new me){const r=t,i=this.v0,a=this.v1,o=this.v2;return r.set(b0(e,i.x,a.x,o.x),b0(e,i.y,a.y,o.y),b0(e,i.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RO extends Is{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Qe){const r=t,i=this.points,a=(i.length-1)*e,o=Math.floor(a),s=a-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(e8(s,l.x,u.x,c.x,h.x),e8(s,l.y,u.y,c.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Qe().fromArray(i))}return this}}var WS=Object.freeze({__proto__:null,ArcCurve:sZ,CatmullRomCurve3:lZ,CubicBezierCurve:kO,CubicBezierCurve3:uZ,EllipseCurve:C_,LineCurve:NO,LineCurve3:cZ,QuadraticBezierCurve:OO,QuadraticBezierCurve3:PO,SplineCurve:RO});class hZ extends Is{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new WS[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const o=i[a]-r,s=this.curves[a],l=s.getLength(),u=l===0?0:1-o/l;return s.getPointAt(u,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const o=a[i],s=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(s);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new WS[i.type]().fromJSON(i))}return this}}class xv extends hZ{constructor(e){super(),this.type="Path",this.currentPoint=new Qe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new NO(this.currentPoint.clone(),new Qe(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const a=new OO(this.currentPoint.clone(),new Qe(e,t),new Qe(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,a,o){const s=new kO(this.currentPoint.clone(),new Qe(e,t),new Qe(r,i),new Qe(a,o));return this.curves.push(s),this.currentPoint.set(a,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new RO(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,a,o){const s=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+s,t+l,r,i,a,o),this}absarc(e,t,r,i,a,o){return this.absellipse(e,t,r,r,i,a,o),this}ellipse(e,t,r,i,a,o,s,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,a,o,s,l),this}absellipse(e,t,r,i,a,o,s,l){const u=new C_(e,t,r,i,a,o,s,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class vy extends sn{constructor(e=[new Qe(0,-.5),new Qe(.5,0),new Qe(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=kr(i,0,Math.PI*2);const a=[],o=[],s=[],l=[],u=[],c=1/t,h=new me,d=new Qe,f=new me,p=new me,v=new me;let y=0,g=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:y=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,f.x=g*1,f.y=-y,f.z=g*0,v.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:y=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,f.x=g*1,f.y=-y,f.z=g*0,p.copy(f),f.x+=v.x,f.y+=v.y,f.z+=v.z,f.normalize(),l.push(f.x,f.y,f.z),v.copy(p)}for(let w=0;w<=t;w++){const b=r+w*c*i,m=Math.sin(b),x=Math.cos(b);for(let S=0;S<=e.length-1;S++){h.x=e[S].x*m,h.y=e[S].y,h.z=e[S].x*x,o.push(h.x,h.y,h.z),d.x=w/t,d.y=S/(e.length-1),s.push(d.x,d.y);const C=l[3*S+0]*m,T=l[3*S+1],M=l[3*S+0]*x;u.push(C,T,M)}}for(let w=0;w<t;w++)for(let b=0;b<e.length-1;b++){const m=b+w*e.length,x=m,S=m+e.length,C=m+e.length+1,T=m+1;a.push(x,S,T),a.push(C,T,S)}this.setIndex(a),this.setAttribute("position",new Mt(o,3)),this.setAttribute("uv",new Mt(s,2)),this.setAttribute("normal",new Mt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vy(e.points,e.segments,e.phiStart,e.phiLength)}}class A_ extends vy{constructor(e=1,t=1,r=4,i=8){const a=new xv;a.absarc(0,-t/2,e,Math.PI*1.5,0),a.absarc(0,t/2,e,0,Math.PI*.5),super(a.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new A_(e.radius,e.length,e.capSegments,e.radialSegments)}}class T_ extends sn{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const a=[],o=[],s=[],l=[],u=new me,c=new Qe;o.push(0,0,0),s.push(0,0,1),l.push(.5,.5);for(let h=0,d=3;h<=t;h++,d+=3){const f=r+h/t*i;u.x=e*Math.cos(f),u.y=e*Math.sin(f),o.push(u.x,u.y,u.z),s.push(0,0,1),c.x=(o[d]/e+1)/2,c.y=(o[d+1]/e+1)/2,l.push(c.x,c.y)}for(let h=1;h<=t;h++)a.push(h,h+1,0);this.setIndex(a),this.setAttribute("position",new Mt(o,3)),this.setAttribute("normal",new Mt(s,3)),this.setAttribute("uv",new Mt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new T_(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Fm extends sn{constructor(e=1,t=1,r=1,i=32,a=1,o=!1,s=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l};const u=this;i=Math.floor(i),a=Math.floor(a);const c=[],h=[],d=[],f=[];let p=0;const v=[],y=r/2;let g=0;w(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(c),this.setAttribute("position",new Mt(h,3)),this.setAttribute("normal",new Mt(d,3)),this.setAttribute("uv",new Mt(f,2));function w(){const m=new me,x=new me;let S=0;const C=(t-e)/r;for(let T=0;T<=a;T++){const M=[],A=T/a,D=A*(t-e)+e;for(let O=0;O<=i;O++){const U=O/i,L=U*l+s,F=Math.sin(L),k=Math.cos(L);x.x=D*F,x.y=-A*r+y,x.z=D*k,h.push(x.x,x.y,x.z),m.set(F,C,k).normalize(),d.push(m.x,m.y,m.z),f.push(U,1-A),M.push(p++)}v.push(M)}for(let T=0;T<i;T++)for(let M=0;M<a;M++){const A=v[M][T],D=v[M+1][T],O=v[M+1][T+1],U=v[M][T+1];c.push(A,D,U),c.push(D,O,U),S+=6}u.addGroup(g,S,0),g+=S}function b(m){const x=p,S=new Qe,C=new me;let T=0;const M=m===!0?e:t,A=m===!0?1:-1;for(let O=1;O<=i;O++)h.push(0,y*A,0),d.push(0,A,0),f.push(.5,.5),p++;const D=p;for(let O=0;O<=i;O++){const U=O/i*l+s,L=Math.cos(U),F=Math.sin(U);C.x=M*F,C.y=y*A,C.z=M*L,h.push(C.x,C.y,C.z),d.push(0,A,0),S.x=L*.5+.5,S.y=F*.5*A+.5,f.push(S.x,S.y),p++}for(let O=0;O<i;O++){const U=x+O,L=D+O;m===!0?c.push(L,L+1,U):c.push(L+1,L,U),T+=3}u.addGroup(g,T,m===!0?1:2),g+=T}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class M_ extends Fm{constructor(e=1,t=1,r=32,i=1,a=!1,o=0,s=Math.PI*2){super(0,e,t,r,i,a,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s}}static fromJSON(e){return new M_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class uh extends sn{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const a=[],o=[];s(i),u(r),c(),this.setAttribute("position",new Mt(a,3)),this.setAttribute("normal",new Mt(a.slice(),3)),this.setAttribute("uv",new Mt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function s(w){const b=new me,m=new me,x=new me;for(let S=0;S<t.length;S+=3)f(t[S+0],b),f(t[S+1],m),f(t[S+2],x),l(b,m,x,w)}function l(w,b,m,x){const S=x+1,C=[];for(let T=0;T<=S;T++){C[T]=[];const M=w.clone().lerp(m,T/S),A=b.clone().lerp(m,T/S),D=S-T;for(let O=0;O<=D;O++)O===0&&T===S?C[T][O]=M:C[T][O]=M.clone().lerp(A,O/D)}for(let T=0;T<S;T++)for(let M=0;M<2*(S-T)-1;M++){const A=Math.floor(M/2);M%2===0?(d(C[T][A+1]),d(C[T+1][A]),d(C[T][A])):(d(C[T][A+1]),d(C[T+1][A+1]),d(C[T+1][A]))}}function u(w){const b=new me;for(let m=0;m<a.length;m+=3)b.x=a[m+0],b.y=a[m+1],b.z=a[m+2],b.normalize().multiplyScalar(w),a[m+0]=b.x,a[m+1]=b.y,a[m+2]=b.z}function c(){const w=new me;for(let b=0;b<a.length;b+=3){w.x=a[b+0],w.y=a[b+1],w.z=a[b+2];const m=y(w)/2/Math.PI+.5,x=g(w)/Math.PI+.5;o.push(m,1-x)}p(),h()}function h(){for(let w=0;w<o.length;w+=6){const b=o[w+0],m=o[w+2],x=o[w+4],S=Math.max(b,m,x),C=Math.min(b,m,x);S>.9&&C<.1&&(b<.2&&(o[w+0]+=1),m<.2&&(o[w+2]+=1),x<.2&&(o[w+4]+=1))}}function d(w){a.push(w.x,w.y,w.z)}function f(w,b){const m=w*3;b.x=e[m+0],b.y=e[m+1],b.z=e[m+2]}function p(){const w=new me,b=new me,m=new me,x=new me,S=new Qe,C=new Qe,T=new Qe;for(let M=0,A=0;M<a.length;M+=9,A+=6){w.set(a[M+0],a[M+1],a[M+2]),b.set(a[M+3],a[M+4],a[M+5]),m.set(a[M+6],a[M+7],a[M+8]),S.set(o[A+0],o[A+1]),C.set(o[A+2],o[A+3]),T.set(o[A+4],o[A+5]),x.copy(w).add(b).add(m).divideScalar(3);const D=y(x);v(S,A+0,w,D),v(C,A+2,b,D),v(T,A+4,m,D)}}function v(w,b,m,x){x<0&&w.x===1&&(o[b]=w.x-1),m.x===0&&m.z===0&&(o[b]=x/2/Math.PI+.5)}function y(w){return Math.atan2(w.z,-w.x)}function g(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uh(e.vertices,e.indices,e.radius,e.details)}}class D_ extends uh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new D_(e.radius,e.detail)}}const Zb=new me,Jb=new me,jA=new me,Kb=new go;class IO extends sn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),i=Math.cos(ld*t),a=e.getIndex(),o=e.getAttribute("position"),s=a?a.count:o.count,l=[0,0,0],u=["a","b","c"],c=new Array(3),h={},d=[];for(let f=0;f<s;f+=3){a?(l[0]=a.getX(f),l[1]=a.getX(f+1),l[2]=a.getX(f+2)):(l[0]=f,l[1]=f+1,l[2]=f+2);const{a:p,b:v,c:y}=Kb;if(p.fromBufferAttribute(o,l[0]),v.fromBufferAttribute(o,l[1]),y.fromBufferAttribute(o,l[2]),Kb.getNormal(jA),c[0]=`${Math.round(p.x*r)},${Math.round(p.y*r)},${Math.round(p.z*r)}`,c[1]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,c[2]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,!(c[0]===c[1]||c[1]===c[2]||c[2]===c[0]))for(let g=0;g<3;g++){const w=(g+1)%3,b=c[g],m=c[w],x=Kb[u[g]],S=Kb[u[w]],C=`${b}_${m}`,T=`${m}_${b}`;T in h&&h[T]?(jA.dot(h[T].normal)<=i&&(d.push(x.x,x.y,x.z),d.push(S.x,S.y,S.z)),h[T]=null):C in h||(h[C]={index0:l[g],index1:l[w],normal:jA.clone()})}}for(const f in h)if(h[f]){const{index0:p,index1:v}=h[f];Zb.fromBufferAttribute(o,p),Jb.fromBufferAttribute(o,v),d.push(Zb.x,Zb.y,Zb.z),d.push(Jb.x,Jb.y,Jb.z)}this.setAttribute("position",new Mt(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class dd extends xv{constructor(e){super(e),this.uuid=So(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new xv().fromJSON(i))}return this}}const r6e={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let a=dZ(n,0,i,t,!0);const o=[];if(!a||a.next===a.prev)return o;let s,l,u,c,h,d,f;if(r&&(a=l6e(n,e,a,t)),n.length>80*t){s=u=n[0],l=c=n[1];for(let p=t;p<i;p+=t)h=n[p],d=n[p+1],h<s&&(s=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);f=Math.max(u-s,c-l),f=f!==0?32767/f:0}return wv(a,o,t,s,l,f,0),o}};function dZ(n,e,t,r,i){let a,o;if(i===b6e(n,e,t,r)>0)for(a=e;a<t;a+=r)o=t8(a,n[a],n[a+1],o);else for(a=t-r;a>=e;a-=r)o=t8(a,n[a],n[a+1],o);return o&&k_(o,o.next)&&(Ev(o),o=o.next),o}function Ad(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(k_(t,t.next)||br(t.prev,t,t.next)===0)){if(Ev(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function wv(n,e,t,r,i,a,o){if(!n)return;!o&&a&&f6e(n,r,i,a);let s=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,a?a6e(n,r,i,a):i6e(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),Ev(n),n=u.next,s=u.next;continue}if(n=u,n===s){o?o===1?(n=o6e(Ad(n),e,t),wv(n,e,t,r,i,a,2)):o===2&&s6e(n,e,t,r,i,a):wv(Ad(n),e,t,r,i,a,1);break}}}function i6e(n){const e=n.prev,t=n,r=n.next;if(br(e,t,r)>=0)return!1;const i=e.x,a=t.x,o=r.x,s=e.y,l=t.y,u=r.y,c=i<a?i<o?i:o:a<o?a:o,h=s<l?s<u?s:u:l<u?l:u,d=i>a?i>o?i:o:a>o?a:o,f=s>l?s>u?s:u:l>u?l:u;let p=r.next;for(;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&dp(i,s,a,l,o,u,p.x,p.y)&&br(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function a6e(n,e,t,r){const i=n.prev,a=n,o=n.next;if(br(i,a,o)>=0)return!1;const s=i.x,l=a.x,u=o.x,c=i.y,h=a.y,d=o.y,f=s<l?s<u?s:u:l<u?l:u,p=c<h?c<d?c:d:h<d?h:d,v=s>l?s>u?s:u:l>u?l:u,y=c>h?c>d?c:d:h>d?h:d,g=n3(f,p,e,t,r),w=n3(v,y,e,t,r);let b=n.prevZ,m=n.nextZ;for(;b&&b.z>=g&&m&&m.z<=w;){if(b.x>=f&&b.x<=v&&b.y>=p&&b.y<=y&&b!==i&&b!==o&&dp(s,c,l,h,u,d,b.x,b.y)&&br(b.prev,b,b.next)>=0||(b=b.prevZ,m.x>=f&&m.x<=v&&m.y>=p&&m.y<=y&&m!==i&&m!==o&&dp(s,c,l,h,u,d,m.x,m.y)&&br(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;b&&b.z>=g;){if(b.x>=f&&b.x<=v&&b.y>=p&&b.y<=y&&b!==i&&b!==o&&dp(s,c,l,h,u,d,b.x,b.y)&&br(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;m&&m.z<=w;){if(m.x>=f&&m.x<=v&&m.y>=p&&m.y<=y&&m!==i&&m!==o&&dp(s,c,l,h,u,d,m.x,m.y)&&br(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function o6e(n,e,t){let r=n;do{const i=r.prev,a=r.next.next;!k_(i,a)&&fZ(i,r,r.next,a)&&Sv(i,a)&&Sv(a,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(a.i/t|0),Ev(r),Ev(r.next),r=n=a),r=r.next}while(r!==n);return Ad(r)}function s6e(n,e,t,r,i,a){let o=n;do{let s=o.next.next;for(;s!==o.prev;){if(o.i!==s.i&&g6e(o,s)){let l=pZ(o,s);o=Ad(o,o.next),l=Ad(l,l.next),wv(o,e,t,r,i,a,0),wv(l,e,t,r,i,a,0);return}s=s.next}o=o.next}while(o!==n)}function l6e(n,e,t,r){const i=[];let a,o,s,l,u;for(a=0,o=e.length;a<o;a++)s=e[a]*r,l=a<o-1?e[a+1]*r:n.length,u=dZ(n,s,l,r,!1),u===u.next&&(u.steiner=!0),i.push(m6e(u));for(i.sort(u6e),a=0;a<i.length;a++)t=c6e(i[a],t);return t}function u6e(n,e){return n.x-e.x}function c6e(n,e){const t=h6e(n,e);if(!t)return e;const r=pZ(t,n);return Ad(r,r.next),Ad(t,t.next)}function h6e(n,e){let t=e,r=-1/0,i;const a=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=a&&d>r&&(r=d,i=t.x<t.next.x?t:t.next,d===a))return i}t=t.next}while(t!==e);if(!i)return null;const s=i,l=i.x,u=i.y;let c=1/0,h;t=i;do a>=t.x&&t.x>=l&&a!==t.x&&dp(o<u?a:r,o,l,u,o<u?r:a,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(a-t.x),Sv(t,n)&&(h<c||h===c&&(t.x>i.x||t.x===i.x&&d6e(i,t)))&&(i=t,c=h)),t=t.next;while(t!==s);return i}function d6e(n,e){return br(n.prev,n,e.prev)<0&&br(e.next,n,n.next)<0}function f6e(n,e,t,r){let i=n;do i.z===0&&(i.z=n3(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,p6e(i)}function p6e(n){let e,t,r,i,a,o,s,l,u=1;do{for(t=n,n=null,a=null,o=0;t;){for(o++,r=t,s=0,e=0;e<u&&(s++,r=r.nextZ,!!r);e++);for(l=u;s>0||l>0&&r;)s!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:n=i,i.prevZ=a,a=i;t=r}a.nextZ=null,u*=2}while(o>1);return n}function n3(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function m6e(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function dp(n,e,t,r,i,a,o,s){return(i-o)*(e-s)>=(n-o)*(a-s)&&(n-o)*(r-s)>=(t-o)*(e-s)&&(t-o)*(a-s)>=(i-o)*(r-s)}function g6e(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!v6e(n,e)&&(Sv(n,e)&&Sv(e,n)&&y6e(n,e)&&(br(n.prev,n,e.prev)||br(n,e.prev,e))||k_(n,e)&&br(n.prev,n,n.next)>0&&br(e.prev,e,e.next)>0)}function br(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function k_(n,e){return n.x===e.x&&n.y===e.y}function fZ(n,e,t,r){const i=ex(br(n,e,t)),a=ex(br(n,e,r)),o=ex(br(t,r,n)),s=ex(br(t,r,e));return!!(i!==a&&o!==s||i===0&&Qb(n,t,e)||a===0&&Qb(n,r,e)||o===0&&Qb(t,n,r)||s===0&&Qb(t,e,r))}function Qb(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function ex(n){return n>0?1:n<0?-1:0}function v6e(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&fZ(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Sv(n,e){return br(n.prev,n,n.next)<0?br(n,e,n.next)>=0&&br(n,n.prev,e)>=0:br(n,e,n.prev)<0||br(n,n.next,e)<0}function y6e(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function pZ(n,e){const t=new r3(n.i,n.x,n.y),r=new r3(e.i,e.x,e.y),i=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,a.next=r,r.prev=a,r}function t8(n,e,t,r){const i=new r3(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ev(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function r3(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function b6e(n,e,t,r){let i=0;for(let a=e,o=t-r;a<t;a+=r)i+=(n[o]-n[a])*(n[a+1]+n[o+1]),o=a;return i}class vl{static area(e){const t=e.length;let r=0;for(let i=t-1,a=0;a<t;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return vl.area(e)<0}static triangulateShape(e,t){const r=[],i=[],a=[];n8(e),r8(r,e);let o=e.length;t.forEach(n8);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,r8(r,t[l]);const s=r6e.triangulate(r,i);for(let l=0;l<s.length;l+=3)a.push(s.slice(l,l+3));return a}}function n8(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function r8(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class N_ extends sn{constructor(e=new dd([new Qe(.5,.5),new Qe(-.5,.5),new Qe(-.5,-.5),new Qe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let s=0,l=e.length;s<l;s++){const u=e[s];o(u)}this.setAttribute("position",new Mt(i,3)),this.setAttribute("uv",new Mt(a,2)),this.computeVertexNormals();function o(s){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:f-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:x6e;let b,m=!1,x,S,C,T;g&&(b=g.getSpacedPoints(c),m=!0,d=!1,x=g.computeFrenetFrames(c,!1),S=new me,C=new me,T=new me),d||(y=0,f=0,p=0,v=0);const M=s.extractPoints(u);let A=M.shape;const D=M.holes;if(!vl.isClockWise(A)){A=A.reverse();for(let be=0,ne=D.length;be<ne;be++){const Pe=D[be];vl.isClockWise(Pe)&&(D[be]=Pe.reverse())}}const O=vl.triangulateShape(A,D),U=A;for(let be=0,ne=D.length;be<ne;be++){const Pe=D[be];A=A.concat(Pe)}function L(be,ne,Pe){return ne||console.error("THREE.ExtrudeGeometry: vec does not exist"),be.clone().addScaledVector(ne,Pe)}const F=A.length,k=O.length;function P(be,ne,Pe){let ze,K,ie;const _e=be.x-ne.x,oe=be.y-ne.y,G=Pe.x-be.x,q=Pe.y-be.y,ce=_e*_e+oe*oe,Ae=_e*q-oe*G;if(Math.abs(Ae)>Number.EPSILON){const $=Math.sqrt(ce),ee=Math.sqrt(G*G+q*q),ge=ne.x-oe/$,xe=ne.y+_e/$,Ne=Pe.x-q/ee,Fe=Pe.y+G/ee,qe=((Ne-ge)*q-(Fe-xe)*G)/(_e*q-oe*G);ze=ge+_e*qe-be.x,K=xe+oe*qe-be.y;const ke=ze*ze+K*K;if(ke<=2)return new Qe(ze,K);ie=Math.sqrt(ke/2)}else{let $=!1;_e>Number.EPSILON?G>Number.EPSILON&&($=!0):_e<-Number.EPSILON?G<-Number.EPSILON&&($=!0):Math.sign(oe)===Math.sign(q)&&($=!0),$?(ze=-oe,K=_e,ie=Math.sqrt(ce)):(ze=_e,K=oe,ie=Math.sqrt(ce/2))}return new Qe(ze/ie,K/ie)}const z=[];for(let be=0,ne=U.length,Pe=ne-1,ze=be+1;be<ne;be++,Pe++,ze++)Pe===ne&&(Pe=0),ze===ne&&(ze=0),z[be]=P(U[be],U[Pe],U[ze]);const B=[];let X,J=z.concat();for(let be=0,ne=D.length;be<ne;be++){const Pe=D[be];X=[];for(let ze=0,K=Pe.length,ie=K-1,_e=ze+1;ze<K;ze++,ie++,_e++)ie===K&&(ie=0),_e===K&&(_e=0),X[ze]=P(Pe[ze],Pe[ie],Pe[_e]);B.push(X),J=J.concat(X)}for(let be=0;be<y;be++){const ne=be/y,Pe=f*Math.cos(ne*Math.PI/2),ze=p*Math.sin(ne*Math.PI/2)+v;for(let K=0,ie=U.length;K<ie;K++){const _e=L(U[K],z[K],ze);se(_e.x,_e.y,-Pe)}for(let K=0,ie=D.length;K<ie;K++){const _e=D[K];X=B[K];for(let oe=0,G=_e.length;oe<G;oe++){const q=L(_e[oe],X[oe],ze);se(q.x,q.y,-Pe)}}}const Q=p+v;for(let be=0;be<F;be++){const ne=d?L(A[be],J[be],Q):A[be];m?(C.copy(x.normals[0]).multiplyScalar(ne.x),S.copy(x.binormals[0]).multiplyScalar(ne.y),T.copy(b[0]).add(C).add(S),se(T.x,T.y,T.z)):se(ne.x,ne.y,0)}for(let be=1;be<=c;be++)for(let ne=0;ne<F;ne++){const Pe=d?L(A[ne],J[ne],Q):A[ne];m?(C.copy(x.normals[be]).multiplyScalar(Pe.x),S.copy(x.binormals[be]).multiplyScalar(Pe.y),T.copy(b[be]).add(C).add(S),se(T.x,T.y,T.z)):se(Pe.x,Pe.y,h/c*be)}for(let be=y-1;be>=0;be--){const ne=be/y,Pe=f*Math.cos(ne*Math.PI/2),ze=p*Math.sin(ne*Math.PI/2)+v;for(let K=0,ie=U.length;K<ie;K++){const _e=L(U[K],z[K],ze);se(_e.x,_e.y,h+Pe)}for(let K=0,ie=D.length;K<ie;K++){const _e=D[K];X=B[K];for(let oe=0,G=_e.length;oe<G;oe++){const q=L(_e[oe],X[oe],ze);m?se(q.x,q.y+b[c-1].y,b[c-1].x+Pe):se(q.x,q.y,h+Pe)}}}Z(),re();function Z(){const be=i.length/3;if(d){let ne=0,Pe=F*ne;for(let ze=0;ze<k;ze++){const K=O[ze];ye(K[2]+Pe,K[1]+Pe,K[0]+Pe)}ne=c+y*2,Pe=F*ne;for(let ze=0;ze<k;ze++){const K=O[ze];ye(K[0]+Pe,K[1]+Pe,K[2]+Pe)}}else{for(let ne=0;ne<k;ne++){const Pe=O[ne];ye(Pe[2],Pe[1],Pe[0])}for(let ne=0;ne<k;ne++){const Pe=O[ne];ye(Pe[0]+F*c,Pe[1]+F*c,Pe[2]+F*c)}}r.addGroup(be,i.length/3-be,0)}function re(){const be=i.length/3;let ne=0;fe(U,ne),ne+=U.length;for(let Pe=0,ze=D.length;Pe<ze;Pe++){const K=D[Pe];fe(K,ne),ne+=K.length}r.addGroup(be,i.length/3-be,1)}function fe(be,ne){let Pe=be.length;for(;--Pe>=0;){const ze=Pe;let K=Pe-1;K<0&&(K=be.length-1);for(let ie=0,_e=c+y*2;ie<_e;ie++){const oe=F*ie,G=F*(ie+1),q=ne+ze+oe,ce=ne+K+oe,Ae=ne+K+G,$=ne+ze+G;De(q,ce,Ae,$)}}}function se(be,ne,Pe){l.push(be),l.push(ne),l.push(Pe)}function ye(be,ne,Pe){pe(be),pe(ne),pe(Pe);const ze=i.length/3,K=w.generateTopUV(r,i,ze-3,ze-2,ze-1);Me(K[0]),Me(K[1]),Me(K[2])}function De(be,ne,Pe,ze){pe(be),pe(ne),pe(ze),pe(ne),pe(Pe),pe(ze);const K=i.length/3,ie=w.generateSideWallUV(r,i,K-6,K-3,K-2,K-1);Me(ie[0]),Me(ie[1]),Me(ie[3]),Me(ie[1]),Me(ie[2]),Me(ie[3])}function pe(be){i.push(l[be*3+0]),i.push(l[be*3+1]),i.push(l[be*3+2])}function Me(be){a.push(be.x),a.push(be.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return w6e(t,r,e)}static fromJSON(e,t){const r=[];for(let a=0,o=e.shapes.length;a<o;a++){const s=t[e.shapes[a]];r.push(s)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new WS[i.type]().fromJSON(i)),new N_(r,e.options)}}const x6e={generateTopUV:function(n,e,t,r,i){const a=e[t*3],o=e[t*3+1],s=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new Qe(a,o),new Qe(s,l),new Qe(u,c)]},generateSideWallUV:function(n,e,t,r,i,a){const o=e[t*3],s=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],h=e[r*3+2],d=e[i*3],f=e[i*3+1],p=e[i*3+2],v=e[a*3],y=e[a*3+1],g=e[a*3+2];return Math.abs(s-c)<Math.abs(o-u)?[new Qe(o,1-l),new Qe(u,1-h),new Qe(d,1-p),new Qe(v,1-g)]:[new Qe(s,1-l),new Qe(c,1-h),new Qe(f,1-p),new Qe(y,1-g)]}};function w6e(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const a=n[r];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class O_ extends uh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new O_(e.radius,e.detail)}}class yy extends uh{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yy(e.radius,e.detail)}}class P_ extends sn{constructor(e=.5,t=1,r=32,i=1,a=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const s=[],l=[],u=[],c=[];let h=e;const d=(t-e)/i,f=new me,p=new Qe;for(let v=0;v<=i;v++){for(let y=0;y<=r;y++){const g=a+y/r*o;f.x=h*Math.cos(g),f.y=h*Math.sin(g),l.push(f.x,f.y,f.z),u.push(0,0,1),p.x=(f.x/t+1)/2,p.y=(f.y/t+1)/2,c.push(p.x,p.y)}h+=d}for(let v=0;v<i;v++){const y=v*(r+1);for(let g=0;g<r;g++){const w=g+y,b=w,m=w+r+1,x=w+r+2,S=w+1;s.push(b,m,S),s.push(m,x,S)}}this.setIndex(s),this.setAttribute("position",new Mt(l,3)),this.setAttribute("normal",new Mt(u,3)),this.setAttribute("uv",new Mt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new P_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class R_ extends sn{constructor(e=new dd([new Qe(0,.5),new Qe(-.5,-.5),new Qe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],a=[],o=[];let s=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(s,l,c),s+=l,l=0;this.setIndex(r),this.setAttribute("position",new Mt(i,3)),this.setAttribute("normal",new Mt(a,3)),this.setAttribute("uv",new Mt(o,2));function u(c){const h=i.length/3,d=c.extractPoints(t);let f=d.shape;const p=d.holes;vl.isClockWise(f)===!1&&(f=f.reverse());for(let y=0,g=p.length;y<g;y++){const w=p[y];vl.isClockWise(w)===!0&&(p[y]=w.reverse())}const v=vl.triangulateShape(f,p);for(let y=0,g=p.length;y<g;y++){const w=p[y];f=f.concat(w)}for(let y=0,g=f.length;y<g;y++){const w=f[y];i.push(w.x,w.y,0),a.push(0,0,1),o.push(w.x,w.y)}for(let y=0,g=v.length;y<g;y++){const w=v[y],b=w[0]+h,m=w[1]+h,x=w[2]+h;r.push(b,m,x),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return S6e(t,e)}static fromJSON(e,t){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const o=t[e.shapes[i]];r.push(o)}return new R_(r,e.curveSegments)}}function S6e(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class by extends sn{constructor(e=1,t=32,r=16,i=0,a=Math.PI*2,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:a,thetaStart:o,thetaLength:s},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+s,Math.PI);let u=0;const c=[],h=new me,d=new me,f=[],p=[],v=[],y=[];for(let g=0;g<=r;g++){const w=[],b=g/r;let m=0;g===0&&o===0?m=.5/t:g===r&&l===Math.PI&&(m=-.5/t);for(let x=0;x<=t;x++){const S=x/t;h.x=-e*Math.cos(i+S*a)*Math.sin(o+b*s),h.y=e*Math.cos(o+b*s),h.z=e*Math.sin(i+S*a)*Math.sin(o+b*s),p.push(h.x,h.y,h.z),d.copy(h).normalize(),v.push(d.x,d.y,d.z),y.push(S+m,1-b),w.push(u++)}c.push(w)}for(let g=0;g<r;g++)for(let w=0;w<t;w++){const b=c[g][w+1],m=c[g][w],x=c[g+1][w],S=c[g+1][w+1];(g!==0||o>0)&&f.push(b,m,S),(g!==r-1||l<Math.PI)&&f.push(m,x,S)}this.setIndex(f),this.setAttribute("position",new Mt(p,3)),this.setAttribute("normal",new Mt(v,3)),this.setAttribute("uv",new Mt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new by(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class I_ extends uh{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new I_(e.radius,e.detail)}}class L_ extends sn{constructor(e=1,t=.4,r=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:a},r=Math.floor(r),i=Math.floor(i);const o=[],s=[],l=[],u=[],c=new me,h=new me,d=new me;for(let f=0;f<=r;f++)for(let p=0;p<=i;p++){const v=p/i*a,y=f/r*Math.PI*2;h.x=(e+t*Math.cos(y))*Math.cos(v),h.y=(e+t*Math.cos(y))*Math.sin(v),h.z=t*Math.sin(y),s.push(h.x,h.y,h.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),d.subVectors(h,c).normalize(),l.push(d.x,d.y,d.z),u.push(p/i),u.push(f/r)}for(let f=1;f<=r;f++)for(let p=1;p<=i;p++){const v=(i+1)*f+p-1,y=(i+1)*(f-1)+p-1,g=(i+1)*(f-1)+p,w=(i+1)*f+p;o.push(v,y,w),o.push(y,g,w)}this.setIndex(o),this.setAttribute("position",new Mt(s,3)),this.setAttribute("normal",new Mt(l,3)),this.setAttribute("uv",new Mt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new L_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class F_ extends sn{constructor(e=1,t=.4,r=64,i=8,a=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:a,q:o},r=Math.floor(r),i=Math.floor(i);const s=[],l=[],u=[],c=[],h=new me,d=new me,f=new me,p=new me,v=new me,y=new me,g=new me;for(let b=0;b<=r;++b){const m=b/r*a*Math.PI*2;w(m,a,o,e,f),w(m+.01,a,o,e,p),y.subVectors(p,f),g.addVectors(p,f),v.crossVectors(y,g),g.crossVectors(v,y),v.normalize(),g.normalize();for(let x=0;x<=i;++x){const S=x/i*Math.PI*2,C=-t*Math.cos(S),T=t*Math.sin(S);h.x=f.x+(C*g.x+T*v.x),h.y=f.y+(C*g.y+T*v.y),h.z=f.z+(C*g.z+T*v.z),l.push(h.x,h.y,h.z),d.subVectors(h,f).normalize(),u.push(d.x,d.y,d.z),c.push(b/r),c.push(x/i)}}for(let b=1;b<=r;b++)for(let m=1;m<=i;m++){const x=(i+1)*(b-1)+(m-1),S=(i+1)*b+(m-1),C=(i+1)*b+m,T=(i+1)*(b-1)+m;s.push(x,S,T),s.push(S,C,T)}this.setIndex(s),this.setAttribute("position",new Mt(l,3)),this.setAttribute("normal",new Mt(u,3)),this.setAttribute("uv",new Mt(c,2));function w(b,m,x,S,C){const T=Math.cos(b),M=Math.sin(b),A=x/m*b,D=Math.cos(A);C.x=S*(2+D)*.5*T,C.y=S*(2+D)*M*.5,C.z=S*Math.sin(A)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new F_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class B_ extends sn{constructor(e=new PO(new me(-1,-1,0),new me(-1,1,0),new me(1,1,0)),t=64,r=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:a};const o=e.computeFrenetFrames(t,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new me,l=new me,u=new Qe;let c=new me;const h=[],d=[],f=[],p=[];v(),this.setIndex(p),this.setAttribute("position",new Mt(h,3)),this.setAttribute("normal",new Mt(d,3)),this.setAttribute("uv",new Mt(f,2));function v(){for(let b=0;b<t;b++)y(b);y(a===!1?t:0),w(),g()}function y(b){c=e.getPointAt(b/t,c);const m=o.normals[b],x=o.binormals[b];for(let S=0;S<=i;S++){const C=S/i*Math.PI*2,T=Math.sin(C),M=-Math.cos(C);l.x=M*m.x+T*x.x,l.y=M*m.y+T*x.y,l.z=M*m.z+T*x.z,l.normalize(),d.push(l.x,l.y,l.z),s.x=c.x+r*l.x,s.y=c.y+r*l.y,s.z=c.z+r*l.z,h.push(s.x,s.y,s.z)}}function g(){for(let b=1;b<=t;b++)for(let m=1;m<=i;m++){const x=(i+1)*(b-1)+(m-1),S=(i+1)*b+(m-1),C=(i+1)*b+m,T=(i+1)*(b-1)+m;p.push(x,S,T),p.push(S,C,T)}}function w(){for(let b=0;b<=t;b++)for(let m=0;m<=i;m++)u.x=b/t,u.y=m/i,f.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new B_(new WS[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class LO extends sn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new me,a=new me;if(e.index!==null){const o=e.attributes.position,s=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:s.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const h=l[u],d=h.start,f=h.count;for(let p=d,v=d+f;p<v;p+=3)for(let y=0;y<3;y++){const g=s.getX(p+y),w=s.getX(p+(y+1)%3);i.fromBufferAttribute(o,g),a.fromBufferAttribute(o,w),i8(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}}else{const o=e.attributes.position;for(let s=0,l=o.count/3;s<l;s++)for(let u=0;u<3;u++){const c=3*s+u,h=3*s+(u+1)%3;i.fromBufferAttribute(o,c),a.fromBufferAttribute(o,h),i8(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Mt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function i8(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var a8=Object.freeze({__proto__:null,BoxGeometry:jd,CapsuleGeometry:A_,CircleGeometry:T_,ConeGeometry:M_,CylinderGeometry:Fm,DodecahedronGeometry:D_,EdgesGeometry:IO,ExtrudeGeometry:N_,IcosahedronGeometry:O_,LatheGeometry:vy,OctahedronGeometry:yy,PlaneGeometry:Im,PolyhedronGeometry:uh,RingGeometry:P_,ShapeGeometry:R_,SphereGeometry:by,TetrahedronGeometry:I_,TorusGeometry:L_,TorusKnotGeometry:F_,TubeGeometry:B_,WireframeGeometry:LO});class mZ extends Li{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new wt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class gZ extends ts{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class FO extends Li{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new wt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vZ extends FO{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Qe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return kr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new wt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new wt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new wt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class yZ extends Li{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new wt(16777215),this.specular=new wt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bZ extends Li{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new wt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class xZ extends Li{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class wZ extends Li{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SZ extends Li{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new wt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class EZ extends Ra{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Qh(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function _Z(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function CZ(n){function e(i,a){return n[i]-n[a]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function i3(n,e,t){const r=n.length,i=new n.constructor(r);for(let a=0,o=0;o!==r;++a){const s=t[a]*e;for(let l=0;l!==e;++l)i[o++]=n[s+l]}return i}function BO(n,e,t,r){let i=1,a=n[0];for(;a!==void 0&&a[r]===void 0;)a=n[i++];if(a===void 0)return;let o=a[r];if(o!==void 0)if(Array.isArray(o))do o=a[r],o!==void 0&&(e.push(a.time),t.push.apply(t,o)),a=n[i++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[r],o!==void 0&&(e.push(a.time),o.toArray(t,t.length)),a=n[i++];while(a!==void 0);else do o=a[r],o!==void 0&&(e.push(a.time),t.push(o)),a=n[i++];while(a!==void 0)}function E6e(n,e,t,r,i=30){const a=n.clone();a.name=e;const o=[];for(let l=0;l<a.tracks.length;++l){const u=a.tracks[l],c=u.getValueSize(),h=[],d=[];for(let f=0;f<u.times.length;++f){const p=u.times[f]*i;if(!(p<t||p>=r)){h.push(u.times[f]);for(let v=0;v<c;++v)d.push(u.values[f*c+v])}}h.length!==0&&(u.times=Qh(h,u.times.constructor),u.values=Qh(d,u.values.constructor),o.push(u))}a.tracks=o;let s=1/0;for(let l=0;l<a.tracks.length;++l)s>a.tracks[l].times[0]&&(s=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*s);return a.resetDuration(),a}function _6e(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,a=e/r;for(let o=0;o<i;++o){const s=t.tracks[o],l=s.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===s.name&&g.ValueTypeName===l});if(u===void 0)continue;let c=0;const h=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let d=0;const f=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const p=s.times.length-1;let v;if(a<=s.times[0]){const g=c,w=h-c;v=s.values.slice(g,w)}else if(a>=s.times[p]){const g=p*h+c,w=g+h-c;v=s.values.slice(g,w)}else{const g=s.createInterpolant(),w=c,b=h-c;g.evaluate(a),v=g.resultBuffer.slice(w,b)}l==="quaternion"&&new yi().fromArray(v).normalize().conjugate().toArray(v);const y=u.times.length;for(let g=0;g<y;++g){const w=g*f+d;if(l==="quaternion")yi.multiplyQuaternionsFlat(u.values,w,v,0,u.values,w);else{const b=f-d*2;for(let m=0;m<b;++m)u.values[w+m]-=v[m]}}}return n.blendMode=pO,n}const C6e={convertArray:Qh,isTypedArray:_Z,getKeyframeOrder:CZ,sortedArray:i3,flattenJSON:BO,subclip:E6e,makeClipAdditive:_6e};class xy{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],a=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let s=r+2;;){if(i===void 0){if(e<a)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===s)break;if(a=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=a)){const s=t[1];e<s&&(r=2,a=s);for(let l=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=a,a=t[--r-1],e>=a)break t}o=r,r=0;break n}break e}for(;r<o;){const s=r+o>>>1;e<t[s]?o=s:r=s+1}if(i=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let o=0;o!==i;++o)t[o]=r[a+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class AZ extends xy{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Zh,endingEnd:Zh}}intervalChanged_(e,t,r){const i=this.parameterPositions;let a=e-2,o=e+1,s=i[a],l=i[o];if(s===void 0)switch(this.getSettings_().endingStart){case Jh:a=e,s=2*t-r;break;case dv:a=i.length-2,s=t+i[a]-i[a+1];break;default:a=e,s=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Jh:o=e,l=2*r-t;break;case dv:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-s),this._weightNext=u/(l-r),this._offsetPrev=a*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,u=l-s,c=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(r-t)/(i-t),v=p*p,y=v*p,g=-d*y+2*d*v-d*p,w=(1+d)*y+(-1.5-2*d)*v+(-.5+d)*p+1,b=(-1-f)*y+(1.5+f)*v+.5*p,m=f*y-f*v;for(let x=0;x!==s;++x)a[x]=g*o[c+x]+w*o[u+x]+b*o[l+x]+m*o[h+x];return a}}class zO extends xy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,u=l-s,c=(r-t)/(i-t),h=1-c;for(let d=0;d!==s;++d)a[d]=o[u+d]*h+o[l+d]*c;return a}}class TZ extends xy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ls{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Qh(t,this.TimeBufferType),this.values=Qh(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Qh(e.times,Array),values:Qh(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new TZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new zO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new AZ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case cv:t=this.InterpolantFactoryMethodDiscrete;break;case hv:t=this.InterpolantFactoryMethodLinear;break;case sw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return cv;case this.InterpolantFactoryMethodLinear:return hv;case this.InterpolantFactoryMethodSmooth:return sw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let a=0,o=i-1;for(;a!==i&&r[a]<e;)++a;for(;o!==-1&&r[o]>t;)--o;if(++o,a!==0||o!==i){a>=o&&(o=Math.max(o,1),a=o-1);const s=this.getValueSize();this.times=r.slice(a,o),this.values=this.values.slice(a*s,o*s)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==a;s++){const l=r[s];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,o),e=!1;break}o=l}if(i!==void 0&&_Z(i))for(let s=0,l=i.length;s!==l;++s){const u=i[s];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===sw,a=e.length-1;let o=1;for(let s=1;s<a;++s){let l=!1;const u=e[s],c=e[s+1];if(u!==c&&(s!==1||u!==e[0]))if(i)l=!0;else{const h=s*r,d=h-r,f=h+r;for(let p=0;p!==r;++p){const v=t[h+p];if(v!==t[d+p]||v!==t[f+p]){l=!0;break}}}if(l){if(s!==o){e[o]=e[s];const h=s*r,d=o*r;for(let f=0;f!==r;++f)t[d+f]=t[h+f]}++o}}if(a>0){e[o]=e[a];for(let s=a*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[s+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ls.prototype.TimeBufferType=Float32Array;Ls.prototype.ValueBufferType=Float32Array;Ls.prototype.DefaultInterpolation=hv;class Hd extends Ls{}Hd.prototype.ValueTypeName="bool";Hd.prototype.ValueBufferType=Array;Hd.prototype.DefaultInterpolation=cv;Hd.prototype.InterpolantFactoryMethodLinear=void 0;Hd.prototype.InterpolantFactoryMethodSmooth=void 0;class UO extends Ls{}UO.prototype.ValueTypeName="color";class _v extends Ls{}_v.prototype.ValueTypeName="number";class MZ extends xy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=(r-t)/(i-t);let u=e*s;for(let c=u+s;u!==c;u+=4)yi.slerpFlat(a,0,o,u-s,o,u,l);return a}}class Bm extends Ls{InterpolantFactoryMethodLinear(e){return new MZ(this.times,this.values,this.getValueSize(),e)}}Bm.prototype.ValueTypeName="quaternion";Bm.prototype.DefaultInterpolation=hv;Bm.prototype.InterpolantFactoryMethodSmooth=void 0;class Vd extends Ls{}Vd.prototype.ValueTypeName="string";Vd.prototype.ValueBufferType=Array;Vd.prototype.DefaultInterpolation=cv;Vd.prototype.InterpolantFactoryMethodLinear=void 0;Vd.prototype.InterpolantFactoryMethodSmooth=void 0;class Cv extends Ls{}Cv.prototype.ValueTypeName="vector";class Av{constructor(e,t=-1,r,i=m_){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=So(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,s=r.length;o!==s;++o)t.push(T6e(r[o]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,o=r.length;a!==o;++a)t.push(Ls.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const a=t.length,o=[];for(let s=0;s<a;s++){let l=[],u=[];l.push((s+a-1)%a,s,(s+1)%a),u.push(0,1,0);const c=CZ(l);l=i3(l,1,c),u=i3(u,1,c),!i&&l[0]===0&&(l.push(a),u.push(u[0])),o.push(new _v(".morphTargetInfluences["+t[s].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let s=0,l=e.length;s<l;s++){const u=e[s],c=u.name.match(a);if(c&&c.length>1){const h=c[1];let d=i[h];d||(i[h]=d=[]),d.push(u)}}const o=[];for(const s in i)o.push(this.CreateFromMorphTargetSequence(s,i[s],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(c,h,d,f,p){if(d.length!==0){const v=[],y=[];BO(d,v,y,f),v.length!==0&&p.push(new c(h,v,y))}},i=[],a=e.name||"default",o=e.fps||30,s=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let c=0;c<u.length;c++){const h=u[c].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let f;for(f=0;f<h.length;f++)if(h[f].morphTargets)for(let p=0;p<h[f].morphTargets.length;p++)d[h[f].morphTargets[p]]=-1;for(const p in d){const v=[],y=[];for(let g=0;g!==h[f].morphTargets.length;++g){const w=h[f];v.push(w.time),y.push(w.morphTarget===p?1:0)}i.push(new _v(".morphTargetInfluence["+p+"]",v,y))}l=d.length*o}else{const d=".bones["+t[c].name+"]";r(Cv,d+".position",h,"pos",i),r(Bm,d+".quaternion",h,"rot",i),r(Cv,d+".scale",h,"scl",i)}}return i.length===0?null:new this(a,l,i,s)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function A6e(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _v;case"vector":case"vector2":case"vector3":case"vector4":return Cv;case"color":return UO;case"quaternion":return Bm;case"bool":case"boolean":return Hd;case"string":return Vd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function T6e(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=A6e(n.type);if(n.times===void 0){const t=[],r=[];BO(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ou={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class jO{constructor(e,t,r){const i=this;let a=!1,o=0,s=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){s++,a===!1&&i.onStart!==void 0&&i.onStart(c,o,s),a=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,s),o===s&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,d=u.length;h<d;h+=2){const f=u[h],p=u[h+1];if(f.global&&(f.lastIndex=0),f.test(c))return p}return null}}}const DZ=new jO;class Qa{constructor(e){this.manager=e!==void 0?e:DZ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,a){r.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Qa.DEFAULT_MATERIAL_NAME="__DEFAULT";const $l={};class M6e extends Error{constructor(e,t){super(e),this.response=t}}class Cu extends Qa{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=ou.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if($l[e]!==void 0){$l[e].push({onLoad:t,onProgress:r,onError:i});return}$l[e]=[],$l[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=$l[e],h=u.body.getReader(),d=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),f=d?parseInt(d):0,p=f!==0;let v=0;const y=new ReadableStream({start(g){w();function w(){h.read().then(({done:b,value:m})=>{if(b)g.close();else{v+=m.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:v,total:f});for(let S=0,C=c.length;S<C;S++){const T=c[S];T.onProgress&&T.onProgress(x)}g.enqueue(m),w()}})}}});return new Response(y)}else throw new M6e(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,s));case"json":return u.json();default:if(s===void 0)return u.text();{const c=/charset="?([^;"\s]*)"?/i.exec(s),h=c&&c[1]?c[1].toLowerCase():void 0,d=new TextDecoder(h);return u.arrayBuffer().then(f=>d.decode(f))}}}).then(u=>{ou.add(e,u);const c=$l[e];delete $l[e];for(let h=0,d=c.length;h<d;h++){const f=c[h];f.onLoad&&f.onLoad(u)}}).catch(u=>{const c=$l[e];if(c===void 0)throw this.manager.itemError(e),u;delete $l[e];for(let h=0,d=c.length;h<d;h++){const f=c[h];f.onError&&f.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class D6e extends Qa{constructor(e){super(e)}load(e,t,r,i){const a=this,o=new Cu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(s){try{t(a.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Av.parse(e[r]);t.push(i)}return t}}class k6e extends Qa{constructor(e){super(e)}load(e,t,r,i){const a=this,o=[],s=new __,l=new Cu(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(a.withCredentials);let u=0;function c(h){l.load(e[h],function(d){const f=a.parse(d,!0);o[h]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},u+=1,u===6&&(f.mipmapCount===1&&(s.minFilter=sr),s.image=o,s.format=f.format,s.needsUpdate=!0,t&&t(s))},r,i)}if(Array.isArray(e))for(let h=0,d=e.length;h<d;++h)c(h);else l.load(e,function(h){const d=a.parse(h,!0);if(d.isCubemap){const f=d.mipmaps.length/d.mipmapCount;for(let p=0;p<f;p++){o[p]={mipmaps:[]};for(let v=0;v<d.mipmapCount;v++)o[p].mipmaps.push(d.mipmaps[p*d.mipmapCount+v]),o[p].format=d.format,o[p].width=d.width,o[p].height=d.height}s.image=o}else s.image.width=d.width,s.image.height=d.height,s.mipmaps=d.mipmaps;d.mipmapCount===1&&(s.minFilter=sr),s.format=d.format,s.needsUpdate=!0,t&&t(s)},r,i);return s}}class Tv extends Qa{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=ou.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;const s=yv("img");function l(){c(),ou.add(e,this),t&&t(this),a.manager.itemEnd(e)}function u(h){c(),i&&i(h),a.manager.itemError(e),a.manager.itemEnd(e)}function c(){s.removeEventListener("load",l,!1),s.removeEventListener("error",u,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),a.manager.itemStart(e),s.src=e,s}}class N6e extends Qa{constructor(e){super(e)}load(e,t,r,i){const a=new my;a.colorSpace=ni;const o=new Tv(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function l(u){o.load(e[u],function(c){a.images[u]=c,s++,s===6&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return a}}class O6e extends Qa{constructor(e){super(e)}load(e,t,r,i){const a=this,o=new hd,s=new Cu(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(a.withCredentials),s.load(e,function(l){let u;try{u=a.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Zi,o.wrapT=u.wrapT!==void 0?u.wrapT:Zi,o.magFilter=u.magFilter!==void 0?u.magFilter:sr,o.minFilter=u.minFilter!==void 0?u.minFilter:sr,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=sl),u.mipmapCount===1&&(o.minFilter=sr),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},r,i),o}}class P6e extends Qa{constructor(e){super(e)}load(e,t,r,i){const a=new Sr,o=new Tv(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(s){a.image=s,a.needsUpdate=!0,t!==void 0&&t(a)},r,i),a}}class ch extends _n{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new wt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class kZ extends ch{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.groundColor=new wt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const HA=new Yt,o8=new me,s8=new me;class HO{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Qe(512,512),this.map=null,this.mapPass=null,this.matrix=new Yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new gy,this._frameExtents=new Qe(1,1),this._viewportCount=1,this._viewports=[new Bn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;o8.setFromMatrixPosition(e.matrixWorld),t.position.copy(o8),s8.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(s8),t.updateMatrixWorld(),HA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(HA),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(HA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class R6e extends HO{constructor(){super(new Nr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Qp*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(r!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class NZ extends ch{constructor(e,t,r=0,i=Math.PI/3,a=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.distance=r,this.angle=i,this.penumbra=a,this.decay=o,this.map=null,this.shadow=new R6e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const l8=new Yt,Og=new me,VA=new me;class I6e extends HO{constructor(){super(new Nr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Qe(4,2),this._viewportCount=6,this._viewports=[new Bn(2,1,1,1),new Bn(0,1,1,1),new Bn(3,1,1,1),new Bn(1,1,1,1),new Bn(3,0,1,1),new Bn(1,0,1,1)],this._cubeDirections=[new me(1,0,0),new me(-1,0,0),new me(0,0,1),new me(0,0,-1),new me(0,1,0),new me(0,-1,0)],this._cubeUps=[new me(0,1,0),new me(0,1,0),new me(0,1,0),new me(0,1,0),new me(0,0,1),new me(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),Og.setFromMatrixPosition(e.matrixWorld),r.position.copy(Og),VA.copy(r.position),VA.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(VA),r.updateMatrixWorld(),i.makeTranslation(-Og.x,-Og.y,-Og.z),l8.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(l8)}}class OZ extends ch{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new I6e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class L6e extends HO{constructor(){super(new au(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class PZ extends ch{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.shadow=new L6e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class RZ extends ch{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class IZ extends ch{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class LZ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new me)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,a=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*a),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*a)),t.addScaledVector(o[6],.315392*(3*a*a-1)),t.addScaledVector(o[7],1.092548*(r*a)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,a=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*a),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*a),t.addScaledVector(o[6],.743125*a*a-.247708),t.addScaledVector(o[7],2*.429043*r*a),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*r*a,t[8]=.546274*(r*r-i*i)}}class FZ extends ch{constructor(e=new LZ,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class z_ extends Qa{constructor(e){super(e),this.textures={}}load(e,t,r,i){const a=this,o=new Cu(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(s){try{t(a.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const i=z_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new wt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const o=e.uniforms[a];switch(i.uniforms[a]={},o.type){case"t":i.uniforms[a].value=r(o.value);break;case"c":i.uniforms[a].value=new wt().setHex(o.value);break;case"v2":i.uniforms[a].value=new Qe().fromArray(o.value);break;case"v3":i.uniforms[a].value=new me().fromArray(o.value);break;case"v4":i.uniforms[a].value=new Bn().fromArray(o.value);break;case"m3":i.uniforms[a].value=new pn().fromArray(o.value);break;case"m4":i.uniforms[a].value=new Yt().fromArray(o.value);break;default:i.uniforms[a].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new Qe().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Qe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:mZ,SpriteMaterial:AO,RawShaderMaterial:gZ,ShaderMaterial:ts,PointsMaterial:MO,MeshPhysicalMaterial:vZ,MeshStandardMaterial:FO,MeshPhongMaterial:yZ,MeshToonMaterial:bZ,MeshNormalMaterial:xZ,MeshLambertMaterial:wZ,MeshDepthMaterial:EO,MeshDistanceMaterial:_O,MeshBasicMaterial:lh,MeshMatcapMaterial:SZ,LineDashedMaterial:EZ,LineBasicMaterial:Ra,Material:Li};return new t[e]}}class a3{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class BZ extends sn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class zZ extends Qa{constructor(e){super(e)}load(e,t,r,i){const a=this,o=new Cu(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(s){try{t(a.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(d,f){if(t[f]!==void 0)return t[f];const p=d.interleavedBuffers[f],v=a(d,p.buffer),y=lp(p.type,v),g=new S_(y,p.stride);return g.uuid=p.uuid,t[f]=g,g}function a(d,f){if(r[f]!==void 0)return r[f];const p=d.arrayBuffers[f],v=new Uint32Array(p).buffer;return r[f]=v,v}const o=e.isInstancedBufferGeometry?new BZ:new sn,s=e.data.index;if(s!==void 0){const d=lp(s.type,s.array);o.setIndex(new Hn(d,1))}const l=e.data.attributes;for(const d in l){const f=l[d];let p;if(f.isInterleavedBufferAttribute){const v=i(e.data,f.data);p=new Cd(v,f.itemSize,f.offset,f.normalized)}else{const v=lp(f.type,f.array),y=f.isInstancedBufferAttribute?tm:Hn;p=new y(v,f.itemSize,f.normalized)}f.name!==void 0&&(p.name=f.name),f.usage!==void 0&&p.setUsage(f.usage),o.setAttribute(d,p)}const u=e.data.morphAttributes;if(u)for(const d in u){const f=u[d],p=[];for(let v=0,y=f.length;v<y;v++){const g=f[v];let w;if(g.isInterleavedBufferAttribute){const b=i(e.data,g.data);w=new Cd(b,g.itemSize,g.offset,g.normalized)}else{const b=lp(g.type,g.array);w=new Hn(b,g.itemSize,g.normalized)}g.name!==void 0&&(w.name=g.name),p.push(w)}o.morphAttributes[d]=p}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const c=e.data.groups||e.data.drawcalls||e.data.offsets;if(c!==void 0)for(let d=0,f=c.length;d!==f;++d){const p=c[d];o.addGroup(p.start,p.count,p.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const d=new me;h.center!==void 0&&d.fromArray(h.center),o.boundingSphere=new ea(d,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class F6e extends Qa{constructor(e){super(e)}load(e,t,r,i){const a=this,o=this.path===""?a3.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const s=new Cu(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?a3.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new Cu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const o=await a.loadAsync(e,t),s=JSON.parse(o),l=s.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(s)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),s=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,s),u=this.parseObject(e.object,a,l,s,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let h=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,s,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const a=new dd().fromJSON(e[r]);t[a.uuid]=a}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,o=e.length;a<o;a++){const s=new E_().fromJSON(e[a],i);r[s.uuid]=s}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new zZ;for(let a=0,o=e.length;a<o;a++){let s;const l=e[a];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(l);break;default:l.type in a8?s=a8[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}s.uuid=l.uuid,l.name!==void 0&&(s.name=l.name),l.userData!==void 0&&(s.userData=l.userData),r[l.uuid]=s}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const a=new z_;a.setTextures(t);for(let o=0,s=e.length;o<s;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=a.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],a=Av.parse(i);t[a.uuid]=a}return t}parseImages(e,t){const r=this,i={};let a;function o(l){return r.manager.itemStart(l),a.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function s(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(c)}else return l.data?{data:lp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new jO(t);a=new Tv(l),a.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const h=e[u],d=h.url;if(Array.isArray(d)){const f=[];for(let p=0,v=d.length;p<v;p++){const y=d[p],g=s(y);g!==null&&(g instanceof HTMLImageElement?f.push(g):f.push(new hd(g.data,g.width,g.height)))}i[h.uuid]=new Kh(f)}else{const f=s(h.url);i[h.uuid]=new Kh(f)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function a(o){if(typeof o=="string"){const s=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s)?s:t.resourcePath+s;return await i.loadAsync(l)}else return o.data?{data:lp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Tv(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,s=e.length;o<s;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let h=0,d=u.length;h<d;h++){const f=u[h],p=await a(f);p!==null&&(p instanceof HTMLImageElement?c.push(p):c.push(new hd(p.data,p.width,p.height)))}r[l.uuid]=new Kh(c)}else{const c=await a(l.url);r[l.uuid]=new Kh(c)}}}return r}parseTextures(e,t){function r(a,o){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),o[a])}const i={};if(e!==void 0)for(let a=0,o=e.length;a<o;a++){const s=e[a];s.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),t[s.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const l=t[s.image],u=l.data;let c;Array.isArray(u)?(c=new my,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new hd:c=new Sr,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=s.uuid,s.name!==void 0&&(c.name=s.name),s.mapping!==void 0&&(c.mapping=r(s.mapping,B6e)),s.channel!==void 0&&(c.channel=s.channel),s.offset!==void 0&&c.offset.fromArray(s.offset),s.repeat!==void 0&&c.repeat.fromArray(s.repeat),s.center!==void 0&&c.center.fromArray(s.center),s.rotation!==void 0&&(c.rotation=s.rotation),s.wrap!==void 0&&(c.wrapS=r(s.wrap[0],u8),c.wrapT=r(s.wrap[1],u8)),s.format!==void 0&&(c.format=s.format),s.internalFormat!==void 0&&(c.internalFormat=s.internalFormat),s.type!==void 0&&(c.type=s.type),s.colorSpace!==void 0&&(c.colorSpace=s.colorSpace),s.encoding!==void 0&&(c.encoding=s.encoding),s.minFilter!==void 0&&(c.minFilter=r(s.minFilter,c8)),s.magFilter!==void 0&&(c.magFilter=r(s.magFilter,c8)),s.anisotropy!==void 0&&(c.anisotropy=s.anisotropy),s.flipY!==void 0&&(c.flipY=s.flipY),s.generateMipmaps!==void 0&&(c.generateMipmaps=s.generateMipmaps),s.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=s.premultiplyAlpha),s.unpackAlignment!==void 0&&(c.unpackAlignment=s.unpackAlignment),s.compareFunction!==void 0&&(c.compareFunction=s.compareFunction),s.userData!==void 0&&(c.userData=s.userData),i[s.uuid]=c}return i}parseObject(e,t,r,i,a){let o;function s(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const f=[];for(let p=0,v=d.length;p<v;p++){const y=d[p];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),f.push(r[y])}return f}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function u(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let c,h;switch(e.type){case"Scene":o=new bv,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new wt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new w_(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new x_(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Nr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new au(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new RZ(e.color,e.intensity);break;case"DirectionalLight":o=new PZ(e.color,e.intensity);break;case"PointLight":o=new OZ(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new IZ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new NZ(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new kZ(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new FZ().fromJSON(e);break;case"SkinnedMesh":c=s(e.geometry),h=l(e.material),o=new tZ(c,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=s(e.geometry),h=l(e.material),o=new Yr(c,h);break;case"InstancedMesh":c=s(e.geometry),h=l(e.material);const d=e.count,f=e.instanceMatrix,p=e.instanceColor;o=new nZ(c,h,d),o.instanceMatrix=new tm(new Float32Array(f.array),16),p!==void 0&&(o.instanceColor=new tm(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":c=s(e.geometry),h=l(e.material),o=new rZ(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=c,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(v=>{const y=new Ca;y.min.fromArray(v.boxMin),y.max.fromArray(v.boxMax);const g=new ea;return g.radius=v.sphereRadius,g.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:y,sphereInitialized:v.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":o=new eZ;break;case"Line":o=new $c(s(e.geometry),l(e.material));break;case"LineLoop":o=new iZ(s(e.geometry),l(e.material));break;case"LineSegments":o=new Ml(s(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new aZ(s(e.geometry),l(e.material));break;case"Sprite":o=new QY(l(e.material));break;case"Group":o=new hp;break;case"Bone":o=new TO;break;default:o=new _n}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let f=0;f<d.length;f++)o.add(this.parseObject(d[f],t,r,i,a))}if(e.animations!==void 0){const d=e.animations;for(let f=0;f<d.length;f++){const p=d[f];o.animations.push(a[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let f=0;f<d.length;f++){const p=d[f],v=o.getObjectByProperty("uuid",p.object);v!==void 0&&o.addLevel(v,p.distance,p.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const B6e={UVMapping:f_,CubeReflectionMapping:_u,CubeRefractionMapping:Gc,EquirectangularReflectionMapping:ov,EquirectangularRefractionMapping:sv,CubeUVReflectionMapping:Rm},u8={RepeatWrapping:lv,ClampToEdgeWrapping:Zi,MirroredRepeatWrapping:uv},c8={NearestFilter:zr,NearestMipmapNearestFilter:jS,NearestMipmapLinearFilter:zh,LinearFilter:sr,LinearMipmapNearestFilter:v0,LinearMipmapLinearFilter:sl};class z6e extends Qa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=ou.get(e);if(o!==void 0){if(a.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),a.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o}const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader;const l=fetch(e,s).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(u){return ou.add(e,u),t&&t(u),a.manager.itemEnd(e),u}).catch(function(u){i&&i(u),ou.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});ou.add(e,l),a.manager.itemStart(e)}}let tx;class VO{static getContext(){return tx===void 0&&(tx=new(window.AudioContext||window.webkitAudioContext)),tx}static setContext(e){tx=e}}class U6e extends Qa{constructor(e){super(e)}load(e,t,r,i){const a=this,o=new Cu(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);VO.getContext().decodeAudioData(u,function(c){t(c)}).catch(s)}catch(u){s(u)}},r,i);function s(l){i?i(l):console.error(l),a.manager.itemError(e)}}}const h8=new Yt,d8=new Yt,Ah=new Yt;class j6e{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Nr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Nr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ah.copy(e.projectionMatrix);const r=t.eyeSep/2,i=r*t.near/t.focus,a=t.near*Math.tan(ld*t.fov*.5)/t.zoom;let o,s;d8.elements[12]=-r,h8.elements[12]=r,o=-a*t.aspect+i,s=a*t.aspect+i,Ah.elements[0]=2*t.near/(s-o),Ah.elements[8]=(s+o)/(s-o),this.cameraL.projectionMatrix.copy(Ah),o=-a*t.aspect-i,s=a*t.aspect-i,Ah.elements[0]=2*t.near/(s-o),Ah.elements[8]=(s+o)/(s-o),this.cameraR.projectionMatrix.copy(Ah)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(d8),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(h8)}}class WO{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=f8(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=f8();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function f8(){return(typeof performance>"u"?Date:performance).now()}const Th=new me,p8=new yi,H6e=new me,Mh=new me;class V6e extends _n{constructor(){super(),this.type="AudioListener",this.context=VO.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new WO}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Th,p8,H6e),Mh.set(0,0,-1).applyQuaternion(p8),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Th.x,i),t.positionY.linearRampToValueAtTime(Th.y,i),t.positionZ.linearRampToValueAtTime(Th.z,i),t.forwardX.linearRampToValueAtTime(Mh.x,i),t.forwardY.linearRampToValueAtTime(Mh.y,i),t.forwardZ.linearRampToValueAtTime(Mh.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Th.x,Th.y,Th.z),t.setOrientation(Mh.x,Mh.y,Mh.z,r.x,r.y,r.z)}}class UZ extends _n{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Dh=new me,m8=new yi,W6e=new me,kh=new me;class q6e extends UZ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Dh,m8,W6e),kh.set(0,0,1).applyQuaternion(m8);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Dh.x,r),t.positionY.linearRampToValueAtTime(Dh.y,r),t.positionZ.linearRampToValueAtTime(Dh.z,r),t.orientationX.linearRampToValueAtTime(kh.x,r),t.orientationY.linearRampToValueAtTime(kh.y,r),t.orientationZ.linearRampToValueAtTime(kh.z,r)}else t.setPosition(Dh.x,Dh.y,Dh.z),t.setOrientation(kh.x,kh.y,kh.z)}}class G6e{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class jZ{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,a,o;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,a=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let s=0;s!==i;++s)r[a+s]=r[s];o=t}else{o+=t;const s=t/o;this._mixBufferRegion(r,a,0,s,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-a,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){s.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let a=r,o=i;a!==o;++a)t[a]=t[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,a){if(i>=.5)for(let o=0;o!==a;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){yi.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,a){const o=this._workIndex*a;yi.multiplyQuaternionsFlat(e,o,e,t,e,r),yi.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,a){const o=1-i;for(let s=0;s!==a;++s){const l=t+s;e[l]=e[l]*o+e[r+s]*i}}_lerpAdditive(e,t,r,i,a){for(let o=0;o!==a;++o){const s=t+o;e[s]=e[s]+e[r+o]*i}}}const qO="\\[\\]\\.:\\/",$6e=new RegExp("["+qO+"]","g"),GO="[^"+qO+"]",X6e="[^"+qO.replace("\\.","")+"]",Y6e=/((?:WC+[\/:])*)/.source.replace("WC",GO),Z6e=/(WCOD+)?/.source.replace("WCOD",X6e),J6e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",GO),K6e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",GO),Q6e=new RegExp("^"+Y6e+Z6e+J6e+K6e+"$"),eUe=["material","materials","bones","map"];class tUe{constructor(e,t,r){const i=r||Cn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Cn{constructor(e,t,r){this.path=t,this.parsedPath=r||Cn.parseTrackName(t),this.node=Cn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Cn.Composite(e,t,r):new Cn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace($6e,"")}static parseTrackName(e){const t=Q6e.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);eUe.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(a){for(let o=0;o<a.length;o++){const s=a[o];if(s.name===t||s.uuid===t)return s;const l=r(s.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=Cn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Cn.Composite=tUe;Cn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Cn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Cn.prototype.GetterByBindingType=[Cn.prototype._getValue_direct,Cn.prototype._getValue_array,Cn.prototype._getValue_arrayElement,Cn.prototype._getValue_toArray];Cn.prototype.SetterByBindingTypeAndVersioning=[[Cn.prototype._setValue_direct,Cn.prototype._setValue_direct_setNeedsUpdate,Cn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_array,Cn.prototype._setValue_array_setNeedsUpdate,Cn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_arrayElement,Cn.prototype._setValue_arrayElement_setNeedsUpdate,Cn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_fromArray,Cn.prototype._setValue_fromArray_setNeedsUpdate,Cn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class nUe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=So(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length;let s,l=e.length,u=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const d=arguments[c],f=d.uuid;let p=t[f];if(p===void 0){p=l++,t[f]=p,e.push(d);for(let v=0,y=o;v!==y;++v)a[v].push(new Cn(d,r[v],i[v]))}else if(p<u){s=e[p];const v=--u,y=e[v];t[y.uuid]=p,e[p]=y,t[f]=v,e[v]=d;for(let g=0,w=o;g!==w;++g){const b=a[g],m=b[v];let x=b[p];b[p]=m,x===void 0&&(x=new Cn(d,r[g],i[g])),b[v]=x}}else e[p]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=a){const h=a++,d=e[h];t[d.uuid]=c,e[c]=d,t[u]=h,e[h]=l;for(let f=0,p=i;f!==p;++f){const v=r[f],y=v[h],g=v[c];v[c]=y,v[h]=g}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_,o=e.length;for(let s=0,l=arguments.length;s!==l;++s){const u=arguments[s],c=u.uuid,h=t[c];if(h!==void 0)if(delete t[c],h<a){const d=--a,f=e[d],p=--o,v=e[p];t[f.uuid]=h,e[h]=f,t[v.uuid]=d,e[d]=v,e.pop();for(let y=0,g=i;y!==g;++y){const w=r[y],b=w[d],m=w[p];w[h]=b,w[d]=m,w.pop()}}else{const d=--o,f=e[d];d>0&&(t[f.uuid]=h),e[h]=f,e.pop();for(let p=0,v=i;p!==v;++p){const y=r[p];y[h]=y[d],y.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const a=this._bindings;if(i!==void 0)return a[i];const o=this._paths,s=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,h=new Array(u);i=a.length,r[e]=i,o.push(e),s.push(t),a.push(h);for(let d=c,f=l.length;d!==f;++d){const p=l[d];h[d]=new Cn(p,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length-1,l=o[s],u=e[s];t[u]=r,o[r]=l,o.pop(),a[r]=a[s],a.pop(),i[r]=i[s],i.pop()}}}class HZ{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const a=t.tracks,o=a.length,s=new Array(o),l={endingStart:Zh,endingEnd:Zh};for(let u=0;u!==o;++u){const c=a[u].createInterpolant(null);s[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=EY,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,a=e._clip.duration,o=a/i,s=i/a;e.warp(1,o,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,a=i.time,o=this.timeScale;let s=this._timeScaleInterpolant;s===null&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const l=s.parameterPositions,u=s.sampleValues;return l[0]=a,l[1]=a+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case pO:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulateAdditive(s);break;case m_:default:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(i,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const o=r===_Y;if(e===0)return a===-1?i:o&&(a&1)===1?t-i:i;if(r===SY){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const s=Math.floor(i/t);i-=t*s,a+=Math.abs(s);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(o&&(a&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Jh,i.endingEnd=Jh):(e?i.endingStart=this.zeroSlopeAtStart?Jh:Zh:i.endingStart=dv,t?i.endingEnd=this.zeroSlopeAtEnd?Jh:Zh:i.endingEnd=dv)}_scheduleFading(e,t,r){const i=this._mixer,a=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,l=o.sampleValues;return s[0]=a,l[0]=t,s[1]=a+e,l[1]=r,this}}const rUe=new Float32Array(1);class iUe extends Tl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,o=e._propertyBindings,s=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let h=0;h!==a;++h){const d=i[h],f=d.name;let p=c[f];if(p!==void 0)++p.referenceCount,o[h]=p;else{if(p=o[h],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}const v=t&&t._propertyBindings[h].binding.parsedPath;p=new jZ(Cn.create(r,f,v),d.ValueTypeName,d.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[h]=p}s[h].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,a=this._actionsByClip;let o=a[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=o;else{const s=o.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,o=this._actionsByClip,s=o[a],l=s.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const h=s.actionByRoot,d=(e._localRoot||this._root).uuid;delete h[d],l.length===0&&delete o[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,a=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,o=this._bindingsByRootAndName,s=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete s[a],Object.keys(s).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new zO(new Float32Array(2),new Float32Array(2),1,rUe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=r,t[r]=a}clipAction(e,t,r){const i=t||this._root,a=i.uuid;let o=typeof e=="string"?Av.findByName(i,e):e;const s=o!==null?o.uuid:e,l=this._actionsByClip[s];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=m_),l!==void 0){const h=l.actionByRoot[a];if(h!==void 0&&h.blendMode===r)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new HZ(this,o,t,r);return this._bindAction(c,u),this._addInactiveAction(c,s,a),c}existingAction(e,t){const r=t||this._root,i=r.uuid,a=typeof e=="string"?Av.findByName(r,e):e,o=a?a.uuid:e,s=this._actionsByClip[o];return s!==void 0&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,a,o);const s=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)s[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const o=a.knownActions;for(let s=0,l=o.length;s!==l;++s){const u=o[s];this._deactivateAction(u);const c=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const s=r[o].actionByRoot,l=s[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const o in a){const s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class $O{constructor(e){this.value=e}clone(){return new $O(this.value.clone===void 0?this.value:this.value.clone())}}let aUe=0;class oUe extends Tl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:aUe++}),this.name="",this.usage=gv,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const a=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<a.length;o++)this.uniforms.push(a[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class sUe extends S_{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class lUe{constructor(e,t,r,i,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class XO{constructor(e,t,r=0,i=1/0){this.ray=new Ud(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new cd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return o3(e,this,r,t),r.sort(g8),r}intersectObjects(e,t=!0,r=[]){for(let i=0,a=e.length;i<a;i++)o3(e[i],this,r,t);return r.sort(g8),r}}function g8(n,e){return n.distance-e.distance}function o3(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let a=0,o=i.length;a<o;a++)o3(i[a],e,t,!0)}}class s3{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(kr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class uUe{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const v8=new Qe;class cUe{constructor(e=new Qe(1/0,1/0),t=new Qe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=v8.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,v8).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const y8=new me,nx=new me;class hUe{constructor(e=new me,t=new me){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){y8.subVectors(e,this.start),nx.subVectors(this.end,this.start);const r=nx.dot(nx);let i=nx.dot(y8)/r;return t&&(i=kr(i,0,1)),i}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const b8=new me;class dUe extends _n{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new sn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,s=1,l=32;o<l;o++,s++){const u=o/l*Math.PI*2,c=s/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Mt(i,3));const a=new Ra({fog:!1,toneMapped:!1});this.cone=new Ml(r,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),b8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(b8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ec=new me,rx=new Yt,WA=new Yt;class fUe extends Ml{constructor(e){const t=VZ(e),r=new sn,i=[],a=[],o=new wt(0,0,1),s=new wt(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(o.r,o.g,o.b),a.push(s.r,s.g,s.b))}r.setAttribute("position",new Mt(i,3)),r.setAttribute("color",new Mt(a,3));const l=new Ra({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");WA.copy(this.root.matrixWorld).invert();for(let a=0,o=0;a<t.length;a++){const s=t[a];s.parent&&s.parent.isBone&&(rx.multiplyMatrices(WA,s.matrixWorld),ec.setFromMatrixPosition(rx),i.setXYZ(o,ec.x,ec.y,ec.z),rx.multiplyMatrices(WA,s.parent.matrixWorld),ec.setFromMatrixPosition(rx),i.setXYZ(o+1,ec.x,ec.y,ec.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function VZ(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,VZ(n.children[t]));return e}class pUe extends Yr{constructor(e,t,r){const i=new by(t,4,2),a=new lh({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const mUe=new me,x8=new wt,w8=new wt;class gUe extends _n{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new yy(t);i.rotateY(Math.PI*.5),this.material=new lh({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),o=new Float32Array(a.count*3);i.setAttribute("color",new Hn(o,3)),this.add(new Yr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");x8.copy(this.light.color),w8.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const a=r<i/2?x8:w8;t.setXYZ(r,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(mUe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class vUe extends Ml{constructor(e=10,t=10,r=4473924,i=8947848){r=new wt(r),i=new wt(i);const a=t/2,o=e/t,s=e/2,l=[],u=[];for(let d=0,f=0,p=-s;d<=t;d++,p+=o){l.push(-s,0,p,s,0,p),l.push(p,0,-s,p,0,s);const v=d===a?r:i;v.toArray(u,f),f+=3,v.toArray(u,f),f+=3,v.toArray(u,f),f+=3,v.toArray(u,f),f+=3}const c=new sn;c.setAttribute("position",new Mt(l,3)),c.setAttribute("color",new Mt(u,3));const h=new Ra({vertexColors:!0,toneMapped:!1});super(c,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class yUe extends Ml{constructor(e=10,t=16,r=8,i=64,a=4473924,o=8947848){a=new wt(a),o=new wt(o);const s=[],l=[];if(t>1)for(let h=0;h<t;h++){const d=h/t*(Math.PI*2),f=Math.sin(d)*e,p=Math.cos(d)*e;s.push(0,0,0),s.push(f,0,p);const v=h&1?a:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let h=0;h<r;h++){const d=h&1?a:o,f=e-e/r*h;for(let p=0;p<i;p++){let v=p/i*(Math.PI*2),y=Math.sin(v)*f,g=Math.cos(v)*f;s.push(y,0,g),l.push(d.r,d.g,d.b),v=(p+1)/i*(Math.PI*2),y=Math.sin(v)*f,g=Math.cos(v)*f,s.push(y,0,g),l.push(d.r,d.g,d.b)}}const u=new sn;u.setAttribute("position",new Mt(s,3)),u.setAttribute("color",new Mt(l,3));const c=new Ra({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const S8=new me,ix=new me,E8=new me;class bUe extends _n{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new sn;i.setAttribute("position",new Mt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new Ra({fog:!1,toneMapped:!1});this.lightPlane=new $c(i,a),this.add(this.lightPlane),i=new sn,i.setAttribute("position",new Mt([0,0,0,0,0,1],3)),this.targetLine=new $c(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),S8.setFromMatrixPosition(this.light.matrixWorld),ix.setFromMatrixPosition(this.light.target.matrixWorld),E8.subVectors(ix,S8),this.lightPlane.lookAt(ix),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ix),this.targetLine.scale.z=E8.length()}}const ax=new me,Tr=new py;class xUe extends Ml{constructor(e){const t=new sn,r=new Ra({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],o={};s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4");function s(p,v){l(p),l(v)}function l(p){i.push(0,0,0),a.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(i.length/3-1)}t.setAttribute("position",new Mt(i,3)),t.setAttribute("color",new Mt(a,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new wt(16755200),c=new wt(16711680),h=new wt(43775),d=new wt(16777215),f=new wt(3355443);this.setColors(u,c,h,d,f)}setColors(e,t,r,i,a){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Tr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Lr("c",t,e,Tr,0,0,-1),Lr("t",t,e,Tr,0,0,1),Lr("n1",t,e,Tr,-r,-i,-1),Lr("n2",t,e,Tr,r,-i,-1),Lr("n3",t,e,Tr,-r,i,-1),Lr("n4",t,e,Tr,r,i,-1),Lr("f1",t,e,Tr,-r,-i,1),Lr("f2",t,e,Tr,r,-i,1),Lr("f3",t,e,Tr,-r,i,1),Lr("f4",t,e,Tr,r,i,1),Lr("u1",t,e,Tr,r*.7,i*1.1,-1),Lr("u2",t,e,Tr,-r*.7,i*1.1,-1),Lr("u3",t,e,Tr,0,i*2,-1),Lr("cf1",t,e,Tr,-r,0,1),Lr("cf2",t,e,Tr,r,0,1),Lr("cf3",t,e,Tr,0,-i,1),Lr("cf4",t,e,Tr,0,i,1),Lr("cn1",t,e,Tr,-r,0,-1),Lr("cn2",t,e,Tr,r,0,-1),Lr("cn3",t,e,Tr,0,-i,-1),Lr("cn4",t,e,Tr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Lr(n,e,t,r,i,a,o){ax.set(i,a,o).unproject(r);const s=e[n];if(s!==void 0){const l=t.getAttribute("position");for(let u=0,c=s.length;u<c;u++)l.setXYZ(s[u],ax.x,ax.y,ax.z)}}const ox=new Ca;class wUe extends Ml{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),a=new sn;a.setIndex(new Hn(r,1)),a.setAttribute("position",new Hn(i,3)),super(a,new Ra({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ox.setFromObject(this.object),ox.isEmpty())return;const t=ox.min,r=ox.max,i=this.geometry.attributes.position,a=i.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=t.x,a[4]=r.y,a[5]=r.z,a[6]=t.x,a[7]=t.y,a[8]=r.z,a[9]=r.x,a[10]=t.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=t.z,a[15]=t.x,a[16]=r.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=r.x,a[22]=t.y,a[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class SUe extends Ml{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new sn;a.setIndex(new Hn(r,1)),a.setAttribute("position",new Mt(i,3)),super(a,new Ra({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class EUe extends $c{constructor(e,t=1,r=16776960){const i=r,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new sn;o.setAttribute("position",new Mt(a,3)),o.computeBoundingSphere(),super(o,new Ra({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const s=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new sn;l.setAttribute("position",new Mt(s,3)),l.computeBoundingSphere(),this.add(new Yr(l,new lh({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _8=new me;let sx,qA;class _Ue extends _n{constructor(e=new me(0,0,1),t=new me(0,0,0),r=1,i=16776960,a=r*.2,o=a*.2){super(),this.type="ArrowHelper",sx===void 0&&(sx=new sn,sx.setAttribute("position",new Mt([0,0,0,0,1,0],3)),qA=new Fm(0,.5,1,5,1),qA.translate(0,-.5,0)),this.position.copy(t),this.line=new $c(sx,new Ra({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Yr(qA,new lh({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{_8.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(_8,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class CUe extends Ml{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new sn;i.setAttribute("position",new Mt(t,3)),i.setAttribute("color",new Mt(r,3));const a=new Ra({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,t,r){const i=new wt,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(t),i.toArray(a,6),i.toArray(a,9),i.set(r),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class AUe{constructor(){this.type="ShapePath",this.color=new wt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new xv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,a,o){return this.currentPath.bezierCurveTo(e,t,r,i,a,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const w=[];for(let b=0,m=g.length;b<m;b++){const x=g[b],S=new dd;S.curves=x.curves,w.push(S)}return w}function r(g,w){const b=w.length;let m=!1;for(let x=b-1,S=0;S<b;x=S++){let C=w[x],T=w[S],M=T.x-C.x,A=T.y-C.y;if(Math.abs(A)>Number.EPSILON){if(A<0&&(C=w[S],M=-M,T=w[x],A=-A),g.y<C.y||g.y>T.y)continue;if(g.y===C.y){if(g.x===C.x)return!0}else{const D=A*(g.x-C.x)-M*(g.y-C.y);if(D===0)return!0;if(D<0)continue;m=!m}}else{if(g.y!==C.y)continue;if(T.x<=g.x&&g.x<=C.x||C.x<=g.x&&g.x<=T.x)return!0}}return m}const i=vl.isClockWise,a=this.subPaths;if(a.length===0)return[];let o,s,l;const u=[];if(a.length===1)return s=a[0],l=new dd,l.curves=s.curves,u.push(l),u;let c=!i(a[0].getPoints());c=e?!c:c;const h=[],d=[];let f=[],p=0,v;d[p]=void 0,f[p]=[];for(let g=0,w=a.length;g<w;g++)s=a[g],v=s.getPoints(),o=i(v),o=e?!o:o,o?(!c&&d[p]&&p++,d[p]={s:new dd,p:v},d[p].s.curves=s.curves,c&&p++,f[p]=[]):f[p].push({h:s,p:v[0]});if(!d[0])return t(a);if(d.length>1){let g=!1,w=0;for(let b=0,m=d.length;b<m;b++)h[b]=[];for(let b=0,m=d.length;b<m;b++){const x=f[b];for(let S=0;S<x.length;S++){const C=x[S];let T=!0;for(let M=0;M<d.length;M++)r(C.p,d[M].p)&&(b!==M&&w++,T?(T=!1,h[M].push(C)):g=!0);T&&h[b].push(C)}}w>0&&g===!1&&(f=h)}let y;for(let g=0,w=d.length;g<w;g++){l=d[g].s,u.push(l),y=f[g];for(let b=0,m=y.length;b<m;b++)l.holes.push(y[b].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:h_}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=h_);const TUe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:oO,AddEquation:hc,AddOperation:sY,AdditiveAnimationBlendMode:pO,AdditiveBlending:bD,AgXToneMapping:dY,AlphaFormat:gY,AlwaysCompare:RY,AlwaysDepth:eY,AlwaysStencilFunc:ZD,AmbientLight:RZ,AnimationAction:HZ,AnimationClip:Av,AnimationLoader:D6e,AnimationMixer:iUe,AnimationObjectGroup:nUe,AnimationUtils:C6e,ArcCurve:sZ,ArrayCamera:ZY,ArrowHelper:_Ue,AttachedBindMode:_D,Audio:UZ,AudioAnalyser:G6e,AudioContext:VO,AudioListener:V6e,AudioLoader:U6e,AxesHelper:CUe,BackSide:_a,BasicDepthPacking:CY,BasicShadowMap:LX,BatchedMesh:rZ,Bone:TO,BooleanKeyframeTrack:Hd,Box2:cUe,Box3:Ca,Box3Helper:SUe,BoxGeometry:jd,BoxHelper:wUe,BufferAttribute:Hn,BufferGeometry:sn,BufferGeometryLoader:zZ,ByteType:pY,Cache:ou,Camera:py,CameraHelper:xUe,CanvasTexture:oZ,CapsuleGeometry:A_,CatmullRomCurve3:lZ,CineonToneMapping:cY,CircleGeometry:T_,ClampToEdgeWrapping:Zi,Clock:WO,Color:wt,ColorKeyframeTrack:UO,ColorManagement:Ln,CompressedArrayTexture:Xze,CompressedCubeTexture:Yze,CompressedTexture:__,CompressedTextureLoader:k6e,ConeGeometry:M_,ConstantAlphaFactor:JX,ConstantColorFactor:YX,CubeCamera:jY,CubeReflectionMapping:_u,CubeRefractionMapping:Gc,CubeTexture:my,CubeTextureLoader:N6e,CubeUVReflectionMapping:Rm,CubicBezierCurve:kO,CubicBezierCurve3:uZ,CubicInterpolant:AZ,CullFaceBack:yD,CullFaceFront:IX,CullFaceFrontBack:IIe,CullFaceNone:RX,Curve:Is,CurvePath:hZ,CustomBlending:FX,CustomToneMapping:hY,CylinderGeometry:Fm,Cylindrical:uUe,Data3DTexture:bO,DataArrayTexture:v_,DataTexture:hd,DataTextureLoader:O6e,DataUtils:WLe,DecrementStencilOp:GIe,DecrementWrapStencilOp:XIe,DefaultLoadingManager:DZ,DepthFormat:Rc,DepthStencilFormat:_d,DepthTexture:y_,DetachedBindMode:fY,DirectionalLight:PZ,DirectionalLightHelper:bUe,DiscreteInterpolant:TZ,DisplayP3ColorSpace:g_,DodecahedronGeometry:D_,DoubleSide:xs,DstAlphaFactor:WX,DstColorFactor:GX,DynamicCopyUsage:uLe,DynamicDrawUsage:rLe,DynamicReadUsage:oLe,EdgesGeometry:IO,EllipseCurve:C_,EqualCompare:kY,EqualDepth:nY,EqualStencilFunc:KIe,EquirectangularReflectionMapping:ov,EquirectangularRefractionMapping:sv,Euler:fy,EventDispatcher:Tl,ExtrudeGeometry:N_,FileLoader:Cu,Float16BufferAttribute:ZLe,Float32BufferAttribute:Mt,Float64BufferAttribute:JLe,FloatType:po,Fog:w_,FogExp2:x_,FramebufferTexture:$ze,FrontSide:Eu,Frustum:gy,GLBufferAttribute:lUe,GLSL1:hLe,GLSL3:JD,GreaterCompare:NY,GreaterDepth:iY,GreaterEqualCompare:PY,GreaterEqualDepth:rY,GreaterEqualStencilFunc:nLe,GreaterStencilFunc:eLe,GridHelper:vUe,Group:hp,HalfFloatType:Ed,HemisphereLight:kZ,HemisphereLightHelper:gUe,IcosahedronGeometry:O_,ImageBitmapLoader:z6e,ImageLoader:Tv,ImageUtils:yO,IncrementStencilOp:qIe,IncrementWrapStencilOp:$Ie,InstancedBufferAttribute:tm,InstancedBufferGeometry:BZ,InstancedInterleavedBuffer:sUe,InstancedMesh:nZ,Int16BufferAttribute:XLe,Int32BufferAttribute:YLe,Int8BufferAttribute:qLe,IntType:sO,InterleavedBuffer:S_,InterleavedBufferAttribute:Cd,Interpolant:xy,InterpolateDiscrete:cv,InterpolateLinear:hv,InterpolateSmooth:sw,InvertStencilOp:YIe,KeepStencilOp:Lh,KeyframeTrack:Ls,LOD:eZ,LatheGeometry:vy,Layers:cd,LessCompare:DY,LessDepth:tY,LessEqualCompare:gO,LessEqualDepth:av,LessEqualStencilFunc:QIe,LessStencilFunc:JIe,Light:ch,LightProbe:FZ,Line:$c,Line3:hUe,LineBasicMaterial:Ra,LineCurve:NO,LineCurve3:cZ,LineDashedMaterial:EZ,LineLoop:iZ,LineSegments:Ml,LinearDisplayP3ColorSpace:dy,LinearEncoding:mO,LinearFilter:sr,LinearInterpolant:zO,LinearMipMapLinearFilter:zIe,LinearMipMapNearestFilter:BIe,LinearMipmapLinearFilter:sl,LinearMipmapNearestFilter:v0,LinearSRGBColorSpace:_l,LinearToneMapping:lY,LinearTransfer:fv,Loader:Qa,LoaderUtils:a3,LoadingManager:jO,LoopOnce:SY,LoopPingPong:_Y,LoopRepeat:EY,LuminanceAlphaFormat:yY,LuminanceFormat:vY,MOUSE:Rh,Material:Li,MaterialLoader:z_,MathUtils:ALe,Matrix3:pn,Matrix4:Yt,MaxEquation:ED,Mesh:Yr,MeshBasicMaterial:lh,MeshDepthMaterial:EO,MeshDistanceMaterial:_O,MeshLambertMaterial:wZ,MeshMatcapMaterial:SZ,MeshNormalMaterial:xZ,MeshPhongMaterial:yZ,MeshPhysicalMaterial:vZ,MeshStandardMaterial:FO,MeshToonMaterial:bZ,MinEquation:SD,MirroredRepeatWrapping:uv,MixOperation:oY,MultiplyBlending:wD,MultiplyOperation:hy,NearestFilter:zr,NearestMipMapLinearFilter:FIe,NearestMipMapNearestFilter:LIe,NearestMipmapLinearFilter:zh,NearestMipmapNearestFilter:jS,NeverCompare:MY,NeverDepth:QX,NeverStencilFunc:ZIe,NoBlending:hu,NoColorSpace:mo,NoToneMapping:ml,NormalAnimationBlendMode:m_,NormalBlending:sd,NotEqualCompare:OY,NotEqualDepth:aY,NotEqualStencilFunc:tLe,NumberKeyframeTrack:_v,Object3D:_n,ObjectLoader:F6e,ObjectSpaceNormalMap:TY,OctahedronGeometry:yy,OneFactor:jX,OneMinusConstantAlphaFactor:KX,OneMinusConstantColorFactor:ZX,OneMinusDstAlphaFactor:qX,OneMinusDstColorFactor:$X,OneMinusSrcAlphaFactor:US,OneMinusSrcColorFactor:VX,OrthographicCamera:au,P3Primaries:mv,PCFShadowMap:d_,PCFSoftShadowMap:g0,PMREMGenerator:QD,Path:xv,PerspectiveCamera:Nr,Plane:Jl,PlaneGeometry:Im,PlaneHelper:EUe,PointLight:OZ,PointLightHelper:pUe,Points:aZ,PointsMaterial:MO,PolarGridHelper:yUe,PolyhedronGeometry:uh,PositionalAudio:q6e,PropertyBinding:Cn,PropertyMixer:jZ,QuadraticBezierCurve:OO,QuadraticBezierCurve3:PO,Quaternion:yi,QuaternionKeyframeTrack:Bm,QuaternionLinearInterpolant:MZ,RED_GREEN_RGTC2_Format:XD,RED_RGTC1_Format:wY,REVISION:h_,RGBADepthPacking:AY,RGBAFormat:ya,RGBAIntegerFormat:dO,RGBA_ASTC_10x10_Format:HD,RGBA_ASTC_10x5_Format:zD,RGBA_ASTC_10x6_Format:UD,RGBA_ASTC_10x8_Format:jD,RGBA_ASTC_12x10_Format:VD,RGBA_ASTC_12x12_Format:WD,RGBA_ASTC_4x4_Format:ND,RGBA_ASTC_5x4_Format:OD,RGBA_ASTC_5x5_Format:PD,RGBA_ASTC_6x5_Format:RD,RGBA_ASTC_6x6_Format:ID,RGBA_ASTC_8x5_Format:LD,RGBA_ASTC_8x6_Format:FD,RGBA_ASTC_8x8_Format:BD,RGBA_BPTC_Format:ow,RGBA_ETC2_EAC_Format:kD,RGBA_PVRTC_2BPPV1_Format:MD,RGBA_PVRTC_4BPPV1_Format:TD,RGBA_S3TC_DXT1_Format:rw,RGBA_S3TC_DXT3_Format:iw,RGBA_S3TC_DXT5_Format:aw,RGB_BPTC_SIGNED_Format:qD,RGB_BPTC_UNSIGNED_Format:GD,RGB_ETC1_Format:fO,RGB_ETC2_Format:DD,RGB_PVRTC_2BPPV1_Format:AD,RGB_PVRTC_4BPPV1_Format:CD,RGB_S3TC_DXT1_Format:nw,RGFormat:xY,RGIntegerFormat:hO,RawShaderMaterial:gZ,Ray:Ud,Raycaster:XO,Rec709Primaries:pv,RectAreaLight:IZ,RedFormat:bY,RedIntegerFormat:cO,ReinhardToneMapping:uY,RenderTarget:FY,RepeatWrapping:lv,ReplaceStencilOp:WIe,ReverseSubtractEquation:zX,RingGeometry:P_,SIGNED_RED_GREEN_RGTC2_Format:YD,SIGNED_RED_RGTC1_Format:$D,SRGBColorSpace:ni,SRGBTransfer:tr,Scene:bv,ShaderChunk:hn,ShaderLib:bs,ShaderMaterial:ts,ShadowMaterial:mZ,Shape:dd,ShapeGeometry:R_,ShapePath:AUe,ShapeUtils:vl,ShortType:mY,Skeleton:E_,SkeletonHelper:fUe,SkinnedMesh:tZ,Source:Kh,Sphere:ea,SphereGeometry:by,Spherical:s3,SphericalHarmonics3:LZ,SplineCurve:RO,SpotLight:NZ,SpotLightHelper:dUe,Sprite:QY,SpriteMaterial:AO,SrcAlphaFactor:zS,SrcAlphaSaturateFactor:XX,SrcColorFactor:HX,StaticCopyUsage:lLe,StaticDrawUsage:gv,StaticReadUsage:aLe,StereoCamera:j6e,StreamCopyUsage:cLe,StreamDrawUsage:iLe,StreamReadUsage:sLe,StringKeyframeTrack:Vd,SubtractEquation:BX,SubtractiveBlending:xD,TOUCH:Ih,TangentSpaceNormalMap:sh,TetrahedronGeometry:I_,Texture:Sr,TextureLoader:P6e,TorusGeometry:L_,TorusKnotGeometry:F_,Triangle:go,TriangleFanDrawMode:HIe,TriangleStripDrawMode:jIe,TrianglesDrawMode:UIe,TubeGeometry:B_,UVMapping:f_,Uint16BufferAttribute:xO,Uint32BufferAttribute:wO,Uint8BufferAttribute:GLe,Uint8ClampedBufferAttribute:$Le,Uniform:$O,UniformsGroup:oUe,UniformsLib:pt,UniformsUtils:UY,UnsignedByteType:gl,UnsignedInt248Type:Pc,UnsignedIntType:iu,UnsignedShort4444Type:lO,UnsignedShort5551Type:uO,UnsignedShortType:p_,VSMShadowMap:ms,Vector2:Qe,Vector3:me,Vector4:Bn,VectorKeyframeTrack:Cv,VideoTexture:Gze,WebGL1Renderer:JY,WebGL3DRenderTarget:OLe,WebGLArrayRenderTarget:NLe,WebGLCoordinateSystem:ll,WebGLCubeRenderTarget:HY,WebGLMultipleRenderTargets:PLe,WebGLRenderTarget:es,WebGLRenderer:CO,WebGLUtils:YY,WebGPUCoordinateSystem:vv,WireframeGeometry:LO,WrapAroundEnding:dv,ZeroCurvatureEnding:Zh,ZeroFactor:UX,ZeroSlopeEnding:Jh,ZeroStencilOp:VIe,_SRGBAFormat:HS,createCanvasElement:LY,sRGBEncoding:Ic},Symbol.toStringTag,{value:"Module"}));var WZ={exports:{}},Wd={};/**
* @license React
* react-reconciler-constants.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/Wd.ConcurrentRoot=1;Wd.ContinuousEventPriority=4;Wd.DefaultEventPriority=16;Wd.DiscreteEventPriority=1;Wd.IdleEventPriority=536870912;Wd.LegacyRoot=0;WZ.exports=Wd;var fp=WZ.exports,qZ={exports:{}},GZ={exports:{}},$Z={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(n){function e(z,B){var X=z.length;z.push(B);e:for(;0<X;){var J=X-1>>>1,Q=z[J];if(0<i(Q,B))z[J]=B,z[X]=Q,X=J;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var B=z[0],X=z.pop();if(X!==B){z[0]=X;e:for(var J=0,Q=z.length,Z=Q>>>1;J<Z;){var re=2*(J+1)-1,fe=z[re],se=re+1,ye=z[se];if(0>i(fe,X))se<Q&&0>i(ye,fe)?(z[J]=ye,z[se]=X,J=se):(z[J]=fe,z[re]=X,J=re);else if(se<Q&&0>i(ye,X))z[J]=ye,z[se]=X,J=se;else break e}}return B}function i(z,B){var X=z.sortIndex-B.sortIndex;return X!==0?X:z.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var B=t(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=z)r(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=t(u)}}function m(z){if(v=!1,b(z),!p)if(t(l)!==null)p=!0,k(x);else{var B=t(u);B!==null&&P(m,B.startTime-z)}}function x(z,B){p=!1,v&&(v=!1,g(T),T=-1),f=!0;var X=d;try{for(b(B),h=t(l);h!==null&&(!(h.expirationTime>B)||z&&!D());){var J=h.callback;if(typeof J=="function"){h.callback=null,d=h.priorityLevel;var Q=J(h.expirationTime<=B);B=n.unstable_now(),typeof Q=="function"?h.callback=Q:h===t(l)&&r(l),b(B)}else r(l);h=t(l)}if(h!==null)var Z=!0;else{var re=t(u);re!==null&&P(m,re.startTime-B),Z=!1}return Z}finally{h=null,d=X,f=!1}}var S=!1,C=null,T=-1,M=5,A=-1;function D(){return!(n.unstable_now()-A<M)}function O(){if(C!==null){var z=n.unstable_now();A=z;var B=!0;try{B=C(!0,z)}finally{B?U():(S=!1,C=null)}}else S=!1}var U;if(typeof w=="function")U=function(){w(O)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,F=L.port2;L.port1.onmessage=O,U=function(){F.postMessage(null)}}else U=function(){y(O,0)};function k(z){C=z,S||(S=!0,U())}function P(z,B){T=y(function(){z(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,k(x))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var X=d;d=B;try{return z()}finally{d=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,B){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=d;d=z;try{return B()}finally{d=X}},n.unstable_scheduleCallback=function(z,B,X){var J=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?J+X:J):X=J,z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=X+Q,z={id:c++,callback:B,priorityLevel:z,startTime:X,expirationTime:Q,sortIndex:-1},X>J?(z.sortIndex=X,e(u,z),t(l)===null&&z===t(u)&&(v?(g(T),T=-1):v=!0,P(m,X-J))):(z.sortIndex=Q,e(l,z),p||f||(p=!0,k(x))),z},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(z){var B=d;return function(){var X=d;d=B;try{return z.apply(this,arguments)}finally{d=X}}}})($Z);GZ.exports=$Z;var l3=GZ.exports;/**
* @license React
* react-reconciler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var MUe=function(n){var e={},t=j,r=l3,i=Object.assign;function a(E){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+E,N=1;N<arguments.length;N++)_+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+E+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,s=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),m=Symbol.iterator;function x(E){return E===null||typeof E!="object"?null:(E=m&&E[m]||E["@@iterator"],typeof E=="function"?E:null)}function S(E){if(E==null)return null;if(typeof E=="function")return E.displayName||E.name||null;if(typeof E=="string")return E;switch(E){case u:return"Fragment";case l:return"Portal";case h:return"Profiler";case c:return"StrictMode";case v:return"Suspense";case y:return"SuspenseList"}if(typeof E=="object")switch(E.$$typeof){case f:return(E.displayName||"Context")+".Consumer";case d:return(E._context.displayName||"Context")+".Provider";case p:var _=E.render;return E=E.displayName,E||(E=_.displayName||_.name||"",E=E!==""?"ForwardRef("+E+")":"ForwardRef"),E;case g:return _=E.displayName||null,_!==null?_:S(E.type)||"Memo";case w:_=E._payload,E=E._init;try{return S(E(_))}catch{}}return null}function C(E){var _=E.type;switch(E.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return E=_.render,E=E.displayName||E.name||"",_.displayName||(E!==""?"ForwardRef("+E+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(_);case 8:return _===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function T(E){var _=E,N=E;if(E.alternate)for(;_.return;)_=_.return;else{E=_;do _=E,_.flags&4098&&(N=_.return),E=_.return;while(E)}return _.tag===3?N:null}function M(E){if(T(E)!==E)throw Error(a(188))}function A(E){var _=E.alternate;if(!_){if(_=T(E),_===null)throw Error(a(188));return _!==E?null:E}for(var N=E,R=_;;){var W=N.return;if(W===null)break;var Y=W.alternate;if(Y===null){if(R=W.return,R!==null){N=R;continue}break}if(W.child===Y.child){for(Y=W.child;Y;){if(Y===N)return M(W),E;if(Y===R)return M(W),_;Y=Y.sibling}throw Error(a(188))}if(N.return!==R.return)N=W,R=Y;else{for(var Se=!1,Be=W.child;Be;){if(Be===N){Se=!0,N=W,R=Y;break}if(Be===R){Se=!0,R=W,N=Y;break}Be=Be.sibling}if(!Se){for(Be=Y.child;Be;){if(Be===N){Se=!0,N=Y,R=W;break}if(Be===R){Se=!0,R=Y,N=W;break}Be=Be.sibling}if(!Se)throw Error(a(189))}}if(N.alternate!==R)throw Error(a(190))}if(N.tag!==3)throw Error(a(188));return N.stateNode.current===N?E:_}function D(E){return E=A(E),E!==null?O(E):null}function O(E){if(E.tag===5||E.tag===6)return E;for(E=E.child;E!==null;){var _=O(E);if(_!==null)return _;E=E.sibling}return null}function U(E){if(E.tag===5||E.tag===6)return E;for(E=E.child;E!==null;){if(E.tag!==4){var _=U(E);if(_!==null)return _}E=E.sibling}return null}var L=Array.isArray,F=n.getPublicInstance,k=n.getRootHostContext,P=n.getChildHostContext,z=n.prepareForCommit,B=n.resetAfterCommit,X=n.createInstance,J=n.appendInitialChild,Q=n.finalizeInitialChildren,Z=n.prepareUpdate,re=n.shouldSetTextContent,fe=n.createTextInstance,se=n.scheduleTimeout,ye=n.cancelTimeout,De=n.noTimeout,pe=n.isPrimaryRenderer,Me=n.supportsMutation,be=n.supportsPersistence,ne=n.supportsHydration,Pe=n.getInstanceFromNode,ze=n.preparePortalMount,K=n.getCurrentEventPriority,ie=n.detachDeletedInstance,_e=n.supportsMicrotasks,oe=n.scheduleMicrotask,G=n.supportsTestSelectors,q=n.findFiberRoot,ce=n.getBoundingRect,Ae=n.getTextContent,$=n.isHiddenSubtree,ee=n.matchAccessibilityRole,ge=n.setFocusIfFocusable,xe=n.setupIntersectionObserver,Ne=n.appendChild,Fe=n.appendChildToContainer,qe=n.commitTextUpdate,ke=n.commitMount,it=n.commitUpdate,Ze=n.insertBefore,st=n.insertInContainerBefore,we=n.removeChild,Re=n.removeChildFromContainer,et=n.resetTextContent,V=n.hideInstance,Ee=n.hideTextInstance,Le=n.unhideInstance,Je=n.unhideTextInstance,he=n.clearContainer,Xe=n.cloneInstance,H=n.createContainerChildSet,te=n.appendChildToContainerChildSet,le=n.finalizeContainerChildren,ve=n.replaceContainerChildren,Ce=n.cloneHiddenInstance,Oe=n.cloneHiddenTextInstance,He=n.canHydrateInstance,$e=n.canHydrateTextInstance,nt=n.canHydrateSuspenseInstance,ft=n.isSuspenseInstancePending,Et=n.isSuspenseInstanceFallback,rt=n.registerSuspenseInstanceRetry,xt=n.getNextHydratableSibling,$t=n.getFirstHydratableChild,Pr=n.getFirstHydratableChildWithinContainer,Cr=n.getFirstHydratableChildWithinSuspenseInstance,Kn=n.hydrateInstance,Bs=n.hydrateTextInstance,Iu=n.hydrateSuspenseInstance,xi=n.getNextHydratableInstanceAfterSuspenseInstance,de=n.commitHydratedContainer,Ie=n.commitHydratedSuspenseInstance,je=n.clearSuspenseBoundary,Ve=n.clearSuspenseBoundaryFromContainer,We=n.shouldDeleteUnhydratedTailInstances,dt=n.didNotMatchHydratedContainerTextInstance,Tt=n.didNotMatchHydratedTextInstance,kt;function ct(E){if(kt===void 0)try{throw Error()}catch(N){var _=N.stack.trim().match(/\n( *(at )?)/);kt=_&&_[1]||""}return`
`+kt+E}var Ot=!1;function Ut(E,_){if(!E||Ot)return"";Ot=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(ht){var R=ht}Reflect.construct(E,[],_)}else{try{_.call()}catch(ht){R=ht}E.call(_.prototype)}else{try{throw Error()}catch(ht){R=ht}E()}}catch(ht){if(ht&&R&&typeof ht.stack=="string"){for(var W=ht.stack.split(`
`),Y=R.stack.split(`
`),Se=W.length-1,Be=Y.length-1;1<=Se&&0<=Be&&W[Se]!==Y[Be];)Be--;for(;1<=Se&&0<=Be;Se--,Be--)if(W[Se]!==Y[Be]){if(Se!==1||Be!==1)do if(Se--,Be--,0>Be||W[Se]!==Y[Be]){var Ke=`
`+W[Se].replace(" at new "," at ");return E.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",E.displayName)),Ke}while(1<=Se&&0<=Be);break}}}finally{Ot=!1,Error.prepareStackTrace=N}return(E=E?E.displayName||E.name:"")?ct(E):""}var Pt=Object.prototype.hasOwnProperty,Qn=[],qn=-1;function Rr(E){return{current:E}}function yn(E){0>qn||(E.current=Qn[qn],Qn[qn]=null,qn--)}function Xt(E,_){qn++,Qn[qn]=E.current,E.current=_}var Zt={},Hr=Rr(Zt),ci=Rr(!1),sa=Zt;function Ol(E,_){var N=E.type.contextTypes;if(!N)return Zt;var R=E.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===_)return R.__reactInternalMemoizedMaskedChildContext;var W={},Y;for(Y in N)W[Y]=_[Y];return R&&(E=E.stateNode,E.__reactInternalMemoizedUnmaskedChildContext=_,E.__reactInternalMemoizedMaskedChildContext=W),W}function Vr(E){return E=E.childContextTypes,E!=null}function Lu(){yn(ci),yn(Hr)}function Jr(E,_,N){if(Hr.current!==Zt)throw Error(a(168));Xt(Hr,_),Xt(ci,N)}function zs(E,_,N){var R=E.stateNode;if(_=_.childContextTypes,typeof R.getChildContext!="function")return N;R=R.getChildContext();for(var W in R)if(!(W in _))throw Error(a(108,C(E)||"Unknown",W));return i({},N,R)}function Fu(E){return E=(E=E.stateNode)&&E.__reactInternalMemoizedMergedChildContext||Zt,sa=Hr.current,Xt(Hr,E),Xt(ci,ci.current),!0}function la(E,_,N){var R=E.stateNode;if(!R)throw Error(a(169));N?(E=zs(E,_,sa),R.__reactInternalMemoizedMergedChildContext=E,yn(ci),yn(Hr),Xt(Hr,E)):yn(ci),Xt(ci,N)}var ua=Math.clz32?Math.clz32:wee,e2=Math.log,ky=Math.LN2;function wee(E){return E>>>=0,E===0?32:31-(e2(E)/ky|0)|0}var Ny=64,Oy=4194304;function Hm(E){switch(E&-E){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return E&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return E}}function Py(E,_){var N=E.pendingLanes;if(N===0)return 0;var R=0,W=E.suspendedLanes,Y=E.pingedLanes,Se=N&268435455;if(Se!==0){var Be=Se&~W;Be!==0?R=Hm(Be):(Y&=Se,Y!==0&&(R=Hm(Y)))}else Se=N&~W,Se!==0?R=Hm(Se):Y!==0&&(R=Hm(Y));if(R===0)return 0;if(_!==0&&_!==R&&!(_&W)&&(W=R&-R,Y=_&-_,W>=Y||W===16&&(Y&4194240)!==0))return _;if(R&4&&(R|=N&16),_=E.entangledLanes,_!==0)for(E=E.entanglements,_&=R;0<_;)N=31-ua(_),W=1<<N,R|=E[N],_&=~W;return R}function See(E,_){switch(E){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Eee(E,_){for(var N=E.suspendedLanes,R=E.pingedLanes,W=E.expirationTimes,Y=E.pendingLanes;0<Y;){var Se=31-ua(Y),Be=1<<Se,Ke=W[Se];Ke===-1?(!(Be&N)||Be&R)&&(W[Se]=See(Be,_)):Ke<=_&&(E.expiredLanes|=Be),Y&=~Be}}function t2(E){return E=E.pendingLanes&-1073741825,E!==0?E:E&1073741824?1073741824:0}function n2(E){for(var _=[],N=0;31>N;N++)_.push(E);return _}function Vm(E,_,N){E.pendingLanes|=_,_!==536870912&&(E.suspendedLanes=0,E.pingedLanes=0),E=E.eventTimes,_=31-ua(_),E[_]=N}function _ee(E,_){var N=E.pendingLanes&~_;E.pendingLanes=_,E.suspendedLanes=0,E.pingedLanes=0,E.expiredLanes&=_,E.mutableReadLanes&=_,E.entangledLanes&=_,_=E.entanglements;var R=E.eventTimes;for(E=E.expirationTimes;0<N;){var W=31-ua(N),Y=1<<W;_[W]=0,R[W]=-1,E[W]=-1,N&=~Y}}function r2(E,_){var N=E.entangledLanes|=_;for(E=E.entanglements;N;){var R=31-ua(N),W=1<<R;W&_|E[R]&_&&(E[R]|=_),N&=~W}}var Mn=0;function MP(E){return E&=-E,1<E?4<E?E&268435455?16:536870912:4:1}var i2=r.unstable_scheduleCallback,DP=r.unstable_cancelCallback,Cee=r.unstable_shouldYield,Aee=r.unstable_requestPaint,hi=r.unstable_now,a2=r.unstable_ImmediatePriority,Tee=r.unstable_UserBlockingPriority,o2=r.unstable_NormalPriority,Mee=r.unstable_IdlePriority,Ry=null,Us=null;function Dee(E){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(Ry,E,void 0,(E.current.flags&128)===128)}catch{}}function kee(E,_){return E===_&&(E!==0||1/E===1/_)||E!==E&&_!==_}var js=typeof Object.is=="function"?Object.is:kee,Pl=null,Iy=!1,s2=!1;function kP(E){Pl===null?Pl=[E]:Pl.push(E)}function Nee(E){Iy=!0,kP(E)}function Hs(){if(!s2&&Pl!==null){s2=!0;var E=0,_=Mn;try{var N=Pl;for(Mn=1;E<N.length;E++){var R=N[E];do R=R(!0);while(R!==null)}Pl=null,Iy=!1}catch(W){throw Pl!==null&&(Pl=Pl.slice(E+1)),i2(a2,Hs),W}finally{Mn=_,s2=!1}}return null}var Oee=o.ReactCurrentBatchConfig;function Ly(E,_){if(js(E,_))return!0;if(typeof E!="object"||E===null||typeof _!="object"||_===null)return!1;var N=Object.keys(E),R=Object.keys(_);if(N.length!==R.length)return!1;for(R=0;R<N.length;R++){var W=N[R];if(!Pt.call(_,W)||!js(E[W],_[W]))return!1}return!0}function Pee(E){switch(E.tag){case 5:return ct(E.type);case 16:return ct("Lazy");case 13:return ct("Suspense");case 19:return ct("SuspenseList");case 0:case 2:case 15:return E=Ut(E.type,!1),E;case 11:return E=Ut(E.type.render,!1),E;case 1:return E=Ut(E.type,!0),E;default:return""}}function ls(E,_){if(E&&E.defaultProps){_=i({},_),E=E.defaultProps;for(var N in E)_[N]===void 0&&(_[N]=E[N]);return _}return _}var Fy=Rr(null),By=null,Gd=null,l2=null;function u2(){l2=Gd=By=null}function NP(E,_,N){pe?(Xt(Fy,_._currentValue),_._currentValue=N):(Xt(Fy,_._currentValue2),_._currentValue2=N)}function c2(E){var _=Fy.current;yn(Fy),pe?E._currentValue=_:E._currentValue2=_}function h2(E,_,N){for(;E!==null;){var R=E.alternate;if((E.childLanes&_)!==_?(E.childLanes|=_,R!==null&&(R.childLanes|=_)):R!==null&&(R.childLanes&_)!==_&&(R.childLanes|=_),E===N)break;E=E.return}}function $d(E,_){By=E,l2=Gd=null,E=E.dependencies,E!==null&&E.firstContext!==null&&(E.lanes&_&&(no=!0),E.firstContext=null)}function Do(E){var _=pe?E._currentValue:E._currentValue2;if(l2!==E)if(E={context:E,memoizedValue:_,next:null},Gd===null){if(By===null)throw Error(a(308));Gd=E,By.dependencies={lanes:0,firstContext:E}}else Gd=Gd.next=E;return _}var Vs=null,Bu=!1;function d2(E){E.updateQueue={baseState:E.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OP(E,_){E=E.updateQueue,_.updateQueue===E&&(_.updateQueue={baseState:E.baseState,firstBaseUpdate:E.firstBaseUpdate,lastBaseUpdate:E.lastBaseUpdate,shared:E.shared,effects:E.effects})}function Rl(E,_){return{eventTime:E,lane:_,tag:0,payload:null,callback:null,next:null}}function zu(E,_){var N=E.updateQueue;N!==null&&(N=N.shared,Wr!==null&&E.mode&1&&!(mn&2)?(E=N.interleaved,E===null?(_.next=_,Vs===null?Vs=[N]:Vs.push(N)):(_.next=E.next,E.next=_),N.interleaved=_):(E=N.pending,E===null?_.next=_:(_.next=E.next,E.next=_),N.pending=_))}function zy(E,_,N){if(_=_.updateQueue,_!==null&&(_=_.shared,(N&4194240)!==0)){var R=_.lanes;R&=E.pendingLanes,N|=R,_.lanes=N,r2(E,N)}}function PP(E,_){var N=E.updateQueue,R=E.alternate;if(R!==null&&(R=R.updateQueue,N===R)){var W=null,Y=null;if(N=N.firstBaseUpdate,N!==null){do{var Se={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};Y===null?W=Y=Se:Y=Y.next=Se,N=N.next}while(N!==null);Y===null?W=Y=_:Y=Y.next=_}else W=Y=_;N={baseState:R.baseState,firstBaseUpdate:W,lastBaseUpdate:Y,shared:R.shared,effects:R.effects},E.updateQueue=N;return}E=N.lastBaseUpdate,E===null?N.firstBaseUpdate=_:E.next=_,N.lastBaseUpdate=_}function Uy(E,_,N,R){var W=E.updateQueue;Bu=!1;var Y=W.firstBaseUpdate,Se=W.lastBaseUpdate,Be=W.shared.pending;if(Be!==null){W.shared.pending=null;var Ke=Be,ht=Ke.next;Ke.next=null,Se===null?Y=ht:Se.next=ht,Se=Ke;var _t=E.alternate;_t!==null&&(_t=_t.updateQueue,Be=_t.lastBaseUpdate,Be!==Se&&(Be===null?_t.firstBaseUpdate=ht:Be.next=ht,_t.lastBaseUpdate=Ke))}if(Y!==null){var rn=W.baseState;Se=0,_t=ht=Ke=null,Be=Y;do{var Vt=Be.lane,Xn=Be.eventTime;if((R&Vt)===Vt){_t!==null&&(_t=_t.next={eventTime:Xn,lane:0,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null});e:{var Rt=E,ji=Be;switch(Vt=_,Xn=N,ji.tag){case 1:if(Rt=ji.payload,typeof Rt=="function"){rn=Rt.call(Xn,rn,Vt);break e}rn=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=ji.payload,Vt=typeof Rt=="function"?Rt.call(Xn,rn,Vt):Rt,Vt==null)break e;rn=i({},rn,Vt);break e;case 2:Bu=!0}}Be.callback!==null&&Be.lane!==0&&(E.flags|=64,Vt=W.effects,Vt===null?W.effects=[Be]:Vt.push(Be))}else Xn={eventTime:Xn,lane:Vt,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},_t===null?(ht=_t=Xn,Ke=rn):_t=_t.next=Xn,Se|=Vt;if(Be=Be.next,Be===null){if(Be=W.shared.pending,Be===null)break;Vt=Be,Be=Vt.next,Vt.next=null,W.lastBaseUpdate=Vt,W.shared.pending=null}}while(!0);if(_t===null&&(Ke=rn),W.baseState=Ke,W.firstBaseUpdate=ht,W.lastBaseUpdate=_t,_=W.shared.interleaved,_!==null){W=_;do Se|=W.lane,W=W.next;while(W!==_)}else Y===null&&(W.shared.lanes=0);nf|=Se,E.lanes=Se,E.memoizedState=rn}}function RP(E,_,N){if(E=_.effects,_.effects=null,E!==null)for(_=0;_<E.length;_++){var R=E[_],W=R.callback;if(W!==null){if(R.callback=null,R=N,typeof W!="function")throw Error(a(191,W));W.call(R)}}}var IP=new t.Component().refs;function f2(E,_,N,R){_=E.memoizedState,N=N(R,_),N=N==null?_:i({},_,N),E.memoizedState=N,E.lanes===0&&(E.updateQueue.baseState=N)}var jy={isMounted:function(E){return(E=E._reactInternals)?T(E)===E:!1},enqueueSetState:function(E,_,N){E=E._reactInternals;var R=ha(),W=Hu(E),Y=Rl(R,W);Y.payload=_,N!=null&&(Y.callback=N),zu(E,Y),_=Ro(E,W,R),_!==null&&zy(_,E,W)},enqueueReplaceState:function(E,_,N){E=E._reactInternals;var R=ha(),W=Hu(E),Y=Rl(R,W);Y.tag=1,Y.payload=_,N!=null&&(Y.callback=N),zu(E,Y),_=Ro(E,W,R),_!==null&&zy(_,E,W)},enqueueForceUpdate:function(E,_){E=E._reactInternals;var N=ha(),R=Hu(E),W=Rl(N,R);W.tag=2,_!=null&&(W.callback=_),zu(E,W),_=Ro(E,R,N),_!==null&&zy(_,E,R)}};function LP(E,_,N,R,W,Y,Se){return E=E.stateNode,typeof E.shouldComponentUpdate=="function"?E.shouldComponentUpdate(R,Y,Se):_.prototype&&_.prototype.isPureReactComponent?!Ly(N,R)||!Ly(W,Y):!0}function FP(E,_,N){var R=!1,W=Zt,Y=_.contextType;return typeof Y=="object"&&Y!==null?Y=Do(Y):(W=Vr(_)?sa:Hr.current,R=_.contextTypes,Y=(R=R!=null)?Ol(E,W):Zt),_=new _(N,Y),E.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=jy,E.stateNode=_,_._reactInternals=E,R&&(E=E.stateNode,E.__reactInternalMemoizedUnmaskedChildContext=W,E.__reactInternalMemoizedMaskedChildContext=Y),_}function BP(E,_,N,R){E=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(N,R),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(N,R),_.state!==E&&jy.enqueueReplaceState(_,_.state,null)}function p2(E,_,N,R){var W=E.stateNode;W.props=N,W.state=E.memoizedState,W.refs=IP,d2(E);var Y=_.contextType;typeof Y=="object"&&Y!==null?W.context=Do(Y):(Y=Vr(_)?sa:Hr.current,W.context=Ol(E,Y)),W.state=E.memoizedState,Y=_.getDerivedStateFromProps,typeof Y=="function"&&(f2(E,_,Y,N),W.state=E.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof W.getSnapshotBeforeUpdate=="function"||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(_=W.state,typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount(),_!==W.state&&jy.enqueueReplaceState(W,W.state,null),Uy(E,N,W,R),W.state=E.memoizedState),typeof W.componentDidMount=="function"&&(E.flags|=4194308)}var Xd=[],Yd=0,Hy=null,Vy=0,ko=[],No=0,dh=null,Il=1,Ll="";function fh(E,_){Xd[Yd++]=Vy,Xd[Yd++]=Hy,Hy=E,Vy=_}function zP(E,_,N){ko[No++]=Il,ko[No++]=Ll,ko[No++]=dh,dh=E;var R=Il;E=Ll;var W=32-ua(R)-1;R&=~(1<<W),N+=1;var Y=32-ua(_)+W;if(30<Y){var Se=W-W%5;Y=(R&(1<<Se)-1).toString(32),R>>=Se,W-=Se,Il=1<<32-ua(_)+W|N<<W|R,Ll=Y+E}else Il=1<<Y|N<<W|R,Ll=E}function m2(E){E.return!==null&&(fh(E,1),zP(E,1,0))}function g2(E){for(;E===Hy;)Hy=Xd[--Yd],Xd[Yd]=null,Vy=Xd[--Yd],Xd[Yd]=null;for(;E===dh;)dh=ko[--No],ko[No]=null,Ll=ko[--No],ko[No]=null,Il=ko[--No],ko[No]=null}var eo=null,to=null,cr=!1,Wm=!1,us=null;function UP(E,_){var N=Io(5,null,null,0);N.elementType="DELETED",N.stateNode=_,N.return=E,_=E.deletions,_===null?(E.deletions=[N],E.flags|=16):_.push(N)}function jP(E,_){switch(E.tag){case 5:return _=He(_,E.type,E.pendingProps),_!==null?(E.stateNode=_,eo=E,to=$t(_),!0):!1;case 6:return _=$e(_,E.pendingProps),_!==null?(E.stateNode=_,eo=E,to=null,!0):!1;case 13:if(_=nt(_),_!==null){var N=dh!==null?{id:Il,overflow:Ll}:null;return E.memoizedState={dehydrated:_,treeContext:N,retryLane:1073741824},N=Io(18,null,null,0),N.stateNode=_,N.return=E,E.child=N,eo=E,to=null,!0}return!1;default:return!1}}function v2(E){return(E.mode&1)!==0&&(E.flags&128)===0}function y2(E){if(cr){var _=to;if(_){var N=_;if(!jP(E,_)){if(v2(E))throw Error(a(418));_=xt(N);var R=eo;_&&jP(E,_)?UP(R,N):(E.flags=E.flags&-4097|2,cr=!1,eo=E)}}else{if(v2(E))throw Error(a(418));E.flags=E.flags&-4097|2,cr=!1,eo=E}}}function HP(E){for(E=E.return;E!==null&&E.tag!==5&&E.tag!==3&&E.tag!==13;)E=E.return;eo=E}function qm(E){if(!ne||E!==eo)return!1;if(!cr)return HP(E),cr=!0,!1;if(E.tag!==3&&(E.tag!==5||We(E.type)&&!re(E.type,E.memoizedProps))){var _=to;if(_){if(v2(E)){for(E=to;E;)E=xt(E);throw Error(a(418))}for(;_;)UP(E,_),_=xt(_)}}if(HP(E),E.tag===13){if(!ne)throw Error(a(316));if(E=E.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));to=xi(E)}else to=eo?xt(E.stateNode):null;return!0}function Zd(){ne&&(to=eo=null,Wm=cr=!1)}function b2(E){us===null?us=[E]:us.push(E)}function Gm(E,_,N){if(E=N.ref,E!==null&&typeof E!="function"&&typeof E!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(a(309));var R=N.stateNode}if(!R)throw Error(a(147,E));var W=R,Y=""+E;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===Y?_.ref:(_=function(Se){var Be=W.refs;Be===IP&&(Be=W.refs={}),Se===null?delete Be[Y]:Be[Y]=Se},_._stringRef=Y,_)}if(typeof E!="string")throw Error(a(284));if(!N._owner)throw Error(a(290,E))}return E}function Wy(E,_){throw E=Object.prototype.toString.call(_),Error(a(31,E==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":E))}function VP(E){var _=E._init;return _(E._payload)}function WP(E){function _(Ge,Ue){if(E){var Ye=Ge.deletions;Ye===null?(Ge.deletions=[Ue],Ge.flags|=16):Ye.push(Ue)}}function N(Ge,Ue){if(!E)return null;for(;Ue!==null;)_(Ge,Ue),Ue=Ue.sibling;return null}function R(Ge,Ue){for(Ge=new Map;Ue!==null;)Ue.key!==null?Ge.set(Ue.key,Ue):Ge.set(Ue.index,Ue),Ue=Ue.sibling;return Ge}function W(Ge,Ue){return Ge=Wu(Ge,Ue),Ge.index=0,Ge.sibling=null,Ge}function Y(Ge,Ue,Ye){return Ge.index=Ye,E?(Ye=Ge.alternate,Ye!==null?(Ye=Ye.index,Ye<Ue?(Ge.flags|=2,Ue):Ye):(Ge.flags|=2,Ue)):(Ge.flags|=1048576,Ue)}function Se(Ge){return E&&Ge.alternate===null&&(Ge.flags|=2),Ge}function Be(Ge,Ue,Ye,yt){return Ue===null||Ue.tag!==6?(Ue=tC(Ye,Ge.mode,yt),Ue.return=Ge,Ue):(Ue=W(Ue,Ye),Ue.return=Ge,Ue)}function Ke(Ge,Ue,Ye,yt){var It=Ye.type;return It===u?_t(Ge,Ue,Ye.props.children,yt,Ye.key):Ue!==null&&(Ue.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===w&&VP(It)===Ue.type)?(yt=W(Ue,Ye.props),yt.ref=Gm(Ge,Ue,Ye),yt.return=Ge,yt):(yt=w1(Ye.type,Ye.key,Ye.props,null,Ge.mode,yt),yt.ref=Gm(Ge,Ue,Ye),yt.return=Ge,yt)}function ht(Ge,Ue,Ye,yt){return Ue===null||Ue.tag!==4||Ue.stateNode.containerInfo!==Ye.containerInfo||Ue.stateNode.implementation!==Ye.implementation?(Ue=nC(Ye,Ge.mode,yt),Ue.return=Ge,Ue):(Ue=W(Ue,Ye.children||[]),Ue.return=Ge,Ue)}function _t(Ge,Ue,Ye,yt,It){return Ue===null||Ue.tag!==7?(Ue=xh(Ye,Ge.mode,yt,It),Ue.return=Ge,Ue):(Ue=W(Ue,Ye),Ue.return=Ge,Ue)}function rn(Ge,Ue,Ye){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return Ue=tC(""+Ue,Ge.mode,Ye),Ue.return=Ge,Ue;if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case s:return Ye=w1(Ue.type,Ue.key,Ue.props,null,Ge.mode,Ye),Ye.ref=Gm(Ge,null,Ue),Ye.return=Ge,Ye;case l:return Ue=nC(Ue,Ge.mode,Ye),Ue.return=Ge,Ue;case w:var yt=Ue._init;return rn(Ge,yt(Ue._payload),Ye)}if(L(Ue)||x(Ue))return Ue=xh(Ue,Ge.mode,Ye,null),Ue.return=Ge,Ue;Wy(Ge,Ue)}return null}function Vt(Ge,Ue,Ye,yt){var It=Ue!==null?Ue.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return It!==null?null:Be(Ge,Ue,""+Ye,yt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case s:return Ye.key===It?Ke(Ge,Ue,Ye,yt):null;case l:return Ye.key===It?ht(Ge,Ue,Ye,yt):null;case w:return It=Ye._init,Vt(Ge,Ue,It(Ye._payload),yt)}if(L(Ye)||x(Ye))return It!==null?null:_t(Ge,Ue,Ye,yt,null);Wy(Ge,Ye)}return null}function Xn(Ge,Ue,Ye,yt,It){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return Ge=Ge.get(Ye)||null,Be(Ue,Ge,""+yt,It);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case s:return Ge=Ge.get(yt.key===null?Ye:yt.key)||null,Ke(Ue,Ge,yt,It);case l:return Ge=Ge.get(yt.key===null?Ye:yt.key)||null,ht(Ue,Ge,yt,It);case w:var fn=yt._init;return Xn(Ge,Ue,Ye,fn(yt._payload),It)}if(L(yt)||x(yt))return Ge=Ge.get(Ye)||null,_t(Ue,Ge,yt,It,null);Wy(Ue,yt)}return null}function Rt(Ge,Ue,Ye,yt){for(var It=null,fn=null,an=Ue,Dn=Ue=0,fi=null;an!==null&&Dn<Ye.length;Dn++){an.index>Dn?(fi=an,an=null):fi=an.sibling;var kn=Vt(Ge,an,Ye[Dn],yt);if(kn===null){an===null&&(an=fi);break}E&&an&&kn.alternate===null&&_(Ge,an),Ue=Y(kn,Ue,Dn),fn===null?It=kn:fn.sibling=kn,fn=kn,an=fi}if(Dn===Ye.length)return N(Ge,an),cr&&fh(Ge,Dn),It;if(an===null){for(;Dn<Ye.length;Dn++)an=rn(Ge,Ye[Dn],yt),an!==null&&(Ue=Y(an,Ue,Dn),fn===null?It=an:fn.sibling=an,fn=an);return cr&&fh(Ge,Dn),It}for(an=R(Ge,an);Dn<Ye.length;Dn++)fi=Xn(an,Ge,Dn,Ye[Dn],yt),fi!==null&&(E&&fi.alternate!==null&&an.delete(fi.key===null?Dn:fi.key),Ue=Y(fi,Ue,Dn),fn===null?It=fi:fn.sibling=fi,fn=fi);return E&&an.forEach(function(qu){return _(Ge,qu)}),cr&&fh(Ge,Dn),It}function ji(Ge,Ue,Ye,yt){var It=x(Ye);if(typeof It!="function")throw Error(a(150));if(Ye=It.call(Ye),Ye==null)throw Error(a(151));for(var fn=It=null,an=Ue,Dn=Ue=0,fi=null,kn=Ye.next();an!==null&&!kn.done;Dn++,kn=Ye.next()){an.index>Dn?(fi=an,an=null):fi=an.sibling;var qu=Vt(Ge,an,kn.value,yt);if(qu===null){an===null&&(an=fi);break}E&&an&&qu.alternate===null&&_(Ge,an),Ue=Y(qu,Ue,Dn),fn===null?It=qu:fn.sibling=qu,fn=qu,an=fi}if(kn.done)return N(Ge,an),cr&&fh(Ge,Dn),It;if(an===null){for(;!kn.done;Dn++,kn=Ye.next())kn=rn(Ge,kn.value,yt),kn!==null&&(Ue=Y(kn,Ue,Dn),fn===null?It=kn:fn.sibling=kn,fn=kn);return cr&&fh(Ge,Dn),It}for(an=R(Ge,an);!kn.done;Dn++,kn=Ye.next())kn=Xn(an,Ge,Dn,kn.value,yt),kn!==null&&(E&&kn.alternate!==null&&an.delete(kn.key===null?Dn:kn.key),Ue=Y(kn,Ue,Dn),fn===null?It=kn:fn.sibling=kn,fn=kn);return E&&an.forEach(function(ute){return _(Ge,ute)}),cr&&fh(Ge,Dn),It}function Lo(Ge,Ue,Ye,yt){if(typeof Ye=="object"&&Ye!==null&&Ye.type===u&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case s:e:{for(var It=Ye.key,fn=Ue;fn!==null;){if(fn.key===It){if(It=Ye.type,It===u){if(fn.tag===7){N(Ge,fn.sibling),Ue=W(fn,Ye.props.children),Ue.return=Ge,Ge=Ue;break e}}else if(fn.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===w&&VP(It)===fn.type){N(Ge,fn.sibling),Ue=W(fn,Ye.props),Ue.ref=Gm(Ge,fn,Ye),Ue.return=Ge,Ge=Ue;break e}N(Ge,fn);break}else _(Ge,fn);fn=fn.sibling}Ye.type===u?(Ue=xh(Ye.props.children,Ge.mode,yt,Ye.key),Ue.return=Ge,Ge=Ue):(yt=w1(Ye.type,Ye.key,Ye.props,null,Ge.mode,yt),yt.ref=Gm(Ge,Ue,Ye),yt.return=Ge,Ge=yt)}return Se(Ge);case l:e:{for(fn=Ye.key;Ue!==null;){if(Ue.key===fn)if(Ue.tag===4&&Ue.stateNode.containerInfo===Ye.containerInfo&&Ue.stateNode.implementation===Ye.implementation){N(Ge,Ue.sibling),Ue=W(Ue,Ye.children||[]),Ue.return=Ge,Ge=Ue;break e}else{N(Ge,Ue);break}else _(Ge,Ue);Ue=Ue.sibling}Ue=nC(Ye,Ge.mode,yt),Ue.return=Ge,Ge=Ue}return Se(Ge);case w:return fn=Ye._init,Lo(Ge,Ue,fn(Ye._payload),yt)}if(L(Ye))return Rt(Ge,Ue,Ye,yt);if(x(Ye))return ji(Ge,Ue,Ye,yt);Wy(Ge,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"?(Ye=""+Ye,Ue!==null&&Ue.tag===6?(N(Ge,Ue.sibling),Ue=W(Ue,Ye),Ue.return=Ge,Ge=Ue):(N(Ge,Ue),Ue=tC(Ye,Ge.mode,yt),Ue.return=Ge,Ge=Ue),Se(Ge)):N(Ge,Ue)}return Lo}var Jd=WP(!0),qP=WP(!1),$m={},Oo=Rr($m),Xm=Rr($m),Kd=Rr($m);function Ws(E){if(E===$m)throw Error(a(174));return E}function x2(E,_){Xt(Kd,_),Xt(Xm,E),Xt(Oo,$m),E=k(_),yn(Oo),Xt(Oo,E)}function Qd(){yn(Oo),yn(Xm),yn(Kd)}function GP(E){var _=Ws(Kd.current),N=Ws(Oo.current);_=P(N,E.type,_),N!==_&&(Xt(Xm,E),Xt(Oo,_))}function w2(E){Xm.current===E&&(yn(Oo),yn(Xm))}var mr=Rr(0);function qy(E){for(var _=E;_!==null;){if(_.tag===13){var N=_.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||ft(N)||Et(N)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===E)break;for(;_.sibling===null;){if(_.return===null||_.return===E)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var S2=[];function E2(){for(var E=0;E<S2.length;E++){var _=S2[E];pe?_._workInProgressVersionPrimary=null:_._workInProgressVersionSecondary=null}S2.length=0}var Gy=o.ReactCurrentDispatcher,Po=o.ReactCurrentBatchConfig,ef=0,Ar=null,Bi=null,di=null,$y=!1,Ym=!1,Zm=0,Ree=0;function zi(){throw Error(a(321))}function _2(E,_){if(_===null)return!1;for(var N=0;N<_.length&&N<E.length;N++)if(!js(E[N],_[N]))return!1;return!0}function C2(E,_,N,R,W,Y){if(ef=Y,Ar=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Gy.current=E===null||E.memoizedState===null?Bee:zee,E=N(R,W),Ym){Y=0;do{if(Ym=!1,Zm=0,25<=Y)throw Error(a(301));Y+=1,di=Bi=null,_.updateQueue=null,Gy.current=Uee,E=N(R,W)}while(Ym)}if(Gy.current=Ky,_=Bi!==null&&Bi.next!==null,ef=0,di=Bi=Ar=null,$y=!1,_)throw Error(a(300));return E}function A2(){var E=Zm!==0;return Zm=0,E}function Fl(){var E={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?Ar.memoizedState=di=E:di=di.next=E,di}function qs(){if(Bi===null){var E=Ar.alternate;E=E!==null?E.memoizedState:null}else E=Bi.next;var _=di===null?Ar.memoizedState:di.next;if(_!==null)di=_,Bi=E;else{if(E===null)throw Error(a(310));Bi=E,E={memoizedState:Bi.memoizedState,baseState:Bi.baseState,baseQueue:Bi.baseQueue,queue:Bi.queue,next:null},di===null?Ar.memoizedState=di=E:di=di.next=E}return di}function ph(E,_){return typeof _=="function"?_(E):_}function Xy(E){var _=qs(),N=_.queue;if(N===null)throw Error(a(311));N.lastRenderedReducer=E;var R=Bi,W=R.baseQueue,Y=N.pending;if(Y!==null){if(W!==null){var Se=W.next;W.next=Y.next,Y.next=Se}R.baseQueue=W=Y,N.pending=null}if(W!==null){Y=W.next,R=R.baseState;var Be=Se=null,Ke=null,ht=Y;do{var _t=ht.lane;if((ef&_t)===_t)Ke!==null&&(Ke=Ke.next={lane:0,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null}),R=ht.hasEagerState?ht.eagerState:E(R,ht.action);else{var rn={lane:_t,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null};Ke===null?(Be=Ke=rn,Se=R):Ke=Ke.next=rn,Ar.lanes|=_t,nf|=_t}ht=ht.next}while(ht!==null&&ht!==Y);Ke===null?Se=R:Ke.next=Be,js(R,_.memoizedState)||(no=!0),_.memoizedState=R,_.baseState=Se,_.baseQueue=Ke,N.lastRenderedState=R}if(E=N.interleaved,E!==null){W=E;do Y=W.lane,Ar.lanes|=Y,nf|=Y,W=W.next;while(W!==E)}else W===null&&(N.lanes=0);return[_.memoizedState,N.dispatch]}function Yy(E){var _=qs(),N=_.queue;if(N===null)throw Error(a(311));N.lastRenderedReducer=E;var R=N.dispatch,W=N.pending,Y=_.memoizedState;if(W!==null){N.pending=null;var Se=W=W.next;do Y=E(Y,Se.action),Se=Se.next;while(Se!==W);js(Y,_.memoizedState)||(no=!0),_.memoizedState=Y,_.baseQueue===null&&(_.baseState=Y),N.lastRenderedState=Y}return[Y,R]}function $P(){}function XP(E,_){var N=Ar,R=qs(),W=_(),Y=!js(R.memoizedState,W);if(Y&&(R.memoizedState=W,no=!0),R=R.queue,Km(JP.bind(null,N,R,E),[E]),R.getSnapshot!==_||Y||di!==null&&di.memoizedState.tag&1){if(N.flags|=2048,Jm(9,ZP.bind(null,N,R,W,_),void 0,null),Wr===null)throw Error(a(349));ef&30||YP(N,_,W)}return W}function YP(E,_,N){E.flags|=16384,E={getSnapshot:_,value:N},_=Ar.updateQueue,_===null?(_={lastEffect:null,stores:null},Ar.updateQueue=_,_.stores=[E]):(N=_.stores,N===null?_.stores=[E]:N.push(E))}function ZP(E,_,N,R){_.value=N,_.getSnapshot=R,KP(_)&&Ro(E,1,-1)}function JP(E,_,N){return N(function(){KP(_)&&Ro(E,1,-1)})}function KP(E){var _=E.getSnapshot;E=E.value;try{var N=_();return!js(E,N)}catch{return!0}}function T2(E){var _=Fl();return typeof E=="function"&&(E=E()),_.memoizedState=_.baseState=E,E={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ph,lastRenderedState:E},_.queue=E,E=E.dispatch=Fee.bind(null,Ar,E),[_.memoizedState,E]}function Jm(E,_,N,R){return E={tag:E,create:_,destroy:N,deps:R,next:null},_=Ar.updateQueue,_===null?(_={lastEffect:null,stores:null},Ar.updateQueue=_,_.lastEffect=E.next=E):(N=_.lastEffect,N===null?_.lastEffect=E.next=E:(R=N.next,N.next=E,E.next=R,_.lastEffect=E)),E}function QP(){return qs().memoizedState}function Zy(E,_,N,R){var W=Fl();Ar.flags|=E,W.memoizedState=Jm(1|_,N,void 0,R===void 0?null:R)}function Jy(E,_,N,R){var W=qs();R=R===void 0?null:R;var Y=void 0;if(Bi!==null){var Se=Bi.memoizedState;if(Y=Se.destroy,R!==null&&_2(R,Se.deps)){W.memoizedState=Jm(_,N,Y,R);return}}Ar.flags|=E,W.memoizedState=Jm(1|_,N,Y,R)}function M2(E,_){return Zy(8390656,8,E,_)}function Km(E,_){return Jy(2048,8,E,_)}function eR(E,_){return Jy(4,2,E,_)}function tR(E,_){return Jy(4,4,E,_)}function nR(E,_){if(typeof _=="function")return E=E(),_(E),function(){_(null)};if(_!=null)return E=E(),_.current=E,function(){_.current=null}}function rR(E,_,N){return N=N!=null?N.concat([E]):null,Jy(4,4,nR.bind(null,_,E),N)}function D2(){}function iR(E,_){var N=qs();_=_===void 0?null:_;var R=N.memoizedState;return R!==null&&_!==null&&_2(_,R[1])?R[0]:(N.memoizedState=[E,_],E)}function aR(E,_){var N=qs();_=_===void 0?null:_;var R=N.memoizedState;return R!==null&&_!==null&&_2(_,R[1])?R[0]:(E=E(),N.memoizedState=[E,_],E)}function Iee(E,_){var N=Mn;Mn=N!==0&&4>N?N:4,E(!0);var R=Po.transition;Po.transition={};try{E(!1),_()}finally{Mn=N,Po.transition=R}}function oR(){return qs().memoizedState}function Lee(E,_,N){var R=Hu(E);N={lane:R,action:N,hasEagerState:!1,eagerState:null,next:null},sR(E)?lR(_,N):(uR(E,_,N),N=ha(),E=Ro(E,R,N),E!==null&&cR(E,_,R))}function Fee(E,_,N){var R=Hu(E),W={lane:R,action:N,hasEagerState:!1,eagerState:null,next:null};if(sR(E))lR(_,W);else{uR(E,_,W);var Y=E.alternate;if(E.lanes===0&&(Y===null||Y.lanes===0)&&(Y=_.lastRenderedReducer,Y!==null))try{var Se=_.lastRenderedState,Be=Y(Se,N);if(W.hasEagerState=!0,W.eagerState=Be,js(Be,Se))return}catch{}finally{}N=ha(),E=Ro(E,R,N),E!==null&&cR(E,_,R)}}function sR(E){var _=E.alternate;return E===Ar||_!==null&&_===Ar}function lR(E,_){Ym=$y=!0;var N=E.pending;N===null?_.next=_:(_.next=N.next,N.next=_),E.pending=_}function uR(E,_,N){Wr!==null&&E.mode&1&&!(mn&2)?(E=_.interleaved,E===null?(N.next=N,Vs===null?Vs=[_]:Vs.push(_)):(N.next=E.next,E.next=N),_.interleaved=N):(E=_.pending,E===null?N.next=N:(N.next=E.next,E.next=N),_.pending=N)}function cR(E,_,N){if(N&4194240){var R=_.lanes;R&=E.pendingLanes,N|=R,_.lanes=N,r2(E,N)}}var Ky={readContext:Do,useCallback:zi,useContext:zi,useEffect:zi,useImperativeHandle:zi,useInsertionEffect:zi,useLayoutEffect:zi,useMemo:zi,useReducer:zi,useRef:zi,useState:zi,useDebugValue:zi,useDeferredValue:zi,useTransition:zi,useMutableSource:zi,useSyncExternalStore:zi,useId:zi,unstable_isNewReconciler:!1},Bee={readContext:Do,useCallback:function(E,_){return Fl().memoizedState=[E,_===void 0?null:_],E},useContext:Do,useEffect:M2,useImperativeHandle:function(E,_,N){return N=N!=null?N.concat([E]):null,Zy(4194308,4,nR.bind(null,_,E),N)},useLayoutEffect:function(E,_){return Zy(4194308,4,E,_)},useInsertionEffect:function(E,_){return Zy(4,2,E,_)},useMemo:function(E,_){var N=Fl();return _=_===void 0?null:_,E=E(),N.memoizedState=[E,_],E},useReducer:function(E,_,N){var R=Fl();return _=N!==void 0?N(_):_,R.memoizedState=R.baseState=_,E={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:E,lastRenderedState:_},R.queue=E,E=E.dispatch=Lee.bind(null,Ar,E),[R.memoizedState,E]},useRef:function(E){var _=Fl();return E={current:E},_.memoizedState=E},useState:T2,useDebugValue:D2,useDeferredValue:function(E){var _=T2(E),N=_[0],R=_[1];return M2(function(){var W=Po.transition;Po.transition={};try{R(E)}finally{Po.transition=W}},[E]),N},useTransition:function(){var E=T2(!1),_=E[0];return E=Iee.bind(null,E[1]),Fl().memoizedState=E,[_,E]},useMutableSource:function(){},useSyncExternalStore:function(E,_,N){var R=Ar,W=Fl();if(cr){if(N===void 0)throw Error(a(407));N=N()}else{if(N=_(),Wr===null)throw Error(a(349));ef&30||YP(R,_,N)}W.memoizedState=N;var Y={value:N,getSnapshot:_};return W.queue=Y,M2(JP.bind(null,R,Y,E),[E]),R.flags|=2048,Jm(9,ZP.bind(null,R,Y,N,_),void 0,null),N},useId:function(){var E=Fl(),_=Wr.identifierPrefix;if(cr){var N=Ll,R=Il;N=(R&~(1<<32-ua(R)-1)).toString(32)+N,_=":"+_+"R"+N,N=Zm++,0<N&&(_+="H"+N.toString(32)),_+=":"}else N=Ree++,_=":"+_+"r"+N.toString(32)+":";return E.memoizedState=_},unstable_isNewReconciler:!1},zee={readContext:Do,useCallback:iR,useContext:Do,useEffect:Km,useImperativeHandle:rR,useInsertionEffect:eR,useLayoutEffect:tR,useMemo:aR,useReducer:Xy,useRef:QP,useState:function(){return Xy(ph)},useDebugValue:D2,useDeferredValue:function(E){var _=Xy(ph),N=_[0],R=_[1];return Km(function(){var W=Po.transition;Po.transition={};try{R(E)}finally{Po.transition=W}},[E]),N},useTransition:function(){var E=Xy(ph)[0],_=qs().memoizedState;return[E,_]},useMutableSource:$P,useSyncExternalStore:XP,useId:oR,unstable_isNewReconciler:!1},Uee={readContext:Do,useCallback:iR,useContext:Do,useEffect:Km,useImperativeHandle:rR,useInsertionEffect:eR,useLayoutEffect:tR,useMemo:aR,useReducer:Yy,useRef:QP,useState:function(){return Yy(ph)},useDebugValue:D2,useDeferredValue:function(E){var _=Yy(ph),N=_[0],R=_[1];return Km(function(){var W=Po.transition;Po.transition={};try{R(E)}finally{Po.transition=W}},[E]),N},useTransition:function(){var E=Yy(ph)[0],_=qs().memoizedState;return[E,_]},useMutableSource:$P,useSyncExternalStore:XP,useId:oR,unstable_isNewReconciler:!1};function k2(E,_){try{var N="",R=_;do N+=Pee(R),R=R.return;while(R);var W=N}catch(Y){W=`
Error generating stack: `+Y.message+`
`+Y.stack}return{value:E,source:_,stack:W}}function N2(E,_){try{console.error(_.value)}catch(N){setTimeout(function(){throw N})}}var jee=typeof WeakMap=="function"?WeakMap:Map;function hR(E,_,N){N=Rl(-1,N),N.tag=3,N.payload={element:null};var R=_.value;return N.callback=function(){p1||(p1=!0,X2=R),N2(E,_)},N}function dR(E,_,N){N=Rl(-1,N),N.tag=3;var R=E.type.getDerivedStateFromError;if(typeof R=="function"){var W=_.value;N.payload=function(){return R(W)},N.callback=function(){N2(E,_)}}var Y=E.stateNode;return Y!==null&&typeof Y.componentDidCatch=="function"&&(N.callback=function(){N2(E,_),typeof R!="function"&&(Uu===null?Uu=new Set([this]):Uu.add(this));var Se=_.stack;this.componentDidCatch(_.value,{componentStack:Se!==null?Se:""})}),N}function fR(E,_,N){var R=E.pingCache;if(R===null){R=E.pingCache=new jee;var W=new Set;R.set(_,W)}else W=R.get(_),W===void 0&&(W=new Set,R.set(_,W));W.has(N)||(W.add(N),E=tte.bind(null,E,_,N),_.then(E,E))}function pR(E){do{var _;if((_=E.tag===13)&&(_=E.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return E;E=E.return}while(E!==null);return null}function mR(E,_,N,R,W){return E.mode&1?(E.flags|=65536,E.lanes=W,E):(E===_?E.flags|=65536:(E.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(_=Rl(-1,1),_.tag=2,zu(N,_))),N.lanes|=1),E)}function Gs(E){E.flags|=4}function gR(E,_){if(E!==null&&E.child===_.child)return!0;if(_.flags&16)return!1;for(E=_.child;E!==null;){if(E.flags&12854||E.subtreeFlags&12854)return!1;E=E.sibling}return!0}var Qm,eg,Qy,e1;if(Me)Qm=function(E,_){for(var N=_.child;N!==null;){if(N.tag===5||N.tag===6)J(E,N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===_)break;for(;N.sibling===null;){if(N.return===null||N.return===_)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},eg=function(){},Qy=function(E,_,N,R,W){if(E=E.memoizedProps,E!==R){var Y=_.stateNode,Se=Ws(Oo.current);N=Z(Y,N,E,R,W,Se),(_.updateQueue=N)&&Gs(_)}},e1=function(E,_,N,R){N!==R&&Gs(_)};else if(be){Qm=function(E,_,N,R){for(var W=_.child;W!==null;){if(W.tag===5){var Y=W.stateNode;N&&R&&(Y=Ce(Y,W.type,W.memoizedProps,W)),J(E,Y)}else if(W.tag===6)Y=W.stateNode,N&&R&&(Y=Oe(Y,W.memoizedProps,W)),J(E,Y);else if(W.tag!==4){if(W.tag===22&&W.memoizedState!==null)Y=W.child,Y!==null&&(Y.return=W),Qm(E,W,!0,!0);else if(W.child!==null){W.child.return=W,W=W.child;continue}}if(W===_)break;for(;W.sibling===null;){if(W.return===null||W.return===_)return;W=W.return}W.sibling.return=W.return,W=W.sibling}};var vR=function(E,_,N,R){for(var W=_.child;W!==null;){if(W.tag===5){var Y=W.stateNode;N&&R&&(Y=Ce(Y,W.type,W.memoizedProps,W)),te(E,Y)}else if(W.tag===6)Y=W.stateNode,N&&R&&(Y=Oe(Y,W.memoizedProps,W)),te(E,Y);else if(W.tag!==4){if(W.tag===22&&W.memoizedState!==null)Y=W.child,Y!==null&&(Y.return=W),vR(E,W,!0,!0);else if(W.child!==null){W.child.return=W,W=W.child;continue}}if(W===_)break;for(;W.sibling===null;){if(W.return===null||W.return===_)return;W=W.return}W.sibling.return=W.return,W=W.sibling}};eg=function(E,_){var N=_.stateNode;if(!gR(E,_)){E=N.containerInfo;var R=H(E);vR(R,_,!1,!1),N.pendingChildren=R,Gs(_),le(E,R)}},Qy=function(E,_,N,R,W){var Y=E.stateNode,Se=E.memoizedProps;if((E=gR(E,_))&&Se===R)_.stateNode=Y;else{var Be=_.stateNode,Ke=Ws(Oo.current),ht=null;Se!==R&&(ht=Z(Be,N,Se,R,W,Ke)),E&&ht===null?_.stateNode=Y:(Y=Xe(Y,ht,N,Se,R,_,E,Be),Q(Y,N,R,W,Ke)&&Gs(_),_.stateNode=Y,E?Gs(_):Qm(Y,_,!1,!1))}},e1=function(E,_,N,R){N!==R?(E=Ws(Kd.current),N=Ws(Oo.current),_.stateNode=fe(R,E,N,_),Gs(_)):_.stateNode=E.stateNode}}else eg=function(){},Qy=function(){},e1=function(){};function tg(E,_){if(!cr)switch(E.tailMode){case"hidden":_=E.tail;for(var N=null;_!==null;)_.alternate!==null&&(N=_),_=_.sibling;N===null?E.tail=null:N.sibling=null;break;case"collapsed":N=E.tail;for(var R=null;N!==null;)N.alternate!==null&&(R=N),N=N.sibling;R===null?_||E.tail===null?E.tail=null:E.tail.sibling=null:R.sibling=null}}function Ui(E){var _=E.alternate!==null&&E.alternate.child===E.child,N=0,R=0;if(_)for(var W=E.child;W!==null;)N|=W.lanes|W.childLanes,R|=W.subtreeFlags&14680064,R|=W.flags&14680064,W.return=E,W=W.sibling;else for(W=E.child;W!==null;)N|=W.lanes|W.childLanes,R|=W.subtreeFlags,R|=W.flags,W.return=E,W=W.sibling;return E.subtreeFlags|=R,E.childLanes=N,_}function Hee(E,_,N){var R=_.pendingProps;switch(g2(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ui(_),null;case 1:return Vr(_.type)&&Lu(),Ui(_),null;case 3:return R=_.stateNode,Qd(),yn(ci),yn(Hr),E2(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(E===null||E.child===null)&&(qm(_)?Gs(_):E===null||E.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,us!==null&&(J2(us),us=null))),eg(E,_),Ui(_),null;case 5:w2(_),N=Ws(Kd.current);var W=_.type;if(E!==null&&_.stateNode!=null)Qy(E,_,W,R,N),E.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!R){if(_.stateNode===null)throw Error(a(166));return Ui(_),null}if(E=Ws(Oo.current),qm(_)){if(!ne)throw Error(a(175));E=Kn(_.stateNode,_.type,_.memoizedProps,N,E,_,!Wm),_.updateQueue=E,E!==null&&Gs(_)}else{var Y=X(W,R,N,E,_);Qm(Y,_,!1,!1),_.stateNode=Y,Q(Y,W,R,N,E)&&Gs(_)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return Ui(_),null;case 6:if(E&&_.stateNode!=null)e1(E,_,E.memoizedProps,R);else{if(typeof R!="string"&&_.stateNode===null)throw Error(a(166));if(E=Ws(Kd.current),N=Ws(Oo.current),qm(_)){if(!ne)throw Error(a(176));if(E=_.stateNode,R=_.memoizedProps,(N=Bs(E,R,_,!Wm))&&(W=eo,W!==null))switch(Y=(W.mode&1)!==0,W.tag){case 3:dt(W.stateNode.containerInfo,E,R,Y);break;case 5:Tt(W.type,W.memoizedProps,W.stateNode,E,R,Y)}N&&Gs(_)}else _.stateNode=fe(R,E,N,_)}return Ui(_),null;case 13:if(yn(mr),R=_.memoizedState,cr&&to!==null&&_.mode&1&&!(_.flags&128)){for(E=to;E;)E=xt(E);return Zd(),_.flags|=98560,_}if(R!==null&&R.dehydrated!==null){if(R=qm(_),E===null){if(!R)throw Error(a(318));if(!ne)throw Error(a(344));if(E=_.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));Iu(E,_)}else Zd(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;return Ui(_),null}return us!==null&&(J2(us),us=null),_.flags&128?(_.lanes=N,_):(R=R!==null,N=!1,E===null?qm(_):N=E.memoizedState!==null,R&&!N&&(_.child.flags|=8192,_.mode&1&&(E===null||mr.current&1?Kr===0&&(Kr=3):Q2())),_.updateQueue!==null&&(_.flags|=4),Ui(_),null);case 4:return Qd(),eg(E,_),E===null&&ze(_.stateNode.containerInfo),Ui(_),null;case 10:return c2(_.type._context),Ui(_),null;case 17:return Vr(_.type)&&Lu(),Ui(_),null;case 19:if(yn(mr),W=_.memoizedState,W===null)return Ui(_),null;if(R=(_.flags&128)!==0,Y=W.rendering,Y===null)if(R)tg(W,!1);else{if(Kr!==0||E!==null&&E.flags&128)for(E=_.child;E!==null;){if(Y=qy(E),Y!==null){for(_.flags|=128,tg(W,!1),E=Y.updateQueue,E!==null&&(_.updateQueue=E,_.flags|=4),_.subtreeFlags=0,E=N,R=_.child;R!==null;)N=R,W=E,N.flags&=14680066,Y=N.alternate,Y===null?(N.childLanes=0,N.lanes=W,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=Y.childLanes,N.lanes=Y.lanes,N.child=Y.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=Y.memoizedProps,N.memoizedState=Y.memoizedState,N.updateQueue=Y.updateQueue,N.type=Y.type,W=Y.dependencies,N.dependencies=W===null?null:{lanes:W.lanes,firstContext:W.firstContext}),R=R.sibling;return Xt(mr,mr.current&1|2),_.child}E=E.sibling}W.tail!==null&&hi()>$2&&(_.flags|=128,R=!0,tg(W,!1),_.lanes=4194304)}else{if(!R)if(E=qy(Y),E!==null){if(_.flags|=128,R=!0,E=E.updateQueue,E!==null&&(_.updateQueue=E,_.flags|=4),tg(W,!0),W.tail===null&&W.tailMode==="hidden"&&!Y.alternate&&!cr)return Ui(_),null}else 2*hi()-W.renderingStartTime>$2&&N!==1073741824&&(_.flags|=128,R=!0,tg(W,!1),_.lanes=4194304);W.isBackwards?(Y.sibling=_.child,_.child=Y):(E=W.last,E!==null?E.sibling=Y:_.child=Y,W.last=Y)}return W.tail!==null?(_=W.tail,W.rendering=_,W.tail=_.sibling,W.renderingStartTime=hi(),_.sibling=null,E=mr.current,Xt(mr,R?E&1|2:E&1),_):(Ui(_),null);case 22:case 23:return K2(),R=_.memoizedState!==null,E!==null&&E.memoizedState!==null!==R&&(_.flags|=8192),R&&_.mode&1?ro&1073741824&&(Ui(_),Me&&_.subtreeFlags&6&&(_.flags|=8192)):Ui(_),null;case 24:return null;case 25:return null}throw Error(a(156,_.tag))}var Vee=o.ReactCurrentOwner,no=!1;function ca(E,_,N,R){_.child=E===null?qP(_,null,N,R):Jd(_,E.child,N,R)}function yR(E,_,N,R,W){N=N.render;var Y=_.ref;return $d(_,W),R=C2(E,_,N,R,Y,W),N=A2(),E!==null&&!no?(_.updateQueue=E.updateQueue,_.flags&=-2053,E.lanes&=~W,Bl(E,_,W)):(cr&&N&&m2(_),_.flags|=1,ca(E,_,R,W),_.child)}function bR(E,_,N,R,W){if(E===null){var Y=N.type;return typeof Y=="function"&&!eC(Y)&&Y.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(_.tag=15,_.type=Y,xR(E,_,Y,R,W)):(E=w1(N.type,null,R,_,_.mode,W),E.ref=_.ref,E.return=_,_.child=E)}if(Y=E.child,!(E.lanes&W)){var Se=Y.memoizedProps;if(N=N.compare,N=N!==null?N:Ly,N(Se,R)&&E.ref===_.ref)return Bl(E,_,W)}return _.flags|=1,E=Wu(Y,R),E.ref=_.ref,E.return=_,_.child=E}function xR(E,_,N,R,W){if(E!==null&&Ly(E.memoizedProps,R)&&E.ref===_.ref)if(no=!1,(E.lanes&W)!==0)E.flags&131072&&(no=!0);else return _.lanes=E.lanes,Bl(E,_,W);return O2(E,_,N,R,W)}function wR(E,_,N){var R=_.pendingProps,W=R.children,Y=E!==null?E.memoizedState:null;if(R.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null},Xt(tf,ro),ro|=N;else if(N&1073741824)_.memoizedState={baseLanes:0,cachePool:null},R=Y!==null?Y.baseLanes:N,Xt(tf,ro),ro|=R;else return E=Y!==null?Y.baseLanes|N:N,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:E,cachePool:null},_.updateQueue=null,Xt(tf,ro),ro|=E,null;else Y!==null?(R=Y.baseLanes|N,_.memoizedState=null):R=N,Xt(tf,ro),ro|=R;return ca(E,_,W,N),_.child}function SR(E,_){var N=_.ref;(E===null&&N!==null||E!==null&&E.ref!==N)&&(_.flags|=512,_.flags|=2097152)}function O2(E,_,N,R,W){var Y=Vr(N)?sa:Hr.current;return Y=Ol(_,Y),$d(_,W),N=C2(E,_,N,R,Y,W),R=A2(),E!==null&&!no?(_.updateQueue=E.updateQueue,_.flags&=-2053,E.lanes&=~W,Bl(E,_,W)):(cr&&R&&m2(_),_.flags|=1,ca(E,_,N,W),_.child)}function ER(E,_,N,R,W){if(Vr(N)){var Y=!0;Fu(_)}else Y=!1;if($d(_,W),_.stateNode===null)E!==null&&(E.alternate=null,_.alternate=null,_.flags|=2),FP(_,N,R),p2(_,N,R,W),R=!0;else if(E===null){var Se=_.stateNode,Be=_.memoizedProps;Se.props=Be;var Ke=Se.context,ht=N.contextType;typeof ht=="object"&&ht!==null?ht=Do(ht):(ht=Vr(N)?sa:Hr.current,ht=Ol(_,ht));var _t=N.getDerivedStateFromProps,rn=typeof _t=="function"||typeof Se.getSnapshotBeforeUpdate=="function";rn||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(Be!==R||Ke!==ht)&&BP(_,Se,R,ht),Bu=!1;var Vt=_.memoizedState;Se.state=Vt,Uy(_,R,Se,W),Ke=_.memoizedState,Be!==R||Vt!==Ke||ci.current||Bu?(typeof _t=="function"&&(f2(_,N,_t,R),Ke=_.memoizedState),(Be=Bu||LP(_,N,Be,R,Vt,Ke,ht))?(rn||typeof Se.UNSAFE_componentWillMount!="function"&&typeof Se.componentWillMount!="function"||(typeof Se.componentWillMount=="function"&&Se.componentWillMount(),typeof Se.UNSAFE_componentWillMount=="function"&&Se.UNSAFE_componentWillMount()),typeof Se.componentDidMount=="function"&&(_.flags|=4194308)):(typeof Se.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=R,_.memoizedState=Ke),Se.props=R,Se.state=Ke,Se.context=ht,R=Be):(typeof Se.componentDidMount=="function"&&(_.flags|=4194308),R=!1)}else{Se=_.stateNode,OP(E,_),Be=_.memoizedProps,ht=_.type===_.elementType?Be:ls(_.type,Be),Se.props=ht,rn=_.pendingProps,Vt=Se.context,Ke=N.contextType,typeof Ke=="object"&&Ke!==null?Ke=Do(Ke):(Ke=Vr(N)?sa:Hr.current,Ke=Ol(_,Ke));var Xn=N.getDerivedStateFromProps;(_t=typeof Xn=="function"||typeof Se.getSnapshotBeforeUpdate=="function")||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(Be!==rn||Vt!==Ke)&&BP(_,Se,R,Ke),Bu=!1,Vt=_.memoizedState,Se.state=Vt,Uy(_,R,Se,W);var Rt=_.memoizedState;Be!==rn||Vt!==Rt||ci.current||Bu?(typeof Xn=="function"&&(f2(_,N,Xn,R),Rt=_.memoizedState),(ht=Bu||LP(_,N,ht,R,Vt,Rt,Ke)||!1)?(_t||typeof Se.UNSAFE_componentWillUpdate!="function"&&typeof Se.componentWillUpdate!="function"||(typeof Se.componentWillUpdate=="function"&&Se.componentWillUpdate(R,Rt,Ke),typeof Se.UNSAFE_componentWillUpdate=="function"&&Se.UNSAFE_componentWillUpdate(R,Rt,Ke)),typeof Se.componentDidUpdate=="function"&&(_.flags|=4),typeof Se.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof Se.componentDidUpdate!="function"||Be===E.memoizedProps&&Vt===E.memoizedState||(_.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||Be===E.memoizedProps&&Vt===E.memoizedState||(_.flags|=1024),_.memoizedProps=R,_.memoizedState=Rt),Se.props=R,Se.state=Rt,Se.context=Ke,R=ht):(typeof Se.componentDidUpdate!="function"||Be===E.memoizedProps&&Vt===E.memoizedState||(_.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||Be===E.memoizedProps&&Vt===E.memoizedState||(_.flags|=1024),R=!1)}return P2(E,_,N,R,Y,W)}function P2(E,_,N,R,W,Y){SR(E,_);var Se=(_.flags&128)!==0;if(!R&&!Se)return W&&la(_,N,!1),Bl(E,_,Y);R=_.stateNode,Vee.current=_;var Be=Se&&typeof N.getDerivedStateFromError!="function"?null:R.render();return _.flags|=1,E!==null&&Se?(_.child=Jd(_,E.child,null,Y),_.child=Jd(_,null,Be,Y)):ca(E,_,Be,Y),_.memoizedState=R.state,W&&la(_,N,!0),_.child}function _R(E){var _=E.stateNode;_.pendingContext?Jr(E,_.pendingContext,_.pendingContext!==_.context):_.context&&Jr(E,_.context,!1),x2(E,_.containerInfo)}function CR(E,_,N,R,W){return Zd(),b2(W),_.flags|=256,ca(E,_,N,R),_.child}var t1={dehydrated:null,treeContext:null,retryLane:0};function n1(E){return{baseLanes:E,cachePool:null}}function AR(E,_,N){var R=_.pendingProps,W=mr.current,Y=!1,Se=(_.flags&128)!==0,Be;if((Be=Se)||(Be=E!==null&&E.memoizedState===null?!1:(W&2)!==0),Be?(Y=!0,_.flags&=-129):(E===null||E.memoizedState!==null)&&(W|=1),Xt(mr,W&1),E===null)return y2(_),E=_.memoizedState,E!==null&&(E=E.dehydrated,E!==null)?(_.mode&1?Et(E)?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(W=R.children,E=R.fallback,Y?(R=_.mode,Y=_.child,W={mode:"hidden",children:W},!(R&1)&&Y!==null?(Y.childLanes=0,Y.pendingProps=W):Y=S1(W,R,0,null),E=xh(E,R,N,null),Y.return=_,E.return=_,Y.sibling=E,_.child=Y,_.child.memoizedState=n1(N),_.memoizedState=t1,E):R2(_,W));if(W=E.memoizedState,W!==null){if(Be=W.dehydrated,Be!==null){if(Se)return _.flags&256?(_.flags&=-257,r1(E,_,N,Error(a(422)))):_.memoizedState!==null?(_.child=E.child,_.flags|=128,null):(Y=R.fallback,W=_.mode,R=S1({mode:"visible",children:R.children},W,0,null),Y=xh(Y,W,N,null),Y.flags|=2,R.return=_,Y.return=_,R.sibling=Y,_.child=R,_.mode&1&&Jd(_,E.child,null,N),_.child.memoizedState=n1(N),_.memoizedState=t1,Y);if(!(_.mode&1))_=r1(E,_,N,null);else if(Et(Be))_=r1(E,_,N,Error(a(419)));else if(R=(N&E.childLanes)!==0,no||R){if(R=Wr,R!==null){switch(N&-N){case 4:Y=2;break;case 16:Y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Y=32;break;case 536870912:Y=268435456;break;default:Y=0}R=Y&(R.suspendedLanes|N)?0:Y,R!==0&&R!==W.retryLane&&(W.retryLane=R,Ro(E,R,-1))}Q2(),_=r1(E,_,N,Error(a(421)))}else ft(Be)?(_.flags|=128,_.child=E.child,_=nte.bind(null,E),rt(Be,_),_=null):(N=W.treeContext,ne&&(to=Cr(Be),eo=_,cr=!0,us=null,Wm=!1,N!==null&&(ko[No++]=Il,ko[No++]=Ll,ko[No++]=dh,Il=N.id,Ll=N.overflow,dh=_)),_=R2(_,_.pendingProps.children),_.flags|=4096);return _}return Y?(R=MR(E,_,R.children,R.fallback,N),Y=_.child,W=E.child.memoizedState,Y.memoizedState=W===null?n1(N):{baseLanes:W.baseLanes|N,cachePool:null},Y.childLanes=E.childLanes&~N,_.memoizedState=t1,R):(N=TR(E,_,R.children,N),_.memoizedState=null,N)}return Y?(R=MR(E,_,R.children,R.fallback,N),Y=_.child,W=E.child.memoizedState,Y.memoizedState=W===null?n1(N):{baseLanes:W.baseLanes|N,cachePool:null},Y.childLanes=E.childLanes&~N,_.memoizedState=t1,R):(N=TR(E,_,R.children,N),_.memoizedState=null,N)}function R2(E,_){return _=S1({mode:"visible",children:_},E.mode,0,null),_.return=E,E.child=_}function TR(E,_,N,R){var W=E.child;return E=W.sibling,N=Wu(W,{mode:"visible",children:N}),!(_.mode&1)&&(N.lanes=R),N.return=_,N.sibling=null,E!==null&&(R=_.deletions,R===null?(_.deletions=[E],_.flags|=16):R.push(E)),_.child=N}function MR(E,_,N,R,W){var Y=_.mode;E=E.child;var Se=E.sibling,Be={mode:"hidden",children:N};return!(Y&1)&&_.child!==E?(N=_.child,N.childLanes=0,N.pendingProps=Be,_.deletions=null):(N=Wu(E,Be),N.subtreeFlags=E.subtreeFlags&14680064),Se!==null?R=Wu(Se,R):(R=xh(R,Y,W,null),R.flags|=2),R.return=_,N.return=_,N.sibling=R,_.child=N,R}function r1(E,_,N,R){return R!==null&&b2(R),Jd(_,E.child,null,N),E=R2(_,_.pendingProps.children),E.flags|=2,_.memoizedState=null,E}function DR(E,_,N){E.lanes|=_;var R=E.alternate;R!==null&&(R.lanes|=_),h2(E.return,_,N)}function I2(E,_,N,R,W){var Y=E.memoizedState;Y===null?E.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:R,tail:N,tailMode:W}:(Y.isBackwards=_,Y.rendering=null,Y.renderingStartTime=0,Y.last=R,Y.tail=N,Y.tailMode=W)}function kR(E,_,N){var R=_.pendingProps,W=R.revealOrder,Y=R.tail;if(ca(E,_,R.children,N),R=mr.current,R&2)R=R&1|2,_.flags|=128;else{if(E!==null&&E.flags&128)e:for(E=_.child;E!==null;){if(E.tag===13)E.memoizedState!==null&&DR(E,N,_);else if(E.tag===19)DR(E,N,_);else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===_)break e;for(;E.sibling===null;){if(E.return===null||E.return===_)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}R&=1}if(Xt(mr,R),!(_.mode&1))_.memoizedState=null;else switch(W){case"forwards":for(N=_.child,W=null;N!==null;)E=N.alternate,E!==null&&qy(E)===null&&(W=N),N=N.sibling;N=W,N===null?(W=_.child,_.child=null):(W=N.sibling,N.sibling=null),I2(_,!1,W,N,Y);break;case"backwards":for(N=null,W=_.child,_.child=null;W!==null;){if(E=W.alternate,E!==null&&qy(E)===null){_.child=W;break}E=W.sibling,W.sibling=N,N=W,W=E}I2(_,!0,N,null,Y);break;case"together":I2(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Bl(E,_,N){if(E!==null&&(_.dependencies=E.dependencies),nf|=_.lanes,!(N&_.childLanes))return null;if(E!==null&&_.child!==E.child)throw Error(a(153));if(_.child!==null){for(E=_.child,N=Wu(E,E.pendingProps),_.child=N,N.return=_;E.sibling!==null;)E=E.sibling,N=N.sibling=Wu(E,E.pendingProps),N.return=_;N.sibling=null}return _.child}function Wee(E,_,N){switch(_.tag){case 3:_R(_),Zd();break;case 5:GP(_);break;case 1:Vr(_.type)&&Fu(_);break;case 4:x2(_,_.stateNode.containerInfo);break;case 10:NP(_,_.type._context,_.memoizedProps.value);break;case 13:var R=_.memoizedState;if(R!==null)return R.dehydrated!==null?(Xt(mr,mr.current&1),_.flags|=128,null):N&_.child.childLanes?AR(E,_,N):(Xt(mr,mr.current&1),E=Bl(E,_,N),E!==null?E.sibling:null);Xt(mr,mr.current&1);break;case 19:if(R=(N&_.childLanes)!==0,E.flags&128){if(R)return kR(E,_,N);_.flags|=128}var W=_.memoizedState;if(W!==null&&(W.rendering=null,W.tail=null,W.lastEffect=null),Xt(mr,mr.current),R)break;return null;case 22:case 23:return _.lanes=0,wR(E,_,N)}return Bl(E,_,N)}function qee(E,_){switch(g2(_),_.tag){case 1:return Vr(_.type)&&Lu(),E=_.flags,E&65536?(_.flags=E&-65537|128,_):null;case 3:return Qd(),yn(ci),yn(Hr),E2(),E=_.flags,E&65536&&!(E&128)?(_.flags=E&-65537|128,_):null;case 5:return w2(_),null;case 13:if(yn(mr),E=_.memoizedState,E!==null&&E.dehydrated!==null){if(_.alternate===null)throw Error(a(340));Zd()}return E=_.flags,E&65536?(_.flags=E&-65537|128,_):null;case 19:return yn(mr),null;case 4:return Qd(),null;case 10:return c2(_.type._context),null;case 22:case 23:return K2(),null;case 24:return null;default:return null}}var i1=!1,mh=!1,Gee=typeof WeakSet=="function"?WeakSet:Set,vt=null;function a1(E,_){var N=E.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(R){Fa(E,_,R)}else N.current=null}function NR(E,_,N){try{N()}catch(R){Fa(E,_,R)}}var OR=!1;function $ee(E,_){for(z(E.containerInfo),vt=_;vt!==null;)if(E=vt,_=E.child,(E.subtreeFlags&1028)!==0&&_!==null)_.return=E,vt=_;else for(;vt!==null;){E=vt;try{var N=E.alternate;if(E.flags&1024)switch(E.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var R=N.memoizedProps,W=N.memoizedState,Y=E.stateNode,Se=Y.getSnapshotBeforeUpdate(E.elementType===E.type?R:ls(E.type,R),W);Y.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:Me&&he(E.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Be){Fa(E,E.return,Be)}if(_=E.sibling,_!==null){_.return=E.return,vt=_;break}vt=E.return}return N=OR,OR=!1,N}function gh(E,_,N){var R=_.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var W=R=R.next;do{if((W.tag&E)===E){var Y=W.destroy;W.destroy=void 0,Y!==void 0&&NR(_,N,Y)}W=W.next}while(W!==R)}}function ng(E,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var N=_=_.next;do{if((N.tag&E)===E){var R=N.create;N.destroy=R()}N=N.next}while(N!==_)}}function L2(E){var _=E.ref;if(_!==null){var N=E.stateNode;switch(E.tag){case 5:E=F(N);break;default:E=N}typeof _=="function"?_(E):_.current=E}}function PR(E,_,N){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(Ry,_)}catch{}switch(_.tag){case 0:case 11:case 14:case 15:if(E=_.updateQueue,E!==null&&(E=E.lastEffect,E!==null)){var R=E=E.next;do{var W=R,Y=W.destroy;W=W.tag,Y!==void 0&&(W&2||W&4)&&NR(_,N,Y),R=R.next}while(R!==E)}break;case 1:if(a1(_,N),E=_.stateNode,typeof E.componentWillUnmount=="function")try{E.props=_.memoizedProps,E.state=_.memoizedState,E.componentWillUnmount()}catch(Se){Fa(_,N,Se)}break;case 5:a1(_,N);break;case 4:Me?zR(E,_,N):be&&be&&(_=_.stateNode.containerInfo,N=H(_),ve(_,N))}}function RR(E,_,N){for(var R=_;;)if(PR(E,R,N),R.child===null||Me&&R.tag===4){if(R===_)break;for(;R.sibling===null;){if(R.return===null||R.return===_)return;R=R.return}R.sibling.return=R.return,R=R.sibling}else R.child.return=R,R=R.child}function IR(E){var _=E.alternate;_!==null&&(E.alternate=null,IR(_)),E.child=null,E.deletions=null,E.sibling=null,E.tag===5&&(_=E.stateNode,_!==null&&ie(_)),E.stateNode=null,E.return=null,E.dependencies=null,E.memoizedProps=null,E.memoizedState=null,E.pendingProps=null,E.stateNode=null,E.updateQueue=null}function LR(E){return E.tag===5||E.tag===3||E.tag===4}function FR(E){e:for(;;){for(;E.sibling===null;){if(E.return===null||LR(E.return))return null;E=E.return}for(E.sibling.return=E.return,E=E.sibling;E.tag!==5&&E.tag!==6&&E.tag!==18;){if(E.flags&2||E.child===null||E.tag===4)continue e;E.child.return=E,E=E.child}if(!(E.flags&2))return E.stateNode}}function BR(E){if(Me){e:{for(var _=E.return;_!==null;){if(LR(_))break e;_=_.return}throw Error(a(160))}var N=_;switch(N.tag){case 5:_=N.stateNode,N.flags&32&&(et(_),N.flags&=-33),N=FR(E),B2(E,N,_);break;case 3:case 4:_=N.stateNode.containerInfo,N=FR(E),F2(E,N,_);break;default:throw Error(a(161))}}}function F2(E,_,N){var R=E.tag;if(R===5||R===6)E=E.stateNode,_?st(N,E,_):Fe(N,E);else if(R!==4&&(E=E.child,E!==null))for(F2(E,_,N),E=E.sibling;E!==null;)F2(E,_,N),E=E.sibling}function B2(E,_,N){var R=E.tag;if(R===5||R===6)E=E.stateNode,_?Ze(N,E,_):Ne(N,E);else if(R!==4&&(E=E.child,E!==null))for(B2(E,_,N),E=E.sibling;E!==null;)B2(E,_,N),E=E.sibling}function zR(E,_,N){for(var R=_,W=!1,Y,Se;;){if(!W){W=R.return;e:for(;;){if(W===null)throw Error(a(160));switch(Y=W.stateNode,W.tag){case 5:Se=!1;break e;case 3:Y=Y.containerInfo,Se=!0;break e;case 4:Y=Y.containerInfo,Se=!0;break e}W=W.return}W=!0}if(R.tag===5||R.tag===6)RR(E,R,N),Se?Re(Y,R.stateNode):we(Y,R.stateNode);else if(R.tag===18)Se?Ve(Y,R.stateNode):je(Y,R.stateNode);else if(R.tag===4){if(R.child!==null){Y=R.stateNode.containerInfo,Se=!0,R.child.return=R,R=R.child;continue}}else if(PR(E,R,N),R.child!==null){R.child.return=R,R=R.child;continue}if(R===_)break;for(;R.sibling===null;){if(R.return===null||R.return===_)return;R=R.return,R.tag===4&&(W=!1)}R.sibling.return=R.return,R=R.sibling}}function z2(E,_){if(Me){switch(_.tag){case 0:case 11:case 14:case 15:gh(3,_,_.return),ng(3,_),gh(5,_,_.return);return;case 1:return;case 5:var N=_.stateNode;if(N!=null){var R=_.memoizedProps;E=E!==null?E.memoizedProps:R;var W=_.type,Y=_.updateQueue;_.updateQueue=null,Y!==null&&it(N,Y,W,E,R,_)}return;case 6:if(_.stateNode===null)throw Error(a(162));N=_.memoizedProps,qe(_.stateNode,E!==null?E.memoizedProps:N,N);return;case 3:ne&&E!==null&&E.memoizedState.isDehydrated&&de(_.stateNode.containerInfo);return;case 12:return;case 13:o1(_);return;case 19:o1(_);return;case 17:return}throw Error(a(163))}switch(_.tag){case 0:case 11:case 14:case 15:gh(3,_,_.return),ng(3,_),gh(5,_,_.return);return;case 12:return;case 13:o1(_);return;case 19:o1(_);return;case 3:ne&&E!==null&&E.memoizedState.isDehydrated&&de(_.stateNode.containerInfo);break;case 22:case 23:return}e:if(be){switch(_.tag){case 1:case 5:case 6:break e;case 3:case 4:_=_.stateNode,ve(_.containerInfo,_.pendingChildren);break e}throw Error(a(163))}}function o1(E){var _=E.updateQueue;if(_!==null){E.updateQueue=null;var N=E.stateNode;N===null&&(N=E.stateNode=new Gee),_.forEach(function(R){var W=rte.bind(null,E,R);N.has(R)||(N.add(R),R.then(W,W))})}}function Xee(E,_){for(vt=_;vt!==null;){_=vt;var N=_.deletions;if(N!==null)for(var R=0;R<N.length;R++){var W=N[R];try{var Y=E;Me?zR(Y,W,_):RR(Y,W,_);var Se=W.alternate;Se!==null&&(Se.return=null),W.return=null}catch(It){Fa(W,_,It)}}if(N=_.child,_.subtreeFlags&12854&&N!==null)N.return=_,vt=N;else for(;vt!==null;){_=vt;try{var Be=_.flags;if(Be&32&&Me&&et(_.stateNode),Be&512){var Ke=_.alternate;if(Ke!==null){var ht=Ke.ref;ht!==null&&(typeof ht=="function"?ht(null):ht.current=null)}}if(Be&8192)switch(_.tag){case 13:if(_.memoizedState!==null){var _t=_.alternate;(_t===null||_t.memoizedState===null)&&(G2=hi())}break;case 22:var rn=_.memoizedState!==null,Vt=_.alternate,Xn=Vt!==null&&Vt.memoizedState!==null;if(N=_,Me){e:if(R=N,W=rn,Y=null,Me)for(var Rt=R;;){if(Rt.tag===5){if(Y===null){Y=Rt;var ji=Rt.stateNode;W?V(ji):Le(Rt.stateNode,Rt.memoizedProps)}}else if(Rt.tag===6){if(Y===null){var Lo=Rt.stateNode;W?Ee(Lo):Je(Lo,Rt.memoizedProps)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===R)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===R)break;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===R)break e;Y===Rt&&(Y=null),Rt=Rt.return}Y===Rt&&(Y=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}if(rn&&!Xn&&N.mode&1){vt=N;for(var Ge=N.child;Ge!==null;){for(N=vt=Ge;vt!==null;){R=vt;var Ue=R.child;switch(R.tag){case 0:case 11:case 14:case 15:gh(4,R,R.return);break;case 1:a1(R,R.return);var Ye=R.stateNode;if(typeof Ye.componentWillUnmount=="function"){var yt=R.return;try{Ye.props=R.memoizedProps,Ye.state=R.memoizedState,Ye.componentWillUnmount()}catch(It){Fa(R,yt,It)}}break;case 5:a1(R,R.return);break;case 22:if(R.memoizedState!==null){HR(N);continue}}Ue!==null?(Ue.return=R,vt=Ue):HR(N)}Ge=Ge.sibling}}}switch(Be&4102){case 2:BR(_),_.flags&=-3;break;case 6:BR(_),_.flags&=-3,z2(_.alternate,_);break;case 4096:_.flags&=-4097;break;case 4100:_.flags&=-4097,z2(_.alternate,_);break;case 4:z2(_.alternate,_)}}catch(It){Fa(_,_.return,It)}if(N=_.sibling,N!==null){N.return=_.return,vt=N;break}vt=_.return}}}function Yee(E,_,N){vt=E,UR(E)}function UR(E,_,N){for(var R=(E.mode&1)!==0;vt!==null;){var W=vt,Y=W.child;if(W.tag===22&&R){var Se=W.memoizedState!==null||i1;if(!Se){var Be=W.alternate,Ke=Be!==null&&Be.memoizedState!==null||mh;Be=i1;var ht=mh;if(i1=Se,(mh=Ke)&&!ht)for(vt=W;vt!==null;)Se=vt,Ke=Se.child,Se.tag===22&&Se.memoizedState!==null?VR(W):Ke!==null?(Ke.return=Se,vt=Ke):VR(W);for(;Y!==null;)vt=Y,UR(Y),Y=Y.sibling;vt=W,i1=Be,mh=ht}jR(E)}else W.subtreeFlags&8772&&Y!==null?(Y.return=W,vt=Y):jR(E)}}function jR(E){for(;vt!==null;){var _=vt;if(_.flags&8772){var N=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:mh||ng(5,_);break;case 1:var R=_.stateNode;if(_.flags&4&&!mh)if(N===null)R.componentDidMount();else{var W=_.elementType===_.type?N.memoizedProps:ls(_.type,N.memoizedProps);R.componentDidUpdate(W,N.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var Y=_.updateQueue;Y!==null&&RP(_,Y,R);break;case 3:var Se=_.updateQueue;if(Se!==null){if(N=null,_.child!==null)switch(_.child.tag){case 5:N=F(_.child.stateNode);break;case 1:N=_.child.stateNode}RP(_,Se,N)}break;case 5:var Be=_.stateNode;N===null&&_.flags&4&&ke(Be,_.type,_.memoizedProps,_);break;case 6:break;case 4:break;case 12:break;case 13:if(ne&&_.memoizedState===null){var Ke=_.alternate;if(Ke!==null){var ht=Ke.memoizedState;if(ht!==null){var _t=ht.dehydrated;_t!==null&&Ie(_t)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}mh||_.flags&512&&L2(_)}catch(rn){Fa(_,_.return,rn)}}if(_===E){vt=null;break}if(N=_.sibling,N!==null){N.return=_.return,vt=N;break}vt=_.return}}function HR(E){for(;vt!==null;){var _=vt;if(_===E){vt=null;break}var N=_.sibling;if(N!==null){N.return=_.return,vt=N;break}vt=_.return}}function VR(E){for(;vt!==null;){var _=vt;try{switch(_.tag){case 0:case 11:case 15:var N=_.return;try{ng(4,_)}catch(Ke){Fa(_,N,Ke)}break;case 1:var R=_.stateNode;if(typeof R.componentDidMount=="function"){var W=_.return;try{R.componentDidMount()}catch(Ke){Fa(_,W,Ke)}}var Y=_.return;try{L2(_)}catch(Ke){Fa(_,Y,Ke)}break;case 5:var Se=_.return;try{L2(_)}catch(Ke){Fa(_,Se,Ke)}}}catch(Ke){Fa(_,_.return,Ke)}if(_===E){vt=null;break}var Be=_.sibling;if(Be!==null){Be.return=_.return,vt=Be;break}vt=_.return}}var s1=0,l1=1,u1=2,c1=3,h1=4;if(typeof Symbol=="function"&&Symbol.for){var rg=Symbol.for;s1=rg("selector.component"),l1=rg("selector.has_pseudo_class"),u1=rg("selector.role"),c1=rg("selector.test_id"),h1=rg("selector.text")}function U2(E){var _=Pe(E);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(a(364));return _}if(E=q(E),E===null)throw Error(a(362));return E.stateNode.current}function j2(E,_){switch(_.$$typeof){case s1:if(E.type===_.value)return!0;break;case l1:e:{_=_.value,E=[E,0];for(var N=0;N<E.length;){var R=E[N++],W=E[N++],Y=_[W];if(R.tag!==5||!$(R)){for(;Y!=null&&j2(R,Y);)W++,Y=_[W];if(W===_.length){_=!0;break e}else for(R=R.child;R!==null;)E.push(R,W),R=R.sibling}}_=!1}return _;case u1:if(E.tag===5&&ee(E.stateNode,_.value))return!0;break;case h1:if((E.tag===5||E.tag===6)&&(E=Ae(E),E!==null&&0<=E.indexOf(_.value)))return!0;break;case c1:if(E.tag===5&&(E=E.memoizedProps["data-testname"],typeof E=="string"&&E.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function H2(E){switch(E.$$typeof){case s1:return"<"+(S(E.value)||"Unknown")+">";case l1:return":has("+(H2(E)||"")+")";case u1:return'[role="'+E.value+'"]';case h1:return'"'+E.value+'"';case c1:return'[data-testname="'+E.value+'"]';default:throw Error(a(365))}}function WR(E,_){var N=[];E=[E,0];for(var R=0;R<E.length;){var W=E[R++],Y=E[R++],Se=_[Y];if(W.tag!==5||!$(W)){for(;Se!=null&&j2(W,Se);)Y++,Se=_[Y];if(Y===_.length)N.push(W);else for(W=W.child;W!==null;)E.push(W,Y),W=W.sibling}}return N}function V2(E,_){if(!G)throw Error(a(363));E=U2(E),E=WR(E,_),_=[],E=Array.from(E);for(var N=0;N<E.length;){var R=E[N++];if(R.tag===5)$(R)||_.push(R.stateNode);else for(R=R.child;R!==null;)E.push(R),R=R.sibling}return _}var Zee=Math.ceil,d1=o.ReactCurrentDispatcher,W2=o.ReactCurrentOwner,Ir=o.ReactCurrentBatchConfig,mn=0,Wr=null,qr=null,wi=0,ro=0,tf=Rr(0),Kr=0,ig=null,nf=0,f1=0,q2=0,ag=null,Ia=null,G2=0,$2=1/0;function rf(){$2=hi()+500}var p1=!1,X2=null,Uu=null,m1=!1,ju=null,g1=0,og=0,Y2=null,v1=-1,y1=0;function ha(){return mn&6?hi():v1!==-1?v1:v1=hi()}function Hu(E){return E.mode&1?mn&2&&wi!==0?wi&-wi:Oee.transition!==null?(y1===0&&(E=Ny,Ny<<=1,!(Ny&4194240)&&(Ny=64),y1=E),y1):(E=Mn,E!==0?E:K()):1}function Ro(E,_,N){if(50<og)throw og=0,Y2=null,Error(a(185));var R=b1(E,_);return R===null?null:(Vm(R,_,N),(!(mn&2)||R!==Wr)&&(R===Wr&&(!(mn&2)&&(f1|=_),Kr===4&&Vu(R,wi)),La(R,N),_===1&&mn===0&&!(E.mode&1)&&(rf(),Iy&&Hs())),R)}function b1(E,_){E.lanes|=_;var N=E.alternate;for(N!==null&&(N.lanes|=_),N=E,E=E.return;E!==null;)E.childLanes|=_,N=E.alternate,N!==null&&(N.childLanes|=_),N=E,E=E.return;return N.tag===3?N.stateNode:null}function La(E,_){var N=E.callbackNode;Eee(E,_);var R=Py(E,E===Wr?wi:0);if(R===0)N!==null&&DP(N),E.callbackNode=null,E.callbackPriority=0;else if(_=R&-R,E.callbackPriority!==_){if(N!=null&&DP(N),_===1)E.tag===0?Nee(GR.bind(null,E)):kP(GR.bind(null,E)),_e?oe(function(){mn===0&&Hs()}):i2(a2,Hs),N=null;else{switch(MP(R)){case 1:N=a2;break;case 4:N=Tee;break;case 16:N=o2;break;case 536870912:N=Mee;break;default:N=o2}N=tI(N,qR.bind(null,E))}E.callbackPriority=_,E.callbackNode=N}}function qR(E,_){if(v1=-1,y1=0,mn&6)throw Error(a(327));var N=E.callbackNode;if(bh()&&E.callbackNode!==N)return null;var R=Py(E,E===Wr?wi:0);if(R===0)return null;if(R&30||R&E.expiredLanes||_)_=x1(E,R);else{_=R;var W=mn;mn|=2;var Y=YR();(Wr!==E||wi!==_)&&(rf(),vh(E,_));do try{Qee();break}catch(Be){XR(E,Be)}while(!0);u2(),d1.current=Y,mn=W,qr!==null?_=0:(Wr=null,wi=0,_=Kr)}if(_!==0){if(_===2&&(W=t2(E),W!==0&&(R=W,_=Z2(E,W))),_===1)throw N=ig,vh(E,0),Vu(E,R),La(E,hi()),N;if(_===6)Vu(E,R);else{if(W=E.current.alternate,!(R&30)&&!Jee(W)&&(_=x1(E,R),_===2&&(Y=t2(E),Y!==0&&(R=Y,_=Z2(E,Y))),_===1))throw N=ig,vh(E,0),Vu(E,R),La(E,hi()),N;switch(E.finishedWork=W,E.finishedLanes=R,_){case 0:case 1:throw Error(a(345));case 2:yh(E,Ia);break;case 3:if(Vu(E,R),(R&130023424)===R&&(_=G2+500-hi(),10<_)){if(Py(E,0)!==0)break;if(W=E.suspendedLanes,(W&R)!==R){ha(),E.pingedLanes|=E.suspendedLanes&W;break}E.timeoutHandle=se(yh.bind(null,E,Ia),_);break}yh(E,Ia);break;case 4:if(Vu(E,R),(R&4194240)===R)break;for(_=E.eventTimes,W=-1;0<R;){var Se=31-ua(R);Y=1<<Se,Se=_[Se],Se>W&&(W=Se),R&=~Y}if(R=W,R=hi()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*Zee(R/1960))-R,10<R){E.timeoutHandle=se(yh.bind(null,E,Ia),R);break}yh(E,Ia);break;case 5:yh(E,Ia);break;default:throw Error(a(329))}}}return La(E,hi()),E.callbackNode===N?qR.bind(null,E):null}function Z2(E,_){var N=ag;return E.current.memoizedState.isDehydrated&&(vh(E,_).flags|=256),E=x1(E,_),E!==2&&(_=Ia,Ia=N,_!==null&&J2(_)),E}function J2(E){Ia===null?Ia=E:Ia.push.apply(Ia,E)}function Jee(E){for(var _=E;;){if(_.flags&16384){var N=_.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var R=0;R<N.length;R++){var W=N[R],Y=W.getSnapshot;W=W.value;try{if(!js(Y(),W))return!1}catch{return!1}}}if(N=_.child,_.subtreeFlags&16384&&N!==null)N.return=_,_=N;else{if(_===E)break;for(;_.sibling===null;){if(_.return===null||_.return===E)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Vu(E,_){for(_&=~q2,_&=~f1,E.suspendedLanes|=_,E.pingedLanes&=~_,E=E.expirationTimes;0<_;){var N=31-ua(_),R=1<<N;E[N]=-1,_&=~R}}function GR(E){if(mn&6)throw Error(a(327));bh();var _=Py(E,0);if(!(_&1))return La(E,hi()),null;var N=x1(E,_);if(E.tag!==0&&N===2){var R=t2(E);R!==0&&(_=R,N=Z2(E,R))}if(N===1)throw N=ig,vh(E,0),Vu(E,_),La(E,hi()),N;if(N===6)throw Error(a(345));return E.finishedWork=E.current.alternate,E.finishedLanes=_,yh(E,Ia),La(E,hi()),null}function $R(E){ju!==null&&ju.tag===0&&!(mn&6)&&bh();var _=mn;mn|=1;var N=Ir.transition,R=Mn;try{if(Ir.transition=null,Mn=1,E)return E()}finally{Mn=R,Ir.transition=N,mn=_,!(mn&6)&&Hs()}}function K2(){ro=tf.current,yn(tf)}function vh(E,_){E.finishedWork=null,E.finishedLanes=0;var N=E.timeoutHandle;if(N!==De&&(E.timeoutHandle=De,ye(N)),qr!==null)for(N=qr.return;N!==null;){var R=N;switch(g2(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&Lu();break;case 3:Qd(),yn(ci),yn(Hr),E2();break;case 5:w2(R);break;case 4:Qd();break;case 13:yn(mr);break;case 19:yn(mr);break;case 10:c2(R.type._context);break;case 22:case 23:K2()}N=N.return}if(Wr=E,qr=E=Wu(E.current,null),wi=ro=_,Kr=0,ig=null,q2=f1=nf=0,Ia=ag=null,Vs!==null){for(_=0;_<Vs.length;_++)if(N=Vs[_],R=N.interleaved,R!==null){N.interleaved=null;var W=R.next,Y=N.pending;if(Y!==null){var Se=Y.next;Y.next=W,R.next=Se}N.pending=R}Vs=null}return E}function XR(E,_){do{var N=qr;try{if(u2(),Gy.current=Ky,$y){for(var R=Ar.memoizedState;R!==null;){var W=R.queue;W!==null&&(W.pending=null),R=R.next}$y=!1}if(ef=0,di=Bi=Ar=null,Ym=!1,Zm=0,W2.current=null,N===null||N.return===null){Kr=1,ig=_,qr=null;break}e:{var Y=E,Se=N.return,Be=N,Ke=_;if(_=wi,Be.flags|=32768,Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var ht=Ke,_t=Be,rn=_t.tag;if(!(_t.mode&1)&&(rn===0||rn===11||rn===15)){var Vt=_t.alternate;Vt?(_t.updateQueue=Vt.updateQueue,_t.memoizedState=Vt.memoizedState,_t.lanes=Vt.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var Xn=pR(Se);if(Xn!==null){Xn.flags&=-257,mR(Xn,Se,Be,Y,_),Xn.mode&1&&fR(Y,ht,_),_=Xn,Ke=ht;var Rt=_.updateQueue;if(Rt===null){var ji=new Set;ji.add(Ke),_.updateQueue=ji}else Rt.add(Ke);break e}else{if(!(_&1)){fR(Y,ht,_),Q2();break e}Ke=Error(a(426))}}else if(cr&&Be.mode&1){var Lo=pR(Se);if(Lo!==null){!(Lo.flags&65536)&&(Lo.flags|=256),mR(Lo,Se,Be,Y,_),b2(Ke);break e}}Y=Ke,Kr!==4&&(Kr=2),ag===null?ag=[Y]:ag.push(Y),Ke=k2(Ke,Be),Be=Se;do{switch(Be.tag){case 3:Be.flags|=65536,_&=-_,Be.lanes|=_;var Ge=hR(Be,Ke,_);PP(Be,Ge);break e;case 1:Y=Ke;var Ue=Be.type,Ye=Be.stateNode;if(!(Be.flags&128)&&(typeof Ue.getDerivedStateFromError=="function"||Ye!==null&&typeof Ye.componentDidCatch=="function"&&(Uu===null||!Uu.has(Ye)))){Be.flags|=65536,_&=-_,Be.lanes|=_;var yt=dR(Be,Y,_);PP(Be,yt);break e}}Be=Be.return}while(Be!==null)}JR(N)}catch(It){_=It,qr===N&&N!==null&&(qr=N=N.return);continue}break}while(!0)}function YR(){var E=d1.current;return d1.current=Ky,E===null?Ky:E}function Q2(){(Kr===0||Kr===3||Kr===2)&&(Kr=4),Wr===null||!(nf&268435455)&&!(f1&268435455)||Vu(Wr,wi)}function x1(E,_){var N=mn;mn|=2;var R=YR();Wr===E&&wi===_||vh(E,_);do try{Kee();break}catch(W){XR(E,W)}while(!0);if(u2(),mn=N,d1.current=R,qr!==null)throw Error(a(261));return Wr=null,wi=0,Kr}function Kee(){for(;qr!==null;)ZR(qr)}function Qee(){for(;qr!==null&&!Cee();)ZR(qr)}function ZR(E){var _=eI(E.alternate,E,ro);E.memoizedProps=E.pendingProps,_===null?JR(E):qr=_,W2.current=null}function JR(E){var _=E;do{var N=_.alternate;if(E=_.return,_.flags&32768){if(N=qee(N,_),N!==null){N.flags&=32767,qr=N;return}if(E!==null)E.flags|=32768,E.subtreeFlags=0,E.deletions=null;else{Kr=6,qr=null;return}}else if(N=Hee(N,_,ro),N!==null){qr=N;return}if(_=_.sibling,_!==null){qr=_;return}qr=_=E}while(_!==null);Kr===0&&(Kr=5)}function yh(E,_){var N=Mn,R=Ir.transition;try{Ir.transition=null,Mn=1,ete(E,_,N)}finally{Ir.transition=R,Mn=N}return null}function ete(E,_,N){do bh();while(ju!==null);if(mn&6)throw Error(a(327));var R=E.finishedWork,W=E.finishedLanes;if(R===null)return null;if(E.finishedWork=null,E.finishedLanes=0,R===E.current)throw Error(a(177));E.callbackNode=null,E.callbackPriority=0;var Y=R.lanes|R.childLanes;if(_ee(E,Y),E===Wr&&(qr=Wr=null,wi=0),!(R.subtreeFlags&2064)&&!(R.flags&2064)||m1||(m1=!0,tI(o2,function(){return bh(),null})),Y=(R.flags&15990)!==0,R.subtreeFlags&15990||Y){Y=Ir.transition,Ir.transition=null;var Se=Mn;Mn=1;var Be=mn;mn|=4,W2.current=null,$ee(E,R),Xee(E,R),B(E.containerInfo),E.current=R,Yee(R),Aee(),mn=Be,Mn=Se,Ir.transition=Y}else E.current=R;if(m1&&(m1=!1,ju=E,g1=W),Y=E.pendingLanes,Y===0&&(Uu=null),Dee(R.stateNode),La(E,hi()),_!==null)for(N=E.onRecoverableError,R=0;R<_.length;R++)N(_[R]);if(p1)throw p1=!1,E=X2,X2=null,E;return g1&1&&E.tag!==0&&bh(),Y=E.pendingLanes,Y&1?E===Y2?og++:(og=0,Y2=E):og=0,Hs(),null}function bh(){if(ju!==null){var E=MP(g1),_=Ir.transition,N=Mn;try{if(Ir.transition=null,Mn=16>E?16:E,ju===null)var R=!1;else{if(E=ju,ju=null,g1=0,mn&6)throw Error(a(331));var W=mn;for(mn|=4,vt=E.current;vt!==null;){var Y=vt,Se=Y.child;if(vt.flags&16){var Be=Y.deletions;if(Be!==null){for(var Ke=0;Ke<Be.length;Ke++){var ht=Be[Ke];for(vt=ht;vt!==null;){var _t=vt;switch(_t.tag){case 0:case 11:case 15:gh(8,_t,Y)}var rn=_t.child;if(rn!==null)rn.return=_t,vt=rn;else for(;vt!==null;){_t=vt;var Vt=_t.sibling,Xn=_t.return;if(IR(_t),_t===ht){vt=null;break}if(Vt!==null){Vt.return=Xn,vt=Vt;break}vt=Xn}}}var Rt=Y.alternate;if(Rt!==null){var ji=Rt.child;if(ji!==null){Rt.child=null;do{var Lo=ji.sibling;ji.sibling=null,ji=Lo}while(ji!==null)}}vt=Y}}if(Y.subtreeFlags&2064&&Se!==null)Se.return=Y,vt=Se;else e:for(;vt!==null;){if(Y=vt,Y.flags&2048)switch(Y.tag){case 0:case 11:case 15:gh(9,Y,Y.return)}var Ge=Y.sibling;if(Ge!==null){Ge.return=Y.return,vt=Ge;break e}vt=Y.return}}var Ue=E.current;for(vt=Ue;vt!==null;){Se=vt;var Ye=Se.child;if(Se.subtreeFlags&2064&&Ye!==null)Ye.return=Se,vt=Ye;else e:for(Se=Ue;vt!==null;){if(Be=vt,Be.flags&2048)try{switch(Be.tag){case 0:case 11:case 15:ng(9,Be)}}catch(It){Fa(Be,Be.return,It)}if(Be===Se){vt=null;break e}var yt=Be.sibling;if(yt!==null){yt.return=Be.return,vt=yt;break e}vt=Be.return}}if(mn=W,Hs(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(Ry,E)}catch{}R=!0}return R}finally{Mn=N,Ir.transition=_}}return!1}function KR(E,_,N){_=k2(N,_),_=hR(E,_,1),zu(E,_),_=ha(),E=b1(E,1),E!==null&&(Vm(E,1,_),La(E,_))}function Fa(E,_,N){if(E.tag===3)KR(E,E,N);else for(;_!==null;){if(_.tag===3){KR(_,E,N);break}else if(_.tag===1){var R=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Uu===null||!Uu.has(R))){E=k2(N,E),E=dR(_,E,1),zu(_,E),E=ha(),_=b1(_,1),_!==null&&(Vm(_,1,E),La(_,E));break}}_=_.return}}function tte(E,_,N){var R=E.pingCache;R!==null&&R.delete(_),_=ha(),E.pingedLanes|=E.suspendedLanes&N,Wr===E&&(wi&N)===N&&(Kr===4||Kr===3&&(wi&130023424)===wi&&500>hi()-G2?vh(E,0):q2|=N),La(E,_)}function QR(E,_){_===0&&(E.mode&1?(_=Oy,Oy<<=1,!(Oy&130023424)&&(Oy=4194304)):_=1);var N=ha();E=b1(E,_),E!==null&&(Vm(E,_,N),La(E,N))}function nte(E){var _=E.memoizedState,N=0;_!==null&&(N=_.retryLane),QR(E,N)}function rte(E,_){var N=0;switch(E.tag){case 13:var R=E.stateNode,W=E.memoizedState;W!==null&&(N=W.retryLane);break;case 19:R=E.stateNode;break;default:throw Error(a(314))}R!==null&&R.delete(_),QR(E,N)}var eI;eI=function(E,_,N){if(E!==null)if(E.memoizedProps!==_.pendingProps||ci.current)no=!0;else{if(!(E.lanes&N)&&!(_.flags&128))return no=!1,Wee(E,_,N);no=!!(E.flags&131072)}else no=!1,cr&&_.flags&1048576&&zP(_,Vy,_.index);switch(_.lanes=0,_.tag){case 2:var R=_.type;E!==null&&(E.alternate=null,_.alternate=null,_.flags|=2),E=_.pendingProps;var W=Ol(_,Hr.current);$d(_,N),W=C2(null,_,R,E,W,N);var Y=A2();return _.flags|=1,typeof W=="object"&&W!==null&&typeof W.render=="function"&&W.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Vr(R)?(Y=!0,Fu(_)):Y=!1,_.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,d2(_),W.updater=jy,_.stateNode=W,W._reactInternals=_,p2(_,R,E,N),_=P2(null,_,R,!0,Y,N)):(_.tag=0,cr&&Y&&m2(_),ca(null,_,W,N),_=_.child),_;case 16:R=_.elementType;e:{switch(E!==null&&(E.alternate=null,_.alternate=null,_.flags|=2),E=_.pendingProps,W=R._init,R=W(R._payload),_.type=R,W=_.tag=ate(R),E=ls(R,E),W){case 0:_=O2(null,_,R,E,N);break e;case 1:_=ER(null,_,R,E,N);break e;case 11:_=yR(null,_,R,E,N);break e;case 14:_=bR(null,_,R,ls(R.type,E),N);break e}throw Error(a(306,R,""))}return _;case 0:return R=_.type,W=_.pendingProps,W=_.elementType===R?W:ls(R,W),O2(E,_,R,W,N);case 1:return R=_.type,W=_.pendingProps,W=_.elementType===R?W:ls(R,W),ER(E,_,R,W,N);case 3:e:{if(_R(_),E===null)throw Error(a(387));R=_.pendingProps,Y=_.memoizedState,W=Y.element,OP(E,_),Uy(_,R,null,N);var Se=_.memoizedState;if(R=Se.element,ne&&Y.isDehydrated)if(Y={element:R,isDehydrated:!1,cache:Se.cache,transitions:Se.transitions},_.updateQueue.baseState=Y,_.memoizedState=Y,_.flags&256){W=Error(a(423)),_=CR(E,_,R,N,W);break e}else if(R!==W){W=Error(a(424)),_=CR(E,_,R,N,W);break e}else for(ne&&(to=Pr(_.stateNode.containerInfo),eo=_,cr=!0,us=null,Wm=!1),N=qP(_,null,R,N),_.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(Zd(),R===W){_=Bl(E,_,N);break e}ca(E,_,R,N)}_=_.child}return _;case 5:return GP(_),E===null&&y2(_),R=_.type,W=_.pendingProps,Y=E!==null?E.memoizedProps:null,Se=W.children,re(R,W)?Se=null:Y!==null&&re(R,Y)&&(_.flags|=32),SR(E,_),ca(E,_,Se,N),_.child;case 6:return E===null&&y2(_),null;case 13:return AR(E,_,N);case 4:return x2(_,_.stateNode.containerInfo),R=_.pendingProps,E===null?_.child=Jd(_,null,R,N):ca(E,_,R,N),_.child;case 11:return R=_.type,W=_.pendingProps,W=_.elementType===R?W:ls(R,W),yR(E,_,R,W,N);case 7:return ca(E,_,_.pendingProps,N),_.child;case 8:return ca(E,_,_.pendingProps.children,N),_.child;case 12:return ca(E,_,_.pendingProps.children,N),_.child;case 10:e:{if(R=_.type._context,W=_.pendingProps,Y=_.memoizedProps,Se=W.value,NP(_,R,Se),Y!==null)if(js(Y.value,Se)){if(Y.children===W.children&&!ci.current){_=Bl(E,_,N);break e}}else for(Y=_.child,Y!==null&&(Y.return=_);Y!==null;){var Be=Y.dependencies;if(Be!==null){Se=Y.child;for(var Ke=Be.firstContext;Ke!==null;){if(Ke.context===R){if(Y.tag===1){Ke=Rl(-1,N&-N),Ke.tag=2;var ht=Y.updateQueue;if(ht!==null){ht=ht.shared;var _t=ht.pending;_t===null?Ke.next=Ke:(Ke.next=_t.next,_t.next=Ke),ht.pending=Ke}}Y.lanes|=N,Ke=Y.alternate,Ke!==null&&(Ke.lanes|=N),h2(Y.return,N,_),Be.lanes|=N;break}Ke=Ke.next}}else if(Y.tag===10)Se=Y.type===_.type?null:Y.child;else if(Y.tag===18){if(Se=Y.return,Se===null)throw Error(a(341));Se.lanes|=N,Be=Se.alternate,Be!==null&&(Be.lanes|=N),h2(Se,N,_),Se=Y.sibling}else Se=Y.child;if(Se!==null)Se.return=Y;else for(Se=Y;Se!==null;){if(Se===_){Se=null;break}if(Y=Se.sibling,Y!==null){Y.return=Se.return,Se=Y;break}Se=Se.return}Y=Se}ca(E,_,W.children,N),_=_.child}return _;case 9:return W=_.type,R=_.pendingProps.children,$d(_,N),W=Do(W),R=R(W),_.flags|=1,ca(E,_,R,N),_.child;case 14:return R=_.type,W=ls(R,_.pendingProps),W=ls(R.type,W),bR(E,_,R,W,N);case 15:return xR(E,_,_.type,_.pendingProps,N);case 17:return R=_.type,W=_.pendingProps,W=_.elementType===R?W:ls(R,W),E!==null&&(E.alternate=null,_.alternate=null,_.flags|=2),_.tag=1,Vr(R)?(E=!0,Fu(_)):E=!1,$d(_,N),FP(_,R,W),p2(_,R,W,N),P2(null,_,R,!0,E,N);case 19:return kR(E,_,N);case 22:return wR(E,_,N)}throw Error(a(156,_.tag))};function tI(E,_){return i2(E,_)}function ite(E,_,N,R){this.tag=E,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Io(E,_,N,R){return new ite(E,_,N,R)}function eC(E){return E=E.prototype,!(!E||!E.isReactComponent)}function ate(E){if(typeof E=="function")return eC(E)?1:0;if(E!=null){if(E=E.$$typeof,E===p)return 11;if(E===g)return 14}return 2}function Wu(E,_){var N=E.alternate;return N===null?(N=Io(E.tag,_,E.key,E.mode),N.elementType=E.elementType,N.type=E.type,N.stateNode=E.stateNode,N.alternate=E,E.alternate=N):(N.pendingProps=_,N.type=E.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=E.flags&14680064,N.childLanes=E.childLanes,N.lanes=E.lanes,N.child=E.child,N.memoizedProps=E.memoizedProps,N.memoizedState=E.memoizedState,N.updateQueue=E.updateQueue,_=E.dependencies,N.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},N.sibling=E.sibling,N.index=E.index,N.ref=E.ref,N}function w1(E,_,N,R,W,Y){var Se=2;if(R=E,typeof E=="function")eC(E)&&(Se=1);else if(typeof E=="string")Se=5;else e:switch(E){case u:return xh(N.children,W,Y,_);case c:Se=8,W|=8;break;case h:return E=Io(12,N,_,W|2),E.elementType=h,E.lanes=Y,E;case v:return E=Io(13,N,_,W),E.elementType=v,E.lanes=Y,E;case y:return E=Io(19,N,_,W),E.elementType=y,E.lanes=Y,E;case b:return S1(N,W,Y,_);default:if(typeof E=="object"&&E!==null)switch(E.$$typeof){case d:Se=10;break e;case f:Se=9;break e;case p:Se=11;break e;case g:Se=14;break e;case w:Se=16,R=null;break e}throw Error(a(130,E==null?E:typeof E,""))}return _=Io(Se,N,_,W),_.elementType=E,_.type=R,_.lanes=Y,_}function xh(E,_,N,R){return E=Io(7,E,R,_),E.lanes=N,E}function S1(E,_,N,R){return E=Io(22,E,R,_),E.elementType=b,E.lanes=N,E.stateNode={},E}function tC(E,_,N){return E=Io(6,E,null,_),E.lanes=N,E}function nC(E,_,N){return _=Io(4,E.children!==null?E.children:[],E.key,_),_.lanes=N,_.stateNode={containerInfo:E.containerInfo,pendingChildren:null,implementation:E.implementation},_}function ote(E,_,N,R,W){this.tag=_,this.containerInfo=E,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=De,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=n2(0),this.expirationTimes=n2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=n2(0),this.identifierPrefix=R,this.onRecoverableError=W,ne&&(this.mutableSourceEagerHydrationData=null)}function nI(E,_,N,R,W,Y,Se,Be,Ke){return E=new ote(E,_,N,Be,Ke),_===1?(_=1,Y===!0&&(_|=8)):_=0,Y=Io(3,null,null,_),E.current=Y,Y.stateNode=E,Y.memoizedState={element:R,isDehydrated:N,cache:null,transitions:null},d2(Y),E}function rI(E){if(!E)return Zt;E=E._reactInternals;e:{if(T(E)!==E||E.tag!==1)throw Error(a(170));var _=E;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Vr(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(a(171))}if(E.tag===1){var N=E.type;if(Vr(N))return zs(E,N,_)}return _}function iI(E){var _=E._reactInternals;if(_===void 0)throw typeof E.render=="function"?Error(a(188)):(E=Object.keys(E).join(","),Error(a(268,E)));return E=D(_),E===null?null:E.stateNode}function aI(E,_){if(E=E.memoizedState,E!==null&&E.dehydrated!==null){var N=E.retryLane;E.retryLane=N!==0&&N<_?N:_}}function rC(E,_){aI(E,_),(E=E.alternate)&&aI(E,_)}function ste(E){return E=D(E),E===null?null:E.stateNode}function lte(){return null}return e.attemptContinuousHydration=function(E){if(E.tag===13){var _=ha();Ro(E,134217728,_),rC(E,134217728)}},e.attemptHydrationAtCurrentPriority=function(E){if(E.tag===13){var _=ha(),N=Hu(E);Ro(E,N,_),rC(E,N)}},e.attemptSynchronousHydration=function(E){switch(E.tag){case 3:var _=E.stateNode;if(_.current.memoizedState.isDehydrated){var N=Hm(_.pendingLanes);N!==0&&(r2(_,N|1),La(_,hi()),!(mn&6)&&(rf(),Hs()))}break;case 13:var R=ha();$R(function(){return Ro(E,1,R)}),rC(E,1)}},e.batchedUpdates=function(E,_){var N=mn;mn|=1;try{return E(_)}finally{mn=N,mn===0&&(rf(),Iy&&Hs())}},e.createComponentSelector=function(E){return{$$typeof:s1,value:E}},e.createContainer=function(E,_,N,R,W,Y,Se){return nI(E,_,!1,null,N,R,W,Y,Se)},e.createHasPseudoClassSelector=function(E){return{$$typeof:l1,value:E}},e.createHydrationContainer=function(E,_,N,R,W,Y,Se,Be,Ke){return E=nI(N,R,!0,E,W,Y,Se,Be,Ke),E.context=rI(null),N=E.current,R=ha(),W=Hu(N),Y=Rl(R,W),Y.callback=_??null,zu(N,Y),E.current.lanes=W,Vm(E,W,R),La(E,R),E},e.createPortal=function(E,_,N){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:R==null?null:""+R,children:E,containerInfo:_,implementation:N}},e.createRoleSelector=function(E){return{$$typeof:u1,value:E}},e.createTestNameSelector=function(E){return{$$typeof:c1,value:E}},e.createTextSelector=function(E){return{$$typeof:h1,value:E}},e.deferredUpdates=function(E){var _=Mn,N=Ir.transition;try{return Ir.transition=null,Mn=16,E()}finally{Mn=_,Ir.transition=N}},e.discreteUpdates=function(E,_,N,R,W){var Y=Mn,Se=Ir.transition;try{return Ir.transition=null,Mn=1,E(_,N,R,W)}finally{Mn=Y,Ir.transition=Se,mn===0&&rf()}},e.findAllNodes=V2,e.findBoundingRects=function(E,_){if(!G)throw Error(a(363));_=V2(E,_),E=[];for(var N=0;N<_.length;N++)E.push(ce(_[N]));for(_=E.length-1;0<_;_--){N=E[_];for(var R=N.x,W=R+N.width,Y=N.y,Se=Y+N.height,Be=_-1;0<=Be;Be--)if(_!==Be){var Ke=E[Be],ht=Ke.x,_t=ht+Ke.width,rn=Ke.y,Vt=rn+Ke.height;if(R>=ht&&Y>=rn&&W<=_t&&Se<=Vt){E.splice(_,1);break}else if(R!==ht||N.width!==Ke.width||Vt<Y||rn>Se){if(!(Y!==rn||N.height!==Ke.height||_t<R||ht>W)){ht>R&&(Ke.width+=ht-R,Ke.x=R),_t<W&&(Ke.width=W-ht),E.splice(_,1);break}}else{rn>Y&&(Ke.height+=rn-Y,Ke.y=Y),Vt<Se&&(Ke.height=Se-rn),E.splice(_,1);break}}}return E},e.findHostInstance=iI,e.findHostInstanceWithNoPortals=function(E){return E=A(E),E=E!==null?U(E):null,E===null?null:E.stateNode},e.findHostInstanceWithWarning=function(E){return iI(E)},e.flushControlled=function(E){var _=mn;mn|=1;var N=Ir.transition,R=Mn;try{Ir.transition=null,Mn=1,E()}finally{Mn=R,Ir.transition=N,mn=_,mn===0&&(rf(),Hs())}},e.flushPassiveEffects=bh,e.flushSync=$R,e.focusWithin=function(E,_){if(!G)throw Error(a(363));for(E=U2(E),_=WR(E,_),_=Array.from(_),E=0;E<_.length;){var N=_[E++];if(!$(N)){if(N.tag===5&&ge(N.stateNode))return!0;for(N=N.child;N!==null;)_.push(N),N=N.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Mn},e.getFindAllNodesFailureDescription=function(E,_){if(!G)throw Error(a(363));var N=0,R=[];E=[U2(E),0];for(var W=0;W<E.length;){var Y=E[W++],Se=E[W++],Be=_[Se];if((Y.tag!==5||!$(Y))&&(j2(Y,Be)&&(R.push(H2(Be)),Se++,Se>N&&(N=Se)),Se<_.length))for(Y=Y.child;Y!==null;)E.push(Y,Se),Y=Y.sibling}if(N<_.length){for(E=[];N<_.length;N++)E.push(H2(_[N]));return`findAllNodes was able to match part of the selector:
  `+(R.join(" > ")+`

No matching component was found for:
  `)+E.join(" > ")}return null},e.getPublicRootInstance=function(E){if(E=E.current,!E.child)return null;switch(E.child.tag){case 5:return F(E.child.stateNode);default:return E.child.stateNode}},e.injectIntoDevTools=function(E){if(E={bundleType:E.bundleType,version:E.version,rendererPackageName:E.rendererPackageName,rendererConfig:E.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:ste,findFiberByHostInstance:E.findFiberByHostInstance||lte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")E=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)E=!0;else{try{Ry=_.inject(E),Us=_}catch{}E=!!_.checkDCE}}return E},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(E,_,N,R){if(!G)throw Error(a(363));E=V2(E,_);var W=xe(E,N,R).disconnect;return{disconnect:function(){W()}}},e.registerMutableSourceForHydration=function(E,_){var N=_._getVersion;N=N(_._source),E.mutableSourceEagerHydrationData==null?E.mutableSourceEagerHydrationData=[_,N]:E.mutableSourceEagerHydrationData.push(_,N)},e.runWithPriority=function(E,_){var N=Mn;try{return Mn=E,_()}finally{Mn=N}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(E,_,N,R){var W=_.current,Y=ha(),Se=Hu(W);return N=rI(N),_.context===null?_.context=N:_.pendingContext=N,_=Rl(Y,Se),_.payload={element:E},R=R===void 0?null:R,R!==null&&(_.callback=R),zu(W,_),E=Ro(W,Se,Y),E!==null&&zy(E,W,Se),Se},e};qZ.exports=MUe;var DUe=qZ.exports;const kUe=is(DUe),YO={},NUe=n=>void Object.assign(YO,n);function OUe(n,e){function t(u,{args:c=[],attach:h,...d},f){let p=`${u[0].toUpperCase()}${u.slice(1)}`,v;if(u==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=d.object;v=Vf(y,{type:u,root:f,attach:h,primitive:!0})}else{const y=YO[p];if(!y)throw new Error(`R3F: ${p} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(c))throw new Error("R3F: The args prop must be an array!");v=Vf(new y(...c),{type:u,root:f,attach:h,memoizedProps:{args:c}})}return v.__r3f.attach===void 0&&(v instanceof sn?v.__r3f.attach="geometry":v instanceof Li&&(v.__r3f.attach="material")),p!=="inject"&&XA(v,d),v}function r(u,c){let h=!1;if(c){var d,f;(d=c.__r3f)!=null&&d.attach?$A(u,c,c.__r3f.attach):c.isObject3D&&u.isObject3D&&(u.add(c),h=!0),h||(f=u.__r3f)==null||f.objects.push(c),c.__r3f||Vf(c,{}),c.__r3f.parent=u,c3(c),Wf(c)}}function i(u,c,h){let d=!1;if(c){var f,p;if((f=c.__r3f)!=null&&f.attach)$A(u,c,c.__r3f.attach);else if(c.isObject3D&&u.isObject3D){c.parent=u,c.dispatchEvent({type:"added"});const v=u.children.filter(g=>g!==c),y=v.indexOf(h);u.children=[...v.slice(0,y),c,...v.slice(y)],d=!0}d||(p=u.__r3f)==null||p.objects.push(c),c.__r3f||Vf(c,{}),c.__r3f.parent=u,c3(c),Wf(c)}}function a(u,c,h=!1){u&&[...u].forEach(d=>o(c,d,h))}function o(u,c,h){if(c){var d,f,p;if(c.__r3f&&(c.__r3f.parent=null),(d=u.__r3f)!=null&&d.objects&&(u.__r3f.objects=u.__r3f.objects.filter(b=>b!==c)),(f=c.__r3f)!=null&&f.attach)D8(u,c,c.__r3f.attach);else if(c.isObject3D&&u.isObject3D){var v;u.remove(c),(v=c.__r3f)!=null&&v.root&&zUe(uw(c),c)}const g=(p=c.__r3f)==null?void 0:p.primitive,w=!g&&(h===void 0?c.dispose!==null:h);if(!g){var y;a((y=c.__r3f)==null?void 0:y.objects,c,w),a(c.children,c,w)}if(delete c.__r3f,w&&c.dispose&&c.type!=="Scene"){const b=()=>{try{c.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?l3.unstable_scheduleCallback(l3.unstable_IdlePriority,b):b()}Wf(u)}}function s(u,c,h,d){var f;const p=(f=u.__r3f)==null?void 0:f.parent;if(!p)return;const v=t(c,h,u.__r3f.root);if(u.children){for(const y of u.children)y.__r3f&&r(v,y);u.children=u.children.filter(y=>!y.__r3f)}u.__r3f.objects.forEach(y=>r(v,y)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(p,u),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),r(p,v),v.raycast&&v.__r3f.eventCount&&uw(v).getState().internal.interaction.push(v),[d,d.alternate].forEach(y=>{y!==null&&(y.stateNode=v,y.ref&&(typeof y.ref=="function"?y.ref(v):y.ref.current=v))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:kUe({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,c)=>{if(!c)return;const h=u.getState().scene;h.__r3f&&(h.__r3f.root=u,r(h,c))},removeChildFromContainer:(u,c)=>{c&&o(u.getState().scene,c)},insertInContainerBefore:(u,c,h)=>{if(!c||!h)return;const d=u.getState().scene;d.__r3f&&i(d,c,h)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var c;return!!((c=u==null?void 0:u.__r3f)!=null?c:{}).handlers},prepareUpdate(u,c,h,d){var f;if(((f=u==null?void 0:u.__r3f)!=null?f:{}).primitive&&d.object&&d.object!==u)return[!0];{const{args:p=[],children:v,...y}=d,{args:g=[],children:w,...b}=h;if(!Array.isArray(p))throw new Error("R3F: the args prop must be an array!");if(p.some((x,S)=>x!==g[S]))return[!0];const m=eJ(u,y,b,!0);return m.changes.length?[!1,m]:null}},commitUpdate(u,[c,h],d,f,p,v){c?s(u,d,p,v):XA(u,h)},commitMount(u,c,h,d){var f;const p=(f=u.__r3f)!=null?f:{};u.raycast&&p.handlers&&p.eventCount&&uw(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Vf(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var c;const{attach:h,parent:d}=(c=u.__r3f)!=null?c:{};h&&d&&D8(d,u,h),u.isObject3D&&(u.visible=!1),Wf(u)},unhideInstance(u,c){var h;const{attach:d,parent:f}=(h=u.__r3f)!=null?h:{};d&&f&&$A(f,u,d),(u.isObject3D&&c.visible==null||c.visible)&&(u.visible=!0),Wf(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():fp.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&hr.fun(performance.now)?performance.now:hr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:hr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:hr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:XA}}var C8,A8;const GA=n=>"colorSpace"in n||"outputColorSpace"in n,XZ=()=>{var n;return(n=YO.ColorManagement)!=null?n:null},YZ=n=>n&&n.isOrthographicCamera,PUe=n=>n&&n.hasOwnProperty("current"),wy=typeof window<"u"&&((C8=window.document)!=null&&C8.createElement||((A8=window.navigator)==null?void 0:A8.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function ZZ(n){const e=j.useRef(n);return wy(()=>void(e.current=n),[n]),e}function RUe({set:n}){return wy(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class JZ extends j.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}JZ.getDerivedStateFromError=()=>({error:!0});const KZ="__default",T8=new Map,IUe=n=>n&&!!n.memoized&&!!n.changes;function QZ(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Pg=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function uw(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const hr={obj:n=>n===Object(n)&&!hr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(hr.str(n)||hr.num(n))return n===e;const a=hr.obj(n);if(a&&r==="reference")return n===e;const o=hr.arr(n);if(o&&t==="reference")return n===e;if((o||a)&&n===e)return!0;let s;for(s in n)if(!(s in e))return!1;if(a&&t==="shallow"&&r==="shallow"){for(s in i?e:n)if(!hr.equ(n[s],e[s],{strict:i,objects:"reference"}))return!1}else for(s in i?e:n)if(n[s]!==e[s])return!1;if(hr.und(s)){if(o&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function LUe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Vf(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function u3(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((a,o)=>a[o],n),{target:t,key:i}}else return{target:t,key:e}}const M8=/-\d+$/;function $A(n,e,t){if(hr.str(t)){if(M8.test(t)){const a=t.replace(M8,""),{target:o,key:s}=u3(n,a);Array.isArray(o[s])||(o[s]=[])}const{target:r,key:i}=u3(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function D8(n,e,t){var r,i;if(hr.str(t)){const{target:a,key:o}=u3(n,t),s=e.__r3f.previousAttach;s===void 0?delete a[o]:a[o]=s}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function eJ(n,{children:e,key:t,ref:r,...i},{children:a,key:o,ref:s,...l}={},u=!1){var c;const h=(c=n==null?void 0:n.__r3f)!=null?c:{},d=Object.entries(i),f=[];if(u){const v=Object.keys(l);for(let y=0;y<v.length;y++)i.hasOwnProperty(v[y])||d.unshift([v[y],KZ+"remove"])}d.forEach(([v,y])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&v==="object"||hr.equ(y,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return f.push([v,y,!0,[]]);let w=[];v.includes("-")&&(w=v.split("-")),f.push([v,y,!1,w]);for(const b in i){const m=i[b];b.startsWith(`${v}-`)&&f.push([b,m,!1,b.split("-")])}});const p={...i};return h.memoizedProps&&h.memoizedProps.args&&(p.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(p.attach=h.memoizedProps.attach),{memoized:p,changes:f}}const FUe=typeof process<"u"&&!1;function XA(n,e){var t,r,i;const a=(t=n.__r3f)!=null?t:{},o=a.root,s=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:u}=IUe(e)?e:eJ(n,e),c=a.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let h=0;h<u.length;h++){let[d,f,p,v]=u[h];if(GA(n)){const w="srgb",b="srgb-linear";d==="encoding"?(d="colorSpace",f=f===3001?w:b):d==="outputEncoding"&&(d="outputColorSpace",f=f===3001?w:b)}let y=n,g=y[d];if(v.length&&(g=v.reduce((w,b)=>w[b],n),!(g&&g.set))){const[w,...b]=v.reverse();y=b.reverse().reduce((m,x)=>m[x],n),d=w}if(f===KZ+"remove")if(y.constructor){let w=T8.get(y.constructor);w||(w=new y.constructor,T8.set(y.constructor,w)),f=w[d]}else f=0;if(p)f?a.handlers[d]=f:delete a.handlers[d],a.eventCount=Object.keys(a.handlers).length;else if(g&&g.set&&(g.copy||g instanceof cd)){if(Array.isArray(f))g.fromArray?g.fromArray(f):g.set(...f);else if(g.copy&&f&&f.constructor&&(FUe?g.constructor.name===f.constructor.name:g.constructor===f.constructor))g.copy(f);else if(f!==void 0){const w=g instanceof wt;!w&&g.setScalar?g.setScalar(f):g instanceof cd&&f instanceof cd?g.mask=f.mask:g.set(f),!XZ()&&!s.linear&&w&&g.convertSRGBToLinear()}}else if(y[d]=f,y[d]instanceof Sr&&y[d].format===ya&&y[d].type===gl){const w=y[d];GA(w)&&GA(s.gl)?w.colorSpace=s.gl.outputColorSpace:w.encoding=s.gl.outputEncoding}Wf(n)}if(a.parent&&n.raycast&&c!==a.eventCount){const h=uw(n).getState().internal,d=h.interaction.indexOf(n);d>-1&&h.interaction.splice(d,1),a.eventCount&&h.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=n.__r3f)!=null&&i.parent&&c3(n),n}function Wf(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function c3(n){n.onUpdate==null||n.onUpdate(n)}function tJ(n,e){n.manual||(YZ(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function lx(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function BUe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return fp.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return fp.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return fp.ContinuousEventPriority;default:return fp.DefaultEventPriority}}function nJ(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function zUe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{nJ(t.capturedMap,e,r,i)})}function UUe(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),h=new Set,d=[],f=u?u(c.internal.interaction):c.internal.interaction;for(let g=0;g<f.length;g++){const w=Pg(f[g]);w&&(w.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function p(g){const w=Pg(g);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var b;w.events.compute==null||w.events.compute(l,w,(b=w.previousRoot)==null?void 0:b.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(g,!0):[]}let v=f.flatMap(p).sort((g,w)=>{const b=Pg(g.object),m=Pg(w.object);return!b||!m?g.distance-w.distance:m.events.priority-b.events.priority||g.distance-w.distance}).filter(g=>{const w=lx(g);return h.has(w)?!1:(h.add(w),!0)});c.events.filter&&(v=c.events.filter(v,c));for(const g of v){let w=g.object;for(;w;){var y;(y=w.__r3f)!=null&&y.eventCount&&d.push({...g,eventObject:w}),w=w.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let g of c.internal.capturedMap.get(l.pointerId).values())h.has(lx(g.intersection))||d.push(g.intersection);return d}function i(l,u,c,h){const d=n.getState();if(l.length){const f={stopped:!1};for(const p of l){const v=Pg(p.object)||d,{raycaster:y,pointer:g,camera:w,internal:b}=v,m=new me(g.x,g.y,0).unproject(w),x=A=>{var D,O;return(D=(O=b.capturedMap.get(A))==null?void 0:O.has(p.eventObject))!=null?D:!1},S=A=>{const D={intersection:p,target:u.target};b.capturedMap.has(A)?b.capturedMap.get(A).set(p.eventObject,D):b.capturedMap.set(A,new Map([[p.eventObject,D]])),u.target.setPointerCapture(A)},C=A=>{const D=b.capturedMap.get(A);D&&nJ(b.capturedMap,p.eventObject,D,A)};let T={};for(let A in u){let D=u[A];typeof D!="function"&&(T[A]=D)}let M={...p,...T,pointer:g,intersections:l,stopped:f.stopped,delta:c,unprojectedPoint:m,ray:y.ray,camera:w,stopPropagation(){const A="pointerId"in u&&b.capturedMap.get(u.pointerId);if((!A||A.has(p.eventObject))&&(M.stopped=f.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(D=>D.eventObject===p.eventObject))){const D=l.slice(0,l.indexOf(p));a([...D,p])}},target:{hasPointerCapture:x,setPointerCapture:S,releasePointerCapture:C},currentTarget:{hasPointerCapture:x,setPointerCapture:S,releasePointerCapture:C},nativeEvent:u};if(h(M),f.stopped===!0)break}}return l}function a(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(h=>h.object===c.object&&h.index===c.index&&h.instanceId===c.instanceId)){const h=c.eventObject.__r3f,d=h==null?void 0:h.handlers;if(u.hovered.delete(lx(c)),h!=null&&h.eventCount){const f={...c,intersections:l};d.onPointerOut==null||d.onPointerOut(f),d.onPointerLeave==null||d.onPointerLeave(f)}}}function o(l,u){for(let c=0;c<u.length;c++){const h=u[c].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function s(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),a([]))})}}return function(u){const{onPointerMissed:c,internal:h}=n.getState();h.lastEvent.current=u;const d=l==="onPointerMove",f=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",p=r(u,d?t:void 0),v=f?e(u):0;l==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=p.map(g=>g.eventObject)),f&&!p.length&&v<=2&&(o(u,h.interaction),c&&c(u)),d&&a(p);function y(g){const w=g.eventObject,b=w.__r3f,m=b==null?void 0:b.handlers;if(b!=null&&b.eventCount)if(d){if(m.onPointerOver||m.onPointerEnter||m.onPointerOut||m.onPointerLeave){const x=lx(g),S=h.hovered.get(x);S?S.stopped&&g.stopPropagation():(h.hovered.set(x,g),m.onPointerOver==null||m.onPointerOver(g),m.onPointerEnter==null||m.onPointerEnter(g))}m.onPointerMove==null||m.onPointerMove(g)}else{const x=m[l];x?(!f||h.initialHits.includes(w))&&(o(u,h.interaction.filter(S=>!h.initialHits.includes(S))),x(g)):f&&h.initialHits.includes(w)&&o(u,h.interaction.filter(S=>!h.initialHits.includes(S)))}}i(p,u,v,y)}}return{handlePointer:s}}const jUe=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],rJ=n=>!!(n!=null&&n.render),ZO=j.createContext(null),HUe=(n,e)=>{const t=$N((s,l)=>{const u=new me,c=new me,h=new me;function d(y=l().camera,g=c,w=l().size){const{width:b,height:m,top:x,left:S}=w,C=b/m;g instanceof me?h.copy(g):h.set(...g);const T=y.getWorldPosition(u).distanceTo(h);if(YZ(y))return{width:b/y.zoom,height:m/y.zoom,top:x,left:S,factor:1,distance:T,aspect:C};{const M=y.fov*Math.PI/180,A=2*Math.tan(M/2)*T,D=A*(b/m);return{width:D,height:A,top:x,left:S,factor:b/D,distance:T,aspect:C}}}let f;const p=y=>s(g=>({performance:{...g.performance,current:y}})),v=new Qe;return{set:s,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>n(l(),y),advance:(y,g)=>e(y,g,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new WO,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();f&&clearTimeout(f),y.performance.current!==y.performance.min&&p(y.performance.min),f=setTimeout(()=>p(l().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:y=>s(g=>({...g,events:{...g.events,...y}})),setSize:(y,g,w,b,m)=>{const x=l().camera,S={width:y,height:g,top:b||0,left:m||0,updateStyle:w};s(C=>({size:S,viewport:{...C.viewport,...d(x,c,S)}}))},setDpr:y=>s(g=>{const w=QZ(y);return{viewport:{...g.viewport,dpr:w,initialDpr:g.viewport.initialDpr||w}}}),setFrameloop:(y="always")=>{const g=l().clock;g.stop(),g.elapsedTime=0,y!=="never"&&(g.start(),g.elapsedTime=0),s(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:j.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,g,w)=>{const b=l().internal;return b.priority=b.priority+(g>0?1:0),b.subscribers.push({ref:y,priority:g,store:w}),b.subscribers=b.subscribers.sort((m,x)=>m.priority-x.priority),()=>{const m=l().internal;m!=null&&m.subscribers&&(m.priority=m.priority-(g>0?1:0),m.subscribers=m.subscribers.filter(x=>x.ref!==y))}}}}}),r=t.getState();let i=r.size,a=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:s,size:l,viewport:u,gl:c,set:h}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==a){var d;i=l,a=u.dpr,tJ(s,l),c.setPixelRatio(u.dpr);const f=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,f)}s!==o&&(o=s,h(f=>({viewport:{...f.viewport,...f.viewport.getCurrentViewport(s)}})))}),t.subscribe(s=>n(s)),t};let ux,VUe=new Set,WUe=new Set,qUe=new Set;function YA(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Rg(n,e){switch(n){case"before":return YA(VUe,e);case"after":return YA(WUe,e);case"tail":return YA(qUe,e)}}let ZA,JA;function KA(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),ZA=e.internal.subscribers,ux=0;ux<ZA.length;ux++)JA=ZA[ux],JA.ref.current(JA.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function GUe(n){let e=!1,t,r,i;function a(l){r=requestAnimationFrame(a),e=!0,t=0,Rg("before",l);for(const c of n.values()){var u;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(t+=KA(l,i))}if(Rg("after",l),t===0)return Rg("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,u=1){var c;if(!l)return n.forEach(h=>o(h.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(a)))}function s(l,u=!0,c,h){if(u&&Rg("before",l),c)KA(l,c,h);else for(const d of n.values())KA(l,d.store.getState());u&&Rg("after",l)}return{loop:a,invalidate:o,advance:s}}function JO(){const n=j.useContext(ZO);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Dr(n=t=>t,e){return JO()(n,e)}function U_(n,e=0){const t=JO(),r=t.getState().internal.subscribe,i=ZZ(n);return wy(()=>r(i,e,t),[e,r,t]),null}const nm=new Map,{invalidate:k8,advance:N8}=GUe(nm),{reconciler:Mv,applyProps:If}=OUe(nm,BUe),Lf={objects:"shallow",strict:!1},$Ue=(n,e)=>{const t=typeof n=="function"?n(e):n;return rJ(t)?t:new CO({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function XUe(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:a,left:o,updateStyle:s=t}=e;return{width:r,height:i,top:a,left:o,updateStyle:s}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:a,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:a,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function YUe(n){const e=nm.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=r||HUe(k8,N8),o=t||Mv.createContainer(a,fp.ConcurrentRoot,null,!1,null,"",i,null);e||nm.set(n,{fiber:o,store:a});let s,l=!1,u;return{configure(c={}){let{gl:h,size:d,scene:f,events:p,onCreated:v,shadows:y=!1,linear:g=!1,flat:w=!1,legacy:b=!1,orthographic:m=!1,frameloop:x="always",dpr:S=[1,2],performance:C,raycaster:T,camera:M,onPointerMissed:A}=c,D=a.getState(),O=D.gl;D.gl||D.set({gl:O=$Ue(h,n)});let U=D.raycaster;U||D.set({raycaster:U=new XO});const{params:L,...F}=T||{};if(hr.equ(F,U,Lf)||If(U,{...F}),hr.equ(L,U.params,Lf)||If(U,{params:{...U.params,...L}}),!D.camera||D.camera===u&&!hr.equ(u,M,Lf)){u=M;const X=M instanceof py,J=X?M:m?new au(0,0,0,0,.1,1e3):new Nr(75,0,.1,1e3);X||(J.position.z=5,M&&If(J,M),!D.camera&&!(M!=null&&M.rotation)&&J.lookAt(0,0,0)),D.set({camera:J}),U.camera=J}if(!D.scene){let X;f instanceof bv?X=f:(X=new bv,f&&If(X,f)),D.set({scene:Vf(X)})}if(!D.xr){var k;const X=(Z,re)=>{const fe=a.getState();fe.frameloop!=="never"&&N8(Z,!0,fe,re)},J=()=>{const Z=a.getState();Z.gl.xr.enabled=Z.gl.xr.isPresenting,Z.gl.xr.setAnimationLoop(Z.gl.xr.isPresenting?X:null),Z.gl.xr.isPresenting||k8(Z)},Q={connect(){const Z=a.getState().gl;Z.xr.addEventListener("sessionstart",J),Z.xr.addEventListener("sessionend",J)},disconnect(){const Z=a.getState().gl;Z.xr.removeEventListener("sessionstart",J),Z.xr.removeEventListener("sessionend",J)}};typeof((k=O.xr)==null?void 0:k.addEventListener)=="function"&&Q.connect(),D.set({xr:Q})}if(O.shadowMap){const X=O.shadowMap.enabled,J=O.shadowMap.type;if(O.shadowMap.enabled=!!y,hr.boo(y))O.shadowMap.type=g0;else if(hr.str(y)){var P;const Q={basic:LX,percentage:d_,soft:g0,variance:ms};O.shadowMap.type=(P=Q[y])!=null?P:g0}else hr.obj(y)&&Object.assign(O.shadowMap,y);(X!==O.shadowMap.enabled||J!==O.shadowMap.type)&&(O.shadowMap.needsUpdate=!0)}const z=XZ();z&&("enabled"in z?z.enabled=!b:"legacyMode"in z&&(z.legacyMode=b)),If(O,{outputEncoding:g?3e3:3001,toneMapping:w?ml:oO}),D.legacy!==b&&D.set(()=>({legacy:b})),D.linear!==g&&D.set(()=>({linear:g})),D.flat!==w&&D.set(()=>({flat:w})),h&&!hr.fun(h)&&!rJ(h)&&!hr.equ(h,O,Lf)&&If(O,h),p&&!D.events.handlers&&D.set({events:p(a)});const B=XUe(n,d);return hr.equ(B,D.size,Lf)||D.setSize(B.width,B.height,B.updateStyle,B.top,B.left),S&&D.viewport.dpr!==QZ(S)&&D.setDpr(S),D.frameloop!==x&&D.setFrameloop(x),D.onPointerMissed||D.set({onPointerMissed:A}),C&&!hr.equ(C,D.performance,Lf)&&D.set(X=>({performance:{...X.performance,...C}})),s=v,l=!0,this},render(c){return l||this.configure(),Mv.updateContainer(j.createElement(ZUe,{store:a,children:c,onCreated:s,rootElement:n}),o,null,()=>{}),a},unmount(){iJ(n)}}}function ZUe({store:n,children:e,onCreated:t,rootElement:r}){return wy(()=>{const i=n.getState();i.set(a=>({internal:{...a.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),j.createElement(ZO.Provider,{value:n},e)}function iJ(n,e){const t=nm.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Mv.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var a,o,s,l;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(o=a.renderLists)==null||o.dispose==null||o.dispose(),(s=i.gl)==null||s.forceContextLoss==null||s.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),LUe(i),nm.delete(n)}catch{}},500)})}}function JUe(n,e,t){return j.createElement(KUe,{key:e.uuid,children:n,container:e,state:t})}function KUe({state:n={},children:e,container:t}){const{events:r,size:i,...a}=n,o=JO(),[s]=j.useState(()=>new XO),[l]=j.useState(()=>new Qe),u=j.useCallback((h,d)=>{const f={...h};Object.keys(h).forEach(v=>{(jUe.includes(v)||h[v]!==d[v]&&d[v])&&delete f[v]});let p;if(d&&i){const v=d.camera;p=h.viewport.getCurrentViewport(v,new me,i),v!==h.camera&&tJ(v,i)}return{...f,scene:t,raycaster:s,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...d==null?void 0:d.events,...r},size:{...h.size,...i},viewport:{...h.viewport,...p},...a}},[n]),[c]=j.useState(()=>{const h=o.getState();return $N((d,f)=>({...h,scene:t,raycaster:s,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...r},size:{...h.size,...i},...a,set:d,get:f,setEvents:p=>d(v=>({...v,events:{...v.events,...p}}))}))});return j.useEffect(()=>{const h=o.subscribe(d=>c.setState(f=>u(d,f)));return()=>{h(),c.destroy()}},[]),j.useEffect(()=>{c.setState(h=>u(o.getState(),h))},[u]),j.createElement(j.Fragment,null,Mv.createPortal(j.createElement(ZO.Provider,{value:c},e),c,null))}Mv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:j.version});function h3(n,e,t){var r,i,a,o,s;e==null&&(e=100);function l(){var c=Date.now()-o;c<e&&c>=0?r=setTimeout(l,e-c):(r=null,t||(s=n.apply(a,i),a=i=null))}var u=function(){a=this,i=arguments,o=Date.now();var c=t&&!r;return r||(r=setTimeout(l,e)),c&&(s=n.apply(a,i),a=i=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=n.apply(a,i),a=i=null,clearTimeout(r),r=null)},u}h3.debounce=h3;var QUe=h3;const O8=is(QUe);function e8e(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const a=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,s]=j.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=j.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,h=j.useRef(!1);j.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[d,f,p]=j.useMemo(()=>{const w=()=>{if(!l.current.element)return;const{left:b,top:m,width:x,height:S,bottom:C,right:T,x:M,y:A}=l.current.element.getBoundingClientRect(),D={left:b,top:m,width:x,height:S,bottom:C,right:T,x:M,y:A};l.current.element instanceof HTMLElement&&i&&(D.height=l.current.element.offsetHeight,D.width=l.current.element.offsetWidth),Object.freeze(D),h.current&&!i8e(l.current.lastBounds,D)&&s(l.current.lastBounds=D)};return[w,c?O8(w,c):w,u?O8(w,u):w]},[s,i,u,c]);function v(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new a(p),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(w=>w.addEventListener("scroll",p,{capture:!0,passive:!0})))}const g=w=>{!w||w===l.current.element||(v(),l.current.element=w,l.current.scrollContainers=aJ(w),y())};return n8e(p,!!t),t8e(f),j.useEffect(()=>{v(),y()},[t,p,f]),j.useEffect(()=>v,[]),[g,o,d]}function t8e(n){j.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function n8e(n,e){j.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function aJ(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...aJ(n.parentElement)]}const r8e=["x","y","top","bottom","left","right","width","height"],i8e=(n,e)=>r8e.every(t=>n[t]===e[t]);var a8e=Object.defineProperty,o8e=Object.defineProperties,s8e=Object.getOwnPropertyDescriptors,P8=Object.getOwnPropertySymbols,l8e=Object.prototype.hasOwnProperty,u8e=Object.prototype.propertyIsEnumerable,R8=(n,e,t)=>e in n?a8e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,I8=(n,e)=>{for(var t in e||(e={}))l8e.call(e,t)&&R8(n,t,e[t]);if(P8)for(var t of P8(e))u8e.call(e,t)&&R8(n,t,e[t]);return n},c8e=(n,e)=>o8e(n,s8e(e)),L8,F8;typeof window<"u"&&((L8=window.document)!=null&&L8.createElement||((F8=window.navigator)==null?void 0:F8.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function oJ(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=oJ(r,e,t);if(i)return i;r=r.sibling}}function sJ(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const B8=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=B8;return}return B8.apply(this,arguments)};const KO=sJ(j.createContext(null));class lJ extends j.Component{render(){return j.createElement(KO.Provider,{value:this._reactInternals},this.props.children)}}function h8e(){const n=j.useContext(KO);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=j.useId();return j.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const r=oJ(t,!1,i=>{let a=i.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(r)return r}},[n,e])}function d8e(){const n=h8e(),[e]=j.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==KO&&!e.has(r)&&e.set(r,j.useContext(sJ(r)))}t=t.return}return e}function f8e(){const n=d8e();return j.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>j.createElement(e,null,j.createElement(t.Provider,c8e(I8({},r),{value:n.get(t)}))),e=>j.createElement(lJ,I8({},e))),[n])}const QA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function p8e(n){const{handlePointer:e}=UUe(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(QA).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:a}=n.getState();a.disconnect==null||a.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=a.handlers)!=null?r:[]).forEach(([o,s])=>{const[l,u]=QA[o];t.addEventListener(l,s,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([a,o])=>{if(r&&r.connected instanceof HTMLElement){const[s]=QA[a];r.connected.removeEventListener(s,o)}}),t(a=>({events:{...a.events,connected:void 0}}))}}}}const m8e=j.forwardRef(function({children:n,fallback:e,resize:t,style:r,gl:i,events:a=p8e,eventSource:o,eventPrefix:s,shadows:l,linear:u,flat:c,legacy:h,orthographic:d,frameloop:f,dpr:p,performance:v,raycaster:y,camera:g,scene:w,onPointerMissed:b,onCreated:m,...x},S){j.useMemo(()=>NUe(TUe),[]);const C=f8e(),[T,M]=e8e({scroll:!0,debounce:{scroll:50,resize:0},...t}),A=j.useRef(null),D=j.useRef(null);j.useImperativeHandle(S,()=>A.current);const O=ZZ(b),[U,L]=j.useState(!1),[F,k]=j.useState(!1);if(U)throw U;if(F)throw F;const P=j.useRef(null);wy(()=>{const B=A.current;M.width>0&&M.height>0&&B&&(P.current||(P.current=YUe(B)),P.current.configure({gl:i,events:a,shadows:l,linear:u,flat:c,legacy:h,orthographic:d,frameloop:f,dpr:p,performance:v,raycaster:y,camera:g,scene:w,size:M,onPointerMissed:(...X)=>O.current==null?void 0:O.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(o?PUe(o)?o.current:o:D.current),s&&X.setEvents({compute:(J,Q)=>{const Z=J[s+"X"],re=J[s+"Y"];Q.pointer.set(Z/Q.size.width*2-1,-(re/Q.size.height)*2+1),Q.raycaster.setFromCamera(Q.pointer,Q.camera)}}),m==null||m(X)}}),P.current.render(j.createElement(C,null,j.createElement(JZ,{set:k},j.createElement(j.Suspense,{fallback:j.createElement(RUe,{set:L})},n)))))}),j.useEffect(()=>{const B=A.current;if(B)return()=>iJ(B)},[]);const z=o?"none":"auto";return j.createElement("div",lt({ref:D,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:z,...r}},x),j.createElement("div",{ref:T,style:{width:"100%",height:"100%"}},j.createElement("canvas",{ref:A,style:{display:"block"}},e)))}),g8e=j.forwardRef(function(n,e){return j.createElement(lJ,null,j.createElement(m8e,lt({},n,{ref:e})))});var v8e=Object.defineProperty,y8e=(n,e,t)=>e in n?v8e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Jt=(n,e,t)=>(y8e(n,typeof e!="symbol"?e+"":e,t),t);const cx=new Ud,z8=new Jl,b8e=Math.cos(70*(Math.PI/180)),U8=(n,e)=>(n%e+e)%e;let x8e=class extends Tl{constructor(n,e){super(),Jt(this,"object"),Jt(this,"domElement"),Jt(this,"enabled",!0),Jt(this,"target",new me),Jt(this,"minDistance",0),Jt(this,"maxDistance",1/0),Jt(this,"minZoom",0),Jt(this,"maxZoom",1/0),Jt(this,"minPolarAngle",0),Jt(this,"maxPolarAngle",Math.PI),Jt(this,"minAzimuthAngle",-1/0),Jt(this,"maxAzimuthAngle",1/0),Jt(this,"enableDamping",!1),Jt(this,"dampingFactor",.05),Jt(this,"enableZoom",!0),Jt(this,"zoomSpeed",1),Jt(this,"enableRotate",!0),Jt(this,"rotateSpeed",1),Jt(this,"enablePan",!0),Jt(this,"panSpeed",1),Jt(this,"screenSpacePanning",!0),Jt(this,"keyPanSpeed",7),Jt(this,"zoomToCursor",!1),Jt(this,"autoRotate",!1),Jt(this,"autoRotateSpeed",2),Jt(this,"reverseOrbit",!1),Jt(this,"reverseHorizontalOrbit",!1),Jt(this,"reverseVerticalOrbit",!1),Jt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Jt(this,"mouseButtons",{LEFT:Rh.ROTATE,MIDDLE:Rh.DOLLY,RIGHT:Rh.PAN}),Jt(this,"touches",{ONE:Ih.ROTATE,TWO:Ih.DOLLY_PAN}),Jt(this,"target0"),Jt(this,"position0"),Jt(this,"zoom0"),Jt(this,"_domElementKeyEvents",null),Jt(this,"getPolarAngle"),Jt(this,"getAzimuthalAngle"),Jt(this,"setPolarAngle"),Jt(this,"setAzimuthalAngle"),Jt(this,"getDistance"),Jt(this,"listenToKeyEvents"),Jt(this,"stopListenToKeyEvents"),Jt(this,"saveState"),Jt(this,"reset"),Jt(this,"update"),Jt(this,"connect"),Jt(this,"dispose"),this.object=n,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=we=>{let Re=U8(we,2*Math.PI),et=u.phi;et<0&&(et+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let V=Math.abs(Re-et);2*Math.PI-V<V&&(Re<et?Re+=2*Math.PI:et+=2*Math.PI),c.phi=Re-et,t.update()},this.setAzimuthalAngle=we=>{let Re=U8(we,2*Math.PI),et=u.theta;et<0&&(et+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let V=Math.abs(Re-et);2*Math.PI-V<V&&(Re<et?Re+=2*Math.PI:et+=2*Math.PI),c.theta=Re-et,t.update()},this.getDistance=()=>t.object.position.distanceTo(t.target),this.listenToKeyEvents=we=>{we.addEventListener("keydown",xe),this._domElementKeyEvents=we},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",xe),this._domElementKeyEvents=null},this.saveState=()=>{t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=()=>{t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(r),t.update(),s=o.NONE},this.update=(()=>{const we=new me,Re=new me(0,1,0),et=new yi().setFromUnitVectors(n.up,Re),V=et.clone().invert(),Ee=new me,Le=new yi,Je=2*Math.PI;return function(){const he=t.object.position;et.setFromUnitVectors(n.up,Re),V.copy(et).invert(),we.copy(he).sub(t.target),we.applyQuaternion(et),u.setFromVector3(we),t.autoRotate&&s===o.NONE&&U(D()),t.enableDamping?(u.theta+=c.theta*t.dampingFactor,u.phi+=c.phi*t.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi);let Xe=t.minAzimuthAngle,H=t.maxAzimuthAngle;isFinite(Xe)&&isFinite(H)&&(Xe<-Math.PI?Xe+=Je:Xe>Math.PI&&(Xe-=Je),H<-Math.PI?H+=Je:H>Math.PI&&(H-=Je),Xe<=H?u.theta=Math.max(Xe,Math.min(H,u.theta)):u.theta=u.theta>(Xe+H)/2?Math.max(Xe,u.theta):Math.min(H,u.theta)),u.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,u.phi)),u.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(d,t.dampingFactor):t.target.add(d),t.zoomToCursor&&T||t.object.isOrthographicCamera?u.radius=J(u.radius):u.radius=J(u.radius*h),we.setFromSpherical(u),we.applyQuaternion(V),he.copy(t.target).add(we),t.object.matrixAutoUpdate||t.object.updateMatrix(),t.object.lookAt(t.target),t.enableDamping===!0?(c.theta*=1-t.dampingFactor,c.phi*=1-t.dampingFactor,d.multiplyScalar(1-t.dampingFactor)):(c.set(0,0,0),d.set(0,0,0));let te=!1;if(t.zoomToCursor&&T){let le=null;if(t.object instanceof Nr&&t.object.isPerspectiveCamera){const ve=we.length();le=J(ve*h);const Ce=ve-le;t.object.position.addScaledVector(S,Ce),t.object.updateMatrixWorld()}else if(t.object.isOrthographicCamera){const ve=new me(C.x,C.y,0);ve.unproject(t.object),t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/h)),t.object.updateProjectionMatrix(),te=!0;const Ce=new me(C.x,C.y,0);Ce.unproject(t.object),t.object.position.sub(Ce).add(ve),t.object.updateMatrixWorld(),le=we.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;le!==null&&(t.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(le).add(t.object.position):(cx.origin.copy(t.object.position),cx.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(cx.direction))<b8e?n.lookAt(t.target):(z8.setFromNormalAndCoplanarPoint(t.object.up,t.target),cx.intersectPlane(z8,t.target))))}else t.object instanceof au&&t.object.isOrthographicCamera&&(te=h!==1,te&&(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/h)),t.object.updateProjectionMatrix()));return h=1,T=!1,te||Ee.distanceToSquared(t.object.position)>l||8*(1-Le.dot(t.object.quaternion))>l?(t.dispatchEvent(r),Ee.copy(t.object.position),Le.copy(t.object.quaternion),te=!1,!0):!1}})(),this.connect=we=>{we===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),t.domElement=we,t.domElement.style.touchAction="none",t.domElement.addEventListener("contextmenu",qe),t.domElement.addEventListener("pointerdown",q),t.domElement.addEventListener("pointercancel",Ae),t.domElement.addEventListener("wheel",ge)},this.dispose=()=>{var we,Re,et,V,Ee,Le;t.domElement&&(t.domElement.style.touchAction="auto"),(we=t.domElement)==null||we.removeEventListener("contextmenu",qe),(Re=t.domElement)==null||Re.removeEventListener("pointerdown",q),(et=t.domElement)==null||et.removeEventListener("pointercancel",Ae),(V=t.domElement)==null||V.removeEventListener("wheel",ge),(Ee=t.domElement)==null||Ee.ownerDocument.removeEventListener("pointermove",ce),(Le=t.domElement)==null||Le.ownerDocument.removeEventListener("pointerup",Ae),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",xe)};const t=this,r={type:"change"},i={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=o.NONE;const l=1e-6,u=new s3,c=new s3;let h=1;const d=new me,f=new Qe,p=new Qe,v=new Qe,y=new Qe,g=new Qe,w=new Qe,b=new Qe,m=new Qe,x=new Qe,S=new me,C=new Qe;let T=!1;const M=[],A={};function D(){return 2*Math.PI/60/60*t.autoRotateSpeed}function O(){return Math.pow(.95,t.zoomSpeed)}function U(we){t.reverseOrbit||t.reverseHorizontalOrbit?c.theta+=we:c.theta-=we}function L(we){t.reverseOrbit||t.reverseVerticalOrbit?c.phi+=we:c.phi-=we}const F=(()=>{const we=new me;return function(Re,et){we.setFromMatrixColumn(et,0),we.multiplyScalar(-Re),d.add(we)}})(),k=(()=>{const we=new me;return function(Re,et){t.screenSpacePanning===!0?we.setFromMatrixColumn(et,1):(we.setFromMatrixColumn(et,0),we.crossVectors(t.object.up,we)),we.multiplyScalar(Re),d.add(we)}})(),P=(()=>{const we=new me;return function(Re,et){const V=t.domElement;if(V&&t.object instanceof Nr&&t.object.isPerspectiveCamera){const Ee=t.object.position;we.copy(Ee).sub(t.target);let Le=we.length();Le*=Math.tan(t.object.fov/2*Math.PI/180),F(2*Re*Le/V.clientHeight,t.object.matrix),k(2*et*Le/V.clientHeight,t.object.matrix)}else V&&t.object instanceof au&&t.object.isOrthographicCamera?(F(Re*(t.object.right-t.object.left)/t.object.zoom/V.clientWidth,t.object.matrix),k(et*(t.object.top-t.object.bottom)/t.object.zoom/V.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function z(we){t.object instanceof Nr&&t.object.isPerspectiveCamera||t.object instanceof au&&t.object.isOrthographicCamera?h/=we:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function B(we){t.object instanceof Nr&&t.object.isPerspectiveCamera||t.object instanceof au&&t.object.isOrthographicCamera?h*=we:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function X(we){if(!t.zoomToCursor||!t.domElement)return;T=!0;const Re=t.domElement.getBoundingClientRect(),et=we.clientX-Re.left,V=we.clientY-Re.top,Ee=Re.width,Le=Re.height;C.x=et/Ee*2-1,C.y=-(V/Le)*2+1,S.set(C.x,C.y,1).unproject(t.object).sub(t.object.position).normalize()}function J(we){return Math.max(t.minDistance,Math.min(t.maxDistance,we))}function Q(we){f.set(we.clientX,we.clientY)}function Z(we){X(we),b.set(we.clientX,we.clientY)}function re(we){y.set(we.clientX,we.clientY)}function fe(we){p.set(we.clientX,we.clientY),v.subVectors(p,f).multiplyScalar(t.rotateSpeed);const Re=t.domElement;Re&&(U(2*Math.PI*v.x/Re.clientHeight),L(2*Math.PI*v.y/Re.clientHeight)),f.copy(p),t.update()}function se(we){m.set(we.clientX,we.clientY),x.subVectors(m,b),x.y>0?z(O()):x.y<0&&B(O()),b.copy(m),t.update()}function ye(we){g.set(we.clientX,we.clientY),w.subVectors(g,y).multiplyScalar(t.panSpeed),P(w.x,w.y),y.copy(g),t.update()}function De(we){X(we),we.deltaY<0?B(O()):we.deltaY>0&&z(O()),t.update()}function pe(we){let Re=!1;switch(we.code){case t.keys.UP:P(0,t.keyPanSpeed),Re=!0;break;case t.keys.BOTTOM:P(0,-t.keyPanSpeed),Re=!0;break;case t.keys.LEFT:P(t.keyPanSpeed,0),Re=!0;break;case t.keys.RIGHT:P(-t.keyPanSpeed,0),Re=!0;break}Re&&(we.preventDefault(),t.update())}function Me(){if(M.length==1)f.set(M[0].pageX,M[0].pageY);else{const we=.5*(M[0].pageX+M[1].pageX),Re=.5*(M[0].pageY+M[1].pageY);f.set(we,Re)}}function be(){if(M.length==1)y.set(M[0].pageX,M[0].pageY);else{const we=.5*(M[0].pageX+M[1].pageX),Re=.5*(M[0].pageY+M[1].pageY);y.set(we,Re)}}function ne(){const we=M[0].pageX-M[1].pageX,Re=M[0].pageY-M[1].pageY,et=Math.sqrt(we*we+Re*Re);b.set(0,et)}function Pe(){t.enableZoom&&ne(),t.enablePan&&be()}function ze(){t.enableZoom&&ne(),t.enableRotate&&Me()}function K(we){if(M.length==1)p.set(we.pageX,we.pageY);else{const et=st(we),V=.5*(we.pageX+et.x),Ee=.5*(we.pageY+et.y);p.set(V,Ee)}v.subVectors(p,f).multiplyScalar(t.rotateSpeed);const Re=t.domElement;Re&&(U(2*Math.PI*v.x/Re.clientHeight),L(2*Math.PI*v.y/Re.clientHeight)),f.copy(p)}function ie(we){if(M.length==1)g.set(we.pageX,we.pageY);else{const Re=st(we),et=.5*(we.pageX+Re.x),V=.5*(we.pageY+Re.y);g.set(et,V)}w.subVectors(g,y).multiplyScalar(t.panSpeed),P(w.x,w.y),y.copy(g)}function _e(we){const Re=st(we),et=we.pageX-Re.x,V=we.pageY-Re.y,Ee=Math.sqrt(et*et+V*V);m.set(0,Ee),x.set(0,Math.pow(m.y/b.y,t.zoomSpeed)),z(x.y),b.copy(m)}function oe(we){t.enableZoom&&_e(we),t.enablePan&&ie(we)}function G(we){t.enableZoom&&_e(we),t.enableRotate&&K(we)}function q(we){var Re,et;t.enabled!==!1&&(M.length===0&&((Re=t.domElement)==null||Re.ownerDocument.addEventListener("pointermove",ce),(et=t.domElement)==null||et.ownerDocument.addEventListener("pointerup",Ae)),ke(we),we.pointerType==="touch"?Ne(we):$(we))}function ce(we){t.enabled!==!1&&(we.pointerType==="touch"?Fe(we):ee(we))}function Ae(we){var Re,et,V;it(we),M.length===0&&((Re=t.domElement)==null||Re.releasePointerCapture(we.pointerId),(et=t.domElement)==null||et.ownerDocument.removeEventListener("pointermove",ce),(V=t.domElement)==null||V.ownerDocument.removeEventListener("pointerup",Ae)),t.dispatchEvent(a),s=o.NONE}function $(we){let Re;switch(we.button){case 0:Re=t.mouseButtons.LEFT;break;case 1:Re=t.mouseButtons.MIDDLE;break;case 2:Re=t.mouseButtons.RIGHT;break;default:Re=-1}switch(Re){case Rh.DOLLY:if(t.enableZoom===!1)return;Z(we),s=o.DOLLY;break;case Rh.ROTATE:if(we.ctrlKey||we.metaKey||we.shiftKey){if(t.enablePan===!1)return;re(we),s=o.PAN}else{if(t.enableRotate===!1)return;Q(we),s=o.ROTATE}break;case Rh.PAN:if(we.ctrlKey||we.metaKey||we.shiftKey){if(t.enableRotate===!1)return;Q(we),s=o.ROTATE}else{if(t.enablePan===!1)return;re(we),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&t.dispatchEvent(i)}function ee(we){if(t.enabled!==!1)switch(s){case o.ROTATE:if(t.enableRotate===!1)return;fe(we);break;case o.DOLLY:if(t.enableZoom===!1)return;se(we);break;case o.PAN:if(t.enablePan===!1)return;ye(we);break}}function ge(we){t.enabled===!1||t.enableZoom===!1||s!==o.NONE&&s!==o.ROTATE||(we.preventDefault(),t.dispatchEvent(i),De(we),t.dispatchEvent(a))}function xe(we){t.enabled===!1||t.enablePan===!1||pe(we)}function Ne(we){switch(Ze(we),M.length){case 1:switch(t.touches.ONE){case Ih.ROTATE:if(t.enableRotate===!1)return;Me(),s=o.TOUCH_ROTATE;break;case Ih.PAN:if(t.enablePan===!1)return;be(),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(t.touches.TWO){case Ih.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Pe(),s=o.TOUCH_DOLLY_PAN;break;case Ih.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;ze(),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&t.dispatchEvent(i)}function Fe(we){switch(Ze(we),s){case o.TOUCH_ROTATE:if(t.enableRotate===!1)return;K(we),t.update();break;case o.TOUCH_PAN:if(t.enablePan===!1)return;ie(we),t.update();break;case o.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;oe(we),t.update();break;case o.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;G(we),t.update();break;default:s=o.NONE}}function qe(we){t.enabled!==!1&&we.preventDefault()}function ke(we){M.push(we)}function it(we){delete A[we.pointerId];for(let Re=0;Re<M.length;Re++)if(M[Re].pointerId==we.pointerId){M.splice(Re,1);return}}function Ze(we){let Re=A[we.pointerId];Re===void 0&&(Re=new Qe,A[we.pointerId]=Re),Re.set(we.pageX,we.pageY)}function st(we){const Re=we.pointerId===M[0].pointerId?M[1]:M[0];return A[Re.pointerId]}e!==void 0&&this.connect(e),this.update()}};function w8e(n,e,t){const r=Dr(d=>d.size),i=Dr(d=>d.viewport),a=typeof n=="number"?n:r.width*i.dpr,o=r.height*i.dpr,s=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...c}=s,h=j.useMemo(()=>{const d=new es(a,o,{minFilter:sr,magFilter:sr,type:Ed,...c});return u&&(d.depthTexture=new y_(a,o,po)),d.samples=l,d},[]);return j.useLayoutEffect(()=>{h.setSize(a,o),l&&(h.samples=l)},[l,h,a,o]),j.useEffect(()=>()=>h.dispose(),[]),h}const S8e=n=>typeof n=="function",E8e=j.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,children:r,makeDefault:i,...a},o)=>{const s=Dr(({set:y})=>y),l=Dr(({camera:y})=>y),u=Dr(({size:y})=>y),c=j.useRef(null);j.useImperativeHandle(o,()=>c.current,[]);const h=j.useRef(null),d=w8e(e);j.useLayoutEffect(()=>{a.manual||c.current.updateProjectionMatrix()},[u,a]),j.useLayoutEffect(()=>{c.current.updateProjectionMatrix()}),j.useLayoutEffect(()=>{if(i){const y=l;return s(()=>({camera:c.current})),()=>s(()=>({camera:y}))}},[c,i,s]);let f=0,p=null;const v=S8e(r);return U_(y=>{v&&(t===1/0||f<t)&&(h.current.visible=!1,y.gl.setRenderTarget(d),p=y.scene.background,n&&(y.scene.background=n),y.gl.render(y.scene,c.current),y.scene.background=p,y.gl.setRenderTarget(null),h.current.visible=!0,f++)}),j.createElement(j.Fragment,null,j.createElement("orthographicCamera",lt({left:u.width/-2,right:u.width/2,top:u.height/2,bottom:u.height/-2,ref:c},a),!v&&r),j.createElement("group",{ref:h},v&&r(d.texture)))}),_8e=j.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:a=!1,onChange:o,onStart:s,onEnd:l,...u},c)=>{const h=Dr(S=>S.invalidate),d=Dr(S=>S.camera),f=Dr(S=>S.gl),p=Dr(S=>S.events),v=Dr(S=>S.setEvents),y=Dr(S=>S.set),g=Dr(S=>S.get),w=Dr(S=>S.performance),b=e||d,m=r||p.connected||f.domElement,x=j.useMemo(()=>new x8e(b),[b]);return U_(()=>{x.enabled&&x.update()},-1),j.useEffect(()=>(a&&x.connect(a===!0?m:a),x.connect(m),()=>void x.dispose()),[a,m,t,x,h]),j.useEffect(()=>{const S=M=>{h(),t&&w.regress(),o&&o(M)},C=M=>{s&&s(M)},T=M=>{l&&l(M)};return x.addEventListener("change",S),x.addEventListener("start",C),x.addEventListener("end",T),()=>{x.removeEventListener("start",C),x.removeEventListener("end",T),x.removeEventListener("change",S)}},[o,s,l,x,h,v]),j.useEffect(()=>{if(n){const S=g().controls;return y({controls:x}),()=>y({controls:S})}},[n,x]),j.createElement("primitive",lt({ref:c,object:x,enableDamping:i},u))});function C8e({defaultScene:n,defaultCamera:e,renderPriority:t=1}){const{gl:r,scene:i,camera:a}=Dr();let o;return U_(()=>{o=r.autoClear,t===1&&(r.autoClear=!0,r.render(n,e)),r.autoClear=!1,r.clearDepth(),r.render(i,a),r.autoClear=o},t),j.createElement("group",{onPointerOver:()=>null})}function A8e({children:n,renderPriority:e=1}){const{scene:t,camera:r}=Dr(),[i]=j.useState(()=>new bv);return j.createElement(j.Fragment,null,JUe(j.createElement(j.Fragment,null,n,j.createElement(C8e,{defaultScene:t,defaultCamera:r,renderPriority:e})),i,{events:{priority:e+1}}))}const uJ=j.createContext({}),T8e=()=>j.useContext(uJ),M8e=2*Math.PI,eT=new _n,j8=new Yt,[Ff,tT]=[new yi,new yi],H8=new me,V8=new me,D8e=n=>"minPolarAngle"in n,k8e=({alignment:n="bottom-right",margin:e=[80,80],renderPriority:t=1,onUpdate:r,onTarget:i,children:a})=>{const o=Dr(S=>S.size),s=Dr(S=>S.camera),l=Dr(S=>S.controls),u=Dr(S=>S.invalidate),c=j.useRef(null),h=j.useRef(null),d=j.useRef(!1),f=j.useRef(0),p=j.useRef(new me(0,0,0)),v=j.useRef(new me(0,0,0));j.useEffect(()=>{v.current.copy(s.up)},[s]);const y=j.useCallback(S=>{d.current=!0,(l||i)&&(p.current=(l==null?void 0:l.target)||(i==null?void 0:i())),f.current=s.position.distanceTo(H8),Ff.copy(s.quaternion),V8.copy(S).multiplyScalar(f.current).add(H8),eT.lookAt(V8),eT.up.copy(s.up),tT.copy(eT.quaternion),u()},[l,s,i,u]);U_((S,C)=>{if(h.current&&c.current){var T;if(d.current)if(Ff.angleTo(tT)<.01)d.current=!1,D8e(l)&&s.up.copy(v.current);else{const M=C*M8e;Ff.rotateTowards(tT,M),s.position.set(0,0,1).applyQuaternion(Ff).multiplyScalar(f.current).add(p.current),s.up.set(0,1,0).applyQuaternion(Ff).normalize(),s.quaternion.copy(Ff),r?r():l&&l.update(),u()}j8.copy(s.matrix).invert(),(T=c.current)==null||T.quaternion.setFromRotationMatrix(j8)}});const g=j.useMemo(()=>({tweenCamera:y}),[y]),[w,b]=e,m=n.endsWith("-center")?0:n.endsWith("-left")?-o.width/2+w:o.width/2-w,x=n.startsWith("center-")?0:n.startsWith("top-")?o.height/2-b:-o.height/2+b;return j.createElement(A8e,{renderPriority:t},j.createElement(uJ.Provider,{value:g},j.createElement(E8e,{makeDefault:!0,ref:h,position:[0,0,200]}),j.createElement("group",{ref:c,position:[m,x,0]},a)))};function nT({scale:n=[.8,.05,.05],color:e,rotation:t}){return j.createElement("group",{rotation:t},j.createElement("mesh",{position:[.4,0,0]},j.createElement("boxGeometry",{args:n}),j.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function Bf({onClick:n,font:e,disabled:t,arcStyle:r,label:i,labelColor:a,axisHeadScale:o=1,...s}){const l=Dr(v=>v.gl),u=j.useMemo(()=>{const v=document.createElement("canvas");v.width=64,v.height=64;const y=v.getContext("2d");return y.beginPath(),y.arc(32,32,16,0,2*Math.PI),y.closePath(),y.fillStyle=r,y.fill(),i&&(y.font=e,y.textAlign="center",y.fillStyle=a,y.fillText(i,32,41)),new oZ(v)},[r,i,a,e]),[c,h]=j.useState(!1),d=(i?1:.75)*(c?1.2:1)*o,f=v=>{v.stopPropagation(),h(!0)},p=v=>{v.stopPropagation(),h(!1)};return j.createElement("sprite",lt({scale:d,onPointerOver:t?void 0:f,onPointerOut:t?void 0:n||p},s),j.createElement("spriteMaterial",{map:u,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:i?1:.75,toneMapped:!1}))}const N8e=({hideNegativeAxes:n,hideAxisHeads:e,disabled:t,font:r="18px Inter var, Arial, sans-serif",axisColors:i=["#ff2060","#20df80","#2080ff"],axisHeadScale:a=1,axisScale:o,labels:s=["X","Y","Z"],labelColor:l="#000",onClick:u,...c})=>{const[h,d,f]=i,{tweenCamera:p}=T8e(),v={font:r,disabled:t,labelColor:l,onClick:u,axisHeadScale:a,onPointerDown:t?void 0:y=>{p(y.object.position),y.stopPropagation()}};return j.createElement("group",lt({scale:40},c),j.createElement(nT,{color:h,rotation:[0,0,0],scale:o}),j.createElement(nT,{color:d,rotation:[0,0,Math.PI/2],scale:o}),j.createElement(nT,{color:f,rotation:[0,-Math.PI/2,0],scale:o}),!e&&j.createElement(j.Fragment,null,j.createElement(Bf,lt({arcStyle:h,position:[1,0,0],label:s[0]},v)),j.createElement(Bf,lt({arcStyle:d,position:[0,1,0],label:s[1]},v)),j.createElement(Bf,lt({arcStyle:f,position:[0,0,1],label:s[2]},v)),!n&&j.createElement(j.Fragment,null,j.createElement(Bf,lt({arcStyle:h,position:[-1,0,0]},v)),j.createElement(Bf,lt({arcStyle:d,position:[0,-1,0]},v)),j.createElement(Bf,lt({arcStyle:f,position:[0,0,-1]},v)))))};function O8e(n,e){const t=n+"Geometry";return j.forwardRef(({args:r,children:i,...a},o)=>{const s=j.useRef(null);return j.useImperativeHandle(o,()=>s.current),j.useLayoutEffect(()=>{}),j.createElement("mesh",lt({ref:s},a),j.createElement(t,{attach:"geometry",args:r}),i)})}const P8e=O8e("plane"),R8e=function({size1:n=1,size2:e=1e3,color:t=new wt("#efe3fd"),distance:r=1e3,axes:i="xyz"}={}){const a=i.substr(0,2);return new ts({side:xs,uniforms:{uSize1:{value:n},uSize2:{value:e},uColor:{value:t},uDistance:{value:r}},transparent:!0,vertexShader:`
           
           varying vec3 worldPosition;
		   
           uniform float uDistance;
           
           void main() {
           
                vec3 pos = position.${i} * uDistance;
                pos.${a} += cameraPosition.${a};
                
                worldPosition = pos;
                
                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
           
           }
           `,fragmentShader:`
           
           varying vec3 worldPosition;
           
           uniform float uSize1;
           uniform float uSize2;
           uniform vec3 uColor;
           uniform float uDistance;
            
            
            
            float getGrid(float size) {
            
                vec2 r = worldPosition.${a} / size;
                
                
                vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
                float line = min(grid.x, grid.y);
                
            
                return 1.0 - min(line, 1.0);
            }
            
           void main() {
           
                
                  float d = 1.0 - min(distance(cameraPosition.${a}, worldPosition.${a}) / uDistance, 1.0);
                
                  float g1 = getGrid(uSize1);
                  float g2 = getGrid(uSize2);
                  
                  
                  gl_FragColor = vec4(uColor.rgb, mix(g2, g1, g1) * pow(d, 3.0));
                  gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);
                
                  if ( gl_FragColor.a <= 0.0 ) discard;
                
           
           }
           
           `,extensions:{derivatives:!0}})},I8e=()=>{const n=j.useRef(R8e());return ue.jsx(P8e,{material:n.current})},L8e=Te.memo(Te.forwardRef(function({axesParam:n,enableDamping:e},t){return ue.jsxs(ue.Fragment,{children:[ue.jsx(_8e,{ref:t,panSpeed:1.5,zoomSpeed:.5,enableDamping:e}),n&&ue.jsx(k8e,{alignment:"bottom-right",margin:[70,100],onTarget:()=>{var r;return(r=t==null?void 0:t.current)==null?void 0:r.target},onUpdate:()=>{var r;(r=t.current)==null||r.update()},children:ue.jsx(N8e,{font:"18px Inter var, HKGrotesk, sans-serif"})})]})}));_n.DEFAULT_UP.set(0,0,1);function cJ({children:n,...e}){const t=Math.min(window.devicePixelRatio,2);let r=e.outdatedMesh?"#ababab":"#f5f5f5";return ue.jsx(j.Suspense,{fallback:null,children:ue.jsxs(g8e,{id:"threeCanvas",style:{backgroundColor:r},dpr:t,frameloop:"demand",orthographic:!0,camera:{fov:75,near:.1,far:1e3,position:[50,50,60],zoom:7},shadows:!0,children:[e.gridParam?ue.jsx(I8e,{}):null,ue.jsx(L8e,{axesParam:e.axesParam,enableDamping:!1}),ue.jsx("ambientLight",{intensity:.5}),e.outdatedMesh?ue.jsx("directionalLight",{color:"grey",intensity:.2,position:[50,50,50]}):ue.jsx("directionalLight",{position:[50,50,50]}),e.outdatedMesh?null:ue.jsx("ambientLight",{intensity:.5}),n]})})}function F8e(n,e,t){if(n.clearGroups(),delete n.userData.faceGroups,n.setIndex(e.triangles),n.setAttribute("position",new Mt(e.vertices,3)),e.faceGroups){let r=new Set;n.userData.faceGroups=e.faceGroups,e.faceGroups.forEach(({start:i,count:a,faceId:o})=>{n.addGroup(i,a,r.has(o)?1:0)})}else n.addGroup(0,e.triangles.length,0);e.normals&&e.normals.length?n.setAttribute("normal",new Mt(e.normals,3)):n.computeVertexNormals(),n.computeBoundingBox()}function hJ(n,e,t){if(n.clearGroups(),delete n.userData.edgeGroups,n.setAttribute("position",new Mt(e.lines,3)),!!e)if(e.edgeGroups){let r=new Set;n.userData.edgeGroups=e.edgeGroups,e.edgeGroups.forEach(({start:i,count:a,edgeId:o})=>{n.addGroup(i,a,r.has(o)?1:0)})}else n.addGroup(0,e.lines.length/3,0)}function dJ(n,e){n.clearGroups(),delete n.userData.edgeGroups,n.copy(new IO(e,2))}const fJ=Te.memo(function({mesh:n,isSolid:e,setOutdatedMesh:t}){const{invalidate:r}=Dr(),[i,a]=j.useState([]);return j.useLayoutEffect(()=>{let o=[];n.map(s=>{const l=new sn,u=new sn;s.faces&&F8e(l,s.faces),s.edges?hJ(u,s.edges):s.faces&&dJ(u,l);const c=l,h=u,d=s.color;o.push({body:c,lines:h,color:d})}),a(o),r()},[n,r]),j.useEffect(()=>()=>{t(!1),r()},[r]),ue.jsx(ue.Fragment,{children:i.map((o,s)=>ue.jsxs("group",{children:[e?ue.jsx("mesh",{geometry:o.body,children:ue.jsx("meshStandardMaterial",{color:o.color,opacity:.5,polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1},"material"+o.color)},"mesh"+o.color):null,ue.jsx("lineSegments",{geometry:o.lines},"lines"+o.color),ue.jsx("lineSegments",{geometry:o.lines,children:ue.jsx("lineBasicMaterial",{color:"#3c5a6e",opacity:"1",linewidth:8})},"linesmesh"+o.color)]},"group"+o.color+s))})}),pJ=Te.memo(function({mesh:n}){const{invalidate:e}=Dr(),[t,r]=j.useState([]);return j.useLayoutEffect(()=>{let i=[];n.map(a=>{const o=new LO;a.edges?hJ(o,a.edges):a.faces&&dJ(o);const s=o;i.push({lines:s,color:a.color})}),r(i),e()},[n,e]),j.useEffect(()=>()=>{e()},[e]),ue.jsx(ue.Fragment,{children:t.map((i,a)=>ue.jsx("group",{children:ue.jsx("lineSegments",{geometry:i.lines,children:ue.jsx("lineBasicMaterial",{color:"#3c5a6e",opacity:".75"})})},"groupwire"+i.color+a))})});function mJ(n){const[e,t]=j.useState(n.run),r=()=>{t(!e)};if(I.currentRepo)return e?ue.jsx(ue.Fragment,{children:ue.jsx($w,{to:n.isItOwned?`/${I.currentRepo.id}`:"/",onClick:r,children:ue.jsx("label",{title:"Create/Run Mode",className:"switch_run",children:ue.jsxs("button",{style:{width:"100px",backgroundColor:"#3F4243",borderRadius:"12px",display:"flex"},children:[ue.jsx("svg",{width:"12",height:"8",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",className:"leva-c-cHvNmv",style:{transform:"rotate(90deg)",alignSelf:"center",fill:"#c4a3d5"},children:ue.jsx("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"})}),ue.jsx("p",{style:{fontSize:"12px",padding:"0 5px 0 5px",color:"#c4a3d5",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:n.isItOwned?"Create Mode":"Browse Projects"})]})})},I.currentRepo.id)}):ue.jsx(ue.Fragment,{children:ue.jsx($w,{to:I.currentRepo?`/run/${I.currentRepo.id}`:"/run",onClick:r,style:{position:"absolute"},children:ue.jsx("label",{title:"Create/Run Mode",className:"switch",children:ue.jsxs("button",{style:{width:"100px",backgroundColor:"#3F4243",borderRadius:"12px",display:"flex"},children:[ue.jsx("p",{style:{fontSize:"12px",padding:"0 5px 0 5px",color:"#c4a3d5",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:"Run Mode"}),ue.jsx("svg",{width:"12",height:"8",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",className:"leva-c-cHvNmv",style:{transform:"rotate(-90deg)",alignSelf:"center",fill:"#c4a3d5"},children:ue.jsx("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"})})]})})},I.currentRepo?I.currentRepo.id:null)})}const gJ=function({activeAtom:n,run:e,setGrid:t,setAxes:r,setWire:i,setSolid:a,compiledBom:o}){let s={};const l=QC(),u=QC(),c=QC(),[h,d]=j.useState(!0);j.useEffect(()=>{const v=setTimeout(()=>{d(!1)},0);return()=>clearTimeout(v)},[]),n!==null&&(s=n.createLevaInputs()),n.atomType=="Molecule"&&(o=n.createLevaBom());const f=j.useMemo(()=>({...o}),[o]),p=j.useMemo(()=>({...s}),[s]);return fb(()=>({description:{label:"Description",value:n.description,rows:6,disabled:!1}}),{store:l},[n]),fb(()=>f,{store:c},[n]),fb(()=>p,{store:l},[n]),fb("Grid",{grid:{value:!0,label:"Grid",onChange:v=>{t(v)}},axes:{value:!0,label:"Axes",onChange:v=>{r(v)}},wire:{value:!0,label:"Output Wire",onChange:v=>{i(v)}},solid:{value:!0,label:"Solid",onChange:v=>{a(v)}}},{store:u}),j.useEffect(()=>()=>{l.dispose()},[n]),ue.jsxs(ue.Fragment,{children:[" ",ue.jsx("div",{className:e?"paramEditorDivRun":"paramEditorDiv",children:ue.jsx(eA,{store:l,neverHide:!0,collapsed:{collapsed:h,onChange:v=>{d(v)}},hideCopyButton:!0,fill:!0,titleBar:{title:n.name||I.currentRepo.name,drag:!1},theme:{colors:{elevation1:"#3F4243",elevation2:"var(--bg-color)",elevation3:"#C4A3D5",highlight1:"#C4A3D5",highlight2:"#ededed",highlight3:"#ededed",accent1:"#C4A3D5",accent2:"#88748F",accent3:"#88748F",vivid1:"red"}}})}),ue.jsx("div",{className:e?"gridEditorDivRun":"gridEditorDiv",children:ue.jsx(eA,{store:u,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Render Settings",drag:!1},theme:{colors:{elevation1:"#3F4243",elevation2:"var(--bg-color)",elevation3:"#C4A3D5",highlight1:"#C4A3D5",highlight2:"#ededed",highlight3:"#ededed",accent1:"#C4A3D5",accent2:"#88748F",accent3:"#88748F",vivid1:"red"}}})}),n.atomType=="Molecule"?ue.jsx("div",{className:e?"bomEditorDivRun":"bomEditorDiv",children:ue.jsx(eA,{store:c,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Bill of Materials",drag:!1},theme:{colors:{elevation1:"#3F4243",elevation2:"var(--bg-color)",elevation3:"#C4A3D5",highlight1:"#C4A3D5",highlight2:"#ededed",highlight3:"#ededed",accent1:"#C4A3D5",accent2:"#88748F",accent3:"#88748F",vivid1:"red"}}})}):null]})};function vJ(n){const e=r=>{I.cad.visExport(n.activeAtom.uniqueID,n.activeAtom.uniqueID,r).then(i=>{I.cad.downExport(n.activeAtom.uniqueID,r).then(a=>{W$.saveAs(a,I.currentMolecule.name+"."+r.toLowerCase())}).catch("Error downloading export file")}).catch("Error creating export geometry")},t=n.dialogContent;return ue.jsx(ue.Fragment,{children:ue.jsxs("dialog",{open:n.shareDialog,style:{display:"flex"},className:"share-dialog",children:[t=="share"?ue.jsxs("div",{style:{display:"flex",margin:"10px"},children:[ue.jsx("p",{children:"Use this link to share this project:"}),ue.jsxs("a",{style:{margin:"16px"},href:"/run/"+I.currentRepo.id,target:"_blank",children:["/run/",I.currentRepo.id]})]}):t=="export"?ue.jsxs("div",{style:{display:"flex",margin:"10px"},children:[ue.jsx("p",{children:"Export as:"}),ue.jsxs("button",{autoFocus:!0,onClick:()=>e("STL"),children:[" ","STL"]}),ue.jsxs("button",{autoFocus:!0,onClick:()=>e("STEP"),children:[" ","STEP"]}),ue.jsxs("button",{autoFocus:!0,onClick:()=>e("SVG"),children:[" ","SVG"]})]}):null,ue.jsx("a",{className:"closeButton",onClick:()=>n.setShareDialog(!1)})]})})}let B8e=ue.jsx("svg",{fill:"#c4a3d5",height:"30px",width:"30px",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 227.216 227.216",xmlSpace:"preserve",children:ue.jsx("path",{d:`M175.897,141.476c-13.249,0-25.11,6.044-32.98,15.518l-51.194-29.066c1.592-4.48,2.467-9.297,2.467-14.317
c0-5.019-0.875-9.836-2.467-14.316l51.19-29.073c7.869,9.477,19.732,15.523,32.982,15.523c23.634,0,42.862-19.235,42.862-42.879
C218.759,19.229,199.531,0,175.897,0C152.26,0,133.03,19.229,133.03,42.865c0,5.02,0.874,9.838,2.467,14.319L84.304,86.258
c-7.869-9.472-19.729-15.514-32.975-15.514c-23.64,0-42.873,19.229-42.873,42.866c0,23.636,19.233,42.865,42.873,42.865
c13.246,0,25.105-6.042,32.974-15.513l51.194,29.067c-1.593,4.481-2.468,9.3-2.468,14.321c0,23.636,19.23,42.865,42.867,42.865
c23.634,0,42.862-19.23,42.862-42.865C218.759,160.71,199.531,141.476,175.897,141.476z M175.897,15
c15.363,0,27.862,12.5,27.862,27.865c0,15.373-12.499,27.879-27.862,27.879c-15.366,0-27.867-12.506-27.867-27.879
C148.03,27.5,160.531,15,175.897,15z M51.33,141.476c-15.369,0-27.873-12.501-27.873-27.865c0-15.366,12.504-27.866,27.873-27.866
c15.363,0,27.861,12.5,27.861,27.866C79.191,128.975,66.692,141.476,51.33,141.476z M175.897,212.216
c-15.366,0-27.867-12.501-27.867-27.865c0-15.37,12.501-27.875,27.867-27.875c15.363,0,27.862,12.505,27.862,27.875
C203.759,199.715,191.26,212.216,175.897,212.216z`})}),z8e=ue.jsx("svg",{width:"35px",height:"35px",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:ue.jsx("path",{d:"M11.245 4.174C11.4765 3.50808 11.5922 3.17513 11.7634 3.08285C11.9115 3.00298 12.0898 3.00298 12.238 3.08285C12.4091 3.17513 12.5248 3.50808 12.7563 4.174L14.2866 8.57639C14.3525 8.76592 14.3854 8.86068 14.4448 8.93125C14.4972 8.99359 14.5641 9.04218 14.6396 9.07278C14.725 9.10743 14.8253 9.10947 15.0259 9.11356L19.6857 9.20852C20.3906 9.22288 20.743 9.23007 20.8837 9.36432C21.0054 9.48051 21.0605 9.65014 21.0303 9.81569C20.9955 10.007 20.7146 10.2199 20.1528 10.6459L16.4387 13.4616C16.2788 13.5829 16.1989 13.6435 16.1501 13.7217C16.107 13.7909 16.0815 13.8695 16.0757 13.9507C16.0692 14.0427 16.0982 14.1387 16.1563 14.3308L17.506 18.7919C17.7101 19.4667 17.8122 19.8041 17.728 19.9793C17.6551 20.131 17.5108 20.2358 17.344 20.2583C17.1513 20.2842 16.862 20.0829 16.2833 19.6802L12.4576 17.0181C12.2929 16.9035 12.2106 16.8462 12.1211 16.8239C12.042 16.8043 11.9593 16.8043 11.8803 16.8239C11.7908 16.8462 11.7084 16.9035 11.5437 17.0181L7.71805 19.6802C7.13937 20.0829 6.85003 20.2842 6.65733 20.2583C6.49056 20.2358 6.34626 20.131 6.27337 19.9793C6.18915 19.8041 6.29123 19.4667 6.49538 18.7919L7.84503 14.3308C7.90313 14.1387 7.93218 14.0427 7.92564 13.9507C7.91986 13.8695 7.89432 13.7909 7.85123 13.7217C7.80246 13.6435 7.72251 13.5829 7.56262 13.4616L3.84858 10.6459C3.28678 10.2199 3.00588 10.007 2.97101 9.81569C2.94082 9.65014 2.99594 9.48051 3.11767 9.36432C3.25831 9.23007 3.61074 9.22289 4.31559 9.20852L8.9754 9.11356C9.176 9.10947 9.27631 9.10743 9.36177 9.07278C9.43726 9.04218 9.50414 8.99359 9.55657 8.93125C9.61593 8.86068 9.64887 8.76592 9.71475 8.57639L11.245 4.174Z",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),U8e=ue.jsx("svg",{width:"45px",height:"45px",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:ue.jsx("path",{d:"M7 5C7 3.89543 7.89543 3 9 3C10.1046 3 11 3.89543 11 5C11 5.74028 10.5978 6.38663 10 6.73244V14.0396H11.7915C12.8961 14.0396 13.7915 13.1441 13.7915 12.0396V10.7838C13.1823 10.4411 12.7708 9.78837 12.7708 9.03955C12.7708 7.93498 13.6662 7.03955 14.7708 7.03955C15.8753 7.03955 16.7708 7.93498 16.7708 9.03955C16.7708 9.77123 16.3778 10.4111 15.7915 10.7598V12.0396C15.7915 14.2487 14.0006 16.0396 11.7915 16.0396H10V17.2676C10.5978 17.6134 11 18.2597 11 19C11 20.1046 10.1046 21 9 21C7.89543 21 7 20.1046 7 19C7 18.2597 7.4022 17.6134 8 17.2676V6.73244C7.4022 6.38663 7 5.74028 7 5Z",fill:"#c4a3d5"})}),j8e=ue.jsxs("svg",{width:"30px",height:"30px",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[ue.jsx("path",{d:"M10.5 11L17 11",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),ue.jsx("path",{d:"M7 11H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),ue.jsx("path",{d:"M7 7.5H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),ue.jsx("path",{d:"M7 14.5H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),ue.jsx("path",{d:"M17 14.5H16M10.5 14.5H13.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),ue.jsx("path",{d:"M17 7.5H14M10.5 7.5H11.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),ue.jsx("path",{d:"M21 7V6.37006C21 5.17705 21 4.58055 20.842 4.09946C20.5425 3.18719 19.8468 2.47096 18.9606 2.16261C18.4933 2 17.9139 2 16.755 2H7.24502C6.08614 2 5.50671 2 5.03939 2.16261C4.15322 2.47096 3.45748 3.18719 3.15795 4.09946C3 4.58055 3 5.17705 3 6.37006V15M21 11V20.3742C21 21.2324 20.015 21.6878 19.3919 21.1176C19.0258 20.7826 18.4742 20.7826 18.1081 21.1176L17.625 21.5597C16.9834 22.1468 16.0166 22.1468 15.375 21.5597C14.7334 20.9726 13.7666 20.9726 13.125 21.5597C12.4834 22.1468 11.5166 22.1468 10.875 21.5597C10.2334 20.9726 9.26659 20.9726 8.625 21.5597C7.98341 22.1468 7.01659 22.1468 6.375 21.5597L5.8919 21.1176C5.52583 20.7826 4.97417 20.7826 4.6081 21.1176C3.985 21.6878 3 21.2324 3 20.3742V19",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"})]}),H8e=ue.jsx("svg",{width:"30px",height:"30px",fill:"none",viewBox:"0 0 23 23",xmlns:"http://www.w3.org/2000/svg",children:ue.jsx("path",{fill:"#c4a3d5",d:"M8.71,7.71,11,5.41V15a1,1,0,0,0,2,0V5.41l2.29,2.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42l-4-4a1,1,0,0,0-.33-.21,1,1,0,0,0-.76,0,1,1,0,0,0-.33.21l-4,4A1,1,0,1,0,8.71,7.71ZM21,14a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v4a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V15A1,1,0,0,0,21,14Z"})});function V8e(n){let[e,t]=j.useState(!1),[r,i]=j.useState(""),a=n.authorizedUserOcto;var o=mm();const s=function(h){var d=I.currentRepo.owner.login,f=I.currentRepo.name;document.getElementById("Star-button").style.backgroundColor="gray",h.rest.activity.starRepoForAuthenticatedUser({owner:d,repo:f}).then(()=>{console.log("starred")})},l=async function(h){var d=I.currentRepo.owner.login,f=I.currentRepo.name;h.request("GET /repos/{owner}/{repo}",{owner:d,repo:f}).then(p=>{h.rest.repos.createFork({owner:d,repo:f}).then(()=>{var v=I.currentUser;h.request("GET /repos/{owner}/{repo}",{owner:v,repo:f}).then(y=>{I.currentRepo=y.data,h.rest.repos.replaceAllTopics({owner:v,repo:I.currentRepo.name,names:["abundance-project"]}),o(`/${I.currentRepo.id}`)})})})},u=function(){n.tryLogin().then(h=>{s(h)})},c=function(){n.tryLogin().then(h=>{l(h)})};return ue.jsxs(ue.Fragment,{children:[e?ue.jsx(vJ,{setShareDialog:t,dialogContent:r,activeAtom:n.activeAtom}):null,ue.jsxs("div",{className:"run-navigation",children:[ue.jsx("button",{onClick:()=>{i("share"),t(!0)},className:" run-navigation-button",id:"Share-button",children:B8e}),ue.jsx("button",{className:" run-navigation-button",id:"Fork-button",onClick:()=>{a?l(a):c()},children:U8e}),ue.jsx("button",{className:" run-navigation-button",id:"Star-button",onClick:()=>{a?s(a):u()},children:z8e}),ue.jsx("button",{onClick:()=>{i("export"),t(!0)},className:" run-navigation-button",id:"Export-button",children:H8e}),ue.jsx("button",{className:" run-navigation-button",id:"Bill-button",onClick:()=>{console.log("open compiled bill of materials ")},children:j8e})]})]})}function W8e(){const[n,e]=j.useState({width:void 0,height:void 0});return j.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),n}function q8e(n){const e=j.useRef(500);let t=n.displayProps.mesh,r=n.displayProps.wireMesh;const[i,a]=j.useState(!0),[o,s]=j.useState(!0),[l,u]=j.useState(!1),[c,h]=j.useState(!0),[d,f]=j.useState(!0),p=n.props.authorizedUserOcto,v=n.props.setActiveAtom,y=n.props.activeAtom,g=n.props.tryLogin,w=W8e();mm();const{id:b}=aV();return j.useEffect(()=>{I.canvas=e,I.c=e.current.getContext("2d");var m=new fu;m.request("GET /repositories/:id",{id:b}).then(x=>{I.currentRepo=x.data,(!I.loadedRepo||I.currentRepo.name!==I.loadedRepo.name)&&(I.topLevelMolecule=new uy({x:0,y:0,topLevel:!0,atomType:"Molecule"}),I.currentMolecule=I.topLevelMolecule,n.props.loadProject(I.currentRepo))}),I.currentRepo&&I.currentRepo.owner.login==I.currentUser&&u(!0)},[]),ue.jsxs(ue.Fragment,{children:[ue.jsx("canvas",{style:{display:"none"},ref:e,id:"flow-canvas",tabIndex:0}),ue.jsx(mJ,{run:!0,authorizedUserOcto:p,isItOwned:l}),y?ue.jsx(gJ,{run:!0,setActiveAtom:v,activeAtom:y,setGrid:a,setAxes:s,setWire:h,setSolid:f}):null,ue.jsx(V8e,{authorizedUserOcto:p,tryLogin:g,activeAtom:y}),I.currentRepo?ue.jsxs("div",{className:"info_run_div",children:[ue.jsx("p",{children:"Project Name: "+I.currentRepo.name}),ue.jsx("p",{children:"Repo Owner: "+I.currentRepo.owner.login})]}):null,ue.jsx("div",{className:"runContainer",children:ue.jsx("div",{className:"jscad-container",style:{width:w.width,height:w.height},children:ue.jsx("section",{id:"threeDView",style:{height:w.height},children:r?ue.jsxs(cJ,{gridParam:i,axesParam:o,outdatedMesh:n.displayProps.outdatedMesh,children:[c?ue.jsx(pJ,{mesh:r}):null,ue.jsx(fJ,{mesh:t,isSolid:d,setOutdatedMesh:n.displayProps.setOutdatedMesh})]}):ue.jsx("div",{style:{display:"flex",alignItems:"center",fontSize:"1em"},children:"Loading..."})})})})]})}function G8e(n){let e=n.currentMoleculeTop,[t,r]=j.useState(!1);const i=mm(),a=[{id:"Open",buttonFunc:()=>{i("/")},icon:"Open.svg"},{id:"GitHub",buttonFunc:()=>{window.open(I.currentRepo.html_url)},icon:"GitHub.svg"},{id:"Read Me",buttonFunc:()=>{var u=I.currentRepo.html_url+"/blob/master/README.md";window.open(u)},icon:"Open.svg"},{id:"Bill of Materials",buttonFunc:()=>{var u=I.currentRepo.html_url+"/blob/master/BillOfMaterials.md";window.open(u)},icon:"Open.svg"},{id:"Share",buttonFunc:()=>{r(!0)},icon:"Open.svg"},{id:"Save Project",buttonFunc:()=>{n.setSavePopUp(!0),n.saveProject(n.setSaveState)},icon:"Open.svg"},{id:"Pull Request",buttonFunc:()=>{window.open("https://github.com/"+I.currentRepo.full_name+"/compare/"+I.currentRepo.default_branch+"..."+I.currentRepo.owner.login+":"+I.currentRepo.default_branch)},icon:"Export.svg"},{id:"Export",buttonFunc:()=>{n.setExportPopUp(!0)},icon:"Open.svg"},{id:"Delete Project",buttonFunc:()=>{var u=I.currentRepo.html_url+"/settings";window.open(u)},icon:"Open.svg"}],o=()=>ue.jsx(ue.Fragment,{children:ue.jsx("button",{className:"nav-bar go-up-button menu-nav-button",onClick:()=>{I.currentMolecule.goToParentMolecule(),n.setActiveAtom(I.currentMolecule)},children:ue.jsx("img",{className:"nav-img thumnail-logo",src:"/imgs/Go Up.svg",title:""},"")})}),s=u=>{if(u.saveState===100){var c=2e3;setTimeout(function(){u.setSavePopUp(!1)},c)}return ue.jsx(ue.Fragment,{children:ue.jsx("div",{className:"save-bar",children:ue.jsx("div",{className:"progress",children:ue.jsx("div",{className:"progress-done","data-done":"70",style:{width:u.saveState+"%",opacity:"1"},children:u.saveState!==100?u.saveState+"%":"Project Saved!"})})})})},l=u=>{const[c,h]=j.useState(!1),d=j.useRef();return j.useEffect(()=>{const f=p=>{c&&d.current&&!d.current.contains(p.target)&&h(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[c]),ue.jsx(ue.Fragment,{children:ue.jsxs("nav",{ref:d,className:"navbar",children:[ue.jsx("button",{className:"toggle menu-nav-button",onClick:()=>h(f=>!f),children:c?ue.jsx("img",{className:`thumnail-logo nav-img ${u.currentMoleculeTop?"":" rotati-right"}`,src:"/imgs/three-menu.svg"}):ue.jsx("img",{className:`thumnail-logo nav-img  ${u.currentMoleculeTop?"rotati":" rotati-plus "}`,src:"/imgs/three-menu.svg"})}),ue.jsx("ul",{className:`menu-nav${c?" show-menu":""}`,children:a.map((f,p)=>ue.jsx("button",{className:"menu-nav-button",children:ue.jsx("img",{className:" thumnail-logo",alt:f,src:"/imgs/"+f.id+".svg",title:f.id+"-button",onClick:f.buttonFunc},f.id)},f.id))})]})})};return ue.jsxs(ue.Fragment,{children:[n.savePopUp?ue.jsx(s,{saveState:n.saveState,savePopUp:n.savePopUp,setSavePopUp:n.setSavePopUp}):null,t?ue.jsx(vJ,{setShareDialog:r}):null,e?ue.jsx(o,{}):null,ue.jsx(l,{currentMoleculeTop:e})]})}const $8e=j.memo(G8e);function X8e(n){return this.startDeg+this.rotateUnit*n}function Y8e(n){return-(this.rotateDeg(n)+this.unskewDeg)}function Z8e(n){var e=-(n.totalAngle-180)/2,t={top:e,left:e-90,right:e+90,bottom:e+180};return n.start!==void 0?n.start:t[n.position]}const J8e=3;function K8e(n,e){var t=n*n*2;return Math.sqrt(t)*e+J8e}function Q8e(n){var e=n*2,t=-e/2;return e+="px",t+="px",{width:e,height:e,marginLeft:t,marginTop:t}}function e9e(n){var e=n.diameter,t=-n.diameter/2;return e+="px",t+="px",{width:e,height:e,marginLeft:t,marginTop:t}}const t9e=10;function n9e(n){var e=n.diameter,t=-n.diameter/2;return e+="px",t+="px",{width:e,height:e,marginRight:t,marginBottom:t}}function r9e(n){var e=n.diameter/2+"px";return{width:e,height:e}}const i9e=.41;function a9e(n){return n*i9e-t9e+"px"}function d3(n){this._config=n;var e=this.config=n,t=e.menus.length,r=e.totalAngle===360?t:t-1;this.radius=n.diameter/2,this.coverRadius=K8e(this.radius,n.percent),this.clickZoneRadius=this.radius-this.coverRadius,this.listSize=r9e(n),this.clickZoneSize=n9e(n),this.menuSize=e9e(n),this.coverSize=Q8e(this.coverRadius),this.startDeg=Z8e(n),this.centralDeg=(e.totalAngle-e.spaceDeg*r)/t,this.rotateUnit=this.centralDeg+e.spaceDeg,this.skewDeg=90-this.centralDeg,this.unskewDeg=-(90-this.centralDeg/2),this.textTop=a9e(this.clickZoneRadius)}d3.prototype={constructor:d3,rotateDeg:X8e,horizontalDeg:Y8e};function o9e(n){this._config.menus.forEach(function(e,t){this._createList(n,e,t)},this)}function s9e(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function l9e(n){this.style.removeProperty(n)}function u9e(n,e,t){this.style.setProperty(n,e,t)}function c9e(n,e,t){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}function rr(n,e,t,r){var i;return arguments.length>1?(t==null?l9e:typeof t=="function"?c9e:u9e).call(n,e,t,""):s9e(i=n).getComputedStyle(i,null).getPropertyValue(e)}function h9e(n,e,t){var r=document.createElement("li");rr(r,"width",this._calc.listSize.width),rr(r,"height",this._calc.listSize.height),rr(r,"transform","rotate("+this._calc.rotateDeg(t)+"deg) skew("+this._calc.skewDeg+"deg)"),n.appendChild(r),this._createAnchor(r,e,t)}function yJ(n){return n.trim().split(/^|\s+/)}function QO(n){return n.classList||new bJ(n)}function bJ(n){this._node=n,this._names=yJ(n.getAttribute("class")||"")}bJ.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function xJ(n,e){for(var t=QO(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function wJ(n,e){for(var t=QO(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function d9e(n){xJ(this,n)}function f9e(n){wJ(this,n)}function p9e(n,e){(e.apply(this,arguments)?xJ:wJ)(this,n)}function Au(n,e,t){var r=yJ(e+"");if(arguments.length<2){for(var i=QO(this),a=-1,o=r.length;++a<o;)if(!i.contains(r[a]))return!1;return!0}(typeof t=="function"?p9e:t?d9e:f9e).call(n,r,t)}var m9e={_current:0,getNew:function(){return this._current++,this._current}};function jh(n,e,t,r){var i=n,a="sheetStyles",o=document.head||document.getElementsByTagName("head")[0],s=document.getElementById(a)||document.createElement("style");s.id=a;var l="s-S"+m9e.getNew();return i.className+=" "+l,s.innerHTML+=" ."+l+(r?":"+r:"")+"{"+e+":"+t+"}",o.appendChild(s),this}function nc(n,e,t,r){n.addEventListener(e,function(i){t.call(this,i,r)})}function g9e(){var n=this._container;Au(n,"circular-menu",!0),rr(n,"width",this._calc.menuSize.width),rr(n,"height",this._calc.menuSize.height),rr(n,"margin-top",this._calc.menuSize.marginTop),rr(n,"margin-left",this._calc.menuSize.marginLeft);var e=this;nc(n,"click",function(r){r.toElement===n&&e._cMenu.hide()}),setTimeout(function(){rr(n,"display","block")},100),jh(n,"width",this._calc.coverSize.width,"after"),jh(n,"height",this._calc.coverSize.height,"after"),jh(n,"margin-left",this._calc.coverSize.marginLeft,"after"),jh(n,"margin-top",this._calc.coverSize.marginTop,"after"),jh(n,"border","3px solid "+this._config.pageBackground,"after");var t=n.appendChild(document.createElement("ul"));this._createLists(t)}function v9e(n){return n instanceof Array&&n.length!==0}function W8(n){return n instanceof Function?n():!!n}function y9e(n,e){e&&(e instanceof Object?(n.href=e.url,n.target=e.blank?"_blank":""):n.href=e)}var q8=null;function b9e(n,e,t){var r=this,i=null,a=document.createElement("a");y9e(a,e.href),a.setDisabled=function(){Au(a,"disabled",W8(e.disabled))},this._anchors.push(a),rr(a,"width",this._calc.clickZoneSize.width),rr(a,"height",this._calc.clickZoneSize.height),rr(a,"right",this._calc.clickZoneSize.marginRight),rr(a,"bottom",this._calc.clickZoneSize.marginBottom),rr(a,"transform","skew("+-this._calc.skewDeg+"deg) rotate("+this._calc.unskewDeg+"deg) scale(1)"),Au(a,"disabled",W8(e.disabled));var o=this._config.percent*100+"%";jh(a,"background","radial-gradient(transparent "+o+", "+this._config.background+" "+o+")"),jh(a,"background","radial-gradient(transparent "+o+", "+this._config.backgroundHover+" "+o+")","hover");function s(u,c){c.click&&c.click.call(this,u,c),r._config.hideAfterClick&&(r._cMenu.hide(),r._cMenu._pMenu&&r._cMenu._pMenu.hide(),l&&l.hide())}if(nc(a,"mouseenter",function(){var u=document.createElement("div");u.textContent=e.icon,u.classList.add("tooltip"),u.id=e.icon+"text";const c=u.textContent.length*2.7;document.querySelector("body").appendChild(u),rr(u,"top",r._container.offsetTop+r._calc.radius-10+"px"),rr(u,"left",r._container.offsetLeft+r._calc.radius-c+"px")}),nc(a,"click",s,e),nc(a,"mouseleave",function(){document.getElementById(e.icon+"text").remove()}),n.appendChild(a),this._createHorizontal(a,e,t),v9e(e.menus)){var l=this._createSubMenu(r,e.menus,t);let u=!1;nc(a,"mouseenter",function(){u=!0,q8=setTimeout(function(){u&&l.styles({top:r._container.offsetTop+r._calc.radius+"px",left:r._container.offsetLeft+r._calc.radius+"px"}).show()},400)}),nc(a,"mouseleave",function(c){l._container.contains(c.toElement)||(u=!1,i=setTimeout(function(){l.hide()},100))}),nc(l._container,"mouseenter",function(){clearTimeout(q8),clearTimeout(i)}),nc(l._container,"mouseleave",function(c){u=!1,(!a.contains(c.toElement)||c.toElement.children[0]===a)&&l.hide()})}}const x9e=.65,w9e=.2,G8=13;function f3(n){return n===void 0?!1:typeof n=="string"?n!=="":n.length&&n[0]!==""}function S9e(n){return typeof n=="string"?n:n[0]}function E9e(n){return typeof n=="string"?null:n[1]}function _9e(n,e,t){if(f3(e.icon)){var r=document.createElement("span"),i=S9e(e.icon),a=E9e(e.icon);Au(r,i+" cm-icon",!0),rr(r,"color",a);var o=this._calc.clickZoneRadius*x9e-G8+"px",s=this._calc.clickZoneRadius*w9e-G8+"px";rr(r,"width",o),rr(r,"height",o),rr(r,"font-size",o),rr(r,"margin-top",s),n.appendChild(r)}}const C9e="3px",A9e="-3px";function T9e(n,e,t){var r=document.createElement("span");r.textContent=e.title,Au(r,"text",!0),rr(r,"margin-top",f3(e.icon)?C9e:this._calc.textTop),rr(r,"top",f3(e.icon)?A9e:0),n.appendChild(r)}function M9e(n,e,t){var r=document.createElement("div");Au(r,"horizontal",!0),this._config.horizontal&&rr(r,"transform","rotate("+this._calc.horizontalDeg(t)+"deg)"),n.appendChild(r),this._createIcon(r,e,t),this._createText(r,e,t)}function SJ(){var n={},e=!1,t=0,r=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(e=arguments[0],t++);for(var i=function(o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e&&Object.prototype.toString.call(o[s])==="[object Object]"?n[s]=extend(!0,n[s],o[s]):n[s]=o[s])};t<r;t++){var a=arguments[t];i(a)}return n}const D9e=5/3,k9e=.45,N9e=.618;function O9e(n,e,t){var r=document.createElement("div");Au(r,"circular-sub-menu",!0),this._container.parentNode.insertBefore(r,this._container);var i=this._calc.centralDeg*N9e*e.length,a=this._calc.rotateDeg(t)-i/2+this._calc.centralDeg/2,o=SJ(this._config,{totalAngle:i,percent:k9e,diameter:this._config.diameter*D9e,start:a,animation:"into",menus:e});return new Dv(r,n._cMenu).config(o)}function p3(n,e){this._cMenu=n,this._container=n._container,this._config=e,this._calc=new d3(e),this._anchors=[]}p3.prototype={constructor:p3,createMenu:g9e,_createLists:o9e,_createList:h9e,_createAnchor:b9e,_createText:T9e,_createHorizontal:M9e,_createIcon:_9e,_createSubMenu:O9e};const P9e={totalAngle:360,spaceDeg:0,background:"#323232",backgroundHover:"#515151",pageBackground:"transparent",percent:.32,diameter:300,position:"top",horizontal:!0,animation:"into",hideAfterClick:!0};function R9e(n){return n=SJ(P9e,n),this._creator=new p3(this,n),this._creator.createMenu(),this}function I9e(n){!(n instanceof Array)||n.length!==2||(rr(this._container,"left",n[0]+"px"),rr(this._container,"top",n[1]+"px"))}function L9e(){this._creator._anchors.forEach(function(n){n.setDisabled()})}function F9e(n){return L9e.call(this),I9e.call(this,n),Au(this._container,"opened-nav",!0),this}function B9e(){return Au(this._container,"opened-nav",!1),this}function z9e(n){if(!n instanceof Object)return this;for(var e in n)n.hasOwnProperty(e)&&rr(this._container,e,n[e]);return this}function Dv(n,e){this._container=n,e&&(this._pMenu=e)}Dv.prototype={constructor:Dv,config:R9e,show:F9e,hide:B9e,styles:z9e};function U9e(n){return typeof n=="string"?new Dv(document.querySelector(n)):new Dv(n)}var rT=null,Hh;const j9e=(n,e)=>{rT=n;const t=i=>{var a=[];for(var o in I.availableTypes){var s=I.availableTypes[o];if(s.atomCategory===i){var l=new Object;l.title=`${s.atomType}`,l.icon=`${s.atomType}`,l.name=s.atomType,l.click=function(u,c){if(c.icon==="GitHubMolecule"){const h=parseInt(Hh._container.style.left,10),d=parseInt(Hh._container.style.top,10);I.lastClick=[h,d],e(!0)}else e(!1),u.target.id=c.name,r(u)},a.push(l)}}return a};Hh=U9e(rT.current).config({hideAfterClick:!0,percent:.15,menus:[{title:"Actions",icon:"Actions",menus:t("Actions")},{title:"Inputs",icon:"Inputs",menus:t("Inputs")},{title:"Tags",icon:"Tags",menus:t("Tags")},{title:"Import/Export",icon:"Import-Export",menus:t("ImportExport")},{title:"Shapes",icon:"Shapes",menus:t("Shapes")},{title:"Interactions",icon:"Interaction",menus:t("Interactions")}]}),document.getElementById("flow-canvas").addEventListener("contextmenu",i=>{i.preventDefault()}),rT.current.addEventListener("contextmenu",i=>{i.preventDefault()});function r(i){let a=i.target.id;const o=parseInt(Hh._container.style.left,10),s=parseInt(Hh._container.style.top,10);I.currentMolecule.placeAtom({x:I.pixelsToWidth(o),y:I.pixelsToHeight(s),parent:I.currentMolecule,atomType:a,uniqueID:I.generateUniqueID()},!0)}};function H9e(n){let e="";var[t,r]=j.useState([]),[i,a]=j.useState(!1);const o=j.useRef(null);function s(w,b){I.currentMolecule.loadGithubMoleculeByID(b.id),n.setSearchingGitHub(!1),r([])}const l=function(){var w=e+" topic:abundance-project "+o.current.value;new fu().request("GET /search/repositories",{q:w,per_page:50,headers:{accept:"application/vnd.github.mercy-preview+json"}}).then(b=>{let m=[];b.data.items.forEach(x=>{m.push(x)}),r(m),a(!1)})},u=function(w){w.key==="Enter"&&(a(!0),l())},c=function(w){e=w.target.value},[h,d]=j.useState(!1),[f,p]=j.useState({}),v=(w,b)=>{p(w),d(!0)},y=()=>{p({}),d(!1)},g=function(){return t.map((w,b)=>ue.jsx("li",{onClick:m=>s(m,w),onMouseEnter:()=>v(w),onMouseLeave:()=>y(),children:w.name},w.id))};return ue.jsx(ue.Fragment,{children:n.searchingGitHub?ue.jsxs("div",{className:"search-container",children:[ue.jsxs("div",{id:"git_search",style:{top:I.lastClick[1]+"px",left:I.lastClick[0]+"px"},children:[ue.jsx("input",{type:"text",id:"menuInput",onKeyDown:u,onChange:c,placeholder:"Search for atom..",className:"menu_search_canvas"}),ue.jsx("label",{htmlFor:"id_select",children:" Topic "}),ue.jsxs("select",{ref:o,id:"searchType",className:"menu_search_canvas",children:[" ",ue.jsx("option",{value:""},"empty-topic"),tw.map(w=>ue.jsx("option",{value:w.value,children:w.label},w.label))]}),ue.jsx(g,{})]}),h?ue.jsxs("div",{className:"GitProjectInfoPanel",style:{top:I.lastClick[1]-50+"px",left:I.lastClick[0]-350+"px"},children:[ue.jsxs("div",{className:"GitInfoLeft",children:[ue.jsx("img",{src:"/imgs/defaultThumbnail.svg"}),ue.jsxs("div",{style:{display:"flex"},children:[ue.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(.7)"},width:"16",height:"16",children:ue.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})}),ue.jsx("p",{children:f.stargazers_count})]})]}),ue.jsxs("div",{className:"GitInfo",children:[ue.jsxs("span",{children:["Project Name: ",f.name]}),ue.jsxs("span",{children:["Owner: ",f.owner.login]}),ue.jsxs("span",{children:["Description: ",f.description||null]}),ue.jsx("span",{children:"PLACEHOLDER FOR README"}),ue.jsx("span",{children:"Tags: PLACEHOLDER FOR tags or categories"})]})]}):null]}):null})}function EJ(){const n=document.getElementById("flow-canvas");n.width=window.innerWidth,n.height=window.innerHeight*.45}window.addEventListener("resize",()=>{EJ()},!1);const V9e=j.memo(function(n){let e=n.props.loadProject,t=n.props.setActiveAtom,r=n.props.shortCuts;const[i,a]=j.useState(!1),o=j.useRef(null),s=j.useRef(null);j.useEffect(()=>{I.canvas=o,I.c=o.current.getContext("2d"),(!I.loadedRepo||I.currentRepo.name!==I.loadedRepo.name)&&(I.topLevelMolecule=new uy({x:0,y:0,topLevel:!0,atomType:"Molecule"}),I.currentMolecule=I.topLevelMolecule,e(I.currentRepo)),I.currentMolecule.nodesOnTheScreen.forEach(v=>{v.update()})},[]);const l=()=>{I.c.clearRect(0,0,I.canvas.current.width,I.canvas.current.height),I.currentMolecule.nodesOnTheScreen.forEach(v=>{v.update()})},u=v=>{I.currentMolecule.nodesOnTheScreen.forEach(y=>{y.mouseMove(v.clientX,v.clientY)})},c=v=>{(v.key=="Backspace"||v.key=="Delete")&&(I.atomsSelected=[],I.currentMolecule.copy(),I.atomsSelected.forEach(y=>{I.currentMolecule.nodesOnTheScreen.forEach(g=>{g.uniqueID==y.uniqueID&&g.deleteNode()})})),(v.key=="Control"||v.key=="Meta")&&(I.ctrlDown=!0),I.ctrlDown&&r.hasOwnProperty([v.key])&&(v.preventDefault(),v.key=="c"&&(I.atomsSelected=[],I.currentMolecule.copy()),v.key=="v"&&I.atomsSelected.forEach(y=>{let g=I.generateUniqueID();y.uniqueID=g,y.atomType=="Molecule",y=I.currentMolecule.remapIDs(y),I.currentMolecule.placeAtom(y,!0)}),v.key=="g"?a(!0):I.currentMolecule.placeAtom({parentMolecule:I.currentMolecule,x:.5,y:.5,parent:I.currentMolecule,atomType:`${r[v.key]}`,uniqueID:I.generateUniqueID()},!0)),I.currentMolecule.nodesOnTheScreen.forEach(y=>{y.keyPress(v.key)})},h=v=>{(v.key=="Control"||v.key=="Meta")&&(I.ctrlDown=!1)},d=v=>{var y;if("which"in v?y=v.which==3:"button"in v&&(y=v.button==2),y){var g=!1;Hh.show([v.clientX,v.clientY],g);return}else{Hh.hide(),a(!1);var w=!1;I.currentMolecule.nodesOnTheScreen.forEach(b=>{let m;m=b.clickDown(v.clientX,v.clientY,w),m!==void 0&&(t(m),I.currentMolecule.selected=!1,w=!0)}),w||(t(I.currentMolecule),I.currentMolecule.selected=!0,I.currentMolecule.sendToRender())}},f=v=>{I.currentMolecule.nodesOnTheScreen.forEach(y=>{y.doubleClick(v.clientX,v.clientY)}),t(I.currentMolecule)},p=v=>{I.currentMolecule.nodesOnTheScreen.forEach(y=>{y.clickUp(v.clientX,v.clientY)}),I.currentMolecule.clickUp(v.clientX,v.clientY)};return j.useEffect(()=>{o.current.getContext("2d");let v;const y=()=>{l(),v=window.requestAnimationFrame(y)};return y(),()=>{window.cancelAnimationFrame(v)}},[l]),j.useEffect(()=>{EJ()},[]),j.useEffect(()=>{j9e(s,a)},[]),ue.jsxs(ue.Fragment,{children:[ue.jsx("canvas",{ref:o,id:"flow-canvas",tabIndex:0,onMouseMove:u,onMouseDown:d,onMouseUp:p,onDoubleClick:f,onKeyUp:h,onKeyDown:c}),ue.jsx("div",{children:ue.jsx("p",{className:"repo-name",style:{position:"absolute",zIndex:"5",top:"1%",right:"55px",color:"rgb(255 255 255 / 34%)"},children:I.currentRepo.name})}),ue.jsxs("div",{children:[ue.jsx("div",{id:"circle-menu1",className:"cn-menu1",ref:s}),ue.jsx(H9e,{searchingGitHub:i,setSearchingGitHub:a})]})]})});function W9e(){const[n,e]=j.useState({width:0,height:0});return j.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),n}const q9e=j.memo(function(n){let e=n.displayProps.mesh,t=n.displayProps.wireMesh;const r=W9e();return ue.jsxs(ue.Fragment,{children:[ue.jsxs("div",{className:"jscad-container",style:{width:r.width*1,height:r.height*.6},children:[ue.jsx("section",{id:"threeDView",style:{width:r.width*1,height:r.height*.6},children:t?ue.jsxs(cJ,{gridParam:n.props.gridParam,axesParam:n.props.axesParam,outdatedMesh:n.displayProps.outdatedMesh,children:[n.props.wireParam?ue.jsx(pJ,{mesh:t}):null,ue.jsx(fJ,{mesh:e,isSolid:n.props.solidParam,setOutdatedMesh:n.displayProps.setOutdatedMesh})]}):ue.jsx("div",{style:{display:"flex",alignItems:"center",fontSize:"2em"},children:"Loading..."})}),ue.jsxs("div",{className:"container arrow-up",children:[ue.jsx("input",{type:"checkbox",className:"custom"}),ue.jsx("div",{className:"dots"})]}),ue.jsx("div",{id:"viewer_bar"})]}),ue.jsx("div",{id:"bottom_bar"})]})});class Nn{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=rm(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),il.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=rm(this,e,t);let r=[];return this.decompose(e,t,r,0),il.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new w0(this),a=new w0(e);for(let o=t,s=t;;){if(i.next(o),a.next(o),o=0,i.lineBreak!=a.lineBreak||i.done!=a.done||i.value!=a.value)return!1;if(s+=i.value.length,i.done||s>=r)return!0}}iter(e=1){return new w0(this,e)}iterRange(e,t=this.length){return new _J(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new CJ(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Nn.empty:e.length<=32?new Br(e):il.from(Br.split(e,[]))}}class Br extends Nn{constructor(e,t=G9e(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let a=0;;a++){let o=this.text[a],s=i+o.length;if((t?r:s)>=e)return new $9e(i,s,r,o);i=s+1,r++}}decompose(e,t,r,i){let a=e<=0&&t>=this.length?this:new Br($8(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),s=cw(a.text,o.text.slice(),0,a.length);if(s.length<=32)r.push(new Br(s,o.length+a.length));else{let l=s.length>>1;r.push(new Br(s.slice(0,l)),new Br(s.slice(l)))}}else r.push(a)}replace(e,t,r){if(!(r instanceof Br))return super.replace(e,t,r);[e,t]=rm(this,e,t);let i=cw(this.text,cw(r.text,$8(this.text,0,e)),t),a=this.length+r.length-(t-e);return i.length<=32?new Br(i,a):il.from(Br.split(i,[]),a)}sliceString(e,t=this.length,r=`
`){[e,t]=rm(this,e,t);let i="";for(let a=0,o=0;a<=t&&o<this.text.length;o++){let s=this.text[o],l=a+s.length;a>e&&o&&(i+=r),e<l&&t>a&&(i+=s.slice(Math.max(0,e-a),t-a)),a=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let a of e)r.push(a),i+=a.length+1,r.length==32&&(t.push(new Br(r,i)),r=[],i=-1);return i>-1&&t.push(new Br(r,i)),t}}class il extends Nn{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let a=0;;a++){let o=this.children[a],s=i+o.length,l=r+o.lines-1;if((t?l:s)>=e)return o.lineInner(e,t,r,i);i=s+1,r=l+1}}decompose(e,t,r,i){for(let a=0,o=0;o<=t&&a<this.children.length;a++){let s=this.children[a],l=o+s.length;if(e<=l&&t>=o){let u=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!u?r.push(s):s.decompose(e-o,t-o,r,u)}o=l+1}}replace(e,t,r){if([e,t]=rm(this,e,t),r.lines<this.lines)for(let i=0,a=0;i<this.children.length;i++){let o=this.children[i],s=a+o.length;if(e>=a&&t<=s){let l=o.replace(e-a,t-a,r),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[i]=l,new il(c,this.length-(t-e)+r.length)}return super.replace(a,s,l)}a=s+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=rm(this,e,t);let i="";for(let a=0,o=0;a<this.children.length&&o<=t;a++){let s=this.children[a],l=o+s.length;o>e&&a&&(i+=r),e<l&&t>o&&(i+=s.sliceString(e-o,t-o,r)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof il))return 0;let r=0,[i,a,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,a+=t){if(i==o||a==s)return r;let l=this.children[i],u=e.children[a];if(l!=u)return r+l.scanIdentical(u,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let f of e)r+=f.lines;if(r<32){let f=[];for(let p of e)p.flatten(f);return new Br(f,t)}let i=Math.max(32,r>>5),a=i<<1,o=i>>1,s=[],l=0,u=-1,c=[];function h(f){let p;if(f.lines>a&&f instanceof il)for(let v of f.children)h(v);else f.lines>o&&(l>o||!l)?(d(),s.push(f)):f instanceof Br&&l&&(p=c[c.length-1])instanceof Br&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new Br(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>i&&d(),l+=f.lines,u+=f.length+1,c.push(f))}function d(){l!=0&&(s.push(c.length==1?c[0]:il.from(c,u)),u=-1,l=c.length=0)}for(let f of e)h(f);return d(),s.length==1?s[0]:new il(s,t)}}Nn.empty=new Br([""],0);function G9e(n){let e=-1;for(let t of n)e+=t.length+1;return e}function cw(n,e,t=0,r=1e9){for(let i=0,a=0,o=!0;a<n.length&&i<=r;a++){let s=n[a],l=i+s.length;l>=t&&(l>r&&(s=s.slice(0,r-i)),i<t&&(s=s.slice(t-i)),o?(e[e.length-1]+=s,o=!1):e.push(s)),i=l+1}return e}function $8(n,e,t){return cw(n,[""],e,t)}class w0{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Br?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],a=this.offsets[r],o=a>>1,s=i instanceof Br?i.text.length:i.children.length;if(o==(t>0?s:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Br){let l=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Br?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class _J{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new w0(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class CJ{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Nn.prototype[Symbol.iterator]=function(){return this.iter()},w0.prototype[Symbol.iterator]=_J.prototype[Symbol.iterator]=CJ.prototype[Symbol.iterator]=function(){return this});class $9e{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}function rm(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}let kp="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<kp.length;n++)kp[n]+=kp[n-1];function X9e(n){for(let e=1;e<kp.length;e+=2)if(kp[e]>n)return kp[e-1]<=n;return!1}function X8(n){return n>=127462&&n<=127487}const Y8=8205;function Oi(n,e,t=!0,r=!0){return(t?AJ:Y9e)(n,e,r)}function AJ(n,e,t){if(e==n.length)return e;e&&TJ(n.charCodeAt(e))&&MJ(n.charCodeAt(e-1))&&e--;let r=Ti(n,e);for(e+=Vo(r);e<n.length;){let i=Ti(n,e);if(r==Y8||i==Y8||t&&X9e(i))e+=Vo(i),r=i;else if(X8(i)){let a=0,o=e-2;for(;o>=0&&X8(Ti(n,o));)a++,o-=2;if(a%2==0)break;e+=2}else break}return e}function Y9e(n,e,t){for(;e>0;){let r=AJ(n,e-2,t);if(r<e)return r;e--}return 0}function TJ(n){return n>=56320&&n<57344}function MJ(n){return n>=55296&&n<56320}function Ti(n,e){let t=n.charCodeAt(e);if(!MJ(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return TJ(r)?(t-55296<<10)+(r-56320)+65536:t}function eP(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Vo(n){return n<65536?1:2}const m3=/\r\n?|\n/;var xa=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(xa||(xa={}));class yl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let a=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,a),i+=a):i+=o,r+=a}}iterChangedRanges(e,t=!1){g3(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new yl(e)}composeDesc(e){return this.empty?e:e.empty?this:DJ(this,e)}mapDesc(e,t=!1){return e.empty?this:v3(this,e,t)}mapPos(e,t=-1,r=xa.Simple){let i=0,a=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],l=this.sections[o++],u=i+s;if(l<0){if(u>e)return a+(e-i);a+=s}else{if(r!=xa.Simple&&u>=e&&(r==xa.TrackDel&&i<e&&u>e||r==xa.TrackBefore&&i<e||r==xa.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!s)return e==i||t<0?a:a+l;a+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return a}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let a=this.sections[r++],o=this.sections[r++],s=i+a;if(o>=0&&i<=t&&s>=e)return i<e&&s>t?"cover":!0;i=s}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new yl(e)}static create(e){return new yl(e)}}class ri extends yl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return g3(this,(t,r,i,a,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return v3(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,a=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s>=0){t[i]=s,t[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(Nn.empty);r.push(o?e.slice(a,a+o):Nn.empty)}a+=o}return new ri(t,r)}compose(e){return this.empty?e:e.empty?this:DJ(this,e,!0)}map(e,t=!1){return e.empty?this:v3(this,e,t,!0)}iterChanges(e,t=!1){g3(this,e,t)}get desc(){return yl.create(this.sections)}filter(e){let t=[],r=[],i=[],a=new kv(this);e:for(let o=0,s=0;;){let l=o==e.length?1e9:e[o++];for(;s<l||s==l&&a.len==0;){if(a.done)break e;let c=Math.min(a.len,l-s);Xi(i,c,-1);let h=a.ins==-1?-1:a.off==0?a.ins:0;Xi(t,c,h),h>0&&bc(r,t,a.text),a.forward(c),s+=c}let u=e[o++];for(;s<u;){if(a.done)break e;let c=Math.min(a.len,u-s);Xi(t,c,-1),Xi(i,c,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(c),s+=c}}return{changes:new ri(t,r),filtered:yl.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],a=[],o=0,s=null;function l(c=!1){if(!c&&!i.length)return;o<t&&Xi(i,t-o,-1);let h=new ri(i,a);s=s?s.compose(h.map(s)):h,i=[],a=[],o=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof ri){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),s=s?s.compose(c.map(s)):c}else{let{from:h,to:d=h,insert:f}=c;if(h>d||h<0||d>t)throw new RangeError(`Invalid change range ${h} to ${d} (in doc of length ${t})`);let p=f?typeof f=="string"?Nn.of(f.split(r||m3)):f:Nn.empty,v=p.length;if(h==d&&v==0)return;h<o&&l(),h>o&&Xi(i,h-o,-1),Xi(i,d-h,v),bc(a,i,p),o=d}}return u(e),l(!s),s}static empty(e){return new ri(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let a=e[i];if(typeof a=="number")t.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((o,s)=>s&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)t.push(a[0],0);else{for(;r.length<i;)r.push(Nn.empty);r[i]=Nn.of(a.slice(1)),t.push(a[0],r[i].length)}}}return new ri(t,r)}static createSet(e,t){return new ri(e,t)}}function Xi(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function bc(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Nn.empty);n.push(t)}}function g3(n,e,t){let r=n.inserted;for(let i=0,a=0,o=0;o<n.sections.length;){let s=n.sections[o++],l=n.sections[o++];if(l<0)i+=s,a+=s;else{let u=i,c=a,h=Nn.empty;for(;u+=s,c+=l,l&&r&&(h=h.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)s=n.sections[o++],l=n.sections[o++];e(i,u,a,c,h),i=u,a=c}}}function v3(n,e,t,r=!1){let i=[],a=r?[]:null,o=new kv(n),s=new kv(e);for(let l=-1;;)if(o.ins==-1&&s.ins==-1){let u=Math.min(o.len,s.len);Xi(i,u,-1),o.forward(u),s.forward(u)}else if(s.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(s.len<o.len||s.len==o.len&&!t))){let u=s.len;for(Xi(i,s.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(Xi(i,0,o.ins),a&&bc(a,i,o.text),l=o.i),o.forward(c),u-=c}s.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(s.ins==-1){let h=Math.min(c,s.len);u+=h,c-=h,s.forward(h)}else if(s.ins==0&&s.len<c)c-=s.len,s.next();else break;Xi(i,u,l<o.i?o.ins:0),a&&l<o.i&&bc(a,i,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&s.done)return a?ri.createSet(i,a):yl.create(i);throw new Error("Mismatched change set lengths")}}function DJ(n,e,t=!1){let r=[],i=t?[]:null,a=new kv(n),o=new kv(e);for(let s=!1;;){if(a.done&&o.done)return i?ri.createSet(r,i):yl.create(r);if(a.ins==0)Xi(r,a.len,0,s),a.next();else if(o.len==0&&!o.done)Xi(r,0,o.ins,s),i&&bc(i,r,o.text),o.next();else{if(a.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(a.len2,o.len),u=r.length;if(a.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Xi(r,l,c,s),i&&c&&bc(i,r,o.text)}else o.ins==-1?(Xi(r,a.off?0:a.len,l,s),i&&bc(i,r,a.textBit(l))):(Xi(r,a.off?0:a.len,o.off?0:o.ins,s),i&&!o.off&&bc(i,r,o.text));s=(a.ins>l||o.ins>=0&&o.len>l)&&(s||r.length>u),a.forward2(l),o.forward(l)}}}}class kv{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Nn.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Nn.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ed{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new ed(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return at.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return at.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return at.range(e.anchor,e.head)}static create(e,t,r){return new ed(e,t,r)}}class at{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:at.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new at([this.main],0)}addRange(e,t=!0){return at.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,at.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new at(e.ranges.map(t=>ed.fromJSON(t)),e.main)}static single(e,t=e){return new at([at.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let a=e[i];if(a.empty?a.from<=r:a.from<r)return at.normalized(e.slice(),t);r=a.to}return new at(e,t)}static cursor(e,t=0,r,i){return ed.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,t,r,i){let a=(r??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?ed.create(t,e,48|a):ed.create(e,t,(t>e?8:0)|a)}static normalized(e,t=0){let r=e[t];e.sort((i,a)=>i.from-a.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let a=e[i],o=e[i-1];if(a.empty?a.from<=o.to:a.from<o.to){let s=o.from,l=Math.max(a.to,o.to);i<=t&&t--,e.splice(--i,2,a.anchor>a.head?at.range(l,s):at.range(s,l))}}return new at(e,t)}}function kJ(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let tP=0;class Dt{constructor(e,t,r,i,a){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=tP++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}get reader(){return this}static define(e={}){return new Dt(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:nP),!!e.static,e.enables)}of(e){return new hw([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new hw(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new hw(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function nP(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class hw{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=tP++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,a=this.id,o=e[a]>>1,s=this.type==2,l=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?u=!0:((t=e[h.id])!==null&&t!==void 0?t:1)&1||c.push(e[h.id]);return{create(h){return h.values[o]=r(h),1},update(h,d){if(l&&d.docChanged||u&&(d.docChanged||d.selection)||y3(h,c)){let f=r(h);if(s?!Z8(f,h.values[o],i):!i(f,h.values[o]))return h.values[o]=f,1}return 0},reconfigure:(h,d)=>{let f,p=d.config.address[a];if(p!=null){let v=GS(d,p);if(this.dependencies.every(y=>y instanceof Dt?d.facet(y)===h.facet(y):y instanceof Fi?d.field(y,!1)==h.field(y,!1):!0)||(s?Z8(f=r(h),v,i):i(f=r(h),v)))return h.values[o]=v,0}else f=r(h);return h.values[o]=f,1}}}}function Z8(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function y3(n,e){let t=!1;for(let r of e)S0(n,r)&1&&(t=!0);return t}function Z9e(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),a=r.filter(l=>!(l&1)),o=n[e.id]>>1;function s(l){let u=[];for(let c=0;c<r.length;c++){let h=GS(l,r[c]);if(i[c]==2)for(let d of h)u.push(d);else u.push(h)}return e.combine(u)}return{create(l){for(let u of r)S0(l,u);return l.values[o]=s(l),1},update(l,u){if(!y3(l,a))return 0;let c=s(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=y3(l,r),h=u.config.facets[e.id],d=u.facet(e);if(h&&!c&&nP(t,h))return l.values[o]=d,0;let f=s(l);return e.compare(f,d)?(l.values[o]=d,0):(l.values[o]=f,1)}}}const J8=Dt.define({static:!0});class Fi{constructor(e,t,r,i,a){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=a,this.provides=void 0}static define(e){let t=new Fi(tP++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(J8).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let a=r.values[t],o=this.updateF(a,i);return this.compareF(a,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,J8.of({field:this,create:e})]}get extension(){return this}}const Vh={lowest:4,low:3,default:2,high:1,highest:0};function Ig(n){return e=>new NJ(e,n)}const qd={highest:Ig(Vh.highest),high:Ig(Vh.high),default:Ig(Vh.default),low:Ig(Vh.low),lowest:Ig(Vh.lowest)};class NJ{constructor(e,t){this.inner=e,this.prec=t}}class j_{of(e){return new b3(this,e)}reconfigure(e){return j_.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class b3{constructor(e,t){this.compartment=e,this.inner=t}}class qS{constructor(e,t,r,i,a,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=a,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],a=Object.create(null),o=new Map;for(let d of J9e(e,t,o))d instanceof Fi?i.push(d):(a[d.facet.id]||(a[d.facet.id]=[])).push(d);let s=Object.create(null),l=[],u=[];for(let d of i)s[d.id]=u.length<<1,u.push(f=>d.slot(f));let c=r==null?void 0:r.config.facets;for(let d in a){let f=a[d],p=f[0].facet,v=c&&c[d]||[];if(f.every(y=>y.type==0))if(s[p.id]=l.length<<1|1,nP(v,f))l.push(r.facet(p));else{let y=p.combine(f.map(g=>g.value));l.push(r&&p.compare(y,r.facet(p))?r.facet(p):y)}else{for(let y of f)y.type==0?(s[y.id]=l.length<<1|1,l.push(y.value)):(s[y.id]=u.length<<1,u.push(g=>y.dynamicSlot(g)));s[p.id]=u.length<<1,u.push(y=>Z9e(y,p,f))}}let h=u.map(d=>d(s));return new qS(e,o,h,s,l,a)}}function J9e(n,e,t){let r=[[],[],[],[],[]],i=new Map;function a(o,s){let l=i.get(o);if(l!=null){if(l<=s)return;let u=r[l].indexOf(o);u>-1&&r[l].splice(u,1),o instanceof b3&&t.delete(o.compartment)}if(i.set(o,s),Array.isArray(o))for(let u of o)a(u,s);else if(o instanceof b3){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;t.set(o.compartment,u),a(u,s)}else if(o instanceof NJ)a(o.inner,o.prec);else if(o instanceof Fi)r[s].push(o),o.provides&&a(o.provides,s);else if(o instanceof hw)r[s].push(o),o.facet.extensions&&a(o.facet.extensions,Vh.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(u,s)}}return a(n,Vh.default),r.reduce((o,s)=>o.concat(s))}function S0(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function GS(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const OJ=Dt.define(),x3=Dt.define({combine:n=>n.some(e=>e),static:!0}),PJ=Dt.define({combine:n=>n.length?n[0]:void 0,static:!0}),RJ=Dt.define(),IJ=Dt.define(),LJ=Dt.define(),FJ=Dt.define({combine:n=>n.length?n[0]:!1});class Dl{constructor(e,t){this.type=e,this.value=t}static define(){return new K9e}}class K9e{of(e){return new Dl(this,e)}}class Q9e{constructor(e){this.map=e}of(e){return new dn(this,e)}}class dn{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new dn(this.type,t)}is(e){return this.type==e}static define(e={}){return new Q9e(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let a=i.map(t);a&&r.push(a)}return r}}dn.reconfigure=dn.define();dn.appendConfig=dn.define();class oi{constructor(e,t,r,i,a,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=a,this.scrollIntoView=o,this._doc=null,this._state=null,r&&kJ(r,t.newLength),a.some(s=>s.type==oi.time)||(this.annotations=a.concat(oi.time.of(Date.now())))}static create(e,t,r,i,a,o){return new oi(e,t,r,i,a,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(oi.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}oi.time=Dl.define();oi.userEvent=Dl.define();oi.addToHistory=Dl.define();oi.remote=Dl.define();function e7e(n,e){let t=[];for(let r=0,i=0;;){let a,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))a=n[r++],o=n[r++];else if(i<e.length)a=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<a?t.push(a,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function BJ(n,e,t){var r;let i,a,o;return t?(i=e.changes,a=ri.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),a=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(a):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:dn.mapEffects(n.effects,i).concat(dn.mapEffects(e.effects,a)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function w3(n,e,t){let r=e.selection,i=Np(e.annotations);return e.userEvent&&(i=i.concat(oi.userEvent.of(e.userEvent))),{changes:e.changes instanceof ri?e.changes:ri.of(e.changes||[],t,n.facet(PJ)),selection:r&&(r instanceof at?r:at.single(r.anchor,r.head)),effects:Np(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function zJ(n,e,t){let r=w3(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(t=!1);let o=!!e[a].sequential;r=BJ(r,w3(n,e[a],o?r.changes.newLength:n.doc.length),o)}let i=oi.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return n7e(t?t7e(i):i)}function t7e(n){let e=n.startState,t=!0;for(let i of e.facet(RJ)){let a=i(n);if(a===!1){t=!1;break}Array.isArray(a)&&(t=t===!0?a:e7e(t,a))}if(t!==!0){let i,a;if(t===!1)a=n.changes.invertedDesc,i=ri.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,a=o.filtered.mapDesc(o.changes).invertedDesc}n=oi.create(e,i,n.selection&&n.selection.map(a),dn.mapEffects(n.effects,a),n.annotations,n.scrollIntoView)}let r=e.facet(IJ);for(let i=r.length-1;i>=0;i--){let a=r[i](n);a instanceof oi?n=a:Array.isArray(a)&&a.length==1&&a[0]instanceof oi?n=a[0]:n=zJ(e,Np(a),!1)}return n}function n7e(n){let e=n.startState,t=e.facet(LJ),r=n;for(let i=t.length-1;i>=0;i--){let a=t[i](n);a&&Object.keys(a).length&&(r=BJ(r,w3(e,a,n.changes.newLength),!0))}return r==n?n:oi.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const r7e=[];function Np(n){return n==null?r7e:Array.isArray(n)?n:[n]}var pr=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(pr||(pr={}));const i7e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let S3;try{S3=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function a7e(n){if(S3)return S3.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||i7e.test(t)))return!0}return!1}function o7e(n){return e=>{if(!/\S/.test(e))return pr.Space;if(a7e(e))return pr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return pr.Word;return pr.Other}}class xn{constructor(e,t,r,i,a,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=a,o&&(o._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)S0(this,s<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return S0(this,r),GS(this,r)}update(...e){return zJ(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let s of e.effects)s.is(j_.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,u)=>i.set(u,l)),t=null),i.set(s.value.compartment,s.value.extension)):s.is(dn.reconfigure)?(t=null,r=s.value):s.is(dn.appendConfig)&&(t=null,r=Np(r).concat(s.value));let a;t?a=e.startState.values.slice():(t=qS.resolve(r,i,this),a=new xn(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(s,l)=>l.reconfigure(s,this),null).values);let o=e.startState.facet(x3)?e.newSelection:e.newSelection.asSingle();new xn(t,e.newDoc,o,a,(s,l)=>l.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:at.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),a=[r.range],o=Np(r.effects);for(let s=1;s<t.ranges.length;s++){let l=e(t.ranges[s]),u=this.changes(l.changes),c=u.map(i);for(let d=0;d<s;d++)a[d]=a[d].map(c);let h=i.mapDesc(u,!0);a.push(l.range.map(h)),i=i.compose(c),o=dn.mapEffects(o,c).concat(dn.mapEffects(Np(l.effects),h))}return{changes:i,selection:at.create(a,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ri?e:ri.of(e,this.doc.length,this.facet(xn.lineSeparator))}toText(e){return Nn.of(e.split(this.facet(xn.lineSeparator)||m3))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(S0(this,t),GS(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Fi&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let a in r)if(Object.prototype.hasOwnProperty.call(e,a)){let o=r[a],s=e[a];i.push(o.init(l=>o.spec.fromJSON(s,l)))}}return xn.create({doc:e.doc,selection:at.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=qS.resolve(e.extensions||[],new Map),r=e.doc instanceof Nn?e.doc:Nn.of((e.doc||"").split(t.staticFacet(xn.lineSeparator)||m3)),i=e.selection?e.selection instanceof at?e.selection:at.single(e.selection.anchor,e.selection.head):at.single(0);return kJ(i,r.length),t.staticFacet(x3)||(i=i.asSingle()),new xn(t,r,i,t.dynamicSlots.map(()=>null),(a,o)=>o.create(a),null)}get tabSize(){return this.facet(xn.tabSize)}get lineBreak(){return this.facet(xn.lineSeparator)||`
`}get readOnly(){return this.facet(FJ)}phrase(e,...t){for(let r of this.facet(xn.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let a=+(i||1);return!a||a>t.length?r:t[a-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let a of this.facet(OJ))for(let o of a(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return o7e(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),a=this.charCategorizer(e),o=e-r,s=e-r;for(;o>0;){let l=Oi(t,o,!1);if(a(t.slice(l,o))!=pr.Word)break;o=l}for(;s<i;){let l=Oi(t,s);if(a(t.slice(s,l))!=pr.Word)break;s=l}return o==s?null:at.range(o+r,s+r)}}xn.allowMultipleSelections=x3;xn.tabSize=Dt.define({combine:n=>n.length?n[0]:4});xn.lineSeparator=PJ;xn.readOnly=FJ;xn.phrases=Dt.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});xn.languageData=OJ;xn.changeFilter=RJ;xn.transactionFilter=IJ;xn.transactionExtender=LJ;j_.reconfigure=dn.define();function kl(n,e,t={}){let r={};for(let i of n)for(let a of Object.keys(i)){let o=i[a],s=r[a];if(s===void 0)r[a]=o;else if(!(s===o||o===void 0))if(Object.hasOwnProperty.call(t,a))r[a]=t[a](s,o);else throw new Error("Config merge conflict for field "+a)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Td{eq(e){return this==e}range(e,t=e){return E3.create(e,t,this)}}Td.prototype.startSide=Td.prototype.endSide=0;Td.prototype.point=!1;Td.prototype.mapMode=xa.TrackDel;let E3=class UJ{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new UJ(e,t,r)}};function _3(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class rP{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let a=r?this.to:this.from;for(let o=i,s=a.length;;){if(o==s)return o;let l=o+s>>1,u=a[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return u>=0?o:s;u>=0?s=l:o=l+1}}between(e,t,r,i){for(let a=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,a);a<o;a++)if(i(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,t){let r=[],i=[],a=[],o=-1,s=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,h=this.to[l]+e,d,f;if(c==h){let p=t.mapPos(c,u.startSide,u.mapMode);if(p==null||(d=f=p,u.startSide!=u.endSide&&(f=t.mapPos(c,u.endSide),f<d)))continue}else if(d=t.mapPos(c,u.startSide),f=t.mapPos(h,u.endSide),d>f||d==f&&u.startSide>0&&u.endSide<=0)continue;(f-d||u.endSide-u.startSide)<0||(o<0&&(o=d),u.point&&(s=Math.max(s,f-d)),r.push(u),i.push(d-o),a.push(f-o))}return{mapped:r.length?new rP(i,a,r,s):null,pos:o}}}class An{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new An(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:a=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(_3)),this.isEmpty)return t.length?An.of(t):this;let s=new jJ(this,null,-1).goto(0),l=0,u=[],c=new Xc;for(;s.value||l<t.length;)if(l<t.length&&(s.from-t[l].from||s.startSide-t[l].value.startSide)>=0){let h=t[l++];c.addInner(h.from,h.to,h.value)||u.push(h)}else s.rangeIndex==1&&s.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(s.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(s.chunkIndex)||a<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||i>s.to||a<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||u.push(E3.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?An.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let s=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(s,s+l.length);if(u===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(s));else if(u===!0){let{mapped:c,pos:h}=l.map(s,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),r.push(h))}}let a=this.nextLayer.map(e);return t.length==0?a:new An(r,t,a||An.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let a=this.chunkPos[i],o=this.chunk[i];if(t>=a&&e<=a+o.length&&o.between(a,e-a,t-a,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Nv.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Nv.from(e).goto(t)}static compare(e,t,r,i,a=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=a),s=t.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=a),l=K8(o,s,r),u=new Lg(o,l,a),c=new Lg(s,l,a);r.iterGaps((h,d,f)=>Q8(u,h,c,d,f,i)),r.empty&&r.length==0&&Q8(u,0,c,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let a=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(a.length!=o.length)return!1;if(!a.length)return!0;let s=K8(a,o),l=new Lg(a,s,0).goto(r),u=new Lg(o,s,0).goto(r);for(;;){if(l.to!=u.to||!C3(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,t,r,i,a=-1){let o=new Lg(e,null,a).goto(t),s=t,l=o.openStart;for(;;){let u=Math.min(o.to,r);if(o.point){let c=o.activeForPoint(o.to),h=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);i.point(s,u,o.point,c,h,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>s&&(i.span(s,u,o.active,l),l=o.openEnd(u));if(o.to>r)return l+(o.point&&o.to>r?1:0);s=o.to,o.next()}}static of(e,t=!1){let r=new Xc;for(let i of e instanceof E3?[e]:t?s7e(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return An.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=An.empty;i=i.nextLayer)t=new An(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}An.empty=new An([],[],null,-1);function s7e(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(_3(e,r)>0)return n.slice().sort(_3);e=r}return n}An.empty.nextLayer=An.empty;class Xc{finishChunk(e){this.chunks.push(new rP(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Xc)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(An.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=An.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function K8(n,e,t){let r=new Map;for(let a of n)for(let o=0;o<a.chunk.length;o++)a.chunk[o].maxPoint<=0&&r.set(a.chunk[o],a.chunkPos[o]);let i=new Set;for(let a of e)for(let o=0;o<a.chunk.length;o++){let s=r.get(a.chunk[o]);s!=null&&(t?t.mapPos(s):s)==a.chunkPos[o]&&!(t!=null&&t.touchesRange(s,s+a.chunk[o].length))&&i.add(a.chunk[o])}return i}class jJ{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Nv{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let a=0;a<e.length;a++)for(let o=e[a];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new jJ(o,t,r,a));return i.length==1?i[0]:new Nv(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)iT(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)iT(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),iT(this.heap,0)}}}function iT(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class Lg{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Nv.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){hx(this.active,e),hx(this.activeTo,e),hx(this.activeRank,e),this.minActive=e9(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:a}=this.cursor;for(;t<this.activeRank.length&&(a-this.activeRank[t]||i-this.activeTo[t])>0;)t++;dx(this.active,t,r),dx(this.activeTo,t,i),dx(this.activeRank,t,a),e&&dx(e,t,this.cursor.from),this.minActive=e9(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&hx(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function Q8(n,e,t,r,i,a){n.goto(e),t.goto(r);let o=r+i,s=r,l=r-e;for(;;){let u=n.to+l-t.to||n.endSide-t.endSide,c=u<0?n.to+l:t.to,h=Math.min(c,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&C3(n.activeForPoint(n.to),t.activeForPoint(t.to))||a.comparePoint(s,h,n.point,t.point):h>s&&!C3(n.active,t.active)&&a.compareRange(s,h,n.active,t.active),c>o)break;s=c,u<=0&&n.next(),u>=0&&t.next()}}function C3(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function hx(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function dx(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function e9(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function zm(n,e,t=n.length){let r=0;for(let i=0;i<t;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Oi(n,i));return r}function A3(n,e,t,r){for(let i=0,a=0;;){if(a>=e)return i;if(i==n.length)break;a+=n.charCodeAt(i)==9?t-a%t:1,i=Oi(n,i)}return r===!0?-1:n.length}const T3="",t9=typeof Symbol>"u"?"__"+T3:Symbol.for(T3),M3=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),n9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Yc{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function a(o,s,l,u){let c=[],h=/^@(\w+)\b/.exec(o[0]),d=h&&h[1]=="keyframes";if(h&&s==null)return l.push(o[0]+";");for(let f in s){let p=s[f];if(/&/.test(f))a(f.split(/,\s*/).map(v=>o.map(y=>v.replace(/&/,y))).reduce((v,y)=>v.concat(y)),p,l);else if(p&&typeof p=="object"){if(!h)throw new RangeError("The value of a property ("+f+") should be a primitive value.");a(i(f),p,c,d)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+p+";")}(c.length||d)&&l.push((r&&!h&&!u?o.map(r):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)a(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=n9[t9]||1;return n9[t9]=e+1,T3+e.toString(36)}static mount(e,t,r){let i=e[M3],a=r&&r.nonce;i?a&&i.setNonce(a):i=new l7e(e,a),i.mount(Array.isArray(t)?t:[t],e)}}let r9=new Map;class l7e{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let a=r9.get(r);if(a)return e[M3]=a;this.sheet=new i.CSSStyleSheet,r9.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[M3]=this}mount(e,t){let r=this.sheet,i=0,a=0;for(let o=0;o<e.length;o++){let s=e[o],l=this.modules.indexOf(s);if(l<a&&l>-1&&(this.modules.splice(l,1),a--,l=-1),l==-1){if(this.modules.splice(a++,0,s),r)for(let u=0;u<s.rules.length;u++)r.insertRule(s.rules[u],i++)}else{for(;a<l;)i+=this.modules[a++].rules.length;i+=s.rules.length,a++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let s=t.head||t;this.styleTag.parentNode!=s&&s.insertBefore(this.styleTag,s.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Zc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ov={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},u7e=typeof navigator<"u"&&/Mac/.test(navigator.platform),c7e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Mi=0;Mi<10;Mi++)Zc[48+Mi]=Zc[96+Mi]=String(Mi);for(var Mi=1;Mi<=24;Mi++)Zc[Mi+111]="F"+Mi;for(var Mi=65;Mi<=90;Mi++)Zc[Mi]=String.fromCharCode(Mi+32),Ov[Mi]=String.fromCharCode(Mi);for(var aT in Zc)Ov.hasOwnProperty(aT)||(Ov[aT]=Zc[aT]);function h7e(n){var e=u7e&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||c7e&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Ov:Zc)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Pv(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function D3(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function d7e(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function dw(n,e){if(!e.anchorNode)return!1;try{return D3(n,e.anchorNode)}catch{return!1}}function im(n){return n.nodeType==3?Dd(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function E0(n,e,t,r){return t?i9(n,e,t,r,-1)||i9(n,e,t,r,1):!1}function Md(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function $S(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function i9(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Tu(n))){if(n.nodeName=="DIV")return!1;let a=n.parentNode;if(!a||a.nodeType!=1)return!1;e=Md(n)+(i<0?0:1),n=a}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?Tu(n):0}else return!1}}function Tu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function H_(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function f7e(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function HJ(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function p7e(n,e,t,r,i,a,o,s){let l=n.ownerDocument,u=l.defaultView||window;for(let c=n,h=!1;c&&!h;)if(c.nodeType==1){let d,f=c==l.body,p=1,v=1;if(f)d=f7e(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let w=c.getBoundingClientRect();({scaleX:p,scaleY:v}=HJ(c,w)),d={left:w.left,right:w.left+c.clientWidth*p,top:w.top,bottom:w.top+c.clientHeight*v}}let y=0,g=0;if(i=="nearest")e.top<d.top?(g=-(d.top-e.top+o),t>0&&e.bottom>d.bottom+g&&(g=e.bottom-d.bottom+g+o)):e.bottom>d.bottom&&(g=e.bottom-d.bottom+o,t<0&&e.top-g<d.top&&(g=-(d.top+g-e.top+o)));else{let w=e.bottom-e.top,b=d.bottom-d.top;g=(i=="center"&&w<=b?e.top+w/2-b/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-b+o)-d.top}if(r=="nearest"?e.left<d.left?(y=-(d.left-e.left+a),t>0&&e.right>d.right+y&&(y=e.right-d.right+y+a)):e.right>d.right&&(y=e.right-d.right+a,t<0&&e.left<d.left+y&&(y=-(d.left+y-e.left+a))):y=(r=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:r=="start"==s?e.left-a:e.right-(d.right-d.left)+a)-d.left,y||g)if(f)u.scrollBy(y,g);else{let w=0,b=0;if(g){let m=c.scrollTop;c.scrollTop+=g/v,b=(c.scrollTop-m)*v}if(y){let m=c.scrollLeft;c.scrollLeft+=y/p,w=(c.scrollLeft-m)*p}e={left:e.left-w,top:e.top-b,right:e.right-w,bottom:e.bottom-b},w&&Math.abs(w-y)<1&&(r="nearest"),b&&Math.abs(b-g)<1&&(i="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function m7e(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class g7e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?Tu(t):0),r,Math.min(e.focusOffset,r?Tu(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let zf=null;function VJ(n){if(n.setActive)return n.setActive();if(zf)return n.focus(zf);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(zf==null?{get preventScroll(){return zf={preventScroll:!0},!0}}:void 0),!zf){zf=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],a=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=a&&(r.scrollLeft=a)}}}let a9;function Dd(n,e,t=e){let r=a9||(a9=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Op(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let a=new KeyboardEvent("keydown",i);a.synthetic=!0,n.dispatchEvent(a);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),a.defaultPrevented||o.defaultPrevented}function v7e(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function WJ(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function y7e(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,Tu(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=Tu(t))}else{if(t==n)return!0;r=Md(t),t=t.parentNode}}function qJ(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function GJ(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=Tu(t)}else if(t.parentNode&&!$S(t))r=Md(t),t=t.parentNode;else return null}}function $J(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!$S(t))r=Md(t)+1,t=t.parentNode;else return null}}class Ji{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new Ji(e.parentNode,Md(e),t)}static after(e,t){return new Ji(e.parentNode,Md(e)+1,t)}}const iP=[];class Zn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,a;for(let o of this.children){if(o.flags&7){if(!o.dom&&(a=i?i.nextSibling:r.firstChild)){let s=Zn.get(a);(!s||!s.parent&&s.canReuseDOM(o))&&o.reuseDOM(a)}o.sync(e,t),o.flags&=-8}if(a=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&a!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;a&&a!=o.dom;)a=o9(a);else r.insertBefore(o.dom,a);i=o.dom}for(a=i?i.nextSibling:r.firstChild,a&&t&&t.node==r&&(t.written=!0);a;)a=o9(a)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=Tu(e)==0?0:t==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;i==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?i=-1:i=1),e=a}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Zn.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,a=0;;i++){let o=this.children[i];if(o.dom==r)return a;a+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,a=-1,o=-1,s=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let h=this.children[l],d=u+h.length;if(u<e&&d>t)return h.domBoundsAround(e,t,u);if(d>=e&&i==-1&&(i=l,a=u),u>t&&h.dom.parentNode==this.dom){o=l,s=c;break}c=d,u=d+h.breakAfter}return{from:a,to:s<0?r+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=iP){this.markDirty();for(let i=e;i<t;i++){let a=this.children[i];a.parent==this&&r.indexOf(a)<0&&a.destroy()}this.children.splice(e,t-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new XJ(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,a,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Zn.prototype.breakAfter=0;function o9(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class XJ{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function YJ(n,e,t,r,i,a,o,s,l){let{children:u}=n,c=u.length?u[e]:null,h=a.length?a[a.length-1]:null,d=h?h.breakAfter:o;if(!(e==r&&c&&!o&&!d&&a.length<2&&c.merge(t,i,a.length?h:null,t==0,s,l))){if(r<u.length){let f=u[r];f&&(i<f.length||f.breakAfter&&h!=null&&h.breakAfter)?(e==r&&(f=f.split(i),i=0),!d&&h&&f.merge(0,i,h,!0,0,l)?a[a.length-1]=f:((i||f.children.length&&!f.children[0].length)&&f.merge(0,i,null,!1,0,l),a.push(f))):f!=null&&f.breakAfter&&(h?h.breakAfter=1:o=1),r++}for(c&&(c.breakAfter=o,t>0&&(!o&&a.length&&c.merge(t,c.length,a[0],!1,s,0)?c.breakAfter=a.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,s,0),e++));e<r&&a.length;)if(u[r-1].become(a[a.length-1]))r--,a.pop(),l=a.length?0:s;else if(u[e].become(a[0]))e++,a.shift(),s=a.length?0:l;else break;!a.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,s,l)&&e--,(e<r||a.length)&&n.replaceChildren(e,r,a)}}function ZJ(n,e,t,r,i,a){let o=n.childCursor(),{i:s,off:l}=o.findPos(t,1),{i:u,off:c}=o.findPos(e,-1),h=e-t;for(let d of r)h+=d.length;n.length+=h,YJ(n,u,c,s,l,r,0,i,a)}let Ha=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},k3=typeof document<"u"?document:{documentElement:{style:{}}};const N3=/Edge\/(\d+)/.exec(Ha.userAgent),JJ=/MSIE \d/.test(Ha.userAgent),O3=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ha.userAgent),V_=!!(JJ||O3||N3),s9=!V_&&/gecko\/(\d+)/i.test(Ha.userAgent),oT=!V_&&/Chrome\/(\d+)/.exec(Ha.userAgent),l9="webkitFontSmoothing"in k3.documentElement.style,KJ=!V_&&/Apple Computer/.test(Ha.vendor),u9=KJ&&(/Mobile\/\w+/.test(Ha.userAgent)||Ha.maxTouchPoints>2);var At={mac:u9||/Mac/.test(Ha.platform),windows:/Win/.test(Ha.platform),linux:/Linux|X11/.test(Ha.platform),ie:V_,ie_version:JJ?k3.documentMode||6:O3?+O3[1]:N3?+N3[1]:0,gecko:s9,gecko_version:s9?+(/Firefox\/(\d+)/.exec(Ha.userAgent)||[0,0])[1]:0,chrome:!!oT,chrome_version:oT?+oT[1]:0,ios:u9,android:/Android\b/.test(Ha.userAgent),webkit:l9,safari:KJ,webkit_version:l9?+(/\bAppleWebKit\/(\d+)/.exec(Ha.userAgent)||[0,0])[1]:0,tabSize:k3.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const b7e=256;class Ds extends Zn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof Ds)||this.length-(t-e)+r.length>b7e||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Ds(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Ji(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return x7e(this.dom,e,t)}}class Mu extends Zn{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(WJ(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,a,o){return r&&(!(r instanceof Mu&&r.mark.eq(this.mark))||e&&a<=0||t<this.length&&o<=0)?!1:(ZJ(this,e,t,r?r.children.slice():[],a-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,a=0;for(let s of this.children){let l=r+s.length;l>e&&t.push(r<e?s.split(e-r):s),i<0&&r>=e&&(i=a),r=l,a++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Mu(this.mark,t,o)}domAtPos(e){return QJ(this,e)}coordsAt(e,t){return tK(this,e,t)}}function x7e(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,a=e,o=0;e==0&&t<0||e==r&&t>=0?At.chrome||At.gecko||(e?(i--,o=1):a<r&&(a++,o=-1)):t<0?i--:a<r&&a++;let s=Dd(n,i,a).getClientRects();if(!s.length)return null;let l=s[(o?o<0:t>=0)?0:s.length-1];return At.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(s,u=>u.width)||l),o?H_(l,o<0):l||null}class xc extends Zn{static create(e,t,r){return new xc(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=xc.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,a,o){return r&&(!(r instanceof xc)||!this.widget.compare(r.widget)||e>0&&a<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof xc&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Nn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Nn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Ji.before(this.dom):Ji.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),a=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let s=o?i.length-1:0;a=i[s],!(e>0?s==0:s==i.length-1||a.top<a.bottom);s+=o?-1:1);return H_(a,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class am extends Zn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof am&&e.side==this.side}split(){return new am(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Ji.before(this.dom):Ji.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Nn.empty}get isHidden(){return!0}}Ds.prototype.children=xc.prototype.children=am.prototype.children=iP;function QJ(n,e){let t=n.dom,{children:r}=n,i=0;for(let a=0;i<r.length;i++){let o=r[i],s=a+o.length;if(!(s==a&&o.getSide()<=0)){if(e>a&&e<s&&o.dom.parentNode==t)return o.domAtPos(e-a);if(e<=a)break;a=s}}for(let a=i;a>0;a--){let o=r[a-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let a=i;a<r.length;a++){let o=r[a];if(o.dom.parentNode==t)return o.domAtPos(0)}return new Ji(t,0)}function eK(n,e,t){let r,{children:i}=n;t>0&&e instanceof Mu&&i.length&&(r=i[i.length-1])instanceof Mu&&r.mark.eq(e.mark)?eK(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function tK(n,e,t){let r=null,i=-1,a=null,o=-1;function s(u,c){for(let h=0,d=0;h<u.children.length&&d<=c;h++){let f=u.children[h],p=d+f.length;p>=c&&(f.children.length?s(f,c-d):(!a||a.isHidden&&t>0)&&(p>c||d==p&&f.getSide()>0)?(a=f,o=c-d):(d<c||d==p&&f.getSide()<0&&!f.isHidden)&&(r=f,i=c-d)),d=p}}s(n,e);let l=(t<0?r:a)||r||a;return l?l.coordsAt(Math.max(0,l==r?i:o),t):w7e(n)}function w7e(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=im(e);return t[t.length-1]||null}function P3(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const c9=Object.create(null);function aP(n,e,t){if(n==e)return!0;n||(n=c9),e||(e=c9);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let a of r)if(a!=t&&(i.indexOf(a)==-1||n[a]!==e[a]))return!1;return!0}function R3(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function S7e(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class Qr extends Zn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,a,o){if(r){if(!(r instanceof Qr))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),ZJ(this,e,t,r?r.children.slice():[],a,o),!0}split(e){let t=new Qr;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let a=r;a<this.children.length;a++)t.append(this.children[a],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){aP(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){eK(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=P3(t,this.attrs||{})),r&&(this.attrs=P3({class:r},this.attrs||{}))}domAtPos(e){return QJ(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(WJ(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(R3(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Zn.get(i)instanceof Mu;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Zn.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!At.ios||!this.children.some(a=>a instanceof Ds))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof Ds)||/[^ -~]/.test(r.text))return null;let i=im(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=tK(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,a=r.bottom-r.top;if(Math.abs(a-i.lineHeight)<2&&i.textHeight<a){let o=(a-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return!1}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let a=e.children[r],o=i+a.length;if(o>=t){if(a instanceof Qr)return a;if(o>t)break}i=o+a.breakAfter}return null}}class du extends Zn{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,a,o){return r&&(!(r instanceof du)||!this.widget.compare(r.widget)||e>0&&a<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Ji.before(this.dom):Ji.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new du(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return iP}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Nn.empty}domBoundsAround(){return null}become(e){return e instanceof du&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class Ru{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Aa=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Aa||(Aa={}));class jt extends Td{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Sy(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Jc(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:a,end:o}=nK(e,t);r=(a?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new Jc(e,r,i,t,e.widget||null,!0)}static line(e){return new Ey(e)}static set(e,t=!1){return An.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}jt.none=An.empty;class Sy extends jt{constructor(e){let{start:t,end:r}=nK(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof Sy&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&aP(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Sy.prototype.point=!1;class Ey extends jt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ey&&this.spec.class==e.spec.class&&aP(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Ey.prototype.mapMode=xa.TrackBefore;Ey.prototype.point=!0;class Jc extends jt{constructor(e,t,r,i,a,o){super(t,r,a,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?xa.TrackBefore:xa.TrackAfter:xa.TrackDel}get type(){return this.startSide!=this.endSide?Aa.WidgetRange:this.startSide<=0?Aa.WidgetBefore:Aa.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Jc&&E7e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Jc.prototype.point=!0;function nK(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function E7e(n,e){return n==e||!!(n&&e&&n.compare(e))}function I3(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class _0{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof du&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Qr),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(fx(new am(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof du)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:o,done:s}=this.cursor.next(this.skip);if(this.skip=0,s)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(fx(new Ds(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,a,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Jc){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(r instanceof Jc)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new du(r.widget||om.block,s,r));else{let l=xc.create(r.widget||om.inline,s,s?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&a<=i.length&&(e<t||r.startSide>0),c=!l.isEditable&&(e<t||a>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(h.append(fx(new am(1),i),a),a=i.length+Math.max(0,a-i.length)),h.append(fx(l,i),a),this.atCursorPos=c,this.pendingBuffer=c?e<t||a>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=a)}static build(e,t,r,i,a){let o=new _0(e,t,r,a);return o.openEnd=An.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function fx(n,e){for(let t of e)n=new Mu(t,[n],n.length);return n}class om extends Ru{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}om.inline=new om("span");om.block=new om("div");var ur=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(ur||(ur={}));const kd=ur.LTR,oP=ur.RTL;function rK(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const _7e=rK("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),C7e=rK("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),L3=Object.create(null),Ys=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);L3[e]=t,L3[t]=-e}function iK(n){return n<=247?_7e[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?C7e[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const A7e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class wc{get dir(){return this.level%2?oP:kd}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let a=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==r)return o;(a<0||(i!=0?i<0?s.from<t:s.to>t:e[a].level>s.level))&&(a=o)}}if(a<0)throw new RangeError("Index out of range");return a}}function aK(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!aK(r.inner,i.inner))return!1}return!0}const Yn=[];function T7e(n,e,t,r,i){for(let a=0;a<=r.length;a++){let o=a?r[a-1].to:e,s=a<r.length?r[a].from:t,l=a?256:i;for(let u=o,c=l,h=l;u<s;u++){let d=iK(n.charCodeAt(u));d==512?d=c:d==8&&h==4&&(d=16),Yn[u]=d==4?2:d,d&7&&(h=d),c=d}for(let u=o,c=l,h=l;u<s;u++){let d=Yn[u];if(d==128)u<s-1&&c==Yn[u+1]&&c&24?d=Yn[u]=c:Yn[u]=256;else if(d==64){let f=u+1;for(;f<s&&Yn[f]==64;)f++;let p=u&&c==8||f<t&&Yn[f]==8?h==1?1:8:256;for(let v=u;v<f;v++)Yn[v]=p;u=f-1}else d==8&&h==1&&(Yn[u]=1);c=d,d&7&&(h=d)}}}function M7e(n,e,t,r,i){let a=i==1?2:1;for(let o=0,s=0,l=0;o<=r.length;o++){let u=o?r[o-1].to:e,c=o<r.length?r[o].from:t;for(let h=u,d,f,p;h<c;h++)if(f=L3[d=n.charCodeAt(h)])if(f<0){for(let v=s-3;v>=0;v-=3)if(Ys[v+1]==-f){let y=Ys[v+2],g=y&2?i:y&4?y&1?a:i:0;g&&(Yn[h]=Yn[Ys[v]]=g),s=v;break}}else{if(Ys.length==189)break;Ys[s++]=h,Ys[s++]=d,Ys[s++]=l}else if((p=Yn[h])==2||p==1){let v=p==i;l=v?0:1;for(let y=s-3;y>=0;y-=3){let g=Ys[y+2];if(g&2)break;if(v)Ys[y+2]|=2;else{if(g&4)break;Ys[y+2]|=4}}}}}function D7e(n,e,t,r){for(let i=0,a=r;i<=t.length;i++){let o=i?t[i-1].to:n,s=i<t.length?t[i].from:e;for(let l=o;l<s;){let u=Yn[l];if(u==256){let c=l+1;for(;;)if(c==s){if(i==t.length)break;c=t[i++].to,s=i<t.length?t[i].from:e}else if(Yn[c]==256)c++;else break;let h=a==1,d=(c<e?Yn[c]:r)==1,f=h==d?h?1:2:r;for(let p=c,v=i,y=v?t[v-1].to:n;p>l;)p==y&&(p=t[--v].from,y=v?t[v-1].to:n),Yn[--p]=f;l=c}else a=u,l++}}}function F3(n,e,t,r,i,a,o){let s=r%2?2:1;if(r%2==i%2)for(let l=e,u=0;l<t;){let c=!0,h=!1;if(u==a.length||l<a[u].from){let v=Yn[l];v!=s&&(c=!1,h=v==16)}let d=!c&&s==1?[]:null,f=c?r:r+1,p=l;e:for(;;)if(u<a.length&&p==a[u].from){if(h)break e;let v=a[u];if(!c)for(let y=v.to,g=u+1;;){if(y==t)break e;if(g<a.length&&a[g].from==y)y=a[g++].to;else{if(Yn[y]==s)break e;break}}if(u++,d)d.push(v);else{v.from>l&&o.push(new wc(l,v.from,f));let y=v.direction==kd!=!(f%2);B3(n,y?r+1:r,i,v.inner,v.from,v.to,o),l=v.to}p=v.to}else{if(p==t||(c?Yn[p]!=s:Yn[p]==s))break;p++}d?F3(n,l,p,r+1,i,d,o):l<p&&o.push(new wc(l,p,f)),l=p}else for(let l=t,u=a.length;l>e;){let c=!0,h=!1;if(!u||l>a[u-1].to){let v=Yn[l-1];v!=s&&(c=!1,h=v==16)}let d=!c&&s==1?[]:null,f=c?r:r+1,p=l;e:for(;;)if(u&&p==a[u-1].to){if(h)break e;let v=a[--u];if(!c)for(let y=v.from,g=u;;){if(y==e)break e;if(g&&a[g-1].to==y)y=a[--g].from;else{if(Yn[y-1]==s)break e;break}}if(d)d.push(v);else{v.to<l&&o.push(new wc(v.to,l,f));let y=v.direction==kd!=!(f%2);B3(n,y?r+1:r,i,v.inner,v.from,v.to,o),l=v.from}p=v.from}else{if(p==e||(c?Yn[p-1]!=s:Yn[p-1]==s))break;p--}d?F3(n,p,l,r+1,i,d,o):p<l&&o.push(new wc(p,l,f)),l=p}}function B3(n,e,t,r,i,a,o){let s=e%2?2:1;T7e(n,i,a,r,s),M7e(n,i,a,r,s),D7e(i,a,r,s),F3(n,i,a,e,t,r,o)}function k7e(n,e,t){if(!n)return[new wc(0,0,e==oP?1:0)];if(e==kd&&!t.length&&!A7e.test(n))return oK(n.length);if(t.length)for(;n.length>Yn.length;)Yn[Yn.length]=256;let r=[],i=e==kd?0:1;return B3(n,i,i,t,0,n.length,r),r}function oK(n){return[new wc(0,n,0)]}let sK="";function N7e(n,e,t,r,i){var a;let o=r.head-n.from,s=wc.find(e,o,(a=r.bidiLevel)!==null&&a!==void 0?a:-1,r.assoc),l=e[s],u=l.side(i,t);if(o==u){let d=s+=i?1:-1;if(d<0||d>=e.length)return null;l=e[s=d],o=l.side(!i,t),u=l.side(i,t)}let c=Oi(n.text,o,l.forward(i,t));(c<l.from||c>l.to)&&(c=u),sK=n.text.slice(Math.min(o,c),Math.max(o,c));let h=s==(i?e.length-1:0)?null:e[s+(i?1:-1)];return h&&c==u&&h.level+(i?0:1)<l.level?at.cursor(h.side(!i,t)+n.from,h.forward(i,t)?1:-1,h.level):at.cursor(c+n.from,l.forward(i,t)?-1:1,l.level)}function O7e(n,e,t){for(let r=e;r<t;r++){let i=iK(n.charCodeAt(r));if(i==1)return kd;if(i==2||i==4)return oP}return kd}const lK=Dt.define(),uK=Dt.define(),cK=Dt.define(),hK=Dt.define(),z3=Dt.define(),dK=Dt.define(),fK=Dt.define(),pK=Dt.define({combine:n=>n.some(e=>e)}),mK=Dt.define({combine:n=>n.some(e=>e)}),gK=Dt.define();class Pp{constructor(e,t="nearest",r="nearest",i=5,a=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=a,this.isSnapshot=o}map(e){return e.empty?this:new Pp(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Pp(at.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const px=dn.define({map:(n,e)=>n.map(e)}),vK=dn.define();function Ga(n,e,t){let r=n.facet(hK);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const W_=Dt.define({combine:n=>n.length?n[0]:!0});let P7e=0;const Jg=Dt.define();class jr{constructor(e,t,r,i,a){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.extension=a(this)}static define(e,t){const{eventHandlers:r,eventObservers:i,provide:a,decorations:o}=t||{};return new jr(P7e++,e,r,i,s=>{let l=[Jg.of(s)];return o&&l.push(Rv.of(u=>{let c=u.plugin(s);return c?o(c):jt.none})),a&&l.push(a(s)),l})}static fromClass(e,t){return jr.define(r=>new e(r),t)}}class sT{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Ga(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Ga(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){Ga(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const yK=Dt.define(),sP=Dt.define(),Rv=Dt.define(),bK=Dt.define(),lP=Dt.define(),xK=Dt.define();function h9(n,e){let t=n.state.facet(xK);if(!t.length)return t;let r=t.map(a=>a instanceof Function?a(n):a),i=[];return An.spans(r,e.from,e.to,{point(){},span(a,o,s,l){let u=a-e.from,c=o-e.from,h=i;for(let d=s.length-1;d>=0;d--,l--){let f=s[d].spec.bidiIsolate,p;if(f==null&&(f=O7e(e.text,u,c)),l>0&&h.length&&(p=h[h.length-1]).to==u&&p.direction==f)p.to=c,h=p.inner;else{let v={from:u,to:c,direction:f,inner:[]};h.push(v),h=v.inner}}}}),i}const wK=Dt.define();function SK(n){let e=0,t=0,r=0,i=0;for(let a of n.state.facet(wK)){let o=a(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:r,bottom:i}}const Kg=Dt.define();class Yo{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new Yo(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,a=0,o=0,s=0;;i++){let l=i==e.length?null:e[i],u=o-s,c=l?l.fromB:1e9;for(;a<t.length&&t[a]<c;){let h=t[a],d=t[a+1],f=Math.max(s,h),p=Math.min(c,d);if(f<=p&&new Yo(f+u,p+u,f,p).addToSet(r),d>c)break;a+=2}if(!l)return r;new Yo(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,s=l.toB}}}class XS{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=ri.empty(this.startState.doc.length);for(let a of r)this.changes=this.changes.compose(a.changes);let i=[];this.changes.iterChangedRanges((a,o,s,l)=>i.push(new Yo(a,o,s,l))),this.changedRanges=i}static create(e,t,r){return new XS(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class d9 extends Zn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=jt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Qr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Yo(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!U7e(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let a=i>-1?I7e(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new Yo(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=a?{from:a.range.fromB,to:a.range.toB}:null,(At.ie||At.chrome)&&!a&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,s=this.updateDeco(),l=B7e(o,s,e.changes);return r=Yo.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,a),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=At.chrome||At.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof du&&o.widget instanceof f9&&a.push(o.dom);i.updateGaps(a)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,a=this.childCursor(t);for(let o=i.length-1;;o--){let s=o>=0?i[o]:null;if(!s)break;let{fromA:l,toA:u,fromB:c,toB:h}=s,d,f,p,v;if(r&&r.range.fromB<h&&r.range.toB>c){let m=_0.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),x=_0.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);f=m.breakAtStart,p=m.openStart,v=x.openEnd;let S=this.compositionView(r);x.breakAtStart?S.breakAfter=1:x.content.length&&S.merge(S.length,S.length,x.content[0],!1,x.openStart,0)&&(S.breakAfter=x.content[0].breakAfter,x.content.shift()),m.content.length&&S.merge(0,0,m.content[m.content.length-1],!0,0,m.openEnd)&&m.content.pop(),d=m.content.concat(S).concat(x.content)}else({content:d,breakAtStart:f,openStart:p,openEnd:v}=_0.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:y,off:g}=a.findPos(u,1),{i:w,off:b}=a.findPos(l,-1);YJ(this,w,b,y,g,d,f,p,v)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(vK)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new Ds(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Mu(i,[t],t.length);let r=new Qr;return r.append(t,0),r}fixCompositionDOM(e){let t=(a,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let s=Zn.get(a);s&&s!=o&&(s.dom=null),o.setDOM(a)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let a=e.marks.length-1;a>=-1;a--)r=i.childPos(r.off,1),i=i.children[r.i],t(a>=0?e.marks[a].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,a=!i&&dw(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||a))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(s.anchor)),u=s.empty?l:this.moveToLine(this.domAtPos(s.head));if(At.gecko&&s.empty&&!this.hasComposition&&R7e(l)){let h=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(h,l.node.childNodes[l.offset]||null)),l=u=new Ji(h,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!E0(l.node,l.offset,c.anchorNode,c.anchorOffset)||!E0(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,s))&&(this.view.observer.ignore(()=>{At.android&&At.chrome&&this.dom.contains(c.focusNode)&&z7e(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Pv(this.view.root);if(h)if(s.empty){if(At.gecko){let d=L7e(l.node,l.offset);if(d&&d!=3){let f=(d==1?GJ:$J)(l.node,l.offset);f&&(l=new Ji(f.node,f.offset))}}h.collapse(l.node,l.offset),s.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=s.bidiLevel)}else if(h.extend){h.collapse(l.node,l.offset);try{h.extend(u.node,u.offset)}catch{}}else{let d=document.createRange();s.anchor>s.head&&([l,u]=[u,l]),d.setEnd(u.node,u.offset),d.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(d)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Ji(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Ji(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&E0(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=Pv(e.root),{anchorNode:i,anchorOffset:a}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=Qr.find(this,t.head);if(!o)return;let s=o.posAtStart;if(t.head==s||t.head==s+o.length)return;let l=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);r.collapse(c.node,c.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&r.collapse(i,a)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let a=Zn.get(t.childNodes[i]);a instanceof Qr&&(r=a.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let a=Zn.get(t.childNodes[i]);a instanceof Qr&&(r=a.domAtPos(a.length))}return r?new Ji(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=Zn.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof Qr)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let a=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],l=a-s.breakAfter,u=l-s.length;if(l<e)break;if(u<=e&&(u<e||s.covers(-1))&&(l>e||s.covers(1))&&(!r||s instanceof Qr&&!(r instanceof Qr&&t>=0)))r=s,i=u;else if(r&&u==e&&l==e&&s instanceof du&&Math.abs(t)<2){if(s.deco.startSide<0)break;o&&(r=null)}a=u}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Qr))return null;for(;i.children.length;){let{i:s,off:l}=i.childPos(r,1);for(;;s++){if(s==i.children.length)return null;if((i=i.children[s]).length)break}r=l}if(!(i instanceof Ds))return null;let a=Oi(i.text,r);if(a==r)return null;let o=Dd(i.dom,r,a).getClientRects();for(let s=0;s<o.length;s++){let l=o[s];if(s==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,a=this.view.contentDOM.clientWidth,o=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,l=this.view.textDirection==ur.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],d=u+h.length;if(d>i)break;if(u>=r){let f=h.dom.getBoundingClientRect();if(t.push(f.height),o){let p=h.dom.lastChild,v=p?im(p):[];if(v.length){let y=v[v.length-1],g=l?y.right-f.left:f.right-y.left;g>s&&(s=g,this.minWidth=a,this.minWidthFrom=u,this.minWidthTo=d)}}}u=d+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?ur.RTL:ur.LTR}measureTextSize(){for(let a of this.children)if(a instanceof Qr){let o=a.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let a=im(e.firstChild)[0];t=e.getBoundingClientRect().height,r=a?a.width/27:7,i=a?a.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new XJ(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let a=i==t.viewports.length?null:t.viewports[i],o=a?a.from-1:this.length;if(o>r){let s=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(jt.replace({widget:new f9(s),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!a)break;r=a.to+1}return jt.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Rv).map(a=>(this.dynamicDecorationMap[e++]=typeof a=="function")?a(this.view):a),r=!1,i=this.view.state.facet(bK).map((a,o)=>{let s=typeof a=="function";return s&&(r=!0),s?a(this.view):a});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(An.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(gK))try{if(u(this.view,e.range,e))return!0}catch(c){Ga(this.view.state,c,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let a=SK(this.view),o={left:r.left-a.left,top:r.top-a.top,right:r.right+a.right,bottom:r.bottom+a.bottom},{offsetWidth:s,offsetHeight:l}=this.view.scrollDOM;p7e(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==ur.LTR)}}function R7e(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class f9 extends Ru{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function EK(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=GJ(t.focusNode,t.focusOffset),i=$J(t.focusNode,t.focusOffset),a=r||i;if(i&&r&&i.node!=r.node){let s=Zn.get(i.node);if(!s||s instanceof Ds&&s.text!=i.node.nodeValue)a=i;else if(n.docView.lastCompositionAfterCursor){let l=Zn.get(r.node);!l||l instanceof Ds&&l.text!=r.node.nodeValue||(a=i)}}if(n.docView.lastCompositionAfterCursor=a!=r,!a)return null;let o=e-a.offset;return{from:o,to:o+a.node.nodeValue.length,node:a.node}}function I7e(n,e,t){let r=EK(n,t);if(!r)return null;let{node:i,from:a,to:o}=r,s=i.nodeValue;if(/[\n\r]/.test(s)||n.state.doc.sliceString(r.from,r.to)!=s)return null;let l=e.invertedDesc,u=new Yo(l.mapPos(a),l.mapPos(o),a,o),c=[];for(let h=i.parentNode;;h=h.parentNode){let d=Zn.get(h);if(d instanceof Mu)c.push({node:h,deco:d.mark});else{if(d instanceof Qr||h.nodeName=="DIV"&&h.parentNode==n.contentDOM)return{range:u,text:i,marks:c,line:h};if(h!=n.contentDOM)c.push({node:h,deco:new Sy({inclusive:!0,attributes:S7e(h),tagName:h.tagName.toLowerCase()})});else return null}}}function L7e(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let F7e=class{constructor(){this.changes=[]}compareRange(n,e){I3(n,e,this.changes)}comparePoint(n,e){I3(n,e,this.changes)}};function B7e(n,e,t){let r=new F7e;return An.compare(n,e,t,r),r.changes}function z7e(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function U7e(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function j7e(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),a=e-i.from;if(i.length==0)return at.cursor(e);a==0?t=1:a==i.length&&(t=-1);let o=a,s=a;t<0?o=Oi(i.text,a,!1):s=Oi(i.text,a);let l=r(i.text.slice(o,s));for(;o>0;){let u=Oi(i.text,o,!1);if(r(i.text.slice(u,o))!=l)break;o=u}for(;s<i.length;){let u=Oi(i.text,s);if(r(i.text.slice(s,u))!=l)break;s=u}return at.range(o+i.from,s+i.from)}function H7e(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function V7e(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function lT(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function p9(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function m9(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function U3(n,e,t){let r,i,a,o,s=!1,l,u,c,h;for(let p=n.firstChild;p;p=p.nextSibling){let v=im(p);for(let y=0;y<v.length;y++){let g=v[y];i&&lT(i,g)&&(g=p9(m9(g,i.bottom),i.top));let w=H7e(e,g),b=V7e(t,g);if(w==0&&b==0)return p.nodeType==3?g9(p,e,t):U3(p,e,t);if(!r||o>b||o==b&&a>w){r=p,i=g,a=w,o=b;let m=b?t<g.top?-1:1:w?e<g.left?-1:1:0;s=!m||(m>0?y<v.length-1:y>0)}w==0?t>g.bottom&&(!c||c.bottom<g.bottom)?(l=p,c=g):t<g.top&&(!h||h.top>g.top)&&(u=p,h=g):c&&lT(c,g)?c=m9(c,g.bottom):h&&lT(h,g)&&(h=p9(h,g.top))}}if(c&&c.bottom>=t?(r=l,i=c):h&&h.top<=t&&(r=u,i=h),!r)return{node:n,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return g9(r,d,t);if(s&&r.contentEditable!="false")return U3(r,d,t);let f=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:f}}function g9(n,e,t){let r=n.nodeValue.length,i=-1,a=1e9,o=0;for(let s=0;s<r;s++){let l=Dd(n,s,s+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let h=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<a){let d=e>=(c.left+c.right)/2,f=d;if((At.chrome||At.gecko)&&Dd(n,s).getBoundingClientRect().left==c.right&&(f=!d),h<=0)return{node:n,offset:s+(f?1:0)};i=s+(f?1:0),a=h}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function _K(n,e,t,r=-1){var i,a;let o=n.contentDOM.getBoundingClientRect(),s=o.top+n.viewState.paddingTop,l,{docHeight:u}=n.viewState,{x:c,y:h}=e,d=h-s;if(d<0)return 0;if(d>u)return n.state.doc.length;for(let m=n.viewState.heightOracle.textHeight/2,x=!1;l=n.elementAtHeight(d),l.type!=Aa.Text;)for(;d=r>0?l.bottom+m:l.top-m,!(d>=0&&d<=u);){if(x)return t?null:0;x=!0,r=-r}h=s+d;let f=l.from;if(f<n.viewport.from)return n.viewport.from==0?0:t?null:v9(n,o,l,c,h);if(f>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:v9(n,o,l,c,h);let p=n.dom.ownerDocument,v=n.root.elementFromPoint?n.root:p,y=v.elementFromPoint(c,h);y&&!n.contentDOM.contains(y)&&(y=null),y||(c=Math.max(o.left+1,Math.min(o.right-1,c)),y=v.elementFromPoint(c,h),y&&!n.contentDOM.contains(y)&&(y=null));let g,w=-1;if(y&&((i=n.docView.nearest(y))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let m=p.caretPositionFromPoint(c,h);m&&({offsetNode:g,offset:w}=m)}else if(p.caretRangeFromPoint){let m=p.caretRangeFromPoint(c,h);m&&({startContainer:g,startOffset:w}=m,(!n.contentDOM.contains(g)||At.safari&&W7e(g,w,c)||At.chrome&&q7e(g,w,c))&&(g=void 0))}}if(!g||!n.docView.dom.contains(g)){let m=Qr.find(n.docView,f);if(!m)return d>l.top+l.height/2?l.to:l.from;({node:g,offset:w}=U3(m.dom,c,h))}let b=n.docView.nearest(g);if(!b)return null;if(b.isWidget&&((a=b.dom)===null||a===void 0?void 0:a.nodeType)==1){let m=b.dom.getBoundingClientRect();return e.y<m.top||e.y<=m.bottom&&e.x<=(m.left+m.right)/2?b.posAtStart:b.posAtEnd}else return b.localPosFromDOM(g,w)+b.posAtStart}function v9(n,e,t,r,i){let a=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let s=n.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(n.defaultLineHeight-s)*.5)/s);a+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+A3(o,a,n.state.tabSize)}function W7e(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Dd(n,r-1,r).getBoundingClientRect().left>t}function q7e(n,e,t){if(e!=0)return!1;for(let i=n;;){let a=i.parentNode;if(!a||a.nodeType!=1||a.firstChild!=i)return!1;if(a.classList.contains("cm-line"))break;i=a}let r=n.nodeType==1?n.getBoundingClientRect():Dd(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function j3(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==Aa.Text))return r}return t}function G7e(n,e,t,r){let i=j3(n,e.head),a=!r||i.type!=Aa.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(a){let o=n.dom.getBoundingClientRect(),s=n.textDirectionAt(i.from),l=n.posAtCoords({x:t==(s==ur.LTR)?o.right-1:o.left+1,y:(a.top+a.bottom)/2});if(l!=null)return at.cursor(l,t?-1:1)}return at.cursor(t?i.to:i.from,t?-1:1)}function y9(n,e,t,r){let i=n.state.doc.lineAt(e.head),a=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let s=e,l=null;;){let u=N7e(i,a,o,s,t),c=sK;if(!u){if(i.number==(t?n.state.doc.lines:1))return s;c=`
`,i=n.state.doc.line(i.number+(t?1:-1)),a=n.bidiSpans(i),u=n.visualLineSide(i,!t)}if(l){if(!l(c))return s}else{if(!r)return u;l=r(c)}s=u}}function $7e(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return a=>{let o=r(a);return i==pr.Space&&(i=o),i==o}}function X7e(n,e,t,r){let i=e.head,a=t?1:-1;if(i==(t?n.state.doc.length:0))return at.cursor(i,e.assoc);let o=e.goalColumn,s,l=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(i,e.assoc||-1),c=n.documentTop;if(u)o==null&&(o=u.left-l.left),s=a<0?u.top:u.bottom;else{let f=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-f.from))),s=(a<0?f.top:f.bottom)+c}let h=l.left+o,d=r??n.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=s+(d+f)*a,v=_K(n,{x:h,y:p},!1,a);if(p<l.top||p>l.bottom||(a<0?v<i:v>i)){let y=n.docView.coordsForChar(v),g=!y||p<y.top?-1:1;return at.cursor(v,g,void 0,o)}}}function fw(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(a,o,s)=>{if(e>a&&e<o){let l=r||t||(e-a<o-e?-1:1);e=l<0?a:o,r=l}});if(!r)return e}}function uT(n,e,t){let r=fw(n.state.facet(lP).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:at.cursor(r,r<t.from?1:-1)}class Y7e{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,At.safari&&e.contentDOM.addEventListener("input",()=>null),At.gecko&&hje(e.contentDOM.ownerDocument)}handleEvent(e){!rje(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Z7e(e),r=this.handlers,i=this.view.contentDOM;for(let a in t)if(a!="scroll"){let o=!t[a].handlers.length,s=r[a];s&&o!=!s.handlers.length&&(i.removeEventListener(a,this.handleEvent),s=null),s||i.addEventListener(a,this.handleEvent,{passive:o})}for(let a in r)a!="scroll"&&!t[a]&&i.removeEventListener(a,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&AK.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),At.android&&At.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return At.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=CK.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||J7e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Op(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:At.safari&&!At.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function b9(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){Ga(t.state,i)}}}function Z7e(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec;if(i&&i.domEventHandlers)for(let a in i.domEventHandlers){let o=i.domEventHandlers[a];o&&t(a).handlers.push(b9(r.value,o))}if(i&&i.domEventObservers)for(let a in i.domEventObservers){let o=i.domEventObservers[a];o&&t(a).observers.push(b9(r.value,o))}}for(let r in ks)t(r).handlers.push(ks[r]);for(let r in ns)t(r).observers.push(ns[r]);return e}const CK=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],J7e="dthko",AK=[16,17,18,20,91,92,224,225],mx=6;function gx(n){return Math.max(0,n)*.7+8}function K7e(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class Q7e{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=m7e(e.contentDOM),this.atoms=e.state.facet(lP).map(o=>o(e));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(xn.allowMultipleSelections)&&eje(e,t),this.dragging=nje(e,t)&&kK(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&K7e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,a=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=SK(this.view);e.clientX-o.left<=a.left+mx?r=-gx(a.left-e.clientX):e.clientX+o.right>=a.right-mx&&(r=gx(e.clientX-a.right)),e.clientY-o.top<=a.top+mx?i=-gx(a.top-e.clientY):e.clientY+o.bottom>=a.bottom-mx&&(i=gx(e.clientY-a.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],a=null;if(i.empty){let o=fw(this.atoms,i.from,0);o!=i.from&&(a=at.cursor(o,-1))}else{let o=fw(this.atoms,i.from,-1),s=fw(this.atoms,i.to,1);(o!=i.from||s!=i.to)&&(a=at.range(i.from==i.anchor?o:s,i.from==i.head?o:s))}a&&(t||(t=e.ranges.slice()),t[r]=a)}return t?at.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function eje(n,e){let t=n.state.facet(lK);return t.length?t[0](e):At.mac?e.metaKey:e.ctrlKey}function tje(n,e){let t=n.state.facet(uK);return t.length?t[0](e):At.mac?!e.altKey:!e.ctrlKey}function nje(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=Pv(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let a=0;a<i.length;a++){let o=i[a];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function rje(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Zn.get(t))&&r.ignoreEvent(e))return!1;return!0}const ks=Object.create(null),ns=Object.create(null),TK=At.ie&&At.ie_version<15||At.ios&&At.webkit_version<604;function ije(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),MK(n,t.value)},50)}function MK(n,e){let{state:t}=n,r,i=1,a=t.toText(e),o=a.lines==t.selection.ranges.length;if(H3!=null&&t.selection.ranges.every(s=>s.empty)&&H3==a.toString()){let s=-1;r=t.changeByRange(l=>{let u=t.doc.lineAt(l.from);if(u.from==s)return{range:l};s=u.from;let c=t.toText((o?a.line(i++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:c},range:at.cursor(l.from+c.length)}})}else o?r=t.changeByRange(s=>{let l=a.line(i++);return{changes:{from:s.from,to:s.to,insert:l.text},range:at.cursor(s.from+l.length)}}):r=t.replaceSelection(a);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}ns.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};ks.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);ns.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};ns.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};ks.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(cK))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=sje(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new Q7e(n,e,t,r)),r&&n.observer.ignore(()=>{VJ(n.contentDOM);let a=n.root.activeElement;a&&!a.contains(n.contentDOM)&&a.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function x9(n,e,t,r){if(r==1)return at.cursor(e,t);if(r==2)return j7e(n.state,e,t);{let i=Qr.find(n.docView,e),a=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:a.from,s=i?i.posAtEnd:a.to;return s<n.state.doc.length&&s==a.to&&s++,at.range(o,s)}}let DK=(n,e)=>n>=e.top&&n<=e.bottom,w9=(n,e,t)=>DK(e,t)&&n>=t.left&&n<=t.right;function aje(n,e,t,r){let i=Qr.find(n.docView,e);if(!i)return 1;let a=e-i.posAtStart;if(a==0)return 1;if(a==i.length)return-1;let o=i.coordsAt(a,-1);if(o&&w9(t,r,o))return-1;let s=i.coordsAt(a,1);return s&&w9(t,r,s)?1:o&&DK(r,o)?-1:1}function S9(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:aje(n,t,e.clientX,e.clientY)}}const oje=At.ie&&At.ie_version<=11;let E9=null,_9=0,C9=0;function kK(n){if(!oje)return n.detail;let e=E9,t=C9;return E9=n,C9=Date.now(),_9=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(_9+1)%3:1}function sje(n,e){let t=S9(n,e),r=kK(e),i=n.state.selection;return{update(a){a.docChanged&&(t.pos=a.changes.mapPos(t.pos),i=i.map(a.changes))},get(a,o,s){let l=S9(n,a),u,c=x9(n,l.pos,l.bias,r);if(t.pos!=l.pos&&!o){let h=x9(n,t.pos,t.bias,r),d=Math.min(h.from,c.from),f=Math.max(h.to,c.to);c=d<c.from?at.range(d,f):at.range(f,d)}return o?i.replaceRange(i.main.extend(c.from,c.to)):s&&r==1&&i.ranges.length>1&&(u=lje(i,l.pos))?u:s?i.addRange(c):at.create([c])}}}function lje(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return at.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}ks.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let a=i.posAtStart,o=a+i.length;(a>=t.to||o<=t.from)&&(t=at.range(a,o))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};ks.dragend=n=>(n.inputState.draggedContent=null,!1);function A9(n,e,t,r){if(!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:a}=n.inputState,o=r&&a&&tje(n,e)?{from:a.from,to:a.to}:null,s={from:i,insert:t},l=n.state.changes(o?[o,s]:s);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}ks.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,a=()=>{++i==t.length&&A9(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let s=new FileReader;s.onerror=a,s.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(s.result)||(r[o]=s.result),a()},s.readAsText(t[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return A9(n,e,r,!0),!0}return!1};ks.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=TK?null:e.clipboardData;return t?(MK(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(ije(n),!1)};function uje(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function cje(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:a}of n.selection.ranges){let o=n.doc.lineAt(a);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:r}}let H3=null;ks.copy=ks.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=cje(n.state);if(!t&&!i)return!1;H3=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let a=TK?null:e.clipboardData;return a?(a.clearData(),a.setData("text/plain",t),!0):(uje(n,t),!1)};const NK=Dl.define();function OK(n,e){let t=[];for(let r of n.facet(fK)){let i=r(n,e);i&&t.push(i)}return t?n.update({effects:t,annotations:NK.of(!0)}):null}function PK(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=OK(n.state,e);t?n.dispatch(t):n.update([])}},10)}ns.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),PK(n)};ns.blur=n=>{n.observer.clearSelectionRange(),PK(n)};ns.compositionstart=ns.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};ns.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,At.chrome&&At.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};ns.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};ks.beforeinput=(n,e)=>{var t;let r;if(At.chrome&&At.android&&(r=CK.find(i=>i.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>i+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return At.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),At.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>ns.compositionend(n,e),20),!1};const T9=new Set;function hje(n){T9.has(n)||(T9.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const M9=["pre-wrap","normal","pre-line","break-spaces"];class dje{constructor(e){this.lineWrapping=e,this.doc=Nn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return M9.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,a,o){let s=M9.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=a,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class fje{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class al{constructor(e,t,r,i,a){this.from=e,this.length=t,this.top=r,this.height=i,this._content=a}get type(){return typeof this._content=="number"?Aa.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Jc?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new al(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var or=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(or||(or={}));const pw=.001;class Ta{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>pw&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return Ta.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let a=this,o=r.doc;for(let s=i.length-1;s>=0;s--){let{fromA:l,toA:u,fromB:c,toB:h}=i[s],d=a.lineAt(l,or.ByPosNoHeight,r.setDoc(t),0,0),f=d.to>=u?d:a.lineAt(u,or.ByPosNoHeight,r,0,0);for(h+=f.to-u,u=f.to;s>0&&d.from<=i[s-1].toA;)l=i[s-1].fromA,c=i[s-1].fromB,s--,l<d.from&&(d=a.lineAt(l,or.ByPosNoHeight,r,0,0));c+=d.from-l,l=d.from;let p=uP.build(r.setDoc(o),e,c,h);a=a.replace(l,u,p)}return a.updateHeight(r,0)}static empty(){return new uo(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,a=0;for(;;)if(t==r)if(i>a*2){let s=e[t-1];s.break?e.splice(--t,1,s.left,null,s.right):e.splice(--t,1,s.left,s.right),r+=1+s.break,i-=s.size}else if(a>i*2){let s=e[r];s.break?e.splice(r,1,s.left,null,s.right):e.splice(r,1,s.left,s.right),r+=2+s.break,a-=s.size}else break;else if(i<a){let s=e[t++];s&&(i+=s.size)}else{let s=e[--r];s&&(a+=s.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new pje(Ta.of(e.slice(0,t)),o,Ta.of(e.slice(r)))}}Ta.prototype.size=1;class RK extends Ta{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new al(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,a){return this.blockAt(0,r,i,a)}forEachLine(e,t,r,i,a,o){e<=a+this.length&&t>=a&&o(this.blockAt(0,r,i,a))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class uo extends RK{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new al(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof uo||i instanceof _i&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof _i?i=new uo(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Ta.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class _i extends Ta{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,a=i-r+1,o,s=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*a);o=l/a,this.length>a+1&&(s=(this.height-l)/(this.length-a-1))}else o=this.height/a;return{firstLine:r,lastLine:i,perLine:o,perChar:s}}blockAt(e,t,r,i){let{firstLine:a,lastLine:o,perLine:s,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let u=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=t.doc.lineAt(u),h=s+c.length*l,d=Math.max(r,e-h/2);return new al(c.from,c.length,d,h,0)}else{let u=Math.max(0,Math.min(o-a,Math.floor((e-r)/s))),{from:c,length:h}=t.doc.line(a+u);return new al(c,h,r+s*u,s,0)}}lineAt(e,t,r,i,a){if(t==or.ByHeight)return this.blockAt(e,r,i,a);if(t==or.ByPosNoHeight){let{from:f,to:p}=r.doc.lineAt(e);return new al(f,p-f,0,0,0)}let{firstLine:o,perLine:s,perChar:l}=this.heightMetrics(r,a),u=r.doc.lineAt(e),c=s+u.length*l,h=u.number-o,d=i+s*h+l*(u.from-a-h);return new al(u.from,u.length,Math.max(i,Math.min(d,i+this.height-c)),c,0)}forEachLine(e,t,r,i,a,o){e=Math.max(e,a),t=Math.min(t,a+this.length);let{firstLine:s,perLine:l,perChar:u}=this.heightMetrics(r,a);for(let c=e,h=i;c<=t;){let d=r.doc.lineAt(c);if(c==e){let p=d.number-s;h+=l*p+u*(e-a-p)}let f=l+u*d.length;o(new al(d.from,d.length,h,f,0)),h+=f,c=d.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let a=r[r.length-1];a instanceof _i?r[r.length-1]=new _i(a.length+i):r.push(null,new _i(i-1))}if(e>0){let a=r[0];a instanceof _i?r[0]=new _i(e+a.length):r.unshift(new _i(e-1),null)}return Ta.of(r)}decomposeLeft(e,t){t.push(new _i(e-1),null)}decomposeRight(e,t){t.push(null,new _i(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let a=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],s=Math.max(t,i.from),l=-1;for(i.from>t&&o.push(new _i(i.from-t-1).updateHeight(e,t));s<=a&&i.more;){let c=e.doc.lineAt(s).length;o.length&&o.push(null);let h=i.heights[i.index++];l==-1?l=h:Math.abs(h-l)>=pw&&(l=-2);let d=new uo(c,h);d.outdated=!1,o.push(d),s+=c+1}s<=a&&o.push(null,new _i(a-s).updateHeight(e,s));let u=Ta.of(o);return(l<0||Math.abs(u.height-this.height)>=pw||Math.abs(l-this.heightMetrics(e,t).perLine)>=pw)&&(e.heightChanged=!0),u}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class pje extends Ta{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let a=r+this.left.height;return e<a?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,a,i+this.left.length+this.break)}lineAt(e,t,r,i,a){let o=i+this.left.height,s=a+this.left.length+this.break,l=t==or.ByHeight?e<o:e<s,u=l?this.left.lineAt(e,t,r,i,a):this.right.lineAt(e,t,r,o,s);if(this.break||(l?u.to<s:u.from>s))return u;let c=t==or.ByPosNoHeight?or.ByPosNoHeight:or.ByPos;return l?u.join(this.right.lineAt(s,c,r,o,s)):this.left.lineAt(s,c,r,i,a).join(u)}forEachLine(e,t,r,i,a,o){let s=i+this.left.height,l=a+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,a,o),t>=l&&this.right.forEachLine(e,t,r,s,l,o);else{let u=this.lineAt(l,or.ByPos,r,i,a);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,a,o),u.to>=e&&u.from<=t&&o(u),t>u.to&&this.right.forEachLine(u.to+1,t,r,s,l,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let a=[];e>0&&this.decomposeLeft(e,a);let o=a.length;for(let s of r)a.push(s);if(e>0&&D9(a,o-1),t<this.length){let s=a.length;this.decomposeRight(t,a),D9(a,s)}return Ta.of(a)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ta.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:a,right:o}=this,s=t+a.length+this.break,l=null;return i&&i.from<=t+a.length&&i.more?l=a=a.updateHeight(e,t,r,i):a.updateHeight(e,t,r),i&&i.from<=s+o.length&&i.more?l=o=o.updateHeight(e,s,r,i):o.updateHeight(e,s,r),l?this.balanced(a,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function D9(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof _i&&(r=n[e+1])instanceof _i&&n.splice(e-1,3,new _i(t.length+1+r.length))}const mje=5;class uP{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof uo?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new uo(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,a=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new RK(o,i,r)):(o||a||i>=mje)&&this.addLineDeco(i,a,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new uo(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new _i(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof uo)return e;let t=new uo(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof uo)&&!this.isCovered?this.nodes.push(new uo(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof uo&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let a=new uP(r,e);return An.spans(t,r,i,a,0),a.finish(r)}}function gje(n,e,t){let r=new vje;return An.compare(n,e,t,r,0),r.changes}class vje{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&I3(e,t,this.changes,5)}}function yje(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,a=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),s=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let u=n.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let d=c.getBoundingClientRect();a=Math.max(a,d.left),o=Math.min(o,d.right),s=Math.max(s,d.top),l=u==n.parentNode?d.bottom:Math.min(l,d.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:a-t.left,right:Math.max(a,o)-t.left,top:s-(t.top+e),bottom:Math.max(s,l)-(t.top+e)}}function bje(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class cT{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],a=t[r];if(i.from!=a.from||i.to!=a.to||i.size!=a.size)return!1}return!0}draw(e,t){return jt.replace({widget:new xje(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class xje extends Ru{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class k9{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=N9,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ur.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(sP).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new dje(t),this.stateDeco=e.facet(Rv).filter(r=>typeof r!="function"),this.heightMap=Ta.empty().applyChanges(this.stateDeco,Nn.empty,this.heightOracle.setDoc(e.doc),[new Yo(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=jt.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:a,to:o})=>i>=a&&i<=o)){let{from:a,to:o}=this.lineBlockAt(i);e.push(new vx(a,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?N9:new cP(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Qg(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Rv).filter(c=>typeof c!="function");let i=e.changedRanges,a=Yo.extendWithRanges(i,gje(r,this.stateDeco,e?e.changes:ri.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=o&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(mK)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,a=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?ur.RTL:ur.LTR;let o=this.heightOracle.mustRefreshForWrapping(a),s=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let u=0,c=0;if(s.width&&s.height){let{scaleX:m,scaleY:x}=HJ(t,s);(m>.005&&Math.abs(this.scaleX-m)>.005||x>.005&&Math.abs(this.scaleY-x)>.005)&&(this.scaleX=m,this.scaleY=x,u|=8,o=l=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,d=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=d)&&(this.paddingTop=h,this.paddingBottom=d,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=qJ(e.scrollDOM);let p=(this.printing?bje:yje)(t,this.paddingTop),v=p.top-this.pixelViewport.top,y=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let w=s.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let m=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(m)&&(o=!0),o||i.lineWrapping&&Math.abs(w-this.contentDOMWidth)>i.charWidth){let{lineHeight:x,charWidth:S,textHeight:C}=e.docView.measureTextSize();o=x>0&&i.refresh(a,x,S,C,w/S,m),o&&(e.docView.minWidth=0,u|=8)}v>0&&y>0?c=Math.max(v,y):v<0&&y<0&&(c=Math.min(v,y)),i.heightChanged=!1;for(let x of this.viewports){let S=x.from==this.viewport.from?m:e.docView.measureVisibleLineHeights(x);this.heightMap=(o?Ta.empty().applyChanges(this.stateDeco,Nn.empty,this.heightOracle,[new Yo(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new fje(x.from,S))}i.heightChanged&&(u|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,a=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,l=new vx(i.lineAt(o-r*1e3,or.ByHeight,a,0,0).from,i.lineAt(s+(1-r)*1e3,or.ByHeight,a,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(u,or.ByPos,a,0,0),d;t.y=="center"?d=(h.top+h.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<l.from?d=h.top:d=h.bottom-c,l=new vx(i.lineAt(d-1e3/2,or.ByHeight,a,0,0).from,i.lineAt(d+c+1e3/2,or.ByHeight,a,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new vx(this.heightMap.lineAt(r,or.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,or.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,or.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(t,or.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||a>=s+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&a<s+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new cT(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,a=i>>1,o=i<<1;if(this.defaultTextDirection!=ur.LTR&&!r)return[];let s=[],l=(c,h,d,f)=>{if(h-c<a)return;let p=this.state.selection.main,v=[p.from];p.empty||v.push(p.to);for(let g of v)if(g>c&&g<h){l(c,g-10,d,f),l(g+10,h,d,f);return}let y=Sje(e,g=>g.from>=d.from&&g.to<=d.to&&Math.abs(g.from-c)<a&&Math.abs(g.to-h)<a&&!v.some(w=>g.from<w&&g.to>w));if(!y){if(h<d.to&&t&&r&&t.visibleRanges.some(g=>g.from<=h&&g.to>=h)){let g=t.moveToLineBoundary(at.cursor(h),!1,!0).head;g>c&&(h=g)}y=new cT(c,h,this.gapSize(d,c,h,f))}s.push(y)},u=c=>{if(c.length<o||c.type!=Aa.Text)return;let h=wje(c.from,c.to,this.stateDeco);if(h.total<o)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,f,p;if(r){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,g;if(d!=null){let w=bx(h,d),b=((this.visibleBottom-this.visibleTop)/2+v)/c.height;y=w-b,g=w+b}else y=(this.visibleTop-c.top-v)/c.height,g=(this.visibleBottom-c.top+v)/c.height;f=yx(h,y),p=yx(h,g)}else{let v=h.total*this.heightOracle.charWidth,y=i*this.heightOracle.charWidth,g,w;if(d!=null){let b=bx(h,d),m=((this.pixelViewport.right-this.pixelViewport.left)/2+y)/v;g=b-m,w=b+m}else g=(this.pixelViewport.left-y)/v,w=(this.pixelViewport.right+y)/v;f=yx(h,g),p=yx(h,w)}f>c.from&&l(c.from,f,c,h),p<c.to&&l(p,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return s}gapSize(e,t,r,i){let a=bx(i,r)-bx(i,t);return this.heightOracle.lineWrapping?e.height*a:i.total*this.heightOracle.charWidth*a}updateLineGaps(e){cT.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=jt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];An.spans(e,this.viewport.from,this.viewport.to,{span(i,a){t.push({from:i,to:a})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,a)=>i.from!=t[a].from||i.to!=t[a].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Qg(this.heightMap.lineAt(e,or.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Qg(this.heightMap.lineAt(this.scaler.fromDOM(e),or.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Qg(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class vx{constructor(e,t){this.from=e,this.to=t}}function wje(n,e,t){let r=[],i=n,a=0;return An.spans(t,n,e,{span(){},point(o,s){o>i&&(r.push({from:i,to:o}),a+=o-i),i=s}},20),i<e&&(r.push({from:i,to:e}),a+=e-i),{total:a,ranges:r}}function yx({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:a,to:o}=e[i],s=o-a;if(r<=s)return a+r;r-=s}}function bx(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function Sje(n,e){for(let t of n)if(e(t))return t}const N9={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class cP{constructor(e,t,r){let i=0,a=0,o=0;this.viewports=r.map(({from:s,to:l})=>{let u=t.lineAt(s,or.ByPos,e,0,0).top,c=t.lineAt(l,or.ByPos,e,0,0).bottom;return i+=c-u,{from:s,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let s of this.viewports)s.domTop=o+(s.top-a)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),a=s.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.top)return i+(e-r)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);r=a.bottom,i=a.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.domTop)return r+(e-i)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);r=a.bottom,i=a.domBottom}}eq(e){return e instanceof cP?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function Qg(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new al(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>Qg(i,e)):n._content)}const xx=Dt.define({combine:n=>n.join(" ")}),V3=Dt.define({combine:n=>n.indexOf(!0)>-1}),W3=Yc.newName(),IK=Yc.newName(),LK=Yc.newName(),FK={"&light":"."+IK,"&dark":"."+LK};function q3(n,e,t){return new Yc(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const Eje=q3("."+W3,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},FK),e0="";class _je{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(xn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=e0}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let a=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let s=Zn.get(i),l=Zn.get(o);(s&&l?s.breakAfter:(s?s.breakAfter:$S(i))||$S(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>a)&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,o=1,s;if(this.lineSeparator?(a=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(s=i.exec(t))&&(a=s.index,o=s[0].length),this.append(t.slice(r,a<0?t.length:a)),a<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=a+o}}readNode(e){if(e.cmIgnore)return;let t=Zn.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(Cje(e,r.node,r.offset)?t:0))}}function Cje(n,e,t){for(;;){if(!e||t<Tu(e))return!1;if(e==n)return!0;t=Md(e)+1,e=e.parentNode}}class O9{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Aje{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:a,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let s=a||o?[]:Dje(e),l=new _je(s,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=kje(s,this.bounds.from)}else{let s=e.observer.selectionRange,l=a&&a.node==s.focusNode&&a.offset==s.focusOffset||!D3(e.contentDOM,s.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(s.focusNode,s.focusOffset),u=o&&o.node==s.anchorNode&&o.offset==s.anchorOffset||!D3(e.contentDOM,s.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(s.anchorNode,s.anchorOffset),c=e.viewport;if((At.ios||At.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(l,u),d=Math.max(l,u),f=c.from-h,p=c.to-d;(f==0||f==1||h==0)&&(p==0||p==-1||d==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=at.single(u,l)}}}function BK(n,e){let t,{newSel:r}=e,i=n.state.selection.main,a=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:s}=e.bounds,l=i.from,u=null;(a===8||At.android&&e.text.length<s-o)&&(l=i.to,u="end");let c=Mje(n.state.doc.sliceString(o,s,e0),e.text,l-o,u);c&&(At.chrome&&a==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==e0+e0&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:Nn.of(e.text.slice(c.from,c.toB).split(e0))})}else r&&(!n.hasFocus&&n.state.facet(W_)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:(At.mac||At.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=at.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Nn.of([" "])}):At.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=at.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Nn.of([" "])}),t)return zK(n,t,r,a);if(r&&!r.main.eq(i)){let o=!1,s="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),s=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:o,userEvent:s}),!0}else return!1}function zK(n,e,t,r=-1){if(At.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(At.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Op(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Op(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Op(n.contentDOM,"Delete",46)))return!0;let a=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,s=()=>o||(o=Tje(n,e,t));return n.state.facet(dK).some(l=>l(n,e.from,e.to,a,s))||n.dispatch(s()),!0}function Tje(n,e,t){let r,i=n.state,a=i.selection.main;if(e.from>=a.from&&e.to<=a.to&&e.to-e.from>=(a.to-a.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let s=a.from<e.from?i.sliceDoc(a.from,e.from):"",l=a.to>e.to?i.sliceDoc(e.to,a.to):"";r=i.replaceSelection(n.state.toText(s+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let s=i.changes(e),l=t&&t.main.to<=s.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=a.to&&e.to>=a.to-10){let u=n.state.sliceDoc(e.from,e.to),c,h=t&&EK(n,t.main.head);if(h){let p=e.insert.length-(e.to-e.from);c={from:h.from,to:h.to-p}}else c=n.state.doc.lineAt(a.head);let d=a.to-e.to,f=a.to-a.from;r=i.changeByRange(p=>{if(p.from==a.from&&p.to==a.to)return{changes:s,range:l||p.map(s)};let v=p.to-d,y=v-u.length;if(p.to-p.from!=f||n.state.sliceDoc(y,v)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let g=i.changes({from:y,to:v,insert:e.insert}),w=p.to-a.to;return{changes:g,range:l?at.range(Math.max(0,l.anchor+w),Math.max(0,l.head+w)):p.map(g)}})}else r={changes:s,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function Mje(n,e,t,r){let i=Math.min(n.length,e.length),a=0;for(;a<i&&n.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==i&&n.length==e.length)return null;let o=n.length,s=e.length;for(;o>0&&s>0&&n.charCodeAt(o-1)==e.charCodeAt(s-1);)o--,s--;if(r=="end"){let l=Math.max(0,a-Math.min(o,s));t-=o+l-a}if(o<a&&n.length<e.length){let l=t<=a&&t>=o?a-t:0;a-=l,s=a+(s-o),o=a}else if(s<a){let l=t<=a&&t>=s?a-t:0;a-=l,o=a+(o-s),s=a}return{from:a,toA:o,toB:s}}function Dje(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:a}=n.observer.selectionRange;return t&&(e.push(new O9(t,r)),(i!=t||a!=r)&&e.push(new O9(i,a))),e}function kje(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?at.single(t+e,r+e):null}const Nje={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},hT=At.ie&&At.ie_version<=11;class Oje{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new g7e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(At.ie&&At.ie_version<=11||At.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&(this.editContext=new Rje(e),e.contentDOM.editContext=this.editContext.editContext),hT&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){e.type=="change"&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(W_)?r.root.activeElement!=this.dom:!dw(r.dom,i))return;let a=i.anchorNode&&r.docView.nearest(i.anchorNode);if(a&&a.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(At.ie&&At.ie_version<=11||At.android&&At.chrome)&&!r.state.selection.main.empty&&i.focusNode&&E0(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Pv(e.root);if(!t)return!1;let r=At.safari&&e.root.nodeType==11&&d7e(this.dom.ownerDocument)==this.dom&&Pje(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=dw(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&y7e(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Nje),hT&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),hT&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&Op(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let a of e){let o=this.readMutation(a);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&dw(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let a=new Aje(this.view,e,t,r);return this.view.docView.domChanged={newSel:a.newSel?a.newSel.main:null},a}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=BK(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=P9(t,e.previousSibling||e.target.previousSibling,-1),i=P9(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&this.editContext.update(e)}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function P9(n,e,t){for(;e;){let r=Zn.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function R9(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,a=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return E0(o.node,o.offset,i,a)&&([t,r,i,a]=[i,a,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:a}}function Pje(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return R9(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?R9(n,t):null}class Rje{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});t.addEventListener("textupdate",r=>{let{anchor:i}=e.state.selection.main,a={from:this.toEditorPos(r.updateRangeStart),to:this.toEditorPos(r.updateRangeEnd),insert:Nn.of(r.text.split(`
`))};a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),!(a.from==a.to&&!a.insert.length)&&(this.pendingContextChange=a,zK(e,a,at.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd))),this.pendingContextChange&&this.revertPending(e.state))}),t.addEventListener("characterboundsupdate",r=>{let i=[],a=null;for(let o=this.toEditorPos(r.rangeStart),s=this.toEditorPos(r.rangeEnd);o<s;o++){let l=e.coordsForChar(o);a=l&&new DOMRect(l.left,l.right,l.right-l.left,l.bottom-l.top)||a||new DOMRect,i.push(a)}t.updateCharacterBounds(r.rangeStart,i)}),t.addEventListener("textformatupdate",r=>{let i=[];for(let a of r.getTextFormats()){let o=a.underlineStyle,s=a.underlineThickness;if(o!="None"&&s!="None"){let l=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${s=="Thin"?1:2}px`;i.push(jt.mark({attributes:{style:l}}).range(this.toEditorPos(a.rangeStart),this.toEditorPos(a.rangeEnd)))}}e.dispatch({effects:vK.of(jt.set(i))})}),t.addEventListener("compositionstart",()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)}),t.addEventListener("compositionend",()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null}),this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Pv(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((a,o,s,l,u)=>{if(r)return;let c=u.length-(o-a);if(i&&o>=i.to)if(i.from==a&&i.to==o&&i.insert.eq(u)){i=this.pendingContextChange=null,t+=c;return}else i=null,this.revertPending(e.state);if(a+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(a<this.to){if(a<this.from||o>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(a),this.toContextPos(o),u.toString()),this.to+=c}t+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.to+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}}class bt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(r=>r.forEach(i=>t(i,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||v7e(e.parent)||document,this.viewState=new k9(e.state||xn.create(e)),e.scrollTo&&e.scrollTo.is(px)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Jg).map(r=>new sT(r));for(let r of this.plugins)r.update(this);this.observer=new Oje(this),this.inputState=new Y7e(this),this.inputState.ensureHandlers(this.plugins),this.docView=new d9(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let t=e.length==1&&e[0]instanceof oi?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,a=this.state;for(let d of e){if(d.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=d.state}if(this.destroyed){this.viewState.state=a;return}let o=this.hasFocus,s=0,l=null;e.some(d=>d.annotation(NK))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=OK(a,o),l||(s=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(c=null)):this.observer.clear(),a.facet(xn.phrases)!=this.state.facet(xn.phrases))return this.setState(a);i=XS.create(this,a,e),i.flags|=s;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(h&&(h=h.map(d.changes)),d.scrollIntoView){let{main:f}=d.state.selection;h=new Pp(f.empty?f:at.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of d.effects)f.is(px)&&(h=f.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=YS.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Kg)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(xx)!=i.state.facet(xx)&&(this.viewState.mustMeasureContent=!0),(t||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let d of this.state.facet(z3))try{d(i)}catch(f){Ga(this.state,f,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!BK(this,c)&&u.force&&Op(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new k9(e),this.plugins=e.facet(Jg).map(r=>new sT(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new d9(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Jg),r=e.state.facet(Jg);if(t!=r){let i=[];for(let a of r){let o=t.indexOf(a);if(o<0)i.push(new sT(a));else{let s=this.plugins[o];s.mustUpdate=e,i.push(s)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){Ga(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:a,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let s=0;;s++){if(o<0)if(qJ(r))a=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(i);a=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(s>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return Ga(this.state,p),I9}}),h=XS.create(this,this.state,[]),d=!1;h.flags|=l,t?t.flags|=l:t=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),d=this.docView.update(h),d&&this.docViewUpdate());for(let f=0;f<u.length;f++)if(c[f]!=I9)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){Ga(this.state,p)}if(d&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let f=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-o;if(f>1||f<-1){i=i+f,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let s of this.state.facet(z3))s(t)}get themeClasses(){return W3+" "+(this.state.facet(V3)?LK:IK)+" "+this.state.facet(xx)}updateAttrs(){let e=L9(this,yK,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(W_)?"true":"false",class:"cm-content",style:`${At.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),L9(this,sP,t);let r=this.observer.ignore(()=>{let i=R3(this.contentDOM,this.contentAttrs,t),a=R3(this.dom,this.editorAttrs,e);return i||a});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(bt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Kg);let e=this.state.facet(bt.cspNonce);Yc.mount(this.root,this.styleModules.concat(Eje).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return uT(this,e,y9(this,e,t,r))}moveByGroup(e,t){return uT(this,e,y9(this,e,t,r=>$7e(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),a=r[t?r.length-1:0];return at.cursor(a.side(t,i)+e.from,a.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return G7e(this,e,t,r)}moveVertically(e,t,r){return uT(this,e,X7e(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),_K(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),a=this.bidiSpans(i),o=a[wc.find(a,e-i.from,-1,t)];return H_(r,o.dir==ur.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(pK)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Ije)return oK(e.length);let t=this.textDirectionAt(e.from),r;for(let a of this.bidiCache)if(a.from==e.from&&a.dir==t&&(a.fresh||aK(a.isolates,r=h9(this,e))))return a.order;r||(r=h9(this,e));let i=k7e(e.text,t,r);return this.bidiCache.push(new YS(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||At.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{VJ(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return px.of(new Pp(typeof e=="number"?at.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return px.of(new Pp(at.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return jr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return jr.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=Yc.newName(),i=[xx.of(r),Kg.of(q3(`.${r}`,e))];return t&&t.dark&&i.push(V3.of(!0)),i}static baseTheme(e){return qd.lowest(Kg.of(q3("."+W3,e,FK)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&Zn.get(r)||Zn.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}bt.styleModule=Kg;bt.inputHandler=dK;bt.scrollHandler=gK;bt.focusChangeEffect=fK;bt.perLineTextDirection=pK;bt.exceptionSink=hK;bt.updateListener=z3;bt.editable=W_;bt.mouseSelectionStyle=cK;bt.dragMovesSelection=uK;bt.clickAddsSelectionRange=lK;bt.decorations=Rv;bt.outerDecorations=bK;bt.atomicRanges=lP;bt.bidiIsolatedRanges=xK;bt.scrollMargins=wK;bt.darkTheme=V3;bt.cspNonce=Dt.define({combine:n=>n.length?n[0]:""});bt.contentAttributes=sP;bt.editorAttributes=yK;bt.lineWrapping=bt.contentAttributes.of({class:"cm-lineWrapping"});bt.announce=dn.define();const Ije=4096,I9={};class YS{constructor(e,t,r,i,a,o){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=a,this.order=o}static update(e,t){if(t.empty&&!e.some(a=>a.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:ur.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let o=e[a];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new YS(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function L9(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let a=r[i],o=typeof a=="function"?a(n):a;o&&P3(o,t)}return t}const Lje=At.mac?"mac":At.windows?"win":At.linux?"linux":"key";function Fje(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,a,o,s;for(let l=0;l<t.length-1;++l){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))s=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))a=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?s=!0:a=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),a&&(r="Ctrl-"+r),s&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function wx(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const Bje=qd.default(bt.domEventHandlers({keydown(n,e){return jK(UK(e.state),n,e,"editor")}})),_y=Dt.define({enables:Bje}),F9=new WeakMap;function UK(n){let e=n.facet(_y),t=F9.get(e);return t||F9.set(e,t=jje(e.reduce((r,i)=>r.concat(i),[]))),t}function zje(n,e,t){return jK(UK(n.state),e,n,t)}let dc=null;const Uje=4e3;function jje(n,e=Lje){let t=Object.create(null),r=Object.create(null),i=(o,s)=>{let l=r[o];if(l==null)r[o]=s;else if(l!=s)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},a=(o,s,l,u,c)=>{var h,d;let f=t[o]||(t[o]=Object.create(null)),p=s.split(/ (?!$)/).map(g=>Fje(g,e));for(let g=1;g<p.length;g++){let w=p.slice(0,g).join(" ");i(w,!0),f[w]||(f[w]={preventDefault:!0,stopPropagation:!1,run:[b=>{let m=dc={view:b,prefix:w,scope:o};return setTimeout(()=>{dc==m&&(dc=null)},Uje),!0}]})}let v=p.join(" ");i(v,!1);let y=f[v]||(f[v]={preventDefault:!1,stopPropagation:!1,run:((d=(h=f._any)===null||h===void 0?void 0:h.run)===null||d===void 0?void 0:d.slice())||[]});l&&y.run.push(l),u&&(y.preventDefault=!0),c&&(y.stopPropagation=!0)};for(let o of n){let s=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of s){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let d in c)c[d].run.push(f=>h(f,G3))}let l=o[e]||o.key;if(l)for(let u of s)a(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&a(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}let G3=null;function jK(n,e,t,r){G3=e;let i=h7e(e),a=Ti(i,0),o=Vo(a)==i.length&&i!=" ",s="",l=!1,u=!1,c=!1;dc&&dc.view==t&&dc.scope==r&&(s=dc.prefix+" ",AK.indexOf(e.keyCode)<0&&(u=!0,dc=null));let h=new Set,d=y=>{if(y){for(let g of y.run)if(!h.has(g)&&(h.add(g),g(t)))return y.stopPropagation&&(c=!0),!0;y.preventDefault&&(y.stopPropagation&&(c=!0),u=!0)}return!1},f=n[r],p,v;return f&&(d(f[s+wx(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(At.windows&&e.ctrlKey&&e.altKey)&&(p=Zc[e.keyCode])&&p!=i?(d(f[s+wx(p,e,!0)])||e.shiftKey&&(v=Ov[e.keyCode])!=i&&v!=p&&d(f[s+wx(v,e,!1)]))&&(l=!0):o&&e.shiftKey&&d(f[s+wx(i,e,!0)])&&(l=!0),!l&&d(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),G3=null,l}class Cy{constructor(e,t,r,i,a){this.className=e,this.left=t,this.top=r,this.width=i,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let a=HK(e);return[new Cy(t,i.left-a.left,i.top-a.top,null,i.bottom-i.top)]}else return Hje(e,t,r)}}function HK(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==ur.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function B9(n,e,t,r){let i=n.coordsAtPos(e,t*2);if(!i)return r;let a=n.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,s=n.posAtCoords({x:a.left+1,y:o}),l=n.posAtCoords({x:a.right-1,y:o});return s==null||l==null?r:{from:Math.max(r.from,Math.min(s,l)),to:Math.min(r.to,Math.max(s,l))}}function Hje(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),a=n.textDirection==ur.LTR,o=n.contentDOM,s=o.getBoundingClientRect(),l=HK(n),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),h=s.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=s.right-(c?parseInt(c.paddingRight):0),f=j3(n,r),p=j3(n,i),v=f.type==Aa.Text?f:null,y=p.type==Aa.Text?p:null;if(v&&(n.lineWrapping||f.widgetLineBreaks)&&(v=B9(n,r,1,v)),y&&(n.lineWrapping||p.widgetLineBreaks)&&(y=B9(n,i,-1,y)),v&&y&&v.from==y.from&&v.to==y.to)return w(b(t.from,t.to,v));{let x=v?b(t.from,null,v):m(f,!1),S=y?b(null,t.to,y):m(p,!0),C=[];return(v||f).to<(y||p).from-(v&&y?1:0)||f.widgetLineBreaks>1&&x.bottom+n.defaultLineHeight/2<S.top?C.push(g(h,x.bottom,d,S.top)):x.bottom<S.top&&n.elementAtHeight((x.bottom+S.top)/2).type==Aa.Text&&(x.bottom=S.top=(x.bottom+S.top)/2),w(x).concat(C).concat(w(S))}function g(x,S,C,T){return new Cy(e,x-l.left,S-l.top-.01,C-x,T-S+.01)}function w({top:x,bottom:S,horizontal:C}){let T=[];for(let M=0;M<C.length;M+=2)T.push(g(C[M],x,C[M+1],S));return T}function b(x,S,C){let T=1e9,M=-1e9,A=[];function D(L,F,k,P,z){let B=n.coordsAtPos(L,L==C.to?-2:2),X=n.coordsAtPos(k,k==C.from?2:-2);!B||!X||(T=Math.min(B.top,X.top,T),M=Math.max(B.bottom,X.bottom,M),z==ur.LTR?A.push(a&&F?h:B.left,a&&P?d:X.right):A.push(!a&&P?h:X.left,!a&&F?d:B.right))}let O=x??C.from,U=S??C.to;for(let L of n.visibleRanges)if(L.to>O&&L.from<U)for(let F=Math.max(L.from,O),k=Math.min(L.to,U);;){let P=n.state.doc.lineAt(F);for(let z of n.bidiSpans(P)){let B=z.from+P.from,X=z.to+P.from;if(B>=k)break;X>F&&D(Math.max(B,F),x==null&&B<=O,Math.min(X,k),S==null&&X>=U,z.dir)}if(F=P.to+1,F>=k)break}return A.length==0&&D(O,x==null,U,S==null,n.textDirection),{top:T,bottom:M,horizontal:A}}function m(x,S){let C=s.top+(S?x.top:x.bottom);return{top:C,bottom:C,horizontal:[]}}}function Vje(n,e){return n.constructor==e.constructor&&n.eq(e)}class Wje{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(mw)!=e.state.facet(mw)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(mw);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!Vje(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const mw=Dt.define();function VK(n){return[jr.define(e=>new Wje(e,n)),mw.of(n)]}const WK=!At.ios,Iv=Dt.define({combine(n){return kl(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function qje(n={}){return[Iv.of(n),Gje,$je,Xje,mK.of(!0)]}function qK(n){return n.startState.facet(Iv)!=n.state.facet(Iv)}const Gje=VK({above:!0,markers(n){let{state:e}=n,t=e.facet(Iv),r=[];for(let i of e.selection.ranges){let a=i==e.selection.main;if(i.empty?!a||WK:t.drawRangeCursor){let o=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",s=i.empty?i:at.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Cy.forRange(n,o,s))r.push(l)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=qK(n);return t&&z9(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){z9(e.state,n)},class:"cm-cursorLayer"});function z9(n,e){e.style.animationDuration=n.facet(Iv).cursorBlinkRate+"ms"}const $je=VK({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Cy.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||qK(n)},class:"cm-selectionLayer"}),$3={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};WK&&($3[".cm-line"].caretColor=$3[".cm-content"].caretColor="transparent !important");const Xje=qd.highest(bt.theme($3)),GK=dn.define({map(n,e){return n==null?null:e.mapPos(n)}}),t0=Fi.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(GK)?r.value:t,n)}}),Yje=jr.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(t0);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(t0)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(t0),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let r=n.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-r.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(t0)!=n&&this.view.dispatch({effects:GK.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Zje(){return[t0,Yje]}function U9(n,e,t,r,i){e.lastIndex=0;for(let a=n.iterRange(t,r),o=t,s;!a.next().done;o+=a.value.length)if(!a.lineBreak)for(;s=e.exec(a.value);)i(o+s.index,s)}function Jje(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:a}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),a=Math.min(n.state.doc.lineAt(a).to,a+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=a:r.push({from:i,to:a});return r}class Kje{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:a,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(s,l,u,c)=>i(c,u,u+s[0].length,s,l);else if(typeof r=="function")this.addMatch=(s,l,u,c)=>{let h=r(s,l,u);h&&c(u,u+s[0].length,h)};else if(r)this.addMatch=(s,l,u,c)=>c(u,u+s[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=o}createDeco(e){let t=new Xc,r=t.add.bind(t);for(let{from:i,to:a}of Jje(e,this.maxLength))U9(e.state.doc,this.regexp,i,a,(o,s)=>this.addMatch(s,e,o,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((a,o,s,l)=>{l>e.view.viewport.from&&s<e.view.viewport.to&&(r=Math.min(s,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let a of e.visibleRanges){let o=Math.max(a.from,r),s=Math.min(a.to,i);if(s>o){let l=e.state.doc.lineAt(o),u=l.to<s?e.state.doc.lineAt(s):l,c=Math.max(a.from,l.from),h=Math.min(a.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;s<u.to;s++)if(this.boundary.test(u.text[s-u.from])){h=s;break}}let d=[],f,p=(v,y,g)=>d.push(g.range(v,y));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<h-l.from;)this.addMatch(f,e,f.index+l.from,p);else U9(e.state.doc,this.regexp,c,h,(v,y)=>this.addMatch(y,e,v,p));t=t.update({filterFrom:c,filterTo:h,filter:(v,y)=>v<c||y>h,add:d})}}return t}}const X3=/x/.unicode!=null?"gu":"g",Qje=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,X3),eHe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let dT=null;function tHe(){var n;if(dT==null&&typeof document<"u"&&document.body){let e=document.body.style;dT=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return dT||!1}const gw=Dt.define({combine(n){let e=kl(n,{render:null,specialChars:Qje,addSpecialChars:null});return(e.replaceTabs=!tHe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,X3)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,X3)),e}});function nHe(n={}){return[gw.of(n),rHe()]}let j9=null;function rHe(){return j9||(j9=jr.fromClass(class{constructor(n){this.view=n,this.decorations=jt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(gw)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new Kje({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,a=Ti(e[0],0);if(a==9){let o=i.lineAt(r),s=t.state.tabSize,l=zm(o.text,s,r-o.from);return jt.replace({widget:new sHe((s-l%s)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=jt.replace({widget:new oHe(n,a)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(gw);n.startState.facet(gw)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const iHe="";function aHe(n){return n>=32?iHe:n==10?"":String.fromCharCode(9216+n)}class oHe extends Ru{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=aHe(this.code),r=e.state.phrase("Control character")+" "+(eHe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let a=document.createElement("span");return a.textContent=t,a.title=r,a.setAttribute("aria-label",r),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class sHe extends Ru{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function lHe(){return cHe}const uHe=jt.line({class:"cm-activeLine"}),cHe=jr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(uHe.range(i.from)),e=i.from)}return jt.set(t)}},{decorations:n=>n.decorations});class hHe extends Ru{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?im(e.firstChild):[];if(!t.length)return null;let r=window.getComputedStyle(e.parentNode),i=H_(t[0],r.direction!="rtl"),a=parseInt(r.lineHeight);return i.bottom-i.top>a*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+a}:i}ignoreEvent(){return!1}}function dHe(n){return jr.fromClass(class{constructor(e){this.view=e,this.placeholder=n?jt.set([jt.widget({widget:new hHe(n),side:1}).range(0)]):jt.none}get decorations(){return this.view.state.doc.length?jt.none:this.placeholder}},{decorations:e=>e.decorations})}const Y3=2e3;function fHe(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),a=[];if(e.off>Y3||t.off>Y3||e.col<0||t.col<0){let o=Math.min(e.off,t.off),s=Math.max(e.off,t.off);for(let l=r;l<=i;l++){let u=n.doc.line(l);u.length<=s&&a.push(at.range(u.from+o,u.to+s))}}else{let o=Math.min(e.col,t.col),s=Math.max(e.col,t.col);for(let l=r;l<=i;l++){let u=n.doc.line(l),c=A3(u.text,o,n.tabSize,!0);if(c<0)a.push(at.cursor(u.to));else{let h=A3(u.text,s,n.tabSize);a.push(at.range(u.from+c,u.from+h))}}}return a}function pHe(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function H9(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,a=i>Y3?-1:i==r.length?pHe(n,e.clientX):zm(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:a,off:i}}function mHe(n,e){let t=H9(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let a=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(a);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},r=r.map(i.changes)}},get(i,a,o){let s=H9(n,i);if(!s)return r;let l=fHe(n.state,t,s);return l.length?o?at.create(l.concat(r.ranges)):at.create(l):r}}:null}function gHe(n){let e=t=>t.altKey&&t.button==0;return bt.mouseSelectionStyle.of((t,r)=>e(r)?mHe(t,r):null)}const vHe={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},yHe={style:"cursor: crosshair"};function bHe(n={}){let[e,t]=vHe[n.key||"Alt"],r=jr.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,bt.contentAttributes.of(i=>{var a;return!((a=i.plugin(r))===null||a===void 0)&&a.isDown?yHe:null})]}const Fg="-10000px";class $K{constructor(e,t,r,i){this.facet=t,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let a=null;this.tooltipViews=this.tooltips.map(o=>a=r(o,a))}update(e,t){var r;let i=e.state.facet(this.facet),a=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],s=t?[]:null;for(let l=0;l<a.length;l++){let u=a[l],c=-1;if(u){for(let h=0;h<this.tooltips.length;h++){let d=this.tooltips[h];d&&d.create==u.create&&(c=h)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),s&&(s[l]=!!u.above);else{let h=o[l]=this.tooltipViews[c];s&&(s[l]=t[c]),h.update&&h.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return t&&(s.forEach((l,u)=>t[u]=l),t.length=s.length),this.input=i,this.tooltips=a,this.tooltipViews=o,!0}}function xHe(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const fT=Dt.define({combine:n=>{var e,t,r;return{position:At.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||xHe}}}),V9=new WeakMap,hP=jr.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(fT);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new $K(n,dP,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(fT);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Fg,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect(),e=1,t=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(At.gecko)r=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==Fg&&i.style.left=="0px"){let a=i.getBoundingClientRect();r=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(r||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,t=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((i,a)=>{let o=this.manager.tooltipViews[a];return o.getCoords?o.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(fT).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:r}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let s of this.manager.tooltipViews)s.dom.style.position="absolute"}let{editor:t,space:r,scaleX:i,scaleY:a}=n,o=[];for(let s=0;s<this.manager.tooltips.length;s++){let l=this.manager.tooltips[s],u=this.manager.tooltipViews[s],{dom:c}=u,h=n.pos[s],d=n.size[s];if(!h||h.bottom<=Math.max(t.top,r.top)||h.top>=Math.min(t.bottom,r.bottom)||h.right<Math.max(t.left,r.left)-.1||h.left>Math.min(t.right,r.right)+.1){c.style.top=Fg;continue}let f=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,v=d.right-d.left,y=(e=V9.get(u))!==null&&e!==void 0?e:d.bottom-d.top,g=u.offset||SHe,w=this.view.textDirection==ur.LTR,b=d.width>r.right-r.left?w?r.left:r.right-d.width:w?Math.min(h.left-(f?14:0)+g.x,r.right-v):Math.max(r.left,h.left-v+(f?14:0)-g.x),m=this.above[s];!l.strictSide&&(m?h.top-(d.bottom-d.top)-g.y<r.top:h.bottom+(d.bottom-d.top)+g.y>r.bottom)&&m==r.bottom-h.bottom>h.top-r.top&&(m=this.above[s]=!m);let x=(m?h.top-r.top:r.bottom-h.bottom)-p;if(x<y&&u.resize!==!1){if(x<this.view.defaultLineHeight){c.style.top=Fg;continue}V9.set(u,y),c.style.height=(y=x)/a+"px"}else c.style.height&&(c.style.height="");let S=m?h.top-y-p-g.y:h.bottom+p+g.y,C=b+v;if(u.overlap!==!0)for(let T of o)T.left<C&&T.right>b&&T.top<S+y&&T.bottom>S&&(S=m?T.top-y-2-p:T.bottom+p+2);if(this.position=="absolute"?(c.style.top=(S-n.parent.top)/a+"px",c.style.left=(b-n.parent.left)/i+"px"):(c.style.top=S/a+"px",c.style.left=b/i+"px"),f){let T=h.left+(w?g.x:-g.x)-(b+14-7);f.style.left=T/i+"px"}u.overlap!==!0&&o.push({left:b,top:S,right:C,bottom:S+y}),c.classList.toggle("cm-tooltip-above",m),c.classList.toggle("cm-tooltip-below",!m),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Fg}},{eventObservers:{scroll(){this.maybeMeasure()}}}),wHe=bt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),SHe={x:0,y:0},dP=Dt.define({enables:[hP,wHe]}),ZS=Dt.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class q_{static create(e){return new q_(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new $K(e,ZS,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const EHe=dP.compute([ZS],n=>{let e=n.facet(ZS);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:q_.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class _He{constructor(e,t,r,i,a){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,a=1;if(r instanceof xc)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let s=e.coordsAtPos(i);if(!s||t.y<s.top||t.y>s.bottom||t.x<s.left-e.defaultCharacterWidth||t.x>s.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=l&&l.dir==ur.RTL?-1:1;a=t.x<s.left?-u:u}let o=this.source(e,i,a);if(o!=null&&o.then){let s=this.pending={pos:i};o.then(l=>{this.pending==s&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Ga(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(hP),t=e?e.manager.tooltips.findIndex(r=>r.create==q_.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:a}=this;if(i.length&&a&&!CHe(a.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,s=(r=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:o;(o==s?this.view.posAtCoords(this.lastMove)!=o:!AHe(this.view,o,s,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Sx=4;function CHe(n,e){let t=n.getBoundingClientRect();return e.clientX>=t.left-Sx&&e.clientX<=t.right+Sx&&e.clientY>=t.top-Sx&&e.clientY<=t.bottom+Sx}function AHe(n,e,t,r,i,a){let o=n.scrollDOM.getBoundingClientRect(),s=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,s)<i)return!1;let l=n.posAtCoords({x:r,y:i},!1);return l>=e&&l<=t}function THe(n,e={}){let t=dn.define(),r=Fi.define({create(){return[]},update(i,a){if(i.length&&(e.hideOnChange&&(a.docChanged||a.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(a,o))),a.docChanged)){let o=[];for(let s of i){let l=a.changes.mapPos(s.pos,-1,xa.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),s);u.pos=l,u.end!=null&&(u.end=a.changes.mapPos(u.end)),o.push(u)}}i=o}for(let o of a.effects)o.is(t)&&(i=o.value),o.is(MHe)&&(i=[]);return i},provide:i=>ZS.from(i)});return[r,jr.define(i=>new _He(i,n,r,t,e.hoverTime||300)),EHe]}function XK(n,e){let t=n.plugin(hP);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const MHe=dn.define(),W9=Dt.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Lv(n,e){let t=n.plugin(YK),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const YK=jr.fromClass(class{constructor(n){this.input=n.state.facet(Fv),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(W9);this.top=new Ex(n,!0,e.topContainer),this.bottom=new Ex(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(W9);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ex(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ex(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Fv);if(t!=this.input){let r=t.filter(l=>l),i=[],a=[],o=[],s=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(n.view),s.push(c)):(c=this.panels[u],c.update&&c.update(n)),i.push(c),(c.top?a:o).push(c)}this.specs=r,this.panels=i,this.top.sync(a),this.bottom.sync(o);for(let l of s)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>bt.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Ex{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=q9(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=q9(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function q9(n){let e=n.nextSibling;return n.remove(),e}const Fv=Dt.define({enables:YK});class Du extends Td{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Du.prototype.elementClass="";Du.prototype.toDOM=void 0;Du.prototype.mapMode=xa.TrackBefore;Du.prototype.startSide=Du.prototype.endSide=-1;Du.prototype.point=!0;const vw=Dt.define(),DHe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>An.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},C0=Dt.define();function kHe(n){return[ZK(),C0.of(Object.assign(Object.assign({},DHe),n))]}const G9=Dt.define({combine:n=>n.some(e=>e)});function ZK(n){return[NHe]}const NHe=jr.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(C0).map(e=>new X9(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(G9),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(G9)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=An.iter(this.view.state.facet(vw),this.view.viewport.from),r=[],i=this.gutters.map(a=>new OHe(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(a.type)){let o=!0;for(let s of a.type)if(s.type==Aa.Text&&o){Z3(t,r,s.from);for(let l of i)l.line(this.view,s,r);o=!1}else if(s.widget)for(let l of i)l.widget(this.view,s)}else if(a.type==Aa.Text){Z3(t,r,a.from);for(let o of i)o.line(this.view,a,r)}else if(a.widget)for(let o of i)o.widget(this.view,a);for(let a of i)a.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(C0),t=n.state.facet(C0),r=n.docChanged||n.heightChanged||n.viewportChanged||!An.eq(n.startState.facet(vw),n.state.facet(vw),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let a of t){let o=e.indexOf(a);o<0?i.push(new X9(this.view,a)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let a of this.gutters)a.dom.remove(),i.indexOf(a)<0&&a.destroy();for(let a of i)this.dom.appendChild(a.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>bt.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==ur.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function $9(n){return Array.isArray(n)?n:[n]}function Z3(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class OHe{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=An.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,a=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let s=new JK(e,o,a,r);i.elements.push(s),i.dom.appendChild(s.dom)}else i.elements[this.i].update(e,o,a,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];Z3(this.cursor,i,t.from),r.length&&(i=i.concat(r));let a=this.gutter.config.lineMarker(e,t,i);a&&i.unshift(a);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t);r&&this.addElement(e,t,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class X9{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let a=i.target,o;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let l=a.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let s=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[r](e,s,i)&&i.preventDefault()});this.markers=$9(t.markers(e)),t.initialSpacer&&(this.spacer=new JK(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=$9(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!An.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class JK{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),PHe(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let a=0,o=0;;){let s=o,l=a<t.length?t[a++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){s=h,u=!0;break}}else s=this.markers.length;for(;o<s;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function PHe(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const RHe=Dt.define(),pp=Dt.define({combine(n){return kl(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let a=r[i],o=t[i];r[i]=a?(s,l,u)=>a(s,l,u)||o(s,l,u):o}return r}})}});class pT extends Du{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function mT(n,e){return n.state.facet(pp).formatNumber(e,n.state)}const IHe=C0.compute([pp],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(RHe)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new pT(mT(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(pp)!=e.state.facet(pp),initialSpacer(e){return new pT(mT(e,Y9(e.state.doc.lines)))},updateSpacer(e,t){let r=mT(t.view,Y9(t.view.state.doc.lines));return r==e.number?e:new pT(r)},domEventHandlers:n.facet(pp).domEventHandlers}));function LHe(n={}){return[pp.of(n),ZK(),IHe]}function Y9(n){let e=9;for(;e<n;)e=e*10+9;return e}const FHe=new class extends Du{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},BHe=vw.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(FHe.range(i)))}return An.of(e)});function zHe(){return BHe}const UHe=1024;let jHe=0;class gT{constructor(e,t){this.from=e,this.to=t}}class Sn{constructor(e={}){this.id=jHe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=rs.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Sn.closedBy=new Sn({deserialize:n=>n.split(" ")});Sn.openedBy=new Sn({deserialize:n=>n.split(" ")});Sn.group=new Sn({deserialize:n=>n.split(" ")});Sn.isolate=new Sn({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Sn.contextHash=new Sn({perNode:!0});Sn.lookAhead=new Sn({perNode:!0});Sn.mounted=new Sn({perNode:!0});class JS{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Sn.mounted.id]}}const HHe=Object.create(null);class rs{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):HHe,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new rs(e.name||"",t,e.id,r);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(i)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[a[0].id]=a[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Sn.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(Sn.group),a=-1;a<(i?i.length:0);a++){let o=t[a<0?r.name:i[a]];if(o)return o}}}}rs.none=new rs("",Object.create(null),0,8);const _x=new WeakMap,Z9=new WeakMap;var Di;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Di||(Di={}));class Qi{constructor(e,t,r,i,a){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,a&&a.length){this.props=Object.create(null);for(let[o,s]of a)this.props[typeof o=="number"?o:o.id]=s}}toString(){let e=JS.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new K3(this.topNode,e)}cursorAt(e,t=0,r=0){let i=_x.get(this)||this.topNode,a=new K3(i);return a.moveTo(e,t),_x.set(this,a._tree),a}get topNode(){return new Zo(this,0,0,null)}resolve(e,t=0){let r=Bv(_x.get(this)||this.topNode,e,t,!1);return _x.set(this,r),r}resolveInner(e,t=0){let r=Bv(Z9.get(this)||this.topNode,e,t,!0);return Z9.set(this,r),r}resolveStack(e,t=0){return qHe(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:a=this.length}=e,o=e.mode||0,s=(o&Di.IncludeAnonymous)>0;for(let l=this.cursor(o|Di.IncludeAnonymous);;){let u=!1;if(l.from<=a&&l.to>=i&&(!s&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(s||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:mP(rs.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new Qi(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new Qi(rs.none,t,r,i)))}static build(e){return GHe(e)}}Qi.empty=new Qi(rs.none,[],[],0);class fP{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new fP(this.buffer,this.index)}}class Kc{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return rs.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],a=i.name;if(/\W/.test(a)&&!i.isError&&(a=JSON.stringify(a)),e+=4,r==e)return a;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return a+"("+o.join(",")+")"}findChild(e,t,r,i,a){let{buffer:o}=this,s=-1;for(let l=e;l!=t&&!(KK(a,i,o[l+1],o[l+2])&&(s=l,r>0));l=o[l+3]);return s}slice(e,t,r){let i=this.buffer,a=new Uint16Array(t-e),o=0;for(let s=e,l=0;s<t;){a[l++]=i[s++],a[l++]=i[s++]-r;let u=a[l++]=i[s++]-r;a[l++]=i[s++]-e,o=Math.max(o,u)}return new Kc(a,o,this.set)}}function KK(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Bv(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof Zo&&n.index<0?null:n.parent;if(!o)return n;n=o}let a=r?0:Di.IgnoreOverlays;if(r)for(let o=n,s=o.parent;s;o=s,s=o.parent)o instanceof Zo&&o.index<0&&((i=s.enter(e,t,a))===null||i===void 0?void 0:i.from)!=o.from&&(n=s);for(;;){let o=n.enter(e,t,a);if(!o)return n;n=o}}class QK{cursor(e=0){return new K3(this,e)}getChild(e,t=null,r=null){let i=J9(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return J9(this,e,t,r)}resolve(e,t=0){return Bv(this,e,t,!1)}resolveInner(e,t=0){return Bv(this,e,t,!0)}matchContext(e){return J3(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class Zo extends QK{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,a=0){for(let o=this;;){for(let{children:s,positions:l}=o._tree,u=t>0?s.length:-1;e!=u;e+=t){let c=s[e],h=l[e]+o.from;if(KK(i,r,h,h+c.length)){if(c instanceof Kc){if(a&Di.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,t,r-h,i);if(d>-1)return new Sc(new VHe(o,c,e,h),null,d)}else if(a&Di.IncludeAnonymous||!c.type.isAnonymous||pP(c)){let d;if(!(a&Di.IgnoreMounts)&&(d=JS.get(c))&&!d.overlay)return new Zo(d.tree,h,e,o);let f=new Zo(c,h,e,o);return a&Di.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(t<0?c.children.length-1:0,t,r,i)}}}if(a&Di.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&Di.IgnoreOverlays)&&(i=JS.get(this._tree))&&i.overlay){let a=e-this.from;for(let{from:o,to:s}of i.overlay)if((t>0?o<=a:o<a)&&(t<0?s>=a:s>a))return new Zo(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function J9(n,e,t,r){let i=n.cursor(),a=[];if(!i.firstChild())return a;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return a}for(;;){if(r!=null&&i.type.is(r))return a;if(i.type.is(e)&&a.push(i.node),!i.nextSibling())return r==null?a:[]}}function J3(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class VHe{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class Sc extends QK{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return a<0?null:new Sc(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&Di.ExcludeBuffers)return null;let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return a<0?null:new Sc(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Sc(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Sc(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,a=r.buffer[this.index+3];if(a>i){let o=r.buffer[this.index+1];e.push(r.slice(i,a,o)),t.push(0)}return new Qi(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function eQ(n){if(!n.length)return null;let e=0,t=n[0];for(let a=1;a<n.length;a++){let o=n[a];(o.from>t.from||o.to<t.to)&&(t=o,e=a)}let r=t instanceof Zo&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new WHe(i,t)}class WHe{constructor(e,t){this.heads=e,this.node=t}get next(){return eQ(this.heads)}}function qHe(n,e,t){let r=n.resolveInner(e,t),i=null;for(let a=r instanceof Zo?r:r.context.parent;a;a=a.parent)if(a.index<0){let o=a.parent;(i||(i=[r])).push(o.resolve(e,t)),a=o}else{let o=JS.get(a.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let s=new Zo(o.tree,o.overlay[0].from+a.from,-1,a);(i||(i=[r])).push(Bv(s,e,t,!1))}}return i?eQ(i):r}class K3{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Zo)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Zo?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,a=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&Di.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Di.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Di.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(i.buffer.buffer[a+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let a=t+e,o=e<0?-1:r._tree.children.length;a!=o;a+=e){let s=r._tree.children[a];if(this.mode&Di.IncludeAnonymous||s instanceof Kc||!s.type.isAnonymous||pP(s))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,a=this.stack.length;a>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=a+1;break e}i=this.stack[--a]}for(let i=r;i<this.stack.length;i++)t=new Sc(this.buffer,t,this.stack[i]);return this.bufferNode=new Sc(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return J3(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,a=this.stack.length-1;i>=0;a--){if(a<0)return J3(this.node,e,i);let o=r[t.buffer[this.stack[a]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function pP(n){return n.children.some(e=>e instanceof Kc||!e.type.isAnonymous||pP(e))}function GHe(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=UHe,reused:a=[],minRepeatType:o=r.types.length}=n,s=Array.isArray(t)?new fP(t,t.length):t,l=r.types,u=0,c=0;function h(x,S,C,T,M,A){let{id:D,start:O,end:U,size:L}=s,F=c;for(;L<0;)if(s.next(),L==-1){let X=a[D];C.push(X),T.push(O-x);return}else if(L==-3){u=D;return}else if(L==-4){c=D;return}else throw new RangeError(`Unrecognized record size: ${L}`);let k=l[D],P,z,B=O-x;if(U-O<=i&&(z=y(s.pos-S,M))){let X=new Uint16Array(z.size-z.skip),J=s.pos-z.size,Q=X.length;for(;s.pos>J;)Q=g(z.start,X,Q);P=new Kc(X,U-z.start,r),B=z.start-x}else{let X=s.pos-L;s.next();let J=[],Q=[],Z=D>=o?D:-1,re=0,fe=U;for(;s.pos>X;)Z>=0&&s.id==Z&&s.size>=0?(s.end<=fe-i&&(p(J,Q,O,re,s.end,fe,Z,F),re=J.length,fe=s.end),s.next()):A>2500?d(O,X,J,Q):h(O,X,J,Q,Z,A+1);if(Z>=0&&re>0&&re<J.length&&p(J,Q,O,re,O,fe,Z,F),J.reverse(),Q.reverse(),Z>-1&&re>0){let se=f(k);P=mP(k,J,Q,0,J.length,0,U-O,se,se)}else P=v(k,J,Q,U-O,F-U)}C.push(P),T.push(B)}function d(x,S,C,T){let M=[],A=0,D=-1;for(;s.pos>S;){let{id:O,start:U,end:L,size:F}=s;if(F>4)s.next();else{if(D>-1&&U<D)break;D<0&&(D=L-i),M.push(O,U,L),A++,s.next()}}if(A){let O=new Uint16Array(A*4),U=M[M.length-2];for(let L=M.length-3,F=0;L>=0;L-=3)O[F++]=M[L],O[F++]=M[L+1]-U,O[F++]=M[L+2]-U,O[F++]=F;C.push(new Kc(O,M[2]-U,r)),T.push(U-x)}}function f(x){return(S,C,T)=>{let M=0,A=S.length-1,D,O;if(A>=0&&(D=S[A])instanceof Qi){if(!A&&D.type==x&&D.length==T)return D;(O=D.prop(Sn.lookAhead))&&(M=C[A]+D.length+O)}return v(x,S,C,T,M)}}function p(x,S,C,T,M,A,D,O){let U=[],L=[];for(;x.length>T;)U.push(x.pop()),L.push(S.pop()+C-M);x.push(v(r.types[D],U,L,A-M,O-A)),S.push(M-C)}function v(x,S,C,T,M=0,A){if(u){let D=[Sn.contextHash,u];A=A?[D].concat(A):[D]}if(M>25){let D=[Sn.lookAhead,M];A=A?[D].concat(A):[D]}return new Qi(x,S,C,T,A)}function y(x,S){let C=s.fork(),T=0,M=0,A=0,D=C.end-i,O={size:0,start:0,skip:0};e:for(let U=C.pos-x;C.pos>U;){let L=C.size;if(C.id==S&&L>=0){O.size=T,O.start=M,O.skip=A,A+=4,T+=4,C.next();continue}let F=C.pos-L;if(L<0||F<U||C.start<D)break;let k=C.id>=o?4:0,P=C.start;for(C.next();C.pos>F;){if(C.size<0)if(C.size==-3)k+=4;else break e;else C.id>=o&&(k+=4);C.next()}M=P,T+=L,A+=k}return(S<0||T==x)&&(O.size=T,O.start=M,O.skip=A),O.size>4?O:void 0}function g(x,S,C){let{id:T,start:M,end:A,size:D}=s;if(s.next(),D>=0&&T<o){let O=C;if(D>4){let U=s.pos-(D-4);for(;s.pos>U;)C=g(x,S,C)}S[--C]=O,S[--C]=A-x,S[--C]=M-x,S[--C]=T}else D==-3?u=T:D==-4&&(c=T);return C}let w=[],b=[];for(;s.pos>0;)h(n.start||0,n.bufferStart||0,w,b,-1,0);let m=(e=n.length)!==null&&e!==void 0?e:w.length?b[0]+w[0].length:0;return new Qi(l[n.topID],w.reverse(),b.reverse(),m)}const K9=new WeakMap;function yw(n,e){if(!n.isAnonymous||e instanceof Kc||e.type!=n)return 1;let t=K9.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof Qi)){t=1;break}t+=yw(n,r)}K9.set(e,t)}return t}function mP(n,e,t,r,i,a,o,s,l){let u=0;for(let p=r;p<i;p++)u+=yw(n,e[p]);let c=Math.ceil(u*1.5/8),h=[],d=[];function f(p,v,y,g,w){for(let b=y;b<g;){let m=b,x=v[b],S=yw(n,p[b]);for(b++;b<g;b++){let C=yw(n,p[b]);if(S+C>=c)break;S+=C}if(b==m+1){if(S>c){let C=p[m];f(C.children,C.positions,0,C.children.length,v[m]+w);continue}h.push(p[m])}else{let C=v[b-1]+p[b-1].length-x;h.push(mP(n,p,v,m,b,x,C,null,l))}d.push(x+w-a)}}return f(e,t,r,i,0),(s||l)(h,d,o)}class fd{constructor(e,t,r,i,a=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(a?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new fd(0,e.length,e,0,!1,r)];for(let a of t)a.to>e.length&&i.push(a);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],a=1,o=e.length?e[0]:null;for(let s=0,l=0,u=0;;s++){let c=s<t.length?t[s]:null,h=c?c.fromA:1e9;if(h-l>=r)for(;o&&o.from<h;){let d=o;if(l>=d.from||h<=d.to||u){let f=Math.max(d.from,l)-u,p=Math.min(d.to,h)-u;d=f>=p?null:new fd(f,p,d.tree,d.offset+u,s>0,!!c)}if(d&&i.push(d),o.to>h)break;o=a<e.length?e[a++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}class $He{startParse(e,t,r){return typeof e=="string"&&(e=new XHe(e)),r=r?r.length?r.map(i=>new gT(i.from,i.to)):[new gT(0,0)]:[new gT(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let a=i.advance();if(a)return a}}}class XHe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Sn({perNode:!0});let YHe=0;class nl{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=YHe++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new nl([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new KS;return t=>t.modified.indexOf(e)>-1?t:KS.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let ZHe=0;class KS{constructor(){this.instances=[],this.id=ZHe++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(s=>s.base==e&&JHe(t,s.modified));if(r)return r;let i=[],a=new nl(i,e,t);for(let s of t)s.instances.push(a);let o=KHe(t);for(let s of e.set)if(!s.modified.length)for(let l of o)i.push(KS.get(s,l));return a}}function JHe(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function KHe(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function QHe(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let a=[],o=2,s=i;for(let h=0;;){if(s=="..."&&h>0&&h+3==i.length){o=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!d)throw new RangeError("Invalid path: "+i);if(a.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),h+=d[0].length,h==i.length)break;let f=i[h++];if(h==i.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+i);s=i.slice(h)}let l=a.length-1,u=a[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new QS(r,o,l>0?a.slice(0,l):null);e[u]=c.sort(e[u])}}return tQ.add(e)}const tQ=new Sn;class QS{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}QS.empty=new QS([],2,null);function nQ(n,e){let t=Object.create(null);for(let a of n)if(!Array.isArray(a.tag))t[a.tag.id]=a.class;else for(let o of a.tag)t[o.id]=a.class;let{scope:r,all:i=null}=e||{};return{style:a=>{let o=i;for(let s of a)for(let l of s.set){let u=t[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:r}}function eVe(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function tVe(n,e,t,r=0,i=n.length){let a=new nVe(r,Array.isArray(e)?e:[e],t);a.highlightRange(n.cursor(),r,i,"",a.highlighters),a.flush(i)}class nVe{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,a){let{type:o,from:s,to:l}=e;if(s>=r||l<=t)return;o.isTop&&(a=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=i,c=rVe(e)||QS.empty,h=eVe(a,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(t,s),u),c.opaque)return;let d=e.tree&&e.tree.prop(Sn.mounted);if(d&&d.overlay){let f=e.node.enter(d.overlay[0].from+s,1),p=this.highlighters.filter(y=>!y.scope||y.scope(d.tree.type)),v=e.firstChild();for(let y=0,g=s;;y++){let w=y<d.overlay.length?d.overlay[y]:null,b=w?w.from+s:l,m=Math.max(t,g),x=Math.min(r,b);if(m<x&&v)for(;e.from<x&&(this.highlightRange(e,m,x,i,a),this.startSpan(Math.min(x,e.to),u),!(e.to>=b||!e.nextSibling())););if(!w||b>r)break;g=w.to+s,g>t&&(this.highlightRange(f.cursor(),Math.max(t,w.from+s),Math.min(r,g),"",p),this.startSpan(Math.min(r,g),u))}v&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,a),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function rVe(n){let e=n.type.prop(tQ);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const mt=nl.define,Cx=mt(),sc=mt(),Q9=mt(sc),e7=mt(sc),lc=mt(),Ax=mt(lc),vT=mt(lc),Ks=mt(),Nh=mt(Ks),Zs=mt(),Js=mt(),Q3=mt(),Bg=mt(Q3),Tx=mt(),tt={comment:Cx,lineComment:mt(Cx),blockComment:mt(Cx),docComment:mt(Cx),name:sc,variableName:mt(sc),typeName:Q9,tagName:mt(Q9),propertyName:e7,attributeName:mt(e7),className:mt(sc),labelName:mt(sc),namespace:mt(sc),macroName:mt(sc),literal:lc,string:Ax,docString:mt(Ax),character:mt(Ax),attributeValue:mt(Ax),number:vT,integer:mt(vT),float:mt(vT),bool:mt(lc),regexp:mt(lc),escape:mt(lc),color:mt(lc),url:mt(lc),keyword:Zs,self:mt(Zs),null:mt(Zs),atom:mt(Zs),unit:mt(Zs),modifier:mt(Zs),operatorKeyword:mt(Zs),controlKeyword:mt(Zs),definitionKeyword:mt(Zs),moduleKeyword:mt(Zs),operator:Js,derefOperator:mt(Js),arithmeticOperator:mt(Js),logicOperator:mt(Js),bitwiseOperator:mt(Js),compareOperator:mt(Js),updateOperator:mt(Js),definitionOperator:mt(Js),typeOperator:mt(Js),controlOperator:mt(Js),punctuation:Q3,separator:mt(Q3),bracket:Bg,angleBracket:mt(Bg),squareBracket:mt(Bg),paren:mt(Bg),brace:mt(Bg),content:Ks,heading:Nh,heading1:mt(Nh),heading2:mt(Nh),heading3:mt(Nh),heading4:mt(Nh),heading5:mt(Nh),heading6:mt(Nh),contentSeparator:mt(Ks),list:mt(Ks),quote:mt(Ks),emphasis:mt(Ks),strong:mt(Ks),link:mt(Ks),monospace:mt(Ks),strikethrough:mt(Ks),inserted:mt(),deleted:mt(),changed:mt(),invalid:mt(),meta:Tx,documentMeta:mt(Tx),annotation:mt(Tx),processingInstruction:mt(Tx),definition:nl.defineModifier(),constant:nl.defineModifier(),function:nl.defineModifier(),standard:nl.defineModifier(),local:nl.defineModifier(),special:nl.defineModifier()};nQ([{tag:tt.link,class:"tok-link"},{tag:tt.heading,class:"tok-heading"},{tag:tt.emphasis,class:"tok-emphasis"},{tag:tt.strong,class:"tok-strong"},{tag:tt.keyword,class:"tok-keyword"},{tag:tt.atom,class:"tok-atom"},{tag:tt.bool,class:"tok-bool"},{tag:tt.url,class:"tok-url"},{tag:tt.labelName,class:"tok-labelName"},{tag:tt.inserted,class:"tok-inserted"},{tag:tt.deleted,class:"tok-deleted"},{tag:tt.literal,class:"tok-literal"},{tag:tt.string,class:"tok-string"},{tag:tt.number,class:"tok-number"},{tag:[tt.regexp,tt.escape,tt.special(tt.string)],class:"tok-string2"},{tag:tt.variableName,class:"tok-variableName"},{tag:tt.local(tt.variableName),class:"tok-variableName tok-local"},{tag:tt.definition(tt.variableName),class:"tok-variableName tok-definition"},{tag:tt.special(tt.variableName),class:"tok-variableName2"},{tag:tt.definition(tt.propertyName),class:"tok-propertyName tok-definition"},{tag:tt.typeName,class:"tok-typeName"},{tag:tt.namespace,class:"tok-namespace"},{tag:tt.className,class:"tok-className"},{tag:tt.macroName,class:"tok-macroName"},{tag:tt.propertyName,class:"tok-propertyName"},{tag:tt.operator,class:"tok-operator"},{tag:tt.comment,class:"tok-comment"},{tag:tt.meta,class:"tok-meta"},{tag:tt.invalid,class:"tok-invalid"},{tag:tt.punctuation,class:"tok-punctuation"}]);var yT;const n0=new Sn,iVe=new Sn;class ul{constructor(e,t,r=[],i=""){this.data=e,this.name=i,xn.prototype.hasOwnProperty("tree")||Object.defineProperty(xn.prototype,"tree",{get(){return ra(this)}}),this.parser=t,this.extension=[Qc.of(this),xn.languageData.of((a,o,s)=>{let l=t7(a,o,s),u=l.type.prop(n0);if(!u)return[];let c=a.facet(u),h=l.type.prop(iVe);if(h){let d=l.resolve(o-l.from,s);for(let f of h)if(f.test(d,a)){let p=a.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(r)}isActiveAt(e,t,r=-1){return t7(e,t,r).type.prop(n0)==this.data}findRegions(e){let t=e.facet(Qc);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(a,o)=>{if(a.prop(n0)==this.data){r.push({from:o,to:o+a.length});return}let s=a.prop(Sn.mounted);if(s){if(s.tree.prop(n0)==this.data){if(s.overlay)for(let l of s.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+a.length});return}else if(s.overlay){let l=r.length;if(i(s.tree,s.overlay[0].from+o),r.length>l)return}}for(let l=0;l<a.children.length;l++){let u=a.children[l];u instanceof Qi&&i(u,a.positions[l]+o)}};return i(ra(e),0),r}get allowsNesting(){return!0}}ul.setState=dn.define();function t7(n,e,t){let r=n.facet(Qc),i=ra(n).topNode;if(!r||r.allowsNesting)for(let a=i;a;a=a.enter(e,t,Di.ExcludeBuffers))a.type.isTop&&(i=a);return i}function ra(n){let e=n.field(ul.state,!1);return e?e.tree:Qi.empty}class aVe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let zg=null;class eE{constructor(e,t,r=[],i,a,o,s,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=a,this.viewport=o,this.skipped=s,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new eE(e,t,[],Qi.empty,0,r,[],null)}startParse(){return this.parser.startParse(new aVe(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Qi.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(fd.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(fd.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=zg;zg=this;try{return e()}finally{zg=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=n7(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:a,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,h,d)=>l.push({fromA:u,toA:c,fromB:h,toB:d})),r=fd.applyChanges(r,l),i=Qi.empty,a=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&s.push({from:c,to:h})}}}return new eE(this.parser,t,r,i,a,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:a}=this.skipped[r];i<e.to&&a>e.from&&(this.fragments=n7(this.fragments,i,a),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends $He{createParse(t,r,i){let a=i[0].from,o=i[i.length-1].to;return{parsedPos:a,advance(){let s=zg;if(s){for(let l of i)s.tempSkipped.push(l);e&&(s.scheduleOn=s.scheduleOn?Promise.all([s.scheduleOn,e]):e)}return this.parsedPos=o,new Qi(rs.none,[],[],o-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return zg}}function n7(n,e,t){return fd.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class sm{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new sm(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=eE.create(e.facet(Qc).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new sm(r)}}ul.state=Fi.define({create:sm.init,update(n,e){for(let t of e.effects)if(t.is(ul.setState))return t.value;return e.startState.facet(Qc)!=e.state.facet(Qc)?sm.init(e.state):n.apply(e)}});let rQ=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(rQ=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const bT=typeof navigator<"u"&&!((yT=navigator.scheduling)===null||yT===void 0)&&yT.isInputPending?()=>navigator.scheduling.isInputPending():null,oVe=jr.fromClass(class{constructor(n){this.view=n,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(n){let e=this.view.state.field(ul.state).context;(e.updateViewport(n.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(n.docChanged||n.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:n}=this.view,e=n.field(ul.state);(e.tree!=e.context.tree||!e.context.isDone(n.doc.length))&&(this.working=rQ(this.work))}work(n){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:t,viewport:{to:r}}=this.view,i=t.field(ul.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,n&&!bT?Math.max(25,n.timeRemaining()-5):1e9),o=i.context.treeLen<r&&t.doc.length>r+1e3,s=i.context.work(()=>bT&&bT()||Date.now()>a,r+(o?0:1e5));this.chunkBudget-=Date.now()-e,(s||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:ul.setState.of(new sm(i.context))})),this.chunkBudget>0&&!(s&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(n){n.scheduleOn&&(this.workScheduled++,n.scheduleOn.then(()=>this.scheduleWork()).catch(e=>Ga(this.view.state,e)).then(()=>this.workScheduled--),n.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Qc=Dt.define({combine(n){return n.length?n[0]:null},enables:n=>[ul.state,oVe,bt.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]}),sVe=Dt.define(),G_=Dt.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function tE(n){let e=n.facet(G_);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function zv(n,e){let t="",r=n.tabSize,i=n.facet(G_)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let a=0;a<e;a++)t+=i;return t}function gP(n,e){n instanceof xn&&(n=new $_(n));for(let r of n.state.facet(sVe)){let i=r(n,e);if(i!==void 0)return i}let t=ra(n.state);return t.length>=e?uVe(n,t,e):null}class $_{constructor(e,t={}){this.state=e,this.options=t,this.unit=tE(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:a}=this.options;return i!=null&&i>=r.from&&i<=r.to?a&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),a=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(a+=o-this.countColumn(r,r.search(/\S|$/))),a}countColumn(e,t=e.length){return zm(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),a=this.options.overrideIndentation;if(a){let o=a(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const lVe=new Sn;function uVe(n,e,t){let r=e.resolveStack(t),i=r.node.enterUnfinishedNodesBefore(t);if(i!=r.node){let a=[];for(let o=i;o!=r.node;o=o.parent)a.push(o);for(let o=a.length-1;o>=0;o--)r={node:a[o],next:r}}return iQ(r,n,t)}function iQ(n,e,t){for(let r=n;r;r=r.next){let i=hVe(r.node);if(i)return i(vP.create(e,t,r))}return 0}function cVe(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function hVe(n){let e=n.type.prop(lVe);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Sn.closedBy))){let i=n.lastChild,a=i&&r.indexOf(i.name)>-1;return o=>mVe(o,!0,1,void 0,a&&!cVe(o)?i.from:void 0)}return n.parent==null?dVe:null}function dVe(){return 0}class vP extends $_{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new vP(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(fVe(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return iQ(this.context.next,this.base,this.pos)}}function fVe(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function pVe(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,a=n.state.doc.lineAt(t.from),o=i==null||i<=a.from?a.to:Math.min(a.to,i);for(let s=t.to;;){let l=e.childAfter(s);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?t:null;s=l.to}}function mVe(n,e,t,r,i){let a=n.textAfter,o=a.match(/^\s*/)[0].length,s=i==n.pos+o,l=pVe(n);return l?s?n.column(l.from):n.column(l.to):n.baseIndent+(s?0:n.unit*t)}const gVe=200;function vVe(){return xn.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+gVe)return n;let a=t.sliceString(i.from,r);if(!e.some(u=>u.test(a)))return n;let{state:o}=n,s=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==s)continue;s=c.from;let h=gP(o,c.from);if(h==null)continue;let d=/^\s*/.exec(c.text)[0],f=zv(o,h);d!=f&&l.push({from:c.from,to:c.from+d.length,insert:f})}return l.length?[n,{changes:l,sequential:!0}]:n})}const yVe=Dt.define(),bVe=new Sn;function xVe(n,e,t){let r=ra(n);if(r.length<t)return null;let i=r.resolveStack(t,1),a=null;for(let o=i;o;o=o.next){let s=o.node;if(s.to<=t||s.from>t)continue;if(a&&s.from<e)break;let l=s.type.prop(bVe);if(l&&(s.to<r.length-50||r.length==n.doc.length||!wVe(s))){let u=l(s,n);u&&u.from<=t&&u.from>=e&&u.to>t&&(a=u)}}return a}function wVe(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function nE(n,e,t){for(let r of n.facet(yVe)){let i=r(n,e,t);if(i)return i}return xVe(n,e,t)}function aQ(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const X_=dn.define({map:aQ}),Ay=dn.define({map:aQ});function oQ(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const Nd=Fi.define({create(){return jt.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(X_)&&!SVe(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(uQ),i=r?jt.replace({widget:new DVe(r(e.state,t.value))}):r7;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(Ay)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,a)=>{i<r&&a>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,a)=>a<=r||i>=r}))}return n},provide:n=>bt.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(r7.range(r,i))}return jt.set(e,!0)}});function rE(n,e,t){var r;let i=null;return(r=n.field(Nd,!1))===null||r===void 0||r.between(e,t,(a,o)=>{(!i||i.from>a)&&(i={from:a,to:o})}),i}function SVe(n,e,t){let r=!1;return n.between(e,e,(i,a)=>{i==e&&a==t&&(r=!0)}),r}function sQ(n,e){return n.field(Nd,!1)?e:e.concat(dn.appendConfig.of(cQ()))}const EVe=n=>{for(let e of oQ(n)){let t=nE(n.state,e.from,e.to);if(t)return n.dispatch({effects:sQ(n.state,[X_.of(t),lQ(n,t)])}),!0}return!1},_Ve=n=>{if(!n.state.field(Nd,!1))return!1;let e=[];for(let t of oQ(n)){let r=rE(n.state,t.from,t.to);r&&e.push(Ay.of(r),lQ(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function lQ(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return bt.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const CVe=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),a=nE(e,i.from,i.to);a&&t.push(X_.of(a)),r=(a?n.lineBlockAt(a.to):i).to+1}return t.length&&n.dispatch({effects:sQ(n.state,t)}),!!t.length},AVe=n=>{let e=n.state.field(Nd,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(Ay.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},TVe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:EVe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:_Ve},{key:"Ctrl-Alt-[",run:CVe},{key:"Ctrl-Alt-]",run:AVe}],MVe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},uQ=Dt.define({combine(n){return kl(n,MVe)}});function cQ(n){return[Nd,OVe]}function hQ(n,e){let{state:t}=n,r=t.facet(uQ),i=o=>{let s=n.lineBlockAt(n.posAtDOM(o.target)),l=rE(n.state,s.from,s.to);l&&n.dispatch({effects:Ay.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,i,e);let a=document.createElement("span");return a.textContent=r.placeholderText,a.setAttribute("aria-label",t.phrase("folded code")),a.title=t.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=i,a}const r7=jt.replace({widget:new class extends Ru{toDOM(n){return hQ(n,null)}}});class DVe extends Ru{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return hQ(e,this.value)}}const kVe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class xT extends Du{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function NVe(n={}){let e=Object.assign(Object.assign({},kVe),n),t=new xT(e,!0),r=new xT(e,!1),i=jr.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Qc)!=o.state.facet(Qc)||o.startState.field(Nd,!1)!=o.state.field(Nd,!1)||ra(o.startState)!=ra(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let s=new Xc;for(let l of o.viewportLineBlocks){let u=rE(o.state,l.from,l.to)?r:nE(o.state,l.from,l.to)?t:null;u&&s.add(l.from,l.from,u)}return s.finish()}}),{domEventHandlers:a}=e;return[i,kHe({class:"cm-foldGutter",markers(o){var s;return((s=o.plugin(i))===null||s===void 0?void 0:s.markers)||An.empty},initialSpacer(){return new xT(e,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:(o,s,l)=>{if(a.click&&a.click(o,s,l))return!0;let u=rE(o.state,s.from,s.to);if(u)return o.dispatch({effects:Ay.of(u)}),!0;let c=nE(o.state,s.from,s.to);return c?(o.dispatch({effects:X_.of(c)}),!0):!1}})}),cQ()]}const OVe=bt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ty{constructor(e,t){this.specs=e;let r;function i(s){let l=Yc.newName();return(r||(r=Object.create(null)))["."+l]=s,l}const a=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof ul?s=>s.prop(n0)==o.data:o?s=>s==o:void 0,this.style=nQ(e.map(s=>({tag:s.tag,class:s.class||i(Object.assign({},s,{tag:null}))})),{all:a}).style,this.module=r?new Yc(r):null,this.themeType=t.themeType}static define(e,t){return new Ty(e,t||{})}}const ek=Dt.define(),dQ=Dt.define({combine(n){return n.length?[n[0]]:null}});function wT(n){let e=n.facet(ek);return e.length?e:n.facet(dQ)}function fQ(n,e){let t=[RVe],r;return n instanceof Ty&&(n.module&&t.push(bt.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(dQ.of(n)):r?t.push(ek.computeN([bt.darkTheme],i=>i.facet(bt.darkTheme)==(r=="dark")?[n]:[])):t.push(ek.of(n)),t}class PVe{constructor(e){this.markCache=Object.create(null),this.tree=ra(e.state),this.decorations=this.buildDeco(e,wT(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ra(e.state),r=wT(e.state),i=r!=wT(e.startState),{viewport:a}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<a.to&&!i&&t.type==this.tree.type&&o>=a.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=a.to)}buildDeco(e,t){if(!t||!this.tree.length)return jt.none;let r=new Xc;for(let{from:i,to:a}of e.visibleRanges)tVe(this.tree,t,(o,s,l)=>{r.add(o,s,this.markCache[l]||(this.markCache[l]=jt.mark({class:l})))},i,a);return r.finish()}}const RVe=qd.high(jr.fromClass(PVe,{decorations:n=>n.decorations})),IVe=Ty.define([{tag:tt.meta,color:"#404740"},{tag:tt.link,textDecoration:"underline"},{tag:tt.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tt.emphasis,fontStyle:"italic"},{tag:tt.strong,fontWeight:"bold"},{tag:tt.strikethrough,textDecoration:"line-through"},{tag:tt.keyword,color:"#708"},{tag:[tt.atom,tt.bool,tt.url,tt.contentSeparator,tt.labelName],color:"#219"},{tag:[tt.literal,tt.inserted],color:"#164"},{tag:[tt.string,tt.deleted],color:"#a11"},{tag:[tt.regexp,tt.escape,tt.special(tt.string)],color:"#e40"},{tag:tt.definition(tt.variableName),color:"#00f"},{tag:tt.local(tt.variableName),color:"#30a"},{tag:[tt.typeName,tt.namespace],color:"#085"},{tag:tt.className,color:"#167"},{tag:[tt.special(tt.variableName),tt.macroName],color:"#256"},{tag:tt.definition(tt.propertyName),color:"#00c"},{tag:tt.comment,color:"#940"},{tag:tt.invalid,color:"#f00"}]),LVe=bt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),pQ=1e4,mQ="()[]{}",gQ=Dt.define({combine(n){return kl(n,{afterCursor:!0,brackets:mQ,maxScanDistance:pQ,renderMatch:zVe})}}),FVe=jt.mark({class:"cm-matchingBracket"}),BVe=jt.mark({class:"cm-nonmatchingBracket"});function zVe(n){let e=[],t=n.matched?FVe:BVe;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const UVe=Fi.define({create(){return jt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(gQ);for(let i of e.state.selection.ranges){if(!i.empty)continue;let a=cl(e.state,i.head,-1,r)||i.head>0&&cl(e.state,i.head-1,1,r)||r.afterCursor&&(cl(e.state,i.head,1,r)||i.head<e.state.doc.length&&cl(e.state,i.head+1,-1,r));a&&(t=t.concat(r.renderMatch(a,e.state)))}return jt.set(t,!0)},provide:n=>bt.decorations.from(n)}),jVe=[UVe,LVe];function HVe(n={}){return[gQ.of(n),jVe]}const VVe=new Sn;function tk(n,e,t){let r=n.prop(e<0?Sn.openedBy:Sn.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function nk(n){let e=n.type.prop(VVe);return e?e(n.node):n}function cl(n,e,t,r={}){let i=r.maxScanDistance||pQ,a=r.brackets||mQ,o=ra(n),s=o.resolveInner(e,t);for(let l=s;l;l=l.parent){let u=tk(l.type,t,a);if(u&&l.from<l.to){let c=nk(l);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return WVe(n,e,t,l,c,u,a)}}return qVe(n,e,t,o,s.type,i,a)}function WVe(n,e,t,r,i,a,o){let s=r.parent,l={from:i.from,to:i.to},u=0,c=s==null?void 0:s.cursor();if(c&&(t<0?c.childBefore(r.from):c.childAfter(r.to)))do if(t<0?c.to<=r.from:c.from>=r.to){if(u==0&&a.indexOf(c.type.name)>-1&&c.from<c.to){let h=nk(c);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(tk(c.type,t,o))u++;else if(tk(c.type,-t,o)){if(u==0){let h=nk(c);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function qVe(n,e,t,r,i,a,o){let s=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(s);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),h=0;for(let d=0;!c.next().done&&d<=a;){let f=c.value;t<0&&(d+=f.length);let p=e+d*t;for(let v=t>0?0:f.length-1,y=t>0?f.length:-1;v!=y;v+=t){let g=o.indexOf(f[v]);if(!(g<0||r.resolveInner(p+v,1).type!=i))if(g%2==0==t>0)h++;else{if(h==1)return{start:u,end:{from:p+v,to:p+v+1},matched:g>>1==l>>1};h--}}t>0&&(d+=f.length)}return c.done?{start:u,matched:!1}:null}const GVe=Object.create(null),i7=[rs.none],a7=[],o7=Object.create(null),$Ve=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])$Ve[n]=XVe(GVe,e);function ST(n,e){a7.indexOf(n)>-1||(a7.push(n),console.warn(e))}function XVe(n,e){let t=[];for(let s of e.split(" ")){let l=[];for(let u of s.split(".")){let c=n[u]||tt[u];c?typeof c=="function"?l.length?l=l.map(c):ST(u,`Modifier ${u} used at start of tag`):l.length?ST(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:ST(u,`Unknown highlighting tag ${u}`)}for(let u of l)t.push(u)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(s=>s.id),a=o7[i];if(a)return a.id;let o=o7[i]=rs.define({id:i7.length,name:r,props:[QHe({[r]:t})]});return i7.push(o),o.id}ur.RTL,ur.LTR;const YVe=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=bP(n.state,t.from);return r.line?ZVe(n):r.block?KVe(n):!1};function yP(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const ZVe=yP(tWe,0),JVe=yP(vQ,0),KVe=yP((n,e)=>vQ(n,e,eWe(e)),0);function bP(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Ug=50;function QVe(n,{open:e,close:t},r,i){let a=n.sliceDoc(r-Ug,r),o=n.sliceDoc(i,i+Ug),s=/\s*$/.exec(a)[0].length,l=/^\s*/.exec(o)[0].length,u=a.length-s;if(a.slice(u-e.length,u)==e&&o.slice(l,l+t.length)==t)return{open:{pos:r-s,margin:s&&1},close:{pos:i+l,margin:l&&1}};let c,h;i-r<=2*Ug?c=h=n.sliceDoc(r,i):(c=n.sliceDoc(r,r+Ug),h=n.sliceDoc(i-Ug,i));let d=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(h)[0].length,p=h.length-f-t.length;return c.slice(d,d+e.length)==e&&h.slice(p,p+t.length)==t?{open:{pos:r+d+e.length,margin:/\s/.test(c.charAt(d+e.length))?1:0},close:{pos:i-f-t.length,margin:/\s/.test(h.charAt(p-1))?1:0}}:null}function eWe(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),a=e.length-1;a>=0&&e[a].to>r.from?e[a].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function vQ(n,e,t=e.selection.ranges){let r=t.map(a=>bP(e,a.from).block);if(!r.every(a=>a))return null;let i=t.map((a,o)=>QVe(e,r[o],a.from,a.to));if(n!=2&&!i.every(a=>a))return{changes:e.changes(t.map((a,o)=>i[o]?[]:[{from:a.from,insert:r[o].open+" "},{from:a.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(a=>a)){let a=[];for(let o=0,s;o<i.length;o++)if(s=i[o]){let l=r[o],{open:u,close:c}=s;a.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:a}}return null}function tWe(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:a,to:o}of t){let s=r.length,l=1e9,u=bP(e,a).line;if(u){for(let c=a;c<=o;){let h=e.doc.lineAt(c);if(h.from>i&&(a==o||o>h.from)){i=h.from;let d=/^\s*/.exec(h.text)[0].length,f=d==h.length,p=h.text.slice(d,d+u.length)==u?d:-1;d<h.text.length&&d<l&&(l=d),r.push({line:h,comment:p,token:u,indent:d,empty:f,single:!1})}c=h.to+1}if(l<1e9)for(let c=s;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==s+1&&(r[s].single=!0)}}if(n!=2&&r.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:s,token:l,indent:u,empty:c,single:h}of r)(h||!c)&&a.push({from:s.from+u,insert:l+" "});let o=e.changes(a);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(a=>a.comment>=0)){let a=[];for(let{line:o,comment:s,token:l}of r)if(s>=0){let u=o.from+s,c=u+l.length;o.text[c-o.from]==" "&&c++,a.push({from:u,to:c})}return{changes:a}}return null}const rk=Dl.define(),nWe=Dl.define(),rWe=Dt.define(),yQ=Dt.define({combine(n){return kl(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}}),bQ=Fi.define({create(){return hl.empty},update(n,e){let t=e.state.facet(yQ),r=e.annotation(rk);if(r){let l=$a.fromTransaction(e,r.selection),u=r.side,c=u==0?n.undone:n.done;return l?c=iE(c,c.length,t.minDepth,l):c=SQ(c,e.startState.selection),new hl(u==0?r.rest:c,u==0?c:r.rest)}let i=e.annotation(nWe);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(oi.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let a=$a.fromTransaction(e),o=e.annotation(oi.time),s=e.annotation(oi.userEvent);return a?n=n.addChanges(a,o,s,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,s,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new hl(n.done.map($a.fromJSON),n.undone.map($a.fromJSON))}});function iWe(n={}){return[bQ,yQ.of(n),bt.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?xQ:e.inputType=="historyRedo"?ik:null;return r?(e.preventDefault(),r(t)):!1}})]}function Y_(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(bQ,!1);if(!i)return!1;let a=i.pop(n,t,e);return a?(r(a),!0):!1}}const xQ=Y_(0,!1),ik=Y_(1,!1),aWe=Y_(0,!0),oWe=Y_(1,!0);class $a{constructor(e,t,r,i,a){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=a}setSelAfter(e){return new $a(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new $a(e.changes&&ri.fromJSON(e.changes),[],e.mapped&&yl.fromJSON(e.mapped),e.startSelection&&at.fromJSON(e.startSelection),e.selectionsAfter.map(at.fromJSON))}static fromTransaction(e,t){let r=Go;for(let i of e.startState.facet(rWe)){let a=i(e);a.length&&(r=r.concat(a))}return!r.length&&e.changes.empty?null:new $a(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,Go)}static selection(e){return new $a(void 0,Go,void 0,void 0,e)}}function iE(n,e,t,r){let i=e+1>t+20?e-t-1:0,a=n.slice(i,e);return a.push(r),a}function sWe(n,e){let t=[],r=!1;return n.iterChangedRanges((i,a)=>t.push(i,a)),e.iterChangedRanges((i,a,o,s)=>{for(let l=0;l<t.length;){let u=t[l++],c=t[l++];s>=u&&o<=c&&(r=!0)}}),r}function lWe(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function wQ(n,e){return n.length?e.length?n.concat(e):n:e}const Go=[],uWe=200;function SQ(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-uWe));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),iE(n,n.length-1,1e9,t.setSelAfter(r)))}else return[$a.selection([e])]}function cWe(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function ET(n,e){if(!n.length)return n;let t=n.length,r=Go;for(;t;){let i=hWe(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let a=n.slice(0,t);return a[t-1]=i,a}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[$a.selection(r)]:Go}function hWe(n,e,t){let r=wQ(n.selectionsAfter.length?n.selectionsAfter.map(s=>s.map(e)):Go,t);if(!n.changes)return $a.selection(r);let i=n.changes.map(e),a=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(a):a;return new $a(i,dn.mapEffects(n.effects,e),o,n.startSelection.map(a),r)}const dWe=/^(input\.type|delete)($|\.)/;class hl{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new hl(this.done,this.undone):this}addChanges(e,t,r,i,a){let o=this.done,s=o[o.length-1];return s&&s.changes&&!s.changes.empty&&e.changes&&(!r||dWe.test(r))&&(!s.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(a,sWe(s.changes,e.changes))||r=="input.type.compose")?o=iE(o,o.length-1,i.minDepth,new $a(e.changes.compose(s.changes),wQ(e.effects,s.effects),s.mapped,s.startSelection,Go)):o=iE(o,o.length,i.minDepth,e),new hl(o,Go,t,r)}addSelection(e,t,r,i){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:Go;return a.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&lWe(a[a.length-1],e)?this:new hl(SQ(this.done,e),this.undone,t,r)}addMapping(e){return new hl(ET(this.done,e),ET(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let a=i[i.length-1],o=a.selectionsAfter[0]||t.selection;if(r&&a.selectionsAfter.length)return t.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:rk.of({side:e,rest:cWe(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let s=i.length==1?Go:i.slice(0,i.length-1);return a.mapped&&(s=ET(s,a.mapped)),t.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:rk.of({side:e,rest:s,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}hl.empty=new hl(Go,Go);const fWe=[{key:"Mod-z",run:xQ,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ik,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ik,preventDefault:!0},{key:"Mod-u",run:aWe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:oWe,preventDefault:!0}];function Um(n,e){return at.create(n.ranges.map(e),n.mainIndex)}function Nl(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Fs({state:n,dispatch:e},t){let r=Um(n.selection,t);return r.eq(n.selection,!0)?!1:(e(Nl(n,r)),!0)}function Z_(n,e){return at.cursor(e?n.to:n.from)}function EQ(n,e){return Fs(n,t=>t.empty?n.moveByChar(t,e):Z_(t,e))}function oa(n){return n.textDirectionAt(n.state.selection.main.head)==ur.LTR}const _Q=n=>EQ(n,!oa(n)),CQ=n=>EQ(n,oa(n));function AQ(n,e){return Fs(n,t=>t.empty?n.moveByGroup(t,e):Z_(t,e))}const pWe=n=>AQ(n,!oa(n)),mWe=n=>AQ(n,oa(n));function gWe(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function J_(n,e,t){let r=ra(n).resolveInner(e.head),i=t?Sn.closedBy:Sn.openedBy;for(let l=e.head;;){let u=t?r.childAfter(l):r.childBefore(l);if(!u)break;gWe(n,u,i)?r=u:l=t?u.to:u.from}let a=r.type.prop(i),o,s;return a&&(o=t?cl(n,r.from,1):cl(n,r.to,-1))&&o.matched?s=t?o.end.to:o.end.from:s=t?r.to:r.from,at.cursor(s,t?-1:1)}const vWe=n=>Fs(n,e=>J_(n.state,e,!oa(n))),yWe=n=>Fs(n,e=>J_(n.state,e,oa(n)));function TQ(n,e){return Fs(n,t=>{if(!t.empty)return Z_(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const MQ=n=>TQ(n,!1),DQ=n=>TQ(n,!0);function kQ(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let a of n.state.facet(bt.scrollMargins)){let o=a(n);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function NQ(n,e){let t=kQ(n),{state:r}=n,i=Um(r.selection,o=>o.empty?n.moveVertically(o,e,t.height):Z_(o,e));if(i.eq(r.selection))return!1;let a;if(t.selfScroll){let o=n.coordsAtPos(r.selection.main.head),s=n.scrollDOM.getBoundingClientRect(),l=s.top+t.marginTop,u=s.bottom-t.marginBottom;o&&o.top>l&&o.bottom<u&&(a=bt.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return n.dispatch(Nl(r,i),{effects:a}),!0}const s7=n=>NQ(n,!1),ak=n=>NQ(n,!0);function hh(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let a=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;a&&e.head!=r.from+a&&(i=at.cursor(r.from+a))}return i}const bWe=n=>Fs(n,e=>hh(n,e,!0)),xWe=n=>Fs(n,e=>hh(n,e,!1)),wWe=n=>Fs(n,e=>hh(n,e,!oa(n))),SWe=n=>Fs(n,e=>hh(n,e,oa(n))),EWe=n=>Fs(n,e=>at.cursor(n.lineBlockAt(e.head).from,1)),_We=n=>Fs(n,e=>at.cursor(n.lineBlockAt(e.head).to,-1));function CWe(n,e,t){let r=!1,i=Um(n.selection,a=>{let o=cl(n,a.head,-1)||cl(n,a.head,1)||a.head>0&&cl(n,a.head-1,1)||a.head<n.doc.length&&cl(n,a.head+1,-1);if(!o||!o.end)return a;r=!0;let s=o.start.from==a.head?o.end.to:o.end.from;return at.cursor(s)});return r?(e(Nl(n,i)),!0):!1}const AWe=({state:n,dispatch:e})=>CWe(n,e);function ss(n,e){let t=Um(n.state.selection,r=>{let i=e(r);return at.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Nl(n.state,t)),!0)}function OQ(n,e){return ss(n,t=>n.moveByChar(t,e))}const PQ=n=>OQ(n,!oa(n)),RQ=n=>OQ(n,oa(n));function IQ(n,e){return ss(n,t=>n.moveByGroup(t,e))}const TWe=n=>IQ(n,!oa(n)),MWe=n=>IQ(n,oa(n)),DWe=n=>ss(n,e=>J_(n.state,e,!oa(n))),kWe=n=>ss(n,e=>J_(n.state,e,oa(n)));function LQ(n,e){return ss(n,t=>n.moveVertically(t,e))}const FQ=n=>LQ(n,!1),BQ=n=>LQ(n,!0);function zQ(n,e){return ss(n,t=>n.moveVertically(t,e,kQ(n).height))}const l7=n=>zQ(n,!1),u7=n=>zQ(n,!0),NWe=n=>ss(n,e=>hh(n,e,!0)),OWe=n=>ss(n,e=>hh(n,e,!1)),PWe=n=>ss(n,e=>hh(n,e,!oa(n))),RWe=n=>ss(n,e=>hh(n,e,oa(n))),IWe=n=>ss(n,e=>at.cursor(n.lineBlockAt(e.head).from)),LWe=n=>ss(n,e=>at.cursor(n.lineBlockAt(e.head).to)),c7=({state:n,dispatch:e})=>(e(Nl(n,{anchor:0})),!0),h7=({state:n,dispatch:e})=>(e(Nl(n,{anchor:n.doc.length})),!0),d7=({state:n,dispatch:e})=>(e(Nl(n,{anchor:n.selection.main.anchor,head:0})),!0),f7=({state:n,dispatch:e})=>(e(Nl(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),FWe=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),BWe=({state:n,dispatch:e})=>{let t=K_(n).map(({from:r,to:i})=>at.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:at.create(t),userEvent:"select"})),!0},zWe=({state:n,dispatch:e})=>{let t=Um(n.selection,r=>{var i;let a=ra(n).resolveStack(r.from,1);for(let o=a;o;o=o.next){let{node:s}=o;if((s.from<r.from&&s.to>=r.to||s.to>r.to&&s.from<=r.from)&&!((i=s.parent)===null||i===void 0)&&i.parent)return at.range(s.to,s.from)}return r});return e(Nl(n,t)),!0},UWe=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=at.create([t.main]):t.main.empty||(r=at.create([at.cursor(t.main.head)])),r?(e(Nl(n,r)),!0):!1};function My(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(a=>{let{from:o,to:s}=a;if(o==s){let l=e(a);l<o?(t="delete.backward",l=Mx(n,l,!1)):l>o&&(t="delete.forward",l=Mx(n,l,!0)),o=Math.min(o,l),s=Math.max(s,l)}else o=Mx(n,o,!1),s=Mx(n,s,!0);return o==s?{range:a}:{changes:{from:o,to:s},range:at.cursor(o,o<a.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?bt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Mx(n,e,t){if(n instanceof bt)for(let r of n.state.facet(bt.atomicRanges).map(i=>i(n)))r.between(e,e,(i,a)=>{i<e&&a>e&&(e=t?a:i)});return e}const UQ=(n,e,t)=>My(n,r=>{let i=r.from,{state:a}=n,o=a.doc.lineAt(i),s,l;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(s=o.text.slice(0,i-o.from))){if(s[s.length-1]=="	")return i-1;let u=zm(s,a.tabSize),c=u%tE(a)||tE(a);for(let h=0;h<c&&s[s.length-1-h]==" ";h++)i--;l=i}else l=Oi(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?a.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=Oi(o.text,l-o.from,!1,!1)+o.from);return l}),ok=n=>UQ(n,!1,!0),jQ=n=>UQ(n,!0,!1),HQ=(n,e)=>My(n,t=>{let r=t.head,{state:i}=n,a=i.doc.lineAt(r),o=i.charCategorizer(r);for(let s=null;;){if(r==(e?a.to:a.from)){r==t.head&&a.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Oi(a.text,r-a.from,e)+a.from,u=a.text.slice(Math.min(r,l)-a.from,Math.max(r,l)-a.from),c=o(u);if(s!=null&&c!=s)break;(u!=" "||r!=t.head)&&(s=c),r=l}return r}),VQ=n=>HQ(n,!1),jWe=n=>HQ(n,!0),HWe=n=>My(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),VWe=n=>My(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),WWe=n=>My(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),qWe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Nn.of(["",""])},range:at.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},GWe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,a=n.doc.lineAt(i),o=i==a.from?i-1:Oi(a.text,i-a.from,!1)+a.from,s=i==a.to?i+1:Oi(a.text,i-a.from,!0)+a.from;return{changes:{from:o,to:s,insert:n.doc.slice(i,s).append(n.doc.slice(o,i))},range:at.cursor(s)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function K_(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),a=n.doc.lineAt(r.to);if(!r.empty&&r.to==a.from&&(a=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=a.to,o.ranges.push(r)}else e.push({from:i.from,to:a.to,ranges:[r]});t=a.number+1}return e}function WQ(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let a of K_(n)){if(t?a.to==n.doc.length:a.from==0)continue;let o=n.doc.lineAt(t?a.to+1:a.from-1),s=o.length+1;if(t){r.push({from:a.to,to:o.to},{from:a.from,insert:o.text+n.lineBreak});for(let l of a.ranges)i.push(at.range(Math.min(n.doc.length,l.anchor+s),Math.min(n.doc.length,l.head+s)))}else{r.push({from:o.from,to:a.from},{from:a.to,insert:n.lineBreak+o.text});for(let l of a.ranges)i.push(at.range(l.anchor-s,l.head-s))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:at.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const $We=({state:n,dispatch:e})=>WQ(n,e,!1),XWe=({state:n,dispatch:e})=>WQ(n,e,!0);function qQ(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of K_(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const YWe=({state:n,dispatch:e})=>qQ(n,e,!1),ZWe=({state:n,dispatch:e})=>qQ(n,e,!0),JWe=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(K_(e).map(({from:i,to:a})=>(i>0?i--:a<e.doc.length&&a++,{from:i,to:a}))),r=Um(e.selection,i=>{let a;if(n.lineWrapping){let o=n.lineBlockAt(i.head),s=n.coordsAtPos(i.head,i.assoc||1);s&&(a=o.bottom+n.documentTop-s.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,a)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function KWe(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ra(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),a;return r&&i&&r.to<=e&&i.from>=e&&(a=r.type.prop(Sn.closedBy))&&a.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const QWe=GQ(!1),eqe=GQ(!0);function GQ(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:a,to:o}=i,s=e.doc.lineAt(a),l=!n&&a==o&&KWe(e,a);n&&(a=o=(o<=s.to?s:e.doc.lineAt(o)).to);let u=new $_(e,{simulateBreak:a,simulateDoubleBreak:!!l}),c=gP(u,a);for(c==null&&(c=zm(/^\s*/.exec(e.doc.lineAt(a).text)[0],e.tabSize));o<s.to&&/\s/.test(s.text[o-s.from]);)o++;l?{from:a,to:o}=l:a>s.from&&a<s.from+100&&!/\S/.test(s.text.slice(0,a))&&(a=s.from);let h=["",zv(e,c)];return l&&h.push(zv(e,u.lineIndent(s.from,-1))),{changes:{from:a,to:o,insert:Nn.of(h)},range:at.cursor(a+1+h[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function xP(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let s=n.doc.lineAt(o);s.number>t&&(r.empty||r.to>s.from)&&(e(s,i,r),t=s.number),o=s.to+1}let a=n.changes(i);return{changes:i,range:at.range(a.mapPos(r.anchor,1),a.mapPos(r.head,1))}})}const tqe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new $_(n,{overrideIndentation:a=>t[a]??-1}),i=xP(n,(a,o,s)=>{let l=gP(r,a.from);if(l==null)return;/\S/.test(a.text)||(l=0);let u=/^\s*/.exec(a.text)[0],c=zv(n,l);(u!=c||s.from<a.from+u.length)&&(t[a.from]=l,o.push({from:a.from,to:a.from+u.length,insert:c}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},$Q=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(xP(n,(t,r)=>{r.push({from:t.from,insert:n.facet(G_)})}),{userEvent:"input.indent"})),!0),XQ=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(xP(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let a=zm(i,n.tabSize),o=0,s=zv(n,Math.max(0,a-tE(n)));for(;o<i.length&&o<s.length&&i.charCodeAt(o)==s.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:s.slice(o)})}),{userEvent:"delete.dedent"})),!0),nqe=n=>(n.setTabFocusMode(),!0),rqe=[{key:"Ctrl-b",run:_Q,shift:PQ,preventDefault:!0},{key:"Ctrl-f",run:CQ,shift:RQ},{key:"Ctrl-p",run:MQ,shift:FQ},{key:"Ctrl-n",run:DQ,shift:BQ},{key:"Ctrl-a",run:EWe,shift:IWe},{key:"Ctrl-e",run:_We,shift:LWe},{key:"Ctrl-d",run:jQ},{key:"Ctrl-h",run:ok},{key:"Ctrl-k",run:HWe},{key:"Ctrl-Alt-h",run:VQ},{key:"Ctrl-o",run:qWe},{key:"Ctrl-t",run:GWe},{key:"Ctrl-v",run:ak}],iqe=[{key:"ArrowLeft",run:_Q,shift:PQ,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:pWe,shift:TWe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:wWe,shift:PWe,preventDefault:!0},{key:"ArrowRight",run:CQ,shift:RQ,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:mWe,shift:MWe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:SWe,shift:RWe,preventDefault:!0},{key:"ArrowUp",run:MQ,shift:FQ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:c7,shift:d7},{mac:"Ctrl-ArrowUp",run:s7,shift:l7},{key:"ArrowDown",run:DQ,shift:BQ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:h7,shift:f7},{mac:"Ctrl-ArrowDown",run:ak,shift:u7},{key:"PageUp",run:s7,shift:l7},{key:"PageDown",run:ak,shift:u7},{key:"Home",run:xWe,shift:OWe,preventDefault:!0},{key:"Mod-Home",run:c7,shift:d7},{key:"End",run:bWe,shift:NWe,preventDefault:!0},{key:"Mod-End",run:h7,shift:f7},{key:"Enter",run:QWe},{key:"Mod-a",run:FWe},{key:"Backspace",run:ok,shift:ok},{key:"Delete",run:jQ},{key:"Mod-Backspace",mac:"Alt-Backspace",run:VQ},{key:"Mod-Delete",mac:"Alt-Delete",run:jWe},{mac:"Mod-Backspace",run:VWe},{mac:"Mod-Delete",run:WWe}].concat(rqe.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),YQ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:vWe,shift:DWe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:yWe,shift:kWe},{key:"Alt-ArrowUp",run:$We},{key:"Shift-Alt-ArrowUp",run:YWe},{key:"Alt-ArrowDown",run:XWe},{key:"Shift-Alt-ArrowDown",run:ZWe},{key:"Escape",run:UWe},{key:"Mod-Enter",run:eqe},{key:"Alt-l",mac:"Ctrl-l",run:BWe},{key:"Mod-i",run:zWe,preventDefault:!0},{key:"Mod-[",run:XQ},{key:"Mod-]",run:$Q},{key:"Mod-Alt-\\",run:tqe},{key:"Shift-Mod-k",run:JWe},{key:"Shift-Mod-\\",run:AWe},{key:"Mod-/",run:YVe},{key:"Alt-A",run:JVe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:nqe}].concat(iqe),aqe={key:"Tab",run:$Q,shift:XQ};function nr(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)ZQ(n,arguments[e]);return n}function ZQ(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)ZQ(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const p7=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class lm{constructor(e,t,r=0,i=e.length,a,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=a?s=>a(p7(s)):p7,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ti(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=eP(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Vo(e);let i=this.normalize(t);for(let a=0,o=r;;a++){let s=i.charCodeAt(a),l=this.match(s,o,this.bufferPos+this.bufferStart);if(a==i.length-1){if(l)return this.value=l,this;break}o==r&&a<t.length&&t.charCodeAt(a)==s&&o++}}}match(e,t,r){let i=null;for(let a=0;a<this.matches.length;a+=2){let o=this.matches[a],s=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[a+1],to:r}:(this.matches[a]++,s=!0)),s||(this.matches.splice(a,2),a-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:r}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(lm.prototype[Symbol.iterator]=function(){return this});const JQ={from:-1,to:-1,match:/.*/.exec("")},wP="gm"+(/x/.unicode==null?"":"u");class KQ{constructor(e,t,r,i=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=JQ,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new QQ(e,t,r,i,a);this.re=new RegExp(t,wP+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=aE(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=aE(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const _T=new WeakMap;class Rp{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=_T.get(e);if(!i||i.from>=r||i.to<=t){let s=new Rp(t,e.sliceString(t,r));return _T.set(e,s),s}if(i.from==t&&i.to==r)return i;let{text:a,from:o}=i;return o>t&&(a=e.sliceString(t,o)+a,o=t),i.to<r&&(a+=e.sliceString(i.to,r)),_T.set(e,new Rp(o,a)),new Rp(t,a.slice(t-o,r-o))}}class QQ{constructor(e,t,r,i,a){this.text=e,this.to=a,this.done=!1,this.value=JQ,this.matchPos=aE(e,i),this.re=new RegExp(t,wP+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Rp.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=aE(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Rp.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(KQ.prototype[Symbol.iterator]=QQ.prototype[Symbol.iterator]=function(){return this});function oqe(n){try{return new RegExp(n,wP),!0}catch{return!1}}function aE(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function sk(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=nr("input",{class:"cm-textfield",name:"line",value:e}),r=nr("form",{class:"cm-gotoLine",onkeydown:a=>{a.keyCode==27?(a.preventDefault(),n.dispatch({effects:oE.of(!1)}),n.focus()):a.keyCode==13&&(a.preventDefault(),i())},onsubmit:a=>{a.preventDefault(),i()}},nr("label",n.state.phrase("Go to line"),": ",t)," ",nr("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function i(){let a=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!a)return;let{state:o}=n,s=o.doc.lineAt(o.selection.main.head),[,l,u,c,h]=a,d=c?+c.slice(1):0,f=u?+u:s.number;if(u&&h){let y=f/100;l&&(y=y*(l=="-"?-1:1)+s.number/o.doc.lines),f=Math.round(o.doc.lines*y)}else u&&l&&(f=f*(l=="-"?-1:1)+s.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,f))),v=at.cursor(p.from+Math.max(0,Math.min(d,p.length)));n.dispatch({effects:[oE.of(!1),bt.scrollIntoView(v.from,{y:"center"})],selection:v}),n.focus()}return{dom:r}}const oE=dn.define(),m7=Fi.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(oE)&&(n=t.value);return n},provide:n=>Fv.from(n,e=>e?sk:null)}),sqe=n=>{let e=Lv(n,sk);if(!e){let t=[oE.of(!0)];n.state.field(m7,!1)==null&&t.push(dn.appendConfig.of([m7,lqe])),n.dispatch({effects:t}),e=Lv(n,sk)}return e&&e.dom.querySelector("input").select(),!0},lqe=bt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),uqe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},cqe=Dt.define({combine(n){return kl(n,uqe,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function hqe(n){return[gqe,mqe]}const dqe=jt.mark({class:"cm-selectionMatch"}),fqe=jt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function g7(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=pr.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=pr.Word)}function pqe(n,e,t,r){return n(e.sliceDoc(t,t+1))==pr.Word&&n(e.sliceDoc(r-1,r))==pr.Word}const mqe=jr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(cqe),{state:t}=n,r=t.selection;if(r.ranges.length>1)return jt.none;let i=r.main,a,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return jt.none;let l=t.wordAt(i.head);if(!l)return jt.none;o=t.charCategorizer(i.head),a=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return jt.none;if(e.wholeWords){if(a=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(g7(o,t,i.from,i.to)&&pqe(o,t,i.from,i.to)))return jt.none}else if(a=t.sliceDoc(i.from,i.to),!a)return jt.none}let s=[];for(let l of n.visibleRanges){let u=new lm(t.doc,a,l.from,l.to);for(;!u.next().done;){let{from:c,to:h}=u.value;if((!o||g7(o,t,c,h))&&(i.empty&&c<=i.from&&h>=i.to?s.push(fqe.range(c,h)):(c>=i.to||h<=i.from)&&s.push(dqe.range(c,h)),s.length>e.maxMatches))return jt.none}}return jt.set(s)}},{decorations:n=>n.decorations}),gqe=bt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),vqe=({state:n,dispatch:e})=>{let{selection:t}=n,r=at.create(t.ranges.map(i=>n.wordAt(i.head)||at.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function yqe(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),a=i&&i.from==t.from&&i.to==t.to;for(let o=!1,s=new lm(n.doc,e,r[r.length-1].to);;)if(s.next(),s.done){if(o)return null;s=new lm(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==s.value.from))continue;if(a){let l=n.wordAt(s.value.from);if(!l||l.from!=s.value.from||l.to!=s.value.to)continue}return s.value}}const bqe=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(a=>a.from===a.to))return vqe({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(a=>n.sliceDoc(a.from,a.to)!=r))return!1;let i=yqe(n,r);return i?(e(n.update({selection:n.selection.addRange(at.range(i.from,i.to),!1),effects:bt.scrollIntoView(i.to)})),!0):!1},jm=Dt.define({combine(n){return kl(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Nqe(e),scrollToMatch:e=>bt.scrollIntoView(e)})}});class eee{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||oqe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Eqe(this):new wqe(this)}getCursor(e,t=0,r){let i=e.doc?e:xn.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Gf(this,i,t,r):qf(this,i,t,r)}}class tee{constructor(e){this.spec=e}}function qf(n,e,t,r){return new lm(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?xqe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function xqe(n,e){return(t,r,i,a)=>((a>t||a+i.length<r)&&(a=Math.max(0,t-2),i=n.sliceString(a,Math.min(n.length,r+2))),(e(sE(i,t-a))!=pr.Word||e(lE(i,t-a))!=pr.Word)&&(e(lE(i,r-a))!=pr.Word||e(sE(i,r-a))!=pr.Word))}class wqe extends tee{constructor(e){super(e)}nextMatch(e,t,r){let i=qf(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=qf(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let a=Math.max(t,i-1e4-this.spec.unquoted.length),o=qf(this.spec,e,a,i),s=null;for(;!o.nextOverlapping().done;)s=o.value;if(s)return s;if(a==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=qf(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let a=qf(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}function Gf(n,e,t,r){return new KQ(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?Sqe(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function sE(n,e){return n.slice(Oi(n,e,!1),e)}function lE(n,e){return n.slice(e,Oi(n,e))}function Sqe(n){return(e,t,r)=>!r[0].length||(n(sE(r.input,r.index))!=pr.Word||n(lE(r.input,r.index))!=pr.Word)&&(n(lE(r.input,r.index+r[0].length))!=pr.Word||n(sE(r.input,r.index+r[0].length))!=pr.Word)}class Eqe extends tee{nextMatch(e,t,r){let i=Gf(this.spec,e,r,e.doc.length).next();return i.done&&(i=Gf(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let a=Math.max(t,r-i*1e4),o=Gf(this.spec,e,a,r),s=null;for(;!o.next().done;)s=o.value;if(s&&(a==t||s.from>a+10))return s;if(a==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:t)}matchAll(e,t){let r=Gf(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let a=Gf(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}const Uv=dn.define(),SP=dn.define(),Lc=Fi.define({create(n){return new CT(lk(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Uv)?n=new CT(t.value.create(),n.panel):t.is(SP)&&(n=new CT(n.query,t.value?EP:null));return n},provide:n=>Fv.from(n,e=>e.panel)});class CT{constructor(e,t){this.query=e,this.panel=t}}const _qe=jt.mark({class:"cm-searchMatch"}),Cqe=jt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Aqe=jr.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Lc))}update(n){let e=n.state.field(Lc);(e!=n.startState.field(Lc)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return jt.none;let{view:t}=this,r=new Xc;for(let i=0,a=t.visibleRanges,o=a.length;i<o;i++){let{from:s,to:l}=a[i];for(;i<o-1&&l>a[i+1].from-2*250;)l=a[++i].to;n.highlight(t.state,s,l,(u,c)=>{let h=t.state.selection.ranges.some(d=>d.from==u&&d.to==c);r.add(u,c,h?Cqe:_qe)})}return r.finish()}},{decorations:n=>n.decorations});function Dy(n){return e=>{let t=e.state.field(Lc,!1);return t&&t.query.spec.valid?n(e,t):iee(e)}}const uE=Dy((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=at.single(r.from,r.to),a=n.state.facet(jm);return n.dispatch({selection:i,effects:[_P(n,r),a.scrollToMatch(i.main,n)],userEvent:"select.search"}),ree(n),!0}),cE=Dy((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let a=at.single(i.from,i.to),o=n.state.facet(jm);return n.dispatch({selection:a,effects:[_P(n,i),o.scrollToMatch(a.main,n)],userEvent:"select.search"}),ree(n),!0}),Tqe=Dy((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:at.create(t.map(r=>at.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Mqe=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,a=[],o=0;for(let s=new lm(n.doc,n.sliceDoc(r,i));!s.next().done;){if(a.length>1e3)return!1;s.value.from==r&&(o=a.length),a.push(at.range(s.value.from,s.value.to))}return e(n.update({selection:at.create(a,o),userEvent:"select.search.matches"})),!0},v7=Dy((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let a=e.nextMatch(t,r,r);if(!a)return!1;let o=[],s,l,u=[];if(a.from==r&&a.to==i&&(l=t.toText(e.getReplacement(a)),o.push({from:a.from,to:a.to,insert:l}),a=e.nextMatch(t,a.from,a.to),u.push(bt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),a){let c=o.length==0||o[0].from>=a.to?0:a.to-a.from-l.length;s=at.single(a.from-c,a.to-c),u.push(_P(n,a)),u.push(t.facet(jm).scrollToMatch(s.main,n))}return n.dispatch({changes:o,selection:s,effects:u,userEvent:"input.replace"}),!0}),Dqe=Dy((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:a,to:o}=i;return{from:a,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:bt.announce.of(r),userEvent:"input.replace.all"}),!0});function EP(n){return n.state.facet(jm).createPanel(n)}function lk(n,e){var t,r,i,a,o;let s=n.selection.main,l=s.empty||s.to>s.from+100?"":n.sliceDoc(s.from,s.to);if(e&&!l)return e;let u=n.facet(jm);return new eee({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(a=e==null?void 0:e.regexp)!==null&&a!==void 0?a:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function nee(n){let e=Lv(n,EP);return e&&e.dom.querySelector("[main-field]")}function ree(n){let e=nee(n);e&&e==n.root.activeElement&&e.select()}const iee=n=>{let e=n.state.field(Lc,!1);if(e&&e.panel){let t=nee(n);if(t&&t!=n.root.activeElement){let r=lk(n.state,e.query.spec);r.valid&&n.dispatch({effects:Uv.of(r)}),t.focus(),t.select()}}else n.dispatch({effects:[SP.of(!0),e?Uv.of(lk(n.state,e.query.spec)):dn.appendConfig.of(Pqe)]});return!0},aee=n=>{let e=n.state.field(Lc,!1);if(!e||!e.panel)return!1;let t=Lv(n,EP);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:SP.of(!1)}),!0},kqe=[{key:"Mod-f",run:iee,scope:"editor search-panel"},{key:"F3",run:uE,shift:cE,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:uE,shift:cE,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:aee,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Mqe},{key:"Mod-Alt-g",run:sqe},{key:"Mod-d",run:bqe,preventDefault:!0}];class Nqe{constructor(e){this.view=e;let t=this.query=e.state.field(Lc).query.spec;this.commit=this.commit.bind(this),this.searchField=nr("input",{value:t.search,placeholder:oo(e,"Find"),"aria-label":oo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=nr("input",{value:t.replace,placeholder:oo(e,"Replace"),"aria-label":oo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=nr("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=nr("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=nr("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,a,o){return nr("button",{class:"cm-button",name:i,onclick:a,type:"button"},o)}this.dom=nr("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>uE(e),[oo(e,"next")]),r("prev",()=>cE(e),[oo(e,"previous")]),r("select",()=>Tqe(e),[oo(e,"all")]),nr("label",null,[this.caseField,oo(e,"match case")]),nr("label",null,[this.reField,oo(e,"regexp")]),nr("label",null,[this.wordField,oo(e,"by word")]),...e.state.readOnly?[]:[nr("br"),this.replaceField,r("replace",()=>v7(e),[oo(e,"replace")]),r("replaceAll",()=>Dqe(e),[oo(e,"replace all")])],nr("button",{name:"close",onclick:()=>aee(e),"aria-label":oo(e,"close"),type:"button"},[""])])}commit(){let e=new eee({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Uv.of(e)}))}keydown(e){zje(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?cE:uE)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),v7(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(Uv)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(jm).top}}function oo(n,e){return n.state.phrase(e)}const Dx=30,kx=/[\s\.,:;?!]/;function _P(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,a=Math.max(r.from,e-Dx),o=Math.min(i,t+Dx),s=n.state.sliceDoc(a,o);if(a!=r.from){for(let l=0;l<Dx;l++)if(!kx.test(s[l+1])&&kx.test(s[l])){s=s.slice(l);break}}if(o!=i){for(let l=s.length-1;l>s.length-Dx;l--)if(!kx.test(s[l-1])&&kx.test(s[l])){s=s.slice(0,l);break}}return bt.announce.of(`${n.state.phrase("current match")}. ${s} ${n.state.phrase("on line")} ${r.number}.`)}const Oqe=bt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Pqe=[Lc,qd.low(Aqe),Oqe];class oee{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=ra(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),a=i.search(see(e,!1));return a<0?null:{from:r+a,to:this.pos,text:i.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function y7(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Rqe(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let a=1;a<i.length;a++)t[i[a]]=!0}let r=y7(e)+y7(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Iqe(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Rqe(e);return i=>{let a=i.matchBefore(r);return a||i.explicit?{from:a?a.from:i.pos,options:e,validFor:t}:null}}class b7{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function Fc(n){return n.selection.main.from}function see(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",a=r[r.length-1]!="$";return!i&&!a?n:new RegExp(`${i?"^":""}(?:${r})${a?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const lee=Dl.define();function Lqe(n,e,t,r){let{main:i}=n.selection,a=t-i.from,o=r-i.from;return Object.assign(Object.assign({},n.changeByRange(s=>s!=i&&t!=r&&n.sliceDoc(s.from+a,s.from+o)!=n.sliceDoc(t,r)?{range:s}:{changes:{from:s.from+a,to:r==i.from?s.to:s.from+o,insert:e},range:at.cursor(s.from+a+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const x7=new WeakMap;function Fqe(n){if(!Array.isArray(n))return n;let e=x7.get(n);return e||x7.set(n,e=Iqe(n)),e}const hE=dn.define(),jv=dn.define();class Bqe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=Ti(e,t),i=Vo(r);this.chars.push(r);let a=e.slice(t,t+i),o=a.toUpperCase();this.folded.push(Ti(o==a?a.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:a,byWord:o}=this;if(t.length==1){let w=Ti(e,0),b=Vo(w),m=b==e.length?0:-100;if(w!=t[0])if(w==r[0])m+=-200;else return null;return this.ret(m,[0,b])}let s=e.indexOf(this.pattern);if(s==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,u=0;if(s<0){for(let w=0,b=Math.min(e.length,200);w<b&&u<l;){let m=Ti(e,w);(m==t[u]||m==r[u])&&(i[u++]=w),w+=Vo(m)}if(u<l)return null}let c=0,h=0,d=!1,f=0,p=-1,v=-1,y=/[a-z]/.test(e),g=!0;for(let w=0,b=Math.min(e.length,200),m=0;w<b&&h<l;){let x=Ti(e,w);s<0&&(c<l&&x==t[c]&&(a[c++]=w),f<l&&(x==t[f]||x==r[f]?(f==0&&(p=w),v=w+1,f++):f=0));let S,C=x<255?x>=48&&x<=57||x>=97&&x<=122?2:x>=65&&x<=90?1:0:(S=eP(x))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!w||C==1&&y||m==0&&C!=0)&&(t[h]==x||r[h]==x&&(d=!0)?o[h++]=w:o.length&&(g=!1)),m=C,w+=Vo(x)}return h==l&&o[0]==0&&g?this.result(-100+(d?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(v==e.length?0:-100),[0,v]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):f==l?this.ret(-900-e.length,[p,v]):h==l?this.result(-100+(d?-200:0)+-700+(g?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],a=0;for(let o of t){let s=o+(this.astral?Vo(Ti(r,o)):1);a&&i[a-1]==o?i[a-1]=s:(i[a++]=o,i[a++]=s)}return this.ret(e-r.length,i)}}class zqe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const ki=Dt.define({combine(n){return kl(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Uqe,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>w7(e(r),t(r)),optionClass:(e,t)=>r=>w7(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function w7(n,e){return n?e?n+" "+e:n:e}function Uqe(n,e,t,r,i,a){let o=n.textDirection==ur.RTL,s=o,l=!1,u="top",c,h,d=e.left-i.left,f=i.right-e.right,p=r.right-r.left,v=r.bottom-r.top;if(s&&d<Math.min(p,f)?s=!1:!s&&f<Math.min(p,d)&&(s=!0),p<=(s?d:f))c=Math.max(i.top,Math.min(t.top,i.bottom-v))-e.top,h=Math.min(400,s?d:f);else{l=!0,h=Math.min(400,(o?e.right:i.right-e.left)-30);let w=i.bottom-e.bottom;w>=v||w>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let y=(e.bottom-e.top)/a.offsetHeight,g=(e.right-e.left)/a.offsetWidth;return{style:`${u}: ${c/y}px; max-width: ${h/g}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":s?"left":"right")}}function jqe(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,a){let o=document.createElement("span");o.className="cm-completionLabel";let s=t.displayLabel||t.label,l=0;for(let u=0;u<a.length;){let c=a[u++],h=a[u++];c>l&&o.appendChild(document.createTextNode(s.slice(l,c)));let d=o.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(s.slice(c,h))),d.className="cm-completionMatchedText",l=h}return l<s.length&&o.appendChild(document.createTextNode(s.slice(l))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function AT(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class Hqe{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:a,selected:o}=i.open,s=e.state.facet(ki);this.optionContent=jqe(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=AT(a.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(t).open;for(let c=l.target,h;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(h=/-(\d+)$/.exec(c.id))&&+h[1]<u.length){this.applyCompletion(e,u[+h[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(ki).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:jv.of(null)})}),this.showOptions(a,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:a,selected:o,disabled:s}=r.open;(!i.open||i.open.options!=a)&&(this.range=AT(a.length,o,e.state.facet(ki).maxRenderedOptions),this.showOptions(a,r.id)),this.updateSel(),s!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=AT(t.options.length,t.selected,this.view.state.facet(ki).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let a=typeof i=="string"?document.createTextNode(i):i(r);if(!a)return;"then"in a?a.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Ga(this.view.state,o,"completion info")):this.addInfoPane(a,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:a}=e;r.appendChild(i),this.infoDestroy=a||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&Wqe(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),a=this.space;if(!a){let o=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(a.bottom,t.bottom)-10||i.bottom<Math.max(a.top,t.top)+10?null:this.view.state.facet(ki).positionInfo(this.view,t,i,r,a,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let o=r.from;o<r.to;o++){let{completion:s,match:l}=e[o],{section:u}=s;if(u){let d=typeof u=="string"?u:u.name;if(d!=a&&(o>r.from||r.from==0))if(a=d,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let f=i.appendChild(document.createElement("completion-section"));f.textContent=d}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let h=this.optionClass(s);h&&(c.className=h);for(let d of this.optionContent){let f=d(s,this.view.state,this.view,l);f&&c.appendChild(f)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Vqe(n,e){return t=>new Hqe(t,n,e)}function Wqe(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function S7(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function qqe(n,e){let t=[],r=null,i=u=>{t.push(u);let{section:c}=u.completion;if(c){r||(r=[]);let h=typeof c=="string"?c:c.name;r.some(d=>d.name==h)||r.push(typeof c=="string"?{name:h}:c)}},a=e.facet(ki);for(let u of n)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)i(new b7(h,u.source,c?c(h):[],1e9-t.length));else{let h=e.sliceDoc(u.from,u.to),d,f=a.filterStrict?new zqe(h):new Bqe(h);for(let p of u.result.options)if(d=f.match(p.label)){let v=p.displayLabel?c?c(p,d.matched):[]:d.matched;i(new b7(p,u.source,v,d.score+(p.boost||0)))}}}if(r){let u=Object.create(null),c=0,h=(d,f)=>{var p,v;return((p=d.rank)!==null&&p!==void 0?p:1e9)-((v=f.rank)!==null&&v!==void 0?v:1e9)||(d.name<f.name?-1:1)};for(let d of r.sort(h))c-=1e5,u[d.name]=c;for(let d of t){let{section:f}=d.completion;f&&(d.score+=u[typeof f=="string"?f:f.name])}}let o=[],s=null,l=a.compareCompletions;for(let u of t.sort((c,h)=>h.score-c.score||l(c.completion,h.completion))){let c=u.completion;!s||s.label!=c.label||s.detail!=c.detail||s.type!=null&&c.type!=null&&s.type!=c.type||s.apply!=c.apply||s.boost!=c.boost?o.push(u):S7(u.completion)>S7(s)&&(o[o.length-1]=u),s=u.completion}return o}class mp{constructor(e,t,r,i,a,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=a,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new mp(this.options,E7(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,a){let o=qqe(e,t);if(!o.length)return i&&e.some(l=>l.state==1)?new mp(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let s=t.facet(ki).selectOnOpen?0:-1;if(i&&i.selected!=s&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){s=u;break}}return new mp(o,E7(r,s),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:Zqe,above:a.aboveCursor},i?i.timestamp:Date.now(),s,!1)}map(e){return new mp(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class dE{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new dE(Xqe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(ki),i=(r.override||t.languageDataAt("autocomplete",Fc(t)).map(Fqe)).map(o=>(this.active.find(s=>s.source==o)||new va(o,this.active.some(s=>s.state!=0)?1:0)).update(e,r));i.length==this.active.length&&i.every((o,s)=>o==this.active[s])&&(i=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||i.some(o=>o.hasResult()&&e.changes.touchesRange(o.from,o.to))||!Gqe(i,this.active)?a=mp.build(i,t,this.id,a,r):a&&a.disabled&&!i.some(o=>o.state==1)&&(a=null),!a&&i.every(o=>o.state!=1)&&i.some(o=>o.hasResult())&&(i=i.map(o=>o.hasResult()?new va(o.source,0):o));for(let o of e.effects)o.is(cee)&&(a=a&&a.setSelected(o.value,this.id));return i==this.active&&a==this.open?this:new dE(i,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:$qe}}function Gqe(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,a=r==e.length;if(i||a)return i==a;if(n[t++].result!=e[r++].result)return!1}}const $qe={"aria-autocomplete":"list"};function E7(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const Xqe=[];function uk(n,e){if(n.isUserEvent("input.complete")){let t=n.annotation(lee);if(t&&e.activateOnCompletion(t))return"input"}return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class va{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=uk(e,t),i=this;r?i=i.handleUserEvent(e,r,t):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new va(i.source,0));for(let a of e.effects)if(a.is(hE))i=new va(i.source,1,a.value?Fc(e.state):-1);else if(a.is(jv))i=new va(i.source,0);else if(a.is(uee))for(let o of a.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,t,r){return t=="delete"||!r.activateOnTyping?this.map(e.changes):new va(this.source,1)}handleChange(e){return e.changes.touchesRange(Fc(e.startState))?new va(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new va(this.source,this.state,e.mapPos(this.explicitPos))}}class Ip extends va{constructor(e,t,r,i,a){super(e,2,t),this.result=r,this.from=i,this.to=a}hasResult(){return!0}handleUserEvent(e,t,r){var i;let a=this.result;a.map&&!e.changes.empty&&(a=a.map(a,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),l=Fc(e.state);if((this.explicitPos<0?l<=o:l<this.from)||l>s||!a||t=="delete"&&Fc(e.startState)==this.from)return new va(this.source,t=="input"&&r.activateOnTyping?1:0);let u=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return Yqe(a.validFor,e.state,o,s)?new Ip(this.source,u,a,o,s):a.update&&(a=a.update(a,o,s,new oee(e.state,l,u>=0)))?new Ip(this.source,u,a,a.from,(i=a.to)!==null&&i!==void 0?i:Fc(e.state)):new va(this.source,1,u)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new va(this.source,0):this.map(e.changes)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Ip(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new va(this.source,0)}}function Yqe(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):see(n,!0).test(i)}const uee=dn.define({map(n,e){return n.map(t=>t.map(e))}}),cee=dn.define(),Va=Fi.define({create(){return dE.start()},update(n,e){return n.update(e)},provide:n=>[dP.from(n,e=>e.tooltip),bt.contentAttributes.from(n,e=>e.attrs)]});function CP(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(Va).active.find(i=>i.source==e.source);return r instanceof Ip?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},Lqe(n.state,t,r.from,r.to)),{annotations:lee.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}const Zqe=Vqe(Va,CP);function Nx(n,e="option"){return t=>{let r=t.state.field(Va,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(ki).interactionDelay)return!1;let i=1,a;e=="page"&&(a=XK(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,s=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:o-1;return s<0?s=e=="page"?0:o-1:s>=o&&(s=e=="page"?o-1:0),t.dispatch({effects:cee.of(s)}),!0}}const Jqe=n=>{let e=n.state.field(Va,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(ki).interactionDelay?!1:CP(n,e.open.options[e.open.selected])},Kqe=n=>n.state.field(Va,!1)?(n.dispatch({effects:hE.of(!0)}),!0):!1,Qqe=n=>{let e=n.state.field(Va,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:jv.of(null)}),!0)};class eGe{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const tGe=50,nGe=1e3,rGe=jr.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Va).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(Va),t=n.state.facet(ki);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Va)==e)return;let r=n.transactions.some(a=>(a.selection||a.docChanged)&&!uk(a,t));for(let a=0;a<this.running.length;a++){let o=this.running[a];if(r||o.updates.length+n.transactions.length>tGe&&Date.now()-o.time>nGe){for(let s of o.context.abortListeners)try{s()}catch(l){Ga(this.view.state,l)}o.context.abortListeners=null,this.running.splice(a--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(a=>a.effects.some(o=>o.is(hE)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(a=>a.state==1&&!this.running.some(o=>o.active.source==a.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let a of n.transactions)uk(a,t)=="input"?this.composing=2:this.composing==2&&a.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Va);for(let t of e.active)t.state==1&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Fc(e),r=new oee(e,t,n.explicitPos==t),i=new eGe(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(a=>{i.context.aborted||(i.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:jv.of(null)}),Ga(this.view.state,a)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(ki).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(ki);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let o=new Ip(i.active.source,i.active.explicitPos,i.done,i.done.from,(n=i.done.to)!==null&&n!==void 0?n:Fc(i.updates.length?i.updates[0].startState:this.view.state));for(let s of i.updates)o=o.update(s,t);if(o.hasResult()){e.push(o);continue}}let a=this.view.state.field(Va).active.find(o=>o.source==i.active.source);if(a&&a.state==1)if(i.done==null){let o=new va(i.active.source,0);for(let s of i.updates)o=o.update(s,t);o.state!=1&&e.push(o)}else this.startQuery(a)}e.length&&this.view.dispatch({effects:uee.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Va,!1);if(e&&e.tooltip&&this.view.state.facet(ki).closeOnBlur){let t=e.open&&XK(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:jv.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:hE.of(!1)}),20),this.composing=0}}}),iGe=typeof navigator=="object"&&/Win/.test(navigator.platform),aGe=qd.highest(bt.domEventHandlers({keydown(n,e){let t=e.state.field(Va,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(iGe&&n.altKey)||n.metaKey)return!1;let r=t.open.options[t.open.selected],i=t.active.find(o=>o.source==r.source),a=r.completion.commitCharacters||i.result.commitCharacters;return a&&a.indexOf(n.key)>-1&&CP(e,r),!1}})),oGe=bt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Hv={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},td=dn.define({map(n,e){return e.mapPos(n,-1,xa.TrackAfter)??void 0}}),AP=new class extends Td{};AP.startSide=1;AP.endSide=-1;const hee=Fi.define({create(){return An.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(td)&&(n=n.update({add:[AP.range(t.value,t.value+1)]}));return n}});function sGe(){return[uGe,hee]}const TT="()[]{}<>";function dee(n){for(let e=0;e<TT.length;e+=2)if(TT.charCodeAt(e)==n)return TT.charAt(e+1);return eP(n<128?n:n+1)}function fee(n,e){return n.languageDataAt("closeBrackets",e)[0]||Hv}const lGe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),uGe=bt.inputHandler.of((n,e,t,r)=>{if((lGe?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&Vo(Ti(r,0))==1||e!=i.from||t!=i.to)return!1;let a=dGe(n.state,r);return a?(n.dispatch(a),!0):!1}),cGe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=fee(n,n.selection.main.head).brackets||Hv.brackets,r=null,i=n.changeByRange(a=>{if(a.empty){let o=fGe(n.doc,a.head);for(let s of t)if(s==o&&Q_(n.doc,a.head)==dee(Ti(s,0)))return{changes:{from:a.head-s.length,to:a.head+s.length},range:at.cursor(a.head-s.length)}}return{range:r=a}});return r||e(n.update(i,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},hGe=[{key:"Backspace",run:cGe}];function dGe(n,e){let t=fee(n,n.selection.main.head),r=t.brackets||Hv.brackets;for(let i of r){let a=dee(Ti(i,0));if(e==i)return a==i?gGe(n,i,r.indexOf(i+i+i)>-1,t):pGe(n,i,a,t.before||Hv.before);if(e==a&&pee(n,n.selection.main.from))return mGe(n,i,a)}return null}function pee(n,e){let t=!1;return n.field(hee).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function Q_(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Vo(Ti(t,0)))}function fGe(n,e){let t=n.sliceString(e-2,e);return Vo(Ti(t,0))==t.length?t:t.slice(1)}function pGe(n,e,t,r){let i=null,a=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:td.of(o.to+e.length),range:at.range(o.anchor+e.length,o.head+e.length)};let s=Q_(n.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:e+t,from:o.head},effects:td.of(o.head+e.length),range:at.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function mGe(n,e,t){let r=null,i=n.changeByRange(a=>a.empty&&Q_(n.doc,a.head)==t?{changes:{from:a.head,to:a.head+t.length,insert:t},range:at.cursor(a.head+t.length)}:r={range:a});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function gGe(n,e,t,r){let i=r.stringPrefixes||Hv.stringPrefixes,a=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:e,from:s.to}],effects:td.of(s.to+e.length),range:at.range(s.anchor+e.length,s.head+e.length)};let l=s.head,u=Q_(n.doc,l),c;if(u==e){if(_7(n,l))return{changes:{insert:e+e,from:l},effects:td.of(l+e.length),range:at.cursor(l+e.length)};if(pee(n,l)){let h=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:at.cursor(l+h.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(c=C7(n,l-2*e.length,i))>-1&&_7(n,c))return{changes:{insert:e+e+e+e,from:l},effects:td.of(l+e.length),range:at.cursor(l+e.length)};if(n.charCategorizer(l)(u)!=pr.Word&&C7(n,l,i)>-1&&!vGe(n,l,e,i))return{changes:{insert:e+e,from:l},effects:td.of(l+e.length),range:at.cursor(l+e.length)}}return{range:a=s}});return a?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function _7(n,e){let t=ra(n).resolveInner(e+1);return t.parent&&t.from==e}function vGe(n,e,t,r){let i=ra(n).resolveInner(e,-1),a=r.reduce((o,s)=>Math.max(o,s.length),0);for(let o=0;o<5;o++){let s=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+a)),l=s.indexOf(t);if(!l||l>-1&&r.indexOf(s.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>t.length+l;){if(n.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function C7(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=pr.Word)return e;for(let i of t){let a=e-i.length;if(n.sliceDoc(a,e)==i&&r(n.sliceDoc(a-1,a))!=pr.Word)return a}return-1}function yGe(n={}){return[aGe,Va,ki.of(n),rGe,bGe,oGe]}const mee=[{key:"Ctrl-Space",run:Kqe},{key:"Escape",run:Qqe},{key:"ArrowDown",run:Nx(!0)},{key:"ArrowUp",run:Nx(!1)},{key:"PageDown",run:Nx(!0,"page")},{key:"PageUp",run:Nx(!1,"page")},{key:"Enter",run:Jqe}],bGe=qd.highest(_y.computeN([ki],n=>n.facet(ki).defaultKeymap?[mee]:[]));class xGe{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class Wh{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,a=r.facet(Vv).markerFilter;a&&(i=a(i,r));let o=jt.set(i.map(s=>s.from==s.to||s.from==s.to-1&&r.doc.lineAt(s.from).to==s.from?jt.widget({widget:new DGe(s),diagnostic:s}).range(s.from):jt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+s.severity+(s.markClass?" "+s.markClass:"")},diagnostic:s,inclusive:!0}).range(s.from,s.to)),!0);return new Wh(o,t,um(o))}}function um(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,a,{spec:o})=>{if(!(e&&o.diagnostic!=e))return r=new xGe(i,a,o.diagnostic),!1}),r}function wGe(n,e){let t=e.pos,r=e.end||t,i=n.state.facet(Vv).hideOn(n,t,r);if(i!=null)return i;let a=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(gee))||n.changes.touchesRange(a.from,Math.max(a.to,r)))}function SGe(n,e){return n.field(yo,!1)?e:e.concat(dn.appendConfig.of(OGe))}const gee=dn.define(),TP=dn.define(),vee=dn.define(),yo=Fi.define({create(){return new Wh(jt.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),r=null,i=n.panel;if(n.selected){let a=e.changes.mapPos(n.selected.from,1);r=um(t,n.selected.diagnostic,a)||um(t,null,a)}!t.size&&i&&e.state.facet(Vv).autoPanel&&(i=null),n=new Wh(t,i,r)}for(let t of e.effects)if(t.is(gee)){let r=e.state.facet(Vv).autoPanel?t.value.length?Wv.open:null:n.panel;n=Wh.init(t.value,r,e.state)}else t.is(TP)?n=new Wh(n.diagnostics,t.value?Wv.open:null,n.selected):t.is(vee)&&(n=new Wh(n.diagnostics,n.panel,t.value));return n},provide:n=>[Fv.from(n,e=>e.panel),bt.decorations.from(n,e=>e.diagnostics)]}),EGe=jt.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function _Ge(n,e,t){let{diagnostics:r}=n.state.field(yo),i=[],a=2e8,o=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||t>0)&&(e<u||t<0))&&(i.push(c.diagnostic),a=Math.min(l,a),o=Math.max(u,o))});let s=n.state.facet(Vv).tooltipFilter;return s&&(i=s(i,n.state)),i.length?{pos:a,end:o,above:n.state.doc.lineAt(a).to<o,create(){return{dom:CGe(n,i)}}}:null}function CGe(n,e){return nr("ul",{class:"cm-tooltip-lint"},e.map(t=>bee(n,t,!1)))}const AGe=n=>{let e=n.state.field(yo,!1);(!e||!e.panel)&&n.dispatch({effects:SGe(n.state,[TP.of(!0)])});let t=Lv(n,Wv.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},A7=n=>{let e=n.state.field(yo,!1);return!e||!e.panel?!1:(n.dispatch({effects:TP.of(!1)}),!0)},TGe=n=>{let e=n.state.field(yo,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},MGe=[{key:"Mod-Shift-m",run:AGe,preventDefault:!0},{key:"F8",run:TGe}],Vv=Dt.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},kl(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))}});function yee(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(a=>a.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function bee(n,e,t){var r;let i=t?yee(e.actions):[];return nr("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},nr("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((a,o)=>{let s=!1,l=d=>{if(d.preventDefault(),s)return;s=!0;let f=um(n.state.field(yo).diagnostics,e);f&&a.apply(n,f.from,f.to)},{name:u}=a,c=i[o]?u.indexOf(i[o]):-1,h=c<0?u:[u.slice(0,c),nr("u",u.slice(c,c+1)),u.slice(c+1)];return nr("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},h)}),e.source&&nr("div",{class:"cm-diagnosticSource"},e.source))}class DGe extends Ru{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return nr("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class T7{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=bee(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Wv{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)A7(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],o=yee(a.actions);for(let s=0;s<o.length;s++)if(o[s].toUpperCase().charCodeAt(0)==i.keyCode){let l=um(this.view.state.field(yo).diagnostics,a);l&&a.actions[s].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(i.target)&&this.moveSelection(a)};this.list=nr("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=nr("div",{class:"cm-panel-lint"},this.list,nr("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>A7(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(yo).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(yo),r=0,i=!1,a=null;for(e.between(0,this.view.state.doc.length,(o,s,{spec:l})=>{let u=-1,c;for(let h=r;h<this.items.length;h++)if(this.items[h].diagnostic==l.diagnostic){u=h;break}u<0?(c=new T7(this.view,l.diagnostic),this.items.splice(r,0,c),i=!0):(c=this.items[u],u>r&&(this.items.splice(r,u-r),i=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),a=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new T7(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:s})=>{let l=s.height/this.list.offsetHeight;o.top<s.top?this.list.scrollTop-=(s.top-o.top)/l:o.bottom>s.bottom&&(this.list.scrollTop+=(o.bottom-s.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(yo),r=um(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:vee.of(r)})}static open(e){return new Wv(e)}}function kGe(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Ox(n){return kGe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const NGe=bt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ox("#d11")},".cm-lintRange-warning":{backgroundImage:Ox("orange")},".cm-lintRange-info":{backgroundImage:Ox("#999")},".cm-lintRange-hint":{backgroundImage:Ox("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),OGe=[yo,bt.decorations.compute([yo],n=>{let{selected:e,panel:t}=n.field(yo);return!e||!t||e.from==e.to?jt.none:jt.set([EGe.range(e.from,e.to)])}),THe(_Ge,{hideOn:wGe}),NGe];var M7=function(n){n===void 0&&(n={});var{crosshairCursor:e=!1}=n,t=[];n.closeBracketsKeymap!==!1&&(t=t.concat(hGe)),n.defaultKeymap!==!1&&(t=t.concat(YQ)),n.searchKeymap!==!1&&(t=t.concat(kqe)),n.historyKeymap!==!1&&(t=t.concat(fWe)),n.foldKeymap!==!1&&(t=t.concat(TVe)),n.completionKeymap!==!1&&(t=t.concat(mee)),n.lintKeymap!==!1&&(t=t.concat(MGe));var r=[];return n.lineNumbers!==!1&&r.push(LHe()),n.highlightActiveLineGutter!==!1&&r.push(zHe()),n.highlightSpecialChars!==!1&&r.push(nHe()),n.history!==!1&&r.push(iWe()),n.foldGutter!==!1&&r.push(NVe()),n.drawSelection!==!1&&r.push(qje()),n.dropCursor!==!1&&r.push(Zje()),n.allowMultipleSelections!==!1&&r.push(xn.allowMultipleSelections.of(!0)),n.indentOnInput!==!1&&r.push(vVe()),n.syntaxHighlighting!==!1&&r.push(fQ(IVe,{fallback:!0})),n.bracketMatching!==!1&&r.push(HVe()),n.closeBrackets!==!1&&r.push(sGe()),n.autocompletion!==!1&&r.push(yGe()),n.rectangularSelection!==!1&&r.push(gHe()),e!==!1&&r.push(bHe()),n.highlightActiveLine!==!1&&r.push(lHe()),n.highlightSelectionMatches!==!1&&r.push(hqe()),n.tabSize&&typeof n.tabSize=="number"&&r.push(G_.of(" ".repeat(n.tabSize))),r.concat([_y.of(t.flat())]).filter(Boolean)};const PGe="#e5c07b",D7="#e06c75",RGe="#56b6c2",IGe="#ffffff",bw="#abb2bf",ck="#7d8799",LGe="#61afef",FGe="#98c379",k7="#d19a66",BGe="#c678dd",zGe="#21252b",N7="#2c313a",O7="#282c34",MT="#353a42",UGe="#3E4451",P7="#528bff",jGe=bt.theme({"&":{color:bw,backgroundColor:O7},".cm-content":{caretColor:P7},".cm-cursor, .cm-dropCursor":{borderLeftColor:P7},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:UGe},".cm-panels":{backgroundColor:zGe,color:bw},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:O7,color:ck,border:"none"},".cm-activeLineGutter":{backgroundColor:N7},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:MT},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:MT,borderBottomColor:MT},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:N7,color:bw}}},{dark:!0}),HGe=Ty.define([{tag:tt.keyword,color:BGe},{tag:[tt.name,tt.deleted,tt.character,tt.propertyName,tt.macroName],color:D7},{tag:[tt.function(tt.variableName),tt.labelName],color:LGe},{tag:[tt.color,tt.constant(tt.name),tt.standard(tt.name)],color:k7},{tag:[tt.definition(tt.name),tt.separator],color:bw},{tag:[tt.typeName,tt.className,tt.number,tt.changed,tt.annotation,tt.modifier,tt.self,tt.namespace],color:PGe},{tag:[tt.operator,tt.operatorKeyword,tt.url,tt.escape,tt.regexp,tt.link,tt.special(tt.string)],color:RGe},{tag:[tt.meta,tt.comment],color:ck},{tag:tt.strong,fontWeight:"bold"},{tag:tt.emphasis,fontStyle:"italic"},{tag:tt.strikethrough,textDecoration:"line-through"},{tag:tt.link,color:ck,textDecoration:"underline"},{tag:tt.heading,fontWeight:"bold",color:D7},{tag:[tt.atom,tt.bool,tt.special(tt.variableName)],color:k7},{tag:[tt.processingInstruction,tt.string,tt.inserted],color:FGe},{tag:tt.invalid,color:IGe}]),VGe=[jGe,fQ(HGe)];var WGe=bt.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),qGe=function(n){n===void 0&&(n={});var{indentWithTab:e=!0,editable:t=!0,readOnly:r=!1,theme:i="light",placeholder:a="",basicSetup:o=!0}=n,s=[];switch(e&&s.unshift(_y.of([aqe])),o&&(typeof o=="boolean"?s.unshift(M7()):s.unshift(M7(o))),a&&s.unshift(dHe(a)),i){case"light":s.push(WGe);break;case"dark":s.push(VGe);break;case"none":break;default:s.push(i);break}return t===!1&&s.push(bt.editable.of(!1)),r&&s.push(xn.readOnly.of(!0)),[...s]},GGe=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)}),R7=Dl.define(),$Ge=[];function XGe(n){var{value:e,selection:t,onChange:r,onStatistics:i,onCreateEditor:a,onUpdate:o,extensions:s=$Ge,autoFocus:l,theme:u="light",height:c=null,minHeight:h=null,maxHeight:d=null,width:f=null,minWidth:p=null,maxWidth:v=null,placeholder:y="",editable:g=!0,readOnly:w=!1,indentWithTab:b=!0,basicSetup:m=!0,root:x,initialState:S}=n,[C,T]=j.useState(),[M,A]=j.useState(),[D,O]=j.useState(),U=bt.theme({"&":{height:c,minHeight:h,maxHeight:d,width:f,minWidth:p,maxWidth:v},"& .cm-scroller":{height:"100% !important"}}),L=bt.updateListener.of(P=>{if(P.docChanged&&typeof r=="function"&&!P.transactions.some(X=>X.annotation(R7))){var z=P.state.doc,B=z.toString();r(B,P)}i&&i(GGe(P))}),F=qGe({theme:u,editable:g,readOnly:w,placeholder:y,indentWithTab:b,basicSetup:m}),k=[L,U,...F];return o&&typeof o=="function"&&k.push(bt.updateListener.of(o)),k=k.concat(s),j.useEffect(()=>{if(C&&!D){var P={doc:e,selection:t,extensions:k},z=S?xn.fromJSON(S.json,P,S.fields):xn.create(P);if(O(z),!M){var B=new bt({state:z,parent:C,root:x});A(B),a&&a(B,z)}}return()=>{M&&(O(void 0),A(void 0))}},[C,D]),j.useEffect(()=>T(n.container),[n.container]),j.useEffect(()=>()=>{M&&(M.destroy(),A(void 0))},[M]),j.useEffect(()=>{l&&M&&M.focus()},[l,M]),j.useEffect(()=>{M&&M.dispatch({effects:dn.reconfigure.of(k)})},[u,s,c,h,d,f,p,v,y,g,w,b,m,r,o]),j.useEffect(()=>{if(e!==void 0){var P=M?M.state.doc.toString():"";M&&e!==P&&M.dispatch({changes:{from:0,to:P.length,insert:e||""},annotations:[R7.of(!0)]})}},[e,M]),{state:D,setState:O,view:M,setView:A,container:C,setContainer:T}}var YGe=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],xee=j.forwardRef((n,e)=>{var{className:t,value:r="",selection:i,extensions:a=[],onChange:o,onStatistics:s,onCreateEditor:l,onUpdate:u,autoFocus:c,theme:h="light",height:d,minHeight:f,maxHeight:p,width:v,minWidth:y,maxWidth:g,basicSetup:w,placeholder:b,indentWithTab:m,editable:x,readOnly:S,root:C,initialState:T}=n,M=lX(n,YGe),A=j.useRef(null),{state:D,view:O,container:U}=XGe({container:A.current,root:C,value:r,autoFocus:c,theme:h,height:d,minHeight:f,maxHeight:p,width:v,minWidth:y,maxWidth:g,basicSetup:w,placeholder:b,indentWithTab:m,editable:x,readOnly:S,selection:i,onChange:o,onStatistics:s,onCreateEditor:l,onUpdate:u,extensions:a,initialState:T});if(j.useImperativeHandle(e,()=>({editor:A.current,state:D,view:O}),[A,U,D,O]),typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var L=typeof h=="string"?"cm-theme-"+h:"cm-theme";return ue.jsx("div",lt({ref:A,className:""+L+(t?" "+t:"")},M))});xee.displayName="CodeMirror";function ZGe(n){const[e,t]=j.useState(""),r=[_y.of(YQ)];j.useEffect(()=>{n.activeAtom!=null&&t(n.activeAtom.code)},[n.activeAtom]);function i(){document.getElementById("code-window").classList.add("code-off")}return ue.jsxs("div",{id:"code-window",className:" code-off login-page code-window-div",children:[ue.jsx(xee,{width:"100%",extensions:r,value:e,onChange:a=>{t(a)},theme:"dark"}),ue.jsx("button",{type:"button",onClick:()=>n.activeAtom.updateCode(e),style:{display:"none"},id:"save-code-button",children:"Save Code"}),ue.jsx("button",{type:"button",style:{display:"none"},id:"close-code-button",onClick:()=>i(),children:"Close Editor"})]})}function JGe(n){const e=mm();let t=n.props.authorizedUserOcto,r=n.props.activeAtom,i=n.props.setActiveAtom;const a=n.props.exportPopUp,o=n.props.setExportPopUp,[s,l]=j.useState(!0),[u,c]=j.useState(!0),[h,d]=j.useState(!0),[f,p]=j.useState(!0),[v,y]=j.useState(0),[g,w]=j.useState(!1);j.useState(0);const[b,m]=j.useState(!1);var x={a:"Assembly",b:"Loft",c:"Copy",d:"Difference",e:"Extrude",g:"GitHub",i:"Input",j:"Translate",r:"Rotate",u:"Rectangle",l:"Circle",m:"Molecule",s:"Save",v:"Paste",x:"Equation",y:"Code",z:"Undo"};j.useEffect(()=>{r&&r.atomType=="Molecule"&&m(!r.topLevel)},[r]),j.useEffect(()=>(window.addEventListener("keydown",S),()=>{window.removeEventListener("keydown",S)})),j.useEffect(()=>{const P=setInterval(()=>{w(!0),F(y)},12e4);return()=>clearInterval(P)},[]);const S=P=>{P.metaKey&&P.key=="s"&&(P.preventDefault(),w(!0),F(y))};let C=n.displayProps.cad,T=n.displayProps.setMesh,M=n.displayProps.mesh,A=n.displayProps.setWireMesh,D=n.displayProps.wireMesh;const O=async function(P,{owner:z,repo:B,base:X,changes:J},Q){Q(35),X||P.request("GET /repos/{owner}/{repo}",{owner:z,repo:B}).then(Z=>{Q(40),X=Z.data.default_branch,P.rest.repos.listCommits({owner:z,repo:B,sha:X,per_page:1}).then(re=>{Q(50);let fe=re.data[0].sha;const se=re.data[0].commit.tree.sha;P.rest.git.createTree({owner:z,repo:B,base_tree:se,tree:Object.keys(J.files).map(ye=>J.files[ye]!=null?{path:ye,mode:"100644",content:J.files[ye]}:{path:ye,mode:"100644",sha:null})}).then(ye=>{Q(60);const De=ye.data.sha;P.rest.git.createCommit({owner:z,repo:B,message:J.commit,tree:De,parents:[fe]}).then(pe=>{Q(80),fe=pe.data.sha,P.rest.git.updateRef({owner:z,repo:B,sha:fe,ref:"heads/"+X,force:!0}).then(Me=>{Q(90),console.warn("Project saved"),Q(100)})})})})})},U=async function(P){var z=new FileReader;z.onload=function(B){let X=B.target.result.split(",")[1];t.rest.repos.createOrUpdateFileContents({owner:I.currentUser,repo:I.currentRepoName,path:P.name,message:"Import File",content:X}).then(J=>{r.updateFile(P,J.data.content.sha),F(y)})},z.readAsDataURL(P)},L=async function(P,z){console.log("deleting file"),t.rest.repos.deleteFile({owner:I.currentUser,repo:I.currentRepoName,path:P,message:"Deleted node",sha:z})},F=async P=>{console.log(I.topLevelMolecule),P(5);let z;z=await I.topLevelMolecule.generateProjectThumbnail().catch(Pe=>{console.error("Error generating final project thumbnail: ",Pe)}),P(10);var B=I.topLevelMolecule.serialize();B.filetypeVersion=1;const X=JSON.stringify(B,null,4);var J=`###### Note: Do not edit this file directly, it is automatically generated from the CAD model 
# Bill Of Materials 
 |Part|Number Needed|Price|Source| 
 |----|----------|-----|-----|`,Q=J,Z=I.topLevelMolecule.compiledBom,re=0,fe=0;Z.length>0&&Z.forEach(Pe=>{re+=Pe.numberNeeded,fe+=Pe.costUSD,Q=Q+`
|`+Pe.BOMitemName+"|"+Pe.numberNeeded+"|$"+Pe.costUSD.toFixed(2)+"||"}),Q=Q+`
|Total: |`+re+"|$"+fe.toFixed(2)+"| |",Q=Q+`

 3xCOG MSRP: $`+(3*fe).toFixed(2);var se="###### Note: Do not edit this file directly, it is automatically generated from the CAD model",ye=se+`

# `+I.currentRepoName+`

![](/project.svg)

`;P(20);let De=await I.topLevelMolecule.requestReadme(),pe=" ";De.forEach(Pe=>{pe=pe.concat(Pe.readMeText)+`

`}),ye=ye+`

`+pe+`

`;let Me={"BillOfMaterials.md":Q,"README.md":ye,"project.abundance":X};const be=De;let ne;be&&be.forEach(Pe=>{Pe.svg!=null&&(Me["readme"+Pe.uniqueID+".svg"]=Pe.svg,ne=Pe.svg)}),Me["project.svg"]=z||ne||"",P(30),O(t,{owner:I.currentUser,repo:I.currentRepo.name,changes:{files:Me,commit:"Autosave"}},P)};if(t){if(I.currentRepo.owner.login==I.currentRepo.owner.login)return ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{id:"headerBar",children:ue.jsx("img",{className:"thumnail-logo",src:"/imgs/abundance_logo.png",alt:"logo"})}),a?ue.jsx(PX,{setExportPopUp:o,exporting:!0,authorizedUserOcto:t}):null,ue.jsx(mJ,{run:!1}),ue.jsx("button",{className:"round-button",style:{width:"20px",height:"20px",borderRadius:"50%",position:"absolute",top:"44%",right:"1%",opacity:"0.5",transform:"translate(-50%, -50%)"},onClick:()=>{console.log(Object.entries(x).map(([P,z])=>`${P}: ${z}`).join(`
`))}}),ue.jsx($8e,{authorizedUserOcto:t,savePopUp:g,setSavePopUp:w,saveProject:F,setExportPopUp:o,saveState:v,setSaveState:y,currentMoleculeTop:b,setActiveAtom:i}),ue.jsx(ZGe,{activeAtom:r}),ue.jsx("input",{type:"file",id:"fileLoaderInput",style:{display:"none"},onChange:P=>{let z=P.target.files[0];U(z)}}),ue.jsx("input",{type:"button",id:"fileDeleteInput",style:{display:"none"},onClick:()=>{L(r.fileName,r.sha)}}),ue.jsx(V9e,{props:{activeAtom:r,loadProject:n.props.loadProject,setActiveAtom:i,setSavePopUp:w,setSaveState:y,setTop:m,shortCuts:x},displayProps:{setMesh:T,cad:C,setWireMesh:A}}),ue.jsxs("div",{className:"parent flex-parent",id:"lowerHalf",children:[r?ue.jsx(gJ,{activeAtom:r,setActiveAtom:i,setGrid:l,setAxes:c,setWire:d,setSolid:p}):null,ue.jsx(q9e,{props:{gridParam:s,axesParam:u,wireParam:h,solidParam:f,setSaveState:y,setSaveState:y},displayProps:{mesh:M,wireMesh:D,outdatedMesh:n.displayProps.outdatedMesh,setOutdatedMesh:n.displayProps.setOutdatedMesh}})]})]});e(`/run/${I.currentRepo.id}`)}else{console.warn("You are not logged in");const{id:P}=aV();var k=new fu;k.request("GET /repositories/:id",{id:P}).then(z=>{I.currentRepoName=z.data.name,I.currentRepo=z.data})}}function KGe(n){return new Worker("/assets/worker-D2fDphTQ.js",{name:n==null?void 0:n.name})}var Uf=null;const jf=pV(new KGe);function QGe(){const[n,e]=j.useState(5),[t,r]=j.useState({}),[i,a]=j.useState(null),[o,s]=j.useState(!1);j.useEffect(()=>{jf.createMesh(n).then(y=>r(y)),jf.createMesh(n).then(y=>a(y))},[n]);const[l,u]=j.useState(!1),[c,h]=j.useState(null),[d,f]=j.useState(!1);j.useEffect(()=>{I.writeToDisplay=(y,g=!1)=>{console.log("write to display running "+y),s(!0),jf.generateDisplayMesh(y).then(w=>{r(w),s(!1)}).catch(w=>{console.error("Can't display Mesh "+w)}),jf.generateDisplayMesh(I.currentMolecule.output.value).then(w=>a(w)).catch(w=>{console.error("Can't comput Wireframe/No output "+w)})},I.cad=jf});const p=function(){return new Promise((y,g)=>{window.location.href.includes("private")?kC.OAuth.initialize("6CQQE8MMCBFjdWEjevnTBMCQpsw"):kC.OAuth.initialize("BYP9iFpD7aTV9SDhnalvhZ4fwD8"),kC.OAuth.popup("github").then(w=>{Uf=new fu({auth:w.access_token}),Uf.request("GET /user",{}).then(b=>{I.currentUser=b.data.login,I.currentUser&&(u(!0),y(Uf))})})})},v=function(y){I.loadedRepo=y,I.currentRepoName=y.name,I.currentRepo=y,I.totalAtomCount=0,I.numberOfAtomsToLoad=0,I.startTime=new Date().getTime();var g=new fu;g.request("GET /repos/{owner}/{repo}/contents/project.abundance",{owner:y.owner.login,repo:y.name}).then(w=>{let b=JSON.parse(atob(w.data.content));b.filetypeVersion==1?I.topLevelMolecule.deserialize(b):I.topLevelMolecule.deserialize(convertFromOldFormat(b)),h(I.currentMolecule),I.currentMolecule.selected=!0})};return ue.jsx("main",{children:ue.jsx(Pie,{children:ue.jsxs(Aie,{children:[ue.jsx(qx,{exact:!0,path:"/",element:ue.jsx(RIe,{authorizedUserOcto:Uf,tryLogin:p,setIsLoggedIn:u,isloggedIn:l,exportPopUp:d,setExportPopUp:f})}),ue.jsx(qx,{path:"/:id",element:ue.jsx(JGe,{props:{activeAtom:c,setActiveAtom:h,authorizedUserOcto:Uf,tryLogin:p,loadProject:v,exportPopUp:d,setExportPopUp:f},displayProps:{mesh:t,setMesh:r,size:n,cad:jf,wireMesh:i,setWireMesh:a,outdatedMesh:o,setOutdatedMesh:s}})}),ue.jsx(qx,{path:"/run/:id",element:ue.jsx(q8e,{props:{isloggedIn:l,setActiveAtom:h,activeAtom:I.currentMolecule,authorizedUserOcto:Uf,tryLogin:p,loadProject:v},displayProps:{mesh:t,wireMesh:i,outdatedMesh:o,setOutdatedMesh:s}})})]})})})}const e$e=DT.createRoot(document.getElementById("root"));e$e.render(ue.jsx(Te.StrictMode,{children:ue.jsx(QGe,{})}));
