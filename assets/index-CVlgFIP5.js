import{Octokit as fu}from"https://esm.sh/octokit@2.0.19";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var cte=Object.defineProperty,hte=(r,e,t)=>e in r?cte(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,dte=(r,e,t)=>(hte(r,e+"",t),t);function fte(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();var fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function is(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function pte(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var I7={exports:{}},fM={},L7={exports:{}},gr={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Wv=Symbol.for("react.element"),mte=Symbol.for("react.portal"),gte=Symbol.for("react.fragment"),vte=Symbol.for("react.strict_mode"),yte=Symbol.for("react.profiler"),bte=Symbol.for("react.provider"),xte=Symbol.for("react.context"),wte=Symbol.for("react.forward_ref"),Ste=Symbol.for("react.suspense"),Mte=Symbol.for("react.memo"),_te=Symbol.for("react.lazy"),oI=Symbol.iterator;function Ete(r){return r===null||typeof r!="object"?null:(r=oI&&r[oI]||r["@@iterator"],typeof r=="function"?r:null)}var F7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B7=Object.assign,z7={};function cm(r,e,t){this.props=r,this.context=e,this.refs=z7,this.updater=t||F7}cm.prototype.isReactComponent={};cm.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};cm.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function U7(){}U7.prototype=cm.prototype;function hk(r,e,t){this.props=r,this.context=e,this.refs=z7,this.updater=t||F7}var dk=hk.prototype=new U7;dk.constructor=hk;B7(dk,cm.prototype);dk.isPureReactComponent=!0;var sI=Array.isArray,j7=Object.prototype.hasOwnProperty,fk={current:null},H7={key:!0,ref:!0,__self:!0,__source:!0};function V7(r,e,t){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)j7.call(e,n)&&!H7.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=t;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(r&&r.defaultProps)for(n in s=r.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Wv,type:r,key:a,ref:o,props:i,_owner:fk.current}}function Cte(r,e){return{$$typeof:Wv,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function pk(r){return typeof r=="object"&&r!==null&&r.$$typeof===Wv}function Ate(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var lI=/\/+/g;function iE(r,e){return typeof r=="object"&&r!==null&&r.key!=null?Ate(""+r.key):e.toString(36)}function Rx(r,e,t,n,i){var a=typeof r;(a==="undefined"||a==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case Wv:case mte:o=!0}}if(o)return o=r,i=i(o),r=n===""?"."+iE(o,0):n,sI(i)?(t="",r!=null&&(t=r.replace(lI,"$&/")+"/"),Rx(i,e,t,"",function(u){return u})):i!=null&&(pk(i)&&(i=Cte(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(lI,"$&/")+"/")+r)),e.push(i)),1;if(o=0,n=n===""?".":n+":",sI(r))for(var s=0;s<r.length;s++){a=r[s];var l=n+iE(a,s);o+=Rx(a,e,t,l,i)}else if(l=Ete(r),typeof l=="function")for(r=l.call(r),s=0;!(a=r.next()).done;)a=a.value,l=n+iE(a,s++),o+=Rx(a,e,t,l,i);else if(a==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function M1(r,e,t){if(r==null)return r;var n=[],i=0;return Rx(r,n,"","",function(a){return e.call(t,a,i++)}),n}function Tte(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var ka={current:null},Px={transition:null},Dte={ReactCurrentDispatcher:ka,ReactCurrentBatchConfig:Px,ReactCurrentOwner:fk};gr.Children={map:M1,forEach:function(r,e,t){M1(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return M1(r,function(){e++}),e},toArray:function(r){return M1(r,function(e){return e})||[]},only:function(r){if(!pk(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};gr.Component=cm;gr.Fragment=gte;gr.Profiler=yte;gr.PureComponent=hk;gr.StrictMode=vte;gr.Suspense=Ste;gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dte;gr.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=B7({},r.props),i=r.key,a=r.ref,o=r._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=fk.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var s=r.type.defaultProps;for(l in e)j7.call(e,l)&&!H7.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:Wv,type:r.type,key:i,ref:a,props:n,_owner:o}};gr.createContext=function(r){return r={$$typeof:xte,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:bte,_context:r},r.Consumer=r};gr.createElement=V7;gr.createFactory=function(r){var e=V7.bind(null,r);return e.type=r,e};gr.createRef=function(){return{current:null}};gr.forwardRef=function(r){return{$$typeof:wte,render:r}};gr.isValidElement=pk;gr.lazy=function(r){return{$$typeof:_te,_payload:{_status:-1,_result:r},_init:Tte}};gr.memo=function(r,e){return{$$typeof:Mte,type:r,compare:e===void 0?null:e}};gr.startTransition=function(r){var e=Px.transition;Px.transition={};try{r()}finally{Px.transition=e}};gr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};gr.useCallback=function(r,e){return ka.current.useCallback(r,e)};gr.useContext=function(r){return ka.current.useContext(r)};gr.useDebugValue=function(){};gr.useDeferredValue=function(r){return ka.current.useDeferredValue(r)};gr.useEffect=function(r,e){return ka.current.useEffect(r,e)};gr.useId=function(){return ka.current.useId()};gr.useImperativeHandle=function(r,e,t){return ka.current.useImperativeHandle(r,e,t)};gr.useInsertionEffect=function(r,e){return ka.current.useInsertionEffect(r,e)};gr.useLayoutEffect=function(r,e){return ka.current.useLayoutEffect(r,e)};gr.useMemo=function(r,e){return ka.current.useMemo(r,e)};gr.useReducer=function(r,e,t){return ka.current.useReducer(r,e,t)};gr.useRef=function(r){return ka.current.useRef(r)};gr.useState=function(r){return ka.current.useState(r)};gr.useSyncExternalStore=function(r,e,t){return ka.current.useSyncExternalStore(r,e,t)};gr.useTransition=function(){return ka.current.useTransition()};gr.version="18.2.0";L7.exports=gr;var j=L7.exports;const Ae=is(j),xw=fte({__proto__:null,default:Ae},[j]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var kte=j,Nte=Symbol.for("react.element"),Ote=Symbol.for("react.fragment"),Rte=Object.prototype.hasOwnProperty,Pte=kte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ite={key:!0,ref:!0,__self:!0,__source:!0};function q7(r,e,t){var n,i={},a=null,o=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Rte.call(e,n)&&!Ite.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Nte,type:r,key:a,ref:o,props:i,_owner:Pte.current}}fM.Fragment=Ote;fM.jsx=q7;fM.jsxs=q7;I7.exports=fM;var ue=I7.exports,DA={},W7={exports:{}},Eo={},G7={exports:{}},$7={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(r){function e(z,B){var X=z.length;z.push(B);e:for(;0<X;){var Z=X-1>>>1,Q=z[Z];if(0<i(Q,B))z[Z]=B,z[X]=Q,X=Z;else break e}}function t(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var B=z[0],X=z.pop();if(X!==B){z[0]=X;e:for(var Z=0,Q=z.length,J=Q>>>1;Z<J;){var ne=2*(Z+1)-1,fe=z[ne],se=ne+1,ye=z[se];if(0>i(fe,X))se<Q&&0>i(ye,fe)?(z[Z]=ye,z[se]=X,Z=se):(z[Z]=fe,z[ne]=X,Z=ne);else if(se<Q&&0>i(ye,X))z[Z]=ye,z[se]=X,Z=se;else break e}}return B}function i(z,B){var X=z.sortIndex-B.sortIndex;return X!==0?X:z.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();r.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var B=t(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=z)n(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=t(u)}}function m(z){if(v=!1,b(z),!p)if(t(l)!==null)p=!0,k(x);else{var B=t(u);B!==null&&R(m,B.startTime-z)}}function x(z,B){p=!1,v&&(v=!1,g(A),A=-1),f=!0;var X=d;try{for(b(B),h=t(l);h!==null&&(!(h.expirationTime>B)||z&&!D());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,d=h.priorityLevel;var Q=Z(h.expirationTime<=B);B=r.unstable_now(),typeof Q=="function"?h.callback=Q:h===t(l)&&n(l),b(B)}else n(l);h=t(l)}if(h!==null)var J=!0;else{var ne=t(u);ne!==null&&R(m,ne.startTime-B),J=!1}return J}finally{h=null,d=X,f=!1}}var S=!1,E=null,A=-1,T=5,C=-1;function D(){return!(r.unstable_now()-C<T)}function O(){if(E!==null){var z=r.unstable_now();C=z;var B=!0;try{B=E(!0,z)}finally{B?U():(S=!1,E=null)}}else S=!1}var U;if(typeof w=="function")U=function(){w(O)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,F=L.port2;L.port1.onmessage=O,U=function(){F.postMessage(null)}}else U=function(){y(O,0)};function k(z){E=z,S||(S=!0,U())}function R(z,B){A=y(function(){z(r.unstable_now())},B)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(z){z.callback=null},r.unstable_continueExecution=function(){p||f||(p=!0,k(x))},r.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(z){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var X=d;d=B;try{return z()}finally{d=X}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(z,B){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=d;d=z;try{return B()}finally{d=X}},r.unstable_scheduleCallback=function(z,B,X){var Z=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Z+X:Z):X=Z,z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=X+Q,z={id:c++,callback:B,priorityLevel:z,startTime:X,expirationTime:Q,sortIndex:-1},X>Z?(z.sortIndex=X,e(u,z),t(l)===null&&z===t(u)&&(v?(g(A),A=-1):v=!0,R(m,X-Z))):(z.sortIndex=Q,e(l,z),p||f||(p=!0,k(x))),z},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(z){var B=d;return function(){var X=d;d=B;try{return z.apply(this,arguments)}finally{d=X}}}})($7);G7.exports=$7;var Lte=G7.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var X7=j,Mo=Lte;function ut(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y7=new Set,C0={};function Od(r,e){Lp(r,e),Lp(r+"Capture",e)}function Lp(r,e){for(C0[r]=e,r=0;r<e.length;r++)Y7.add(e[r])}var pu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kA=Object.prototype.hasOwnProperty,Fte=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uI={},cI={};function Bte(r){return kA.call(cI,r)?!0:kA.call(uI,r)?!1:Fte.test(r)?cI[r]=!0:(uI[r]=!0,!1)}function zte(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function Ute(r,e,t,n){if(e===null||typeof e>"u"||zte(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Na(r,e,t,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Pi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Pi[r]=new Na(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];Pi[e]=new Na(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Pi[r]=new Na(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Pi[r]=new Na(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Pi[r]=new Na(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Pi[r]=new Na(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Pi[r]=new Na(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Pi[r]=new Na(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Pi[r]=new Na(r,5,!1,r.toLowerCase(),null,!1,!1)});var mk=/[\-:]([a-z])/g;function gk(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(mk,gk);Pi[e]=new Na(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(mk,gk);Pi[e]=new Na(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(mk,gk);Pi[e]=new Na(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Pi[r]=new Na(r,1,!1,r.toLowerCase(),null,!1,!1)});Pi.xlinkHref=new Na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Pi[r]=new Na(r,1,!1,r.toLowerCase(),null,!0,!0)});function vk(r,e,t,n){var i=Pi.hasOwnProperty(e)?Pi[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ute(e,t,i,n)&&(t=null),n||i===null?Bte(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var ku=X7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_1=Symbol.for("react.element"),$f=Symbol.for("react.portal"),Xf=Symbol.for("react.fragment"),yk=Symbol.for("react.strict_mode"),NA=Symbol.for("react.profiler"),J7=Symbol.for("react.provider"),Z7=Symbol.for("react.context"),bk=Symbol.for("react.forward_ref"),OA=Symbol.for("react.suspense"),RA=Symbol.for("react.suspense_list"),xk=Symbol.for("react.memo"),nc=Symbol.for("react.lazy"),K7=Symbol.for("react.offscreen"),hI=Symbol.iterator;function sg(r){return r===null||typeof r!="object"?null:(r=hI&&r[hI]||r["@@iterator"],typeof r=="function"?r:null)}var Mn=Object.assign,aE;function jg(r){if(aE===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);aE=e&&e[1]||""}return`
`+aE+r}var oE=!1;function sE(r,e){if(!r||oE)return"";oE=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(r,[],e)}else{try{e.call()}catch(u){n=u}r.call(e.prototype)}else{try{throw Error()}catch(u){n=u}r()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=o&&0<=s);break}}}finally{oE=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?jg(r):""}function jte(r){switch(r.tag){case 5:return jg(r.type);case 16:return jg("Lazy");case 13:return jg("Suspense");case 19:return jg("SuspenseList");case 0:case 2:case 15:return r=sE(r.type,!1),r;case 11:return r=sE(r.type.render,!1),r;case 1:return r=sE(r.type,!0),r;default:return""}}function PA(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Xf:return"Fragment";case $f:return"Portal";case NA:return"Profiler";case yk:return"StrictMode";case OA:return"Suspense";case RA:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Z7:return(r.displayName||"Context")+".Consumer";case J7:return(r._context.displayName||"Context")+".Provider";case bk:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case xk:return e=r.displayName||null,e!==null?e:PA(r.type)||"Memo";case nc:e=r._payload,r=r._init;try{return PA(r(e))}catch{}}return null}function Hte(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return PA(e);case 8:return e===yk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bc(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Q7(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Vte(r){var e=Q7(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,a=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function E1(r){r._valueTracker||(r._valueTracker=Vte(r))}function ej(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=Q7(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function ww(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function IA(r,e){var t=e.checked;return Mn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function dI(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=Bc(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tj(r,e){e=e.checked,e!=null&&vk(r,"checked",e,!1)}function LA(r,e){tj(r,e);var t=Bc(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?FA(r,e.type,t):e.hasOwnProperty("defaultValue")&&FA(r,e.type,Bc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function fI(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function FA(r,e,t){(e!=="number"||ww(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var Hg=Array.isArray;function gp(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+Bc(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function BA(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ut(91));return Mn({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function pI(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ut(92));if(Hg(t)){if(1<t.length)throw Error(ut(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:Bc(t)}}function rj(r,e){var t=Bc(e.value),n=Bc(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function mI(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function nj(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zA(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?nj(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var C1,ij=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(C1=C1||document.createElement("div"),C1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=C1.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function A0(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var n0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qte=["Webkit","ms","Moz","O"];Object.keys(n0).forEach(function(r){qte.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),n0[e]=n0[r]})});function aj(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||n0.hasOwnProperty(r)&&n0[r]?(""+e).trim():e+"px"}function oj(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=aj(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var Wte=Mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function UA(r,e){if(e){if(Wte[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ut(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ut(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ut(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ut(62))}}function jA(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var HA=null;function wk(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var VA=null,vp=null,yp=null;function gI(r){if(r=Xv(r)){if(typeof VA!="function")throw Error(ut(280));var e=r.stateNode;e&&(e=yM(e),VA(r.stateNode,r.type,e))}}function sj(r){vp?yp?yp.push(r):yp=[r]:vp=r}function lj(){if(vp){var r=vp,e=yp;if(yp=vp=null,gI(r),e)for(r=0;r<e.length;r++)gI(e[r])}}function uj(r,e){return r(e)}function cj(){}var lE=!1;function hj(r,e,t){if(lE)return r(e,t);lE=!0;try{return uj(r,e,t)}finally{lE=!1,(vp!==null||yp!==null)&&(cj(),lj())}}function T0(r,e){var t=r.stateNode;if(t===null)return null;var n=yM(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(ut(231,e,typeof t));return t}var qA=!1;if(pu)try{var lg={};Object.defineProperty(lg,"passive",{get:function(){qA=!0}}),window.addEventListener("test",lg,lg),window.removeEventListener("test",lg,lg)}catch{qA=!1}function Gte(r,e,t,n,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var i0=!1,Sw=null,Mw=!1,WA=null,$te={onError:function(r){i0=!0,Sw=r}};function Xte(r,e,t,n,i,a,o,s,l){i0=!1,Sw=null,Gte.apply($te,arguments)}function Yte(r,e,t,n,i,a,o,s,l){if(Xte.apply(this,arguments),i0){if(i0){var u=Sw;i0=!1,Sw=null}else throw Error(ut(198));Mw||(Mw=!0,WA=u)}}function Rd(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function dj(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function vI(r){if(Rd(r)!==r)throw Error(ut(188))}function Jte(r){var e=r.alternate;if(!e){if(e=Rd(r),e===null)throw Error(ut(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===t)return vI(i),r;if(a===n)return vI(i),e;a=a.sibling}throw Error(ut(188))}if(t.return!==n.return)t=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===t){o=!0,t=i,n=a;break}if(s===n){o=!0,n=i,t=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===t){o=!0,t=a,n=i;break}if(s===n){o=!0,n=a,t=i;break}s=s.sibling}if(!o)throw Error(ut(189))}}if(t.alternate!==n)throw Error(ut(190))}if(t.tag!==3)throw Error(ut(188));return t.stateNode.current===t?r:e}function fj(r){return r=Jte(r),r!==null?pj(r):null}function pj(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=pj(r);if(e!==null)return e;r=r.sibling}return null}var mj=Mo.unstable_scheduleCallback,yI=Mo.unstable_cancelCallback,Zte=Mo.unstable_shouldYield,Kte=Mo.unstable_requestPaint,Un=Mo.unstable_now,Qte=Mo.unstable_getCurrentPriorityLevel,Sk=Mo.unstable_ImmediatePriority,gj=Mo.unstable_UserBlockingPriority,_w=Mo.unstable_NormalPriority,ere=Mo.unstable_LowPriority,vj=Mo.unstable_IdlePriority,pM=null,dl=null;function tre(r){if(dl&&typeof dl.onCommitFiberRoot=="function")try{dl.onCommitFiberRoot(pM,r,void 0,(r.current.flags&128)===128)}catch{}}var Ss=Math.clz32?Math.clz32:ire,rre=Math.log,nre=Math.LN2;function ire(r){return r>>>=0,r===0?32:31-(rre(r)/nre|0)|0}var A1=64,T1=4194304;function Vg(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ew(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,a=r.pingedLanes,o=t&268435455;if(o!==0){var s=o&~i;s!==0?n=Vg(s):(a&=o,a!==0&&(n=Vg(a)))}else o=t&~i,o!==0?n=Vg(o):a!==0&&(n=Vg(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-Ss(e),i=1<<t,n|=r[t],e&=~i;return n}function are(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ore(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,a=r.pendingLanes;0<a;){var o=31-Ss(a),s=1<<o,l=i[o];l===-1?(!(s&t)||s&n)&&(i[o]=are(s,e)):l<=e&&(r.expiredLanes|=s),a&=~s}}function GA(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function yj(){var r=A1;return A1<<=1,!(A1&4194240)&&(A1=64),r}function uE(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function Gv(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-Ss(e),r[e]=t}function sre(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-Ss(t),a=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~a}}function Mk(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-Ss(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var zr=0;function bj(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var xj,_k,wj,Sj,Mj,$A=!1,D1=[],Mc=null,_c=null,Ec=null,D0=new Map,k0=new Map,uc=[],lre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bI(r,e){switch(r){case"focusin":case"focusout":Mc=null;break;case"dragenter":case"dragleave":_c=null;break;case"mouseover":case"mouseout":Ec=null;break;case"pointerover":case"pointerout":D0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":k0.delete(e.pointerId)}}function ug(r,e,t,n,i,a){return r===null||r.nativeEvent!==a?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Xv(e),e!==null&&_k(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function ure(r,e,t,n,i){switch(e){case"focusin":return Mc=ug(Mc,r,e,t,n,i),!0;case"dragenter":return _c=ug(_c,r,e,t,n,i),!0;case"mouseover":return Ec=ug(Ec,r,e,t,n,i),!0;case"pointerover":var a=i.pointerId;return D0.set(a,ug(D0.get(a)||null,r,e,t,n,i)),!0;case"gotpointercapture":return a=i.pointerId,k0.set(a,ug(k0.get(a)||null,r,e,t,n,i)),!0}return!1}function _j(r){var e=Wh(r.target);if(e!==null){var t=Rd(e);if(t!==null){if(e=t.tag,e===13){if(e=dj(t),e!==null){r.blockedOn=e,Mj(r.priority,function(){wj(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ix(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=XA(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);HA=n,t.target.dispatchEvent(n),HA=null}else return e=Xv(t),e!==null&&_k(e),r.blockedOn=t,!1;e.shift()}return!0}function xI(r,e,t){Ix(r)&&t.delete(e)}function cre(){$A=!1,Mc!==null&&Ix(Mc)&&(Mc=null),_c!==null&&Ix(_c)&&(_c=null),Ec!==null&&Ix(Ec)&&(Ec=null),D0.forEach(xI),k0.forEach(xI)}function cg(r,e){r.blockedOn===e&&(r.blockedOn=null,$A||($A=!0,Mo.unstable_scheduleCallback(Mo.unstable_NormalPriority,cre)))}function N0(r){function e(i){return cg(i,r)}if(0<D1.length){cg(D1[0],r);for(var t=1;t<D1.length;t++){var n=D1[t];n.blockedOn===r&&(n.blockedOn=null)}}for(Mc!==null&&cg(Mc,r),_c!==null&&cg(_c,r),Ec!==null&&cg(Ec,r),D0.forEach(e),k0.forEach(e),t=0;t<uc.length;t++)n=uc[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<uc.length&&(t=uc[0],t.blockedOn===null);)_j(t),t.blockedOn===null&&uc.shift()}var bp=ku.ReactCurrentBatchConfig,Cw=!0;function hre(r,e,t,n){var i=zr,a=bp.transition;bp.transition=null;try{zr=1,Ek(r,e,t,n)}finally{zr=i,bp.transition=a}}function dre(r,e,t,n){var i=zr,a=bp.transition;bp.transition=null;try{zr=4,Ek(r,e,t,n)}finally{zr=i,bp.transition=a}}function Ek(r,e,t,n){if(Cw){var i=XA(r,e,t,n);if(i===null)bE(r,e,n,Aw,t),bI(r,n);else if(ure(i,r,e,t,n))n.stopPropagation();else if(bI(r,n),e&4&&-1<lre.indexOf(r)){for(;i!==null;){var a=Xv(i);if(a!==null&&xj(a),a=XA(r,e,t,n),a===null&&bE(r,e,n,Aw,t),a===i)break;i=a}i!==null&&n.stopPropagation()}else bE(r,e,n,null,t)}}var Aw=null;function XA(r,e,t,n){if(Aw=null,r=wk(n),r=Wh(r),r!==null)if(e=Rd(r),e===null)r=null;else if(t=e.tag,t===13){if(r=dj(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return Aw=r,null}function Ej(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qte()){case Sk:return 1;case gj:return 4;case _w:case ere:return 16;case vj:return 536870912;default:return 16}default:return 16}}var fc=null,Ck=null,Lx=null;function Cj(){if(Lx)return Lx;var r,e=Ck,t=e.length,n,i="value"in fc?fc.value:fc.textContent,a=i.length;for(r=0;r<t&&e[r]===i[r];r++);var o=t-r;for(n=1;n<=o&&e[t-n]===i[a-n];n++);return Lx=i.slice(r,1<n?1-n:void 0)}function Fx(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function k1(){return!0}function wI(){return!1}function Co(r){function e(t,n,i,a,o){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in r)r.hasOwnProperty(s)&&(t=r[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?k1:wI,this.isPropagationStopped=wI,this}return Mn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=k1)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=k1)},persist:function(){},isPersistent:k1}),e}var hm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ak=Co(hm),$v=Mn({},hm,{view:0,detail:0}),fre=Co($v),cE,hE,hg,mM=Mn({},$v,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tk,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==hg&&(hg&&r.type==="mousemove"?(cE=r.screenX-hg.screenX,hE=r.screenY-hg.screenY):hE=cE=0,hg=r),cE)},movementY:function(r){return"movementY"in r?r.movementY:hE}}),SI=Co(mM),pre=Mn({},mM,{dataTransfer:0}),mre=Co(pre),gre=Mn({},$v,{relatedTarget:0}),dE=Co(gre),vre=Mn({},hm,{animationName:0,elapsedTime:0,pseudoElement:0}),yre=Co(vre),bre=Mn({},hm,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),xre=Co(bre),wre=Mn({},hm,{data:0}),MI=Co(wre),Sre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_re={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ere(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=_re[r])?!!e[r]:!1}function Tk(){return Ere}var Cre=Mn({},$v,{key:function(r){if(r.key){var e=Sre[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=Fx(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Mre[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tk,charCode:function(r){return r.type==="keypress"?Fx(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Fx(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Are=Co(Cre),Tre=Mn({},mM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_I=Co(Tre),Dre=Mn({},$v,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tk}),kre=Co(Dre),Nre=Mn({},hm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ore=Co(Nre),Rre=Mn({},mM,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Pre=Co(Rre),Ire=[9,13,27,32],Dk=pu&&"CompositionEvent"in window,a0=null;pu&&"documentMode"in document&&(a0=document.documentMode);var Lre=pu&&"TextEvent"in window&&!a0,Aj=pu&&(!Dk||a0&&8<a0&&11>=a0),EI=" ",CI=!1;function Tj(r,e){switch(r){case"keyup":return Ire.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dj(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Yf=!1;function Fre(r,e){switch(r){case"compositionend":return Dj(e);case"keypress":return e.which!==32?null:(CI=!0,EI);case"textInput":return r=e.data,r===EI&&CI?null:r;default:return null}}function Bre(r,e){if(Yf)return r==="compositionend"||!Dk&&Tj(r,e)?(r=Cj(),Lx=Ck=fc=null,Yf=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Aj&&e.locale!=="ko"?null:e.data;default:return null}}var zre={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AI(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!zre[r.type]:e==="textarea"}function kj(r,e,t,n){sj(n),e=Tw(e,"onChange"),0<e.length&&(t=new Ak("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var o0=null,O0=null;function Ure(r){jj(r,0)}function gM(r){var e=Kf(r);if(ej(e))return r}function jre(r,e){if(r==="change")return e}var Nj=!1;if(pu){var fE;if(pu){var pE="oninput"in document;if(!pE){var TI=document.createElement("div");TI.setAttribute("oninput","return;"),pE=typeof TI.oninput=="function"}fE=pE}else fE=!1;Nj=fE&&(!document.documentMode||9<document.documentMode)}function DI(){o0&&(o0.detachEvent("onpropertychange",Oj),O0=o0=null)}function Oj(r){if(r.propertyName==="value"&&gM(O0)){var e=[];kj(e,O0,r,wk(r)),hj(Ure,e)}}function Hre(r,e,t){r==="focusin"?(DI(),o0=e,O0=t,o0.attachEvent("onpropertychange",Oj)):r==="focusout"&&DI()}function Vre(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return gM(O0)}function qre(r,e){if(r==="click")return gM(e)}function Wre(r,e){if(r==="input"||r==="change")return gM(e)}function Gre(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Cs=typeof Object.is=="function"?Object.is:Gre;function R0(r,e){if(Cs(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!kA.call(e,i)||!Cs(r[i],e[i]))return!1}return!0}function kI(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function NI(r,e){var t=kI(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=kI(t)}}function Rj(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?Rj(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function Pj(){for(var r=window,e=ww();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=ww(r.document)}return e}function kk(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function $re(r){var e=Pj(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&Rj(t.ownerDocument.documentElement,t)){if(n!==null&&kk(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!r.extend&&a>n&&(i=n,n=a,a=i),i=NI(t,a);var o=NI(t,n);i&&o&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),a>n?(r.addRange(e),r.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Xre=pu&&"documentMode"in document&&11>=document.documentMode,Jf=null,YA=null,s0=null,JA=!1;function OI(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;JA||Jf==null||Jf!==ww(n)||(n=Jf,"selectionStart"in n&&kk(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),s0&&R0(s0,n)||(s0=n,n=Tw(YA,"onSelect"),0<n.length&&(e=new Ak("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=Jf)))}function N1(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var Zf={animationend:N1("Animation","AnimationEnd"),animationiteration:N1("Animation","AnimationIteration"),animationstart:N1("Animation","AnimationStart"),transitionend:N1("Transition","TransitionEnd")},mE={},Ij={};pu&&(Ij=document.createElement("div").style,"AnimationEvent"in window||(delete Zf.animationend.animation,delete Zf.animationiteration.animation,delete Zf.animationstart.animation),"TransitionEvent"in window||delete Zf.transitionend.transition);function vM(r){if(mE[r])return mE[r];if(!Zf[r])return r;var e=Zf[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in Ij)return mE[r]=e[t];return r}var Lj=vM("animationend"),Fj=vM("animationiteration"),Bj=vM("animationstart"),zj=vM("transitionend"),Uj=new Map,RI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eh(r,e){Uj.set(r,e),Od(e,[r])}for(var gE=0;gE<RI.length;gE++){var vE=RI[gE],Yre=vE.toLowerCase(),Jre=vE[0].toUpperCase()+vE.slice(1);eh(Yre,"on"+Jre)}eh(Lj,"onAnimationEnd");eh(Fj,"onAnimationIteration");eh(Bj,"onAnimationStart");eh("dblclick","onDoubleClick");eh("focusin","onFocus");eh("focusout","onBlur");eh(zj,"onTransitionEnd");Lp("onMouseEnter",["mouseout","mouseover"]);Lp("onMouseLeave",["mouseout","mouseover"]);Lp("onPointerEnter",["pointerout","pointerover"]);Lp("onPointerLeave",["pointerout","pointerover"]);Od("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Od("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Od("onBeforeInput",["compositionend","keypress","textInput","paste"]);Od("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Od("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Od("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zre=new Set("cancel close invalid load scroll toggle".split(" ").concat(qg));function PI(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,Yte(n,e,void 0,r),r.currentTarget=null}function jj(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;PI(i,s,u),a=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;PI(i,s,u),a=l}}}if(Mw)throw r=WA,Mw=!1,WA=null,r}function an(r,e){var t=e[tT];t===void 0&&(t=e[tT]=new Set);var n=r+"__bubble";t.has(n)||(Hj(e,r,2,!1),t.add(n))}function yE(r,e,t){var n=0;e&&(n|=4),Hj(t,r,n,e)}var O1="_reactListening"+Math.random().toString(36).slice(2);function P0(r){if(!r[O1]){r[O1]=!0,Y7.forEach(function(t){t!=="selectionchange"&&(Zre.has(t)||yE(t,!1,r),yE(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[O1]||(e[O1]=!0,yE("selectionchange",!1,e))}}function Hj(r,e,t,n){switch(Ej(e)){case 1:var i=hre;break;case 4:i=dre;break;default:i=Ek}t=i.bind(null,e,t,r),i=void 0,!qA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function bE(r,e,t,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Wh(s),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}s=s.parentNode}}n=n.return}hj(function(){var u=a,c=wk(t),h=[];e:{var d=Uj.get(r);if(d!==void 0){var f=Ak,p=r;switch(r){case"keypress":if(Fx(t)===0)break e;case"keydown":case"keyup":f=Are;break;case"focusin":p="focus",f=dE;break;case"focusout":p="blur",f=dE;break;case"beforeblur":case"afterblur":f=dE;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=SI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=mre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=kre;break;case Lj:case Fj:case Bj:f=yre;break;case zj:f=Ore;break;case"scroll":f=fre;break;case"wheel":f=Pre;break;case"copy":case"cut":case"paste":f=xre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=_I}var v=(e&4)!==0,y=!v&&r==="scroll",g=v?d!==null?d+"Capture":null:d;v=[];for(var w=u,b;w!==null;){b=w;var m=b.stateNode;if(b.tag===5&&m!==null&&(b=m,g!==null&&(m=T0(w,g),m!=null&&v.push(I0(w,m,b)))),y)break;w=w.return}0<v.length&&(d=new f(d,p,null,t,c),h.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=r==="mouseover"||r==="pointerover",f=r==="mouseout"||r==="pointerout",d&&t!==HA&&(p=t.relatedTarget||t.fromElement)&&(Wh(p)||p[mu]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=u,p=p?Wh(p):null,p!==null&&(y=Rd(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(v=SI,m="onMouseLeave",g="onMouseEnter",w="mouse",(r==="pointerout"||r==="pointerover")&&(v=_I,m="onPointerLeave",g="onPointerEnter",w="pointer"),y=f==null?d:Kf(f),b=p==null?d:Kf(p),d=new v(m,w+"leave",f,t,c),d.target=y,d.relatedTarget=b,m=null,Wh(c)===u&&(v=new v(g,w+"enter",p,t,c),v.target=b,v.relatedTarget=y,m=v),y=m,f&&p)t:{for(v=f,g=p,w=0,b=v;b;b=af(b))w++;for(b=0,m=g;m;m=af(m))b++;for(;0<w-b;)v=af(v),w--;for(;0<b-w;)g=af(g),b--;for(;w--;){if(v===g||g!==null&&v===g.alternate)break t;v=af(v),g=af(g)}v=null}else v=null;f!==null&&II(h,d,f,v,!1),p!==null&&y!==null&&II(h,y,p,v,!0)}}e:{if(d=u?Kf(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var x=jre;else if(AI(d))if(Nj)x=Wre;else{x=Vre;var S=Hre}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=qre);if(x&&(x=x(r,u))){kj(h,x,t,c);break e}S&&S(r,d,u),r==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&FA(d,"number",d.value)}switch(S=u?Kf(u):window,r){case"focusin":(AI(S)||S.contentEditable==="true")&&(Jf=S,YA=u,s0=null);break;case"focusout":s0=YA=Jf=null;break;case"mousedown":JA=!0;break;case"contextmenu":case"mouseup":case"dragend":JA=!1,OI(h,t,c);break;case"selectionchange":if(Xre)break;case"keydown":case"keyup":OI(h,t,c)}var E;if(Dk)e:{switch(r){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Yf?Tj(r,t)&&(A="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(A="onCompositionStart");A&&(Aj&&t.locale!=="ko"&&(Yf||A!=="onCompositionStart"?A==="onCompositionEnd"&&Yf&&(E=Cj()):(fc=c,Ck="value"in fc?fc.value:fc.textContent,Yf=!0)),S=Tw(u,A),0<S.length&&(A=new MI(A,r,null,t,c),h.push({event:A,listeners:S}),E?A.data=E:(E=Dj(t),E!==null&&(A.data=E)))),(E=Lre?Fre(r,t):Bre(r,t))&&(u=Tw(u,"onBeforeInput"),0<u.length&&(c=new MI("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=E))}jj(h,e)})}function I0(r,e,t){return{instance:r,listener:e,currentTarget:t}}function Tw(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=T0(r,t),a!=null&&n.unshift(I0(r,a,i)),a=T0(r,e),a!=null&&n.push(I0(r,a,i))),r=r.return}return n}function af(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function II(r,e,t,n,i){for(var a=e._reactName,o=[];t!==null&&t!==n;){var s=t,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,i?(l=T0(t,a),l!=null&&o.unshift(I0(t,l,s))):i||(l=T0(t,a),l!=null&&o.push(I0(t,l,s)))),t=t.return}o.length!==0&&r.push({event:e,listeners:o})}var Kre=/\r\n?/g,Qre=/\u0000|\uFFFD/g;function LI(r){return(typeof r=="string"?r:""+r).replace(Kre,`
`).replace(Qre,"")}function R1(r,e,t){if(e=LI(e),LI(r)!==e&&t)throw Error(ut(425))}function Dw(){}var ZA=null,KA=null;function QA(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var eT=typeof setTimeout=="function"?setTimeout:void 0,ene=typeof clearTimeout=="function"?clearTimeout:void 0,FI=typeof Promise=="function"?Promise:void 0,tne=typeof queueMicrotask=="function"?queueMicrotask:typeof FI<"u"?function(r){return FI.resolve(null).then(r).catch(rne)}:eT;function rne(r){setTimeout(function(){throw r})}function xE(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),N0(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);N0(e)}function Cc(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function BI(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var dm=Math.random().toString(36).slice(2),nl="__reactFiber$"+dm,L0="__reactProps$"+dm,mu="__reactContainer$"+dm,tT="__reactEvents$"+dm,nne="__reactListeners$"+dm,ine="__reactHandles$"+dm;function Wh(r){var e=r[nl];if(e)return e;for(var t=r.parentNode;t;){if(e=t[mu]||t[nl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=BI(r);r!==null;){if(t=r[nl])return t;r=BI(r)}return e}r=t,t=r.parentNode}return null}function Xv(r){return r=r[nl]||r[mu],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Kf(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(ut(33))}function yM(r){return r[L0]||null}var rT=[],Qf=-1;function th(r){return{current:r}}function ln(r){0>Qf||(r.current=rT[Qf],rT[Qf]=null,Qf--)}function nn(r,e){Qf++,rT[Qf]=r.current,r.current=e}var zc={},ta=th(zc),Xa=th(!1),pd=zc;function Fp(r,e){var t=r.type.contextTypes;if(!t)return zc;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in t)i[a]=e[a];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function Ya(r){return r=r.childContextTypes,r!=null}function kw(){ln(Xa),ln(ta)}function zI(r,e,t){if(ta.current!==zc)throw Error(ut(168));nn(ta,e),nn(Xa,t)}function Vj(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(ut(108,Hte(r)||"Unknown",i));return Mn({},t,n)}function Nw(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||zc,pd=ta.current,nn(ta,r),nn(Xa,Xa.current),!0}function UI(r,e,t){var n=r.stateNode;if(!n)throw Error(ut(169));t?(r=Vj(r,e,pd),n.__reactInternalMemoizedMergedChildContext=r,ln(Xa),ln(ta),nn(ta,r)):ln(Xa),nn(Xa,t)}var Yl=null,bM=!1,wE=!1;function qj(r){Yl===null?Yl=[r]:Yl.push(r)}function ane(r){bM=!0,qj(r)}function rh(){if(!wE&&Yl!==null){wE=!0;var r=0,e=zr;try{var t=Yl;for(zr=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}Yl=null,bM=!1}catch(i){throw Yl!==null&&(Yl=Yl.slice(r+1)),mj(Sk,rh),i}finally{zr=e,wE=!1}}return null}var ep=[],tp=0,Ow=null,Rw=0,zo=[],Uo=0,md=null,eu=1,tu="";function Oh(r,e){ep[tp++]=Rw,ep[tp++]=Ow,Ow=r,Rw=e}function Wj(r,e,t){zo[Uo++]=eu,zo[Uo++]=tu,zo[Uo++]=md,md=r;var n=eu;r=tu;var i=32-Ss(n)-1;n&=~(1<<i),t+=1;var a=32-Ss(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,eu=1<<32-Ss(e)+i|t<<i|n,tu=a+r}else eu=1<<a|t<<i|n,tu=r}function Nk(r){r.return!==null&&(Oh(r,1),Wj(r,1,0))}function Ok(r){for(;r===Ow;)Ow=ep[--tp],ep[tp]=null,Rw=ep[--tp],ep[tp]=null;for(;r===md;)md=zo[--Uo],zo[Uo]=null,tu=zo[--Uo],zo[Uo]=null,eu=zo[--Uo],zo[Uo]=null}var bo=null,vo=null,dn=!1,vs=null;function Gj(r,e){var t=qo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function jI(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,bo=r,vo=Cc(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,bo=r,vo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=md!==null?{id:eu,overflow:tu}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=qo(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,bo=r,vo=null,!0):!1;default:return!1}}function nT(r){return(r.mode&1)!==0&&(r.flags&128)===0}function iT(r){if(dn){var e=vo;if(e){var t=e;if(!jI(r,e)){if(nT(r))throw Error(ut(418));e=Cc(t.nextSibling);var n=bo;e&&jI(r,e)?Gj(n,t):(r.flags=r.flags&-4097|2,dn=!1,bo=r)}}else{if(nT(r))throw Error(ut(418));r.flags=r.flags&-4097|2,dn=!1,bo=r}}}function HI(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;bo=r}function P1(r){if(r!==bo)return!1;if(!dn)return HI(r),dn=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!QA(r.type,r.memoizedProps)),e&&(e=vo)){if(nT(r))throw $j(),Error(ut(418));for(;e;)Gj(r,e),e=Cc(e.nextSibling)}if(HI(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ut(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){vo=Cc(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}vo=null}}else vo=bo?Cc(r.stateNode.nextSibling):null;return!0}function $j(){for(var r=vo;r;)r=Cc(r.nextSibling)}function Bp(){vo=bo=null,dn=!1}function Rk(r){vs===null?vs=[r]:vs.push(r)}var one=ku.ReactCurrentBatchConfig;function ps(r,e){if(r&&r.defaultProps){e=Mn({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}var Pw=th(null),Iw=null,rp=null,Pk=null;function Ik(){Pk=rp=Iw=null}function Lk(r){var e=Pw.current;ln(Pw),r._currentValue=e}function aT(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function xp(r,e){Iw=r,Pk=rp=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(qa=!0),r.firstContext=null)}function Zo(r){var e=r._currentValue;if(Pk!==r)if(r={context:r,memoizedValue:e,next:null},rp===null){if(Iw===null)throw Error(ut(308));rp=r,Iw.dependencies={lanes:0,firstContext:r}}else rp=rp.next=r;return e}var Gh=null;function Fk(r){Gh===null?Gh=[r]:Gh.push(r)}function Xj(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,Fk(e)):(t.next=i.next,i.next=t),e.interleaved=t,gu(r,n)}function gu(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var ic=!1;function Bk(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yj(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function su(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function Ac(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,Cr&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,gu(r,t)}return i=n.interleaved,i===null?(e.next=e,Fk(n)):(e.next=i.next,i.next=e),n.interleaved=e,gu(r,t)}function Bx(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,Mk(r,t)}}function VI(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,a=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};a===null?i=a=o:a=a.next=o,t=t.next}while(t!==null);a===null?i=a=e:a=a.next=e}else i=a=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function Lw(r,e,t,n){var i=r.updateQueue;ic=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var c=r.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(a!==null){var h=i.baseState;o=0,c=u=l=null,s=a;do{var d=s.lane,f=s.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=r,v=s;switch(d=e,f=t,v.tag){case 1:if(p=v.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Mn({},h,d);break e;case 2:ic=!0}}s.callback!==null&&s.lane!==0&&(r.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);vd|=o,r.lanes=o,r.memoizedState=h}}function qI(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(ut(191,i));i.call(n)}}}var Jj=new X7.Component().refs;function oT(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:Mn({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var xM={isMounted:function(r){return(r=r._reactInternals)?Rd(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=Sa(),i=Dc(r),a=su(n,i);a.payload=e,t!=null&&(a.callback=t),e=Ac(r,a,i),e!==null&&(Ms(e,r,i,n),Bx(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=Sa(),i=Dc(r),a=su(n,i);a.tag=1,a.payload=e,t!=null&&(a.callback=t),e=Ac(r,a,i),e!==null&&(Ms(e,r,i,n),Bx(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=Sa(),n=Dc(r),i=su(t,n);i.tag=2,e!=null&&(i.callback=e),e=Ac(r,i,n),e!==null&&(Ms(e,r,n,t),Bx(e,r,n))}};function WI(r,e,t,n,i,a,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!R0(t,n)||!R0(i,a):!0}function Zj(r,e,t){var n=!1,i=zc,a=e.contextType;return typeof a=="object"&&a!==null?a=Zo(a):(i=Ya(e)?pd:ta.current,n=e.contextTypes,a=(n=n!=null)?Fp(r,i):zc),e=new e(t,a),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xM,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=a),e}function GI(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&xM.enqueueReplaceState(e,e.state,null)}function sT(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs=Jj,Bk(r);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Zo(a):(a=Ya(e)?pd:ta.current,i.context=Fp(r,a)),i.state=r.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(oT(r,e,a,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xM.enqueueReplaceState(i,i.state,null),Lw(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function dg(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ut(309));var n=t.stateNode}if(!n)throw Error(ut(147,r));var i=n,a=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;s===Jj&&(s=i.refs={}),o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof r!="string")throw Error(ut(284));if(!t._owner)throw Error(ut(290,r))}return r}function I1(r,e){throw r=Object.prototype.toString.call(e),Error(ut(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function $I(r){var e=r._init;return e(r._payload)}function Kj(r){function e(g,w){if(r){var b=g.deletions;b===null?(g.deletions=[w],g.flags|=16):b.push(w)}}function t(g,w){if(!r)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function n(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function i(g,w){return g=kc(g,w),g.index=0,g.sibling=null,g}function a(g,w,b){return g.index=b,r?(b=g.alternate,b!==null?(b=b.index,b<w?(g.flags|=2,w):b):(g.flags|=2,w)):(g.flags|=1048576,w)}function o(g){return r&&g.alternate===null&&(g.flags|=2),g}function s(g,w,b,m){return w===null||w.tag!==6?(w=TE(b,g.mode,m),w.return=g,w):(w=i(w,b),w.return=g,w)}function l(g,w,b,m){var x=b.type;return x===Xf?c(g,w,b.props.children,m,b.key):w!==null&&(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===nc&&$I(x)===w.type)?(m=i(w,b.props),m.ref=dg(g,w,b),m.return=g,m):(m=qx(b.type,b.key,b.props,null,g.mode,m),m.ref=dg(g,w,b),m.return=g,m)}function u(g,w,b,m){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=DE(b,g.mode,m),w.return=g,w):(w=i(w,b.children||[]),w.return=g,w)}function c(g,w,b,m,x){return w===null||w.tag!==7?(w=nd(b,g.mode,m,x),w.return=g,w):(w=i(w,b),w.return=g,w)}function h(g,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=TE(""+w,g.mode,b),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _1:return b=qx(w.type,w.key,w.props,null,g.mode,b),b.ref=dg(g,null,w),b.return=g,b;case $f:return w=DE(w,g.mode,b),w.return=g,w;case nc:var m=w._init;return h(g,m(w._payload),b)}if(Hg(w)||sg(w))return w=nd(w,g.mode,b,null),w.return=g,w;I1(g,w)}return null}function d(g,w,b,m){var x=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:s(g,w,""+b,m);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _1:return b.key===x?l(g,w,b,m):null;case $f:return b.key===x?u(g,w,b,m):null;case nc:return x=b._init,d(g,w,x(b._payload),m)}if(Hg(b)||sg(b))return x!==null?null:c(g,w,b,m,null);I1(g,b)}return null}function f(g,w,b,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return g=g.get(b)||null,s(w,g,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case _1:return g=g.get(m.key===null?b:m.key)||null,l(w,g,m,x);case $f:return g=g.get(m.key===null?b:m.key)||null,u(w,g,m,x);case nc:var S=m._init;return f(g,w,b,S(m._payload),x)}if(Hg(m)||sg(m))return g=g.get(b)||null,c(w,g,m,x,null);I1(w,m)}return null}function p(g,w,b,m){for(var x=null,S=null,E=w,A=w=0,T=null;E!==null&&A<b.length;A++){E.index>A?(T=E,E=null):T=E.sibling;var C=d(g,E,b[A],m);if(C===null){E===null&&(E=T);break}r&&E&&C.alternate===null&&e(g,E),w=a(C,w,A),S===null?x=C:S.sibling=C,S=C,E=T}if(A===b.length)return t(g,E),dn&&Oh(g,A),x;if(E===null){for(;A<b.length;A++)E=h(g,b[A],m),E!==null&&(w=a(E,w,A),S===null?x=E:S.sibling=E,S=E);return dn&&Oh(g,A),x}for(E=n(g,E);A<b.length;A++)T=f(E,g,A,b[A],m),T!==null&&(r&&T.alternate!==null&&E.delete(T.key===null?A:T.key),w=a(T,w,A),S===null?x=T:S.sibling=T,S=T);return r&&E.forEach(function(D){return e(g,D)}),dn&&Oh(g,A),x}function v(g,w,b,m){var x=sg(b);if(typeof x!="function")throw Error(ut(150));if(b=x.call(b),b==null)throw Error(ut(151));for(var S=x=null,E=w,A=w=0,T=null,C=b.next();E!==null&&!C.done;A++,C=b.next()){E.index>A?(T=E,E=null):T=E.sibling;var D=d(g,E,C.value,m);if(D===null){E===null&&(E=T);break}r&&E&&D.alternate===null&&e(g,E),w=a(D,w,A),S===null?x=D:S.sibling=D,S=D,E=T}if(C.done)return t(g,E),dn&&Oh(g,A),x;if(E===null){for(;!C.done;A++,C=b.next())C=h(g,C.value,m),C!==null&&(w=a(C,w,A),S===null?x=C:S.sibling=C,S=C);return dn&&Oh(g,A),x}for(E=n(g,E);!C.done;A++,C=b.next())C=f(E,g,A,C.value,m),C!==null&&(r&&C.alternate!==null&&E.delete(C.key===null?A:C.key),w=a(C,w,A),S===null?x=C:S.sibling=C,S=C);return r&&E.forEach(function(O){return e(g,O)}),dn&&Oh(g,A),x}function y(g,w,b,m){if(typeof b=="object"&&b!==null&&b.type===Xf&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case _1:e:{for(var x=b.key,S=w;S!==null;){if(S.key===x){if(x=b.type,x===Xf){if(S.tag===7){t(g,S.sibling),w=i(S,b.props.children),w.return=g,g=w;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===nc&&$I(x)===S.type){t(g,S.sibling),w=i(S,b.props),w.ref=dg(g,S,b),w.return=g,g=w;break e}t(g,S);break}else e(g,S);S=S.sibling}b.type===Xf?(w=nd(b.props.children,g.mode,m,b.key),w.return=g,g=w):(m=qx(b.type,b.key,b.props,null,g.mode,m),m.ref=dg(g,w,b),m.return=g,g=m)}return o(g);case $f:e:{for(S=b.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){t(g,w.sibling),w=i(w,b.children||[]),w.return=g,g=w;break e}else{t(g,w);break}else e(g,w);w=w.sibling}w=DE(b,g.mode,m),w.return=g,g=w}return o(g);case nc:return S=b._init,y(g,w,S(b._payload),m)}if(Hg(b))return p(g,w,b,m);if(sg(b))return v(g,w,b,m);I1(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(t(g,w.sibling),w=i(w,b),w.return=g,g=w):(t(g,w),w=TE(b,g.mode,m),w.return=g,g=w),o(g)):t(g,w)}return y}var zp=Kj(!0),Qj=Kj(!1),Yv={},fl=th(Yv),F0=th(Yv),B0=th(Yv);function $h(r){if(r===Yv)throw Error(ut(174));return r}function zk(r,e){switch(nn(B0,e),nn(F0,r),nn(fl,Yv),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zA(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=zA(e,r)}ln(fl),nn(fl,e)}function Up(){ln(fl),ln(F0),ln(B0)}function eH(r){$h(B0.current);var e=$h(fl.current),t=zA(e,r.type);e!==t&&(nn(F0,r),nn(fl,t))}function Uk(r){F0.current===r&&(ln(fl),ln(F0))}var yn=th(0);function Fw(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var SE=[];function jk(){for(var r=0;r<SE.length;r++)SE[r]._workInProgressVersionPrimary=null;SE.length=0}var zx=ku.ReactCurrentDispatcher,ME=ku.ReactCurrentBatchConfig,gd=0,wn=null,ei=null,mi=null,Bw=!1,l0=!1,z0=0,sne=0;function Hi(){throw Error(ut(321))}function Hk(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Cs(r[t],e[t]))return!1;return!0}function Vk(r,e,t,n,i,a){if(gd=a,wn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zx.current=r===null||r.memoizedState===null?hne:dne,r=t(n,i),l0){a=0;do{if(l0=!1,z0=0,25<=a)throw Error(ut(301));a+=1,mi=ei=null,e.updateQueue=null,zx.current=fne,r=t(n,i)}while(l0)}if(zx.current=zw,e=ei!==null&&ei.next!==null,gd=0,mi=ei=wn=null,Bw=!1,e)throw Error(ut(300));return r}function qk(){var r=z0!==0;return z0=0,r}function Qs(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?wn.memoizedState=mi=r:mi=mi.next=r,mi}function Ko(){if(ei===null){var r=wn.alternate;r=r!==null?r.memoizedState:null}else r=ei.next;var e=mi===null?wn.memoizedState:mi.next;if(e!==null)mi=e,ei=r;else{if(r===null)throw Error(ut(310));ei=r,r={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},mi===null?wn.memoizedState=mi=r:mi=mi.next=r}return mi}function U0(r,e){return typeof e=="function"?e(r):e}function _E(r){var e=Ko(),t=e.queue;if(t===null)throw Error(ut(311));t.lastRenderedReducer=r;var n=ei,i=n.baseQueue,a=t.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,t.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,l=null,u=a;do{var c=u.lane;if((gd&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:r(n,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=h,o=n):l=l.next=h,wn.lanes|=c,vd|=c}u=u.next}while(u!==null&&u!==a);l===null?o=n:l.next=s,Cs(n,e.memoizedState)||(qa=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do a=i.lane,wn.lanes|=a,vd|=a,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function EE(r){var e=Ko(),t=e.queue;if(t===null)throw Error(ut(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,a=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do a=r(a,o.action),o=o.next;while(o!==i);Cs(a,e.memoizedState)||(qa=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),t.lastRenderedState=a}return[a,n]}function tH(){}function rH(r,e){var t=wn,n=Ko(),i=e(),a=!Cs(n.memoizedState,i);if(a&&(n.memoizedState=i,qa=!0),n=n.queue,Wk(aH.bind(null,t,n,r),[r]),n.getSnapshot!==e||a||mi!==null&&mi.memoizedState.tag&1){if(t.flags|=2048,j0(9,iH.bind(null,t,n,i,e),void 0,null),vi===null)throw Error(ut(349));gd&30||nH(t,e,i)}return i}function nH(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=wn.updateQueue,e===null?(e={lastEffect:null,stores:null},wn.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function iH(r,e,t,n){e.value=t,e.getSnapshot=n,oH(e)&&sH(r)}function aH(r,e,t){return t(function(){oH(e)&&sH(r)})}function oH(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Cs(r,t)}catch{return!0}}function sH(r){var e=gu(r,1);e!==null&&Ms(e,r,1,-1)}function XI(r){var e=Qs();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:U0,lastRenderedState:r},e.queue=r,r=r.dispatch=cne.bind(null,wn,r),[e.memoizedState,r]}function j0(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=wn.updateQueue,e===null?(e={lastEffect:null,stores:null},wn.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function lH(){return Ko().memoizedState}function Ux(r,e,t,n){var i=Qs();wn.flags|=r,i.memoizedState=j0(1|e,t,void 0,n===void 0?null:n)}function wM(r,e,t,n){var i=Ko();n=n===void 0?null:n;var a=void 0;if(ei!==null){var o=ei.memoizedState;if(a=o.destroy,n!==null&&Hk(n,o.deps)){i.memoizedState=j0(e,t,a,n);return}}wn.flags|=r,i.memoizedState=j0(1|e,t,a,n)}function YI(r,e){return Ux(8390656,8,r,e)}function Wk(r,e){return wM(2048,8,r,e)}function uH(r,e){return wM(4,2,r,e)}function cH(r,e){return wM(4,4,r,e)}function hH(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function dH(r,e,t){return t=t!=null?t.concat([r]):null,wM(4,4,hH.bind(null,e,r),t)}function Gk(){}function fH(r,e){var t=Ko();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Hk(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function pH(r,e){var t=Ko();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Hk(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function mH(r,e,t){return gd&21?(Cs(t,e)||(t=yj(),wn.lanes|=t,vd|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,qa=!0),r.memoizedState=t)}function lne(r,e){var t=zr;zr=t!==0&&4>t?t:4,r(!0);var n=ME.transition;ME.transition={};try{r(!1),e()}finally{zr=t,ME.transition=n}}function gH(){return Ko().memoizedState}function une(r,e,t){var n=Dc(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},vH(r))yH(e,t);else if(t=Xj(r,e,t,n),t!==null){var i=Sa();Ms(t,r,n,i),bH(t,e,n)}}function cne(r,e,t){var n=Dc(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(vH(r))yH(e,i);else{var a=r.alternate;if(r.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,t);if(i.hasEagerState=!0,i.eagerState=s,Cs(s,o)){var l=e.interleaved;l===null?(i.next=i,Fk(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Xj(r,e,i,n),t!==null&&(i=Sa(),Ms(t,r,n,i),bH(t,e,n))}}function vH(r){var e=r.alternate;return r===wn||e!==null&&e===wn}function yH(r,e){l0=Bw=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function bH(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,Mk(r,t)}}var zw={readContext:Zo,useCallback:Hi,useContext:Hi,useEffect:Hi,useImperativeHandle:Hi,useInsertionEffect:Hi,useLayoutEffect:Hi,useMemo:Hi,useReducer:Hi,useRef:Hi,useState:Hi,useDebugValue:Hi,useDeferredValue:Hi,useTransition:Hi,useMutableSource:Hi,useSyncExternalStore:Hi,useId:Hi,unstable_isNewReconciler:!1},hne={readContext:Zo,useCallback:function(r,e){return Qs().memoizedState=[r,e===void 0?null:e],r},useContext:Zo,useEffect:YI,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,Ux(4194308,4,hH.bind(null,e,r),t)},useLayoutEffect:function(r,e){return Ux(4194308,4,r,e)},useInsertionEffect:function(r,e){return Ux(4,2,r,e)},useMemo:function(r,e){var t=Qs();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=Qs();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=une.bind(null,wn,r),[n.memoizedState,r]},useRef:function(r){var e=Qs();return r={current:r},e.memoizedState=r},useState:XI,useDebugValue:Gk,useDeferredValue:function(r){return Qs().memoizedState=r},useTransition:function(){var r=XI(!1),e=r[0];return r=lne.bind(null,r[1]),Qs().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=wn,i=Qs();if(dn){if(t===void 0)throw Error(ut(407));t=t()}else{if(t=e(),vi===null)throw Error(ut(349));gd&30||nH(n,e,t)}i.memoizedState=t;var a={value:t,getSnapshot:e};return i.queue=a,YI(aH.bind(null,n,a,r),[r]),n.flags|=2048,j0(9,iH.bind(null,n,a,t,e),void 0,null),t},useId:function(){var r=Qs(),e=vi.identifierPrefix;if(dn){var t=tu,n=eu;t=(n&~(1<<32-Ss(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=z0++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=sne++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},dne={readContext:Zo,useCallback:fH,useContext:Zo,useEffect:Wk,useImperativeHandle:dH,useInsertionEffect:uH,useLayoutEffect:cH,useMemo:pH,useReducer:_E,useRef:lH,useState:function(){return _E(U0)},useDebugValue:Gk,useDeferredValue:function(r){var e=Ko();return mH(e,ei.memoizedState,r)},useTransition:function(){var r=_E(U0)[0],e=Ko().memoizedState;return[r,e]},useMutableSource:tH,useSyncExternalStore:rH,useId:gH,unstable_isNewReconciler:!1},fne={readContext:Zo,useCallback:fH,useContext:Zo,useEffect:Wk,useImperativeHandle:dH,useInsertionEffect:uH,useLayoutEffect:cH,useMemo:pH,useReducer:EE,useRef:lH,useState:function(){return EE(U0)},useDebugValue:Gk,useDeferredValue:function(r){var e=Ko();return ei===null?e.memoizedState=r:mH(e,ei.memoizedState,r)},useTransition:function(){var r=EE(U0)[0],e=Ko().memoizedState;return[r,e]},useMutableSource:tH,useSyncExternalStore:rH,useId:gH,unstable_isNewReconciler:!1};function jp(r,e){try{var t="",n=e;do t+=jte(n),n=n.return;while(n);var i=t}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:r,source:e,stack:i,digest:null}}function CE(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function lT(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var pne=typeof WeakMap=="function"?WeakMap:Map;function xH(r,e,t){t=su(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){jw||(jw=!0,vT=n),lT(r,e)},t}function wH(r,e,t){t=su(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){lT(r,e)}}var a=r.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){lT(r,e),typeof n!="function"&&(Tc===null?Tc=new Set([this]):Tc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function JI(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new pne;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=Tne.bind(null,r,e,t),e.then(r,r))}function ZI(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function KI(r,e,t,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=su(-1,1),e.tag=2,Ac(t,e,1))),t.lanes|=1),r)}var mne=ku.ReactCurrentOwner,qa=!1;function ma(r,e,t,n){e.child=r===null?Qj(e,null,t,n):zp(e,r.child,t,n)}function QI(r,e,t,n,i){t=t.render;var a=e.ref;return xp(e,i),n=Vk(r,e,t,n,a,i),t=qk(),r!==null&&!qa?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,vu(r,e,i)):(dn&&t&&Nk(e),e.flags|=1,ma(r,e,n,i),e.child)}function eL(r,e,t,n,i){if(r===null){var a=t.type;return typeof a=="function"&&!eN(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=a,SH(r,e,a,n,i)):(r=qx(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(a=r.child,!(r.lanes&i)){var o=a.memoizedProps;if(t=t.compare,t=t!==null?t:R0,t(o,n)&&r.ref===e.ref)return vu(r,e,i)}return e.flags|=1,r=kc(a,n),r.ref=e.ref,r.return=e,e.child=r}function SH(r,e,t,n,i){if(r!==null){var a=r.memoizedProps;if(R0(a,n)&&r.ref===e.ref)if(qa=!1,e.pendingProps=n=a,(r.lanes&i)!==0)r.flags&131072&&(qa=!0);else return e.lanes=r.lanes,vu(r,e,i)}return uT(r,e,t,n,i)}function MH(r,e,t){var n=e.pendingProps,i=n.children,a=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(ip,lo),lo|=t;else{if(!(t&1073741824))return r=a!==null?a.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,nn(ip,lo),lo|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:t,nn(ip,lo),lo|=n}else a!==null?(n=a.baseLanes|t,e.memoizedState=null):n=t,nn(ip,lo),lo|=n;return ma(r,e,i,t),e.child}function _H(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function uT(r,e,t,n,i){var a=Ya(t)?pd:ta.current;return a=Fp(e,a),xp(e,i),t=Vk(r,e,t,n,a,i),n=qk(),r!==null&&!qa?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,vu(r,e,i)):(dn&&n&&Nk(e),e.flags|=1,ma(r,e,t,i),e.child)}function tL(r,e,t,n,i){if(Ya(t)){var a=!0;Nw(e)}else a=!1;if(xp(e,i),e.stateNode===null)jx(r,e),Zj(e,t,n),sT(e,t,n,i),n=!0;else if(r===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Zo(u):(u=Ya(t)?pd:ta.current,u=Fp(e,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&GI(e,o,n,u),ic=!1;var d=e.memoizedState;o.state=d,Lw(e,n,o,i),l=e.memoizedState,s!==n||d!==l||Xa.current||ic?(typeof c=="function"&&(oT(e,t,c,n),l=e.memoizedState),(s=ic||WI(e,t,s,n,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Yj(r,e),s=e.memoizedProps,u=e.type===e.elementType?s:ps(e.type,s),o.props=u,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Zo(l):(l=Ya(t)?pd:ta.current,l=Fp(e,l));var f=t.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==h||d!==l)&&GI(e,o,n,l),ic=!1,d=e.memoizedState,o.state=d,Lw(e,n,o,i);var p=e.memoizedState;s!==h||d!==p||Xa.current||ic?(typeof f=="function"&&(oT(e,t,f,n),p=e.memoizedState),(u=ic||WI(e,t,u,n,d,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),n=!1)}return cT(r,e,t,n,a,i)}function cT(r,e,t,n,i,a){_H(r,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&UI(e,t,!1),vu(r,e,a);n=e.stateNode,mne.current=e;var s=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&o?(e.child=zp(e,r.child,null,a),e.child=zp(e,null,s,a)):ma(r,e,s,a),e.memoizedState=n.state,i&&UI(e,t,!0),e.child}function EH(r){var e=r.stateNode;e.pendingContext?zI(r,e.pendingContext,e.pendingContext!==e.context):e.context&&zI(r,e.context,!1),zk(r,e.containerInfo)}function rL(r,e,t,n,i){return Bp(),Rk(i),e.flags|=256,ma(r,e,t,n),e.child}var hT={dehydrated:null,treeContext:null,retryLane:0};function dT(r){return{baseLanes:r,cachePool:null,transitions:null}}function CH(r,e,t){var n=e.pendingProps,i=yn.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=r!==null&&r.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),nn(yn,i&1),r===null)return iT(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,r=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=_M(o,n,0,null),r=nd(r,n,t,null),a.return=e,r.return=e,a.sibling=r,e.child=a,e.child.memoizedState=dT(t),e.memoizedState=hT,r):$k(e,o));if(i=r.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return gne(r,e,o,n,s,i,t);if(a){a=n.fallback,o=e.mode,i=r.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=kc(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=kc(s,a):(a=nd(a,o,t,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=r.child.memoizedState,o=o===null?dT(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=r.childLanes&~t,e.memoizedState=hT,n}return a=r.child,r=a.sibling,n=kc(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function $k(r,e){return e=_M({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function L1(r,e,t,n){return n!==null&&Rk(n),zp(e,r.child,null,t),r=$k(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function gne(r,e,t,n,i,a,o){if(t)return e.flags&256?(e.flags&=-257,n=CE(Error(ut(422))),L1(r,e,o,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=_M({mode:"visible",children:n.children},i,0,null),a=nd(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&zp(e,r.child,null,o),e.child.memoizedState=dT(o),e.memoizedState=hT,a);if(!(e.mode&1))return L1(r,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(ut(419)),n=CE(a,n,void 0),L1(r,e,o,n)}if(s=(o&r.childLanes)!==0,qa||s){if(n=vi,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,gu(r,i),Ms(n,r,i,-1))}return Qk(),n=CE(Error(ut(421))),L1(r,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=Dne.bind(null,r),i._reactRetry=e,null):(r=a.treeContext,vo=Cc(i.nextSibling),bo=e,dn=!0,vs=null,r!==null&&(zo[Uo++]=eu,zo[Uo++]=tu,zo[Uo++]=md,eu=r.id,tu=r.overflow,md=e),e=$k(e,n.children),e.flags|=4096,e)}function nL(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),aT(r.return,e,t)}function AE(r,e,t,n,i){var a=r.memoizedState;a===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=t,a.tailMode=i)}function AH(r,e,t){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(ma(r,e,n.children,t),n=yn.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&nL(r,t,e);else if(r.tag===19)nL(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(nn(yn,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&Fw(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),AE(e,!1,i,t,a);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&Fw(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}AE(e,!0,t,null,a);break;case"together":AE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jx(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function vu(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),vd|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(ut(153));if(e.child!==null){for(r=e.child,t=kc(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=kc(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function vne(r,e,t){switch(e.tag){case 3:EH(e),Bp();break;case 5:eH(e);break;case 1:Ya(e.type)&&Nw(e);break;case 4:zk(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;nn(Pw,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(nn(yn,yn.current&1),e.flags|=128,null):t&e.child.childLanes?CH(r,e,t):(nn(yn,yn.current&1),r=vu(r,e,t),r!==null?r.sibling:null);nn(yn,yn.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return AH(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),nn(yn,yn.current),n)break;return null;case 22:case 23:return e.lanes=0,MH(r,e,t)}return vu(r,e,t)}var TH,fT,DH,kH;TH=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};fT=function(){};DH=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,$h(fl.current);var a=null;switch(t){case"input":i=IA(r,i),n=IA(r,n),a=[];break;case"select":i=Mn({},i,{value:void 0}),n=Mn({},n,{value:void 0}),a=[];break;case"textarea":i=BA(r,i),n=BA(r,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Dw)}UA(t,n);var o;t=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(C0.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(a||(a=[]),a.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(C0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&an("scroll",r),a||s===l||(a=[])):(a=a||[]).push(u,l))}t&&(a=a||[]).push("style",t);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};kH=function(r,e,t,n){t!==n&&(e.flags|=4)};function fg(r,e){if(!dn)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function Vi(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function yne(r,e,t){var n=e.pendingProps;switch(Ok(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(e),null;case 1:return Ya(e.type)&&kw(),Vi(e),null;case 3:return n=e.stateNode,Up(),ln(Xa),ln(ta),jk(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(P1(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vs!==null&&(xT(vs),vs=null))),fT(r,e),Vi(e),null;case 5:Uk(e);var i=$h(B0.current);if(t=e.type,r!==null&&e.stateNode!=null)DH(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ut(166));return Vi(e),null}if(r=$h(fl.current),P1(e)){n=e.stateNode,t=e.type;var a=e.memoizedProps;switch(n[nl]=e,n[L0]=a,r=(e.mode&1)!==0,t){case"dialog":an("cancel",n),an("close",n);break;case"iframe":case"object":case"embed":an("load",n);break;case"video":case"audio":for(i=0;i<qg.length;i++)an(qg[i],n);break;case"source":an("error",n);break;case"img":case"image":case"link":an("error",n),an("load",n);break;case"details":an("toggle",n);break;case"input":dI(n,a),an("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},an("invalid",n);break;case"textarea":pI(n,a),an("invalid",n)}UA(t,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&R1(n.textContent,s,r),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&R1(n.textContent,s,r),i=["children",""+s]):C0.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&an("scroll",n)}switch(t){case"input":E1(n),fI(n,a,!0);break;case"textarea":E1(n),mI(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Dw)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=nj(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=o.createElement(t,{is:n.is}):(r=o.createElement(t),t==="select"&&(o=r,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):r=o.createElementNS(r,t),r[nl]=e,r[L0]=n,TH(r,e,!1,!1),e.stateNode=r;e:{switch(o=jA(t,n),t){case"dialog":an("cancel",r),an("close",r),i=n;break;case"iframe":case"object":case"embed":an("load",r),i=n;break;case"video":case"audio":for(i=0;i<qg.length;i++)an(qg[i],r);i=n;break;case"source":an("error",r),i=n;break;case"img":case"image":case"link":an("error",r),an("load",r),i=n;break;case"details":an("toggle",r),i=n;break;case"input":dI(r,n),i=IA(r,n),an("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=Mn({},n,{value:void 0}),an("invalid",r);break;case"textarea":pI(r,n),i=BA(r,n),an("invalid",r);break;default:i=n}UA(t,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?oj(r,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ij(r,l)):a==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&A0(r,l):typeof l=="number"&&A0(r,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(C0.hasOwnProperty(a)?l!=null&&a==="onScroll"&&an("scroll",r):l!=null&&vk(r,a,l,o))}switch(t){case"input":E1(r),fI(r,n,!1);break;case"textarea":E1(r),mI(r);break;case"option":n.value!=null&&r.setAttribute("value",""+Bc(n.value));break;case"select":r.multiple=!!n.multiple,a=n.value,a!=null?gp(r,!!n.multiple,a,!1):n.defaultValue!=null&&gp(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Dw)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vi(e),null;case 6:if(r&&e.stateNode!=null)kH(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ut(166));if(t=$h(B0.current),$h(fl.current),P1(e)){if(n=e.stateNode,t=e.memoizedProps,n[nl]=e,(a=n.nodeValue!==t)&&(r=bo,r!==null))switch(r.tag){case 3:R1(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&R1(n.nodeValue,t,(r.mode&1)!==0)}a&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[nl]=e,e.stateNode=n}return Vi(e),null;case 13:if(ln(yn),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(dn&&vo!==null&&e.mode&1&&!(e.flags&128))$j(),Bp(),e.flags|=98560,a=!1;else if(a=P1(e),n!==null&&n.dehydrated!==null){if(r===null){if(!a)throw Error(ut(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ut(317));a[nl]=e}else Bp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vi(e),a=!1}else vs!==null&&(xT(vs),vs=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||yn.current&1?ii===0&&(ii=3):Qk())),e.updateQueue!==null&&(e.flags|=4),Vi(e),null);case 4:return Up(),fT(r,e),r===null&&P0(e.stateNode.containerInfo),Vi(e),null;case 10:return Lk(e.type._context),Vi(e),null;case 17:return Ya(e.type)&&kw(),Vi(e),null;case 19:if(ln(yn),a=e.memoizedState,a===null)return Vi(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)fg(a,!1);else{if(ii!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(o=Fw(r),o!==null){for(e.flags|=128,fg(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)a=t,r=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,r=o.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return nn(yn,yn.current&1|2),e.child}r=r.sibling}a.tail!==null&&Un()>Hp&&(e.flags|=128,n=!0,fg(a,!1),e.lanes=4194304)}else{if(!n)if(r=Fw(o),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),fg(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!dn)return Vi(e),null}else 2*Un()-a.renderingStartTime>Hp&&t!==1073741824&&(e.flags|=128,n=!0,fg(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(t=a.last,t!==null?t.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Un(),e.sibling=null,t=yn.current,nn(yn,n?t&1|2:t&1),e):(Vi(e),null);case 22:case 23:return Kk(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?lo&1073741824&&(Vi(e),e.subtreeFlags&6&&(e.flags|=8192)):Vi(e),null;case 24:return null;case 25:return null}throw Error(ut(156,e.tag))}function bne(r,e){switch(Ok(e),e.tag){case 1:return Ya(e.type)&&kw(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return Up(),ln(Xa),ln(ta),jk(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return Uk(e),null;case 13:if(ln(yn),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(ut(340));Bp()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return ln(yn),null;case 4:return Up(),null;case 10:return Lk(e.type._context),null;case 22:case 23:return Kk(),null;case 24:return null;default:return null}}var F1=!1,Yi=!1,xne=typeof WeakSet=="function"?WeakSet:Set,St=null;function np(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Tn(r,e,n)}else t.current=null}function NH(r,e,t){try{t()}catch(n){Tn(r,e,n)}}var iL=!1;function wne(r,e){if(ZA=Cw,r=Pj(),kk(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{t.nodeType,a.nodeType}catch{t=null;break e}var o=0,s=-1,l=-1,u=0,c=0,h=r,d=null;t:for(;;){for(var f;h!==t||i!==0&&h.nodeType!==3||(s=o+i),h!==a||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===r)break t;if(d===t&&++u===i&&(s=o),d===a&&++c===n&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=s===-1||l===-1?null:{start:s,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(KA={focusedElem:r,selectionRange:t},Cw=!1,St=e;St!==null;)if(e=St,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,St=r;else for(;St!==null;){e=St;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,y=p.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:ps(e.type,v),y);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(m){Tn(e,e.return,m)}if(r=e.sibling,r!==null){r.return=e.return,St=r;break}St=e.return}return p=iL,iL=!1,p}function u0(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var a=i.destroy;i.destroy=void 0,a!==void 0&&NH(e,t,a)}i=i.next}while(i!==n)}}function SM(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function pT(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function OH(r){var e=r.alternate;e!==null&&(r.alternate=null,OH(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[nl],delete e[L0],delete e[tT],delete e[nne],delete e[ine])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function RH(r){return r.tag===5||r.tag===3||r.tag===4}function aL(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||RH(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function mT(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Dw));else if(n!==4&&(r=r.child,r!==null))for(mT(r,e,t),r=r.sibling;r!==null;)mT(r,e,t),r=r.sibling}function gT(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(gT(r,e,t),r=r.sibling;r!==null;)gT(r,e,t),r=r.sibling}var Mi=null,gs=!1;function Gu(r,e,t){for(t=t.child;t!==null;)PH(r,e,t),t=t.sibling}function PH(r,e,t){if(dl&&typeof dl.onCommitFiberUnmount=="function")try{dl.onCommitFiberUnmount(pM,t)}catch{}switch(t.tag){case 5:Yi||np(t,e);case 6:var n=Mi,i=gs;Mi=null,Gu(r,e,t),Mi=n,gs=i,Mi!==null&&(gs?(r=Mi,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):Mi.removeChild(t.stateNode));break;case 18:Mi!==null&&(gs?(r=Mi,t=t.stateNode,r.nodeType===8?xE(r.parentNode,t):r.nodeType===1&&xE(r,t),N0(r)):xE(Mi,t.stateNode));break;case 4:n=Mi,i=gs,Mi=t.stateNode.containerInfo,gs=!0,Gu(r,e,t),Mi=n,gs=i;break;case 0:case 11:case 14:case 15:if(!Yi&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&NH(t,e,o),i=i.next}while(i!==n)}Gu(r,e,t);break;case 1:if(!Yi&&(np(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(s){Tn(t,e,s)}Gu(r,e,t);break;case 21:Gu(r,e,t);break;case 22:t.mode&1?(Yi=(n=Yi)||t.memoizedState!==null,Gu(r,e,t),Yi=n):Gu(r,e,t);break;default:Gu(r,e,t)}}function oL(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new xne),e.forEach(function(n){var i=kne.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function cs(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var a=r,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:Mi=s.stateNode,gs=!1;break e;case 3:Mi=s.stateNode.containerInfo,gs=!0;break e;case 4:Mi=s.stateNode.containerInfo,gs=!0;break e}s=s.return}if(Mi===null)throw Error(ut(160));PH(a,o,i),Mi=null,gs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Tn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IH(e,r),e=e.sibling}function IH(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(cs(e,r),$s(r),n&4){try{u0(3,r,r.return),SM(3,r)}catch(v){Tn(r,r.return,v)}try{u0(5,r,r.return)}catch(v){Tn(r,r.return,v)}}break;case 1:cs(e,r),$s(r),n&512&&t!==null&&np(t,t.return);break;case 5:if(cs(e,r),$s(r),n&512&&t!==null&&np(t,t.return),r.flags&32){var i=r.stateNode;try{A0(i,"")}catch(v){Tn(r,r.return,v)}}if(n&4&&(i=r.stateNode,i!=null)){var a=r.memoizedProps,o=t!==null?t.memoizedProps:a,s=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&tj(i,a),jA(s,o);var u=jA(s,a);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?oj(i,h):c==="dangerouslySetInnerHTML"?ij(i,h):c==="children"?A0(i,h):vk(i,c,h,u)}switch(s){case"input":LA(i,a);break;case"textarea":rj(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;f!=null?gp(i,!!a.multiple,f,!1):d!==!!a.multiple&&(a.defaultValue!=null?gp(i,!!a.multiple,a.defaultValue,!0):gp(i,!!a.multiple,a.multiple?[]:"",!1))}i[L0]=a}catch(v){Tn(r,r.return,v)}}break;case 6:if(cs(e,r),$s(r),n&4){if(r.stateNode===null)throw Error(ut(162));i=r.stateNode,a=r.memoizedProps;try{i.nodeValue=a}catch(v){Tn(r,r.return,v)}}break;case 3:if(cs(e,r),$s(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{N0(e.containerInfo)}catch(v){Tn(r,r.return,v)}break;case 4:cs(e,r),$s(r);break;case 13:cs(e,r),$s(r),i=r.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Jk=Un())),n&4&&oL(r);break;case 22:if(c=t!==null&&t.memoizedState!==null,r.mode&1?(Yi=(u=Yi)||c,cs(e,r),Yi=u):cs(e,r),$s(r),n&8192){if(u=r.memoizedState!==null,(r.stateNode.isHidden=u)&&!c&&r.mode&1)for(St=r,c=r.child;c!==null;){for(h=St=c;St!==null;){switch(d=St,f=d.child,d.tag){case 0:case 11:case 14:case 15:u0(4,d,d.return);break;case 1:np(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){n=d,t=d.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){Tn(n,t,v)}}break;case 5:np(d,d.return);break;case 22:if(d.memoizedState!==null){lL(h);continue}}f!==null?(f.return=d,St=f):lL(h)}c=c.sibling}e:for(c=null,h=r;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=aj("display",o))}catch(v){Tn(r,r.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Tn(r,r.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===r)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:cs(e,r),$s(r),n&4&&oL(r);break;case 21:break;default:cs(e,r),$s(r)}}function $s(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(RH(t)){var n=t;break e}t=t.return}throw Error(ut(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(A0(i,""),n.flags&=-33);var a=aL(r);gT(r,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=aL(r);mT(r,s,o);break;default:throw Error(ut(161))}}catch(l){Tn(r,r.return,l)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function Sne(r,e,t){St=r,LH(r)}function LH(r,e,t){for(var n=(r.mode&1)!==0;St!==null;){var i=St,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||F1;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||Yi;s=F1;var u=Yi;if(F1=o,(Yi=l)&&!u)for(St=i;St!==null;)o=St,l=o.child,o.tag===22&&o.memoizedState!==null?uL(i):l!==null?(l.return=o,St=l):uL(i);for(;a!==null;)St=a,LH(a),a=a.sibling;St=i,F1=s,Yi=u}sL(r)}else i.subtreeFlags&8772&&a!==null?(a.return=i,St=a):sL(r)}}function sL(r){for(;St!==null;){var e=St;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yi||SM(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Yi)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:ps(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&qI(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}qI(e,o,t)}break;case 5:var s=e.stateNode;if(t===null&&e.flags&4){t=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&N0(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ut(163))}Yi||e.flags&512&&pT(e)}catch(d){Tn(e,e.return,d)}}if(e===r){St=null;break}if(t=e.sibling,t!==null){t.return=e.return,St=t;break}St=e.return}}function lL(r){for(;St!==null;){var e=St;if(e===r){St=null;break}var t=e.sibling;if(t!==null){t.return=e.return,St=t;break}St=e.return}}function uL(r){for(;St!==null;){var e=St;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{SM(4,e)}catch(l){Tn(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Tn(e,i,l)}}var a=e.return;try{pT(e)}catch(l){Tn(e,a,l)}break;case 5:var o=e.return;try{pT(e)}catch(l){Tn(e,o,l)}}}catch(l){Tn(e,e.return,l)}if(e===r){St=null;break}var s=e.sibling;if(s!==null){s.return=e.return,St=s;break}St=e.return}}var Mne=Math.ceil,Uw=ku.ReactCurrentDispatcher,Xk=ku.ReactCurrentOwner,$o=ku.ReactCurrentBatchConfig,Cr=0,vi=null,Xn=null,Ri=0,lo=0,ip=th(0),ii=0,H0=null,vd=0,MM=0,Yk=0,c0=null,Ua=null,Jk=0,Hp=1/0,Xl=null,jw=!1,vT=null,Tc=null,B1=!1,pc=null,Hw=0,h0=0,yT=null,Hx=-1,Vx=0;function Sa(){return Cr&6?Un():Hx!==-1?Hx:Hx=Un()}function Dc(r){return r.mode&1?Cr&2&&Ri!==0?Ri&-Ri:one.transition!==null?(Vx===0&&(Vx=yj()),Vx):(r=zr,r!==0||(r=window.event,r=r===void 0?16:Ej(r.type)),r):1}function Ms(r,e,t,n){if(50<h0)throw h0=0,yT=null,Error(ut(185));Gv(r,t,n),(!(Cr&2)||r!==vi)&&(r===vi&&(!(Cr&2)&&(MM|=t),ii===4&&cc(r,Ri)),Ja(r,n),t===1&&Cr===0&&!(e.mode&1)&&(Hp=Un()+500,bM&&rh()))}function Ja(r,e){var t=r.callbackNode;ore(r,e);var n=Ew(r,r===vi?Ri:0);if(n===0)t!==null&&yI(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&yI(t),e===1)r.tag===0?ane(cL.bind(null,r)):qj(cL.bind(null,r)),tne(function(){!(Cr&6)&&rh()}),t=null;else{switch(bj(n)){case 1:t=Sk;break;case 4:t=gj;break;case 16:t=_w;break;case 536870912:t=vj;break;default:t=_w}t=qH(t,FH.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function FH(r,e){if(Hx=-1,Vx=0,Cr&6)throw Error(ut(327));var t=r.callbackNode;if(wp()&&r.callbackNode!==t)return null;var n=Ew(r,r===vi?Ri:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=Vw(r,n);else{e=n;var i=Cr;Cr|=2;var a=zH();(vi!==r||Ri!==e)&&(Xl=null,Hp=Un()+500,rd(r,e));do try{Cne();break}catch(s){BH(r,s)}while(!0);Ik(),Uw.current=a,Cr=i,Xn!==null?e=0:(vi=null,Ri=0,e=ii)}if(e!==0){if(e===2&&(i=GA(r),i!==0&&(n=i,e=bT(r,i))),e===1)throw t=H0,rd(r,0),cc(r,n),Ja(r,Un()),t;if(e===6)cc(r,n);else{if(i=r.current.alternate,!(n&30)&&!_ne(i)&&(e=Vw(r,n),e===2&&(a=GA(r),a!==0&&(n=a,e=bT(r,a))),e===1))throw t=H0,rd(r,0),cc(r,n),Ja(r,Un()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(ut(345));case 2:Rh(r,Ua,Xl);break;case 3:if(cc(r,n),(n&130023424)===n&&(e=Jk+500-Un(),10<e)){if(Ew(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){Sa(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=eT(Rh.bind(null,r,Ua,Xl),e);break}Rh(r,Ua,Xl);break;case 4:if(cc(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var o=31-Ss(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=Un()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Mne(n/1960))-n,10<n){r.timeoutHandle=eT(Rh.bind(null,r,Ua,Xl),n);break}Rh(r,Ua,Xl);break;case 5:Rh(r,Ua,Xl);break;default:throw Error(ut(329))}}}return Ja(r,Un()),r.callbackNode===t?FH.bind(null,r):null}function bT(r,e){var t=c0;return r.current.memoizedState.isDehydrated&&(rd(r,e).flags|=256),r=Vw(r,e),r!==2&&(e=Ua,Ua=t,e!==null&&xT(e)),r}function xT(r){Ua===null?Ua=r:Ua.push.apply(Ua,r)}function _ne(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],a=i.getSnapshot;i=i.value;try{if(!Cs(a(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cc(r,e){for(e&=~Yk,e&=~MM,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-Ss(e),n=1<<t;r[t]=-1,e&=~n}}function cL(r){if(Cr&6)throw Error(ut(327));wp();var e=Ew(r,0);if(!(e&1))return Ja(r,Un()),null;var t=Vw(r,e);if(r.tag!==0&&t===2){var n=GA(r);n!==0&&(e=n,t=bT(r,n))}if(t===1)throw t=H0,rd(r,0),cc(r,e),Ja(r,Un()),t;if(t===6)throw Error(ut(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,Rh(r,Ua,Xl),Ja(r,Un()),null}function Zk(r,e){var t=Cr;Cr|=1;try{return r(e)}finally{Cr=t,Cr===0&&(Hp=Un()+500,bM&&rh())}}function yd(r){pc!==null&&pc.tag===0&&!(Cr&6)&&wp();var e=Cr;Cr|=1;var t=$o.transition,n=zr;try{if($o.transition=null,zr=1,r)return r()}finally{zr=n,$o.transition=t,Cr=e,!(Cr&6)&&rh()}}function Kk(){lo=ip.current,ln(ip)}function rd(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,ene(t)),Xn!==null)for(t=Xn.return;t!==null;){var n=t;switch(Ok(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&kw();break;case 3:Up(),ln(Xa),ln(ta),jk();break;case 5:Uk(n);break;case 4:Up();break;case 13:ln(yn);break;case 19:ln(yn);break;case 10:Lk(n.type._context);break;case 22:case 23:Kk()}t=t.return}if(vi=r,Xn=r=kc(r.current,null),Ri=lo=e,ii=0,H0=null,Yk=MM=vd=0,Ua=c0=null,Gh!==null){for(e=0;e<Gh.length;e++)if(t=Gh[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,a=t.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}t.pending=n}Gh=null}return r}function BH(r,e){do{var t=Xn;try{if(Ik(),zx.current=zw,Bw){for(var n=wn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Bw=!1}if(gd=0,mi=ei=wn=null,l0=!1,z0=0,Xk.current=null,t===null||t.return===null){ii=1,H0=e,Xn=null;break}e:{var a=r,o=t.return,s=t,l=e;if(e=Ri,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=ZI(o);if(f!==null){f.flags&=-257,KI(f,o,s,a,e),f.mode&1&&JI(a,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){JI(a,u,e),Qk();break e}l=Error(ut(426))}}else if(dn&&s.mode&1){var y=ZI(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),KI(y,o,s,a,e),Rk(jp(l,s));break e}}a=l=jp(l,s),ii!==4&&(ii=2),c0===null?c0=[a]:c0.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=xH(a,l,e);VI(a,g);break e;case 1:s=l;var w=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Tc===null||!Tc.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var m=wH(a,s,e);VI(a,m);break e}}a=a.return}while(a!==null)}jH(t)}catch(x){e=x,Xn===t&&t!==null&&(Xn=t=t.return);continue}break}while(!0)}function zH(){var r=Uw.current;return Uw.current=zw,r===null?zw:r}function Qk(){(ii===0||ii===3||ii===2)&&(ii=4),vi===null||!(vd&268435455)&&!(MM&268435455)||cc(vi,Ri)}function Vw(r,e){var t=Cr;Cr|=2;var n=zH();(vi!==r||Ri!==e)&&(Xl=null,rd(r,e));do try{Ene();break}catch(i){BH(r,i)}while(!0);if(Ik(),Cr=t,Uw.current=n,Xn!==null)throw Error(ut(261));return vi=null,Ri=0,ii}function Ene(){for(;Xn!==null;)UH(Xn)}function Cne(){for(;Xn!==null&&!Zte();)UH(Xn)}function UH(r){var e=VH(r.alternate,r,lo);r.memoizedProps=r.pendingProps,e===null?jH(r):Xn=e,Xk.current=null}function jH(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=bne(t,e),t!==null){t.flags&=32767,Xn=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ii=6,Xn=null;return}}else if(t=yne(t,e,lo),t!==null){Xn=t;return}if(e=e.sibling,e!==null){Xn=e;return}Xn=e=r}while(e!==null);ii===0&&(ii=5)}function Rh(r,e,t){var n=zr,i=$o.transition;try{$o.transition=null,zr=1,Ane(r,e,t,n)}finally{$o.transition=i,zr=n}return null}function Ane(r,e,t,n){do wp();while(pc!==null);if(Cr&6)throw Error(ut(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(ut(177));r.callbackNode=null,r.callbackPriority=0;var a=t.lanes|t.childLanes;if(sre(r,a),r===vi&&(Xn=vi=null,Ri=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||B1||(B1=!0,qH(_w,function(){return wp(),null})),a=(t.flags&15990)!==0,t.subtreeFlags&15990||a){a=$o.transition,$o.transition=null;var o=zr;zr=1;var s=Cr;Cr|=4,Xk.current=null,wne(r,t),IH(t,r),$re(KA),Cw=!!ZA,KA=ZA=null,r.current=t,Sne(t),Kte(),Cr=s,zr=o,$o.transition=a}else r.current=t;if(B1&&(B1=!1,pc=r,Hw=i),a=r.pendingLanes,a===0&&(Tc=null),tre(t.stateNode),Ja(r,Un()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(jw)throw jw=!1,r=vT,vT=null,r;return Hw&1&&r.tag!==0&&wp(),a=r.pendingLanes,a&1?r===yT?h0++:(h0=0,yT=r):h0=0,rh(),null}function wp(){if(pc!==null){var r=bj(Hw),e=$o.transition,t=zr;try{if($o.transition=null,zr=16>r?16:r,pc===null)var n=!1;else{if(r=pc,pc=null,Hw=0,Cr&6)throw Error(ut(331));var i=Cr;for(Cr|=4,St=r.current;St!==null;){var a=St,o=a.child;if(St.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(St=u;St!==null;){var c=St;switch(c.tag){case 0:case 11:case 15:u0(8,c,a)}var h=c.child;if(h!==null)h.return=c,St=h;else for(;St!==null;){c=St;var d=c.sibling,f=c.return;if(OH(c),c===u){St=null;break}if(d!==null){d.return=f,St=d;break}St=f}}}var p=a.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}St=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,St=o;else e:for(;St!==null;){if(a=St,a.flags&2048)switch(a.tag){case 0:case 11:case 15:u0(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,St=g;break e}St=a.return}}var w=r.current;for(St=w;St!==null;){o=St;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,St=b;else e:for(o=w;St!==null;){if(s=St,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:SM(9,s)}}catch(x){Tn(s,s.return,x)}if(s===o){St=null;break e}var m=s.sibling;if(m!==null){m.return=s.return,St=m;break e}St=s.return}}if(Cr=i,rh(),dl&&typeof dl.onPostCommitFiberRoot=="function")try{dl.onPostCommitFiberRoot(pM,r)}catch{}n=!0}return n}finally{zr=t,$o.transition=e}}return!1}function hL(r,e,t){e=jp(t,e),e=xH(r,e,1),r=Ac(r,e,1),e=Sa(),r!==null&&(Gv(r,1,e),Ja(r,e))}function Tn(r,e,t){if(r.tag===3)hL(r,r,t);else for(;e!==null;){if(e.tag===3){hL(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Tc===null||!Tc.has(n))){r=jp(t,r),r=wH(e,r,1),e=Ac(e,r,1),r=Sa(),e!==null&&(Gv(e,1,r),Ja(e,r));break}}e=e.return}}function Tne(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=Sa(),r.pingedLanes|=r.suspendedLanes&t,vi===r&&(Ri&t)===t&&(ii===4||ii===3&&(Ri&130023424)===Ri&&500>Un()-Jk?rd(r,0):Yk|=t),Ja(r,e)}function HH(r,e){e===0&&(r.mode&1?(e=T1,T1<<=1,!(T1&130023424)&&(T1=4194304)):e=1);var t=Sa();r=gu(r,e),r!==null&&(Gv(r,e,t),Ja(r,t))}function Dne(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),HH(r,t)}function kne(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(ut(314))}n!==null&&n.delete(e),HH(r,t)}var VH;VH=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||Xa.current)qa=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return qa=!1,vne(r,e,t);qa=!!(r.flags&131072)}else qa=!1,dn&&e.flags&1048576&&Wj(e,Rw,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;jx(r,e),r=e.pendingProps;var i=Fp(e,ta.current);xp(e,t),i=Vk(null,e,n,r,i,t);var a=qk();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ya(n)?(a=!0,Nw(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Bk(e),i.updater=xM,e.stateNode=i,i._reactInternals=e,sT(e,n,r,t),e=cT(null,e,n,!0,a,t)):(e.tag=0,dn&&a&&Nk(e),ma(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(jx(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=One(n),r=ps(n,r),i){case 0:e=uT(null,e,n,r,t);break e;case 1:e=tL(null,e,n,r,t);break e;case 11:e=QI(null,e,n,r,t);break e;case 14:e=eL(null,e,n,ps(n.type,r),t);break e}throw Error(ut(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ps(n,i),uT(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ps(n,i),tL(r,e,n,i,t);case 3:e:{if(EH(e),r===null)throw Error(ut(387));n=e.pendingProps,a=e.memoizedState,i=a.element,Yj(r,e),Lw(e,n,null,t);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=jp(Error(ut(423)),e),e=rL(r,e,n,t,i);break e}else if(n!==i){i=jp(Error(ut(424)),e),e=rL(r,e,n,t,i);break e}else for(vo=Cc(e.stateNode.containerInfo.firstChild),bo=e,dn=!0,vs=null,t=Qj(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Bp(),n===i){e=vu(r,e,t);break e}ma(r,e,n,t)}e=e.child}return e;case 5:return eH(e),r===null&&iT(e),n=e.type,i=e.pendingProps,a=r!==null?r.memoizedProps:null,o=i.children,QA(n,i)?o=null:a!==null&&QA(n,a)&&(e.flags|=32),_H(r,e),ma(r,e,o,t),e.child;case 6:return r===null&&iT(e),null;case 13:return CH(r,e,t);case 4:return zk(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=zp(e,null,n,t):ma(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ps(n,i),QI(r,e,n,i,t);case 7:return ma(r,e,e.pendingProps,t),e.child;case 8:return ma(r,e,e.pendingProps.children,t),e.child;case 12:return ma(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,nn(Pw,n._currentValue),n._currentValue=o,a!==null)if(Cs(a.value,o)){if(a.children===i.children&&!Xa.current){e=vu(r,e,t);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=su(-1,t&-t),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),aT(a.return,t,e),s.lanes|=t;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ut(341));o.lanes|=t,s=o.alternate,s!==null&&(s.lanes|=t),aT(o,t,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ma(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,xp(e,t),i=Zo(i),n=n(i),e.flags|=1,ma(r,e,n,t),e.child;case 14:return n=e.type,i=ps(n,e.pendingProps),i=ps(n.type,i),eL(r,e,n,i,t);case 15:return SH(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ps(n,i),jx(r,e),e.tag=1,Ya(n)?(r=!0,Nw(e)):r=!1,xp(e,t),Zj(e,n,i),sT(e,n,i,t),cT(null,e,n,!0,r,t);case 19:return AH(r,e,t);case 22:return MH(r,e,t)}throw Error(ut(156,e.tag))};function qH(r,e){return mj(r,e)}function Nne(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qo(r,e,t,n){return new Nne(r,e,t,n)}function eN(r){return r=r.prototype,!(!r||!r.isReactComponent)}function One(r){if(typeof r=="function")return eN(r)?1:0;if(r!=null){if(r=r.$$typeof,r===bk)return 11;if(r===xk)return 14}return 2}function kc(r,e){var t=r.alternate;return t===null?(t=qo(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function qx(r,e,t,n,i,a){var o=2;if(n=r,typeof r=="function")eN(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case Xf:return nd(t.children,i,a,e);case yk:o=8,i|=8;break;case NA:return r=qo(12,t,e,i|2),r.elementType=NA,r.lanes=a,r;case OA:return r=qo(13,t,e,i),r.elementType=OA,r.lanes=a,r;case RA:return r=qo(19,t,e,i),r.elementType=RA,r.lanes=a,r;case K7:return _M(t,i,a,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case J7:o=10;break e;case Z7:o=9;break e;case bk:o=11;break e;case xk:o=14;break e;case nc:o=16,n=null;break e}throw Error(ut(130,r==null?r:typeof r,""))}return e=qo(o,t,e,i),e.elementType=r,e.type=n,e.lanes=a,e}function nd(r,e,t,n){return r=qo(7,r,n,e),r.lanes=t,r}function _M(r,e,t,n){return r=qo(22,r,n,e),r.elementType=K7,r.lanes=t,r.stateNode={isHidden:!1},r}function TE(r,e,t){return r=qo(6,r,null,e),r.lanes=t,r}function DE(r,e,t){return e=qo(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function Rne(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uE(0),this.expirationTimes=uE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uE(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function tN(r,e,t,n,i,a,o,s,l){return r=new Rne(r,e,t,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=qo(3,null,null,e),r.current=a,a.stateNode=r,a.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bk(a),r}function Pne(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$f,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function WH(r){if(!r)return zc;r=r._reactInternals;e:{if(Rd(r)!==r||r.tag!==1)throw Error(ut(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ya(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ut(171))}if(r.tag===1){var t=r.type;if(Ya(t))return Vj(r,t,e)}return e}function GH(r,e,t,n,i,a,o,s,l){return r=tN(t,n,!0,r,i,a,o,s,l),r.context=WH(null),t=r.current,n=Sa(),i=Dc(t),a=su(n,i),a.callback=e??null,Ac(t,a,i),r.current.lanes=i,Gv(r,i,n),Ja(r,n),r}function EM(r,e,t,n){var i=e.current,a=Sa(),o=Dc(i);return t=WH(t),e.context===null?e.context=t:e.pendingContext=t,e=su(a,o),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=Ac(i,e,o),r!==null&&(Ms(r,i,o,a),Bx(r,i,o)),o}function qw(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function dL(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function rN(r,e){dL(r,e),(r=r.alternate)&&dL(r,e)}function Ine(){return null}var $H=typeof reportError=="function"?reportError:function(r){console.error(r)};function nN(r){this._internalRoot=r}CM.prototype.render=nN.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(ut(409));EM(r,e,null,null)};CM.prototype.unmount=nN.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;yd(function(){EM(null,r,null,null)}),e[mu]=null}};function CM(r){this._internalRoot=r}CM.prototype.unstable_scheduleHydration=function(r){if(r){var e=Sj();r={blockedOn:null,target:r,priority:e};for(var t=0;t<uc.length&&e!==0&&e<uc[t].priority;t++);uc.splice(t,0,r),t===0&&_j(r)}};function iN(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function AM(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function fL(){}function Lne(r,e,t,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=qw(o);a.call(u)}}var o=GH(e,n,r,0,null,!1,!1,"",fL);return r._reactRootContainer=o,r[mu]=o.current,P0(r.nodeType===8?r.parentNode:r),yd(),o}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var u=qw(l);s.call(u)}}var l=tN(r,0,!1,null,null,!1,!1,"",fL);return r._reactRootContainer=l,r[mu]=l.current,P0(r.nodeType===8?r.parentNode:r),yd(function(){EM(e,l,t,n)}),l}function TM(r,e,t,n,i){var a=t._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=qw(o);s.call(l)}}EM(e,o,r,i)}else o=Lne(t,e,r,i,n);return qw(o)}xj=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=Vg(e.pendingLanes);t!==0&&(Mk(e,t|1),Ja(e,Un()),!(Cr&6)&&(Hp=Un()+500,rh()))}break;case 13:yd(function(){var n=gu(r,1);if(n!==null){var i=Sa();Ms(n,r,1,i)}}),rN(r,1)}};_k=function(r){if(r.tag===13){var e=gu(r,134217728);if(e!==null){var t=Sa();Ms(e,r,134217728,t)}rN(r,134217728)}};wj=function(r){if(r.tag===13){var e=Dc(r),t=gu(r,e);if(t!==null){var n=Sa();Ms(t,r,e,n)}rN(r,e)}};Sj=function(){return zr};Mj=function(r,e){var t=zr;try{return zr=r,e()}finally{zr=t}};VA=function(r,e,t){switch(e){case"input":if(LA(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=yM(n);if(!i)throw Error(ut(90));ej(n),LA(n,i)}}}break;case"textarea":rj(r,t);break;case"select":e=t.value,e!=null&&gp(r,!!t.multiple,e,!1)}};uj=Zk;cj=yd;var Fne={usingClientEntryPoint:!1,Events:[Xv,Kf,yM,sj,lj,Zk]},pg={findFiberByHostInstance:Wh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Bne={bundleType:pg.bundleType,version:pg.version,rendererPackageName:pg.rendererPackageName,rendererConfig:pg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ku.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=fj(r),r===null?null:r.stateNode},findFiberByHostInstance:pg.findFiberByHostInstance||Ine,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var z1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!z1.isDisabled&&z1.supportsFiber)try{pM=z1.inject(Bne),dl=z1}catch{}}Eo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fne;Eo.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iN(e))throw Error(ut(200));return Pne(r,e,null,t)};Eo.createRoot=function(r,e){if(!iN(r))throw Error(ut(299));var t=!1,n="",i=$H;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=tN(r,1,!1,null,null,t,!1,n,i),r[mu]=e.current,P0(r.nodeType===8?r.parentNode:r),new nN(e)};Eo.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(ut(188)):(r=Object.keys(r).join(","),Error(ut(268,r)));return r=fj(e),r=r===null?null:r.stateNode,r};Eo.flushSync=function(r){return yd(r)};Eo.hydrate=function(r,e,t){if(!AM(e))throw Error(ut(200));return TM(null,r,e,!0,t)};Eo.hydrateRoot=function(r,e,t){if(!iN(r))throw Error(ut(405));var n=t!=null&&t.hydratedSources||null,i=!1,a="",o=$H;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=GH(e,null,r,1,t??null,i,!1,a,o),r[mu]=e.current,P0(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new CM(e)};Eo.render=function(r,e,t){if(!AM(e))throw Error(ut(200));return TM(null,r,e,!1,t)};Eo.unmountComponentAtNode=function(r){if(!AM(r))throw Error(ut(40));return r._reactRootContainer?(yd(function(){TM(null,null,r,!1,function(){r._reactRootContainer=null,r[mu]=null})}),!0):!1};Eo.unstable_batchedUpdates=Zk;Eo.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!AM(t))throw Error(ut(200));if(r==null||r._reactInternals===void 0)throw Error(ut(38));return TM(r,e,t,!1,n)};Eo.version="18.2.0-next-9e3b772b8-20220608";function XH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XH)}catch(r){console.error(r)}}XH(),W7.exports=Eo;var fm=W7.exports;const YH=is(fm);var pL=fm;DA.createRoot=pL.createRoot,DA.hydrateRoot=pL.hydrateRoot;function U1(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var JH={exports:{}};(function(r,e){(function(t){r.exports=t()})(function(){return function t(n,i,a){function o(u,c){if(!i[u]){if(!n[u]){var h=typeof U1=="function"&&U1;if(!c&&h)return h(u,!0);if(s)return s(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var f=i[u]={exports:{}};n[u][0].call(f.exports,function(p){var v=n[u][1][p];return o(v||p)},f,f.exports,t,n,i,a)}return i[u].exports}for(var s=typeof U1=="function"&&U1,l=0;l<a.length;l++)o(a[l]);return o}({1:[function(t,n,i){n.exports={oauthd_url:"https://oauth.io",oauthd_api:"https://oauth.io/api",version:"web-0.6.1",options:{}}},{}],2:[function(t,n,i){n.exports=function(a){var o,s;return o=a.getJquery(),s=function(l){return function(u,c,h){var d,f,p;return f=o.Deferred(),d=a.getOAuthdURL(),p={url:d+c,type:u},u==="post"||u==="put"?(p.dataType="json",p.contentType="application/json",p.data=JSON.stringify(h)):p.data=h,o.ajax(p).then(function(v){return f.resolve(v)},function(v){return f.reject(v&&v.responseJSON)}),f.promise()}}(),{get:function(l){return function(u,c){return s("get",u,c)}}(),post:function(l){return function(u,c){return s("post",u,c)}}(),put:function(l){return function(u,c){return s("put",u,c)}}(),del:function(l){return function(u,c){return s("delete",u,c)}}()}}},{}],3:[function(t,n,i){var a,o,s,l,u,c;l=t("../config"),o=t("../tools/url"),a=t("../tools/location_operations"),u=t("../tools/cookies"),c=t("../tools/lstorage"),s=t("../tools/cache"),n.exports=function(h,d,f,p){var v,y;return o=o(d),v=a(d),y=c.active()&&c||u,u.init(l,d),s.init(y,l),{initialize:function(g,w){var b;if(l.key=g,w)for(b in w)l.options[b]=w[b]},setOAuthdURL:function(g){l.oauthd_url=g,l.oauthd_base=o.getAbsUrl(l.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0]},getOAuthdURL:function(){return l.oauthd_url},getVersion:function(){return l.version},extend:function(g,w){return this[g]=w(this)},getConfig:function(){return l},getWindow:function(){return h},getDocument:function(){return d},getNavigator:function(){return p},getJquery:function(){return f},getUrl:function(){return o},getCache:function(){return s},getStorage:function(){return y},getLocationOperations:function(){return v}}}},{"../config":1,"../tools/cache":9,"../tools/cookies":10,"../tools/location_operations":12,"../tools/lstorage":13,"../tools/url":15}],4:[function(t,n,i){var a,o,s;a=t("../tools/cookies"),o=t("./request"),s=t("../tools/sha1"),n.exports=function(l){var u,c,h,d,f,p,v,y,g,w,b,m;return c=l.getUrl(),f=l.getConfig(),p=l.getDocument(),m=l.getWindow(),u=l.getJquery(),h=l.getCache(),b=t("./providers")(l),f.oauthd_base=c.getAbsUrl(f.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0],d=[],g=void 0,function(){var x,S;S=/[\\#&]oauthio=([^&]*)/.exec(p.location.hash),S&&(p.location.hash=p.location.hash.replace(/&?oauthio=[^&]*/,""),g=decodeURIComponent(S[1].replace(/\+/g," ")),x=a.read("oauthio_state"),x&&(d.push(x),a.erase("oauthio_state")))}(),v=l.getLocationOperations(),w={request:o(l,d,b)},y={initialize:function(x,S){return l.initialize(x,S)},setOAuthdURL:function(x){f.oauthd_url=x,f.oauthd_base=c.getAbsUrl(f.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0]},create:function(x,S,E){var A,T,C;if(!S)return h.tryCache(y,x,!0);typeof E!="object"&&b.fetchDescription(x),T=function(D){return w.request.mkHttp(x,S,E,D)},C={};for(A in S)C[A]=S[A];return C.toJson=function(){var D;return D={},C.access_token!=null&&(D.access_token=C.access_token),C.oauth_token!=null&&(D.oauth_token=C.oauth_token),C.oauth_token_secret!=null&&(D.oauth_token_secret=C.oauth_token_secret),C.expires_in!=null&&(D.expires_in=C.expires_in),C.token_type!=null&&(D.token_type=C.token_type),C.id_token!=null&&(D.id_token=C.id_token),C.provider!=null&&(D.provider=C.provider),C.email!=null&&(D.email=C.email),D},C.get=T("GET"),C.post=T("POST"),C.put=T("PUT"),C.patch=T("PATCH"),C.del=T("DELETE"),C.me=w.request.mkHttpMe(x,S,E,"GET"),C},popup:function(x,S,E){var A,T,C,D,O,U,L,F,k,R,z;return D=!1,C=function(B){if(!D){if(B.origin!==f.oauthd_base)return;try{F.close()}catch{}return S.data=B.data,w.request.sendCallback(S,A),D=!0}},F=void 0,T=void 0,k=void 0,A=u.Deferred(),S=S||{},f.key?(arguments.length===2&&typeof S=="function"&&(E=S,S={}),h.cacheEnabled(S.cache)&&(U=h.tryCache(y,x,S.cache))?(A!=null&&A.resolve(U),E?E(null,U):A.promise()):(S.state||(S.state=s.create_hash(),S.state_type="client"),d.push(S.state),L=f.oauthd_url+"/auth/"+x+"?k="+f.key,L+="&d="+encodeURIComponent(c.getAbsUrl("/")),S&&(L+="&opts="+encodeURIComponent(JSON.stringify(S))),S.wnd_settings?(z=S.wnd_settings,delete S.wnd_settings):z={width:Math.floor(.8*m.outerWidth),height:Math.floor(.5*m.outerHeight)},z.width<1e3&&(z.width=1e3),z.height<630&&(z.height=630),z.left=Math.floor(m.screenX+(m.outerWidth-z.width)/2),z.top=Math.floor(m.screenY+(m.outerHeight-z.height)/8),R="width="+z.width+",height="+z.height,R+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0",R+=",left="+z.left+",top="+z.top,S={provider:x,cache:S.cache},S.callback=function(B,X){return m.removeEventListener?m.removeEventListener("message",C,!1):m.detachEvent?m.detachEvent("onmessage",C):p.detachEvent&&p.detachEvent("onmessage",C),S.callback=function(){},k&&(clearTimeout(k),k=void 0),E?E(B,X):void 0},m.attachEvent?m.attachEvent("onmessage",C):p.attachEvent?p.attachEvent("onmessage",C):m.addEventListener&&m.addEventListener("message",C,!1),typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessageExternal&&chrome.runtime.onMessageExternal.addListener(function(B,X,Z){return B.origin=X.url.match(/^.{2,5}:\/\/[^\/]+/)[0],C(B)}),!T&&(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0)&&(T=p.createElement("iframe"),T.src=f.oauthd_url+"/auth/iframe?d="+encodeURIComponent(c.getAbsUrl("/")),T.width=0,T.height=0,T.frameBorder=0,T.style.visibility="hidden",p.body.appendChild(T)),k=setTimeout(function(){A!=null&&A.reject(new Error("Authorization timed out")),S.callback&&typeof S.callback=="function"&&S.callback(new Error("Authorization timed out"));try{F.close()}catch{}},12e5),F=m.open(L,"Authorization",R),F?(F.focus(),O=m.setInterval(function(){return F!==null&&!F.closed||(m.clearInterval(O),D||(A!=null&&A.reject(new Error("The popup was closed")),!S.callback||typeof S.callback!="function"))?void 0:S.callback(new Error("The popup was closed"))},500)):(A!=null&&A.reject(new Error("Could not open a popup")),S.callback&&typeof S.callback=="function"&&S.callback(new Error("Could not open a popup"))),A!=null?A.promise():void 0)):(A!=null&&A.reject(new Error("OAuth object must be initialized")),E==null?A.promise():E(new Error("OAuth object must be initialized")))},redirect:function(x,S,E){var A;if(arguments.length===2&&(E=S,S={}),typeof E!="string")throw new Error("You must specify an url");return h.cacheEnabled(S.cache)&&h.tryCache(y,x,S.cache)?(E=c.getAbsUrl(E)+(E.indexOf("#")===-1?"#":"&")+"oauthio=cache:"+x,v.changeHref(E),void v.reload()):(S.state||(S.state=s.create_hash(),S.state_type="client"),a.create("oauthio_state",S.state),A=encodeURIComponent(c.getAbsUrl(E)),E=f.oauthd_url+"/auth/"+x+"?k="+f.key,E+="&redirect_uri="+A,S&&(E+="&opts="+encodeURIComponent(JSON.stringify(S))),void v.changeHref(E))},isRedirect:function(x){var S,E;if(g==null)return!1;if((g!=null?g.substr(0,6):void 0)==="cache:")return S=g!=null?g.substr(6):void 0,x?S.toLowerCase()===x.toLowerCase():S;try{E=JSON.parse(g)}catch{return!1}return x?E.provider.toLowerCase()===x.toLowerCase():E.provider},callback:function(x,S,E){var A,T,C;if(A=u.Deferred(),arguments.length===1&&typeof x=="function"&&(E=x,x=void 0,S={}),arguments.length===1&&typeof x=="string"&&(S={}),arguments.length===2&&typeof S=="function"&&(E=S,S={}),h.cacheEnabled(S!=null?S.cache:void 0)||(g!=null?g.substr(0,6):void 0)==="cache:"){if(x||(g!=null?g.substr(0,6):void 0)!=="cache:"||(x=g.substr(6)),C=h.tryCache(y,x,!0)){if(!E)return A!=null&&A.resolve(C),A!=null?A.promise():void 0;if(C)return E(null,C)}else if((g!=null?g.substr(0,6):void 0)==="cache:")return T=new Error("Could not fetch data from cache"),E?E(T):(A!=null&&A.reject(T),A!=null?A.promise():void 0)}return g?(w.request.sendCallback({data:g,provider:x,cache:S!=null?S.cache:void 0,expires:S!=null?S.expires:void 0,callback:E},A),A!=null?A.promise():void 0):void 0},clearCache:function(x){return h.clearCache(x)},http_me:function(x){w.request.http_me&&w.request.http_me(x)},http:function(x){w.request.http&&w.request.http(x)},getVersion:function(){return l.getVersion.apply(this)}}}},{"../tools/cookies":10,"../tools/sha1":14,"./providers":5,"./request":6}],5:[function(t,n,i){var a;a=t("../config"),n.exports=function(o){var s,l,u,c;return s=o.getJquery(),c={},u={},l={execProvidersCb:function(h,d,f){var p,v;if(u[h]){p=u[h],delete u[h];for(v in p)p[v](d,f)}},fetchDescription:function(h){c[h]||(c[h]=!0,s.ajax({url:a.oauthd_api+"/providers/"+h,data:{extend:!0},dataType:"json"}).done(function(d){c[h]=d.data,l.execProvidersCb(h,null,d.data)}).always(function(){typeof c[h]!="object"&&(delete c[h],l.execProvidersCb(h,new Error("Unable to fetch request description")))}))},getDescription:function(h,d,f){return d=d||{},typeof c[h]=="object"?f(null,c[h]):(c[h]||l.fetchDescription(h),d.wait?(u[h]=u[h]||[],void u[h].push(f)):f(null,{}))}}}},{"../config":1}],6:[function(t,n,i){var a,o=[].indexOf||function(s){for(var l=0,u=this.length;u>l;l++)if(l in this&&this[l]===s)return l;return-1};a=t("../tools/url")(),n.exports=function(s,l,u){var c,h,d,f,p;return c=s.getJquery(),d=s.getConfig(),h=s.getCache(),f=[],p=!1,{retrieveMethods:function(){var v;return v=c.Deferred(),p?v.resolve(f):c.ajax(d.oauthd_url+"/api/extended-endpoints").then(function(y){return f=y.data,p=!0,v.resolve()}).fail(function(y){return p=!0,v.reject(y)}),v.promise()},generateMethods:function(v,y,g){var w,b,m,x,S,E,A,T,C;if(f!=null){for(A=[],b=w=0,x=f.length;x>w;b=++w)T=f[b],S=T.name.split("."),E=v,A.push((function(){var D,O,U;for(U=[],m=D=0,O=S.length;O>D;m=++D)C=S[m],m<S.length-1?(E[C]==null&&(E[C]={}),U.push(E=E[C])):U.push(E[C]=this.mkHttpAll(g,y,T,arguments));return U}).apply(this,arguments));return A}},http:function(v){var y,g,w,b,m;w=function(){var x,S,E,A;if(A=m.oauthio.request||{},!A.cors){m.url=encodeURIComponent(m.url),m.url[0]!=="/"&&(m.url="/"+m.url),m.url=d.oauthd_url+"/request/"+m.oauthio.provider+m.url,m.headers=m.headers||{},m.headers.oauthio="k="+d.key,m.oauthio.tokens.oauth_token&&m.oauthio.tokens.oauth_token_secret&&(m.headers.oauthio+="&oauthv=1");for(S in m.oauthio.tokens)m.headers.oauthio+="&"+encodeURIComponent(S)+"="+encodeURIComponent(m.oauthio.tokens[S]);return delete m.oauthio,c.ajax(m)}if(m.oauthio.tokens){if(m.oauthio.tokens.access_token&&(m.oauthio.tokens.token=m.oauthio.tokens.access_token),m.url.match(/^[a-z]{2,16}:\/\//)||(m.url[0]!=="/"&&(m.url="/"+m.url),m.url=A.url+m.url),m.url=a.replaceParam(m.url,m.oauthio.tokens,A.parameters),A.query){E=[];for(x in A.query)E.push(encodeURIComponent(x)+"="+encodeURIComponent(a.replaceParam(A.query[x],m.oauthio.tokens,A.parameters)));o.call(m.url,"?")>=0?m.url+="&"+E:m.url+="?"+E}if(A.headers){m.headers=m.headers||{};for(x in A.headers)m.headers[x]=a.replaceParam(A.headers[x],m.oauthio.tokens,A.parameters)}return delete m.oauthio,c.ajax(m)}},m={},b=void 0;for(b in v)m[b]=v[b];return m.oauthio.request&&m.oauthio.request!==!0?w():(g={wait:!!m.oauthio.request},y=c.Deferred(),u.getDescription(m.oauthio.provider,g,function(x,S){return x?y.reject(x):(m.oauthio.tokens.oauth_token&&m.oauthio.tokens.oauth_token_secret?m.oauthio.request=S.oauth1&&S.oauth1.request:m.oauthio.request=S.oauth2&&S.oauth2.request,void y.resolve())}),y.then(w))},http_me:function(v){var y,g,w,b,m;w=function(){var x,S,E;x=c.Deferred(),m.oauthio.request,m.url=d.oauthd_url+"/auth/"+m.oauthio.provider+"/me",m.headers=m.headers||{},m.headers.oauthio="k="+d.key,m.oauthio.tokens.oauth_token&&m.oauthio.tokens.oauth_token_secret&&(m.headers.oauthio+="&oauthv=1");for(S in m.oauthio.tokens)m.headers.oauthio+="&"+encodeURIComponent(S)+"="+encodeURIComponent(m.oauthio.tokens[S]);return delete m.oauthio,E=c.ajax(m),c.when(E).done(function(A){x.resolve(A.data)}).fail(function(A){A.responseJSON?x.reject(A.responseJSON.data):x.reject(new Error("An error occured while trying to access the resource"))}),x.promise()},m={};for(b in v)m[b]=v[b];return m.oauthio.request&&m.oauthio.request!==!0?w():(g={wait:!!m.oauthio.request},y=c.Deferred(),u.getDescription(m.oauthio.provider,g,function(x,S){return x?y.reject(x):(m.oauthio.tokens.oauth_token&&m.oauthio.tokens.oauth_token_secret?m.oauthio.request=S.oauth1&&S.oauth1.request:m.oauthio.request=S.oauth2&&S.oauth2.request,void y.resolve())}),y.then(w))},http_all:function(v,y,g){return function(){var w,b,m;w=c.Deferred(),v.oauthio.request,v.headers=v.headers||{},v.headers.oauthio="k="+d.key,v.oauthio.tokens.oauth_token&&v.oauthio.tokens.oauth_token_secret&&(v.headers.oauthio+="&oauthv=1");for(b in v.oauthio.tokens)v.headers.oauthio+="&"+encodeURIComponent(b)+"="+encodeURIComponent(v.oauthio.tokens[b]);return delete v.oauthio,m=c.ajax(v),c.when(m).done(function(x){if(typeof x.data=="string")try{x.data=JSON.parse(x.data)}catch{x.data=x.data}finally{w.resolve(x.data)}}).fail(function(x){x.responseJSON?w.reject(x.responseJSON.data):w.reject(new Error("An error occured while trying to access the resource"))}),w.promise()}()},mkHttp:function(v,y,g,w){var b;return b=this,function(m,x){var S,E;if(E={},typeof m=="string"){if(typeof x=="object")for(S in x)E[S]=x[S];E.url=m}else if(typeof m=="object")for(S in m)E[S]=m[S];return E.type=E.type||w,E.oauthio={provider:v,tokens:y,request:g},b.http(E)}},mkHttpMe:function(v,y,g,w){var b;return b=this,function(m){var x;return x={},x.type=x.type||w,x.oauthio={provider:v,tokens:y,request:g},x.data=x.data||{},m&&(x.data.filter=m.join(",")),b.http_me(x)}},mkHttpAll:function(v,y,g){var w;return w=this,function(){var b,m,x,S;m={},m.type=g.method,m.url=d.oauthd_url+g.endpoint.replace(":provider",v),m.oauthio={provider:v,tokens:y},m.data={};for(b in arguments)S=arguments[b],x=g.params[b],x!=null&&(m.data[x.name]=S);return m.data=m.data||{},w.http_all(m,g,arguments)}},sendCallback:function(v,y){var g,w,b,m,x,S,E,A;g=this,w=void 0,b=void 0;try{w=JSON.parse(v.data)}catch{return y.reject(new Error("Error while parsing result")),v.callback(new Error("Error while parsing result"))}if(w&&w.provider){if(v.provider&&w.provider.toLowerCase()!==v.provider.toLowerCase())return b=new Error("Returned provider name does not match asked provider"),y.reject(b),v.callback&&typeof v.callback=="function"?v.callback(b):void 0;if(w.status==="error"||w.status==="fail")return b=new Error(w.message),b.body=w.data,y.reject(b),v.callback&&typeof v.callback=="function"?v.callback(b):void 0;if(w.status!=="success"||!w.data)return b=new Error,b.body=w.data,y.reject(b),v.callback&&typeof v.callback=="function"?v.callback(b):void 0;for(w.state=w.state.replace(/\s+/g,""),m=0;m<l.length;)l[m]=l[m].replace(/\s+/g,""),m++;if(!w.state||l.indexOf(w.state)===-1)return y.reject(new Error("State is not matching")),v.callback&&typeof v.callback=="function"?v.callback(new Error("State is not matching")):void 0;if(v.provider||(w.data.provider=w.provider),E=w.data,E.provider=w.provider.toLowerCase(),h.cacheEnabled(v.cache)&&E&&(v.expires&&!E.expires_in&&(E.expires_in=v.expires),h.storeCache(w.provider,E)),S=E.request,delete E.request,A=void 0,E.access_token?A={access_token:E.access_token}:E.oauth_token&&E.oauth_token_secret&&(A={oauth_token:E.oauth_token,oauth_token_secret:E.oauth_token_secret}),!S)return y.resolve(E),v.callback&&typeof v.callback=="function"?v.callback(null,E):void 0;if(S.required)for(m in S.required)A[S.required[m]]=E[S.required[m]];return x=function(T){return g.mkHttp(w.provider,A,S,T)},E.toJson=function(){var T;return T={},E.access_token!=null&&(T.access_token=E.access_token),E.oauth_token!=null&&(T.oauth_token=E.oauth_token),E.oauth_token_secret!=null&&(T.oauth_token_secret=E.oauth_token_secret),E.expires_in!=null&&(T.expires_in=E.expires_in),E.token_type!=null&&(T.token_type=E.token_type),E.id_token!=null&&(T.id_token=E.id_token),E.provider!=null&&(T.provider=E.provider),E.email!=null&&(T.email=E.email),T},E.get=x("GET"),E.post=x("POST"),E.put=x("PUT"),E.patch=x("PATCH"),E.del=x("DELETE"),E.me=g.mkHttpMe(w.provider,A,S,"GET"),this.retrieveMethods().then(function(T){return function(){return T.generateMethods(E,A,w.provider),y.resolve(E),v.callback&&typeof v.callback=="function"?v.callback(null,E):void 0}}(this)).fail(function(T){return function(C){return console.log("Could not retrieve methods",C),y.resolve(E),v.callback&&typeof v.callback=="function"?v.callback(null,E):void 0}}())}}}}},{"../tools/url":15}],7:[function(t,n,i){n.exports=function(a){var o,s,l,u,c;return o=a.getJquery(),l=a.getConfig(),c=a.getStorage(),u=null,s=function(){function h(d){this.token=d.token,this.data=d.user,this.providers=d.providers,u=this.getEditableData()}return h.prototype.getEditableData=function(){var d,f;d=[];for(f in this.data)["id","email"].indexOf(f)===-1&&d.push({key:f,value:this.data[f]});return d},h.prototype.save=function(){var d,f,p,v,y,g,w,b;for(f={},p=0,g=u.length;g>p;p++)d=u[p],this.data[d.key]!==d.value&&(f[d.key]=this.data[d.key]),this.data[d.key]===null&&delete this.data[d.key];for(y=function(m){var x,S,E;for(x=0,S=u.length;S>x;x++)if(E=u[x],E.key===m)return!0;return!1},b=this.getEditableData(),v=0,w=b.length;w>v;v++)d=b[v],y(d.key)||(f[d.key]=this.data[d.key]);return this.saveLocal(),a.API.put("/api/usermanagement/user?k="+l.key+"&token="+this.token,f)},h.prototype.select=function(d){return null},h.prototype.saveLocal=function(){var d;return d={token:this.token,user:this.data,providers:this.providers},c.erase("oio_auth"),c.create("oio_auth",JSON.stringify(d),21600)},h.prototype.hasProvider=function(d){return!!this.providers&&this.providers.indexOf(d)!==-1},h.prototype.getProviders=function(){var d;return d=o.Deferred(),a.API.get("/api/usermanagement/user/providers?k="+l.key+"&token="+this.token).done(function(f){return function(p){return f.providers=p.data,f.saveLocal(),d.resolve(f.providers)}}(this)).fail(function(f){return d.reject(f)}),d.promise()},h.prototype.addProvider=function(d){var f;return f=o.Deferred(),typeof d.toJson=="function"&&(d=d.toJson()),d.email=this.data.email,this.providers||(this.providers=[]),this.providers.push(d.provider),a.API.post("/api/usermanagement/user/providers?k="+l.key+"&token="+this.token,d).done(function(p){return function(v){return p.data=v.data,p.saveLocal(),f.resolve()}}(this)).fail(function(p){return function(v){return p.providers.splice(p.providers.indexOf(d.provider),1),f.reject(v)}}(this)),f.promise()},h.prototype.removeProvider=function(d){var f;return f=o.Deferred(),this.providers.splice(this.providers.indexOf(d),1),a.API.del("/api/usermanagement/user/providers/"+d+"?k="+l.key+"&token="+this.token).done(function(p){return function(v){return p.saveLocal(),f.resolve(v)}}(this)).fail(function(p){return function(v){return p.providers.push(d),f.reject(v)}}(this)),f.promise()},h.prototype.changePassword=function(d,f){return a.API.post("/api/usermanagement/user/password?k="+l.key+"&token="+this.token,{password:f})},h.prototype.isLoggued=function(){return a.User.isLogged()},h.prototype.isLogged=function(){return a.User.isLogged()},h.prototype.logout=function(){var d;return d=o.Deferred(),c.erase("oio_auth"),a.API.post("/api/usermanagement/user/logout?k="+l.key+"&token="+this.token).done(function(){return d.resolve()}).fail(function(f){return d.reject(f)}),d.promise()},h}(),{initialize:function(h,d){return a.initialize(h,d)},setOAuthdURL:function(h){return a.setOAuthdURL(h)},signup:function(h){var d;return d=o.Deferred(),typeof h.toJson=="function"&&(h=h.toJson()),a.API.post("/api/usermanagement/signup?k="+l.key,h).done(function(f){return c.create("oio_auth",JSON.stringify(f.data),f.data.expires_in||21600),d.resolve(new s(f.data))}).fail(function(f){return d.reject(f)}),d.promise()},signin:function(h,d){var f,p;return f=o.Deferred(),typeof h=="string"||d?a.API.post("/api/usermanagement/signin?k="+l.key,{email:h,password:d}).done(function(v){return c.create("oio_auth",JSON.stringify(v.data),v.data.expires_in||21600),f.resolve(new s(v.data))}).fail(function(v){return f.reject(v)}):(p=h,typeof p.toJson=="function"&&(p=p.toJson()),a.API.post("/api/usermanagement/signin?k="+l.key,p).done(function(v){return c.create("oio_auth",JSON.stringify(v.data),v.data.expires_in||21600),f.resolve(new s(v.data))}).fail(function(v){return f.reject(v)})),f.promise()},confirmResetPassword:function(h,d){return a.API.post("/api/usermanagement/user/password?k="+l.key,{password:h,token:d})},resetPassword:function(h,d){return a.API.post("/api/usermanagement/user/password/reset?k="+l.key,{email:h})},refreshIdentity:function(){var h;return h=o.Deferred(),a.API.get("/api/usermanagement/user?k="+l.key+"&token="+JSON.parse(c.read("oio_auth")).token).done(function(d){return h.resolve(new s(d.data))}).fail(function(d){return h.reject(d)}),h.promise()},getIdentity:function(){var h;return h=c.read("oio_auth"),h?new s(JSON.parse(h)):null},isLogged:function(){var h;return h=c.read("oio_auth"),!!h}}}},{}],8:[function(t,n,i){(function(){var a,o;return o=t("./tools/jquery-lite.js"),a=t("./lib/core")(window,document,o,navigator),a.extend("OAuth",t("./lib/oauth")),a.extend("API",t("./lib/api")),a.extend("User",t("./lib/user")),typeof angular<"u"&&angular!==null&&angular.module("oauthio",[]).factory("OAuth",[function(){return a.OAuth}]).factory("User",[function(){return a.User}]),i.OAuthio=a,window.User=i.User=i.OAuthio.User,window.OAuth=i.OAuth=i.OAuthio.OAuth,typeof n<"u"&&n!==null&&n.exports&&(n.exports=i),i})()},{"./lib/api":2,"./lib/core":3,"./lib/oauth":4,"./lib/user":7,"./tools/jquery-lite.js":11}],9:[function(t,n,i){n.exports={init:function(a,o){return this.config=o,this.storage=a},tryCache:function(a,o,s){var l,u;if(this.cacheEnabled(s)){if(s=this.storage.read("oauthio_provider_"+o),!s)return!1;s=decodeURIComponent(s)}if(typeof s=="string")try{s=JSON.parse(s)}catch{return!1}if(typeof s=="object"){u={};for(l in s)l!=="request"&&typeof s[l]!="function"&&(u[l]=s[l]);return a.create(o,u,s.request)}return!1},storeCache:function(a,o){var s;s=3600,o.expires_in?s=o.expires_in:(this.config.options.expires||this.config.options.expires===!1)&&(s=this.config.options.expires),this.storage.create("oauthio_provider_"+a,encodeURIComponent(JSON.stringify(o)),s)},cacheEnabled:function(a){return typeof a>"u"?this.config.options.cache:a},clearCache:function(a){a?this.storage.erase("oauthio_provider_"+a):this.storage.eraseFrom("oauthio_provider_")}}},{}],10:[function(t,n,i){n.exports={init:function(a,o){return this.config=a,this.document=o},create:function(a,o,s){var l;this.erase(a),l=new Date,s?l.setTime(l.getTime()+1e3*(s||1200)):l.setFullYear(l.getFullYear()+3),s="; expires="+l.toGMTString(),this.document.cookie=a+"="+o+s+"; path=/"},read:function(a){var o,s,l,u;for(u=a+"=",s=this.document.cookie.split(";"),l=0;l<s.length;){for(o=s[l];o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(u)===0)return o.substring(u.length,o.length);l++}return null},erase:function(a){var o;o=new Date,o.setTime(o.getTime()-864e5),this.document.cookie=a+"=; expires="+o.toGMTString()+"; path=/"},eraseFrom:function(a){var o,s,l,u,c;for(l=this.document.cookie.split(";"),u=0,c=l.length;c>u;u++)s=l[u],o=s.split("=")[0].trim(),o.substr(0,a.length)===a&&this.erase(o)}}},{}],11:[function(t,n,i){(function(a,o){typeof n=="object"&&typeof n.exports=="object"?n.exports=a.document?o(a,!0):function(s){if(!s.document)throw new Error("jQuery requires a window with a document");return o(s)}:o(a)})(typeof window<"u"?window:this,function(a,o){function s(H){var te=H.length,le=k.type(H);return le==="function"||k.isWindow(H)?!1:H.nodeType===1&&te?!0:le==="array"||te===0||typeof te=="number"&&te>0&&te-1 in H}function l(H){var te=se[H]={};return k.each(H.match(fe)||[],function(le,ve){te[ve]=!0}),te}function u(){L.removeEventListener("DOMContentLoaded",u,!1),a.removeEventListener("load",u,!1),k.ready()}function c(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=k.expando+Math.random()}function h(H,te,le){var ve;if(le===void 0&&H.nodeType===1)if(ve="data-"+te.replace(be,"-$1").toLowerCase(),le=H.getAttribute(ve),typeof le=="string"){try{le=le==="true"?!0:le==="false"?!1:le==="null"?null:+le+""===le?+le:Te.test(le)?k.parseJSON(le):le}catch{}data_user.set(H,te,le)}else le=void 0;return le}function d(){return!0}function f(){return!1}function p(){try{return L.activeElement}catch{}}function v(H){return function(te,le){typeof te!="string"&&(le=te,te="*");var ve,Ee=0,Oe=te.toLowerCase().match(fe)||[];if(k.isFunction(le))for(;ve=Oe[Ee++];)ve[0]==="+"?(ve=ve.slice(1)||"*",(H[ve]=H[ve]||[]).unshift(le)):(H[ve]=H[ve]||[]).push(le)}}function y(H,te,le,ve){function Ee($e){var rt;return Oe[$e]=!0,k.each(H[$e]||[],function(ft,Mt){var nt=Mt(te,le,ve);return typeof nt!="string"||He||Oe[nt]?He?!(rt=nt):void 0:(te.dataTypes.unshift(nt),Ee(nt),!1)}),rt}var Oe={},He=H===We;return Ee(te.dataTypes[0])||!Oe["*"]&&Ee("*")}function g(H,te){var le,ve,Ee=k.ajaxSettings.flatOptions||{};for(le in te)te[le]!==void 0&&((Ee[le]?H:ve||(ve={}))[le]=te[le]);return ve&&k.extend(!0,H,ve),H}function w(H,te,le){for(var ve,Ee,Oe,He,$e=H.contents,rt=H.dataTypes;rt[0]==="*";)rt.shift(),ve===void 0&&(ve=H.mimeType||te.getResponseHeader("Content-Type"));if(ve){for(Ee in $e)if($e[Ee]&&$e[Ee].test(ve)){rt.unshift(Ee);break}}if(rt[0]in le)Oe=rt[0];else{for(Ee in le){if(!rt[0]||H.converters[Ee+" "+rt[0]]){Oe=Ee;break}He||(He=Ee)}Oe=Oe||He}return Oe?(Oe!==rt[0]&&rt.unshift(Oe),le[Oe]):void 0}function b(H,te,le,ve){var Ee,Oe,He,$e,rt,ft={},Mt=H.dataTypes.slice();if(Mt[1])for(He in H.converters)ft[He.toLowerCase()]=H.converters[He];for(Oe=Mt.shift();Oe;)if(H.responseFields[Oe]&&(le[H.responseFields[Oe]]=te),!rt&&ve&&H.dataFilter&&(te=H.dataFilter(te,H.dataType)),rt=Oe,Oe=Mt.shift()){if(Oe==="*")Oe=rt;else if(rt!=="*"&&rt!==Oe){if(He=ft[rt+" "+Oe]||ft["* "+Oe],!He){for(Ee in ft)if($e=Ee.split(" "),$e[1]===Oe&&(He=ft[rt+" "+$e[0]]||ft["* "+$e[0]])){He===!0?He=ft[Ee]:ft[Ee]!==!0&&(Oe=$e[0],Mt.unshift($e[1]));break}}if(He!==!0)if(He&&H.throws)te=He(te);else try{te=He(te)}catch(nt){return{state:"parsererror",error:He?nt:"No conversion from "+rt+" to "+Oe}}}}return{state:"success",data:te}}function m(H,te,le,ve){var Ee;if(k.isArray(te))k.each(te,function(Oe,He){le||Je.test(H)?ve(H,He):m(H+"["+(typeof He=="object"?Oe:"")+"]",He,le,ve)});else if(le||k.type(te)!=="object")ve(H,te);else for(Ee in te)m(H+"["+Ee+"]",te[Ee],le,ve)}var x=[],S=x.slice,E=x.concat,A=x.push,T=x.indexOf,C={},D=C.toString,O=C.hasOwnProperty,U={},L=a.document,F="2.1.1 -attributes,-attributes/attr,-attributes/classes,-attributes/prop,-attributes/support,-attributes/val,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var,-css/var/cssExpand,-css/var/getStyles,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-css,-effects,-effects/Tween,-effects/animatedSelector,-dimensions,-offset,-data/var/data_user,-deprecated,-event/alias,-event/support,-intro,-manipulation/_evalUrl,-manipulation/support,-manipulation/var,-manipulation/var/rcheckableType,-manipulation,-outro,-queue,-queue/delay,-selector-native,-selector-sizzle,-sizzle/dist,-sizzle/dist/sizzle,-sizzle/dist/min,-sizzle/test,-sizzle/test/jquery,-traversing,-traversing/findFilter,-traversing/var/rneedsContext,-traversing/var,-wrap,-exports,-exports/amd",k=function(H,te){return new k.fn.init(H,te)},R=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,z=/^-ms-/,B=/-([\da-z])/gi,X=function(H,te){return te.toUpperCase()};k.fn=k.prototype={jquery:F,constructor:k,selector:"",length:0,toArray:function(){return S.call(this)},get:function(H){return H!=null?0>H?this[H+this.length]:this[H]:S.call(this)},pushStack:function(H){var te=k.merge(this.constructor(),H);return te.prevObject=this,te.context=this.context,te},each:function(H,te){return k.each(this,H,te)},map:function(H){return this.pushStack(k.map(this,function(te,le){return H.call(te,le,te)}))},slice:function(){return this.pushStack(S.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(H){var te=this.length,le=+H+(0>H?te:0);return this.pushStack(le>=0&&te>le?[this[le]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:A,sort:x.sort,splice:x.splice},k.extend=k.fn.extend=function(){var H,te,le,ve,Ee,Oe,He=arguments[0]||{},$e=1,rt=arguments.length,ft=!1;for(typeof He=="boolean"&&(ft=He,He=arguments[$e]||{},$e++),typeof He=="object"||k.isFunction(He)||(He={}),$e===rt&&(He=this,$e--);rt>$e;$e++)if((H=arguments[$e])!=null)for(te in H)le=He[te],ve=H[te],He!==ve&&(ft&&ve&&(k.isPlainObject(ve)||(Ee=k.isArray(ve)))?(Ee?(Ee=!1,Oe=le&&k.isArray(le)?le:[]):Oe=le&&k.isPlainObject(le)?le:{},He[te]=k.extend(ft,Oe,ve)):ve!==void 0&&(He[te]=ve));return He},k.extend({expando:"jQuery"+(F+Math.random()).replace(/\D/g,""),isReady:!0,error:function(H){throw new Error(H)},noop:function(){},isFunction:function(H){return k.type(H)==="function"},isArray:Array.isArray,isWindow:function(H){return H!=null&&H===H.window},isNumeric:function(H){return!k.isArray(H)&&H-parseFloat(H)>=0},isPlainObject:function(H){return k.type(H)!=="object"||H.nodeType||k.isWindow(H)?!1:!H.constructor||O.call(H.constructor.prototype,"isPrototypeOf")},isEmptyObject:function(H){var te;for(te in H)return!1;return!0},type:function(H){return H==null?H+"":typeof H=="object"||typeof H=="function"?C[D.call(H)]||"object":typeof H},globalEval:function(H){var te,le=eval;H=k.trim(H),H&&(H.indexOf("use strict")===1?(te=L.createElement("script"),te.text=H,L.head.appendChild(te).parentNode.removeChild(te)):le(H))},camelCase:function(H){return H.replace(z,"ms-").replace(B,X)},nodeName:function(H,te){return H.nodeName&&H.nodeName.toLowerCase()===te.toLowerCase()},each:function(H,te,le){var ve,Ee=0,Oe=H.length,He=s(H);if(le){if(He)for(;Oe>Ee&&(ve=te.apply(H[Ee],le),ve!==!1);Ee++);else for(Ee in H)if(ve=te.apply(H[Ee],le),ve===!1)break}else if(He)for(;Oe>Ee&&(ve=te.call(H[Ee],Ee,H[Ee]),ve!==!1);Ee++);else for(Ee in H)if(ve=te.call(H[Ee],Ee,H[Ee]),ve===!1)break;return H},trim:function(H){return H==null?"":(H+"").replace(R,"")},makeArray:function(H,te){var le=te||[];return H!=null&&(s(Object(H))?k.merge(le,typeof H=="string"?[H]:H):A.call(le,H)),le},inArray:function(H,te,le){return te==null?-1:T.call(te,H,le)},merge:function(H,te){for(var le=+te.length,ve=0,Ee=H.length;le>ve;ve++)H[Ee++]=te[ve];return H.length=Ee,H},grep:function(H,te,le){for(var ve,Ee=[],Oe=0,He=H.length,$e=!le;He>Oe;Oe++)ve=!te(H[Oe],Oe),ve!==$e&&Ee.push(H[Oe]);return Ee},map:function(H,te,le){var ve,Ee=0,Oe=H.length,He=s(H),$e=[];if(He)for(;Oe>Ee;Ee++)ve=te(H[Ee],Ee,le),ve!=null&&$e.push(ve);else for(Ee in H)ve=te(H[Ee],Ee,le),ve!=null&&$e.push(ve);return E.apply([],$e)},guid:1,proxy:function(H,te){var le,ve,Ee;return typeof te=="string"&&(le=H[te],te=H,H=le),k.isFunction(H)?(ve=S.call(arguments,2),Ee=function(){return H.apply(te||this,ve.concat(S.call(arguments)))},Ee.guid=H.guid=H.guid||k.guid++,Ee):void 0},now:Date.now,support:U}),k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(H,te){C["[object "+te+"]"]=te.toLowerCase()});var Z,Q=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,J=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ne=k.fn.init=function(H,te){var le,ve;if(!H)return this;if(typeof H=="string"){if(le=H[0]==="<"&&H[H.length-1]===">"&&H.length>=3?[null,H,null]:J.exec(H),!le||!le[1]&&te)return!te||te.jquery?(te||Z).find(H):this.constructor(te).find(H);if(le[1]){if(te=te instanceof k?te[0]:te,k.merge(this,k.parseHTML(le[1],te&&te.nodeType?te.ownerDocument||te:L,!0)),Q.test(le[1])&&k.isPlainObject(te))for(le in te)k.isFunction(this[le])?this[le](te[le]):this.attr(le,te[le]);return this}return ve=L.getElementById(le[2]),ve&&ve.parentNode&&(this.length=1,this[0]=ve),this.context=L,this.selector=H,this}return H.nodeType?(this.context=this[0]=H,this.length=1,this):k.isFunction(H)?typeof Z.ready<"u"?Z.ready(H):H(k):(H.selector!==void 0&&(this.selector=H.selector,this.context=H.context),k.makeArray(H,this))};ne.prototype=k.fn,Z=k(L);var fe=/\S+/g,se={};k.Callbacks=function(H){H=typeof H=="string"?se[H]||l(H):k.extend({},H);var te,le,ve,Ee,Oe,He,$e=[],rt=!H.once&&[],ft=function(nt){for(te=H.memory&&nt,le=!0,He=Ee||0,Ee=0,Oe=$e.length,ve=!0;$e&&Oe>He;He++)if($e[He].apply(nt[0],nt[1])===!1&&H.stopOnFalse){te=!1;break}ve=!1,$e&&(rt?rt.length&&ft(rt.shift()):te?$e=[]:Mt.disable())},Mt={add:function(){if($e){var nt=$e.length;(function xt($t){k.each($t,function(Rn,En){var Zr=k.type(En);Zr==="function"?H.unique&&Mt.has(En)||$e.push(En):En&&En.length&&Zr!=="string"&&xt(En)})})(arguments),ve?Oe=$e.length:te&&(Ee=nt,ft(te))}return this},remove:function(){return $e&&k.each(arguments,function(nt,xt){for(var $t;($t=k.inArray(xt,$e,$t))>-1;)$e.splice($t,1),ve&&(Oe>=$t&&Oe--,He>=$t&&He--)}),this},has:function(nt){return nt?k.inArray(nt,$e)>-1:!(!$e||!$e.length)},empty:function(){return $e=[],Oe=0,this},disable:function(){return $e=rt=te=void 0,this},disabled:function(){return!$e},lock:function(){return rt=void 0,te||Mt.disable(),this},locked:function(){return!rt},fireWith:function(nt,xt){return!$e||le&&!rt||(xt=xt||[],xt=[nt,xt.slice?xt.slice():xt],ve?rt.push(xt):ft(xt)),this},fire:function(){return Mt.fireWith(this,arguments),this},fired:function(){return!!le}};return Mt},k.extend({Deferred:function(H){var te=[["resolve","done",k.Callbacks("once memory"),"resolved"],["reject","fail",k.Callbacks("once memory"),"rejected"],["notify","progress",k.Callbacks("memory")]],le="pending",ve={state:function(){return le},always:function(){return Ee.done(arguments).fail(arguments),this},then:function(){var Oe=arguments;return k.Deferred(function(He){k.each(te,function($e,rt){var ft=k.isFunction(Oe[$e])&&Oe[$e];Ee[rt[1]](function(){var Mt=ft&&ft.apply(this,arguments);Mt&&k.isFunction(Mt.promise)?Mt.promise().done(He.resolve).fail(He.reject).progress(He.notify):He[rt[0]+"With"](this===ve?He.promise():this,ft?[Mt]:arguments)})}),Oe=null}).promise()},promise:function(Oe){return Oe!=null?k.extend(Oe,ve):ve}},Ee={};return ve.pipe=ve.then,k.each(te,function(Oe,He){var $e=He[2],rt=He[3];ve[He[1]]=$e.add,rt&&$e.add(function(){le=rt},te[1^Oe][2].disable,te[2][2].lock),Ee[He[0]]=function(){return Ee[He[0]+"With"](this===Ee?ve:this,arguments),this},Ee[He[0]+"With"]=$e.fireWith}),ve.promise(Ee),H&&H.call(Ee,Ee),Ee},when:function(H){var te,le,ve,Ee=0,Oe=S.call(arguments),He=Oe.length,$e=He!==1||H&&k.isFunction(H.promise)?He:0,rt=$e===1?H:k.Deferred(),ft=function(Mt,nt,xt){return function($t){nt[Mt]=this,xt[Mt]=arguments.length>1?S.call(arguments):$t,xt===te?rt.notifyWith(nt,xt):--$e||rt.resolveWith(nt,xt)}};if(He>1)for(te=new Array(He),le=new Array(He),ve=new Array(He);He>Ee;Ee++)Oe[Ee]&&k.isFunction(Oe[Ee].promise)?Oe[Ee].promise().done(ft(Ee,ve,Oe)).fail(rt.reject).progress(ft(Ee,le,te)):--$e;return $e||rt.resolveWith(ve,Oe),rt.promise()}});var ye;k.fn.ready=function(H){return k.ready.promise().done(H),this},k.extend({isReady:!1,readyWait:1,holdReady:function(H){H?k.readyWait++:k.ready(!0)},ready:function(H){(H===!0?--k.readyWait:k.isReady)||(k.isReady=!0,H!==!0&&--k.readyWait>0||(ye.resolveWith(L,[k]),k.fn.triggerHandler&&(k(L).triggerHandler("ready"),k(L).off("ready"))))}}),k.ready.promise=function(H){return ye||(ye=k.Deferred(),L.readyState==="complete"?setTimeout(k.ready):(L.addEventListener("DOMContentLoaded",u,!1),a.addEventListener("load",u,!1))),ye.promise(H)},k.ready.promise();var De=k.access=function(H,te,le,ve,Ee,Oe,He){var $e=0,rt=H.length,ft=le==null;if(k.type(le)==="object"){Ee=!0;for($e in le)k.access(H,te,$e,le[$e],!0,Oe,He)}else if(ve!==void 0&&(Ee=!0,k.isFunction(ve)||(He=!0),ft&&(He?(te.call(H,ve),te=null):(ft=te,te=function(Mt,nt,xt){return ft.call(k(Mt),xt)})),te))for(;rt>$e;$e++)te(H[$e],le,He?ve:ve.call(H[$e],$e,te(H[$e],le)));return Ee?H:ft?te.call(H):rt?te(H[0],le):Oe};k.acceptData=function(H){return H.nodeType===1||H.nodeType===9||!+H.nodeType},c.uid=1,c.accepts=k.acceptData,c.prototype={key:function(H){if(!c.accepts(H))return 0;var te={},le=H[this.expando];if(!le){le=c.uid++;try{te[this.expando]={value:le},Object.defineProperties(H,te)}catch{te[this.expando]=le,k.extend(H,te)}}return this.cache[le]||(this.cache[le]={}),le},set:function(H,te,le){var ve,Ee=this.key(H),Oe=this.cache[Ee];if(typeof te=="string")Oe[te]=le;else if(k.isEmptyObject(Oe))k.extend(this.cache[Ee],te);else for(ve in te)Oe[ve]=te[ve];return Oe},get:function(H,te){var le=this.cache[this.key(H)];return te===void 0?le:le[te]},access:function(H,te,le){var ve;return te===void 0||te&&typeof te=="string"&&le===void 0?(ve=this.get(H,te),ve!==void 0?ve:this.get(H,k.camelCase(te))):(this.set(H,te,le),le!==void 0?le:te)},remove:function(H,te){var le,ve,Ee,Oe=this.key(H),He=this.cache[Oe];if(te===void 0)this.cache[Oe]={};else for(k.isArray(te)?ve=te.concat(te.map(k.camelCase)):(Ee=k.camelCase(te),te in He?ve=[te,Ee]:(ve=Ee,ve=ve in He?[ve]:ve.match(fe)||[])),le=ve.length;le--;)delete He[ve[le]]},hasData:function(H){return!k.isEmptyObject(this.cache[H[this.expando]]||{})},discard:function(H){H[this.expando]&&delete this.cache[H[this.expando]]}};var pe=new c,Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;k.extend({hasData:function(H){return data_user.hasData(H)||pe.hasData(H)},data:function(H,te,le){return data_user.access(H,te,le)},removeData:function(H,te){data_user.remove(H,te)},_data:function(H,te,le){return pe.access(H,te,le)},_removeData:function(H,te){pe.remove(H,te)}}),k.fn.extend({data:function(H,te){var le,ve,Ee,Oe=this[0],He=Oe&&Oe.attributes;if(H===void 0){if(this.length&&(Ee=data_user.get(Oe),Oe.nodeType===1&&!pe.get(Oe,"hasDataAttrs"))){for(le=He.length;le--;)He[le]&&(ve=He[le].name,ve.indexOf("data-")===0&&(ve=k.camelCase(ve.slice(5)),h(Oe,ve,Ee[ve])));pe.set(Oe,"hasDataAttrs",!0)}return Ee}return typeof H=="object"?this.each(function(){data_user.set(this,H)}):De(this,function($e){var rt,ft=k.camelCase(H);if(Oe&&$e===void 0){if(rt=data_user.get(Oe,H),rt!==void 0||(rt=data_user.get(Oe,ft),rt!==void 0)||(rt=h(Oe,ft,void 0),rt!==void 0))return rt}else this.each(function(){var Mt=data_user.get(this,ft);data_user.set(this,ft,$e),H.indexOf("-")!==-1&&Mt!==void 0&&data_user.set(this,H,$e)})},null,te,arguments.length>1,null,!0)},removeData:function(H){return this.each(function(){data_user.remove(this,H)})}});var re="undefined",Re=/^key/,ze=/^(?:mouse|pointer|contextmenu)|click/,K=/^(?:focusinfocus|focusoutblur)$/,ie=/^([^.]*)(?:\.(.+)|)$/;k.event={global:{},add:function(H,te,le,ve,Ee){var Oe,He,$e,rt,ft,Mt,nt,xt,$t,Rn,En,Zr=pe.get(H);if(Zr)for(le.handler&&(Oe=le,le=Oe.handler,Ee=Oe.selector),le.guid||(le.guid=k.guid++),(rt=Zr.events)||(rt=Zr.events={}),(He=Zr.handle)||(He=Zr.handle=function(Bs){return typeof k!==re&&k.event.triggered!==Bs.type?k.event.dispatch.apply(H,arguments):void 0}),te=(te||"").match(fe)||[""],ft=te.length;ft--;)$e=ie.exec(te[ft])||[],$t=En=$e[1],Rn=($e[2]||"").split(".").sort(),$t&&(nt=k.event.special[$t]||{},$t=(Ee?nt.delegateType:nt.bindType)||$t,nt=k.event.special[$t]||{},Mt=k.extend({type:$t,origType:En,data:ve,handler:le,guid:le.guid,selector:Ee,needsContext:Ee&&k.expr.match.needsContext.test(Ee),namespace:Rn.join(".")},Oe),(xt=rt[$t])||(xt=rt[$t]=[],xt.delegateCount=0,nt.setup&&nt.setup.call(H,ve,Rn,He)!==!1||H.addEventListener&&H.addEventListener($t,He,!1)),nt.add&&(nt.add.call(H,Mt),Mt.handler.guid||(Mt.handler.guid=le.guid)),Ee?xt.splice(xt.delegateCount++,0,Mt):xt.push(Mt),k.event.global[$t]=!0)},remove:function(H,te,le,ve,Ee){var Oe,He,$e,rt,ft,Mt,nt,xt,$t,Rn,En,Zr=pe.hasData(H)&&pe.get(H);if(Zr&&(rt=Zr.events)){for(te=(te||"").match(fe)||[""],ft=te.length;ft--;)if($e=ie.exec(te[ft])||[],$t=En=$e[1],Rn=($e[2]||"").split(".").sort(),$t){for(nt=k.event.special[$t]||{},$t=(ve?nt.delegateType:nt.bindType)||$t,xt=rt[$t]||[],$e=$e[2]&&new RegExp("(^|\\.)"+Rn.join("\\.(?:.*\\.|)")+"(\\.|$)"),He=Oe=xt.length;Oe--;)Mt=xt[Oe],!Ee&&En!==Mt.origType||le&&le.guid!==Mt.guid||$e&&!$e.test(Mt.namespace)||ve&&ve!==Mt.selector&&(ve!=="**"||!Mt.selector)||(xt.splice(Oe,1),Mt.selector&&xt.delegateCount--,nt.remove&&nt.remove.call(H,Mt));He&&!xt.length&&(nt.teardown&&nt.teardown.call(H,Rn,Zr.handle)!==!1||k.removeEvent(H,$t,Zr.handle),delete rt[$t])}else for($t in rt)k.event.remove(H,$t+te[ft],le,ve,!0);k.isEmptyObject(rt)&&(delete Zr.handle,pe.remove(H,"events"))}},trigger:function(H,te,le,ve){var Ee,Oe,He,$e,rt,ft,Mt,nt=[le||L],xt=O.call(H,"type")?H.type:H,$t=O.call(H,"namespace")?H.namespace.split("."):[];if(Oe=He=le=le||L,le.nodeType!==3&&le.nodeType!==8&&!K.test(xt+k.event.triggered)&&(xt.indexOf(".")>=0&&($t=xt.split("."),xt=$t.shift(),$t.sort()),rt=xt.indexOf(":")<0&&"on"+xt,H=H[k.expando]?H:new k.Event(xt,typeof H=="object"&&H),H.isTrigger=ve?2:3,H.namespace=$t.join("."),H.namespace_re=H.namespace?new RegExp("(^|\\.)"+$t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,H.result=void 0,H.target||(H.target=le),te=te==null?[H]:k.makeArray(te,[H]),Mt=k.event.special[xt]||{},ve||!Mt.trigger||Mt.trigger.apply(le,te)!==!1)){if(!ve&&!Mt.noBubble&&!k.isWindow(le)){for($e=Mt.delegateType||xt,K.test($e+xt)||(Oe=Oe.parentNode);Oe;Oe=Oe.parentNode)nt.push(Oe),He=Oe;He===(le.ownerDocument||L)&&nt.push(He.defaultView||He.parentWindow||a)}for(Ee=0;(Oe=nt[Ee++])&&!H.isPropagationStopped();)H.type=Ee>1?$e:Mt.bindType||xt,ft=(pe.get(Oe,"events")||{})[H.type]&&pe.get(Oe,"handle"),ft&&ft.apply(Oe,te),ft=rt&&Oe[rt],ft&&ft.apply&&k.acceptData(Oe)&&(H.result=ft.apply(Oe,te),H.result===!1&&H.preventDefault());return H.type=xt,ve||H.isDefaultPrevented()||Mt._default&&Mt._default.apply(nt.pop(),te)!==!1||!k.acceptData(le)||rt&&k.isFunction(le[xt])&&!k.isWindow(le)&&(He=le[rt],He&&(le[rt]=null),k.event.triggered=xt,le[xt](),k.event.triggered=void 0,He&&(le[rt]=He)),H.result}},dispatch:function(H){H=k.event.fix(H);var te,le,ve,Ee,Oe,He=[],$e=S.call(arguments),rt=(pe.get(this,"events")||{})[H.type]||[],ft=k.event.special[H.type]||{};if($e[0]=H,H.delegateTarget=this,!ft.preDispatch||ft.preDispatch.call(this,H)!==!1){for(He=k.event.handlers.call(this,H,rt),te=0;(Ee=He[te++])&&!H.isPropagationStopped();)for(H.currentTarget=Ee.elem,le=0;(Oe=Ee.handlers[le++])&&!H.isImmediatePropagationStopped();)H.namespace_re&&!H.namespace_re.test(Oe.namespace)||(H.handleObj=Oe,H.data=Oe.data,ve=((k.event.special[Oe.origType]||{}).handle||Oe.handler).apply(Ee.elem,$e),ve!==void 0&&(H.result=ve)===!1&&(H.preventDefault(),H.stopPropagation()));return ft.postDispatch&&ft.postDispatch.call(this,H),H.result}},handlers:function(H,te){var le,ve,Ee,Oe,He=[],$e=te.delegateCount,rt=H.target;if($e&&rt.nodeType&&(!H.button||H.type!=="click")){for(;rt!==this;rt=rt.parentNode||this)if(rt.disabled!==!0||H.type!=="click"){for(ve=[],le=0;$e>le;le++)Oe=te[le],Ee=Oe.selector+" ",ve[Ee]===void 0&&(ve[Ee]=Oe.needsContext?k(Ee,this).index(rt)>=0:k.find(Ee,this,null,[rt]).length),ve[Ee]&&ve.push(Oe);ve.length&&He.push({elem:rt,handlers:ve})}}return $e<te.length&&He.push({elem:this,handlers:te.slice($e)}),He},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(H,te){return H.which==null&&(H.which=te.charCode!=null?te.charCode:te.keyCode),H}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(H,te){var le,ve,Ee,Oe=te.button;return H.pageX==null&&te.clientX!=null&&(le=H.target.ownerDocument||L,ve=le.documentElement,Ee=le.body,H.pageX=te.clientX+(ve&&ve.scrollLeft||Ee&&Ee.scrollLeft||0)-(ve&&ve.clientLeft||Ee&&Ee.clientLeft||0),H.pageY=te.clientY+(ve&&ve.scrollTop||Ee&&Ee.scrollTop||0)-(ve&&ve.clientTop||Ee&&Ee.clientTop||0)),H.which||Oe===void 0||(H.which=1&Oe?1:2&Oe?3:4&Oe?2:0),H}},fix:function(H){if(H[k.expando])return H;var te,le,ve,Ee=H.type,Oe=H,He=this.fixHooks[Ee];for(He||(this.fixHooks[Ee]=He=ze.test(Ee)?this.mouseHooks:Re.test(Ee)?this.keyHooks:{}),ve=He.props?this.props.concat(He.props):this.props,H=new k.Event(Oe),te=ve.length;te--;)le=ve[te],H[le]=Oe[le];return H.target||(H.target=L),H.target.nodeType===3&&(H.target=H.target.parentNode),He.filter?He.filter(H,Oe):H},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==p()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return this.type==="checkbox"&&this.click&&k.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(H){return k.nodeName(H.target,"a")}},beforeunload:{postDispatch:function(H){H.result!==void 0&&H.originalEvent&&(H.originalEvent.returnValue=H.result)}}},simulate:function(H,te,le,ve){var Ee=k.extend(new k.Event,le,{type:H,isSimulated:!0,originalEvent:{}});ve?k.event.trigger(Ee,null,te):k.event.dispatch.call(te,Ee),Ee.isDefaultPrevented()&&le.preventDefault()}},k.removeEvent=function(H,te,le){H.removeEventListener&&H.removeEventListener(te,le,!1)},k.Event=function(H,te){return this instanceof k.Event?(H&&H.type?(this.originalEvent=H,this.type=H.type,this.isDefaultPrevented=H.defaultPrevented||H.defaultPrevented===void 0&&H.returnValue===!1?d:f):this.type=H,te&&k.extend(this,te),this.timeStamp=H&&H.timeStamp||k.now(),void(this[k.expando]=!0)):new k.Event(H,te)},k.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var H=this.originalEvent;this.isDefaultPrevented=d,H&&H.preventDefault&&H.preventDefault()},stopPropagation:function(){var H=this.originalEvent;this.isPropagationStopped=d,H&&H.stopPropagation&&H.stopPropagation()},stopImmediatePropagation:function(){var H=this.originalEvent;this.isImmediatePropagationStopped=d,H&&H.stopImmediatePropagation&&H.stopImmediatePropagation(),this.stopPropagation()}},k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(H,te){k.event.special[H]={delegateType:te,bindType:te,handle:function(le){var ve,Ee=this,Oe=le.relatedTarget,He=le.handleObj;return Oe&&(Oe===Ee||k.contains(Ee,Oe))||(le.type=He.origType,ve=He.handler.apply(this,arguments),le.type=te),ve}}}),U.focusinBubbles||k.each({focus:"focusin",blur:"focusout"},function(H,te){var le=function(ve){k.event.simulate(te,ve.target,k.event.fix(ve),!0)};k.event.special[te]={setup:function(){var ve=this.ownerDocument||this,Ee=pe.access(ve,te);Ee||ve.addEventListener(H,le,!0),pe.access(ve,te,(Ee||0)+1)},teardown:function(){var ve=this.ownerDocument||this,Ee=pe.access(ve,te)-1;Ee?pe.access(ve,te,Ee):(ve.removeEventListener(H,le,!0),pe.remove(ve,te))}}}),k.fn.extend({on:function(H,te,le,ve,Ee){var Oe,He;if(typeof H=="object"){typeof te!="string"&&(le=le||te,te=void 0);for(He in H)this.on(He,te,le,H[He],Ee);return this}if(le==null&&ve==null?(ve=te,le=te=void 0):ve==null&&(typeof te=="string"?(ve=le,le=void 0):(ve=le,le=te,te=void 0)),ve===!1)ve=f;else if(!ve)return this;return Ee===1&&(Oe=ve,ve=function($e){return k().off($e),Oe.apply(this,arguments)},ve.guid=Oe.guid||(Oe.guid=k.guid++)),this.each(function(){k.event.add(this,H,ve,le,te)})},one:function(H,te,le,ve){return this.on(H,te,le,ve,1)},off:function(H,te,le){var ve,Ee;if(H&&H.preventDefault&&H.handleObj)return ve=H.handleObj,k(H.delegateTarget).off(ve.namespace?ve.origType+"."+ve.namespace:ve.origType,ve.selector,ve.handler),this;if(typeof H=="object"){for(Ee in H)this.off(Ee,te,H[Ee]);return this}return te!==!1&&typeof te!="function"||(le=te,te=void 0),le===!1&&(le=f),this.each(function(){k.event.remove(this,H,le,te)})},trigger:function(H,te){return this.each(function(){k.event.trigger(H,te,this)})},triggerHandler:function(H,te){var le=this[0];return le?k.event.trigger(H,te,le,!0):void 0}});var _e=k.now(),oe=/\?/;k.parseJSON=function(H){return JSON.parse(H+"")},k.parseXML=function(H){var te,le;if(!H||typeof H!="string")return null;try{le=new DOMParser,te=le.parseFromString(H,"text/xml")}catch{te=void 0}return te&&!te.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+H),te};var G,W,ce=/#.*$/,Ce=/([?&])_=[^&]*/,$=/^(.*?):[ \t]*([^\r\n]*)$/gm,ee=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ge=/^(?:GET|HEAD)$/,xe=/^\/\//,Ne=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Fe={},We={},ke="*/".concat("*");try{W=location.href}catch{W=L.createElement("a"),W.href="",W=W.href}G=Ne.exec(W.toLowerCase())||[],k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:W,type:"GET",isLocal:ee.test(G[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ke,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":k.parseJSON,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(H,te){return te?g(g(H,k.ajaxSettings),te):g(k.ajaxSettings,H)},ajaxPrefilter:v(Fe),ajaxTransport:v(We),ajax:function(H,te){function le(je,Ve,qe,dt){var At,kt,ct,Ot,Ut,Rt=Ve;xi!==2&&(xi=2,$e&&clearTimeout($e),ve=void 0,Oe=dt||"",Ie.readyState=je>0?4:0,At=je>=200&&300>je||je===304,qe&&(Ot=w(nt,Ie,qe)),Ot=b(nt,Ot,Ie,At),At?(nt.ifModified&&(Ut=Ie.getResponseHeader("Last-Modified"),Ut&&(k.lastModified[Ee]=Ut),Ut=Ie.getResponseHeader("etag"),Ut&&(k.etag[Ee]=Ut)),je===204||nt.type==="HEAD"?Rt="nocontent":je===304?Rt="notmodified":(Rt=Ot.state,kt=Ot.data,ct=Ot.error,At=!ct)):(ct=Rt,!je&&Rt||(Rt="error",0>je&&(je=0))),Ie.status=je,Ie.statusText=(Ve||Rt)+"",At?Rn.resolveWith(xt,[kt,Rt,Ie]):Rn.rejectWith(xt,[Ie,Rt,ct]),Ie.statusCode(Zr),Zr=void 0,ft&&$t.trigger(At?"ajaxSuccess":"ajaxError",[Ie,nt,At?kt:ct]),En.fireWith(xt,[Ie,Rt]),ft&&($t.trigger("ajaxComplete",[Ie,nt]),--k.active||k.event.trigger("ajaxStop")))}typeof H=="object"&&(te=H,H=void 0),te=te||{};var ve,Ee,Oe,He,$e,rt,ft,Mt,nt=k.ajaxSetup({},te),xt=nt.context||nt,$t=nt.context&&(xt.nodeType||xt.jquery)?k(xt):k.event,Rn=k.Deferred(),En=k.Callbacks("once memory"),Zr=nt.statusCode||{},Bs={},Iu={},xi=0,de="canceled",Ie={readyState:0,getResponseHeader:function(je){var Ve;if(xi===2){if(!He)for(He={};Ve=$.exec(Oe);)He[Ve[1].toLowerCase()]=Ve[2];Ve=He[je.toLowerCase()]}return Ve??null},getAllResponseHeaders:function(){return xi===2?Oe:null},setRequestHeader:function(je,Ve){var qe=je.toLowerCase();return xi||(je=Iu[qe]=Iu[qe]||je,Bs[je]=Ve),this},overrideMimeType:function(je){return xi||(nt.mimeType=je),this},statusCode:function(je){var Ve;if(je)if(2>xi)for(Ve in je)Zr[Ve]=[Zr[Ve],je[Ve]];else Ie.always(je[Ie.status]);return this},abort:function(je){var Ve=je||de;return ve&&ve.abort(Ve),le(0,Ve),this}};if(Rn.promise(Ie).complete=En.add,Ie.success=Ie.done,Ie.error=Ie.fail,nt.url=((H||nt.url||W)+"").replace(ce,"").replace(xe,G[1]+"//"),nt.type=te.method||te.type||nt.method||nt.type,nt.dataTypes=k.trim(nt.dataType||"*").toLowerCase().match(fe)||[""],nt.crossDomain==null&&(rt=Ne.exec(nt.url.toLowerCase()),nt.crossDomain=!(!rt||rt[1]===G[1]&&rt[2]===G[2]&&(rt[3]||(rt[1]==="http:"?"80":"443"))===(G[3]||(G[1]==="http:"?"80":"443")))),nt.data&&nt.processData&&typeof nt.data!="string"&&(nt.data=k.param(nt.data,nt.traditional)),y(Fe,nt,te,Ie),xi===2)return Ie;ft=nt.global,ft&&k.active++===0&&k.event.trigger("ajaxStart"),nt.type=nt.type.toUpperCase(),nt.hasContent=!ge.test(nt.type),Ee=nt.url,nt.hasContent||(nt.data&&(Ee=nt.url+=(oe.test(Ee)?"&":"?")+nt.data,delete nt.data),nt.cache===!1&&(nt.url=Ce.test(Ee)?Ee.replace(Ce,"$1_="+_e++):Ee+(oe.test(Ee)?"&":"?")+"_="+_e++)),nt.ifModified&&(k.lastModified[Ee]&&Ie.setRequestHeader("If-Modified-Since",k.lastModified[Ee]),k.etag[Ee]&&Ie.setRequestHeader("If-None-Match",k.etag[Ee])),(nt.data&&nt.hasContent&&nt.contentType!==!1||te.contentType)&&Ie.setRequestHeader("Content-Type",nt.contentType),Ie.setRequestHeader("Accept",nt.dataTypes[0]&&nt.accepts[nt.dataTypes[0]]?nt.accepts[nt.dataTypes[0]]+(nt.dataTypes[0]!=="*"?", "+ke+"; q=0.01":""):nt.accepts["*"]);for(Mt in nt.headers)Ie.setRequestHeader(Mt,nt.headers[Mt]);if(nt.beforeSend&&(nt.beforeSend.call(xt,Ie,nt)===!1||xi===2))return Ie.abort();de="abort";for(Mt in{success:1,error:1,complete:1})Ie[Mt](nt[Mt]);if(ve=y(We,nt,te,Ie)){Ie.readyState=1,ft&&$t.trigger("ajaxSend",[Ie,nt]),nt.async&&nt.timeout>0&&($e=setTimeout(function(){Ie.abort("timeout")},nt.timeout));try{xi=1,ve.send(Bs,le)}catch(je){if(!(2>xi))throw je;le(-1,je)}}else le(-1,"No Transport");return Ie},getJSON:function(H,te,le){return k.get(H,te,le,"json")},getScript:function(H,te){return k.get(H,void 0,te,"script")}}),k.each(["get","post"],function(H,te){k[te]=function(le,ve,Ee,Oe){return k.isFunction(ve)&&(Oe=Oe||Ee,Ee=ve,ve=void 0),k.ajax({url:le,type:te,dataType:Oe,data:ve,success:Ee})}}),k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(H,te){k.fn[te]=function(le){return this.on(te,le)}});var it=/%20/g,Je=/\[\]$/,st=/\r?\n/g,we=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;k.param=function(H,te){var le,ve=[],Ee=function(Oe,He){He=k.isFunction(He)?He():He??"",ve[ve.length]=encodeURIComponent(Oe)+"="+encodeURIComponent(He)};if(te===void 0&&(te=k.ajaxSettings&&k.ajaxSettings.traditional),k.isArray(H)||H.jquery&&!k.isPlainObject(H))k.each(H,function(){Ee(this.name,this.value)});else for(le in H)m(le,H[le],te,Ee);return ve.join("&").replace(it,"+")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var H=k.prop(this,"elements");return H?k.makeArray(H):this}).filter(function(){var H=this.type;return this.name&&!k(this).is(":disabled")&&Pe.test(this.nodeName)&&!we.test(H)&&(this.checked||!rcheckableType.test(H))}).map(function(H,te){var le=k(this).val();return le==null?null:k.isArray(le)?k.map(le,function(ve){return{name:te.name,value:ve.replace(st,`\r
`)}}):{name:te.name,value:le.replace(st,`\r
`)}}).get()}}),k.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch{}};var et=0,V={},Me={0:200,1223:204},Le=k.ajaxSettings.xhr();a.ActiveXObject&&k(a).on("unload",function(){for(var H in V)V[H]()}),U.cors=!!Le&&"withCredentials"in Le,U.ajax=Le=!!Le,k.ajaxTransport(function(H){var te;return U.cors||Le&&!H.crossDomain?{send:function(le,ve){var Ee,Oe=H.xhr(),He=++et;if(Oe.open(H.type,H.url,H.async,H.username,H.password),H.xhrFields)for(Ee in H.xhrFields)Oe[Ee]=H.xhrFields[Ee];H.mimeType&&Oe.overrideMimeType&&Oe.overrideMimeType(H.mimeType),H.crossDomain||le["X-Requested-With"]||(le["X-Requested-With"]="XMLHttpRequest");for(Ee in le)Oe.setRequestHeader(Ee,le[Ee]);te=function($e){return function(){te&&(delete V[He],te=Oe.onload=Oe.onerror=null,$e==="abort"?Oe.abort():$e==="error"?ve(Oe.status,Oe.statusText):ve(Me[Oe.status]||Oe.status,Oe.statusText,typeof Oe.responseText=="string"?{text:Oe.responseText}:void 0,Oe.getAllResponseHeaders()))}},Oe.onload=te(),Oe.onerror=te("error"),te=V[He]=te("abort");try{Oe.send(H.hasContent&&H.data||null)}catch($e){if(te)throw $e}},abort:function(){te&&te()}}:void 0}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(H){return k.globalEval(H),H}}}),k.ajaxPrefilter("script",function(H){H.cache===void 0&&(H.cache=!1),H.crossDomain&&(H.type="GET")}),k.ajaxTransport("script",function(H){if(H.crossDomain){var te,le;return{send:function(ve,Ee){te=k("<script>").prop({async:!0,charset:H.scriptCharset,src:H.url}).on("load error",le=function(Oe){te.remove(),le=null,Oe&&Ee(Oe.type==="error"?404:200,Oe.type)}),L.head.appendChild(te[0])},abort:function(){le&&le()}}}});var Ze=[],he=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var H=Ze.pop()||k.expando+"_"+_e++;return this[H]=!0,H}}),k.ajaxPrefilter("json jsonp",function(H,te,le){var ve,Ee,Oe,He=H.jsonp!==!1&&(he.test(H.url)?"url":typeof H.data=="string"&&!(H.contentType||"").indexOf("application/x-www-form-urlencoded")&&he.test(H.data)&&"data");return He||H.dataTypes[0]==="jsonp"?(ve=H.jsonpCallback=k.isFunction(H.jsonpCallback)?H.jsonpCallback():H.jsonpCallback,He?H[He]=H[He].replace(he,"$1"+ve):H.jsonp!==!1&&(H.url+=(oe.test(H.url)?"&":"?")+H.jsonp+"="+ve),H.converters["script json"]=function(){return Oe||k.error(ve+" was not called"),Oe[0]},H.dataTypes[0]="json",Ee=a[ve],a[ve]=function(){Oe=arguments},le.always(function(){a[ve]=Ee,H[ve]&&(H.jsonpCallback=te.jsonpCallback,Ze.push(ve)),Oe&&k.isFunction(Ee)&&Ee(Oe[0]),Oe=Ee=void 0}),"script"):void 0}),k.parseHTML=function(H,te,le){if(!H||typeof H!="string")return null;typeof te=="boolean"&&(le=te,te=!1),te=te||L;var ve=Q.exec(H),Ee=!le&&[];return ve?[te.createElement(ve[1])]:(ve=k.buildFragment([H],te,Ee),Ee&&Ee.length&&k(Ee).remove(),k.merge([],ve.childNodes))};var Xe=k.fn.load;return k.fn.load=function(H,te,le){if(typeof H!="string"&&Xe)return Xe.apply(this,arguments);var ve,Ee,Oe,He=this,$e=H.indexOf(" ");return $e>=0&&(ve=k.trim(H.slice($e)),H=H.slice(0,$e)),k.isFunction(te)?(le=te,te=void 0):te&&typeof te=="object"&&(Ee="POST"),He.length>0&&k.ajax({url:H,type:Ee,dataType:"html",data:te}).done(function(rt){Oe=arguments,He.html(ve?k("<div>").append(k.parseHTML(rt)).find(ve):rt)}).complete(le&&function(rt,ft){He.each(le,Oe||[rt.responseText,ft,rt])}),this},k.noConflict=function(){},k})},{}],12:[function(t,n,i){n.exports=function(a){return{reload:function(){return a.location.reload()},getHash:function(){return a.location.hash},setHash:function(o){return a.location.hash=o},changeHref:function(o){return a.location.href=o}}}},{}],13:[function(t,n,i){var a;a=function(o){var s;return s=localStorage.getItem("oauthio_cache"),s=s?JSON.parse(s):{},o(s,function(){return localStorage.setItem("oauthio_cache",JSON.stringify(s))})},n.exports={init:function(o,s){return this.config=o,this.document=s},active:function(){return typeof localStorage<"u"&&localStorage!==null},create:function(o,s,l){var u;this.erase(o),u=new Date,localStorage.setItem(o,s),a(function(c,h){return c[o]=l?u.getTime()+1e3*(l||1200):!1,h()})},read:function(o){return a(function(s,l){return s[o]==null?null:s[o]===!1?localStorage.getItem(o):new Date().getTime()>s[o]?(localStorage.removeItem(o),delete s[o],l(),null):localStorage.getItem(o)})},erase:function(o){return a(function(s,l){return localStorage.removeItem(o),delete s[o],l()})},eraseFrom:function(o){a(function(s,l){var u,c,h,d;for(u=Object.keys(s),c=0,h=u.length;h>c;c++)d=u[c],d.substr(0,o.length)===o&&(localStorage.removeItem(d),delete s[d]);return l()})}}},{}],14:[function(t,n,i){var a,o;o=0,a="",n.exports={hex_sha1:function(s){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(s)))},b64_sha1:function(s){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(s)))},any_sha1:function(s,l){return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(s)),l)},hex_hmac_sha1:function(s,l){return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(s),this.str2rstr_utf8(l)))},b64_hmac_sha1:function(s,l){return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(s),this.str2rstr_utf8(l)))},any_hmac_sha1:function(s,l,u){return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(s),this.str2rstr_utf8(l)),u)},sha1_vm_test:function(){return thishex_sha1("abc").toLowerCase()==="a9993e364706816aba3e25717850c26c9cd0d89d"},rstr_sha1:function(s){return this.binb2rstr(this.binb_sha1(this.rstr2binb(s),8*s.length))},rstr_hmac_sha1:function(s,l){var u,c,h,d,f;for(u=this.rstr2binb(s),u.length>16&&(u=this.binb_sha1(u,8*s.length)),d=Array(16),f=Array(16),h=0;16>h;)d[h]=909522486^u[h],f[h]=1549556828^u[h],h++;return c=this.binb_sha1(d.concat(this.rstr2binb(l)),512+8*l.length),this.binb2rstr(this.binb_sha1(f.concat(c),672))},rstr2hex:function(s){var l,u,c,h;for(l=o?"0123456789ABCDEF":"0123456789abcdef",c="",h=void 0,u=0;u<s.length;)h=s.charCodeAt(u),c+=l.charAt(h>>>4&15)+l.charAt(15&h),u++;return c},rstr2b64:function(s){var l,u,c,h,d,f;for(d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="",c=s.length,l=0;c>l;){for(f=s.charCodeAt(l)<<16|(c>l+1?s.charCodeAt(l+1)<<8:0)|(c>l+2?s.charCodeAt(l+2):0),u=0;4>u;)h+=8*l+6*u>8*s.length?a:d.charAt(f>>>6*(3-u)&63),u++;l+=3}return h},rstr2any:function(s,l){var u,c,h,d,f,p,v,y,g;for(c=l.length,y=Array(),d=void 0,p=void 0,g=void 0,v=void 0,u=Array(Math.ceil(s.length/2)),d=0;d<u.length;)u[d]=s.charCodeAt(2*d)<<8|s.charCodeAt(2*d+1),d++;for(;u.length>0;){for(v=Array(),g=0,d=0;d<u.length;)g=(g<<16)+u[d],p=Math.floor(g/c),g-=p*c,(v.length>0||p>0)&&(v[v.length]=p),d++;y[y.length]=g,u=v}for(f="",d=y.length-1;d>=0;)f+=l.charAt(y[d]),d--;for(h=Math.ceil(8*s.length/(Math.log(l.length)/Math.log(2))),d=f.length;h>d;)f=l[0]+f,d++;return f},str2rstr_utf8:function(s){var l,u,c,h;for(u="",l=-1,c=void 0,h=void 0;++l<s.length;)c=s.charCodeAt(l),h=l+1<s.length?s.charCodeAt(l+1):0,c>=55296&&56319>=c&&h>=56320&&57343>=h&&(c=65536+((1023&c)<<10)+(1023&h),l++),127>=c?u+=String.fromCharCode(c):2047>=c?u+=String.fromCharCode(192|c>>>6&31,128|63&c):65535>=c?u+=String.fromCharCode(224|c>>>12&15,128|c>>>6&63,128|63&c):2097151>=c&&(u+=String.fromCharCode(240|c>>>18&7,128|c>>>12&63,128|c>>>6&63,128|63&c));return u},str2rstr_utf16le:function(s){var l,u;for(u="",l=0;l<s.length;)u+=String.fromCharCode(255&s.charCodeAt(l),s.charCodeAt(l)>>>8&255),l++;return u},str2rstr_utf16be:function(s){var l,u;for(u="",l=0;l<s.length;)u+=String.fromCharCode(s.charCodeAt(l)>>>8&255,255&s.charCodeAt(l)),l++;return u},rstr2binb:function(s){var l,u;for(u=Array(s.length>>2),l=0;l<u.length;)u[l]=0,l++;for(l=0;l<8*s.length;)u[l>>5]|=(255&s.charCodeAt(l/8))<<24-l%32,l+=8;return u},binb2rstr:function(s){var l,u;for(u="",l=0;l<32*s.length;)u+=String.fromCharCode(s[l>>5]>>>24-l%32&255),l+=8;return u},binb_sha1:function(s,l){var u,c,h,d,f,p,v,y,g,w,b,m,x,S;for(s[l>>5]|=128<<24-l%32,s[(l+64>>9<<4)+15]=l,S=Array(80),u=1732584193,c=-271733879,h=-1732584194,d=271733878,f=-1009589776,p=0;p<s.length;){for(y=u,g=c,w=h,b=d,m=f,v=0;80>v;)16>v?S[v]=s[p+v]:S[v]=this.bit_rol(S[v-3]^S[v-8]^S[v-14]^S[v-16],1),x=this.safe_add(this.safe_add(this.bit_rol(u,5),this.sha1_ft(v,c,h,d)),this.safe_add(this.safe_add(f,S[v]),this.sha1_kt(v))),f=d,d=h,h=this.bit_rol(c,30),c=u,u=x,v++;u=this.safe_add(u,y),c=this.safe_add(c,g),h=this.safe_add(h,w),d=this.safe_add(d,b),f=this.safe_add(f,m),p+=16}return Array(u,c,h,d,f)},sha1_ft:function(s,l,u,c){return 20>s?l&u|~l&c:40>s?l^u^c:60>s?l&u|l&c|u&c:l^u^c},sha1_kt:function(s){return 20>s?1518500249:40>s?1859775393:60>s?-1894007588:-899497514},safe_add:function(s,l){var u,c;return u=(65535&s)+(65535&l),c=(s>>16)+(l>>16)+(u>>16),c<<16|65535&u},bit_rol:function(s,l){return s<<l|s>>>32-l},create_hash:function(){var s;return s=this.b64_sha1(new Date().getTime()+":"+Math.floor(9999999*Math.random())),s.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}}},{}],15:[function(t,n,i){n.exports=function(a){return{getAbsUrl:function(o){var s;return o.match(/^.{2,5}:\/\//)?o:o[0]==="/"?a.location.protocol+"//"+a.location.host+o:(s=a.location.protocol+"//"+a.location.host+a.location.pathname,s[s.length-1]!=="/"&&o[0]!=="#"?s+"/"+o:s+o)},replaceParam:function(o,s,l){return o=o.replace(/\{\{(.*?)\}\}/g,function(u,c){return s[c]||""}),l&&(o=o.replace(/\{(.*?)\}/g,function(u,c){return l[c]||""})),o}}}},{}]},{},[8])(8)})})(JH);var kE=JH.exports;/**
* @remix-run/router v1.16.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function V0(){return V0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},V0.apply(this,arguments)}var mc;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(mc||(mc={}));const mL="popstate";function zne(r){r===void 0&&(r={});function e(n,i){let{pathname:a,search:o,hash:s}=n.location;return wT("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Ww(i)}return jne(e,t,null,r)}function Jn(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ZH(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Une(){return Math.random().toString(36).substr(2,8)}function gL(r,e){return{usr:r.state,key:r.key,idx:e}}function wT(r,e,t,n){return t===void 0&&(t=null),V0({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?pm(e):e,{state:t,key:e&&e.key||n||Une()})}function Ww(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function pm(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function jne(r,e,t,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,s=mc.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(V0({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){s=mc.Pop;let y=c(),g=y==null?null:y-u;u=y,l&&l({action:s,location:v.location,delta:g})}function d(y,g){s=mc.Push;let w=wT(v.location,y,g);u=c()+1;let b=gL(w,u),m=v.createHref(w);try{o.pushState(b,"",m)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(m)}a&&l&&l({action:s,location:v.location,delta:1})}function f(y,g){s=mc.Replace;let w=wT(v.location,y,g);u=c();let b=gL(w,u),m=v.createHref(w);o.replaceState(b,"",m),a&&l&&l({action:s,location:v.location,delta:0})}function p(y){let g=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof y=="string"?y:Ww(y);return w=w.replace(/ $/,"%20"),Jn(g,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,g)}let v={get action(){return s},get location(){return r(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(mL,h),l=y,()=>{i.removeEventListener(mL,h),l=null}},createHref(y){return e(i,y)},createURL:p,encodeLocation(y){let g=p(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:f,go(y){return o.go(y)}};return v}var vL;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(vL||(vL={}));function Hne(r,e,t){t===void 0&&(t="/");let n=typeof e=="string"?pm(e):e,i=aN(n.pathname||"/",t);if(i==null)return null;let a=KH(r);Vne(a);let o=null;for(let s=0;o==null&&s<a.length;++s){let l=tie(i);o=Kne(a[s],l)}return o}function KH(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(Jn(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=Nc([n,l.relativePath]),c=t.concat(l);a.children&&a.children.length>0&&(Jn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),KH(a.children,e,c,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:Jne(u,a.index),routesMeta:c})};return r.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of QH(a.path))i(a,o,l)}),e}function QH(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=QH(n.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>r.startsWith("/")&&l===""?"/":l)}function Vne(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Zne(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const qne=/^:[\w-]+$/,Wne=3,Gne=2,$ne=1,Xne=10,Yne=-2,yL=r=>r==="*";function Jne(r,e){let t=r.split("/"),n=t.length;return t.some(yL)&&(n+=Yne),e&&(n+=Gne),t.filter(i=>!yL(i)).reduce((i,a)=>i+(qne.test(a)?Wne:a===""?$ne:Xne),n)}function Zne(r,e){return r.length===e.length&&r.slice(0,-1).every((t,n)=>t===e[n])?r[r.length-1]-e[e.length-1]:0}function Kne(r,e){let{routesMeta:t}=r,n={},i="/",a=[];for(let o=0;o<t.length;++o){let s=t[o],l=o===t.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=Qne({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(n,c.params);let h=s.route;a.push({params:n,pathname:Nc([i,c.pathname]),pathnameBase:aie(Nc([i,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(i=Nc([i,c.pathnameBase]))}return a}function Qne(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=eie(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((l,u,c)=>{let{paramName:h,isOptional:d}=u;if(h==="*"){let p=s[c]||"";o=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const f=s[c];return d&&!f?l[h]=void 0:l[h]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:a,pathnameBase:o,pattern:r}}function eie(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),ZH(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,s)=>(n.push({paramName:o,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function tie(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ZH(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function aN(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function rie(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?pm(r):r;return{pathname:t?t.startsWith("/")?t:nie(t,e):e,search:oie(n),hash:sie(i)}}function nie(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function NE(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iie(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function eV(r,e){let t=iie(r);return e?t.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function tV(r,e,t,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=pm(r):(i=V0({},r),Jn(!i.pathname||!i.pathname.includes("?"),NE("?","pathname","search",i)),Jn(!i.pathname||!i.pathname.includes("#"),NE("#","pathname","hash",i)),Jn(!i.search||!i.search.includes("#"),NE("#","search","hash",i)));let a=r===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=t;else{let h=e.length-1;if(!n&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}s=h>=0?e[h]:"/"}let l=rie(i,s),u=o&&o!=="/"&&o.endsWith("/"),c=(a||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Nc=r=>r.join("/").replace(/\/\/+/g,"/"),aie=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),oie=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,sie=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function lie(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const rV=["post","put","patch","delete"];new Set(rV);const uie=["get",...rV];new Set(uie);/**
* React Router v6.23.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function q0(){return q0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},q0.apply(this,arguments)}const oN=j.createContext(null),cie=j.createContext(null),Pd=j.createContext(null),DM=j.createContext(null),nh=j.createContext({outlet:null,matches:[],isDataRoute:!1}),nV=j.createContext(null);function hie(r,e){let{relative:t}=e===void 0?{}:e;Jv()||Jn(!1);let{basename:n,navigator:i}=j.useContext(Pd),{hash:a,pathname:o,search:s}=oV(r,{relative:t}),l=o;return n!=="/"&&(l=o==="/"?n:Nc([n,o])),i.createHref({pathname:l,search:s,hash:a})}function Jv(){return j.useContext(DM)!=null}function kM(){return Jv()||Jn(!1),j.useContext(DM).location}function iV(r){j.useContext(Pd).static||j.useLayoutEffect(r)}function mm(){let{isDataRoute:r}=j.useContext(nh);return r?_ie():die()}function die(){Jv()||Jn(!1);let r=j.useContext(oN),{basename:e,future:t,navigator:n}=j.useContext(Pd),{matches:i}=j.useContext(nh),{pathname:a}=kM(),o=JSON.stringify(eV(i,t.v7_relativeSplatPath)),s=j.useRef(!1);return iV(()=>{s.current=!0}),j.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){n.go(l);return}let c=tV(l,JSON.parse(o),a,u.relative==="path");r==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Nc([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,o,a,r])}function aV(){let{matches:r}=j.useContext(nh),e=r[r.length-1];return e?e.params:{}}function oV(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=j.useContext(Pd),{matches:i}=j.useContext(nh),{pathname:a}=kM(),o=JSON.stringify(eV(i,n.v7_relativeSplatPath));return j.useMemo(()=>tV(r,JSON.parse(o),a,t==="path"),[r,o,a,t])}function fie(r,e){return pie(r,e)}function pie(r,e,t,n){Jv()||Jn(!1);let{navigator:i}=j.useContext(Pd),{matches:a}=j.useContext(nh),o=a[a.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=kM(),c;if(e){var h;let y=typeof e=="string"?pm(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||Jn(!1),c=y}else c=u;let d=c.pathname||"/",f=d;if(l!=="/"){let y=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=Hne(r,{pathname:f}),v=bie(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},s,y.params),pathname:Nc([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Nc([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,t,n);return e&&v?j.createElement(DM.Provider,{value:{location:q0({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:mc.Pop}},v):v}function mie(){let r=Mie(),e=lie(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:n},t):null,null)}const gie=j.createElement(mie,null);class vie extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(nh.Provider,{value:this.props.routeContext},j.createElement(nV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yie(r){let{routeContext:e,match:t,children:n}=r,i=j.useContext(oN);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(nh.Provider,{value:e},n)}function bie(r,e,t,n){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var a;if((a=t)!=null&&a.errors)r=t.matches;else return null}let o=r,s=(i=t)==null?void 0:i.errors;if(s!=null){let c=o.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);c>=0||Jn(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(t&&n&&n.v7_partialHydration)for(let c=0;c<o.length;c++){let h=o[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:d,errors:f}=t,p=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,h,d)=>{let f,p=!1,v=null,y=null;t&&(f=s&&h.route.id?s[h.route.id]:void 0,v=h.route.errorElement||gie,l&&(u<0&&d===0?(p=!0,y=null):u===d&&(p=!0,y=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,d+1)),w=()=>{let b;return f?b=v:p?b=y:h.route.Component?b=j.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=c,j.createElement(yie,{match:h,routeContext:{outlet:c,matches:g,isDataRoute:t!=null},children:b})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?j.createElement(vie,{location:t.location,revalidation:t.revalidation,component:v,error:f,children:w(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):w()},null)}var sV=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(sV||{}),Gw=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Gw||{});function xie(r){let e=j.useContext(oN);return e||Jn(!1),e}function wie(r){let e=j.useContext(cie);return e||Jn(!1),e}function Sie(r){let e=j.useContext(nh);return e||Jn(!1),e}function lV(r){let e=Sie(),t=e.matches[e.matches.length-1];return t.route.id||Jn(!1),t.route.id}function Mie(){var r;let e=j.useContext(nV),t=wie(Gw.UseRouteError),n=lV(Gw.UseRouteError);return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function _ie(){let{router:r}=xie(sV.UseNavigateStable),e=lV(Gw.UseNavigateStable),t=j.useRef(!1);return iV(()=>{t.current=!0}),j.useCallback(function(n,i){i===void 0&&(i={}),t.current&&(typeof n=="number"?r.navigate(n):r.navigate(n,q0({fromRouteId:e},i)))},[r,e])}function Wx(r){Jn(!1)}function Eie(r){let{basename:e="/",children:t=null,location:n,navigationType:i=mc.Pop,navigator:a,static:o=!1,future:s}=r;Jv()&&Jn(!1);let l=e.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:a,static:o,future:q0({v7_relativeSplatPath:!1},s)}),[l,s,a,o]);typeof n=="string"&&(n=pm(n));let{pathname:c="/",search:h="",hash:d="",state:f=null,key:p="default"}=n,v=j.useMemo(()=>{let y=aN(c,l);return y==null?null:{location:{pathname:y,search:h,hash:d,state:f,key:p},navigationType:i}},[l,c,h,d,f,p,i]);return v==null?null:j.createElement(Pd.Provider,{value:u},j.createElement(DM.Provider,{children:t,value:v}))}function Cie(r){let{children:e,location:t}=r;return fie(ST(e),t)}new Promise(()=>{});function ST(r,e){e===void 0&&(e=[]);let t=[];return j.Children.forEach(r,(n,i)=>{if(!j.isValidElement(n))return;let a=[...e,i];if(n.type===j.Fragment){t.push.apply(t,ST(n.props.children,a));return}n.type!==Wx&&Jn(!1),!n.props.index||!n.props.children||Jn(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=ST(n.props.children,a)),t.push(o)}),t}/**
* React Router DOM v6.23.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function MT(){return MT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},MT.apply(this,arguments)}function Aie(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function Tie(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Die(r,e){return r.button===0&&(!e||e==="_self")&&!Tie(r)}const kie=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Nie="6";try{window.__reactRouterVersion=Nie}catch{}const Oie="startTransition",bL=xw[Oie];function Rie(r){let{basename:e,children:t,future:n,window:i}=r,a=j.useRef();a.current==null&&(a.current=zne({window:i,v5Compat:!0}));let o=a.current,[s,l]=j.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},c=j.useCallback(h=>{u&&bL?bL(()=>l(h)):l(h)},[l,u]);return j.useLayoutEffect(()=>o.listen(c),[o,c]),j.createElement(Eie,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:o,future:n})}const Pie=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Iie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$w=j.forwardRef(function(r,e){let{onClick:t,relative:n,reloadDocument:i,replace:a,state:o,target:s,to:l,preventScrollReset:u,unstable_viewTransition:c}=r,h=Aie(r,kie),{basename:d}=j.useContext(Pd),f,p=!1;if(typeof l=="string"&&Iie.test(l)&&(f=l,Pie))try{let w=new URL(window.location.href),b=l.startsWith("//")?new URL(w.protocol+l):new URL(l),m=aN(b.pathname,d);b.origin===w.origin&&m!=null?l=m+b.search+b.hash:p=!0}catch{}let v=hie(l,{relative:n}),y=Lie(l,{replace:a,state:o,target:s,preventScrollReset:u,relative:n,unstable_viewTransition:c});function g(w){t&&t(w),w.defaultPrevented||y(w)}return j.createElement("a",MT({},h,{href:f||v,onClick:p||i?t:g,ref:e,target:s}))});var xL;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(xL||(xL={}));var wL;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(wL||(wL={}));function Lie(r,e){let{target:t,replace:n,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:s}=e===void 0?{}:e,l=mm(),u=kM(),c=oV(r,{relative:o});return j.useCallback(h=>{if(Die(h,t)){h.preventDefault();let d=n!==void 0?n:Ww(u)===Ww(c);l(r,{replace:d,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:s})}},[u,l,c,n,i,t,r,a,o,s])}/**
* @license
* Copyright 2019 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const uV=Symbol("Comlink.proxy"),Fie=Symbol("Comlink.endpoint"),Bie=Symbol("Comlink.releaseProxy"),OE=Symbol("Comlink.finalizer"),Gx=Symbol("Comlink.thrown"),cV=r=>typeof r=="object"&&r!==null||typeof r=="function",zie={canHandle:r=>cV(r)&&r[uV],serialize(r){const{port1:e,port2:t}=new MessageChannel;return dV(r,e),[t,[t]]},deserialize(r){return r.start(),pV(r)}},Uie={canHandle:r=>cV(r)&&Gx in r,serialize({value:r}){let e;return r instanceof Error?e={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:e={isError:!1,value:r},[e,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},hV=new Map([["proxy",zie],["throw",Uie]]);function jie(r,e){for(const t of r)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function dV(r,e=globalThis,t=["*"]){e.addEventListener("message",function n(i){if(!i||!i.data)return;if(!jie(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:a,type:o,path:s}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(Bh);let u;try{const c=s.slice(0,-1).reduce((d,f)=>d[f],r),h=s.reduce((d,f)=>d[f],r);switch(o){case"GET":u=h;break;case"SET":c[s.slice(-1)[0]]=Bh(i.data.value),u=!0;break;case"APPLY":u=h.apply(c,l);break;case"CONSTRUCT":{const d=new h(...l);u=$ie(d)}break;case"ENDPOINT":{const{port1:d,port2:f}=new MessageChannel;dV(r,f),u=Gie(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[Gx]:0}}Promise.resolve(u).catch(c=>({value:c,[Gx]:0})).then(c=>{const[h,d]=Jw(c);e.postMessage(Object.assign(Object.assign({},h),{id:a}),d),o==="RELEASE"&&(e.removeEventListener("message",n),fV(e),OE in r&&typeof r[OE]=="function"&&r[OE]())}).catch(c=>{const[h,d]=Jw({value:new TypeError("Unserializable return value"),[Gx]:0});e.postMessage(Object.assign(Object.assign({},h),{id:a}),d)})}),e.start&&e.start()}function Hie(r){return r.constructor.name==="MessagePort"}function fV(r){Hie(r)&&r.close()}function pV(r,e){return _T(r,[],e)}function j1(r){if(r)throw new Error("Proxy has been released and is not useable")}function mV(r){return Hf(r,{type:"RELEASE"}).then(()=>{fV(r)})}const Xw=new WeakMap,Yw="FinalizationRegistry"in globalThis&&new FinalizationRegistry(r=>{const e=(Xw.get(r)||0)-1;Xw.set(r,e),e===0&&mV(r)});function Vie(r,e){const t=(Xw.get(e)||0)+1;Xw.set(e,t),Yw&&Yw.register(r,e,r)}function qie(r){Yw&&Yw.unregister(r)}function _T(r,e=[],t=function(){}){let n=!1;const i=new Proxy(t,{get(a,o){if(j1(n),o===Bie)return()=>{qie(i),mV(r),n=!0};if(o==="then"){if(e.length===0)return{then:()=>i};const s=Hf(r,{type:"GET",path:e.map(l=>l.toString())}).then(Bh);return s.then.bind(s)}return _T(r,[...e,o])},set(a,o,s){j1(n);const[l,u]=Jw(s);return Hf(r,{type:"SET",path:[...e,o].map(c=>c.toString()),value:l},u).then(Bh)},apply(a,o,s){j1(n);const l=e[e.length-1];if(l===Fie)return Hf(r,{type:"ENDPOINT"}).then(Bh);if(l==="bind")return _T(r,e.slice(0,-1));const[u,c]=SL(s);return Hf(r,{type:"APPLY",path:e.map(h=>h.toString()),argumentList:u},c).then(Bh)},construct(a,o){j1(n);const[s,l]=SL(o);return Hf(r,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:s},l).then(Bh)}});return Vie(i,r),i}function Wie(r){return Array.prototype.concat.apply([],r)}function SL(r){const e=r.map(Jw);return[e.map(t=>t[0]),Wie(e.map(t=>t[1]))]}const gV=new WeakMap;function Gie(r,e){return gV.set(r,e),r}function $ie(r){return Object.assign(r,{[uV]:!0})}function Jw(r){for(const[e,t]of hV)if(t.canHandle(r)){const[n,i]=t.serialize(r);return[{type:"HANDLER",name:e,value:n},i]}return[{type:"RAW",value:r},gV.get(r)||[]]}function Bh(r){switch(r.type){case"HANDLER":return hV.get(r.name).deserialize(r.value);case"RAW":return r.value}}function Hf(r,e,t){return new Promise(n=>{const i=Xie();r.addEventListener("message",function a(o){!o.data||!o.data.id||o.data.id!==i||(r.removeEventListener("message",a),n(o.data))}),r.start&&r.start(),r.postMessage(Object.assign({id:i},e),t)})}function Xie(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function lt(){return lt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},lt.apply(null,arguments)}var vV={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function tr(r){return typeof r=="number"}function Kt(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function _s(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function Id(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function ja(r){return r&&r.constructor.prototype.isUnit===!0||!1}function Ci(r){return typeof r=="string"}var Sr=Array.isArray;function Ft(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function _o(r){return Array.isArray(r)||Ft(r)}function W0(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function gc(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function NM(r){return r&&r.constructor.prototype.isRange===!0||!1}function Zv(r){return r&&r.constructor.prototype.isIndex===!0||!1}function yV(r){return typeof r=="boolean"}function bV(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function sN(r){return r&&r.constructor.prototype.isHelp===!0||!1}function xV(r){return typeof r=="function"}function wV(r){return r instanceof Date}function SV(r){return r instanceof RegExp}function Kv(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!_s(r)&&!Id(r))}function MV(r){return r===null}function _V(r){return r===void 0}function Uc(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function co(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function EV(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function CV(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function AV(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function mr(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function ET(r){return mr(r)||Fn(r)&&r.args.length===1&&mr(r.args[0])&&"-+~".includes(r.op)}function gm(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function yu(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ld(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function Rr(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function Qv(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function Fn(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function bl(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function TV(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function DV(r){return r&&r.isRelationalNode===!0&&r.constructor.prototype.isNode===!0||!1}function ai(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function lN(r){return r&&r.constructor.prototype.isChain===!0||!1}function Br(r){var e=typeof r;return e==="object"?r===null?"null":Kt(r)?"BigNumber":r.constructor&&r.constructor.name?r.constructor.name:"Object":e}function Gt(r){var e=typeof r;if(e==="number"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return Gt(t)});if(r instanceof Date)return new Date(r.valueOf());if(Kt(r))return r;if(Kv(r))return Wg(r,Gt);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(r,")"))}function Wg(r,e){var t={};for(var n in r)gt(r,n)&&(t[n]=e(r[n]));return t}function kV(r,e){for(var t in e)gt(e,t)&&(r[t]=e[t]);return r}function NV(r,e){if(Array.isArray(e))throw new TypeError("Arrays are not supported by deepExtend");for(var t in e)if(gt(e,t)&&!(t in Object.prototype)&&!(t in Function.prototype))if(e[t]&&e[t].constructor===Object)r[t]===void 0&&(r[t]={}),r[t]&&r[t].constructor===Object?NV(r[t],e[t]):r[t]=e[t];else{if(Array.isArray(e[t]))throw new TypeError("Arrays are not supported by deepExtend");r[t]=e[t]}return r}function bd(r,e){var t,n,i;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,i=r.length;n<i;n++)if(!bd(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!bd(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function Yie(r){var e={};return OV(r,e),e}function OV(r,e){for(var t in r)if(gt(r,t)){var n=r[t];typeof n=="object"&&n!==null?OV(n,e):e[t]=n}}function $x(r,e,t){var n=!0,i;Object.defineProperty(r,e,{get:function(){return n&&(i=t(),n=!1),i},set:function(a){i=a,n=!1},configurable:!0,enumerable:!0})}function gt(r,e){return r&&Object.hasOwnProperty.call(r,e)}function Jie(r){return r&&typeof r.factory=="function"}function Zie(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],a=r[i];a!==void 0&&(t[i]=a)}return t}var ML=["Matrix","Array"],_L=["number","BigNumber","Fraction"];function Kie(r,e){function t(n){if(n){var i=Wg(r,Gt);EL(n,"matrix",ML),EL(n,"number",_L),NV(r,n);var a=Wg(r,Gt),o=Wg(n,Gt);return e("config",a,i,o),a}else return Wg(r,Gt)}return t.MATRIX_OPTIONS=ML,t.NUMBER_OPTIONS=_L,Object.keys(vV).forEach(n=>{Object.defineProperty(t,n,{get:()=>r[n],enumerable:!0,configurable:!0})}),t}function EL(r,e,t){r[e]!==void 0&&!t.includes(r[e])&&console.warn('Warning: Unknown value "'+r[e]+'" for configuration option "'+e+'". Available options: '+t.map(n=>JSON.stringify(n)).join(", ")+".")}function CL(){return!0}function Fo(){return!1}function of(){}const AL="Argument is not a typed-function.";function RV(){function r($){return typeof $=="object"&&$!==null&&$.constructor===Object}const e=[{name:"number",test:function($){return typeof $=="number"}},{name:"string",test:function($){return typeof $=="string"}},{name:"boolean",test:function($){return typeof $=="boolean"}},{name:"Function",test:function($){return typeof $=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function($){return $ instanceof Date}},{name:"RegExp",test:function($){return $ instanceof RegExp}},{name:"Object",test:r},{name:"null",test:function($){return $===null}},{name:"undefined",test:function($){return $===void 0}}],t={name:"any",test:CL,isAny:!0};let n,i,a=0,o={createCount:0};function s($){const ee=n.get($);if(ee)return ee;let ge='Unknown type "'+$+'"';const xe=$.toLowerCase();let Ne;for(Ne of i)if(Ne.toLowerCase()===xe){ge+='. Did you mean "'+Ne+'" ?';break}throw new TypeError(ge)}function l($){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const ge=ee?s(ee).index:i.length,xe=[];for(let Fe=0;Fe<$.length;++Fe){if(!$[Fe]||typeof $[Fe].name!="string"||typeof $[Fe].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const We=$[Fe].name;if(n.has(We))throw new TypeError('Duplicate type name "'+We+'"');xe.push(We),n.set(We,{name:We,test:$[Fe].test,isAny:$[Fe].isAny,index:ge+Fe,conversionsTo:[]})}const Ne=i.slice(ge);i=i.slice(0,ge).concat(xe).concat(Ne);for(let Fe=ge+xe.length;Fe<i.length;++Fe)n.get(i[Fe]).index=Fe}function u(){n=new Map,i=[],a=0,l([t],!1)}u(),l(e);function c(){let $;for($ of i)n.get($).conversionsTo=[];a=0}function h($){const ee=i.filter(ge=>{const xe=n.get(ge);return!xe.isAny&&xe.test($)});return ee.length?ee:["any"]}function d($){return $&&typeof $=="function"&&"_typedFunctionData"in $}function f($,ee,ge){if(!d($))throw new TypeError(AL);const xe=ge&&ge.exact,Ne=Array.isArray(ee)?ee.join(","):ee,Fe=m(Ne),We=y(Fe);if(!xe||We in $.signatures){const st=$._typedFunctionData.signatureMap.get(We);if(st)return st}const ke=Fe.length;let it;if(xe){it=[];let st;for(st in $.signatures)it.push($._typedFunctionData.signatureMap.get(st))}else it=$._typedFunctionData.signatures;for(let st=0;st<ke;++st){const we=Fe[st],Pe=[];let et;for(et of it){const V=A(et.params,st);if(!(!V||we.restParam&&!V.restParam)){if(!V.hasAny){const Me=b(V);if(we.types.some(Le=>!Me.has(Le.name)))continue}Pe.push(et)}}if(it=Pe,it.length===0)break}let Je;for(Je of it)if(Je.params.length<=ke)return Je;throw new TypeError("Signature not found (signature: "+($.name||"unnamed")+"("+y(Fe,", ")+"))")}function p($,ee,ge){return f($,ee,ge).implementation}function v($,ee){const ge=s(ee);if(ge.test($))return $;const xe=ge.conversionsTo;if(xe.length===0)throw new Error("There are no conversions to "+ee+" defined.");for(let Ne=0;Ne<xe.length;Ne++)if(s(xe[Ne].from).test($))return xe[Ne].convert($);throw new Error("Cannot convert "+$+" to "+ee)}function y($){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return $.map(ge=>ge.name).join(ee)}function g($){const ee=$.indexOf("...")===0,ge=(ee?$.length>3?$.slice(3):"any":$).split("|").map(Fe=>s(Fe.trim()));let xe=!1,Ne=ee?"...":"";return{types:ge.map(function(Fe){return xe=Fe.isAny||xe,Ne+=Fe.name+"|",{name:Fe.name,typeIndex:Fe.index,test:Fe.test,isAny:Fe.isAny,conversion:null,conversionIndex:-1}}),name:Ne.slice(0,-1),hasAny:xe,hasConversion:!1,restParam:ee}}function w($){const ee=$.types.map(We=>We.name),ge=R(ee);let xe=$.hasAny,Ne=$.name;const Fe=ge.map(function(We){const ke=s(We.from);return xe=ke.isAny||xe,Ne+="|"+We.from,{name:We.from,typeIndex:ke.index,test:ke.test,isAny:ke.isAny,conversion:We,conversionIndex:We.index}});return{types:$.types.concat(Fe),name:Ne,hasAny:xe,hasConversion:Fe.length>0,restParam:$.restParam}}function b($){return $.typeSet||($.typeSet=new Set,$.types.forEach(ee=>$.typeSet.add(ee.name))),$.typeSet}function m($){const ee=[];if(typeof $!="string")throw new TypeError("Signatures must be strings");const ge=$.trim();if(ge==="")return ee;const xe=ge.split(",");for(let Ne=0;Ne<xe.length;++Ne){const Fe=g(xe[Ne].trim());if(Fe.restParam&&Ne!==xe.length-1)throw new SyntaxError('Unexpected rest parameter "'+xe[Ne]+'": only allowed for the last parameter');if(Fe.types.length===0)return null;ee.push(Fe)}return ee}function x($){const ee=pe($);return ee?ee.restParam:!1}function S($){if(!$||$.types.length===0)return CL;if($.types.length===1)return s($.types[0].name).test;if($.types.length===2){const ee=s($.types[0].name).test,ge=s($.types[1].name).test;return function(xe){return ee(xe)||ge(xe)}}else{const ee=$.types.map(function(ge){return s(ge.name).test});return function(ge){for(let xe=0;xe<ee.length;xe++)if(ee[xe](ge))return!0;return!1}}}function E($){let ee,ge,xe;if(x($)){ee=De($).map(S);const Ne=ee.length,Fe=S(pe($)),We=function(ke){for(let it=Ne;it<ke.length;it++)if(!Fe(ke[it]))return!1;return!0};return function(ke){for(let it=0;it<ee.length;it++)if(!ee[it](ke[it]))return!1;return We(ke)&&ke.length>=Ne+1}}else return $.length===0?function(Ne){return Ne.length===0}:$.length===1?(ge=S($[0]),function(Ne){return ge(Ne[0])&&Ne.length===1}):$.length===2?(ge=S($[0]),xe=S($[1]),function(Ne){return ge(Ne[0])&&xe(Ne[1])&&Ne.length===2}):(ee=$.map(S),function(Ne){for(let Fe=0;Fe<ee.length;Fe++)if(!ee[Fe](Ne[Fe]))return!1;return Ne.length===ee.length})}function A($,ee){return ee<$.length?$[ee]:x($)?pe($):null}function T($,ee){const ge=A($,ee);return ge?b(ge):new Set}function C($){return $.conversion===null||$.conversion===void 0}function D($,ee){const ge=new Set;return $.forEach(xe=>{const Ne=T(xe.params,ee);let Fe;for(Fe of Ne)ge.add(Fe)}),ge.has("any")?["any"]:Array.from(ge)}function O($,ee,ge){let xe,Ne;const Fe=$||"unnamed";let We=ge,ke;for(ke=0;ke<ee.length;ke++){const we=[];if(We.forEach(Pe=>{const et=A(Pe.params,ke),V=S(et);(ke<Pe.params.length||x(Pe.params))&&V(ee[ke])&&we.push(Pe)}),we.length===0){if(Ne=D(We,ke),Ne.length>0){const Pe=h(ee[ke]);return xe=new TypeError("Unexpected type of argument in function "+Fe+" (expected: "+Ne.join(" or ")+", actual: "+Pe.join(" | ")+", index: "+ke+")"),xe.data={category:"wrongType",fn:Fe,index:ke,actual:Pe,expected:Ne},xe}}else We=we}const it=We.map(function(we){return x(we.params)?1/0:we.params.length});if(ee.length<Math.min.apply(null,it))return Ne=D(We,ke),xe=new TypeError("Too few arguments in function "+Fe+" (expected: "+Ne.join(" or ")+", index: "+ee.length+")"),xe.data={category:"tooFewArgs",fn:Fe,index:ee.length,expected:Ne},xe;const Je=Math.max.apply(null,it);if(ee.length>Je)return xe=new TypeError("Too many arguments in function "+Fe+" (expected: "+Je+", actual: "+ee.length+")"),xe.data={category:"tooManyArgs",fn:Fe,index:ee.length,expectedLength:Je},xe;const st=[];for(let we=0;we<ee.length;++we)st.push(h(ee[we]).join("|"));return xe=new TypeError('Arguments of type "'+st.join(", ")+'" do not match any of the defined signatures of function '+Fe+"."),xe.data={category:"mismatch",actual:st},xe}function U($){let ee=i.length+1;for(let ge=0;ge<$.types.length;ge++)C($.types[ge])&&(ee=Math.min(ee,$.types[ge].typeIndex));return ee}function L($){let ee=a+1;for(let ge=0;ge<$.types.length;ge++)C($.types[ge])||(ee=Math.min(ee,$.types[ge].conversionIndex));return ee}function F($,ee){if($.hasAny){if(!ee.hasAny)return 1}else if(ee.hasAny)return-1;if($.restParam){if(!ee.restParam)return 1}else if(ee.restParam)return-1;if($.hasConversion){if(!ee.hasConversion)return 1}else if(ee.hasConversion)return-1;const ge=U($)-U(ee);if(ge<0)return-1;if(ge>0)return 1;const xe=L($)-L(ee);return xe<0?-1:xe>0?1:0}function k($,ee){const ge=$.params,xe=ee.params,Ne=pe(ge),Fe=pe(xe),We=x(ge),ke=x(xe);if(We&&Ne.hasAny){if(!ke||!Fe.hasAny)return 1}else if(ke&&Fe.hasAny)return-1;let it=0,Je=0,st;for(st of ge)st.hasAny&&++it,st.hasConversion&&++Je;let we=0,Pe=0;for(st of xe)st.hasAny&&++we,st.hasConversion&&++Pe;if(it!==we)return it-we;if(We&&Ne.hasConversion){if(!ke||!Fe.hasConversion)return 1}else if(ke&&Fe.hasConversion)return-1;if(Je!==Pe)return Je-Pe;if(We){if(!ke)return 1}else if(ke)return-1;const et=(ge.length-xe.length)*(We?-1:1);if(et!==0)return et;const V=[];let Me=0;for(let Ze=0;Ze<ge.length;++Ze){const he=F(ge[Ze],xe[Ze]);V.push(he),Me+=he}if(Me!==0)return Me;let Le;for(Le of V)if(Le!==0)return Le;return 0}function R($){if($.length===0)return[];const ee=$.map(s);$.length>1&&ee.sort((Ne,Fe)=>Ne.index-Fe.index);let ge=ee[0].conversionsTo;if($.length===1)return ge;ge=ge.concat([]);const xe=new Set($);for(let Ne=1;Ne<ee.length;++Ne){let Fe;for(Fe of ee[Ne].conversionsTo)xe.has(Fe.from)||(ge.push(Fe),xe.add(Fe.from))}return ge}function z($,ee){let ge=ee;if($.some(Ne=>Ne.hasConversion)){const Ne=x($),Fe=$.map(B);ge=function(){const We=[],ke=Ne?arguments.length-1:arguments.length;for(let it=0;it<ke;it++)We[it]=Fe[it](arguments[it]);return Ne&&(We[ke]=arguments[ke].map(Fe[ke])),ee.apply(this,We)}}let xe=ge;if(x($)){const Ne=$.length-1;xe=function(){return ge.apply(this,Te(arguments,0,Ne).concat([Te(arguments,Ne)]))}}return xe}function B($){let ee,ge,xe,Ne;const Fe=[],We=[];switch($.types.forEach(function(ke){ke.conversion&&(Fe.push(s(ke.conversion.from).test),We.push(ke.conversion.convert))}),We.length){case 0:return function(ke){return ke};case 1:return ee=Fe[0],xe=We[0],function(ke){return ee(ke)?xe(ke):ke};case 2:return ee=Fe[0],ge=Fe[1],xe=We[0],Ne=We[1],function(ke){return ee(ke)?xe(ke):ge(ke)?Ne(ke):ke};default:return function(ke){for(let it=0;it<We.length;it++)if(Fe[it](ke))return We[it](ke);return ke}}}function X($){function ee(ge,xe,Ne){if(xe<ge.length){const Fe=ge[xe];let We=[];if(Fe.restParam){const ke=Fe.types.filter(C);ke.length<Fe.types.length&&We.push({types:ke,name:"..."+ke.map(it=>it.name).join("|"),hasAny:ke.some(it=>it.isAny),hasConversion:!1,restParam:!0}),We.push(Fe)}else We=Fe.types.map(function(ke){return{types:[ke],name:ke.name,hasAny:ke.isAny,hasConversion:ke.conversion,restParam:!1}});return re(We,function(ke){return ee(ge,xe+1,Ne.concat([ke]))})}else return[Ne]}return ee($,0,[])}function Z($,ee){const ge=Math.max($.length,ee.length);for(let ke=0;ke<ge;ke++){const it=T($,ke),Je=T(ee,ke);let st=!1,we;for(we of Je)if(it.has(we)){st=!0;break}if(!st)return!1}const xe=$.length,Ne=ee.length,Fe=x($),We=x(ee);return Fe?We?xe===Ne:Ne>=xe:We?xe>=Ne:xe===Ne}function Q($){return $.map(ee=>_e(ee)?K(ee.referToSelf.callback):ie(ee)?ze(ee.referTo.references,ee.referTo.callback):ee)}function J($,ee,ge){const xe=[];let Ne;for(Ne of $){let Fe=ge[Ne];if(typeof Fe!="number")throw new TypeError('No definition for referenced signature "'+Ne+'"');if(Fe=ee[Fe],typeof Fe!="function")return!1;xe.push(Fe)}return xe}function ne($,ee,ge){const xe=Q($),Ne=new Array(xe.length).fill(!1);let Fe=!0;for(;Fe;){Fe=!1;let We=!0;for(let ke=0;ke<xe.length;++ke){if(Ne[ke])continue;const it=xe[ke];if(_e(it))xe[ke]=it.referToSelf.callback(ge),xe[ke].referToSelf=it.referToSelf,Ne[ke]=!0,We=!1;else if(ie(it)){const Je=J(it.referTo.references,xe,ee);Je?(xe[ke]=it.referTo.callback.apply(this,Je),xe[ke].referTo=it.referTo,Ne[ke]=!0,We=!1):Fe=!0}}if(We&&Fe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return xe}function fe($){const ee=/\bthis(\(|\.signatures\b)/;Object.keys($).forEach(ge=>{const xe=$[ge];if(ee.test(xe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function se($,ee){if(o.createCount++,Object.keys(ee).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&fe(ee);const ge=[],xe=[],Ne={},Fe=[];let We;for(We in ee){if(!Object.prototype.hasOwnProperty.call(ee,We))continue;const ct=m(We);if(!ct)continue;ge.forEach(function(Kr){if(Z(Kr,ct))throw new TypeError('Conflicting signatures "'+y(Kr)+'" and "'+y(ct)+'".')}),ge.push(ct);const Ot=xe.length;xe.push(ee[We]);const Ut=ct.map(w);let Rt;for(Rt of X(Ut)){const Kr=y(Rt);Fe.push({params:Rt,name:Kr,fn:Ot}),Rt.every(qr=>!qr.hasConversion)&&(Ne[Kr]=Ot)}}Fe.sort(k);const ke=ne(xe,Ne,kt);let it;for(it in Ne)Object.prototype.hasOwnProperty.call(Ne,it)&&(Ne[it]=ke[Ne[it]]);const Je=[],st=new Map;for(it of Fe)st.has(it.name)||(it.fn=ke[it.fn],Je.push(it),st.set(it.name,it));const we=Je[0]&&Je[0].params.length<=2&&!x(Je[0].params),Pe=Je[1]&&Je[1].params.length<=2&&!x(Je[1].params),et=Je[2]&&Je[2].params.length<=2&&!x(Je[2].params),V=Je[3]&&Je[3].params.length<=2&&!x(Je[3].params),Me=Je[4]&&Je[4].params.length<=2&&!x(Je[4].params),Le=Je[5]&&Je[5].params.length<=2&&!x(Je[5].params),Ze=we&&Pe&&et&&V&&Me&&Le;for(let ct=0;ct<Je.length;++ct)Je[ct].test=E(Je[ct].params);const he=we?S(Je[0].params[0]):Fo,Xe=Pe?S(Je[1].params[0]):Fo,H=et?S(Je[2].params[0]):Fo,te=V?S(Je[3].params[0]):Fo,le=Me?S(Je[4].params[0]):Fo,ve=Le?S(Je[5].params[0]):Fo,Ee=we?S(Je[0].params[1]):Fo,Oe=Pe?S(Je[1].params[1]):Fo,He=et?S(Je[2].params[1]):Fo,$e=V?S(Je[3].params[1]):Fo,rt=Me?S(Je[4].params[1]):Fo,ft=Le?S(Je[5].params[1]):Fo;for(let ct=0;ct<Je.length;++ct)Je[ct].implementation=z(Je[ct].params,Je[ct].fn);const Mt=we?Je[0].implementation:of,nt=Pe?Je[1].implementation:of,xt=et?Je[2].implementation:of,$t=V?Je[3].implementation:of,Rn=Me?Je[4].implementation:of,En=Le?Je[5].implementation:of,Zr=we?Je[0].params.length:-1,Bs=Pe?Je[1].params.length:-1,Iu=et?Je[2].params.length:-1,xi=V?Je[3].params.length:-1,de=Me?Je[4].params.length:-1,Ie=Le?Je[5].params.length:-1,je=Ze?6:0,Ve=Je.length,qe=Je.map(ct=>ct.test),dt=Je.map(ct=>ct.implementation),At=function(){for(let ct=je;ct<Ve;ct++)if(qe[ct](arguments))return dt[ct].apply(this,arguments);return o.onMismatch($,arguments,Je)};function kt(ct,Ot){return arguments.length===Zr&&he(ct)&&Ee(Ot)?Mt.apply(this,arguments):arguments.length===Bs&&Xe(ct)&&Oe(Ot)?nt.apply(this,arguments):arguments.length===Iu&&H(ct)&&He(Ot)?xt.apply(this,arguments):arguments.length===xi&&te(ct)&&$e(Ot)?$t.apply(this,arguments):arguments.length===de&&le(ct)&&rt(Ot)?Rn.apply(this,arguments):arguments.length===Ie&&ve(ct)&&ft(Ot)?En.apply(this,arguments):At.apply(this,arguments)}try{Object.defineProperty(kt,"name",{value:$})}catch{}return kt.signatures=Ne,kt._typedFunctionData={signatures:Je,signatureMap:st},kt}function ye($,ee,ge){throw O($,ee,ge)}function De($){return Te($,0,$.length-1)}function pe($){return $[$.length-1]}function Te($,ee,ge){return Array.prototype.slice.call($,ee,ge)}function be($,ee){for(let ge=0;ge<$.length;ge++)if(ee($[ge]))return $[ge]}function re($,ee){return Array.prototype.concat.apply([],$.map(ee))}function Re(){const $=De(arguments).map(ge=>y(m(ge))),ee=pe(arguments);if(typeof ee!="function")throw new TypeError("Callback function expected as last argument");return ze($,ee)}function ze($,ee){return{referTo:{references:$,callback:ee}}}function K($){if(typeof $!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:$}}}function ie($){return $&&typeof $.referTo=="object"&&Array.isArray($.referTo.references)&&typeof $.referTo.callback=="function"}function _e($){return $&&typeof $.referToSelf=="object"&&typeof $.referToSelf.callback=="function"}function oe($,ee){if(!$)return ee;if(ee&&ee!==$){const ge=new Error("Function names do not match (expected: "+$+", actual: "+ee+")");throw ge.data={actual:ee,expected:$},ge}return $}function G($){let ee;for(const ge in $)Object.prototype.hasOwnProperty.call($,ge)&&(d($[ge])||typeof $[ge].signature=="string")&&(ee=oe(ee,$[ge].name));return ee}function W($,ee){let ge;for(ge in ee)if(Object.prototype.hasOwnProperty.call(ee,ge)){if(ge in $&&ee[ge]!==$[ge]){const xe=new Error('Signature "'+ge+'" is defined twice');throw xe.data={signature:ge,sourceFunction:ee[ge],destFunction:$[ge]},xe}$[ge]=ee[ge]}}const ce=o;o=function($){const ee=typeof $=="string",ge=ee?1:0;let xe=ee?$:"";const Ne={};for(let Fe=ge;Fe<arguments.length;++Fe){const We=arguments[Fe];let ke={},it;if(typeof We=="function"?(it=We.name,typeof We.signature=="string"?ke[We.signature]=We:d(We)&&(ke=We.signatures)):r(We)&&(ke=We,ee||(it=G(We))),Object.keys(ke).length===0){const Je=new TypeError("Argument to 'typed' at index "+Fe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Je.data={index:Fe,argument:We},Je}ee||(xe=oe(xe,it)),W(Ne,ke)}return se(xe||"",Ne)},o.create=RV,o.createCount=ce.createCount,o.onMismatch=ye,o.throwMismatchError=ye,o.createError=O,o.clear=u,o.clearConversions=c,o.addTypes=l,o._findType=s,o.referTo=Re,o.referToSelf=K,o.convert=v,o.findSignature=f,o.find=p,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function($,ee){let ge="any";ee!==!1&&n.has("Object")&&(ge="Object"),o.addTypes([$],ge)};function Ce($){if(!$||typeof $.from!="string"||typeof $.to!="string"||typeof $.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if($.to===$.from)throw new SyntaxError('Illegal to define conversion from "'+$.from+'" to itself.')}return o.addConversion=function($){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Ce($);const ge=s($.to),xe=ge.conversionsTo.find(Ne=>Ne.from===$.from);if(xe)if(ee&&ee.override)o.removeConversion({from:xe.from,to:$.to,convert:xe.convert});else throw new Error('There is already a conversion from "'+$.from+'" to "'+ge.name+'"');ge.conversionsTo.push({from:$.from,convert:$.convert,index:a++})},o.addConversions=function($,ee){$.forEach(ge=>o.addConversion(ge,ee))},o.removeConversion=function($){Ce($);const ee=s($.to),ge=be(ee.conversionsTo,Ne=>Ne.from===$.from);if(!ge)throw new Error("Attempt to remove nonexistent conversion from "+$.from+" to "+$.to);if(ge.convert!==$.convert)throw new Error("Conversion to remove does not match existing conversion");const xe=ee.conversionsTo.indexOf(ge);ee.conversionsTo.splice(xe,1)},o.resolve=function($,ee){if(!d($))throw new TypeError(AL);const ge=$._typedFunctionData.signatures;for(let xe=0;xe<ge.length;++xe)if(ge[xe].test(ee))return ge[xe];return null},o}const Xh=RV();function Nt(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}var vc=Math.sign||function(r){return r>0?1:r<0?-1:0},Qie=Math.log2||function(r){return Math.log(r)/Math.LN2},eae=Math.log10||function(r){return Math.log(r)/Math.LN10},tae=Math.log1p||function(r){return Math.log(r+1)},rae=Math.cbrt||function(r){if(r===0)return r;var e=r<0,t;return e&&(r=-r),isFinite(r)?(t=Math.exp(Math.log(r)/3),t=(r/(t*t)+2*t)/3):t=r,e?-t:t},nae=Math.expm1||function(r){return r>=2e-4||r<=-2e-4?Math.exp(r)-1:r+r*r/2+r*r*r/6};function RE(r,e,t){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Nt(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!Nt(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),a="i".concat(t)}var o="";return r<0&&(r=-r,o="-"),"".concat(o).concat(i).concat(r.toString(e)).concat(a)}function id(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var{notation:t,precision:n,wordSize:i}=PV(e);switch(t){case"fixed":return IV(r,n);case"exponential":return LV(r,n);case"engineering":return iae(r,n);case"bin":return RE(r,2,i);case"oct":return RE(r,8,i);case"hex":return RE(r,16,i);case"auto":return aae(r,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function PV(r){var e="auto",t,n;if(r!==void 0)if(tr(r))t=r;else if(Kt(r))t=r.toNumber();else if(Kv(r))r.precision!==void 0&&(t=TL(r.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),r.wordSize!==void 0&&(n=TL(r.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),r.notation&&(e=r.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:n}}function ey(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:t,coefficients:o,exponent:i}}function iae(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=ey(r),n=OM(t,e),i=n.exponent,a=n.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(tr(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),l=0;l<s;l++)a.push(0);for(var u=Math.abs(i-o),c=1;u>0;)c++,u--;var h=a.slice(c).join(""),d=tr(e)&&h.length||h.match(/[1-9]/)?"."+h:"",f=a.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return n.sign+f}function IV(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=ey(r),n=typeof e=="number"?OM(t,t.exponent+1+e):t,i=n.coefficients,a=n.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(Sp(o-i.length))),a<0&&(i=Sp(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function LV(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=ey(r),n=e?OM(t,e):t,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(Sp(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function aae(r,e,t){if(isNaN(r)||!isFinite(r))return String(r);var n=DL(t==null?void 0:t.lowerExp,-3),i=DL(t==null?void 0:t.upperExp,5),a=ey(r),o=e?OM(a,e):a;if(o.exponent<n||o.exponent>=i)return LV(r,e);var s=o.coefficients,l=o.exponent;s.length<e&&(s=s.concat(Sp(e-s.length))),s=s.concat(Sp(l-s.length+1+(s.length<e?e-s.length:0))),s=Sp(-l).concat(s);var u=l>0?l:0;return u<s.length-1&&s.splice(u+1,0,"."),o.sign+s.join("")}function OM(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),t.exponent++,a++),a--,n[a]++}}return t}function Sp(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function oae(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var sae=Number.EPSILON||2220446049250313e-31;function Ta(r,e,t){if(t==null)return r===e;if(r===e)return!0;if(isNaN(r)||isNaN(e))return!1;if(isFinite(r)&&isFinite(e)){var n=Math.abs(r-e);return n<=sae?!0:n<=Math.max(Math.abs(r),Math.abs(e))*t}return!1}var lae=Math.acosh||function(r){return Math.log(Math.sqrt(r*r-1)+r)},uae=Math.asinh||function(r){return Math.log(Math.sqrt(r*r+1)+r)},cae=Math.atanh||function(r){return Math.log((1+r)/(1-r))/2},hae=Math.cosh||function(r){return(Math.exp(r)+Math.exp(-r))/2},dae=Math.sinh||function(r){return(Math.exp(r)-Math.exp(-r))/2},fae=Math.tanh||function(r){var e=Math.exp(2*r);return(e-1)/(e+1)};function pae(r,e){var t=!0,n=e>0?!0:e<0?!1:1/e===1/0;return t^n?-r:r}function TL(r,e){if(tr(r))return r;if(Kt(r))return r.toNumber();e()}function DL(r,e){return tr(r)?r:Kt(r)?r.toNumber():e}function ae(r,e,t,n){function i(a){var o=Zie(a,e.map(FV));return mae(r,e,a),t(o)}return i.isFactory=!0,i.fn=r,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function d0(r){return typeof r=="function"&&typeof r.fn=="string"&&Array.isArray(r.dependencies)}function mae(r,e,t){var n=e.filter(a=>!gae(a)).every(a=>t[a]!==void 0);if(!n){var i=e.filter(a=>t[a]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function gae(r){return r&&r[0]==="?"}function FV(r){return r&&r[0]==="?"?r.slice(1):r}function Ma(r,e){if(zV(r)&&BV(r,e))return r[e];throw typeof r[e]=="function"&&uN(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Vp(r,e,t){if(zV(r)&&BV(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function vae(r,e){return e in r}function BV(r,e){return!r||typeof r!="object"?!1:gt(bae,e)?!0:!(e in Object.prototype||e in Function.prototype)}function yae(r,e){if(!uN(r,e))throw new Error('No access to method "'+e+'"');return r[e]}function uN(r,e){return r==null||typeof r[e]!="function"||gt(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:gt(xae,e)?!0:!(e in Object.prototype||e in Function.prototype)}function zV(r){return typeof r=="object"&&r&&r.constructor===Object}var bae={length:!0,name:!0},xae={toString:!0,valueOf:!0,toLocaleString:!0};class RM{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(e){return Ma(this.wrappedObject,e)}set(e,t){return Vp(this.wrappedObject,e,t),this}has(e){return vae(this.wrappedObject,e)}entries(){return jV(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class UV{constructor(e,t,n){this.a=e,this.b=t,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return jV(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function jV(r,e){return{next:()=>{var t=r.next();return t.done?t:{value:e(t.value),done:!1}}}}function G0(){return new Map}function Mp(r){if(!r)return G0();if(HV(r))return r;if(Kv(r))return new RM(r);throw new Error("createMap can create maps from objects or Maps")}function wae(r){if(r instanceof RM)return r.wrappedObject;var e={};for(var t of r.keys()){var n=r.get(t);Vp(e,t,n)}return e}function HV(r){return r?r instanceof Map||r instanceof RM||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}var VV=function(){return VV=Xh.create,Xh},Sae=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Mae=ae("typed",Sae,function(r){var{BigNumber:e,Complex:t,DenseMatrix:n,Fraction:i}=r,a=VV();return a.clear(),a.addTypes([{name:"number",test:tr},{name:"Complex",test:_s},{name:"BigNumber",test:Kt},{name:"Fraction",test:Id},{name:"Unit",test:ja},{name:"identifier",test:o=>Ci&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:Ci},{name:"Chain",test:lN},{name:"Array",test:Sr},{name:"Matrix",test:Ft},{name:"DenseMatrix",test:W0},{name:"SparseMatrix",test:gc},{name:"Range",test:NM},{name:"Index",test:Zv},{name:"boolean",test:yV},{name:"ResultSet",test:bV},{name:"Help",test:sN},{name:"function",test:xV},{name:"Date",test:wV},{name:"RegExp",test:SV},{name:"null",test:MV},{name:"undefined",test:_V},{name:"AccessorNode",test:Uc},{name:"ArrayNode",test:co},{name:"AssignmentNode",test:EV},{name:"BlockNode",test:CV},{name:"ConditionalNode",test:AV},{name:"ConstantNode",test:mr},{name:"FunctionNode",test:yu},{name:"FunctionAssignmentNode",test:gm},{name:"IndexNode",test:Ld},{name:"Node",test:Rr},{name:"ObjectNode",test:Qv},{name:"OperatorNode",test:Fn},{name:"ParenthesisNode",test:bl},{name:"RangeNode",test:TV},{name:"RelationalNode",test:DV},{name:"SymbolNode",test:ai},{name:"Map",test:HV},{name:"Object",test:Kv}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(o){if(e||PE(o),oae(o)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+o+"). Use function bignumber(x) to convert to BigNumber.");return new e(o)}},{from:"number",to:"Complex",convert:function(o){return t||H1(o),new t(o,0)}},{from:"BigNumber",to:"Complex",convert:function(o){return t||H1(o),new t(o.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(o){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(o){return t||H1(o),new t(o.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(o){i||IE(o);var s=new i(o);if(s.valueOf()!==o)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+o+"). Use function fraction(x) to convert to Fraction.");return s}},{from:"string",to:"number",convert:function(o){var s=Number(o);if(isNaN(s))throw new Error('Cannot convert "'+o+'" to a number');return s}},{from:"string",to:"BigNumber",convert:function(o){e||PE(o);try{return new e(o)}catch{throw new Error('Cannot convert "'+o+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(o){i||IE(o);try{return new i(o)}catch{throw new Error('Cannot convert "'+o+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(o){t||H1(o);try{return new t(o)}catch{throw new Error('Cannot convert "'+o+'" to Complex')}}},{from:"boolean",to:"number",convert:function(o){return+o}},{from:"boolean",to:"BigNumber",convert:function(o){return e||PE(o),new e(+o)}},{from:"boolean",to:"Fraction",convert:function(o){return i||IE(o),new i(+o)}},{from:"boolean",to:"string",convert:function(o){return String(o)}},{from:"Array",to:"Matrix",convert:function(o){return n||_ae(),new n(o)}},{from:"Matrix",to:"Array",convert:function(o){return o.valueOf()}}]),a.onMismatch=(o,s,l)=>{var u=a.createError(o,s,l);if(["wrongType","mismatch"].includes(u.data.category)&&s.length===1&&_o(s[0])&&l.some(h=>!h.params.includes(","))){var c=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw c.data=u.data,c}throw u},a.onMismatch=(o,s,l)=>{var u=a.createError(o,s,l);if(["wrongType","mismatch"].includes(u.data.category)&&s.length===1&&_o(s[0])&&l.some(h=>!h.params.includes(","))){var c=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw c.data=u.data,c}throw u},a});function PE(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function H1(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function _ae(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function IE(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}var Eae="ResultSet",Cae=[],Aae=ae(Eae,Cae,()=>{function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return r.prototype.type="ResultSet",r.prototype.isResultSet=!0,r.prototype.valueOf=function(){return this.entries},r.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},r.fromJSON=function(e){return new r(e.entries)},r},{isClass:!0});/*!
*  decimal.js v10.4.3
*  An arbitrary-precision Decimal type for JavaScript.
*  https://github.com/MikeMcl/decimal.js
*  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
*  MIT Licence
*/var ap=9e15,ih=1e9,CT="0123456789abcdef",Zw="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Kw="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",AT={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ap,maxE:ap,crypto:!1},qV,ru,Qt=!0,PM="[DecimalError] ",jc=PM+"Invalid argument: ",WV=PM+"Precision limit exceeded",GV=PM+"crypto unavailable",$V="[object Decimal]",ra=Math.floor,ti=Math.pow,Tae=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Dae=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,kae=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,XV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Es=1e7,Wt=7,Nae=9007199254740991,Oae=Zw.length-1,TT=Kw.length-1,ot={toStringTag:$V};ot.absoluteValue=ot.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),Lt(r)};ot.ceil=function(){return Lt(new this.constructor(this),this.e+1,2)};ot.clampedTo=ot.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(jc+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};ot.comparedTo=ot.cmp=function(r){var e,t,n,i,a=this,o=a.d,s=(r=new a.constructor(r)).d,l=a.s,u=r.s;if(!o||!s)return!l||!u?NaN:l!==u?l:o===s?0:!o^l<0?1:-1;if(!o[0]||!s[0])return o[0]?l:s[0]?-u:0;if(l!==u)return l;if(a.e!==r.e)return a.e>r.e^l<0?1:-1;for(n=o.length,i=s.length,e=0,t=n<i?n:i;e<t;++e)if(o[e]!==s[e])return o[e]>s[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};ot.cosine=ot.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Wt,n.rounding=1,t=Rae(n,QV(n,t)),n.precision=r,n.rounding=e,Lt(ru==2||ru==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};ot.cubeRoot=ot.cbrt=function(){var r,e,t,n,i,a,o,s,l,u,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(Qt=!1,a=c.s*ti(c.s*c,1/3),!a||Math.abs(a)==1/0?(t=Ni(c.d),r=c.e,(a=(r-t.length+1)%3)&&(t+=a==1||a==-2?"0":"00"),a=ti(t,1/3),r=ra((r+1)/3)-(r%3==(r<0?-1:2)),a==1/0?t="5e"+r:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new h(t),n.s=c.s):n=new h(a.toString()),o=(r=h.precision)+3;;)if(s=n,l=s.times(s).times(s),u=l.plus(c),n=Jr(u.plus(c).times(s),u.plus(l),o+2,1),Ni(s.d).slice(0,o)===(t=Ni(n.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!i&&t=="4999"){if(!i&&(Lt(s,r+1,0),s.times(s).times(s).eq(c))){n=s;break}o+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Lt(n,r+1,1),e=!n.times(n).times(n).eq(c));break}return Qt=!0,Lt(n,r,h.rounding,e)};ot.decimalPlaces=ot.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-ra(this.e/Wt))*Wt,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};ot.dividedBy=ot.div=function(r){return Jr(this,new this.constructor(r))};ot.dividedToIntegerBy=ot.divToInt=function(r){var e=this,t=e.constructor;return Lt(Jr(e,new t(r),0,1,1),t.precision,t.rounding)};ot.equals=ot.eq=function(r){return this.cmp(r)===0};ot.floor=function(){return Lt(new this.constructor(this),this.e+1,3)};ot.greaterThan=ot.gt=function(r){return this.cmp(r)>0};ot.greaterThanOrEqualTo=ot.gte=function(r){var e=this.cmp(r);return e==1||e===0};ot.hyperbolicCosine=ot.cosh=function(){var r,e,t,n,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;t=o.precision,n=o.rounding,o.precision=t+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(r=Math.ceil(i/3),e=(1/LM(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),a=qp(o,1,a.times(e),new o(1),!0);for(var l,u=r,c=new o(8);u--;)l=a.times(a),a=s.minus(l.times(c.minus(l.times(c))));return Lt(a,o.precision=t,o.rounding=n,!0)};ot.hyperbolicSine=ot.sinh=function(){var r,e,t,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,t=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=qp(a,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/LM(5,r)),i=qp(a,2,i,i,!0);for(var o,s=new a(5),l=new a(16),u=new a(20);r--;)o=i.times(i),i=i.times(s.plus(o.times(l.times(o).plus(u))))}return a.precision=e,a.rounding=t,Lt(i,e,t,!0)};ot.hyperbolicTangent=ot.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,Jr(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};ot.inverseCosine=ot.acos=function(){var r,e=this,t=e.constructor,n=e.abs().cmp(1),i=t.precision,a=t.rounding;return n!==-1?n===0?e.isNeg()?ws(t,i,a):new t(0):new t(NaN):e.isZero()?ws(t,i+4,a).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),r=ws(t,i+4,a).times(.5),t.precision=i,t.rounding=a,r.minus(e))};ot.inverseHyperbolicCosine=ot.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,Qt=!1,t=t.times(t).minus(1).sqrt().plus(t),Qt=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};ot.inverseHyperbolicSine=ot.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,Qt=!1,t=t.times(t).plus(1).sqrt().plus(t),Qt=!0,n.precision=r,n.rounding=e,t.ln())};ot.inverseHyperbolicTangent=ot.atanh=function(){var r,e,t,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=a.precision,e=a.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?Lt(new a(i),r,e,!0):(a.precision=t=n-i.e,i=Jr(i.plus(1),new a(1).minus(i),t+r,1),a.precision=r+4,a.rounding=1,i=i.ln(),a.precision=r,a.rounding=e,i.times(.5))):new a(NaN)};ot.inverseSine=ot.asin=function(){var r,e,t,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),t=a.precision,n=a.rounding,e!==-1?e===0?(r=ws(a,t+4,n).times(.5),r.s=i.s,r):new a(NaN):(a.precision=t+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=t,a.rounding=n,i.times(2)))};ot.inverseTangent=ot.atan=function(){var r,e,t,n,i,a,o,s,l,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&h+4<=TT)return o=ws(c,h+4,d).times(.25),o.s=u.s,o}else{if(!u.s)return new c(NaN);if(h+4<=TT)return o=ws(c,h+4,d).times(.5),o.s=u.s,o}for(c.precision=s=h+10,c.rounding=1,t=Math.min(28,s/Wt+2|0),r=t;r;--r)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Qt=!1,e=Math.ceil(s/Wt),n=1,l=u.times(u),o=new c(u),i=u;r!==-1;)if(i=i.times(l),a=o.minus(i.div(n+=2)),i=i.times(l),o=a.plus(i.div(n+=2)),o.d[e]!==void 0)for(r=e;o.d[r]===a.d[r]&&r--;);return t&&(o=o.times(2<<t-1)),Qt=!0,Lt(o,c.precision=h,c.rounding=d,!0)};ot.isFinite=function(){return!!this.d};ot.isInteger=ot.isInt=function(){return!!this.d&&ra(this.e/Wt)>this.d.length-2};ot.isNaN=function(){return!this.s};ot.isNegative=ot.isNeg=function(){return this.s<0};ot.isPositive=ot.isPos=function(){return this.s>0};ot.isZero=function(){return!!this.d&&this.d[0]===0};ot.lessThan=ot.lt=function(r){return this.cmp(r)<0};ot.lessThanOrEqualTo=ot.lte=function(r){return this.cmp(r)<1};ot.logarithm=ot.log=function(r){var e,t,n,i,a,o,s,l,u=this,c=u.constructor,h=c.precision,d=c.rounding,f=5;if(r==null)r=new c(10),e=!0;else{if(r=new c(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new c(NaN);e=r.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new c(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)a=!0;else{for(i=t[0];i%10===0;)i/=10;a=i!==1}if(Qt=!1,s=h+f,o=yc(u,s),n=e?Qw(c,s+10):yc(r,s),l=Jr(o,n,s,1),$0(l.d,i=h,d))do if(s+=10,o=yc(u,s),n=e?Qw(c,s+10):yc(r,s),l=Jr(o,n,s,1),!a){+Ni(l.d).slice(i+1,i+15)+1==1e14&&(l=Lt(l,h+1,0));break}while($0(l.d,i+=10,d));return Qt=!0,Lt(l,h,d)};ot.minus=ot.sub=function(r){var e,t,n,i,a,o,s,l,u,c,h,d,f=this,p=f.constructor;if(r=new p(r),!f.d||!r.d)return!f.s||!r.s?r=new p(NaN):f.d?r.s=-r.s:r=new p(r.d||f.s!==r.s?f:NaN),r;if(f.s!=r.s)return r.s=-r.s,f.plus(r);if(u=f.d,d=r.d,s=p.precision,l=p.rounding,!u[0]||!d[0]){if(d[0])r.s=-r.s;else if(u[0])r=new p(f);else return new p(l===3?-0:0);return Qt?Lt(r,s,l):r}if(t=ra(r.e/Wt),c=ra(f.e/Wt),u=u.slice(),a=c-t,a){for(h=a<0,h?(e=u,a=-a,o=d.length):(e=d,t=c,o=u.length),n=Math.max(Math.ceil(s/Wt),o)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=u.length,o=d.length,h=n<o,h&&(o=n),n=0;n<o;n++)if(u[n]!=d[n]){h=u[n]<d[n];break}a=0}for(h&&(e=u,u=d,d=e,r.s=-r.s),o=u.length,n=d.length-o;n>0;--n)u[o++]=0;for(n=d.length;n>a;){if(u[--n]<d[n]){for(i=n;i&&u[--i]===0;)u[i]=Es-1;--u[i],u[n]+=Es}u[n]-=d[n]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(r.d=u,r.e=IM(u,t),Qt?Lt(r,s,l):r):new p(l===3?-0:0)};ot.modulo=ot.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?Lt(new n(t),n.precision,n.rounding):(Qt=!1,n.modulo==9?(e=Jr(t,r.abs(),0,3,1),e.s*=r.s):e=Jr(t,r,0,n.modulo,1),e=e.times(r),Qt=!0,t.minus(e))};ot.naturalExponential=ot.exp=function(){return DT(this)};ot.naturalLogarithm=ot.ln=function(){return yc(this)};ot.negated=ot.neg=function(){var r=new this.constructor(this);return r.s=-r.s,Lt(r)};ot.plus=ot.add=function(r){var e,t,n,i,a,o,s,l,u,c,h=this,d=h.constructor;if(r=new d(r),!h.d||!r.d)return!h.s||!r.s?r=new d(NaN):h.d||(r=new d(r.d||h.s===r.s?h:NaN)),r;if(h.s!=r.s)return r.s=-r.s,h.minus(r);if(u=h.d,c=r.d,s=d.precision,l=d.rounding,!u[0]||!c[0])return c[0]||(r=new d(h)),Qt?Lt(r,s,l):r;if(a=ra(h.e/Wt),n=ra(r.e/Wt),u=u.slice(),i=a-n,i){for(i<0?(t=u,i=-i,o=c.length):(t=c,n=a,o=u.length),a=Math.ceil(s/Wt),o=a>o?a+1:o+1,i>o&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(o=u.length,i=c.length,o-i<0&&(i=o,t=c,c=u,u=t),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/Es|0,u[i]%=Es;for(e&&(u.unshift(e),++n),o=u.length;u[--o]==0;)u.pop();return r.d=u,r.e=IM(u,n),Qt?Lt(r,s,l):r};ot.precision=ot.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(jc+r);return t.d?(e=YV(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};ot.round=function(){var r=this,e=r.constructor;return Lt(new e(r),r.e+1,e.rounding)};ot.sine=ot.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Wt,n.rounding=1,t=Iae(n,QV(n,t)),n.precision=r,n.rounding=e,Lt(ru>2?t.neg():t,r,e,!0)):new n(NaN)};ot.squareRoot=ot.sqrt=function(){var r,e,t,n,i,a,o=this,s=o.d,l=o.e,u=o.s,c=o.constructor;if(u!==1||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?o:1/0);for(Qt=!1,u=Math.sqrt(+o),u==0||u==1/0?(e=Ni(s),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=ra((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(u.toString()),t=(l=c.precision)+3;;)if(a=n,n=a.plus(Jr(o,a,t+2,1)).times(.5),Ni(a.d).slice(0,t)===(e=Ni(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Lt(a,l+1,0),a.times(a).eq(o))){n=a;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Lt(n,l+1,1),r=!n.times(n).eq(o));break}return Qt=!0,Lt(n,l,c.rounding,r)};ot.tangent=ot.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=Jr(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,Lt(ru==2||ru==4?t.neg():t,r,e,!0)):new n(NaN)};ot.times=ot.mul=function(r){var e,t,n,i,a,o,s,l,u,c=this,h=c.constructor,d=c.d,f=(r=new h(r)).d;if(r.s*=c.s,!d||!d[0]||!f||!f[0])return new h(!r.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:!d||!f?r.s/0:r.s*0);for(t=ra(c.e/Wt)+ra(r.e/Wt),l=d.length,u=f.length,l<u&&(a=d,d=f,f=a,o=l,l=u,u=o),a=[],o=l+u,n=o;n--;)a.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)s=a[i]+f[n]*d[i-n-1]+e,a[i--]=s%Es|0,e=s/Es|0;a[i]=(a[i]+e)%Es|0}for(;!a[--o];)a.pop();return e?++t:a.shift(),r.d=a,r.e=IM(a,t),Qt?Lt(r,h.precision,h.rounding):r};ot.toBinary=function(r,e){return cN(this,2,r,e)};ot.toDecimalPlaces=ot.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(Za(r,0,ih),e===void 0?e=n.rounding:Za(e,0,8),Lt(t,r+t.e+1,e))};ot.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=xl(n,!0):(Za(r,0,ih),e===void 0?e=i.rounding:Za(e,0,8),n=Lt(new i(n),r+1,e),t=xl(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};ot.toFixed=function(r,e){var t,n,i=this,a=i.constructor;return r===void 0?t=xl(i):(Za(r,0,ih),e===void 0?e=a.rounding:Za(e,0,8),n=Lt(new a(i),r+i.e+1,e),t=xl(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};ot.toFraction=function(r){var e,t,n,i,a,o,s,l,u,c,h,d,f=this,p=f.d,v=f.constructor;if(!p)return new v(f);if(u=t=new v(1),n=l=new v(0),e=new v(n),a=e.e=YV(p)-f.e-1,o=a%Wt,e.d[0]=ti(10,o<0?Wt+o:o),r==null)r=a>0?e:u;else{if(s=new v(r),!s.isInt()||s.lt(u))throw Error(jc+s);r=s.gt(e)?a>0?e:u:s}for(Qt=!1,s=new v(Ni(p)),c=v.precision,v.precision=a=p.length*Wt*2;h=Jr(s,e,0,1,1),i=t.plus(h.times(n)),i.cmp(r)!=1;)t=n,n=i,i=u,u=l.plus(h.times(i)),l=i,i=e,e=s.minus(h.times(i)),s=i;return i=Jr(r.minus(t),n,0,1,1),l=l.plus(i.times(u)),t=t.plus(i.times(n)),l.s=u.s=f.s,d=Jr(u,n,a,1).minus(f).abs().cmp(Jr(l,t,a,1).minus(f).abs())<1?[u,n]:[l,t],v.precision=c,Qt=!0,d};ot.toHexadecimal=ot.toHex=function(r,e){return cN(this,16,r,e)};ot.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:Za(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(Qt=!1,t=Jr(t,r,0,e,1).times(r),Qt=!0,Lt(t)):(r.s=t.s,t=r),t};ot.toNumber=function(){return+this};ot.toOctal=function(r,e){return cN(this,8,r,e)};ot.toPower=ot.pow=function(r){var e,t,n,i,a,o,s=this,l=s.constructor,u=+(r=new l(r));if(!s.d||!r.d||!s.d[0]||!r.d[0])return new l(ti(+s,u));if(s=new l(s),s.eq(1))return s;if(n=l.precision,a=l.rounding,r.eq(1))return Lt(s,n,a);if(e=ra(r.e/Wt),e>=r.d.length-1&&(t=u<0?-u:u)<=Nae)return i=JV(l,s,t,n),r.s<0?new l(1).div(i):Lt(i,n,a);if(o=s.s,o<0){if(e<r.d.length-1)return new l(NaN);if(r.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return t=ti(+s,u),e=t==0||!isFinite(t)?ra(u*(Math.log("0."+Ni(s.d))/Math.LN10+s.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(Qt=!1,l.rounding=s.s=1,t=Math.min(12,(e+"").length),i=DT(r.times(yc(s,n+t)),n),i.d&&(i=Lt(i,n+5,1),$0(i.d,n,a)&&(e=n+10,i=Lt(DT(r.times(yc(s,e+t)),e),e+5,1),+Ni(i.d).slice(n+1,n+15)+1==1e14&&(i=Lt(i,n+1,0)))),i.s=o,Qt=!0,l.rounding=a,Lt(i,n,a))};ot.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=xl(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Za(r,1,ih),e===void 0?e=i.rounding:Za(e,0,8),n=Lt(new i(n),r,e),t=xl(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};ot.toSignificantDigits=ot.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(Za(r,1,ih),e===void 0?e=n.rounding:Za(e,0,8)),Lt(new n(t),r,e)};ot.toString=function(){var r=this,e=r.constructor,t=xl(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};ot.truncated=ot.trunc=function(){return Lt(new this.constructor(this),this.e+1,1)};ot.valueOf=ot.toJSON=function(){var r=this,e=r.constructor,t=xl(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Ni(r){var e,t,n,i=r.length-1,a="",o=r[0];if(i>0){for(a+=o,e=1;e<i;e++)n=r[e]+"",t=Wt-n.length,t&&(a+=ac(t)),a+=n;o=r[e],n=o+"",t=Wt-n.length,t&&(a+=ac(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Za(r,e,t){if(r!==~~r||r<e||r>t)throw Error(jc+r)}function $0(r,e,t,n){var i,a,o,s;for(a=r[0];a>=10;a/=10)--e;return--e<0?(e+=Wt,i=0):(i=Math.ceil((e+1)/Wt),e%=Wt),a=ti(10,Wt-e),s=r[i]%a|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=t<4&&s==99999||t>3&&s==49999||s==5e4||s==0):o=(t<4&&s+1==a||t>3&&s+1==a/2)&&(r[i+1]/a/100|0)==ti(10,e-2)-1||(s==a/2||s==0)&&(r[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(n||t<4)&&s==9999||!n&&t>3&&s==4999):o=((n||t<4)&&s+1==a||!n&&t>3&&s+1==a/2)&&(r[i+1]/a/1e3|0)==ti(10,e-3)-1,o}function Xx(r,e,t){for(var n,i=[0],a,o=0,s=r.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=CT.indexOf(r.charAt(o++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function Rae(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/LM(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=qp(r,1,e.times(i),new r(1));for(var a=t;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return r.precision-=t,e}var Jr=function(){function r(n,i,a){var o,s=0,l=n.length;for(n=n.slice();l--;)o=n[l]*i+s,n[l]=o%a|0,s=o/a|0;return s&&n.unshift(s),n}function e(n,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function t(n,i,a,o){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*o+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o,s,l){var u,c,h,d,f,p,v,y,g,w,b,m,x,S,E,A,T,C,D,O,U=n.constructor,L=n.s==i.s?1:-1,F=n.d,k=i.d;if(!F||!F[0]||!k||!k[0])return new U(!n.s||!i.s||(F?k&&F[0]==k[0]:!k)?NaN:F&&F[0]==0||!k?L*0:L/0);for(l?(f=1,c=n.e-i.e):(l=Es,f=Wt,c=ra(n.e/f)-ra(i.e/f)),D=k.length,T=F.length,g=new U(L),w=g.d=[],h=0;k[h]==(F[h]||0);h++);if(k[h]>(F[h]||0)&&c--,a==null?(S=a=U.precision,o=U.rounding):s?S=a+(n.e-i.e)+1:S=a,S<0)w.push(1),p=!0;else{if(S=S/f+2|0,h=0,D==1){for(d=0,k=k[0],S++;(h<T||d)&&S--;h++)E=d*l+(F[h]||0),w[h]=E/k|0,d=E%k|0;p=d||h<T}else{for(d=l/(k[0]+1)|0,d>1&&(k=r(k,d,l),F=r(F,d,l),D=k.length,T=F.length),A=D,b=F.slice(0,D),m=b.length;m<D;)b[m++]=0;O=k.slice(),O.unshift(0),C=k[0],k[1]>=l/2&&++C;do d=0,u=e(k,b,D,m),u<0?(x=b[0],D!=m&&(x=x*l+(b[1]||0)),d=x/C|0,d>1?(d>=l&&(d=l-1),v=r(k,d,l),y=v.length,m=b.length,u=e(v,b,y,m),u==1&&(d--,t(v,D<y?O:k,y,l))):(d==0&&(u=d=1),v=k.slice()),y=v.length,y<m&&v.unshift(0),t(b,v,m,l),u==-1&&(m=b.length,u=e(k,b,D,m),u<1&&(d++,t(b,D<m?O:k,m,l))),m=b.length):u===0&&(d++,b=[0]),w[h++]=d,u&&b[0]?b[m++]=F[A]||0:(b=[F[A]],m=1);while((A++<T||b[0]!==void 0)&&S--);p=b[0]!==void 0}w[0]||w.shift()}if(f==1)g.e=c,qV=p;else{for(h=1,d=w[0];d>=10;d/=10)h++;g.e=h+c*f-1,Lt(g,s?a+g.e+1:a,o,p)}return g}}();function Lt(r,e,t,n){var i,a,o,s,l,u,c,h,d,f=r.constructor;e:if(e!=null){if(h=r.d,!h)return r;for(i=1,s=h[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=Wt,o=e,c=h[d=0],l=c/ti(10,i-o-1)%10|0;else if(d=Math.ceil((a+1)/Wt),s=h.length,d>=s)if(n){for(;s++<=d;)h.push(0);c=l=0,i=1,a%=Wt,o=a-Wt+1}else break e;else{for(c=s=h[d],i=1;s>=10;s/=10)i++;a%=Wt,o=a-Wt+i,l=o<0?0:c/ti(10,i-o-1)%10|0}if(n=n||e<0||h[d+1]!==void 0||(o<0?c:c%ti(10,i-o-1)),u=t<4?(l||n)&&(t==0||t==(r.s<0?3:2)):l>5||l==5&&(t==4||n||t==6&&(a>0?o>0?c/ti(10,i-o):0:h[d-1])%10&1||t==(r.s<0?8:7)),e<1||!h[0])return h.length=0,u?(e-=r.e+1,h[0]=ti(10,(Wt-e%Wt)%Wt),r.e=-e||0):h[0]=r.e=0,r;if(a==0?(h.length=d,s=1,d--):(h.length=d+1,s=ti(10,Wt-a),h[d]=o>0?(c/ti(10,i-o)%ti(10,o)|0)*s:0),u)for(;;)if(d==0){for(a=1,o=h[0];o>=10;o/=10)a++;for(o=h[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(r.e++,h[0]==Es&&(h[0]=1));break}else{if(h[d]+=s,h[d]!=Es)break;h[d--]=0,s=1}for(a=h.length;h[--a]===0;)h.pop()}return Qt&&(r.e>f.maxE?(r.d=null,r.e=NaN):r.e<f.minE&&(r.e=0,r.d=[0])),r}function xl(r,e,t){if(!r.isFinite())return KV(r);var n,i=r.e,a=Ni(r.d),o=a.length;return e?(t&&(n=t-o)>0?a=a.charAt(0)+"."+a.slice(1)+ac(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r.e<0?"e":"e+")+r.e):i<0?(a="0."+ac(-i-1)+a,t&&(n=t-o)>0&&(a+=ac(n))):i>=o?(a+=ac(i+1-o),t&&(n=t-i-1)>0&&(a=a+"."+ac(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),t&&(n=t-o)>0&&(i+1===o&&(a+="."),a+=ac(n))),a}function IM(r,e){var t=r[0];for(e*=Wt;t>=10;t/=10)e++;return e}function Qw(r,e,t){if(e>Oae)throw Qt=!0,t&&(r.precision=t),Error(WV);return Lt(new r(Zw),e,1,!0)}function ws(r,e,t){if(e>TT)throw Error(WV);return Lt(new r(Kw),e,t,!0)}function YV(r){var e=r.length-1,t=e*Wt+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function ac(r){for(var e="";r--;)e+="0";return e}function JV(r,e,t,n){var i,a=new r(1),o=Math.ceil(n/Wt+4);for(Qt=!1;;){if(t%2&&(a=a.times(e),NL(a.d,o)&&(i=!0)),t=ra(t/2),t===0){t=a.d.length-1,i&&a.d[t]===0&&++a.d[t];break}e=e.times(e),NL(e.d,o)}return Qt=!0,a}function kL(r){return r.d[r.d.length-1]&1}function ZV(r,e,t){for(var n,i=new r(e[0]),a=0;++a<e.length;)if(n=new r(e[a]),n.s)i[t](n)&&(i=n);else{i=n;break}return i}function DT(r,e){var t,n,i,a,o,s,l,u=0,c=0,h=0,d=r.constructor,f=d.rounding,p=d.precision;if(!r.d||!r.d[0]||r.e>17)return new d(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(Qt=!1,l=p):l=e,s=new d(.03125);r.e>-2;)r=r.times(s),h+=5;for(n=Math.log(ti(2,h))/Math.LN10*2+5|0,l+=n,t=a=o=new d(1),d.precision=l;;){if(a=Lt(a.times(r),l,1),t=t.times(++c),s=o.plus(Jr(a,t,l,1)),Ni(s.d).slice(0,l)===Ni(o.d).slice(0,l)){for(i=h;i--;)o=Lt(o.times(o),l,1);if(e==null)if(u<3&&$0(o.d,l-n,f,u))d.precision=l+=10,t=a=s=new d(1),c=0,u++;else return Lt(o,d.precision=p,f,Qt=!0);else return d.precision=p,o}o=s}}function yc(r,e){var t,n,i,a,o,s,l,u,c,h,d,f=1,p=10,v=r,y=v.d,g=v.constructor,w=g.rounding,b=g.precision;if(v.s<0||!y||!y[0]||!v.e&&y[0]==1&&y.length==1)return new g(y&&!y[0]?-1/0:v.s!=1?NaN:y?0:v);if(e==null?(Qt=!1,c=b):c=e,g.precision=c+=p,t=Ni(y),n=t.charAt(0),Math.abs(a=v.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)v=v.times(r),t=Ni(v.d),n=t.charAt(0),f++;a=v.e,n>1?(v=new g("0."+t),a++):v=new g(n+"."+t.slice(1))}else return u=Qw(g,c+2,b).times(a+""),v=yc(new g(n+"."+t.slice(1)),c-p).plus(u),g.precision=b,e==null?Lt(v,b,w,Qt=!0):v;for(h=v,l=o=v=Jr(v.minus(1),v.plus(1),c,1),d=Lt(v.times(v),c,1),i=3;;){if(o=Lt(o.times(d),c,1),u=l.plus(Jr(o,new g(i),c,1)),Ni(u.d).slice(0,c)===Ni(l.d).slice(0,c))if(l=l.times(2),a!==0&&(l=l.plus(Qw(g,c+2,b).times(a+""))),l=Jr(l,new g(f),c,1),e==null)if($0(l.d,c-p,w,s))g.precision=c+=p,u=o=v=Jr(h.minus(1),h.plus(1),c,1),d=Lt(v.times(v),c,1),i=s=1;else return Lt(l,g.precision=b,w,Qt=!0);else return g.precision=b,l;l=u,i+=2}}function KV(r){return String(r.s*r.s/0)}function kT(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%Wt,t<0&&(n+=Wt),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=Wt;n<i;)r.d.push(+e.slice(n,n+=Wt));e=e.slice(n),n=Wt-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),Qt&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function Pae(r,e){var t,n,i,a,o,s,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),XV.test(e))return kT(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(Dae.test(e))t=16,e=e.toLowerCase();else if(Tae.test(e))t=2;else if(kae.test(e))t=8;else throw Error(jc+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,n=r.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=JV(n,new n(t),a,a*2)),u=Xx(e,t,Es),c=u.length-1,a=c;u[a]===0;--a)u.pop();return a<0?new n(r.s*0):(r.e=IM(u,c),r.d=u,Qt=!1,o&&(r=Jr(r,i,s*4)),l&&(r=r.times(Math.abs(l)<54?ti(2,l):Hc.pow(2,l))),Qt=!0,r)}function Iae(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:qp(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/LM(5,t)),e=qp(r,2,e,e);for(var i,a=new r(5),o=new r(16),s=new r(20);t--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function qp(r,e,t,n,i){var a,o,s,l,u=r.precision,c=Math.ceil(u/Wt);for(Qt=!1,l=t.times(t),s=new r(n);;){if(o=Jr(s.times(l),new r(e++*e++),u,1),s=i?n.plus(o):n.minus(o),n=Jr(o.times(l),new r(e++*e++),u,1),o=s.plus(n),o.d[c]!==void 0){for(a=c;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=n,n=o,o=a}return Qt=!0,o.d.length=c+1,o}function LM(r,e){for(var t=r;--e;)t*=r;return t}function QV(r,e){var t,n=e.s<0,i=ws(r,r.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return ru=n?4:1,e;if(t=e.divToInt(i),t.isZero())ru=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(a))return ru=kL(t)?n?2:3:n?4:1,e;ru=kL(t)?n?1:4:n?3:2}return e.minus(i).abs()}function cN(r,e,t,n){var i,a,o,s,l,u,c,h,d,f=r.constructor,p=t!==void 0;if(p?(Za(t,1,ih),n===void 0?n=f.rounding:Za(n,0,8)):(t=f.precision,n=f.rounding),!r.isFinite())c=KV(r);else{for(c=xl(r),o=c.indexOf("."),p?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,o>=0&&(c=c.replace(".",""),d=new f(1),d.e=c.length-o,d.d=Xx(xl(d),10,i),d.e=d.d.length),h=Xx(c,10,i),a=l=h.length;h[--l]==0;)h.pop();if(!h[0])c=p?"0p+0":"0";else{if(o<0?a--:(r=new f(r),r.d=h,r.e=a,r=Jr(r,d,t,n,0,i),h=r.d,a=r.e,u=qV),o=h[t],s=i/2,u=u||h[t+1]!==void 0,u=n<4?(o!==void 0||u)&&(n===0||n===(r.s<0?3:2)):o>s||o===s&&(n===4||u||n===6&&h[t-1]&1||n===(r.s<0?8:7)),h.length=t,u)for(;++h[--t]>i-1;)h[t]=0,t||(++a,h.unshift(1));for(l=h.length;!h[l-1];--l);for(o=0,c="";o<l;o++)c+=CT.charAt(h[o]);if(p){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)c+="0";for(h=Xx(c,i,e),l=h.length;!h[l-1];--l);for(o=1,c="1.";o<l;o++)c+=CT.charAt(h[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return r.s<0?"-"+c:c}function NL(r,e){if(r.length>e)return r.length=e,!0}function Lae(r){return new this(r).abs()}function Fae(r){return new this(r).acos()}function Bae(r){return new this(r).acosh()}function zae(r,e){return new this(r).plus(e)}function Uae(r){return new this(r).asin()}function jae(r){return new this(r).asinh()}function Hae(r){return new this(r).atan()}function Vae(r){return new this(r).atanh()}function qae(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,a=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=ws(this,a,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?ws(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=ws(this,a,1).times(.5),t.s=r.s):e.s<0?(this.precision=a,this.rounding=1,t=this.atan(Jr(r,e,a,1)),e=ws(this,a,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(Jr(r,e,a,1)),t}function Wae(r){return new this(r).cbrt()}function Gae(r){return Lt(r=new this(r),r.e+1,2)}function $ae(r,e,t){return new this(r).clamp(e,t)}function Xae(r){if(!r||typeof r!="object")throw Error(PM+"Object expected");var e,t,n,i=r.defaults===!0,a=["precision",1,ih,"rounding",0,8,"toExpNeg",-ap,0,"toExpPos",0,ap,"maxE",0,ap,"minE",-ap,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(t=a[e],i&&(this[t]=AT[t]),(n=r[t])!==void 0)if(ra(n)===n&&n>=a[e+1]&&n<=a[e+2])this[t]=n;else throw Error(jc+t+": "+n);if(t="crypto",i&&(this[t]=AT[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(GV);else this[t]=!1;else throw Error(jc+t+": "+n);return this}function Yae(r){return new this(r).cos()}function Jae(r){return new this(r).cosh()}function eq(r){var e,t,n;function i(a){var o,s,l,u=this;if(!(u instanceof i))return new i(a);if(u.constructor=i,OL(a)){u.s=a.s,Qt?!a.d||a.e>i.maxE?(u.e=NaN,u.d=null):a.e<i.minE?(u.e=0,u.d=[0]):(u.e=a.e,u.d=a.d.slice()):(u.e=a.e,u.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){u.s=1/a<0?-1:1,u.e=0,u.d=[0];return}if(a<0?(a=-a,u.s=-1):u.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;Qt?o>i.maxE?(u.e=NaN,u.d=null):o<i.minE?(u.e=0,u.d=[0]):(u.e=o,u.d=[a]):(u.e=o,u.d=[a]);return}else if(a*0!==0){a||(u.s=NaN),u.e=NaN,u.d=null;return}return kT(u,a.toString())}else if(l!=="string")throw Error(jc+a);return(s=a.charCodeAt(0))===45?(a=a.slice(1),u.s=-1):(s===43&&(a=a.slice(1)),u.s=1),XV.test(a)?kT(u,a):Pae(u,a)}if(i.prototype=ot,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Xae,i.clone=eq,i.isDecimal=OL,i.abs=Lae,i.acos=Fae,i.acosh=Bae,i.add=zae,i.asin=Uae,i.asinh=jae,i.atan=Hae,i.atanh=Vae,i.atan2=qae,i.cbrt=Wae,i.ceil=Gae,i.clamp=$ae,i.cos=Yae,i.cosh=Jae,i.div=Zae,i.exp=Kae,i.floor=Qae,i.hypot=eoe,i.ln=toe,i.log=roe,i.log10=ioe,i.log2=noe,i.max=aoe,i.min=ooe,i.mod=soe,i.mul=loe,i.pow=uoe,i.random=coe,i.round=hoe,i.sign=doe,i.sin=foe,i.sinh=poe,i.sqrt=moe,i.sub=goe,i.sum=voe,i.tan=yoe,i.tanh=boe,i.trunc=xoe,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function Zae(r,e){return new this(r).div(e)}function Kae(r){return new this(r).exp()}function Qae(r){return Lt(r=new this(r),r.e+1,3)}function eoe(){var r,e,t=new this(0);for(Qt=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Qt=!0,new this(1/0);t=e}return Qt=!0,t.sqrt()}function OL(r){return r instanceof Hc||r&&r.toStringTag===$V||!1}function toe(r){return new this(r).ln()}function roe(r,e){return new this(r).log(e)}function noe(r){return new this(r).log(2)}function ioe(r){return new this(r).log(10)}function aoe(){return ZV(this,arguments,"lt")}function ooe(){return ZV(this,arguments,"gt")}function soe(r,e){return new this(r).mod(e)}function loe(r,e){return new this(r).mul(e)}function uoe(r,e){return new this(r).pow(e)}function coe(r){var e,t,n,i,a=0,o=new this(1),s=[];if(r===void 0?r=this.precision:Za(r,1,ih),n=Math.ceil(r/Wt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=n/4}else throw Error(GV);else for(;a<n;)s[a++]=Math.random()*1e7|0;for(n=s[--a],r%=Wt,n&&r&&(i=ti(10,Wt-r),s[a]=(n/i|0)*i);s[a]===0;a--)s.pop();if(a<0)t=0,s=[0];else{for(t=-1;s[0]===0;t-=Wt)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<Wt&&(t-=Wt-n)}return o.e=t,o.d=s,o}function hoe(r){return Lt(r=new this(r),r.e+1,this.rounding)}function doe(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function foe(r){return new this(r).sin()}function poe(r){return new this(r).sinh()}function moe(r){return new this(r).sqrt()}function goe(r,e){return new this(r).sub(e)}function voe(){var r=0,e=arguments,t=new this(e[r]);for(Qt=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return Qt=!0,Lt(t,this.precision,this.rounding)}function yoe(r){return new this(r).tan()}function boe(r){return new this(r).tanh()}function xoe(r){return Lt(r=new this(r),r.e+1,1)}ot[Symbol.for("nodejs.util.inspect.custom")]=ot.toString;ot[Symbol.toStringTag]="Decimal";var Hc=ot.constructor=eq(AT);Zw=new Hc(Zw);Kw=new Hc(Kw);var woe="BigNumber",Soe=["?on","config"],Moe=ae(woe,Soe,r=>{var{on:e,config:t}=r,n=Hc.clone({precision:t.precision,modulo:Hc.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),tq={exports:{}};/**
* @license Complex.js v2.1.1 12/05/2020
*
* Copyright (c) 2020, Robert Eisele (robert@xarg.org)
* Dual licensed under the MIT or GPL Version 2 licenses.
**/(function(r,e){(function(t){var n=Math.cosh||function(h){return Math.abs(h)<1e-9?1-h:(Math.exp(h)+Math.exp(-h))*.5},i=Math.sinh||function(h){return Math.abs(h)<1e-9?h:(Math.exp(h)-Math.exp(-h))*.5},a=function(h){var d=Math.PI/4;if(-d>h||h>d)return Math.cos(h)-1;var f=h*h;return f*(f*(f*(f*(f*(f*(f*(f/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(h,d){var f=Math.abs(h),p=Math.abs(d);return f<3e3&&p<3e3?Math.sqrt(f*f+p*p):(f<p?(f=p,p=h/d):p=d/h,f*Math.sqrt(1+p*p))},s=function(){throw SyntaxError("Invalid Param")};function l(h,d){var f=Math.abs(h),p=Math.abs(d);return h===0?Math.log(p):d===0?Math.log(f):f<3e3&&p<3e3?Math.log(h*h+d*d)*.5:(h=h/2,d=d/2,.5*Math.log(h*h+d*d)+Math.LN2)}var u=function(h,d){var f={re:0,im:0};if(h==null)f.re=f.im=0;else if(d!==void 0)f.re=h,f.im=d;else switch(typeof h){case"object":if("im"in h&&"re"in h)f.re=h.re,f.im=h.im;else if("abs"in h&&"arg"in h){if(!Number.isFinite(h.abs)&&Number.isFinite(h.arg))return c.INFINITY;f.re=h.abs*Math.cos(h.arg),f.im=h.abs*Math.sin(h.arg)}else if("r"in h&&"phi"in h){if(!Number.isFinite(h.r)&&Number.isFinite(h.phi))return c.INFINITY;f.re=h.r*Math.cos(h.phi),f.im=h.r*Math.sin(h.phi)}else h.length===2?(f.re=h[0],f.im=h[1]):s();break;case"string":f.im=f.re=0;var p=h.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,y=0;p===null&&s();for(var g=0;g<p.length;g++){var w=p[g];w===" "||w==="	"||w===`
`||(w==="+"?v++:w==="-"?y++:w==="i"||w==="I"?(v+y===0&&s(),p[g+1]!==" "&&!isNaN(p[g+1])?(f.im+=parseFloat((y%2?"-":"")+p[g+1]),g++):f.im+=parseFloat((y%2?"-":"")+"1"),v=y=0):((v+y===0||isNaN(w))&&s(),p[g+1]==="i"||p[g+1]==="I"?(f.im+=parseFloat((y%2?"-":"")+w),g++):f.re+=parseFloat((y%2?"-":"")+w),v=y=0))}v+y>0&&s();break;case"number":f.im=0,f.re=h;break;default:s()}return isNaN(f.re)||isNaN(f.im),f};function c(h,d){if(!(this instanceof c))return new c(h,d);var f=u(h,d);this.re=f.re,this.im=f.im}c.prototype={re:0,im:0,sign:function(){var h=this.abs();return new c(this.re/h,this.im/h)},add:function(h,d){var f=new c(h,d);return this.isInfinite()&&f.isInfinite()?c.NAN:this.isInfinite()||f.isInfinite()?c.INFINITY:new c(this.re+f.re,this.im+f.im)},sub:function(h,d){var f=new c(h,d);return this.isInfinite()&&f.isInfinite()?c.NAN:this.isInfinite()||f.isInfinite()?c.INFINITY:new c(this.re-f.re,this.im-f.im)},mul:function(h,d){var f=new c(h,d);return this.isInfinite()&&f.isZero()||this.isZero()&&f.isInfinite()?c.NAN:this.isInfinite()||f.isInfinite()?c.INFINITY:f.im===0&&this.im===0?new c(this.re*f.re,0):new c(this.re*f.re-this.im*f.im,this.re*f.im+this.im*f.re)},div:function(h,d){var f=new c(h,d);if(this.isZero()&&f.isZero()||this.isInfinite()&&f.isInfinite())return c.NAN;if(this.isInfinite()||f.isZero())return c.INFINITY;if(this.isZero()||f.isInfinite())return c.ZERO;h=this.re,d=this.im;var p=f.re,v=f.im,y,g;return v===0?new c(h/p,d/p):Math.abs(p)<Math.abs(v)?(g=p/v,y=p*g+v,new c((h*g+d)/y,(d*g-h)/y)):(g=v/p,y=v*g+p,new c((h+d*g)/y,(d-h*g)/y))},pow:function(h,d){var f=new c(h,d);if(h=this.re,d=this.im,f.isZero())return c.ONE;if(f.im===0){if(d===0&&h>0)return new c(Math.pow(h,f.re),0);if(h===0)switch((f.re%4+4)%4){case 0:return new c(Math.pow(d,f.re),0);case 1:return new c(0,Math.pow(d,f.re));case 2:return new c(-Math.pow(d,f.re),0);case 3:return new c(0,-Math.pow(d,f.re))}}if(h===0&&d===0&&f.re>0&&f.im>=0)return c.ZERO;var p=Math.atan2(d,h),v=l(h,d);return h=Math.exp(f.re*v-f.im*p),d=f.im*v+f.re*p,new c(h*Math.cos(d),h*Math.sin(d))},sqrt:function(){var h=this.re,d=this.im,f=this.abs(),p,v;if(h>=0){if(d===0)return new c(Math.sqrt(h),0);p=.5*Math.sqrt(2*(f+h))}else p=Math.abs(d)/Math.sqrt(2*(f-h));return h<=0?v=.5*Math.sqrt(2*(f-h)):v=Math.abs(d)/Math.sqrt(2*(f+h)),new c(p,d<0?-v:v)},exp:function(){var h=Math.exp(this.re);return this.im,new c(h*Math.cos(this.im),h*Math.sin(this.im))},expm1:function(){var h=this.re,d=this.im;return new c(Math.expm1(h)*Math.cos(d)+a(d),Math.exp(h)*Math.sin(d))},log:function(){var h=this.re,d=this.im;return new c(l(h,d),Math.atan2(d,h))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var h=this.re,d=this.im;return new c(Math.sin(h)*n(d),Math.cos(h)*i(d))},cos:function(){var h=this.re,d=this.im;return new c(Math.cos(h)*n(d),-Math.sin(h)*i(d))},tan:function(){var h=2*this.re,d=2*this.im,f=Math.cos(h)+n(d);return new c(Math.sin(h)/f,i(d)/f)},cot:function(){var h=2*this.re,d=2*this.im,f=Math.cos(h)-n(d);return new c(-Math.sin(h)/f,i(d)/f)},sec:function(){var h=this.re,d=this.im,f=.5*n(2*d)+.5*Math.cos(2*h);return new c(Math.cos(h)*n(d)/f,Math.sin(h)*i(d)/f)},csc:function(){var h=this.re,d=this.im,f=.5*n(2*d)-.5*Math.cos(2*h);return new c(Math.sin(h)*n(d)/f,-Math.cos(h)*i(d)/f)},asin:function(){var h=this.re,d=this.im,f=new c(d*d-h*h+1,-2*h*d).sqrt(),p=new c(f.re-d,f.im+h).log();return new c(p.im,-p.re)},acos:function(){var h=this.re,d=this.im,f=new c(d*d-h*h+1,-2*h*d).sqrt(),p=new c(f.re-d,f.im+h).log();return new c(Math.PI/2-p.im,p.re)},atan:function(){var h=this.re,d=this.im;if(h===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var f=h*h+(1-d)*(1-d),p=new c((1-d*d-h*h)/f,-2*h/f).log();return new c(-.5*p.im,.5*p.re)},acot:function(){var h=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,h),0);var f=h*h+d*d;return f!==0?new c(h/f,-d/f).atan():new c(h!==0?h/0:0,d!==0?-d/0:0).atan()},asec:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new c(0,1/0);var f=h*h+d*d;return f!==0?new c(h/f,-d/f).acos():new c(h!==0?h/0:0,d!==0?-d/0:0).acos()},acsc:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new c(Math.PI/2,1/0);var f=h*h+d*d;return f!==0?new c(h/f,-d/f).asin():new c(h!==0?h/0:0,d!==0?-d/0:0).asin()},sinh:function(){var h=this.re,d=this.im;return new c(i(h)*Math.cos(d),n(h)*Math.sin(d))},cosh:function(){var h=this.re,d=this.im;return new c(n(h)*Math.cos(d),i(h)*Math.sin(d))},tanh:function(){var h=2*this.re,d=2*this.im,f=n(h)+Math.cos(d);return new c(i(h)/f,Math.sin(d)/f)},coth:function(){var h=2*this.re,d=2*this.im,f=n(h)-Math.cos(d);return new c(i(h)/f,-Math.sin(d)/f)},csch:function(){var h=this.re,d=this.im,f=Math.cos(2*d)-n(2*h);return new c(-2*i(h)*Math.cos(d)/f,2*n(h)*Math.sin(d)/f)},sech:function(){var h=this.re,d=this.im,f=Math.cos(2*d)+n(2*h);return new c(2*n(h)*Math.cos(d)/f,-2*i(h)*Math.sin(d)/f)},asinh:function(){var h=this.im;this.im=-this.re,this.re=h;var d=this.asin();return this.re=-this.im,this.im=h,h=d.re,d.re=-d.im,d.im=h,d},acosh:function(){var h=this.acos();if(h.im<=0){var d=h.re;h.re=-h.im,h.im=d}else{var d=h.im;h.im=-h.re,h.re=d}return h},atanh:function(){var h=this.re,d=this.im,f=h>1&&d===0,p=1-h,v=1+h,y=p*p+d*d,g=y!==0?new c((v*p-d*d)/y,(d*p+v*d)/y):new c(h!==-1?h/0:0,d!==0?d/0:0),w=g.re;return g.re=l(g.re,g.im)/2,g.im=Math.atan2(g.im,w)/2,f&&(g.im=-g.im),g},acoth:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new c(0,Math.PI/2);var f=h*h+d*d;return f!==0?new c(h/f,-d/f).atanh():new c(h!==0?h/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var h=this.re,d=this.im;if(d===0)return new c(h!==0?Math.log(h+Math.sqrt(h*h+1)):1/0,0);var f=h*h+d*d;return f!==0?new c(h/f,-d/f).asinh():new c(h!==0?h/0:0,d!==0?-d/0:0).asinh()},asech:function(){var h=this.re,d=this.im;if(this.isZero())return c.INFINITY;var f=h*h+d*d;return f!==0?new c(h/f,-d/f).acosh():new c(h!==0?h/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var h=this.re,d=this.im,f=h*h+d*d;return new c(h/f,-d/f)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(h){return h=Math.pow(10,h||0),new c(Math.ceil(this.re*h)/h,Math.ceil(this.im*h)/h)},floor:function(h){return h=Math.pow(10,h||0),new c(Math.floor(this.re*h)/h,Math.floor(this.im*h)/h)},round:function(h){return h=Math.pow(10,h||0),new c(Math.round(this.re*h)/h,Math.round(this.im*h)/h)},equals:function(h,d){var f=new c(h,d);return Math.abs(f.re-this.re)<=c.EPSILON&&Math.abs(f.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var h=this.re,d=this.im,f="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(h)<c.EPSILON&&(h=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?f+h:(h!==0?(f+=h,f+=" ",d<0?(d=-d,f+="-"):f+="+",f+=" "):d<0&&(d=-d,f+="-"),d!==1&&(f+=d),f+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,r.exports=c})()})(tq);var _oe=tq.exports;const Si=is(_oe);var Eoe="Complex",Coe=[],Aoe=ae(Eoe,Coe,()=>(Object.defineProperty(Si,"name",{value:"Complex"}),Si.prototype.constructor=Si,Si.prototype.type="Complex",Si.prototype.isComplex=!0,Si.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Si.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Si.prototype.format=function(r){var e="",t=this.im,n=this.re,i=id(this.re,r),a=id(this.im,r),o=tr(r)?r:r?r.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(n/t)<s&&(n=0),Math.abs(t/n)<s&&(t=0)}return t===0?e=i:n===0?t===1?e="i":t===-1?e="-i":e=a+"i":t<0?t===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+a+"i",e},Si.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Si(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(tr(t)){if(ja(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),tr(n))return new Si({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Si.prototype.valueOf=Si.prototype.toString,Si.fromJSON=function(r){return new Si(r)},Si.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},Si),{isClass:!0}),rq={exports:{}};/**
* @license Fraction.js v4.3.0 20/08/2023
* https://www.xarg.org/2014/03/rational-numbers-in-javascript/
*
* Copyright (c) 2023, Robert Eisele (robert@raw.org)
* Dual licensed under the MIT or GPL Version 2 licenses.
**/(function(r,e){(function(t){var n=2e3,i={s:1,n:0,d:1};function a(g,w){if(isNaN(g=parseInt(g,10)))throw v();return g*w}function o(g,w){if(w===0)throw p();var b=Object.create(f.prototype);b.s=g<0?-1:1,g=g<0?-g:g;var m=d(g,w);return b.n=g/m,b.d=w/m,b}function s(g){for(var w={},b=g,m=2,x=4;x<=b;){for(;b%m===0;)b/=m,w[m]=(w[m]||0)+1;x+=1+2*m++}return b!==g?b>1&&(w[b]=(w[b]||0)+1):w[g]=(w[g]||0)+1,w}var l=function(g,w){var b=0,m=1,x=1,S=0,E=0,A=0,T=1,C=1,D=0,O=1,U=1,L=1,F=1e7,k;if(g!=null)if(w!==void 0){if(b=g,m=w,x=b*m,b%1!==0||m%1!==0)throw y()}else switch(typeof g){case"object":{if("d"in g&&"n"in g)b=g.n,m=g.d,"s"in g&&(b*=g.s);else if(0 in g)b=g[0],1 in g&&(m=g[1]);else throw v();x=b*m;break}case"number":{if(g<0&&(x=g,g=-g),g%1===0)b=g;else if(g>0){for(g>=1&&(C=Math.pow(10,Math.floor(1+Math.log(g)/Math.LN10)),g/=C);O<=F&&L<=F;)if(k=(D+U)/(O+L),g===k){O+L<=F?(b=D+U,m=O+L):L>O?(b=U,m=L):(b=D,m=O);break}else g>k?(D+=U,O+=L):(U+=D,L+=O),O>F?(b=U,m=L):(b=D,m=O);b*=C}else(isNaN(g)||isNaN(w))&&(m=b=NaN);break}case"string":{if(O=g.match(/\d+|./g),O===null)throw v();if(O[D]==="-"?(x=-1,D++):O[D]==="+"&&D++,O.length===D+1?E=a(O[D++],x):O[D+1]==="."||O[D]==="."?(O[D]!=="."&&(S=a(O[D++],x)),D++,(D+1===O.length||O[D+1]==="("&&O[D+3]===")"||O[D+1]==="'"&&O[D+3]==="'")&&(E=a(O[D],x),T=Math.pow(10,O[D].length),D++),(O[D]==="("&&O[D+2]===")"||O[D]==="'"&&O[D+2]==="'")&&(A=a(O[D+1],x),C=Math.pow(10,O[D+1].length)-1,D+=3)):O[D+1]==="/"||O[D+1]===":"?(E=a(O[D],x),T=a(O[D+2],1),D+=3):O[D+3]==="/"&&O[D+1]===" "&&(S=a(O[D],x),E=a(O[D+2],x),T=a(O[D+4],1),D+=5),O.length<=D){m=T*C,x=b=A+m*S+C*E;break}}default:throw v()}if(m===0)throw p();i.s=x<0?-1:1,i.n=Math.abs(b),i.d=Math.abs(m)};function u(g,w,b){for(var m=1;w>0;g=g*g%b,w>>=1)w&1&&(m=m*g%b);return m}function c(g,w){for(;w%2===0;w/=2);for(;w%5===0;w/=5);if(w===1)return 0;for(var b=10%w,m=1;b!==1;m++)if(b=b*10%w,m>n)return 0;return m}function h(g,w,b){for(var m=1,x=u(10,b,w),S=0;S<300;S++){if(m===x)return S;m=m*10%w,x=x*10%w}return 0}function d(g,w){if(!g)return w;if(!w)return g;for(;;){if(g%=w,!g)return w;if(w%=g,!w)return g}}function f(g,w){if(l(g,w),this instanceof f)g=d(i.d,i.n),this.s=i.s,this.n=i.n/g,this.d=i.d/g;else return o(i.s*i.n,i.d)}var p=function(){return new Error("Division by Zero")},v=function(){return new Error("Invalid argument")},y=function(){return new Error("Parameters must be integer")};f.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(g,w){return l(g,w),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(g,w){return l(g,w),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(g,w){return l(g,w),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(g,w){return l(g,w),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(g,w){if(isNaN(this.n)||isNaN(this.d))return new f(NaN);if(g===void 0)return o(this.s*this.n%this.d,1);if(l(g,w),i.n===0&&this.d===0)throw p();return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(g,w){return l(g,w),o(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(g,w){return l(g,w),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):o(Math.ceil(g*this.s*this.n/this.d),g)},floor:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):o(Math.floor(g*this.s*this.n/this.d),g)},round:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):o(Math.round(g*this.s*this.n/this.d),g)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(g,w){if(l(g,w),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var b=s(this.n),m=s(this.d),x=1,S=1;for(var E in b)if(E!=="1"){if(E==="0"){x=0;break}if(b[E]*=i.n,b[E]%i.d===0)b[E]/=i.d;else return null;x*=Math.pow(E,b[E])}for(var E in m)if(E!=="1"){if(m[E]*=i.n,m[E]%i.d===0)m[E]/=i.d;else return null;S*=Math.pow(E,m[E])}return i.s<0?o(S,x):o(x,S)},equals:function(g,w){return l(g,w),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(g,w){l(g,w);var b=this.s*this.n*i.d-i.s*i.n*this.d;return(0<b)-(b<0)},simplify:function(g){if(isNaN(this.n)||isNaN(this.d))return this;g=g||.001;for(var w=this.abs(),b=w.toContinued(),m=1;m<b.length;m++){for(var x=o(b[m-1],1),S=m-2;S>=0;S--)x=x.inverse().add(b[S]);if(Math.abs(x.sub(w).valueOf())<g)return x.mul(this.s)}return this},divisible:function(g,w){return l(g,w),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(g){var w,b="",m=this.n,x=this.d;return this.s<0&&(b+="-"),x===1?b+=m:(g&&(w=Math.floor(m/x))>0&&(b+=w,b+=" ",m%=x),b+=m,b+="/",b+=x),b},toLatex:function(g){var w,b="",m=this.n,x=this.d;return this.s<0&&(b+="-"),x===1?b+=m:(g&&(w=Math.floor(m/x))>0&&(b+=w,m%=x),b+="\\frac{",b+=m,b+="}{",b+=x,b+="}"),b},toContinued:function(){var g,w=this.n,b=this.d,m=[];if(isNaN(w)||isNaN(b))return m;do m.push(Math.floor(w/b)),g=w%b,w=b,b=g;while(w!==1);return m},toString:function(g){var w=this.n,b=this.d;if(isNaN(w)||isNaN(b))return"NaN";g=g||15;var m=c(w,b),x=h(w,b,m),S=this.s<0?"-":"";if(S+=w/b|0,w%=b,w*=10,w&&(S+="."),m){for(var E=x;E--;)S+=w/b|0,w%=b,w*=10;S+="(";for(var E=m;E--;)S+=w/b|0,w%=b,w*=10;S+=")"}else for(var E=g;w&&E--;)S+=w/b|0,w%=b,w*=10;return S}},Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Fraction=f,r.exports=f})()})(rq);var Toe=rq.exports;const zl=is(Toe);var Doe="Fraction",koe=[],Noe=ae(Doe,koe,()=>(Object.defineProperty(zl,"name",{value:"Fraction"}),zl.prototype.constructor=zl,zl.prototype.type="Fraction",zl.prototype.isFraction=!0,zl.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},zl.fromJSON=function(r){return new zl(r)},zl),{isClass:!0}),Ooe="Range",Roe=[],Poe=ae(Ooe,Roe,()=>{function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,a=t!=null,o=n!=null;if(i){if(Kt(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(a){if(Kt(t))t=t.toNumber();else if(typeof t!="number")throw new TypeError("Parameter end must be a number")}if(o){if(Kt(n))n=n.toNumber();else if(typeof n!="number")throw new TypeError("Parameter step must be a number")}this.start=i?parseFloat(e):0,this.end=a?parseFloat(t):0,this.step=o?parseFloat(n):1}return r.prototype.type="Range",r.prototype.isRange=!0,r.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),n=t.map(function(a){return parseFloat(a)}),i=n.some(function(a){return isNaN(a)});if(i)return null;switch(n.length){case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[2],n[1]);default:return null}},r.prototype.clone=function(){return new r(this.start,this.end,this.step)},r.prototype.size=function(){var e=0,t=this.start,n=this.step,i=this.end,a=i-t;return vc(n)===vc(a)?e=Math.ceil(a/n):a===0&&(e=0),isNaN(e)&&(e=0),[e]},r.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},r.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},r.prototype.forEach=function(e){var t=this.start,n=this.step,i=this.end,a=0;if(n>0)for(;t<i;)e(t,[a],this),t+=n,a++;else if(n<0)for(;t>i;)e(t,[a],this),t+=n,a++},r.prototype.map=function(e){var t=[];return this.forEach(function(n,i,a){t[i[0]]=e(n,i,a)}),t},r.prototype.toArray=function(){var e=[];return this.forEach(function(t,n){e[n[0]]=t}),e},r.prototype.valueOf=function(){return this.toArray()},r.prototype.format=function(e){var t=id(this.start,e);return this.step!==1&&(t+=":"+id(this.step,e)),t+=":"+id(this.end,e),t},r.prototype.toString=function(){return this.format()},r.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},r.fromJSON=function(e){return new r(e.start,e.end,e.step)},r},{isClass:!0}),Ioe="Matrix",Loe=[],Foe=ae(Ioe,Loe,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});function LE(r,e,t){var n=r.constructor,i=new n(2),a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Nt(t))throw new Error("size must be an integer");if(r.greaterThan(i.pow(t-1).sub(1))||r.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(i.pow(t))),a="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(a);case 8:return"".concat(r.toOctal()).concat(a);case 16:return"".concat(r.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function Boe(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:n,wordSize:i}=PV(e);switch(t){case"fixed":return Uoe(r,n);case"exponential":return RL(r,n);case"engineering":return zoe(r,n);case"bin":return LE(r,2,i);case"oct":return LE(r,8,i);case"hex":return LE(r,16,i);case"auto":{var a=PL(e==null?void 0:e.lowerExp,-3),o=PL(e==null?void 0:e.upperExp,5);if(r.isZero())return"0";var s,l=r.toSignificantDigits(n),u=l.e;return u>=a&&u<o?s=l.toFixed():s=RL(r,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],h=arguments[4];return c!=="."?c+h:h})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function zoe(r,e){var t=r.e,n=t%3===0?t:t<0?t-3-t%3:t-t%3,i=r.mul(Math.pow(10,-n)),a=i.toPrecision(e);if(a.includes("e")){var o=r.constructor;a=new o(a).toFixed()}return a+"e"+(t>=0?"+":"")+n.toString()}function RL(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function Uoe(r,e){return r.toFixed(e)}function PL(r,e){return tr(r)?r:Kt(r)?r.toNumber():e}function joe(r,e){var t=r.length-e.length,n=r.length;return r.substring(t,n)===e}function lr(r,e){var t=Hoe(r,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function Hoe(r,e){if(typeof r=="number")return id(r,e);if(Kt(r))return Boe(r,e);if(Voe(r))return!e||e.fraction!=="decimal"?r.s*r.n+"/"+r.d:r.toString();if(Array.isArray(r))return nq(r,e);if(Ci(r))return op(r);if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(n=>op(n)+": "+lr(r[n],e));return"{"+t.join(", ")+"}"}return String(r)}function op(r){for(var e=String(r),t="",n=0;n<e.length;){var i=e.charAt(n);t+=i in IL?IL[i]:i,n++}return'"'+t+'"'}var IL={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Ho(r){var e=String(r);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function nq(r,e){if(Array.isArray(r)){for(var t="[",n=r.length,i=0;i<n;i++)i!==0&&(t+=", "),t+=nq(r[i],e);return t+="]",t}else return lr(r,e)}function Voe(r){return r&&typeof r=="object"&&typeof r.s=="number"&&typeof r.n=="number"&&typeof r.d=="number"||!1}function NT(r,e){if(!Ci(r))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Br(r)+", index: 0)");if(!Ci(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Br(e)+", index: 1)");return r===e?0:r>e?1:-1}function ar(r,e,t){if(!(this instanceof ar))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}ar.prototype=new RangeError;ar.prototype.constructor=RangeError;ar.prototype.name="DimensionError";ar.prototype.isDimensionError=!0;function as(r,e,t){if(!(this instanceof as))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}as.prototype=new RangeError;as.prototype.constructor=RangeError;as.prototype.name="IndexError";as.prototype.isIndexError=!0;function rr(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function iq(r,e,t){var n,i=r.length;if(i!==e[t])throw new ar(i,e[t]);if(t<e.length-1){var a=t+1;for(n=0;n<i;n++){var o=r[n];if(!Array.isArray(o))throw new ar(e.length-1,e.length,"<");iq(r[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(r[n]))throw new ar(e.length+1,e.length,">")}function LL(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new ar(r.length,0)}else iq(r,e,0)}function eS(r,e){var t=r.isMatrix?r._size:rr(r),n=e._sourceSize;n.forEach((i,a)=>{if(i!==null&&i!==t[a])throw new ar(i,t[a])})}function Pr(r,e){if(r!==void 0){if(!tr(r)||!Nt(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new as(r,e)}}function Wp(r){for(var e=0;e<r._dimensions.length;++e){var t=r._dimensions[e];if(t._data&&Sr(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(Ci(t)&&t.length===0)return!0}return!1}function Gp(r,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!tr(i)||!Nt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+lr(e)+")")}),(tr(r)||Kt(r))&&(r=[r]);var n=t!==void 0?t:0;return OT(r,e,0,n),r}function OT(r,e,t,n){var i,a,o=r.length,s=e[t],l=Math.min(o,s);if(r.length=s,t<e.length-1){var u=t+1;for(i=0;i<l;i++)a=r[i],Array.isArray(a)||(a=[a],r[i]=a),OT(a,e,u,n);for(i=l;i<s;i++)a=[],r[i]=a,OT(a,e,u,n)}else{for(i=0;i<l;i++)for(;Array.isArray(r[i]);)r[i]=r[i][0];for(i=l;i<s;i++)r[i]=n}}function hN(r,e){var t=xr(r),n=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new ar(0,n,"!=");e=dN(e,n);var i=aq(e);if(n!==i)throw new ar(i,n,"!=");try{return qoe(t,e)}catch(a){throw a instanceof ar?new ar(i,n,"!="):a}}function dN(r,e){var t=aq(r),n=r.slice(),i=-1,a=r.indexOf(i),o=r.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,l=e%t===0;if(s)if(l)n[a]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return n}function aq(r){return r.reduce((e,t)=>e*t,1)}function qoe(r,e){for(var t=r,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var o=t.length/a,s=0;s<o;s++)n.push(t.slice(s*a,(s+1)*a));t=n}return t}function tS(r,e){for(var t=rr(r);Array.isArray(r)&&r.length===1;)r=r[0],t.shift();for(var n=t.length;t[n-1]===1;)n--;return n<t.length&&(r=oq(r,n,0),t.length=n),r}function oq(r,e,t){var n,i;if(t<e){var a=t+1;for(n=0,i=r.length;n<i;n++)r[n]=oq(r[n],e,a)}else for(;Array.isArray(r);)r=r[0];return r}function sq(r,e,t,n){var i=n||rr(r);if(t)for(var a=0;a<t;a++)r=[r],i.unshift(1);for(r=lq(r,e,0);i.length<e;)i.push(1);return r}function lq(r,e,t){var n,i;if(Array.isArray(r)){var a=t+1;for(n=0,i=r.length;n<i;n++)r[n]=lq(r[n],e,a)}else for(var o=t;o<e;o++)r=[r];return r}function xr(r){if(!Array.isArray(r))return r;var e=[];return r.forEach(function t(n){Array.isArray(n)?n.forEach(t):e.push(n)}),e}function lu(r,e){return Array.prototype.map.call(r,e)}function FM(r,e){Array.prototype.forEach.call(r,e)}function uq(r,e){if(rr(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,e)}function rS(r,e){if(rr(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,t=>e.test(t))}function FL(r,e){return Array.prototype.join.call(r,e)}function $p(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;var e=[],t=0;e[0]={value:r[0],identifier:0};for(var n=1;n<r.length;n++)r[n]===r[n-1]?t++:t=0,e.push({value:r[n],identifier:t});return e}function nS(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;for(var e=[],t=0;t<r.length;t++)e.push(r[t].value);return e}function X0(r,e){for(var t,n=0,i=0;i<r.length;i++){var a=r[i],o=Array.isArray(a);if(i===0&&o&&(n=a.length),o&&a.length!==n)return;var s=o?X0(a,e):e(a);if(t===void 0)t=s;else if(t!==s)return"mixed"}return t}function cq(r,e,t,n){if(n<t){if(r.length!==e.length)throw new ar(r.length,e.length);for(var i=[],a=0;a<r.length;a++)i[a]=cq(r[a],e[a],t,n+1);return i}else return r.concat(e)}function hq(){var r=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(r.length===1)return r[0];if(r.length>1)return r.slice(1).reduce(function(t,n){return cq(t,n,e,0)},r[0]);throw new Error("Wrong number of arguments in function concat")}function Woe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];for(var n=e.map(d=>d.length),i=Math.max(...n),a=new Array(i).fill(null),o=0;o<e.length;o++)for(var s=e[o],l=n[o],u=0;u<l;u++){var c=i-l+u;s[u]>a[c]&&(a[c]=s[u])}for(var h=0;h<e.length;h++)iS(e[h],a);return a}function iS(r,e){for(var t=e.length,n=r.length,i=0;i<n;i++){var a=t-n+i;if(r[i]<e[a]&&r[i]>1||r[i]>e[a])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(r,") not possible to broadcast dimension ").concat(n," with size ").concat(r[i]," to size ").concat(e[a]))}}function BL(r,e){var t=rr(r);if(bd(t,e))return r;iS(t,e);var n=Woe(t,e),i=n.length,a=[...Array(i-t.length).fill(1),...t],o=$oe(r);t.length<i&&(o=hN(o,a),t=rr(o));for(var s=0;s<i;s++)t[s]<n[s]&&(o=Goe(o,n[s],s),t=rr(o));return o}function Goe(r,e,t){return hq(...Array(e).fill(r),t)}function $oe(r){return lt([],r)}function Xoe(r){var e=0,t=1,n=Object.create(null),i=Object.create(null),a=0,o=function(s){var l=i[s];if(l&&(delete n[l],delete i[s],--e,t===l)){if(!e){a=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++t););}};return r=Math.abs(r),{hit:function(s){var l=i[s],u=++a;if(n[u]=s,i[s]=u,!l)return++e,e<=r?void 0:(s=n[t],o(s),s);if(delete n[l],t===l)for(;!Object.prototype.hasOwnProperty.call(n,++t););},delete:o,clear:function(){e=a=0,t=1,n=Object.create(null),i=Object.create(null)}}}function ty(r){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:Xoe(t||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e(i);if(n.cache.values.has(o))return n.cache.lru.hit(o),n.cache.values.get(o);var s=r.apply(r,i);return n.cache.values.set(o,s),n.cache.values.delete(n.cache.lru.hit(o)),s}}function dq(r){return Object.keys(r.signatures||{}).reduce(function(e,t){var n=(t.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var Yoe="DenseMatrix",Joe=["Matrix"],Zoe=ae(Yoe,Joe,r=>{var{Matrix:e}=r;function t(c,h){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!Ci(h))throw new Error("Invalid datatype: "+h);if(Ft(c))c.type==="DenseMatrix"?(this._data=Gt(c._data),this._size=Gt(c._size),this._datatype=h||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=h||c._datatype);else if(c&&Sr(c.data)&&Sr(c.size))this._data=c.data,this._size=c.size,LL(this._data,this._size),this._datatype=h||c.datatype;else if(Sr(c))this._data=u(c),this._size=rr(this._data),LL(this._data,this._size),this._datatype=h;else{if(c)throw new TypeError("Unsupported type of data ("+Br(c)+")");this._data=[],this._size=[0],this._datatype=h}}t.prototype=new e,t.prototype.createDenseMatrix=function(c,h){return new t(c,h)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return X0(this._data,Br)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(c,h){return new t(c,h)},t.prototype.subset=function(c,h,d){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return a(this,c,h,d);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(c){if(!Sr(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new ar(c.length,this._size.length);for(var h=0;h<c.length;h++)Pr(c[h],this._size[h]);for(var d=this._data,f=0,p=c.length;f<p;f++){var v=c[f];Pr(v,d.length),d=d[v]}return d},t.prototype.set=function(c,h,d){if(!Sr(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new ar(c.length,this._size.length,"<");var f,p,v,y=c.map(function(w){return w+1});l(this,y,d);var g=this._data;for(f=0,p=c.length-1;f<p;f++)v=c[f],Pr(v,g.length),g=g[v];return v=c[c.length-1],Pr(v,g.length),g[v]=h,this};function n(c,h){if(!Zv(h))throw new TypeError("Invalid index");var d=h.isScalar();if(d)return c.get(h.min());var f=h.size();if(f.length!==c._size.length)throw new ar(f.length,c._size.length);for(var p=h.min(),v=h.max(),y=0,g=c._size.length;y<g;y++)Pr(p[y],c._size[y]),Pr(v[y],c._size[y]);return new t(i(c._data,h,f.length,0),c._datatype)}function i(c,h,d,f){var p=f===d-1,v=h.dimension(f);return p?v.map(function(y){return Pr(y,c.length),c[y]}).valueOf():v.map(function(y){Pr(y,c.length);var g=c[y];return i(g,h,d,f+1)}).valueOf()}function a(c,h,d,f){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var p=h.size(),v=h.isScalar(),y;if(Ft(d)?(y=d.size(),d=d.valueOf()):y=rr(d),v){if(y.length!==0)throw new TypeError("Scalar expected");c.set(h.min(),d,f)}else{if(!bd(y,p))try{y.length===0?d=BL([d],p):d=BL(d,p),y=rr(d)}catch{}if(p.length<c._size.length)throw new ar(p.length,c._size.length,"<");if(y.length<p.length){for(var g=0,w=0;p[g]===1&&y[g]===1;)g++;for(;p[g]===1;)w++,g++;d=sq(d,p.length,w,y)}if(!bd(p,y))throw new ar(p,y,">");var b=h.max().map(function(S){return S+1});l(c,b,f);var m=p.length,x=0;o(c._data,h,d,m,x)}return c}function o(c,h,d,f,p){var v=p===f-1,y=h.dimension(p);v?y.forEach(function(g,w){Pr(g),c[g]=d[w[0]]}):y.forEach(function(g,w){Pr(g),o(c[g],h,d[w[0]],f,p+1)})}t.prototype.resize=function(c,h,d){if(!_o(c))throw new TypeError("Array or Matrix expected");var f=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),p=d?this.clone():this;return s(p,f,h)};function s(c,h,d){if(h.length===0){for(var f=c._data;Sr(f);)f=f[0];return f}return c._size=h.slice(0),c._data=Gp(c._data,c._size,d),c}t.prototype.reshape=function(c,h){var d=h?this.clone():this;d._data=hN(d._data,c);var f=d._size.reduce((p,v)=>p*v);return d._size=dN(c,f),d};function l(c,h,d){for(var f=c._size.slice(0),p=!1;f.length<h.length;)f.push(0),p=!0;for(var v=0,y=h.length;v<y;v++)h[v]>f[v]&&(f[v]=h[v],p=!0);p&&s(c,f,d)}t.prototype.clone=function(){var c=new t({data:Gt(this._data),size:Gt(this._size),datatype:this._datatype});return c},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(c){var h=this,d=dq(c),f=function y(g,w){return Sr(g)?g.map(function(b,m){return y(b,w.concat(m))}):d===1?c(g):d===2?c(g,w):c(g,w,h)},p=f(this._data,[]),v=this._datatype!==void 0?X0(p,Br):void 0;return new t(p,v)},t.prototype.forEach=function(c){var h=this,d=function f(p,v){Sr(p)?p.forEach(function(y,g){f(y,v.concat(g))}):c(p,v,h)};d(this._data,[])},t.prototype[Symbol.iterator]=function*(){var c=function*h(d,f){if(Sr(d))for(var p=0;p<d.length;p++)yield*h(d[p],f.concat(p));else yield{value:d,index:f}};yield*c(this._data,[])},t.prototype.rows=function(){var c=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var f of d)c.push(new t([f],this._datatype));return c},t.prototype.columns=function(){var c=this,h=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var f=this._data,p=function(y){var g=f.map(w=>[w[y]]);h.push(new t(g,c._datatype))},v=0;v<d[1];v++)p(v);return h},t.prototype.toArray=function(){return Gt(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(c){return lr(this._data,c)},t.prototype.toString=function(){return lr(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(c){if(c){if(Kt(c)&&(c=c.toNumber()),!tr(c)||!Nt(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var h=c>0?c:0,d=c<0?-c:0,f=this._size[0],p=this._size[1],v=Math.min(f-d,p-h),y=[],g=0;g<v;g++)y[g]=this._data[g+d][g+h];return new t({data:y,size:[v],datatype:this._datatype})},t.diagonal=function(c,h,d,f){if(!Sr(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(E){if(Kt(E)&&(E=E.toNumber()),!tr(E)||!Nt(E)||E<1)throw new Error("Size values must be positive integers");return E}),d){if(Kt(d)&&(d=d.toNumber()),!tr(d)||!Nt(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var p=d>0?d:0,v=d<0?-d:0,y=c[0],g=c[1],w=Math.min(y-v,g-p),b;if(Sr(h)){if(h.length!==w)throw new Error("Invalid value array length");b=function(E){return h[E]}}else if(Ft(h)){var m=h.size();if(m.length!==1||m[0]!==w)throw new Error("Invalid matrix length");b=function(E){return h.get([E])}}else b=function(){return h};f||(f=Kt(b(0))?b(0).mul(0):0);var x=[];if(c.length>0){x=Gp(x,c,f);for(var S=0;S<w;S++)x[S+v][S+p]=b(S)}return new t({data:x,size:[y,g]})},t.fromJSON=function(c){return new t(c)},t.prototype.swapRows=function(c,h){if(!tr(c)||!Nt(c)||!tr(h)||!Nt(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Pr(c,this._size[0]),Pr(h,this._size[0]),t._swapRows(c,h,this._data),this},t._swapRows=function(c,h,d){var f=d[c];d[c]=d[h],d[h]=f};function u(c){return Ft(c)?u(c.valueOf()):Sr(c)?c.map(u):c}return t},{isClass:!0}),zL="clone",Koe=["typed"],Qoe=ae(zL,Koe,r=>{var{typed:e}=r;return e(zL,{any:Gt})});function fq(r){var e=r.length,t=r[0].length,n,i,a=[];for(i=0;i<t;i++){var o=[];for(n=0;n<e;n++)o.push(r[n][i]);a.push(o)}return a}function vm(r){for(var e=0;e<r.length;e++)if(_o(r[e]))return!0;return!1}function bu(r,e){Ft(r)&&(r=r.valueOf());for(var t=0,n=r.length;t<n;t++){var i=r[t];Array.isArray(i)?bu(i,e):e(i)}}function ur(r,e,t){return r&&typeof r.map=="function"?r.map(function(n){return ur(n,e)}):e(r)}function BM(r,e,t){var n=Array.isArray(r)?rr(r):r.size();if(e<0||e>=n.length)throw new as(e,n.length);return Ft(r)?r.create(aS(r.valueOf(),e,t)):aS(r,e,t)}function aS(r,e,t){var n,i,a,o;if(e<=0)if(Array.isArray(r[0])){for(o=fq(r),i=[],n=0;n<o.length;n++)i[n]=aS(o[n],e-1,t);return i}else{for(a=r[0],n=1;n<r.length;n++)a=t(a,r[n]);return a}else{for(i=[],n=0;n<r.length;n++)i[n]=aS(r[n],e-1,t);return i}}function UL(r,e,t,n,i,a,o,s,l,u,c){var h=r._values,d=r._index,f=r._ptr,p,v,y,g;if(n)for(v=f[e],y=f[e+1],p=v;p<y;p++)g=d[p],t[g]!==a?(t[g]=a,o.push(g),n[g]=h[p]):(n[g]=s(n[g],h[p]),i[g]=a);else for(v=f[e],y=f[e+1],p=v;p<y;p++)g=d[p],t[g]!==a?(t[g]=a,o.push(g)):i[g]=a}var jL="isInteger",ese=["typed"],tse=ae(jL,ese,r=>{var{typed:e}=r;return e(jL,{number:Nt,BigNumber:function(t){return t.isInt()},Fraction:function(t){return t.d===1&&isFinite(t.n)},"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),Ns="number",ym="number, number";function pq(r){return Math.abs(r)}pq.signature=Ns;function mq(r,e){return r+e}mq.signature=ym;function gq(r,e){return r-e}gq.signature=ym;function vq(r,e){return r*e}vq.signature=ym;function yq(r){return-r}yq.signature=Ns;function bq(r){return r}bq.signature=Ns;function Gg(r){return rae(r)}Gg.signature=Ns;function xq(r){return r*r*r}xq.signature=Ns;function wq(r){return Math.exp(r)}wq.signature=Ns;function Sq(r){return nae(r)}Sq.signature=Ns;function Mq(r,e){if(!Nt(r)||!Nt(e))throw new Error("Parameters in function lcm must be integer numbers");if(r===0||e===0)return 0;for(var t,n=r*e;e!==0;)t=e,e=r%t,r=t;return Math.abs(n/r)}Mq.signature=ym;function rse(r,e){return Math.log(r)}function _q(r){return eae(r)}_q.signature=Ns;function Eq(r){return Qie(r)}Eq.signature=Ns;function HL(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(r<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(r===0)return t?1/0:0;if(!isFinite(r))return t?0:r;var n=Math.pow(Math.abs(r),1/e);return n=r<0?-n:n,t?1/n:n}function RT(r){return vc(r)}RT.signature=Ns;function Cq(r){return r*r}Cq.signature=Ns;function Aq(r,e){var t,n,i,a=0,o=1,s=1,l=0;if(!Nt(r)||!Nt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(r/e),i=r-n*e,t=a,a=o-n*a,o=t,t=s,s=l-n*s,l=t,r=e,e=i;var u;return r<0?u=[-r,-o,-l]:u=[r,r?o:0,l],u}Aq.signature=ym;function Tq(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}Tq.signature=ym;function mg(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!Nt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(IV(r,e))}var nse="number",bm="number, number";function Dq(r,e){if(!Nt(r)||!Nt(e))throw new Error("Integers expected in function bitAnd");return r&e}Dq.signature=bm;function kq(r){if(!Nt(r))throw new Error("Integer expected in function bitNot");return~r}kq.signature=nse;function Nq(r,e){if(!Nt(r)||!Nt(e))throw new Error("Integers expected in function bitOr");return r|e}Nq.signature=bm;function Oq(r,e){if(!Nt(r)||!Nt(e))throw new Error("Integers expected in function bitXor");return r^e}Oq.signature=bm;function Rq(r,e){if(!Nt(r)||!Nt(e))throw new Error("Integers expected in function leftShift");return r<<e}Rq.signature=bm;function Pq(r,e){if(!Nt(r)||!Nt(e))throw new Error("Integers expected in function rightArithShift");return r>>e}Pq.signature=bm;function Iq(r,e){if(!Nt(r)||!Nt(e))throw new Error("Integers expected in function rightLogShift");return r>>>e}Iq.signature=bm;function nu(r,e){if(e<r)return 1;if(e===r)return e;var t=e+r>>1;return nu(r,t)*nu(t+1,e)}function Lq(r,e){if(!Nt(r)||r<0)throw new TypeError("Positive integer value expected in function combinations");if(!Nt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>r)throw new TypeError("k must be less than or equal to n");for(var t=r-e,n=1,i=e<t?t+1:e+1,a=2,o=e<t?e:t,s=i;s<=r;++s)for(n*=s;a<=o&&n%a===0;)n/=a,++a;return a<=o&&(n/=nu(a,o)),n}Lq.signature="number, number";var ise=Math.PI,ase=2*Math.PI,ose=Math.E,sse=1.618033988749895,lse="number",fN="number, number";function Fq(r){return!r}Fq.signature=lse;function Bq(r,e){return!!(r||e)}Bq.signature=fN;function zq(r,e){return!!r!=!!e}zq.signature=fN;function Uq(r,e){return!!(r&&e)}Uq.signature=fN;function oS(r){var e;if(Nt(r))return r<=0?isFinite(r)?1/0:NaN:r>171?1/0:nu(1,r-1);if(r<.5)return Math.PI/(Math.sin(Math.PI*r)*oS(1-r));if(r>=171.35)return 1/0;if(r>85){var t=r*r,n=t*r,i=n*r,a=i*r;return Math.sqrt(2*Math.PI/r)*Math.pow(r/Math.E,r)*(1+1/(12*r)+1/(288*t)-139/(51840*n)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*r))}--r,e=_p[0];for(var o=1;o<_p.length;++o)e+=_p[o]/(r+o);var s=r+jq+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,r+.5)*Math.exp(-s)*e}oS.signature="number";var jq=4.7421875,_p=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Hq=.9189385332046728,use=5,cse=7,VL=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function sS(r){if(r<0)return NaN;if(r===0)return 1/0;if(!isFinite(r))return r;if(r<.5)return Math.log(Math.PI/Math.sin(Math.PI*r))-sS(1-r);r=r-1;for(var e=r+use+.5,t=VL[0],n=cse-1;n>=1;n--)t+=VL[n]/(r+n);return Hq+(r+.5)*Math.log(e)-e+Math.log(t)}sS.signature="number";var ia="number";function Vq(r){return lae(r)}Vq.signature=ia;function qq(r){return Math.atan(1/r)}qq.signature=ia;function Wq(r){return isFinite(r)?(Math.log((r+1)/r)+Math.log(r/(r-1)))/2:0}Wq.signature=ia;function Gq(r){return Math.asin(1/r)}Gq.signature=ia;function $q(r){var e=1/r;return Math.log(e+Math.sqrt(e*e+1))}$q.signature=ia;function Xq(r){return Math.acos(1/r)}Xq.signature=ia;function Yq(r){var e=1/r,t=Math.sqrt(e*e-1);return Math.log(t+e)}Yq.signature=ia;function Jq(r){return uae(r)}Jq.signature=ia;function Zq(r){return cae(r)}Zq.signature=ia;function Kq(r){return 1/Math.tan(r)}Kq.signature=ia;function Qq(r){var e=Math.exp(2*r);return(e+1)/(e-1)}Qq.signature=ia;function eW(r){return 1/Math.sin(r)}eW.signature=ia;function tW(r){return r===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(r)-Math.exp(-r)))*vc(r)}tW.signature=ia;function rW(r){return 1/Math.cos(r)}rW.signature=ia;function nW(r){return 2/(Math.exp(r)+Math.exp(-r))}nW.signature=ia;function iW(r){return dae(r)}iW.signature=ia;var zM="number";function aW(r){return r<0}aW.signature=zM;function oW(r){return r>0}oW.signature=zM;function sW(r){return r===0}sW.signature=zM;function lW(r){return Number.isNaN(r)}lW.signature=zM;var qL="isNegative",hse=["typed"],dse=ae(qL,hse,r=>{var{typed:e}=r;return e(qL,{number:aW,BigNumber:function(t){return t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s<0},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),WL="isNumeric",fse=["typed"],pse=ae(WL,fse,r=>{var{typed:e}=r;return e(WL,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),GL="hasNumericValue",mse=["typed","isNumeric"],gse=ae(GL,mse,r=>{var{typed:e,isNumeric:t}=r;return e(GL,{boolean:()=>!0,string:function(n){return n.trim().length>0&&!isNaN(Number(n))},any:function(n){return t(n)}})}),$L="isPositive",vse=["typed"],yse=ae($L,vse,r=>{var{typed:e}=r;return e($L,{number:oW,BigNumber:function(t){return!t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s>0&&t.n>0},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),XL="isZero",bse=["typed"],xse=ae(XL,bse,r=>{var{typed:e}=r;return e(XL,{number:sW,BigNumber:function(t){return t.isZero()},Complex:function(t){return t.re===0&&t.im===0},Fraction:function(t){return t.d===1&&t.n===0},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),YL="isNaN",wse=["typed"],Sse=ae(YL,wse,r=>{var{typed:e}=r;return e(YL,{number:lW,BigNumber:function(t){return t.isNaN()},Fraction:function(t){return!1},Complex:function(t){return t.isNaN()},Unit:function(t){return Number.isNaN(t.value)},"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),JL="typeOf",Mse=["typed"],_se=ae(JL,Mse,r=>{var{typed:e}=r;return e(JL,{any:Br})});function Qo(r,e,t){if(t==null)return r.eq(e);if(r.eq(e))return!0;if(r.isNaN()||e.isNaN())return!1;if(r.isFinite()&&e.isFinite()){var n=r.minus(e).abs();if(n.isZero())return!0;var i=r.constructor.max(r.abs(),e.abs());return n.lte(i.times(t))}return!1}function Ese(r,e,t){return Ta(r.re,e.re,t)&&Ta(r.im,e.im,t)}var xm=ae("compareUnits",["typed"],r=>{var{typed:e}=r;return{"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),i.valueType()])(n.value,i.value)})}}),lS="equalScalar",Cse=["typed","config"],Ase=ae(lS,Cse,r=>{var{typed:e,config:t}=r,n=xm({typed:e});return e(lS,{"boolean, boolean":function(i,a){return i===a},"number, number":function(i,a){return Ta(i,a,t.epsilon)},"BigNumber, BigNumber":function(i,a){return i.eq(a)||Qo(i,a,t.epsilon)},"Fraction, Fraction":function(i,a){return i.equals(a)},"Complex, Complex":function(i,a){return Ese(i,a,t.epsilon)}},n)});ae(lS,["typed","config"],r=>{var{typed:e,config:t}=r;return e(lS,{"number, number":function(n,i){return Ta(n,i,t.epsilon)}})});var Tse="SparseMatrix",Dse=["typed","equalScalar","Matrix"],kse=ae(Tse,Dse,r=>{var{typed:e,equalScalar:t,Matrix:n}=r;function i(v,y){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(y&&!Ci(y))throw new Error("Invalid datatype: "+y);if(Ft(v))a(this,v,y);else if(v&&Sr(v.index)&&Sr(v.ptr)&&Sr(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=y||v.datatype;else if(Sr(v))o(this,v,y);else{if(v)throw new TypeError("Unsupported type of data ("+Br(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=y}}function a(v,y,g){y.type==="SparseMatrix"?(v._values=y._values?Gt(y._values):void 0,v._index=Gt(y._index),v._ptr=Gt(y._ptr),v._size=Gt(y._size),v._datatype=g||y._datatype):o(v,y.valueOf(),g||y._datatype)}function o(v,y,g){v._values=[],v._index=[],v._ptr=[],v._datatype=g;var w=y.length,b=0,m=t,x=0;if(Ci(g)&&(m=e.find(t,[g,g])||t,x=e.convert(0,g)),w>0){var S=0;do{v._ptr.push(v._index.length);for(var E=0;E<w;E++){var A=y[E];if(Sr(A)){if(S===0&&b<A.length&&(b=A.length),S<A.length){var T=A[S];m(T,x)||(v._values.push(T),v._index.push(E))}}else S===0&&b<1&&(b=1),m(A,x)||(v._values.push(A),v._index.push(E))}S++}while(S<b)}v._ptr.push(v._index.length),v._size=[w,b]}i.prototype=new n,i.prototype.createSparseMatrix=function(v,y){return new i(v,y)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return X0(this._values,Br)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,y){return new i(v,y)},i.prototype.density=function(){var v=this._size[0],y=this._size[1];return v!==0&&y!==0?this._index.length/(v*y):0},i.prototype.subset=function(v,y,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,v);case 2:case 3:return l(this,v,y,g);default:throw new SyntaxError("Wrong number of arguments")}};function s(v,y){if(!Zv(y))throw new TypeError("Invalid index");var g=y.isScalar();if(g)return v.get(y.min());var w=y.size();if(w.length!==v._size.length)throw new ar(w.length,v._size.length);var b,m,x,S,E=y.min(),A=y.max();for(b=0,m=v._size.length;b<m;b++)Pr(E[b],v._size[b]),Pr(A[b],v._size[b]);var T=v._values,C=v._index,D=v._ptr,O=y.dimension(0),U=y.dimension(1),L=[],F=[];O.forEach(function(B,X){F[B]=X[0],L[B]=!0});var k=T?[]:void 0,R=[],z=[];return U.forEach(function(B){for(z.push(R.length),x=D[B],S=D[B+1];x<S;x++)b=C[x],L[b]===!0&&(R.push(F[b]),k&&k.push(T[x]))}),z.push(R.length),new i({values:k,index:R,ptr:z,size:w,datatype:v._datatype})}function l(v,y,g,w){if(!y||y.isIndex!==!0)throw new TypeError("Invalid index");var b=y.size(),m=y.isScalar(),x;if(Ft(g)?(x=g.size(),g=g.toArray()):x=rr(g),m){if(x.length!==0)throw new TypeError("Scalar expected");v.set(y.min(),g,w)}else{if(b.length!==1&&b.length!==2)throw new ar(b.length,v._size.length,"<");if(x.length<b.length){for(var S=0,E=0;b[S]===1&&x[S]===1;)S++;for(;b[S]===1;)E++,S++;g=sq(g,b.length,E,x)}if(!bd(b,x))throw new ar(b,x,">");if(b.length===1){var A=y.dimension(0);A.forEach(function(D,O){Pr(D),v.set([D,0],g[O[0]],w)})}else{var T=y.dimension(0),C=y.dimension(1);T.forEach(function(D,O){Pr(D),C.forEach(function(U,L){Pr(U),v.set([D,U],g[O[0]][L[0]],w)})})}}return v}i.prototype.get=function(v){if(!Sr(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new ar(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var y=v[0],g=v[1];Pr(y,this._size[0]),Pr(g,this._size[1]);var w=u(y,this._ptr[g],this._ptr[g+1],this._index);return w<this._ptr[g+1]&&this._index[w]===y?this._values[w]:0},i.prototype.set=function(v,y,g){if(!Sr(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new ar(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var w=v[0],b=v[1],m=this._size[0],x=this._size[1],S=t,E=0;Ci(this._datatype)&&(S=e.find(t,[this._datatype,this._datatype])||t,E=e.convert(0,this._datatype)),(w>m-1||b>x-1)&&(d(this,Math.max(w+1,m),Math.max(b+1,x),g),m=this._size[0],x=this._size[1]),Pr(w,m),Pr(b,x);var A=u(w,this._ptr[b],this._ptr[b+1],this._index);return A<this._ptr[b+1]&&this._index[A]===w?S(y,E)?c(A,b,this._values,this._index,this._ptr):this._values[A]=y:S(y,E)||h(A,w,b,y,this._values,this._index,this._ptr),this};function u(v,y,g,w){if(g-y===0)return g;for(var b=y;b<g;b++)if(w[b]===v)return b;return y}function c(v,y,g,w,b){g.splice(v,1),w.splice(v,1);for(var m=y+1;m<b.length;m++)b[m]--}function h(v,y,g,w,b,m,x){b.splice(v,0,w),m.splice(v,0,y);for(var S=g+1;S<x.length;S++)x[S]++}i.prototype.resize=function(v,y,g){if(!_o(v))throw new TypeError("Array or Matrix expected");var w=v.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m);if(w.length!==2)throw new Error("Only two dimensions matrix are supported");w.forEach(function(m){if(!tr(m)||!Nt(m)||m<0)throw new TypeError("Invalid size, must contain positive integers (size: "+lr(w)+")")});var b=g?this.clone():this;return d(b,w[0],w[1],y)};function d(v,y,g,w){var b=w||0,m=t,x=0;Ci(v._datatype)&&(m=e.find(t,[v._datatype,v._datatype])||t,x=e.convert(0,v._datatype),b=e.convert(b,v._datatype));var S=!m(b,x),E=v._size[0],A=v._size[1],T,C,D;if(g>A){for(C=A;C<g;C++)if(v._ptr[C]=v._values.length,S)for(T=0;T<E;T++)v._values.push(b),v._index.push(T);v._ptr[g]=v._values.length}else g<A&&(v._ptr.splice(g+1,A-g),v._values.splice(v._ptr[g],v._values.length),v._index.splice(v._ptr[g],v._index.length));if(A=g,y>E){if(S){var O=0;for(C=0;C<A;C++){v._ptr[C]=v._ptr[C]+O,D=v._ptr[C+1]+O;var U=0;for(T=E;T<y;T++,U++)v._values.splice(D+U,0,b),v._index.splice(D+U,0,T),O++}v._ptr[A]=v._values.length}}else if(y<E){var L=0;for(C=0;C<A;C++){v._ptr[C]=v._ptr[C]-L;var F=v._ptr[C],k=v._ptr[C+1]-L;for(D=F;D<k;D++)T=v._index[D],T>y-1&&(v._values.splice(D,1),v._index.splice(D,1),L++)}v._ptr[C]=v._values.length}return v._size[0]=y,v._size[1]=g,v}i.prototype.reshape=function(v,y){if(!Sr(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(B){if(!tr(B)||!Nt(B)||B<=-2||B===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+lr(v)+")")});var g=this._size[0]*this._size[1];v=dN(v,g);var w=v[0]*v[1];if(g!==w)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=y?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return b;for(var m=[],x=0;x<b._ptr.length;x++)for(var S=0;S<b._ptr[x+1]-b._ptr[x];S++)m.push(x);for(var E=b._values.slice(),A=b._index.slice(),T=0;T<b._index.length;T++){var C=A[T],D=m[T],O=C*b._size[1]+D;m[T]=O%v[1],A[T]=Math.floor(O/v[1])}b._values.length=0,b._index.length=0,b._ptr.length=v[1]+1,b._size=v.slice();for(var U=0;U<b._ptr.length;U++)b._ptr[U]=0;for(var L=0;L<E.length;L++){var F=A[L],k=m[L],R=E[L],z=u(F,b._ptr[k],b._ptr[k+1],b._index);h(z,F,k,R,b._values,b._index,b._ptr)}return b},i.prototype.clone=function(){var v=new i({values:this._values?Gt(this._values):void 0,index:Gt(this._index),ptr:Gt(this._ptr),size:Gt(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,y){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,w=this._size[0],b=this._size[1],m=dq(v),x=function(S,E,A){return m===1?v(S):m===2?v(S,[E,A]):v(S,[E,A],g)};return f(this,0,w-1,0,b-1,x,y)};function f(v,y,g,w,b,m,x){var S=[],E=[],A=[],T=t,C=0;Ci(v._datatype)&&(T=e.find(t,[v._datatype,v._datatype])||t,C=e.convert(0,v._datatype));for(var D=function(Q,J,ne){Q=m(Q,J,ne),T(Q,C)||(S.push(Q),E.push(J))},O=w;O<=b;O++){A.push(S.length);var U=v._ptr[O],L=v._ptr[O+1];if(x)for(var F=U;F<L;F++){var k=v._index[F];k>=y&&k<=g&&D(v._values[F],k-y,O-w)}else{for(var R={},z=U;z<L;z++){var B=v._index[z];R[B]=v._values[z]}for(var X=y;X<=g;X++){var Z=X in R?R[X]:0;D(Z,X-y,O-w)}}}return A.push(S.length),new i({values:S,index:E,ptr:A,size:[g-y+1,b-w+1]})}i.prototype.forEach=function(v,y){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,w=this._size[0],b=this._size[1],m=0;m<b;m++){var x=this._ptr[m],S=this._ptr[m+1];if(y)for(var E=x;E<S;E++){var A=this._index[E];v(this._values[E],[A,m],g)}else{for(var T={},C=x;C<S;C++){var D=this._index[C];T[D]=this._values[C]}for(var O=0;O<w;O++){var U=O in T?T[O]:0;v(U,[O,m],g)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],y=0;y<v;y++)for(var g=this._ptr[y],w=this._ptr[y+1],b=g;b<w;b++){var m=this._index[b];yield{value:this._values[b],index:[m,y]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(v,y,g,w,b){var m=w[0],x=w[1],S=[],E,A;for(E=0;E<m;E++)for(S[E]=[],A=0;A<x;A++)S[E][A]=0;for(A=0;A<x;A++)for(var T=g[A],C=g[A+1],D=T;D<C;D++)E=y[D],S[E][A]=v?b?Gt(v[D]):v[D]:1;return S}return i.prototype.format=function(v){for(var y=this._size[0],g=this._size[1],w=this.density(),b="Sparse Matrix ["+lr(y,v)+" x "+lr(g,v)+"] density: "+lr(w,v)+`
`,m=0;m<g;m++)for(var x=this._ptr[m],S=this._ptr[m+1],E=x;E<S;E++){var A=this._index[E];b+=`
    (`+lr(A,v)+", "+lr(m,v)+") ==> "+(this._values?lr(this._values[E],v):"X")}return b},i.prototype.toString=function(){return lr(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Kt(v)&&(v=v.toNumber()),!tr(v)||!Nt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var y=v>0?v:0,g=v<0?-v:0,w=this._size[0],b=this._size[1],m=Math.min(w-g,b-y),x=[],S=[],E=[];E[0]=0;for(var A=y;A<b&&x.length<m;A++)for(var T=this._ptr[A],C=this._ptr[A+1],D=T;D<C;D++){var O=this._index[D];if(O===A-y+g){x.push(this._values[D]),S[x.length-1]=O-g;break}}return E.push(x.length),new i({values:x,index:S,ptr:E,size:[m,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,y,g,w,b){if(!Sr(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(B){if(Kt(B)&&(B=B.toNumber()),!tr(B)||!Nt(B)||B<1)throw new Error("Size values must be positive integers");return B}),g){if(Kt(g)&&(g=g.toNumber()),!tr(g)||!Nt(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var m=t,x=0;Ci(b)&&(m=e.find(t,[b,b])||t,x=e.convert(0,b));var S=g>0?g:0,E=g<0?-g:0,A=v[0],T=v[1],C=Math.min(A-E,T-S),D;if(Sr(y)){if(y.length!==C)throw new Error("Invalid value array length");D=function(B){return y[B]}}else if(Ft(y)){var O=y.size();if(O.length!==1||O[0]!==C)throw new Error("Invalid matrix length");D=function(B){return y.get([B])}}else D=function(){return y};for(var U=[],L=[],F=[],k=0;k<T;k++){F.push(U.length);var R=k-S;if(R>=0&&R<C){var z=D(R);m(z,x)||(L.push(R+E),U.push(z))}}return F.push(U.length),new i({values:U,index:L,ptr:F,size:[A,T]})},i.prototype.swapRows=function(v,y){if(!tr(v)||!Nt(v)||!tr(y)||!Nt(y))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Pr(v,this._size[0]),Pr(y,this._size[0]),i._swapRows(v,y,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,y,g,w,b){for(var m=w[v],x=w[v+1],S=m;S<x;S++)b(g[S],y[S])},i._swapRows=function(v,y,g,w,b,m){for(var x=0;x<g;x++){var S=m[x],E=m[x+1],A=u(v,S,E,b),T=u(y,S,E,b);if(A<E&&T<E&&b[A]===v&&b[T]===y){if(w){var C=w[A];w[A]=w[T],w[T]=C}continue}if(A<E&&b[A]===v&&(T>=E||b[T]!==y)){var D=w?w[A]:void 0;b.splice(T,0,y),w&&w.splice(T,0,D),b.splice(T<=A?A+1:A,1),w&&w.splice(T<=A?A+1:A,1);continue}if(T<E&&b[T]===y&&(A>=E||b[A]!==v)){var O=w?w[T]:void 0;b.splice(A,0,v),w&&w.splice(A,0,O),b.splice(A<=T?T+1:T,1),w&&w.splice(A<=T?T+1:T,1)}}},i},{isClass:!0}),Nse="number",Ose=["typed"];function Rse(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:r,radix:t,integerPart:n,fractionalPart:i}}else return null}function Pse(r){for(var e=parseInt(r.integerPart,r.radix),t=0,n=0;n<r.fractionalPart.length;n++){var i=parseInt(r.fractionalPart[n],r.radix);t+=i/Math.pow(r.radix,n+1)}var a=e+t;if(isNaN(a))throw new SyntaxError('String "'+r.input+'" is not a valid number');return a}var Ise=ae(Nse,Ose,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(n){return n},string:function(n){if(n==="NaN")return NaN;var i=Rse(n);if(i)return Pse(i);var a=0,o=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(a=Number(o[2]),n=o[1]);var s=Number(n);if(isNaN(s))throw new SyntaxError('String "'+n+'" is not a valid number');if(o){if(s>2**a-1)throw new SyntaxError('String "'.concat(n,'" is out of range'));s>=2**(a-1)&&(s=s-2**a)}return s},BigNumber:function(n){return n.toNumber()},Fraction:function(n){return n.valueOf()},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),null:function(n){return 0},"Unit, string | Unit":function(n,i){return n.toNumber(i)},"Array | Matrix":e.referToSelf(n=>i=>ur(i,n))});return t.fromJSON=function(n){return parseFloat(n.value)},t}),ZL="string",Lse=["typed"],Fse=ae(ZL,Lse,r=>{var{typed:e}=r;return e(ZL,{"":function(){return""},number:id,null:function(t){return"null"},boolean:function(t){return t+""},string:function(t){return t},"Array | Matrix":e.referToSelf(t=>n=>ur(n,t)),any:function(t){return String(t)}})}),KL="boolean",Bse=["typed"],zse=ae(KL,Bse,r=>{var{typed:e}=r;return e(KL,{"":function(){return!1},boolean:function(t){return t},number:function(t){return!!t},null:function(t){return!1},BigNumber:function(t){return!t.isZero()},string:function(t){var n=t.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;var i=Number(t);if(t!==""&&!isNaN(i))return!!i;throw new Error('Cannot convert "'+t+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),Use="bignumber",jse=["typed","BigNumber"],Hse=ae(Use,jse,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(n){return new t(n+"")},string:function(n){var i=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(i){var a=i[2],o=t(i[1]),s=new t(2).pow(Number(a));if(o.gt(s.sub(1)))throw new SyntaxError('String "'.concat(n,'" is out of range'));var l=new t(2).pow(Number(a)-1);return o.gte(l)?o.sub(s):o}return new t(n)},BigNumber:function(n){return n},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Fraction:function(n){return new t(n.n).div(n.d).times(n.s)},null:function(n){return new t(0)},"Array | Matrix":e.referToSelf(n=>i=>ur(i,n))})}),Vse="complex",qse=["typed","Complex"],Wse=ae(Vse,qse,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(n){return new t(n,0)},"number, number":function(n,i){return new t(n,i)},"BigNumber, BigNumber":function(n,i){return new t(n.toNumber(),i.toNumber())},Fraction:function(n){return new t(n.valueOf(),0)},Complex:function(n){return n.clone()},string:function(n){return t(n)},null:function(n){return t(0)},Object:function(n){if("re"in n&&"im"in n)return new t(n.re,n.im);if("r"in n&&"phi"in n||"abs"in n&&"arg"in n)return new t(n);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>ur(i,n))})}),Gse="fraction",$se=["typed","Fraction"],Xse=ae(Gse,$se,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(n){if(!isFinite(n)||isNaN(n))throw new Error(n+" cannot be represented as a fraction");return new t(n)},string:function(n){return new t(n)},"number, number":function(n,i){return new t(n,i)},null:function(n){return new t(0)},BigNumber:function(n){return new t(n.toString())},Fraction:function(n){return n},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Object:function(n){return new t(n)},"Array | Matrix":e.referToSelf(n=>i=>ur(i,n))})}),QL="matrix",Yse=["typed","Matrix","DenseMatrix","SparseMatrix"],Jse=ae(QL,Yse,r=>{var{typed:e,Matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(QL,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,s){return a([],o,s)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,l){if(s==="dense"||s==="default"||s===void 0)return new n(o,l);if(s==="sparse")return new i(o,l);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),e4="matrixFromFunction",Zse=["typed","matrix","isZero"],Kse=ae(e4,Zse,r=>{var{typed:e,matrix:t,isZero:n}=r;return e(e4,{"Array | Matrix, function, string, string":function(a,o,s,l){return i(a,o,s,l)},"Array | Matrix, function, string":function(a,o,s){return i(a,o,s)},"Matrix, function":function(a,o){return i(a,o,"dense")},"Array, function":function(a,o){return i(a,o,"dense").toArray()},"Array | Matrix, string, function":function(a,o,s){return i(a,s,o)},"Array | Matrix, string, string, function":function(a,o,s,l){return i(a,l,o,s)}});function i(a,o,s,l){var u;return l!==void 0?u=t(s,l):u=t(s),u.resize(a),u.forEach(function(c,h){var d=o(h);n(d)||u.set(h,d)}),u}}),t4="matrixFromRows",Qse=["typed","matrix","flatten","size"],ele=ae(t4,Qse,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(t4,{"...Array":function(s){return a(s)},"...Matrix":function(s){return t(a(s.map(l=>l.toArray())))}});function a(s){if(s.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=o(s[0]),u=[];for(var c of s){var h=o(c);if(h!==l)throw new TypeError("The vectors had different length: "+(l|0)+" ≠ "+(h|0));u.push(n(c))}return u}function o(s){var l=i(s);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),r4="matrixFromColumns",tle=["typed","matrix","flatten","size"],rle=ae(r4,tle,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(r4,{"...Array":function(s){return a(s)},"...Matrix":function(s){return t(a(s.map(l=>l.toArray())))}});function a(s){if(s.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=o(s[0]),u=[],c=0;c<l;c++)u[c]=[];for(var h of s){var d=o(h);if(d!==l)throw new TypeError("The vectors had different length: "+(l|0)+" ≠ "+(d|0));for(var f=n(h),p=0;p<l;p++)u[p].push(f[p])}return u}function o(s){var l=i(s);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),n4="splitUnit",nle=["typed"],ile=ae(n4,nle,r=>{var{typed:e}=r;return e(n4,{"Unit, Array":function(t,n){return t.splitUnit(n)}})}),i4="unaryMinus",ale=["typed"],ole=ae(i4,ale,r=>{var{typed:e}=r;return e(i4,{number:yq,"Complex | BigNumber | Fraction":t=>t.neg(),Unit:e.referToSelf(t=>n=>{var i=n.clone();return i.value=e.find(t,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),a4="unaryPlus",sle=["typed","config","BigNumber"],lle=ae(a4,sle,r=>{var{typed:e,config:t,BigNumber:n}=r;return e(a4,{number:bq,Complex:function(i){return i},BigNumber:function(i){return i},Fraction:function(i){return i},Unit:function(i){return i.clone()},"Array | Matrix":e.referToSelf(i=>a=>ur(a,i)),"boolean | string":function(i){return t.number==="BigNumber"?new n(+i):+i}})}),o4="abs",ule=["typed"],cle=ae(o4,ule,r=>{var{typed:e}=r;return e(o4,{number:pq,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),s4="apply",hle=["typed","isInteger"],pN=ae(s4,hle,r=>{var{typed:e,isInteger:t}=r;return e(s4,{"Array | Matrix, number | BigNumber, function":function(n,i,a){if(!t(i))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(n)?rr(n):n.size();if(i<0||i>=o.length)throw new as(i,o.length);return Ft(n)?n.create(uS(n.valueOf(),i,a)):uS(n,i,a)}})});function uS(r,e,t){var n,i,a;if(e<=0)if(Array.isArray(r[0])){for(a=dle(r),i=[],n=0;n<a.length;n++)i[n]=uS(a[n],e-1,t);return i}else return t(r);else{for(i=[],n=0;n<r.length;n++)i[n]=uS(r[n],e-1,t);return i}}function dle(r){var e=r.length,t=r[0].length,n,i,a=[];for(i=0;i<t;i++){var o=[];for(n=0;n<e;n++)o.push(r[n][i]);a.push(o)}return a}var l4="addScalar",fle=["typed"],ple=ae(l4,fle,r=>{var{typed:e}=r;return e(l4,{"number, number":mq,"Complex, Complex":function(t,n){return t.add(n)},"BigNumber, BigNumber":function(t,n){return t.plus(n)},"Fraction, Fraction":function(t,n){return t.add(n)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(t,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),u4="subtractScalar",mle=["typed"],gle=ae(u4,mle,r=>{var{typed:e}=r;return e(u4,{"number, number":gq,"Complex, Complex":function(t,n){return t.sub(n)},"BigNumber, BigNumber":function(t,n){return t.minus(n)},"Fraction, Fraction":function(t,n){return t.sub(n)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(t,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),c4="cbrt",vle=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],yle=ae(c4,vle,r=>{var{config:e,typed:t,isNegative:n,unaryMinus:i,matrix:a,Complex:o,BigNumber:s,Fraction:l}=r;return t(c4,{number:Gg,Complex:u,"Complex, boolean":u,BigNumber:function(h){return h.cbrt()},Unit:c});function u(h,d){var f=h.arg()/3,p=h.abs(),v=new o(Gg(p),0).mul(new o(0,f).exp());if(d){var y=[v,new o(Gg(p),0).mul(new o(0,f+Math.PI*2/3).exp()),new o(Gg(p),0).mul(new o(0,f-Math.PI*2/3).exp())];return e.matrix==="Array"?y:a(y)}else return v}function c(h){if(h.value&&_s(h.value)){var d=h.clone();return d.value=1,d=d.pow(1/3),d.value=u(h.value),d}else{var f=n(h.value);f&&(h.value=i(h.value));var p;Kt(h.value)?p=new s(1).div(3):Id(h.value)?p=new l(1,3):p=1/3;var v=h.pow(p);return f&&(v.value=i(v.value)),v}}}),ble="matAlgo11xS0s",xle=["typed","equalScalar"],Ii=ae(ble,xle,r=>{var{typed:e,equalScalar:t}=r;return function(n,i,a,o){var s=n._values,l=n._index,u=n._ptr,c=n._size,h=n._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=c[0],f=c[1],p,v=t,y=0,g=a;typeof h=="string"&&(p=h,v=e.find(t,[p,p]),y=e.convert(0,p),i=e.convert(i,p),g=e.find(a,[p,p]));for(var w=[],b=[],m=[],x=0;x<f;x++){m[x]=b.length;for(var S=u[x],E=u[x+1],A=S;A<E;A++){var T=l[A],C=o?g(i,s[A]):g(s[A],i);v(C,y)||(b.push(T),w.push(C))}}return m[f]=b.length,n.createSparseMatrix({values:w,index:b,ptr:m,size:[d,f],datatype:p})}}),wle="matAlgo12xSfs",Sle=["typed","DenseMatrix"],ui=ae(wle,Sle,r=>{var{typed:e,DenseMatrix:t}=r;return function(n,i,a,o){var s=n._values,l=n._index,u=n._ptr,c=n._size,h=n._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=c[0],f=c[1],p,v=a;typeof h=="string"&&(p=h,i=e.convert(i,p),v=e.find(a,[p,p]));for(var y=[],g=[],w=[],b=0;b<f;b++){for(var m=b+1,x=u[b],S=u[b+1],E=x;E<S;E++){var A=l[E];g[A]=s[E],w[A]=m}for(var T=0;T<d;T++)b===0&&(y[T]=[]),w[T]===m?y[T][b]=o?v(i,g[T]):v(g[T],i):y[T][b]=o?v(i,0):v(0,i)}return new t({data:y,size:[d,f],datatype:p})}}),Mle="matAlgo14xDs",_le=["typed"],Os=ae(Mle,_le,r=>{var{typed:e}=r;return function(n,i,a,o){var s=n._data,l=n._size,u=n._datatype,c,h=a;typeof u=="string"&&(c=u,i=e.convert(i,c),h=e.find(a,[c,c]));var d=l.length>0?t(h,0,l,l[0],s,i,o):[];return n.createDenseMatrix({data:d,size:Gt(l),datatype:c})};function t(n,i,a,o,s,l,u){var c=[];if(i===a.length-1)for(var h=0;h<o;h++)c[h]=u?n(l,s[h]):n(s[h],l);else for(var d=0;d<o;d++)c[d]=t(n,i+1,a,a[i+1],s[d],l,u);return c}}),PT="ceil",Ele=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Cle=ae(PT,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;return e(PT,{number:function(i){return Ta(i,n(i),t.epsilon)?n(i):Math.ceil(i)},"number, number":function(i,a){if(Ta(i,n(i,a),t.epsilon))return n(i,a);var[o,s]="".concat(i,"e").split("e"),l=Math.ceil(Number("".concat(o,"e").concat(Number(s)+a)));return[o,s]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(s)-a))}})}),Ale=ae(PT,Ele,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=r,l=Ii({typed:e,equalScalar:a}),u=ui({typed:e,DenseMatrix:s}),c=Os({typed:e}),h=Cle({typed:e,config:t,round:n});return e("ceil",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(d){return d.ceil()},"Complex, number":function(d,f){return d.ceil(f)},"Complex, BigNumber":function(d,f){return d.ceil(f.toNumber())},BigNumber:function(d){return Qo(d,n(d),t.epsilon)?n(d):d.ceil()},"BigNumber, BigNumber":function(d,f){return Qo(d,n(d,f),t.epsilon)?n(d,f):d.toDecimalPlaces(f.toNumber(),Hc.ROUND_CEIL)},Fraction:function(d){return d.ceil()},"Fraction, number":function(d,f){return d.ceil(f)},"Fraction, BigNumber":function(d,f){return d.ceil(f.toNumber())},"Array | Matrix":e.referToSelf(d=>f=>ur(f,d)),"Array, number | BigNumber":e.referToSelf(d=>(f,p)=>ur(f,v=>d(v,p))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>l(f,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>c(f,p,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(f,p)=>c(i(p),f,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(f,p)=>a(f,0)?o(p.size(),p.storage()):p.storage()==="dense"?c(p,f,d,!0):u(p,f,d,!0))})}),h4="cube",Tle=["typed"],Dle=ae(h4,Tle,r=>{var{typed:e}=r;return e(h4,{number:xq,Complex:function(t){return t.mul(t).mul(t)},BigNumber:function(t){return t.times(t).times(t)},Fraction:function(t){return t.pow(3)},Unit:function(t){return t.pow(3)}})}),d4="exp",kle=["typed"],Nle=ae(d4,kle,r=>{var{typed:e}=r;return e(d4,{number:wq,Complex:function(t){return t.exp()},BigNumber:function(t){return t.exp()}})}),f4="expm1",Ole=["typed","Complex"],Rle=ae(f4,Ole,r=>{var{typed:e,Complex:t}=r;return e(f4,{number:Sq,Complex:function(n){var i=Math.exp(n.re);return new t(i*Math.cos(n.im)-1,i*Math.sin(n.im))},BigNumber:function(n){return n.exp().minus(1)}})}),IT="fix",Ple=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],Ile=ae(IT,["typed","ceil","floor"],r=>{var{typed:e,ceil:t,floor:n}=r;return e(IT,{number:function(i){return i>0?n(i):t(i)},"number, number":function(i,a){return i>0?n(i,a):t(i,a)}})}),Lle=ae(IT,Ple,r=>{var{typed:e,Complex:t,matrix:n,ceil:i,floor:a,equalScalar:o,zeros:s,DenseMatrix:l}=r,u=ui({typed:e,DenseMatrix:l}),c=Os({typed:e}),h=Ile({typed:e,ceil:i,floor:a});return e("fix",{number:h.signatures.number,"number, number | BigNumber":h.signatures["number,number"],Complex:function(d){return new t(d.re>0?Math.floor(d.re):Math.ceil(d.re),d.im>0?Math.floor(d.im):Math.ceil(d.im))},"Complex, number":function(d,f){return new t(d.re>0?a(d.re,f):i(d.re,f),d.im>0?a(d.im,f):i(d.im,f))},"Complex, BigNumber":function(d,f){var p=f.toNumber();return new t(d.re>0?a(d.re,p):i(d.re,p),d.im>0?a(d.im,p):i(d.im,p))},BigNumber:function(d){return d.isNegative()?i(d):a(d)},"BigNumber, number | BigNumber":function(d,f){return d.isNegative()?i(d,f):a(d,f)},Fraction:function(d){return d.s<0?d.ceil():d.floor()},"Fraction, number | BigNumber":function(d,f){return d.s<0?i(d,f):a(d,f)},"Array | Matrix":e.referToSelf(d=>f=>ur(f,d)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(f,p)=>ur(f,v=>d(v,p))),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(f,p)=>c(n(p),f,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(f,p)=>o(f,0)?s(p.size(),p.storage()):p.storage()==="dense"?c(p,f,d,!0):u(p,f,d,!0))})}),LT="floor",Fle=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Ble=ae(LT,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;return e(LT,{number:function(i){return Ta(i,n(i),t.epsilon)?n(i):Math.floor(i)},"number, number":function(i,a){if(Ta(i,n(i,a),t.epsilon))return n(i,a);var[o,s]="".concat(i,"e").split("e"),l=Math.floor(Number("".concat(o,"e").concat(Number(s)+a)));return[o,s]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(s)-a))}})}),uW=ae(LT,Fle,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=r,l=Ii({typed:e,equalScalar:a}),u=ui({typed:e,DenseMatrix:s}),c=Os({typed:e}),h=Ble({typed:e,config:t,round:n});return e("floor",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(d){return d.floor()},"Complex, number":function(d,f){return d.floor(f)},"Complex, BigNumber":function(d,f){return d.floor(f.toNumber())},BigNumber:function(d){return Qo(d,n(d),t.epsilon)?n(d):d.floor()},"BigNumber, BigNumber":function(d,f){return Qo(d,n(d,f),t.epsilon)?n(d,f):d.toDecimalPlaces(f.toNumber(),Hc.ROUND_FLOOR)},Fraction:function(d){return d.floor()},"Fraction, number":function(d,f){return d.floor(f)},"Fraction, BigNumber":function(d,f){return d.floor(f.toNumber())},"Array | Matrix":e.referToSelf(d=>f=>ur(f,d)),"Array, number | BigNumber":e.referToSelf(d=>(f,p)=>ur(f,v=>d(v,p))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>l(f,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>c(f,p,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(f,p)=>c(i(p),f,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(f,p)=>a(f,0)?o(p.size(),p.storage()):p.storage()==="dense"?c(p,f,d,!0):u(p,f,d,!0))})}),zle="matAlgo02xDS0",Ule=["typed","equalScalar"],Rs=ae(zle,Ule,r=>{var{typed:e,equalScalar:t}=r;return function(n,i,a,o){var s=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,h=i._index,d=i._ptr,f=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==f.length)throw new ar(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],y=l[1],g,w=t,b=0,m=a;typeof u=="string"&&u===p&&u!=="mixed"&&(g=u,w=e.find(t,[g,g]),b=e.convert(0,g),m=e.find(a,[g,g]));for(var x=[],S=[],E=[],A=0;A<y;A++){E[A]=S.length;for(var T=d[A],C=d[A+1],D=T;D<C;D++){var O=h[D],U=o?m(c[D],s[O][A]):m(s[O][A],c[D]);w(U,b)||(S.push(O),x.push(U))}}return E[y]=S.length,i.createSparseMatrix({values:x,index:S,ptr:E,size:[v,y],datatype:u===n._datatype&&p===i._datatype?g:void 0})}}),jle="matAlgo03xDSf",Hle=["typed"],Oa=ae(jle,Hle,r=>{var{typed:e}=r;return function(t,n,i,a){var o=t._data,s=t._size,l=t._datatype||t.getDataType(),u=n._values,c=n._index,h=n._ptr,d=n._size,f=n._datatype||n._data===void 0?n._datatype:n.getDataType();if(s.length!==d.length)throw new ar(s.length,d.length);if(s[0]!==d[0]||s[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+d+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=s[0],v=s[1],y,g=0,w=i;typeof l=="string"&&l===f&&l!=="mixed"&&(y=l,g=e.convert(0,y),w=e.find(i,[y,y]));for(var b=[],m=0;m<p;m++)b[m]=[];for(var x=[],S=[],E=0;E<v;E++){for(var A=E+1,T=h[E],C=h[E+1],D=T;D<C;D++){var O=c[D];x[O]=a?w(u[D],o[O][E]):w(o[O][E],u[D]),S[O]=A}for(var U=0;U<p;U++)S[U]===A?b[U][E]=x[U]:b[U][E]=a?w(g,o[U][E]):w(o[U][E],g)}return t.createDenseMatrix({data:b,size:[p,v],datatype:l===t._datatype&&f===n._datatype?y:void 0})}}),Vle="matAlgo05xSfSf",qle=["typed","equalScalar"],UM=ae(Vle,qle,r=>{var{typed:e,equalScalar:t}=r;return function(n,i,a){var o=n._values,s=n._index,l=n._ptr,u=n._size,c=n._datatype||n._data===void 0?n._datatype:n.getDataType(),h=i._values,d=i._index,f=i._ptr,p=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==p.length)throw new ar(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");var y=u[0],g=u[1],w,b=t,m=0,x=a;typeof c=="string"&&c===v&&c!=="mixed"&&(w=c,b=e.find(t,[w,w]),m=e.convert(0,w),x=e.find(a,[w,w]));var S=o&&h?[]:void 0,E=[],A=[],T=S?[]:void 0,C=S?[]:void 0,D=[],O=[],U,L,F,k;for(L=0;L<g;L++){A[L]=E.length;var R=L+1;for(F=l[L],k=l[L+1];F<k;F++)U=s[F],E.push(U),D[U]=R,T&&(T[U]=o[F]);for(F=f[L],k=f[L+1];F<k;F++)U=d[F],D[U]!==R&&E.push(U),O[U]=R,C&&(C[U]=h[F]);if(S)for(F=A[L];F<E.length;){U=E[F];var z=D[U],B=O[U];if(z===R||B===R){var X=z===R?T[U]:m,Z=B===R?C[U]:m,Q=x(X,Z);b(Q,m)?E.splice(F,1):(S.push(Q),F++)}}}return A[g]=E.length,n.createSparseMatrix({values:S,index:E,ptr:A,size:[y,g],datatype:c===n._datatype&&v===i._datatype?w:void 0})}}),Wle="matAlgo13xDD",Gle=["typed"],$le=ae(Wle,Gle,r=>{var{typed:e}=r;return function(n,i,a){var o=n._data,s=n._size,l=n._datatype,u=i._data,c=i._size,h=i._datatype,d=[];if(s.length!==c.length)throw new ar(s.length,c.length);for(var f=0;f<s.length;f++){if(s[f]!==c[f])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");d[f]=s[f]}var p,v=a;typeof l=="string"&&l===h&&(p=l,v=e.find(a,[p,p]));var y=d.length>0?t(v,0,d,d[0],o,u):[];return n.createDenseMatrix({data:y,size:d,datatype:p})};function t(n,i,a,o,s,l){var u=[];if(i===a.length-1)for(var c=0;c<o;c++)u[c]=n(s[c],l[c]);else for(var h=0;h<o;h++)u[h]=t(n,i+1,a,a[i+1],s[h],l[h]);return u}}),Xle="broadcast",Yle=["concat"],Jle=ae(Xle,Yle,r=>{var{concat:e}=r;return function(i,a){var o=Math.max(i._size.length,a._size.length);if(i._size.length===a._size.length&&i._size.every((p,v)=>p===a._size[v]))return[i,a];for(var s=t(i._size,o,0),l=t(a._size,o,0),u=[],c=0;c<o;c++)u[c]=Math.max(s[c],l[c]);iS(s,u),iS(l,u);var h=i.clone(),d=a.clone();h._size.length<o?h.reshape(t(h._size,o,1)):d._size.length<o&&d.reshape(t(d._size,o,1));for(var f=0;f<o;f++)h._size[f]<u[f]&&(h=n(h,u[f],f)),d._size[f]<u[f]&&(d=n(d,u[f],f));return[h,d]};function t(i,a,o){return[...Array(a-i.length).fill(o),...i]}function n(i,a,o){return e(...Array(a).fill(i),o)}}),Zle="matrixAlgorithmSuite",Kle=["typed","matrix","concat"],Gr=ae(Zle,Kle,r=>{var{typed:e,matrix:t,concat:n}=r,i=$le({typed:e}),a=Os({typed:e}),o=Jle({concat:n});return function(s){var l=s.elop,u=s.SD||s.DS,c;l?(c={"DenseMatrix, DenseMatrix":(p,v)=>i(...o(p,v),l),"Array, Array":(p,v)=>i(...o(t(p),t(v)),l).valueOf(),"Array, DenseMatrix":(p,v)=>i(...o(t(p),v),l),"DenseMatrix, Array":(p,v)=>i(...o(p,t(v)),l)},s.SS&&(c["SparseMatrix, SparseMatrix"]=(p,v)=>s.SS(...o(p,v),l,!1)),s.DS&&(c["DenseMatrix, SparseMatrix"]=(p,v)=>s.DS(...o(p,v),l,!1),c["Array, SparseMatrix"]=(p,v)=>s.DS(...o(t(p),v),l,!1)),u&&(c["SparseMatrix, DenseMatrix"]=(p,v)=>u(...o(v,p),l,!0),c["SparseMatrix, Array"]=(p,v)=>u(...o(t(v),p),l,!0))):(c={"DenseMatrix, DenseMatrix":e.referToSelf(p=>(v,y)=>i(...o(v,y),p)),"Array, Array":e.referToSelf(p=>(v,y)=>i(...o(t(v),t(y)),p).valueOf()),"Array, DenseMatrix":e.referToSelf(p=>(v,y)=>i(...o(t(v),y),p)),"DenseMatrix, Array":e.referToSelf(p=>(v,y)=>i(...o(v,t(y)),p))},s.SS&&(c["SparseMatrix, SparseMatrix"]=e.referToSelf(p=>(v,y)=>s.SS(...o(v,y),p,!1))),s.DS&&(c["DenseMatrix, SparseMatrix"]=e.referToSelf(p=>(v,y)=>s.DS(...o(v,y),p,!1)),c["Array, SparseMatrix"]=e.referToSelf(p=>(v,y)=>s.DS(...o(t(v),y),p,!1))),u&&(c["SparseMatrix, DenseMatrix"]=e.referToSelf(p=>(v,y)=>u(...o(y,v),p,!0)),c["SparseMatrix, Array"]=e.referToSelf(p=>(v,y)=>u(...o(t(y),v),p,!0))));var h=s.scalar||"any",d=s.Ds||s.Ss;d&&(l?(c["DenseMatrix,"+h]=(p,v)=>a(p,v,l,!1),c[h+", DenseMatrix"]=(p,v)=>a(v,p,l,!0),c["Array,"+h]=(p,v)=>a(t(p),v,l,!1).valueOf(),c[h+", Array"]=(p,v)=>a(t(v),p,l,!0).valueOf()):(c["DenseMatrix,"+h]=e.referToSelf(p=>(v,y)=>a(v,y,p,!1)),c[h+", DenseMatrix"]=e.referToSelf(p=>(v,y)=>a(y,v,p,!0)),c["Array,"+h]=e.referToSelf(p=>(v,y)=>a(t(v),y,p,!1).valueOf()),c[h+", Array"]=e.referToSelf(p=>(v,y)=>a(t(y),v,p,!0).valueOf())));var f=s.sS!==void 0?s.sS:s.Ss;return l?(s.Ss&&(c["SparseMatrix,"+h]=(p,v)=>s.Ss(p,v,l,!1)),f&&(c[h+", SparseMatrix"]=(p,v)=>f(v,p,l,!0))):(s.Ss&&(c["SparseMatrix,"+h]=e.referToSelf(p=>(v,y)=>s.Ss(v,y,p,!1))),f&&(c[h+", SparseMatrix"]=e.referToSelf(p=>(v,y)=>f(y,v,p,!0)))),l&&l.signatures&&kV(c,l.signatures),c}}),p4="mod",Qle=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],cW=ae(p4,Qle,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s,concat:l}=r,u=uW({typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}),c=Rs({typed:e,equalScalar:a}),h=Oa({typed:e}),d=UM({typed:e,equalScalar:a}),f=Ii({typed:e,equalScalar:a}),p=ui({typed:e,DenseMatrix:s}),v=Gr({typed:e,matrix:i,concat:l});return e(p4,{"number, number":y,"BigNumber, BigNumber":function(g,w){return w.isZero()?g:g.sub(w.mul(u(g.div(w))))},"Fraction, Fraction":function(g,w){return w.equals(0)?g:g.sub(w.mul(u(g.div(w))))}},v({SS:d,DS:h,SD:c,Ss:f,sS:p}));function y(g,w){return w===0?g:g-w*u(g/w)}}),eue="matAlgo01xDSid",tue=["typed"],ah=ae(eue,tue,r=>{var{typed:e}=r;return function(t,n,i,a){var o=t._data,s=t._size,l=t._datatype||t.getDataType(),u=n._values,c=n._index,h=n._ptr,d=n._size,f=n._datatype||n._data===void 0?n._datatype:n.getDataType();if(s.length!==d.length)throw new ar(s.length,d.length);if(s[0]!==d[0]||s[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+d+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=s[0],v=s[1],y=typeof l=="string"&&l!=="mixed"&&l===f?l:void 0,g=y?e.find(i,[y,y]):i,w,b,m=[];for(w=0;w<p;w++)m[w]=[];var x=[],S=[];for(b=0;b<v;b++){for(var E=b+1,A=h[b],T=h[b+1],C=A;C<T;C++)w=c[C],x[w]=a?g(u[C],o[w][b]):g(o[w][b],u[C]),S[w]=E;for(w=0;w<p;w++)S[w]===E?m[w][b]=x[w]:m[w][b]=o[w][b]}return t.createDenseMatrix({data:m,size:[p,v],datatype:l===t._datatype&&f===n._datatype?y:void 0})}}),rue="matAlgo04xSidSid",nue=["typed","equalScalar"],mN=ae(rue,nue,r=>{var{typed:e,equalScalar:t}=r;return function(n,i,a){var o=n._values,s=n._index,l=n._ptr,u=n._size,c=n._datatype||n._data===void 0?n._datatype:n.getDataType(),h=i._values,d=i._index,f=i._ptr,p=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==p.length)throw new ar(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");var y=u[0],g=u[1],w,b=t,m=0,x=a;typeof c=="string"&&c===v&&c!=="mixed"&&(w=c,b=e.find(t,[w,w]),m=e.convert(0,w),x=e.find(a,[w,w]));var S=o&&h?[]:void 0,E=[],A=[],T=o&&h?[]:void 0,C=o&&h?[]:void 0,D=[],O=[],U,L,F,k,R;for(L=0;L<g;L++){A[L]=E.length;var z=L+1;for(k=l[L],R=l[L+1],F=k;F<R;F++)U=s[F],E.push(U),D[U]=z,T&&(T[U]=o[F]);for(k=f[L],R=f[L+1],F=k;F<R;F++)if(U=d[F],D[U]===z){if(T){var B=x(T[U],h[F]);b(B,m)?D[U]=null:T[U]=B}}else E.push(U),O[U]=z,C&&(C[U]=h[F]);if(T&&C)for(F=A[L];F<E.length;)U=E[F],D[U]===z?(S[F]=T[U],F++):O[U]===z?(S[F]=C[U],F++):E.splice(F,1)}return A[g]=E.length,n.createSparseMatrix({values:S,index:E,ptr:A,size:[y,g],datatype:c===n._datatype&&v===i._datatype?w:void 0})}}),iue="matAlgo10xSids",aue=["typed","DenseMatrix"],Fd=ae(iue,aue,r=>{var{typed:e,DenseMatrix:t}=r;return function(n,i,a,o){var s=n._values,l=n._index,u=n._ptr,c=n._size,h=n._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=c[0],f=c[1],p,v=a;typeof h=="string"&&(p=h,i=e.convert(i,p),v=e.find(a,[p,p]));for(var y=[],g=[],w=[],b=0;b<f;b++){for(var m=b+1,x=u[b],S=u[b+1],E=x;E<S;E++){var A=l[E];g[A]=s[E],w[A]=m}for(var T=0;T<d;T++)b===0&&(y[T]=[]),w[T]===m?y[T][b]=o?v(i,g[T]):v(g[T],i):y[T][b]=i}return new t({data:y,size:[d,f],datatype:p})}});function Nu(r,e,t,n){if(!(this instanceof Nu))throw new SyntaxError("Constructor must be called with the new operator");this.fn=r,this.count=e,this.min=t,this.max=n,this.message="Wrong number of arguments in function "+r+" ("+e+" provided, "+t+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}Nu.prototype=new Error;Nu.prototype.constructor=Error;Nu.prototype.name="ArgumentsError";Nu.prototype.isArgumentsError=!0;var m4="gcd",oue=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],FE="number | BigNumber | Fraction | Matrix | Array",sue="".concat(FE,", ").concat(FE,", ...").concat(FE);function g4(r){return!r.some(e=>Array.isArray(e))}var lue=ae(m4,oue,r=>{var{typed:e,matrix:t,config:n,round:i,equalScalar:a,zeros:o,BigNumber:s,DenseMatrix:l,concat:u}=r,c=cW({typed:e,config:n,round:i,matrix:t,equalScalar:a,zeros:o,DenseMatrix:l,concat:u}),h=ah({typed:e}),d=mN({typed:e,equalScalar:a}),f=Fd({typed:e,DenseMatrix:l}),p=Gr({typed:e,matrix:t,concat:u});return e(m4,{"number, number":v,"BigNumber, BigNumber":y,"Fraction, Fraction":(g,w)=>g.gcd(w)},p({SS:d,DS:h,Ss:f}),{[sue]:e.referToSelf(g=>(w,b,m)=>{for(var x=g(w,b),S=0;S<m.length;S++)x=g(x,m[S]);return x}),Array:e.referToSelf(g=>w=>{if(w.length===1&&Array.isArray(w[0])&&g4(w[0]))return g(...w[0]);if(g4(w))return g(...w);throw new Nu("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(g=>w=>g(w.toArray()))});function v(g,w){if(!Nt(g)||!Nt(w))throw new Error("Parameters in function gcd must be integer numbers");for(var b;w!==0;)b=c(g,w),g=w,w=b;return g<0?-g:g}function y(g,w){if(!g.isInt()||!w.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var b=new s(0);!w.isZero();){var m=c(g,w);g=w,w=m}return g.lt(b)?g.neg():g}}),uue="matAlgo06xS0S0",cue=["typed","equalScalar"],jM=ae(uue,cue,r=>{var{typed:e,equalScalar:t}=r;return function(n,i,a){var o=n._values,s=n._size,l=n._datatype||n._data===void 0?n._datatype:n.getDataType(),u=i._values,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(s.length!==c.length)throw new ar(s.length,c.length);if(s[0]!==c[0]||s[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");var d=s[0],f=s[1],p,v=t,y=0,g=a;typeof l=="string"&&l===h&&l!=="mixed"&&(p=l,v=e.find(t,[p,p]),y=e.convert(0,p),g=e.find(a,[p,p]));for(var w=o&&u?[]:void 0,b=[],m=[],x=w?[]:void 0,S=[],E=[],A=0;A<f;A++){m[A]=b.length;var T=A+1;if(UL(n,A,S,x,E,T,b,g),UL(i,A,S,x,E,T,b,g),x)for(var C=m[A];C<b.length;){var D=b[C];if(E[D]===T){var O=x[D];v(O,y)?b.splice(C,1):(w.push(O),C++)}else b.splice(C,1)}else for(var U=m[A];U<b.length;){var L=b[U];E[L]!==T?b.splice(U,1):U++}}return m[f]=b.length,n.createSparseMatrix({values:w,index:b,ptr:m,size:[d,f],datatype:l===n._datatype&&h===i._datatype?p:void 0})}}),v4="lcm",hue=["typed","matrix","equalScalar","concat"],due=ae(v4,hue,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,a=Rs({typed:e,equalScalar:n}),o=jM({typed:e,equalScalar:n}),s=Ii({typed:e,equalScalar:n}),l=Gr({typed:e,matrix:t,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(d=>(f,p,v)=>{for(var y=d(f,p),g=0;g<v.length;g++)y=d(y,v[g]);return y}),e(v4,{"number, number":Mq,"BigNumber, BigNumber":h,"Fraction, Fraction":(d,f)=>d.lcm(f)},l({SS:o,DS:a,Ss:s}),c);function h(d,f){if(!d.isInt()||!f.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(f.isZero())return f;for(var p=d.times(f);!f.isZero();){var v=f;f=d.mod(v),d=v}return p.div(d).abs()}}),y4="log10",fue=["typed","config","Complex"],pue=ae(y4,fue,r=>{var{typed:e,config:t,Complex:n}=r;return e(y4,{number:function(i){return i>=0||t.predictable?_q(i):new n(i,0).log().div(Math.LN10)},Complex:function(i){return new n(i).log().div(Math.LN10)},BigNumber:function(i){return!i.isNegative()||t.predictable?i.log():new n(i.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(i=>a=>ur(a,i))})}),b4="log2",mue=["typed","config","Complex"],gue=ae(b4,mue,r=>{var{typed:e,config:t,Complex:n}=r;return e(b4,{number:function(a){return a>=0||t.predictable?Eq(a):i(new n(a,0))},Complex:i,BigNumber:function(a){return!a.isNegative()||t.predictable?a.log(2):i(new n(a.toNumber(),0))},"Array | Matrix":e.referToSelf(a=>o=>ur(o,a))});function i(a){var o=Math.sqrt(a.re*a.re+a.im*a.im);return new n(Math.log2?Math.log2(o):Math.log(o)/Math.LN2,Math.atan2(a.im,a.re)/Math.LN2)}}),vue="multiplyScalar",yue=["typed"],bue=ae(vue,yue,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":vq,"Complex, Complex":function(t,n){return t.mul(n)},"BigNumber, BigNumber":function(t,n){return t.times(n)},"Fraction, Fraction":function(t,n){return t.mul(n)},"number | Fraction | BigNumber | Complex, Unit":(t,n)=>n.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,n)=>t.multiply(n)})}),x4="multiply",xue=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],wue=ae(x4,xue,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,equalScalar:a,dot:o}=r,s=Ii({typed:e,equalScalar:a}),l=Os({typed:e});function u(x,S){switch(x.length){case 1:switch(S.length){case 1:if(x[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(x[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+x[0]+") must match Matrix rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;case 2:switch(S.length){case 1:if(x[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+x[1]+") must match Vector length ("+S[0]+")");break;case 2:if(x[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+x[1]+") must match Matrix B rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+x.length+" dimensions)")}}function c(x,S,E){if(E===0)throw new Error("Cannot multiply two empty vectors");return o(x,S)}function h(x,S){if(S.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(x,S)}function d(x,S){var E=x._data,A=x._size,T=x._datatype||x.getDataType(),C=S._data,D=S._size,O=S._datatype||S.getDataType(),U=A[0],L=D[1],F,k=n,R=i;T&&O&&T===O&&typeof T=="string"&&T!=="mixed"&&(F=T,k=e.find(n,[F,F]),R=e.find(i,[F,F]));for(var z=[],B=0;B<L;B++){for(var X=R(E[0],C[0][B]),Z=1;Z<U;Z++)X=k(X,R(E[Z],C[Z][B]));z[B]=X}return x.createDenseMatrix({data:z,size:[L],datatype:T===x._datatype&&O===S._datatype?F:void 0})}var f=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":w}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":y,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":m});function v(x,S){var E=x._data,A=x._size,T=x._datatype||x.getDataType(),C=S._data,D=S._datatype||S.getDataType(),O=A[0],U=A[1],L,F=n,k=i;T&&D&&T===D&&typeof T=="string"&&T!=="mixed"&&(L=T,F=e.find(n,[L,L]),k=e.find(i,[L,L]));for(var R=[],z=0;z<O;z++){for(var B=E[z],X=k(B[0],C[0]),Z=1;Z<U;Z++)X=F(X,k(B[Z],C[Z]));R[z]=X}return x.createDenseMatrix({data:R,size:[O],datatype:T===x._datatype&&D===S._datatype?L:void 0})}function y(x,S){var E=x._data,A=x._size,T=x._datatype||x.getDataType(),C=S._data,D=S._size,O=S._datatype||S.getDataType(),U=A[0],L=A[1],F=D[1],k,R=n,z=i;T&&O&&T===O&&typeof T=="string"&&T!=="mixed"&&T!=="mixed"&&(k=T,R=e.find(n,[k,k]),z=e.find(i,[k,k]));for(var B=[],X=0;X<U;X++){var Z=E[X];B[X]=[];for(var Q=0;Q<F;Q++){for(var J=z(Z[0],C[0][Q]),ne=1;ne<L;ne++)J=R(J,z(Z[ne],C[ne][Q]));B[X][Q]=J}}return x.createDenseMatrix({data:B,size:[U,F],datatype:T===x._datatype&&O===S._datatype?k:void 0})}function g(x,S){var E=x._data,A=x._size,T=x._datatype||x.getDataType(),C=S._values,D=S._index,O=S._ptr,U=S._size,L=S._datatype||S._data===void 0?S._datatype:S.getDataType();if(!C)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var F=A[0],k=U[1],R,z=n,B=i,X=a,Z=0;T&&L&&T===L&&typeof T=="string"&&T!=="mixed"&&(R=T,z=e.find(n,[R,R]),B=e.find(i,[R,R]),X=e.find(a,[R,R]),Z=e.convert(0,R));for(var Q=[],J=[],ne=[],fe=S.createSparseMatrix({values:Q,index:J,ptr:ne,size:[F,k],datatype:T===x._datatype&&L===S._datatype?R:void 0}),se=0;se<k;se++){ne[se]=J.length;var ye=O[se],De=O[se+1];if(De>ye)for(var pe=0,Te=0;Te<F;Te++){for(var be=Te+1,re=void 0,Re=ye;Re<De;Re++){var ze=D[Re];pe!==be?(re=B(E[Te][ze],C[Re]),pe=be):re=z(re,B(E[Te][ze],C[Re]))}pe===be&&!X(re,Z)&&(J.push(Te),Q.push(re))}}return ne[k]=J.length,fe}function w(x,S){var E=x._values,A=x._index,T=x._ptr,C=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=S._data,O=S._datatype||S.getDataType(),U=x._size[0],L=S._size[0],F=[],k=[],R=[],z,B=n,X=i,Z=a,Q=0;C&&O&&C===O&&typeof C=="string"&&C!=="mixed"&&(z=C,B=e.find(n,[z,z]),X=e.find(i,[z,z]),Z=e.find(a,[z,z]),Q=e.convert(0,z));var J=[],ne=[];R[0]=0;for(var fe=0;fe<L;fe++){var se=D[fe];if(!Z(se,Q))for(var ye=T[fe],De=T[fe+1],pe=ye;pe<De;pe++){var Te=A[pe];ne[Te]?J[Te]=B(J[Te],X(se,E[pe])):(ne[Te]=!0,k.push(Te),J[Te]=X(se,E[pe]))}}for(var be=k.length,re=0;re<be;re++){var Re=k[re];F[re]=J[Re]}return R[1]=k.length,x.createSparseMatrix({values:F,index:k,ptr:R,size:[U,1],datatype:C===x._datatype&&O===S._datatype?z:void 0})}function b(x,S){var E=x._values,A=x._index,T=x._ptr,C=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=S._data,O=S._datatype||S.getDataType(),U=x._size[0],L=S._size[0],F=S._size[1],k,R=n,z=i,B=a,X=0;C&&O&&C===O&&typeof C=="string"&&C!=="mixed"&&(k=C,R=e.find(n,[k,k]),z=e.find(i,[k,k]),B=e.find(a,[k,k]),X=e.convert(0,k));for(var Z=[],Q=[],J=[],ne=x.createSparseMatrix({values:Z,index:Q,ptr:J,size:[U,F],datatype:C===x._datatype&&O===S._datatype?k:void 0}),fe=[],se=[],ye=0;ye<F;ye++){J[ye]=Q.length;for(var De=ye+1,pe=0;pe<L;pe++){var Te=D[pe][ye];if(!B(Te,X))for(var be=T[pe],re=T[pe+1],Re=be;Re<re;Re++){var ze=A[Re];se[ze]!==De?(se[ze]=De,Q.push(ze),fe[ze]=z(Te,E[Re])):fe[ze]=R(fe[ze],z(Te,E[Re]))}}for(var K=J[ye],ie=Q.length,_e=K;_e<ie;_e++){var oe=Q[_e];Z[_e]=fe[oe]}}return J[F]=Q.length,ne}function m(x,S){var E=x._values,A=x._index,T=x._ptr,C=x._datatype||x._data===void 0?x._datatype:x.getDataType(),D=S._values,O=S._index,U=S._ptr,L=S._datatype||S._data===void 0?S._datatype:S.getDataType(),F=x._size[0],k=S._size[1],R=E&&D,z,B=n,X=i;C&&L&&C===L&&typeof C=="string"&&C!=="mixed"&&(z=C,B=e.find(n,[z,z]),X=e.find(i,[z,z]));for(var Z=R?[]:void 0,Q=[],J=[],ne=x.createSparseMatrix({values:Z,index:Q,ptr:J,size:[F,k],datatype:C===x._datatype&&L===S._datatype?z:void 0}),fe=R?[]:void 0,se=[],ye,De,pe,Te,be,re,Re,ze,K=0;K<k;K++){J[K]=Q.length;var ie=K+1;for(be=U[K],re=U[K+1],Te=be;Te<re;Te++)if(ze=O[Te],R)for(De=T[ze],pe=T[ze+1],ye=De;ye<pe;ye++)Re=A[ye],se[Re]!==ie?(se[Re]=ie,Q.push(Re),fe[Re]=X(D[Te],E[ye])):fe[Re]=B(fe[Re],X(D[Te],E[ye]));else for(De=T[ze],pe=T[ze+1],ye=De;ye<pe;ye++)Re=A[ye],se[Re]!==ie&&(se[Re]=ie,Q.push(Re));if(R)for(var _e=J[K],oe=Q.length,G=_e;G<oe;G++){var W=Q[G];Z[G]=fe[W]}}return J[k]=Q.length,ne}return e(x4,i,{"Array, Array":e.referTo("Matrix, Matrix",x=>(S,E)=>{u(rr(S),rr(E));var A=x(t(S),t(E));return Ft(A)?A.valueOf():A}),"Matrix, Matrix":function(x,S){var E=x.size(),A=S.size();return u(E,A),E.length===1?A.length===1?c(x,S,E[0]):h(x,S):A.length===1?f(x,S):p(x,S)},"Matrix, Array":e.referTo("Matrix,Matrix",x=>(S,E)=>x(S,t(E))),"Array, Matrix":e.referToSelf(x=>(S,E)=>x(t(S,E.storage()),E)),"SparseMatrix, any":function(x,S){return s(x,S,i,!1)},"DenseMatrix, any":function(x,S){return l(x,S,i,!1)},"any, SparseMatrix":function(x,S){return s(S,x,i,!0)},"any, DenseMatrix":function(x,S){return l(S,x,i,!0)},"Array, any":function(x,S){return l(t(x),S,i,!1).valueOf()},"any, Array":function(x,S){return l(t(S),x,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(x=>(S,E,A)=>{for(var T=x(S,E),C=0;C<A.length;C++)T=x(T,A[C]);return T})})}),w4="nthRoot",Sue=["typed","matrix","equalScalar","BigNumber","concat"],Mue=ae(w4,Sue,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,concat:a}=r,o=ah({typed:e}),s=Rs({typed:e,equalScalar:n}),l=jM({typed:e,equalScalar:n}),u=Ii({typed:e,equalScalar:n}),c=Gr({typed:e,matrix:t,concat:a});function h(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(w4,{number:HL,"number, number":HL,BigNumber:f=>d(f,new i(2)),"BigNumber, BigNumber":d,Complex:h,"Complex, number":h,Array:e.referTo("DenseMatrix,number",f=>p=>f(t(p),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",f=>p=>f(p,2)),SparseMatrix:e.referTo("SparseMatrix,number",f=>p=>f(p,2)),"SparseMatrix, SparseMatrix":e.referToSelf(f=>(p,v)=>{if(v.density()===1)return l(p,v,f);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(f=>(p,v)=>{if(v.density()===1)return o(p,v,f,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",f=>(p,v)=>f(t(p),v)),"number | BigNumber, SparseMatrix":e.referToSelf(f=>(p,v)=>{if(v.density()===1)return u(v,p,f,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:s,Ss:u,sS:!1}));function d(f,p){var v=i.precision,y=i.clone({precision:v+2}),g=new i(0),w=new y(1),b=p.isNegative();if(b&&(p=p.neg()),p.isZero())throw new Error("Root must be non-zero");if(f.isNegative()&&!p.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(f.isZero())return b?new y(1/0):0;if(!f.isFinite())return b?g:f;var m=f.abs().pow(w.div(p));return m=f.isNeg()?m.neg():m,new i((b?w.div(m):m).toPrecision(v))}}),S4="sign",_ue=["typed","BigNumber","Fraction","complex"],Eue=ae(S4,_ue,r=>{var{typed:e,BigNumber:t,complex:n,Fraction:i}=r;return e(S4,{number:RT,Complex:function(a){return a.im===0?n(RT(a.re)):a.sign()},BigNumber:function(a){return new t(a.cmp(0))},Fraction:function(a){return new i(a.s,1)},"Array | Matrix":e.referToSelf(a=>o=>ur(o,a)),Unit:e.referToSelf(a=>o=>{if(!o._isDerived()&&o.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(a,o.valueType())(o.value)})})}),Cue="sqrt",Aue=["config","typed","Complex"],Tue=ae(Cue,Aue,r=>{var{config:e,typed:t,Complex:n}=r;return t("sqrt",{number:i,Complex:function(a){return a.sqrt()},BigNumber:function(a){return!a.isNegative()||e.predictable?a.sqrt():i(a.toNumber())},Unit:function(a){return a.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new n(a,0).sqrt()}}),M4="square",Due=["typed"],kue=ae(M4,Due,r=>{var{typed:e}=r;return e(M4,{number:Cq,Complex:function(t){return t.mul(t)},BigNumber:function(t){return t.times(t)},Fraction:function(t){return t.mul(t)},Unit:function(t){return t.pow(2)}})}),_4="subtract",Nue=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],Oue=ae(_4,Nue,r=>{var{typed:e,matrix:t,equalScalar:n,subtractScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=r,l=ah({typed:e}),u=Oa({typed:e}),c=UM({typed:e,equalScalar:n}),h=Fd({typed:e,DenseMatrix:o}),d=ui({typed:e,DenseMatrix:o}),f=Gr({typed:e,matrix:t,concat:s});return e(_4,{"any, any":i},f({elop:i,SS:c,DS:l,SD:u,Ss:d,sS:h}))}),E4="xgcd",Rue=["typed","config","matrix","BigNumber"],Pue=ae(E4,Rue,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(E4,{"number, number":function(o,s){var l=Aq(o,s);return t.matrix==="Array"?l:n(l)},"BigNumber, BigNumber":a});function a(o,s){var l,u,c,h=new i(0),d=new i(1),f=h,p=d,v=d,y=h;if(!o.isInt()||!s.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!s.isZero();)u=o.div(s).floor(),c=o.mod(s),l=f,f=p.minus(u.times(f)),p=l,l=v,v=y.minus(u.times(v)),y=l,o=s,s=c;var g;return o.lt(h)?g=[o.neg(),p.neg(),y.neg()]:g=[o,o.isZero()?0:p,y],t.matrix==="Array"?g:n(g)}}),C4="invmod",Iue=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],Lue=ae(C4,Iue,r=>{var{typed:e,config:t,BigNumber:n,xgcd:i,equal:a,smaller:o,mod:s,add:l,isInteger:u}=r;return e(C4,{"number, number":c,"BigNumber, BigNumber":c});function c(h,d){if(!u(h)||!u(d))throw new Error("Parameters in function invmod must be integer numbers");if(h=s(h,d),a(d,0))throw new Error("Divisor must be non zero");var f=i(h,d);f=f.valueOf();var[p,v]=f;return a(p,n(1))?(v=s(v,d),o(v,n(0))&&(v=l(v,d)),v):NaN}}),Fue="matAlgo09xS0Sf",Bue=["typed","equalScalar"],hW=ae(Fue,Bue,r=>{var{typed:e,equalScalar:t}=r;return function(n,i,a){var o=n._values,s=n._index,l=n._ptr,u=n._size,c=n._datatype||n._data===void 0?n._datatype:n.getDataType(),h=i._values,d=i._index,f=i._ptr,p=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==p.length)throw new ar(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");var y=u[0],g=u[1],w,b=t,m=0,x=a;typeof c=="string"&&c===v&&c!=="mixed"&&(w=c,b=e.find(t,[w,w]),m=e.convert(0,w),x=e.find(a,[w,w]));var S=o&&h?[]:void 0,E=[],A=[],T=S?[]:void 0,C=[],D,O,U,L,F;for(O=0;O<g;O++){A[O]=E.length;var k=O+1;if(T)for(L=f[O],F=f[O+1],U=L;U<F;U++)D=d[U],C[D]=k,T[D]=h[U];for(L=l[O],F=l[O+1],U=L;U<F;U++)if(D=s[U],T){var R=C[D]===k?T[D]:m,z=x(o[U],R);b(z,m)||(E.push(D),S.push(z))}else E.push(D)}return A[g]=E.length,n.createSparseMatrix({values:S,index:E,ptr:A,size:[y,g],datatype:c===n._datatype&&v===i._datatype?w:void 0})}}),A4="dotMultiply",zue=["typed","matrix","equalScalar","multiplyScalar","concat"],Uue=ae(A4,zue,r=>{var{typed:e,matrix:t,equalScalar:n,multiplyScalar:i,concat:a}=r,o=Rs({typed:e,equalScalar:n}),s=hW({typed:e,equalScalar:n}),l=Ii({typed:e,equalScalar:n}),u=Gr({typed:e,matrix:t,concat:a});return e(A4,u({elop:i,SS:s,DS:o,Ss:l}))});function jue(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero()||e.eq(-1)||r.eq(e))return r;if(e.isZero()||r.eq(-1))return e;if(!r.isFinite()||!e.isFinite()){if(!r.isFinite()&&!e.isFinite())return r.isNegative()===e.isNegative()?r:new t(0);if(!r.isFinite())return e.isNegative()?r:r.isNegative()?new t(0):e;if(!e.isFinite())return r.isNegative()?e:e.isNegative()?new t(0):r}return gN(r,e,function(n,i){return n&i})}function Y0(r){if(r.isFinite()&&!r.isInteger())throw new Error("Integer expected in function bitNot");var e=r.constructor,t=e.precision;e.config({precision:1e9});var n=r.plus(new e(1));return n.s=-n.s||null,e.config({precision:t}),n}function Hue(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);var n=new t(-1);return r.isZero()||e.eq(n)||r.eq(e)?e:e.isZero()||r.eq(n)?r:!r.isFinite()||!e.isFinite()?!r.isFinite()&&!r.isNegative()&&e.isNegative()||r.isNegative()&&!e.isNegative()&&!e.isFinite()?n:r.isNegative()&&e.isNegative()?r.isFinite()?r:e:r.isFinite()?e:r:gN(r,e,function(i,a){return i|a})}function gN(r,e,t){var n=r.constructor,i,a,o=+(r.s<0),s=+(e.s<0);if(o){i=V1(Y0(r));for(var l=0;l<i.length;++l)i[l]^=1}else i=V1(r);if(s){a=V1(Y0(e));for(var u=0;u<a.length;++u)a[u]^=1}else a=V1(e);var c,h,d;i.length<=a.length?(c=i,h=a,d=o):(c=a,h=i,d=s);var f=c.length,p=h.length,v=t(o,s)^1,y=new n(v^1),g=new n(1),w=new n(2),b=n.precision;for(n.config({precision:1e9});f>0;)t(c[--f],h[--p])===v&&(y=y.plus(g)),g=g.times(w);for(;p>0;)t(d,h[--p])===v&&(y=y.plus(g)),g=g.times(w);return n.config({precision:b}),v===0&&(y.s=-y.s),y}function V1(r){for(var e=r.d,t=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",a=7-i.length;a--;)i="0"+i;t+=i}for(var o=t.length;t.charAt(o)==="0";)o--;var s=r.e,l=t.slice(0,o+1||1),u=l.length;if(s>0)if(++s>u)for(s-=u;s--;)l+="0";else s<u&&(l=l.slice(0,s)+"."+l.slice(s));for(var c=[0],h=0;h<l.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(l.charAt(h++));for(var f=0;f<c.length;++f)c[f]>1&&((c[f+1]===null||c[f+1]===void 0)&&(c[f+1]=0),c[f+1]+=c[f]>>1,c[f]&=1)}return c.reverse()}function Vue(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero())return e;if(e.isZero())return r;if(r.eq(e))return new t(0);var n=new t(-1);return r.eq(n)?Y0(e):e.eq(n)?Y0(r):!r.isFinite()||!e.isFinite()?!r.isFinite()&&!e.isFinite()?n:new t(r.isNegative()===e.isNegative()?1/0:-1/0):gN(r,e,function(i,a){return i^a})}function que(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:!r.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?r.times(Math.pow(2,e.toNumber())+""):r.times(new t(2).pow(e))}function Wue(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:e.isFinite()?e.lt(55)?r.div(Math.pow(2,e.toNumber())+"").floor():r.div(new t(2).pow(e)).floor():r.isNegative()?new t(-1):r.isFinite()?new t(0):new t(NaN)}var T4="bitAnd",Gue=["typed","matrix","equalScalar","concat"],dW=ae(T4,Gue,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,a=Rs({typed:e,equalScalar:n}),o=jM({typed:e,equalScalar:n}),s=Ii({typed:e,equalScalar:n}),l=Gr({typed:e,matrix:t,concat:i});return e(T4,{"number, number":Dq,"BigNumber, BigNumber":jue},l({SS:o,DS:a,Ss:s}))}),D4="bitNot",$ue=["typed"],Xue=ae(D4,$ue,r=>{var{typed:e}=r;return e(D4,{number:kq,BigNumber:Y0,"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),k4="bitOr",Yue=["typed","matrix","equalScalar","DenseMatrix","concat"],fW=ae(k4,Yue,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,o=ah({typed:e}),s=mN({typed:e,equalScalar:n}),l=Fd({typed:e,DenseMatrix:i}),u=Gr({typed:e,matrix:t,concat:a});return e(k4,{"number, number":Nq,"BigNumber, BigNumber":Hue},u({SS:s,DS:o,Ss:l}))}),Jue="matAlgo07xSSf",Zue=["typed","DenseMatrix"],El=ae(Jue,Zue,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,a,o){var s=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),u=a._size,c=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(s.length!==u.length)throw new ar(s.length,u.length);if(s[0]!==u[0]||s[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+u+")");var h=s[0],d=s[1],f,p=0,v=o;typeof l=="string"&&l===c&&l!=="mixed"&&(f=l,p=e.convert(0,f),v=e.find(o,[f,f]));var y,g,w=[];for(y=0;y<h;y++)w[y]=[];var b=[],m=[],x=[],S=[];for(g=0;g<d;g++){var E=g+1;for(n(i,g,x,b,E),n(a,g,S,m,E),y=0;y<h;y++){var A=x[y]===E?b[y]:p,T=S[y]===E?m[y]:p;w[y][g]=v(A,T)}}return new t({data:w,size:[h,d],datatype:l===i._datatype&&c===a._datatype?f:void 0})};function n(i,a,o,s,l){for(var u=i._values,c=i._index,h=i._ptr,d=h[a],f=h[a+1];d<f;d++){var p=c[d];o[p]=l,s[p]=u[d]}}}),N4="bitXor",Kue=["typed","matrix","DenseMatrix","concat"],Que=ae(N4,Kue,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i}=r,a=Oa({typed:e}),o=El({typed:e,DenseMatrix:n}),s=ui({typed:e,DenseMatrix:n}),l=Gr({typed:e,matrix:t,concat:i});return e(N4,{"number, number":Oq,"BigNumber, BigNumber":Vue},l({SS:o,DS:a,Ss:s}))}),O4="arg",ece=["typed"],tce=ae(O4,ece,r=>{var{typed:e}=r;return e(O4,{number:function(t){return Math.atan2(0,t)},BigNumber:function(t){return t.constructor.atan2(0,t)},Complex:function(t){return t.arg()},"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),R4="conj",rce=["typed"],nce=ae(R4,rce,r=>{var{typed:e}=r;return e(R4,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),P4="im",ice=["typed"],ace=ae(P4,ice,r=>{var{typed:e}=r;return e(P4,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),I4="re",oce=["typed"],sce=ae(I4,oce,r=>{var{typed:e}=r;return e(I4,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),L4="not",lce=["typed"],uce=ae(L4,lce,r=>{var{typed:e}=r;return e(L4,{"null | undefined":()=>!0,number:Fq,Complex:function(t){return t.re===0&&t.im===0},BigNumber:function(t){return t.isZero()||t.isNaN()},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),F4="or",cce=["typed","matrix","equalScalar","DenseMatrix","concat"],pW=ae(F4,cce,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,o=Oa({typed:e}),s=UM({typed:e,equalScalar:n}),l=ui({typed:e,DenseMatrix:i}),u=Gr({typed:e,matrix:t,concat:a});return e(F4,{"number, number":Bq,"Complex, Complex":function(c,h){return c.re!==0||c.im!==0||h.re!==0||h.im!==0},"BigNumber, BigNumber":function(c,h){return!c.isZero()&&!c.isNaN()||!h.isZero()&&!h.isNaN()},"Unit, Unit":e.referToSelf(c=>(h,d)=>c(h.value||0,d.value||0))},u({SS:s,DS:o,Ss:l}))}),B4="xor",hce=["typed","matrix","DenseMatrix","concat"],dce=ae(B4,hce,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i}=r,a=Oa({typed:e}),o=El({typed:e,DenseMatrix:n}),s=ui({typed:e,DenseMatrix:n}),l=Gr({typed:e,matrix:t,concat:i});return e(B4,{"number, number":zq,"Complex, Complex":function(u,c){return(u.re!==0||u.im!==0)!=(c.re!==0||c.im!==0)},"BigNumber, BigNumber":function(u,c){return(!u.isZero()&&!u.isNaN())!=(!c.isZero()&&!c.isNaN())},"Unit, Unit":e.referToSelf(u=>(c,h)=>u(c.value||0,h.value||0))},l({SS:o,DS:a,Ss:s}))}),z4="concat",fce=["typed","matrix","isInteger"],mW=ae(z4,fce,r=>{var{typed:e,matrix:t,isInteger:n}=r;return e(z4,{"...Array | Matrix | number | BigNumber":function(i){var a,o=i.length,s=-1,l,u=!1,c=[];for(a=0;a<o;a++){var h=i[a];if(Ft(h)&&(u=!0),tr(h)||Kt(h)){if(a!==o-1)throw new Error("Dimension must be specified as last argument");if(l=s,s=h.valueOf(),!n(s))throw new TypeError("Integer number expected for dimension");if(s<0||a>0&&s>l)throw new as(s,l+1)}else{var d=Gt(h).valueOf(),f=rr(d);if(c[a]=d,l=s,s=f.length-1,a>0&&s!==l)throw new ar(l+1,s+1)}}if(c.length===0)throw new SyntaxError("At least one matrix expected");for(var p=c.shift();c.length;)p=hq(p,c.shift(),s);return u?t(p):p},"...string":function(i){return i.join("")}})}),U4="column",pce=["typed","Index","matrix","range"],gW=ae(U4,pce,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(U4,{"Matrix, number":a,"Array, number":function(o,s){return a(n(Gt(o)),s).valueOf()}});function a(o,s){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");Pr(s,o.size()[1]);var l=i(0,o.size()[0]),u=new t(l,s),c=o.subset(u);return Ft(c)?c:n([[c]])}}),j4="count",mce=["typed","size","prod"],gce=ae(j4,mce,r=>{var{typed:e,size:t,prod:n}=r;return e(j4,{string:function(i){return i.length},"Matrix | Array":function(i){return n(t(i))}})}),H4="cross",vce=["typed","matrix","subtract","multiply"],yce=ae(H4,vce,r=>{var{typed:e,matrix:t,subtract:n,multiply:i}=r;return e(H4,{"Matrix, Matrix":function(o,s){return t(a(o.toArray(),s.toArray()))},"Matrix, Array":function(o,s){return t(a(o.toArray(),s))},"Array, Matrix":function(o,s){return t(a(o,s.toArray()))},"Array, Array":a});function a(o,s){var l=Math.max(rr(o).length,rr(s).length);o=tS(o),s=tS(s);var u=rr(o),c=rr(s);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var h=[n(i(o[1],s[2]),i(o[2],s[1])),n(i(o[2],s[0]),i(o[0],s[2])),n(i(o[0],s[1]),i(o[1],s[0]))];return l>1?[h]:h}}),V4="diag",bce=["typed","matrix","DenseMatrix","SparseMatrix"],xce=ae(V4,bce,r=>{var{typed:e,matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(V4,{Array:function(l){return a(l,0,rr(l),null)},"Array, number":function(l,u){return a(l,u,rr(l),null)},"Array, BigNumber":function(l,u){return a(l,u.toNumber(),rr(l),null)},"Array, string":function(l,u){return a(l,0,rr(l),u)},"Array, number, string":function(l,u,c){return a(l,u,rr(l),c)},"Array, BigNumber, string":function(l,u,c){return a(l,u.toNumber(),rr(l),c)},Matrix:function(l){return a(l,0,l.size(),l.storage())},"Matrix, number":function(l,u){return a(l,u,l.size(),l.storage())},"Matrix, BigNumber":function(l,u){return a(l,u.toNumber(),l.size(),l.storage())},"Matrix, string":function(l,u){return a(l,0,l.size(),u)},"Matrix, number, string":function(l,u,c){return a(l,u,l.size(),c)},"Matrix, BigNumber, string":function(l,u,c){return a(l,u.toNumber(),l.size(),c)}});function a(l,u,c,h){if(!Nt(u))throw new TypeError("Second parameter in function diag must be an integer");var d=u>0?u:0,f=u<0?-u:0;switch(c.length){case 1:return o(l,u,h,c[0],f,d);case 2:return s(l,u,h,c,f,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function o(l,u,c,h,d,f){var p=[h+d,h+f];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var v=c==="sparse"?i.diagonal(p,l,u):n.diagonal(p,l,u);return c!==null?v:v.valueOf()}function s(l,u,c,h,d,f){if(Ft(l)){var p=l.diagonal(u);return c!==null?c!==p.storage()?t(p,c):p:p.valueOf()}for(var v=Math.min(h[0]-d,h[1]-f),y=[],g=0;g<v;g++)y[g]=l[g+d][g+f];return c!==null?t(y):y}});function wm(r,e,t,n,i){if(Xh.isTypedFunction(r)){var a=[e,t,n],o=Xh.resolve(r,a);if(o)return h(o.implementation,a);var s=[e,t],l=Xh.resolve(r,s);if(l)return h(l.implementation,s);var u=[e],c=Xh.resolve(r,u);return c?h(c.implementation,u):h(r,a)}else return r(e,t,n);function h(d,f){try{return d.apply(d,f)}catch(y){var p;if(y instanceof TypeError&&((p=y.data)===null||p===void 0?void 0:p.category)==="wrongType"){var v=[];throw v.push("value: ".concat(Br(e))),f.length>=2&&v.push("index: ".concat(Br(t))),f.length>=3&&v.push("array: ".concat(Br(n))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(r.name,"(").concat(v.join(", "),") at index ").concat(JSON.stringify(t)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(r.name,": ").concat(y.message))}}}var wce="filter",Sce=["typed"],Mce=ae(wce,Sce,r=>{var{typed:e}=r;return e("filter",{"Array, function":q4,"Matrix, function":function(t,n){return t.create(q4(t.toArray(),n))},"Array, RegExp":rS,"Matrix, RegExp":function(t,n){return t.create(rS(t.toArray(),n))}})});function q4(r,e){return uq(r,function(t,n,i){return wm(e,t,[n],i,"filter")})}var W4="flatten",_ce=["typed","matrix"],Ece=ae(W4,_ce,r=>{var{typed:e,matrix:t}=r;return e(W4,{Array:function(n){return xr(n)},Matrix:function(n){var i=xr(n.toArray());return t(i)}})}),G4="forEach",Cce=["typed"],Ace=ae(G4,Cce,r=>{var{typed:e}=r;return e(G4,{"Array, function":Tce,"Matrix, function":function(t,n){t.forEach(n)}})});function Tce(r,e){var t=function n(i,a){if(Array.isArray(i))FM(i,function(o,s){n(o,a.concat(s))});else return wm(e,i,a,r,"forEach")};t(r,[])}var $4="getMatrixDataType",Dce=["typed"],kce=ae($4,Dce,r=>{var{typed:e}=r;return e($4,{Array:function(t){return X0(t,Br)},Matrix:function(t){return t.getDataType()}})}),X4="identity",Nce=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Oce=ae(X4,Nce,r=>{var{typed:e,config:t,matrix:n,BigNumber:i,DenseMatrix:a,SparseMatrix:o}=r;return e(X4,{"":function(){return t.matrix==="Matrix"?n([]):[]},string:function(u){return n(u)},"number | BigNumber":function(u){return l(u,u,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(u,c){return l(u,u,c)},"number | BigNumber, number | BigNumber":function(u,c){return l(u,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(u,c,h){return l(u,c,h)},Array:function(u){return s(u)},"Array, string":function(u,c){return s(u,c)},Matrix:function(u){return s(u.valueOf(),u.storage())},"Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(u,c){switch(u.length){case 0:return c?n(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,h){var d=Kt(u)||Kt(c)?i:null;if(Kt(u)&&(u=u.toNumber()),Kt(c)&&(c=c.toNumber()),!Nt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!Nt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var f=d?new i(1):1,p=d?new d(0):0,v=[u,c];if(h){if(h==="sparse")return o.diagonal(v,f,0,p);if(h==="dense")return a.diagonal(v,f,0,p);throw new TypeError('Unknown matrix type "'.concat(h,'"'))}for(var y=Gp([],v,p),g=u<c?u:c,w=0;w<g;w++)y[w][w]=f;return y}}),Y4="kron",Rce=["typed","matrix","multiplyScalar"],Pce=ae(Y4,Rce,r=>{var{typed:e,matrix:t,multiplyScalar:n}=r;return e(Y4,{"Matrix, Matrix":function(a,o){return t(i(a.toArray(),o.toArray()))},"Matrix, Array":function(a,o){return t(i(a.toArray(),o))},"Array, Matrix":function(a,o){return t(i(a,o.toArray()))},"Array, Array":i});function i(a,o){if(rr(a).length===1&&(a=[a]),rr(o).length===1&&(o=[o]),rr(a).length>2||rr(o).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(a.length)+", y = "+JSON.stringify(o.length)+")");var s=[],l=[];return a.map(function(u){return o.map(function(c){return l=[],s.push(l),u.map(function(h){return c.map(function(d){return l.push(n(h,d))})})})})&&s}}),J4="map",Ice=["typed"],Lce=ae(J4,Ice,r=>{var{typed:e}=r;return e(J4,{"Array, function":Fce,"Matrix, function":function(t,n){return t.map(n)}})});function Fce(r,e){var t=function n(i,a){return Array.isArray(i)?i.map(function(o,s){return n(o,a.concat(s))}):wm(e,i,a,r,"map")};return t(r,[])}var Z4="diff",Bce=["typed","matrix","subtract","number"],vW=ae(Z4,Bce,r=>{var{typed:e,matrix:t,subtract:n,number:i}=r;return e(Z4,{"Array | Matrix":function(u){return Ft(u)?t(o(u.toArray())):o(u)},"Array | Matrix, number":function(u,c){if(!Nt(c))throw new RangeError("Dimension must be a whole number");return Ft(u)?t(a(u.toArray(),c)):a(u,c)},"Array, BigNumber":e.referTo("Array,number",u=>(c,h)=>u(c,i(h))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,h)=>u(c,i(h)))});function a(u,c){if(Ft(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var h=[];return u.forEach(d=>{h.push(a(d,c-1))}),h}else{if(c===0)return o(u);throw RangeError("Cannot have negative dimension")}}function o(u){for(var c=[],h=u.length,d=1;d<h;d++)c.push(s(u[d-1],u[d]));return c}function s(u,c){Ft(u)&&(u=u.toArray()),Ft(c)&&(c=c.toArray());var h=Array.isArray(u),d=Array.isArray(c);if(h&&d)return l(u,c);if(!h&&!d)return n(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var h=[],d=u.length,f=0;f<d;f++)h.push(s(u[f],c[f]));return h}}),zce="ones",Uce=["typed","config","matrix","BigNumber"],jce=ae(zce,Uce,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e("ones",{"":function(){return t.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var u=l[l.length-1];if(typeof u=="string"){var c=l.pop();return a(l,c)}else return t.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var u=l.storage();return a(l.valueOf(),u)},"Array | Matrix, string":function(l,u){return a(l.valueOf(),u)}});function a(l,u){var c=o(l),h=c?new i(1):1;if(s(l),u){var d=n(u);return l.length>0?d.resize(l,h):d}else{var f=[];return l.length>0?Gp(f,l,h):f}}function o(l){var u=!1;return l.forEach(function(c,h,d){Kt(c)&&(u=!0,d[h]=c.toNumber())}),u}function s(l){l.forEach(function(u){if(typeof u!="number"||!Nt(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function vN(){throw new Error('No "bignumber" implementation available')}function yW(){throw new Error('No "fraction" implementation available')}function bW(){throw new Error('No "matrix" implementation available')}var K4="range",Hce=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],xW=ae(K4,Hce,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:l,add:u,isPositive:c}=r;return e(K4,{string:d,"string, boolean":d,"number, number":function(v,y){return h(f(v,y,1,!1))},"number, number, number":function(v,y,g){return h(f(v,y,g,!1))},"number, number, boolean":function(v,y,g){return h(f(v,y,1,g))},"number, number, number, boolean":function(v,y,g,w){return h(f(v,y,g,w))},"BigNumber, BigNumber":function(v,y){var g=v.constructor;return h(f(v,y,new g(1),!1))},"BigNumber, BigNumber, BigNumber":function(v,y,g){return h(f(v,y,g,!1))},"BigNumber, BigNumber, boolean":function(v,y,g){var w=v.constructor;return h(f(v,y,new w(1),g))},"BigNumber, BigNumber, BigNumber, boolean":function(v,y,g,w){return h(f(v,y,g,w))},"Unit, Unit, Unit":function(v,y,g){return h(f(v,y,g,!1))},"Unit, Unit, Unit, boolean":function(v,y,g,w){return h(f(v,y,g,w))}});function h(v){return t.matrix==="Matrix"?n?n(v):bW():v}function d(v,y){var g=p(v);if(!g)throw new SyntaxError('String "'+v+'" is no valid range');return t.number==="BigNumber"?(i===void 0&&vN(),h(f(i(g.start),i(g.end),i(g.step)))):h(f(g.start,g.end,g.step,y))}function f(v,y,g,w){for(var b=[],m=c(g)?w?o:a:w?l:s,x=v;m(x,y);)b.push(x),x=u(x,g);return b}function p(v){var y=v.split(":"),g=y.map(function(b){return Number(b)}),w=g.some(function(b){return isNaN(b)});if(w)return null;switch(g.length){case 2:return{start:g[0],end:g[1],step:1};case 3:return{start:g[0],end:g[2],step:g[1]};default:return null}}}),Q4="reshape",Vce=["typed","isInteger","matrix"],qce=ae(Q4,Vce,r=>{var{typed:e,isInteger:t}=r;return e(Q4,{"Matrix, Array":function(n,i){return n.reshape(i,!0)},"Array, Array":function(n,i){return i.forEach(function(a){if(!t(a))throw new TypeError("Invalid size for dimension: "+a)}),hN(n,i)}})}),Wce="resize",Gce=["config","matrix"],$ce=ae(Wce,Gce,r=>{var{config:e,matrix:t}=r;return function(i,a,o){if(arguments.length!==2&&arguments.length!==3)throw new Nu("resize",arguments.length,2,3);if(Ft(a)&&(a=a.valueOf()),Kt(a[0])&&(a=a.map(function(u){return Kt(u)?u.toNumber():u})),Ft(i))return i.resize(a,o,!0);if(typeof i=="string")return n(i,a,o);var s=Array.isArray(i)?!1:e.matrix!=="Array";if(a.length===0){for(;Array.isArray(i);)i=i[0];return Gt(i)}else{Array.isArray(i)||(i=[i]),i=Gt(i);var l=Gp(i,a,o);return s?t(l):l}};function n(i,a,o){if(o!==void 0){if(typeof o!="string"||o.length!==1)throw new TypeError("Single character expected as defaultValue")}else o=" ";if(a.length!==1)throw new ar(a.length,1);var s=a[0];if(typeof s!="number"||!Nt(s))throw new TypeError("Invalid size, must contain positive integers (size: "+lr(a)+")");if(i.length>s)return i.substring(0,s);if(i.length<s){for(var l=i,u=0,c=s-i.length;u<c;u++)l+=o;return l}else return i}}),eF="rotate",Xce=["typed","multiply","rotationMatrix"],Yce=ae(eF,Xce,r=>{var{typed:e,multiply:t,rotationMatrix:n}=r;return e(eF,{"Array , number | BigNumber | Complex | Unit":function(a,o){i(a,2);var s=t(n(o),a);return s.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(a,o){return i(a,2),t(n(o),a)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(a,o,s){i(a,3);var l=t(n(o,s),a);return l},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(a,o,s){return i(a,3),t(n(o,s),a)}});function i(a,o){var s=Array.isArray(a)?rr(a):a.size();if(s.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(s.length===2&&s[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(s[0]!==o)throw new RangeError("Vector must be of dimensions 1x".concat(o))}}),tF="rotationMatrix",Jce=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],Zce=ae(tF,Jce,r=>{var{typed:e,config:t,multiplyScalar:n,addScalar:i,unaryMinus:a,norm:o,BigNumber:s,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:h,sin:d}=r;return e(tF,{"":function(){return t.matrix==="Matrix"?l([]):[]},string:function(w){return l(w)},"number | BigNumber | Complex | Unit":function(w){return f(w,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(w,b){return f(w,b)},"number | BigNumber | Complex | Unit, Array":function(w,b){var m=l(b);return p(m),g(w,m,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(w,b){p(b);var m=b.storage()||(t.matrix==="Matrix"?"dense":void 0);return g(w,b,m)},"number | BigNumber | Complex | Unit, Array, string":function(w,b,m){var x=l(b);return p(x),g(w,x,m)},"number | BigNumber | Complex | Unit, Matrix, string":function(w,b,m){return p(b),g(w,b,m)}});function f(w,b){var m=Kt(w),x=m?new s(-1):-1,S=h(w),E=d(w),A=[[S,n(x,E)],[E,S]];return y(A,b)}function p(w){var b=w.size();if(b.length<1||b[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function v(w){return w.reduce((b,m)=>n(b,m))}function y(w,b){if(b){if(b==="sparse")return new c(w);if(b==="dense")return new u(w);throw new TypeError('Unknown matrix type "'.concat(b,'"'))}return w}function g(w,b,m){var x=o(b);if(x===0)throw new RangeError("Rotation around zero vector");var S=Kt(w)?s:null,E=S?new S(1):1,A=S?new S(-1):-1,T=S?new S(b.get([0])/x):b.get([0])/x,C=S?new S(b.get([1])/x):b.get([1])/x,D=S?new S(b.get([2])/x):b.get([2])/x,O=h(w),U=i(E,a(O)),L=d(w),F=i(O,v([T,T,U])),k=i(v([T,C,U]),v([A,D,L])),R=i(v([T,D,U]),v([C,L])),z=i(v([T,C,U]),v([D,L])),B=i(O,v([C,C,U])),X=i(v([C,D,U]),v([A,T,L])),Z=i(v([T,D,U]),v([A,C,L])),Q=i(v([C,D,U]),v([T,L])),J=i(O,v([D,D,U])),ne=[[F,k,R],[z,B,X],[Z,Q,J]];return y(ne,m)}}),rF="row",Kce=["typed","Index","matrix","range"],wW=ae(rF,Kce,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(rF,{"Matrix, number":a,"Array, number":function(o,s){return a(n(Gt(o)),s).valueOf()}});function a(o,s){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");Pr(s,o.size()[0]);var l=i(0,o.size()[1]),u=new t(s,l),c=o.subset(u);return Ft(c)?c:n([[c]])}}),nF="size",Qce=["typed","config","?matrix"],ehe=ae(nF,Qce,r=>{var{typed:e,config:t,matrix:n}=r;return e(nF,{Matrix:function(i){return i.create(i.size())},Array:rr,string:function(i){return t.matrix==="Array"?[i.length]:n([i.length])},"number | Complex | BigNumber | Unit | boolean | null":function(i){return t.matrix==="Array"?[]:n?n([]):bW()}})}),iF="squeeze",the=["typed","matrix"],rhe=ae(iF,the,r=>{var{typed:e,matrix:t}=r;return e(iF,{Array:function(n){return tS(Gt(n))},Matrix:function(n){var i=tS(n.toArray());return Array.isArray(i)?t(i):i},any:function(n){return Gt(n)}})}),aF="subset",nhe=["typed","matrix","zeros","add"],SW=ae(aF,nhe,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r;return e(aF,{"Matrix, Index":function(o,s){return Wp(s)?t():(eS(o,s),o.subset(s))},"Array, Index":e.referTo("Matrix, Index",function(o){return function(s,l){var u=o(t(s),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":ahe,"string, Index":ihe,"Matrix, Index, any, any":function(o,s,l,u){return Wp(s)?o:(eS(o,s),o.clone().subset(s,a(l,s),u))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,l,u,c){var h=o(t(s),l,u,c);return h.isMatrix?h.valueOf():h}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,l,u){return o(t(s),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,l,u){return o(s,l,u,void 0)}}),"string, Index, string":oF,"string, Index, string, string":oF,"Object, Index, any":ohe});function a(o,s){if(typeof o=="string")throw new Error("can't boradcast a string");if(s._isScalar)return o;var l=s.size();if(l.every(u=>u>0))try{return i(o,n(l))}catch{return o}else return o}});function ihe(r,e){if(!Zv(e))throw new TypeError("Index expected");if(Wp(e))return"";if(eS(Array.from(r),e),e.size().length!==1)throw new ar(e.size().length,1);var t=r.length;Pr(e.min()[0],t),Pr(e.max()[0],t);var n=e.dimension(0),i="";return n.forEach(function(a){i+=r.charAt(a)}),i}function oF(r,e,t,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(Wp(e))return r;if(eS(Array.from(r),e),e.size().length!==1)throw new ar(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0),a=i.size()[0];if(a!==t.length)throw new ar(i.size()[0],t.length);var o=r.length;Pr(e.min()[0]),Pr(e.max()[0]);for(var s=[],l=0;l<o;l++)s[l]=r.charAt(l);if(i.forEach(function(h,d){s[h]=t.charAt(d[0])}),s.length>o)for(var u=o-1,c=s.length;u<c;u++)s[u]||(s[u]=n);return s.join("")}function ahe(r,e){if(!Wp(e)){if(e.size().length!==1)throw new ar(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return Ma(r,t)}}function ohe(r,e,t){if(Wp(e))return r;if(e.size().length!==1)throw new ar(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=Gt(r);return Vp(i,n,t),i}var sF="transpose",she=["typed","matrix"],lhe=ae(sF,she,r=>{var{typed:e,matrix:t}=r;return e(sF,{Array:o=>n(t(o)).valueOf(),Matrix:n,any:Gt});function n(o){var s=o.size(),l;switch(s.length){case 1:l=o.clone();break;case 2:{var u=s[0],c=s[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+lr(s)+")");switch(o.storage()){case"dense":l=i(o,u,c);break;case"sparse":l=a(o,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+lr(s)+")")}return l}function i(o,s,l){for(var u=o._data,c=[],h,d=0;d<l;d++){h=c[d]=[];for(var f=0;f<s;f++)h[f]=Gt(u[f][d])}return o.createDenseMatrix({data:c,size:[l,s],datatype:o._datatype})}function a(o,s,l){for(var u=o._values,c=o._index,h=o._ptr,d=u?[]:void 0,f=[],p=[],v=[],y=0;y<s;y++)v[y]=0;var g,w,b;for(g=0,w=c.length;g<w;g++)v[c[g]]++;for(var m=0,x=0;x<s;x++)p.push(m),m+=v[x],v[x]=p[x];for(p.push(m),b=0;b<l;b++)for(var S=h[b],E=h[b+1],A=S;A<E;A++){var T=v[c[A]]++;f[T]=b,u&&(d[T]=Gt(u[A]))}return o.createSparseMatrix({values:d,index:f,ptr:p,size:[l,s],datatype:o._datatype})}}),lF="ctranspose",uhe=["typed","transpose","conj"],che=ae(lF,uhe,r=>{var{typed:e,transpose:t,conj:n}=r;return e(lF,{any:function(i){return n(t(i))}})}),uF="zeros",hhe=["typed","config","matrix","BigNumber"],dhe=ae(uF,hhe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(uF,{"":function(){return t.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var u=l[l.length-1];if(typeof u=="string"){var c=l.pop();return a(l,c)}else return t.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var u=l.storage();return a(l.valueOf(),u)},"Array | Matrix, string":function(l,u){return a(l.valueOf(),u)}});function a(l,u){var c=o(l),h=c?new i(0):0;if(s(l),u){var d=n(u);return l.length>0?d.resize(l,h):d}else{var f=[];return l.length>0?Gp(f,l,h):f}}function o(l){var u=!1;return l.forEach(function(c,h,d){Kt(c)&&(u=!0,d[h]=c.toNumber())}),u}function s(l){l.forEach(function(u){if(typeof u!="number"||!Nt(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),cF="fft",fhe=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],phe=ae(cF,fhe,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,divideScalar:a,exp:o,tau:s,i:l,dotDivide:u,conj:c,pow:h,ceil:d,log2:f}=r;return e(cF,{Array:p,Matrix:function(w){return w.create(p(w.toArray()))}});function p(w){var b=rr(w);return b.length===1?g(w,b[0]):v(w.map(m=>p(m,b.slice(1))),0)}function v(w,b){var m=rr(w);if(b!==0)return new Array(m[0]).fill(0).map((S,E)=>v(w[E],b-1));if(m.length===1)return g(w);function x(S){var E=rr(S);return new Array(E[1]).fill(0).map((A,T)=>new Array(E[0]).fill(0).map((C,D)=>S[D][T]))}return x(v(x(w),1))}function y(w){for(var b=w.length,m=o(a(i(-1,i(l,s)),b)),x=[],S=1-b;S<b;S++)x.push(h(m,a(h(S,2),2)));for(var E=h(2,d(f(b+b-1))),A=[...new Array(b).fill(0).map((k,R)=>i(w[R],x[b-1+R])),...new Array(E-b).fill(0)],T=[...new Array(b+b-1).fill(0).map((k,R)=>a(1,x[R])),...new Array(E-(b+b-1)).fill(0)],C=g(A),D=g(T),O=new Array(E).fill(0).map((k,R)=>i(C[R],D[R])),U=u(c(p(c(O))),E),L=[],F=b-1;F<b+b-1;F++)L.push(i(U[F],x[F]));return L}function g(w){var b=w.length;if(b===1)return[w[0]];if(b%2===0){for(var m=[...g(w.filter((A,T)=>T%2===0)),...g(w.filter((A,T)=>T%2===1))],x=0;x<b/2;x++){var S=m[x],E=i(m[x+b/2],o(i(i(s,l),a(-x,b))));m[x]=n(S,E),m[x+b/2]=n(S,i(-1,E))}return m}else return y(w)}}),hF="ifft",mhe=["typed","fft","dotDivide","conj"],ghe=ae(hF,mhe,r=>{var{typed:e,fft:t,dotDivide:n,conj:i}=r;return e(hF,{"Array | Matrix":function(a){var o=Ft(a)?a.size():rr(a);return n(i(t(i(a))),o.reduce((s,l)=>s*l,1))}})});function xd(r){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(r)}function vhe(r,e){if(xd(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function MW(r){var e=vhe(r,"string");return xd(e)=="symbol"?e:e+""}function fn(r,e,t){return(e=MW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function dF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yhe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dF(Object(t),!0).forEach(function(n){fn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):dF(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var bhe="solveODE",xhe=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],whe=ae(bhe,xhe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:a,max:o,map:s,abs:l,isPositive:u,isNegative:c,larger:h,smaller:d,matrix:f,bignumber:p,unaryMinus:v}=r;function y(A){return function(T,C,D,O){var U=!(C.length===2&&(C.every(S)||C.every(ja)));if(U)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var L=C[0],F=C[1],k=h(F,L),R=O.firstStep;if(R!==void 0&&!u(R))throw new Error('"firstStep" must be positive');var z=O.maxStep;if(z!==void 0&&!u(z))throw new Error('"maxStep" must be positive');var B=O.minStep;if(B&&c(B))throw new Error('"minStep" must be positive or zero');var X=[L,F,R,B,z].filter($=>$!==void 0);if(!(X.every(S)||X.every(ja)))throw new Error('Inconsistent type of "t" dependant variables');for(var Z=1,Q=O.tol?O.tol:1e-4,J=O.minDelta?O.minDelta:.2,ne=O.maxDelta?O.maxDelta:5,fe=O.maxIter?O.maxIter:1e4,se=[L,F,...D,z,B].some(Kt),[ye,De,pe,Te]=se?[p(A.a),p(A.c),p(A.b),p(A.bp)]:[A.a,A.c,A.b,A.bp],be=R?k?R:v(R):a(n(F,L),Z),re=[L],Re=[D],ze=n(pe,Te),K=0,ie=0,_e=m(k),oe=x(k);_e(re[K],F);){var G=[];be=oe(re[K],F,be),G.push(T(re[K],Re[K]));for(var W=1;W<De.length;++W)G.push(T(t(re[K],i(De[W],be)),t(Re[K],i(be,ye[W],G))));var ce=o(l(s(i(ze,G),$=>ja($)?$.value:$)));ce<Q&&Q/ce>1/4&&(re.push(t(re[K],be)),Re.push(t(Re[K],i(be,pe,G))),K++);var Ce=.84*(Q/ce)**(1/5);if(d(Ce,J)?Ce=J:h(Ce,ne)&&(Ce=ne),Ce=se?p(Ce):Ce,be=i(be,Ce),z&&h(l(be),z)?be=k?z:v(z):B&&d(l(be),B)&&(be=k?B:v(B)),ie++,ie>fe)throw new Error("Maximum number of iterations reached, try changing options")}return{t:re,y:Re}}}function g(A,T,C,D){var O=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],U=[null,1/2,3/4,1],L=[2/9,1/3,4/9,0],F=[7/24,1/4,1/3,1/8],k={a:O,c:U,b:L,bp:F};return y(k)(A,T,C,D)}function w(A,T,C,D){var O=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],U=[null,1/5,3/10,4/5,8/9,1,1],L=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],F=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],k={a:O,c:U,b:L,bp:F};return y(k)(A,T,C,D)}function b(A,T,C,D){var O=D.method?D.method:"RK45",U={RK23:g,RK45:w};if(O.toUpperCase()in U){var L=yhe({},D);return delete L.method,U[O.toUpperCase()](A,T,C,L)}else{var F=Object.keys(U).map(R=>'"'.concat(R,'"')),k="".concat(F.slice(0,-1).join(", ")," and ").concat(F.slice(-1));throw new Error('Unavailable method "'.concat(O,'". Available methods are ').concat(k))}}function m(A){return A?d:h}function x(A){var T=A?h:d;return function(C,D,O){var U=t(C,O);return T(U,D)?n(D,C):O}}function S(A){return Kt(A)||tr(A)}function E(A,T,C,D){var O=b(A,T.toArray(),C.toArray(),D);return{t:f(O.t),y:f(O.y)}}return e("solveODE",{"function, Array, Array, Object":b,"function, Matrix, Matrix, Object":E,"function, Array, Array":(A,T,C)=>b(A,T,C,{}),"function, Matrix, Matrix":(A,T,C)=>E(A,T,C,{}),"function, Array, number | BigNumber | Unit":(A,T,C)=>{var D=b(A,T,[C],{});return{t:D.t,y:D.y.map(O=>O[0])}},"function, Matrix, number | BigNumber | Unit":(A,T,C)=>{var D=b(A,T.toArray(),[C],{});return{t:f(D.t),y:f(D.y.map(O=>O[0]))}},"function, Array, number | BigNumber | Unit, Object":(A,T,C,D)=>{var O=b(A,T,[C],D);return{t:O.t,y:O.y.map(U=>U[0])}},"function, Matrix, number | BigNumber | Unit, Object":(A,T,C,D)=>{var O=b(A,T.toArray(),[C],D);return{t:f(O.t),y:f(O.y.map(U=>U[0]))}}})}),She="erf",Mhe=["typed"],_he=ae(She,Mhe,r=>{var{typed:e}=r;return e("name",{number:function(a){var o=Math.abs(a);return o>=Ahe?vc(a):o<=Ehe?vc(a)*t(o):o<=4?vc(a)*(1-n(o)):vc(a)*(1-i(o))},"Array | Matrix":e.referToSelf(a=>o=>ur(o,a))});function t(a){var o=a*a,s=Ul[0][4]*o,l=o,u;for(u=0;u<3;u+=1)s=(s+Ul[0][u])*o,l=(l+sf[0][u])*o;return a*(s+Ul[0][3])/(l+sf[0][3])}function n(a){var o=Ul[1][8]*a,s=a,l;for(l=0;l<7;l+=1)o=(o+Ul[1][l])*a,s=(s+sf[1][l])*a;var u=(o+Ul[1][7])/(s+sf[1][7]),c=parseInt(a*16)/16,h=(a-c)*(a+c);return Math.exp(-c*c)*Math.exp(-h)*u}function i(a){var o=1/(a*a),s=Ul[2][5]*o,l=o,u;for(u=0;u<4;u+=1)s=(s+Ul[2][u])*o,l=(l+sf[2][u])*o;var c=o*(s+Ul[2][4])/(l+sf[2][4]);c=(Che-c)/a,o=parseInt(a*16)/16;var h=(a-o)*(a+o);return Math.exp(-o*o)*Math.exp(-h)*c}}),Ehe=.46875,Che=.5641895835477563,Ul=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],sf=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],Ahe=Math.pow(2,53),fF="zeta",The=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],Dhe=ae(fF,The,r=>{var{typed:e,config:t,multiply:n,pow:i,divide:a,factorial:o,equal:s,smallerEq:l,isNegative:u,gamma:c,sin:h,subtract:d,add:f,Complex:p,BigNumber:v,pi:y}=r;return e(fF,{number:S=>g(S,E=>E,()=>20),BigNumber:S=>g(S,E=>new v(E),()=>Math.abs(Math.log10(t.epsilon))),Complex:w});function g(S,E,A){return s(S,0)?E(-.5):s(S,1)?E(NaN):isFinite(S)?b(S,E,A,T=>T):u(S)?E(NaN):E(1)}function w(S){return S.re===0&&S.im===0?new p(-.5):S.re===1?new p(NaN,NaN):S.re===1/0&&S.im===0?new p(1):S.im===1/0||S.re===-1/0?new p(NaN,NaN):b(S,E=>E,E=>Math.round(1.3*15+.9*Math.abs(E.im)),E=>E.re)}function b(S,E,A,T){var C=A(S);if(T(S)>-(C-1)/2)return x(S,E(C),E);var D=n(i(2,S),i(E(y),d(S,1)));return D=n(D,h(n(a(E(y),2),S))),D=n(D,c(d(1,S))),n(D,b(d(1,S),E,A,T))}function m(S,E){for(var A=S,T=S;l(T,E);T=f(T,1)){var C=a(n(o(f(E,d(T,1))),i(4,T)),n(o(d(E,T)),o(n(2,T))));A=f(A,C)}return n(E,A)}function x(S,E,A){for(var T=a(1,n(m(A(0),E),d(1,i(2,d(1,S))))),C=A(0),D=A(1);l(D,E);D=f(D,1))C=f(C,a(n((-1)**(D-1),m(D,E)),i(D,S)));return n(T,C)}}),pF="mode",khe=["typed","isNaN","isNumeric"],Nhe=ae(pF,khe,r=>{var{typed:e,isNaN:t,isNumeric:n}=r;return e(pF,{"Array | Matrix":i,"...":function(a){return i(a)}});function i(a){a=xr(a.valueOf());var o=a.length;if(o===0)throw new Error("Cannot calculate mode of an empty array");for(var s={},l=[],u=0,c=0;c<a.length;c++){var h=a[c];if(n(h)&&t(h))throw new Error("Cannot calculate mode of an array containing NaN values");h in s||(s[h]=0),s[h]++,s[h]===u?l.push(h):s[h]>u&&(u=s[h],l=[h])}return l}});function Da(r,e,t){var n;return String(r).includes("Unexpected type")?(n=arguments.length>2?" (type: "+Br(t)+", value: "+JSON.stringify(t)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(r).includes("complex numbers")?(n=arguments.length>2?" (type: "+Br(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):r}var mF="prod",Ohe=["typed","config","multiplyScalar","numeric"],Rhe=ae(mF,Ohe,r=>{var{typed:e,config:t,multiplyScalar:n,numeric:i}=r;return e(mF,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(o,s){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return a(o)}});function a(o){var s;if(bu(o,function(l){try{s=s===void 0?l:n(s,l)}catch(u){throw Da(u,"prod",l)}}),typeof s=="string"&&(s=i(s,t.number)),s===void 0)throw new Error("Cannot calculate prod of an empty array");return s}}),gF="format",Phe=["typed"],Ihe=ae(gF,Phe,r=>{var{typed:e}=r;return e(gF,{any:lr,"any, Object | function | number | BigNumber":lr})}),vF="bin",Lhe=["typed","format"],Fhe=ae(vF,Lhe,r=>{var{typed:e,format:t}=r;return e(vF,{"number | BigNumber":function(n){return t(n,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(n,i){return t(n,{notation:"bin",wordSize:i})}})}),yF="oct",Bhe=["typed","format"],zhe=ae(yF,Bhe,r=>{var{typed:e,format:t}=r;return e(yF,{"number | BigNumber":function(n){return t(n,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(n,i){return t(n,{notation:"oct",wordSize:i})}})}),bF="hex",Uhe=["typed","format"],jhe=ae(bF,Uhe,r=>{var{typed:e,format:t}=r;return e(bF,{"number | BigNumber":function(n){return t(n,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(n,i){return t(n,{notation:"hex",wordSize:i})}})}),_W=/\$([\w.]+)/g,xF="print",Hhe=["typed"],EW=ae(xF,Hhe,r=>{var{typed:e}=r;return e(xF,{"string, Object | Array":wF,"string, Object | Array, number | Object":wF})});function wF(r,e,t){return r.replace(_W,function(n,i){var a=i.split("."),o=e[a.shift()];for(o!==void 0&&o.isMatrix&&(o=o.toArray());a.length&&o!==void 0;){var s=a.shift();o=s?o[s]:o+"."}return o!==void 0?Ci(o)?o:lr(o,t):n})}var SF="to",Vhe=["typed","matrix","concat"],qhe=ae(SF,Vhe,r=>{var{typed:e,matrix:t,concat:n}=r,i=Gr({typed:e,matrix:t,concat:n});return e(SF,{"Unit, Unit | string":(a,o)=>a.to(o)},i({Ds:!0}))}),MF="isPrime",Whe=["typed"],Ghe=ae(MF,Whe,r=>{var{typed:e}=r;return e(MF,{number:function(t){if(t*0!==0)return!1;if(t<=3)return t>1;if(t%2===0||t%3===0)return!1;for(var n=5;n*n<=t;n+=6)if(t%n===0||t%(n+2)===0)return!1;return!0},BigNumber:function(t){if(t.toNumber()*0!==0)return!1;if(t.lte(3))return t.gt(1);if(t.mod(2).eq(0)||t.mod(3).eq(0))return!1;if(t.lt(Math.pow(2,32))){for(var n=t.toNumber(),i=5;i*i<=n;i+=6)if(n%i===0||n%(i+2)===0)return!1;return!0}function a(g,w,b){for(var m=1;!w.eq(0);)w.mod(2).eq(0)?(w=w.div(2),g=g.mul(g).mod(b)):(w=w.sub(1),m=g.mul(m).mod(b));return m}var o=t.constructor.clone({precision:t.toFixed(0).length*2});t=new o(t);for(var s=0,l=t.sub(1);l.mod(2).eq(0);)l=l.div(2),s+=1;var u=null;if(t.lt("3317044064679887385961981"))u=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(g=>g<t);else{var c=Math.min(t.toNumber()-2,Math.floor(2*Math.pow(t.toFixed(0).length*Math.log(10),2)));u=[];for(var h=2;h<=c;h+=1)u.push(c)}for(var d=0;d<u.length;d+=1){var f=u[d],p=a(t.sub(t).add(f),l,t);if(!p.eq(1)){for(var v=0,y=p;!y.eq(t.sub(1));v+=1,y=y.mul(y).mod(t))if(v===s-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>n=>ur(n,t))})}),$he="numeric",Xhe=["number","?bignumber","?fraction"],Yhe=ae($he,Xhe,r=>{var{number:e,bignumber:t,fraction:n}=r,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:o=>e(o),BigNumber:t?o=>t(o):vN,Fraction:n?o=>n(o):yW};return function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var u=Br(o);if(!(u in i))throw new TypeError("Cannot convert "+o+' of type "'+u+'"; valid input types are '+Object.keys(i).join(", "));if(!(s in a))throw new TypeError("Cannot convert "+o+' to type "'+s+'"; valid output types are '+Object.keys(a).join(", "));return s===u?o:a[s](o)}}),_F="divideScalar",Jhe=["typed","numeric"],Zhe=ae(_F,Jhe,r=>{var{typed:e,numeric:t}=r;return e(_F,{"number, number":function(n,i){return n/i},"Complex, Complex":function(n,i){return n.div(i)},"BigNumber, BigNumber":function(n,i){return n.div(i)},"Fraction, Fraction":function(n,i){return n.div(i)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),EF="pow",Khe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Qhe=ae(EF,Khe,r=>{var{typed:e,config:t,identity:n,multiply:i,matrix:a,inv:o,number:s,fraction:l,Complex:u}=r;return e(EF,{"number, number":c,"Complex, Complex":function(f,p){return f.pow(p)},"BigNumber, BigNumber":function(f,p){return p.isInteger()||f>=0||t.predictable?f.pow(p):new u(f.toNumber(),0).pow(p.toNumber(),0)},"Fraction, Fraction":function(f,p){var v=f.pow(p);if(v!=null)return v;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(f.valueOf(),p.valueOf())},"Array, number":h,"Array, BigNumber":function(f,p){return h(f,p.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(f,p){return d(f,p.toNumber())},"Unit, number | BigNumber":function(f,p){return f.pow(p)}});function c(f,p){if(t.predictable&&!Nt(p)&&f<0)try{var v=l(p),y=s(v);if((p===y||Math.abs((p-y)/p)<1e-14)&&v.d%2===1)return(v.n%2===0?1:-1)*Math.pow(-f,p)}catch{}return t.predictable&&(f<-1&&p===1/0||f>-1&&f<0&&p===-1/0)?NaN:Nt(p)||f>=0||t.predictable?Tq(f,p):f*f<1&&p===1/0||f*f>1&&p===-1/0?0:new u(f,0).pow(p,0)}function h(f,p){if(!Nt(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var v=rr(f);if(v.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+v.length+" dimensions)");if(v[0]!==v[1])throw new Error("For A^b, A must be square (size is "+v[0]+"x"+v[1]+")");if(p<0)try{return h(o(f),-p)}catch(w){throw w.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):w}for(var y=n(v[0]).valueOf(),g=f;p>=1;)(p&1)===1&&(y=i(g,y)),p>>=1,g=i(g,g);return y}function d(f,p){return a(h(f.valueOf(),p))}}),lf="Number of decimals in function round must be an integer",CF="round",ede=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],tde=ae(CF,ede,r=>{var{typed:e,config:t,matrix:n,equalScalar:i,zeros:a,BigNumber:o,DenseMatrix:s}=r,l=Ii({typed:e,equalScalar:i}),u=ui({typed:e,DenseMatrix:s}),c=Os({typed:e});function h(d){return Math.abs(ey(d).exponent)}return e(CF,{number:function(d){var f=mg(d,h(t.epsilon)),p=Ta(d,f,t.epsilon)?f:d;return mg(p)},"number, number":function(d,f){var p=h(t.epsilon);if(f>=p)return mg(d,f);var v=mg(d,p),y=Ta(d,v,t.epsilon)?v:d;return mg(y,f)},"number, BigNumber":function(d,f){if(!f.isInteger())throw new TypeError(lf);return new o(d).toDecimalPlaces(f.toNumber())},Complex:function(d){return d.round()},"Complex, number":function(d,f){if(f%1)throw new TypeError(lf);return d.round(f)},"Complex, BigNumber":function(d,f){if(!f.isInteger())throw new TypeError(lf);var p=f.toNumber();return d.round(p)},BigNumber:function(d){var f=new o(d).toDecimalPlaces(h(t.epsilon)),p=Qo(d,f,t.epsilon)?f:d;return p.toDecimalPlaces(0)},"BigNumber, BigNumber":function(d,f){if(!f.isInteger())throw new TypeError(lf);var p=h(t.epsilon);if(f>=p)return d.toDecimalPlaces(f.toNumber());var v=d.toDecimalPlaces(p),y=Qo(d,v,t.epsilon)?v:d;return y.toDecimalPlaces(f.toNumber())},Fraction:function(d){return d.round()},"Fraction, number":function(d,f){if(f%1)throw new TypeError(lf);return d.round(f)},"Fraction, BigNumber":function(d,f){if(!f.isInteger())throw new TypeError(lf);return d.round(f.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(f,p,v){var y=f.toNumeric(v);return v.multiply(d(y,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(f,p,v)=>d(f,p.toNumber(),v)),"Unit, Unit":e.referToSelf(d=>(f,p)=>d(f,0,p)),"Array | Matrix, number, Unit":e.referToSelf(d=>(f,p,v)=>ur(f,y=>d(y,p,v))),"Array | Matrix, BigNumber, Unit":e.referToSelf(d=>(f,p,v)=>d(f,p.toNumber(),v)),"Array | Matrix, Unit":e.referToSelf(d=>(f,p)=>d(f,0,p)),"Array | Matrix":e.referToSelf(d=>f=>ur(f,d)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>l(f,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>c(f,p,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(f,p)=>c(n(f),p,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(f,p)=>i(f,0)?a(p.size(),p.storage()):u(p,f,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(f,p)=>i(f,0)?a(p.size(),p.storage()):c(p,f,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(f,p)=>c(n(p),f,d,!0).valueOf())})}),AF="log",rde=["config","typed","divideScalar","Complex"],nde=ae(AF,rde,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r;return e(AF,{number:function(a){return a>=0||t.predictable?rse(a):new i(a,0).log()},Complex:function(a){return a.log()},BigNumber:function(a){return!a.isNegative()||t.predictable?a.ln():new i(a.toNumber(),0).log()},"any, any":e.referToSelf(a=>(o,s)=>n(a(o),a(s)))})}),TF="log1p",ide=["typed","config","divideScalar","log","Complex"],ade=ae(TF,ide,r=>{var{typed:e,config:t,divideScalar:n,log:i,Complex:a}=r;return e(TF,{number:function(s){return s>=-1||t.predictable?tae(s):o(new a(s,0))},Complex:o,BigNumber:function(s){var l=s.plus(1);return!l.isNegative()||t.predictable?l.ln():o(new a(s.toNumber(),0))},"Array | Matrix":e.referToSelf(s=>l=>ur(l,s)),"any, any":e.referToSelf(s=>(l,u)=>n(s(l),i(u)))});function o(s){var l=s.re+1;return new a(Math.log(Math.sqrt(l*l+s.im*s.im)),Math.atan2(s.im,l))}}),DF="nthRoots",ode=["config","typed","divideScalar","Complex"],sde=ae(DF,ode,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r,a=[function(s){return new i(s,0)},function(s){return new i(0,s)},function(s){return new i(-s,0)},function(s){return new i(0,-s)}];function o(s,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(s===0||s.abs()===0)return[new i(0,0)];var u=typeof s=="number",c;(u||s.re===0||s.im===0)&&(u?c=2*+(s<0):s.im===0?c=2*+(s.re<0):c=2*+(s.im<0)+1);for(var h=s.arg(),d=s.abs(),f=[],p=Math.pow(d,1/l),v=0;v<l;v++){var y=(c+4*v)/l;if(y===Math.round(y)){f.push(a[y%4](p));continue}f.push(new i({r:p,phi:(h+2*Math.PI*v)/l}))}return f}return e(DF,{Complex:function(s){return o(s,2)},"Complex, number":o})}),kF="dotPow",lde=["typed","equalScalar","matrix","pow","DenseMatrix","concat"],ude=ae(kF,lde,r=>{var{typed:e,equalScalar:t,matrix:n,pow:i,DenseMatrix:a,concat:o}=r,s=Oa({typed:e}),l=El({typed:e,DenseMatrix:a}),u=Ii({typed:e,equalScalar:t}),c=ui({typed:e,DenseMatrix:a}),h=Gr({typed:e,matrix:n,concat:o}),d={};for(var f in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,f)&&!f.includes("Matrix")&&!f.includes("Array")&&(d[f]=i.signatures[f]);var p=e(d);return e(kF,h({elop:p,SS:l,DS:s,Ss:u,sS:c}))}),NF="dotDivide",cde=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],hde=ae(NF,cde,r=>{var{typed:e,matrix:t,equalScalar:n,divideScalar:i,DenseMatrix:a,concat:o}=r,s=Rs({typed:e,equalScalar:n}),l=Oa({typed:e}),u=El({typed:e,DenseMatrix:a}),c=Ii({typed:e,equalScalar:n}),h=ui({typed:e,DenseMatrix:a}),d=Gr({typed:e,matrix:t,concat:o});return e(NF,d({elop:i,SS:u,DS:l,SD:s,Ss:c,sS:h}))});function ry(r){var{DenseMatrix:e}=r;return function(t,n,i){var a=t.size();if(a.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+lr(a)+")");var o=a[0],s=a[1];if(o!==s)throw new RangeError("Matrix must be square (size: "+lr(a)+")");var l=[];if(Ft(n)){var u=n.size(),c=n._data;if(u.length===1){if(u[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var h=0;h<o;h++)l[h]=[c[h]];return new e({data:l,size:[o,1],datatype:n._datatype})}if(u.length===2){if(u[0]!==o||u[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(W0(n)){if(i){l=[];for(var d=0;d<o;d++)l[d]=[c[d][0]];return new e({data:l,size:[o,1],datatype:n._datatype})}return n}if(gc(n)){for(var f=0;f<o;f++)l[f]=[0];for(var p=n._values,v=n._index,y=n._ptr,g=y[1],w=y[0];w<g;w++){var b=v[w];l[b][0]=p[w]}return new e({data:l,size:[o,1],datatype:n._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Sr(n)){var m=rr(n);if(m.length===1){if(m[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var x=0;x<o;x++)l[x]=[n[x]];return new e({data:l,size:[o,1]})}if(m.length===2){if(m[0]!==o||m[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var S=0;S<o;S++)l[S]=[n[S][0]];return new e({data:l,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var OF="lsolve",dde=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],fde=ae(OF,dde,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=r,l=ry({DenseMatrix:s});return e(OF,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var f=t(h),p=u(f,d);return p.valueOf()}});function u(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],v=h._size[1],y=[],g=h._data,w=0;w<v;w++){var b=f[w][0]||0,m=void 0;if(o(b,0))m=0;else{var x=g[w][w];if(o(x,0))throw new Error("Linear system cannot be solved since matrix is singular");m=n(b,x);for(var S=w+1;S<p;S++)f[S]=[a(f[S][0]||0,i(m,g[S][w]))]}y[w]=[m]}return new s({data:y,size:[p,1]})}function c(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],v=h._size[1],y=h._values,g=h._index,w=h._ptr,b=[],m=0;m<v;m++){var x=f[m][0]||0;if(o(x,0))b[m]=[0];else{for(var S=0,E=[],A=[],T=w[m],C=w[m+1],D=T;D<C;D++){var O=g[D];O===m?S=y[D]:O>m&&(E.push(y[D]),A.push(O))}if(o(S,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var U=n(x,S),L=0,F=A.length;L<F;L++){var k=A[L];f[k]=[a(f[k][0]||0,i(U,E[L]))]}b[m]=[U]}}return new s({data:b,size:[p,1]})}}),RF="usolve",pde=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],mde=ae(RF,pde,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=r,l=ry({DenseMatrix:s});return e(RF,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var f=t(h),p=u(f,d);return p.valueOf()}});function u(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],v=h._size[1],y=[],g=h._data,w=v-1;w>=0;w--){var b=f[w][0]||0,m=void 0;if(o(b,0))m=0;else{var x=g[w][w];if(o(x,0))throw new Error("Linear system cannot be solved since matrix is singular");m=n(b,x);for(var S=w-1;S>=0;S--)f[S]=[a(f[S][0]||0,i(m,g[S][w]))]}y[w]=[m]}return new s({data:y,size:[p,1]})}function c(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],v=h._size[1],y=h._values,g=h._index,w=h._ptr,b=[],m=v-1;m>=0;m--){var x=f[m][0]||0;if(o(x,0))b[m]=[0];else{for(var S=0,E=[],A=[],T=w[m],C=w[m+1],D=C-1;D>=T;D--){var O=g[D];O===m?S=y[D]:O<m&&(E.push(y[D]),A.push(O))}if(o(S,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var U=n(x,S),L=0,F=A.length;L<F;L++){var k=A[L];f[k]=[a(f[k][0],i(U,E[L]))]}b[m]=[U]}}return new s({data:b,size:[p,1]})}}),PF="lsolveAll",gde=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],vde=ae(PF,gde,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=r,l=ry({DenseMatrix:s});return e(PF,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var f=t(h),p=u(f,d);return p.map(v=>v.valueOf())}});function u(h,d){for(var f=[l(h,d,!0)._data.map(A=>A[0])],p=h._data,v=h._size[0],y=h._size[1],g=0;g<y;g++)for(var w=f.length,b=0;b<w;b++){var m=f[b];if(o(p[g][g],0))if(o(m[g],0)){if(b===0){var x=[...m];x[g]=1;for(var S=g+1;S<y;S++)x[S]=a(x[S],p[S][g]);f.push(x)}}else{if(b===0)return[];f.splice(b,1),b-=1,w-=1}else{m[g]=n(m[g],p[g][g]);for(var E=g+1;E<y;E++)m[E]=a(m[E],i(m[g],p[E][g]))}}return f.map(A=>new s({data:A.map(T=>[T]),size:[v,1]}))}function c(h,d){for(var f=[l(h,d,!0)._data.map(Z=>Z[0])],p=h._size[0],v=h._size[1],y=h._values,g=h._index,w=h._ptr,b=0;b<v;b++)for(var m=f.length,x=0;x<m;x++){for(var S=f[x],E=[],A=[],T=w[b],C=w[b+1],D=0,O=T;O<C;O++){var U=g[O];U===b?D=y[O]:U>b&&(E.push(y[O]),A.push(U))}if(o(D,0))if(o(S[b],0)){if(x===0){var L=[...S];L[b]=1;for(var F=0,k=A.length;F<k;F++){var R=A[F];L[R]=a(L[R],E[F])}f.push(L)}}else{if(x===0)return[];f.splice(x,1),x-=1,m-=1}else{S[b]=n(S[b],D);for(var z=0,B=A.length;z<B;z++){var X=A[z];S[X]=a(S[X],i(S[b],E[z]))}}}return f.map(Z=>new s({data:Z.map(Q=>[Q]),size:[p,1]}))}}),IF="usolveAll",yde=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],bde=ae(IF,yde,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=r,l=ry({DenseMatrix:s});return e(IF,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var f=t(h),p=u(f,d);return p.map(v=>v.valueOf())}});function u(h,d){for(var f=[l(h,d,!0)._data.map(A=>A[0])],p=h._data,v=h._size[0],y=h._size[1],g=y-1;g>=0;g--)for(var w=f.length,b=0;b<w;b++){var m=f[b];if(o(p[g][g],0))if(o(m[g],0)){if(b===0){var x=[...m];x[g]=1;for(var S=g-1;S>=0;S--)x[S]=a(x[S],p[S][g]);f.push(x)}}else{if(b===0)return[];f.splice(b,1),b-=1,w-=1}else{m[g]=n(m[g],p[g][g]);for(var E=g-1;E>=0;E--)m[E]=a(m[E],i(m[g],p[E][g]))}}return f.map(A=>new s({data:A.map(T=>[T]),size:[v,1]}))}function c(h,d){for(var f=[l(h,d,!0)._data.map(Z=>Z[0])],p=h._size[0],v=h._size[1],y=h._values,g=h._index,w=h._ptr,b=v-1;b>=0;b--)for(var m=f.length,x=0;x<m;x++){for(var S=f[x],E=[],A=[],T=w[b],C=w[b+1],D=0,O=C-1;O>=T;O--){var U=g[O];U===b?D=y[O]:U<b&&(E.push(y[O]),A.push(U))}if(o(D,0))if(o(S[b],0)){if(x===0){var L=[...S];L[b]=1;for(var F=0,k=A.length;F<k;F++){var R=A[F];L[R]=a(L[R],E[F])}f.push(L)}}else{if(x===0)return[];f.splice(x,1),x-=1,m-=1}else{S[b]=n(S[b],D);for(var z=0,B=A.length;z<B;z++){var X=A[z];S[X]=a(S[X],i(S[b],E[z]))}}}return f.map(Z=>new s({data:Z.map(Q=>[Q]),size:[p,1]}))}}),xde="matAlgo08xS0Sid",wde=["typed","equalScalar"],yN=ae(xde,wde,r=>{var{typed:e,equalScalar:t}=r;return function(n,i,a){var o=n._values,s=n._index,l=n._ptr,u=n._size,c=n._datatype||n._data===void 0?n._datatype:n.getDataType(),h=i._values,d=i._index,f=i._ptr,p=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==p.length)throw new ar(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");if(!o||!h)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var y=u[0],g=u[1],w,b=t,m=0,x=a;typeof c=="string"&&c===v&&c!=="mixed"&&(w=c,b=e.find(t,[w,w]),m=e.convert(0,w),x=e.find(a,[w,w]));for(var S=[],E=[],A=[],T=[],C=[],D,O,U,L,F=0;F<g;F++){A[F]=E.length;var k=F+1;for(O=l[F],U=l[F+1],D=O;D<U;D++)L=s[D],C[L]=k,T[L]=o[D],E.push(L);for(O=f[F],U=f[F+1],D=O;D<U;D++)L=d[D],C[L]===k&&(T[L]=x(T[L],h[D]));for(D=A[F];D<E.length;){L=E[D];var R=T[L];b(R,m)?E.splice(D,1):(S.push(R),D++)}}return A[g]=E.length,n.createSparseMatrix({values:S,index:E,ptr:A,size:[y,g],datatype:c===n._datatype&&v===i._datatype?w:void 0})}}),bN=ae("useMatrixForArrayScalar",["typed","matrix"],r=>{var{typed:e,matrix:t}=r;return{"Array, number":e.referTo("DenseMatrix, number",n=>(i,a)=>n(t(i),a).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(i,a)=>n(t(i),a).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(i,a)=>n(i,t(a)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(i,a)=>n(i,t(a)).valueOf())}}),LF="leftShift",Sde=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],Mde=ae(LF,Sde,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:a,concat:o}=r,s=ah({typed:e}),l=Rs({typed:e,equalScalar:n}),u=yN({typed:e,equalScalar:n}),c=Fd({typed:e,DenseMatrix:a}),h=Ii({typed:e,equalScalar:n}),d=Os({typed:e}),f=Gr({typed:e,matrix:t,concat:o}),p=bN({typed:e,matrix:t});return e(LF,{"number, number":Rq,"BigNumber, BigNumber":que,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,g)=>n(g,0)?y.clone():h(y,g,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,g)=>n(g,0)?y.clone():d(y,g,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,g)=>n(y,0)?i(g.size(),g.storage()):c(g,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,g)=>n(y,0)?i(g.size(),g.storage()):d(g,y,v,!0))},p,f({SS:u,DS:s,SD:l}))}),FF="rightArithShift",_de=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],Ede=ae(FF,_de,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:a,concat:o}=r,s=ah({typed:e}),l=Rs({typed:e,equalScalar:n}),u=yN({typed:e,equalScalar:n}),c=Fd({typed:e,DenseMatrix:a}),h=Ii({typed:e,equalScalar:n}),d=Os({typed:e}),f=Gr({typed:e,matrix:t,concat:o}),p=bN({typed:e,matrix:t});return e(FF,{"number, number":Pq,"BigNumber, BigNumber":Wue,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,g)=>n(g,0)?y.clone():h(y,g,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,g)=>n(g,0)?y.clone():d(y,g,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,g)=>n(y,0)?i(g.size(),g.storage()):c(g,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,g)=>n(y,0)?i(g.size(),g.storage()):d(g,y,v,!0))},p,f({SS:u,DS:s,SD:l}))}),BF="rightLogShift",Cde=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],Ade=ae(BF,Cde,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:a,concat:o}=r,s=ah({typed:e}),l=Rs({typed:e,equalScalar:n}),u=yN({typed:e,equalScalar:n}),c=Fd({typed:e,DenseMatrix:a}),h=Ii({typed:e,equalScalar:n}),d=Os({typed:e}),f=Gr({typed:e,matrix:t,concat:o}),p=bN({typed:e,matrix:t});return e(BF,{"number, number":Iq,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,g)=>n(g,0)?y.clone():h(y,g,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,g)=>n(g,0)?y.clone():d(y,g,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,g)=>n(y,0)?i(g.size(),g.storage()):c(g,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,g)=>n(y,0)?i(g.size(),g.storage()):d(g,y,v,!0))},p,f({SS:u,DS:s,SD:l}))}),zF="and",Tde=["typed","matrix","equalScalar","zeros","not","concat"],CW=ae(zF,Tde,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:o}=r,s=Rs({typed:e,equalScalar:n}),l=jM({typed:e,equalScalar:n}),u=Ii({typed:e,equalScalar:n}),c=Os({typed:e}),h=Gr({typed:e,matrix:t,concat:o});return e(zF,{"number, number":Uq,"Complex, Complex":function(d,f){return(d.re!==0||d.im!==0)&&(f.re!==0||f.im!==0)},"BigNumber, BigNumber":function(d,f){return!d.isZero()&&!f.isZero()&&!d.isNaN()&&!f.isNaN()},"Unit, Unit":e.referToSelf(d=>(f,p)=>d(f.value||0,p.value||0)),"SparseMatrix, any":e.referToSelf(d=>(f,p)=>a(p)?i(f.size(),f.storage()):u(f,p,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(f,p)=>a(p)?i(f.size(),f.storage()):c(f,p,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(f,p)=>a(f)?i(f.size(),f.storage()):u(p,f,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(f,p)=>a(f)?i(f.size(),f.storage()):c(p,f,d,!0)),"Array, any":e.referToSelf(d=>(f,p)=>d(t(f),p).valueOf()),"any, Array":e.referToSelf(d=>(f,p)=>d(f,t(p)).valueOf())},h({SS:l,DS:s}))}),cS="compare",Dde=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],kde=ae(cS,Dde,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,BigNumber:a,Fraction:o,DenseMatrix:s,concat:l}=r,u=Oa({typed:e}),c=UM({typed:e,equalScalar:n}),h=ui({typed:e,DenseMatrix:s}),d=Gr({typed:e,matrix:i,concat:l}),f=xm({typed:e});return e(cS,Nde({typed:e,config:t}),{"boolean, boolean":function(p,v){return p===v?0:p>v?1:-1},"BigNumber, BigNumber":function(p,v){return Qo(p,v,t.epsilon)?new a(0):new a(p.cmp(v))},"Fraction, Fraction":function(p,v){return new o(p.compare(v))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,d({SS:c,DS:u,Ss:h}))}),Nde=ae(cS,["typed","config"],r=>{var{typed:e,config:t}=r;return e(cS,{"number, number":function(n,i){return Ta(n,i,t.epsilon)?0:n>i?1:-1}})}),Ode=function r(e,t){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,o=/^0x[0-9a-f]+$/i,s=/^0/,l=function(b){return r.insensitive&&(""+b).toLowerCase()||""+b},u=l(e).replace(i,"")||"",c=l(t).replace(i,"")||"",h=u.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=parseInt(u.match(o),16)||h.length!==1&&u.match(a)&&Date.parse(u),p=parseInt(c.match(o),16)||f&&c.match(a)&&Date.parse(c)||null,v,y;if(p){if(f<p)return-1;if(f>p)return 1}for(var g=0,w=Math.max(h.length,d.length);g<w;g++){if(v=!(h[g]||"").match(s)&&parseFloat(h[g])||h[g]||0,y=!(d[g]||"").match(s)&&parseFloat(d[g])||d[g]||0,isNaN(v)!==isNaN(y))return isNaN(v)?1:-1;if(typeof v!=typeof y&&(v+="",y+=""),v<y)return-1;if(v>y)return 1}return 0};const uf=is(Ode);var UF="compareNatural",Rde=["typed","compare"],Pde=ae(UF,Rde,r=>{var{typed:e,compare:t}=r,n=t.signatures["boolean,boolean"];return e(UF,{"any, any":i});function i(l,u){var c=Br(l),h=Br(u),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(h==="number"||h==="BigNumber"||h==="Fraction"))return d=t(l,u),d.toString()!=="0"?d>0?1:-1:uf(c,h);var f=["Array","DenseMatrix","SparseMatrix"];if(f.includes(c)||f.includes(h))return d=a(i,l,u),d!==0?d:uf(c,h);if(c!==h)return uf(c,h);if(c==="Complex")return Ide(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):o(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return n(l,u);if(c==="string")return uf(l,u);if(c==="Object")return s(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function a(l,u,c){return gc(u)&&gc(c)?o(l,u.toJSON().values,c.toJSON().values):gc(u)?a(l,u.toArray(),c):gc(c)?a(l,u,c.toArray()):W0(u)?a(l,u.toJSON().data,c):W0(c)?a(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?o(l,u,c):a(l,u,[c]):a(l,[u],c)}function o(l,u,c){for(var h=0,d=Math.min(u.length,c.length);h<d;h++){var f=l(u[h],c[h]);if(f!==0)return f}return u.length>c.length?1:u.length<c.length?-1:0}function s(l,u,c){var h=Object.keys(u),d=Object.keys(c);h.sort(uf),d.sort(uf);var f=o(l,h,d);if(f!==0)return f;for(var p=0;p<h.length;p++){var v=l(u[h[p]],c[d[p]]);if(v!==0)return v}return 0}});function Ide(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0}var jF="compareText",Lde=["typed","matrix","concat"];NT.signature="any, any";var Fde=ae(jF,Lde,r=>{var{typed:e,matrix:t,concat:n}=r,i=Gr({typed:e,matrix:t,concat:n});return e(jF,NT,i({elop:NT,Ds:!0}))}),hS="equal",Bde=["typed","matrix","equalScalar","DenseMatrix","concat"],zde=ae(hS,Bde,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,o=Oa({typed:e}),s=El({typed:e,DenseMatrix:i}),l=ui({typed:e,DenseMatrix:i}),u=Gr({typed:e,matrix:t,concat:a});return e(hS,Ude({typed:e,equalScalar:n}),u({elop:n,SS:s,DS:o,Ss:l}))}),Ude=ae(hS,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(hS,{"any, any":function(n,i){return n===null?i===null:i===null?n===null:n===void 0?i===void 0:i===void 0?n===void 0:t(n,i)}})}),HF="equalText",jde=["typed","compareText","isZero"],Hde=ae(HF,jde,r=>{var{typed:e,compareText:t,isZero:n}=r;return e(HF,{"any, any":function(i,a){return n(t(i,a))}})}),dS="smaller",Vde=["typed","config","matrix","DenseMatrix","concat"],qde=ae(dS,Vde,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a}=r,o=Oa({typed:e}),s=El({typed:e,DenseMatrix:i}),l=ui({typed:e,DenseMatrix:i}),u=Gr({typed:e,matrix:n,concat:a}),c=xm({typed:e});return e(dS,Wde({typed:e,config:t}),{"boolean, boolean":(h,d)=>h<d,"BigNumber, BigNumber":function(h,d){return h.lt(d)&&!Qo(h,d,t.epsilon)},"Fraction, Fraction":(h,d)=>h.compare(d)===-1,"Complex, Complex":function(h,d){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:o,Ss:l}))}),Wde=ae(dS,["typed","config"],r=>{var{typed:e,config:t}=r;return e(dS,{"number, number":function(n,i){return n<i&&!Ta(n,i,t.epsilon)}})}),fS="smallerEq",Gde=["typed","config","matrix","DenseMatrix","concat"],$de=ae(fS,Gde,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a}=r,o=Oa({typed:e}),s=El({typed:e,DenseMatrix:i}),l=ui({typed:e,DenseMatrix:i}),u=Gr({typed:e,matrix:n,concat:a}),c=xm({typed:e});return e(fS,Xde({typed:e,config:t}),{"boolean, boolean":(h,d)=>h<=d,"BigNumber, BigNumber":function(h,d){return h.lte(d)||Qo(h,d,t.epsilon)},"Fraction, Fraction":(h,d)=>h.compare(d)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:o,Ss:l}))}),Xde=ae(fS,["typed","config"],r=>{var{typed:e,config:t}=r;return e(fS,{"number, number":function(n,i){return n<=i||Ta(n,i,t.epsilon)}})}),pS="larger",Yde=["typed","config","matrix","DenseMatrix","concat"],Jde=ae(pS,Yde,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a}=r,o=Oa({typed:e}),s=El({typed:e,DenseMatrix:i}),l=ui({typed:e,DenseMatrix:i}),u=Gr({typed:e,matrix:n,concat:a}),c=xm({typed:e});return e(pS,Zde({typed:e,config:t}),{"boolean, boolean":(h,d)=>h>d,"BigNumber, BigNumber":function(h,d){return h.gt(d)&&!Qo(h,d,t.epsilon)},"Fraction, Fraction":(h,d)=>h.compare(d)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:o,Ss:l}))}),Zde=ae(pS,["typed","config"],r=>{var{typed:e,config:t}=r;return e(pS,{"number, number":function(n,i){return n>i&&!Ta(n,i,t.epsilon)}})}),mS="largerEq",Kde=["typed","config","matrix","DenseMatrix","concat"],Qde=ae(mS,Kde,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a}=r,o=Oa({typed:e}),s=El({typed:e,DenseMatrix:i}),l=ui({typed:e,DenseMatrix:i}),u=Gr({typed:e,matrix:n,concat:a}),c=xm({typed:e});return e(mS,efe({typed:e,config:t}),{"boolean, boolean":(h,d)=>h>=d,"BigNumber, BigNumber":function(h,d){return h.gte(d)||Qo(h,d,t.epsilon)},"Fraction, Fraction":(h,d)=>h.compare(d)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:o,Ss:l}))}),efe=ae(mS,["typed","config"],r=>{var{typed:e,config:t}=r;return e(mS,{"number, number":function(n,i){return n>=i||Ta(n,i,t.epsilon)}})}),VF="deepEqual",tfe=["typed","equal"],rfe=ae(VF,tfe,r=>{var{typed:e,equal:t}=r;return e(VF,{"any, any":function(i,a){return n(i.valueOf(),a.valueOf())}});function n(i,a){if(Array.isArray(i))if(Array.isArray(a)){var o=i.length;if(o!==a.length)return!1;for(var s=0;s<o;s++)if(!n(i[s],a[s]))return!1;return!0}else return!1;else return Array.isArray(a)?!1:t(i,a)}}),gS="unequal",nfe=["typed","config","equalScalar","matrix","DenseMatrix","concat"],ife=ae(gS,nfe,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,DenseMatrix:a,concat:o}=r,s=Oa({typed:e}),l=El({typed:e,DenseMatrix:a}),u=ui({typed:e,DenseMatrix:a}),c=Gr({typed:e,matrix:i,concat:o});return e(gS,afe({typed:e,equalScalar:n}),c({elop:h,SS:l,DS:s,Ss:u}));function h(d,f){return!n(d,f)}}),afe=ae(gS,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(gS,{"any, any":function(n,i){return n===null?i!==null:i===null?n!==null:n===void 0?i!==void 0:i===void 0?n!==void 0:!t(n,i)}})}),qF="partitionSelect",ofe=["typed","isNumeric","isNaN","compare"],sfe=ae(qF,ofe,r=>{var{typed:e,isNumeric:t,isNaN:n,compare:i}=r,a=i,o=(u,c)=>-i(u,c);return e(qF,{"Array | Matrix, number":function(u,c){return s(u,c,a)},"Array | Matrix, number, string":function(u,c,h){if(h==="asc")return s(u,c,a);if(h==="desc")return s(u,c,o);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(u,c,h){if(!Nt(c)||c<0)throw new Error("k must be a non-negative integer");if(Ft(u)){var d=u.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,h)}if(Array.isArray(u))return l(u,c,h)}function l(u,c,h){if(c>=u.length)throw new Error("k out of bounds");for(var d=0;d<u.length;d++)if(t(u[d])&&n(u[d]))return u[d];for(var f=0,p=u.length-1;f<p;){for(var v=f,y=p,g=u[Math.floor(Math.random()*(p-f+1))+f];v<y;)if(h(u[v],g)>=0){var w=u[y];u[y]=u[v],u[v]=w,--y}else++v;h(u[v],g)>0&&--v,c<=v?p=v:f=v+1}return u[c]}}),WF="sort",lfe=["typed","matrix","compare","compareNatural"],ufe=ae(WF,lfe,r=>{var{typed:e,matrix:t,compare:n,compareNatural:i}=r,a=n,o=(c,h)=>-n(c,h);return e(WF,{Array:function(c){return l(c),c.sort(a)},Matrix:function(c){return u(c),t(c.toArray().sort(a),c.storage())},"Array, function":function(c,h){return l(c),c.sort(h)},"Matrix, function":function(c,h){return u(c),t(c.toArray().sort(h),c.storage())},"Array, string":function(c,h){return l(c),c.sort(s(h))},"Matrix, string":function(c,h){return u(c),t(c.toArray().sort(s(h)),c.storage())}});function s(c){if(c==="asc")return a;if(c==="desc")return o;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(rr(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),GF="max",cfe=["typed","config","numeric","larger"],AW=ae(GF,cfe,r=>{var{typed:e,config:t,numeric:n,larger:i}=r;return e(GF,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(s,l){return BM(s,l.valueOf(),a)},"...":function(s){if(vm(s))throw new TypeError("Scalar values expected in function max");return o(s)}});function a(s,l){try{return i(s,l)?s:l}catch(u){throw Da(u,"max",l)}}function o(s){var l;if(bu(s,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw Da(c,"max",u)}}),l===void 0)throw new Error("Cannot calculate max of an empty array");return typeof l=="string"&&(l=n(l,t.number)),l}}),$F="min",hfe=["typed","config","numeric","smaller"],TW=ae($F,hfe,r=>{var{typed:e,config:t,numeric:n,smaller:i}=r;return e($F,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(s,l){return BM(s,l.valueOf(),a)},"...":function(s){if(vm(s))throw new TypeError("Scalar values expected in function min");return o(s)}});function a(s,l){try{return i(s,l)?s:l}catch(u){throw Da(u,"min",l)}}function o(s){var l;if(bu(s,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw Da(c,"min",u)}}),l===void 0)throw new Error("Cannot calculate min of an empty array");return typeof l=="string"&&(l=n(l,t.number)),l}}),dfe="ImmutableDenseMatrix",ffe=["smaller","DenseMatrix"],pfe=ae(dfe,ffe,r=>{var{smaller:e,DenseMatrix:t}=r;function n(i,a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!Ci(a))throw new Error("Invalid datatype: "+a);if(Ft(i)||Sr(i)){var o=new t(i,a);this._data=o._data,this._size=o._size,this._datatype=o._datatype,this._min=null,this._max=null}else if(i&&Sr(i.data)&&Sr(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+Br(i)+")");this._data=[],this._size=[0],this._datatype=a,this._min=null,this._max=null}}return n.prototype=new t,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var a=t.prototype.subset.call(this,i);return Ft(a)?new n({data:a._data,size:a._size,datatype:a._datatype}):a}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:Gt(this._data),size:Gt(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(a){(i===null||e(a,i))&&(i=a)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(a){(i===null||e(i,a))&&(i=a)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0}),mfe="Index",gfe=["ImmutableDenseMatrix","getMatrixDataType"],vfe=ae(mfe,gfe,r=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=r;function n(a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var o=0,s=arguments.length;o<s;o++){var l=arguments[o],u=Sr(l),c=Ft(l),h=null;if(NM(l))this._dimensions.push(l),this._isScalar=!1;else if(u||c){var d=void 0;t(l)==="boolean"?(u&&(d=i(XF(l).valueOf())),c&&(d=i(XF(l._data).valueOf())),h=l.valueOf().length):d=i(l.valueOf()),this._dimensions.push(d);var f=d.size();(f.length!==1||f[0]!==1||h!==null)&&(this._isScalar=!1)}else if(typeof l=="number")this._dimensions.push(i([l]));else if(typeof l=="string")this._dimensions.push(l);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(h)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(a){for(var o=0,s=a.length;o<s;o++)if(typeof a[o]!="number"||!Nt(a[o]))throw new TypeError("Index parameters must be positive integer numbers");return new e(a)}return n.prototype.clone=function(){var a=new n;return a._dimensions=Gt(this._dimensions),a._isScalar=this._isScalar,a._sourceSize=this._sourceSize,a},n.create=function(a){var o=new n;return n.apply(o,a),o},n.prototype.size=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var l=this._dimensions[o];a[o]=typeof l=="string"?1:l.size()[0]}return a},n.prototype.max=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var l=this._dimensions[o];a[o]=typeof l=="string"?l:l.max()}return a},n.prototype.min=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var l=this._dimensions[o];a[o]=typeof l=="string"?l:l.min()}return a},n.prototype.forEach=function(a){for(var o=0,s=this._dimensions.length;o<s;o++)a(this._dimensions[o],o,this)},n.prototype.dimension=function(a){return this._dimensions[a]||null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var l=this._dimensions[o];a.push(typeof l=="string"?l:l.toArray())}return a},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var l=this._dimensions[o];typeof l=="string"?a.push(JSON.stringify(l)):a.push(l.toString())}return"["+a.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(a){return n.create(a.dimensions)},n},{isClass:!0});function XF(r){var e=[];return r.forEach((t,n)=>{t&&e.push(n)}),e}var yfe="FibonacciHeap",bfe=["smaller","larger"],xfe=ae(yfe,bfe,r=>{var{smaller:e,larger:t}=r,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,h){var d={key:c,value:h,degree:0};if(this._minimum){var f=this._minimum;d.left=f,d.right=f.right,f.right=d,d.right.left=d,e(c,f.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var h=this._minimum,d=c.degree,f=c.child;d>0;){var p=f.right;f.left.right=f.right,f.right.left=f.left,f.left=h,f.right=h.right,h.right=f,f.right.left=f,f.parent=null,f=p,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?h=null:(h=c.right,h=u(h,this._size)),this._size--,this._minimum=h,c},i.prototype.remove=function(c){this._minimum=a(this._minimum,c,-1),this.extractMinimum()};function a(c,h,d){h.key=d;var f=h.parent;return f&&e(h.key,f.key)&&(o(c,h,f),s(c,f)),e(h.key,c.key)&&(c=h),c}function o(c,h,d){h.left.right=h.right,h.right.left=h.left,d.degree--,d.child===h&&(d.child=h.right),d.degree===0&&(d.child=null),h.left=c,h.right=c.right,c.right=h,h.right.left=h,h.parent=null,h.mark=!1}function s(c,h){var d=h.parent;d&&(h.mark?(o(c,h,d),s(d)):h.mark=!0)}var l=function(c,h){c.left.right=c.right,c.right.left=c.left,c.parent=h,h.child?(c.left=h.child,c.right=h.child.right,h.child.right=c,c.right.left=c):(h.child=c,c.right=c,c.left=c),h.degree++,c.mark=!1};function u(c,h){var d=Math.floor(Math.log(h)*n)+1,f=new Array(d),p=0,v=c;if(v)for(p++,v=v.right;v!==c;)p++,v=v.right;for(var y;p>0;){for(var g=v.degree,w=v.right;y=f[g],!!y;){if(t(v.key,y.key)){var b=y;y=v,v=b}l(y,v),f[g]=null,g++}f[g]=v,v=w,p--}c=null;for(var m=0;m<d;m++)y=f[m],y&&(c?(y.left.right=y.right,y.right.left=y.left,y.left=c,y.right=c.right,c.right=y,y.right.left=y,e(y.key,c.key)&&(c=y)):c=y);return c}return i},{isClass:!0}),wfe="Spa",Sfe=["addScalar","equalScalar","FibonacciHeap"],Mfe=ae(wfe,Sfe,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:n}=r;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(a,o){if(this._values[a])this._values[a].value=o;else{var s=this._heap.insert(a,o);this._values[a]=s}},i.prototype.get=function(a){var o=this._values[a];return o?o.value:0},i.prototype.accumulate=function(a,o){var s=this._values[a];s?s.value=e(s.value,o):(s=this._heap.insert(a,o),this._values[a]=s)},i.prototype.forEach=function(a,o,s){var l=this._heap,u=this._values,c=[],h=l.extractMinimum();for(h&&c.push(h);h&&h.key<=o;)h.key>=a&&(t(h.value,0)||s(h.key,h.value,this)),h=l.extractMinimum(),h&&c.push(h);for(var d=0;d<c.length;d++){var f=c[d];h=l.insert(f.key,f.value),u[h.key]=h}},i.prototype.swap=function(a,o){var s=this._values[a],l=this._values[o];if(!s&&l)s=this._heap.insert(a,l.value),this._heap.remove(l),this._values[a]=s,this._values[o]=void 0;else if(s&&!l)l=this._heap.insert(o,s.value),this._heap.remove(s),this._values[o]=l,this._values[a]=void 0;else if(s&&l){var u=s.value;s.value=l.value,l.value=u}},i},{isClass:!0}),_fe=ty(function(r){return new r(1).exp()},{hasher:HM}),Efe=ty(function(r){return new r(1).plus(new r(5).sqrt()).div(2)},{hasher:HM}),xN=ty(function(r){return r.acos(-1)},{hasher:HM}),Cfe=ty(function(r){return xN(r).times(2)},{hasher:HM});function HM(r){return r[0].precision}function YF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function BE(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YF(Object(t),!0).forEach(function(n){fn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):YF(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Afe="Unit",Tfe=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],Dfe=ae(Afe,Tfe,r=>{var{on:e,config:t,addScalar:n,subtractScalar:i,multiplyScalar:a,divideScalar:o,pow:s,abs:l,fix:u,round:c,equal:h,isNumeric:d,format:f,number:p,Complex:v,BigNumber:y,Fraction:g}=r,w=p;function b(K,ie){if(!(this instanceof b))throw new Error("Constructor must be called with the new operator");if(!(K==null||d(K)||_s(K)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,ie===void 0)this.units=[],this.dimensions=z.map(oe=>0);else if(typeof ie=="string"){var _e=b.parse(ie);this.units=_e.units,this.dimensions=_e.dimensions}else if(ja(ie)&&ie.value===null)this.fixPrefix=ie.fixPrefix,this.skipAutomaticSimplification=ie.skipAutomaticSimplification,this.dimensions=ie.dimensions.slice(0),this.units=ie.units.map(oe=>lt({},oe));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(K)}Object.defineProperty(b,"name",{value:"Unit"}),b.prototype.constructor=b,b.prototype.type="Unit",b.prototype.isUnit=!0;var m,x,S;function E(){for(;S===" "||S==="	";)C()}function A(K){return K>="0"&&K<="9"||K==="."}function T(K){return K>="0"&&K<="9"}function C(){x++,S=m.charAt(x)}function D(K){x=K,S=m.charAt(x)}function O(){var K="",ie=x;if(S==="+"?C():S==="-"&&(K+=S,C()),!A(S))return D(ie),null;if(S==="."){if(K+=S,C(),!T(S))return D(ie),null}else{for(;T(S);)K+=S,C();S==="."&&(K+=S,C())}for(;T(S);)K+=S,C();if(S==="E"||S==="e"){var _e="",oe=x;if(_e+=S,C(),(S==="+"||S==="-")&&(_e+=S,C()),!T(S))return D(oe),K;for(K=K+_e;T(S);)K+=S,C()}return K}function U(){for(var K="";T(S)||b.isValidAlpha(S);)K+=S,C();var ie=K.charAt(0);return b.isValidAlpha(ie)?K:null}function L(K){return S===K?(C(),K):null}b.parse=function(K,ie){if(ie=ie||{},m=K,x=-1,S="",typeof m!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var _e=new b;_e.units=[];var oe=1,G=!1;C(),E();var W=O(),ce=null;if(W){if(t.number==="BigNumber")ce=new y(W);else if(t.number==="Fraction")try{ce=new g(W)}catch{ce=parseFloat(W)}else ce=parseFloat(W);E(),L("*")?(oe=1,G=!0):L("/")&&(oe=-1,G=!0)}for(var Ce=[],$=1;;){for(E();S==="(";)Ce.push(oe),$*=oe,oe=1,C(),E();var ee=void 0;if(S){var ge=S;if(ee=U(),ee===null)throw new SyntaxError('Unexpected "'+ge+'" in "'+m+'" at index '+x.toString())}else break;var xe=F(ee);if(xe===null)throw new SyntaxError('Unit "'+ee+'" not found.');var Ne=oe*$;if(E(),L("^")){E();var Fe=O();if(Fe===null)throw new SyntaxError('In "'+K+'", "^" must be followed by a floating-point number');Ne*=Fe}_e.units.push({unit:xe.unit,prefix:xe.prefix,power:Ne});for(var We=0;We<z.length;We++)_e.dimensions[We]+=(xe.unit.dimensions[We]||0)*Ne;for(E();S===")";){if(Ce.length===0)throw new SyntaxError('Unmatched ")" in "'+m+'" at index '+x.toString());$/=Ce.pop(),C(),E()}if(G=!1,L("*")?(oe=1,G=!0):L("/")?(oe=-1,G=!0):oe=1,xe.unit.base){var ke=xe.unit.base.key;se.auto[ke]={unit:xe.unit,prefix:xe.prefix}}}if(E(),S)throw new SyntaxError('Could not parse: "'+K+'"');if(G)throw new SyntaxError('Trailing characters: "'+K+'"');if(Ce.length!==0)throw new SyntaxError('Unmatched "(" in "'+m+'"');if(_e.units.length===0&&!ie.allowNoUnits)throw new SyntaxError('"'+K+'" contains no units');return _e.value=ce!==void 0?_e._normalize(ce):null,_e},b.prototype.clone=function(){var K=new b;K.fixPrefix=this.fixPrefix,K.skipAutomaticSimplification=this.skipAutomaticSimplification,K.value=Gt(this.value),K.dimensions=this.dimensions.slice(0),K.units=[];for(var ie=0;ie<this.units.length;ie++){K.units[ie]={};for(var _e in this.units[ie])gt(this.units[ie],_e)&&(K.units[ie][_e]=this.units[ie][_e])}return K},b.prototype.valueType=function(){return Br(this.value)},b.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},b.prototype._normalize=function(K){if(K==null||this.units.length===0)return K;for(var ie=K,_e=b._getNumberConverter(Br(K)),oe=0;oe<this.units.length;oe++){var G=_e(this.units[oe].unit.value),W=_e(this.units[oe].prefix.value),ce=_e(this.units[oe].power);ie=a(ie,s(a(G,W),ce))}return ie},b.prototype._denormalize=function(K,ie){if(K==null||this.units.length===0)return K;for(var _e=K,oe=b._getNumberConverter(Br(K)),G=0;G<this.units.length;G++){var W=oe(this.units[G].unit.value),ce=oe(this.units[G].prefix.value),Ce=oe(this.units[G].power);_e=o(_e,s(a(W,ce),Ce))}return _e};var F=ty(K=>{if(gt(J,K)){var ie=J[K],_e=ie.prefixes[""];return{unit:ie,prefix:_e}}for(var oe in J)if(gt(J,oe)&&joe(K,oe)){var G=J[oe],W=K.length-oe.length,ce=K.substring(0,W),Ce=gt(G.prefixes,ce)?G.prefixes[ce]:void 0;if(Ce!==void 0)return{unit:G,prefix:Ce}}return null},{hasher:K=>K[0],limit:100});b.isValuelessUnit=function(K){return F(K)!==null},b.prototype.hasBase=function(K){if(typeof K=="string"&&(K=B[K]),!K)return!1;for(var ie=0;ie<z.length;ie++)if(Math.abs((this.dimensions[ie]||0)-(K.dimensions[ie]||0))>1e-12)return!1;return!0},b.prototype.equalBase=function(K){for(var ie=0;ie<z.length;ie++)if(Math.abs((this.dimensions[ie]||0)-(K.dimensions[ie]||0))>1e-12)return!1;return!0},b.prototype.equals=function(K){return this.equalBase(K)&&h(this.value,K.value)},b.prototype.multiply=function(K){for(var ie=this.clone(),_e=ja(K)?K:new b(K),oe=0;oe<z.length;oe++)ie.dimensions[oe]=(this.dimensions[oe]||0)+(_e.dimensions[oe]||0);for(var G=0;G<_e.units.length;G++){var W=BE({},_e.units[G]);ie.units.push(W)}if(this.value!==null||_e.value!==null){var ce=this.value===null?this._normalize(1):this.value,Ce=_e.value===null?_e._normalize(1):_e.value;ie.value=a(ce,Ce)}else ie.value=null;return ja(K)&&(ie.skipAutomaticSimplification=!1),k(ie)},b.prototype.divideInto=function(K){return new b(K).divide(this)},b.prototype.divide=function(K){for(var ie=this.clone(),_e=ja(K)?K:new b(K),oe=0;oe<z.length;oe++)ie.dimensions[oe]=(this.dimensions[oe]||0)-(_e.dimensions[oe]||0);for(var G=0;G<_e.units.length;G++){var W=BE(BE({},_e.units[G]),{},{power:-_e.units[G].power});ie.units.push(W)}if(this.value!==null||_e.value!==null){var ce=this.value===null?this._normalize(1):this.value,Ce=_e.value===null?_e._normalize(1):_e.value;ie.value=o(ce,Ce)}else ie.value=null;return ja(K)&&(ie.skipAutomaticSimplification=!1),k(ie)},b.prototype.pow=function(K){for(var ie=this.clone(),_e=0;_e<z.length;_e++)ie.dimensions[_e]=(this.dimensions[_e]||0)*K;for(var oe=0;oe<ie.units.length;oe++)ie.units[oe].power*=K;return ie.value!==null?ie.value=s(ie.value,K):ie.value=null,ie.skipAutomaticSimplification=!1,k(ie)};function k(K){return K.equalBase(B.NONE)&&K.value!==null&&!t.predictable?K.value:K}b.prototype.abs=function(){var K=this.clone();if(K.value!==null)if(K._isDerived()||K.units.length===0||K.units[0].unit.offset===0)K.value=l(K.value);else{var ie=K._numberConverter(),_e=ie(K.units[0].unit.value),oe=ie(K.units[0].unit.offset),G=a(_e,oe);K.value=i(l(n(K.value,G)),G)}for(var W in K.units)(K.units[W].unit.name==="VA"||K.units[W].unit.name==="VAR")&&(K.units[W].unit=J.W);return K},b.prototype.to=function(K){var ie=this.value===null?this._normalize(1):this.value,_e;if(typeof K=="string")_e=b.parse(K);else if(ja(K))_e=K.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(_e))throw new Error("Units do not match ('".concat(_e.toString(),"' != '").concat(this.toString(),"')"));if(_e.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||_e.units.length===0||this.units[0].unit.offset===_e.units[0].unit.offset)_e.value=Gt(ie);else{var oe=b._getNumberConverter(Br(ie)),G=this.units[0].unit.value,W=this.units[0].unit.offset,ce=a(G,W),Ce=_e.units[0].unit.value,$=_e.units[0].unit.offset,ee=a(Ce,$);_e.value=n(ie,oe(i(ce,ee)))}return _e.fixPrefix=!0,_e.skipAutomaticSimplification=!0,_e},b.prototype.toNumber=function(K){return w(this.toNumeric(K))},b.prototype.toNumeric=function(K){var ie;return K?ie=this.to(K):ie=this.clone(),ie._isDerived()||ie.units.length===0?ie._denormalize(ie.value):ie._denormalize(ie.value,ie.units[0].prefix.value)},b.prototype.toString=function(){return this.format()},b.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},b.fromJSON=function(K){var ie,_e=new b(K.value,(ie=K.unit)!==null&&ie!==void 0?ie:void 0);return _e.fixPrefix=K.fixPrefix||!1,_e},b.prototype.valueOf=b.prototype.toString,b.prototype.simplify=function(){var K=this.clone(),ie=[],_e;for(var oe in ye)if(gt(ye,oe)&&K.hasBase(B[oe])){_e=oe;break}if(_e==="NONE")K.units=[];else{var G;if(_e&&gt(ye,_e)&&(G=ye[_e]),G)K.units=[{unit:G.unit,prefix:G.prefix,power:1}];else{for(var W=!1,ce=0;ce<z.length;ce++){var Ce=z[ce];Math.abs(K.dimensions[ce]||0)>1e-12&&(gt(ye,Ce)?ie.push({unit:ye[Ce].unit,prefix:ye[Ce].prefix,power:K.dimensions[ce]||0}):W=!0)}ie.length<K.units.length&&!W&&(K.units=ie)}}return K},b.prototype.toSI=function(){for(var K=this.clone(),ie=[],_e=0;_e<z.length;_e++){var oe=z[_e];if(Math.abs(K.dimensions[_e]||0)>1e-12)if(gt(se.si,oe))ie.push({unit:se.si[oe].unit,prefix:se.si[oe].prefix,power:K.dimensions[_e]||0});else throw new Error("Cannot express custom unit "+oe+" in SI units")}return K.units=ie,K.fixPrefix=!0,K.skipAutomaticSimplification=!0,this.value!==null?(K.value=null,this.to(K)):K},b.prototype.formatUnits=function(){for(var K="",ie="",_e=0,oe=0,G=0;G<this.units.length;G++)this.units[G].power>0?(_e++,K+=" "+this.units[G].prefix.name+this.units[G].unit.name,Math.abs(this.units[G].power-1)>1e-15&&(K+="^"+this.units[G].power)):this.units[G].power<0&&oe++;if(oe>0)for(var W=0;W<this.units.length;W++)this.units[W].power<0&&(_e>0?(ie+=" "+this.units[W].prefix.name+this.units[W].unit.name,Math.abs(this.units[W].power+1)>1e-15&&(ie+="^"+-this.units[W].power)):(ie+=" "+this.units[W].prefix.name+this.units[W].unit.name,ie+="^"+this.units[W].power));K=K.substr(1),ie=ie.substr(1),_e>1&&oe>0&&(K="("+K+")"),oe>1&&_e>0&&(ie="("+ie+")");var ce=K;return _e>0&&oe>0&&(ce+=" / "),ce+=ie,ce},b.prototype.format=function(K){var ie=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),_e=!1;typeof ie.value<"u"&&ie.value!==null&&_s(ie.value)&&(_e=Math.abs(ie.value.re)<1e-14);for(var oe in ie.units)gt(ie.units,oe)&&ie.units[oe].unit&&(ie.units[oe].unit.name==="VA"&&_e?ie.units[oe].unit=J.VAR:ie.units[oe].unit.name==="VAR"&&!_e&&(ie.units[oe].unit=J.VA));ie.units.length===1&&!ie.fixPrefix&&Math.abs(ie.units[0].power-Math.round(ie.units[0].power))<1e-14&&(ie.units[0].prefix=ie._bestPrefix());var G=ie._denormalize(ie.value),W=ie.value!==null?f(G,K||{}):"",ce=ie.formatUnits();return ie.value&&_s(ie.value)&&(W="("+W+")"),ce.length>0&&W.length>0&&(W+=" "),W+=ce,W},b.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var K=this.value!==null?l(this.value):0,ie=l(this.units[0].unit.value),_e=this.units[0].prefix;if(K===0)return _e;var oe=this.units[0].power,G=Math.log(K/Math.pow(_e.value*ie,oe))/Math.LN10-1.2;if(G>-2.200001&&G<1.800001)return _e;G=Math.abs(G);var W=this.units[0].unit.prefixes;for(var ce in W)if(gt(W,ce)){var Ce=W[ce];if(Ce.scientific){var $=Math.abs(Math.log(K/Math.pow(Ce.value*ie,oe))/Math.LN10-1.2);($<G||$===G&&Ce.name.length<_e.name.length)&&(_e=Ce,G=$)}}return _e},b.prototype.splitUnit=function(K){for(var ie=this.clone(),_e=[],oe=0;oe<K.length&&(ie=ie.to(K[oe]),oe!==K.length-1);oe++){var G=ie.toNumeric(),W=c(G),ce=void 0,Ce=h(W,G);Ce?ce=W:ce=u(ie.toNumeric());var $=new b(ce,K[oe].toString());_e.push($),ie=i(ie,$)}for(var ee=0,ge=0;ge<_e.length;ge++)ee=n(ee,_e[ge].value);return h(ee,this.value)&&(ie.value=0),_e.push(ie),_e};var R={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};R.SHORTLONG=lt({},R.SHORT,R.LONG),R.BINARY_SHORT=lt({},R.BINARY_SHORT_SI,R.BINARY_SHORT_IEC),R.BINARY_LONG=lt({},R.BINARY_LONG_SI,R.BINARY_LONG_IEC);var z=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],B={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var X in B)gt(B,X)&&(B[X].key=X);var Z={},Q={name:"",base:Z,value:1,offset:0,dimensions:z.map(K=>0)},J={meter:{name:"meter",base:B.LENGTH,prefixes:R.LONG,value:1,offset:0},inch:{name:"inch",base:B.LENGTH,prefixes:R.NONE,value:.0254,offset:0},foot:{name:"foot",base:B.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yard:{name:"yard",base:B.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mile:{name:"mile",base:B.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},link:{name:"link",base:B.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rod:{name:"rod",base:B.LENGTH,prefixes:R.NONE,value:5.0292,offset:0},chain:{name:"chain",base:B.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:B.LENGTH,prefixes:R.NONE,value:1e-10,offset:0},m:{name:"m",base:B.LENGTH,prefixes:R.SHORT,value:1,offset:0},in:{name:"in",base:B.LENGTH,prefixes:R.NONE,value:.0254,offset:0},ft:{name:"ft",base:B.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yd:{name:"yd",base:B.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mi:{name:"mi",base:B.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},li:{name:"li",base:B.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rd:{name:"rd",base:B.LENGTH,prefixes:R.NONE,value:5.02921,offset:0},ch:{name:"ch",base:B.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},mil:{name:"mil",base:B.LENGTH,prefixes:R.NONE,value:254e-7,offset:0},m2:{name:"m2",base:B.SURFACE,prefixes:R.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:B.SURFACE,prefixes:R.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:B.SURFACE,prefixes:R.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:B.SURFACE,prefixes:R.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:B.SURFACE,prefixes:R.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:B.SURFACE,prefixes:R.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:B.SURFACE,prefixes:R.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:B.SURFACE,prefixes:R.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:B.SURFACE,prefixes:R.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:B.SURFACE,prefixes:R.NONE,value:1e4,offset:0},m3:{name:"m3",base:B.VOLUME,prefixes:R.CUBIC,value:1,offset:0},L:{name:"L",base:B.VOLUME,prefixes:R.SHORT,value:.001,offset:0},l:{name:"l",base:B.VOLUME,prefixes:R.SHORT,value:.001,offset:0},litre:{name:"litre",base:B.VOLUME,prefixes:R.LONG,value:.001,offset:0},cuin:{name:"cuin",base:B.VOLUME,prefixes:R.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:B.VOLUME,prefixes:R.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:B.VOLUME,prefixes:R.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:B.VOLUME,prefixes:R.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:B.VOLUME,prefixes:R.NONE,value:15e-6,offset:0},drop:{name:"drop",base:B.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:B.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},minim:{name:"minim",base:B.VOLUME,prefixes:R.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:B.VOLUME,prefixes:R.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:B.VOLUME,prefixes:R.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:B.VOLUME,prefixes:R.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:B.VOLUME,prefixes:R.NONE,value:1e-6,offset:0},cup:{name:"cup",base:B.VOLUME,prefixes:R.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:B.VOLUME,prefixes:R.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:B.VOLUME,prefixes:R.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:B.VOLUME,prefixes:R.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:B.VOLUME,prefixes:R.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:B.VOLUME,prefixes:R.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:B.VOLUME,prefixes:R.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:B.VOLUME,prefixes:R.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:B.VOLUME,prefixes:R.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:B.VOLUME,prefixes:R.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:B.VOLUME,prefixes:R.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:B.VOLUME,prefixes:R.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:B.VOLUME,prefixes:R.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:B.VOLUME,prefixes:R.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:B.VOLUME,prefixes:R.NONE,value:.1173478,offset:0},obl:{name:"obl",base:B.VOLUME,prefixes:R.NONE,value:.1589873,offset:0},g:{name:"g",base:B.MASS,prefixes:R.SHORT,value:.001,offset:0},gram:{name:"gram",base:B.MASS,prefixes:R.LONG,value:.001,offset:0},ton:{name:"ton",base:B.MASS,prefixes:R.SHORT,value:907.18474,offset:0},t:{name:"t",base:B.MASS,prefixes:R.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:B.MASS,prefixes:R.LONG,value:1e3,offset:0},grain:{name:"grain",base:B.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:B.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:B.MASS,prefixes:R.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:B.MASS,prefixes:R.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:B.MASS,prefixes:R.NONE,value:45.359237,offset:0},stick:{name:"stick",base:B.MASS,prefixes:R.NONE,value:.115,offset:0},stone:{name:"stone",base:B.MASS,prefixes:R.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:B.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:B.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:B.MASS,prefixes:R.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:B.MASS,prefixes:R.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:B.MASS,prefixes:R.NONE,value:45.359237,offset:0},s:{name:"s",base:B.TIME,prefixes:R.SHORT,value:1,offset:0},min:{name:"min",base:B.TIME,prefixes:R.NONE,value:60,offset:0},h:{name:"h",base:B.TIME,prefixes:R.NONE,value:3600,offset:0},second:{name:"second",base:B.TIME,prefixes:R.LONG,value:1,offset:0},sec:{name:"sec",base:B.TIME,prefixes:R.LONG,value:1,offset:0},minute:{name:"minute",base:B.TIME,prefixes:R.NONE,value:60,offset:0},hour:{name:"hour",base:B.TIME,prefixes:R.NONE,value:3600,offset:0},day:{name:"day",base:B.TIME,prefixes:R.NONE,value:86400,offset:0},week:{name:"week",base:B.TIME,prefixes:R.NONE,value:7*86400,offset:0},month:{name:"month",base:B.TIME,prefixes:R.NONE,value:2629800,offset:0},year:{name:"year",base:B.TIME,prefixes:R.NONE,value:31557600,offset:0},decade:{name:"decade",base:B.TIME,prefixes:R.NONE,value:315576e3,offset:0},century:{name:"century",base:B.TIME,prefixes:R.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:B.TIME,prefixes:R.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:B.FREQUENCY,prefixes:R.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:B.FREQUENCY,prefixes:R.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:B.ANGLE,prefixes:R.SHORT,value:1,offset:0},radian:{name:"radian",base:B.ANGLE,prefixes:R.LONG,value:1,offset:0},deg:{name:"deg",base:B.ANGLE,prefixes:R.SHORT,value:null,offset:0},degree:{name:"degree",base:B.ANGLE,prefixes:R.LONG,value:null,offset:0},grad:{name:"grad",base:B.ANGLE,prefixes:R.SHORT,value:null,offset:0},gradian:{name:"gradian",base:B.ANGLE,prefixes:R.LONG,value:null,offset:0},cycle:{name:"cycle",base:B.ANGLE,prefixes:R.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:B.ANGLE,prefixes:R.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:B.ANGLE,prefixes:R.NONE,value:null,offset:0},A:{name:"A",base:B.CURRENT,prefixes:R.SHORT,value:1,offset:0},ampere:{name:"ampere",base:B.CURRENT,prefixes:R.LONG,value:1,offset:0},K:{name:"K",base:B.TEMPERATURE,prefixes:R.SHORT,value:1,offset:0},degC:{name:"degC",base:B.TEMPERATURE,prefixes:R.SHORT,value:1,offset:273.15},degF:{name:"degF",base:B.TEMPERATURE,prefixes:R.SHORT,value:new g(5,9),offset:459.67},degR:{name:"degR",base:B.TEMPERATURE,prefixes:R.SHORT,value:new g(5,9),offset:0},kelvin:{name:"kelvin",base:B.TEMPERATURE,prefixes:R.LONG,value:1,offset:0},celsius:{name:"celsius",base:B.TEMPERATURE,prefixes:R.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:B.TEMPERATURE,prefixes:R.LONG,value:new g(5,9),offset:459.67},rankine:{name:"rankine",base:B.TEMPERATURE,prefixes:R.LONG,value:new g(5,9),offset:0},mol:{name:"mol",base:B.AMOUNT_OF_SUBSTANCE,prefixes:R.SHORT,value:1,offset:0},mole:{name:"mole",base:B.AMOUNT_OF_SUBSTANCE,prefixes:R.LONG,value:1,offset:0},cd:{name:"cd",base:B.LUMINOUS_INTENSITY,prefixes:R.SHORT,value:1,offset:0},candela:{name:"candela",base:B.LUMINOUS_INTENSITY,prefixes:R.LONG,value:1,offset:0},N:{name:"N",base:B.FORCE,prefixes:R.SHORT,value:1,offset:0},newton:{name:"newton",base:B.FORCE,prefixes:R.LONG,value:1,offset:0},dyn:{name:"dyn",base:B.FORCE,prefixes:R.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:B.FORCE,prefixes:R.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:B.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:B.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:B.FORCE,prefixes:R.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:B.FORCE,prefixes:R.NONE,value:9.80665,offset:0},J:{name:"J",base:B.ENERGY,prefixes:R.SHORT,value:1,offset:0},joule:{name:"joule",base:B.ENERGY,prefixes:R.LONG,value:1,offset:0},erg:{name:"erg",base:B.ENERGY,prefixes:R.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:B.ENERGY,prefixes:R.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:B.ENERGY,prefixes:R.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:B.ENERGY,prefixes:R.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:B.ENERGY,prefixes:R.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:B.POWER,prefixes:R.SHORT,value:1,offset:0},watt:{name:"watt",base:B.POWER,prefixes:R.LONG,value:1,offset:0},hp:{name:"hp",base:B.POWER,prefixes:R.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:B.POWER,prefixes:R.SHORT,value:v.I,offset:0},VA:{name:"VA",base:B.POWER,prefixes:R.SHORT,value:1,offset:0},Pa:{name:"Pa",base:B.PRESSURE,prefixes:R.SHORT,value:1,offset:0},psi:{name:"psi",base:B.PRESSURE,prefixes:R.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:B.PRESSURE,prefixes:R.NONE,value:101325,offset:0},bar:{name:"bar",base:B.PRESSURE,prefixes:R.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:B.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:B.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:B.PRESSURE,prefixes:R.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:B.PRESSURE,prefixes:R.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:B.ELECTRIC_CHARGE,prefixes:R.LONG,value:1,offset:0},C:{name:"C",base:B.ELECTRIC_CHARGE,prefixes:R.SHORT,value:1,offset:0},farad:{name:"farad",base:B.ELECTRIC_CAPACITANCE,prefixes:R.LONG,value:1,offset:0},F:{name:"F",base:B.ELECTRIC_CAPACITANCE,prefixes:R.SHORT,value:1,offset:0},volt:{name:"volt",base:B.ELECTRIC_POTENTIAL,prefixes:R.LONG,value:1,offset:0},V:{name:"V",base:B.ELECTRIC_POTENTIAL,prefixes:R.SHORT,value:1,offset:0},ohm:{name:"ohm",base:B.ELECTRIC_RESISTANCE,prefixes:R.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:B.ELECTRIC_INDUCTANCE,prefixes:R.LONG,value:1,offset:0},H:{name:"H",base:B.ELECTRIC_INDUCTANCE,prefixes:R.SHORT,value:1,offset:0},siemens:{name:"siemens",base:B.ELECTRIC_CONDUCTANCE,prefixes:R.LONG,value:1,offset:0},S:{name:"S",base:B.ELECTRIC_CONDUCTANCE,prefixes:R.SHORT,value:1,offset:0},weber:{name:"weber",base:B.MAGNETIC_FLUX,prefixes:R.LONG,value:1,offset:0},Wb:{name:"Wb",base:B.MAGNETIC_FLUX,prefixes:R.SHORT,value:1,offset:0},tesla:{name:"tesla",base:B.MAGNETIC_FLUX_DENSITY,prefixes:R.LONG,value:1,offset:0},T:{name:"T",base:B.MAGNETIC_FLUX_DENSITY,prefixes:R.SHORT,value:1,offset:0},b:{name:"b",base:B.BIT,prefixes:R.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:B.BIT,prefixes:R.BINARY_LONG,value:1,offset:0},B:{name:"B",base:B.BIT,prefixes:R.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:B.BIT,prefixes:R.BINARY_LONG,value:8,offset:0}},ne={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function fe(K){if(K.number==="BigNumber"){var ie=xN(y);J.rad.value=new y(1),J.deg.value=ie.div(180),J.grad.value=ie.div(200),J.cycle.value=ie.times(2),J.arcsec.value=ie.div(648e3),J.arcmin.value=ie.div(10800)}else J.rad.value=1,J.deg.value=Math.PI/180,J.grad.value=Math.PI/200,J.cycle.value=Math.PI*2,J.arcsec.value=Math.PI/648e3,J.arcmin.value=Math.PI/10800;J.radian.value=J.rad.value,J.degree.value=J.deg.value,J.gradian.value=J.grad.value}fe(t),e&&e("config",function(K,ie){K.number!==ie.number&&fe(K)});var se={si:{NONE:{unit:Q,prefix:R.NONE[""]},LENGTH:{unit:J.m,prefix:R.SHORT[""]},MASS:{unit:J.g,prefix:R.SHORT.k},TIME:{unit:J.s,prefix:R.SHORT[""]},CURRENT:{unit:J.A,prefix:R.SHORT[""]},TEMPERATURE:{unit:J.K,prefix:R.SHORT[""]},LUMINOUS_INTENSITY:{unit:J.cd,prefix:R.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:J.mol,prefix:R.SHORT[""]},ANGLE:{unit:J.rad,prefix:R.SHORT[""]},BIT:{unit:J.bits,prefix:R.SHORT[""]},FORCE:{unit:J.N,prefix:R.SHORT[""]},ENERGY:{unit:J.J,prefix:R.SHORT[""]},POWER:{unit:J.W,prefix:R.SHORT[""]},PRESSURE:{unit:J.Pa,prefix:R.SHORT[""]},ELECTRIC_CHARGE:{unit:J.C,prefix:R.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:J.F,prefix:R.SHORT[""]},ELECTRIC_POTENTIAL:{unit:J.V,prefix:R.SHORT[""]},ELECTRIC_RESISTANCE:{unit:J.ohm,prefix:R.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:J.H,prefix:R.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:J.S,prefix:R.SHORT[""]},MAGNETIC_FLUX:{unit:J.Wb,prefix:R.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:J.T,prefix:R.SHORT[""]},FREQUENCY:{unit:J.Hz,prefix:R.SHORT[""]}}};se.cgs=JSON.parse(JSON.stringify(se.si)),se.cgs.LENGTH={unit:J.m,prefix:R.SHORT.c},se.cgs.MASS={unit:J.g,prefix:R.SHORT[""]},se.cgs.FORCE={unit:J.dyn,prefix:R.SHORT[""]},se.cgs.ENERGY={unit:J.erg,prefix:R.NONE[""]},se.us=JSON.parse(JSON.stringify(se.si)),se.us.LENGTH={unit:J.ft,prefix:R.NONE[""]},se.us.MASS={unit:J.lbm,prefix:R.NONE[""]},se.us.TEMPERATURE={unit:J.degF,prefix:R.NONE[""]},se.us.FORCE={unit:J.lbf,prefix:R.NONE[""]},se.us.ENERGY={unit:J.BTU,prefix:R.BTU[""]},se.us.POWER={unit:J.hp,prefix:R.NONE[""]},se.us.PRESSURE={unit:J.psi,prefix:R.NONE[""]},se.auto=JSON.parse(JSON.stringify(se.si));var ye=se.auto;b.setUnitSystem=function(K){if(gt(se,K))ye=se[K];else throw new Error("Unit system "+K+" does not exist. Choices are: "+Object.keys(se).join(", "))},b.getUnitSystem=function(){for(var K in se)if(gt(se,K)&&se[K]===ye)return K},b.typeConverters={BigNumber:function(K){return K!=null&&K.isFraction?new y(K.n).div(K.d).times(K.s):new y(K+"")},Fraction:function(K){return new g(K)},Complex:function(K){return K},number:function(K){return K!=null&&K.isFraction?p(K):K}},b.prototype._numberConverter=function(){var K=b.typeConverters[this.valueType()];if(K)return K;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},b._getNumberConverter=function(K){if(!b.typeConverters[K])throw new TypeError('Unsupported type "'+K+'"');return b.typeConverters[K]};for(var De in J)if(gt(J,De)){var pe=J[De];pe.dimensions=pe.base.dimensions}for(var Te in ne)if(gt(ne,Te)){var be=J[ne[Te]],re={};for(var Re in be)gt(be,Re)&&(re[Re]=be[Re]);re.name=Te,J[Te]=re}b.isValidAlpha=function(K){return/^[a-zA-Z]$/.test(K)};function ze(K){for(var ie=0;ie<K.length;ie++){if(S=K.charAt(ie),ie===0&&!b.isValidAlpha(S))throw new Error('Invalid unit name (must begin with alpha character): "'+K+'"');if(ie>0&&!(b.isValidAlpha(S)||T(S)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+K+'"')}}return b.createUnit=function(K,ie){if(typeof K!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(ie&&ie.override){for(var _e in K)if(gt(K,_e)&&b.deleteUnit(_e),K[_e].aliases)for(var oe=0;oe<K[_e].aliases.length;oe++)b.deleteUnit(K[_e].aliases[oe])}var G;for(var W in K)gt(K,W)&&(G=b.createUnitSingle(W,K[W]));return G},b.createUnitSingle=function(K,ie){if((typeof ie>"u"||ie===null)&&(ie={}),typeof K!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(gt(J,K))throw new Error('Cannot create unit "'+K+'": a unit with that name already exists');ze(K);var _e=null,oe=[],G=0,W,ce,Ce;if(ie&&ie.type==="Unit")_e=ie.clone();else if(typeof ie=="string")ie!==""&&(W=ie);else if(typeof ie=="object")W=ie.definition,ce=ie.prefixes,G=ie.offset,Ce=ie.baseName,ie.aliases&&(oe=ie.aliases.valueOf());else throw new TypeError('Cannot create unit "'+K+'" from "'+ie.toString()+'": expecting "string" or "Unit" or "Object"');if(oe){for(var $=0;$<oe.length;$++)if(gt(J,oe[$]))throw new Error('Cannot create alias "'+oe[$]+'": a unit with that name already exists')}if(W&&typeof W=="string"&&!_e)try{_e=b.parse(W,{allowNoUnits:!0})}catch(V){throw V.message='Could not create unit "'+K+'" from "'+W+'": '+V.message,V}else W&&W.type==="Unit"&&(_e=W.clone());oe=oe||[],G=G||0,ce&&ce.toUpperCase?ce=R[ce.toUpperCase()]||R.NONE:ce=R.NONE;var ee={};if(_e){ee={name:K,value:_e.value,dimensions:_e.dimensions.slice(0),prefixes:ce,offset:G};var ge=!1;for(var xe in B)if(gt(B,xe)){for(var Ne=!0,Fe=0;Fe<z.length;Fe++)if(Math.abs((ee.dimensions[Fe]||0)-(B[xe].dimensions[Fe]||0))>1e-12){Ne=!1;break}if(Ne){ge=!0,ee.base=B[xe];break}}if(!ge){Ce=Ce||K+"_STUFF";var We={dimensions:_e.dimensions.slice(0)};We.key=Ce,B[Ce]=We,ye[Ce]={unit:ee,prefix:R.NONE[""]},ee.base=B[Ce]}}else{if(Ce=Ce||K+"_STUFF",z.indexOf(Ce)>=0)throw new Error('Cannot create new base unit "'+K+'": a base unit with that name already exists (and cannot be overridden)');z.push(Ce);for(var ke in B)gt(B,ke)&&(B[ke].dimensions[z.length-1]=0);for(var it={dimensions:[]},Je=0;Je<z.length;Je++)it.dimensions[Je]=0;it.dimensions[z.length-1]=1,it.key=Ce,B[Ce]=it,ee={name:K,value:1,dimensions:B[Ce].dimensions.slice(0),prefixes:ce,offset:G,base:B[Ce]},ye[Ce]={unit:ee,prefix:R.NONE[""]}}b.UNITS[K]=ee;for(var st=0;st<oe.length;st++){var we=oe[st],Pe={};for(var et in ee)gt(ee,et)&&(Pe[et]=ee[et]);Pe.name=we,b.UNITS[we]=Pe}return delete F.cache,new b(null,K)},b.deleteUnit=function(K){delete b.UNITS[K],delete F.cache},b.PREFIXES=R,b.BASE_DIMENSIONS=z,b.BASE_UNITS=B,b.UNIT_SYSTEMS=se,b.UNITS=J,b},{isClass:!0}),JF="unit",kfe=["typed","Unit"],Nfe=ae(JF,kfe,r=>{var{typed:e,Unit:t}=r;return e(JF,{Unit:function(n){return n.clone()},string:function(n){return t.isValuelessUnit(n)?new t(null,n):t.parse(n,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(n,i){return new t(n,i)},"number | BigNumber | Fraction":function(n){return new t(n)},"Array | Matrix":e.referToSelf(n=>i=>ur(i,n))})}),ZF="sparse",Ofe=["typed","SparseMatrix"],Rfe=ae(ZF,Ofe,r=>{var{typed:e,SparseMatrix:t}=r;return e(ZF,{"":function(){return new t([])},string:function(n){return new t([],n)},"Array | Matrix":function(n){return new t(n)},"Array | Matrix, string":function(n,i){return new t(n,i)}})}),KF="createUnit",Pfe=["typed","Unit"],Ife=ae(KF,Pfe,r=>{var{typed:e,Unit:t}=r;return e(KF,{"Object, Object":function(n,i){return t.createUnit(n,i)},Object:function(n){return t.createUnit(n,{})},"string, Unit | string | Object, Object":function(n,i,a){var o={};return o[n]=i,t.createUnit(o,a)},"string, Unit | string | Object":function(n,i){var a={};return a[n]=i,t.createUnit(a,{})},string:function(n){var i={};return i[n]={},t.createUnit(i,{})}})}),QF="acos",Lfe=["typed","config","Complex"],Ffe=ae(QF,Lfe,r=>{var{typed:e,config:t,Complex:n}=r;return e(QF,{number:function(i){return i>=-1&&i<=1||t.predictable?Math.acos(i):new n(i,0).acos()},Complex:function(i){return i.acos()},BigNumber:function(i){return i.acos()}})}),e5="acosh",Bfe=["typed","config","Complex"],zfe=ae(e5,Bfe,r=>{var{typed:e,config:t,Complex:n}=r;return e(e5,{number:function(i){return i>=1||t.predictable?Vq(i):i<=-1?new n(Math.log(Math.sqrt(i*i-1)-i),Math.PI):new n(i,0).acosh()},Complex:function(i){return i.acosh()},BigNumber:function(i){return i.acosh()}})}),t5="acot",Ufe=["typed","BigNumber"],jfe=ae(t5,Ufe,r=>{var{typed:e,BigNumber:t}=r;return e(t5,{number:qq,Complex:function(n){return n.acot()},BigNumber:function(n){return new t(1).div(n).atan()}})}),r5="acoth",Hfe=["typed","config","Complex","BigNumber"],Vfe=ae(r5,Hfe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(r5,{number:function(a){return a>=1||a<=-1||t.predictable?Wq(a):new n(a,0).acoth()},Complex:function(a){return a.acoth()},BigNumber:function(a){return new i(1).div(a).atanh()}})}),n5="acsc",qfe=["typed","config","Complex","BigNumber"],Wfe=ae(n5,qfe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(n5,{number:function(a){return a<=-1||a>=1||t.predictable?Gq(a):new n(a,0).acsc()},Complex:function(a){return a.acsc()},BigNumber:function(a){return new i(1).div(a).asin()}})}),i5="acsch",Gfe=["typed","BigNumber"],$fe=ae(i5,Gfe,r=>{var{typed:e,BigNumber:t}=r;return e(i5,{number:$q,Complex:function(n){return n.acsch()},BigNumber:function(n){return new t(1).div(n).asinh()}})}),a5="asec",Xfe=["typed","config","Complex","BigNumber"],Yfe=ae(a5,Xfe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(a5,{number:function(a){return a<=-1||a>=1||t.predictable?Xq(a):new n(a,0).asec()},Complex:function(a){return a.asec()},BigNumber:function(a){return new i(1).div(a).acos()}})}),o5="asech",Jfe=["typed","config","Complex","BigNumber"],Zfe=ae(o5,Jfe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(o5,{number:function(a){if(a<=1&&a>=-1||t.predictable){var o=1/a;if(o>0||t.predictable)return Yq(a);var s=Math.sqrt(o*o-1);return new n(Math.log(s-o),Math.PI)}return new n(a,0).asech()},Complex:function(a){return a.asech()},BigNumber:function(a){return new i(1).div(a).acosh()}})}),s5="asin",Kfe=["typed","config","Complex"],Qfe=ae(s5,Kfe,r=>{var{typed:e,config:t,Complex:n}=r;return e(s5,{number:function(i){return i>=-1&&i<=1||t.predictable?Math.asin(i):new n(i,0).asin()},Complex:function(i){return i.asin()},BigNumber:function(i){return i.asin()}})}),epe="asinh",tpe=["typed"],rpe=ae(epe,tpe,r=>{var{typed:e}=r;return e("asinh",{number:Jq,Complex:function(t){return t.asinh()},BigNumber:function(t){return t.asinh()}})}),npe="atan",ipe=["typed"],ape=ae(npe,ipe,r=>{var{typed:e}=r;return e("atan",{number:function(t){return Math.atan(t)},Complex:function(t){return t.atan()},BigNumber:function(t){return t.atan()}})}),l5="atan2",ope=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],spe=ae(l5,ope,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,DenseMatrix:a,concat:o}=r,s=Rs({typed:e,equalScalar:n}),l=Oa({typed:e}),u=hW({typed:e,equalScalar:n}),c=Ii({typed:e,equalScalar:n}),h=ui({typed:e,DenseMatrix:a}),d=Gr({typed:e,matrix:t,concat:o});return e(l5,{"number, number":Math.atan2,"BigNumber, BigNumber":(f,p)=>i.atan2(f,p)},d({scalar:"number | BigNumber",SS:u,DS:l,SD:s,Ss:c,sS:h}))}),u5="atanh",lpe=["typed","config","Complex"],upe=ae(u5,lpe,r=>{var{typed:e,config:t,Complex:n}=r;return e(u5,{number:function(i){return i<=1&&i>=-1||t.predictable?Zq(i):new n(i,0).atanh()},Complex:function(i){return i.atanh()},BigNumber:function(i){return i.atanh()}})}),Sm=ae("trigUnit",["typed"],r=>{var{typed:e}=r;return{Unit:e.referToSelf(t=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,n.valueType())(n.value)})}}),c5="cos",cpe=["typed"],hpe=ae(c5,cpe,r=>{var{typed:e}=r,t=Sm({typed:e});return e(c5,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},t)}),h5="cosh",dpe=["typed"],fpe=ae(h5,dpe,r=>{var{typed:e}=r;return e(h5,{number:hae,"Complex | BigNumber":t=>t.cosh()})}),d5="cot",ppe=["typed","BigNumber"],mpe=ae(d5,ppe,r=>{var{typed:e,BigNumber:t}=r,n=Sm({typed:e});return e(d5,{number:Kq,Complex:i=>i.cot(),BigNumber:i=>new t(1).div(i.tan())},n)}),f5="coth",gpe=["typed","BigNumber"],vpe=ae(f5,gpe,r=>{var{typed:e,BigNumber:t}=r;return e(f5,{number:Qq,Complex:n=>n.coth(),BigNumber:n=>new t(1).div(n.tanh())})}),p5="csc",ype=["typed","BigNumber"],bpe=ae(p5,ype,r=>{var{typed:e,BigNumber:t}=r,n=Sm({typed:e});return e(p5,{number:eW,Complex:i=>i.csc(),BigNumber:i=>new t(1).div(i.sin())},n)}),m5="csch",xpe=["typed","BigNumber"],wpe=ae(m5,xpe,r=>{var{typed:e,BigNumber:t}=r;return e(m5,{number:tW,Complex:n=>n.csch(),BigNumber:n=>new t(1).div(n.sinh())})}),g5="sec",Spe=["typed","BigNumber"],Mpe=ae(g5,Spe,r=>{var{typed:e,BigNumber:t}=r,n=Sm({typed:e});return e(g5,{number:rW,Complex:i=>i.sec(),BigNumber:i=>new t(1).div(i.cos())},n)}),v5="sech",_pe=["typed","BigNumber"],Epe=ae(v5,_pe,r=>{var{typed:e,BigNumber:t}=r;return e(v5,{number:nW,Complex:n=>n.sech(),BigNumber:n=>new t(1).div(n.cosh())})}),y5="sin",Cpe=["typed"],Ape=ae(y5,Cpe,r=>{var{typed:e}=r,t=Sm({typed:e});return e(y5,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},t)}),b5="sinh",Tpe=["typed"],Dpe=ae(b5,Tpe,r=>{var{typed:e}=r;return e(b5,{number:iW,"Complex | BigNumber":t=>t.sinh()})}),x5="tan",kpe=["typed"],Npe=ae(x5,kpe,r=>{var{typed:e}=r,t=Sm({typed:e});return e(x5,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},t)}),Ope="tanh",Rpe=["typed"],Ppe=ae(Ope,Rpe,r=>{var{typed:e}=r;return e("tanh",{number:fae,"Complex | BigNumber":t=>t.tanh()})}),w5="setCartesian",Ipe=["typed","size","subset","compareNatural","Index","DenseMatrix"],Lpe=ae(w5,Ipe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:o}=r;return e(w5,{"Array | Matrix, Array | Matrix":function(s,l){var u=[];if(n(t(s),new a(0))!==0&&n(t(l),new a(0))!==0){var c=xr(Array.isArray(s)?s:s.toArray()).sort(i),h=xr(Array.isArray(l)?l:l.toArray()).sort(i);u=[];for(var d=0;d<c.length;d++)for(var f=0;f<h.length;f++)u.push([c[d],h[f]])}return Array.isArray(s)&&Array.isArray(l)?u:new o(u)}})}),S5="setDifference",Fpe=["typed","size","subset","compareNatural","Index","DenseMatrix"],Bpe=ae(S5,Fpe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:o}=r;return e(S5,{"Array | Matrix, Array | Matrix":function(s,l){var u;if(n(t(s),new a(0))===0)u=[];else{if(n(t(l),new a(0))===0)return xr(s.toArray());var c=$p(xr(Array.isArray(s)?s:s.toArray()).sort(i)),h=$p(xr(Array.isArray(l)?l:l.toArray()).sort(i));u=[];for(var d,f=0;f<c.length;f++){d=!1;for(var p=0;p<h.length;p++)if(i(c[f].value,h[p].value)===0&&c[f].identifier===h[p].identifier){d=!0;break}d||u.push(c[f])}}return Array.isArray(s)&&Array.isArray(l)?nS(u):new o(nS(u))}})}),M5="setDistinct",zpe=["typed","size","subset","compareNatural","Index","DenseMatrix"],Upe=ae(M5,zpe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:o}=r;return e(M5,{"Array | Matrix":function(s){var l;if(n(t(s),new a(0))===0)l=[];else{var u=xr(Array.isArray(s)?s:s.toArray()).sort(i);l=[],l.push(u[0]);for(var c=1;c<u.length;c++)i(u[c],u[c-1])!==0&&l.push(u[c])}return Array.isArray(s)?l:new o(l)}})}),_5="setIntersect",jpe=["typed","size","subset","compareNatural","Index","DenseMatrix"],Hpe=ae(_5,jpe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:o}=r;return e(_5,{"Array | Matrix, Array | Matrix":function(s,l){var u;if(n(t(s),new a(0))===0||n(t(l),new a(0))===0)u=[];else{var c=$p(xr(Array.isArray(s)?s:s.toArray()).sort(i)),h=$p(xr(Array.isArray(l)?l:l.toArray()).sort(i));u=[];for(var d=0;d<c.length;d++)for(var f=0;f<h.length;f++)if(i(c[d].value,h[f].value)===0&&c[d].identifier===h[f].identifier){u.push(c[d]);break}}return Array.isArray(s)&&Array.isArray(l)?nS(u):new o(nS(u))}})}),E5="setIsSubset",Vpe=["typed","size","subset","compareNatural","Index"],qpe=ae(E5,Vpe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a}=r;return e(E5,{"Array | Matrix, Array | Matrix":function(o,s){if(n(t(o),new a(0))===0)return!0;if(n(t(s),new a(0))===0)return!1;for(var l=$p(xr(Array.isArray(o)?o:o.toArray()).sort(i)),u=$p(xr(Array.isArray(s)?s:s.toArray()).sort(i)),c,h=0;h<l.length;h++){c=!1;for(var d=0;d<u.length;d++)if(i(l[h].value,u[d].value)===0&&l[h].identifier===u[d].identifier){c=!0;break}if(c===!1)return!1}return!0}})}),C5="setMultiplicity",Wpe=["typed","size","subset","compareNatural","Index"],Gpe=ae(C5,Wpe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a}=r;return e(C5,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,s){if(n(t(s),new a(0))===0)return 0;for(var l=xr(Array.isArray(s)?s:s.toArray()),u=0,c=0;c<l.length;c++)i(l[c],o)===0&&u++;return u}})}),A5="setPowerset",$pe=["typed","size","subset","compareNatural","Index"],Xpe=ae(A5,$pe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a}=r;return e(A5,{"Array | Matrix":function(l){if(n(t(l),new a(0))===0)return[];for(var u=xr(Array.isArray(l)?l:l.toArray()).sort(i),c=[],h=0;h.toString(2).length<=u.length;)c.push(o(u,h.toString(2).split("").reverse())),h++;return s(c)}});function o(l,u){for(var c=[],h=0;h<u.length;h++)u[h]==="1"&&c.push(l[h]);return c}function s(l){for(var u=[],c=l.length-1;c>0;c--)for(var h=0;h<c;h++)l[h].length>l[h+1].length&&(u=l[h],l[h]=l[h+1],l[h+1]=u);return l}}),T5="setSize",Ype=["typed","compareNatural"],Jpe=ae(T5,Ype,r=>{var{typed:e,compareNatural:t}=r;return e(T5,{"Array | Matrix":function(n){return Array.isArray(n)?xr(n).length:xr(n.toArray()).length},"Array | Matrix, boolean":function(n,i){if(i===!1||n.length===0)return Array.isArray(n)?xr(n).length:xr(n.toArray()).length;for(var a=xr(Array.isArray(n)?n:n.toArray()).sort(t),o=1,s=1;s<a.length;s++)t(a[s],a[s-1])!==0&&o++;return o}})}),D5="setSymDifference",Zpe=["typed","size","concat","subset","setDifference","Index"],Kpe=ae(D5,Zpe,r=>{var{typed:e,size:t,concat:n,subset:i,setDifference:a,Index:o}=r;return e(D5,{"Array | Matrix, Array | Matrix":function(s,l){if(i(t(s),new o(0))===0)return xr(l);if(i(t(l),new o(0))===0)return xr(s);var u=xr(s),c=xr(l);return n(a(u,c),a(c,u))}})}),k5="setUnion",Qpe=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],eme=ae(k5,Qpe,r=>{var{typed:e,size:t,concat:n,subset:i,setIntersect:a,setSymDifference:o,Index:s}=r;return e(k5,{"Array | Matrix, Array | Matrix":function(l,u){if(i(t(l),new s(0))===0)return xr(u);if(i(t(u),new s(0))===0)return xr(l);var c=xr(l),h=xr(u);return n(o(c,h),a(c,h))}})}),N5="add",tme=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],rme=ae(N5,tme,r=>{var{typed:e,matrix:t,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=r,l=ah({typed:e}),u=mN({typed:e,equalScalar:i}),c=Fd({typed:e,DenseMatrix:a}),h=Gr({typed:e,matrix:t,concat:s});return e(N5,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(f,p,v)=>{for(var y=d(f,p),g=0;g<v.length;g++)y=d(y,v[g]);return y})},h({elop:n,DS:l,SS:u,Ss:c}))}),O5="hypot",nme=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],ime=ae(O5,nme,r=>{var{typed:e,abs:t,addScalar:n,divideScalar:i,multiplyScalar:a,sqrt:o,smaller:s,isPositive:l}=r;return e(O5,{"... number | BigNumber":u,Array:u,Matrix:c=>u(xr(c.toArray()))});function u(c){for(var h=0,d=0,f=0;f<c.length;f++){if(_s(c[f]))throw new TypeError("Unexpected type of argument to hypot");var p=t(c[f]);s(d,p)?(h=a(h,a(i(d,p),i(d,p))),h=n(h,1),d=p):h=n(h,l(p)?a(i(p,d),i(p,d)):p)}return a(d,o(h))}}),R5="norm",ame=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],ome=ae(R5,ame,r=>{var{typed:e,abs:t,add:n,pow:i,conj:a,sqrt:o,multiply:s,equalScalar:l,larger:u,smaller:c,matrix:h,ctranspose:d,eigs:f}=r;return e(R5,{number:Math.abs,Complex:function(E){return E.abs()},BigNumber:function(E){return E.abs()},boolean:function(E){return Math.abs(E)},Array:function(E){return S(h(E),2)},Matrix:function(E){return S(E,2)},"Array, number | BigNumber | string":function(E,A){return S(h(E),A)},"Matrix, number | BigNumber | string":function(E,A){return S(E,A)}});function p(E){var A=0;return E.forEach(function(T){var C=t(T);u(C,A)&&(A=C)},!0),A}function v(E){var A;return E.forEach(function(T){var C=t(T);(!A||c(C,A))&&(A=C)},!0),A||0}function y(E,A){if(A===Number.POSITIVE_INFINITY||A==="inf")return p(E);if(A===Number.NEGATIVE_INFINITY||A==="-inf")return v(E);if(A==="fro")return S(E,2);if(typeof A=="number"&&!isNaN(A)){if(!l(A,0)){var T=0;return E.forEach(function(C){T=n(i(t(C),A),T)},!0),i(T,1/A)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function g(E){var A=0;return E.forEach(function(T,C){A=n(A,s(T,a(T)))}),t(o(A))}function w(E){var A=[],T=0;return E.forEach(function(C,D){var O=D[1],U=n(A[O]||0,t(C));u(U,T)&&(T=U),A[O]=U},!0),T}function b(E){var A=E.size();if(A[0]!==A[1])throw new RangeError("Invalid matrix dimensions");var T=d(E),C=s(T,E),D=f(C).values.toArray(),O=D[D.length-1];return t(o(O))}function m(E){var A=[],T=0;return E.forEach(function(C,D){var O=D[0],U=n(A[O]||0,t(C));u(U,T)&&(T=U),A[O]=U},!0),T}function x(E,A){if(A===1)return w(E);if(A===Number.POSITIVE_INFINITY||A==="inf")return m(E);if(A==="fro")return g(E);if(A===2)return b(E);throw new Error("Unsupported parameter value "+A)}function S(E,A){var T=E.size();if(T.length===1)return y(E,A);if(T.length===2){if(T[0]&&T[1])return x(E,A);throw new RangeError("Invalid matrix dimensions")}}}),P5="dot",sme=["typed","addScalar","multiplyScalar","conj","size"],lme=ae(P5,sme,r=>{var{typed:e,addScalar:t,multiplyScalar:n,conj:i,size:a}=r;return e(P5,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":l});function o(c,h){var d=u(c),f=u(h),p,v;if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(f.length===1)v=f[0];else if(f.length===2&&f[1]===1)v=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(p!==v)throw new RangeError("Vectors must have equal length ("+p+" != "+v+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function s(c,h){var d=o(c,h),f=Ft(c)?c._data:c,p=Ft(c)?c._datatype||c.getDataType():void 0,v=Ft(h)?h._data:h,y=Ft(h)?h._datatype||h.getDataType():void 0,g=u(c).length===2,w=u(h).length===2,b=t,m=n;if(p&&y&&p===y&&typeof p=="string"&&p!=="mixed"){var x=p;b=e.find(t,[x,x]),m=e.find(n,[x,x])}if(!g&&!w){for(var S=m(i(f[0]),v[0]),E=1;E<d;E++)S=b(S,m(i(f[E]),v[E]));return S}if(!g&&w){for(var A=m(i(f[0]),v[0][0]),T=1;T<d;T++)A=b(A,m(i(f[T]),v[T][0]));return A}if(g&&!w){for(var C=m(i(f[0][0]),v[0]),D=1;D<d;D++)C=b(C,m(i(f[D][0]),v[D]));return C}if(g&&w){for(var O=m(i(f[0][0]),v[0][0]),U=1;U<d;U++)O=b(O,m(i(f[U][0]),v[U][0]));return O}}function l(c,h){o(c,h);for(var d=c._index,f=c._values,p=h._index,v=h._values,y=0,g=t,w=n,b=0,m=0;b<d.length&&m<p.length;){var x=d[b],S=p[m];if(x<S){b++;continue}if(x>S){m++;continue}x===S&&(y=g(y,w(f[b],v[m])),b++,m++)}return y}function u(c){return Ft(c)?c.size():a(c)}}),ume="trace",cme=["typed","matrix","add"],hme=ae(ume,cme,r=>{var{typed:e,matrix:t,add:n}=r;return e("trace",{Array:function(o){return i(t(o))},SparseMatrix:a,DenseMatrix:i,any:Gt});function i(o){var s=o._size,l=o._data;switch(s.length){case 1:if(s[0]===1)return Gt(l[0]);throw new RangeError("Matrix must be square (size: "+lr(s)+")");case 2:{var u=s[0],c=s[1];if(u===c){for(var h=0,d=0;d<u;d++)h=n(h,l[d][d]);return h}else throw new RangeError("Matrix must be square (size: "+lr(s)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+lr(s)+")")}}function a(o){var s=o._values,l=o._index,u=o._ptr,c=o._size,h=c[0],d=c[1];if(h===d){var f=0;if(s.length>0)for(var p=0;p<d;p++)for(var v=u[p],y=u[p+1],g=v;g<y;g++){var w=l[g];if(w===p){f=n(f,s[g]);break}if(w>p)break}return f}throw new RangeError("Matrix must be square (size: "+lr(c)+")")}}),I5="index",dme=["typed","Index"],fme=ae(I5,dme,r=>{var{typed:e,Index:t}=r;return e(I5,{"...number | string | BigNumber | Range | Array | Matrix":function(n){var i=n.map(function(o){return Kt(o)?o.toNumber():Sr(o)||Ft(o)?o.map(function(s){return Kt(s)?s.toNumber():s}):o}),a=new t;return t.apply(a,i),a}})}),DW=new Set(["end"]),pme="Node",mme=["mathWithTransform"],gme=ae(pme,mme,r=>{var{mathWithTransform:e}=r;function t(i){for(var a of[...DW])if(i.has(a))throw new Error('Scope contains an illegal symbol, "'+a+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(a){return this.compile().evaluate(a)}compile(){var a=this._compile(e,{}),o={},s=null;function l(u){var c=Mp(u);return t(c),a(c,o,s)}return{evaluate:l}}_compile(a,o){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(a){throw new Error("Cannot run forEach on a Node interface")}map(a){throw new Error("Cannot run map on a Node interface")}_ifNode(a){if(!Rr(a))throw new TypeError("Callback function must return a Node");return a}traverse(a){a(this,null,null);function o(s,l){s.forEach(function(u,c,h){l(u,c,h),o(u,l)})}o(this,a)}transform(a){function o(s,l,u){var c=a(s,l,u);return c!==s?c:s.map(o)}return o(this,null,null)}filter(a){var o=[];return this.traverse(function(s,l,u){a(s,l,u)&&o.push(s)}),o}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(a){return a.cloneDeep()})}equals(a){return a?this.type===a.type&&bd(this,a):!1}toString(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toString(a)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toHTML(a)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toTex(a)}_toTex(a){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(a){if(a&&typeof a=="object")switch(typeof a.handler){case"object":case"undefined":return;case"function":return a.handler(this,a);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function Ra(r){return r&&r.isIndexError?new as(r.index+1,r.min+1,r.max!==void 0?r.max+1:void 0):r}function kW(r){var{subset:e}=r;return function(t,n){try{if(Array.isArray(t))return e(t,n);if(t&&typeof t.subset=="function")return t.subset(n);if(typeof t=="string")return e(t,n);if(typeof t=="object"){if(!n.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Ma(t,n.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(i){throw Ra(i)}}}var q1="AccessorNode",vme=["subset","Node"],yme=ae(q1,vme,r=>{var{subset:e,Node:t}=r,n=kW({subset:e});function i(o){return!(Uc(o)||co(o)||mr(o)||yu(o)||Qv(o)||bl(o)||ai(o))}class a extends t{constructor(s,l){if(super(),!Rr(s))throw new TypeError('Node expected for parameter "object"');if(!Ld(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=s,this.index=l}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return q1}get isAccessorNode(){return!0}_compile(s,l){var u=this.object._compile(s,l),c=this.index._compile(s,l);if(this.index.isObjectProperty()){var h=this.index.getObjectProperty();return function(d,f,p){return Ma(u(d,f,p),h)}}else return function(d,f,p){var v=u(d,f,p),y=c(d,f,v);return n(v,y)}}forEach(s){s(this.object,"object",this),s(this.index,"index",this)}map(s){return new a(this._ifNode(s(this.object,"object",this)),this._ifNode(s(this.index,"index",this)))}clone(){return new a(this.object,this.index)}_toString(s){var l=this.object.toString(s);return i(this.object)&&(l="("+l+")"),l+this.index.toString(s)}_toHTML(s){var l=this.object.toHTML(s);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(s)}_toTex(s){var l=this.object.toTex(s);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(s)}toJSON(){return{mathjs:q1,object:this.object,index:this.index}}static fromJSON(s){return new a(s.object,s.index)}}return fn(a,"name",q1),a},{isClass:!0,isNode:!0}),W1="ArrayNode",bme=["Node"],xme=ae(W1,bme,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(Rr))throw new TypeError("Array containing Nodes expected")}get type(){return W1}get isArrayNode(){return!0}_compile(i,a){var o=lu(this.items,function(u){return u._compile(i,a)}),s=i.config.matrix!=="Array";if(s){var l=i.matrix;return function(u,c,h){return l(lu(o,function(d){return d(u,c,h)}))}}else return function(u,c,h){return lu(o,function(d){return d(u,c,h)})}}forEach(i){for(var a=0;a<this.items.length;a++){var o=this.items[a];i(o,"items["+a+"]",this)}}map(i){for(var a=[],o=0;o<this.items.length;o++)a[o]=this._ifNode(i(this.items[o],"items["+o+"]",this));return new t(a)}clone(){return new t(this.items.slice(0))}_toString(i){var a=this.items.map(function(o){return o.toString(i)});return"["+a.join(", ")+"]"}toJSON(){return{mathjs:W1,items:this.items}}static fromJSON(i){return new t(i.items)}_toHTML(i){var a=this.items.map(function(o){return o.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function a(o,s){var l=o.some(co)&&!o.every(co),u=s||l,c=u?"&":"\\\\",h=o.map(function(d){return d.items?a(d.items,!s):d.toTex(i)}).join(c);return l||!u||u&&!s?"\\begin{bmatrix}"+h+"\\end{bmatrix}":h}return a(this.items,!1)}}return fn(t,"name",W1),t},{isClass:!0,isNode:!0});function wme(r){var{subset:e,matrix:t}=r;return function(n,i,a){try{if(Array.isArray(n)){var o=t(n).subset(i,a).valueOf();return o.forEach((s,l)=>{n[l]=s}),n}else{if(n&&typeof n.subset=="function")return n.subset(i,a);if(typeof n=="string")return e(n,i,a);if(typeof n=="object"){if(!i.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Vp(n,i.getObjectProperty(),a),n}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(s){throw Ra(s)}}}var ys=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function G1(r,e){if(!e||e!=="auto")return r;for(var t=r;bl(t);)t=t.content;return t}function Lr(r,e,t,n){var i=r;e!=="keep"&&(i=r.getContent());for(var a=i.getIdentifier(),o=null,s=0;s<ys.length;s++)if(a in ys[s]){o=s;break}if(a==="OperatorNode:multiply"&&i.implicit&&t!=="show"){var l=G1(i.args[0],e);!(mr(l)&&n&&n.getIdentifier()==="OperatorNode:divide"&&ET(G1(n.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&ET(G1(l.args[0],e))&&mr(G1(l.args[1])))&&(o+=1)}return o}function gg(r,e){var t=r;e!=="keep"&&(t=r.getContent());var n=t.getIdentifier(),i=Lr(t,e);if(i===null)return null;var a=ys[i][n];if(gt(a,"associativity")){if(a.associativity==="left")return"left";if(a.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+a.associativity+"'.")}return null}function zE(r,e,t){var n=t!=="keep"?r.getContent():r,i=t!=="keep"?r.getContent():e,a=n.getIdentifier(),o=i.getIdentifier(),s=Lr(n,t);if(s===null)return null;var l=ys[s][a];if(gt(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===o)return!0;return!1}return null}function Sme(r){var e="OperatorNode:"+r;for(var t of ys)if(e in t)return t[e].op;return null}var $1="AssignmentNode",Mme=["subset","?matrix","Node"],_me=ae($1,Mme,r=>{var{subset:e,matrix:t,Node:n}=r,i=kW({subset:e}),a=wme({subset:e,matrix:t});function o(l,u,c){u||(u="keep");var h=Lr(l,u,c),d=Lr(l.value,u,c);return u==="all"||d!==null&&d<=h}class s extends n{constructor(u,c,h){if(super(),this.object=u,this.index=h?c:null,this.value=h||c,!ai(u)&&!Uc(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(ai(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!Ld(this.index))throw new TypeError('IndexNode expected as "index"');if(!Rr(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return $1}get isAssignmentNode(){return!0}_compile(u,c){var h=this.object._compile(u,c),d=this.index?this.index._compile(u,c):null,f=this.value._compile(u,c),p=this.object.name;if(this.index)if(this.index.isObjectProperty()){var v=this.index.getObjectProperty();return function(b,m,x){var S=h(b,m,x),E=f(b,m,x);return Vp(S,v,E),E}}else{if(ai(this.object))return function(b,m,x){var S=h(b,m,x),E=f(b,m,x),A=d(b,m,S);return b.set(p,a(S,A,E)),E};var y=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var g=this.object.index.getObjectProperty();return function(b,m,x){var S=y(b,m,x),E=Ma(S,g),A=d(b,m,E),T=f(b,m,x);return Vp(S,g,a(E,A,T)),T}}else{var w=this.object.index._compile(u,c);return function(b,m,x){var S=y(b,m,x),E=w(b,m,S),A=i(S,E),T=d(b,m,A),C=f(b,m,x);return a(S,E,a(A,T,C)),C}}}else{if(!ai(this.object))throw new TypeError("SymbolNode expected as object");return function(b,m,x){var S=f(b,m,x);return b.set(p,S),S}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),h=this.index?this._ifNode(u(this.index,"index",this)):null,d=this._ifNode(u(this.value,"value",this));return new s(c,h,d)}clone(){return new s(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),h=this.index?this.index.toString(u):"",d=this.value.toString(u);return o(this,u&&u.parenthesis,u&&u.implicit)&&(d="("+d+")"),c+h+" = "+d}toJSON(){return{mathjs:$1,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new s(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),h=this.index?this.index.toHTML(u):"",d=this.value.toHTML(u);return o(this,u&&u.parenthesis,u&&u.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+h+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(u){var c=this.object.toTex(u),h=this.index?this.index.toTex(u):"",d=this.value.toTex(u);return o(this,u&&u.parenthesis,u&&u.implicit)&&(d="\\left(".concat(d,"\\right)")),c+h+"="+d}}return fn(s,"name",$1),s},{isClass:!0,isNode:!0}),X1="BlockNode",Eme=["ResultSet","Node"],Cme=ae(X1,Eme,r=>{var{ResultSet:e,Node:t}=r;class n extends t{constructor(a){if(super(),!Array.isArray(a))throw new Error("Array expected");this.blocks=a.map(function(o){var s=o&&o.node,l=o&&o.visible!==void 0?o.visible:!0;if(!Rr(s))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:s,visible:l}})}get type(){return X1}get isBlockNode(){return!0}_compile(a,o){var s=lu(this.blocks,function(l){return{evaluate:l.node._compile(a,o),visible:l.visible}});return function(l,u,c){var h=[];return FM(s,function(d){var f=d.evaluate(l,u,c);d.visible&&h.push(f)}),new e(h)}}forEach(a){for(var o=0;o<this.blocks.length;o++)a(this.blocks[o].node,"blocks["+o+"].node",this)}map(a){for(var o=[],s=0;s<this.blocks.length;s++){var l=this.blocks[s],u=this._ifNode(a(l.node,"blocks["+s+"].node",this));o[s]={node:u,visible:l.visible}}return new n(o)}clone(){var a=this.blocks.map(function(o){return{node:o.node,visible:o.visible}});return new n(a)}_toString(a){return this.blocks.map(function(o){return o.node.toString(a)+(o.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:X1,blocks:this.blocks}}static fromJSON(a){return new n(a.blocks)}_toHTML(a){return this.blocks.map(function(o){return o.node.toHTML(a)+(o.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(a){return this.blocks.map(function(o){return o.node.toTex(a)+(o.visible?"":";")}).join(`\\;\\;
`)}}return fn(n,"name",X1),n},{isClass:!0,isNode:!0}),Y1="ConditionalNode",Ame=["Node"],Tme=ae(Y1,Ame,r=>{var{Node:e}=r;function t(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(Kt(i))return!i.isZero();if(_s(i))return!!(i.re||i.im);if(ja(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+Br(i)+'"')}class n extends e{constructor(a,o,s){if(super(),!Rr(a))throw new TypeError("Parameter condition must be a Node");if(!Rr(o))throw new TypeError("Parameter trueExpr must be a Node");if(!Rr(s))throw new TypeError("Parameter falseExpr must be a Node");this.condition=a,this.trueExpr=o,this.falseExpr=s}get type(){return Y1}get isConditionalNode(){return!0}_compile(a,o){var s=this.condition._compile(a,o),l=this.trueExpr._compile(a,o),u=this.falseExpr._compile(a,o);return function(c,h,d){return t(s(c,h,d))?l(c,h,d):u(c,h,d)}}forEach(a){a(this.condition,"condition",this),a(this.trueExpr,"trueExpr",this),a(this.falseExpr,"falseExpr",this)}map(a){return new n(this._ifNode(a(this.condition,"condition",this)),this._ifNode(a(this.trueExpr,"trueExpr",this)),this._ifNode(a(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=Lr(this,o,a&&a.implicit),l=this.condition.toString(a),u=Lr(this.condition,o,a&&a.implicit);(o==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=s)&&(l="("+l+")");var c=this.trueExpr.toString(a),h=Lr(this.trueExpr,o,a&&a.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=s)&&(c="("+c+")");var d=this.falseExpr.toString(a),f=Lr(this.falseExpr,o,a&&a.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||f!==null&&f<=s)&&(d="("+d+")"),l+" ? "+c+" : "+d}toJSON(){return{mathjs:Y1,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(a){return new n(a.condition,a.trueExpr,a.falseExpr)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=Lr(this,o,a&&a.implicit),l=this.condition.toHTML(a),u=Lr(this.condition,o,a&&a.implicit);(o==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=s)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(a),h=Lr(this.trueExpr,o,a&&a.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=s)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(a),f=Lr(this.falseExpr,o,a&&a.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||f!==null&&f<=s)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(a){return"\\begin{cases} {"+this.trueExpr.toTex(a)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(a)+"}\\\\{"+this.falseExpr.toTex(a)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return fn(n,"name",Y1),n},{isClass:!0,isNode:!0}),FT=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Dme={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},kme={"–":"\\--","—":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},Nme=function(r,e){return FT({},r,e)},Ome=function(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.preserveFormatting,n=t===void 0?!1:t,i=e.escapeMapFn,a=i===void 0?Nme:i,o=String(r),s="",l=a(FT({},Dme),n?FT({},kme):{}),u=Object.keys(l),c=function(){var h=!1;u.forEach(function(d,f){h||o.length>=d.length&&o.slice(0,d.length)===d&&(s+=l[u[f]],o=o.slice(d.length,o.length),h=!0)}),h||(s+=o.slice(0,1),o=o.slice(1,o.length))};o;)c();return s};const Rme=is(Ome);var BT={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},yr={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},L5={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(yr.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(yr.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(yr.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(yr.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(yr.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(yr.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(yr.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(yr.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(yr.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(yr.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(yr.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(yr.bitAnd,"${args[1]}\\right)")},bitNot:{1:yr.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(yr.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(yr.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(yr.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(yr.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(yr.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(yr.and,"${args[1]}\\right)")},not:{1:yr.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(yr.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(yr.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(yr.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(yr.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(yr.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(yr.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(yr.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(yr.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(yr.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(yr.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(yr.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(yr.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(yr.to,"${args[1]}\\right)")},numeric:function(r,e){return r.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(BT.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},Pme="\\mathrm{${name}}\\left(${args}\\right)",F5={deg:"^\\circ"};function zT(r){return Rme(r,{preserveFormatting:!0})}function NW(r,e){return e=typeof e>"u"?!1:e,e?gt(F5,r)?F5[r]:"\\mathrm{"+zT(r)+"}":gt(BT,r)?BT[r]:zT(r)}var J1="ConstantNode",Ime=["Node"],Lme=ae(J1,Ime,r=>{var{Node:e}=r;class t extends e{constructor(i){super(),this.value=i}get type(){return J1}get isConstantNode(){return!0}_compile(i,a){var o=this.value;return function(){return o}}forEach(i){}map(i){return this.clone()}clone(){return new t(this.value)}_toString(i){return lr(this.value,i)}_toHTML(i){var a=this._toString(i);switch(Br(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:J1,value:this.value}}static fromJSON(i){return new t(i.value)}_toTex(i){var a=this._toString(i),o=Br(this.value);switch(o){case"string":return"\\mathtt{"+zT(a)+"}";case"number":case"BigNumber":{var s=o==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!s)return this.value.valueOf()<0?"-\\infty":"\\infty";var l=a.toLowerCase().indexOf("e");return l!==-1?a.substring(0,l)+"\\cdot10^{"+a.substring(l+1)+"}":a}case"Fraction":return this.value.toLatex();default:return a}}}return fn(t,"name",J1),t},{isClass:!0,isNode:!0}),Z1="FunctionAssignmentNode",Fme=["typed","Node"],Bme=ae(Z1,Fme,r=>{var{typed:e,Node:t}=r;function n(a,o,s){var l=Lr(a,o,s),u=Lr(a.expr,o,s);return o==="all"||u!==null&&u<=l}class i extends t{constructor(o,s,l){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(s))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Rr(l))throw new TypeError('Node expected for parameter "expr"');if(DW.has(o))throw new Error('Illegal function name, "'+o+'" is a reserved keyword');var u=new Set;for(var c of s){var h=typeof c=="string"?c:c.name;if(u.has(h))throw new Error('Duplicate parameter name "'.concat(h,'"'));u.add(h)}this.name=o,this.params=s.map(function(d){return d&&d.name||d}),this.types=s.map(function(d){return d&&d.type||"any"}),this.expr=l}get type(){return Z1}get isFunctionAssignmentNode(){return!0}_compile(o,s){var l=Object.create(s);FM(this.params,function(p){l[p]=!0});var u=this.expr._compile(o,l),c=this.name,h=this.params,d=FL(this.types,","),f=c+"("+FL(this.params,", ")+")";return function(p,v,y){var g={};g[d]=function(){for(var b=Object.create(v),m=0;m<h.length;m++)b[h[m]]=arguments[m];return u(p,b,y)};var w=e(c,g);return w.syntax=f,p.set(c,w),w}}forEach(o){o(this.expr,"expr",this)}map(o){var s=this._ifNode(o(this.expr,"expr",this));return new i(this.name,this.params.slice(0),s)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(o){var s=o&&o.parenthesis?o.parenthesis:"keep",l=this.expr.toString(o);return n(this,s,o&&o.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var o=this.types;return{mathjs:Z1,name:this.name,params:this.params.map(function(s,l){return{name:s,type:o[l]}}),expr:this.expr}}static fromJSON(o){return new i(o.name,o.params,o.expr)}_toHTML(o){for(var s=o&&o.parenthesis?o.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+Ho(this.params[u])+"</span>");var c=this.expr.toHTML(o);return n(this,s,o&&o.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Ho(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(o){var s=o&&o.parenthesis?o.parenthesis:"keep",l=this.expr.toTex(o);return n(this,s,o&&o.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(NW).join(",")+"\\right)="+l}}return fn(i,"name",Z1),i},{isClass:!0,isNode:!0}),K1="IndexNode",zme=["Node","size"],Ume=ae(K1,zme,r=>{var{Node:e,size:t}=r;class n extends e{constructor(a,o){if(super(),this.dimensions=a,this.dotNotation=o||!1,!Array.isArray(a)||!a.every(Rr))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return K1}get isIndexNode(){return!0}_compile(a,o){var s=lu(this.dimensions,function(u,c){var h=u.filter(p=>p.isSymbolNode&&p.name==="end").length>0;if(h){var d=Object.create(o);d.end=!0;var f=u._compile(a,d);return function(p,v,y){if(!Ft(y)&&!Sr(y)&&!Ci(y))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Br(y));var g=t(y).valueOf(),w=Object.create(v);return w.end=g[c],f(p,w,y)}}else return u._compile(a,o)}),l=Ma(a,"index");return function(u,c,h){var d=lu(s,function(f){return f(u,c,h)});return l(...d)}}forEach(a){for(var o=0;o<this.dimensions.length;o++)a(this.dimensions[o],"dimensions["+o+"]",this)}map(a){for(var o=[],s=0;s<this.dimensions.length;s++)o[s]=this._ifNode(a(this.dimensions[s],"dimensions["+s+"]",this));return new n(o,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&mr(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(a){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:K1,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(a){return new n(a.dimensions,a.dotNotation)}_toHTML(a){for(var o=[],s=0;s<this.dimensions.length;s++)o[s]=this.dimensions[s].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Ho(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){var o=this.dimensions.map(function(s){return s.toTex(a)});return this.dotNotation?"."+this.getObjectProperty():"_{"+o.join(",")+"}"}}return fn(n,"name",K1),n},{isClass:!0,isNode:!0}),Q1="ObjectNode",jme=["Node"],Hme=ae(Q1,jme,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(a){return Rr(i[a])})))throw new TypeError("Object containing Nodes expected")}get type(){return Q1}get isObjectNode(){return!0}_compile(i,a){var o={};for(var s in this.properties)if(gt(this.properties,s)){var l=op(s),u=JSON.parse(l),c=Ma(this.properties,s);o[u]=c._compile(i,a)}return function(h,d,f){var p={};for(var v in o)gt(o,v)&&(p[v]=o[v](h,d,f));return p}}forEach(i){for(var a in this.properties)gt(this.properties,a)&&i(this.properties[a],"properties["+op(a)+"]",this)}map(i){var a={};for(var o in this.properties)gt(this.properties,o)&&(a[o]=this._ifNode(i(this.properties[o],"properties["+op(o)+"]",this)));return new t(a)}clone(){var i={};for(var a in this.properties)gt(this.properties,a)&&(i[a]=this.properties[a]);return new t(i)}_toString(i){var a=[];for(var o in this.properties)gt(this.properties,o)&&a.push(op(o)+": "+this.properties[o].toString(i));return"{"+a.join(", ")+"}"}toJSON(){return{mathjs:Q1,properties:this.properties}}static fromJSON(i){return new t(i.properties)}_toHTML(i){var a=[];for(var o in this.properties)gt(this.properties,o)&&a.push('<span class="math-symbol math-property">'+Ho(o)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[o].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var a=[];for(var o in this.properties)gt(this.properties,o)&&a.push("\\mathbf{"+o+":} & "+this.properties[o].toTex(i)+"\\\\");var s="\\left\\{\\begin{array}{ll}"+a.join(`
`)+"\\end{array}\\right\\}";return s}}return fn(t,"name",Q1),t},{isClass:!0,isNode:!0});function $g(r,e){return new UV(r,new RM(e),new Set(Object.keys(e)))}var eb="OperatorNode",Vme=["Node"],qme=ae(eb,Vme,r=>{var{Node:e}=r;function t(a,o){var s=a;if(o==="auto")for(;bl(s);)s=s.content;return mr(s)?!0:Fn(s)?t(s.args[0],o):!1}function n(a,o,s,l,u){var c=Lr(a,o,s),h=gg(a,o);if(o==="all"||l.length>2&&a.getIdentifier()!=="OperatorNode:add"&&a.getIdentifier()!=="OperatorNode:multiply")return l.map(function(C){switch(C.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(l.length){case 0:d=[];break;case 1:{var f=Lr(l[0],o,s,a);if(u&&f!==null){var p,v;if(o==="keep"?(p=l[0].getIdentifier(),v=a.getIdentifier()):(p=l[0].getContent().getIdentifier(),v=a.getContent().getIdentifier()),ys[c][v].latexLeftParens===!1){d=[!1];break}if(ys[f][p].latexParens===!1){d=[!1];break}}if(f===null){d=[!1];break}if(f<=c){d=[!0];break}d=[!1]}break;case 2:{var y,g=Lr(l[0],o,s,a),w=zE(a,l[0],o);g===null?y=!1:g===c&&h==="right"&&!w||g<c?y=!0:y=!1;var b,m=Lr(l[1],o,s,a),x=zE(a,l[1],o);if(m===null?b=!1:m===c&&h==="left"&&!x||m<c?b=!0:b=!1,u){var S,E,A;o==="keep"?(S=a.getIdentifier(),E=a.args[0].getIdentifier(),A=a.args[1].getIdentifier()):(S=a.getContent().getIdentifier(),E=a.args[0].getContent().getIdentifier(),A=a.args[1].getContent().getIdentifier()),g!==null&&(ys[c][S].latexLeftParens===!1&&(y=!1),ys[g][E].latexParens===!1&&(y=!1)),m!==null&&(ys[c][S].latexRightParens===!1&&(b=!1),ys[m][A].latexParens===!1&&(b=!1))}d=[y,b]}break;default:(a.getIdentifier()==="OperatorNode:add"||a.getIdentifier()==="OperatorNode:multiply")&&(d=l.map(function(C){var D=Lr(C,o,s,a),O=zE(a,C,o),U=gg(C,o);return D===null?!1:c===D&&h===U&&!O?!0:D<c}));break}if(l.length>=2&&a.getIdentifier()==="OperatorNode:multiply"&&a.implicit&&o!=="all"&&s==="hide")for(var T=1;T<d.length;++T)t(l[T],o)&&!d[T-1]&&(o!=="keep"||!bl(l[T-1]))&&(d[T]=!0);return d}class i extends e{constructor(o,s,l,u,c){if(super(),typeof o!="string")throw new TypeError('string expected for parameter "op"');if(typeof s!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(Rr))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=o,this.fn=s,this.args=l||[]}get type(){return eb}get isOperatorNode(){return!0}_compile(o,s){if(typeof this.fn!="string"||!uN(o,this.fn))throw o[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=Ma(o,this.fn),u=lu(this.args,function(p){return p._compile(o,s)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(p,v,y){return l(c,o,$g(p,v))}}else if(u.length===1){var h=u[0];return function(p,v,y){return l(h(p,v,y))}}else if(u.length===2){var d=u[0],f=u[1];return function(p,v,y){return l(d(p,v,y),f(p,v,y))}}else return function(p,v,y){return l.apply(null,lu(u,function(g){return g(p,v,y)}))}}forEach(o){for(var s=0;s<this.args.length;s++)o(this.args[s],"args["+s+"]",this)}map(o){for(var s=[],l=0;l<this.args.length;l++)s[l]=this._ifNode(o(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,s,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(o){var s=o&&o.parenthesis?o.parenthesis:"keep",l=o&&o.implicit?o.implicit:"hide",u=this.args,c=n(this,s,l,u,!1);if(u.length===1){var h=gg(this,s),d=u[0].toString(o);c[0]&&(d="("+d+")");var f=/[a-zA-Z]+/.test(this.op);return h==="right"?this.op+(f?" ":"")+d:h==="left"?d+(f?" ":"")+this.op:d+this.op}else if(u.length===2){var p=u[0].toString(o),v=u[1].toString(o);return c[0]&&(p="("+p+")"),c[1]&&(v="("+v+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?p+" "+v:p+" "+this.op+" "+v}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=u.map(function(g,w){return g=g.toString(o),c[w]&&(g="("+g+")"),g});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?y.join(" "):y.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:eb,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(o){return new i(o.op,o.fn,o.args,o.implicit,o.isPercentage)}_toHTML(o){var s=o&&o.parenthesis?o.parenthesis:"keep",l=o&&o.implicit?o.implicit:"hide",u=this.args,c=n(this,s,l,u,!1);if(u.length===1){var h=gg(this,s),d=u[0].toHTML(o);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Ho(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Ho(this.op)+"</span>"}else if(u.length===2){var f=u[0].toHTML(o),p=u[1].toHTML(o);return c[0]&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?f+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:f+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ho(this.op)+"</span>"+p}else{var v=u.map(function(y,g){return y=y.toHTML(o),c[g]&&(y='<span class="math-parenthesis math-round-parenthesis">(</span>'+y+'<span class="math-parenthesis math-round-parenthesis">)</span>'),y});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?v.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):v.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ho(this.op)+"</span>"):'<span class="math-function">'+Ho(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+v.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(o){var s=o&&o.parenthesis?o.parenthesis:"keep",l=o&&o.implicit?o.implicit:"hide",u=this.args,c=n(this,s,l,u,!0),h=yr[this.fn];if(h=typeof h>"u"?this.op:h,u.length===1){var d=gg(this,s),f=u[0].toTex(o);return c[0]&&(f="\\left(".concat(f,"\\right)")),d==="right"?h+f:f+h}else if(u.length===2){var p=u[0],v=p.toTex(o);c[0]&&(v="\\left(".concat(v,"\\right)"));var y=u[1],g=y.toTex(o);c[1]&&(g="\\left(".concat(g,"\\right)"));var w;switch(s==="keep"?w=p.getIdentifier():w=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return h+"{"+v+"}{"+g+"}";case"OperatorNode:pow":switch(v="{"+v+"}",g="{"+g+"}",w){case"ConditionalNode":case"OperatorNode:divide":v="\\left(".concat(v,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return v+"~"+g}return v+h+g}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=u.map(function(m,x){return m=m.toTex(o),c[x]&&(m="\\left(".concat(m,"\\right)")),m});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?b.join("~"):b.join(h)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(m){return m.toTex(o)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return fn(i,"name",eb),i},{isClass:!0,isNode:!0}),tb="ParenthesisNode",Wme=["Node"],Gme=ae(tb,Wme,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),!Rr(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return tb}get isParenthesisNode(){return!0}_compile(i,a){return this.content._compile(i,a)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var a=i(this.content,"content",this);return new t(a)}clone(){return new t(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:tb,content:this.content}}static fromJSON(i){return new t(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return fn(t,"name",tb),t},{isClass:!0,isNode:!0}),rb="RangeNode",$me=["Node"],Xme=ae(rb,$me,r=>{var{Node:e}=r;function t(i,a,o){var s=Lr(i,a,o),l={},u=Lr(i.start,a,o);if(l.start=u!==null&&u<=s||a==="all",i.step){var c=Lr(i.step,a,o);l.step=c!==null&&c<=s||a==="all"}var h=Lr(i.end,a,o);return l.end=h!==null&&h<=s||a==="all",l}class n extends e{constructor(a,o,s){if(super(),!Rr(a))throw new TypeError("Node expected");if(!Rr(o))throw new TypeError("Node expected");if(s&&!Rr(s))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=a,this.end=o,this.step=s||null}get type(){return rb}get isRangeNode(){return!0}needsEnd(){var a=this.filter(function(o){return ai(o)&&o.name==="end"});return a.length>0}_compile(a,o){var s=a.range,l=this.start._compile(a,o),u=this.end._compile(a,o);if(this.step){var c=this.step._compile(a,o);return function(h,d,f){return s(l(h,d,f),u(h,d,f),c(h,d,f))}}else return function(h,d,f){return s(l(h,d,f),u(h,d,f))}}forEach(a){a(this.start,"start",this),a(this.end,"end",this),this.step&&a(this.step,"step",this)}map(a){return new n(this._ifNode(a(this.start,"start",this)),this._ifNode(a(this.end,"end",this)),this.step&&this._ifNode(a(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=t(this,o,a&&a.implicit),l,u=this.start.toString(a);if(s.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(a);s.step&&(c="("+c+")"),l+=":"+c}var h=this.end.toString(a);return s.end&&(h="("+h+")"),l+=":"+h,l}toJSON(){return{mathjs:rb,start:this.start,end:this.end,step:this.step}}static fromJSON(a){return new n(a.start,a.end,a.step)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=t(this,o,a&&a.implicit),l,u=this.start.toHTML(a);if(s.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(a);s.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var h=this.end.toHTML(a);return s.end&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+h,l}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=t(this,o,a&&a.implicit),l=this.start.toTex(a);if(s.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(a);s.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(a);return s.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return fn(n,"name",rb),n},{isClass:!0,isNode:!0}),nb="RelationalNode",Yme=["Node"],Jme=ae(nb,Yme,r=>{var{Node:e}=r,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(a,o){if(super(),!Array.isArray(a))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(o))throw new TypeError("Parameter params must be an array");if(a.length!==o.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=a,this.params=o}get type(){return nb}get isRelationalNode(){return!0}_compile(a,o){var s=this,l=this.params.map(u=>u._compile(a,o));return function(u,c,h){for(var d,f=l[0](u,c,h),p=0;p<s.conditionals.length;p++){d=f,f=l[p+1](u,c,h);var v=Ma(a,s.conditionals[p]);if(!v(d,f))return!1}return!0}}forEach(a){this.params.forEach((o,s)=>a(o,"params["+s+"]",this),this)}map(a){return new n(this.conditionals.slice(),this.params.map((o,s)=>this._ifNode(a(o,"params["+s+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=Lr(this,o,a&&a.implicit),l=this.params.map(function(h,d){var f=Lr(h,o,a&&a.implicit);return o==="all"||f!==null&&f<=s?"("+h.toString(a)+")":h.toString(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+t[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:nb,conditionals:this.conditionals,params:this.params}}static fromJSON(a){return new n(a.conditionals,a.params)}_toHTML(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=Lr(this,o,a&&a.implicit),l=this.params.map(function(h,d){var f=Lr(h,o,a&&a.implicit);return o==="all"||f!==null&&f<=s?'<span class="math-parenthesis math-round-parenthesis">(</span>'+h.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':h.toHTML(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ho(t[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=Lr(this,o,a&&a.implicit),l=this.params.map(function(h,d){var f=Lr(h,o,a&&a.implicit);return o==="all"||f!==null&&f<=s?"\\left("+h.toTex(a)+"\right)":h.toTex(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=yr[this.conditionals[c]]+l[c+1];return u}}return fn(n,"name",nb),n},{isClass:!0,isNode:!0}),Zme="SymbolNode",Kme=["math","?Unit","Node"],Qme=ae(Zme,Kme,r=>{var{math:e,Unit:t,Node:n}=r;function i(o){return t?t.isValuelessUnit(o):!1}class a extends n{constructor(s){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');this.name=s}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(s,l){var u=this.name;if(l[u]===!0)return function(h,d,f){return Ma(d,u)};if(u in s)return function(h,d,f){return h.has(u)?h.get(u):Ma(s,u)};var c=i(u);return function(h,d,f){return h.has(u)?h.get(u):c?new t(null,u):a.onUndefinedSymbol(u)}}forEach(s){}map(s){return this.clone()}static onUndefinedSymbol(s){throw new Error("Undefined symbol "+s)}clone(){return new a(this.name)}_toString(s){return this.name}_toHTML(s){var l=Ho(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(s){return new a(s.name)}_toTex(s){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=NW(this.name,l);return u[0]==="\\"?u:" "+u}}return a},{isClass:!0,isNode:!0}),ib="FunctionNode",ege=["math","Node","SymbolNode"],tge=ae(ib,ege,r=>{var e,{math:t,Node:n,SymbolNode:i}=r,a=l=>lr(l,{truncate:78});function o(l,u,c){for(var h="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,f=0,p;(p=d.exec(l))!==null;)if(h+=l.substring(f,p.index),f=p.index,p[0]==="$$")h+="$",f++;else{f+=p[0].length;var v=u[p[1]];if(!v)throw new ReferenceError("Template: Property "+p[1]+" does not exist.");if(p[2]===void 0)switch(typeof v){case"string":h+=v;break;case"object":if(Rr(v))h+=v.toTex(c);else if(Array.isArray(v))h+=v.map(function(y,g){if(Rr(y))return y.toTex(c);throw new TypeError("Template: "+p[1]+"["+g+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes")}else if(Rr(v[p[2]]&&v[p[2]]))h+=v[p[2]].toTex(c);else throw new TypeError("Template: "+p[1]+"["+p[2]+"] is not a Node.")}return h+=l.slice(f),h}class s extends n{constructor(u,c){if(super(),typeof u=="string"&&(u=new i(u)),!Rr(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(Rr))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=u,this.args=c||[]}get name(){return this.fn.name||""}get type(){return ib}get isFunctionNode(){return!0}_compile(u,c){var h=this.args.map(A=>A._compile(u,c));if(ai(this.fn)){var d=this.fn.name;if(c[d]){var f=this.args;return function(A,T,C){var D=Ma(T,d);if(typeof D!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(a(D)));if(D.rawArgs)return D(f,u,$g(A,T));var O=h.map(U=>U(A,T,C));return D.apply(D,O)}}else{var p=d in u?Ma(u,d):void 0,v=typeof p=="function"&&p.rawArgs===!0,y=A=>{var T;if(A.has(d))T=A.get(d);else if(d in u)T=Ma(u,d);else return s.onUndefinedFunction(d);if(typeof T=="function")return T;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(a(T)))};if(v){var g=this.args;return function(A,T,C){var D=y(A);return D(g,u,$g(A,T))}}else switch(h.length){case 0:return function(A,T,C){var D=y(A);return D()};case 1:return function(A,T,C){var D=y(A),O=h[0];return D(O(A,T,C))};case 2:return function(A,T,C){var D=y(A),O=h[0],U=h[1];return D(O(A,T,C),U(A,T,C))};default:return function(A,T,C){var D=y(A),O=h.map(U=>U(A,T,C));return D(...O)}}}}else if(Uc(this.fn)&&Ld(this.fn.index)&&this.fn.index.isObjectProperty()){var w=this.fn.object._compile(u,c),b=this.fn.index.getObjectProperty(),m=this.args;return function(A,T,C){var D=w(A,T,C),O=yae(D,b);if(O!=null&&O.rawArgs)return O(m,u,$g(A,T));var U=h.map(L=>L(A,T,C));return O.apply(D,U)}}else{var x=this.fn.toString(),S=this.fn._compile(u,c),E=this.args;return function(A,T,C){var D=S(A,T,C);if(typeof D!="function")throw new TypeError("Expression '".concat(x,"' did not evaluate to a function; value is:")+`
  `.concat(a(D)));if(D.rawArgs)return D(E,u,$g(A,T));var O=h.map(U=>U(A,T,C));return D.apply(D,O)}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),h=[],d=0;d<this.args.length;d++)h[d]=this._ifNode(u(this.args[d],"args["+d+"]",this));return new s(c,h)}clone(){return new s(this.fn,this.args.slice(0))}toString(u){var c,h=this.fn.toString(u);return u&&typeof u.handler=="object"&&gt(u.handler,h)&&(c=u.handler[h](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(d){return d.toString(u)}),h=gm(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return h+"("+c.join(", ")+")"}toJSON(){return{mathjs:ib,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(h){return h.toHTML(u)});return'<span class="math-function">'+Ho(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&gt(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(f){return f.toTex(u)}),h;L5[this.name]&&(h=L5[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(h=t[this.name].toTex);var d;switch(typeof h){case"function":d=h(this,u);break;case"string":d=o(h,this,u);break;case"object":switch(typeof h[c.length]){case"function":d=h[c.length](this,u);break;case"string":d=o(h[c.length],this,u);break}}return typeof d<"u"?d:o(Pme,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=s,fn(s,"name",ib),fn(s,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),fn(s,"fromJSON",function(l){return new e(l.fn,l.args)}),s},{isClass:!0,isNode:!0}),B5="parse",rge=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],nge=ae(B5,rge,r=>{var{typed:e,numeric:t,config:n,AccessorNode:i,ArrayNode:a,AssignmentNode:o,BlockNode:s,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:h,IndexNode:d,ObjectNode:f,OperatorNode:p,ParenthesisNode:v,RangeNode:y,RelationalNode:g,SymbolNode:w}=r,b=e(B5,{string:function(V){return Z(V,{})},"Array | Matrix":function(V){return m(V,{})},"string, Object":function(V,Me){var Le=Me.nodes!==void 0?Me.nodes:{};return Z(V,Le)},"Array | Matrix, Object":m});function m(V){var Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Le=Me.nodes!==void 0?Me.nodes:{};return ur(V,function(Ze){if(typeof Ze!="string")throw new TypeError("String expected");return Z(Ze,Le)})}var x={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},S={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},E={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},A={true:!0,false:!1,null:null,undefined:void 0},T=["NaN","Infinity"],C={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function D(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:x.NULL,nestingLevel:0,conditionalLevel:null}}function O(V,Me){return V.expression.substr(V.index,Me)}function U(V){return O(V,1)}function L(V){V.index++}function F(V){return V.expression.charAt(V.index-1)}function k(V){return V.expression.charAt(V.index+1)}function R(V){for(V.tokenType=x.NULL,V.token="",V.comment="";;){if(U(V)==="#")for(;U(V)!==`
`&&U(V)!=="";)V.comment+=U(V),L(V);if(b.isWhitespace(U(V),V.nestingLevel))L(V);else break}if(U(V)===""){V.tokenType=x.DELIMITER;return}if(U(V)===`
`&&!V.nestingLevel){V.tokenType=x.DELIMITER,V.token=U(V),L(V);return}var Me=U(V),Le=O(V,2),Ze=O(V,3);if(Ze.length===3&&S[Ze]){V.tokenType=x.DELIMITER,V.token=Ze,L(V),L(V),L(V);return}if(Le.length===2&&S[Le]){V.tokenType=x.DELIMITER,V.token=Le,L(V),L(V);return}if(S[Me]){V.tokenType=x.DELIMITER,V.token=Me,L(V);return}if(b.isDigitDot(Me)){V.tokenType=x.NUMBER;var he=O(V,2);if(he==="0b"||he==="0o"||he==="0x"){for(V.token+=U(V),L(V),V.token+=U(V),L(V);b.isHexDigit(U(V));)V.token+=U(V),L(V);if(U(V)===".")for(V.token+=".",L(V);b.isHexDigit(U(V));)V.token+=U(V),L(V);else if(U(V)==="i")for(V.token+="i",L(V);b.isDigit(U(V));)V.token+=U(V),L(V);return}if(U(V)==="."){if(V.token+=U(V),L(V),!b.isDigit(U(V))){V.tokenType=x.DELIMITER;return}}else{for(;b.isDigit(U(V));)V.token+=U(V),L(V);b.isDecimalMark(U(V),k(V))&&(V.token+=U(V),L(V))}for(;b.isDigit(U(V));)V.token+=U(V),L(V);if(U(V)==="E"||U(V)==="e"){if(b.isDigit(k(V))||k(V)==="-"||k(V)==="+"){if(V.token+=U(V),L(V),(U(V)==="+"||U(V)==="-")&&(V.token+=U(V),L(V)),!b.isDigit(U(V)))throw Pe(V,'Digit expected, got "'+U(V)+'"');for(;b.isDigit(U(V));)V.token+=U(V),L(V);if(b.isDecimalMark(U(V),k(V)))throw Pe(V,'Digit expected, got "'+U(V)+'"')}else if(k(V)===".")throw L(V),Pe(V,'Digit expected, got "'+U(V)+'"')}return}if(b.isAlpha(U(V),F(V),k(V))){for(;b.isAlpha(U(V),F(V),k(V))||b.isDigit(U(V));)V.token+=U(V),L(V);gt(E,V.token)?V.tokenType=x.DELIMITER:V.tokenType=x.SYMBOL;return}for(V.tokenType=x.UNKNOWN;U(V)!=="";)V.token+=U(V),L(V);throw Pe(V,'Syntax error in part "'+V.token+'"')}function z(V){do R(V);while(V.token===`
`)}function B(V){V.nestingLevel++}function X(V){V.nestingLevel--}b.isAlpha=function(V,Me,Le){return b.isValidLatinOrGreek(V)||b.isValidMathSymbol(V,Le)||b.isValidMathSymbol(Me,V)},b.isValidLatinOrGreek=function(V){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(V)},b.isValidMathSymbol=function(V,Me){return/^[\uD835]$/.test(V)&&/^[\uDC00-\uDFFF]$/.test(Me)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(Me)},b.isWhitespace=function(V,Me){return V===" "||V==="	"||V===`
`&&Me>0},b.isDecimalMark=function(V,Me){return V==="."&&Me!=="/"&&Me!=="*"&&Me!=="^"},b.isDigitDot=function(V){return V>="0"&&V<="9"||V==="."},b.isDigit=function(V){return V>="0"&&V<="9"},b.isHexDigit=function(V){return V>="0"&&V<="9"||V>="a"&&V<="f"||V>="A"&&V<="F"};function Z(V,Me){var Le=D();lt(Le,{expression:V,extraNodes:Me}),R(Le);var Ze=Q(Le);if(Le.token!=="")throw Le.tokenType===x.DELIMITER?et(Le,"Unexpected operator "+Le.token):Pe(Le,'Unexpected part "'+Le.token+'"');return Ze}function Q(V){var Me,Le=[],Ze;for(V.token!==""&&V.token!==`
`&&V.token!==";"&&(Me=J(V),V.comment&&(Me.comment=V.comment));V.token===`
`||V.token===";";)Le.length===0&&Me&&(Ze=V.token!==";",Le.push({node:Me,visible:Ze})),R(V),V.token!==`
`&&V.token!==";"&&V.token!==""&&(Me=J(V),V.comment&&(Me.comment=V.comment),Ze=V.token!==";",Le.push({node:Me,visible:Ze}));return Le.length>0?new s(Le):(Me||(Me=new u(void 0),V.comment&&(Me.comment=V.comment)),Me)}function J(V){var Me,Le,Ze,he,Xe=ne(V);if(V.token==="="){if(ai(Xe))return Me=Xe.name,z(V),Ze=J(V),new o(new w(Me),Ze);if(Uc(Xe))return z(V),Ze=J(V),new o(Xe.object,Xe.index,Ze);if(yu(Xe)&&ai(Xe.fn)&&(he=!0,Le=[],Me=Xe.name,Xe.args.forEach(function(H,te){ai(H)?Le[te]=H.name:he=!1}),he))return z(V),Ze=J(V),new c(Me,Le,Ze);throw Pe(V,"Invalid left hand side of assignment operator =")}return Xe}function ne(V){for(var Me=fe(V);V.token==="?";){var Le=V.conditionalLevel;V.conditionalLevel=V.nestingLevel,z(V);var Ze=Me,he=J(V);if(V.token!==":")throw Pe(V,"False part of conditional expression expected");V.conditionalLevel=null,z(V);var Xe=J(V);Me=new l(Ze,he,Xe),V.conditionalLevel=Le}return Me}function fe(V){for(var Me=se(V);V.token==="or";)z(V),Me=new p("or","or",[Me,se(V)]);return Me}function se(V){for(var Me=ye(V);V.token==="xor";)z(V),Me=new p("xor","xor",[Me,ye(V)]);return Me}function ye(V){for(var Me=De(V);V.token==="and";)z(V),Me=new p("and","and",[Me,De(V)]);return Me}function De(V){for(var Me=pe(V);V.token==="|";)z(V),Me=new p("|","bitOr",[Me,pe(V)]);return Me}function pe(V){for(var Me=Te(V);V.token==="^|";)z(V),Me=new p("^|","bitXor",[Me,Te(V)]);return Me}function Te(V){for(var Me=be(V);V.token==="&";)z(V),Me=new p("&","bitAnd",[Me,be(V)]);return Me}function be(V){for(var Me=[re(V)],Le=[],Ze={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};gt(Ze,V.token);){var he={name:V.token,fn:Ze[V.token]};Le.push(he),z(V),Me.push(re(V))}return Me.length===1?Me[0]:Me.length===2?new p(Le[0].name,Le[0].fn,Me):new g(Le.map(Xe=>Xe.fn),Me)}function re(V){var Me,Le,Ze,he;Me=Re(V);for(var Xe={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};gt(Xe,V.token);)Le=V.token,Ze=Xe[Le],z(V),he=[Me,Re(V)],Me=new p(Le,Ze,he);return Me}function Re(V){var Me,Le,Ze,he;Me=ze(V);for(var Xe={to:"to",in:"to"};gt(Xe,V.token);)Le=V.token,Ze=Xe[Le],z(V),Le==="in"&&V.token===""?Me=new p("*","multiply",[Me,new w("in")],!0):(he=[Me,ze(V)],Me=new p(Le,Ze,he));return Me}function ze(V){var Me,Le=[];if(V.token===":"?Me=new u(1):Me=K(V),V.token===":"&&V.conditionalLevel!==V.nestingLevel){for(Le.push(Me);V.token===":"&&Le.length<3;)z(V),V.token===")"||V.token==="]"||V.token===","||V.token===""?Le.push(new w("end")):Le.push(K(V));Le.length===3?Me=new y(Le[0],Le[2],Le[1]):Me=new y(Le[0],Le[1])}return Me}function K(V){var Me,Le,Ze,he;Me=ie(V);for(var Xe={"+":"add","-":"subtract"};gt(Xe,V.token);){Le=V.token,Ze=Xe[Le],z(V);var H=ie(V);H.isPercentage?he=[Me,new p("*","multiply",[Me,H])]:he=[Me,H],Me=new p(Le,Ze,he)}return Me}function ie(V){var Me,Le,Ze,he;Me=_e(V),Le=Me;for(var Xe={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};gt(Xe,V.token);)Ze=V.token,he=Xe[Ze],z(V),Le=_e(V),Me=new p(Ze,he,[Me,Le]);return Me}function _e(V){var Me,Le;for(Me=oe(V),Le=Me;V.tokenType===x.SYMBOL||V.token==="in"&&mr(Me)||V.tokenType===x.NUMBER&&!mr(Le)&&(!Fn(Le)||Le.op==="!")||V.token==="(";)Le=oe(V),Me=new p("*","multiply",[Me,Le],!0);return Me}function oe(V){for(var Me=G(V),Le=Me,Ze=[];V.token==="/"&&ET(Le);)if(Ze.push(lt({},V)),z(V),V.tokenType===x.NUMBER)if(Ze.push(lt({},V)),z(V),V.tokenType===x.SYMBOL||V.token==="(")lt(V,Ze.pop()),Ze.pop(),Le=G(V),Me=new p("/","divide",[Me,Le]);else{Ze.pop(),lt(V,Ze.pop());break}else{lt(V,Ze.pop());break}return Me}function G(V){var Me,Le,Ze,he;Me=W(V);for(var Xe={"%":"mod",mod:"mod"};gt(Xe,V.token);)Le=V.token,Ze=Xe[Le],z(V),Le==="%"&&V.tokenType===x.DELIMITER&&V.token!=="("?Me=new p("/","divide",[Me,new u(100)],!1,!0):(he=[Me,W(V)],Me=new p(Le,Ze,he));return Me}function W(V){var Me,Le,Ze,he={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return gt(he,V.token)?(Ze=he[V.token],Me=V.token,z(V),Le=[W(V)],new p(Me,Ze,Le)):ce(V)}function ce(V){var Me,Le,Ze,he;return Me=Ce(V),(V.token==="^"||V.token===".^")&&(Le=V.token,Ze=Le==="^"?"pow":"dotPow",z(V),he=[Me,W(V)],Me=new p(Le,Ze,he)),Me}function Ce(V){var Me,Le,Ze,he;Me=$(V);for(var Xe={"!":"factorial","'":"ctranspose"};gt(Xe,V.token);)Le=V.token,Ze=Xe[Le],R(V),he=[Me],Me=new p(Le,Ze,he),Me=ge(V,Me);return Me}function $(V){var Me=[];if(V.tokenType===x.SYMBOL&&gt(V.extraNodes,V.token)){var Le=V.extraNodes[V.token];if(R(V),V.token==="("){if(Me=[],B(V),R(V),V.token!==")")for(Me.push(J(V));V.token===",";)R(V),Me.push(J(V));if(V.token!==")")throw Pe(V,"Parenthesis ) expected");X(V),R(V)}return new Le(Me)}return ee(V)}function ee(V){var Me,Le;return V.tokenType===x.SYMBOL||V.tokenType===x.DELIMITER&&V.token in E?(Le=V.token,R(V),gt(A,Le)?Me=new u(A[Le]):T.includes(Le)?Me=new u(t(Le,"number")):Me=new w(Le),Me=ge(V,Me),Me):xe(V)}function ge(V,Me,Le){for(var Ze;(V.token==="("||V.token==="["||V.token===".")&&!Le;)if(Ze=[],V.token==="(")if(ai(Me)||Uc(Me)){if(B(V),R(V),V.token!==")")for(Ze.push(J(V));V.token===",";)R(V),Ze.push(J(V));if(V.token!==")")throw Pe(V,"Parenthesis ) expected");X(V),R(V),Me=new h(Me,Ze)}else return Me;else if(V.token==="["){if(B(V),R(V),V.token!=="]")for(Ze.push(J(V));V.token===",";)R(V),Ze.push(J(V));if(V.token!=="]")throw Pe(V,"Parenthesis ] expected");X(V),R(V),Me=new i(Me,new d(Ze))}else{R(V);var he=V.tokenType===x.SYMBOL||V.tokenType===x.DELIMITER&&V.token in E;if(!he)throw Pe(V,"Property name expected after dot");Ze.push(new u(V.token)),R(V);var Xe=!0;Me=new i(Me,new d(Ze,Xe))}return Me}function xe(V){var Me,Le;return V.token==='"'||V.token==="'"?(Le=Ne(V,V.token),Me=new u(Le),Me=ge(V,Me),Me):Fe(V)}function Ne(V,Me){for(var Le="";U(V)!==""&&U(V)!==Me;)if(U(V)==="\\"){L(V);var Ze=U(V),he=C[Ze];if(he!==void 0)Le+=he,V.index+=1;else if(Ze==="u"){var Xe=V.expression.slice(V.index+1,V.index+5);if(/^[0-9A-Fa-f]{4}$/.test(Xe))Le+=String.fromCharCode(parseInt(Xe,16)),V.index+=5;else throw Pe(V,"Invalid unicode character \\u".concat(Xe))}else throw Pe(V,"Bad escape character \\".concat(Ze))}else Le+=U(V),L(V);if(R(V),V.token!==Me)throw Pe(V,"End of string ".concat(Me," expected"));return R(V),Le}function Fe(V){var Me,Le,Ze,he;if(V.token==="["){if(B(V),R(V),V.token!=="]"){var Xe=We(V);if(V.token===";"){for(Ze=1,Le=[Xe];V.token===";";)R(V),V.token!=="]"&&(Le[Ze]=We(V),Ze++);if(V.token!=="]")throw Pe(V,"End of matrix ] expected");X(V),R(V),he=Le[0].items.length;for(var H=1;H<Ze;H++)if(Le[H].items.length!==he)throw et(V,"Column dimensions mismatch ("+Le[H].items.length+" !== "+he+")");Me=new a(Le)}else{if(V.token!=="]")throw Pe(V,"End of matrix ] expected");X(V),R(V),Me=Xe}}else X(V),R(V),Me=new a([]);return ge(V,Me)}return ke(V)}function We(V){for(var Me=[J(V)],Le=1;V.token===",";)R(V),V.token!=="]"&&V.token!==";"&&(Me[Le]=J(V),Le++);return new a(Me)}function ke(V){if(V.token==="{"){B(V);var Me,Le={};do if(R(V),V.token!=="}"){if(V.token==='"'||V.token==="'")Me=Ne(V,V.token);else if(V.tokenType===x.SYMBOL||V.tokenType===x.DELIMITER&&V.token in E)Me=V.token,R(V);else throw Pe(V,"Symbol or string expected as object key");if(V.token!==":")throw Pe(V,"Colon : expected after object key");R(V),Le[Me]=J(V)}while(V.token===",");if(V.token!=="}")throw Pe(V,"Comma , or bracket } expected after object value");X(V),R(V);var Ze=new f(Le);return Ze=ge(V,Ze),Ze}return it(V)}function it(V){var Me;return V.tokenType===x.NUMBER?(Me=V.token,R(V),new u(t(Me,n.number))):Je(V)}function Je(V){var Me;if(V.token==="("){if(B(V),R(V),Me=J(V),V.token!==")")throw Pe(V,"Parenthesis ) expected");return X(V),R(V),Me=new v(Me),Me=ge(V,Me),Me}return st(V)}function st(V){throw V.token===""?Pe(V,"Unexpected end of expression"):Pe(V,"Value expected")}function we(V){return V.index-V.token.length+1}function Pe(V,Me){var Le=we(V),Ze=new SyntaxError(Me+" (char "+Le+")");return Ze.char=Le,Ze}function et(V,Me){var Le=we(V),Ze=new SyntaxError(Me+" (char "+Le+")");return Ze.char=Le,Ze}return e.addConversion({from:"string",to:"Node",convert:b}),b}),z5="compile",ige=["typed","parse"],age=ae(z5,ige,r=>{var{typed:e,parse:t}=r;return e(z5,{string:function(n){return t(n).compile()},"Array | Matrix":function(n){return ur(n,function(i){return t(i).compile()})}})}),U5="evaluate",oge=["typed","parse"],sge=ae(U5,oge,r=>{var{typed:e,parse:t}=r;return e(U5,{string:function(n){var i=G0();return t(n).compile().evaluate(i)},"string, Map | Object":function(n,i){return t(n).compile().evaluate(i)},"Array | Matrix":function(n){var i=G0();return ur(n,function(a){return t(a).compile().evaluate(i)})},"Array | Matrix, Map | Object":function(n,i){return ur(n,function(a){return t(a).compile().evaluate(i)})}})}),lge="Parser",uge=["evaluate"],cge=ae(lge,uge,r=>{var{evaluate:e}=r;function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:G0(),writable:!1})}return t.prototype.type="Parser",t.prototype.isParser=!0,t.prototype.evaluate=function(n){return e(n,this.scope)},t.prototype.get=function(n){if(this.scope.has(n))return this.scope.get(n)},t.prototype.getAll=function(){return wae(this.scope)},t.prototype.getAllAsMap=function(){return this.scope},t.prototype.set=function(n,i){return this.scope.set(n,i),i},t.prototype.remove=function(n){this.scope.delete(n)},t.prototype.clear=function(){this.scope.clear()},t},{isClass:!0}),j5="parser",hge=["typed","Parser"],dge=ae(j5,hge,r=>{var{typed:e,Parser:t}=r;return e(j5,{"":function(){return new t}})}),H5="lup",fge=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],pge=ae(H5,fge,r=>{var{typed:e,matrix:t,abs:n,addScalar:i,divideScalar:a,multiplyScalar:o,subtractScalar:s,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:h,SparseMatrix:d,Spa:f}=r;return e(H5,{DenseMatrix:function(y){return p(y)},SparseMatrix:function(y){return v(y)},Array:function(y){var g=t(y),w=p(g);return{L:w.L.valueOf(),U:w.U.valueOf(),p:w.p}}});function p(y){var g=y._size[0],w=y._size[1],b=Math.min(g,w),m=Gt(y._data),x=[],S=[g,b],E=[],A=[b,w],T,C,D,O=[];for(T=0;T<g;T++)O[T]=T;for(C=0;C<w;C++){if(C>0)for(T=0;T<g;T++){var U=Math.min(T,C),L=0;for(D=0;D<U;D++)L=i(L,o(m[T][D],m[D][C]));m[T][C]=s(m[T][C],L)}var F=C,k=0,R=0;for(T=C;T<g;T++){var z=m[T][C],B=n(z);l(B,k)&&(F=T,k=B,R=z)}if(C!==F&&(O[C]=[O[F],O[F]=O[C]][0],h._swapRows(C,F,m)),C<g)for(T=C+1;T<g;T++){var X=m[T][C];u(X,0)||(m[T][C]=a(m[T][C],R))}}for(C=0;C<w;C++)for(T=0;T<g;T++){if(C===0&&(T<w&&(E[T]=[]),x[T]=[]),T<C){T<w&&(E[T][C]=m[T][C]),C<g&&(x[T][C]=0);continue}if(T===C){T<w&&(E[T][C]=m[T][C]),C<g&&(x[T][C]=1);continue}T<w&&(E[T][C]=0),C<g&&(x[T][C]=m[T][C])}var Z=new h({data:x,size:S}),Q=new h({data:E,size:A}),J=[];for(T=0,b=O.length;T<b;T++)J[O[T]]=T;return{L:Z,U:Q,p:J,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(y){var g=y._size[0],w=y._size[1],b=Math.min(g,w),m=y._values,x=y._index,S=y._ptr,E=[],A=[],T=[],C=[g,b],D=[],O=[],U=[],L=[b,w],F,k,R,z=[],B=[];for(F=0;F<g;F++)z[F]=F,B[F]=F;var X=function(Q,J){var ne=B[Q],fe=B[J];z[ne]=J,z[fe]=Q,B[Q]=fe,B[J]=ne},Z=function(){var Q=new f;k<g&&(T.push(E.length),E.push(1),A.push(k)),U.push(D.length);var J=S[k],ne=S[k+1];for(R=J;R<ne;R++)F=x[R],Q.set(z[F],m[R]);k>0&&Q.forEach(0,k-1,function(De,pe){d._forEachRow(De,E,A,T,function(Te,be){Te>De&&Q.accumulate(Te,c(o(be,pe)))})});var fe=k,se=Q.get(k),ye=n(se);Q.forEach(k+1,g-1,function(De,pe){var Te=n(pe);l(Te,ye)&&(fe=De,ye=Te,se=pe)}),k!==fe&&(d._swapRows(k,fe,C[1],E,A,T),d._swapRows(k,fe,L[1],D,O,U),Q.swap(k,fe),X(k,fe)),Q.forEach(0,g-1,function(De,pe){De<=k?(D.push(pe),O.push(De)):(pe=a(pe,se),u(pe,0)||(E.push(pe),A.push(De)))})};for(k=0;k<w;k++)Z();return U.push(D.length),T.push(E.length),{L:new d({values:E,index:A,ptr:T,size:C}),U:new d({values:D,index:O,ptr:U,size:L}),p:z,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),V5="qr",mge=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],gge=ae(V5,mge,r=>{var{typed:e,matrix:t,zeros:n,identity:i,isZero:a,equal:o,sign:s,sqrt:l,conj:u,unaryMinus:c,addScalar:h,divideScalar:d,multiplyScalar:f,subtractScalar:p,complex:v}=r;return lt(e(V5,{DenseMatrix:function(b){return g(b)},SparseMatrix:function(b){return w()},Array:function(b){var m=t(b),x=g(m);return{Q:x.Q.valueOf(),R:x.R.valueOf()}}}),{_denseQRimpl:y});function y(b){var m=b._size[0],x=b._size[1],S=i([m],"dense"),E=S._data,A=b.clone(),T=A._data,C,D,O,U=n([m],"");for(O=0;O<Math.min(x,m);++O){var L=T[O][O],F=c(o(L,0)?1:s(L)),k=u(F),R=0;for(C=O;C<m;C++)R=h(R,f(T[C][O],u(T[C][O])));var z=f(F,l(R));if(!a(z)){var B=p(L,z);for(U[O]=1,C=O+1;C<m;C++)U[C]=d(T[C][O],B);var X=c(u(d(B,z))),Z=void 0;for(D=O;D<x;D++){for(Z=0,C=O;C<m;C++)Z=h(Z,f(u(U[C]),T[C][D]));for(Z=f(Z,X),C=O;C<m;C++)T[C][D]=f(p(T[C][D],f(U[C],Z)),k)}for(C=0;C<m;C++){for(Z=0,D=O;D<m;D++)Z=h(Z,f(E[C][D],U[D]));for(Z=f(Z,X),D=O;D<m;++D)E[C][D]=d(p(E[C][D],f(Z,u(U[D]))),k)}}}return{Q:S,R:A,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function g(b){var m=y(b),x=m.R._data;if(b._data.length>0)for(var S=x[0][0].type==="Complex"?v(0):0,E=0;E<x.length;++E)for(var A=0;A<E&&A<(x[0]||[]).length;++A)x[E][A]=S;return m}function w(b){throw new Error("qr not implemented for sparse matrices yet")}});function vge(r,e,t,n){r._values;for(var i=r._index,a=r._ptr,o=r._size,s=r._datatype,l=o[0],u=o[1],c=null,h=[],d=[],f=0,p=0;p<u;p++){d[p]=f;for(var v=t?t[p]:p,y=a[v],g=a[v+1],w=y;w<g;w++){var b=i[w];h[f]=b,f++}}return d[u]=f,r.createSparseMatrix({values:c,index:h,ptr:d,size:[l,u],datatype:s})}function OW(r,e,t,n,i,a,o){var s=0;for(t[o]=r;s>=0;){var l=t[o+s],u=t[n+l];u===-1?(s--,a[e++]=l):(t[n+l]=t[i+u],++s,t[o+s]=u)}return e}function yge(r,e){if(!r)return null;var t=0,n,i=[],a=[],o=0,s=e,l=2*e;for(n=0;n<e;n++)a[o+n]=-1;for(n=e-1;n>=0;n--)r[n]!==-1&&(a[s+n]=a[o+r[n]],a[o+r[n]]=n);for(n=0;n<e;n++)r[n]===-1&&(t=OW(n,t,a,o,s,i,l));return i}function bge(r,e){if(!r)return null;var t=r._index,n=r._ptr,i=r._size,a=i[0],o=i[1],s=[],l=[],u=0,c=o,h,d;for(h=0;h<a;h++)l[c+h]=-1;for(var f=0;f<o;f++){s[f]=-1,l[u+f]=-1;for(var p=n[f],v=n[f+1],y=p;y<v;y++){var g=t[y];for(h=l[c+g];h!==-1&&h<f;h=d)d=l[u+h],l[u+h]=f,d===-1&&(s[h]=f);l[c+g]=f}}return s}function xge(r,e,t){for(var n=r._values,i=r._index,a=r._ptr,o=r._size,s=o[1],l=0,u=0;u<s;u++){var c=a[u];for(a[u]=l;c<a[u+1];c++)e(i[c],u,n?n[c]:1,t)&&(i[l]=i[c],n&&(n[l]=n[c]),l++)}return a[s]=l,i.splice(l,i.length-l),n&&n.splice(l,n.length-l),l}function oc(r){return-r-2}var wge="csAmd",Sge=["add","multiply","transpose"],Mge=ae(wge,Sge,r=>{var{add:e,multiply:t,transpose:n}=r;return function(u,c){if(!c||u<=0||u>3)return null;var h=c._size,d=h[0],f=h[1],p=0,v=Math.max(16,10*Math.sqrt(f));v=Math.min(f-2,v);var y=i(u,c,d,f,v);xge(y,l,null);for(var g=y._index,w=y._ptr,b=w[f],m=[],x=[],S=0,E=f+1,A=2*(f+1),T=3*(f+1),C=4*(f+1),D=5*(f+1),O=6*(f+1),U=7*(f+1),L=m,F=a(f,w,x,S,T,L,A,U,E,O,C,D),k=o(f,w,x,D,C,O,v,E,T,L,A),R=0,z,B,X,Z,Q,J,ne,fe,se,ye,De,pe,Te,be,re,Re;k<f;){for(X=-1;R<f&&(X=x[T+R])===-1;R++);x[A+X]!==-1&&(L[x[A+X]]=-1),x[T+R]=x[A+X];var ze=x[C+X],K=x[E+X];k+=K;var ie=0;x[E+X]=-K;var _e=w[X],oe=ze===0?_e:b,G=oe;for(Z=1;Z<=ze+1;Z++){for(Z>ze?(J=X,ne=_e,fe=x[S+X]-ze):(J=g[_e++],ne=w[J],fe=x[S+J]),Q=1;Q<=fe;Q++)z=g[ne++],!((se=x[E+z])<=0)&&(ie+=se,x[E+z]=-se,g[G++]=z,x[A+z]!==-1&&(L[x[A+z]]=L[z]),L[z]!==-1?x[A+L[z]]=x[A+z]:x[T+x[D+z]]=x[A+z]);J!==X&&(w[J]=oc(X),x[O+J]=0)}for(ze!==0&&(b=G),x[D+X]=ie,w[X]=oe,x[S+X]=G-oe,x[C+X]=-2,F=s(F,p,x,O,f),ye=oe;ye<G;ye++)if(z=g[ye],!((De=x[C+z])<=0)){se=-x[E+z];var W=F-se;for(_e=w[z],pe=w[z]+De-1;_e<=pe;_e++)J=g[_e],x[O+J]>=F?x[O+J]-=se:x[O+J]!==0&&(x[O+J]=x[D+J]+W)}for(ye=oe;ye<G;ye++){for(z=g[ye],pe=w[z],Te=pe+x[C+z]-1,be=pe,re=0,Re=0,_e=pe;_e<=Te;_e++)if(J=g[_e],x[O+J]!==0){var ce=x[O+J]-F;ce>0?(Re+=ce,g[be++]=J,re+=J):(w[J]=oc(X),x[O+J]=0)}x[C+z]=be-pe+1;var Ce=be,$=pe+x[S+z];for(_e=Te+1;_e<$;_e++){B=g[_e];var ee=x[E+B];ee<=0||(Re+=ee,g[be++]=B,re+=B)}Re===0?(w[z]=oc(X),se=-x[E+z],ie-=se,K+=se,k+=se,x[E+z]=0,x[C+z]=-1):(x[D+z]=Math.min(x[D+z],Re),g[be]=g[Ce],g[Ce]=g[pe],g[pe]=X,x[S+z]=be-pe+1,re=(re<0?-re:re)%f,x[A+z]=x[U+re],x[U+re]=z,L[z]=re)}for(x[D+X]=ie,p=Math.max(p,ie),F=s(F+p,p,x,O,f),ye=oe;ye<G;ye++)if(z=g[ye],!(x[E+z]>=0))for(re=L[z],z=x[U+re],x[U+re]=-1;z!==-1&&x[A+z]!==-1;z=x[A+z],F++){for(fe=x[S+z],De=x[C+z],_e=w[z]+1;_e<=w[z]+fe-1;_e++)x[O+g[_e]]=F;var ge=z;for(B=x[A+z];B!==-1;){var xe=x[S+B]===fe&&x[C+B]===De;for(_e=w[B]+1;xe&&_e<=w[B]+fe-1;_e++)x[O+g[_e]]!==F&&(xe=0);xe?(w[B]=oc(z),x[E+z]+=x[E+B],x[E+B]=0,x[C+B]=-1,B=x[A+B],x[A+ge]=B):(ge=B,B=x[A+B])}}for(_e=oe,ye=oe;ye<G;ye++)z=g[ye],!((se=-x[E+z])<=0)&&(x[E+z]=se,Re=x[D+z]+ie-se,Re=Math.min(Re,f-k-se),x[T+Re]!==-1&&(L[x[T+Re]]=z),x[A+z]=x[T+Re],L[z]=-1,x[T+Re]=z,R=Math.min(R,Re),x[D+z]=Re,g[_e++]=z);x[E+X]=K,(x[S+X]=_e-oe)===0&&(w[X]=-1,x[O+X]=0),ze!==0&&(b=_e)}for(z=0;z<f;z++)w[z]=oc(w[z]);for(B=0;B<=f;B++)x[T+B]=-1;for(B=f;B>=0;B--)x[E+B]>0||(x[A+B]=x[T+w[B]],x[T+w[B]]=B);for(J=f;J>=0;J--)x[E+J]<=0||w[J]!==-1&&(x[A+J]=x[T+w[J]],x[T+w[J]]=J);for(X=0,z=0;z<=f;z++)w[z]===-1&&(X=OW(z,X,x,T,A,m,O));return m.splice(m.length-1,1),m};function i(u,c,h,d,f){var p=n(c);if(u===1&&d===h)return e(c,p);if(u===2){for(var v=p._index,y=p._ptr,g=0,w=0;w<h;w++){var b=y[w];if(y[w]=g,!(y[w+1]-b>f))for(var m=y[w+1];b<m;b++)v[g++]=v[b]}return y[h]=g,c=n(p),t(p,c)}return t(p,c)}function a(u,c,h,d,f,p,v,y,g,w,b,m){for(var x=0;x<u;x++)h[d+x]=c[x+1]-c[x];h[d+u]=0;for(var S=0;S<=u;S++)h[f+S]=-1,p[S]=-1,h[v+S]=-1,h[y+S]=-1,h[g+S]=1,h[w+S]=1,h[b+S]=0,h[m+S]=h[d+S];var E=s(0,0,h,w,u);return h[b+u]=-2,c[u]=-1,h[w+u]=0,E}function o(u,c,h,d,f,p,v,y,g,w,b){for(var m=0,x=0;x<u;x++){var S=h[d+x];if(S===0)h[f+x]=-2,m++,c[x]=-1,h[p+x]=0;else if(S>v)h[y+x]=0,h[f+x]=-1,m++,c[x]=oc(u),h[y+u]++;else{var E=h[g+S];E!==-1&&(w[E]=x),h[b+x]=h[g+S],h[g+S]=x}}return m}function s(u,c,h,d,f){if(u<2||u+c<0){for(var p=0;p<f;p++)h[d+p]!==0&&(h[d+p]=1);u=2}return u}function l(u,c){return u!==c}});function _ge(r,e,t,n,i,a,o){var s,l,u=0,c;if(r<=e||t[n+e]<=t[i+r])return-1;t[i+r]=t[n+e];var h=t[a+r];if(t[a+r]=e,h===-1)u=1,c=r;else{for(u=2,c=h;c!==t[o+c];c=t[o+c]);for(s=h;s!==c;s=l)l=t[o+s],t[o+s]=c}return{jleaf:u,q:c}}var Ege="csCounts",Cge=["transpose"],Age=ae(Ege,Cge,r=>{var{transpose:e}=r;return function(t,n,i,a){if(!t||!n||!i)return null;var o=t._size,s=o[0],l=o[1],u,c,h,d,f,p,v,y=4*l+(a?l+s+1:0),g=[],w=0,b=l,m=2*l,x=3*l,S=4*l,E=5*l+1;for(h=0;h<y;h++)g[h]=-1;var A=[],T=e(t),C=T._index,D=T._ptr;for(h=0;h<l;h++)for(c=i[h],A[c]=g[x+c]===-1?1:0;c!==-1&&g[x+c]===-1;c=n[c])g[x+c]=h;if(a){for(h=0;h<l;h++)g[i[h]]=h;for(u=0;u<s;u++){for(h=l,p=D[u],v=D[u+1],f=p;f<v;f++)h=Math.min(h,g[C[f]]);g[E+u]=g[S+h],g[S+h]=u}}for(u=0;u<l;u++)g[w+u]=u;for(h=0;h<l;h++){for(c=i[h],n[c]!==-1&&A[n[c]]--,d=a?g[S+h]:c;d!==-1;d=a?g[E+d]:-1)for(f=D[d];f<D[d+1];f++){u=C[f];var O=_ge(u,c,g,x,b,m,w);O.jleaf>=1&&A[c]++,O.jleaf===2&&A[O.q]--}n[c]!==-1&&(g[w+c]=n[c])}for(c=0;c<l;c++)n[c]!==-1&&(A[n[c]]+=A[c]);return A}}),Tge="csSqr",Dge=["add","multiply","transpose"],kge=ae(Tge,Dge,r=>{var{add:e,multiply:t,transpose:n}=r,i=Mge({add:e,multiply:t,transpose:n}),a=Age({transpose:n});return function(s,l,u){var c=l._ptr,h=l._size,d=h[1],f,p={};if(p.q=i(s,l),s&&!p.q)return null;if(u){var v=s?vge(l,null,p.q):l;p.parent=bge(v);var y=yge(p.parent,d);if(p.cp=a(v,p.parent,y,1),v&&p.parent&&p.cp&&o(v,p))for(p.unz=0,f=0;f<d;f++)p.unz+=p.cp[f]}else p.unz=4*c[d]+d,p.lnz=p.unz;return p};function o(s,l){var u=s._ptr,c=s._index,h=s._size,d=h[0],f=h[1];l.pinv=[],l.leftmost=[];var p=l.parent,v=l.pinv,y=l.leftmost,g=[],w=0,b=d,m=d+f,x=d+2*f,S,E,A,T,C;for(E=0;E<f;E++)g[b+E]=-1,g[m+E]=-1,g[x+E]=0;for(S=0;S<d;S++)y[S]=-1;for(E=f-1;E>=0;E--)for(T=u[E],C=u[E+1],A=T;A<C;A++)y[c[A]]=E;for(S=d-1;S>=0;S--)v[S]=-1,E=y[S],E!==-1&&(g[x+E]++===0&&(g[m+E]=S),g[w+S]=g[b+E],g[b+E]=S);for(l.lnz=0,l.m2=d,E=0;E<f;E++)if(S=g[b+E],l.lnz++,S<0&&(S=l.m2++),v[S]=E,!(--x[E]<=0)){l.lnz+=g[x+E];var D=p[E];D!==-1&&(g[x+D]===0&&(g[m+D]=g[m+E]),g[w+g[m+E]]=g[b+D],g[b+D]=g[w+S],g[x+D]+=g[x+E])}for(S=0;S<d;S++)v[S]<0&&(v[S]=E++);return!0}});function UT(r,e){return r[e]<0}function RW(r,e){r[e]=oc(r[e])}function q5(r){return r<0?oc(r):r}function Nge(r,e,t,n,i){var a=e._index,o=e._ptr,s=e._size,l=s[1],u,c,h,d=0;for(n[0]=r;d>=0;){r=n[d];var f=i?i[r]:r;UT(o,r)||(RW(o,r),n[l+d]=f<0?0:q5(o[f]));var p=1;for(c=n[l+d],h=f<0?0:q5(o[f+1]);c<h;c++)if(u=a[c],!UT(o,u)){n[l+d]=c,n[++d]=u,p=0;break}p&&(d--,n[--t]=r)}return t}function Oge(r,e,t,n,i){var a=r._ptr,o=r._size,s=e._index,l=e._ptr,u=o[1],c,h,d,f=u;for(h=l[t],d=l[t+1],c=h;c<d;c++){var p=s[c];UT(a,p)||(f=Nge(p,r,f,n,i))}for(c=f;c<u;c++)RW(a,n[c]);return f}var Rge="csSpsolve",Pge=["divideScalar","multiply","subtract"],Ige=ae(Rge,Pge,r=>{var{divideScalar:e,multiply:t,subtract:n}=r;return function(i,a,o,s,l,u,c){var h=i._values,d=i._index,f=i._ptr,p=i._size,v=p[1],y=a._values,g=a._index,w=a._ptr,b,m,x,S,E=Oge(i,a,o,s,u);for(b=E;b<v;b++)l[s[b]]=0;for(m=w[o],x=w[o+1],b=m;b<x;b++)l[g[b]]=y[b];for(var A=E;A<v;A++){var T=s[A],C=u?u[T]:T;if(!(C<0))for(m=f[C],x=f[C+1],l[T]=e(l[T],h[c?m:x-1]),b=c?m+1:m,S=c?x:x-1;b<S;b++){var D=d[b];l[D]=n(l[D],t(h[b],l[T]))}}return E}}),Lge="csLu",Fge=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],Bge=ae(Lge,Fge,r=>{var{abs:e,divideScalar:t,multiply:n,subtract:i,larger:a,largerEq:o,SparseMatrix:s}=r,l=Ige({divideScalar:t,multiply:n,subtract:i});return function(u,c,h){if(!u)return null;var d=u._size,f=d[1],p,v=100,y=100;c&&(p=c.q,v=c.lnz||v,y=c.unz||y);var g=[],w=[],b=[],m=new s({values:g,index:w,ptr:b,size:[f,f]}),x=[],S=[],E=[],A=new s({values:x,index:S,ptr:E,size:[f,f]}),T=[],C,D,O=[],U=[];for(C=0;C<f;C++)O[C]=0,T[C]=-1,b[C+1]=0;v=0,y=0;for(var L=0;L<f;L++){b[L]=v,E[L]=y;var F=p?p[L]:L,k=l(m,u,F,U,O,T,1),R=-1,z=-1;for(D=k;D<f;D++)if(C=U[D],T[C]<0){var B=e(O[C]);a(B,z)&&(z=B,R=C)}else S[y]=T[C],x[y++]=O[C];if(R===-1||z<=0)return null;T[F]<0&&o(e(O[F]),n(z,h))&&(R=F);var X=O[R];for(S[y]=L,x[y++]=X,T[R]=L,w[v]=R,g[v++]=1,D=k;D<f;D++)C=U[D],T[C]<0&&(w[v]=C,g[v++]=t(O[C],X)),O[C]=0}for(b[f]=v,E[f]=y,D=0;D<v;D++)w[D]=T[w[D]];return g.splice(v,g.length-v),w.splice(v,w.length-v),x.splice(y,x.length-y),S.splice(y,S.length-y),{L:m,U:A,pinv:T}}}),W5="slu",zge=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],Uge=ae(W5,zge,r=>{var{typed:e,abs:t,add:n,multiply:i,transpose:a,divideScalar:o,subtract:s,larger:l,largerEq:u,SparseMatrix:c}=r,h=kge({add:n,multiply:i,transpose:a}),d=Bge({abs:t,divideScalar:o,multiply:i,subtract:s,larger:l,largerEq:u,SparseMatrix:c});return e(W5,{"SparseMatrix, number, number":function(f,p,v){if(!Nt(p)||p<0||p>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(v<0||v>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var y=h(p,f,!1),g=d(f,y,v);return{L:g.L,U:g.U,p:g.pinv,q:y.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function G5(r,e){var t,n=e.length,i=[];if(r)for(t=0;t<n;t++)i[r[t]]=e[t];else for(t=0;t<n;t++)i[t]=e[t];return i}var $5="lusolve",jge=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Hge=ae($5,jge,r=>{var{typed:e,matrix:t,lup:n,slu:i,usolve:a,lsolve:o,DenseMatrix:s}=r,l=ry({DenseMatrix:s});return e($5,{"Array, Array | Matrix":function(h,d){h=t(h);var f=n(h),p=c(f.L,f.U,f.p,null,d);return p.valueOf()},"DenseMatrix, Array | Matrix":function(h,d){var f=n(h);return c(f.L,f.U,f.p,null,d)},"SparseMatrix, Array | Matrix":function(h,d){var f=n(h);return c(f.L,f.U,f.p,null,d)},"SparseMatrix, Array | Matrix, number, number":function(h,d,f,p){var v=i(h,f,p);return c(v.L,v.U,v.p,v.q,d)},"Object, Array | Matrix":function(h,d){return c(h.L,h.U,h.p,h.q,d)}});function u(h){if(Ft(h))return h;if(Sr(h))return t(h);throw new TypeError("Invalid Matrix LU decomposition")}function c(h,d,f,p,v){h=u(h),d=u(d),f&&(v=l(h,v,!0),v._data=G5(f,v._data));var y=o(h,v),g=a(d,y);return p&&(g._data=G5(p,g._data)),g}}),X5="polynomialRoot",Vge=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],qge=ae(X5,Vge,r=>{var{typed:e,isZero:t,equalScalar:n,add:i,subtract:a,multiply:o,divide:s,sqrt:l,unaryMinus:u,cbrt:c,typeOf:h,im:d,re:f}=r;return e(X5,{"number|Complex, ...number|Complex":(p,v)=>{for(var y=[p,...v];y.length>0&&t(y[y.length-1]);)y.pop();if(y.length<2)throw new RangeError("Polynomial [".concat(p,", ").concat(v,"] must have a non-zero non-constant coefficient"));switch(y.length){case 2:return[u(s(y[0],y[1]))];case 3:{var[g,w,b]=y,m=o(2,b),x=o(w,w),S=o(4,b,g);if(n(x,S))return[s(u(w),m)];var E=l(a(x,S));return[s(a(E,w),m),s(a(u(E),w),m)]}case 4:{var[A,T,C,D]=y,O=u(o(3,D)),U=o(C,C),L=o(3,D,T),F=i(o(2,C,C,C),o(27,D,D,A)),k=o(9,D,C,T);if(n(U,L)&&n(F,k))return[s(C,O)];var R=a(U,L),z=a(F,k),B=i(o(18,D,C,T,A),o(C,C,T,T)),X=i(o(4,C,C,C,A),o(4,D,T,T,T),o(27,D,D,A,A));if(n(B,X))return[s(a(o(4,D,C,T),i(o(9,D,D,A),o(C,C,C))),o(D,R)),s(a(o(9,D,A),o(C,T)),o(2,R))];var Z;n(U,L)?Z=z:Z=s(i(z,l(a(o(z,z),o(4,R,R,R)))),2);var Q=!0,J=c(Z,Q).toArray().map(ne=>s(i(C,ne,s(R,ne)),O));return J.map(ne=>h(ne)==="Complex"&&n(f(ne),f(ne)+d(ne))?f(ne):ne)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(y))}}})}),Wge="Help",Gge=["evaluate"],$ge=ae(Wge,Gge,r=>{var{evaluate:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var n=this.doc||{},i=`
`;if(n.name&&(i+="Name: "+n.name+`

`),n.category&&(i+="Category: "+n.category+`

`),n.description&&(i+=`Description:
    `+n.description+`

`),n.syntax&&(i+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){i+=`Examples:
`;for(var a=!1,o=e("config()"),s={config:h=>(a=!0,e("config(newConfig)",{newConfig:h}))},l=0;l<n.examples.length;l++){var u=n.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,s)}catch(h){c=h}c!==void 0&&!sN(c)&&(i+="        "+lr(c,{precision:14})+`
`)}i+=`
`,a&&e("config(originalConfig)",{originalConfig:o})}return n.mayThrow&&n.mayThrow.length&&(i+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(i+="See also: "+n.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var n=Gt(this.doc);return n.mathjs="Help",n},t.fromJSON=function(n){var i={};return Object.keys(n).filter(a=>a!=="mathjs").forEach(a=>{i[a]=n[a]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0}),Xge="Chain",Yge=["?on","math","typed"],Jge=ae(Xge,Yge,r=>{var{on:e,math:t,typed:n}=r;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");lN(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return lr(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function a(u,c){typeof c=="function"&&(i.prototype[u]=s(c))}function o(u,c){$x(i.prototype,u,function(){var h=c();if(typeof h=="function")return s(h)})}function s(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],h=0;h<arguments.length;h++)c[h+1]=arguments[h];if(n.isTypedFunction(u)){var d=n.resolve(u,c);if(d.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")a(u,c);else{var h=function(f){gt(u,f)&&l[f]===void 0&&o(f,()=>u[f])};for(var d in u)h(d)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(t),e&&e("import",function(u,c,h){h||o(u,c)}),i},{isClass:!0}),Y5={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},Zge={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},Kge={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Qge={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},e0e={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},t0e={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},r0e={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},n0e={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},i0e={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},a0e={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},o0e={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},J5={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},s0e={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},l0e={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},u0e={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},c0e={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},h0e={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},d0e={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},f0e={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},p0e={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},m0e={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},g0e={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},v0e={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},y0e={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},b0e={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},x0e={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},w0e={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},S0e={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},M0e={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},_0e={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},E0e={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},C0e={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},A0e={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},T0e={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},D0e={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},k0e={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},N0e={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},O0e={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},R0e={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},P0e={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},I0e={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},L0e={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},F0e={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},B0e={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},z0e={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},U0e={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},j0e={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},H0e={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},V0e={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},q0e={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},W0e={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},G0e={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},$0e={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},X0e={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},Y0e={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},J0e={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},Z0e={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},K0e={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},Q0e={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},eve={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},tve={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},rve={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},nve={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},ive={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},ave={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},ove={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax ≣ 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},sve={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},lve={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},uve={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},cve={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},hve={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},dve={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},fve={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},pve={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},mve={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},gve={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},vve={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},yve={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},bve={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},xve={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},wve={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},Sve={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},Mve={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},_ve={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},Eve={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},Cve={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},Ave={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},Tve={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},Dve={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},kve={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Nve={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Ove={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},Rve={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},Pve={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},Ive={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},Lve={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},Fve={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},Bve={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},zve={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},Uve={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},jve={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},Hve={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},Vve={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},qve={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},Wve={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},Gve={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},$ve={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},Xve={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},Yve={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},Jve={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},Zve={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},Kve={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},Qve={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},eye={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},tye={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},rye={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},nye={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},iye={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},aye={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},oye={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},sye={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},lye={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},uye={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},cye={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},hye={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},dye={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},fye={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},pye={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},mye={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore–Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},gye={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},vye={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},yye={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},bye={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},xye={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},wye={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},Sye={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},Mye={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},_ye={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},Eye={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},Cye={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},Aye={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},Tye={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},Dye={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},kye={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},Nye={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},Oye={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},Rye={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},Pye={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},Iye={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},Lye={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},Fye={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},Bye={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},zye={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},Uye={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},jye={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},Hye={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},Vye={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},qye={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},Wye={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},Gye={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},$ye={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},Xye={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},Yye={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},Jye={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},Zye={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},Kye={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},Qye={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},e1e={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},t1e={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},r1e={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},n1e={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},i1e={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},a1e={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},o1e={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},s1e={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},l1e={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},u1e={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},c1e={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},h1e={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},d1e={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},f1e={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},p1e={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},m1e={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},g1e={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},v1e={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},y1e={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},b1e={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemanns Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},x1e={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},w1e={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},S1e={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},M1e={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},_1e={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},E1e={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},C1e={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},A1e={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},T1e={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},D1e={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},k1e={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},N1e={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},O1e={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},R1e={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},P1e={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},I1e={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},L1e={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},F1e={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},B1e={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},z1e={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},U1e={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},j1e={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},H1e={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},V1e={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},q1e={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},W1e={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},G1e={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},$1e={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},X1e={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},Y1e={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},J1e={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},Z1e={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},K1e={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},Q1e={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},ebe={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},tbe={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},rbe={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},nbe={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},ibe={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},abe={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},obe={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},sbe={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},lbe={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},ube={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},cbe={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},hbe={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},dbe={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},fbe={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},pbe={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},mbe={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},gbe={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},vbe={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","fraction","bignumber","string","format"]},ybe={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},bbe={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},xbe={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},wbe={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},Sbe={bignumber:d0e,boolean:f0e,complex:p0e,createUnit:m0e,fraction:g0e,index:v0e,matrix:y0e,number:b0e,sparse:x0e,splitUnit:w0e,string:S0e,unit:M0e,e:Y5,E:Y5,false:Zge,i:Kge,Infinity:Qge,LN2:t0e,LN10:e0e,LOG2E:n0e,LOG10E:r0e,NaN:i0e,null:a0e,pi:J5,PI:J5,phi:o0e,SQRT1_2:s0e,SQRT2:l0e,tau:u0e,true:c0e,version:h0e,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:A0e,lsolve:D0e,lsolveAll:k0e,lup:N0e,lusolve:O0e,leafCount:T0e,polynomialRoot:R0e,resolve:L0e,simplify:F0e,simplifyConstant:B0e,simplifyCore:z0e,symbolicEqual:j0e,rationalize:I0e,slu:U0e,usolve:H0e,usolveAll:V0e,qr:P0e,abs:q0e,add:W0e,cbrt:G0e,ceil:$0e,cube:X0e,divide:Y0e,dotDivide:J0e,dotMultiply:Z0e,dotPow:K0e,exp:Q0e,expm:eve,expm1:tve,fix:rve,floor:nve,gcd:ive,hypot:ave,lcm:sve,log:lve,log2:hve,log1p:cve,log10:uve,mod:dve,multiply:fve,norm:pve,nthRoot:mve,nthRoots:gve,pow:vve,round:yve,sign:bve,sqrt:xve,sqrtm:wve,square:Eve,subtract:Cve,unaryMinus:Ave,unaryPlus:Tve,xgcd:Dve,invmod:ove,bitAnd:kve,bitNot:Nve,bitOr:Ove,bitXor:Rve,leftShift:Pve,rightArithShift:Ive,rightLogShift:Lve,bellNumbers:Fve,catalan:Bve,composition:zve,stirlingS2:Uve,config:_0e,import:E0e,typed:C0e,arg:jve,conj:Hve,re:qve,im:Vve,evaluate:Wve,help:Gve,distance:$ve,intersect:Xve,and:Yve,not:Jve,or:Zve,xor:Kve,concat:eye,count:tye,cross:rye,column:Qve,ctranspose:nye,det:iye,diag:aye,diff:oye,dot:sye,getMatrixDataType:dye,identity:fye,filter:uye,flatten:cye,forEach:hye,inv:pye,pinv:mye,eigs:lye,kron:gye,matrixFromFunction:bye,matrixFromRows:xye,matrixFromColumns:yye,map:vye,ones:wye,partitionSelect:Sye,range:Mye,resize:Eye,reshape:_ye,rotate:Cye,rotationMatrix:Aye,row:Tye,size:Dye,sort:kye,squeeze:Nye,subset:Oye,trace:Rye,transpose:Pye,zeros:Iye,fft:Lye,ifft:Fye,sylvester:Sve,schur:Mve,lyap:_ve,solveODE:wbe,combinations:Bye,combinationsWithRep:zye,factorial:Uye,gamma:jye,kldivergence:Vye,lgamma:Hye,multinomial:qye,permutations:Wye,pickRandom:Gye,random:$ye,randomInt:Xye,compare:Yye,compareNatural:Jye,compareText:Zye,deepEqual:Kye,equal:Qye,equalText:e1e,larger:t1e,largerEq:r1e,smaller:n1e,smallerEq:i1e,unequal:a1e,setCartesian:o1e,setDifference:s1e,setDistinct:l1e,setIntersect:u1e,setIsSubset:c1e,setMultiplicity:h1e,setPowerset:d1e,setSize:f1e,setSymDifference:p1e,setUnion:m1e,zpk2tf:g1e,freqz:v1e,erf:y1e,zeta:b1e,cumsum:D1e,mad:x1e,max:w1e,mean:S1e,median:M1e,min:_1e,mode:E1e,prod:C1e,quantileSeq:A1e,std:T1e,sum:k1e,variance:N1e,corr:O1e,acos:R1e,acosh:P1e,acot:I1e,acoth:L1e,acsc:F1e,acsch:B1e,asec:z1e,asech:U1e,asin:j1e,asinh:H1e,atan:V1e,atanh:W1e,atan2:q1e,cos:G1e,cosh:$1e,cot:X1e,coth:Y1e,csc:J1e,csch:Z1e,sec:K1e,sech:Q1e,sin:ebe,sinh:tbe,tan:rbe,tanh:nbe,to:ibe,clone:obe,format:sbe,bin:abe,oct:ybe,hex:ube,isNaN:hbe,isInteger:cbe,isNegative:dbe,isNumeric:fbe,hasNumericValue:lbe,isPositive:pbe,isPrime:mbe,isZero:gbe,print:bbe,typeOf:xbe,numeric:vbe},Z5="help",Mbe=["typed","mathWithTransform","Help"],_be=ae(Z5,Mbe,r=>{var{typed:e,mathWithTransform:t,Help:n}=r;return e(Z5,{any:function(i){var a,o=i;if(typeof i!="string"){for(a in t)if(gt(t,a)&&i===t[a]){o=a;break}}var s=Ma(Sbe,o);if(!s){var l=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+l+'"')}return new n(s)}})}),K5="chain",Ebe=["typed","Chain"],Cbe=ae(K5,Ebe,r=>{var{typed:e,Chain:t}=r;return e(K5,{"":function(){return new t},any:function(n){return new t(n)}})}),Q5="det",Abe=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Tbe=ae(Q5,Abe,r=>{var{typed:e,matrix:t,subtractScalar:n,multiply:i,divideScalar:a,isZero:o,unaryMinus:s}=r;return e(Q5,{any:function(u){return Gt(u)},"Array | Matrix":function(u){var c;switch(Ft(u)?c=u.size():Array.isArray(u)?(u=t(u),c=u.size()):c=[],c.length){case 0:return Gt(u);case 1:if(c[0]===1)return Gt(u.valueOf()[0]);if(c[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+lr(c)+")");case 2:{var h=c[0],d=c[1];if(h===d)return l(u.clone().valueOf(),h);if(d===0)return 1;throw new RangeError("Matrix must be square (size: "+lr(c)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+lr(c)+")")}}});function l(u,c,h){if(c===1)return Gt(u[0][0]);if(c===2)return n(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var d=!1,f=new Array(c).fill(0).map((E,A)=>A),p=0;p<c;p++){var v=f[p];if(o(u[v][p])){var y=void 0;for(y=p+1;y<c;y++)if(!o(u[f[y]][p])){v=f[y],f[y]=f[p],f[p]=v,d=!d;break}if(y===c)return u[v][p]}for(var g=u[v][p],w=p===0?1:u[f[p-1]][p-1],b=p+1;b<c;b++)for(var m=f[b],x=p+1;x<c;x++)u[m][x]=a(n(i(u[m][x],g),i(u[m][p],u[v][x])),w)}var S=u[f[c-1]][c-1];return d?s(S):S}}),eB="inv",Dbe=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],kbe=ae(eB,Dbe,r=>{var{typed:e,matrix:t,divideScalar:n,addScalar:i,multiply:a,unaryMinus:o,det:s,identity:l,abs:u}=r;return e(eB,{"Array | Matrix":function(h){var d=Ft(h)?h.size():rr(h);switch(d.length){case 1:if(d[0]===1)return Ft(h)?t([n(1,h.valueOf()[0])]):[n(1,h[0])];throw new RangeError("Matrix must be square (size: "+lr(d)+")");case 2:{var f=d[0],p=d[1];if(f===p)return Ft(h)?t(c(h.valueOf(),f,p),h.storage()):c(h,f,p);throw new RangeError("Matrix must be square (size: "+lr(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+lr(d)+")")}},any:function(h){return n(1,h)}});function c(h,d,f){var p,v,y,g,w;if(d===1){if(g=h[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,g)]]}else if(d===2){var b=s(h);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(h[1][1],b),n(o(h[0][1]),b)],[n(o(h[1][0]),b),n(h[0][0],b)]]}else{var m=h.concat();for(p=0;p<d;p++)m[p]=m[p].concat();for(var x=l(d).valueOf(),S=0;S<f;S++){var E=u(m[S][S]),A=S;for(p=S+1;p<d;)u(m[p][S])>E&&(E=u(m[p][S]),A=p),p++;if(E===0)throw Error("Cannot calculate inverse, determinant is zero");p=A,p!==S&&(w=m[S],m[S]=m[p],m[p]=w,w=x[S],x[S]=x[p],x[p]=w);var T=m[S],C=x[S];for(p=0;p<d;p++){var D=m[p],O=x[p];if(p!==S){if(D[S]!==0){for(y=n(o(D[S]),T[S]),v=S;v<f;v++)D[v]=i(D[v],a(y,T[v]));for(v=0;v<f;v++)O[v]=i(O[v],a(y,C[v]))}}else{for(y=T[S],v=S;v<f;v++)D[v]=n(D[v],y);for(v=0;v<f;v++)O[v]=n(O[v],y)}}}return x}}}),tB="pinv",Nbe=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],Obe=ae(tB,Nbe,r=>{var{typed:e,matrix:t,inv:n,deepEqual:i,equal:a,dotDivide:o,dot:s,ctranspose:l,divideScalar:u,multiply:c,add:h,Complex:d}=r;return e(tB,{"Array | Matrix":function(w){var b=Ft(w)?w.size():rr(w);switch(b.length){case 1:return g(w)?l(w):b[0]===1?n(w):o(l(w),s(w,w));case 2:{if(g(w))return l(w);var m=b[0],x=b[1];if(m===x)try{return n(w)}catch(S){if(!(S instanceof Error&&S.message.match(/Cannot calculate inverse, determinant is zero/)))throw S}return Ft(w)?t(f(w.valueOf(),m,x),w.storage()):f(w,m,x)}default:throw new RangeError("Matrix must be two dimensional (size: "+lr(b)+")")}},any:function(w){return a(w,0)?Gt(w):u(1,w)}});function f(w,b,m){var{C:x,F:S}=v(w,b,m),E=c(n(c(l(x),x)),l(x)),A=c(l(S),n(c(S,l(S))));return c(A,E)}function p(w,b,m){for(var x=Gt(w),S=0,E=0;E<b;E++){if(m<=S)return x;for(var A=E;y(x[A][S]);)if(A++,b===A&&(A=E,S++,m===S))return x;[x[A],x[E]]=[x[E],x[A]];for(var T=x[E][S],C=0;C<m;C++)x[E][C]=o(x[E][C],T);for(var D=0;D<b;D++)if(D!==E){T=x[D][S];for(var O=0;O<m;O++)x[D][O]=h(x[D][O],c(-1,c(T,x[E][O])))}S++}return x}function v(w,b,m){var x=p(w,b,m),S=w.map((A,T)=>A.filter((C,D)=>D<b&&!y(s(x[D],x[D])))),E=x.filter((A,T)=>!y(s(x[T],x[T])));return{C:S,F:E}}function y(w){return a(h(w,d(1,1)),h(0,d(1,1)))}function g(w){return i(h(w,d(1,1)),h(c(w,0),d(1,1)))}});function Rbe(r){var{addScalar:e,subtract:t,flatten:n,multiply:i,multiplyScalar:a,divideScalar:o,sqrt:s,abs:l,bignumber:u,diag:c,size:h,reshape:d,inv:f,qr:p,usolve:v,usolveAll:y,equal:g,complex:w,larger:b,smaller:m,matrixFromColumns:x,dot:S}=r;function E(Q,J,ne,fe){var se=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,ye=A(Q,J,ne,fe,se);T(Q,J,ne,fe,se,ye);var{values:De,C:pe}=C(Q,J,ne,fe,se);if(se){var Te=D(Q,J,pe,ye,De,ne,fe);return{values:De,eigenvectors:Te}}return{values:De}}function A(Q,J,ne,fe,se){var ye=fe==="BigNumber",De=fe==="Complex",pe=ye?u(0):0,Te=ye?u(1):De?w(1):1,be=ye?u(1):1,re=ye?u(10):2,Re=a(re,re),ze;se&&(ze=Array(J).fill(Te));for(var K=!1;!K;){K=!0;for(var ie=0;ie<J;ie++){for(var _e=pe,oe=pe,G=0;G<J;G++)ie!==G&&(_e=e(_e,l(Q[G][ie])),oe=e(oe,l(Q[ie][G])));if(!g(_e,0)&&!g(oe,0)){for(var W=be,ce=_e,Ce=o(oe,re),$=a(oe,re);m(ce,Ce);)ce=a(ce,Re),W=a(W,re);for(;b(ce,$);)ce=o(ce,Re),W=o(W,re);var ee=m(o(e(ce,oe),W),a(e(_e,oe),.95));if(ee){K=!1;for(var ge=o(1,W),xe=0;xe<J;xe++)ie!==xe&&(Q[ie][xe]=a(Q[ie][xe],ge),Q[xe][ie]=a(Q[xe][ie],W));se&&(ze[ie]=a(ze[ie],ge))}}}}return se?c(ze):null}function T(Q,J,ne,fe,se,ye){var De=fe==="BigNumber",pe=fe==="Complex",Te=De?u(0):pe?w(0):0;De&&(ne=u(ne));for(var be=0;be<J-2;be++){for(var re=0,Re=Te,ze=be+1;ze<J;ze++){var K=Q[ze][be];m(l(Re),l(K))&&(Re=K,re=ze)}if(!m(l(Re),ne)){if(re!==be+1){var ie=Q[re];Q[re]=Q[be+1],Q[be+1]=ie;for(var _e=0;_e<J;_e++){var oe=Q[_e][re];Q[_e][re]=Q[_e][be+1],Q[_e][be+1]=oe}if(se){var G=ye[re];ye[re]=ye[be+1],ye[be+1]=G}}for(var W=be+2;W<J;W++){var ce=o(Q[W][be],Re);if(ce!==0){for(var Ce=0;Ce<J;Ce++)Q[W][Ce]=t(Q[W][Ce],a(ce,Q[be+1][Ce]));for(var $=0;$<J;$++)Q[$][be+1]=e(Q[$][be+1],a(ce,Q[$][W]));if(se)for(var ee=0;ee<J;ee++)ye[W][ee]=t(ye[W][ee],a(ce,ye[be+1][ee]))}}}}return ye}function C(Q,J,ne,fe,se){var ye=fe==="BigNumber",De=fe==="Complex",pe=ye?u(1):De?w(1):1;ye&&(ne=u(ne));for(var Te=Gt(Q),be=[],re=J,Re=[],ze=se?c(Array(J).fill(pe)):void 0,K=se?c(Array(re).fill(pe)):void 0,ie=0;ie<=100;){ie+=1;for(var _e=Te[re-1][re-1],oe=0;oe<re;oe++)Te[oe][oe]=t(Te[oe][oe],_e);var{Q:G,R:W}=p(Te);Te=i(W,G);for(var ce=0;ce<re;ce++)Te[ce][ce]=e(Te[ce][ce],_e);if(se&&(K=i(K,G)),re===1||m(l(Te[re-1][re-2]),ne)){ie=0,be.push(Te[re-1][re-1]),se&&(Re.unshift([[1]]),L(K,J),ze=i(ze,K),re>1&&(K=c(Array(re-1).fill(pe)))),re-=1,Te.pop();for(var Ce=0;Ce<re;Ce++)Te[Ce].pop()}else if(re===2||m(l(Te[re-2][re-3]),ne)){ie=0;var $=O(Te[re-2][re-2],Te[re-2][re-1],Te[re-1][re-2],Te[re-1][re-1]);be.push(...$),se&&(Re.unshift(U(Te[re-2][re-2],Te[re-2][re-1],Te[re-1][re-2],Te[re-1][re-1],$[0],$[1],ne,fe)),L(K,J),ze=i(ze,K),re>2&&(K=c(Array(re-2).fill(pe)))),re-=2,Te.pop(),Te.pop();for(var ee=0;ee<re;ee++)Te[ee].pop(),Te[ee].pop()}if(re===0)break}if(be.sort((Ne,Fe)=>+t(l(Ne),l(Fe))),ie>100){var ge=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+be.join(", "));throw ge.values=be,ge.vectors=[],ge}var xe=se?i(ze,F(Re,J)):void 0;return{values:be,C:xe}}function D(Q,J,ne,fe,se,ye,De){var pe=f(ne),Te=i(pe,Q,ne),be=De==="BigNumber",re=De==="Complex",Re=be?u(0):re?w(0):0,ze=be?u(1):re?w(1):1,K=[],ie=[];for(var _e of se){var oe=k(K,_e,g);oe===-1?(K.push(_e),ie.push(1)):ie[oe]+=1}for(var G=[],W=K.length,ce=Array(J).fill(Re),Ce=c(Array(J).fill(ze)),$=function(){var ge=K[ee],xe=t(Te,i(ge,Ce)),Ne=y(xe,ce);for(Ne.shift();Ne.length<ie[ee];){var Fe=R(xe,J,Ne,ye,De);if(Fe===null)break;Ne.push(Fe)}var We=i(f(fe),ne);Ne=Ne.map(ke=>i(We,ke)),G.push(...Ne.map(ke=>({value:ge,vector:n(ke)})))},ee=0;ee<W;ee++)$();return G}function O(Q,J,ne,fe){var se=e(Q,fe),ye=t(a(Q,fe),a(J,ne)),De=a(se,.5),pe=a(s(t(a(se,se),a(4,ye))),.5);return[e(De,pe),t(De,pe)]}function U(Q,J,ne,fe,se,ye,De,pe){var Te=pe==="BigNumber",be=pe==="Complex",re=Te?u(0):be?w(0):0,Re=Te?u(1):be?w(1):1;if(m(l(ne),De))return[[Re,re],[re,Re]];if(b(l(t(se,ye)),De))return[[t(se,fe),t(ye,fe)],[ne,ne]];var ze=t(Q,se),K=t(fe,se);return m(l(J),De)&&m(l(K),De)?[[ze,Re],[ne,re]]:[[J,re],[K,Re]]}function L(Q,J){for(var ne=0;ne<Q.length;ne++)Q[ne].push(...Array(J-Q[ne].length).fill(0));for(var fe=Q.length;fe<J;fe++)Q.push(Array(J).fill(0)),Q[fe][fe]=1;return Q}function F(Q,J){for(var ne=[],fe=0;fe<J;fe++)ne[fe]=Array(J).fill(0);var se=0;for(var ye of Q){for(var De=ye.length,pe=0;pe<De;pe++)for(var Te=0;Te<De;Te++)ne[se+pe][se+Te]=ye[pe][Te];se+=De}return ne}function k(Q,J,ne){for(var fe=0;fe<Q.length;fe++)if(ne(Q[fe],J))return fe;return-1}function R(Q,J,ne,fe,se){for(var ye=se==="BigNumber"?u(1e3):1e3,De,pe=0;pe<5;++pe){De=z(J,ne,se);try{De=v(Q,De)}catch{continue}if(b(X(De),ye))break}if(pe>=5)return null;for(pe=0;;){var Te=v(Q,De);if(m(X(B(De,[Te])),fe))break;if(++pe>=10)return null;De=Z(Te)}return De}function z(Q,J,ne){var fe=ne==="BigNumber",se=ne==="Complex",ye=Array(Q).fill(0).map(De=>2*Math.random()-1);return fe&&(ye=ye.map(De=>u(De))),se&&(ye=ye.map(De=>w(De))),ye=B(ye,J),Z(ye,ne)}function B(Q,J){var ne=h(Q);for(var fe of J)fe=d(fe,ne),Q=t(Q,i(o(S(fe,Q),S(fe,fe)),fe));return Q}function X(Q){return l(s(S(Q,Q)))}function Z(Q,J){var ne=J==="BigNumber",fe=J==="Complex",se=ne?u(1):fe?w(1):1;return i(o(se,X(Q)),Q)}return E}function Pbe(r){var{config:e,addScalar:t,subtract:n,abs:i,atan:a,cos:o,sin:s,multiplyScalar:l,inv:u,bignumber:c,multiply:h,add:d}=r;function f(T,C){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.epsilon,O=arguments.length>3?arguments[3]:void 0,U=arguments.length>4?arguments[4]:void 0;if(O==="number")return p(T,D,U);if(O==="BigNumber")return v(T,D,U);throw TypeError("Unsupported data type: "+O)}function p(T,C,D){var O=T.length,U=Math.abs(C/O),L,F;if(D){F=new Array(O);for(var k=0;k<O;k++)F[k]=Array(O).fill(0),F[k][k]=1}for(var R=S(T);Math.abs(R[1])>=Math.abs(U);){var z=R[0][0],B=R[0][1];L=y(T[z][z],T[B][B],T[z][B]),T=x(T,L,z,B),D&&(F=w(F,L,z,B)),R=S(T)}for(var X=Array(O).fill(0),Z=0;Z<O;Z++)X[Z]=T[Z][Z];return A(Gt(X),F,D)}function v(T,C,D){var O=T.length,U=i(C/O),L,F;if(D){F=new Array(O);for(var k=0;k<O;k++)F[k]=Array(O).fill(0),F[k][k]=1}for(var R=E(T);i(R[1])>=i(U);){var z=R[0][0],B=R[0][1];L=g(T[z][z],T[B][B],T[z][B]),T=m(T,L,z,B),D&&(F=b(F,L,z,B)),R=E(T)}for(var X=Array(O).fill(0),Z=0;Z<O;Z++)X[Z]=T[Z][Z];return A(Gt(X),F,D)}function y(T,C,D){var O=C-T;return Math.abs(O)<=e.epsilon?Math.PI/4:.5*Math.atan(2*D/(C-T))}function g(T,C,D){var O=n(C,T);return i(O)<=e.epsilon?c(-1).acos().div(4):l(.5,a(h(2,D,u(O))))}function w(T,C,D,O){for(var U=T.length,L=Math.cos(C),F=Math.sin(C),k=Array(U).fill(0),R=Array(U).fill(0),z=0;z<U;z++)k[z]=L*T[z][D]-F*T[z][O],R[z]=F*T[z][D]+L*T[z][O];for(var B=0;B<U;B++)T[B][D]=k[B],T[B][O]=R[B];return T}function b(T,C,D,O){for(var U=T.length,L=o(C),F=s(C),k=Array(U).fill(c(0)),R=Array(U).fill(c(0)),z=0;z<U;z++)k[z]=n(l(L,T[z][D]),l(F,T[z][O])),R[z]=t(l(F,T[z][D]),l(L,T[z][O]));for(var B=0;B<U;B++)T[B][D]=k[B],T[B][O]=R[B];return T}function m(T,C,D,O){for(var U=T.length,L=c(o(C)),F=c(s(C)),k=l(L,L),R=l(F,F),z=Array(U).fill(c(0)),B=Array(U).fill(c(0)),X=h(c(2),L,F,T[D][O]),Z=t(n(l(k,T[D][D]),X),l(R,T[O][O])),Q=d(l(R,T[D][D]),X,l(k,T[O][O])),J=0;J<U;J++)z[J]=n(l(L,T[D][J]),l(F,T[O][J])),B[J]=t(l(F,T[D][J]),l(L,T[O][J]));T[D][D]=Z,T[O][O]=Q,T[D][O]=c(0),T[O][D]=c(0);for(var ne=0;ne<U;ne++)ne!==D&&ne!==O&&(T[D][ne]=z[ne],T[ne][D]=z[ne],T[O][ne]=B[ne],T[ne][O]=B[ne]);return T}function x(T,C,D,O){for(var U=T.length,L=Math.cos(C),F=Math.sin(C),k=L*L,R=F*F,z=Array(U).fill(0),B=Array(U).fill(0),X=k*T[D][D]-2*L*F*T[D][O]+R*T[O][O],Z=R*T[D][D]+2*L*F*T[D][O]+k*T[O][O],Q=0;Q<U;Q++)z[Q]=L*T[D][Q]-F*T[O][Q],B[Q]=F*T[D][Q]+L*T[O][Q];T[D][D]=X,T[O][O]=Z,T[D][O]=0,T[O][D]=0;for(var J=0;J<U;J++)J!==D&&J!==O&&(T[D][J]=z[J],T[J][D]=z[J],T[O][J]=B[J],T[J][O]=B[J]);return T}function S(T){for(var C=T.length,D=0,O=[0,1],U=0;U<C;U++)for(var L=U+1;L<C;L++)Math.abs(D)<Math.abs(T[U][L])&&(D=Math.abs(T[U][L]),O=[U,L]);return[O,D]}function E(T){for(var C=T.length,D=0,O=[0,1],U=0;U<C;U++)for(var L=U+1;L<C;L++)i(D)<i(T[U][L])&&(D=i(T[U][L]),O=[U,L]);return[O,D]}function A(T,C,D){var O=T.length,U=Array(O),L;if(D){L=Array(O);for(var F=0;F<O;F++)L[F]=Array(O)}for(var k=0;k<O;k++){for(var R=0,z=T[0],B=0;B<T.length;B++)i(T[B])<i(z)&&(R=B,z=T[R]);if(U[k]=T.splice(R,1)[0],D)for(var X=0;X<O;X++)L[k][X]=C[X][R],C[X].splice(R,1)}if(!D)return{values:U};var Z=L.map((Q,J)=>({value:U[J],vector:Q}));return{values:U,eigenvectors:Z}}return f}var Ibe="eigs",Lbe=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],Fbe=ae(Ibe,Lbe,r=>{var{config:e,typed:t,matrix:n,addScalar:i,subtract:a,equal:o,abs:s,atan:l,cos:u,sin:c,multiplyScalar:h,divideScalar:d,inv:f,bignumber:p,multiply:v,add:y,larger:g,column:w,flatten:b,number:m,complex:x,sqrt:S,diag:E,size:A,reshape:T,qr:C,usolve:D,usolveAll:O,im:U,re:L,smaller:F,matrixFromColumns:k,dot:R}=r,z=Pbe({config:e,addScalar:i,subtract:a,column:w,flatten:b,equal:o,abs:s,atan:l,cos:u,sin:c,multiplyScalar:h,inv:f,bignumber:p,complex:x,multiply:v,add:y}),B=Rbe({config:e,addScalar:i,subtract:a,multiply:v,multiplyScalar:h,flatten:b,divideScalar:d,sqrt:S,abs:s,bignumber:p,diag:E,size:A,reshape:T,qr:C,inv:f,usolve:D,usolveAll:O,equal:o,complex:x,larger:g,smaller:F,matrixFromColumns:k,dot:R});return t("eigs",{Array:function(se){return X(n(se))},"Array, number|BigNumber":function(se,ye){return X(n(se),{precision:ye})},"Array, Object"(se,ye){return X(n(se),ye)},Matrix:function(se){return X(se,{matricize:!0})},"Matrix, number|BigNumber":function(se,ye){return X(se,{precision:ye,matricize:!0})},"Matrix, Object":function(se,ye){var De={matricize:!0};return lt(De,ye),X(se,De)}});function X(se){var ye,De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe="eigenvectors"in De?De.eigenvectors:!0,Te=(ye=De.precision)!==null&&ye!==void 0?ye:e.epsilon,be=Z(se,Te,pe);return De.matricize&&(be.values=n(be.values),pe&&(be.eigenvectors=be.eigenvectors.map(re=>{var{value:Re,vector:ze}=re;return{value:Re,vector:n(ze)}}))),pe&&Object.defineProperty(be,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),be}function Z(se,ye,De){var pe=se.toArray(),Te=se.size();if(Te.length!==2||Te[0]!==Te[1])throw new RangeError("Matrix must be square (size: ".concat(lr(Te),")"));var be=Te[0];if(J(pe,be,ye)&&(ne(pe,be),Q(pe,be,ye))){var re=fe(se,pe,be);return z(pe,be,ye,re,De)}var Re=fe(se,pe,be);return B(pe,be,ye,Re,De)}function Q(se,ye,De){for(var pe=0;pe<ye;pe++)for(var Te=pe;Te<ye;Te++)if(g(p(s(a(se[pe][Te],se[Te][pe]))),De))return!1;return!0}function J(se,ye,De){for(var pe=0;pe<ye;pe++)for(var Te=0;Te<ye;Te++)if(g(p(s(U(se[pe][Te]))),De))return!1;return!0}function ne(se,ye){for(var De=0;De<ye;De++)for(var pe=0;pe<ye;pe++)se[De][pe]=L(se[De][pe])}function fe(se,ye,De){var pe=se.datatype();if(pe==="number"||pe==="BigNumber"||pe==="Complex")return pe;for(var Te=!1,be=!1,re=!1,Re=0;Re<De;Re++)for(var ze=0;ze<De;ze++){var K=ye[Re][ze];if(tr(K)||Id(K))Te=!0;else if(Kt(K))be=!0;else if(_s(K))re=!0;else throw TypeError("Unsupported type in Matrix: "+Br(K))}if(be&&re&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),re){for(var ie=0;ie<De;ie++)for(var _e=0;_e<De;_e++)ye[ie][_e]=x(ye[ie][_e]);return"Complex"}if(be){for(var oe=0;oe<De;oe++)for(var G=0;G<De;G++)ye[oe][G]=p(ye[oe][G]);return"BigNumber"}if(Te){for(var W=0;W<De;W++)for(var ce=0;ce<De;ce++)ye[W][ce]=m(ye[W][ce]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),rB="expm",Bbe=["typed","abs","add","identity","inv","multiply"],zbe=ae(rB,Bbe,r=>{var{typed:e,abs:t,add:n,identity:i,inv:a,multiply:o}=r;return e(rB,{Matrix:function(c){var h=c.size();if(h.length!==2||h[0]!==h[1])throw new RangeError("Matrix must be square (size: "+lr(h)+")");for(var d=h[0],f=1e-15,p=s(c),v=l(p,f),y=v.q,g=v.j,w=o(c,Math.pow(2,-g)),b=i(d),m=i(d),x=1,S=w,E=-1,A=1;A<=y;A++)A>1&&(S=o(S,w),E=-E),x=x*(y-A+1)/((2*y-A+1)*A),b=n(b,o(x,S)),m=n(m,o(x*E,S));for(var T=o(a(m),b),C=0;C<g;C++)T=o(T,T);return gc(c)?c.createSparseMatrix(T):T}});function s(c){for(var h=c.size()[0],d=0,f=0;f<h;f++){for(var p=0,v=0;v<h;v++)p+=t(c.get([f,v]));d=Math.max(p,d)}return d}function l(c,h){for(var d=30,f=0;f<d;f++)for(var p=0;p<=f;p++){var v=f-p;if(u(c,p,v)<h)return{q:p,j:v}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,h,d){for(var f=1,p=2;p<=h;p++)f*=p;for(var v=f,y=h+1;y<=2*h;y++)v*=y;var g=v*(2*h+1);return 8*Math.pow(c/Math.pow(2,d),2*h)*f*f/(v*g)}}),nB="sqrtm",Ube=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],jbe=ae(nB,Ube,r=>{var{typed:e,abs:t,add:n,multiply:i,map:a,sqrt:o,subtract:s,inv:l,size:u,max:c,identity:h}=r,d=1e3,f=1e-6;function p(v){var y,g=0,w=v,b=h(u(v));do{var m=w;if(w=i(.5,n(m,l(b))),b=i(.5,n(b,l(m))),y=c(t(s(w,m))),y>f&&++g>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(y>f);return w}return e(nB,{"Array | Matrix":function(v){var y=Ft(v)?v.size():rr(v);switch(y.length){case 1:if(y[0]===1)return a(v,o);throw new RangeError("Matrix must be square (size: "+lr(y)+")");case 2:{var g=y[0],w=y[1];if(g===w)return p(v);throw new RangeError("Matrix must be square (size: "+lr(y)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+lr(y)+")")}}})}),iB="sylvester",Hbe=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],Vbe=ae(iB,Hbe,r=>{var{typed:e,schur:t,matrixFromColumns:n,matrix:i,multiply:a,range:o,concat:s,transpose:l,index:u,subset:c,add:h,subtract:d,identity:f,lusolve:p,abs:v}=r;return e(iB,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(g,w,b){return y(i(g),w,b)},"Array, Array, Matrix":function(g,w,b){return y(i(g),i(w),b)},"Array, Matrix, Array":function(g,w,b){return y(i(g),w,i(b))},"Matrix, Array, Matrix":function(g,w,b){return y(g,i(w),b)},"Matrix, Array, Array":function(g,w,b){return y(g,i(w),i(b))},"Matrix, Matrix, Array":function(g,w,b){return y(g,w,i(b))},"Array, Array, Array":function(g,w,b){return y(i(g),i(w),i(b)).toArray()}});function y(g,w,b){for(var m=w.size()[0],x=g.size()[0],S=t(g),E=S.T,A=S.U,T=t(a(-1,w)),C=T.T,D=T.U,O=a(a(l(A),b),D),U=o(0,x),L=[],F=(re,Re)=>s(re,Re,1),k=(re,Re)=>s(re,Re,0),R=0;R<m;R++)if(R<m-1&&v(c(C,u(R+1,R)))>1e-5){for(var z=k(c(O,u(U,R)),c(O,u(U,R+1))),B=0;B<R;B++)z=h(z,k(a(L[B],c(C,u(B,R))),a(L[B],c(C,u(B,R+1)))));var X=a(f(x),a(-1,c(C,u(R,R)))),Z=a(f(x),a(-1,c(C,u(R+1,R)))),Q=a(f(x),a(-1,c(C,u(R,R+1)))),J=a(f(x),a(-1,c(C,u(R+1,R+1)))),ne=k(F(h(E,X),Z),F(Q,h(E,J))),fe=p(ne,z);L[R]=fe.subset(u(o(0,x),0)),L[R+1]=fe.subset(u(o(x,2*x),0)),R++}else{for(var se=c(O,u(U,R)),ye=0;ye<R;ye++)se=h(se,a(L[ye],c(C,u(ye,R))));var De=c(C,u(R,R)),pe=d(E,a(De,f(x)));L[R]=p(pe,se)}var Te=i(n(...L)),be=a(A,a(Te,l(D)));return be}}),aB="schur",qbe=["typed","matrix","identity","multiply","qr","norm","subtract"],Wbe=ae(aB,qbe,r=>{var{typed:e,matrix:t,identity:n,multiply:i,qr:a,norm:o,subtract:s}=r;return e(aB,{Array:function(u){var c=l(t(u));return{U:c.U.valueOf(),T:c.T.valueOf()}},Matrix:function(u){return l(u)}});function l(u){var c=u.size()[0],h=u,d=n(c),f=0,p;do{p=h;var v=a(h),y=v.Q,g=v.R;if(h=i(g,y),d=i(d,y),f++>100)break}while(o(s(h,p))>1e-4);return{U:d,T:h}}}),oB="lyap",Gbe=["typed","matrix","sylvester","multiply","transpose"],$be=ae(oB,Gbe,r=>{var{typed:e,matrix:t,sylvester:n,multiply:i,transpose:a}=r;return e(oB,{"Matrix, Matrix":function(o,s){return n(o,a(o),i(-1,s))},"Array, Matrix":function(o,s){return n(t(o),a(t(o)),i(-1,s))},"Matrix, Array":function(o,s){return n(o,a(t(o)),t(i(-1,s)))},"Array, Array":function(o,s){return n(t(o),a(t(o)),t(i(-1,s))).toArray()}})}),Xbe="divide",Ybe=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Jbe=ae(Xbe,Ybe,r=>{var{typed:e,matrix:t,multiply:n,equalScalar:i,divideScalar:a,inv:o}=r,s=Ii({typed:e,equalScalar:i}),l=Os({typed:e});return e("divide",kV({"Array | Matrix, Array | Matrix":function(u,c){return n(u,o(c))},"DenseMatrix, any":function(u,c){return l(u,c,a,!1)},"SparseMatrix, any":function(u,c){return s(u,c,a,!1)},"Array, any":function(u,c){return l(t(u),c,a,!1).valueOf()},"any, Array | Matrix":function(u,c){return n(u,o(c))}},a.signatures))}),sB="distance",Zbe=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],Kbe=ae(sB,Zbe,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:a,deepEqual:o,sqrt:s,abs:l}=r;return e(sB,{"Array, Array, Array":function(m,x,S){if(m.length===2&&x.length===2&&S.length===2){if(!c(m))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(o(x,S))throw new TypeError("LinePoint1 should not be same with LinePoint2");var E=n(S[1],x[1]),A=n(x[0],S[0]),T=n(i(S[0],x[1]),i(x[0],S[1]));return y(m[0],m[1],E,A,T)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(m,x,S){if(Object.keys(m).length===2&&Object.keys(x).length===2&&Object.keys(S).length===2){if(!c(m))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(S))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(o(p(x),p(S)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in m&&"pointY"in m&&"lineOnePtX"in x&&"lineOnePtY"in x&&"lineTwoPtX"in S&&"lineTwoPtY"in S){var E=n(S.lineTwoPtY,x.lineOnePtY),A=n(x.lineOnePtX,S.lineTwoPtX),T=n(i(S.lineTwoPtX,x.lineOnePtY),i(x.lineOnePtX,S.lineTwoPtY));return y(m.pointX,m.pointY,E,A,T)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(m,x){if(m.length===2&&x.length===3){if(!c(m))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(m[0],m[1],x[0],x[1],x[2])}else if(m.length===3&&x.length===6){if(!h(m))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!f(x))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return g(m[0],m[1],m[2],x[0],x[1],x[2],x[3],x[4],x[5])}else if(m.length===x.length&&m.length>0){if(!d(m))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(x))throw new TypeError("All values of an array should be numbers or BigNumbers");return w(m,x)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(m,x){if(Object.keys(m).length===2&&Object.keys(x).length===3){if(!c(m))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!h(x))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in m&&"pointY"in m&&"xCoeffLine"in x&&"yCoeffLine"in x&&"constant"in x)return y(m.pointX,m.pointY,x.xCoeffLine,x.yCoeffLine,x.constant);throw new TypeError("Key names do not match")}else if(Object.keys(m).length===3&&Object.keys(x).length===6){if(!h(m))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!f(x))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in m&&"pointY"in m&&"x0"in x&&"y0"in x&&"z0"in x&&"a"in x&&"b"in x&&"c"in x)return g(m.pointX,m.pointY,m.pointZ,x.x0,x.y0,x.z0,x.a,x.b,x.c);throw new TypeError("Key names do not match")}else if(Object.keys(m).length===2&&Object.keys(x).length===2){if(!c(m))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in m&&"pointOneY"in m&&"pointTwoX"in x&&"pointTwoY"in x)return w([m.pointOneX,m.pointOneY],[x.pointTwoX,x.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(m).length===3&&Object.keys(x).length===3){if(!h(m))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!h(x))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in m&&"pointOneY"in m&&"pointOneZ"in m&&"pointTwoX"in x&&"pointTwoY"in x&&"pointTwoZ"in x)return w([m.pointOneX,m.pointOneY,m.pointOneZ],[x.pointTwoX,x.pointTwoY,x.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(m){if(!v(m))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return b(m)}});function u(m){return typeof m=="number"||Kt(m)}function c(m){return m.constructor!==Array&&(m=p(m)),u(m[0])&&u(m[1])}function h(m){return m.constructor!==Array&&(m=p(m)),u(m[0])&&u(m[1])&&u(m[2])}function d(m){return Array.isArray(m)||(m=p(m)),m.every(u)}function f(m){return m.constructor!==Array&&(m=p(m)),u(m[0])&&u(m[1])&&u(m[2])&&u(m[3])&&u(m[4])&&u(m[5])}function p(m){for(var x=Object.keys(m),S=[],E=0;E<x.length;E++)S.push(m[x[E]]);return S}function v(m){if(m[0].length===2&&u(m[0][0])&&u(m[0][1])){if(m.some(x=>x.length!==2||!u(x[0])||!u(x[1])))return!1}else if(m[0].length===3&&u(m[0][0])&&u(m[0][1])&&u(m[0][2])){if(m.some(x=>x.length!==3||!u(x[0])||!u(x[1])||!u(x[2])))return!1}else return!1;return!0}function y(m,x,S,E,A){var T=l(t(t(i(S,m),i(E,x)),A)),C=s(t(i(S,S),i(E,E)));return a(T,C)}function g(m,x,S,E,A,T,C,D,O){var U=[n(i(n(A,x),O),i(n(T,S),D)),n(i(n(T,S),C),i(n(E,m),O)),n(i(n(E,m),D),i(n(A,x),C))];U=s(t(t(i(U[0],U[0]),i(U[1],U[1])),i(U[2],U[2])));var L=s(t(t(i(C,C),i(D,D)),i(O,O)));return a(U,L)}function w(m,x){for(var S=m.length,E=0,A=0,T=0;T<S;T++)A=n(m[T],x[T]),E=t(i(A,A),E);return s(E)}function b(m){for(var x=[],S=[],E=[],A=0;A<m.length-1;A++)for(var T=A+1;T<m.length;T++)m[0].length===2?(S=[m[A][0],m[A][1]],E=[m[T][0],m[T][1]]):m[0].length===3&&(S=[m[A][0],m[A][1],m[A][2]],E=[m[T][0],m[T][1],m[T][2]]),x.push(w(S,E));return x}}),Qbe="intersect",exe=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],txe=ae(Qbe,exe,r=>{var{typed:e,config:t,abs:n,add:i,addScalar:a,matrix:o,multiply:s,multiplyScalar:l,divideScalar:u,subtract:c,smaller:h,equalScalar:d,flatten:f,isZero:p,isNumeric:v}=r;return e("intersect",{"Array, Array, Array":y,"Array, Array, Array, Array":g,"Matrix, Matrix, Matrix":function(C,D,O){var U=y(C.valueOf(),D.valueOf(),O.valueOf());return U===null?null:o(U)},"Matrix, Matrix, Matrix, Matrix":function(C,D,O,U){var L=g(C.valueOf(),D.valueOf(),O.valueOf(),U.valueOf());return L===null?null:o(L)}});function y(C,D,O){if(C=w(C),D=w(D),O=w(O),!m(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!x(O))throw new TypeError("Array with 4 numbers expected as third argument");return T(C[0],C[1],C[2],D[0],D[1],D[2],O[0],O[1],O[2],O[3])}function g(C,D,O,U){if(C=w(C),D=w(D),O=w(O),U=w(U),C.length===2){if(!b(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!b(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!b(O))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!b(U))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return S(C,D,O,U)}else if(C.length===3){if(!m(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!m(O))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!m(U))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return A(C[0],C[1],C[2],D[0],D[1],D[2],O[0],O[1],O[2],U[0],U[1],U[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function w(C){return C.length===1?C[0]:C.length>1&&Array.isArray(C[0])&&C.every(D=>Array.isArray(D)&&D.length===1)?f(C):C}function b(C){return C.length===2&&v(C[0])&&v(C[1])}function m(C){return C.length===3&&v(C[0])&&v(C[1])&&v(C[2])}function x(C){return C.length===4&&v(C[0])&&v(C[1])&&v(C[2])&&v(C[3])}function S(C,D,O,U){var L=C,F=O,k=c(L,D),R=c(F,U),z=c(l(k[0],R[1]),l(R[0],k[1]));if(p(z)||h(n(z),t.epsilon))return null;var B=l(R[0],L[1]),X=l(R[1],L[0]),Z=l(R[0],F[1]),Q=l(R[1],F[0]),J=u(a(c(c(B,X),Z),Q),z);return i(s(k,J),L)}function E(C,D,O,U,L,F,k,R,z,B,X,Z){var Q=l(c(C,D),c(O,U)),J=l(c(L,F),c(k,R)),ne=l(c(z,B),c(X,Z));return a(a(Q,J),ne)}function A(C,D,O,U,L,F,k,R,z,B,X,Z){var Q=E(C,k,B,k,D,R,X,R,O,z,Z,z),J=E(B,k,U,C,X,R,L,D,Z,z,F,O),ne=E(C,k,U,C,D,R,L,D,O,z,F,O),fe=E(B,k,B,k,X,R,X,R,Z,z,Z,z),se=E(U,C,U,C,L,D,L,D,F,O,F,O),ye=c(l(Q,J),l(ne,fe)),De=c(l(se,fe),l(J,J));if(p(De))return null;var pe=u(ye,De),Te=u(a(Q,l(pe,J)),fe),be=a(C,l(pe,c(U,C))),re=a(D,l(pe,c(L,D))),Re=a(O,l(pe,c(F,O))),ze=a(k,l(Te,c(B,k))),K=a(R,l(Te,c(X,R))),ie=a(z,l(Te,c(Z,z)));return d(be,ze)&&d(re,K)&&d(Re,ie)?[be,re,Re]:null}function T(C,D,O,U,L,F,k,R,z,B){var X=l(C,k),Z=l(U,k),Q=l(D,R),J=l(L,R),ne=l(O,z),fe=l(F,z),se=c(c(c(B,X),Q),ne),ye=c(c(c(a(a(Z,J),fe),X),Q),ne),De=u(se,ye),pe=a(C,l(De,c(U,C))),Te=a(D,l(De,c(L,D))),be=a(O,l(De,c(F,O)));return[pe,Te,be]}}),lB="sum",rxe=["typed","config","add","numeric"],PW=ae(lB,rxe,r=>{var{typed:e,config:t,add:n,numeric:i}=r;return e(lB,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":o,"...":function(s){if(vm(s))throw new TypeError("Scalar values expected in function sum");return a(s)}});function a(s){var l;return bu(s,function(u){try{l=l===void 0?u:n(l,u)}catch(c){throw Da(c,"sum",u)}}),l===void 0&&(l=i(0,t.number)),typeof l=="string"&&(l=i(l,t.number)),l}function o(s,l){try{var u=BM(s,l,n);return u}catch(c){throw Da(c,"sum")}}}),ab="cumsum",nxe=["typed","add","unaryPlus"],IW=ae(ab,nxe,r=>{var{typed:e,add:t,unaryPlus:n}=r;return e(ab,{Array:i,Matrix:function(l){return l.create(i(l.valueOf()))},"Array, number | BigNumber":o,"Matrix, number | BigNumber":function(l,u){return l.create(o(l.valueOf(),u))},"...":function(l){if(vm(l))throw new TypeError("All values expected to be scalar in function cumsum");return i(l)}});function i(l){try{return a(l)}catch(u){throw Da(u,ab)}}function a(l){if(l.length===0)return[];for(var u=[n(l[0])],c=1;c<l.length;++c)u.push(t(u[c-1],l[c]));return u}function o(l,u){var c=rr(l);if(u<0||u>=c.length)throw new as(u,c.length);try{return s(l,u)}catch(h){throw Da(h,ab)}}function s(l,u){var c,h,d;if(u<=0){var f=l[0][0];if(Array.isArray(f)){for(d=fq(l),h=[],c=0;c<d.length;c++)h[c]=s(d[c],u-1);return h}else return a(l)}else{for(h=[],c=0;c<l.length;c++)h[c]=s(l[c],u-1);return h}}}),uB="mean",ixe=["typed","add","divide"],LW=ae(uB,ixe,r=>{var{typed:e,add:t,divide:n}=r;return e(uB,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":i,"...":function(o){if(vm(o))throw new TypeError("Scalar values expected in function mean");return a(o)}});function i(o,s){try{var l=BM(o,s,t),u=Array.isArray(o)?rr(o):o.size();return n(l,u[s])}catch(c){throw Da(c,"mean")}}function a(o){var s,l=0;if(bu(o,function(u){try{s=s===void 0?u:t(s,u),l++}catch(c){throw Da(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return n(s,l)}}),cB="median",axe=["typed","add","divide","compare","partitionSelect"],oxe=ae(cB,axe,r=>{var{typed:e,add:t,divide:n,compare:i,partitionSelect:a}=r;function o(u){try{u=xr(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var h=c/2-1,d=a(u,h+1),f=u[h],p=0;p<h;++p)i(u[p],f)>0&&(f=u[p]);return l(f,d)}else{var v=a(u,(c-1)/2);return s(v)}}catch(y){throw Da(y,"median")}}var s=e({"number | BigNumber | Complex | Unit":function(u){return u}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(u,c){return n(t(u,c),2)}});return e(cB,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,c){throw new Error("median(A, dim) is not yet supported")},"...":function(u){if(vm(u))throw new TypeError("Scalar values expected in function median");return o(u)}})}),hB="mad",sxe=["typed","abs","map","median","subtract"],lxe=ae(hB,sxe,r=>{var{typed:e,abs:t,map:n,median:i,subtract:a}=r;return e(hB,{"Array | Matrix":o,"...":function(s){return o(s)}});function o(s){if(s=xr(s.valueOf()),s.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(s);return i(n(s,function(u){return t(a(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):Da(u,"mad")}}}),UE="unbiased",dB="variance",uxe=["typed","add","subtract","multiply","divide","apply","isNaN"],FW=ae(dB,uxe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:a,apply:o,isNaN:s}=r;return e(dB,{"Array | Matrix":function(c){return l(c,UE)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(c,h){return u(c,h,UE)},"Array | Matrix, number | BigNumber, string":u,"...":function(c){return l(c,UE)}});function l(c,h){var d,f=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(bu(c,function(y){try{d=d===void 0?y:t(d,y),f++}catch(g){throw Da(g,"variance",y)}}),f===0)throw new Error("Cannot calculate variance of an empty array");var p=a(d,f);if(d=void 0,bu(c,function(y){var g=n(y,p);d=d===void 0?i(g,g):t(d,i(g,g))}),s(d))return d;switch(h){case"uncorrected":return a(d,f);case"biased":return a(d,f+1);case"unbiased":{var v=Kt(d)?d.mul(0):0;return f===1?v:a(d,f-1)}default:throw new Error('Unknown normalization "'+h+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,h,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(c,h,f=>l(f,d))}catch(f){throw Da(f,"variance")}}}),fB="quantileSeq",cxe=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],BW=ae(fB,cxe,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d}=r,f=pN({typed:e,isInteger:u});return e(fB,{"Array | Matrix, number | BigNumber":(w,b)=>v(w,b,!1),"Array | Matrix, number | BigNumber, number":(w,b,m)=>p(w,b,!1,m,v),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(w,b,m,x)=>p(w,b,m,x,v),"Array | Matrix, Array | Matrix":(w,b)=>y(w,b,!1),"Array | Matrix, Array | Matrix, number":(w,b,m)=>p(w,b,!1,m,y),"Array | Matrix, Array | Matrix, boolean":y,"Array | Matrix, Array | Matrix, boolean, number":(w,b,m,x)=>p(w,b,m,x,y)});function p(w,b,m,x,S){return f(w,x,E=>S(E,b,m))}function v(w,b,m){var x,S=w.valueOf();if(c(b,0))throw new Error("N/prob must be non-negative");if(h(b,1))return tr(b)?g(S,b,m):t(g(S,b,m));if(d(b,1)){if(!u(b))throw new Error("N must be a positive integer");if(d(b,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var E=n(b,1);x=[];for(var A=0;c(A,b);A++){var T=a(A+1,E);x.push(g(S,T,m))}return tr(b)?x:t(x)}}function y(w,b,m){for(var x=w.valueOf(),S=b.valueOf(),E=[],A=0;A<S.length;++A)E.push(g(x,S[A],m));return E}function g(w,b,m){var x=xr(w),S=x.length;if(S===0)throw new Error("Cannot calculate quantile of an empty sequence");var E=tr(b)?b*(S-1):b.times(S-1),A=tr(b)?Math.floor(E):E.floor().toNumber(),T=tr(b)?E%1:E.minus(A);if(u(E))return m?x[E]:s(x,tr(b)?E:E.valueOf());var C,D;if(m)C=x[A],D=x[A+1];else{D=s(x,A+1),C=x[A];for(var O=0;O<A;++O)l(x[O],C)>0&&(C=x[O])}return n(o(C,i(1,T)),o(D,T))}}),pB="std",hxe=["typed","map","sqrt","variance"],zW=ae(pB,hxe,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r;return e(pB,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(o){return a(o)}});function a(o,s){if(o.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return _o(l)?t(l,n):n(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),mB="corr",dxe=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],fxe=ae(mB,dxe,r=>{var{typed:e,matrix:t,sqrt:n,sum:i,add:a,subtract:o,multiply:s,pow:l,divide:u}=r;return e(mB,{"Array, Array":function(d,f){return c(d,f)},"Matrix, Matrix":function(d,f){var p=c(d.toArray(),f.toArray());return Array.isArray(p)?t(p):p}});function c(d,f){var p=[];if(Array.isArray(d[0])&&Array.isArray(f[0])){if(d.length!==f.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var v=0;v<d.length;v++){if(d[v].length!==f[v].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");p.push(h(d[v],f[v]))}return p}else{if(d.length!==f.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return h(d,f)}}function h(d,f){var p=d.length,v=i(d),y=i(f),g=d.reduce((S,E,A)=>a(S,s(E,f[A])),0),w=i(d.map(S=>l(S,2))),b=i(f.map(S=>l(S,2))),m=o(s(p,g),s(v,y)),x=n(s(o(s(p,w),l(v,2)),o(s(p,b),l(y,2))));return u(m,x)}}),gB="combinations",pxe=["typed"],mxe=ae(gB,pxe,r=>{var{typed:e}=r;return e(gB,{"number, number":Lq,"BigNumber, BigNumber":function(t,n){var i=t.constructor,a,o,s=t.minus(n),l=new i(1);if(!vB(t)||!vB(n))throw new TypeError("Positive integer value expected in function combinations");if(n.gt(t))throw new TypeError("k must be less than n in function combinations");if(a=l,n.lt(s))for(o=l;o.lte(s);o=o.plus(l))a=a.times(n.plus(o)).dividedBy(o);else for(o=l;o.lte(n);o=o.plus(l))a=a.times(s.plus(o)).dividedBy(o);return a}})});function vB(r){return r.isInteger()&&r.gte(0)}var yB="combinationsWithRep",gxe=["typed"],vxe=ae(yB,gxe,r=>{var{typed:e}=r;return e(yB,{"number, number":function(t,n){if(!Nt(t)||t<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Nt(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(t<1)throw new TypeError("k must be less than or equal to n + k - 1");if(n<t-1){var i=nu(t,t+n-1);return i/nu(1,n)}var a=nu(n+1,t+n-1);return a/nu(1,t-1)},"BigNumber, BigNumber":function(t,n){var i=t.constructor,a,o,s=new i(1),l=t.minus(s);if(!bB(t)||!bB(n))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(t.lt(s))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(a=s,n.lt(l))for(o=s;o.lte(l);o=o.plus(s))a=a.times(n.plus(o)).dividedBy(o);else for(o=s;o.lte(n);o=o.plus(s))a=a.times(l.plus(o)).dividedBy(o);return a}})});function bB(r){return r.isInteger()&&r.gte(0)}var xB="gamma",yxe=["typed","config","multiplyScalar","pow","BigNumber","Complex"],bxe=ae(xB,yxe,r=>{var{typed:e,config:t,multiplyScalar:n,pow:i,BigNumber:a,Complex:o}=r;function s(u){if(u.im===0)return oS(u.re);if(u.re<.5){var c=new o(1-u.re,-u.im),h=new o(Math.PI*u.re,Math.PI*u.im);return new o(Math.PI).div(h.sin()).div(s(c))}u=new o(u.re-1,u.im);for(var d=new o(_p[0],0),f=1;f<_p.length;++f){var p=new o(_p[f],0);d=d.add(p.div(u.add(f)))}var v=new o(u.re+jq+.5,u.im),y=Math.sqrt(2*Math.PI),g=v.pow(u.add(.5)),w=v.neg().exp();return d.mul(y).mul(g).mul(w)}return e(xB,{number:oS,Complex:s,BigNumber:function(u){if(u.isInteger())return u.isNegative()||u.isZero()?new a(1/0):l(u.minus(1));if(!u.isFinite())return new a(u.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new a([1,1,2,6,24,120,720,5040][u]);var c=t.precision+(Math.log(u.toNumber())|0),h=a.clone({precision:c});if(u%2===1)return u.times(l(new a(u-1)));for(var d=u,f=new h(u),p=u.toNumber();d>2;)d-=2,p+=d,f=f.times(p);return new a(f.toPrecision(a.precision))}}),wB="lgamma",xxe=["Complex","typed"],wxe=ae(wB,xxe,r=>{var{Complex:e,typed:t}=r,n=7,i=7,a=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(wB,{number:sS,Complex:o,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function o(u){var c=6.283185307179586,h=1.1447298858494002,d=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(sS(u.re),0);if(u.re>=n||Math.abs(u.im)>=i)return s(u);if(u.re<=d){var f=pae(c,u.im)*Math.floor(.5*u.re+.25),p=u.mul(Math.PI).sin().log(),v=o(new e(1-u.re,-u.im));return new e(h,f).sub(p).sub(v)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function s(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(Hq),h=new e(1,0).div(u),d=h.div(u),f=a[0],p=a[1],v=2*d.re,y=d.re*d.re+d.im*d.im,g=2;g<8;g++){var w=p;p=-y*f+a[g],f=v*f+w}var b=h.mul(d.mul(f).add(p));return c.add(b)}function l(u){var c=0,h=0,d=u;for(u=u.add(1);u.re<=n;){d=d.mul(u);var f=d.im<0?1:0;f!==0&&h===0&&c++,h=f,u=u.add(1)}return s(u).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),SB="factorial",Sxe=["typed","gamma"],Mxe=ae(SB,Sxe,r=>{var{typed:e,gamma:t}=r;return e(SB,{number:function(n){if(n<0)throw new Error("Value must be non-negative");return t(n+1)},BigNumber:function(n){if(n.isNegative())throw new Error("Value must be non-negative");return t(n.plus(1))},"Array | Matrix":e.referToSelf(n=>i=>ur(i,n))})}),MB="kldivergence",_xe=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],Exe=ae(MB,_xe,r=>{var{typed:e,matrix:t,divide:n,sum:i,multiply:a,map:o,dotDivide:s,log:l,isNumeric:u}=r;return e(MB,{"Array, Array":function(h,d){return c(t(h),t(d))},"Matrix, Array":function(h,d){return c(h,t(d))},"Array, Matrix":function(h,d){return c(t(h),d)},"Matrix, Matrix":function(h,d){return c(h,d)}});function c(h,d){var f=d.size().length,p=h.size().length;if(f>1)throw new Error("first object must be one dimensional");if(p>1)throw new Error("second object must be one dimensional");if(f!==p)throw new Error("Length of two vectors must be equal");var v=i(h);if(v===0)throw new Error("Sum of elements in first object must be non zero");var y=i(d);if(y===0)throw new Error("Sum of elements in second object must be non zero");var g=n(h,i(h)),w=n(d,i(d)),b=i(a(g,o(s(g,w),m=>l(m))));return u(b)?b:Number.NaN}}),_B="multinomial",Cxe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],Axe=ae(_B,Cxe,r=>{var{typed:e,add:t,divide:n,multiply:i,factorial:a,isInteger:o,isPositive:s}=r;return e(_B,{"Array | Matrix":function(l){var u=0,c=1;return bu(l,function(h){if(!o(h)||!s(h))throw new TypeError("Positive integer value expected in function multinomial");u=t(u,h),c=i(c,a(h))}),n(a(u),c)}})}),EB="permutations",Txe=["typed","factorial"],Dxe=ae(EB,Txe,r=>{var{typed:e,factorial:t}=r;return e(EB,{"number | BigNumber":t,"number, number":function(n,i){if(!Nt(n)||n<0)throw new TypeError("Positive integer value expected in function permutations");if(!Nt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(i>n)throw new TypeError("second argument k must be less than or equal to first argument n");return nu(n-i+1,n)},"BigNumber, BigNumber":function(n,i){var a,o;if(!CB(n)||!CB(i))throw new TypeError("Positive integer value expected in function permutations");if(i.gt(n))throw new TypeError("second argument k must be less than or equal to first argument n");var s=n.mul(0).add(1);for(a=s,o=n.minus(i).plus(1);o.lte(n);o=o.plus(1))a=a.times(o);return a}})});function CB(r){return r.isInteger()&&r.gte(0)}var UW={exports:{}};(function(r){(function(e,t,n){function i(l){var u=this,c=s();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function a(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new i(l),h=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,h&&(typeof h=="object"&&a(h,c),d.state=function(){return a(c,{})}),d}function s(){var l=4022871197,u=function(c){c=String(c);for(var h=0;h<c.length;h++){l+=c.charCodeAt(h);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=o:this.alea=o})(fo,r)})(UW);var kxe=UW.exports,jW={exports:{}};(function(r){(function(e,t,n){function i(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function a(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var u=new i(s),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=o:this.xor128=o})(fo,r)})(jW);var Nxe=jW.exports,HW={exports:{}};(function(r){(function(e,t,n){function i(s){var l=this,u="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var u=new i(s),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=o:this.xorwow=o})(fo,r)})(HW);var Oxe=HW.exports,VW={exports:{}};(function(r){(function(e,t,n){function i(s){var l=this;l.next=function(){var c=l.x,h=l.i,d,f;return d=c[h],d^=d>>>7,f=d^d<<24,d=c[h+1&7],f^=d^d>>>10,d=c[h+3&7],f^=d^d>>>3,d=c[h+4&7],f^=d^d<<7,d=c[h+7&7],d=d^d<<13,f^=d^d<<9,c[h]=f,l.i=h+1&7,f};function u(c,h){var d,f=[];if(h===(h|0))f[0]=h;else for(h=""+h,d=0;d<h.length;++d)f[d&7]=f[d&7]<<15^h.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],c.x=f,c.i=0,d=256;d>0;--d)c.next()}u(l,s)}function a(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var u=new i(s),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.x&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=o:this.xorshift7=o})(fo,r)})(VW);var Rxe=VW.exports,qW={exports:{}};(function(r){(function(e,t,n){function i(s){var l=this;l.next=function(){var c=l.w,h=l.X,d=l.i,f,p;return l.w=c=c+1640531527|0,p=h[d+34&127],f=h[d=d+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=h[d]=p^f,l.i=d,p+(c^c>>>16)|0};function u(c,h){var d,f,p,v,y,g=[],w=128;for(h===(h|0)?(f=h,h=null):(h=h+"\0",f=0,w=Math.max(w,h.length)),p=0,v=-32;v<w;++v)h&&(f^=h.charCodeAt((v+32)%h.length)),v===0&&(y=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,v>=0&&(y=y+1640531527|0,d=g[v&127]^=f+y,p=d==0?p+1:0);for(p>=128&&(g[(h&&h.length||0)&127]=-1),p=127,v=4*128;v>0;--v)f=g[p+34&127],d=g[p=p+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,g[p]=f^d;c.w=y,c.X=g,c.i=p}u(l,s)}function a(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var u=new i(s),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.X&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=o:this.xor4096=o})(fo,r)})(qW);var Pxe=qW.exports,WW={exports:{}};(function(r){(function(e,t,n){function i(s){var l=this,u="";l.next=function(){var h=l.b,d=l.c,f=l.d,p=l.a;return h=h<<25^h>>>7^d,d=d-f|0,f=f<<24^f>>>8^p,p=p-h|0,l.b=h=h<<20^h>>>12^d,l.c=d=d-f|0,l.d=f<<16^d>>>16^p,l.a=p-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function a(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var u=new i(s),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=o:this.tychei=o})(fo,r)})(WW);var Ixe=WW.exports,GW={exports:{}};const Lxe={},Fxe=Object.freeze(Object.defineProperty({__proto__:null,default:Lxe},Symbol.toStringTag,{value:"Module"})),Bxe=pte(Fxe);(function(r){(function(e,t,n){var i=256,a=6,o=52,s="random",l=n.pow(i,a),u=n.pow(2,o),c=u*2,h=i-1,d;function f(m,x,S){var E=[];x=x==!0?{entropy:!0}:x||{};var A=g(y(x.entropy?[m,b(t)]:m??w(),3),E),T=new p(E),C=function(){for(var D=T.g(a),O=l,U=0;D<u;)D=(D+U)*i,O*=i,U=T.g(1);for(;D>=c;)D/=2,O/=2,U>>>=1;return(D+U)/O};return C.int32=function(){return T.g(4)|0},C.quick=function(){return T.g(4)/4294967296},C.double=C,g(b(T.S),t),(x.pass||S||function(D,O,U,L){return L&&(L.S&&v(L,T),D.state=function(){return v(T,{})}),U?(n[s]=D,O):D})(C,A,"global"in x?x.global:this==n,x.state)}function p(m){var x,S=m.length,E=this,A=0,T=E.i=E.j=0,C=E.S=[];for(S||(m=[S++]);A<i;)C[A]=A++;for(A=0;A<i;A++)C[A]=C[T=h&T+m[A%S]+(x=C[A])],C[T]=x;(E.g=function(D){for(var O,U=0,L=E.i,F=E.j,k=E.S;D--;)O=k[L=h&L+1],U=U*i+k[h&(k[L]=k[F=h&F+O])+(k[F]=O)];return E.i=L,E.j=F,U})(i)}function v(m,x){return x.i=m.i,x.j=m.j,x.S=m.S.slice(),x}function y(m,x){var S=[],E=typeof m,A;if(x&&E=="object")for(A in m)try{S.push(y(m[A],x-1))}catch{}return S.length?S:E=="string"?m:m+"\0"}function g(m,x){for(var S=m+"",E,A=0;A<S.length;)x[h&A]=h&(E^=x[h&A]*19)+S.charCodeAt(A++);return b(x)}function w(){try{var m;return d&&(m=d.randomBytes)?m=m(i):(m=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(m)),b(m)}catch{var x=e.navigator,S=x&&x.plugins;return[+new Date,e,S,e.screen,b(t)]}}function b(m){return String.fromCharCode.apply(0,m)}if(g(n.random(),t),r.exports){r.exports=f;try{d=Bxe}catch{}}else n["seed"+s]=f})(typeof self<"u"?self:fo,[],Math)})(GW);var zxe=GW.exports,Uxe=kxe,jxe=Nxe,Hxe=Oxe,Vxe=Rxe,qxe=Pxe,Wxe=Ixe,Bd=zxe;Bd.alea=Uxe;Bd.xor128=jxe;Bd.xorwow=Hxe;Bd.xorshift7=Vxe;Bd.xor4096=qxe;Bd.tychei=Wxe;var Gxe=Bd;const $W=is(Gxe);var $xe=$W(Date.now());function Xp(r){var e;function t(i){e=i===null?$xe:$W(String(i))}t(r);function n(){return e()}return n}var AB="pickRandom",Xxe=["typed","config","?on"],Yxe=ae(AB,Xxe,r=>{var{typed:e,config:t,on:n}=r,i=Xp(t.randomSeed);return n&&n("config",function(o,s){o.randomSeed!==s.randomSeed&&(i=Xp(o.randomSeed))}),e(AB,{"Array | Matrix":function(o){return a(o,{})},"Array | Matrix, Object":function(o,s){return a(o,s)},"Array | Matrix, number":function(o,s){return a(o,{number:s})},"Array | Matrix, Array | Matrix":function(o,s){return a(o,{weights:s})},"Array | Matrix, Array | Matrix, number":function(o,s,l){return a(o,{number:l,weights:s})},"Array | Matrix, number, Array | Matrix":function(o,s,l){return a(o,{number:s,weights:l})}});function a(o,s){var{number:l,weights:u,elementWise:c=!0}=s,h=typeof l>"u";h&&(l=1);var d=Ft(o)?o.create:Ft(u)?u.create:null;o=o.valueOf(),u&&(u=u.valueOf()),c===!0&&(o=xr(o),u=xr(u));var f=0;if(typeof u<"u"){if(u.length!==o.length)throw new Error("Weights must have the same length as possibles");for(var p=0,v=u.length;p<v;p++){if(!tr(u[p])||u[p]<0)throw new Error("Weights must be an array of positive numbers");f+=u[p]}}for(var y=o.length,g=[],w;g.length<l;){if(typeof u>"u")w=o[Math.floor(i()*y)];else for(var b=i()*f,m=0,x=o.length;m<x;m++)if(b-=u[m],b<0){w=o[m];break}g.push(w)}return h?g[0]:d?d(g):g}});function wN(r,e){var t=[];if(r=r.slice(0),r.length>1)for(var n=0,i=r.shift();n<i;n++)t.push(wN(r,e));else for(var a=0,o=r.shift();a<o;a++)t.push(e());return t}var TB="random",Jxe=["typed","config","?on"],Zxe=ae(TB,Jxe,r=>{var{typed:e,config:t,on:n}=r,i=Xp(t.randomSeed);return n&&n("config",function(s,l){s.randomSeed!==l.randomSeed&&(i=Xp(s.randomSeed))}),e(TB,{"":()=>o(0,1),number:s=>o(0,s),"number, number":(s,l)=>o(s,l),"Array | Matrix":s=>a(s,0,1),"Array | Matrix, number":(s,l)=>a(s,0,l),"Array | Matrix, number, number":(s,l,u)=>a(s,l,u)});function a(s,l,u){var c=wN(s.valueOf(),()=>o(l,u));return Ft(s)?s.create(c):c}function o(s,l){return s+i()*(l-s)}}),DB="randomInt",Kxe=["typed","config","?on"],Qxe=ae(DB,Kxe,r=>{var{typed:e,config:t,on:n}=r,i=Xp(t.randomSeed);return n&&n("config",function(s,l){s.randomSeed!==l.randomSeed&&(i=Xp(s.randomSeed))}),e(DB,{"":()=>o(0,1),number:s=>o(0,s),"number, number":(s,l)=>o(s,l),"Array | Matrix":s=>a(s,0,1),"Array | Matrix, number":(s,l)=>a(s,0,l),"Array | Matrix, number, number":(s,l,u)=>a(s,l,u)});function a(s,l,u){var c=wN(s.valueOf(),()=>o(l,u));return Ft(s)?s.create(c):c}function o(s,l){return Math.floor(s+i()*(l-s))}}),kB="stirlingS2",ewe=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],twe=ae(kB,ewe,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:a,pow:o,factorial:s,combinations:l,isNegative:u,isInteger:c,number:h,bignumber:d,larger:f}=r,p=[],v=[];return e(kB,{"number | BigNumber, number | BigNumber":function(y,g){if(!c(y)||u(y)||!c(g)||u(g))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(f(g,y))throw new TypeError("k must be less than or equal to n in function stirlingS2");var w=!(tr(y)&&tr(g)),b=w?v:p,m=w?d:h,x=h(y),S=h(g);if(b[x]&&b[x].length>S)return b[x][S];for(var E=0;E<=x;++E)if(b[E]||(b[E]=[m(E===0?1:0)]),E!==0)for(var A=b[E],T=b[E-1],C=A.length;C<=E&&C<=S;++C)C===E?A[C]=1:A[C]=t(i(m(C),T[C]),T[C-1]);return b[x][S]}})}),NB="bellNumbers",rwe=["typed","addScalar","isNegative","isInteger","stirlingS2"],nwe=ae(NB,rwe,r=>{var{typed:e,addScalar:t,isNegative:n,isInteger:i,stirlingS2:a}=r;return e(NB,{"number | BigNumber":function(o){if(!i(o)||n(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var s=0,l=0;l<=o;l++)s=t(s,a(o,l));return s}})}),OB="catalan",iwe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],awe=ae(OB,iwe,r=>{var{typed:e,addScalar:t,divideScalar:n,multiplyScalar:i,combinations:a,isNegative:o,isInteger:s}=r;return e(OB,{"number | BigNumber":function(l){if(!s(l)||o(l))throw new TypeError("Non-negative integer value expected in function catalan");return n(a(i(l,2),l),t(l,1))}})}),RB="composition",owe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],swe=ae(RB,owe,r=>{var{typed:e,addScalar:t,combinations:n,isPositive:i,isNegative:a,isInteger:o,larger:s}=r;return e(RB,{"number | BigNumber, number | BigNumber":function(l,u){if(!o(l)||!i(l)||!o(u)||!i(u))throw new TypeError("Positive integer value expected in function composition");if(s(u,l))throw new TypeError("k must be less than or equal to n in function composition");return n(t(l,-1),t(u,-1))}})}),PB="leafCount",lwe=["parse","typed"],uwe=ae(PB,lwe,r=>{var{parse:e,typed:t}=r;function n(i){var a=0;return i.forEach(o=>{a+=n(o)}),a||1}return t(PB,{Node:function(i){return n(i)}})});function IB(r){return mr(r)||Fn(r)&&r.isUnary()&&mr(r.args[0])}function vS(r){return!!(mr(r)||(yu(r)||Fn(r))&&r.args.every(vS)||bl(r)&&vS(r.content))}function LB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function jE(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LB(Object(t),!0).forEach(function(n){fn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):LB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var cwe="simplifyUtil",hwe=["FunctionNode","OperatorNode","SymbolNode"],SN=ae(cwe,hwe,r=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:n}=r,i=!0,a=!1,o="defaultF",s={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}},l={divide:{total:a},log:{total:a}},u={subtract:{total:a},abs:{trivial:i},log:{total:i}};function c(b,m){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s,S=o;if(typeof b=="string"?S=b:Fn(b)?S=b.fn.toString():yu(b)?S=b.name:bl(b)&&(S="paren"),gt(x,S)){var E=x[S];if(gt(E,m))return E[m];if(gt(s,S))return s[S][m]}if(gt(x,o)){var A=x[o];return gt(A,m)?A[m]:s[o][m]}if(gt(s,S)){var T=s[S];if(gt(T,m))return T[m]}return s[o][m]}function h(b){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(b,"commutative",m)}function d(b){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(b,"associative",m)}function f(b,m){var x=jE({},b);for(var S in m)gt(b,S)?x[S]=jE(jE({},m[S]),b[S]):x[S]=m[S];return x}function p(b,m){if(!b.args||b.args.length===0)return b;b.args=v(b,m);for(var x=0;x<b.args.length;x++)p(b.args[x],m)}function v(b,m){var x,S=[],E=function A(T){for(var C=0;C<T.args.length;C++){var D=T.args[C];Fn(D)&&x===D.op?A(D):S.push(D)}};return d(b,m)?(x=b.op,E(b),S):b.args}function y(b,m){if(!(!b.args||b.args.length===0)){for(var x=w(b),S=b.args.length,E=0;E<S;E++)y(b.args[E],m);if(S>2&&d(b,m)){for(var A=b.args.pop();b.args.length>0;)A=x([b.args.pop(),A]);b.args=A.args}}}function g(b,m){if(!(!b.args||b.args.length===0)){for(var x=w(b),S=b.args.length,E=0;E<S;E++)g(b.args[E],m);if(S>2&&d(b,m)){for(var A=b.args.shift();b.args.length>0;)A=x([A,b.args.shift()]);b.args=A.args}}}function w(b){return Fn(b)?function(m){try{return new t(b.op,b.fn,m,b.implicit)}catch(x){return console.error(x),[]}}:function(m){return new e(new n(b.name),m)}}return{createMakeNodeFunction:w,hasProperty:c,isCommutative:h,isAssociative:d,mergeContext:f,flatten:p,allChildren:v,unflattenr:y,unflattenl:g,defaultContext:s,realContext:l,positiveContext:u}}),dwe="simplify",fwe=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","resolve","simplifyConstant","simplifyCore","?fraction","?bignumber","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],pwe=ae(dwe,fwe,r=>{var{config:e,typed:t,parse:n,add:i,subtract:a,multiply:o,divide:s,pow:l,isZero:u,equal:c,resolve:h,simplifyConstant:d,simplifyCore:f,fraction:p,bignumber:v,mathWithTransform:y,matrix:g,AccessorNode:w,ArrayNode:b,ConstantNode:m,FunctionNode:x,IndexNode:S,ObjectNode:E,OperatorNode:A,ParenthesisNode:T,SymbolNode:C}=r,{hasProperty:D,isCommutative:O,isAssociative:U,mergeContext:L,flatten:F,unflattenr:k,unflattenl:R,createMakeNodeFunction:z,defaultContext:B,realContext:X,positiveContext:Z}=SN({FunctionNode:x,OperatorNode:A,SymbolNode:C});t.addConversion({from:"Object",to:"Map",convert:Mp});var Q=t("simplify",{Node:pe,"Node, Map":(oe,G)=>pe(oe,!1,G),"Node, Map, Object":(oe,G,W)=>pe(oe,!1,G,W),"Node, Array":pe,"Node, Array, Map":pe,"Node, Array, Map, Object":pe});t.removeConversion({from:"Object",to:"Map",convert:Mp}),Q.defaultContext=B,Q.realContext=X,Q.positiveContext=Z;function J(oe){return oe.transform(function(G,W,ce){return bl(G)?J(G.content):G})}var ne={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};Q.rules=[f,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},d,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},d,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function fe(oe,G){var W={};if(oe.s){var ce=oe.s.split("->");if(ce.length===2)W.l=ce[0],W.r=ce[1];else throw SyntaxError("Could not parse rule: "+oe.s)}else W.l=oe.l,W.r=oe.r;W.l=J(n(W.l)),W.r=J(n(W.r));for(var Ce of["imposeContext","repeat","assuming"])Ce in oe&&(W[Ce]=oe[Ce]);if(oe.evaluate&&(W.evaluate=n(oe.evaluate)),U(W.l,G)){var $=!O(W.l,G),ee;$&&(ee=De());var ge=z(W.l),xe=De();W.expanded={},W.expanded.l=ge([W.l,xe]),F(W.expanded.l,G),k(W.expanded.l,G),W.expanded.r=ge([W.r,xe]),$&&(W.expandedNC1={},W.expandedNC1.l=ge([ee,W.l]),W.expandedNC1.r=ge([ee,W.r]),W.expandedNC2={},W.expandedNC2.l=ge([ee,W.expanded.l]),W.expandedNC2.r=ge([ee,W.expanded.r]))}return W}function se(oe,G){for(var W=[],ce=0;ce<oe.length;ce++){var Ce=oe[ce],$=void 0,ee=typeof Ce;switch(ee){case"string":Ce={s:Ce};case"object":$=fe(Ce,G);break;case"function":$=Ce;break;default:throw TypeError("Unsupported type of rule: "+ee)}W.push($)}return W}var ye=0;function De(){return new C("_p"+ye++)}function pe(oe,G){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:G0(),ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Ce=ce.consoleDebug;G=se(G||Q.rules,ce.context);var $=h(oe,W);$=J($);for(var ee={},ge=$.toString({parenthesis:"all"});!ee[ge];){ee[ge]=!0,ye=0;var xe=ge;Ce&&console.log("Working on: ",ge);for(var Ne=0;Ne<G.length;Ne++){var Fe="";if(typeof G[Ne]=="function"?($=G[Ne]($,ce),Ce&&(Fe=G[Ne].name)):(F($,ce.context),$=be($,G[Ne],ce.context),Ce&&(Fe="".concat(G[Ne].l.toString()," -> ").concat(G[Ne].r.toString()))),Ce){var We=$.toString({parenthesis:"all"});We!==xe&&(console.log("Applying",Fe,"produced",We),xe=We)}R($,ce.context)}ge=$.toString({parenthesis:"all"})}return $}function Te(oe,G,W){var ce=oe;if(oe)for(var Ce=0;Ce<oe.length;++Ce){var $=be(oe[Ce],G,W);$!==oe[Ce]&&(ce===oe&&(ce=oe.slice()),ce[Ce]=$)}return ce}function be(oe,G,W){if(G.assuming){for(var ce in G.assuming)for(var Ce in G.assuming[ce])if(D(ce,Ce,W)!==G.assuming[ce][Ce])return oe}var $=L(G.imposeContext,W),ee=oe;if(ee instanceof A||ee instanceof x){var ge=Te(ee.args,G,W);ge!==ee.args&&(ee=ee.clone(),ee.args=ge)}else if(ee instanceof T){if(ee.content){var xe=be(ee.content,G,W);xe!==ee.content&&(ee=new T(xe))}}else if(ee instanceof b){var Ne=Te(ee.items,G,W);Ne!==ee.items&&(ee=new b(Ne))}else if(ee instanceof w){var Fe=ee.object;ee.object&&(Fe=be(ee.object,G,W));var We=ee.index;ee.index&&(We=be(ee.index,G,W)),(Fe!==ee.object||We!==ee.index)&&(ee=new w(Fe,We))}else if(ee instanceof S){var ke=Te(ee.dimensions,G,W);ke!==ee.dimensions&&(ee=new S(ke))}else if(ee instanceof E){var it=!1,Je={};for(var st in ee.properties)Je[st]=be(ee.properties[st],G,W),Je[st]!==ee.properties[st]&&(it=!0);it&&(ee=new E(Je))}var we=G.r,Pe=ie(G.l,ee,$)[0];if(!Pe&&G.expanded&&(we=G.expanded.r,Pe=ie(G.expanded.l,ee,$)[0]),!Pe&&G.expandedNC1&&(we=G.expandedNC1.r,Pe=ie(G.expandedNC1.l,ee,$)[0],Pe||(we=G.expandedNC2.r,Pe=ie(G.expandedNC2.l,ee,$)[0])),Pe){var et=ee.implicit;ee=we.clone(),et&&"implicit"in we&&(ee.implicit=!0),ee=ee.transform(function(V){return V.isSymbolNode&&gt(Pe.placeholders,V.name)?Pe.placeholders[V.name].clone():V})}return G.repeat&&ee!==oe&&(ee=be(ee,G,W)),ee}function re(oe,G){var W=[],ce,Ce,$=z(oe);if(O(oe,G))for(var ee=0;ee<oe.args.length;ee++)Ce=oe.args.slice(0),Ce.splice(ee,1),ce=Ce.length===1?Ce[0]:$(Ce),W.push($([oe.args[ee],ce]));else for(var ge=1;ge<oe.args.length;ge++){var xe=oe.args[0];ge>1&&(xe=$(oe.args.slice(0,ge))),Ce=oe.args.slice(ge),ce=Ce.length===1?Ce[0]:$(Ce),W.push($([xe,ce]))}return W}function Re(oe,G){var W={placeholders:{}};if(!oe.placeholders&&!G.placeholders)return W;if(oe.placeholders){if(!G.placeholders)return oe}else return G;for(var ce in oe.placeholders)if(gt(oe.placeholders,ce)&&(W.placeholders[ce]=oe.placeholders[ce],gt(G.placeholders,ce)&&!_e(oe.placeholders[ce],G.placeholders[ce])))return null;for(var Ce in G.placeholders)gt(G.placeholders,Ce)&&(W.placeholders[Ce]=G.placeholders[Ce]);return W}function ze(oe,G){var W=[];if(oe.length===0||G.length===0)return W;for(var ce,Ce=0;Ce<oe.length;Ce++)for(var $=0;$<G.length;$++)ce=Re(oe[Ce],G[$]),ce&&W.push(ce);return W}function K(oe){if(oe.length===0)return oe;for(var G=oe.reduce(ze),W=[],ce={},Ce=0;Ce<G.length;Ce++){var $=JSON.stringify(G[Ce]);ce[$]||(ce[$]=!0,W.push(G[Ce]))}return W}function ie(oe,G,W,ce){var Ce=[{placeholders:{}}];if(oe instanceof A&&G instanceof A||oe instanceof x&&G instanceof x){if(oe instanceof A){if(oe.op!==G.op||oe.fn!==G.fn)return[]}else if(oe instanceof x&&oe.name!==G.name)return[];if(G.args.length===1&&oe.args.length===1||!U(G,W)&&G.args.length===oe.args.length||ce){for(var $=[],ee=0;ee<oe.args.length;ee++){var ge=ie(oe.args[ee],G.args[ee],W);if(ge.length===0)break;$.push(ge)}if($.length!==oe.args.length){if(!O(G,W)||oe.args.length===1)return[];if(oe.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var xe=ie(oe.args[0],G.args[1],W);if(xe.length===0)return[];var Ne=ie(oe.args[1],G.args[0],W);if(Ne.length===0)return[];$=[xe,Ne]}Ce=K($)}else if(G.args.length>=2&&oe.args.length===2){for(var Fe=re(G,W),We=[],ke=0;ke<Fe.length;ke++){var it=ie(oe,Fe[ke],W,!0);We=We.concat(it)}return We}else{if(oe.args.length>2)throw Error("Unexpected non-binary associative function: "+oe.toString());return[]}}else if(oe instanceof C){if(oe.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(ne[oe.name]){if(oe.name!==G.name)return[]}else switch(oe.name[1]>="a"&&oe.name[1]<="z"?oe.name.substring(0,2):oe.name[0]){case"n":case"_p":Ce[0].placeholders[oe.name]=G;break;case"c":case"cl":if(mr(G))Ce[0].placeholders[oe.name]=G;else return[];break;case"v":if(!mr(G))Ce[0].placeholders[oe.name]=G;else return[];break;case"vl":if(ai(G))Ce[0].placeholders[oe.name]=G;else return[];break;case"cd":if(IB(G))Ce[0].placeholders[oe.name]=G;else return[];break;case"vd":if(!IB(G))Ce[0].placeholders[oe.name]=G;else return[];break;case"ce":if(vS(G))Ce[0].placeholders[oe.name]=G;else return[];break;case"ve":if(!vS(G))Ce[0].placeholders[oe.name]=G;else return[];break;default:throw new Error("Invalid symbol in rule: "+oe.name)}}else if(oe instanceof m){if(!c(oe.value,G.value))return[]}else return[];return Ce}function _e(oe,G){if(oe instanceof m&&G instanceof m){if(!c(oe.value,G.value))return!1}else if(oe instanceof C&&G instanceof C){if(oe.name!==G.name)return!1}else if(oe instanceof A&&G instanceof A||oe instanceof x&&G instanceof x){if(oe instanceof A){if(oe.op!==G.op||oe.fn!==G.fn)return!1}else if(oe instanceof x&&oe.name!==G.name)return!1;if(oe.args.length!==G.args.length)return!1;for(var W=0;W<oe.args.length;W++)if(!_e(oe.args[W],G.args[W]))return!1}else return!1;return!0}return Q}),mwe="simplifyConstant",gwe=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],vwe=ae(mwe,gwe,r=>{var{typed:e,config:t,mathWithTransform:n,matrix:i,fraction:a,bignumber:o,AccessorNode:s,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:h,ObjectNode:d,OperatorNode:f,SymbolNode:p}=r,{isCommutative:v,isAssociative:y,allChildren:g,createMakeNodeFunction:w}=SN({FunctionNode:c,OperatorNode:f,SymbolNode:p}),b=e("simplifyConstant",{Node:F=>E(L(F,{})),"Node, Object":function(F,k){return E(L(F,k))}});function m(F){return Id(F)?F.valueOf():F instanceof Array?F.map(m):Ft(F)?i(m(F.valueOf())):F}function x(F,k,R){try{return n[F].apply(null,k)}catch{return k=k.map(m),T(n[F].apply(null,k),R)}}var S=e({Fraction:D,number:function(F){return F<0?C(new u(-F)):new u(F)},BigNumber:function(F){return F<0?C(new u(-F)):new u(F)},Complex:function(F){throw new Error("Cannot convert Complex number to Node")},string:function(F){return new u(F)},Matrix:function(F){return new l(F.valueOf().map(k=>S(k)))}});function E(F){return Rr(F)?F:S(F)}function A(F,k){var R=k&&k.exactFractions!==!1;if(R&&isFinite(F)&&a){var z=a(F),B=k&&typeof k.fractionsLimit=="number"?k.fractionsLimit:1/0;if(z.valueOf()===F&&z.n<B&&z.d<B)return z}return F}var T=e({"string, Object":function(F,k){if(t.number==="BigNumber")return o===void 0&&vN(),o(F);if(t.number==="Fraction")return a===void 0&&yW(),a(F);var R=parseFloat(F);return A(R,k)},"Fraction, Object":function(F,k){return F},"BigNumber, Object":function(F,k){return F},"number, Object":function(F,k){return A(F,k)},"Complex, Object":function(F,k){return F.im!==0?F:A(F.re,k)},"Matrix, Object":function(F,k){return i(A(F.valueOf()))},"Array, Object":function(F,k){return F.map(A)}});function C(F){return new f("-","unaryMinus",[F])}function D(F){var k,R=F.s*F.n;return R<0?k=new f("-","unaryMinus",[new u(-R)]):k=new u(R),F.d===1?k:new f("/","divide",[k,new u(F.d)])}function O(F,k,R){if(!Ld(k))return new s(E(F),E(k));if(co(F)||Ft(F)){for(var z=Array.from(k.dimensions);z.length>0;)if(mr(z[0])&&typeof z[0].value!="string"){var B=T(z.shift().value,R);co(F)?F=F.items[B-1]:(F=F.valueOf()[B-1],F instanceof Array&&(F=i(F)))}else if(z.length>1&&mr(z[1])&&typeof z[1].value!="string"){var X=T(z[1].value,R),Z=[],Q=co(F)?F.items:F.valueOf();for(var J of Q)if(co(J))Z.push(J.items[X-1]);else if(Ft(F))Z.push(J[X-1]);else break;if(Z.length===Q.length)co(F)?F=new l(Z):F=i(Z),z.splice(1,1);else break}else break;return z.length===k.dimensions.length?new s(E(F),k):z.length>0?(k=new h(z),new s(E(F),k)):F}if(Qv(F)&&k.dimensions.length===1&&mr(k.dimensions[0])){var ne=k.dimensions[0].value;return ne in F.properties?F.properties[ne]:new u}return new s(E(F),k)}function U(F,k,R,z){var B=k.shift(),X=k.reduce((Z,Q)=>{if(!Rr(Q)){var J=Z.pop();if(Rr(J))return[J,Q];try{return Z.push(x(F,[J,Q],z)),Z}catch{Z.push(J)}}Z.push(E(Z.pop()));var ne=Z.length===1?Z[0]:R(Z);return[R([ne,E(Q)])]},[B]);return X.length===1?X[0]:R([X[0],S(X[1])])}function L(F,k){switch(F.type){case"SymbolNode":return F;case"ConstantNode":switch(typeof F.value){case"number":return T(F.value,k);case"string":return F.value;default:if(!isNaN(F.value))return T(F.value,k)}return F;case"FunctionNode":if(n[F.name]&&n[F.name].rawArgs)return F;{var R=["add","multiply"];if(!R.includes(F.name)){var z=F.args.map(be=>L(be,k));if(!z.some(Rr))try{return x(F.name,z,k)}catch{}if(F.name==="size"&&z.length===1&&co(z[0])){for(var B=[],X=z[0];co(X);)B.push(X.items.length),X=X.items[0];return i(B)}return new c(F.name,z.map(E))}}case"OperatorNode":{var Z=F.fn.toString(),Q,J,ne=w(F);if(Fn(F)&&F.isUnary())Q=[L(F.args[0],k)],Rr(Q[0])?J=ne(Q):J=x(Z,Q,k);else if(y(F,k.context))if(Q=g(F,k.context),Q=Q.map(be=>L(be,k)),v(Z,k.context)){for(var fe=[],se=[],ye=0;ye<Q.length;ye++)Rr(Q[ye])?se.push(Q[ye]):fe.push(Q[ye]);fe.length>1?(J=U(Z,fe,ne,k),se.unshift(J),J=U(Z,se,ne,k)):J=U(Z,Q,ne,k)}else J=U(Z,Q,ne,k);else Q=F.args.map(be=>L(be,k)),J=U(Z,Q,ne,k);return J}case"ParenthesisNode":return L(F.content,k);case"AccessorNode":return O(L(F.object,k),L(F.index,k),k);case"ArrayNode":{var De=F.items.map(be=>L(be,k));return De.some(Rr)?new l(De.map(E)):i(De)}case"IndexNode":return new h(F.dimensions.map(be=>b(be,k)));case"ObjectNode":{var pe={};for(var Te in F.properties)pe[Te]=b(F.properties[Te],k);return new d(pe)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(F.type))}}return b}),FB="simplifyCore",ywe=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],bwe=ae(FB,ywe,r=>{var{typed:e,parse:t,equal:n,isZero:i,add:a,subtract:o,multiply:s,divide:l,pow:u,AccessorNode:c,ArrayNode:h,ConstantNode:d,FunctionNode:f,IndexNode:p,ObjectNode:v,OperatorNode:y,ParenthesisNode:g,SymbolNode:w}=r,b=new d(0),m=new d(1),x=new d(!0),S=new d(!1);function E(D){return Fn(D)&&["and","not","or"].includes(D.op)}var{hasProperty:A,isCommutative:T}=SN({FunctionNode:f,OperatorNode:y,SymbolNode:w});function C(D){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=O?O.context:void 0;if(A(D,"trivial",U)){if(yu(D)&&D.args.length===1)return C(D.args[0],O);var L=!1,F=0;if(D.forEach(se=>{++F,F===1&&(L=C(se,O))}),F===1)return L}var k=D;if(yu(k)){var R=Sme(k.name);if(R){if(k.args.length>2&&A(k,"associative",U))for(;k.args.length>2;){var z=k.args.pop(),B=k.args.pop();k.args.push(new y(R,k.name,[z,B]))}k=new y(R,k.name,k.args)}else return new f(C(k.fn),k.args.map(se=>C(se,O)))}if(Fn(k)&&k.isUnary()){var X=C(k.args[0],O);if(k.op==="~"&&Fn(X)&&X.isUnary()&&X.op==="~"||k.op==="not"&&Fn(X)&&X.isUnary()&&X.op==="not"&&E(X.args[0]))return X.args[0];var Z=!0;if(k.op==="-"&&Fn(X)&&(X.isBinary()&&X.fn==="subtract"&&(k=new y("-","subtract",[X.args[1],X.args[0]]),Z=!1),X.isUnary()&&X.op==="-"))return X.args[0];if(Z)return new y(k.op,k.fn,[X])}if(Fn(k)&&k.isBinary()){var Q=C(k.args[0],O),J=C(k.args[1],O);if(k.op==="+"){if(mr(Q)&&i(Q.value))return J;if(mr(J)&&i(J.value))return Q;Fn(J)&&J.isUnary()&&J.op==="-"&&(J=J.args[0],k=new y("-","subtract",[Q,J]))}if(k.op==="-")return Fn(J)&&J.isUnary()&&J.op==="-"?C(new y("+","add",[Q,J.args[0]]),O):mr(Q)&&i(Q.value)?C(new y("-","unaryMinus",[J])):mr(J)&&i(J.value)?Q:new y(k.op,k.fn,[Q,J]);if(k.op==="*"){if(mr(Q)){if(i(Q.value))return b;if(n(Q.value,1))return J}if(mr(J)){if(i(J.value))return b;if(n(J.value,1))return Q;if(T(k,U))return new y(k.op,k.fn,[J,Q],k.implicit)}return new y(k.op,k.fn,[Q,J],k.implicit)}if(k.op==="/")return mr(Q)&&i(Q.value)?b:mr(J)&&n(J.value,1)?Q:new y(k.op,k.fn,[Q,J]);if(k.op==="^"&&mr(J)){if(i(J.value))return m;if(n(J.value,1))return Q}if(k.op==="and"){if(mr(Q))if(Q.value){if(E(J))return J;if(mr(J))return J.value?x:S}else return S;if(mr(J))if(J.value){if(E(Q))return Q}else return S}if(k.op==="or"){if(mr(Q)){if(Q.value)return x;if(E(J))return J}if(mr(J)){if(J.value)return x;if(E(Q))return Q}}return new y(k.op,k.fn,[Q,J])}if(Fn(k))return new y(k.op,k.fn,k.args.map(se=>C(se,O)));if(co(k))return new h(k.items.map(se=>C(se,O)));if(Uc(k))return new c(C(k.object,O),C(k.index,O));if(Ld(k))return new p(k.dimensions.map(se=>C(se,O)));if(Qv(k)){var ne={};for(var fe in k.properties)ne[fe]=C(k.properties[fe],O);return new v(ne)}return k}return e(FB,{Node:C,"Node,Object":C})}),xwe="resolve",wwe=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],Swe=ae(xwe,wwe,r=>{var{typed:e,parse:t,ConstantNode:n,FunctionNode:i,OperatorNode:a,ParenthesisNode:o}=r;function s(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if(ai(l)){if(c.has(l.name)){var h=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(h,"}"))}var d=u.get(l.name);if(Rr(d)){var f=new Set(c);return f.add(l.name),s(d,u,f)}else return typeof d=="number"?t(String(d)):d!==void 0?new n(d):l}else if(Fn(l)){var p=l.args.map(function(y){return s(y,u,c)});return new a(l.op,l.fn,p,l.implicit)}else{if(bl(l))return new o(s(l.content,u,c));if(yu(l)){var v=l.args.map(function(y){return s(y,u,c)});return new i(l.name,v)}}return l.map(y=>s(y,u,c))}return e("resolve",{Node:s,"Node, Map | null | undefined":s,"Node, Object":(l,u)=>s(l,Mp(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,Mp(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,Mp(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(h=>l(h,c)))})}),BB="symbolicEqual",Mwe=["parse","simplify","typed","OperatorNode"],_we=ae(BB,Mwe,r=>{var{parse:e,simplify:t,typed:n,OperatorNode:i}=r;function a(o,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[o,s]),c=t(u,{},l);return mr(c)&&!c.value}return n(BB,{"Node, Node":a,"Node, Node, Object":a})}),zB="derivative",Ewe=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],Cwe=ae(zB,Ewe,r=>{var{typed:e,config:t,parse:n,simplify:i,equal:a,isZero:o,numeric:s,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:h,SymbolNode:d}=r;function f(b,m){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},S={};y(S,b,m.name);var E=g(b,S);return x.simplify?i(E):E}e.addConversion({from:"identifier",to:"SymbolNode",convert:n});var p=e(zB,{"Node, SymbolNode":f,"Node, SymbolNode, Object":f});e.removeConversion({from:"identifier",to:"SymbolNode",convert:n}),p._simplify=!0,p.toTex=function(b){return v.apply(null,b.args)};var v=e("_derivTex",{"Node, SymbolNode":function(b,m){return mr(b)&&Br(b.value)==="string"?v(n(b.value).toString(),m.toString(),1):v(b.toTex(),m.toString(),1)},"Node, ConstantNode":function(b,m){if(Br(m.value)==="string")return v(b,n(m.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(b,m,x){return v(b.toString(),m.name,x.value)},"string, string, number":function(b,m,x){var S;return x===1?S="{d\\over d"+m+"}":S="{d^{"+x+"}\\over d"+m+"^{"+x+"}}",S+"\\left[".concat(b,"\\right]")}}),y=e("constTag",{"Object, ConstantNode, string":function(b,m){return b[m]=!0,!0},"Object, SymbolNode, string":function(b,m,x){return m.name!==x?(b[m]=!0,!0):!1},"Object, ParenthesisNode, string":function(b,m,x){return y(b,m.content,x)},"Object, FunctionAssignmentNode, string":function(b,m,x){return m.params.includes(x)?y(b,m.expr,x):(b[m]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(b,m,x){if(m.args.length>0){for(var S=y(b,m.args[0],x),E=1;E<m.args.length;++E)S=y(b,m.args[E],x)&&S;if(S)return b[m]=!0,!0}return!1}}),g=e("_derivative",{"ConstantNode, Object":function(b){return w(0)},"SymbolNode, Object":function(b,m){return m[b]!==void 0?w(0):w(1)},"ParenthesisNode, Object":function(b,m){return new h(g(b.content,m))},"FunctionAssignmentNode, Object":function(b,m){return m[b]!==void 0?w(0):g(b.expr,m)},"FunctionNode, Object":function(b,m){if(m[b]!==void 0)return w(0);var x=b.args[0],S,E=!1,A=!1,T;switch(b.name){case"cbrt":E=!0,T=new c("*","multiply",[w(3),new c("^","pow",[x,new c("/","divide",[w(2),w(3)])])]);break;case"sqrt":case"nthRoot":if(b.args.length===1)E=!0,T=new c("*","multiply",[w(2),new u("sqrt",[x])]);else if(b.args.length===2)return S=new c("/","divide",[w(1),b.args[1]]),m[S]=m[b.args[1]],g(new c("^","pow",[x,S]),m);break;case"log10":S=w(10);case"log":if(!S&&b.args.length===1)T=x.clone(),E=!0;else if(b.args.length===1&&S||b.args.length===2&&m[b.args[1]]!==void 0)T=new c("*","multiply",[x.clone(),new u("log",[S||b.args[1]])]),E=!0;else if(b.args.length===2)return g(new c("/","divide",[new u("log",[x]),new u("log",[b.args[1]])]),m);break;case"pow":if(b.args.length===2)return m[S]=m[b.args[1]],g(new c("^","pow",[x,b.args[1]]),m);break;case"exp":T=new u("exp",[x.clone()]);break;case"sin":T=new u("cos",[x.clone()]);break;case"cos":T=new c("-","unaryMinus",[new u("sin",[x.clone()])]);break;case"tan":T=new c("^","pow",[new u("sec",[x.clone()]),w(2)]);break;case"sec":T=new c("*","multiply",[b,new u("tan",[x.clone()])]);break;case"csc":A=!0,T=new c("*","multiply",[b,new u("cot",[x.clone()])]);break;case"cot":A=!0,T=new c("^","pow",[new u("csc",[x.clone()]),w(2)]);break;case"asin":E=!0,T=new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])])]);break;case"acos":E=!0,A=!0,T=new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])])]);break;case"atan":E=!0,T=new c("+","add",[new c("^","pow",[x.clone(),w(2)]),w(1)]);break;case"asec":E=!0,T=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),w(2)]),w(1)])])]);break;case"acsc":E=!0,A=!0,T=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),w(2)]),w(1)])])]);break;case"acot":E=!0,A=!0,T=new c("+","add",[new c("^","pow",[x.clone(),w(2)]),w(1)]);break;case"sinh":T=new u("cosh",[x.clone()]);break;case"cosh":T=new u("sinh",[x.clone()]);break;case"tanh":T=new c("^","pow",[new u("sech",[x.clone()]),w(2)]);break;case"sech":A=!0,T=new c("*","multiply",[b,new u("tanh",[x.clone()])]);break;case"csch":A=!0,T=new c("*","multiply",[b,new u("coth",[x.clone()])]);break;case"coth":A=!0,T=new c("^","pow",[new u("csch",[x.clone()]),w(2)]);break;case"asinh":E=!0,T=new u("sqrt",[new c("+","add",[new c("^","pow",[x.clone(),w(2)]),w(1)])]);break;case"acosh":E=!0,T=new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),w(2)]),w(1)])]);break;case"atanh":E=!0,T=new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])]);break;case"asech":E=!0,A=!0,T=new c("*","multiply",[x.clone(),new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])])])]);break;case"acsch":E=!0,A=!0,T=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[x.clone(),w(2)]),w(1)])])]);break;case"acoth":E=!0,A=!0,T=new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])]);break;case"abs":T=new c("/","divide",[new u(new d("abs"),[x.clone()]),x.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+b.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var C,D;E?(C="/",D="divide"):(C="*",D="multiply");var O=g(x,m);return A&&(O=new c("-","unaryMinus",[O])),new c(C,D,[O,T])},"OperatorNode, Object":function(b,m){if(m[b]!==void 0)return w(0);if(b.op==="+")return new c(b.op,b.fn,b.args.map(function(L){return g(L,m)}));if(b.op==="-"){if(b.isUnary())return new c(b.op,b.fn,[g(b.args[0],m)]);if(b.isBinary())return new c(b.op,b.fn,[g(b.args[0],m),g(b.args[1],m)])}if(b.op==="*"){var x=b.args.filter(function(L){return m[L]!==void 0});if(x.length>0){var S=b.args.filter(function(L){return m[L]===void 0}),E=S.length===1?S[0]:new c("*","multiply",S),A=x.concat(g(E,m));return new c("*","multiply",A)}return new c("+","add",b.args.map(function(L){return new c("*","multiply",b.args.map(function(F){return F===L?g(F,m):F.clone()}))}))}if(b.op==="/"&&b.isBinary()){var T=b.args[0],C=b.args[1];return m[C]!==void 0?new c("/","divide",[g(T,m),C]):m[T]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[T]),new c("/","divide",[g(C,m),new c("^","pow",[C.clone(),w(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[g(T,m),C.clone()]),new c("*","multiply",[T.clone(),g(C,m)])]),new c("^","pow",[C.clone(),w(2)])])}if(b.op==="^"&&b.isBinary()){var D=b.args[0],O=b.args[1];if(m[D]!==void 0)return mr(D)&&(o(D.value)||a(D.value,1))?w(0):new c("*","multiply",[b,new c("*","multiply",[new u("log",[D.clone()]),g(O.clone(),m)])]);if(m[O]!==void 0){if(mr(O)){if(o(O.value))return w(0);if(a(O.value,1))return g(D,m)}var U=new c("^","pow",[D.clone(),new c("-","subtract",[O,w(1)])]);return new c("*","multiply",[O.clone(),new c("*","multiply",[g(D,m),U])])}return new c("*","multiply",[new c("^","pow",[D.clone(),O.clone()]),new c("+","add",[new c("*","multiply",[g(D,m),new c("/","divide",[O.clone(),D.clone()])]),new c("*","multiply",[g(O,m),new u("log",[D.clone()])])])])}throw new Error('Cannot process operator "'+b.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function w(b,m){return new l(s(b,t.number))}return p}),UB="rationalize",Awe=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],Twe=ae(UB,Awe,r=>{var{config:e,typed:t,equal:n,isZero:i,add:a,subtract:o,multiply:s,divide:l,pow:u,parse:c,simplifyConstant:h,simplifyCore:d,simplify:f,fraction:p,bignumber:v,mathWithTransform:y,matrix:g,AccessorNode:w,ArrayNode:b,ConstantNode:m,FunctionNode:x,IndexNode:S,ObjectNode:E,OperatorNode:A,SymbolNode:T,ParenthesisNode:C}=r;function D(k){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,B=U(),X=O(k,R,!0,B.firstRules),Z=X.variables.length,Q={exactFractions:!1},J={exactFractions:!0};if(k=X.expression,Z>=1){k=L(k);var ne,fe,se=!0,ye=!1;k=f(k,B.firstRules,{},Q);for(var De;fe=se?B.distrDivRules:B.sucDivRules,k=f(k,fe,{},J),se=!se,De=k.toString(),De!==ne;)ye=!0,ne=De;ye&&(k=f(k,B.firstRulesAgain,{},Q)),k=f(k,B.finalRules,{},Q)}var pe=[],Te={};return k.type==="OperatorNode"&&k.isBinary()&&k.op==="/"?(Z===1&&(k.args[0]=F(k.args[0],pe),k.args[1]=F(k.args[1])),z&&(Te.numerator=k.args[0],Te.denominator=k.args[1])):(Z===1&&(k=F(k,pe)),z&&(Te.numerator=k,Te.denominator=null)),z?(Te.coefficients=pe,Te.variables=X.variables,Te.expression=k,Te):k}return t(UB,{Node:D,"Node, boolean":(k,R)=>D(k,{},R),"Node, Object":D,"Node, Object, boolean":D});function O(k,R,z,B){var X=[],Z=f(k,B,R,{exactFractions:!1});z=!!z;var Q="+-*"+(z?"/":"");ne(Z);var J={};return J.expression=Z,J.variables=X,J;function ne(fe){var se=fe.type;if(se==="FunctionNode")throw new Error("There is an unsolved function call");if(se==="OperatorNode")if(fe.op==="^"){if(fe.args[1].type!=="ConstantNode"||!Nt(parseFloat(fe.args[1].value)))throw new Error("There is a non-integer exponent");ne(fe.args[0])}else{if(!Q.includes(fe.op))throw new Error("Operator "+fe.op+" invalid in polynomial expression");for(var ye=0;ye<fe.args.length;ye++)ne(fe.args[ye])}else if(se==="SymbolNode"){var De=fe.name,pe=X.indexOf(De);pe===-1&&X.push(De)}else if(se==="ParenthesisNode")ne(fe.content);else if(se!=="ConstantNode")throw new Error("type "+se+" is not allowed in polynomial expression")}}function U(){var k=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},h,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],R=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],z=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],B=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],X={};return X.firstRules=k.concat(R,B),X.distrDivRules=z,X.sucDivRules=B,X.firstRulesAgain=k.concat(R),X.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},h,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],X}function L(k,R,z){var B=k.type,X=arguments.length>1;if(B==="OperatorNode"&&k.isBinary()){var Z=!1,Q;if(k.op==="^"&&(k.args[0].type==="ParenthesisNode"||k.args[0].type==="OperatorNode")&&k.args[1].type==="ConstantNode"&&(Q=parseFloat(k.args[1].value),Z=Q>=2&&Nt(Q)),Z){if(Q>2){var J=k.args[0],ne=new A("^","pow",[k.args[0].cloneDeep(),new m(Q-1)]);k=new A("*","multiply",[J,ne])}else k=new A("*","multiply",[k.args[0],k.args[0].cloneDeep()]);X&&(z==="content"?R.content=k:R.args[z]=k)}}if(B==="ParenthesisNode")L(k.content,k,"content");else if(B!=="ConstantNode"&&B!=="SymbolNode")for(var fe=0;fe<k.args.length;fe++)L(k.args[fe],k,fe);if(!X)return k}function F(k,R){R===void 0&&(R=[]),R[0]=0;var z={};z.cte=1,z.oper="+",z.fire="";var B=0,X="";De(k,null,z),B=R.length-1;for(var Z=!0,Q,J=B;J>=0;J--)if(R[J]!==0){var ne=new m(Z?R[J]:Math.abs(R[J])),fe=R[J]<0?"-":"+";if(J>0){var se=new T(X);if(J>1){var ye=new m(J);se=new A("^","pow",[se,ye])}R[J]===-1&&Z?ne=new A("-","unaryMinus",[se]):Math.abs(R[J])===1?ne=se:ne=new A("*","multiply",[ne,se])}Z?Q=ne:fe==="+"?Q=new A("+","add",[Q,ne]):Q=new A("-","subtract",[Q,ne]),Z=!1}if(Z)return new m(0);return Q;function De(pe,Te,be){var re=pe.type;if(re==="FunctionNode")throw new Error("There is an unsolved function call");if(re==="OperatorNode"){if(!"+-*^".includes(pe.op))throw new Error("Operator "+pe.op+" invalid");if(Te!==null){if((pe.fn==="unaryMinus"||pe.fn==="pow")&&Te.fn!=="add"&&Te.fn!=="subtract"&&Te.fn!=="multiply")throw new Error("Invalid "+pe.op+" placing");if((pe.fn==="subtract"||pe.fn==="add"||pe.fn==="multiply")&&Te.fn!=="add"&&Te.fn!=="subtract")throw new Error("Invalid "+pe.op+" placing");if((pe.fn==="subtract"||pe.fn==="add"||pe.fn==="unaryMinus")&&be.noFil!==0)throw new Error("Invalid "+pe.op+" placing")}(pe.op==="^"||pe.op==="*")&&(be.fire=pe.op);for(var Re=0;Re<pe.args.length;Re++)pe.fn==="unaryMinus"&&(be.oper="-"),(pe.op==="+"||pe.fn==="subtract")&&(be.fire="",be.cte=1,be.oper=Re===0?"+":pe.op),be.noFil=Re,De(pe.args[Re],pe,be)}else if(re==="SymbolNode"){if(pe.name!==X&&X!=="")throw new Error("There is more than one variable");if(X=pe.name,Te===null){R[1]=1;return}if(Te.op==="^"&&be.noFil!==0)throw new Error("In power the variable should be the first parameter");if(Te.op==="*"&&be.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(be.fire===""||be.fire==="*")&&(B<1&&(R[1]=0),R[1]+=be.cte*(be.oper==="+"?1:-1),B=Math.max(1,B))}else if(re==="ConstantNode"){var ze=parseFloat(pe.value);if(Te===null){R[0]=ze;return}if(Te.op==="^"){if(be.noFil!==1)throw new Error("Constant cannot be powered");if(!Nt(ze)||ze<=0)throw new Error("Non-integer exponent is not allowed");for(var K=B+1;K<ze;K++)R[K]=0;ze>B&&(R[ze]=0),R[ze]+=be.cte*(be.oper==="+"?1:-1),B=Math.max(ze,B);return}be.cte=ze,be.fire===""&&(R[0]+=be.cte*(be.oper==="+"?1:-1))}else throw new Error("Type "+re+" is not allowed")}}}),jB="zpk2tf",Dwe=["typed","add","multiply","Complex","number"],kwe=ae(jB,Dwe,r=>{var{typed:e,add:t,multiply:n,Complex:i,number:a}=r;return e(jB,{"Array,Array,number":function(l,u,c){return o(l,u,c)},"Array,Array":function(l,u){return o(l,u,1)},"Matrix,Matrix,number":function(l,u,c){return o(l.valueOf(),u.valueOf(),c)},"Matrix,Matrix":function(l,u){return o(l.valueOf(),u.valueOf(),1)}});function o(l,u,c){l.some(w=>w.type==="BigNumber")&&(l=l.map(w=>a(w))),u.some(w=>w.type==="BigNumber")&&(u=u.map(w=>a(w)));for(var h=[i(1,0)],d=[i(1,0)],f=0;f<l.length;f++){var p=l[f];typeof p=="number"&&(p=i(p,0)),h=s(h,[i(1,0),i(-p.re,-p.im)])}for(var v=0;v<u.length;v++){var y=u[v];typeof y=="number"&&(y=i(y,0)),d=s(d,[i(1,0),i(-y.re,-y.im)])}for(var g=0;g<h.length;g++)h[g]=n(h[g],c);return[h,d]}function s(l,u){for(var c=[],h=0;h<l.length+u.length-1;h++){c[h]=i(0,0);for(var d=0;d<l.length;d++)h-d>=0&&h-d<u.length&&(c[h]=t(c[h],n(l[d],u[h-d])))}return c}}),HB="freqz",Nwe=["typed","add","multiply","Complex","divide","matrix"],Owe=ae(HB,Nwe,r=>{var{typed:e,add:t,multiply:n,Complex:i,divide:a,matrix:o}=r;return e(HB,{"Array, Array":function(u,c){var h=l(512);return s(u,c,h)},"Array, Array, Array":function(u,c,h){return s(u,c,h)},"Array, Array, number":function(u,c,h){if(h<0)throw new Error("w must be a positive number");var d=l(h);return s(u,c,d)},"Matrix, Matrix":function(u,c){var h=l(512),{w:d,h:f}=s(u.valueOf(),c.valueOf(),h);return{w:o(d),h:o(f)}},"Matrix, Matrix, Matrix":function(u,c,h){var{h:d}=s(u.valueOf(),c.valueOf(),h.valueOf());return{h:o(d),w:o(h)}},"Matrix, Matrix, number":function(u,c,h){if(h<0)throw new Error("w must be a positive number");var d=l(h),{h:f}=s(u.valueOf(),c.valueOf(),d);return{h:o(f),w:o(d)}}});function s(u,c,h){for(var d=[],f=[],p=0;p<h.length;p++){for(var v=i(0,0),y=i(0,0),g=0;g<u.length;g++)v=t(v,n(u[g],i(Math.cos(-g*h[p]),Math.sin(-g*h[p]))));for(var w=0;w<c.length;w++)y=t(y,n(c[w],i(Math.cos(-w*h[p]),Math.sin(-w*h[p]))));d.push(v),f.push(y)}for(var b=[],m=0;m<d.length;m++)b.push(a(d[m],f[m]));return{h:b,w:h}}function l(u){for(var c=[],h=0;h<u;h++)c.push(h/u*Math.PI);return c}}),Rwe="reviver",Pwe=["classes"],Iwe=ae(Rwe,Pwe,r=>{var{classes:e}=r;return function(t,n){var i=e[n&&n.mathjs];return i&&typeof i.fromJSON=="function"?i.fromJSON(n):n}}),Lwe="replacer",Fwe=[],Bwe=ae(Lwe,Fwe,()=>function(r,e){return typeof e=="number"&&(!isFinite(e)||isNaN(e))?{mathjs:"number",value:String(e)}:e}),zwe="12.4.3",Uwe=ae("true",[],()=>!0),jwe=ae("false",[],()=>!1),Hwe=ae("null",[],()=>null),Vwe=Ao("Infinity",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1/0):1/0}),qwe=Ao("NaN",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(NaN):NaN}),Wwe=Ao("pi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?xN(t):ise}),Gwe=Ao("tau",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Cfe(t):ase}),$we=Ao("e",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?_fe(t):ose}),Xwe=Ao("phi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Efe(t):sse}),Ywe=Ao("LN2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),Jwe=Ao("LN10",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),Zwe=Ao("LOG2E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),Kwe=Ao("LOG10E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),Qwe=Ao("SQRT1_2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),eSe=Ao("SQRT2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),tSe=Ao("i",["Complex"],r=>{var{Complex:e}=r;return e.I}),rSe=ae("PI",["pi"],r=>{var{pi:e}=r;return e}),nSe=ae("E",["e"],r=>{var{e}=r;return e}),iSe=ae("version",[],()=>zwe);function Ao(r,e,t){return ae(r,e,t,{recreateOnConfigChange:!0})}var aSe=er("speedOfLight","299792458","m s^-1"),oSe=er("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),sSe=er("planckConstant","6.62607015e-34","J s"),lSe=er("reducedPlanckConstant","1.0545718176461565e-34","J s"),uSe=er("magneticConstant","1.25663706212e-6","N A^-2"),cSe=er("electricConstant","8.8541878128e-12","F m^-1"),hSe=er("vacuumImpedance","376.730313667","ohm"),dSe=er("coulomb","8.987551792261171e9","N m^2 C^-2"),fSe=er("elementaryCharge","1.602176634e-19","C"),pSe=er("bohrMagneton","9.2740100783e-24","J T^-1"),mSe=er("conductanceQuantum","7.748091729863649e-5","S"),gSe=er("inverseConductanceQuantum","12906.403729652257","ohm"),vSe=er("magneticFluxQuantum","2.0678338484619295e-15","Wb"),ySe=er("nuclearMagneton","5.0507837461e-27","J T^-1"),bSe=er("klitzing","25812.807459304513","ohm"),xSe=er("bohrRadius","5.29177210903e-11","m"),wSe=er("classicalElectronRadius","2.8179403262e-15","m"),SSe=er("electronMass","9.1093837015e-31","kg"),MSe=er("fermiCoupling","1.1663787e-5","GeV^-2"),_Se=VM("fineStructure",.0072973525693),ESe=er("hartreeEnergy","4.3597447222071e-18","J"),CSe=er("protonMass","1.67262192369e-27","kg"),ASe=er("deuteronMass","3.3435830926e-27","kg"),TSe=er("neutronMass","1.6749271613e-27","kg"),DSe=er("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),kSe=er("rydberg","10973731.568160","m^-1"),NSe=er("thomsonCrossSection","6.6524587321e-29","m^2"),OSe=VM("weakMixingAngle",.2229),RSe=VM("efimovFactor",22.7),PSe=er("atomicMass","1.66053906660e-27","kg"),ISe=er("avogadro","6.02214076e23","mol^-1"),LSe=er("boltzmann","1.380649e-23","J K^-1"),FSe=er("faraday","96485.33212331001","C mol^-1"),BSe=er("firstRadiation","3.7417718521927573e-16","W m^2"),zSe=er("loschmidt","2.686780111798444e25","m^-3"),USe=er("gasConstant","8.31446261815324","J K^-1 mol^-1"),jSe=er("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),HSe=er("molarVolume","0.022413969545014137","m^3 mol^-1"),VSe=VM("sackurTetrode",-1.16487052358),qSe=er("secondRadiation","0.014387768775039337","m K"),WSe=er("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),GSe=er("wienDisplacement","2.897771955e-3","m K"),$Se=er("molarMass","0.99999999965e-3","kg mol^-1"),XSe=er("molarMassC12","11.9999999958e-3","kg mol^-1"),YSe=er("gravity","9.80665","m s^-2"),JSe=er("planckLength","1.616255e-35","m"),ZSe=er("planckMass","2.176435e-8","kg"),KSe=er("planckTime","5.391245e-44","s"),QSe=er("planckCharge","1.87554603778e-18","C"),eMe=er("planckTemperature","1.416785e+32","K");function er(r,e,t){var n=["config","Unit","BigNumber"];return ae(r,n,i=>{var{config:a,Unit:o,BigNumber:s}=i,l=a.number==="BigNumber"?new s(e):parseFloat(e),u=new o(l,t);return u.fixPrefix=!0,u})}function VM(r,e){var t=["config","BigNumber"];return ae(r,t,n=>{var{config:i,BigNumber:a}=n;return i.number==="BigNumber"?new a(e):e})}var tMe="apply",rMe=["typed","isInteger"],nMe=ae(tMe,rMe,r=>{var{typed:e,isInteger:t}=r,n=pN({typed:e,isInteger:t});return e("apply",{"...any":function(i){var a=i[1];tr(a)?i[1]=a-1:Kt(a)&&(i[1]=a.minus(1));try{return n.apply(null,i)}catch(o){throw Ra(o)}}})},{isTransformFunction:!0}),iMe="column",aMe=["typed","Index","matrix","range"],oMe=ae(iMe,aMe,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,a=gW({typed:e,Index:t,matrix:n,range:i});return e("column",{"...any":function(o){var s=o.length-1,l=o[s];tr(l)&&(o[s]=l-1);try{return a.apply(null,o)}catch(u){throw Ra(u)}}})},{isTransformFunction:!0});function MN(r,e,t){var n=r.filter(function(l){return ai(l)&&!(l.name in e)&&!t.has(l.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+r+'"');var i=n.name,a=new Map,o=new UV(t,a,new Set([i])),s=r.compile();return function(l){return a.set(i,l),s.evaluate(o)}}var sMe="filter",lMe=["typed"],uMe=ae(sMe,lMe,r=>{var{typed:e}=r;function t(i,a,o){var s,l;return i[0]&&(s=i[0].compile().evaluate(o)),i[1]&&(ai(i[1])||gm(i[1])?l=i[1].compile().evaluate(o):l=MN(i[1],a,o)),n(s,l)}t.rawArgs=!0;var n=e("filter",{"Array, function":VB,"Matrix, function":function(i,a){return i.create(VB(i.toArray(),a))},"Array, RegExp":rS,"Matrix, RegExp":function(i,a){return i.create(rS(i.toArray(),a))}});return t},{isTransformFunction:!0});function VB(r,e){return uq(r,function(t,n,i){return wm(e,t,[n+1],i,"filter")})}var cMe="forEach",hMe=["typed"],dMe=ae(cMe,hMe,r=>{var{typed:e}=r;function t(i,a,o){var s,l;return i[0]&&(s=i[0].compile().evaluate(o)),i[1]&&(ai(i[1])||gm(i[1])?l=i[1].compile().evaluate(o):l=MN(i[1],a,o)),n(s,l)}t.rawArgs=!0;var n=e("forEach",{"Array | Matrix, function":function(i,a){var o=function s(l,u){if(Array.isArray(l))FM(l,function(c,h){s(c,u.concat(h+1))});else return wm(a,l,u,i,"forEach")};o(i.valueOf(),[])}});return t},{isTransformFunction:!0}),fMe="index",pMe=["Index","getMatrixDataType"],mMe=ae(fMe,pMe,r=>{var{Index:e,getMatrixDataType:t}=r;return function(){for(var n=[],i=0,a=arguments.length;i<a;i++){var o=arguments[i];if(NM(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(l){return l-1});else if(Sr(o)||Ft(o))t(o)!=="boolean"&&(o=o.map(function(l){return l-1}));else if(tr(o))o--;else if(Kt(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");n[i]=o}var s=new e;return e.apply(s,n),s}},{isTransformFunction:!0}),gMe="map",vMe=["typed"],yMe=ae(gMe,vMe,r=>{var{typed:e}=r;function t(i,a,o){var s,l;return i[0]&&(s=i[0].compile().evaluate(o)),i[1]&&(ai(i[1])||gm(i[1])?l=i[1].compile().evaluate(o):l=MN(i[1],a,o)),n(s,l)}t.rawArgs=!0;var n=e("map",{"Array, function":function(i,a){return qB(i,a,i)},"Matrix, function":function(i,a){return i.create(qB(i.valueOf(),a,i))}});return t},{isTransformFunction:!0});function qB(r,e,t){function n(i,a){return Array.isArray(i)?lu(i,function(o,s){return n(o,a.concat(s+1))}):wm(e,i,a,t,"map")}return n(r,[])}function oh(r){if(r.length===2&&_o(r[0])){r=r.slice();var e=r[1];tr(e)?r[1]=e-1:Kt(e)&&(r[1]=e.minus(1))}return r}var bMe="max",xMe=["typed","config","numeric","larger"],wMe=ae(bMe,xMe,r=>{var{typed:e,config:t,numeric:n,larger:i}=r,a=AW({typed:e,config:t,numeric:n,larger:i});return e("max",{"...any":function(o){o=oh(o);try{return a.apply(null,o)}catch(s){throw Ra(s)}}})},{isTransformFunction:!0}),SMe="mean",MMe=["typed","add","divide"],_Me=ae(SMe,MMe,r=>{var{typed:e,add:t,divide:n}=r,i=LW({typed:e,add:t,divide:n});return e("mean",{"...any":function(a){a=oh(a);try{return i.apply(null,a)}catch(o){throw Ra(o)}}})},{isTransformFunction:!0}),EMe="min",CMe=["typed","config","numeric","smaller"],AMe=ae(EMe,CMe,r=>{var{typed:e,config:t,numeric:n,smaller:i}=r,a=TW({typed:e,config:t,numeric:n,smaller:i});return e("min",{"...any":function(o){o=oh(o);try{return a.apply(null,o)}catch(s){throw Ra(s)}}})},{isTransformFunction:!0}),TMe="range",DMe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],kMe=ae(TMe,DMe,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:l,add:u,isPositive:c}=r,h=xW({typed:e,config:t,matrix:n,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:l,add:u,isPositive:c});return e("range",{"...any":function(d){var f=d.length-1,p=d[f];return typeof p!="boolean"&&d.push(!0),h.apply(null,d)}})},{isTransformFunction:!0}),NMe="row",OMe=["typed","Index","matrix","range"],RMe=ae(NMe,OMe,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,a=wW({typed:e,Index:t,matrix:n,range:i});return e("row",{"...any":function(o){var s=o.length-1,l=o[s];tr(l)&&(o[s]=l-1);try{return a.apply(null,o)}catch(u){throw Ra(u)}}})},{isTransformFunction:!0}),PMe="subset",IMe=["typed","matrix","zeros","add"],LMe=ae(PMe,IMe,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,a=SW({typed:e,matrix:t,zeros:n,add:i});return e("subset",{"...any":function(o){try{return a.apply(null,o)}catch(s){throw Ra(s)}}})},{isTransformFunction:!0}),FMe="concat",BMe=["typed","matrix","isInteger"],zMe=ae(FMe,BMe,r=>{var{typed:e,matrix:t,isInteger:n}=r,i=mW({typed:e,matrix:t,isInteger:n});return e("concat",{"...any":function(a){var o=a.length-1,s=a[o];tr(s)?a[o]=s-1:Kt(s)&&(a[o]=s.minus(1));try{return i.apply(null,a)}catch(l){throw Ra(l)}}})},{isTransformFunction:!0}),WB="diff",UMe=["typed","matrix","subtract","number","bignumber"],jMe=ae(WB,UMe,r=>{var{typed:e,matrix:t,subtract:n,number:i,bignumber:a}=r,o=vW({typed:e,matrix:t,subtract:n,number:i,bignumber:a});return e(WB,{"...any":function(s){s=oh(s);try{return o.apply(null,s)}catch(l){throw Ra(l)}}})},{isTransformFunction:!0}),HMe="std",VMe=["typed","map","sqrt","variance"],qMe=ae(HMe,VMe,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r,a=zW({typed:e,map:t,sqrt:n,variance:i});return e("std",{"...any":function(o){o=oh(o);try{return a.apply(null,o)}catch(s){throw Ra(s)}}})},{isTransformFunction:!0}),GB="sum",WMe=["typed","config","add","numeric"],GMe=ae(GB,WMe,r=>{var{typed:e,config:t,add:n,numeric:i}=r,a=PW({typed:e,config:t,add:n,numeric:i});return e(GB,{"...any":function(o){o=oh(o);try{return a.apply(null,o)}catch(s){throw Ra(s)}}})},{isTransformFunction:!0}),$Me="quantileSeq",XMe=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],YMe=ae($Me,XMe,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d}=r,f=BW({typed:e,bignumber:t,add:n,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d});return e("quantileSeq",{"Array | Matrix, number | BigNumber":f,"Array | Matrix, number | BigNumber, number":(v,y,g)=>f(v,y,p(g)),"Array | Matrix, number | BigNumber, boolean":f,"Array | Matrix, number | BigNumber, boolean, number":(v,y,g,w)=>f(v,y,g,p(w)),"Array | Matrix, Array | Matrix":f,"Array | Matrix, Array | Matrix, number":(v,y,g)=>f(v,y,p(g)),"Array | Matrix, Array | Matrix, boolean":f,"Array | Matrix, Array | Matrix, boolean, number":(v,y,g,w)=>f(v,y,g,p(w))});function p(v){return oh([[],v])[1]}},{isTransformFunction:!0}),$B="cumsum",JMe=["typed","add","unaryPlus"],ZMe=ae($B,JMe,r=>{var{typed:e,add:t,unaryPlus:n}=r,i=IW({typed:e,add:t,unaryPlus:n});return e($B,{"...any":function(a){if(a.length===2&&_o(a[0])){var o=a[1];tr(o)?a[1]=o-1:Kt(o)&&(a[1]=o.minus(1))}try{return i.apply(null,a)}catch(s){throw Ra(s)}}})},{isTransformFunction:!0}),XB="variance",KMe=["typed","add","subtract","multiply","divide","apply","isNaN"],QMe=ae(XB,KMe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:a,apply:o,isNaN:s}=r,l=FW({typed:e,add:t,subtract:n,multiply:i,divide:a,apply:o,isNaN:s});return e(XB,{"...any":function(u){u=oh(u);try{return l.apply(null,u)}catch(c){throw Ra(c)}}})},{isTransformFunction:!0}),YB="print",e2e=["typed","matrix","zeros","add"],t2e=ae(YB,e2e,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,a=EW({typed:e,matrix:t,zeros:n,add:i});return e(YB,{"string, Object | Array":function(s,l){return a(o(s),l)},"string, Object | Array, number | Object":function(s,l,u){return a(o(s),l,u)}});function o(s){return s.replace(_W,l=>{var u=l.slice(1).split("."),c=u.map(function(h){return!isNaN(h)&&h.length>0?parseInt(h)-1:h});return"$"+c.join(".")})}},{isTransformFunction:!0}),r2e="and",n2e=["typed","matrix","zeros","add","equalScalar","not","concat"],i2e=ae(r2e,n2e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:o}=r,s=CW({typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:o});function l(u,c,h){var d=u[0].compile().evaluate(h);if(!_o(d)&&!s(d,!0))return!1;var f=u[1].compile().evaluate(h);return s(d,f)}return l.rawArgs=!0,l},{isTransformFunction:!0}),a2e="or",o2e=["typed","matrix","equalScalar","DenseMatrix","concat"],s2e=ae(a2e,o2e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,o=pW({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a});function s(l,u,c){var h=l[0].compile().evaluate(c);if(!_o(h)&&o(h,!1))return!0;var d=l[1].compile().evaluate(c);return o(h,d)}return s.rawArgs=!0,s},{isTransformFunction:!0}),l2e="bitAnd",u2e=["typed","matrix","zeros","add","equalScalar","not","concat"],c2e=ae(l2e,u2e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:o}=r,s=dW({typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:o});function l(u,c,h){var d=u[0].compile().evaluate(h);if(!_o(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var f=u[1].compile().evaluate(h);return s(d,f)}return l.rawArgs=!0,l},{isTransformFunction:!0}),h2e="bitOr",d2e=["typed","matrix","equalScalar","DenseMatrix","concat"],f2e=ae(h2e,d2e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,o=fW({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a});function s(l,u,c){var h=l[0].compile().evaluate(c);if(!_o(h)){if(isNaN(h))return NaN;if(h===-1)return-1;if(h===!0)return 1}var d=l[1].compile().evaluate(c);return o(h,d)}return s.rawArgs=!0,s},{isTransformFunction:!0});const p2e=Object.freeze(Object.defineProperty({__proto__:null,createAbs:cle,createAccessorNode:yme,createAcos:Ffe,createAcosh:zfe,createAcot:jfe,createAcoth:Vfe,createAcsc:Wfe,createAcsch:$fe,createAdd:rme,createAddScalar:ple,createAnd:CW,createAndTransform:i2e,createApply:pN,createApplyTransform:nMe,createArg:tce,createArrayNode:xme,createAsec:Yfe,createAsech:Zfe,createAsin:Qfe,createAsinh:rpe,createAssignmentNode:_me,createAtan:ape,createAtan2:spe,createAtanh:upe,createAtomicMass:PSe,createAvogadro:ISe,createBellNumbers:nwe,createBigNumberClass:Moe,createBignumber:Hse,createBin:Fhe,createBitAnd:dW,createBitAndTransform:c2e,createBitNot:Xue,createBitOr:fW,createBitOrTransform:f2e,createBitXor:Que,createBlockNode:Cme,createBohrMagneton:pSe,createBohrRadius:xSe,createBoltzmann:LSe,createBoolean:zse,createCatalan:awe,createCbrt:yle,createCeil:Ale,createChain:Cbe,createChainClass:Jge,createClassicalElectronRadius:wSe,createClone:Qoe,createColumn:gW,createColumnTransform:oMe,createCombinations:mxe,createCombinationsWithRep:vxe,createCompare:kde,createCompareNatural:Pde,createCompareText:Fde,createCompile:age,createComplex:Wse,createComplexClass:Aoe,createComposition:swe,createConcat:mW,createConcatTransform:zMe,createConditionalNode:Tme,createConductanceQuantum:mSe,createConj:nce,createConstantNode:Lme,createCorr:fxe,createCos:hpe,createCosh:fpe,createCot:mpe,createCoth:vpe,createCoulomb:dSe,createCount:gce,createCreateUnit:Ife,createCross:yce,createCsc:bpe,createCsch:wpe,createCtranspose:che,createCube:Dle,createCumSum:IW,createCumSumTransform:ZMe,createDeepEqual:rfe,createDenseMatrixClass:Zoe,createDerivative:Cwe,createDet:Tbe,createDeuteronMass:ASe,createDiag:xce,createDiff:vW,createDiffTransform:jMe,createDistance:Kbe,createDivide:Jbe,createDivideScalar:Zhe,createDot:lme,createDotDivide:hde,createDotMultiply:Uue,createDotPow:ude,createE:$we,createEfimovFactor:RSe,createEigs:Fbe,createElectricConstant:cSe,createElectronMass:SSe,createElementaryCharge:fSe,createEqual:zde,createEqualScalar:Ase,createEqualText:Hde,createErf:_he,createEvaluate:sge,createExp:Nle,createExpm:zbe,createExpm1:Rle,createFactorial:Mxe,createFalse:jwe,createFaraday:FSe,createFermiCoupling:MSe,createFft:phe,createFibonacciHeapClass:xfe,createFilter:Mce,createFilterTransform:uMe,createFineStructure:_Se,createFirstRadiation:BSe,createFix:Lle,createFlatten:Ece,createFloor:uW,createForEach:Ace,createForEachTransform:dMe,createFormat:Ihe,createFraction:Xse,createFractionClass:Noe,createFreqz:Owe,createFunctionAssignmentNode:Bme,createFunctionNode:tge,createGamma:bxe,createGasConstant:USe,createGcd:lue,createGetMatrixDataType:kce,createGravitationConstant:oSe,createGravity:YSe,createHartreeEnergy:ESe,createHasNumericValue:gse,createHelp:_be,createHelpClass:$ge,createHex:jhe,createHypot:ime,createI:tSe,createIdentity:Oce,createIfft:ghe,createIm:ace,createImmutableDenseMatrixClass:pfe,createIndex:fme,createIndexClass:vfe,createIndexNode:Ume,createIndexTransform:mMe,createInfinity:Vwe,createIntersect:txe,createInv:kbe,createInverseConductanceQuantum:gSe,createInvmod:Lue,createIsInteger:tse,createIsNaN:Sse,createIsNegative:dse,createIsNumeric:pse,createIsPositive:yse,createIsPrime:Ghe,createIsZero:xse,createKldivergence:Exe,createKlitzing:bSe,createKron:Pce,createLN10:Jwe,createLN2:Ywe,createLOG10E:Kwe,createLOG2E:Zwe,createLarger:Jde,createLargerEq:Qde,createLcm:due,createLeafCount:uwe,createLeftShift:Mde,createLgamma:wxe,createLog:nde,createLog10:pue,createLog1p:ade,createLog2:gue,createLoschmidt:zSe,createLsolve:fde,createLsolveAll:vde,createLup:pge,createLusolve:Hge,createLyap:$be,createMad:lxe,createMagneticConstant:uSe,createMagneticFluxQuantum:vSe,createMap:Lce,createMapTransform:yMe,createMatrix:Jse,createMatrixClass:Foe,createMatrixFromColumns:rle,createMatrixFromFunction:Kse,createMatrixFromRows:ele,createMax:AW,createMaxTransform:wMe,createMean:LW,createMeanTransform:_Me,createMedian:oxe,createMin:TW,createMinTransform:AMe,createMod:cW,createMode:Nhe,createMolarMass:$Se,createMolarMassC12:XSe,createMolarPlanckConstant:jSe,createMolarVolume:HSe,createMultinomial:Axe,createMultiply:wue,createMultiplyScalar:bue,createNaN:qwe,createNeutronMass:TSe,createNode:gme,createNorm:ome,createNot:uce,createNthRoot:Mue,createNthRoots:sde,createNuclearMagneton:ySe,createNull:Hwe,createNumber:Ise,createNumeric:Yhe,createObjectNode:Hme,createOct:zhe,createOnes:jce,createOperatorNode:qme,createOr:pW,createOrTransform:s2e,createParenthesisNode:Gme,createParse:nge,createParser:dge,createParserClass:cge,createPartitionSelect:sfe,createPermutations:Dxe,createPhi:Xwe,createPi:Wwe,createPickRandom:Yxe,createPinv:Obe,createPlanckCharge:QSe,createPlanckConstant:sSe,createPlanckLength:JSe,createPlanckMass:ZSe,createPlanckTemperature:eMe,createPlanckTime:KSe,createPolynomialRoot:qge,createPow:Qhe,createPrint:EW,createPrintTransform:t2e,createProd:Rhe,createProtonMass:CSe,createQr:gge,createQuantileSeq:BW,createQuantileSeqTransform:YMe,createQuantumOfCirculation:DSe,createRandom:Zxe,createRandomInt:Qxe,createRange:xW,createRangeClass:Poe,createRangeNode:Xme,createRangeTransform:kMe,createRationalize:Twe,createRe:sce,createReducedPlanckConstant:lSe,createRelationalNode:Jme,createReplacer:Bwe,createReshape:qce,createResize:$ce,createResolve:Swe,createResultSet:Aae,createReviver:Iwe,createRightArithShift:Ede,createRightLogShift:Ade,createRotate:Yce,createRotationMatrix:Zce,createRound:tde,createRow:wW,createRowTransform:RMe,createRydberg:kSe,createSQRT1_2:Qwe,createSQRT2:eSe,createSackurTetrode:VSe,createSchur:Wbe,createSec:Mpe,createSech:Epe,createSecondRadiation:qSe,createSetCartesian:Lpe,createSetDifference:Bpe,createSetDistinct:Upe,createSetIntersect:Hpe,createSetIsSubset:qpe,createSetMultiplicity:Gpe,createSetPowerset:Xpe,createSetSize:Jpe,createSetSymDifference:Kpe,createSetUnion:eme,createSign:Eue,createSimplify:pwe,createSimplifyConstant:vwe,createSimplifyCore:bwe,createSin:Ape,createSinh:Dpe,createSize:ehe,createSlu:Uge,createSmaller:qde,createSmallerEq:$de,createSolveODE:whe,createSort:ufe,createSpaClass:Mfe,createSparse:Rfe,createSparseMatrixClass:kse,createSpeedOfLight:aSe,createSplitUnit:ile,createSqrt:Tue,createSqrtm:jbe,createSquare:kue,createSqueeze:rhe,createStd:zW,createStdTransform:qMe,createStefanBoltzmann:WSe,createStirlingS2:twe,createString:Fse,createSubset:SW,createSubsetTransform:LMe,createSubtract:Oue,createSubtractScalar:gle,createSum:PW,createSumTransform:GMe,createSylvester:Vbe,createSymbolNode:Qme,createSymbolicEqual:_we,createTan:Npe,createTanh:Ppe,createTau:Gwe,createThomsonCrossSection:NSe,createTo:qhe,createTrace:hme,createTranspose:lhe,createTrue:Uwe,createTypeOf:_se,createTyped:Mae,createUnaryMinus:ole,createUnaryPlus:lle,createUnequal:ife,createUnitClass:Dfe,createUnitFunction:Nfe,createUppercaseE:nSe,createUppercasePi:rSe,createUsolve:mde,createUsolveAll:bde,createVacuumImpedance:hSe,createVariance:FW,createVarianceTransform:QMe,createVersion:iSe,createWeakMixingAngle:OSe,createWienDisplacement:GSe,createXgcd:Pue,createXor:dce,createZeros:dhe,createZeta:Dhe,createZpk2tf:kwe},Symbol.toStringTag,{value:"Module"}));var m2e=p2e,_N={exports:{}};function EN(){}EN.prototype={on:function(r,e,t){var n=this.e||(this.e={});return(n[r]||(n[r]=[])).push({fn:e,ctx:t}),this},once:function(r,e,t){var n=this;function i(){n.off(r,i),e.apply(t,arguments)}return i._=e,this.on(r,i,t)},emit:function(r){var e=[].slice.call(arguments,1),t=((this.e||(this.e={}))[r]||[]).slice(),n=0,i=t.length;for(n;n<i;n++)t[n].fn.apply(t[n].ctx,e);return this},off:function(r,e){var t=this.e||(this.e={}),n=t[r],i=[];if(n&&e)for(var a=0,o=n.length;a<o;a++)n[a].fn!==e&&n[a].fn._!==e&&i.push(n[a]);return i.length?t[r]=i:delete t[r],this}};_N.exports=EN;_N.exports.TinyEmitter=EN;var g2e=_N.exports;const v2e=is(g2e);function y2e(r){var e=new v2e;return r.on=e.on.bind(e),r.off=e.off.bind(e),r.once=e.once.bind(e),r.emit=e.emit.bind(e),r}function b2e(r,e,t,n){function i(y,g){var w=arguments.length;if(w!==1&&w!==2)throw new Nu("import",w,1,2);g||(g={});function b(E,A,T){if(Array.isArray(A))A.forEach(O=>b(E,O));else if(typeof A=="object")for(var C in A)gt(A,C)&&b(E,A[C],C);else if(d0(A)||T!==void 0){var D=d0(A)?p(A)?A.fn+".transform":A.fn:T;if(gt(E,D)&&E[D]!==A&&!g.silent)throw new Error('Cannot import "'+D+'" twice');E[D]=A}else if(!g.silent)throw new TypeError("Factory, Object, or Array expected")}var m={};b(m,y);for(var x in m)if(gt(m,x)){var S=m[x];if(d0(S))u(S,g);else if(c(S))a(x,S,g);else if(!g.silent)throw new TypeError("Factory, Object, or Array expected")}}function a(y,g,w){if(w.wrap&&typeof g=="function"&&(g=l(g)),h(g)&&(g=r(y,{[g.signature]:g})),r.isTypedFunction(t[y])&&r.isTypedFunction(g)){w.override?g=r(y,g.signatures):g=r(t[y],g),t[y]=g,delete n[y],o(y,g),t.emit("import",y,function(){return g});return}if(t[y]===void 0||w.override){t[y]=g,delete n[y],o(y,g),t.emit("import",y,function(){return g});return}if(!w.silent)throw new Error('Cannot import "'+y+'": already exists')}function o(y,g){g&&typeof g.transform=="function"?(t.expression.transform[y]=g.transform,d(y)&&(t.expression.mathWithTransform[y]=g.transform)):(delete t.expression.transform[y],d(y)&&(t.expression.mathWithTransform[y]=g))}function s(y){delete t.expression.transform[y],d(y)?t.expression.mathWithTransform[y]=t[y]:delete t.expression.mathWithTransform[y]}function l(y){var g=function(){for(var w=[],b=0,m=arguments.length;b<m;b++){var x=arguments[b];w[b]=x&&x.valueOf()}return y.apply(t,w)};return y.transform&&(g.transform=y.transform),g}function u(y,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.fn;if(w.includes("."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(w));var b=p(y)?t.expression.transform:t,m=w in t.expression.transform,x=gt(b,w)?b[w]:void 0,S=function(){var E={};y.dependencies.map(FV).forEach(T=>{if(T.includes("."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(T));T==="math"?E.math=t:T==="mathWithTransform"?E.mathWithTransform=t.expression.mathWithTransform:T==="classes"?E.classes=t:E[T]=t[T]});var A=y(E);if(A&&typeof A.transform=="function")throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(x===void 0||g.override)return A;if(r.isTypedFunction(x)&&r.isTypedFunction(A))return r(x,A);if(g.silent)return x;throw new Error('Cannot import "'+w+'": already exists')};!y.meta||y.meta.lazy!==!1?($x(b,w,S),x&&m?s(w):(p(y)||f(y))&&$x(t.expression.mathWithTransform,w,()=>b[w])):(b[w]=S(),x&&m?s(w):(p(y)||f(y))&&$x(t.expression.mathWithTransform,w,()=>b[w])),n[w]=y,t.emit("import",w,S)}function c(y){return typeof y=="function"||typeof y=="number"||typeof y=="string"||typeof y=="boolean"||y===null||ja(y)||_s(y)||Kt(y)||Id(y)||Ft(y)||Array.isArray(y)}function h(y){return typeof y=="function"&&typeof y.signature=="string"}function d(y){return!gt(v,y)}function f(y){return!y.fn.includes(".")&&!gt(v,y.fn)&&(!y.meta||!y.meta.isClass)}function p(y){return y!==void 0&&y.meta!==void 0&&y.meta.isTransformFunction===!0||!1}var v={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return i}function XW(r,e){var t=lt({},vV,e);if(typeof Object.create!="function")throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var n=y2e({isNumber:tr,isComplex:_s,isBigNumber:Kt,isFraction:Id,isUnit:ja,isString:Ci,isArray:Sr,isMatrix:Ft,isCollection:_o,isDenseMatrix:W0,isSparseMatrix:gc,isRange:NM,isIndex:Zv,isBoolean:yV,isResultSet:bV,isHelp:sN,isFunction:xV,isDate:wV,isRegExp:SV,isObject:Kv,isNull:MV,isUndefined:_V,isAccessorNode:Uc,isArrayNode:co,isAssignmentNode:EV,isBlockNode:CV,isConditionalNode:AV,isConstantNode:mr,isFunctionAssignmentNode:gm,isFunctionNode:yu,isIndexNode:Ld,isNode:Rr,isObjectNode:Qv,isOperatorNode:Fn,isParenthesisNode:bl,isRangeNode:TV,isRelationalNode:DV,isSymbolNode:ai,isChain:lN});n.config=Kie(t,n.emit),n.expression={transform:{},mathWithTransform:{config:n.config}};var i=[],a=[];function o(c){if(d0(c))return c(n);var h=c[Object.keys(c)[0]];if(d0(h))return h(n);if(!Jie(c))throw console.warn("Factory object with properties `type`, `name`, and `factory` expected",c),new Error("Factory object with properties `type`, `name`, and `factory` expected");var d=i.indexOf(c),f;return d===-1?(c.math===!0?f=c.factory(n.type,t,o,n.typed,n):f=c.factory(n.type,t,o,n.typed),i.push(c),a.push(f)):f=a[d],f}var s={};function l(){for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];return n.typed.apply(n.typed,h)}l.isTypedFunction=Xh.isTypedFunction;var u=b2e(l,o,n,s);return n.import=u,n.on("config",()=>{Object.values(s).forEach(c=>{c&&c.meta&&c.meta.recreateOnConfigChange&&u(c,{override:!0})})}),n.create=XW.bind(null,r),n.factory=ae,n.import(Object.values(Yie(r))),n.ArgumentsError=Nu,n.DimensionError=ar,n.IndexError=as,n}class YW{constructor(e){this.isMoving=!1,this.color="black",this.atomType="Connector",this.selected=!1,this.attachmentPoint1=null,this.attachmentPoint2=null;for(var t in e)this[t]=e[t];this.startX=this.attachmentPoint1.parentMolecule.outputX,this.startY=this.attachmentPoint1.parentMolecule.y,this.attachmentPoint1.connectors.push(this),this.attachmentPoint2!=null&&this.attachmentPoint2.connectors.push(this)}draw(){let e=I.widthToPixels(this.startX),t=I.heightToPixels(this.startY),n=I.widthToPixels(this.endX),i=I.heightToPixels(this.endY);I.c.beginPath(),I.c.fillStyle=this.color,I.c.strokeStyle=this.color,I.c.globalCompositeOperation="destination-over",this.selected?I.c.lineWidth=3:I.c.lineWidth=1,I.c.moveTo(e,t),I.c.bezierCurveTo(e+100,t,n-100,i,n,i),I.c.stroke(),I.c.globalCompositeOperation="source-over"}clickUp(e,t){if(this.isMoving){var n=!1;I.currentMolecule.nodesOnTheScreen.forEach(i=>{i.inputs.forEach(a=>{a.wasConnectionMade(e,t)&&!n&&this.attachmentPoint1.parentMolecule!==a.parentMolecule&&(n=!0,this.attachmentPoint2=a,a.attach(this),this.propogate())})}),n||this.deleteSelf(),this.isMoving=!1}}mouseMove(e,t){this.isMoving==!0&&(this.endX=I.pixelsToWidth(e),this.endY=I.pixelsToHeight(t))}keyPress(e){this.selected&&["Delete","Backspace"].includes(e)&&this.deleteSelf()}deleteSelf(e=!1){this.attachmentPoint1.deleteConnector(this),this.attachmentPoint2!=null&&(this.attachmentPoint2.deleteConnector(this),e||this.attachmentPoint2.setDefault())}serialize(){if(this.attachmentPoint2!=null){var e={ap1Name:this.attachmentPoint1.name,ap2Name:this.attachmentPoint2.name,ap2Primary:this.attachmentPoint2.primary,ap1ID:this.attachmentPoint1.parentMolecule.uniqueID,ap2ID:this.attachmentPoint2.parentMolecule.uniqueID};return e}}waitOnComingInformation(){this.attachmentPoint2&&this.attachmentPoint2.waitOnComingInformation()}propogate(){this.attachmentPoint1.ready&&this.attachmentPoint2&&this.attachmentPoint2.setValue(this.attachmentPoint1.getValue())}walkBackForConstants(e){this.attachmentPoint1.parentMolecule.walkBackForConstants(e)}update(){this.startX=this.attachmentPoint1.x,this.startY=this.attachmentPoint1.y,this.attachmentPoint2&&(this.endX=this.attachmentPoint2.x,this.endY=this.attachmentPoint2.y),this.draw()}}class so{static get DIST_FROM_PARENT(){return 3.5}static get TARGET_SCALEUP(){return 1.2}static get RADIUS(){return 1/150}constructor(e){this.isVisible=!1,this.isTargetted=!1,this.x,this.y,this.uniqueID=0,this.atomType="AttachmentPoint",this.valueType="number",this.type="output",this.value=10,this.defaultValue=10,this.ready=!0,this.connectors=[];for(var t in e)this[t]=e[t];this.unexpand()}draw(){if(!this.isVisible)return;let e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),n=I.widthToPixels(so.RADIUS);this.isTargetted&&(n=n*so.TARGET_SCALEUP),I.c.font="10px Work Sans";var i=I.c.measureText(this.name).width,a=this.name==="geometry"?this.parentMolecule.selectedColor:"#C300FF",o=n*.5;I.c.globalCompositeOperation="source-over",I.c.beginPath(),I.c.fillStyle=a;var s=t-n,l=e;this.type=="input"&&(l=e-i-n-o);var u=l;this.type=="output"&&(u=l+n+o),I.c.arc(l,t,n,Math.PI/2,-1*Math.PI/2),I.c.rect(l,s,i+n+o,n*2),I.c.arc(l+i+n+o,t,n,-1*Math.PI/2,Math.PI/2),I.c.fill(),I.c.beginPath(),I.c.fillStyle=this.parentMolecule.defaultColor,I.c.fillText(this.name,u,t+2),I.c.fill(),I.c.closePath(),I.c.beginPath(),this.ready?I.c.fillStyle=this.parentMolecule.color:I.c.fillStyle="#6ba4ff",I.c.strokeStyle=this.parentMolecule.strokeColor,I.c.lineWidth=1,I.c.arc(e,t,n,0,Math.PI*2,!1),I.c.fill(),I.c.stroke(),I.c.closePath()}clickDown(e,t,n){return this.isCloseEnoughToTarget(e,t)&&!n?(this.type=="output"&&new YW({parentMolecule:this.parentMolecule,attachmentPoint1:this,atomType:"Connector",isMoving:!0}),this.type=="input"&&this.connectors.forEach(i=>{i.selected=!0}),!0):(this.type=="input"&&this.connectors.forEach(i=>{i.selected=!1}),!1)}clickUp(e,t){this.connectors.forEach(n=>{n.clickUp(e,t)})}mouseMove(e,t){let n=so.DIST_FROM_PARENT*this.parentMolecule.radius,i=I.widthToPixels(this.parentMolecule.x),a=I.heightToPixels(this.parentMolecule.y);I.distBetweenPoints(i,e,a,t)<=I.widthToPixels(n)?(this.isVisible=!0,[this.x,this.y]=this.computePosition(n),[this.x,this.y]=I.constrainToCanvasBorders(this.x,this.y),this.isTargetted=this.isCloseEnoughToTarget(e,t)):this.unexpand(),this.connectors.forEach(o=>{o.mouseMove(e,t)})}unexpand(){this.isVisible=!1,this.isTargetted=!1,this.y=this.parentMolecule.y,this.type=="input"?this.x=this.parentMolecule.x-this.parentMolecule.radius:this.x=this.parentMolecule.x+this.parentMolecule.radius,[this.x,this.y]=I.constrainToCanvasBorders(this.x,this.y)}computePosition(e){const t=this.parentMolecule.inputs.filter(n=>n.type=="input");if(this.type=="output")return[this.parentMolecule.x+this.parentMolecule.radius+so.RADIUS*.75,this.parentMolecule.y];if(this.type=="input"&&t.length==1)return[this.parentMolecule.x-this.parentMolecule.radius-so.RADIUS*.75,this.parentMolecule.y];{const n=t.indexOf(this),i=Math.PI/(t.length+1),a=e-so.RADIUS*so.TARGET_SCALEUP,o=Math.PI/2+i;let s=a*Math.cos(n*i+o),l=-1*I.pixelsToHeight(I.widthToPixels(a)*Math.sin(n*i+o));return[this.parentMolecule.x+s,this.parentMolecule.y+l]}}isCloseEnoughToTarget(e,t){if(!this.isVisible)return!1;const n=I.distBetweenPoints(e,I.widthToPixels(this.x),t,I.heightToPixels(this.y)),i=I.widthToPixels(so.RADIUS);if(this.type=="output")return n<=i*2;{let a=i*2;const o=this.parentMolecule.inputs.filter(c=>c.type=="input").length;let s=I.widthToPixels(so.DIST_FROM_PARENT*this.parentMolecule.radius-so.RADIUS*so.TARGET_SCALEUP);const l=Math.PI/(o+1),u=s*Math.sin(l/2);return a=Math.max(i,Math.min(a,u)),n<a}}keyPress(e){this.connectors.forEach(t=>{t.keyPress(e)})}deleteSelf(e=!1){var t=[...this.connectors];t.forEach(n=>{n.deleteSelf(e)})}deleteConnector(e="all"){try{const t=this.connectors.indexOf(e);t!=-1?this.connectors.splice(t,1):this.connectors=[]}catch(t){console.warn("Error deleting connector: "),console.warn(t)}}wasConnectionMade(e,t){return this.isCloseEnoughToTarget(e,t)&&this.connectors.length==0}attach(e){this.connectors.push(e)}beginPropagation(){this.connectors.length==0&&this.setValue(this.value)}waitOnComingInformation(){this.type=="output"?this.connectors.forEach(e=>{e.waitOnComingInformation()}):(this.ready=!1,this.parentMolecule.waitOnComingInformation(this.name))}setDefault(){this.setValue(this.defaultValue)}updateDefault(e){var t=this.defaultValue;this.defaultValue=e,this.connectors.length==0&&this.value==t&&(this.value=this.defaultValue)}getValue(){return this.value}setValue(e){this.value=e,this.ready=!0,this.type=="output"?this.connectors.forEach(t=>{t.propogate()}):this.parentMolecule.updateValue(this.name)}update(){this.draw(),this.connectors.forEach(e=>{e.update()})}}var x2e={exports:{}};(function(r){(function(){function e(m){var x={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(m===!1)return JSON.parse(JSON.stringify(x));var S={};for(var E in x)x.hasOwnProperty(E)&&(S[E]=x[E].defaultValue);return S}function t(){var m=e(!0),x={};for(var S in m)m.hasOwnProperty(S)&&(x[S]=!0);return x}var n={},i={},a={},o=e(!0),s="vanilla",l={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:t()};n.helper={},n.extensions={},n.setOption=function(m,x){return o[m]=x,this},n.getOption=function(m){return o[m]},n.getOptions=function(){return o},n.resetOptions=function(){o=e(!0)},n.setFlavor=function(m){if(!l.hasOwnProperty(m))throw Error(m+" flavor was not found");n.resetOptions();var x=l[m];s=m;for(var S in x)x.hasOwnProperty(S)&&(o[S]=x[S])},n.getFlavor=function(){return s},n.getFlavorOptions=function(m){if(l.hasOwnProperty(m))return l[m]},n.getDefaultOptions=function(m){return e(m)},n.subParser=function(m,x){if(n.helper.isString(m))if(typeof x<"u")i[m]=x;else{if(i.hasOwnProperty(m))return i[m];throw Error("SubParser named "+m+" not registered!")}},n.extension=function(m,x){if(!n.helper.isString(m))throw Error("Extension 'name' must be a string");if(m=n.helper.stdExtName(m),n.helper.isUndefined(x)){if(!a.hasOwnProperty(m))throw Error("Extension named "+m+" is not registered!");return a[m]}else{typeof x=="function"&&(x=x()),n.helper.isArray(x)||(x=[x]);var S=u(x,m);if(S.valid)a[m]=x;else throw Error(S.error)}},n.getAllExtensions=function(){return a},n.removeExtension=function(m){delete a[m]},n.resetExtensions=function(){a={}};function u(m,x){var S=x?"Error in "+x+" extension->":"Error in unnamed extension",E={valid:!0,error:""};n.helper.isArray(m)||(m=[m]);for(var A=0;A<m.length;++A){var T=S+" sub-extension "+A+": ",C=m[A];if(typeof C!="object")return E.valid=!1,E.error=T+"must be an object, but "+typeof C+" given",E;if(!n.helper.isString(C.type))return E.valid=!1,E.error=T+'property "type" must be a string, but '+typeof C.type+" given",E;var D=C.type=C.type.toLowerCase();if(D==="language"&&(D=C.type="lang"),D==="html"&&(D=C.type="output"),D!=="lang"&&D!=="output"&&D!=="listener")return E.valid=!1,E.error=T+"type "+D+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',E;if(D==="listener"){if(n.helper.isUndefined(C.listeners))return E.valid=!1,E.error=T+'. Extensions of type "listener" must have a property called "listeners"',E}else if(n.helper.isUndefined(C.filter)&&n.helper.isUndefined(C.regex))return E.valid=!1,E.error=T+D+' extensions must define either a "regex" property or a "filter" method',E;if(C.listeners){if(typeof C.listeners!="object")return E.valid=!1,E.error=T+'"listeners" property must be an object but '+typeof C.listeners+" given",E;for(var O in C.listeners)if(C.listeners.hasOwnProperty(O)&&typeof C.listeners[O]!="function")return E.valid=!1,E.error=T+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+O+" must be a function but "+typeof C.listeners[O]+" given",E}if(C.filter){if(typeof C.filter!="function")return E.valid=!1,E.error=T+'"filter" must be a function, but '+typeof C.filter+" given",E}else if(C.regex){if(n.helper.isString(C.regex)&&(C.regex=new RegExp(C.regex,"g")),!(C.regex instanceof RegExp))return E.valid=!1,E.error=T+'"regex" property must either be a string or a RegExp object, but '+typeof C.regex+" given",E;if(n.helper.isUndefined(C.replace))return E.valid=!1,E.error=T+'"regex" extensions must implement a replace string or function',E}}return E}n.validateExtension=function(m){var x=u(m,null);return x.valid?!0:(console.warn(x.error),!1)},n.hasOwnProperty("helper")||(n.helper={}),n.helper.isString=function(m){return typeof m=="string"||m instanceof String},n.helper.isFunction=function(m){var x={};return m&&x.toString.call(m)==="[object Function]"},n.helper.isArray=function(m){return Array.isArray(m)},n.helper.isUndefined=function(m){return typeof m>"u"},n.helper.forEach=function(m,x){if(n.helper.isUndefined(m))throw new Error("obj param is required");if(n.helper.isUndefined(x))throw new Error("callback param is required");if(!n.helper.isFunction(x))throw new Error("callback param must be a function/closure");if(typeof m.forEach=="function")m.forEach(x);else if(n.helper.isArray(m))for(var S=0;S<m.length;S++)x(m[S],S,m);else if(typeof m=="object")for(var E in m)m.hasOwnProperty(E)&&x(m[E],E,m);else throw new Error("obj does not seem to be an array or an iterable object")},n.helper.stdExtName=function(m){return m.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function c(m,x){var S=x.charCodeAt(0);return"¨E"+S+"E"}n.helper.escapeCharactersCallback=c,n.helper.escapeCharacters=function(m,x,S){var E="(["+x.replace(/([\[\]\\])/g,"\\$1")+"])";S&&(E="\\\\"+E);var A=new RegExp(E,"g");return m=m.replace(A,c),m},n.helper.unescapeHTMLEntities=function(m){return m.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var h=function(m,x,S,E){var A=E||"",T=A.indexOf("g")>-1,C=new RegExp(x+"|"+S,"g"+A.replace(/g/g,"")),D=new RegExp(x,A.replace(/g/g,"")),O=[],U,L,F,k,R;do for(U=0;F=C.exec(m);)if(D.test(F[0]))U++||(L=C.lastIndex,k=L-F[0].length);else if(U&&!--U){R=F.index+F[0].length;var z={left:{start:k,end:L},match:{start:L,end:F.index},right:{start:F.index,end:R},wholeMatch:{start:k,end:R}};if(O.push(z),!T)return O}while(U&&(C.lastIndex=L));return O};n.helper.matchRecursiveRegExp=function(m,x,S,E){for(var A=h(m,x,S,E),T=[],C=0;C<A.length;++C)T.push([m.slice(A[C].wholeMatch.start,A[C].wholeMatch.end),m.slice(A[C].match.start,A[C].match.end),m.slice(A[C].left.start,A[C].left.end),m.slice(A[C].right.start,A[C].right.end)]);return T},n.helper.replaceRecursiveRegExp=function(m,x,S,E,A){if(!n.helper.isFunction(x)){var T=x;x=function(){return T}}var C=h(m,S,E,A),D=m,O=C.length;if(O>0){var U=[];C[0].wholeMatch.start!==0&&U.push(m.slice(0,C[0].wholeMatch.start));for(var L=0;L<O;++L)U.push(x(m.slice(C[L].wholeMatch.start,C[L].wholeMatch.end),m.slice(C[L].match.start,C[L].match.end),m.slice(C[L].left.start,C[L].left.end),m.slice(C[L].right.start,C[L].right.end))),L<O-1&&U.push(m.slice(C[L].wholeMatch.end,C[L+1].wholeMatch.start));C[O-1].wholeMatch.end<m.length&&U.push(m.slice(C[O-1].wholeMatch.end)),D=U.join("")}return D},n.helper.regexIndexOf=function(m,x,S){if(!n.helper.isString(m))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(x instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var E=m.substring(S||0).search(x);return E>=0?E+(S||0):E},n.helper.splitAtIndex=function(m,x){if(!n.helper.isString(m))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[m.substring(0,x),m.substring(x)]},n.helper.encodeEmailAddress=function(m){var x=[function(S){return"&#"+S.charCodeAt(0)+";"},function(S){return"&#x"+S.charCodeAt(0).toString(16)+";"},function(S){return S}];return m=m.replace(/./g,function(S){if(S==="@")S=x[Math.floor(Math.random()*2)](S);else{var E=Math.random();S=E>.9?x[2](S):E>.45?x[1](S):x[0](S)}return S}),m},n.helper.padEnd=function(m,x,S){return x=x>>0,S=String(S||" "),m.length>x?String(m):(x=x-m.length,x>S.length&&(S+=S.repeat(x/S.length)),String(m)+S.slice(0,x))},typeof console>"u"&&(console={warn:function(m){alert(m)},log:function(m){alert(m)},error:function(m){throw m}}),n.helper.regexes={asteriskDashAndColon:/([*_:~])/g},n.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},n.Converter=function(m){var x={},S=[],E=[],A={},T=s,C={parsed:{},raw:"",format:""};D();function D(){m=m||{};for(var k in o)o.hasOwnProperty(k)&&(x[k]=o[k]);if(typeof m=="object")for(var R in m)m.hasOwnProperty(R)&&(x[R]=m[R]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof m+" was passed instead.");x.extensions&&n.helper.forEach(x.extensions,O)}function O(k,R){if(R=R||null,n.helper.isString(k))if(k=n.helper.stdExtName(k),R=k,n.extensions[k]){console.warn("DEPRECATION WARNING: "+k+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),U(n.extensions[k],k);return}else if(!n.helper.isUndefined(a[k]))k=a[k];else throw Error('Extension "'+k+'" could not be loaded. It was either not found or is not a valid extension.');typeof k=="function"&&(k=k()),n.helper.isArray(k)||(k=[k]);var z=u(k,R);if(!z.valid)throw Error(z.error);for(var B=0;B<k.length;++B){switch(k[B].type){case"lang":S.push(k[B]);break;case"output":E.push(k[B]);break}if(k[B].hasOwnProperty("listeners"))for(var X in k[B].listeners)k[B].listeners.hasOwnProperty(X)&&L(X,k[B].listeners[X])}}function U(k,R){typeof k=="function"&&(k=k(new n.Converter)),n.helper.isArray(k)||(k=[k]);var z=u(k,R);if(!z.valid)throw Error(z.error);for(var B=0;B<k.length;++B)switch(k[B].type){case"lang":S.push(k[B]);break;case"output":E.push(k[B]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function L(k,R){if(!n.helper.isString(k))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof k+" given");if(typeof R!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof R+" given");A.hasOwnProperty(k)||(A[k]=[]),A[k].push(R)}function F(k){var R=k.match(/^\s*/)[0].length,z=new RegExp("^\\s{0,"+R+"}","gm");return k.replace(z,"")}this._dispatch=function(k,R,z,B){if(A.hasOwnProperty(k))for(var X=0;X<A[k].length;++X){var Z=A[k][X](k,R,this,z,B);Z&&typeof Z<"u"&&(R=Z)}return R},this.listen=function(k,R){return L(k,R),this},this.makeHtml=function(k){if(!k)return k;var R={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:S,outputModifiers:E,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return k=k.replace(/¨/g,"¨T"),k=k.replace(/\$/g,"¨D"),k=k.replace(/\r\n/g,`
`),k=k.replace(/\r/g,`
`),k=k.replace(/\u00A0/g,"&nbsp;"),x.smartIndentationFix&&(k=F(k)),k=`

`+k+`

`,k=n.subParser("detab")(k,x,R),k=k.replace(/^[ \t]+$/mg,""),n.helper.forEach(S,function(z){k=n.subParser("runExtension")(z,k,x,R)}),k=n.subParser("metadata")(k,x,R),k=n.subParser("hashPreCodeTags")(k,x,R),k=n.subParser("githubCodeBlocks")(k,x,R),k=n.subParser("hashHTMLBlocks")(k,x,R),k=n.subParser("hashCodeTags")(k,x,R),k=n.subParser("stripLinkDefinitions")(k,x,R),k=n.subParser("blockGamut")(k,x,R),k=n.subParser("unhashHTMLSpans")(k,x,R),k=n.subParser("unescapeSpecialChars")(k,x,R),k=k.replace(/¨D/g,"$$"),k=k.replace(/¨T/g,"¨"),k=n.subParser("completeHTMLDocument")(k,x,R),n.helper.forEach(E,function(z){k=n.subParser("runExtension")(z,k,x,R)}),C=R.metadata,k},this.makeMarkdown=this.makeMd=function(k,R){if(k=k.replace(/\r\n/g,`
`),k=k.replace(/\r/g,`
`),k=k.replace(/>[ \t]+</,">¨NBSP;<"),!R)if(window&&window.document)R=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var z=R.createElement("div");z.innerHTML=k;var B={preList:ne(z)};J(z);for(var X=z.childNodes,Z="",Q=0;Q<X.length;Q++)Z+=n.subParser("makeMarkdown.node")(X[Q],B);function J(fe){for(var se=0;se<fe.childNodes.length;++se){var ye=fe.childNodes[se];ye.nodeType===3?!/\S/.test(ye.nodeValue)&&!/^[ ]+$/.test(ye.nodeValue)?(fe.removeChild(ye),--se):(ye.nodeValue=ye.nodeValue.split(`
`).join(" "),ye.nodeValue=ye.nodeValue.replace(/(\s)+/g,"$1")):ye.nodeType===1&&J(ye)}}function ne(fe){for(var se=fe.querySelectorAll("pre"),ye=[],De=0;De<se.length;++De)if(se[De].childElementCount===1&&se[De].firstChild.tagName.toLowerCase()==="code"){var pe=se[De].firstChild.innerHTML.trim(),Te=se[De].firstChild.getAttribute("data-language")||"";if(Te==="")for(var be=se[De].firstChild.className.split(" "),re=0;re<be.length;++re){var Re=be[re].match(/^language-(.+)$/);if(Re!==null){Te=Re[1];break}}pe=n.helper.unescapeHTMLEntities(pe),ye.push(pe),se[De].outerHTML='<precode language="'+Te+'" precodenum="'+De.toString()+'"></precode>'}else ye.push(se[De].innerHTML),se[De].innerHTML="",se[De].setAttribute("prenum",De.toString());return ye}return Z},this.setOption=function(k,R){x[k]=R},this.getOption=function(k){return x[k]},this.getOptions=function(){return x},this.addExtension=function(k,R){R=R||null,O(k,R)},this.useExtension=function(k){O(k)},this.setFlavor=function(k){if(!l.hasOwnProperty(k))throw Error(k+" flavor was not found");var R=l[k];T=k;for(var z in R)R.hasOwnProperty(z)&&(x[z]=R[z])},this.getFlavor=function(){return T},this.removeExtension=function(k){n.helper.isArray(k)||(k=[k]);for(var R=0;R<k.length;++R){for(var z=k[R],B=0;B<S.length;++B)S[B]===z&&S.splice(B,1);for(var X=0;X<E.length;++X)E[X]===z&&E.splice(X,1)}},this.getAllExtensions=function(){return{language:S,output:E}},this.getMetadata=function(k){return k?C.raw:C.parsed},this.getMetadataFormat=function(){return C.format},this._setMetadataPair=function(k,R){C.parsed[k]=R},this._setMetadataFormat=function(k){C.format=k},this._setMetadataRaw=function(k){C.raw=k}},n.subParser("anchors",function(m,x,S){m=S.converter._dispatch("anchors.before",m,x,S);var E=function(A,T,C,D,O,U,L){if(n.helper.isUndefined(L)&&(L=""),C=C.toLowerCase(),A.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)D="";else if(!D)if(C||(C=T.toLowerCase().replace(/ ?\n/g," ")),D="#"+C,!n.helper.isUndefined(S.gUrls[C]))D=S.gUrls[C],n.helper.isUndefined(S.gTitles[C])||(L=S.gTitles[C]);else return A;D=D.replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback);var F='<a href="'+D+'"';return L!==""&&L!==null&&(L=L.replace(/"/g,"&quot;"),L=L.replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback),F+=' title="'+L+'"'),x.openLinksInNewWindow&&!/^#/.test(D)&&(F+=' rel="noopener noreferrer" target="¨E95Eblank"'),F+=">"+T+"</a>",F};return m=m.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,E),m=m.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,E),m=m.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,E),m=m.replace(/\[([^\[\]]+)]()()()()()/g,E),x.ghMentions&&(m=m.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(A,T,C,D,O){if(C==="\\")return T+D;if(!n.helper.isString(x.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var U=x.ghMentionsLink.replace(/\{u}/g,O),L="";return x.openLinksInNewWindow&&(L=' rel="noopener noreferrer" target="¨E95Eblank"'),T+'<a href="'+U+'"'+L+">"+D+"</a>"})),m=S.converter._dispatch("anchors.after",m,x,S),m});var d=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,f=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,p=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,v=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,y=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,g=function(m){return function(x,S,E,A,T,C,D){E=E.replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback);var O=E,U="",L="",F=S||"",k=D||"";return/^www\./i.test(E)&&(E=E.replace(/^www\./i,"http://www.")),m.excludeTrailingPunctuationFromURLs&&C&&(U=C),m.openLinksInNewWindow&&(L=' rel="noopener noreferrer" target="¨E95Eblank"'),F+'<a href="'+E+'"'+L+">"+O+"</a>"+U+k}},w=function(m,x){return function(S,E,A){var T="mailto:";return E=E||"",A=n.subParser("unescapeSpecialChars")(A,m,x),m.encodeEmails?(T=n.helper.encodeEmailAddress(T+A),A=n.helper.encodeEmailAddress(A)):T=T+A,E+'<a href="'+T+'">'+A+"</a>"}};n.subParser("autoLinks",function(m,x,S){return m=S.converter._dispatch("autoLinks.before",m,x,S),m=m.replace(p,g(x)),m=m.replace(y,w(x,S)),m=S.converter._dispatch("autoLinks.after",m,x,S),m}),n.subParser("simplifiedAutoLinks",function(m,x,S){return x.simplifiedAutoLink&&(m=S.converter._dispatch("simplifiedAutoLinks.before",m,x,S),x.excludeTrailingPunctuationFromURLs?m=m.replace(f,g(x)):m=m.replace(d,g(x)),m=m.replace(v,w(x,S)),m=S.converter._dispatch("simplifiedAutoLinks.after",m,x,S)),m}),n.subParser("blockGamut",function(m,x,S){return m=S.converter._dispatch("blockGamut.before",m,x,S),m=n.subParser("blockQuotes")(m,x,S),m=n.subParser("headers")(m,x,S),m=n.subParser("horizontalRule")(m,x,S),m=n.subParser("lists")(m,x,S),m=n.subParser("codeBlocks")(m,x,S),m=n.subParser("tables")(m,x,S),m=n.subParser("hashHTMLBlocks")(m,x,S),m=n.subParser("paragraphs")(m,x,S),m=S.converter._dispatch("blockGamut.after",m,x,S),m}),n.subParser("blockQuotes",function(m,x,S){m=S.converter._dispatch("blockQuotes.before",m,x,S),m=m+`

`;var E=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return x.splitAdjacentBlockquotes&&(E=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),m=m.replace(E,function(A){return A=A.replace(/^[ \t]*>[ \t]?/gm,""),A=A.replace(/¨0/g,""),A=A.replace(/^[ \t]+$/gm,""),A=n.subParser("githubCodeBlocks")(A,x,S),A=n.subParser("blockGamut")(A,x,S),A=A.replace(/(^|\n)/g,"$1  "),A=A.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(T,C){var D=C;return D=D.replace(/^  /mg,"¨0"),D=D.replace(/¨0/g,""),D}),n.subParser("hashBlock")(`<blockquote>
`+A+`
</blockquote>`,x,S)}),m=S.converter._dispatch("blockQuotes.after",m,x,S),m}),n.subParser("codeBlocks",function(m,x,S){m=S.converter._dispatch("codeBlocks.before",m,x,S),m+="¨0";var E=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g;return m=m.replace(E,function(A,T,C){var D=T,O=C,U=`
`;return D=n.subParser("outdent")(D,x,S),D=n.subParser("encodeCode")(D,x,S),D=n.subParser("detab")(D,x,S),D=D.replace(/^\n+/g,""),D=D.replace(/\n+$/g,""),x.omitExtraWLInCodeBlocks&&(U=""),D="<pre><code>"+D+U+"</code></pre>",n.subParser("hashBlock")(D,x,S)+O}),m=m.replace(/¨0/,""),m=S.converter._dispatch("codeBlocks.after",m,x,S),m}),n.subParser("codeSpans",function(m,x,S){return m=S.converter._dispatch("codeSpans.before",m,x,S),typeof m>"u"&&(m=""),m=m.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(E,A,T,C){var D=C;return D=D.replace(/^([ \t]*)/g,""),D=D.replace(/[ \t]*$/g,""),D=n.subParser("encodeCode")(D,x,S),D=A+"<code>"+D+"</code>",D=n.subParser("hashHTMLSpans")(D,x,S),D}),m=S.converter._dispatch("codeSpans.after",m,x,S),m}),n.subParser("completeHTMLDocument",function(m,x,S){if(!x.completeHTMLDocument)return m;m=S.converter._dispatch("completeHTMLDocument.before",m,x,S);var E="html",A=`<!DOCTYPE HTML>
`,T="",C=`<meta charset="utf-8">
`,D="",O="";typeof S.metadata.parsed.doctype<"u"&&(A="<!DOCTYPE "+S.metadata.parsed.doctype+`>
`,E=S.metadata.parsed.doctype.toString().toLowerCase(),(E==="html"||E==="html5")&&(C='<meta charset="utf-8">'));for(var U in S.metadata.parsed)if(S.metadata.parsed.hasOwnProperty(U))switch(U.toLowerCase()){case"doctype":break;case"title":T="<title>"+S.metadata.parsed.title+`</title>
`;break;case"charset":E==="html"||E==="html5"?C='<meta charset="'+S.metadata.parsed.charset+`">
`:C='<meta name="charset" content="'+S.metadata.parsed.charset+`">
`;break;case"language":case"lang":D=' lang="'+S.metadata.parsed[U]+'"',O+='<meta name="'+U+'" content="'+S.metadata.parsed[U]+`">
`;break;default:O+='<meta name="'+U+'" content="'+S.metadata.parsed[U]+`">
`}return m=A+"<html"+D+`>
<head>
`+T+C+O+`</head>
<body>
`+m.trim()+`
</body>
</html>`,m=S.converter._dispatch("completeHTMLDocument.after",m,x,S),m}),n.subParser("detab",function(m,x,S){return m=S.converter._dispatch("detab.before",m,x,S),m=m.replace(/\t(?=\t)/g,"    "),m=m.replace(/\t/g,"¨A¨B"),m=m.replace(/¨B(.+?)¨A/g,function(E,A){for(var T=A,C=4-T.length%4,D=0;D<C;D++)T+=" ";return T}),m=m.replace(/¨A/g,"    "),m=m.replace(/¨B/g,""),m=S.converter._dispatch("detab.after",m,x,S),m}),n.subParser("ellipsis",function(m,x,S){return x.ellipsis&&(m=S.converter._dispatch("ellipsis.before",m,x,S),m=m.replace(/\.\.\./g,"…"),m=S.converter._dispatch("ellipsis.after",m,x,S)),m}),n.subParser("emoji",function(m,x,S){if(!x.emoji)return m;m=S.converter._dispatch("emoji.before",m,x,S);var E=/:([\S]+?):/g;return m=m.replace(E,function(A,T){return n.helper.emojis.hasOwnProperty(T)?n.helper.emojis[T]:A}),m=S.converter._dispatch("emoji.after",m,x,S),m}),n.subParser("encodeAmpsAndAngles",function(m,x,S){return m=S.converter._dispatch("encodeAmpsAndAngles.before",m,x,S),m=m.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),m=m.replace(/<(?![a-z\/?$!])/gi,"&lt;"),m=m.replace(/</g,"&lt;"),m=m.replace(/>/g,"&gt;"),m=S.converter._dispatch("encodeAmpsAndAngles.after",m,x,S),m}),n.subParser("encodeBackslashEscapes",function(m,x,S){return m=S.converter._dispatch("encodeBackslashEscapes.before",m,x,S),m=m.replace(/\\(\\)/g,n.helper.escapeCharactersCallback),m=m.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,n.helper.escapeCharactersCallback),m=S.converter._dispatch("encodeBackslashEscapes.after",m,x,S),m}),n.subParser("encodeCode",function(m,x,S){return m=S.converter._dispatch("encodeCode.before",m,x,S),m=m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,n.helper.escapeCharactersCallback),m=S.converter._dispatch("encodeCode.after",m,x,S),m}),n.subParser("escapeSpecialCharsWithinTagAttributes",function(m,x,S){m=S.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",m,x,S);var E=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,A=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return m=m.replace(E,function(T){return T.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,n.helper.escapeCharactersCallback)}),m=m.replace(A,function(T){return T.replace(/([\\`*_~=|])/g,n.helper.escapeCharactersCallback)}),m=S.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",m,x,S),m}),n.subParser("githubCodeBlocks",function(m,x,S){return x.ghCodeBlocks?(m=S.converter._dispatch("githubCodeBlocks.before",m,x,S),m+="¨0",m=m.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(E,A,T,C){var D=x.omitExtraWLInCodeBlocks?"":`
`;return C=n.subParser("encodeCode")(C,x,S),C=n.subParser("detab")(C,x,S),C=C.replace(/^\n+/g,""),C=C.replace(/\n+$/g,""),C="<pre><code"+(T?' class="'+T+" language-"+T+'"':"")+">"+C+D+"</code></pre>",C=n.subParser("hashBlock")(C,x,S),`

¨G`+(S.ghCodeBlocks.push({text:E,codeblock:C})-1)+`G

`}),m=m.replace(/¨0/,""),S.converter._dispatch("githubCodeBlocks.after",m,x,S)):m}),n.subParser("hashBlock",function(m,x,S){return m=S.converter._dispatch("hashBlock.before",m,x,S),m=m.replace(/(^\n+|\n+$)/g,""),m=`

¨K`+(S.gHtmlBlocks.push(m)-1)+`K

`,m=S.converter._dispatch("hashBlock.after",m,x,S),m}),n.subParser("hashCodeTags",function(m,x,S){m=S.converter._dispatch("hashCodeTags.before",m,x,S);var E=function(A,T,C,D){var O=C+n.subParser("encodeCode")(T,x,S)+D;return"¨C"+(S.gHtmlSpans.push(O)-1)+"C"};return m=n.helper.replaceRecursiveRegExp(m,E,"<code\\b[^>]*>","</code>","gim"),m=S.converter._dispatch("hashCodeTags.after",m,x,S),m}),n.subParser("hashElement",function(m,x,S){return function(E,A){var T=A;return T=T.replace(/\n\n/g,`
`),T=T.replace(/^\n/,""),T=T.replace(/\n+$/g,""),T=`

¨K`+(S.gHtmlBlocks.push(T)-1)+`K

`,T}}),n.subParser("hashHTMLBlocks",function(m,x,S){m=S.converter._dispatch("hashHTMLBlocks.before",m,x,S);var E=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],A=function(k,R,z,B){var X=k;return z.search(/\bmarkdown\b/)!==-1&&(X=z+S.converter.makeHtml(R)+B),`

¨K`+(S.gHtmlBlocks.push(X)-1)+`K

`};x.backslashEscapesHTMLTags&&(m=m.replace(/\\<(\/?[^>]+?)>/g,function(k,R){return"&lt;"+R+"&gt;"}));for(var T=0;T<E.length;++T)for(var C,D=new RegExp("^ {0,3}(<"+E[T]+"\\b[^>]*>)","im"),O="<"+E[T]+"\\b[^>]*>",U="</"+E[T]+">";(C=n.helper.regexIndexOf(m,D))!==-1;){var L=n.helper.splitAtIndex(m,C),F=n.helper.replaceRecursiveRegExp(L[1],A,O,U,"im");if(F===L[1])break;m=L[0].concat(F)}return m=m.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,n.subParser("hashElement")(m,x,S)),m=n.helper.replaceRecursiveRegExp(m,function(k){return`

¨K`+(S.gHtmlBlocks.push(k)-1)+`K

`},"^ {0,3}<!--","-->","gm"),m=m.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,n.subParser("hashElement")(m,x,S)),m=S.converter._dispatch("hashHTMLBlocks.after",m,x,S),m}),n.subParser("hashHTMLSpans",function(m,x,S){m=S.converter._dispatch("hashHTMLSpans.before",m,x,S);function E(A){return"¨C"+(S.gHtmlSpans.push(A)-1)+"C"}return m=m.replace(/<[^>]+?\/>/gi,function(A){return E(A)}),m=m.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(A){return E(A)}),m=m.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(A){return E(A)}),m=m.replace(/<[^>]+?>/gi,function(A){return E(A)}),m=S.converter._dispatch("hashHTMLSpans.after",m,x,S),m}),n.subParser("unhashHTMLSpans",function(m,x,S){m=S.converter._dispatch("unhashHTMLSpans.before",m,x,S);for(var E=0;E<S.gHtmlSpans.length;++E){for(var A=S.gHtmlSpans[E],T=0;/¨C(\d+)C/.test(A);){var C=RegExp.$1;if(A=A.replace("¨C"+C+"C",S.gHtmlSpans[C]),T===10){console.error("maximum nesting of 10 spans reached!!!");break}++T}m=m.replace("¨C"+E+"C",A)}return m=S.converter._dispatch("unhashHTMLSpans.after",m,x,S),m}),n.subParser("hashPreCodeTags",function(m,x,S){m=S.converter._dispatch("hashPreCodeTags.before",m,x,S);var E=function(A,T,C,D){var O=C+n.subParser("encodeCode")(T,x,S)+D;return`

¨G`+(S.ghCodeBlocks.push({text:A,codeblock:O})-1)+`G

`};return m=n.helper.replaceRecursiveRegExp(m,E,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),m=S.converter._dispatch("hashPreCodeTags.after",m,x,S),m}),n.subParser("headers",function(m,x,S){m=S.converter._dispatch("headers.before",m,x,S);var E=isNaN(parseInt(x.headerLevelStart))?1:parseInt(x.headerLevelStart),A=x.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,T=x.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;m=m.replace(A,function(O,U){var L=n.subParser("spanGamut")(U,x,S),F=x.noHeaderId?"":' id="'+D(U)+'"',k=E,R="<h"+k+F+">"+L+"</h"+k+">";return n.subParser("hashBlock")(R,x,S)}),m=m.replace(T,function(O,U){var L=n.subParser("spanGamut")(U,x,S),F=x.noHeaderId?"":' id="'+D(U)+'"',k=E+1,R="<h"+k+F+">"+L+"</h"+k+">";return n.subParser("hashBlock")(R,x,S)});var C=x.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;m=m.replace(C,function(O,U,L){var F=L;x.customizedHeaderId&&(F=L.replace(/\s?\{([^{]+?)}\s*$/,""));var k=n.subParser("spanGamut")(F,x,S),R=x.noHeaderId?"":' id="'+D(L)+'"',z=E-1+U.length,B="<h"+z+R+">"+k+"</h"+z+">";return n.subParser("hashBlock")(B,x,S)});function D(O){var U,L;if(x.customizedHeaderId){var F=O.match(/\{([^{]+?)}\s*$/);F&&F[1]&&(O=F[1])}return U=O,n.helper.isString(x.prefixHeaderId)?L=x.prefixHeaderId:x.prefixHeaderId===!0?L="section-":L="",x.rawPrefixHeaderId||(U=L+U),x.ghCompatibleHeaderId?U=U.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():x.rawHeaderId?U=U.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():U=U.replace(/[^\w]/g,"").toLowerCase(),x.rawPrefixHeaderId&&(U=L+U),S.hashLinkCounts[U]?U=U+"-"+S.hashLinkCounts[U]++:S.hashLinkCounts[U]=1,U}return m=S.converter._dispatch("headers.after",m,x,S),m}),n.subParser("horizontalRule",function(m,x,S){m=S.converter._dispatch("horizontalRule.before",m,x,S);var E=n.subParser("hashBlock")("<hr />",x,S);return m=m.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,E),m=m.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,E),m=m.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,E),m=S.converter._dispatch("horizontalRule.after",m,x,S),m}),n.subParser("images",function(m,x,S){m=S.converter._dispatch("images.before",m,x,S);var E=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,A=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,T=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,C=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,D=/!\[([^\[\]]+)]()()()()()/g;function O(L,F,k,R,z,B,X,Z){return R=R.replace(/\s/g,""),U(L,F,k,R,z,B,X,Z)}function U(L,F,k,R,z,B,X,Z){var Q=S.gUrls,J=S.gTitles,ne=S.gDimensions;if(k=k.toLowerCase(),Z||(Z=""),L.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)R="";else if(R===""||R===null)if((k===""||k===null)&&(k=F.toLowerCase().replace(/ ?\n/g," ")),R="#"+k,!n.helper.isUndefined(Q[k]))R=Q[k],n.helper.isUndefined(J[k])||(Z=J[k]),n.helper.isUndefined(ne[k])||(z=ne[k].width,B=ne[k].height);else return L;F=F.replace(/"/g,"&quot;").replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback),R=R.replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback);var fe='<img src="'+R+'" alt="'+F+'"';return Z&&n.helper.isString(Z)&&(Z=Z.replace(/"/g,"&quot;").replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback),fe+=' title="'+Z+'"'),z&&B&&(z=z==="*"?"auto":z,B=B==="*"?"auto":B,fe+=' width="'+z+'"',fe+=' height="'+B+'"'),fe+=" />",fe}return m=m.replace(C,U),m=m.replace(T,O),m=m.replace(A,U),m=m.replace(E,U),m=m.replace(D,U),m=S.converter._dispatch("images.after",m,x,S),m}),n.subParser("italicsAndBold",function(m,x,S){m=S.converter._dispatch("italicsAndBold.before",m,x,S);function E(A,T,C){return T+A+C}return x.literalMidWordUnderscores?(m=m.replace(/\b___(\S[\s\S]*?)___\b/g,function(A,T){return E(T,"<strong><em>","</em></strong>")}),m=m.replace(/\b__(\S[\s\S]*?)__\b/g,function(A,T){return E(T,"<strong>","</strong>")}),m=m.replace(/\b_(\S[\s\S]*?)_\b/g,function(A,T){return E(T,"<em>","</em>")})):(m=m.replace(/___(\S[\s\S]*?)___/g,function(A,T){return/\S$/.test(T)?E(T,"<strong><em>","</em></strong>"):A}),m=m.replace(/__(\S[\s\S]*?)__/g,function(A,T){return/\S$/.test(T)?E(T,"<strong>","</strong>"):A}),m=m.replace(/_([^\s_][\s\S]*?)_/g,function(A,T){return/\S$/.test(T)?E(T,"<em>","</em>"):A})),x.literalMidWordAsterisks?(m=m.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(A,T,C){return E(C,T+"<strong><em>","</em></strong>")}),m=m.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(A,T,C){return E(C,T+"<strong>","</strong>")}),m=m.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(A,T,C){return E(C,T+"<em>","</em>")})):(m=m.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(A,T){return/\S$/.test(T)?E(T,"<strong><em>","</em></strong>"):A}),m=m.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(A,T){return/\S$/.test(T)?E(T,"<strong>","</strong>"):A}),m=m.replace(/\*([^\s*][\s\S]*?)\*/g,function(A,T){return/\S$/.test(T)?E(T,"<em>","</em>"):A})),m=S.converter._dispatch("italicsAndBold.after",m,x,S),m}),n.subParser("lists",function(m,x,S){function E(C,D){S.gListLevel++,C=C.replace(/\n{2,}$/,`
`),C+="¨0";var O=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,U=/\n[ \t]*\n(?!¨0)/.test(C);return x.disableForced4SpacesIndentedSublists&&(O=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),C=C.replace(O,function(L,F,k,R,z,B,X){X=X&&X.trim()!=="";var Z=n.subParser("outdent")(z,x,S),Q="";return B&&x.tasklists&&(Q=' class="task-list-item" style="list-style-type: none;"',Z=Z.replace(/^[ \t]*\[(x|X| )?]/m,function(){var J='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return X&&(J+=" checked"),J+=">",J})),Z=Z.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(J){return"¨A"+J}),F||Z.search(/\n{2,}/)>-1?(Z=n.subParser("githubCodeBlocks")(Z,x,S),Z=n.subParser("blockGamut")(Z,x,S)):(Z=n.subParser("lists")(Z,x,S),Z=Z.replace(/\n$/,""),Z=n.subParser("hashHTMLBlocks")(Z,x,S),Z=Z.replace(/\n\n+/g,`

`),U?Z=n.subParser("paragraphs")(Z,x,S):Z=n.subParser("spanGamut")(Z,x,S)),Z=Z.replace("¨A",""),Z="<li"+Q+">"+Z+`</li>
`,Z}),C=C.replace(/¨0/g,""),S.gListLevel--,D&&(C=C.replace(/\s+$/,"")),C}function A(C,D){if(D==="ol"){var O=C.match(/^ *(\d+)\./);if(O&&O[1]!=="1")return' start="'+O[1]+'"'}return""}function T(C,D,O){var U=x.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,L=x.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,F=D==="ul"?U:L,k="";if(C.search(F)!==-1)(function z(B){var X=B.search(F),Z=A(C,D);X!==-1?(k+=`

<`+D+Z+`>
`+E(B.slice(0,X),!!O)+"</"+D+`>
`,D=D==="ul"?"ol":"ul",F=D==="ul"?U:L,z(B.slice(X))):k+=`

<`+D+Z+`>
`+E(B,!!O)+"</"+D+`>
`})(C);else{var R=A(C,D);k=`

<`+D+R+`>
`+E(C,!!O)+"</"+D+`>
`}return k}return m=S.converter._dispatch("lists.before",m,x,S),m+="¨0",S.gListLevel?m=m.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(C,D,O){var U=O.search(/[*+-]/g)>-1?"ul":"ol";return T(D,U,!0)}):m=m.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(C,D,O,U){var L=U.search(/[*+-]/g)>-1?"ul":"ol";return T(O,L,!1)}),m=m.replace(/¨0/,""),m=S.converter._dispatch("lists.after",m,x,S),m}),n.subParser("metadata",function(m,x,S){if(!x.metadata)return m;m=S.converter._dispatch("metadata.before",m,x,S);function E(A){S.metadata.raw=A,A=A.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),A=A.replace(/\n {4}/g," "),A.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(T,C,D){return S.metadata.parsed[C]=D,""})}return m=m.replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,function(A,T,C){return E(C),"¨M"}),m=m.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(A,T,C){return T&&(S.metadata.format=T),E(C),"¨M"}),m=m.replace(/¨M/g,""),m=S.converter._dispatch("metadata.after",m,x,S),m}),n.subParser("outdent",function(m,x,S){return m=S.converter._dispatch("outdent.before",m,x,S),m=m.replace(/^(\t|[ ]{1,4})/gm,"¨0"),m=m.replace(/¨0/g,""),m=S.converter._dispatch("outdent.after",m,x,S),m}),n.subParser("paragraphs",function(m,x,S){m=S.converter._dispatch("paragraphs.before",m,x,S),m=m.replace(/^\n+/g,""),m=m.replace(/\n+$/g,"");for(var E=m.split(/\n{2,}/g),A=[],T=E.length,C=0;C<T;C++){var D=E[C];D.search(/¨(K|G)(\d+)\1/g)>=0?A.push(D):D.search(/\S/)>=0&&(D=n.subParser("spanGamut")(D,x,S),D=D.replace(/^([ \t]*)/g,"<p>"),D+="</p>",A.push(D))}for(T=A.length,C=0;C<T;C++){for(var O="",U=A[C],L=!1;/¨(K|G)(\d+)\1/.test(U);){var F=RegExp.$1,k=RegExp.$2;F==="K"?O=S.gHtmlBlocks[k]:L?O=n.subParser("encodeCode")(S.ghCodeBlocks[k].text,x,S):O=S.ghCodeBlocks[k].codeblock,O=O.replace(/\$/g,"$$$$"),U=U.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,O),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(U)&&(L=!0)}A[C]=U}return m=A.join(`
`),m=m.replace(/^\n+/g,""),m=m.replace(/\n+$/g,""),S.converter._dispatch("paragraphs.after",m,x,S)}),n.subParser("runExtension",function(m,x,S,E){if(m.filter)x=m.filter(x,E.converter,S);else if(m.regex){var A=m.regex;A instanceof RegExp||(A=new RegExp(A,"g")),x=x.replace(A,m.replace)}return x}),n.subParser("spanGamut",function(m,x,S){return m=S.converter._dispatch("spanGamut.before",m,x,S),m=n.subParser("codeSpans")(m,x,S),m=n.subParser("escapeSpecialCharsWithinTagAttributes")(m,x,S),m=n.subParser("encodeBackslashEscapes")(m,x,S),m=n.subParser("images")(m,x,S),m=n.subParser("anchors")(m,x,S),m=n.subParser("autoLinks")(m,x,S),m=n.subParser("simplifiedAutoLinks")(m,x,S),m=n.subParser("emoji")(m,x,S),m=n.subParser("underline")(m,x,S),m=n.subParser("italicsAndBold")(m,x,S),m=n.subParser("strikethrough")(m,x,S),m=n.subParser("ellipsis")(m,x,S),m=n.subParser("hashHTMLSpans")(m,x,S),m=n.subParser("encodeAmpsAndAngles")(m,x,S),x.simpleLineBreaks?/\n\n¨K/.test(m)||(m=m.replace(/\n+/g,`<br />
`)):m=m.replace(/  +\n/g,`<br />
`),m=S.converter._dispatch("spanGamut.after",m,x,S),m}),n.subParser("strikethrough",function(m,x,S){function E(A){return x.simplifiedAutoLink&&(A=n.subParser("simplifiedAutoLinks")(A,x,S)),"<del>"+A+"</del>"}return x.strikethrough&&(m=S.converter._dispatch("strikethrough.before",m,x,S),m=m.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(A,T){return E(T)}),m=S.converter._dispatch("strikethrough.after",m,x,S)),m}),n.subParser("stripLinkDefinitions",function(m,x,S){var E=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,A=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm;m+="¨0";var T=function(C,D,O,U,L,F,k){return D=D.toLowerCase(),m.toLowerCase().split(D).length-1<2?C:(O.match(/^data:.+?\/.+?;base64,/)?S.gUrls[D]=O.replace(/\s/g,""):S.gUrls[D]=n.subParser("encodeAmpsAndAngles")(O,x,S),F?F+k:(k&&(S.gTitles[D]=k.replace(/"|'/g,"&quot;")),x.parseImgDimensions&&U&&L&&(S.gDimensions[D]={width:U,height:L}),""))};return m=m.replace(A,T),m=m.replace(E,T),m=m.replace(/¨0/,""),m}),n.subParser("tables",function(m,x,S){if(!x.tables)return m;var E=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,A=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm;function T(L){return/^:[ \t]*--*$/.test(L)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(L)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(L)?' style="text-align:center;"':""}function C(L,F){var k="";return L=L.trim(),(x.tablesHeaderId||x.tableHeaderId)&&(k=' id="'+L.replace(/ /g,"_").toLowerCase()+'"'),L=n.subParser("spanGamut")(L,x,S),"<th"+k+F+">"+L+`</th>
`}function D(L,F){var k=n.subParser("spanGamut")(L,x,S);return"<td"+F+">"+k+`</td>
`}function O(L,F){for(var k=`<table>
<thead>
<tr>
`,R=L.length,z=0;z<R;++z)k+=L[z];for(k+=`</tr>
</thead>
<tbody>
`,z=0;z<F.length;++z){k+=`<tr>
`;for(var B=0;B<R;++B)k+=F[z][B];k+=`</tr>
`}return k+=`</tbody>
</table>
`,k}function U(L){var F,k=L.split(`
`);for(F=0;F<k.length;++F)/^ {0,3}\|/.test(k[F])&&(k[F]=k[F].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(k[F])&&(k[F]=k[F].replace(/\|[ \t]*$/,"")),k[F]=n.subParser("codeSpans")(k[F],x,S);var R=k[0].split("|").map(function(fe){return fe.trim()}),z=k[1].split("|").map(function(fe){return fe.trim()}),B=[],X=[],Z=[],Q=[];for(k.shift(),k.shift(),F=0;F<k.length;++F)k[F].trim()!==""&&B.push(k[F].split("|").map(function(fe){return fe.trim()}));if(R.length<z.length)return L;for(F=0;F<z.length;++F)Z.push(T(z[F]));for(F=0;F<R.length;++F)n.helper.isUndefined(Z[F])&&(Z[F]=""),X.push(C(R[F],Z[F]));for(F=0;F<B.length;++F){for(var J=[],ne=0;ne<X.length;++ne)n.helper.isUndefined(B[F][ne]),J.push(D(B[F][ne],Z[ne]));Q.push(J)}return O(X,Q)}return m=S.converter._dispatch("tables.before",m,x,S),m=m.replace(/\\(\|)/g,n.helper.escapeCharactersCallback),m=m.replace(E,U),m=m.replace(A,U),m=S.converter._dispatch("tables.after",m,x,S),m}),n.subParser("underline",function(m,x,S){return x.underline&&(m=S.converter._dispatch("underline.before",m,x,S),x.literalMidWordUnderscores?(m=m.replace(/\b___(\S[\s\S]*?)___\b/g,function(E,A){return"<u>"+A+"</u>"}),m=m.replace(/\b__(\S[\s\S]*?)__\b/g,function(E,A){return"<u>"+A+"</u>"})):(m=m.replace(/___(\S[\s\S]*?)___/g,function(E,A){return/\S$/.test(A)?"<u>"+A+"</u>":E}),m=m.replace(/__(\S[\s\S]*?)__/g,function(E,A){return/\S$/.test(A)?"<u>"+A+"</u>":E})),m=m.replace(/(_)/g,n.helper.escapeCharactersCallback),m=S.converter._dispatch("underline.after",m,x,S)),m}),n.subParser("unescapeSpecialChars",function(m,x,S){return m=S.converter._dispatch("unescapeSpecialChars.before",m,x,S),m=m.replace(/¨E(\d+)E/g,function(E,A){var T=parseInt(A);return String.fromCharCode(T)}),m=S.converter._dispatch("unescapeSpecialChars.after",m,x,S),m}),n.subParser("makeMarkdown.blockquote",function(m,x){var S="";if(m.hasChildNodes())for(var E=m.childNodes,A=E.length,T=0;T<A;++T){var C=n.subParser("makeMarkdown.node")(E[T],x);C!==""&&(S+=C)}return S=S.trim(),S="> "+S.split(`
`).join(`
> `),S}),n.subParser("makeMarkdown.codeBlock",function(m,x){var S=m.getAttribute("language"),E=m.getAttribute("precodenum");return"```"+S+`
`+x.preList[E]+"\n```"}),n.subParser("makeMarkdown.codeSpan",function(m){return"`"+m.innerHTML+"`"}),n.subParser("makeMarkdown.emphasis",function(m,x){var S="";if(m.hasChildNodes()){S+="*";for(var E=m.childNodes,A=E.length,T=0;T<A;++T)S+=n.subParser("makeMarkdown.node")(E[T],x);S+="*"}return S}),n.subParser("makeMarkdown.header",function(m,x,S){var E=new Array(S+1).join("#"),A="";if(m.hasChildNodes()){A=E+" ";for(var T=m.childNodes,C=T.length,D=0;D<C;++D)A+=n.subParser("makeMarkdown.node")(T[D],x)}return A}),n.subParser("makeMarkdown.hr",function(){return"---"}),n.subParser("makeMarkdown.image",function(m){var x="";return m.hasAttribute("src")&&(x+="!["+m.getAttribute("alt")+"](",x+="<"+m.getAttribute("src")+">",m.hasAttribute("width")&&m.hasAttribute("height")&&(x+=" ="+m.getAttribute("width")+"x"+m.getAttribute("height")),m.hasAttribute("title")&&(x+=' "'+m.getAttribute("title")+'"'),x+=")"),x}),n.subParser("makeMarkdown.links",function(m,x){var S="";if(m.hasChildNodes()&&m.hasAttribute("href")){var E=m.childNodes,A=E.length;S="[";for(var T=0;T<A;++T)S+=n.subParser("makeMarkdown.node")(E[T],x);S+="](",S+="<"+m.getAttribute("href")+">",m.hasAttribute("title")&&(S+=' "'+m.getAttribute("title")+'"'),S+=")"}return S}),n.subParser("makeMarkdown.list",function(m,x,S){var E="";if(!m.hasChildNodes())return"";for(var A=m.childNodes,T=A.length,C=m.getAttribute("start")||1,D=0;D<T;++D)if(!(typeof A[D].tagName>"u"||A[D].tagName.toLowerCase()!=="li")){var O="";S==="ol"?O=C.toString()+". ":O="- ",E+=O+n.subParser("makeMarkdown.listItem")(A[D],x),++C}return E+=`
<!-- -->
`,E.trim()}),n.subParser("makeMarkdown.listItem",function(m,x){for(var S="",E=m.childNodes,A=E.length,T=0;T<A;++T)S+=n.subParser("makeMarkdown.node")(E[T],x);return/\n$/.test(S)?S=S.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):S+=`
`,S}),n.subParser("makeMarkdown.node",function(m,x,S){S=S||!1;var E="";if(m.nodeType===3)return n.subParser("makeMarkdown.txt")(m,x);if(m.nodeType===8)return"<!--"+m.data+`-->

`;if(m.nodeType!==1)return"";var A=m.tagName.toLowerCase();switch(A){case"h1":S||(E=n.subParser("makeMarkdown.header")(m,x,1)+`

`);break;case"h2":S||(E=n.subParser("makeMarkdown.header")(m,x,2)+`

`);break;case"h3":S||(E=n.subParser("makeMarkdown.header")(m,x,3)+`

`);break;case"h4":S||(E=n.subParser("makeMarkdown.header")(m,x,4)+`

`);break;case"h5":S||(E=n.subParser("makeMarkdown.header")(m,x,5)+`

`);break;case"h6":S||(E=n.subParser("makeMarkdown.header")(m,x,6)+`

`);break;case"p":S||(E=n.subParser("makeMarkdown.paragraph")(m,x)+`

`);break;case"blockquote":S||(E=n.subParser("makeMarkdown.blockquote")(m,x)+`

`);break;case"hr":S||(E=n.subParser("makeMarkdown.hr")(m,x)+`

`);break;case"ol":S||(E=n.subParser("makeMarkdown.list")(m,x,"ol")+`

`);break;case"ul":S||(E=n.subParser("makeMarkdown.list")(m,x,"ul")+`

`);break;case"precode":S||(E=n.subParser("makeMarkdown.codeBlock")(m,x)+`

`);break;case"pre":S||(E=n.subParser("makeMarkdown.pre")(m,x)+`

`);break;case"table":S||(E=n.subParser("makeMarkdown.table")(m,x)+`

`);break;case"code":E=n.subParser("makeMarkdown.codeSpan")(m,x);break;case"em":case"i":E=n.subParser("makeMarkdown.emphasis")(m,x);break;case"strong":case"b":E=n.subParser("makeMarkdown.strong")(m,x);break;case"del":E=n.subParser("makeMarkdown.strikethrough")(m,x);break;case"a":E=n.subParser("makeMarkdown.links")(m,x);break;case"img":E=n.subParser("makeMarkdown.image")(m,x);break;default:E=m.outerHTML+`

`}return E}),n.subParser("makeMarkdown.paragraph",function(m,x){var S="";if(m.hasChildNodes())for(var E=m.childNodes,A=E.length,T=0;T<A;++T)S+=n.subParser("makeMarkdown.node")(E[T],x);return S=S.trim(),S}),n.subParser("makeMarkdown.pre",function(m,x){var S=m.getAttribute("prenum");return"<pre>"+x.preList[S]+"</pre>"}),n.subParser("makeMarkdown.strikethrough",function(m,x){var S="";if(m.hasChildNodes()){S+="~~";for(var E=m.childNodes,A=E.length,T=0;T<A;++T)S+=n.subParser("makeMarkdown.node")(E[T],x);S+="~~"}return S}),n.subParser("makeMarkdown.strong",function(m,x){var S="";if(m.hasChildNodes()){S+="**";for(var E=m.childNodes,A=E.length,T=0;T<A;++T)S+=n.subParser("makeMarkdown.node")(E[T],x);S+="**"}return S}),n.subParser("makeMarkdown.table",function(m,x){var S="",E=[[],[]],A=m.querySelectorAll("thead>tr>th"),T=m.querySelectorAll("tbody>tr"),C,D;for(C=0;C<A.length;++C){var O=n.subParser("makeMarkdown.tableCell")(A[C],x),U="---";if(A[C].hasAttribute("style")){var L=A[C].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(L){case"text-align:left;":U=":---";break;case"text-align:right;":U="---:";break;case"text-align:center;":U=":---:";break}}E[0][C]=O.trim(),E[1][C]=U}for(C=0;C<T.length;++C){var F=E.push([])-1,k=T[C].getElementsByTagName("td");for(D=0;D<A.length;++D){var R=" ";typeof k[D]<"u"&&(R=n.subParser("makeMarkdown.tableCell")(k[D],x)),E[F].push(R)}}var z=3;for(C=0;C<E.length;++C)for(D=0;D<E[C].length;++D){var B=E[C][D].length;B>z&&(z=B)}for(C=0;C<E.length;++C){for(D=0;D<E[C].length;++D)C===1?E[C][D].slice(-1)===":"?E[C][D]=n.helper.padEnd(E[C][D].slice(-1),z-1,"-")+":":E[C][D]=n.helper.padEnd(E[C][D],z,"-"):E[C][D]=n.helper.padEnd(E[C][D],z);S+="| "+E[C].join(" | ")+` |
`}return S.trim()}),n.subParser("makeMarkdown.tableCell",function(m,x){var S="";if(!m.hasChildNodes())return"";for(var E=m.childNodes,A=E.length,T=0;T<A;++T)S+=n.subParser("makeMarkdown.node")(E[T],x,!0);return S.trim()}),n.subParser("makeMarkdown.txt",function(m){var x=m.nodeValue;return x=x.replace(/ +/g," "),x=x.replace(/¨NBSP;/g," "),x=n.helper.unescapeHTMLEntities(x),x=x.replace(/([*_~|`])/g,"\\$1"),x=x.replace(/^(\s*)>/g,"\\$1>"),x=x.replace(/^#/gm,"\\#"),x=x.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),x=x.replace(/^( {0,3}\d+)\./gm,"$1\\."),x=x.replace(/^( {0,3})([+-])/gm,"$1\\$2"),x=x.replace(/]([\s]*)\(/g,"\\]$1\\("),x=x.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),x});var b=this;r.exports?r.exports=n:b.showdown=n}).call(fo)})(x2e);class Hr{constructor(e){this.inputs=[],this.output=null,this.uniqueID=I.generateUniqueID(),this.description="none",this.x=0,this.y=0,this.radius=1/75,this.defaultColor="#F3EFEF",this.selectedColor="#484848",this.strokeColor="#484848",this.selected=!1,this.color="#F3EFEF",this.name="name0",this.parentMolecule=null,this.value=null,this.isMoving=!1,this.showHover=!1,this.x=0,this.y=0,this.alertMessage="",this.processing=!1;for(var t in e)this[t]=e[t]}setValues(e){for(var t in e)this[t]=e[t];typeof this.ioValues<"u"&&this.ioValues.forEach(n=>{this.inputs.forEach(i=>{n.name==i.name&&i.type=="input"&&(i.value=n.ioValue)})})}draw(e){let t=I.widthToPixels(this.x),n=I.heightToPixels(this.y),i=I.widthToPixels(this.radius);if(this.inputs.forEach(a=>{a.draw()}),I.c.beginPath(),I.c.font="10px Work Sans",this.processing?I.c.fillStyle="blue":this.selected?(I.c.fillStyle=this.selectedColor,I.c.strokeStyle=this.selectedColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(I.c.fillStyle=this.defaultColor,I.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),I.c.beginPath(),e=="rect"?I.c.rect(t-i,n-this.height/2,2*i,this.height):I.c.arc(t,n,i,0,Math.PI*2,!1),I.c.textAlign="start",I.c.fill(),I.c.strokeStyle=this.strokeColor,I.c.fillStyle="white",I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.textAlign="start",I.c.fillText(this.name,t+i,n-i),I.c.fill(),I.c.strokeStyle=this.strokeColor,I.c.lineWidth=1,I.c.stroke(),I.c.closePath(),this.showHover&&this.alertMessage.length>0){this.color="red",I.c.beginPath();const a=10;I.c.fillStyle="red",I.c.rect(t+i-a/2,n-i+a/2,I.c.measureText(this.alertMessage.toUpperCase()).width+a,-(parseInt(I.c.font)+a)),I.c.fill(),I.c.strokeStyle="black",I.c.lineWidth=1,I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="black",I.c.fillText(this.alertMessage.toUpperCase(),t+i,n-i),I.c.closePath()}}addIO(e,t,n,i,a,o,s=!1){if(n.inputs.find(c=>c.name===t&&c.type===e)==null){var l;e=="input"?l=-1*n.scaledRadius:l=n.scaledRadius;var u=new so({parentMolecule:n,defaultOffsetX:l,defaultOffsetY:0,type:e,valueType:i,name:t,primary:s,value:a,defaultValue:a,uniqueID:I.generateUniqueID(),atomType:"AttachmentPoint",ready:!0});e=="input"?n.inputs.push(u):n.output=u}}removeIO(e,t,n,i=!1){n.inputs.forEach(a=>{a.name==t&&a.type==e&&(n.inputs.splice(n.inputs.indexOf(a),1),a.deleteSelf(i))})}alertingErrorHandler(){return e=>{this.processing=!1,console.log(e),this.setAlert(e.message)}}setAlert(e){this.color="orange",this.alertMessage=String(e)}clearAlert(){this.color=this.defaultColor,this.alertMessage=""}selectBox(e,t,n,i){let a=Math.min(e,n),o=Math.max(e,n),s=Math.min(t,i),l=Math.max(t,i),u=I.widthToPixels(this.x),c=I.heightToPixels(this.y);u>=a&&u<=o&&c>=s&&c<=l&&(this.selected=!0)}clickDown(e,t,n){let i=I.widthToPixels(this.x),a=I.heightToPixels(this.y),o=I.widthToPixels(this.radius),s;return!n&&I.distBetweenPoints(e,i,t,a)<o?(this.isMoving=!0,this.selected=!0,s=this,this.sendToRender()):I.ctrlDown||(this.selected=!1),this.inputs.forEach(l=>{l.clickDown(e,t,n)==!0&&(n=!0)}),this.output&&!s&&this.output.clickDown(e,t,n)==!0&&(n=!0),s}doubleClick(e,t){let n=I.widthToPixels(this.x),i=I.heightToPixels(this.y);var a=!1,o=I.distBetweenPoints(e,n,t,i);return o<n&&(a=!0),a}clickUp(e,t){this.isMoving=!1,this.inputs.forEach(n=>{n.clickUp(e,t)}),this.output&&this.output.clickUp(e,t)}mouseMove(e,t){let n=I.widthToPixels(this.x),i=I.heightToPixels(this.y),a=I.widthToPixels(this.radius);this.isMoving==!0&&(this.x=I.pixelsToWidth(e),this.y=I.pixelsToHeight(t)),this.inputs.forEach(s=>{s.mouseMove(e,t)}),this.output&&this.output.mouseMove(e,t);var o=I.distBetweenPoints(e,n,t,i);o<a?this.showHover=!0:this.showHover=!1}keyPress(e){this.inputs.forEach(t=>{t.keyPress(e)})}deleteNode(e=!0,t=!0,n=!1){this.inputs.forEach(i=>{i.ready=!1}),[...this.inputs].forEach(i=>{i.deleteSelf(n)}),this.output&&this.output.deleteSelf(n),I.cad.deleteFromLibrary(this.uniqueID).then(()=>{}),this.parent.nodesOnTheScreen.splice(this.parent.nodesOnTheScreen.indexOf(this),1)}update(){this.inputs.forEach(e=>{e.update()}),this.output&&this.output.update(),this.draw()}serialize(e={x:0,y:0}){var t=[];this.inputs.forEach(i=>{if(typeof i.getValue()=="number"||typeof i.getValue()=="string"){var a={name:i.name,ioValue:i.getValue()};t.push(a)}});var n={atomType:this.atomType,name:this.name,x:this.x+e.x,y:this.y-e.y,uniqueID:this.uniqueID,ioValues:t};return n}requestReadme(){return[]}decreaseToProcessCountByOne(){I.topLevelMolecule.census()}updateValue(){this.waitOnComingInformation()}walkBackForConstants(e){this.inputs.forEach(t=>{t.connectors.forEach(n=>{n.walkBackForConstants(e)})})}waitOnComingInformation(){this.output&&this.output.waitOnComingInformation(),this.processing&&console.log("information sent to something processing")}basicThreadValueProcessing(){this.decreaseToProcessCountByOne(),this.clearAlert(),this.output&&(this.output.setValue(this.uniqueID),this.output.ready=!0),this.processing=!1,this.selected&&this.sendToRender()}beginPropagation(){}census(){var e=0;return this.inputs.forEach(t=>{t.ready!=!0&&(e=1)}),[1,e]}sendToRender(){try{I.writeToDisplay(this.uniqueID)}catch(e){this.setAlert(e)}}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const n=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,step:.25,disabled:n(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),e}findIOValue(e){e=e.split("~").join("");var t=null;return this.inputs.forEach(n=>{n.name==e&&n.type=="input"&&(t=n.getValue())}),t}}const JB=function(r){var e=0;return r.inputs.forEach(t=>{t.type=="input"&&t.connectors.length==0&&(e=e+1)}),e},w2e=function(r){var e;for(e=0;e<r.inputs.length-1;e++){var t=r.inputs[e];if(t.type=="input"&&t.connectors.length==0){r.removeIO("input",t.name,r);return}}},ZB=function(r){var e=0;return r.inputs.forEach(t=>{e=Math.max(e,parseInt(t.name.match(/\d+$/)[0]))}),e},J0=r=>{JB(r)==0&&(ZB(r),r.addIO("input","3D shape "+(ZB(r)+1),r,"geometry","",!0)),JB(r)>=2&&w2e(r)};class S2e extends Hr{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Join",this.atomType="Join",this.ioValues=[],this.removeCutawayGeometry=!0,this.description="Pick between assembly and fusion to join input geometries. Assembly takes multiple shapes together into one, shapes higher in the inputs list will cut into shapes lower on the input list where they overlap. Fusion takes all shapes or sketches and fuses them permanently into a single shape",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.unionType,this.unionIndex=0,this.setValues([])}beginPropagation(){super.beginPropagation()}draw(){super.draw();const e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),n=I.widthToPixels(this.radius);I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-n/2,t+n/2),I.c.lineTo(e+n/2,t+n/2),I.c.lineTo(e+n/2,t),I.c.lineTo(e-n/2,t),I.c.lineTo(e-n/2,t+n/2),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.lineTo(e+n/4,t-n/2),I.c.lineTo(e-n/4,t-n/2),I.c.lineTo(e-n/4,t),I.c.lineTo(e+n/2,t),I.c.lineTo(e+n/4,t-n/2),I.c.lineWidth=1,I.c.lineJoin="round",I.c.stroke(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&t.type=="input"&&e.push(t.getValue())}),this.unionType==="Fusion"?I.cad.fusion(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()):this.unionType==="Assembly"&&I.cad.assembly(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),J0(this)}}createLevaInputs(){let e={};const t=["Assembly","Fusion"];return e[this.uniqueID+"union_ops"]={value:this.unionType||t[this.unionIndex],options:t,label:"Union Type",onChange:n=>{this.unionIndex=t.indexOf(n),this.unionType!==t[this.unionIndex]&&(this.unionType=t[this.unionIndex],this.name=this.unionType,this.updateValue())}},e}serialize(e){var t=super.serialize(e),n=[];return this.inputs.forEach(i=>{if(i.connectors.length>0){var a={name:i.name,ioValue:i.getValue()};n.push(a)}}),t.ioValues=n,t.unionType=this.unionType,t}}class M2e extends Hr{constructor(e){super(e),this.name="Circle",this.atomType="Circle",this.description="Creates a new circle.",this.addIO("input","diameter",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x),I.heightToPixels(this.y),I.widthToPixels(this.radius/2),0,Math.PI*2,!1),I.c.stroke(),I.c.closePath()}updateValue(){super.updateValue();var e=this.findIOValue("diameter");I.cad.circle(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}let _2e=class extends Hr{constructor(r){super(r),this.name="Color",this.atomType="Color",this.description="Changes the color of the shape.",this.selectedColorIndex=0,this.colorOptions={Red:"#FF9065",Orange:"#FFB458",Yellow:"#FFD600",Olive:"#C7DF66",Teal:"#71D1C2","Light Blue":"#75DBF2",Green:"#A3CE5B","Lavender ":"#CCABED",Brown:"#CFAB7C",Pink:"#FFB09D",Sand:"#E2C66C",Clay:"#C4D3AC",Blue:"#91C8D5","Light Green":"#96E1BB",Purple:"#ACAFDD","Light Purple":"#DFB1E8",Tan:"#F5D3B6","Mauve ":"#DBADA9",Grey:"#BABABA",Black:"#3C3C3C",White:"#FFFCF7","Keep Out":"#E0E0E0"},this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.setValues(r)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#0000FF",I.c.arc(I.widthToPixels(this.x-this.radius/4),I.heightToPixels(this.y+this.radius/2),I.widthToPixels(this.radius/3),0,Math.PI*2,!1),I.c.fill(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#FF0000",I.c.arc(I.widthToPixels(this.x+this.radius/4),I.heightToPixels(this.y+this.radius/2),I.widthToPixels(this.radius/3),0,Math.PI*2,!1),I.c.fill(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#FFFF00",I.c.arc(I.widthToPixels(this.x),I.heightToPixels(this.y-this.radius),I.widthToPixels(this.radius/3),0,Math.PI*2,!1),I.c.fill(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var r=this.findIOValue("geometry"),e=Object.values(this.colorOptions)[this.selectedColorIndex];I.cad.color(this.uniqueID,r,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}changeColor(r){this.selectedColorIndex=r,this.updateValue()}createLevaInputs(){let r={};if(this.inputs)return this.inputs.map(e=>{const t=()=>e.connectors.length>0;r[this.uniqueID+"color"]={value:Object.keys(this.colorOptions)[this.selectedColorIndex],label:"Color",options:Object.keys(this.colorOptions),onChange:n=>{this.changeColor(Object.keys(this.colorOptions).indexOf(n)),this.sendToRender()}},e.valueType!=="geometry"&&(r[this.uniqueID+e.name]={value:e.value,label:e.name,disabled:t(),onChange:n=>{e.value!==n&&e.setValue(n)}})}),r}updateSidebar(){const r=super.updateSidebar(),e=document.createElement("div");r.appendChild(e),this.createDropDown(e,this,Object.keys(this.colorOptions),this.selectedColorIndex,"Color",t=>{this.changeColor(t)})}serialize(){var r=super.serialize();return r.selectedColorIndex=this.selectedColorIndex,r}};class E2e extends Hr{constructor(e){super(e),this.atomType="Cut Layout",this.type="cutLayout",this.name="Cut Layout",this.description="Extracts all parts tagged for cutting and lays them out on a sheet to cut.",this.addIO("input","geometry",this,"geometry",null),this.addIO("input","Material Thickness",this,"number",I.topLevelMolecule.unitsIndex=="MM"?19:.75),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}draw(){super.draw();const e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),n=I.widthToPixels(this.radius);I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-n/2,t+n/2),I.c.lineTo(e+n/2,t+n/2),I.c.lineTo(e+n/2,t),I.c.lineTo(e-n/2,t),I.c.lineTo(e-n/2,t+n/2),I.c.setLineDash([3,3]),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.lineTo(e+n/4,t-n/1.7),I.c.lineTo(e-n/4,t-n/2),I.c.lineTo(e-n/4,t),I.c.lineTo(e+n/2,t),I.c.lineTo(e+n/4,t-n/1.7),I.c.lineWidth=1,I.c.lineJoin="round",I.c.stroke(),I.c.setLineDash([]),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(i=>i.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("Material Thickness"),n="cutLayout";if(!e){this.setAlert('"geometry" input is missing');return}I.cad.layout(this.uniqueID,e,n,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class C2e extends Hr{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Shrink Wrap",this.atomType="Shrink Wrap",this.ioValues=[],this.description="Joins two or more drawings into a single sketch by filling in the space between them. Also called 'hull'",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x+this.radius/4),I.heightToPixels(this.y),I.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),I.c.fill(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x-this.radius/4),I.heightToPixels(this.y),I.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),I.c.fill(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.rect(I.widthToPixels(this.x-this.radius/4),I.heightToPixels(this.y-this.radius),I.widthToPixels(this.radius/2),I.widthToPixels(this.radius/2)),I.c.fill(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&e.push(t.getValue())}),I.cad.shrinkWrapSketches(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),J0(this)}}serialize(e){var t=super.serialize(e),n=[];return this.inputs.forEach(i=>{if(i.type=="input"){var a={name:i.name,ioValue:i.getValue()};n.push(a)}}),n.forEach(i=>{t.ioValues.push(i)}),t}}class A2e extends Hr{constructor(e){super(e),this.addIO("input","x length",this,"number",10),this.addIO("input","y length",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.name="Rectangle",this.atomType="Rectangle",this.description="Creates a new rectangle.",this.setValues(e)}beginPropagation(){this.inputs.forEach(e=>{e.beginPropagation()})}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.rect(I.widthToPixels(this.x-this.radius/2),I.heightToPixels(this.y-this.radius*2),I.widthToPixels(this.radius),I.widthToPixels(this.radius)),I.c.stroke(),I.c.closePath()}updateValue(){super.updateValue();var e=this.findIOValue("x length"),t=this.findIOValue("y length");I.cad.rectangle(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}class T2e extends Hr{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Loft",this.atomType="Loft",this.ioValues=[],this.description="Joins two or more shapes into a single solid by filling in the space between them. Also called 'hull'",this.closedSelection=0,this.addedIO=!1,this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x+this.radius/4),I.heightToPixels(this.y),I.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),I.c.fill(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x-this.radius/4),I.heightToPixels(this.y),I.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),I.c.fill(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.rect(I.widthToPixels(this.x-this.radius/4),I.heightToPixels(this.y-this.radius),I.widthToPixels(this.radius/2),I.widthToPixels(this.radius/2)),I.c.fill(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&e.push(t.getValue())}),I.cad.loftShapes(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),J0(this)}}serialize(e){var t=super.serialize(e),n=[];return this.inputs.forEach(i=>{if(i.type=="input"){var a={name:i.name,ioValue:i.getValue()};n.push(a)}}),n.forEach(i=>{t.ioValues.push(i)}),t.closedSelection=this.closedSelection,t}}class D2e extends Hr{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","xDist",this,"number",0),this.addIO("input","yDist",this,"number",0),this.addIO("input","zDist",this,"number",0),this.addIO("output","geometry",this,"geometry",""),this.name="Move",this.atomType="Move",this.description="Moves a shape laterally in X, Y, Z.",this.setValues(e)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x+this.radius/5),I.heightToPixels(this.y),I.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x-this.radius/5),I.heightToPixels(this.y),I.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),I.c.fill(),I.c.stroke(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(a=>a.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("xDist"),n=this.findIOValue("yDist"),i=this.findIOValue("zDist");I.cad.move(this.uniqueID,e,t,n,i).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}function k2e(r,e){typeof r=="function"?r(e):r!=null&&(r.current=e)}function JW(...r){return e=>r.forEach(t=>k2e(t,e))}function Mm(...r){return j.useCallback(JW(...r),r)}const ZW=j.forwardRef((r,e)=>{const{children:t,...n}=r,i=j.Children.toArray(t),a=i.find(N2e);if(a){const o=a.props.children,s=i.map(l=>l===a?j.Children.count(o)>1?j.Children.only(null):j.isValidElement(o)?o.props.children:null:l);return j.createElement(jT,lt({},n,{ref:e}),j.isValidElement(o)?j.cloneElement(o,void 0,s):null)}return j.createElement(jT,lt({},n,{ref:e}),t)});ZW.displayName="Slot";const jT=j.forwardRef((r,e)=>{const{children:t,...n}=r;return j.isValidElement(t)?j.cloneElement(t,{...O2e(n,t.props),ref:e?JW(e,t.ref):t.ref}):j.Children.count(t)>1?j.Children.only(null):null});jT.displayName="SlotClone";const KW=({children:r})=>j.createElement(j.Fragment,null,r);function N2e(r){return j.isValidElement(r)&&r.type===KW}function O2e(r,e){const t={...e};for(const n in e){const i=r[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...o)=>{a(...o),i(...o)}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...r,...t}}const R2e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],zd=R2e.reduce((r,e)=>{const t=j.forwardRef((n,i)=>{const{asChild:a,...o}=n,s=a?ZW:e;return j.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),j.createElement(s,lt({},o,{ref:i}))});return t.displayName=`Primitive.${e}`,{...r,[e]:t}},{});function P2e(r,e){r&&fm.flushSync(()=>r.dispatchEvent(e))}const I2e=j.forwardRef((r,e)=>{var t;const{container:n=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=r;return n?YH.createPortal(j.createElement(zd.div,lt({},i,{ref:e})),n):null}),L2e=I2e;var KB=Object.prototype.hasOwnProperty;function Z0(r,e){var t,n;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&Z0(r[n],e[n]););return n===-1}if(!t||typeof r=="object"){n=0;for(t in r)if(KB.call(r,t)&&++n&&!KB.call(e,t)||!(t in e)||!Z0(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!==r&&e!==e}function qM(r,e){if(Object.is(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;const t=Object.keys(r);if(t.length!==Object.keys(e).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(e,t[n])||!Object.is(r[t[n]],e[t[n]]))return!1;return!0}var WM=function(r,e,t,n){this.name=r,this.fn=e,this.args=t,this.modifiers=n};WM.prototype._test=function(r){var e=this.fn;try{Ep(this.modifiers.slice(),e,this)(r)}catch{e=function(){return!1}}try{return Ep(this.modifiers.slice(),e,this)(r)}catch{return!1}};WM.prototype._check=function(r){try{Ep(this.modifiers.slice(),this.fn,this)(r)}catch{if(Ep(this.modifiers.slice(),function(e){return e},this)(!1))return}if(!Ep(this.modifiers.slice(),this.fn,this)(r))throw null};WM.prototype._testAsync=function(r){var e=this;return new Promise(function(t,n){eG(e.modifiers.slice(),e.fn,e)(r).then(function(i){i?t(r):n(null)}).catch(function(i){return n(i)})})};function QW(r,e){return e===void 0&&(e="simple"),typeof r=="object"?r[e]:r}function Ep(r,e,t){if(r.length){var n=r.shift(),i=Ep(r,e,t);return n.perform(i,t)}else return QW(e)}function eG(r,e,t){if(r.length){var n=r.shift(),i=eG(r,e,t);return n.performAsync(i,t)}else return function(a){return Promise.resolve(QW(e,"async")(a))}}var F2e=function(r,e,t){this.name=r,this.perform=e,this.performAsync=t},CN=function(r){function e(t,n,i,a){for(var o=[],s=arguments.length-4;s-- >0;)o[s]=arguments[s+4];r.call(this,o),r.captureStackTrace&&r.captureStackTrace(this,e),this.rule=t,this.value=n,this.cause=i,this.target=a}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e}(Error),wl=function(r,e){r===void 0&&(r=[]),e===void 0&&(e=[]),this.chain=r,this.nextRuleModifiers=e};wl.prototype._applyRule=function(r,e){var t=this;return function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return t.chain.push(new WM(e,r.apply(t,n),n,t.nextRuleModifiers)),t.nextRuleModifiers=[],t}};wl.prototype._applyModifier=function(r,e){return this.nextRuleModifiers.push(new F2e(e,r.simple,r.async)),this};wl.prototype._clone=function(){return new wl(this.chain.slice(),this.nextRuleModifiers.slice())};wl.prototype.test=function(r){return this.chain.every(function(e){return e._test(r)})};wl.prototype.testAll=function(r){var e=[];return this.chain.forEach(function(t){try{t._check(r)}catch(n){e.push(new CN(t,r,n))}}),e};wl.prototype.check=function(r){this.chain.forEach(function(e){try{e._check(r)}catch(t){throw new CN(e,r,t)}})};wl.prototype.testAsync=function(r){var e=this;return new Promise(function(t,n){tG(r,e.chain.slice(),t,n)})};function tG(r,e,t,n){if(e.length){var i=e.shift();i._testAsync(r).then(function(){tG(r,e,t,n)},function(a){n(new CN(i,r,a))})}else t(r)}var QB=function(r,e){return e&&typeof r=="string"&&r.trim().length===0?!0:r==null};function B2e(r,e){return e===void 0&&(e=!1),{simple:function(t){return QB(t,e)||r.check(t)===void 0},async:function(t){return QB(t,e)||r.testAsync(t)}}}function Wa(){return typeof Proxy<"u"?rG(new wl):HT(new wl)}var K0={};Wa.extend=function(r){Object.assign(K0,r)};Wa.clearCustomRules=function(){K0={}};function rG(r){return new Proxy(r,{get:function(e,t){if(t in e)return e[t];var n=rG(r._clone());if(t in yS)return n._applyModifier(yS[t],t);if(t in K0)return n._applyRule(K0[t],t);if(t in VT)return n._applyRule(VT[t],t)}})}function HT(r){var e=function(i,a){return Object.keys(i).forEach(function(o){a[o]=function(){for(var s=[],l=arguments.length;l--;)s[l]=arguments[l];var u=HT(a._clone()),c=u._applyRule(i[o],o).apply(void 0,s);return c}}),a},t=e(VT,r),n=e(K0,t);return Object.keys(yS).forEach(function(i){Object.defineProperty(n,i,{get:function(){var a=HT(n._clone());return a._applyModifier(yS[i],i)}})}),n}var yS={not:{simple:function(r){return function(e){return!r(e)}},async:function(r){return function(e){return Promise.resolve(r(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(r){return function(e){return ob(e).some(function(t){try{return r(t)}catch{return!1}})}},async:function(r){return function(e){return Promise.all(ob(e).map(function(t){try{return r(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(r){return function(e){return e!==!1&&ob(e).every(r)}},async:function(r){return function(e){return Promise.all(ob(e).map(r)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(r,e){return function(t){return ez(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r(t):r(t)}},async:function(r,e){return function(t){return Promise.resolve(r(t)).then(function(n){return ez(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n:n}).catch(function(){return!1})}}}};function ez(r){return r&&r.name==="schema"&&r.args.length>0&&typeof r.args[0]=="object"}function ob(r){return typeof r=="string"?r.split(""):r}var VT={equal:function(r){return function(e){return e==r}},exact:function(r){return function(e){return e===r}},number:function(r){return r===void 0&&(r=!0),function(e){return typeof e=="number"&&(r||isFinite(e))}},integer:function(){return function(r){var e=Number.isInteger||z2e;return e(r)}},numeric:function(){return function(r){return!isNaN(parseFloat(r))&&isFinite(r)}},string:function(){return cf("string")},boolean:function(){return cf("boolean")},undefined:function(){return cf("undefined")},null:function(){return cf("null")},array:function(){return cf("array")},object:function(){return cf("object")},instanceOf:function(r){return function(e){return e instanceof r}},pattern:function(r){return function(e){return r.test(e)}},lowercase:function(){return function(r){return typeof r=="boolean"||r===r.toLowerCase()&&r.trim()!==""}},uppercase:function(){return function(r){return r===r.toUpperCase()&&r.trim()!==""}},vowel:function(){return function(r){return/^[aeiou]+$/i.test(r)}},consonant:function(){return function(r){return/^(?=[^aeiou])([a-z]+)$/i.test(r)}},first:function(r){return function(e){return e[0]==r}},last:function(r){return function(e){return e[e.length-1]==r}},empty:function(){return function(r){return r.length===0}},length:function(r,e){return function(t){return t.length>=r&&t.length<=(e||r)}},minLength:function(r){return function(e){return e.length>=r}},maxLength:function(r){return function(e){return e.length<=r}},negative:function(){return function(r){return r<0}},positive:function(){return function(r){return r>=0}},between:function(r,e){return function(t){return t>=r&&t<=e}},range:function(r,e){return function(t){return t>=r&&t<=e}},lessThan:function(r){return function(e){return e<r}},lessThanOrEqual:function(r){return function(e){return e<=r}},greaterThan:function(r){return function(e){return e>r}},greaterThanOrEqual:function(r){return function(e){return e>=r}},even:function(){return function(r){return r%2===0}},odd:function(){return function(r){return r%2!==0}},includes:function(r){return function(e){return~e.indexOf(r)}},schema:function(r){return U2e(r)},passesAnyOf:function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return function(t){return r.some(function(n){return n.test(t)})}},optional:B2e};function cf(r){return function(e){return Array.isArray(e)&&r==="array"||e===null&&r==="null"||typeof e===r}}function z2e(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r}function U2e(r){return{simple:function(e){var t=[];if(Object.keys(r).forEach(function(n){var i=r[n];try{i.check((e||{})[n])}catch(a){a.target=n,t.push(a)}}),t.length>0)throw t;return!0},async:function(e){var t=[],n=Object.keys(r).map(function(i){var a=r[i];return a.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(n).then(function(){if(t.length>0)throw t;return!0})}}}var Wr="colors",da="sizes",Et="space",j2e={gap:Et,gridGap:Et,columnGap:Et,gridColumnGap:Et,rowGap:Et,gridRowGap:Et,inset:Et,insetBlock:Et,insetBlockEnd:Et,insetBlockStart:Et,insetInline:Et,insetInlineEnd:Et,insetInlineStart:Et,margin:Et,marginTop:Et,marginRight:Et,marginBottom:Et,marginLeft:Et,marginBlock:Et,marginBlockEnd:Et,marginBlockStart:Et,marginInline:Et,marginInlineEnd:Et,marginInlineStart:Et,padding:Et,paddingTop:Et,paddingRight:Et,paddingBottom:Et,paddingLeft:Et,paddingBlock:Et,paddingBlockEnd:Et,paddingBlockStart:Et,paddingInline:Et,paddingInlineEnd:Et,paddingInlineStart:Et,top:Et,right:Et,bottom:Et,left:Et,scrollMargin:Et,scrollMarginTop:Et,scrollMarginRight:Et,scrollMarginBottom:Et,scrollMarginLeft:Et,scrollMarginX:Et,scrollMarginY:Et,scrollMarginBlock:Et,scrollMarginBlockEnd:Et,scrollMarginBlockStart:Et,scrollMarginInline:Et,scrollMarginInlineEnd:Et,scrollMarginInlineStart:Et,scrollPadding:Et,scrollPaddingTop:Et,scrollPaddingRight:Et,scrollPaddingBottom:Et,scrollPaddingLeft:Et,scrollPaddingX:Et,scrollPaddingY:Et,scrollPaddingBlock:Et,scrollPaddingBlockEnd:Et,scrollPaddingBlockStart:Et,scrollPaddingInline:Et,scrollPaddingInlineEnd:Et,scrollPaddingInlineStart:Et,fontSize:"fontSizes",background:Wr,backgroundColor:Wr,backgroundImage:Wr,borderImage:Wr,border:Wr,borderBlock:Wr,borderBlockEnd:Wr,borderBlockStart:Wr,borderBottom:Wr,borderBottomColor:Wr,borderColor:Wr,borderInline:Wr,borderInlineEnd:Wr,borderInlineStart:Wr,borderLeft:Wr,borderLeftColor:Wr,borderRight:Wr,borderRightColor:Wr,borderTop:Wr,borderTopColor:Wr,caretColor:Wr,color:Wr,columnRuleColor:Wr,fill:Wr,outline:Wr,outlineColor:Wr,stroke:Wr,textDecorationColor:Wr,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:da,minBlockSize:da,maxBlockSize:da,inlineSize:da,minInlineSize:da,maxInlineSize:da,width:da,minWidth:da,maxWidth:da,height:da,minHeight:da,maxHeight:da,flexBasis:da,gridTemplateColumns:da,gridTemplateRows:da,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},H2e=(r,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,_m=()=>{const r=Object.create(null);return(e,t,...n)=>{const i=(a=>JSON.stringify(a,H2e))(e);return i in r?r[i]:r[i]=t(e,...n)}},ad=Symbol.for("sxs.internal"),AN=(r,e)=>Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)),tz=r=>{for(const e in r)return!0;return!1},{hasOwnProperty:V2e}=Object.prototype,qT=r=>r.includes("-")?r:r.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),q2e=/\s+(?![^()]*\))/,hf=r=>e=>r(...typeof e=="string"?String(e).split(q2e):[e]),rz={appearance:r=>({WebkitAppearance:r,appearance:r}),backfaceVisibility:r=>({WebkitBackfaceVisibility:r,backfaceVisibility:r}),backdropFilter:r=>({WebkitBackdropFilter:r,backdropFilter:r}),backgroundClip:r=>({WebkitBackgroundClip:r,backgroundClip:r}),boxDecorationBreak:r=>({WebkitBoxDecorationBreak:r,boxDecorationBreak:r}),clipPath:r=>({WebkitClipPath:r,clipPath:r}),content:r=>({content:r.includes('"')||r.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(r)?r:`"${r}"`}),hyphens:r=>({WebkitHyphens:r,hyphens:r}),maskImage:r=>({WebkitMaskImage:r,maskImage:r}),maskSize:r=>({WebkitMaskSize:r,maskSize:r}),tabSize:r=>({MozTabSize:r,tabSize:r}),textSizeAdjust:r=>({WebkitTextSizeAdjust:r,textSizeAdjust:r}),userSelect:r=>({WebkitUserSelect:r,userSelect:r}),marginBlock:hf((r,e)=>({marginBlockStart:r,marginBlockEnd:e||r})),marginInline:hf((r,e)=>({marginInlineStart:r,marginInlineEnd:e||r})),maxSize:hf((r,e)=>({maxBlockSize:r,maxInlineSize:e||r})),minSize:hf((r,e)=>({minBlockSize:r,minInlineSize:e||r})),paddingBlock:hf((r,e)=>({paddingBlockStart:r,paddingBlockEnd:e||r})),paddingInline:hf((r,e)=>({paddingInlineStart:r,paddingInlineEnd:e||r}))},HE=/([\d.]+)([^]*)/,W2e=(r,e)=>r.length?r.reduce((t,n)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(i)?`:is(${n})`:n):n+" "+i)),t),[]):e,G2e=(r,e)=>r in $2e&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,n,i,a)=>n+(i==="stretch"?`-moz-available${a};${qT(r)}:${n}-webkit-fill-available`:`-moz-fit-content${a};${qT(r)}:${n}fit-content`)+a):String(e),$2e={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},xu=r=>r?r+"-":"",nG=(r,e,t)=>r.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(n,i,a,o,s)=>o=="$"==!!a?n:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?xu(e)+(s.includes("$")?"":xu(t))+s.replace(/\$/g,"-"):s)+")"+(i||o=="--"?"*"+(i||"")+(a||"1")+")":"")),X2e=/\s*,\s*(?![^()]*\))/,Y2e=Object.prototype.toString,sp=(r,e,t,n,i)=>{let a,o,s;const l=(u,c,h)=>{let d,f;const p=v=>{for(d in v){const w=d.charCodeAt(0)===64,b=w&&Array.isArray(v[d])?v[d]:[v[d]];for(f of b){const m=/[A-Z]/.test(g=d)?g:g.replace(/-[^]/g,S=>S[1].toUpperCase()),x=typeof f=="object"&&f&&f.toString===Y2e&&(!n.utils[m]||!c.length);if(m in n.utils&&!x){const S=n.utils[m];if(S!==o){o=S,p(S(f)),o=null;continue}}else if(m in rz){const S=rz[m];if(S!==s){s=S,p(S(f)),s=null;continue}}if(w&&(y=d.slice(1)in n.media?"@media "+n.media[d.slice(1)]:d,d=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(S,E,A,T,C,D)=>{const O=HE.test(E),U=.0625*(O?-1:1),[L,F]=O?[T,E]:[E,T];return"("+(A[0]==="="?"":A[0]===">"===O?"max-":"min-")+L+":"+(A[0]!=="="&&A.length===1?F.replace(HE,(k,R,z)=>Number(R)+U*(A===">"?1:-1)+z):F)+(C?") and ("+(C[0]===">"?"min-":"max-")+L+":"+(C.length===1?D.replace(HE,(k,R,z)=>Number(R)+U*(C===">"?-1:1)+z):D):"")+")"})),x){const S=w?h.concat(d):[...h],E=w?[...c]:W2e(c,d.split(X2e));a!==void 0&&i(nz(...a)),a=void 0,l(f,E,S)}else a===void 0&&(a=[[],c,h]),d=w||d.charCodeAt(0)!==36?d:`--${xu(n.prefix)}${d.slice(1).replace(/\$/g,"-")}`,f=x?f:typeof f=="number"?f&&m in J2e?String(f)+"px":String(f):nG(G2e(m,f??""),n.prefix,n.themeMap[m]),a[0].push(`${w?`${d} `:`${qT(d)}:`}${f}`)}}var y,g};p(u),a!==void 0&&i(nz(...a)),a=void 0};l(r,e,t)},nz=(r,e,t)=>`${t.map(n=>`${n}{`).join("")}${e.length?`${e.join(",")}{`:""}${r.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,J2e={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},iz=r=>String.fromCharCode(r+(r>25?39:97)),od=r=>(e=>{let t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=iz(t%52)+n;return iz(t%52)+n})(((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(5381,JSON.stringify(r))>>>0),Xg=["themed","global","styled","onevar","resonevar","allvar","inline"],Z2e=r=>{if(r.href&&!r.href.startsWith(location.origin))return!1;try{return!!r.cssRules}catch{return!1}},K2e=r=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(a,o)=>{const{cssText:s}=a;let l="";if(s.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!a.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===a)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${s}`;return a.cssRules.length?`${l}${s}`:""}return s}).join("")},n=()=>{if(e){const{rules:s,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in s)delete s[u]}const i=Object(r).styleSheets||[];for(const s of i)if(Z2e(s)){for(let l=0,u=s.cssRules;u[l];++l){const c=Object(u[l]);if(c.type!==1)continue;const h=Object(u[l+1]);if(h.type!==4)continue;++l;const{cssText:d}=c;if(!d.startsWith("--sxs"))continue;const f=d.slice(14,-3).trim().split(/\s+/),p=Xg[f[0]];p&&(e||(e={sheet:s,reset:n,rules:{},toString:t}),e.rules[p]={group:h,index:l,cache:new Set(f)})}if(e)break}if(!e){const s=(l,u)=>({type:u,cssRules:[],insertRule(c,h){this.cssRules.splice(h,0,s(c,{import:3,undefined:1}[(c.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,c=>c.cssText).join("")}}`:l}});e={sheet:r?(r.head||r).appendChild(document.createElement("style")).sheet:s("","text/css"),rules:{},reset:n,toString:t}}const{sheet:a,rules:o}=e;for(let s=Xg.length-1;s>=0;--s){const l=Xg[s];if(!o[l]){const u=Xg[s+1],c=o[u]?o[u].index:a.cssRules.length;a.insertRule("@media{}",c),a.insertRule(`--sxs{--sxs:${s}}`,c),o[l]={group:a.cssRules[c+1],index:c,cache:new Set([s])}}Q2e(o[l])}};return n(),e},Q2e=r=>{const e=r.group;let t=e.cssRules.length;r.apply=n=>{try{e.insertRule(n,t),++t}catch{}}},vg=Symbol(),e_e=_m(),az=(r,e)=>e_e(r,()=>(...t)=>{let n={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[ad]){n.type==null&&(n.type=i[ad].type);for(const a of i[ad].composers)n.composers.add(a)}else i.constructor!==Object||i.$$typeof?n.type==null&&(n.type=i):n.composers.add(t_e(i,r));return n.type==null&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),r_e(r,n,e)}),t_e=({variants:r,compoundVariants:e,defaultVariants:t,...n},i)=>{const a=`${xu(i.prefix)}c-${od(n)}`,o=[],s=[],l=Object.create(null),u=[];for(const d in t)l[d]=String(t[d]);if(typeof r=="object"&&r)for(const d in r){c=l,h=d,V2e.call(c,h)||(l[d]="undefined");const f=r[d];for(const p in f){const v={[d]:String(p)};String(p)==="undefined"&&u.push(d);const y=f[p],g=[v,y,!tz(y)];o.push(g)}}var c,h;if(typeof e=="object"&&e)for(const d of e){let{css:f,...p}=d;f=typeof f=="object"&&f||{};for(const y in p)p[y]=String(p[y]);const v=[p,f,!tz(f)];s.push(v)}return[a,n,o,s,l,u]},r_e=(r,e,t)=>{const[n,i,a,o]=n_e(e.composers),s=typeof e.type=="function"||e.type.$$typeof?(h=>{function d(){for(let f=0;f<d[vg].length;f++){const[p,v]=d[vg][f];h.rules[p].apply(v)}return d[vg]=[],null}return d[vg]=[],d.rules={},Xg.forEach(f=>d.rules[f]={apply:p=>d[vg].push([f,p])}),d})(t):null,l=(s||t).rules,u=`.${n}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=h=>{h=typeof h=="object"&&h||i_e;const{css:d,...f}=h,p={};for(const g in a)if(delete f[g],g in h){let w=h[g];typeof w=="object"&&w?p[g]={"@initial":a[g],...w}:(w=String(w),p[g]=w!=="undefined"||o.has(g)?w:a[g])}else p[g]=a[g];const v=new Set([...i]);for(const[g,w,b,m]of e.composers){t.rules.styled.cache.has(g)||(t.rules.styled.cache.add(g),sp(w,[`.${g}`],[],r,E=>{l.styled.apply(E)}));const x=oz(b,p,r.media),S=oz(m,p,r.media,!0);for(const E of x)if(E!==void 0)for(const[A,T,C]of E){const D=`${g}-${od(T)}-${A}`;v.add(D);const O=(C?t.rules.resonevar:t.rules.onevar).cache,U=C?l.resonevar:l.onevar;O.has(D)||(O.add(D),sp(T,[`.${D}`],[],r,L=>{U.apply(L)}))}for(const E of S)if(E!==void 0)for(const[A,T]of E){const C=`${g}-${od(T)}-${A}`;v.add(C),t.rules.allvar.cache.has(C)||(t.rules.allvar.cache.add(C),sp(T,[`.${C}`],[],r,D=>{l.allvar.apply(D)}))}}if(typeof d=="object"&&d){const g=`${n}-i${od(d)}-css`;v.add(g),t.rules.inline.cache.has(g)||(t.rules.inline.cache.add(g),sp(d,[`.${g}`],[],r,w=>{l.inline.apply(w)}))}for(const g of String(h.className||"").trim().split(/\s+/))g&&v.add(g);const y=f.className=[...v].join(" ");return{type:e.type,className:y,selector:u,props:f,toString:()=>y,deferredInjector:s}};return AN(c,{className:n,selector:u,[ad]:e,toString:()=>(t.rules.styled.cache.has(n)||c(),n)})},n_e=r=>{let e="";const t=[],n={},i=[];for(const[a,,,,o,s]of r){e===""&&(e=a),t.push(a),i.push(...s);for(const l in o){const u=o[l];(n[l]===void 0||u!=="undefined"||s.includes(u))&&(n[l]=u)}}return[e,t,n,new Set(i)]},oz=(r,e,t,n)=>{const i=[];e:for(let[a,o,s]of r){if(s)continue;let l,u=0,c=!1;for(l in a){const h=a[l];let d=e[l];if(d!==h){if(typeof d!="object"||!d)continue e;{let f,p,v=0;for(const y in d){if(h===String(d[y])){if(y!=="@initial"){const g=y.slice(1);(p=p||[]).push(g in t?t[g]:y.replace(/^@media ?/,"")),c=!0}u+=v,f=!0}++v}if(p&&p.length&&(o={["@media "+p.join(", ")]:o}),!f)continue e}}}(i[u]=i[u]||[]).push([n?"cv":`${l}-${a[l]}`,o,c])}return i},i_e={},a_e=_m(),o_e=(r,e)=>a_e(r,()=>(...t)=>{const n=()=>{for(let i of t){i=typeof i=="object"&&i||{};let a=od(i);if(!e.rules.global.cache.has(a)){if(e.rules.global.cache.add(a),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let s of[].concat(i["@import"]))s=s.includes('"')||s.includes("'")?s:`"${s}"`,e.sheet.insertRule(`@import ${s};`,o++);delete i["@import"]}sp(i,[],[],r,o=>{e.rules.global.apply(o)})}}return""};return AN(n,{toString:n})}),s_e=_m(),l_e=(r,e)=>s_e(r,()=>t=>{const n=`${xu(r.prefix)}k-${od(t)}`,i=()=>{if(!e.rules.global.cache.has(n)){e.rules.global.cache.add(n);const a=[];sp(t,[],[],r,s=>a.push(s));const o=`@keyframes ${n}{${a.join("")}}`;e.rules.global.apply(o)}return n};return AN(i,{get name(){return i()},toString:i})}),u_e=class{constructor(r,e,t,n){this.token=r==null?"":String(r),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=n==null?"":String(n)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+xu(this.prefix)+xu(this.scale)+this.token}toString(){return this.computedValue}},c_e=_m(),h_e=(r,e)=>c_e(r,()=>(t,n)=>{n=typeof t=="object"&&t||Object(n);const i=`.${t=(t=typeof t=="string"?t:"")||`${xu(r.prefix)}t-${od(n)}`}`,a={},o=[];for(const l in n){a[l]={};for(const u in n[l]){const c=`--${xu(r.prefix)}${l}-${u}`,h=nG(String(n[l][u]),r.prefix,l);a[l][u]=new u_e(u,h,l,r.prefix),o.push(`${c}:${h}`)}}const s=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${n===r.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...a,get className(){return s()},selector:i,toString:s}}),d_e=_m(),f_e=_m(),p_e=r=>{const e=(t=>{let n=!1;const i=d_e(t,a=>{n=!0;const o="prefix"in(a=typeof a=="object"&&a||{})?String(a.prefix):"",s=typeof a.media=="object"&&a.media||{},l=typeof a.root=="object"?a.root||null:globalThis.document||null,u=typeof a.theme=="object"&&a.theme||{},c={prefix:o,media:s,theme:u,themeMap:typeof a.themeMap=="object"&&a.themeMap||{...j2e},utils:typeof a.utils=="object"&&a.utils||{}},h=K2e(l),d={css:az(c,h),globalCss:o_e(c,h),keyframes:l_e(c,h),createTheme:h_e(c,h),reset(){h.reset(),d.theme.toString()},theme:{},sheet:h,config:c,prefix:o,getCssText:h.toString,toString:h.toString};return String(d.theme=d.createTheme(u)),d});return n||i.reset(),i})(r);return e.styled=(({config:t,sheet:n})=>f_e(t,()=>{const i=az(t,n);return(...a)=>{const o=i(...a),s=o[ad].type,l=Ae.forwardRef((u,c)=>{const h=u&&u.as||s,{props:d,deferredInjector:f}=o(u);return delete d.as,d.ref=c,f?Ae.createElement(Ae.Fragment,null,Ae.createElement(h,d),Ae.createElement(f,null)):Ae.createElement(h,d)});return l.className=o.className,l.displayName=`Styled.${s.displayName||s.name||s}`,l.selector=o.selector,l.toString=()=>o.selector,l[ad]=o[ad],l}}))(e),e};function m_e(r,e,t){return Math.max(e,Math.min(r,t))}const Ki={toVector(r,e){return r===void 0&&(r=e),Array.isArray(r)?r:[r,r]},add(r,e){return[r[0]+e[0],r[1]+e[1]]},sub(r,e){return[r[0]-e[0],r[1]-e[1]]},addTo(r,e){r[0]+=e[0],r[1]+=e[1]},subTo(r,e){r[0]-=e[0],r[1]-=e[1]}};function sz(r,e,t){return e===0||Math.abs(e)===1/0?Math.pow(r,t*5):r*e*t/(e+t*r)}function lz(r,e,t,n=.15){return n===0?m_e(r,e,t):r<e?-sz(e-r,t-e,n)+e:r>t?+sz(r-t,t-e,n)+t:r}function g_e(r,[e,t],[n,i]){const[[a,o],[s,l]]=r;return[lz(e,a,o,n),lz(t,s,l,i)]}function v_e(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function y_e(r){var e=v_e(r,"string");return typeof e=="symbol"?e:String(e)}function za(r,e,t){return e=y_e(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function uz(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function xn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uz(Object(t),!0).forEach(function(n){za(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):uz(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}const iG={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function cz(r){return r?r[0].toUpperCase()+r.slice(1):""}const b_e=["enter","leave"];function x_e(r=!1,e){return r&&!b_e.includes(e)}function w_e(r,e="",t=!1){const n=iG[r],i=n&&n[e]||e;return"on"+cz(r)+cz(i)+(x_e(t,i)?"Capture":"")}const S_e=["gotpointercapture","lostpointercapture"];function M_e(r){let e=r.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const n=S_e.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(n);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function __e(r,e=""){const t=iG[r],n=t&&t[e]||e;return r+n}function GM(r){return"touches"in r}function aG(r){return GM(r)?"touch":"pointerType"in r?r.pointerType:"mouse"}function E_e(r){return Array.from(r.touches).filter(e=>{var t,n;return e.target===r.currentTarget||((t=r.currentTarget)===null||t===void 0||(n=t.contains)===null||n===void 0?void 0:n.call(t,e.target))})}function C_e(r){return r.type==="touchend"||r.type==="touchcancel"?r.changedTouches:r.targetTouches}function oG(r){return GM(r)?C_e(r)[0]:r}function A_e(r){return E_e(r).map(e=>e.identifier)}function VE(r){const e=oG(r);return GM(r)?e.identifier:e.pointerId}function hz(r){const e=oG(r);return[e.clientX,e.clientY]}function T_e(r){const e={};if("buttons"in r&&(e.buttons=r.buttons),"shiftKey"in r){const{shiftKey:t,altKey:n,metaKey:i,ctrlKey:a}=r;Object.assign(e,{shiftKey:t,altKey:n,metaKey:i,ctrlKey:a})}return e}function bS(r,...e){return typeof r=="function"?r(...e):r}function D_e(){}function k_e(...r){return r.length===0?D_e:r.length===1?r[0]:function(){let e;for(const t of r)e=t.apply(this,arguments)||e;return e}}function dz(r,e){return Object.assign({},e,r||{})}const N_e=32;class O_e{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:i}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?bS(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:i}=this;t.args=this.args;let a=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,T_e(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const S=t._delta.map(Math.abs);Ki.addTo(t._distance,S)}this.axisIntent&&this.axisIntent(e);const[o,s]=t._movement,[l,u]=n.threshold,{_step:c,values:h}=t;if(n.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&h[0]),c[1]===!1&&(c[1]=Math.abs(s)>=u&&h[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(s)>=u&&Math.sign(s)*u)),t.intentional=c[0]!==!1||c[1]!==!1,!t.intentional)return;const d=[0,0];if(n.hasCustomTransform){const[S,E]=h;d[0]=c[0]!==!1?S-c[0]:0,d[1]=c[1]!==!1?E-c[1]:0}else d[0]=c[0]!==!1?o-c[0]:0,d[1]=c[1]!==!1?s-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(d);const f=t.offset,p=t._active&&!t._blocked||t.active;p&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=bS(n.bounds,t)),this.setup&&this.setup()),t.movement=d,this.computeOffset()));const[v,y]=t.offset,[[g,w],[b,m]]=t._bounds;t.overflow=[v<g?-1:v>w?1:0,y<b?-1:y>m?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const x=t._active?n.rubberband||[0,0]:[0,0];if(t.offset=g_e(t._bounds,t.offset,x),t.delta=Ki.sub(t.offset,f),this.computeMovement(),p&&(!t.last||a>N_e)){t.delta=Ki.sub(t.offset,f);const S=t.delta.map(Math.abs);Ki.addTo(t.distance,S),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[S[0]/a,S[1]/a],t.timeDelta=a)}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const i=this.handler(xn(xn(xn({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function R_e([r,e],t){const n=Math.abs(r),i=Math.abs(e);if(n>i&&n>t)return"x";if(i>n&&i>t)return"y"}class P_e extends O_e{constructor(...e){super(...e),za(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ki.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Ki.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const i=typeof n.axisThreshold=="object"?n.axisThreshold[aG(e)]:n.axisThreshold;t.axis=R_e(t._movement,i)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const I_e=r=>r,fz=.15,sG={enabled(r=!0){return r},eventOptions(r,e,t){return xn(xn({},t.shared.eventOptions),r)},preventDefault(r=!1){return r},triggerAllEvents(r=!1){return r},rubberband(r=0){switch(r){case!0:return[fz,fz];case!1:return[0,0];default:return Ki.toVector(r)}},from(r){if(typeof r=="function")return r;if(r!=null)return Ki.toVector(r)},transform(r,e,t){const n=r||t.shared.transform;return this.hasCustomTransform=!!n,n||I_e},threshold(r){return Ki.toVector(r,0)}},L_e=0,ny=xn(xn({},sG),{},{axis(r,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(r=L_e){return r},bounds(r={}){if(typeof r=="function")return a=>ny.bounds(r(a));if("current"in r)return()=>r.current;if(typeof HTMLElement=="function"&&r instanceof HTMLElement)return r;const{left:e=-1/0,right:t=1/0,top:n=-1/0,bottom:i=1/0}=r;return[[e,t],[n,i]]}}),pz={ArrowRight:(r,e=1)=>[r*e,0],ArrowLeft:(r,e=1)=>[-1*r*e,0],ArrowUp:(r,e=1)=>[0,-1*r*e],ArrowDown:(r,e=1)=>[0,r*e]};class F_e extends P_e{constructor(...e){super(...e),za(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),i={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=ny.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&n._pointerActive)&&(this.start(e),this.setupPointer(e),n._pointerId=VE(e),n._pointerActive=!0,this.computeValues(hz(e)),this.computeInitial(),t.preventScrollAxis&&aG(e)!=="mouse"?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;const i=VE(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const a=hz(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Ki.sub(a,t._values),this.computeValues(a)),Ki.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(n.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===n.preventScrollAxis||n.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const i=VE(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,o]=t._distance;if(t.tap=a<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[s,l]=t._delta,[u,c]=t._movement,[h,d]=n.swipe.velocity,[f,p]=n.swipe.distance,v=n.swipe.duration;if(t.elapsedTime<v){const y=Math.abs(s/t.timeDelta),g=Math.abs(l/t.timeDelta);y>h&&Math.abs(u)>f&&(t.swipe[0]=Math.sign(s)),g>d&&Math.abs(c)>p&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,B_e(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=pz[e.key];if(t){const n=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,i),n._keyboardActive=!0,Ki.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in pz&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function B_e(r){"persist"in r&&typeof r.persist=="function"&&r.persist()}const iy=typeof window<"u"&&window.document&&window.document.createElement;function lG(){return iy&&"ontouchstart"in window}function z_e(){return lG()||iy&&window.navigator.maxTouchPoints>1}function U_e(){return iy&&"onpointerdown"in window}function j_e(){return iy&&"exitPointerLock"in window.document}function H_e(){try{return"constructor"in GestureEvent}catch{return!1}}const jo={isBrowser:iy,gesture:H_e(),touch:lG(),touchscreen:z_e(),pointer:U_e(),pointerLock:j_e()},V_e=250,q_e=180,W_e=.5,G_e=50,$_e=250,X_e=10,mz={mouse:0,touch:0,pen:8},Y_e=xn(xn({},ny),{},{device(r,e,{pointer:{touch:t=!1,lock:n=!1,mouse:i=!1}={}}){return this.pointerLock=n&&jo.pointerLock,jo.touch&&t?"touch":this.pointerLock?"mouse":jo.pointer&&!i?"pointer":jo.touch?"touch":"mouse"},preventScrollAxis(r,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&r?V_e:void 0,!(!jo.touchscreen||t===!1))return r||(t!==void 0?"y":void 0)},pointerCapture(r,e,{pointer:{capture:t=!0,buttons:n=1,keys:i=!0}={}}){return this.pointerButtons=n,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(r,e,{filterTaps:t=!1,tapsThreshold:n=3,axis:i=void 0}){const a=Ki.toVector(r,t?n:i?1:0);return this.filterTaps=t,this.tapsThreshold=n,a},swipe({velocity:r=W_e,distance:e=G_e,duration:t=$_e}={}){return{velocity:this.transform(Ki.toVector(r)),distance:this.transform(Ki.toVector(e)),duration:t}},delay(r=0){switch(r){case!0:return q_e;case!1:return 0;default:return r}},axisThreshold(r){return r?xn(xn({},mz),r):mz},keyboardDisplacement(r=X_e){return r}});xn(xn({},sG),{},{device(r,e,{shared:t,pointer:{touch:n=!1}={}}){if(t.target&&!jo.touch&&jo.gesture)return"gesture";if(jo.touch&&n)return"touch";if(jo.touchscreen){if(jo.pointer)return"pointer";if(jo.touch)return"touch"}},bounds(r,e,{scaleBounds:t={},angleBounds:n={}}){const i=o=>{const s=dz(bS(t,o),{min:-1/0,max:1/0});return[s.min,s.max]},a=o=>{const s=dz(bS(n,o),{min:-1/0,max:1/0});return[s.min,s.max]};return typeof t!="function"&&typeof n!="function"?[i(),a()]:o=>[i(o),a(o)]},threshold(r,e,t){return this.lockDirection=t.axis==="lock",Ki.toVector(r,this.lockDirection?[.1,3]:0)},modifierKey(r){return r===void 0?"ctrlKey":r},pinchOnWheel(r=!0){return r}});xn(xn({},ny),{},{mouseOnly:(r=!0)=>r});xn(xn({},ny),{},{mouseOnly:(r=!0)=>r});const uG=new Map,WT=new Map;function J_e(r){uG.set(r.key,r.engine),WT.set(r.key,r.resolver)}const Z_e={key:"drag",engine:F_e,resolver:Y_e};function K_e(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function Q_e(r,e){if(r==null)return{};var t=K_e(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}const eEe={target(r){if(r)return()=>"current"in r?r.current:r},enabled(r=!0){return r},window(r=jo.isBrowser?window:void 0){return r},eventOptions({passive:r=!0,capture:e=!1}={}){return{passive:r,capture:e}},transform(r){return r}},tEe=["target","eventOptions","window","enabled","transform"];function Yx(r={},e){const t={};for(const[n,i]of Object.entries(e))switch(typeof i){case"function":t[n]=i.call(t,r[n],n,r);break;case"object":t[n]=Yx(r[n],i);break;case"boolean":i&&(t[n]=r[n]);break}return t}function rEe(r,e,t={}){const n=r,{target:i,eventOptions:a,window:o,enabled:s,transform:l}=n,u=Q_e(n,tEe);if(t.shared=Yx({target:i,eventOptions:a,window:o,enabled:s,transform:l},eEe),e){const c=WT.get(e);t[e]=Yx(xn({shared:t.shared},u),c)}else for(const c in u){const h=WT.get(c);h&&(t[c]=Yx(xn({shared:t.shared},u[c]),h))}return t}class cG{constructor(e,t){za(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,i,a){const o=this._listeners,s=__e(t,n),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=xn(xn({},l),a);e.addEventListener(s,i,u);const c=()=>{e.removeEventListener(s,i,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class nEe{constructor(){za(this,"_timeouts",new Map)}add(e,t,n=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class iEe{constructor(e){za(this,"gestures",new Set),za(this,"_targetEventStore",new cG(this)),za(this,"gestureEventStores",{}),za(this,"gestureTimeoutStores",{}),za(this,"handlers",{}),za(this,"config",{}),za(this,"pointerIds",new Set),za(this,"touchIds",new Set),za(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),aEe(this,e)}setEventIds(e){if(GM(e))return this.touchIds=new Set(A_e(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=rEe(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const s=this.config[o],l=gz(n,s.eventOptions,!!i);if(s.enabled){const u=uG.get(o);new u(this,e,o).bind(l)}}const a=gz(n,t.eventOptions,!!i);for(const o in this.nativeHandlers)a(o,"",s=>this.nativeHandlers[o](xn(xn({},this.state.shared),{},{event:s,args:e})),void 0,!0)}for(const a in n)n[a]=k_e(...n[a]);if(!i)return n;for(const a in n){const{device:o,capture:s,passive:l}=M_e(a);this._targetEventStore.add(i,o,"",n[a],{capture:s,passive:l})}}}}function df(r,e){r.gestures.add(e),r.gestureEventStores[e]=new cG(r,e),r.gestureTimeoutStores[e]=new nEe}function aEe(r,e){e.drag&&df(r,"drag"),e.wheel&&df(r,"wheel"),e.scroll&&df(r,"scroll"),e.move&&df(r,"move"),e.pinch&&df(r,"pinch"),e.hover&&df(r,"hover")}const gz=(r,e,t)=>(n,i,a,o={},s=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:e.capture,h=(u=o.passive)!==null&&u!==void 0?u:e.passive;let d=s?n:w_e(n,i,c);t&&h&&(d+="Passive"),r[d]=r[d]||[],r[d].push(a)};function oEe(r,e={},t,n){const i=Ae.useMemo(()=>new iEe(r),[]);if(i.applyHandlers(r,n),i.applyConfig(e,t),Ae.useEffect(i.effect.bind(i)),Ae.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function sEe(r,e){return J_e(Z_e),oEe({drag:r},e||{},"drag")}function Jl(r,e,{checkForDefaultPrevented:t=!0}={}){return function(n){if(r==null||r(n),t===!1||!n.defaultPrevented)return e==null?void 0:e(n)}}function hG(r,e=[]){let t=[];function n(a,o){const s=j.createContext(o),l=t.length;t=[...t,o];function u(h){const{scope:d,children:f,...p}=h,v=(d==null?void 0:d[r][l])||s,y=j.useMemo(()=>p,Object.values(p));return j.createElement(v.Provider,{value:y},f)}function c(h,d){const f=(d==null?void 0:d[r][l])||s,p=j.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,c]}const i=()=>{const a=t.map(o=>j.createContext(o));return function(o){const s=(o==null?void 0:o[r])||a;return j.useMemo(()=>({[`__scope${r}`]:{...o,[r]:s}}),[o,s])}};return i.scopeName=r,[n,lEe(i,...e)]}function lEe(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(i){const a=n.reduce((o,{useScope:s,scopeName:l})=>{const u=s(i)[`__scope${l}`];return{...o,...u}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function Em(r){const e=j.useRef(r);return j.useEffect(()=>{e.current=r}),j.useMemo(()=>(...t)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...t)},[])}function uEe(r,e=globalThis==null?void 0:globalThis.document){const t=Em(r);j.useEffect(()=>{const n=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",n),()=>e.removeEventListener("keydown",n)},[t,e])}const GT="dismissableLayer.update",cEe="dismissableLayer.pointerDownOutside",hEe="dismissableLayer.focusOutside";let vz;const dEe=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fEe=j.forwardRef((r,e)=>{var t;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:s,onDismiss:l,...u}=r,c=j.useContext(dEe),[h,d]=j.useState(null),f=(t=h==null?void 0:h.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,p]=j.useState({}),v=Mm(e,A=>d(A)),y=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(g),b=h?y.indexOf(h):-1,m=c.layersWithOutsidePointerEventsDisabled.size>0,x=b>=w,S=pEe(A=>{const T=A.target,C=[...c.branches].some(D=>D.contains(T));!x||C||(a==null||a(A),s==null||s(A),A.defaultPrevented||l==null||l())},f),E=mEe(A=>{const T=A.target;[...c.branches].some(C=>C.contains(T))||(o==null||o(A),s==null||s(A),A.defaultPrevented||l==null||l())},f);return uEe(A=>{b===c.layers.size-1&&(i==null||i(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},f),j.useEffect(()=>{if(h)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(vz=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(h)),c.layers.add(h),yz(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=vz)}},[h,f,n,c]),j.useEffect(()=>()=>{h&&(c.layers.delete(h),c.layersWithOutsidePointerEventsDisabled.delete(h),yz())},[h,c]),j.useEffect(()=>{const A=()=>p({});return document.addEventListener(GT,A),()=>document.removeEventListener(GT,A)},[]),j.createElement(zd.div,lt({},u,{ref:v,style:{pointerEvents:m?x?"auto":"none":void 0,...r.style},onFocusCapture:Jl(r.onFocusCapture,E.onFocusCapture),onBlurCapture:Jl(r.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Jl(r.onPointerDownCapture,S.onPointerDownCapture)}))});function pEe(r,e=globalThis==null?void 0:globalThis.document){const t=Em(r),n=j.useRef(!1),i=j.useRef(()=>{});return j.useEffect(()=>{const a=s=>{if(s.target&&!n.current){let l=function(){dG(cEe,t,u,{discrete:!0})};const u={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function mEe(r,e=globalThis==null?void 0:globalThis.document){const t=Em(r),n=j.useRef(!1);return j.useEffect(()=>{const i=a=>{a.target&&!n.current&&dG(hEe,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function yz(){const r=new CustomEvent(GT);document.dispatchEvent(r)}function dG(r,e,t,{discrete:n}){const i=t.originalEvent.target,a=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(r,e,{once:!0}),n?P2e(i,a):i.dispatchEvent(a)}const Yp=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},gEe=xw.useId||(()=>{});let vEe=0;function yEe(r){const[e,t]=j.useState(gEe());return Yp(()=>{t(n=>n??String(vEe++))},[r]),e?`radix-${e}`:""}const bEe=["top","right","bottom","left"],ol=Math.min,ho=Math.max,xS=Math.round,sb=Math.floor,Vc=r=>({x:r,y:r}),xEe={left:"right",right:"left",bottom:"top",top:"bottom"},wEe={start:"end",end:"start"};function $T(r,e,t){return ho(r,ol(e,t))}function wu(r,e){return typeof r=="function"?r(e):r}function Su(r){return r.split("-")[0]}function Cm(r){return r.split("-")[1]}function TN(r){return r==="x"?"y":"x"}function DN(r){return r==="y"?"height":"width"}function Am(r){return["top","bottom"].includes(Su(r))?"y":"x"}function kN(r){return TN(Am(r))}function SEe(r,e,t){t===void 0&&(t=!1);const n=Cm(r),i=kN(r),a=DN(i);let o=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=wS(o)),[o,wS(o)]}function MEe(r){const e=wS(r);return[XT(r),e,XT(e)]}function XT(r){return r.replace(/start|end/g,e=>wEe[e])}function _Ee(r,e,t){const n=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(r){case"top":case"bottom":return t?e?i:n:e?n:i;case"left":case"right":return e?a:o;default:return[]}}function EEe(r,e,t,n){const i=Cm(r);let a=_Ee(Su(r),t==="start",n);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(XT)))),a}function wS(r){return r.replace(/left|right|bottom|top/g,e=>xEe[e])}function CEe(r){return{top:0,right:0,bottom:0,left:0,...r}}function fG(r){return typeof r!="number"?CEe(r):{top:r,right:r,bottom:r,left:r}}function SS(r){const{x:e,y:t,width:n,height:i}=r;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function bz(r,e,t){let{reference:n,floating:i}=r;const a=Am(e),o=kN(e),s=DN(o),l=Su(e),u=a==="y",c=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,d=n[s]/2-i[s]/2;let f;switch(l){case"top":f={x:c,y:n.y-i.height};break;case"bottom":f={x:c,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-i.width,y:h};break;default:f={x:n.x,y:n.y}}switch(Cm(e)){case"start":f[o]-=d*(t&&u?-1:1);break;case"end":f[o]+=d*(t&&u?-1:1);break}return f}const AEe=async(r,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=t,s=a.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:r,floating:e,strategy:i}),{x:c,y:h}=bz(u,n,l),d=n,f={},p=0;for(let v=0;v<s.length;v++){const{name:y,fn:g}=s[v],{x:w,y:b,data:m,reset:x}=await g({x:c,y:h,initialPlacement:n,placement:d,strategy:i,middlewareData:f,rects:u,platform:o,elements:{reference:r,floating:e}});c=w??c,h=b??h,f={...f,[y]:{...f[y],...m}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(u=x.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:i}):x.rects),{x:c,y:h}=bz(u,d,l)),v=-1)}return{x:c,y:h,placement:d,strategy:i,middlewareData:f}};async function Q0(r,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:a,rects:o,elements:s,strategy:l}=r,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=wu(e,r),p=fG(f),v=s[d?h==="floating"?"reference":"floating":h],y=SS(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(v)))==null||t?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),g=h==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),b=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},m=SS(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:g,offsetParent:w,strategy:l}):g);return{top:(y.top-m.top+p.top)/b.y,bottom:(m.bottom-y.bottom+p.bottom)/b.y,left:(y.left-m.left+p.left)/b.x,right:(m.right-y.right+p.right)/b.x}}const TEe=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:i,rects:a,platform:o,elements:s,middlewareData:l}=e,{element:u,padding:c=0}=wu(r,e)||{};if(u==null)return{};const h=fG(c),d={x:t,y:n},f=kN(i),p=DN(f),v=await o.getDimensions(u),y=f==="y",g=y?"top":"left",w=y?"bottom":"right",b=y?"clientHeight":"clientWidth",m=a.reference[p]+a.reference[f]-d[f]-a.floating[p],x=d[f]-a.reference[f],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=S?S[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(S)))&&(E=s.floating[b]||a.floating[p]);const A=m/2-x/2,T=E/2-v[p]/2-1,C=ol(h[g],T),D=ol(h[w],T),O=C,U=E-v[p]-D,L=E/2-v[p]/2+A,F=$T(O,L,U),k=!l.arrow&&Cm(i)!=null&&L!==F&&a.reference[p]/2-(L<O?C:D)-v[p]/2<0,R=k?L<O?L-O:L-U:0;return{[f]:d[f]+R,data:{[f]:F,centerOffset:L-F-R,...k&&{alignmentOffset:R}},reset:k}}}),DEe=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:i,middlewareData:a,rects:o,initialPlacement:s,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:v=!0,...y}=wu(r,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const g=Su(i),w=Su(s)===s,b=await(l.isRTL==null?void 0:l.isRTL(u.floating)),m=d||(w||!v?[wS(s)]:MEe(s));!d&&p!=="none"&&m.push(...EEe(s,v,p,b));const x=[s,...m],S=await Q0(e,y),E=[];let A=((n=a.flip)==null?void 0:n.overflows)||[];if(c&&E.push(S[g]),h){const O=SEe(i,o,b);E.push(S[O[0]],S[O[1]])}if(A=[...A,{placement:i,overflows:E}],!E.every(O=>O<=0)){var T,C;const O=(((T=a.flip)==null?void 0:T.index)||0)+1,U=x[O];if(U)return{data:{index:O,overflows:A},reset:{placement:U}};let L=(C=A.filter(F=>F.overflows[0]<=0).sort((F,k)=>F.overflows[1]-k.overflows[1])[0])==null?void 0:C.placement;if(!L)switch(f){case"bestFit":{var D;const F=(D=A.map(k=>[k.placement,k.overflows.filter(R=>R>0).reduce((R,z)=>R+z,0)]).sort((k,R)=>k[1]-R[1])[0])==null?void 0:D[0];F&&(L=F);break}case"initialPlacement":L=s;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function xz(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function wz(r){return bEe.some(e=>r[e]>=0)}const kEe=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...i}=wu(r,e);switch(n){case"referenceHidden":{const a=await Q0(e,{...i,elementContext:"reference"}),o=xz(a,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:wz(o)}}}case"escaped":{const a=await Q0(e,{...i,altBoundary:!0}),o=xz(a,t.floating);return{data:{escapedOffsets:o,escaped:wz(o)}}}default:return{}}}}};async function NEe(r,e){const{placement:t,platform:n,elements:i}=r,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=Su(t),s=Cm(t),l=Am(t)==="y",u=["left","top"].includes(o)?-1:1,c=a&&l?-1:1,h=wu(e,r);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return s&&typeof p=="number"&&(f=s==="end"?p*-1:p),l?{x:f*c,y:d*u}:{x:d*u,y:f*c}}const OEe=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:i,y:a,placement:o,middlewareData:s}=e,l=await NEe(e,r);return o===((t=s.offset)==null?void 0:t.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:o}}}}},REe=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:y=>{let{x:g,y:w}=y;return{x:g,y:w}}},...l}=wu(r,e),u={x:t,y:n},c=await Q0(e,l),h=Am(Su(i)),d=TN(h);let f=u[d],p=u[h];if(a){const y=d==="y"?"top":"left",g=d==="y"?"bottom":"right",w=f+c[y],b=f-c[g];f=$T(w,f,b)}if(o){const y=h==="y"?"top":"left",g=h==="y"?"bottom":"right",w=p+c[y],b=p-c[g];p=$T(w,p,b)}const v=s.fn({...e,[d]:f,[h]:p});return{...v,data:{x:v.x-t,y:v.y-n}}}}},PEe=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:n,placement:i,rects:a,middlewareData:o}=e,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=wu(r,e),c={x:t,y:n},h=Am(i),d=TN(h);let f=c[d],p=c[h];const v=wu(s,e),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const b=d==="y"?"height":"width",m=a.reference[d]-a.floating[b]+y.mainAxis,x=a.reference[d]+a.reference[b]-y.mainAxis;f<m?f=m:f>x&&(f=x)}if(u){var g,w;const b=d==="y"?"width":"height",m=["top","left"].includes(Su(i)),x=a.reference[h]-a.floating[b]+(m&&((g=o.offset)==null?void 0:g[h])||0)+(m?0:y.crossAxis),S=a.reference[h]+a.reference[b]+(m?0:((w=o.offset)==null?void 0:w[h])||0)-(m?y.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[d]:f,[h]:p}}}},IEe=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){const{placement:t,rects:n,platform:i,elements:a}=e,{apply:o=()=>{},...s}=wu(r,e),l=await Q0(e,s),u=Su(t),c=Cm(t),h=Am(t)==="y",{width:d,height:f}=n.floating;let p,v;u==="top"||u==="bottom"?(p=u,v=c===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(v=u,p=c==="end"?"top":"bottom");const y=f-l.top-l.bottom,g=d-l.left-l.right,w=ol(f-l[p],y),b=ol(d-l[v],g),m=!e.middlewareData.shift;let x=w,S=b;if(h?S=c||m?ol(b,g):g:x=c||m?ol(w,y):y,m&&!c){const A=ho(l.left,0),T=ho(l.right,0),C=ho(l.top,0),D=ho(l.bottom,0);h?S=d-2*(A!==0||T!==0?A+T:ho(l.left,l.right)):x=f-2*(C!==0||D!==0?C+D:ho(l.top,l.bottom))}await o({...e,availableWidth:S,availableHeight:x});const E=await i.getDimensions(a.floating);return d!==E.width||f!==E.height?{reset:{rects:!0}}:{}}}};function Tm(r){return pG(r)?(r.nodeName||"").toLowerCase():"#document"}function xo(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Ou(r){var e;return(e=(pG(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function pG(r){return r instanceof Node||r instanceof xo(r).Node}function Sl(r){return r instanceof Element||r instanceof xo(r).Element}function Ml(r){return r instanceof HTMLElement||r instanceof xo(r).HTMLElement}function Sz(r){return typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof xo(r).ShadowRoot}function ay(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=As(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(i)}function LEe(r){return["table","td","th"].includes(Tm(r))}function NN(r){const e=ON(),t=As(r);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function FEe(r){let e=qc(r);for(;Ml(e)&&!Jp(e);){if(NN(e))return e;e=qc(e)}return null}function ON(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Jp(r){return["html","body","#document"].includes(Tm(r))}function As(r){return xo(r).getComputedStyle(r)}function $M(r){return Sl(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function qc(r){if(Tm(r)==="html")return r;const e=r.assignedSlot||r.parentNode||Sz(r)&&r.host||Ou(r);return Sz(e)?e.host:e}function mG(r){const e=qc(r);return Jp(e)?r.ownerDocument?r.ownerDocument.body:r.body:Ml(e)&&ay(e)?e:mG(e)}function ev(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=mG(r),a=i===((n=r.ownerDocument)==null?void 0:n.body),o=xo(i);return a?e.concat(o,o.visualViewport||[],ay(i)?i:[],o.frameElement&&t?ev(o.frameElement):[]):e.concat(i,ev(i,[],t))}function gG(r){const e=As(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Ml(r),a=i?r.offsetWidth:t,o=i?r.offsetHeight:n,s=xS(t)!==a||xS(n)!==o;return s&&(t=a,n=o),{width:t,height:n,$:s}}function RN(r){return Sl(r)?r:r.contextElement}function Cp(r){const e=RN(r);if(!Ml(e))return Vc(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:a}=gG(e);let o=(a?xS(t.width):t.width)/n,s=(a?xS(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const BEe=Vc(0);function vG(r){const e=xo(r);return!ON()||!e.visualViewport?BEe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function zEe(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==xo(r)?!1:e}function wd(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),a=RN(r);let o=Vc(1);e&&(n?Sl(n)&&(o=Cp(n)):o=Cp(r));const s=zEe(a,t,n)?vG(a):Vc(0);let l=(i.left+s.x)/o.x,u=(i.top+s.y)/o.y,c=i.width/o.x,h=i.height/o.y;if(a){const d=xo(a),f=n&&Sl(n)?xo(n):n;let p=d,v=p.frameElement;for(;v&&n&&f!==p;){const y=Cp(v),g=v.getBoundingClientRect(),w=As(v),b=g.left+(v.clientLeft+parseFloat(w.paddingLeft))*y.x,m=g.top+(v.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,u*=y.y,c*=y.x,h*=y.y,l+=b,u+=m,p=xo(v),v=p.frameElement}}return SS({width:c,height:h,x:l,y:u})}const UEe=[":popover-open",":modal"];function PN(r){return UEe.some(e=>{try{return r.matches(e)}catch{return!1}})}function jEe(r){let{elements:e,rect:t,offsetParent:n,strategy:i}=r;const a=i==="fixed",o=Ou(n),s=e?PN(e.floating):!1;if(n===o||s&&a)return t;let l={scrollLeft:0,scrollTop:0},u=Vc(1);const c=Vc(0),h=Ml(n);if((h||!h&&!a)&&((Tm(n)!=="body"||ay(o))&&(l=$M(n)),Ml(n))){const d=wd(n);u=Cp(n),c.x=d.x+n.clientLeft,c.y=d.y+n.clientTop}return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x,y:t.y*u.y-l.scrollTop*u.y+c.y}}function HEe(r){return Array.from(r.getClientRects())}function yG(r){return wd(Ou(r)).left+$M(r).scrollLeft}function VEe(r){const e=Ou(r),t=$M(r),n=r.ownerDocument.body,i=ho(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=ho(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+yG(r);const s=-t.scrollTop;return As(n).direction==="rtl"&&(o+=ho(e.clientWidth,n.clientWidth)-i),{width:i,height:a,x:o,y:s}}function qEe(r,e){const t=xo(r),n=Ou(r),i=t.visualViewport;let a=n.clientWidth,o=n.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;const u=ON();(!u||u&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s,y:l}}function WEe(r,e){const t=wd(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,a=Ml(r)?Cp(r):Vc(1),o=r.clientWidth*a.x,s=r.clientHeight*a.y,l=i*a.x,u=n*a.y;return{width:o,height:s,x:l,y:u}}function Mz(r,e,t){let n;if(e==="viewport")n=qEe(r,t);else if(e==="document")n=VEe(Ou(r));else if(Sl(e))n=WEe(e,t);else{const i=vG(r);n={...e,x:e.x-i.x,y:e.y-i.y}}return SS(n)}function bG(r,e){const t=qc(r);return t===e||!Sl(t)||Jp(t)?!1:As(t).position==="fixed"||bG(t,e)}function GEe(r,e){const t=e.get(r);if(t)return t;let n=ev(r,[],!1).filter(s=>Sl(s)&&Tm(s)!=="body"),i=null;const a=As(r).position==="fixed";let o=a?qc(r):r;for(;Sl(o)&&!Jp(o);){const s=As(o),l=NN(o);!l&&s.position==="fixed"&&(i=null),(a?!l&&!i:!l&&s.position==="static"&&i&&["absolute","fixed"].includes(i.position)||ay(o)&&!l&&bG(r,o))?n=n.filter(u=>u!==o):i=s,o=qc(o)}return e.set(r,n),n}function $Ee(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r;const a=[...t==="clippingAncestors"?PN(e)?[]:GEe(e,this._c):[].concat(t),n],o=a[0],s=a.reduce((l,u)=>{const c=Mz(e,u,i);return l.top=ho(c.top,l.top),l.right=ol(c.right,l.right),l.bottom=ol(c.bottom,l.bottom),l.left=ho(c.left,l.left),l},Mz(e,o,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function XEe(r){const{width:e,height:t}=gG(r);return{width:e,height:t}}function YEe(r,e,t){const n=Ml(e),i=Ou(e),a=t==="fixed",o=wd(r,!0,a,e);let s={scrollLeft:0,scrollTop:0};const l=Vc(0);if(n||!n&&!a)if((Tm(e)!=="body"||ay(i))&&(s=$M(e)),n){const h=wd(e,!0,a,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=yG(i));const u=o.left+s.scrollLeft-l.x,c=o.top+s.scrollTop-l.y;return{x:u,y:c,width:o.width,height:o.height}}function qE(r){return As(r).position==="static"}function _z(r,e){return!Ml(r)||As(r).position==="fixed"?null:e?e(r):r.offsetParent}function xG(r,e){const t=xo(r);if(PN(r))return t;if(!Ml(r)){let i=qc(r);for(;i&&!Jp(i);){if(Sl(i)&&!qE(i))return i;i=qc(i)}return t}let n=_z(r,e);for(;n&&LEe(n)&&qE(n);)n=_z(n,e);return n&&Jp(n)&&qE(n)&&!NN(n)?t:n||FEe(r)||t}const JEe=async function(r){const e=this.getOffsetParent||xG,t=this.getDimensions,n=await t(r.floating);return{reference:YEe(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function ZEe(r){return As(r).direction==="rtl"}const KEe={convertOffsetParentRelativeRectToViewportRelativeRect:jEe,getDocumentElement:Ou,getClippingRect:$Ee,getOffsetParent:xG,getElementRects:JEe,getClientRects:HEe,getDimensions:XEe,getScale:Cp,isElement:Sl,isRTL:ZEe};function QEe(r,e){let t=null,n;const i=Ou(r);function a(){var s;clearTimeout(n),(s=t)==null||s.disconnect(),t=null}function o(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),a();const{left:u,top:c,width:h,height:d}=r.getBoundingClientRect();if(s||e(),!h||!d)return;const f=sb(c),p=sb(i.clientWidth-(u+h)),v=sb(i.clientHeight-(c+d)),y=sb(u),g={rootMargin:-f+"px "+-p+"px "+-v+"px "+-y+"px",threshold:ho(0,ol(1,l))||1};let w=!0;function b(m){const x=m[0].intersectionRatio;if(x!==l){if(!w)return o();x?o(!1,x):n=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{t=new IntersectionObserver(b,{...g,root:i.ownerDocument})}catch{t=new IntersectionObserver(b,g)}t.observe(r)}return o(!0),a}function wG(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=RN(r),c=i||a?[...u?ev(u):[],...ev(e)]:[];c.forEach(g=>{i&&g.addEventListener("scroll",t,{passive:!0}),a&&g.addEventListener("resize",t)});const h=u&&s?QEe(u,t):null;let d=-1,f=null;o&&(f=new ResizeObserver(g=>{let[w]=g;w&&w.target===u&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=f)==null||b.observe(e)})),t()}),u&&!l&&f.observe(u),f.observe(e));let p,v=l?wd(r):null;l&&y();function y(){const g=wd(r);v&&(g.x!==v.x||g.y!==v.y||g.width!==v.width||g.height!==v.height)&&t(),v=g,p=requestAnimationFrame(y)}return t(),()=>{var g;c.forEach(w=>{i&&w.removeEventListener("scroll",t),a&&w.removeEventListener("resize",t)}),h==null||h(),(g=f)==null||g.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const eCe=OEe,tCe=REe,rCe=DEe,nCe=IEe,iCe=kEe,Ez=TEe,aCe=PEe,oCe=(r,e,t)=>{const n=new Map,i={platform:KEe,...t},a={...i.platform,_c:n};return AEe(r,e,{...i,platform:a})};var Jx=typeof document<"u"?j.useLayoutEffect:j.useEffect;function MS(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,n,i;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!MS(r[n],e[n]))return!1;return!0}if(i=Object.keys(r),t=i.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=t;n--!==0;){const a=i[n];if(!(a==="_owner"&&r.$$typeof)&&!MS(r[a],e[a]))return!1}return!0}return r!==r&&e!==e}function SG(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function Cz(r,e){const t=SG(r);return Math.round(e*t)/t}function Az(r){const e=j.useRef(r);return Jx(()=>{e.current=r}),e}function sCe(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:o}={},transform:s=!0,whileElementsMounted:l,open:u}=r,[c,h]=j.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,f]=j.useState(n);MS(d,n)||f(n);const[p,v]=j.useState(null),[y,g]=j.useState(null),w=j.useCallback(R=>{R!==S.current&&(S.current=R,v(R))},[]),b=j.useCallback(R=>{R!==E.current&&(E.current=R,g(R))},[]),m=a||p,x=o||y,S=j.useRef(null),E=j.useRef(null),A=j.useRef(c),T=l!=null,C=Az(l),D=Az(i),O=j.useCallback(()=>{if(!S.current||!E.current)return;const R={placement:e,strategy:t,middleware:d};D.current&&(R.platform=D.current),oCe(S.current,E.current,R).then(z=>{const B={...z,isPositioned:!0};U.current&&!MS(A.current,B)&&(A.current=B,fm.flushSync(()=>{h(B)}))})},[d,e,t,D]);Jx(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(R=>({...R,isPositioned:!1})))},[u]);const U=j.useRef(!1);Jx(()=>(U.current=!0,()=>{U.current=!1}),[]),Jx(()=>{if(m&&(S.current=m),x&&(E.current=x),m&&x){if(C.current)return C.current(m,x,O);O()}},[m,x,O,C,T]);const L=j.useMemo(()=>({reference:S,floating:E,setReference:w,setFloating:b}),[w,b]),F=j.useMemo(()=>({reference:m,floating:x}),[m,x]),k=j.useMemo(()=>{const R={position:t,left:0,top:0};if(!F.floating)return R;const z=Cz(F.floating,c.x),B=Cz(F.floating,c.y);return s?{...R,transform:"translate("+z+"px, "+B+"px)",...SG(F.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:z,top:B}},[t,s,F.floating,c.x,c.y]);return j.useMemo(()=>({...c,update:O,refs:L,elements:F,floatingStyles:k}),[c,O,L,F,k])}const lCe=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:n,padding:i}=typeof r=="function"?r(t):r;return n&&e(n)?n.current!=null?Ez({element:n.current,padding:i}).fn(t):{}:n?Ez({element:n,padding:i}).fn(t):{}}}},uCe=(r,e)=>({...eCe(r),options:[r,e]}),cCe=(r,e)=>({...tCe(r),options:[r,e]}),hCe=(r,e)=>({...aCe(r),options:[r,e]}),dCe=(r,e)=>({...rCe(r),options:[r,e]}),fCe=(r,e)=>({...nCe(r),options:[r,e]}),pCe=(r,e)=>({...iCe(r),options:[r,e]}),mCe=(r,e)=>({...lCe(r),options:[r,e]}),gCe=j.forwardRef((r,e)=>{const{children:t,width:n=10,height:i=5,...a}=r;return j.createElement(zd.svg,lt({},a,{ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),r.asChild?t:j.createElement("polygon",{points:"0,0 30,0 15,10"}))}),vCe=gCe;function yCe(r){const[e,t]=j.useState(void 0);return Yp(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,s;if("borderBoxSize"in a){const l=a.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,s=u.blockSize}else o=r.offsetWidth,s=r.offsetHeight;t({width:o,height:s})});return n.observe(r,{box:"border-box"}),()=>n.unobserve(r)}else t(void 0)},[r]),e}const MG="Popper",[_G,EG]=hG(MG),[bCe,CG]=_G(MG),xCe=r=>{const{__scopePopper:e,children:t}=r,[n,i]=j.useState(null);return j.createElement(bCe,{scope:e,anchor:n,onAnchorChange:i},t)},wCe="PopperAnchor",SCe=j.forwardRef((r,e)=>{const{__scopePopper:t,virtualRef:n,...i}=r,a=CG(wCe,t),o=j.useRef(null),s=Mm(e,o);return j.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:j.createElement(zd.div,lt({},i,{ref:s}))}),AG="PopperContent",[MCe,_Ce]=_G(AG),ECe=j.forwardRef((r,e)=>{var t,n,i,a,o,s,l,u;const{__scopePopper:c,side:h="bottom",sideOffset:d=0,align:f="center",alignOffset:p=0,arrowPadding:v=0,avoidCollisions:y=!0,collisionBoundary:g=[],collisionPadding:w=0,sticky:b="partial",hideWhenDetached:m=!1,updatePositionStrategy:x="optimized",onPlaced:S,...E}=r,A=CG(AG,c),[T,C]=j.useState(null),D=Mm(e,K=>C(K)),[O,U]=j.useState(null),L=yCe(O),F=(t=L==null?void 0:L.width)!==null&&t!==void 0?t:0,k=(n=L==null?void 0:L.height)!==null&&n!==void 0?n:0,R=h+(f!=="center"?"-"+f:""),z=typeof w=="number"?w:{top:0,right:0,bottom:0,left:0,...w},B=Array.isArray(g)?g:[g],X=B.length>0,Z={padding:z,boundary:B.filter(DCe),altBoundary:X},{refs:Q,floatingStyles:J,placement:ne,isPositioned:fe,middlewareData:se}=sCe({strategy:"fixed",placement:R,whileElementsMounted:(...K)=>wG(...K,{animationFrame:x==="always"}),elements:{reference:A.anchor},middleware:[uCe({mainAxis:d+k,alignmentAxis:p}),y&&cCe({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?hCe():void 0,...Z}),y&&dCe({...Z}),fCe({...Z,apply:({elements:K,rects:ie,availableWidth:_e,availableHeight:oe})=>{const{width:G,height:W}=ie.reference,ce=K.floating.style;ce.setProperty("--radix-popper-available-width",`${_e}px`),ce.setProperty("--radix-popper-available-height",`${oe}px`),ce.setProperty("--radix-popper-anchor-width",`${G}px`),ce.setProperty("--radix-popper-anchor-height",`${W}px`)}}),O&&mCe({element:O,padding:v}),kCe({arrowWidth:F,arrowHeight:k}),m&&pCe({strategy:"referenceHidden",...Z})]}),[ye,De]=TG(ne),pe=Em(S);Yp(()=>{fe&&(pe==null||pe())},[fe,pe]);const Te=(i=se.arrow)===null||i===void 0?void 0:i.x,be=(a=se.arrow)===null||a===void 0?void 0:a.y,re=((o=se.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Re,ze]=j.useState();return Yp(()=>{T&&ze(window.getComputedStyle(T).zIndex)},[T]),j.createElement("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:fe?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[(s=se.transformOrigin)===null||s===void 0?void 0:s.x,(l=se.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:r.dir},j.createElement(MCe,{scope:c,placedSide:ye,onArrowChange:U,arrowX:Te,arrowY:be,shouldHideArrow:re},j.createElement(zd.div,lt({"data-side":ye,"data-align":De},E,{ref:D,style:{...E.style,animation:fe?void 0:"none",opacity:(u=se.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))}),CCe="PopperArrow",ACe={top:"bottom",right:"left",bottom:"top",left:"right"},TCe=j.forwardRef(function(r,e){const{__scopePopper:t,...n}=r,i=_Ce(CCe,t),a=ACe[i.placedSide];return j.createElement("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0}},j.createElement(vCe,lt({},n,{ref:e,style:{...n.style,display:"block"}})))});function DCe(r){return r!==null}const kCe=r=>({name:"transformOrigin",options:r,fn(e){var t,n,i,a,o;const{placement:s,rects:l,middlewareData:u}=e,c=((t=u.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,h=c?0:r.arrowWidth,d=c?0:r.arrowHeight,[f,p]=TG(s),v={start:"0%",center:"50%",end:"100%"}[p],y=((n=(i=u.arrow)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0)+h/2,g=((a=(o=u.arrow)===null||o===void 0?void 0:o.y)!==null&&a!==void 0?a:0)+d/2;let w="",b="";return f==="bottom"?(w=c?v:`${y}px`,b=`${-d}px`):f==="top"?(w=c?v:`${y}px`,b=`${l.floating.height+d}px`):f==="right"?(w=`${-d}px`,b=c?v:`${g}px`):f==="left"&&(w=`${l.floating.width+d}px`,b=c?v:`${g}px`),{data:{x:w,y:b}}}});function TG(r){const[e,t="center"]=r.split("-");return[e,t]}const NCe=xCe,OCe=SCe,RCe=ECe,PCe=TCe;function ICe(r,e){return j.useReducer((t,n)=>e[t][n]??t,r)}const DG=r=>{const{present:e,children:t}=r,n=LCe(e),i=typeof t=="function"?t({present:n.isPresent}):j.Children.only(t),a=Mm(n.ref,i.ref);return typeof t=="function"||n.isPresent?j.cloneElement(i,{ref:a}):null};DG.displayName="Presence";function LCe(r){const[e,t]=j.useState(),n=j.useRef({}),i=j.useRef(r),a=j.useRef("none"),o=r?"mounted":"unmounted",[s,l]=ICe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const u=lb(n.current);a.current=s==="mounted"?u:"none"},[s]),Yp(()=>{const u=n.current,c=i.current;if(c!==r){const h=a.current,d=lb(u);r?l("MOUNT"):d==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&h!==d?"ANIMATION_OUT":"UNMOUNT"),i.current=r}},[r,l]),Yp(()=>{if(e){const u=h=>{const d=lb(n.current).includes(h.animationName);h.target===e&&d&&fm.flushSync(()=>l("ANIMATION_END"))},c=h=>{h.target===e&&(a.current=lb(n.current))};return e.addEventListener("animationstart",c),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{e.removeEventListener("animationstart",c),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:j.useCallback(u=>{u&&(n.current=getComputedStyle(u)),t(u)},[])}}function lb(r){return(r==null?void 0:r.animationName)||"none"}function FCe({prop:r,defaultProp:e,onChange:t=()=>{}}){const[n,i]=BCe({defaultProp:e,onChange:t}),a=r!==void 0,o=a?r:n,s=Em(t),l=j.useCallback(u=>{if(a){const c=typeof u=="function"?u(r):u;c!==r&&s(c)}else i(u)},[a,r,i,s]);return[o,l]}function BCe({defaultProp:r,onChange:e}){const t=j.useState(r),[n]=t,i=j.useRef(n),a=Em(e);return j.useEffect(()=>{i.current!==n&&(a(n),i.current=n)},[n,i,a]),t}const zCe=j.forwardRef((r,e)=>j.createElement(zd.span,lt({},r,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...r.style}}))),UCe=zCe,[XM,r$e]=hG("Tooltip",[EG]),YM=EG(),jCe="TooltipProvider",YT="tooltip.open",[n$e,IN]=XM(jCe),LN="Tooltip",[HCe,JM]=XM(LN),VCe=r=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:i=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:s}=r,l=IN(LN,r.__scopeTooltip),u=YM(e),[c,h]=j.useState(null),d=yEe(),f=j.useRef(0),p=o??l.disableHoverableContent,v=s??l.delayDuration,y=j.useRef(!1),[g=!1,w]=FCe({prop:n,defaultProp:i,onChange:E=>{E?(l.onOpen(),document.dispatchEvent(new CustomEvent(YT))):l.onClose(),a==null||a(E)}}),b=j.useMemo(()=>g?y.current?"delayed-open":"instant-open":"closed",[g]),m=j.useCallback(()=>{window.clearTimeout(f.current),y.current=!1,w(!0)},[w]),x=j.useCallback(()=>{window.clearTimeout(f.current),w(!1)},[w]),S=j.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{y.current=!0,w(!0)},v)},[v,w]);return j.useEffect(()=>()=>window.clearTimeout(f.current),[]),j.createElement(NCe,u,j.createElement(HCe,{scope:e,contentId:d,open:g,stateAttribute:b,trigger:c,onTriggerChange:h,onTriggerEnter:j.useCallback(()=>{l.isOpenDelayed?S():m()},[l.isOpenDelayed,S,m]),onTriggerLeave:j.useCallback(()=>{p?x():window.clearTimeout(f.current)},[x,p]),onOpen:m,onClose:x,disableHoverableContent:p},t))},Tz="TooltipTrigger",qCe=j.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,i=JM(Tz,t),a=IN(Tz,t),o=YM(t),s=j.useRef(null),l=Mm(e,s,i.onTriggerChange),u=j.useRef(!1),c=j.useRef(!1),h=j.useCallback(()=>u.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),j.createElement(OCe,lt({asChild:!0},o),j.createElement(zd.button,lt({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},n,{ref:l,onPointerMove:Jl(r.onPointerMove,d=>{d.pointerType!=="touch"&&!c.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:Jl(r.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:Jl(r.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Jl(r.onFocus,()=>{u.current||i.onOpen()}),onBlur:Jl(r.onBlur,i.onClose),onClick:Jl(r.onClick,i.onClose)})))}),WCe="TooltipPortal",[i$e,GCe]=XM(WCe,{forceMount:void 0}),tv="TooltipContent",$Ce=j.forwardRef((r,e)=>{const t=GCe(tv,r.__scopeTooltip),{forceMount:n=t.forceMount,side:i="top",...a}=r,o=JM(tv,r.__scopeTooltip);return j.createElement(DG,{present:n||o.open},o.disableHoverableContent?j.createElement(kG,lt({side:i},a,{ref:e})):j.createElement(XCe,lt({side:i},a,{ref:e})))}),XCe=j.forwardRef((r,e)=>{const t=JM(tv,r.__scopeTooltip),n=IN(tv,r.__scopeTooltip),i=j.useRef(null),a=Mm(e,i),[o,s]=j.useState(null),{trigger:l,onClose:u}=t,c=i.current,{onPointerInTransitChange:h}=n,d=j.useCallback(()=>{s(null),h(!1)},[h]),f=j.useCallback((p,v)=>{const y=p.currentTarget,g={x:p.clientX,y:p.clientY},w=QCe(g,y.getBoundingClientRect()),b=eAe(g,w),m=tAe(v.getBoundingClientRect()),x=nAe([...b,...m]);s(x),h(!0)},[h]);return j.useEffect(()=>()=>d(),[d]),j.useEffect(()=>{if(l&&c){const p=y=>f(y,c),v=y=>f(y,l);return l.addEventListener("pointerleave",p),c.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",p),c.removeEventListener("pointerleave",v)}}},[l,c,f,d]),j.useEffect(()=>{if(o){const p=v=>{const y=v.target,g={x:v.clientX,y:v.clientY},w=(l==null?void 0:l.contains(y))||(c==null?void 0:c.contains(y)),b=!rAe(g,o);w?d():b&&(d(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,c,o,u,d]),j.createElement(kG,lt({},r,{ref:a}))}),[YCe,JCe]=XM(LN,{isInside:!1}),kG=j.forwardRef((r,e)=>{const{__scopeTooltip:t,children:n,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...s}=r,l=JM(tv,t),u=YM(t),{onClose:c}=l;return j.useEffect(()=>(document.addEventListener(YT,c),()=>document.removeEventListener(YT,c)),[c]),j.useEffect(()=>{if(l.trigger){const h=d=>{const f=d.target;f!=null&&f.contains(l.trigger)&&c()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,c]),j.createElement(fEe,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:c},j.createElement(RCe,lt({"data-state":l.stateAttribute},u,s,{ref:e,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),j.createElement(KW,null,n),j.createElement(YCe,{scope:t,isInside:!0},j.createElement(UCe,{id:l.contentId,role:"tooltip"},i||n))))}),ZCe="TooltipArrow",KCe=j.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,i=YM(t);return JCe(ZCe,t).isInside?null:j.createElement(PCe,lt({},i,n,{ref:e}))});function QCe(r,e){const t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),i=Math.abs(e.right-r.x),a=Math.abs(e.left-r.x);switch(Math.min(t,n,i,a)){case a:return"left";case i:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function eAe(r,e,t=5){const n=[];switch(e){case"top":n.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":n.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":n.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":n.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return n}function tAe(r){const{top:e,right:t,bottom:n,left:i}=r;return[{x:i,y:e},{x:t,y:e},{x:t,y:n},{x:i,y:n}]}function rAe(r,e){const{x:t,y:n}=r;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const s=e[a].x,l=e[a].y,u=e[o].x,c=e[o].y;l>n!=c>n&&t<(u-s)*(n-l)/(c-l)+s&&(i=!i)}return i}function nAe(r){const e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),iAe(e)}function iAe(r){if(r.length<=1)return r.slice();const e=[];for(let n=0;n<r.length;n++){const i=r[n];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let n=r.length-1;n>=0;n--){const i=r[n];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const aAe=VCe,oAe=qCe,sAe=$Ce,lAe=KCe;function uAe(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function Ur(r,e){if(r==null)return{};var t=uAe(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}let vn;(function(r){r[r.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",r[r.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",r[r.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",r[r.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",r[r.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",r[r.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",r[r.THEME_ERROR=6]="THEME_ERROR",r[r.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",r[r.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",r[r.EMPTY_KEY=9]="EMPTY_KEY"})(vn||(vn={}));const cAe={[vn.UNSUPPORTED_INPUT]:(r,e)=>[`An input with type \`${r}\` input was found at path \`${e}\` but it's not supported yet.`],[vn.NO_COMPONENT_FOR_TYPE]:(r,e)=>[`Type \`${r}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[vn.UNKNOWN_INPUT]:(r,e)=>[`input at path \`${r}\` is not recognized.`,e],[vn.DUPLICATE_KEYS]:(r,e,t)=>[`Key \`${r}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[vn.ALREADY_REGISTERED_TYPE]:r=>[`Type ${r} has already been registered. You can't register a component with the same type.`],[vn.CLIPBOARD_ERROR]:r=>["Error copying the value",r],[vn.THEME_ERROR]:(r,e)=>[`Error accessing the theme \`${r}.${e}\` value.`],[vn.PATH_DOESNT_EXIST]:r=>[`Error getting the value at path \`${r}\`. There is probably an error in your \`render\` function.`],[vn.PATH_DOESNT_EXIST]:r=>[`Error accessing the value at path \`${r}\``],[vn.INPUT_TYPE_OVERRIDE]:(r,e,t)=>[`Input at path \`${r}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[vn.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function NG(r,e,...t){const[n,...i]=cAe[e](...t);console[r]("LEVA: "+n,...i)}const Kl=NG.bind(null,"warn"),hAe=NG.bind(null,"log"),dAe=["value"],fAe=["schema"],pAe=["value"],OG=[],Sd={};function Dz(r){let{value:e}=r,t=Ur(r,dAe);for(let n of OG){const i=n(e,t);if(i)return i}}function Ru(r,e){let{schema:t}=e,n=Ur(e,fAe);if(r in Sd){Kl(vn.ALREADY_REGISTERED_TYPE,r);return}OG.push((i,a)=>t(i,a)&&r),Sd[r]=n}function WE(r,e,t,n){const{normalize:i}=Sd[r];if(i)return i(e,t,n);if(typeof e!="object"||!("value"in e))return{value:e};const{value:a}=e,o=Ur(e,pAe);return{value:a,settings:o}}function mAe(r,e,t,n,i,a){const{sanitize:o}=Sd[r];return o?o(e,t,n,i,a):e}function kz(r,e,t){const{format:n}=Sd[r];return n?n(e,t):e}function gAe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Nz(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function qt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nz(Object(t),!0).forEach(function(n){gAe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Nz(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}const Wc=(r,e,t)=>r>t?t:r<e?e:r,vAe=r=>{if(r===""||typeof r=="number")return r;try{const e=tc(r);if(!isNaN(e))return e}catch{}return parseFloat(r)},yAe=Math.log(10);function Oz(r){let e=Math.abs(+String(r).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/yAe)+1,n=Math.floor(Math.log10(Math.abs(r))),i=Math.pow(10,n-t);return Math.max(i,.001)}const _S=(r,e,t)=>t===e?0:(Wc(r,e,t)-e)/(t-e),ES=(r,e,t)=>r*(t-e)+e,bAe=()=>"_"+Math.random().toString(36).substr(2,9),Rz=/\(([0-9+\-*/^ .]+)\)/,Pz=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,Iz=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,Lz=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,Fz=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,Bz=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function tc(r){if(isNaN(Number(r)))if(Rz.test(r)){const e=r.replace(Rz,(t,n)=>String(tc(n)));return tc(e)}else if(Pz.test(r)){const e=r.replace(Pz,(t,n,i)=>String(Math.pow(Number(n),Number(i))));return tc(e)}else if(Iz.test(r)){const e=r.replace(Iz,(t,n,i)=>String(Number(n)*Number(i)));return tc(e)}else if(Lz.test(r)){const e=r.replace(Lz,(t,n,i)=>{if(i!=0)return String(Number(n)/Number(i));throw new Error("Division by zero")});return tc(e)}else if(Fz.test(r)){const e=r.replace(Fz,(t,n,i)=>String(Number(n)+Number(i)));return tc(e)}else if(Bz.test(r)){const e=r.replace(Bz,(t,n,i)=>String(Number(n)-Number(i)));return tc(e)}else return Number(r);return Number(r)}function xAe(r,e){return e.reduce((t,n)=>(r&&r.hasOwnProperty(n)&&(t[n]=r[n]),t),{})}function wAe(r,e){const t=qt({},r);return e.forEach(n=>n in r&&delete t[n]),t}function SAe(r,e){return r.reduce((t,n,i)=>Object.assign(t,{[e[i]]:n}),{})}function RG(r){return Object.prototype.toString.call(r)==="[object Object]"}const MAe=r=>RG(r)&&Object.keys(r).length===0;let Xo;(function(r){r.BUTTON="BUTTON",r.BUTTON_GROUP="BUTTON_GROUP",r.MONITOR="MONITOR",r.FOLDER="FOLDER"})(Xo||(Xo={}));let Ts;(function(r){r.SELECT="SELECT",r.IMAGE="IMAGE",r.NUMBER="NUMBER",r.COLOR="COLOR",r.STRING="STRING",r.BOOLEAN="BOOLEAN",r.INTERVAL="INTERVAL",r.VECTOR3D="VECTOR3D",r.VECTOR2D="VECTOR2D"})(Ts||(Ts={}));const _Ae=["type","__customInput"],EAe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],CAe=["type"];function PG(r,e,t={},n){var i,a;if(typeof r!="object"||Array.isArray(r))return{type:n,input:r,options:qt({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in r){const{type:x,__customInput:S}=r,E=Ur(r,_Ae);return PG(S,e,E,x)}const{render:o,label:s,optional:l,order:u=0,disabled:c,hint:h,onChange:d,onEditStart:f,onEditEnd:p,transient:v}=r,y=Ur(r,EAe),g=qt({render:o,key:e,label:s??e,hint:h,transient:v??!!d,onEditStart:f,onEditEnd:p,disabled:c,optional:l,order:u},t);let{type:w}=y,b=Ur(y,CAe);if(w=n??w,w in Xo)return{type:w,input:b,options:g};let m;return n&&RG(b)&&"value"in b?m=b.value:m=MAe(b)?void 0:b,{type:w,input:m,options:qt(qt({},g),{},{onChange:d,optional:(i=g.optional)!==null&&i!==void 0?i:!1,disabled:(a=g.disabled)!==null&&a!==void 0?a:!1})}}function AAe(r,e,t,n){const i=PG(r,e),{type:a,input:o,options:s}=i;if(a)return a in Xo?i:{type:a,input:WE(a,o,t,n),options:s};let l=Dz(o);return l?{type:l,input:WE(l,o,t,n),options:s}:(l=Dz({value:o}),l?{type:l,input:WE(l,{value:o},t,n),options:s}:!1)}function zz(r,e,t,n,i){const{value:a,type:o,settings:s}=r;r.value=IG({type:o,value:a,settings:s},e,t,n),r.fromPanel=i}const TAe=function(r,e,t){this.type="LEVA_ERROR",this.message="LEVA: "+r,this.previousValue=e,this.error=t};function IG({type:r,value:e,settings:t},n,i,a){const o=r!=="SELECT"&&typeof n=="function"?n(e):n;let s;try{s=mAe(r,o,t,e,i,a)}catch(l){throw new TAe(`The value \`${n}\` did not result in a correct value.`,e,l)}return Z0(s,e)?e:s}const LG=(r,e,t=!1)=>{let n=0;return function(){const i=arguments,a=t&&!n,o=()=>r.apply(this,i);window.clearTimeout(n),n=window.setTimeout(o,e),a&&o()}},FG=r=>r.shiftKey?5:r.altKey?1/5:1;function DAe(r,e){const t=console.error;console.error=()=>{},YH.render(r,e),console.error=t}const kAe=["value"],NAe=["min","max"],OAe=r=>{if(typeof r=="number")return!0;if(typeof r=="string"){const e=parseFloat(r);return isNaN(e)?!1:r.substring((""+e).length).trim().length<4}return!1},BG=(r,{min:e=-1/0,max:t=1/0,suffix:n})=>{const i=parseFloat(r);if(r===""||isNaN(i))throw Error("Invalid number");const a=Wc(i,e,t);return n?a+n:a},RAe=(r,{pad:e=0,suffix:t})=>{const n=parseFloat(r).toFixed(e);return t?n+t:n},zG=r=>{let{value:e}=r,t=Ur(r,kAe);const{min:n=-1/0,max:i=1/0}=t,a=Ur(t,NAe);let o=parseFloat(e);const s=typeof e=="string"?e.substring((""+o).length):void 0;o=Wc(o,n,i);let l=t.step;l||(Number.isFinite(n)?Number.isFinite(i)?l=+(Math.abs(i-n)/100).toPrecision(1):l=+(Math.abs(o-n)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const u=l?Oz(l)*10:Oz(o);l=l||u/10;const c=Math.round(Wc(Math.log10(1/u),0,2));return{value:s?o+s:o,settings:qt({initialValue:o,step:l,pad:c,min:n,max:i,suffix:s},a)}},UG=(r,{step:e,initialValue:t})=>{const n=Math.round((r-t)/e);return t+n*e};var jG=Object.freeze({__proto__:null,schema:OAe,sanitize:BG,format:RAe,normalize:zG,sanitizeStep:UG});function _n(){return _n=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},_n.apply(this,arguments)}const HG=j.createContext({});function aa(){return j.useContext(HG)}const FN=j.createContext(null),VG=j.createContext(null),qG=j.createContext(null);function Dm(){return j.useContext(VG)}function PAe(){return j.useContext(qG)}const WG=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function ub(r,e){const[t,n]=r.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),n&&(i.backgroundColor=n),i}const yg={$inputStyle:()=>r=>ub(r,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>r=>ub(r,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>r=>ub(r,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>r=>ub(r,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Ht,css:a$e,createTheme:IAe,globalCss:LAe,keyframes:o$e}=p_e({prefix:"leva",theme:WG(),utils:qt(qt({},yg),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:r=>({"&:focus":yg.$focusStyle()(r)}),$focusWithin:r=>({"&:focus-within":yg.$focusStyle()(r)}),$hover:r=>({"&:hover":yg.$hoverStyle()(r)}),$active:r=>({"&:active":yg.$activeStyle()(r)})})}),FAe=LAe({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function BAe(r){const e=WG();if(!r)return{theme:e,className:""};Object.keys(r).forEach(n=>{Object.assign(e[n],r[n])});const t=IAe(e);return{theme:e,className:t.className}}function uu(r,e){const{theme:t}=j.useContext(FN);if(!(r in t)||!(e in t[r]))return Kl(vn.THEME_ERROR,r,e),"";let n=e;for(;;){let i=t[r][n];if(typeof i=="string"&&i.charAt(0)==="$")n=i.substr(1);else return i}}const GG=Ht("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),$G=Ht("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${GG}`]:{paddingLeft:0}}),zAe=Ht($G,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),UAe=Ht("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),jAe=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],HAe=["onUpdate"];function BN(r){let{innerLabel:e,value:t,onUpdate:n,onChange:i,onKeyDown:a,type:o,id:s,inputType:l="text",rows:u=0}=r,c=Ur(r,jAe);const{id:h,emitOnEditStart:d,emitOnEditEnd:f,disabled:p}=aa(),v=s||h,y=j.useRef(null),g=u>0,w=g?"textarea":"input",b=j.useCallback(S=>E=>{const A=E.currentTarget.value;S(A)},[]);Ae.useEffect(()=>{const S=y.current,E=b(A=>{n(A),f()});return S==null||S.addEventListener("blur",E),()=>S==null?void 0:S.removeEventListener("blur",E)},[b,n,f]);const m=j.useCallback(S=>{S.key==="Enter"&&b(n)(S)},[b,n]),x=Object.assign({as:w},g?{rows:u}:{},c);return Ae.createElement(UAe,{textArea:g},e&&typeof e=="string"?Ae.createElement($G,null,e):e,Ae.createElement(GG,_n({levaType:o,ref:y,id:v,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:b(i),onFocus:()=>d(),onKeyPress:m,onKeyDown:a,disabled:p},x)))}function VAe(r){let{onUpdate:e}=r,t=Ur(r,HAe);const n=j.useCallback(a=>e(vAe(a)),[e]),i=j.useCallback(a=>{const o=a.key==="ArrowUp"?1:a.key==="ArrowDown"?-1:0;if(o){a.preventDefault();const s=a.altKey?.1:a.shiftKey?10:1;e(l=>parseFloat(l)+o*s)}},[e]);return Ae.createElement(BN,_n({},t,{onUpdate:n,onKeyDown:i,type:"number"}))}const CS=Ht("div",{}),JT=Ht("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),qAe=Ht("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${JT}::after`]:{opacity:.6},[`${CS}:hover > & + ${JT}::after`]:{opacity:.6},[`${CS}:hover > & > svg`]:{opacity:1}}),XG=Ht("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${CS}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),YG=Ht("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${XG} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),JG=Ht(YG,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),WAe=Ht("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),GAe=Ht("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),ZT=Ht("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),$Ae=Ht("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${ZT}`]:{pointerEvents:"auto"}}}}}),ZG=Ht("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),XAe=Ht("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),YAe=Ht(lAe,{fill:"$toolTipBackground"});function zN({children:r}){const{className:e}=j.useContext(FN);return Ae.createElement(L2e,{className:e},r)}const JAe=["align"];function ZAe(){const{id:r,disable:e,disabled:t}=aa();return Ae.createElement(Ae.Fragment,null,Ae.createElement(GAe,{id:r+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),Ae.createElement("label",{htmlFor:r+"__disable"}))}function KAe(r){const{id:e,optional:t,hint:n}=aa(),i=r.htmlFor||(e?{htmlFor:e}:null),a=!n&&typeof r.children=="string"?{title:r.children}:null;return Ae.createElement(Ae.Fragment,null,t&&Ae.createElement(ZAe,null),n!==void 0?Ae.createElement(aAe,null,Ae.createElement(oAe,{asChild:!0},Ae.createElement(ZT,_n({},i,r))),Ae.createElement(sAe,{side:"top",sideOffset:2},Ae.createElement(XAe,null,n,Ae.createElement(YAe,null)))):Ae.createElement(ZT,_n({},i,a,r)))}function Ps(r){let{align:e}=r,t=Ur(r,JAe);const{value:n,label:i,key:a,disabled:o}=aa(),{hideCopyButton:s}=PAe(),l=!s&&a!==void 0,[u,c]=j.useState(!1),h=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[a]:n??""})),c(!0)}catch{Kl(vn.CLIPBOARD_ERROR,{[a]:n})}};return Ae.createElement(WAe,{align:e,onPointerLeave:()=>c(!1)},Ae.createElement(KAe,t),l&&!o&&Ae.createElement("div",{title:`Click to copy ${typeof i=="string"?i:a} value`},u?Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ae.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),Ae.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):Ae.createElement("svg",{onClick:h,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ae.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),Ae.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const QAe=["toggled"],eTe=Ht("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function UN(r){let{toggled:e}=r,t=Ur(r,QAe);return Ae.createElement(eTe,_n({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),Ae.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const tTe=["input"];function os(r){let{input:e}=r,t=Ur(r,tTe);return e?Ae.createElement(JG,t):Ae.createElement(YG,t)}function KG({value:r,type:e,settings:t,setValue:n}){const[i,a]=j.useState(kz(e,r,t)),o=j.useRef(r),s=j.useRef(t);s.current=t;const l=j.useCallback(c=>a(kz(e,c,s.current)),[e]),u=j.useCallback(c=>{try{n(c)}catch(h){const{type:d,previousValue:f}=h;if(d!=="LEVA_ERROR")throw h;l(f)}},[l,n]);return j.useEffect(()=>{Z0(r,o.current)||l(r),o.current=r},[r,l]),{displayValue:i,onChange:a,onUpdate:u}}function oy(r,e){const{emitOnEditStart:t,emitOnEditEnd:n}=aa();return sEe(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const a=r(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),n==null||n()),a},e)}function rTe(r){const e=j.useRef(null),t=j.useRef(null),n=j.useRef(!1);return j.useEffect(()=>{const i=LG(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,r(e.current,t.current)},250);return window.addEventListener("resize",i),n.current||(i(),n.current=!0),()=>window.removeEventListener("resize",i)},[r]),j.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function QG(){const r=j.useRef(null),e=j.useRef({x:0,y:0}),t=j.useCallback(n=>{Object.assign(e.current,n),r.current&&(r.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[r,t]}const nTe=["__refCount"],GE=(r,e)=>{if(!r[e])return null;const t=r[e];return Ur(t,nTe)};function iTe(r){const e=Dm(),[t,n]=j.useState(GE(e.getData(),r)),i=j.useCallback(u=>e.setValueAtPath(r,u,!0),[r,e]),a=j.useCallback(u=>e.setSettingsAtPath(r,u),[r,e]),o=j.useCallback(u=>e.disableInputAtPath(r,u),[r,e]),s=j.useCallback(()=>e.emitOnEditStart(r),[r,e]),l=j.useCallback(()=>e.emitOnEditEnd(r),[r,e]);return j.useEffect(()=>{n(GE(e.getData(),r));const u=e.useStore.subscribe(c=>GE(c.data,r),n,{equalityFn:qM});return()=>u()},[e,r]),[t,{set:i,setSettings:a,disable:o,storeId:e.storeId,emitOnEditStart:s,emitOnEditEnd:l}]}const aTe=Ht("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),e$=Ht("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),KT=Ht("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),t$=Ht("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),r$=Ht("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function oTe({value:r,min:e,max:t,onDrag:n,step:i,initialValue:a}){const o=j.useRef(null),s=j.useRef(null),l=j.useRef(0),u=uu("sizes","scrubberWidth"),c=oy(({event:d,first:f,xy:[p],movement:[v],memo:y})=>{if(f){const{width:w,left:b}=o.current.getBoundingClientRect();l.current=w-parseFloat(u),y=(d==null?void 0:d.target)===s.current?r:ES((p-b)/w,e,t)}const g=y+ES(v/l.current,0,t-e);return n(UG(g,{step:i,initialValue:a})),y}),h=_S(r,e,t);return Ae.createElement(t$,_n({ref:o},c()),Ae.createElement(e$,null,Ae.createElement(r$,{style:{left:0,right:`${(1-h)*100}%`}})),Ae.createElement(KT,{ref:s,style:{left:`calc(${h} * (100% - ${u}))`}}))}const sTe=Ae.memo(({label:r,onUpdate:e,step:t,innerLabelTrim:n})=>{const[i,a]=j.useState(!1),o=oy(({active:s,delta:[l],event:u,memo:c=0})=>(a(s),c+=l/2,Math.abs(c)>=1&&(e(h=>parseFloat(h)+Math.floor(c)*t*FG(u)),c=0),c));return Ae.createElement(zAe,_n({dragging:i,title:r.length>1?r:""},o()),r.slice(0,n))});function n$({label:r,id:e,displayValue:t,onUpdate:n,onChange:i,settings:a,innerLabelTrim:o=1}){const s=o>0&&Ae.createElement(sTe,{label:r,step:a.step,onUpdate:n,innerLabelTrim:o});return Ae.createElement(VAe,{id:e,value:String(t),onUpdate:n,onChange:i,innerLabel:s})}function lTe(){const r=aa(),{label:e,value:t,onUpdate:n,settings:i,id:a}=r,{min:o,max:s}=i,l=s!==1/0&&o!==-1/0;return Ae.createElement(os,{input:!0},Ae.createElement(Ps,null,e),Ae.createElement(aTe,{hasRange:l},l&&Ae.createElement(oTe,_n({value:parseFloat(t),onDrag:n},i)),Ae.createElement(n$,_n({},r,{id:a,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:uTe}=jG,cTe=Ur(jG,["sanitizeStep"]);var hTe=qt({component:lTe},cTe);const dTe=(r,e)=>Wa().schema({options:Wa().passesAnyOf(Wa().object(),Wa().array())}).test(e),fTe=(r,{values:e})=>{if(e.indexOf(r)<0)throw Error("Selected value doesn't match Select options");return r},pTe=(r,{values:e})=>e.indexOf(r),mTe=r=>{let{value:e,options:t}=r,n,i;return Array.isArray(t)?(i=t,n=t.map(a=>String(a))):(i=Object.values(t),n=Object.keys(t)),"value"in r?i.includes(e)||(n.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:n,values:i}}};var gTe=Object.freeze({__proto__:null,schema:dTe,sanitize:fTe,format:pTe,normalize:mTe});const vTe=Ht("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),QT=Ht("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),yTe=Ht("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${QT}:focus + &`]:{$focusStyle:""},[`${QT}:hover + &`]:{$hoverStyle:""}});function bTe({displayValue:r,value:e,onUpdate:t,id:n,settings:i,disabled:a}){const{keys:o,values:s}=i,l=j.useRef();return e===s[r]&&(l.current=o[r]),Ae.createElement(vTe,null,Ae.createElement(QT,{id:n,value:r,onChange:u=>t(s[Number(u.currentTarget.value)]),disabled:a},o.map((u,c)=>Ae.createElement("option",{key:u,value:c},u))),Ae.createElement(yTe,null,l.current),Ae.createElement(UN,{toggled:!0}))}function xTe(){const{label:r,value:e,displayValue:t,onUpdate:n,id:i,disabled:a,settings:o}=aa();return Ae.createElement(os,{input:!0},Ae.createElement(Ps,null,r),Ae.createElement(bTe,{id:i,value:e,displayValue:t,onUpdate:n,settings:o,disabled:a}))}var wTe=qt({component:xTe},gTe);const STe=r=>Wa().string().test(r),MTe=r=>{if(typeof r!="string")throw Error("Invalid string");return r},_Te=({value:r,editable:e=!0,rows:t=!1})=>({value:r,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var ETe=Object.freeze({__proto__:null,schema:STe,sanitize:MTe,normalize:_Te});const CTe=["displayValue","onUpdate","onChange","editable"],ATe=Ht("div",{whiteSpace:"pre-wrap"});function TTe(r){let{displayValue:e,onUpdate:t,onChange:n,editable:i=!0}=r,a=Ur(r,CTe);return i?Ae.createElement(BN,_n({value:e,onUpdate:t,onChange:n},a)):Ae.createElement(ATe,null,e)}function DTe(){const{label:r,settings:e,displayValue:t,onUpdate:n,onChange:i}=aa();return Ae.createElement(os,{input:!0},Ae.createElement(Ps,null,r),Ae.createElement(TTe,_n({displayValue:t,onUpdate:n,onChange:i},e)))}var kTe=qt({component:DTe},ETe);const NTe=r=>Wa().boolean().test(r),OTe=r=>{if(typeof r!="boolean")throw Error("Invalid boolean");return r};var RTe=Object.freeze({__proto__:null,schema:NTe,sanitize:OTe});const PTe=Ht("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function ITe({value:r,onUpdate:e,id:t,disabled:n}){return Ae.createElement(PTe,null,Ae.createElement("input",{id:t,type:"checkbox",checked:r,onChange:i=>e(i.currentTarget.checked),disabled:n}),Ae.createElement("label",{htmlFor:t},Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ae.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function LTe(){const{label:r,value:e,onUpdate:t,disabled:n,id:i}=aa();return Ae.createElement(os,{input:!0},Ae.createElement(Ps,null,r),Ae.createElement(ITe,{value:e,onUpdate:t,id:i,disabled:n}))}var FTe=qt({component:LTe},RTe);const BTe=["locked"];function zTe({value:r,id:e,valueKey:t,settings:n,onUpdate:i,innerLabelTrim:a}){const o=j.useRef(r[t]);o.current=r[t];const s=j.useCallback(u=>i({[t]:IG({type:"NUMBER",value:o.current,settings:n},u)}),[i,n,t]),l=KG({type:"NUMBER",value:r[t],settings:n,setValue:s});return Ae.createElement(n$,{id:e,label:t,value:r[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:n,innerLabelTrim:a})}const UTe=Ht("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function jTe(r){let{locked:e}=r,t=Ur(r,BTe);return Ae.createElement("svg",_n({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?Ae.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):Ae.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function jN({value:r,onUpdate:e,settings:t,innerLabelTrim:n}){const{id:i,setSettings:a}=aa(),{lock:o,locked:s}=t;return Ae.createElement(UTe,{withLock:o},o&&Ae.createElement(jTe,{locked:s,onClick:()=>a({locked:!s})}),Object.keys(r).map((l,u)=>Ae.createElement(zTe,{id:u===0?i:`${i}.${l}`,key:l,valueKey:l,value:r,settings:t[l],onUpdate:e,innerLabelTrim:n})))}const i$=(r,e)=>{const t={};let n=0,i=1/0;Object.entries(r).forEach(([a,o])=>{t[a]=zG(qt({value:o},e[a])).settings,n=Math.max(n,t[a].step),i=Math.min(i,t[a].pad)});for(let a in t){const{step:o,min:s,max:l}=e[a]||{};!isFinite(o)&&(!isFinite(s)||!isFinite(l))&&(t[a].step=n,t[a].pad=i)}return t},HTe=["lock"],VTe=["value"];function qTe(r){const e=Wa().array().length(r).every.number(),t=n=>{if(!n||typeof n!="object")return!1;const i=Object.values(n);return i.length===r&&i.every(a=>isFinite(a))};return n=>e.test(n)||t(n)}function WTe(r){return Array.isArray(r)?"array":"object"}function f0(r,e,t){return WTe(r)===e?r:e==="array"?Object.values(r):SAe(r,t)}const GTe=(r,e,t)=>{const n=f0(r,"object",e.keys);for(let o in n)n[o]=BG(n[o],e[o]);const i=Object.keys(n);let a={};if(i.length===e.keys.length)a=n;else{const o=f0(t,"object",e.keys);if(i.length===1&&e.locked){const s=i[0],l=n[s],u=o[s],c=u!==0?l/u:1;for(let h in o)h===s?a[s]=l:a[h]=o[h]*c}else a=qt(qt({},o),n)}return f0(a,e.format,e.keys)},$Te=(r,e)=>f0(r,"object",e.keys),XTe=r=>!!r&&("step"in r||"min"in r||"max"in r);function YTe(r,e,t=[]){const{lock:n=!1}=e,i=Ur(e,HTe),a=Array.isArray(r)?"array":"object",o=a==="object"?Object.keys(r):t,s=f0(r,"object",o),l=XTe(i)?o.reduce((c,h)=>Object.assign(c,{[h]:i}),{}):i,u=i$(s,l);return{value:a==="array"?r:s,settings:qt(qt({},u),{},{format:a,keys:o,lock:n,locked:!1})}}function a$(r){return{schema:qTe(r.length),normalize:e=>{let{value:t}=e,n=Ur(e,VTe);return YTe(t,n,r)},format:(e,t)=>$Te(e,t),sanitize:(e,t,n)=>GTe(e,t,n)}}var JTe={grad:.9,turn:360,rad:360/(2*Math.PI)},jl=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},gi=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},Wo=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},o$=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},Uz=function(r){return{r:Wo(r.r,0,255),g:Wo(r.g,0,255),b:Wo(r.b,0,255),a:Wo(r.a)}},$E=function(r){return{r:gi(r.r),g:gi(r.g),b:gi(r.b),a:gi(r.a,3)}},ZTe=/^#([0-9a-f]{3,8})$/i,cb=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},s$=function(r){var e=r.r,t=r.g,n=r.b,i=r.a,a=Math.max(e,t,n),o=a-Math.min(e,t,n),s=o?a===e?(t-n)/o:a===t?2+(n-e)/o:4+(e-t)/o:0;return{h:60*(s<0?s+6:s),s:a?o/a*100:0,v:a/255*100,a:i}},l$=function(r){var e=r.h,t=r.s,n=r.v,i=r.a;e=e/360*6,t/=100,n/=100;var a=Math.floor(e),o=n*(1-t),s=n*(1-(e-a)*t),l=n*(1-(1-e+a)*t),u=a%6;return{r:255*[n,s,o,o,l,n][u],g:255*[l,n,n,s,o,o][u],b:255*[o,o,l,n,n,s][u],a:i}},jz=function(r){return{h:o$(r.h),s:Wo(r.s,0,100),l:Wo(r.l,0,100),a:Wo(r.a)}},Hz=function(r){return{h:gi(r.h),s:gi(r.s),l:gi(r.l),a:gi(r.a,3)}},Vz=function(r){return l$((t=(e=r).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},p0=function(r){return{h:(e=s$(r)).h,s:(i=(200-(t=e.s))*(n=e.v)/100)>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,n,i},KTe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,QTe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eDe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tDe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eD={string:[[function(r){var e=ZTe.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?gi(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?gi(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=eDe.exec(r)||tDe.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:Uz({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=KTe.exec(r)||QTe.exec(r);if(!e)return null;var t,n,i=jz({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(JTe[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Vz(i)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,n=r.b,i=r.a,a=i===void 0?1:i;return jl(e)&&jl(t)&&jl(n)?Uz({r:Number(e),g:Number(t),b:Number(n),a:Number(a)}):null},"rgb"],[function(r){var e=r.h,t=r.s,n=r.l,i=r.a,a=i===void 0?1:i;if(!jl(e)||!jl(t)||!jl(n))return null;var o=jz({h:Number(e),s:Number(t),l:Number(n),a:Number(a)});return Vz(o)},"hsl"],[function(r){var e=r.h,t=r.s,n=r.v,i=r.a,a=i===void 0?1:i;if(!jl(e)||!jl(t)||!jl(n))return null;var o=function(s){return{h:o$(s.h),s:Wo(s.s,0,100),v:Wo(s.v,0,100),a:Wo(s.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(a)});return l$(o)},"hsv"]]},qz=function(r,e){for(var t=0;t<e.length;t++){var n=e[t][0](r);if(n)return[n,e[t][1]]}return[null,void 0]},u$=function(r){return typeof r=="string"?qz(r.trim(),eD.string):typeof r=="object"&&r!==null?qz(r,eD.object):[null,void 0]},rDe=function(r){return u$(r)[1]},XE=function(r,e){var t=p0(r);return{h:t.h,s:Wo(t.s+100*e,0,100),l:t.l,a:t.a}},YE=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},Wz=function(r,e){var t=p0(r);return{h:t.h,s:t.s,l:Wo(t.l+100*e,0,100),a:t.a}},tD=function(){function r(e){this.parsed=u$(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return gi(YE(this.rgba),2)},r.prototype.isDark=function(){return YE(this.rgba)<.5},r.prototype.isLight=function(){return YE(this.rgba)>=.5},r.prototype.toHex=function(){return e=$E(this.rgba),t=e.r,n=e.g,i=e.b,o=(a=e.a)<1?cb(gi(255*a)):"","#"+cb(t)+cb(n)+cb(i)+o;var e,t,n,i,a,o},r.prototype.toRgb=function(){return $E(this.rgba)},r.prototype.toRgbString=function(){return e=$E(this.rgba),t=e.r,n=e.g,i=e.b,(a=e.a)<1?"rgba("+t+", "+n+", "+i+", "+a+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,a},r.prototype.toHsl=function(){return Hz(p0(this.rgba))},r.prototype.toHslString=function(){return e=Hz(p0(this.rgba)),t=e.h,n=e.s,i=e.l,(a=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+a+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,a},r.prototype.toHsv=function(){return e=s$(this.rgba),{h:gi(e.h),s:gi(e.s),v:gi(e.v),a:gi(e.a,3)};var e},r.prototype.invert=function(){return ga({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),ga(XE(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),ga(XE(this.rgba,-e))},r.prototype.grayscale=function(){return ga(XE(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),ga(Wz(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),ga(Wz(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?ga({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):gi(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=p0(this.rgba);return typeof e=="number"?ga({h:e,s:t.s,l:t.l,a:t.a}):gi(t.h)},r.prototype.isEqual=function(e){return this.toHex()===ga(e).toHex()},r}(),ga=function(r){return r instanceof tD?r:new tD(r)},Gz=[],nDe=function(r){r.forEach(function(e){Gz.indexOf(e)<0&&(e(tD,eD),Gz.push(e))})};function iDe(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in t)n[t[i]]=i;var a={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var s,l,u=n[this.toHex()];if(u)return u;if(o!=null&&o.closest){var c=this.toRgb(),h=1/0,d="black";if(!a.length)for(var f in t)a[f]=new r(t[f]).toRgb();for(var p in t){var v=(s=c,l=a[p],Math.pow(s.r-l.r,2)+Math.pow(s.g-l.g,2)+Math.pow(s.b-l.b,2));v<h&&(h=v,d=p)}return d}},e.string.push([function(o){var s=o.toLowerCase(),l=s==="transparent"?"#0000":t[s];return l?new r(l).toRgb():null},"name"])}function km(){return(km=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}).apply(this,arguments)}function HN(r,e){if(r==null)return{};var t,n,i={},a=Object.keys(r);for(n=0;n<a.length;n++)e.indexOf(t=a[n])>=0||(i[t]=r[t]);return i}function rD(r){var e=j.useRef(r),t=j.useRef(function(n){e.current&&e.current(n)});return e.current=r,t.current}var Zp=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r<e?e:r},m0=function(r){return"touches"in r},nD=function(r){return r&&r.ownerDocument.defaultView||self},$z=function(r,e,t){var n=r.getBoundingClientRect(),i=m0(e)?function(a,o){for(var s=0;s<a.length;s++)if(a[s].identifier===o)return a[s];return a[0]}(e.touches,t):e;return{left:Zp((i.pageX-(n.left+nD(r).pageXOffset))/n.width),top:Zp((i.pageY-(n.top+nD(r).pageYOffset))/n.height)}},Xz=function(r){!m0(r)&&r.preventDefault()},VN=Ae.memo(function(r){var e=r.onMove,t=r.onKey,n=HN(r,["onMove","onKey"]),i=j.useRef(null),a=rD(e),o=rD(t),s=j.useRef(null),l=j.useRef(!1),u=j.useMemo(function(){var f=function(y){Xz(y),(m0(y)?y.touches.length>0:y.buttons>0)&&i.current?a($z(i.current,y,s.current)):v(!1)},p=function(){return v(!1)};function v(y){var g=l.current,w=nD(i.current),b=y?w.addEventListener:w.removeEventListener;b(g?"touchmove":"mousemove",f),b(g?"touchend":"mouseup",p)}return[function(y){var g=y.nativeEvent,w=i.current;if(w&&(Xz(g),!function(m,x){return x&&!m0(m)}(g,l.current)&&w)){if(m0(g)){l.current=!0;var b=g.changedTouches||[];b.length&&(s.current=b[0].identifier)}w.focus(),a($z(w,g,s.current)),v(!0)}},function(y){var g=y.which||y.keyCode;g<37||g>40||(y.preventDefault(),o({left:g===39?.05:g===37?-.05:0,top:g===40?.05:g===38?-.05:0}))},v]},[o,a]),c=u[0],h=u[1],d=u[2];return j.useEffect(function(){return d},[d]),Ae.createElement("div",km({},n,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:h,tabIndex:0,role:"slider"}))}),sy=function(r){return r.filter(Boolean).join(" ")},qN=function(r){var e=r.color,t=r.left,n=r.top,i=n===void 0?.5:n,a=sy(["react-colorful__pointer",r.className]);return Ae.createElement("div",{className:a,style:{top:100*i+"%",left:100*t+"%"}},Ae.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},wa=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t},c$=function(r){var e=r.s,t=r.v,n=r.a,i=(200-e)*t/100;return{h:wa(r.h),s:wa(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:wa(i/2),a:wa(n,2)}},iD=function(r){var e=c$(r);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},JE=function(r){var e=c$(r);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},h$=function(r){var e=r.h,t=r.s,n=r.v,i=r.a;e=e/360*6,t/=100,n/=100;var a=Math.floor(e),o=n*(1-t),s=n*(1-(e-a)*t),l=n*(1-(1-e+a)*t),u=a%6;return{r:wa(255*[n,s,o,o,l,n][u]),g:wa(255*[l,n,n,s,o,o][u]),b:wa(255*[o,o,l,n,n,s][u]),a:wa(i,2)}},d$=function(r){var e=r.r,t=r.g,n=r.b,i=r.a,a=Math.max(e,t,n),o=a-Math.min(e,t,n),s=o?a===e?(t-n)/o:a===t?2+(n-e)/o:4+(e-t)/o:0;return{h:wa(60*(s<0?s+6:s)),s:wa(a?o/a*100:0),v:wa(a/255*100),a:i}},f$=Ae.memo(function(r){var e=r.hue,t=r.onChange,n=sy(["react-colorful__hue",r.className]);return Ae.createElement("div",{className:n},Ae.createElement(VN,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:Zp(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":wa(e),"aria-valuemax":"360","aria-valuemin":"0"},Ae.createElement(qN,{className:"react-colorful__hue-pointer",left:e/360,color:iD({h:e,s:100,v:100,a:1})})))}),p$=Ae.memo(function(r){var e=r.hsva,t=r.onChange,n={backgroundColor:iD({h:e.h,s:100,v:100,a:1})};return Ae.createElement("div",{className:"react-colorful__saturation",style:n},Ae.createElement(VN,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:Zp(e.s+100*i.left,0,100),v:Zp(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+wa(e.s)+"%, Brightness "+wa(e.v)+"%"},Ae.createElement(qN,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:iD(e)})))}),WN=function(r,e){if(r===e)return!0;for(var t in r)if(r[t]!==e[t])return!1;return!0};function m$(r,e,t){var n=rD(t),i=j.useState(function(){return r.toHsva(e)}),a=i[0],o=i[1],s=j.useRef({color:e,hsva:a});j.useEffect(function(){if(!r.equal(e,s.current.color)){var u=r.toHsva(e);s.current={hsva:u,color:e},o(u)}},[e,r]),j.useEffect(function(){var u;WN(a,s.current.hsva)||r.equal(u=r.fromHsva(a),s.current.color)||(s.current={hsva:a,color:u},n(u))},[a,r,n]);var l=j.useCallback(function(u){o(function(c){return Object.assign({},c,u)})},[]);return[a,l]}var aDe=typeof window<"u"?j.useLayoutEffect:j.useEffect,oDe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Yz=new Map,g$=function(r){aDe(function(){var e=r.current?r.current.ownerDocument:document;if(e!==void 0&&!Yz.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Yz.set(e,t);var n=oDe();n&&t.setAttribute("nonce",n),e.head.appendChild(t)}},[])},sDe=function(r){var e=r.className,t=r.colorModel,n=r.color,i=n===void 0?t.defaultColor:n,a=r.onChange,o=HN(r,["className","colorModel","color","onChange"]),s=j.useRef(null);g$(s);var l=m$(t,i,a),u=l[0],c=l[1],h=sy(["react-colorful",e]);return Ae.createElement("div",km({},o,{ref:s,className:h}),Ae.createElement(p$,{hsva:u,onChange:c}),Ae.createElement(f$,{hue:u.h,onChange:c,className:"react-colorful__last-control"}))},lDe=function(r){var e=r.className,t=r.hsva,n=r.onChange,i={backgroundImage:"linear-gradient(90deg, "+JE(Object.assign({},t,{a:0}))+", "+JE(Object.assign({},t,{a:1}))+")"},a=sy(["react-colorful__alpha",e]),o=wa(100*t.a);return Ae.createElement("div",{className:a},Ae.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),Ae.createElement(VN,{onMove:function(s){n({a:s.left})},onKey:function(s){n({a:Zp(t.a+s.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},Ae.createElement(qN,{className:"react-colorful__alpha-pointer",left:t.a,color:JE(t)})))},uDe=function(r){var e=r.className,t=r.colorModel,n=r.color,i=n===void 0?t.defaultColor:n,a=r.onChange,o=HN(r,["className","colorModel","color","onChange"]),s=j.useRef(null);g$(s);var l=m$(t,i,a),u=l[0],c=l[1],h=sy(["react-colorful",e]);return Ae.createElement("div",km({},o,{ref:s,className:h}),Ae.createElement(p$,{hsva:u,onChange:c}),Ae.createElement(f$,{hue:u.h,onChange:c}),Ae.createElement(lDe,{hsva:u,onChange:c,className:"react-colorful__last-control"}))},cDe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:d$,fromHsva:h$,equal:WN},hDe=function(r){return Ae.createElement(uDe,km({},r,{colorModel:cDe}))},dDe={defaultColor:{r:0,g:0,b:0},toHsva:function(r){return d$({r:r.r,g:r.g,b:r.b,a:1})},fromHsva:function(r){return{r:(e=h$(r)).r,g:e.g,b:e.b};var e},equal:WN},fDe=function(r){return Ae.createElement(sDe,km({},r,{colorModel:dDe}))},v$={exports:{}},pDe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mDe=pDe,gDe=mDe;function y$(){}function b$(){}b$.resetWarningCache=y$;var vDe=function(){function r(n,i,a,o,s,l){if(l!==gDe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:b$,resetWarningCache:y$};return t.PropTypes=t,t};v$.exports=vDe();var yDe=v$.exports;const Qr=is(yDe);function Nm(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,[])).next())})}function Om(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function bDe(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a}function xDe(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(bDe(arguments[e]));return r}var wDe=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ly(r,e){var t=SDe(r);if(typeof t.path!="string"){var n=r.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:r.name,writable:!1,configurable:!1,enumerable:!0})}return t}function SDe(r){var e=r.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!r.type){var n=e.split(".").pop().toLowerCase(),i=wDe.get(n);i&&Object.defineProperty(r,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return r}var MDe=[".DS_Store","Thumbs.db"];function _De(r){return Nm(this,void 0,void 0,function(){return Om(this,function(e){return AS(r)&&EDe(r)?[2,DDe(r.dataTransfer,r.type)]:CDe(r)?[2,ADe(r)]:Array.isArray(r)&&r.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,TDe(r)]:[2,[]]})})}function EDe(r){return AS(r.dataTransfer)}function CDe(r){return AS(r)&&AS(r.target)}function AS(r){return typeof r=="object"&&r!==null}function ADe(r){return aD(r.target.files).map(function(e){return ly(e)})}function TDe(r){return Nm(this,void 0,void 0,function(){var e;return Om(this,function(t){switch(t.label){case 0:return[4,Promise.all(r.map(function(n){return n.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(n){return ly(n)})]}})})}function DDe(r,e){return Nm(this,void 0,void 0,function(){var t,n;return Om(this,function(i){switch(i.label){case 0:return r===null?[2,[]]:r.items?(t=aD(r.items).filter(function(a){return a.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(kDe))]):[3,2];case 1:return n=i.sent(),[2,Jz(x$(n))];case 2:return[2,Jz(aD(r.files).map(function(a){return ly(a)}))]}})})}function Jz(r){return r.filter(function(e){return MDe.indexOf(e.name)===-1})}function aD(r){if(r===null)return[];for(var e=[],t=0;t<r.length;t++){var n=r[t];e.push(n)}return e}function kDe(r){if(typeof r.webkitGetAsEntry!="function")return Zz(r);var e=r.webkitGetAsEntry();return e&&e.isDirectory?w$(e):Zz(r)}function x$(r){return r.reduce(function(e,t){return xDe(e,Array.isArray(t)?x$(t):[t])},[])}function Zz(r){var e=r.getAsFile();if(!e)return Promise.reject(r+" is not a File");var t=ly(e);return Promise.resolve(t)}function NDe(r){return Nm(this,void 0,void 0,function(){return Om(this,function(e){return[2,r.isDirectory?w$(r):ODe(r)]})})}function w$(r){var e=r.createReader();return new Promise(function(t,n){var i=[];function a(){var o=this;e.readEntries(function(s){return Nm(o,void 0,void 0,function(){var l,u,c;return Om(this,function(h){switch(h.label){case 0:if(s.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=h.sent(),t(l),[3,4];case 3:return u=h.sent(),n(u),[3,4];case 4:return[3,6];case 5:c=Promise.all(s.map(NDe)),i.push(c),a(),h.label=6;case 6:return[2]}})})},function(s){n(s)})}a()})}function ODe(r){return Nm(this,void 0,void 0,function(){return Om(this,function(e){return[2,new Promise(function(t,n){r.file(function(i){var a=ly(i,r.fullPath);t(a)},function(i){n(i)})})]})})}var RDe=function(r,e){if(r&&e){var t=Array.isArray(e)?e:e.split(","),n=r.name||"",i=(r.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return t.some(function(o){var s=o.trim().toLowerCase();return s.charAt(0)==="."?n.toLowerCase().endsWith(s):s.endsWith("/*")?a===s.replace(/\/.*$/,""):i===s})}return!0};function Kz(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Qz(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kz(Object(t),!0).forEach(function(n){S$(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Kz(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function S$(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function e6(r,e){return FDe(r)||LDe(r,e)||IDe(r,e)||PDe()}function PDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IDe(r,e){if(r){if(typeof r=="string")return t6(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return t6(r,e)}}function t6(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function LDe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,a=!1,o,s;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return n}}function FDe(r){if(Array.isArray(r))return r}var BDe="file-invalid-type",zDe="file-too-large",UDe="file-too-small",jDe="too-many-files",HDe=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var e=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:BDe,message:"File type must be ".concat(e)}},r6=function(r){return{code:zDe,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},n6=function(r){return{code:UDe,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},VDe={code:jDe,message:"Too many files"};function M$(r,e){var t=r.type==="application/x-moz-file"||RDe(r,e);return[t,t?null:HDe(e)]}function _$(r,e,t){if(bg(r.size))if(bg(e)&&bg(t)){if(r.size>t)return[!1,r6(t)];if(r.size<e)return[!1,n6(e)]}else{if(bg(e)&&r.size<e)return[!1,n6(e)];if(bg(t)&&r.size>t)return[!1,r6(t)]}return[!0,null]}function bg(r){return r!=null}function qDe(r){var e=r.files,t=r.accept,n=r.minSize,i=r.maxSize,a=r.multiple,o=r.maxFiles;return!a&&e.length>1||a&&o>=1&&e.length>o?!1:e.every(function(s){var l=M$(s,t),u=e6(l,1),c=u[0],h=_$(s,n,i),d=e6(h,1),f=d[0];return c&&f})}function TS(r){return typeof r.isPropagationStopped=="function"?r.isPropagationStopped():typeof r.cancelBubble<"u"?r.cancelBubble:!1}function hb(r){return r.dataTransfer?Array.prototype.some.call(r.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!r.target&&!!r.target.files}function i6(r){r.preventDefault()}function WDe(r){return r.indexOf("MSIE")!==-1||r.indexOf("Trident/")!==-1}function GDe(r){return r.indexOf("Edge/")!==-1}function $De(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return WDe(r)||GDe(r)}function Xs(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return e.some(function(s){return!TS(n)&&s&&s.apply(void 0,[n].concat(a)),TS(n)})}}function XDe(){return"showOpenFilePicker"in window}function YDe(r){return r=typeof r=="string"?r.split(","):r,[{description:"everything",accept:Array.isArray(r)?r.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return Qz(Qz({},e),{},S$({},t,[]))},{}):{}}]}function JDe(r){return r instanceof DOMException&&(r.name==="AbortError"||r.code===r.ABORT_ERR)}function ZDe(r){return r instanceof DOMException&&(r.name==="SecurityError"||r.code===r.SECURITY_ERR)}var KDe=["children"],QDe=["open"],e3e=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],t3e=["refKey","onChange","onClick"];function r3e(r){return a3e(r)||i3e(r)||E$(r)||n3e()}function n3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i3e(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function a3e(r){if(Array.isArray(r))return oD(r)}function ZE(r,e){return l3e(r)||s3e(r,e)||E$(r,e)||o3e()}function o3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E$(r,e){if(r){if(typeof r=="string")return oD(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oD(r,e)}}function oD(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function s3e(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,a=!1,o,s;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return n}}function l3e(r){if(Array.isArray(r))return r}function a6(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function gn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?a6(Object(t),!0).forEach(function(n){sD(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):a6(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function sD(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function DS(r,e){if(r==null)return{};var t=u3e(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function u3e(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}var GN=j.forwardRef(function(r,e){var t=r.children,n=DS(r,KDe),i=A$(n),a=i.open,o=DS(i,QDe);return j.useImperativeHandle(e,function(){return{open:a}},[a]),Ae.createElement(j.Fragment,null,t(gn(gn({},o),{},{open:a})))});GN.displayName="Dropzone";var C$={disabled:!1,getFilesFromEvent:_De,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};GN.defaultProps=C$;GN.propTypes={children:Qr.func,accept:Qr.oneOfType([Qr.string,Qr.arrayOf(Qr.string)]),multiple:Qr.bool,preventDropOnDocument:Qr.bool,noClick:Qr.bool,noKeyboard:Qr.bool,noDrag:Qr.bool,noDragEventsBubbling:Qr.bool,minSize:Qr.number,maxSize:Qr.number,maxFiles:Qr.number,disabled:Qr.bool,getFilesFromEvent:Qr.func,onFileDialogCancel:Qr.func,onFileDialogOpen:Qr.func,useFsAccessApi:Qr.bool,onDragEnter:Qr.func,onDragLeave:Qr.func,onDragOver:Qr.func,onDrop:Qr.func,onDropAccepted:Qr.func,onDropRejected:Qr.func,validator:Qr.func};var lD={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function A$(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=gn(gn({},C$),r),t=e.accept,n=e.disabled,i=e.getFilesFromEvent,a=e.maxSize,o=e.minSize,s=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,h=e.onDragOver,d=e.onDrop,f=e.onDropAccepted,p=e.onDropRejected,v=e.onFileDialogCancel,y=e.onFileDialogOpen,g=e.useFsAccessApi,w=e.preventDropOnDocument,b=e.noClick,m=e.noKeyboard,x=e.noDrag,S=e.noDragEventsBubbling,E=e.validator,A=j.useMemo(function(){return typeof y=="function"?y:o6},[y]),T=j.useMemo(function(){return typeof v=="function"?v:o6},[v]),C=j.useRef(null),D=j.useRef(null),O=j.useReducer(c3e,lD),U=ZE(O,2),L=U[0],F=U[1],k=L.isFocused,R=L.isFileDialogActive,z=L.draggedFiles,B=j.useRef(typeof window<"u"&&window.isSecureContext&&g&&XDe()),X=function(){!B.current&&R&&setTimeout(function(){if(D.current){var $=D.current.files;$.length||(F({type:"closeDialog"}),T())}},300)};j.useEffect(function(){return window.addEventListener("focus",X,!1),function(){window.removeEventListener("focus",X,!1)}},[D,R,T,B]);var Z=j.useRef([]),Q=function($){C.current&&C.current.contains($.target)||($.preventDefault(),Z.current=[])};j.useEffect(function(){return w&&(document.addEventListener("dragover",i6,!1),document.addEventListener("drop",Q,!1)),function(){w&&(document.removeEventListener("dragover",i6),document.removeEventListener("drop",Q))}},[C,w]);var J=j.useCallback(function($){$.preventDefault(),$.persist(),ie($),Z.current=[].concat(r3e(Z.current),[$.target]),hb($)&&Promise.resolve(i($)).then(function(ee){TS($)&&!S||(F({draggedFiles:ee,isDragActive:!0,type:"setDraggedFiles"}),u&&u($))})},[i,u,S]),ne=j.useCallback(function($){$.preventDefault(),$.persist(),ie($);var ee=hb($);if(ee&&$.dataTransfer)try{$.dataTransfer.dropEffect="copy"}catch{}return ee&&h&&h($),!1},[h,S]),fe=j.useCallback(function($){$.preventDefault(),$.persist(),ie($);var ee=Z.current.filter(function(xe){return C.current&&C.current.contains(xe)}),ge=ee.indexOf($.target);ge!==-1&&ee.splice(ge,1),Z.current=ee,!(ee.length>0)&&(F({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),hb($)&&c&&c($))},[C,c,S]),se=j.useCallback(function($,ee){var ge=[],xe=[];$.forEach(function(Ne){var Fe=M$(Ne,t),We=ZE(Fe,2),ke=We[0],it=We[1],Je=_$(Ne,o,a),st=ZE(Je,2),we=st[0],Pe=st[1],et=E?E(Ne):null;if(ke&&we&&!et)ge.push(Ne);else{var V=[it,Pe];et&&(V=V.concat(et)),xe.push({file:Ne,errors:V.filter(function(Me){return Me})})}}),(!s&&ge.length>1||s&&l>=1&&ge.length>l)&&(ge.forEach(function(Ne){xe.push({file:Ne,errors:[VDe]})}),ge.splice(0)),F({acceptedFiles:ge,fileRejections:xe,type:"setFiles"}),d&&d(ge,xe,ee),xe.length>0&&p&&p(xe,ee),ge.length>0&&f&&f(ge,ee)},[F,s,t,o,a,l,d,f,p,E]),ye=j.useCallback(function($){$.preventDefault(),$.persist(),ie($),Z.current=[],hb($)&&Promise.resolve(i($)).then(function(ee){TS($)&&!S||se(ee,$)}),F({type:"reset"})},[i,se,S]),De=j.useCallback(function(){if(B.current){F({type:"openDialog"}),A();var $={multiple:s,types:YDe(t)};window.showOpenFilePicker($).then(function(ee){return i(ee)}).then(function(ee){se(ee,null),F({type:"closeDialog"})}).catch(function(ee){JDe(ee)?(T(ee),F({type:"closeDialog"})):ZDe(ee)&&(B.current=!1,D.current&&(D.current.value=null,D.current.click()))});return}D.current&&(F({type:"openDialog"}),A(),D.current.value=null,D.current.click())},[F,A,T,g,se,t,s]),pe=j.useCallback(function($){!C.current||!C.current.isEqualNode($.target)||($.key===" "||$.key==="Enter"||$.keyCode===32||$.keyCode===13)&&($.preventDefault(),De())},[C,De]),Te=j.useCallback(function(){F({type:"focus"})},[]),be=j.useCallback(function(){F({type:"blur"})},[]),re=j.useCallback(function(){b||($De()?setTimeout(De,0):De())},[b,De]),Re=function($){return n?null:$},ze=function($){return m?null:Re($)},K=function($){return x?null:Re($)},ie=function($){S&&$.stopPropagation()},_e=j.useMemo(function(){return function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee=$.refKey,ge=ee===void 0?"ref":ee,xe=$.role,Ne=$.onKeyDown,Fe=$.onFocus,We=$.onBlur,ke=$.onClick,it=$.onDragEnter,Je=$.onDragOver,st=$.onDragLeave,we=$.onDrop,Pe=DS($,e3e);return gn(gn(sD({onKeyDown:ze(Xs(Ne,pe)),onFocus:ze(Xs(Fe,Te)),onBlur:ze(Xs(We,be)),onClick:Re(Xs(ke,re)),onDragEnter:K(Xs(it,J)),onDragOver:K(Xs(Je,ne)),onDragLeave:K(Xs(st,fe)),onDrop:K(Xs(we,ye)),role:typeof xe=="string"&&xe!==""?xe:"button"},ge,C),!n&&!m?{tabIndex:0}:{}),Pe)}},[C,pe,Te,be,re,J,ne,fe,ye,m,x,n]),oe=j.useCallback(function($){$.stopPropagation()},[]),G=j.useMemo(function(){return function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee=$.refKey,ge=ee===void 0?"ref":ee,xe=$.onChange,Ne=$.onClick,Fe=DS($,t3e),We=sD({accept:t,multiple:s,type:"file",style:{display:"none"},onChange:Re(Xs(xe,ye)),onClick:Re(Xs(Ne,oe)),tabIndex:-1},ge,D);return gn(gn({},We),Fe)}},[D,t,s,ye,n]),W=z.length,ce=W>0&&qDe({files:z,accept:t,minSize:o,maxSize:a,multiple:s,maxFiles:l}),Ce=W>0&&!ce;return gn(gn({},L),{},{isDragAccept:ce,isDragReject:Ce,isFocused:k&&!n,getRootProps:_e,getInputProps:G,rootRef:C,inputRef:D,open:Re(De)})}function c3e(r,e){switch(e.type){case"focus":return gn(gn({},r),{},{isFocused:!0});case"blur":return gn(gn({},r),{},{isFocused:!1});case"openDialog":return gn(gn({},lD),{},{isFileDialogActive:!0});case"closeDialog":return gn(gn({},r),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,n=e.draggedFiles;return gn(gn({},r),{},{draggedFiles:n,isDragActive:t});case"setFiles":return gn(gn({},r),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return gn({},lD);default:return r}}function o6(){}function h3e(r){let e;const t=new Set,n=(s,l)=>{const u=typeof s=="function"?s(e):s;if(u!==e){const c=e;e=l?u:Object.assign({},e,u),t.forEach(h=>h(e,c))}},i=()=>e,a=(s,l=i,u=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let c=l(e);function h(){const d=l(e);if(!u(c,d)){const f=c;s(c=d,f)}}return t.add(h),()=>t.delete(h)},o={setState:n,getState:i,subscribe:(s,l,u)=>l||u?a(s,l,u):(t.add(s),()=>t.delete(s)),destroy:()=>t.clear()};return e=r(n,i,o),o}const d3e=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),s6=d3e?j.useEffect:j.useLayoutEffect;function $N(r){const e=typeof r=="function"?h3e(r):r,t=(n=e.getState,i=Object.is)=>{const[,a]=j.useReducer(y=>y+1,0),o=e.getState(),s=j.useRef(o),l=j.useRef(n),u=j.useRef(i),c=j.useRef(!1),h=j.useRef();h.current===void 0&&(h.current=n(o));let d,f=!1;(s.current!==o||l.current!==n||u.current!==i||c.current)&&(d=n(o),f=!i(h.current,d)),s6(()=>{f&&(h.current=d),s.current=o,l.current=n,u.current=i,c.current=!1});const p=j.useRef(o);s6(()=>{const y=()=>{try{const w=e.getState(),b=l.current(w);u.current(h.current,b)||(s.current=w,h.current=b,a())}catch{c.current=!0,a()}},g=e.subscribe(y);return e.getState()!==p.current&&y(),g},[]);const v=f?d:h.current;return j.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}const f3e=r=>(e,t,n)=>{const i=n.subscribe;return n.subscribe=(a,o,s)=>{let l=a;if(o){const u=(s==null?void 0:s.equalityFn)||Object.is;let c=a(n.getState());l=h=>{const d=a(h);if(!u(c,d)){const f=c;o(c=d,f)}},s!=null&&s.fireImmediately&&o(c,c)}return i(l)},r(e,t,n)};/*!
* isobject <https://github.com/jonschlinkert/isobject>
*
* Copyright (c) 2014-2017, Jon Schlinkert.
* Released under the MIT License.
*/var p3e=function(r){return r!=null&&typeof r=="object"&&Array.isArray(r)===!1};/*!
* is-plain-object <https://github.com/jonschlinkert/is-plain-object>
*
* Copyright (c) 2014-2017, Jon Schlinkert.
* Released under the MIT License.
*/var m3e=p3e;function l6(r){return m3e(r)===!0&&Object.prototype.toString.call(r)==="[object Object]"}var T$=function(r){var e,t;return!(l6(r)===!1||(e=r.constructor,typeof e!="function")||(t=e.prototype,l6(t)===!1)||t.hasOwnProperty("isPrototypeOf")===!1)};/*!
* is-extendable <https://github.com/jonschlinkert/is-extendable>
*
* Copyright (c) 2015-2017, Jon Schlinkert.
* Released under the MIT License.
*/var g3e=T$,XN=function(r){return g3e(r)||typeof r=="function"||Array.isArray(r)};/*!
* for-in <https://github.com/jonschlinkert/for-in>
*
* Copyright (c) 2014-2017, Jon Schlinkert.
* Released under the MIT License.
*/var v3e=function(r,e,t){for(var n in r)if(e.call(t,r[n],n,r)===!1)break},y3e=XN,b3e=v3e;function D$(r,e){for(var t=arguments.length,n=0;++n<t;){var i=arguments[n];uD(i)&&b3e(i,x3e,r)}return r}function x3e(r,e){if(w3e(e)){var t=this[e];uD(r)&&uD(t)?D$(t,r):this[e]=r}}function uD(r){return y3e(r)&&!Array.isArray(r)}function w3e(r){return r!=="__proto__"&&r!=="constructor"&&r!=="prototype"}var S3e=D$;/*!
* get-value <https://github.com/jonschlinkert/get-value>
*
* Copyright (c) 2014-2015, Jon Schlinkert.
* Licensed under the MIT License.
*/var M3e=function(r,e,t,n,i){if(!_3e(r)||!e)return r;if(e=db(e),t&&(e+="."+db(t)),n&&(e+="."+db(n)),i&&(e+="."+db(i)),e in r)return r[e];for(var a=e.split("."),o=a.length,s=-1;r&&++s<o;){for(var l=a[s];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+a[++s];r=r[l]}return r};function _3e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}function db(r){return r?Array.isArray(r)?r.join("."):r:""}/*!
* assign-symbols <https://github.com/jonschlinkert/assign-symbols>
*
* Copyright (c) 2015, Jon Schlinkert.
* Licensed under the MIT License.
*/var E3e=function(r,e){if(r===null||typeof r>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return r;for(var t=Object.prototype.propertyIsEnumerable,n=Object(r),i=arguments.length,a=0;++a<i;)for(var o=Object(arguments[a]),s=Object.getOwnPropertySymbols(o),l=0;l<s.length;l++){var u=s[l];t.call(o,u)&&(n[u]=o[u])}return n},C3e=XN,A3e=E3e,T3e=Object.assign||function(r){if(r===null||typeof r>"u")throw new TypeError("Cannot convert undefined or null to object");u6(r)||(r={});for(var e=1;e<arguments.length;e++){var t=arguments[e];k3e(t)&&(t=N3e(t)),u6(t)&&(D3e(r,t),A3e(r,t))}return r};function D3e(r,e){for(var t in e)O3e(e,t)&&(r[t]=e[t])}function k3e(r){return r&&typeof r=="string"}function N3e(r){var e={};for(var t in r)e[t]=r[t];return e}function u6(r){return r&&typeof r=="object"||C3e(r)}function O3e(r,e){return Object.prototype.hasOwnProperty.call(r,e)}/*!
* split-string <https://github.com/jonschlinkert/split-string>
*
* Copyright (c) 2015-2017, Jon Schlinkert.
* Released under the MIT License.
*/var R3e=T3e,P3e=function(r,e,t){if(typeof r!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var n=R3e({sep:"."},e),i=n.quotes||['"',"'","`"],a;n.brackets===!0?a={"<":">","(":")","[":"]","{":"}"}:n.brackets&&(a=n.brackets);var o=[],s=[],l=[""],u=n.sep,c=r.length,h=-1,d;function f(){if(a&&s.length)return a[s[s.length-1]]}for(;++h<c;){var p=r[h],v=r[h+1],y={val:p,idx:h,arr:l,str:r};if(o.push(y),p==="\\"){y.val=L3e(n,r,h)===!0?p+v:v,y.escaped=!0,typeof t=="function"&&t(y),l[l.length-1]+=y.val,h++;continue}if(a&&a[p]){s.push(p);var g=f(),w=h+1;if(r.indexOf(g,w+1)!==-1)for(;s.length&&w<c;){var b=r[++w];if(b==="\\"){b++;continue}if(i.indexOf(b)!==-1){w=cD(r,b,w+1);continue}if(g=f(),s.length&&r.indexOf(g,w+1)===-1)break;if(a[b]){s.push(b);continue}g===b&&s.pop()}if(d=w,d===-1){l[l.length-1]+=p;continue}p=r.slice(h,d+1),y.val=p,y.idx=h=d}if(i.indexOf(p)!==-1){if(d=cD(r,p,h+1),d===-1){l[l.length-1]+=p;continue}I3e(p,n)===!0?p=r.slice(h,d+1):p=r.slice(h+1,d),y.val=p,y.idx=h=d}if(typeof t=="function"&&(t(y,o),p=y.val,h=y.idx),y.val===u&&y.split!==!1){l.push("");continue}l[l.length-1]+=y.val}return l};function cD(r,e,t,n){var i=r.indexOf(e,t);return r.charAt(i-1)==="\\"?cD(r,e,i+1):i}function I3e(r,e){return e.keepDoubleQuotes===!0&&r==='"'||e.keepSingleQuotes===!0&&r==="'"?!0:e.keepQuotes}function L3e(r,e,t){return typeof r.keepEscaping=="function"?r.keepEscaping(e,t):r.keepEscaping===!0||e[t+1]==="\\"}/*!
* is-extendable <https://github.com/jonschlinkert/is-extendable>
*
* Copyright (c) 2015, Jon Schlinkert.
* Licensed under the MIT License.
*/var F3e=function(r){return typeof r<"u"&&r!==null&&(typeof r=="object"||typeof r=="function")},c6=F3e,B3e=function(r){c6(r)||(r={});for(var e=arguments.length,t=1;t<e;t++){var n=arguments[t];c6(n)&&z3e(r,n)}return r};function z3e(r,e){for(var t in e)U3e(e,t)&&(r[t]=e[t])}function U3e(r,e){return Object.prototype.hasOwnProperty.call(r,e)}/*!
* is-extendable <https://github.com/jonschlinkert/is-extendable>
*
* Copyright (c) 2015, Jon Schlinkert.
* Licensed under the MIT License.
*/var j3e=function(r){return typeof r<"u"&&r!==null&&(typeof r=="object"||typeof r=="function")};/*!
* set-value <https://github.com/jonschlinkert/set-value>
*
* Copyright (c) 2014-2015, 2017, Jon Schlinkert.
* Released under the MIT License.
*/var H3e=P3e,V3e=B3e,h6=T$,d6=j3e,q3e=function(r,e,t){if(!d6(r)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return r;for(var n=H3e(e,{sep:".",brackets:!0}).filter(W3e),i=n.length,a=-1,o=r;++a<i;){var s=n[a];if(a!==i-1){d6(o[s])||(o[s]={}),o=o[s];continue}h6(o[s])&&h6(t)?o[s]=V3e({},o[s],t):o[s]=t}return r};function W3e(r){return r!=="__proto__"&&r!=="constructor"&&r!=="prototype"}var KE=XN,f6=S3e,G3e=M3e,p6=q3e,$3e=function(r,e,t){if(!KE(r))throw new TypeError("expected an object");if(typeof e!="string"||t==null)return f6.apply(null,arguments);if(typeof t=="string")return p6(r,e,t),r;var n=G3e(r,e);return KE(t)&&KE(n)&&(t=f6({},n,t)),p6(r,e,t),r};const X3e=is($3e),YN=(...r)=>r.filter(Boolean).join(".");function Y3e(r){const e=r.split(".");return[e.pop(),e.join(".")||void 0]}function J3e(r,e){return Object.entries(xAe(r,e)).reduce((t,[,{value:n,disabled:i,key:a}])=>(t[a]=i?void 0:n,t),{})}function Z3e(r,e){const t=j.useRef();return Z0(r,t.current)||(t.current=r),t.current}function k$(r,e){return j.useMemo(r,Z3e(e))}function K3e(r){const e=j.useRef(null),t=j.useRef(null),n=j.useRef(!0);return j.useLayoutEffect(()=>{r||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),j.useEffect(()=>{if(n.current){n.current=!1;return}let i;const a=e.current,o=()=>{r&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",o,{once:!0});const{height:s}=t.current.getBoundingClientRect();return a.style.height=s+"px",r||(a.style.overflow="hidden",i=window.setTimeout(()=>a.style.height="0px",50)),()=>{a.removeEventListener("transitionend",o),clearTimeout(i)}},[r]),{wrapperRef:e,contentRef:t}}const Q3e=r=>{const[e,t]=j.useState(r.getVisiblePaths());return j.useEffect(()=>{t(r.getVisiblePaths());const n=r.useStore.subscribe(r.getVisiblePaths,t,{equalityFn:qM});return()=>n()},[r]),e};function eke(r,e,t){return r.useStore(n=>{const i=qt(qt({},t),n.data);return J3e(i,e)},qM)}function N$(r=3){const e=j.useRef(null),t=j.useRef(null),[n,i]=j.useState(!1),a=j.useCallback(()=>i(!0),[]),o=j.useCallback(()=>i(!1),[]);return j.useLayoutEffect(()=>{if(n){const{bottom:s,top:l,left:u}=e.current.getBoundingClientRect(),{height:c}=t.current.getBoundingClientRect(),h=s+c>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",h==="down"?t.current.style.top=s+r+"px":t.current.style.bottom=window.innerHeight-l+r+"px"}},[r,n]),{popinRef:e,wrapperRef:t,shown:n,show:a,hide:o}}nDe([iDe]);const tke={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Wa.extend({color:()=>r=>ga(r).isValid()});const rke=r=>Wa().color().test(r);function O$(r,{format:e,hasAlpha:t,isString:n}){const i=tke[e]+(n&&e!=="hex"?"String":""),a=r[i]();return typeof a=="object"&&!t?wAe(a,["a"]):a}const R$=(r,e)=>{const t=ga(r);if(!t.isValid())throw Error("Invalid color");return O$(t,e)},nke=(r,e)=>O$(ga(r),qt(qt({},e),{},{isString:!0,format:"hex"})),ike=({value:r})=>{const e=rDe(r),t=e==="name"?"hex":e,n=typeof r=="object"?"a"in r:e==="hex"&&r.length===8||/^(rgba)|(hsla)|(hsva)/.test(r),i={format:t,hasAlpha:n,isString:typeof r=="string"};return{value:R$(r,i),settings:i}};var ake=Object.freeze({__proto__:null,schema:rke,sanitize:R$,format:nke,normalize:ike});const oke=Ht("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),ske=Ht("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),lke=Ht("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function m6(r,e){return e!=="rgb"?ga(r).toRgb():r}function uke({value:r,displayValue:e,settings:t,onUpdate:n}){const{emitOnEditStart:i,emitOnEditEnd:a}=aa(),{format:o,hasAlpha:s}=t,{popinRef:l,wrapperRef:u,shown:c,show:h,hide:d}=N$(),f=j.useRef(0),[p,v]=j.useState(()=>m6(r,o)),y=s?hDe:fDe,g=()=>{v(m6(r,o)),h(),i()},w=()=>{d(),a(),window.clearTimeout(f.current)},b=()=>{f.current=window.setTimeout(w,500)};return j.useEffect(()=>()=>window.clearTimeout(f.current),[]),Ae.createElement(Ae.Fragment,null,Ae.createElement(oke,{ref:l,active:c,onClick:()=>g(),style:{color:e}}),c&&Ae.createElement(zN,null,Ae.createElement(ZG,{onPointerUp:w}),Ae.createElement(lke,{ref:u,onMouseEnter:()=>window.clearTimeout(f.current),onMouseLeave:m=>m.buttons===0&&b()},Ae.createElement(y,{color:p,onChange:n}))))}function cke(){const{value:r,displayValue:e,label:t,onChange:n,onUpdate:i,settings:a}=aa();return Ae.createElement(os,{input:!0},Ae.createElement(Ps,null,t),Ae.createElement(ske,null,Ae.createElement(uke,{value:r,displayValue:e,onChange:n,onUpdate:i,settings:a}),Ae.createElement(BN,{value:e,onChange:n,onUpdate:i})))}var hke=qt({component:cke},ake);function dke(){const{label:r,displayValue:e,onUpdate:t,settings:n}=aa();return Ae.createElement(os,{input:!0},Ae.createElement(Ps,null,r),Ae.createElement(jN,{value:e,settings:n,onUpdate:t}))}var fke=qt({component:dke},a$(["x","y","z"]));const pke=Ht("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),mke=Ht("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function gke({value:r,settings:e,onUpdate:t}){const n=j.useRef(),i=j.useRef(0),a=j.useRef(0),o=j.useRef(1),[s,l]=j.useState(!1),[u,c]=j.useState(!1),[h,d]=QG(),f=j.useRef(null),p=j.useRef(null);j.useLayoutEffect(()=>{if(s){const{top:O,left:U,width:L,height:F}=f.current.getBoundingClientRect();p.current.style.left=U+L/2+"px",p.current.style.top=O+F/2+"px"}},[s]);const{keys:[v,y],joystick:g}=e,w=g==="invertY"?1:-1,{[v]:{step:b},[y]:{step:m}}=e,x=uu("sizes","joystickWidth"),S=uu("sizes","joystickHeight"),E=parseFloat(x)*.8/2,A=parseFloat(S)*.8/2,T=j.useCallback(()=>{n.current||(c(!0),i.current&&d({x:i.current*E}),a.current&&d({y:a.current*-A}),n.current=window.setInterval(()=>{t(O=>{const U=b*i.current*o.current,L=w*m*a.current*o.current;return Array.isArray(O)?{[v]:O[0]+U,[y]:O[1]+L}:{[v]:O[v]+U,[y]:O[y]+L}})},16))},[E,A,t,d,b,m,v,y,w]),C=j.useCallback(()=>{window.clearTimeout(n.current),n.current=void 0,c(!1)},[]);j.useEffect(()=>{function O(U){o.current=FG(U)}return window.addEventListener("keydown",O),window.addEventListener("keyup",O),()=>{window.clearTimeout(n.current),window.removeEventListener("keydown",O),window.removeEventListener("keyup",O)}},[]);const D=oy(({first:O,active:U,delta:[L,F],movement:[k,R]})=>{O&&l(!0);const z=Wc(k,-E,E),B=Wc(R,-A,A);i.current=Math.abs(k)>Math.abs(z)?Math.sign(k-z):0,a.current=Math.abs(R)>Math.abs(B)?Math.sign(B-R):0;let X=r[v],Z=r[y];U?(i.current||(X+=L*b*o.current,d({x:z})),a.current||(Z-=w*F*m*o.current,d({y:B})),i.current||a.current?T():C(),t({[v]:X,[y]:Z})):(l(!1),i.current=0,a.current=0,d({x:0,y:0}),C())});return Ae.createElement(pke,_n({ref:f},D()),s&&Ae.createElement(zN,null,Ae.createElement(mke,{ref:p,isOutOfBounds:u},Ae.createElement("div",null),Ae.createElement("span",{ref:h}))))}const vke=Ht("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function yke(){const{label:r,displayValue:e,onUpdate:t,settings:n}=aa();return Ae.createElement(os,{input:!0},Ae.createElement(Ps,null,r),Ae.createElement(vke,{withJoystick:!!n.joystick},n.joystick&&Ae.createElement(gke,{value:e,settings:n,onUpdate:t}),Ae.createElement(jN,{value:e,settings:n,onUpdate:t})))}const bke=["joystick"],P$=a$(["x","y"]),xke=r=>{let{joystick:e=!0}=r,t=Ur(r,bke);const{value:n,settings:i}=P$.normalize(t);return{value:n,settings:qt(qt({},i),{},{joystick:e})}};var wke=qt(qt({component:yke},P$),{},{normalize:xke});const Ske=r=>{if(r!==void 0){if(r instanceof File)try{return URL.createObjectURL(r)}catch{return}if(typeof r=="string"&&r.indexOf("blob:")===0)return r;throw Error("Invalid image format [undefined | blob | File].")}},Mke=(r,e)=>typeof e=="object"&&"image"in e,_ke=({image:r})=>({value:r});var Eke=Object.freeze({__proto__:null,sanitize:Ske,schema:Mke,normalize:_ke});const Cke=Ht("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Ake=Ht("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Tke=Ht("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Dke=Ht("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),kke=Ht("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Nke=Ht("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function Oke(){const{label:r,value:e,onUpdate:t,disabled:n}=aa(),{popinRef:i,wrapperRef:a,shown:o,show:s,hide:l}=N$(),u=j.useCallback(p=>{p.length&&t(p[0])},[t]),c=j.useCallback(p=>{p.stopPropagation(),t(void 0)},[t]),{getRootProps:h,getInputProps:d,isDragAccept:f}=A$({maxFiles:1,accept:"image/*",onDrop:u,disabled:n});return Ae.createElement(os,{input:!0},Ae.createElement(Ps,null,r),Ae.createElement(Cke,null,Ae.createElement(Tke,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&s(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&Ae.createElement(zN,null,Ae.createElement(ZG,{onPointerUp:l,style:{cursor:"pointer"}}),Ae.createElement(Dke,{ref:a,style:{backgroundImage:`url(${e})`}})),Ae.createElement(Ake,h({isDragAccept:f}),Ae.createElement("input",d()),Ae.createElement(kke,null,f?"drop image":"click or drop")),Ae.createElement(Nke,{onClick:c,disabled:!e})))}var Rke=qt({component:Oke},Eke);const g6=Wa().number(),Pke=(r,e)=>Wa().array().length(2).every.number().test(r)&&Wa().schema({min:g6,max:g6}).test(e),kS=r=>({min:r[0],max:r[1]}),I$=(r,{bounds:[e,t]},n)=>{const i=Array.isArray(r)?kS(r):r,a={min:n[0],max:n[1]},{min:o,max:s}=qt(qt({},a),i);return[Wc(Number(o),e,Math.max(e,s)),Wc(Number(s),Math.min(t,o),t)]},Ike=({value:r,min:e,max:t})=>{const n={min:e,max:t},i=i$(kS(r),{min:n,max:n}),a=[e,t],o=qt(qt({},i),{},{bounds:a});return{value:I$(kS(r),o,r),settings:o}};var Lke=Object.freeze({__proto__:null,schema:Pke,format:kS,sanitize:I$,normalize:Ike});const Fke=["value","bounds","onDrag"],Bke=["bounds"],zke=Ht("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Uke(r){let{value:e,bounds:[t,n],onDrag:i}=r,a=Ur(r,Fke);const o=j.useRef(null),s=j.useRef(null),l=j.useRef(null),u=j.useRef(0),c=uu("sizes","scrubberWidth"),h=oy(({event:p,first:v,xy:[y],movement:[g],memo:w={}})=>{if(v){const{width:m,left:x}=o.current.getBoundingClientRect();u.current=m-parseFloat(c);const S=(p==null?void 0:p.target)===s.current||(p==null?void 0:p.target)===l.current;w.pos=ES((y-x)/m,t,n);const E=Math.abs(w.pos-e.min)-Math.abs(w.pos-e.max);w.key=E<0||E===0&&w.pos<=e.min?"min":"max",S&&(w.pos=e[w.key])}const b=w.pos+ES(g/u.current,0,n-t);return i({[w.key]:uTe(b,a[w.key])}),w}),d=`calc(${_S(e.min,t,n)} * (100% - ${c} - 8px) + 4px)`,f=`calc(${1-_S(e.max,t,n)} * (100% - ${c} - 8px) + 4px)`;return Ae.createElement(t$,_n({ref:o},h()),Ae.createElement(e$,null,Ae.createElement(r$,{style:{left:d,right:f}})),Ae.createElement(KT,{position:"left",ref:s,style:{left:d}}),Ae.createElement(KT,{position:"right",ref:l,style:{right:f}}))}function jke(){const{label:r,displayValue:e,onUpdate:t,settings:n}=aa(),i=Ur(n,Bke);return Ae.createElement(Ae.Fragment,null,Ae.createElement(os,{input:!0},Ae.createElement(Ps,null,r),Ae.createElement(zke,null,Ae.createElement(Uke,_n({value:e},n,{onDrag:t})),Ae.createElement(jN,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var Hke=qt({component:jke},Lke);const Vke=()=>{const r=new Map;return{on:(e,t)=>{let n=r.get(e);n===void 0&&(n=new Set,r.set(e,n)),n.add(t)},off:(e,t)=>{const n=r.get(e);n!==void 0&&(n.delete(t),n.size===0&&r.delete(e))},emit:(e,...t)=>{const n=r.get(e);if(n!==void 0)for(const i of n)i(...t)}}},qke=["type","value"],Wke=["onChange","transient","onEditStart","onEditEnd"],L$=function(){const r=$N(f3e(()=>({data:{}}))),e=Vke();this.storeId=bAe(),this.useStore=r;const t={},n=new Set;this.getVisiblePaths=()=>{const a=this.getData(),o=Object.keys(a),s=[];Object.entries(t).forEach(([u,c])=>{c.render&&o.some(h=>h.indexOf(u)===0)&&!c.render(this.get)&&s.push(u+".")});const l=[];return n.forEach(u=>{u in a&&a[u].__refCount>0&&s.every(c=>u.indexOf(c)===-1)&&(!a[u].render||a[u].render(this.get))&&l.push(u)}),l},this.setOrderedPaths=a=>{a.forEach(o=>n.add(o))},this.orderPaths=a=>(this.setOrderedPaths(a),a),this.disposePaths=a=>{r.setState(o=>{const s=o.data;return a.forEach(l=>{if(l in s){const u=s[l];u.__refCount--,u.__refCount===0&&u.type in Xo&&delete s[l]}}),{data:s}})},this.dispose=()=>{r.setState(()=>({data:{}}))},this.getFolderSettings=a=>t[a]||{},this.getData=()=>r.getState().data,this.addData=(a,o)=>{r.setState(s=>{const l=s.data;return Object.entries(a).forEach(([u,c])=>{let h=l[u];if(h){const{type:d,value:f}=c,p=Ur(c,qke);d!==h.type?Kl(vn.INPUT_TYPE_OVERRIDE,d):((h.__refCount===0||o)&&Object.assign(h,p),h.__refCount++)}else l[u]=qt(qt({},c),{},{__refCount:1})}),{data:l}})},this.setValueAtPath=(a,o,s)=>{r.setState(l=>{const u=l.data;return zz(u[a],o,a,this,s),{data:u}})},this.setSettingsAtPath=(a,o)=>{r.setState(s=>{const l=s.data;return l[a].settings=qt(qt({},l[a].settings),o),{data:l}})},this.disableInputAtPath=(a,o)=>{r.setState(s=>{const l=s.data;return l[a].disabled=o,{data:l}})},this.set=(a,o)=>{r.setState(s=>{const l=s.data;return Object.entries(a).forEach(([u,c])=>{try{zz(l[u],c,void 0,void 0,o)}catch{}}),{data:l}})},this.getInput=a=>{try{return this.getData()[a]}catch{Kl(vn.PATH_DOESNT_EXIST,a)}},this.get=a=>{var o;return(o=this.getInput(a))===null||o===void 0?void 0:o.value},this.emitOnEditStart=a=>{e.emit(`onEditStart:${a}`,this.get(a),a,qt(qt({},this.getInput(a)),{},{get:this.get}))},this.emitOnEditEnd=a=>{e.emit(`onEditEnd:${a}`,this.get(a),a,qt(qt({},this.getInput(a)),{},{get:this.get}))},this.subscribeToEditStart=(a,o)=>{const s=`onEditStart:${a}`;return e.on(s,o),()=>e.off(s,o)},this.subscribeToEditEnd=(a,o)=>{const s=`onEditEnd:${a}`;return e.on(s,o),()=>e.off(s,o)};const i=(a,o,s)=>{const l={};return Object.entries(a).forEach(([u,c])=>{if(u==="")return Kl(vn.EMPTY_KEY);let h=YN(o,u);if(c.type===Xo.FOLDER){const d=i(c.schema,h,s);Object.assign(l,d),h in t||(t[h]=c.settings)}else if(u in s)Kl(vn.DUPLICATE_KEYS,u,h,s[u].path);else{const d=AAe(c,u,h,l);if(d){const{type:f,options:p,input:v}=d,{onChange:y,transient:g,onEditStart:w,onEditEnd:b}=p,m=Ur(p,Wke);l[h]=qt(qt(qt({type:f},m),v),{},{fromPanel:!0}),s[u]={path:h,onChange:y,transient:g,onEditStart:w,onEditEnd:b}}else Kl(vn.UNKNOWN_INPUT,h,c)}}),l};this.getDataFromSchema=a=>{const o={};return[i(a,"",o),o]}},F$=new L$;function QE(){return j.useMemo(()=>new L$,[])}const Gke={collapsed:!1};function $ke(r,e){return{type:Xo.FOLDER,schema:r,settings:qt(qt({},Gke),e)}}const Xke={disabled:!1};function Oc(r,e){return{type:Xo.BUTTON,onClick:r,settings:qt(qt({},Xke),e)}}const v6=r=>"__levaInput"in r,Yke=(r,e)=>{const t={},n=e?e.toLowerCase():null;return r.forEach(i=>{const[a,o]=Y3e(i);(!n||a.toLowerCase().indexOf(n)>-1)&&X3e(t,o,{[a]:{__levaInput:!0,path:i}})}),t},Jke=["type","label","path","valueKey","value","settings","setValue","disabled"];function Zke(r){let{type:e,label:t,path:n,valueKey:i,value:a,settings:o,setValue:s,disabled:l}=r,u=Ur(r,Jke);const{displayValue:c,onChange:h,onUpdate:d}=KG({type:e,value:a,settings:o,setValue:s}),f=Sd[e].component;return f?Ae.createElement(HG.Provider,{value:qt({key:i,path:n,id:""+n,label:t,displayValue:c,value:a,onChange:h,onUpdate:d,settings:o,setValue:s,disabled:l},u)},Ae.createElement($Ae,{disabled:l},Ae.createElement(f,null))):(Kl(vn.NO_COMPONENT_FOR_TYPE,e,n),null)}const Kke=Ht("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Qke({onClick:r,settings:e,label:t}){const n=Dm();return Ae.createElement(os,null,Ae.createElement(Kke,{disabled:e.disabled,onClick:()=>r(n.get)},t))}const eNe=Ht("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),tNe=Ht("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),rNe=({label:r,opts:e})=>{let t=typeof r=="string"&&r.trim()===""?null:r,n=e;return typeof e.opts=="object"&&(n.label!==void 0&&(t=e.label),n=e.opts),{label:t,opts:n}};function nNe(r){const{label:e,opts:t}=rNe(r),n=Dm();return Ae.createElement(os,{input:!!e},e&&Ae.createElement(Ps,null,e),Ae.createElement(eNe,null,Object.entries(t).map(([i,a])=>Ae.createElement(tNe,{key:i,onClick:()=>a(n.get)},i))))}const iNe=Ht("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),B$=100;function aNe(r,e){r.push(e),r.length>B$&&r.shift()}const oNe=j.forwardRef(function({initialValue:r},e){const t=uu("colors","highlight3"),n=uu("colors","elevation2"),i=uu("colors","highlight1"),[a,o]=j.useMemo(()=>[ga(i).alpha(.4).toRgbString(),ga(i).alpha(.1).toRgbString()],[i]),s=j.useRef([r]),l=j.useRef(r),u=j.useRef(r),c=j.useRef(),h=j.useCallback((p,v)=>{if(!p)return;const{width:y,height:g}=p,w=new Path2D,b=y/B$,m=g*.05;for(let E=0;E<s.current.length;E++){const A=_S(s.current[E],l.current,u.current),T=b*E,C=g-A*(g-m*2)-m;w.lineTo(T,C)}v.clearRect(0,0,y,g);const x=new Path2D(w);x.lineTo(b*(s.current.length+1),g),x.lineTo(0,g),x.lineTo(0,0);const S=v.createLinearGradient(0,0,0,g);S.addColorStop(0,a),S.addColorStop(1,o),v.fillStyle=S,v.fill(x),v.strokeStyle=n,v.lineJoin="round",v.lineWidth=14,v.stroke(w),v.strokeStyle=t,v.lineWidth=2,v.stroke(w)},[t,n,a,o]),[d,f]=rTe(h);return j.useImperativeHandle(e,()=>({frame:p=>{(l.current===void 0||p<l.current)&&(l.current=p),(u.current===void 0||p>u.current)&&(u.current=p),aNe(s.current,p),c.current=requestAnimationFrame(()=>h(d.current,f.current))}}),[d,f,h]),j.useEffect(()=>()=>cancelAnimationFrame(c.current),[]),Ae.createElement(iNe,{ref:d})}),y6=r=>Number.isFinite(r)?r.toPrecision(2):r.toString(),sNe=j.forwardRef(function({initialValue:r},e){const[t,n]=j.useState(y6(r));return j.useImperativeHandle(e,()=>({frame:i=>n(y6(i))}),[]),Ae.createElement("div",null,t)});function b6(r){return typeof r=="function"?r():r.current}function lNe({label:r,objectOrFn:e,settings:t}){const n=j.useRef(),i=j.useRef(b6(e));return j.useEffect(()=>{const a=window.setInterval(()=>{var o;document.hidden||(o=n.current)===null||o===void 0||o.frame(b6(e))},t.interval);return()=>window.clearInterval(a)},[e,t.interval]),Ae.createElement(os,{input:!0},Ae.createElement(Ps,{align:"top"},r),t.graph?Ae.createElement(oNe,{ref:n,initialValue:i.current}):Ae.createElement(sNe,{ref:n,initialValue:i.current}))}const uNe=["type","label","key"],cNe={[Xo.BUTTON]:Qke,[Xo.BUTTON_GROUP]:nNe,[Xo.MONITOR]:lNe},hNe=Ae.memo(({path:r})=>{const[e,{set:t,setSettings:n,disable:i,storeId:a,emitOnEditStart:o,emitOnEditEnd:s}]=iTe(r);if(!e)return null;const{type:l,label:u,key:c}=e,h=Ur(e,uNe);if(l in Xo){const d=cNe[l];return Ae.createElement(d,_n({label:u,path:r},h))}return l in Sd?Ae.createElement(Zke,_n({key:a+r,type:l,label:u,storeId:a,path:r,valueKey:c,setValue:t,setSettings:n,disable:i,emitOnEditStart:o,emitOnEditEnd:s},h)):(hAe(vn.UNSUPPORTED_INPUT,l,r),null)});function dNe({toggle:r,toggled:e,name:t}){return Ae.createElement(qAe,{onClick:()=>r()},Ae.createElement(UN,{toggled:e}),Ae.createElement("div",null,t))}const fNe=({name:r,path:e,tree:t})=>{const n=Dm(),i=YN(e,r),{collapsed:a,color:o}=n.getFolderSettings(i),[s,l]=j.useState(!a),u=j.useRef(null),c=uu("colors","folderWidgetColor"),h=uu("colors","folderTextColor");return j.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",o||c),u.current.style.setProperty("--leva-colors-folderTextColor",o||h)},[o,c,h]),Ae.createElement(CS,{ref:u},Ae.createElement(dNe,{name:r,toggled:s,toggle:()=>l(d=>!d)}),Ae.createElement(z$,{parent:i,tree:t,toggled:s}))},z$=Ae.memo(({isRoot:r=!1,fill:e=!1,flat:t=!1,parent:n,tree:i,toggled:a})=>{const{wrapperRef:o,contentRef:s}=K3e(a),l=Dm(),u=([h,d])=>{var f;return(v6(d)?(f=l.getInput(d.path))===null||f===void 0?void 0:f.order:l.getFolderSettings(YN(n,h)).order)||0},c=Object.entries(i).sort((h,d)=>u(h)-u(d));return Ae.createElement(JT,{ref:o,isRoot:r,fill:e,flat:t},Ae.createElement(XG,{ref:s,isRoot:r,toggled:a},c.map(([h,d])=>v6(d)?Ae.createElement(hNe,{key:d.path,valueKey:d.valueKey,path:d.path}):Ae.createElement(fNe,{key:h,name:h,path:n,tree:d}))))}),pNe=Ht("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${JG}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),U$=40,NS=Ht("i",{$flexCenter:"",width:U$,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),mNe=Ht("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),gNe=Ht("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${NS}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),vNe=Ht("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),yNe=Ht("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:U$}}}}),bNe=Ae.forwardRef(({setFilter:r,toggle:e},t)=>{const[n,i]=j.useState(""),a=j.useMemo(()=>LG(r,250),[r]),o=()=>{r(""),i("")},s=l=>{const u=l.currentTarget.value;e(!0),i(u)};return j.useEffect(()=>{a(n)},[n,a]),Ae.createElement(Ae.Fragment,null,Ae.createElement(vNe,{ref:t,value:n,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:s}),Ae.createElement(NS,{onClick:()=>o(),style:{visibility:n?"visible":"hidden"}},Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},Ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function xNe({setFilter:r,onDrag:e,onDragStart:t,onDragEnd:n,toggle:i,toggled:a,title:o,drag:s,filterEnabled:l,from:u}){const[c,h]=j.useState(!1),d=j.useRef(null);j.useEffect(()=>{var p,v;c?(p=d.current)===null||p===void 0||p.focus():(v=d.current)===null||v===void 0||v.blur()},[c]);const f=oy(({offset:[p,v],first:y,last:g})=>{e({x:p,y:v}),y&&t({x:p,y:v}),g&&n({x:p,y:v})},{filterTaps:!0,from:({offset:[p,v]})=>[(u==null?void 0:u.x)||p,(u==null?void 0:u.y)||v]});return j.useEffect(()=>{const p=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&h(y=>!y)};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[]),Ae.createElement(Ae.Fragment,null,Ae.createElement(mNe,{mode:s?"drag":void 0},Ae.createElement(NS,{active:!a,onClick:()=>i()},Ae.createElement(UN,{toggled:a,width:12,height:8})),Ae.createElement(yNe,_n({},s?f():{},{drag:s,filterEnabled:l}),o===void 0&&s?Ae.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},Ae.createElement("circle",{cx:"2",cy:"2",r:"2"}),Ae.createElement("circle",{cx:"14",cy:"2",r:"2"}),Ae.createElement("circle",{cx:"26",cy:"2",r:"2"}),Ae.createElement("circle",{cx:"2",cy:"12",r:"2"}),Ae.createElement("circle",{cx:"14",cy:"12",r:"2"}),Ae.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&Ae.createElement(NS,{active:c,onClick:()=>h(p=>!p)},Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},Ae.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),Ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),Ae.createElement(gNe,{toggled:c},Ae.createElement(bNe,{ref:d,setFilter:r,toggle:i})))}const wNe=["store","hidden","theme","collapsed"];function j$(r){let{store:e,hidden:t=!1,theme:n,collapsed:i=!1}=r,a=Ur(r,wNe);const o=k$(()=>BAe(n),[n]),[s,l]=j.useState(!i),u=typeof i=="object"?!i.collapsed:s,c=j.useMemo(()=>typeof i=="object"?h=>{typeof h=="function"?i.onChange(!h(!i.collapsed)):i.onChange(!h)}:l,[i]);return!e||t?null:Ae.createElement(FN.Provider,{value:o},Ae.createElement(SNe,_n({store:e},a,{toggled:u,setToggle:c,rootClass:o.className})))}const SNe=Ae.memo(({store:r,rootClass:e,fill:t=!1,flat:n=!1,neverHide:i=!1,oneLineLabels:a=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:s=!1,toggled:l,setToggle:u})=>{var c,h;const d=Q3e(r),[f,p]=j.useState(""),v=j.useMemo(()=>Yke(d,f),[d,f]),[y,g]=QG(),w=i||d.length>0,b=typeof o=="object"&&o.title||void 0,m=typeof o=="object"&&(c=o.drag)!==null&&c!==void 0?c:!0,x=typeof o=="object"&&(h=o.filter)!==null&&h!==void 0?h:!0,S=typeof o=="object"&&o.position||void 0,E=typeof o=="object"&&o.onDrag||void 0,A=typeof o=="object"&&o.onDragStart||void 0,T=typeof o=="object"&&o.onDragEnd||void 0;return Ae.useEffect(()=>{g({x:S==null?void 0:S.x,y:S==null?void 0:S.y})},[S,g]),FAe(),Ae.createElement(qG.Provider,{value:{hideCopyButton:s}},Ae.createElement(pNe,{ref:y,className:e,fill:t,flat:n,oneLineLabels:a,hideTitleBar:!o,style:{display:w?"block":"none"}},o&&Ae.createElement(xNe,{onDrag:C=>{g(C),E==null||E(C)},onDragStart:C=>A==null?void 0:A(C),onDragEnd:C=>T==null?void 0:T(C),setFilter:p,toggle:C=>u(D=>C??!D),toggled:l,title:b,drag:m,filterEnabled:x,from:S}),w&&Ae.createElement(VG.Provider,{value:r},Ae.createElement(z$,{isRoot:!0,fill:t,flat:n,tree:v,toggled:l}))))}),MNe=["isRoot"];let OS=!1,Yh=null;function _Ne(r){let{isRoot:e=!1}=r,t=Ur(r,MNe);return j.useEffect(()=>(OS=!0,!e&&Yh&&(Yh.remove(),Yh=null),()=>{e||(OS=!1)}),[e]),Ae.createElement(j$,_n({store:F$},t))}function ENe(r){j.useEffect(()=>{r&&!OS&&(Yh||(Yh=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Yh),DAe(Ae.createElement(_Ne,{isRoot:!0}),Yh))),OS=!0)},[r])}const CNe=["store"];function eC(r){let{store:e}=r,t=Ur(r,CNe);const n=Dm(),i=e===void 0?n:e;return Ae.createElement(j$,_n({store:i},t))}function ANe(r,e,t,n,i){let a,o,s,l,u;return typeof r=="string"?(o=r,a=e,Array.isArray(t)?u=t:t&&("store"in t?(l=t,u=n):(s=t,Array.isArray(n)?u=n:(l=n,u=i)))):(a=r,Array.isArray(e)?u=e:(l=e,u=t)),{schema:a,folderName:o,folderSettings:s,hookSettings:l,deps:u||[]}}function fb(r,e,t,n,i){const{folderName:a,schema:o,folderSettings:s,hookSettings:l,deps:u}=ANe(r,e,t,n,i),c=typeof o=="function",h=j.useRef(!1),d=j.useRef(!0),f=k$(()=>{h.current=!0;const D=typeof o=="function"?o():o;return a?{[a]:$ke(D,s)}:D},u),p=!(l!=null&&l.store);ENe(p);const[v]=j.useState(()=>(l==null?void 0:l.store)||F$),[y,g]=j.useMemo(()=>v.getDataFromSchema(f),[v,f]),[w,b,m,x,S]=j.useMemo(()=>{const D=[],O=[],U={},L={},F={};return Object.values(g).forEach(({path:k,onChange:R,onEditStart:z,onEditEnd:B,transient:X})=>{D.push(k),R?(U[k]=R,X||O.push(k)):O.push(k),z&&(L[k]=z),B&&(F[k]=B)}),[D,O,U,L,F]},[g]),E=j.useMemo(()=>v.orderPaths(w),[w,v]),A=eke(v,b,y),T=j.useCallback(D=>{const O=Object.entries(D).reduce((U,[L,F])=>Object.assign(U,{[g[L].path]:F}),{});v.set(O,!1)},[v,g]),C=j.useCallback(D=>v.get(g[D].path),[v,g]);return j.useEffect(()=>{const D=!d.current&&h.current;return v.addData(y,D),d.current=!1,h.current=!1,()=>v.disposePaths(E)},[v,E,y]),j.useEffect(()=>{const D=[];return Object.entries(m).forEach(([O,U])=>{U(v.get(O),O,qt({initial:!0,get:v.get},v.getInput(O)));const L=v.useStore.subscribe(F=>{const k=F.data[O];return[k.disabled?void 0:k.value,k]},([F,k])=>U(F,O,qt({initial:!1,get:v.get},k)),{equalityFn:qM});D.push(L)}),()=>D.forEach(O=>O())},[v,m]),j.useEffect(()=>{const D=[];return Object.entries(x).forEach(([O,U])=>D.push(v.subscribeToEditStart(O,U))),Object.entries(S).forEach(([O,U])=>D.push(v.subscribeToEditEnd(O,U))),()=>D.forEach(O=>O())},[x,S,v]),c?[A,T,C]:A}Ru(Ts.SELECT,wTe);Ru(Ts.IMAGE,Rke);Ru(Ts.NUMBER,hTe);Ru(Ts.COLOR,hke);Ru(Ts.STRING,kTe);Ru(Ts.BOOLEAN,FTe);Ru(Ts.INTERVAL,Hke);Ru(Ts.VECTOR3D,fke);Ru(Ts.VECTOR2D,wke);let TNe=class extends Hr{constructor(r){super(r),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("output","geometry",this,"geometry",""),this.name="Add Tag",this.atomType="Tag",this.height,this.description="Tags geometry so that it can be extracted later.",this.tags=[""],this.cutTag=!1,this.setValues(r)}draw(){super.draw("rect");let r=I.widthToPixels(this.radius);this.height=r,I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${r}px Work Sans Bold`,I.c.fillText("#",I.widthToPixels(this.x-this.radius/3),I.heightToPixels(this.y)+this.height/3),I.c.fill(),I.c.closePath()}checkHasTag(){return this.cutTag}addTagsToAvailableTags(){let r=Array.from(new Set(I.topLevelMolecule.projectAvailableTags.concat(this.tags)));I.topLevelMolecule.projectAvailableTags=r}createLevaInputs(){let r={};return r[this.uniqueID+"cut_string"]={value:this.cutTag,label:"Cut List Tag",onChange:e=>{this.cutTag!==e&&(e===!0?(this.cutTag=!0,this.tags.push("cutLayout"),this.name=this.tags.toString(),this.updateValue()):(this.cutTag=!1,this.tags=this.tags.filter(t=>t!=="cutLayout"),this.name=this.tags.toString(),this.updateValue()))}},r[this.uniqueID+"custom_string"]={value:this.tags.filter(e=>e!=="cutLayout")[0],label:"Add Tag",disabled:!1,onChange:e=>{this.tags=this.cutTag?["cutLayout"]:[],this.tags.push(e),this.name=this.tags.toString(),this.updateValue()}},r}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var r=this.findIOValue("geometry"),e=this.tags;this.addTagsToAvailableTags(),I.cad.tag(this.uniqueID,r,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}sendToRender(){console.log("tag has nothing to render")}serialize(){var r=super.serialize();return r.tags=this.tags,r.cutTag=this.cutTag,r}};class DNe extends Hr{constructor(e){super(e),this.addIO("input","number of sides",this,"number",6),this.addIO("input","diameter",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.name="RegularPolygon",this.atomType="RegularPolygon",this.description="Creates a new regular polygon. Corners are on the diameter.",this.setValues(e)}draw(){super.draw();let e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),n=I.widthToPixels(this.radius);I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-n/3,t+n/1.7),I.c.lineTo(e+n/3,t+n/1.7),I.c.lineTo(e+n/1.5,t),I.c.lineTo(e+n/2.5,t-n/1.7),I.c.lineTo(e-n/2.5,t-n/1.7),I.c.lineTo(e-n/1.5,t),I.c.lineTo(e-n/3,t+n/1.7),I.c.stroke(),I.c.closePath()}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}updateValue(){super.updateValue();var e=this.findIOValue("number of sides"),t=this.findIOValue("diameter");I.cad.regularPolygon(this.uniqueID,t/2,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}class kNe extends Hr{constructor(e){super(e),this.name="Extrude",this.atomType="Extrude",this.description="Extrudes a 2D shape. Input can be negitive. ",this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","height",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.rect(I.widthToPixels(this.x-this.radius/2),I.heightToPixels(this.y+this.radius),I.widthToPixels(this.radius),I.widthToPixels(this.radius/3)),I.c.fill(),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.rect(I.widthToPixels(this.x-this.radius/2),I.heightToPixels(this.y-this.radius*2),I.widthToPixels(this.radius),I.widthToPixels(this.radius)),I.c.stroke(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(n=>n.ready)){var e=this.findIOValue("geometry"),t=this.findIOValue("height");I.cad.extrude(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class NNe extends Hr{constructor(e){super(e),this.addIO("input","geometry1",this,"geometry",""),this.addIO("input","geometry2",this,"geometry",""),this.addIO("output","geometry",this,"geometry",""),this.name="Intersection",this.atomType="Intersection",this.description="The space shared by two shapes.",this.setValues(e)}draw(){super.draw();const e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),n=I.widthToPixels(this.radius);I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-n/2,t+n/2),I.c.lineTo(e+n/2,t+n/2),I.c.lineTo(e+n/2,t),I.c.lineTo(e+n/4,t),I.c.lineTo(e+n/4,t-n/2),I.c.lineTo(e-n/4,t-n/2),I.c.lineTo(e-n/4,t),I.c.lineTo(e-n/2,t),I.c.lineTo(e-n/2,t+n/2),I.c.fill(),I.c.lineWidth=1,I.c.lineJoin="round",I.c.stroke(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;const e=this.findIOValue("geometry1"),t=this.findIOValue("geometry2");I.cad.intersect(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class ONe extends Hr{constructor(e){super(e),this.addIO("input","geometry2",this,"geometry",""),this.addIO("input","geometry1",this,"geometry",""),this.addIO("output","geometry",this,"geometry",""),this.name="Difference",this.atomType="Difference",this.description="Subtracts shape two from shape one.",this.setValues(e)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.arc(I.widthToPixels(this.x),I.heightToPixels(this.y),I.widthToPixels(this.radius/3),0,Math.PI*2,!1),I.c.fill(),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.rect(I.widthToPixels(this.x-this.radius/2),I.heightToPixels(this.y-this.radius*2),I.widthToPixels(this.radius),I.widthToPixels(this.radius)),I.c.stroke(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;const e=this.findIOValue("geometry1"),t=this.findIOValue("geometry2");I.cad.difference(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class RNe extends Hr{constructor(e){super(e),this.type="constant",this.name="Constant",this.atomType="Constant",this.description="Defines a mathematical constant.",this.height=16,this.evolve=!1,this.min=0,this.max=20,this.value=10,this.setValues(e),this.addIO("output","number",this,"number",10),this.decreaseToProcessCountByOne()}draw(){super.draw("rect")}createLevaInputs(){let e={};return e["constant number"]={value:this.name,label:"Constant Name",disabled:!1,onChange:t=>{this.name=t}},e[this.uniqueID+this.name]={value:this.value,label:this.name,disabled:!1,onChange:t=>{this.value!==t&&(this.output.setValue(t),this.updateValue())}},e}updateValue(){this.value=this.output.getValue(),this.output.ready=!0,this.processing=!1}sendToRender(){I.writeToDisplay(this.uniqueID)}}class PNe extends Hr{constructor(e){super(e),this.addIO("output","result",this,"number",0),this.name="Equation",this.atomType="Equation",this.value=0,this.description="Defines a mathematical equation. Edit the output field to add or remove inputs.",this.height,this.currentEquation="x + y",this.setValues(e),this.addAndRemoveInputs(),this.setValues(e)}draw(){super.draw("rect");let e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),n=I.widthToPixels(this.radius);this.height=n,I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${n/1.5}px Work Sans Bold`,I.c.fillText("X + Y",e-n/1.2,t+this.height/3),I.c.fill(),I.c.closePath()}addAndRemoveInputs(){var e=/[a-zA-Z]/g;const t=this.currentEquation.match(e),n=()=>{this.inputs.forEach(a=>{t.includes(a.name)||(this.removeIO("input",a.name,this),n())})};n();for(var i in t)this.inputs.some(a=>a.Name===t[i])||this.addIO("input",t[i],this,"number",1)}evaluateEquation(){var e=this.currentEquation;this.name=this.currentEquation;var t=/[a-zA-Z]/g;const n=this.currentEquation.match(t);for(var i in n)for(var a=0;a<this.inputs.length;a++)this.inputs[a].name==n[i]&&(e=e.replace(this.inputs[a].name,this.findIOValue(this.inputs[a].name)));return I.limitedEvaluate(e)}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const n=()=>t.connectors.length>0;e.equation={value:this.currentEquation,label:"Current Equation",disabled:!1,onChange:i=>{this.currentEquation!==i&&this.setEquation(i)}},e.result={value:this.output.value,label:"Result",disabled:!0},t.valueType!=="geometry"&&(e[t.name]={value:t.value,disabled:n(),onChange:i=>{t.setValue(i)}})}),e}updateValue(){try{this.addAndRemoveInputs(),this.inputs.every(e=>e.ready)&&(this.decreaseToProcessCountByOne(),this.value=this.evaluateEquation(),this.output.setValue(this.value),this.output.ready=!0)}catch(e){console.warn(e),this.setAlert(e)}}serialize(){var e=super.serialize();return e.currentEquation=this.currentEquation,e}setEquation(e){this.currentEquation=e.trim(),this.updateValue()}sendToRender(){console.log("equation")}}class INe extends Hr{constructor(e){super(e),this.atomType="Extract Tag",this.type="extractTag",this.height,this.name="Extract Tag",this.description="Extracts geometry containing the specified tag.",this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.tagIndex=0,this.tag,this.setValues(e)}draw(){super.draw("rect");let e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),n=I.widthToPixels(this.radius);this.height=n,I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${n}px Work Sans Bold`,I.c.fillText("↑#↑",e-n/1.2,t+this.height/3),I.c.fill(),I.c.closePath()}createLevaInputs(){let e={};const t=I.topLevelMolecule.projectAvailableTags;return e[this.uniqueID+"tag_ops"]={value:t[this.tagIndex],options:t,label:"Extract Tag",onChange:n=>{this.tagIndex=t.indexOf(n),this.tag!=t[this.tagIndex]&&(this.tag=t[this.tagIndex],this.updateValue())}},e}updateValue(){if(super.updateValue(),this.inputs.every(n=>n.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.tag;I.cad.extractTag(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}serialize(){var e=super.serialize();return e.tag=this.tag,e.tagIndex=this.tagIndex,e}}class H${constructor(){this.BOMitemName="name",this.numberNeeded=1,this.costUSD=0,this.source="www.example.com",this.height}}class uy extends Hr{constructor(e){super(e),this.nodesOnTheScreen=[],this.inputs=[],this.name="Molecule",this.description="Molecules provide an organizational structure to contain atoms. Double click on a molecule to enter it. Use the up arrow in the upper right hand corner of the screen to go up one level.",this.atomType="Molecule",this.centerColor="#949294",this.topLevel=!1,this.processing=!1,this.totalAtomCount=1,this.toProcess=0,this.awaitingPropagationFlag=!1,this.units={MM:1,Inches:20},this.unitsKey,this.BOMlist,this.compiledBom={},this.projectAvailableTags=[],this.setValues(e),this.color}copyInputsFromParent(){this.parent&&this.parent.nodesOnTheScreen.forEach(e=>{e.atomType=="Input"&&this.placeAtom({parentMolecule:this,y:e.y,parent:this,name:e.name,atomType:"Input",uniqueID:I.generateUniqueID()},null,I.availableTypes,!0)})}draw(){const e=1-this.toProcess/this.totalAtomCount;this.toProcess>1?this.processing=!0:this.processing=!1,super.draw(),I.c.beginPath(),I.c.fillStyle=this.centerColor,I.c.moveTo(I.widthToPixels(this.x),I.heightToPixels(this.y)),I.c.arc(I.widthToPixels(this.x),I.heightToPixels(this.y),I.widthToPixels(this.radius)/2,0,e*Math.PI*2,!1),I.c.closePath(),I.c.fill()}createLevaInputs(){let e={};return e["molecule name"+this.uniqueID]={value:this.name,label:"Molecule Name",disabled:!1,onChange:t=>{this.name=t}},this.inputs&&this.inputs.map(t=>{const n=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:n(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),I.currentRepo.fork&&(e["Reload from Github"]=Oc(()=>{this.reloadFork()})),e}async reloadFork(){const e=new fu;var t=I.currentRepo.owner.login,n=I.currentRepo.name;e.request("GET /repos/{owner}/{repo}",{owner:t,repo:n}).then(i=>{e.rest.repos.getContent({owner:i.data.source.owner.login,repo:i.data.source.name,path:"project.abundance"}).then(a=>{I.topLevelMolecule.nodesOnTheScreen.forEach(s=>{s.deleteNode()});let o=JSON.parse(atob(a.data.content));o.filetypeVersion==1&&I.topLevelMolecule.deserialize(o),I.currentMolecule.selected=!0})})}async extractBomTags(){return await I.cad.extractBomList(this.output.value)}clickUp(e,t){super.clickUp(e,t),I.currentMolecule.nodesOnTheScreen.forEach(n=>{n.isMoving=!1})}doubleClick(e,t){e=I.pixelsToWidth(e),t=I.pixelsToHeight(t);var n=!1,i=I.distBetweenPoints(e,this.x,t,this.y);return i<this.radius*2&&(I.currentMolecule=this,this.selected=!1,n=!0),n}copy(){this.nodesOnTheScreen.forEach(e=>{e.selected&&I.atomsSelected.push(e.serialize({x:.03,y:.03}))})}deselect(){this.selected=!1}updateValue(e){this.nodesOnTheScreen.forEach(t=>{t.atomType=="Input"&&t.name==e&&t.updateValue()})}compileBom(){return this.extractBomTags().then(e=>{let t=[],n=[];if(e)return e.forEach(function(i){t[i.BOMitemName]||(t[i.BOMitemName]=new H$,t[i.BOMitemName].numberNeeded=0,t[i.BOMitemName].BOMitemName=i.BOMitemName,t[i.BOMitemName].source=i.source,n.push(t[i.BOMitemName])),t[i.BOMitemName].numberNeeded+=i.numberNeeded,t[i.BOMitemName].costUSD+=i.costUSD}),n=n.sort((i,a)=>i.source>a.source?1:a.source>i.source?-1:0),n})}createLevaBom(){let e={};if(this.compiledBom&&this.compiledBom.length>0)return this.compiledBom.map(t=>{e[t.BOMitemName]={value:t.costUSD+" USD",label:t.BOMitemName+"(x"+t.numberNeeded+")",disabled:!0}}),e["Download List of Materials"]=Oc(()=>console.log(result)),e}recomputeMolecule(e){console.log("recompute molecule in molecule"+this.name);try{I.cad.molecule(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing(),this.compileBom().then(t=>{this.compiledBom=t}),this.selected&&this.sendToRender()})}catch(t){this.setAlert(t)}}waitOnComingInformation(e){this.nodesOnTheScreen.forEach(t=>{t.name==e&&t.waitOnComingInformation()})}propagate(){try{this.updateValue()}catch(e){this.setAlert(e)}}beginPropagation(e=!1){this.nodesOnTheScreen.forEach(t=>{t.beginPropagation(e)}),this.inputs.forEach(t=>{t.beginPropagation()})}census(){return this.totalAtomCount=0,this.toProcess=0,this.nodesOnTheScreen.forEach(e=>{const t=e.census();this.totalAtomCount=this.totalAtomCount+t[0],this.toProcess=this.toProcess+t[1]}),[this.totalAtomCount,this.toProcess]}changeUnits(e){this.unitsIndex=e}goToParentMolecule(){I.currentMolecule.topLevel||(I.currentMolecule.nodesOnTheScreen.forEach(e=>{e.selected=!1}),I.currentMolecule.awaitingPropagationFlag==!0&&(I.currentMolecule.propagate(),I.currentMolecule.awaitingPropagationFlag=!1),I.currentMolecule=I.currentMolecule.parent)}async generateProjectThumbnail(){return I.cad.generateThumbnail(this.uniqueID)}async requestReadme(){var e=this.nodesOnTheScreen;e=e.filter(i=>i.atomType=="Molecule"||i.atomType=="Readme").sort(function(i,a){return I.distBetweenPoints(i.x,0,i.y,0)-I.distBetweenPoints(a.x,0,a.y,0)});const t=e.map(i=>i.requestReadme());let n=[];return await Promise.all(t).then(i=>{i.forEach(a=>{let o;a instanceof Array?a.forEach(s=>{o=s.readMeText,n.push({uniqueID:s.uniqueID,readMeText:o,svg:s.svg})}):(o=a.readMeText,a.svg&&(o=o.concat(` 

![readme](/readme`+a.uniqueID+`.svg)

`)),n.push({uniqueID:a.uniqueID,readMeText:o,svg:a.svg}))})}),n}serialize(e={x:0,y:0}){var t=[],n=[];this.nodesOnTheScreen.forEach(a=>{t.push(a.serialize()),a.output&&a.output.connectors.forEach(o=>{n.push(o.serialize())})});var i=super.serialize(e);return i.topLevel=this.topLevel,i.allAtoms=t,i.allConnectors=n,i.gitHubUniqueID=this.gitHubUniqueID,i.unitsKey=this.unitsKey,i.fileTypeVersion=1,i.compiledBom=this.compiledBom,i}deserialize(e,t={},n=!1){let i=[];return this.placeAtom({parentMolecule:this,x:.98,y:.5,parent:this,name:"Output",atomType:"Output",uniqueID:I.generateUniqueID()},!1),this.setValues(e),this.setValues(t),e.allAtoms&&e.allAtoms.forEach(a=>{const o=this.placeAtom(a,!1);i.push(o),this.setValues([])}),Promise.all(i).then(()=>{this.setValues([]),this.topLevel&&(I.totalAtomCount=I.numberOfAtomsToLoad,this.census(),this.beginPropagation(n)),e.allConnectors&&e.allConnectors.forEach(a=>{this.placeConnector(a)})})}async loadGithubMoleculeByID(e,t={},n={}){await new fu().request("GET /repositories/:id/contents/project.abundance",{id:e}).then(i=>{let a=JSON.parse(atob(i.data.content)),o=this.remapIDs(a);o.atomType="GitHubMolecule";let s={},l=I.generateUniqueID();t.ioValues!=null?s={uniqueID:l,x:this.x,y:this.y,gitHubUniqueID:e,topLevel:!1,ioValues:t.ioValues}:s={uniqueID:l,gitHubUniqueID:e,x:I.pixelsToWidth(I.lastClick[0]),y:I.pixelsToHeight(I.lastClick[1]),topLevel:!1},I.currentMolecule.placeAtom(o,!0,s).then(()=>{n.forEach(u=>{u.ap1ID==t.uniqueID&&(u.ap1ID=l,this.parent.placeConnector(u)),u.ap2ID==t.uniqueID&&(u.ap2ID=l,this.parent.placeConnector(u))})})})}remapIDs(e){let t={};if(e.allAtoms)return e.allAtoms.forEach(n=>{let i=n.uniqueID,a=I.generateUniqueID();t[i]=a,n.uniqueID=a}),e.allConnectors.forEach(n=>{n.ap1ID&&t[n.ap1ID]&&(n.ap1ID=t[n.ap1ID]),n.ap2ID&&t[n.ap2ID]&&(n.ap2ID=t[n.ap2ID]),n.ap2ID&&t[n.ap2ID]&&(n.ap2ID=t[n.ap2ID])}),e}deleteNode(e=!0,t=!0,n=!1){[...this.nodesOnTheScreen].forEach(i=>{i.deleteNode(e,t,n)}),super.deleteNode(e,t,n)}async placeAtom(e,t,n){try{I.numberOfAtomsToLoad=I.numberOfAtomsToLoad+1;let o=null;for(var i in I.availableTypes)if(I.availableTypes[i].atomType==e.atomType){e.parent=this;var a=new I.availableTypes[i].creator(e);(a.atomType=="Molecule"||a.atomType=="GitHubMolecule")&&(o=a.deserialize(e,n,!0),t&&a.beginPropagation()),a.atomType=="Input"&&typeof e.name<"u"?(a.name=e.name,a.draw()):a.atomType=="Input"&&(a.name=I.incrementVariableName(a.name,this)),a.atomType=="Output"&&this.nodesOnTheScreen.forEach(s=>{s.atomType=="Output"&&s.deleteOutputAtom(!1)}),this.nodesOnTheScreen.push(a),t&&(a.atomType=="Molecule"&&(a.copyInputsFromParent(),o!=null?o.then(()=>{a.beginPropagation()}):a.beginPropagation()),a.updateValue())}return o}catch(o){return console.warn("Unable to place: "+e),console.warn(o),Promise.resolve()}}placeConnector(e){var t=!1,n=!1;this.nodesOnTheScreen.forEach(i=>{i.uniqueID==e.ap1ID&&(t=i.output),i.uniqueID==e.ap2ID&&i.inputs.forEach(a=>{a.name==e.ap2Name&&(n=a)})}),t&&n?new YW({atomType:"Connector",attachmentPoint1:t,attachmentPoint2:n}):console.warn("Unable to place connector")}sendToRender(){I.writeToDisplay(this.uniqueID)}}class LNe extends Hr{constructor(e){super(e),this.name="Genetic Algorithm",this.atomType="Genetic Algorithm",this.description="Defines a new genetic algorithm which will simulate evolution to maximize the fitness function using the input population size and number of generations. Only constants which are upstream of this atom with evolve checked will be changed.",this.constantsToEvolve=[],this.population=[],this.individualIndex=0,this.generation=0,this.topFitness=0,this.evolutionInProcess=!1,this.addIO("input","fitness function",this,"number",0),this.addIO("input","population size",this,"number",50),this.addIO("input","number of generations",this,"number",10),this.setValues(e),this.updateValue()}draw(){super.draw();const e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),n=I.widthToPixels(this.radius);I.c.beginPath(),I.c.arc(I.widthToPixels(this.x-this.radius/5),I.heightToPixels(this.y),I.widthToPixels(this.radius/2),Math.PI*3.4,Math.PI*2.7,!1),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.arc(I.widthToPixels(this.x+this.radius/5),I.heightToPixels(this.y),I.widthToPixels(this.radius/2),Math.PI*3.6,Math.PI*2.3,!0),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-n/3,t),I.c.lineTo(e+n/3,t),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-n/3,t-n/5),I.c.lineTo(e+n/3,t-n/5),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(e-n/3,t+n/5),I.c.lineTo(e+n/3,t+n/5),I.c.stroke(),I.c.closePath()}updateValue(){this.decreaseToProcessCountByOne(),this.evolutionInProcess&&(this.updateSidebar(),this.processing=!0,this.population[this.individualIndex].fitness=this.findIOValue("fitness function"),this.individualIndex=this.individualIndex+1,this.individualIndex<this.findIOValue("population size")?this.beginEvaluatingIndividual():(this.generation=this.generation+1,this.generation<this.findIOValue("number of generations")?(this.breedAndCullPopulation(),this.individualIndex=0,this.beginEvaluatingIndividual()):(this.evolutionInProcess=!1,this.processing=!1,this.population=this.population.sort((e,t)=>parseFloat(t.fitness)-parseFloat(e.fitness)),this.individualIndex=0,this.generation=0,this.beginEvaluatingIndividual(),this.updateSidebar())))}updateSidebar(){if(this.evolutionInProcess){let o=document.querySelector(".sideBar");for(;o.firstChild;)o.removeChild(o.firstChild);var e=document.createElement("ul");o.appendChild(e),e.setAttribute("class","sidebar-list");var t=document.createElement("LI");e.appendChild(t);var n=document.createElement("div");t.appendChild(n);var i=document.createTextNode("Evolving...   Individual: "+this.individualIndex+",    Generation: "+this.generation+",    Best Fitness Value: "+this.topFitness);n.appendChild(i),n.setAttribute("class","sidebar-subitem label-item")}else{var a=super.updateSidebar();this.createButton(a,this,"Evolve",()=>{this.evolutionInProcess=!0,this.updateConstantsList(),this.initializePopulation(),this.beginEvaluatingIndividual()})}}beginEvaluatingIndividual(){const e=this.population[this.individualIndex];e.genome.forEach(t=>{t.constantAtom.output.waitOnComingInformation()}),e.genome.forEach(t=>{t.constantAtom.output.value=t.newValue}),e.genome.forEach(t=>{t.constantAtom.updateValue()})}getRandomValue(e,t){return Math.random()*(t-e)+e}initializePopulation(){this.population=[],this.individualIndex=0,this.generation=0,this.topFitness=0;for(var e=0;e<this.findIOValue("population size");){var t=[];this.constantsToEvolve.forEach(i=>{var a={newValue:this.getRandomValue(i.min,i.max),constantAtom:i};t.push(a)});var n={genome:t,fitness:null};this.population.push(n),e++}}breedTwo(e,t){const n=e.genome.length;for(var i={fitness:null,genome:[]},a=0;a<n;){var o={newValue:null,constantAtom:e.genome[a].constantAtom};const l=e.genome[a].constantAtom.max,u=e.genome[a].constantAtom.min,c=.1*(l-u)*(Math.random()-.5);var s=null;Math.random()>.5?s=e.genome[a].newValue+c:s=t.genome[a].newValue+c,o.newValue=Math.min(Math.max(s,u),l),i.genome.push(o),a++}return i}breedAndCullPopulation(){this.population=this.population.sort((a,o)=>parseFloat(o.fitness)-parseFloat(a.fitness)),this.topFitness=this.population[0].fitness;const e=Math.round(this.population.length/5),t=this.population.slice(0,e);for(var n=[],i=0;i<this.population.length-e;){const a=Math.round(Math.random()*(t.length-1)),o=Math.round(Math.random()*(t.length-1)),s=this.breedTwo(t[a],t[o]);n.push(s),i=i+1}this.population=t.concat(n)}updateConstantsList(){this.constantsToEvolve=[],this.inputs.forEach(e=>{e.connectors.forEach(t=>{t.walkBackForConstants(n=>{this.addToConstantsList(n)})})})}addToConstantsList(e){this.constantsToEvolve.push(e)}}let FNe=class extends Hr{constructor(r){super(r),this.name,this.description="Adds an input to the parent molecule. If the parent molecule is the top level of the project then the input will be available when the project is shared or imported into another project. Name is editable",this.value=10,this.atomType="Input",this.height,this.oldName=this.name,this.addIO("output","number or geometry",this,"number or geometry",10),typeof this.parent<"u"&&this.parent.addIO("input",this.name,this.parent,"number or geometry",10),this.setValues(r)}draw(){this.x=this.radius;let r=I.widthToPixels(this.x),e=I.heightToPixels(this.y),t=I.widthToPixels(this.radius);this.height=t*1.3,this.name!=this.oldName&&this.updateParentName(),this.processing?I.c.fillStyle="blue":this.selected?(I.c.fillStyle=this.selectedColor,I.c.strokeStyle=this.defaultColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(I.c.fillStyle=this.defaultColor,I.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),this.inputs.forEach(n=>{n.draw()}),this.output&&this.output.draw(),I.c.font="10px Work Sans",I.c.textAlign="start",I.c.fillText(this.name,r+t,e-t),I.c.beginPath(),I.c.moveTo(r-t,e+this.height/2),I.c.lineTo(r,e+this.height/2),I.c.lineTo(r+t,e),I.c.lineTo(r,e-this.height/2),I.c.lineTo(r-t,e-this.height/2),I.c.lineWidth=1,I.c.fill(),I.c.closePath(),I.c.stroke()}deleteNode(r=!0,e=!0,t=!1){typeof this.parent<"u"&&this.parent.removeIO("input",this.name,this.parent,t),super.deleteNode(r,e,t)}updateParentName(){this.parent.inputs.forEach(r=>{r.name==this.oldName&&(r.name=this.name)}),this.oldName=this.name}updateValue(){this.parent.inputs.forEach(r=>{r.name==this.name&&(this.decreaseToProcessCountByOne(),this.value=r.getValue(),this.output.waitOnComingInformation(),this.output.setValue(this.value))})}createLevaInputs(){let r={};return r[this.uniqueID]={value:this.name,label:"Input Name",disabled:!1,onChange:e=>{this.name!==e&&(this.name=e)}},r}getOutput(){return this.output.getValue()}};class BNe extends Hr{constructor(e){super(e),this.atomType="Readme",this.readmeText="Readme text here",this.type="readme",this.name="README",this.radius=1/72,this.description="A place to put project notes. These will appear in the GitHub readme and in the description of molecules up the chain. Markdown is supported. ",this.height=10,this.global=!0,this.addIO("input","geometry",this,"geometry",void 0),this.setValues(e)}draw(){super.draw("rect");let e=I.widthToPixels(this.radius);this.height=e*1.5,I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${e*1.5}px Work Sans Bold`,I.c.fillText("//",I.widthToPixels(this.x-this.radius/2),I.heightToPixels(this.y)+this.height/3),I.c.fill(),I.c.closePath()}setValue(e){this.readmeText=e}createLevaInputs(){let e={};return e[this.name+this.uniqueID]={value:this.readmeText,label:this.name,rows:10,onChange:t=>{this.readmeText!==t&&this.setValue(t)}},e}async generateProjectThumbnail(){let e=this.findIOValue("geometry");return e!==void 0?I.cad.generateThumbnail(e):null}async requestReadme(){return this.global?this.generateProjectThumbnail().then(e=>e!==null?{readMeText:this.readmeText,svg:e,uniqueID:this.uniqueID}:{readMeText:this.readmeText,svg:null,uniqueID:this.uniqueID}).catch(e=>{console.log(e)}):[]}sendToRender(){console.log("nothing to render in readme")}deleteNode(){super.deleteNode()}serialize(e){var t=super.serialize(e);return t.readmeText=this.readmeText,t.global=this.global,t}}class zNe extends Hr{constructor(e){super(e),this.atomType="Add BOM Tag",this.type="addBOMTag",this.name="Add BOM Tag",this.description="Adds a Bill Of Materials tag which appears in molecules containing this atom and in the GitHub project bill of materials.",this.BOMitem=new H$,this.radius=1/65,this.height,this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.setValues(e)}updateValue(){if(super.updateValue(),this.inputs.every(n=>n.ready)){var e=this.findIOValue("geometry"),t=this.BOMitem;I.cad.bom(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}draw(){super.draw("rect");let e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),n=I.widthToPixels(this.radius);this.height=n/1.3,I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${n/1.5}px Work Sans Bold`,I.c.fillText("$$$",e-n/2,t+this.height/3),I.c.fill(),I.c.closePath()}createLevaInputs(){let e={};for(const t in this.BOMitem)e[t]={value:this.BOMitem[t],label:t,disabled:!1,onChange:n=>{this.BOMitem[t]=n,this.updateValue()}};return e}serialize(e){var t=super.serialize(e);return t.BOMitem=Object.assign({},this.BOMitem),t}}class UNe extends Hr{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","x-axis degrees",this,"number",0),this.addIO("input","y-axis degrees",this,"number",0),this.addIO("input","z-axis degrees",this,"number",0),this.addIO("output","geometry",this,"geometry",""),this.name="Rotate",this.atomType="Rotate",this.description="Rotates the input geometry around the X, Y, or Z axis. Inputs are degrees.",this.setValues(e)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.ellipse(I.widthToPixels(this.x),I.heightToPixels(this.y),I.widthToPixels(this.radius/1.5),I.widthToPixels(this.radius/2.3),Math.PI/4,0,Math.PI*2),I.c.stroke(),I.c.closePath()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const n=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,step:.5,disabled:n(),onChange:i=>{t.value!==i&&(console.log(t.name,i),t.setValue(i))}})}),e}updateValue(){if(super.updateValue(),this.inputs.every(a=>a.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("x-axis degrees"),n=this.findIOValue("y-axis degrees"),i=this.findIOValue("z-axis degrees");I.cad.rotate(this.uniqueID,e,t,n,i).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class jNe extends uy{constructor(e){super(e),this.name="Github Molecule",this.atomType="GitHubMolecule",this.topLevel=!1,this.centerColor="black",this.description="Project imported from GitHub",this.gitHubUniqueID,this.setValues(e)}doubleClick(e,t){var n=!1,i=I.distBetweenPoints(e,this.x,t,this.y);return i<this.radius&&(n=!0),n}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const n=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:n(),onChange:i=>{t.value!==i&&t.setValue(i)}}),e["Reload From Github"]=Oc(()=>this.reloadMoleculeFromGithub())}),e}reloadMoleculeFromGithub(){var e=this.serialize(),t=this.parent.serialize().allConnectors;this.deleteNode(!1,!1,!0),this.loadGithubMoleculeByID(this.gitHubUniqueID,e,t)}}class HNe extends Hr{constructor(e){super(e),typeof this.parent<"u"&&this.parent.addIO("output","Geometry",this.parent,"geometry",this.parent.path),this.type="output",this.name="Output",this.value=null,this.atomType="Output",this.height=16,this.radius=1/75,this.path="",this.description="Connect geometry here to make it available in the next level up. ",this.setValues(e),this.addIO("input","number or geometry",this,"geometry",void 0)}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.decreaseToProcessCountByOne();var e=this.findIOValue("number or geometry");I.cad.output(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing(),this.parent.recomputeMolecule(this.uniqueID)}).catch(this.alertingErrorHandler()),this.parent.propagate()}}sendToRender(){try{I.writeToDisplay(this.uniqueID)}catch(e){this.setAlert(e)}}waitOnComingInformation(){this.parent.output.waitOnComingInformation()}deleteNode(){}deleteOutputAtom(e=!0){super.deleteNode(!1,e)}draw(){const e=I.widthToPixels(this.x),t=I.heightToPixels(this.y),n=I.widthToPixels(this.radius);this.height=n,this.processing?I.c.fillStyle="blue":this.selected?(I.c.fillStyle=this.selectedColor,I.c.strokeStyle=this.defaultColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(I.c.fillStyle=this.defaultColor,I.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),this.inputs.forEach(i=>{i.draw()}),I.c.beginPath(),I.c.font="10px Work Sans",I.c.textAlign="start",I.c.fillText(this.name,e-n,t-n*1.5),I.c.moveTo(e+n-n*2,t-this.height),I.c.lineTo(e+n-5,t),I.c.lineTo(e+n-n*2,t+this.height),I.c.lineTo(e+n-n*2,t-this.height),I.c.fillStyle=this.color,I.c.fill(),I.c.lineWidth=3,I.c.lineJoin="round",I.c.stroke(),I.c.closePath()}}class VNe extends Hr{constructor(e){super(e),this.name="Gcode",this.atomType="Gcode",this.height=16,this.description="Generates Maslow gcode from the input geometry.",this.gcodeString="",this.addIO("input","geometry",this,"geometry",null),this.addIO("input","tool size",this,"number",6.35),this.addIO("input","passes",this,"number",6),this.addIO("input","speed",this,"number",500),this.addIO("input","tabs",this,"string","true"),this.addIO("input","safe height",this,"number",6),this.addIO("output","gcode",this,"geometry",""),this.setValues(e)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${I.widthToPixels(this.radius)}px Work Sans Bold`,I.c.fillText("G",I.widthToPixels(this.x-this.radius/3),I.heightToPixels(this.y)+this.height/3),I.c.fill(),I.c.closePath()}updateValue(){super.updateValue();try{var e=this.findIOValue("geometry"),t=this.findIOValue("tool size"),n=this.findIOValue("passes"),i=this.findIOValue("speed"),a=this.findIOValue("tabs"),o=this.findIOValue("safe height");const s={op:"gcode",readPath:e,toolSize:t,passes:n,speed:i,tabs:a,safeHeight:o,writePath:this.path};this.gcodeString=this.basicThreadValueProcessing(s)}catch(s){this.setAlert(s)}}updateSidebar(){const e=super.updateSidebar();this.createButton(e,this,"Download G-Code",()=>{this.downloadGCode()})}downloadGCode(){try{var e=this.findIOValue("geometry"),t=this.findIOValue("tool size"),n=this.findIOValue("passes"),i=this.findIOValue("speed"),a=this.findIOValue("tabs"),o=this.findIOValue("safe height");const s={op:"gcode",readPath:e,toolSize:t,passes:n,speed:i,tabs:a,safeHeight:o,writePath:this.path},{answer:l}=window.ask(s)}catch(s){this.setAlert(s)}}}class qNe extends Hr{constructor(e){super(e),this.name="Code",this.atomType="Code",this.description="Defines a Replicad code block.",this.code=`//Inputs:[input1, height];

let shape = drawRectangle(5,7)

const newPlane = new Plane().pivot(0, 'Y');

 return { geometry: [shape.sketchOnPlane(newPlane).extrude(7)], tags: [],
      color: '#A3CE5B',
      plane: newPlane}


    /**
    To Use the Code Atom, enter your inputs to the input list a.e Inputs:[shape, height]
    If your input is connected to another atom with a replicad geometry you can access its geometry by looking up its ID in your library. a.e library[Input1].geometry[0] 
    Use any replicad available methods to modify your geometry. Learn more about all of the available methods at 
    https://replicad.xyz/docs/introapp/UserGuide.html 
    Return a replicad object that includes geometry, color, tags and plane. 


    Example Code Atom:

      Inputs:[shape, x];

      let finalShape = library[shape].geometry[0].clone.translate[x,0,0]

      return {geometry: finalShape, color: library[shape].color, plane: library[shape].plane, tags: library[shape].tags }

      - See more examples at _______ 


    */
`,this.addIO("output","geometry",this,"geometry",""),this.setValues(e),this.parseInputs(!1)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#949294",I.c.font=`${I.widthToPixels(this.radius)}px Work Sans Bold`,I.c.fillText("</>",I.widthToPixels(this.x-this.radius/1.5),I.heightToPixels(this.y+this.radius*1.5))}beginPropagation(){this.inputs.length==0&&this.updateValue();var e=!1;this.inputs.forEach(t=>{t.connectors.length>0&&(e=!0)}),e||this.updateValue()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const n=()=>t.connectors.length>0;e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:n(),onChange:i=>{t.value!==i&&t.setValue(i)}}}),e["Edit Code"]=Oc(()=>this.editCode()),e["Save Code"]=Oc(()=>this.saveCode()),e["Close Editor"]=Oc(()=>this.closeCode()),e}updateCode(e){this.code=e,this.updateValue(),this.sendToRender()}updateValue(e){if(super.updateValue(),this.parseInputs(),this.inputs.every(i=>i.ready)){var t=[];this.inputs.forEach(i=>{i.connectors.length>0&&i.type=="input"&&t.push(i.getValue())});var n={};this.inputs.forEach(i=>{n[i.name]=i.value}),I.cad.code(this.uniqueID,this.code,n).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}parseInputs(e=!0){var t=/Inputs:\[\s*([^)]+?)\s*\]/.exec(this.code);if(t){t[1]&&(t=t[1].split(/\s*,\s*/));let a=[];for(var n in t){t[n]=t[n].split(/\s*=\s*/);let o=t[n][0];a.push(o);let s=t[n][1]?t[n][1]:10;this.inputs.some(l=>l.Name===o)||this.addIO("input",o,this,"geometry",s,e)}for(var i in this.inputs)a.includes(this.inputs[i].name)||this.removeIO("input",this.inputs[i].name,this)}}doubleClick(e,t){let n=I.widthToPixels(this.x),i=I.heightToPixels(this.y);var a=!1,o=I.distBetweenPoints(e,n,t,i);return o<this.radius&&(this.editCode(),a=!0),a}editCode(){document.getElementById("code-window").classList.remove("code-off")}saveCode(){document.getElementById("save-code-button").click()}closeCode(){document.getElementById("close-code-button").click()}serialize(e){var t=super.serialize(e);return t.codeVersion=1,t.code=this.code,t}}let WNe=class extends Hr{constructor(r){super(r),this.addIO("output","geometry",this,"geometry",""),this.name="Group",this.atomType="Group",this.ioValues=[],this.removeCutawayGeometry=!0,this.description="Groups shapes together into one. Shapes are allowed to overlap.",this.setValues(r),typeof this.ioValues<"u"&&this.ioValues.forEach(e=>{this.addIO("input",e.name,this,"geometry","")}),this.setValues([])}beginPropagation(){J0(this),super.beginPropagation()}draw(){super.draw();const r=I.widthToPixels(this.x),e=I.heightToPixels(this.y),t=I.widthToPixels(this.radius);I.c.beginPath(),I.c.fillStyle="#949294",I.c.moveTo(r-t/2,e+t/2),I.c.lineTo(r+t/2,e+t/2),I.c.lineTo(r+t/2,e),I.c.lineTo(r-t/2,e),I.c.lineTo(r-t/2,e+t/2),I.c.stroke(),I.c.closePath(),I.c.beginPath(),I.c.lineTo(r+t/4,e-t/2),I.c.lineTo(r-t/4,e-t/2),I.c.lineTo(r-t/4,e),I.c.lineTo(r+t/2,e),I.c.lineTo(r+t/4,e-t/2),I.c.lineWidth=1,I.c.lineJoin="round",I.c.stroke(),I.c.closePath()}updateValue(){if(this.inputs.every(e=>e.ready)){try{var r=[];this.inputs.forEach(t=>{t.connectors.length>0&&t.type=="input"&&r.push(t.getValue())});const e={op:"group",paths:r,writePath:this.path};this.basicThreadValueProcessing(e,"group"),this.clearAlert()}catch(e){this.setAlert(e)}J0(this)}}serialize(r){var e=super.serialize(r),t=[];return this.inputs.forEach(n=>{if(n.connectors.length>0){var i={name:n.name,ioValue:n.getValue()};t.push(i)}}),e.ioValues=t,e}};class GNe extends Hr{constructor(e){super(e),dte(this,"getAFile",async function(){const t=new fu,n=this.fileName;return await t.rest.repos.getContent({owner:I.currentUser,repo:I.currentRepoName,path:n})}),this.name="Import",this.atomType="Import",this.description="Import Atom, let's you choose a type of file to import and use in your design.",this.file=null,this.fileName=null,this.type=null,this.sha=null,this.SVGdepth=10,this.SVGwidth=10,this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${I.widthToPixels(this.radius)}px Work Sans Bold`,I.c.fillText("G",I.widthToPixels(this.x-this.radius/3),I.heightToPixels(this.y)+this.height/3),I.c.fill(),I.c.closePath()}updateValue(){super.updateValue();try{if(this.processing=!0,this.file!=null){let e=this.file,t=this.type,n=t=="STL"?I.cad.importingSTL:t=="SVG"?I.cad.importingSVG:t=="STEP"?I.cad.importingSTEP:null;if(n==null)throw"Invalid file type";n(this.uniqueID,e,this.SVGdepth,this.SVGwidth).then(i=>{this.basicThreadValueProcessing(),this.sendToRender()})}else this.getAFile().then(e=>{this.sha=e.data.sha,this.file=this.newBlobFromBase64(e),this.updateValue()})}catch{this.alertingErrorHandler()}}newBlobFromBase64(e){let t=e.data.content,n=atob(t);if(this.type=="SVG")return n;let i=[];for(let a=0;a<n.length;a++)i.push(n.charCodeAt(a));return new Blob([new Uint8Array(i)],{type:"application/octet-stream"})}beginPropagation(){this.fileName!=null&&this.updateValue()}createLevaInputs(){let e={};if(this.fileName==null){const t=["STL","SVG","STEP"];let n=0;e[this.uniqueID+"file_ops"]={options:t,label:"File Type",onChange:i=>{n=t.indexOf(i)}},e["Load File"]=Oc(()=>this.loadFile(t[n]))}else this.type=="SVG"&&(e.Width={value:this.SVGwidth,label:"Width",onChange:t=>{this.SVGwidth=t,this.updateValue()}},e.Depth={value:this.SVGdepth,label:"Depth",onChange:t=>{this.SVGdepth=t,this.updateValue()}}),e["Loaded File"]={value:this.fileName,label:"Loaded File",disabled:!0};return e}loadFile(e){var t=document.getElementById("fileLoaderInput");t.accept="."+e.toLowerCase(),t.click(),this.type=e}deleteNode(){super.deleteNode();var e=document.getElementById("fileDeleteInput");e.value=this.fileName,e.click()}updateFile(e,t){this.file=e,this.fileName=e.name,this.sha=t,this.updateValue(this.type,this.file)}serialize(){var e=super.serialize();return e.fileName=this.fileName,e.name=this.name,e.type=this.type,e.SVGdepth=this.SVGdepth,e.SVGwidth=this.SVGwidth,e}}var V$={exports:{}};(function(r,e){(function(t,n){n()})(fo,function(){function t(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function n(u,c,h){var d=new XMLHttpRequest;d.open("GET",u),d.responseType="blob",d.onload=function(){l(d.response,c,h)},d.onerror=function(){console.error("could not download file")},d.send()}function i(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function a(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof fo=="object"&&fo.global===fo?fo:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,c,h){var d=o.URL||o.webkitURL,f=document.createElement("a");c=c||u.name||"download",f.download=c,f.rel="noopener",typeof u=="string"?(f.href=u,f.origin===location.origin?a(f):i(f.href)?n(u,c,h):a(f,f.target="_blank")):(f.href=d.createObjectURL(u),setTimeout(function(){d.revokeObjectURL(f.href)},4e4),setTimeout(function(){a(f)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,h){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,h),c);else if(i(u))n(u,c,h);else{var d=document.createElement("a");d.href=u,d.target="_blank",setTimeout(function(){a(d)})}}:function(u,c,h,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof u=="string")return n(u,c,h);var f=u.type==="application/octet-stream",p=/constructor/i.test(o.HTMLElement)||o.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||f&&p||s)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var b=y.result;b=v?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=b:location=b,d=null},y.readAsDataURL(u)}else{var g=o.URL||o.webkitURL,w=g.createObjectURL(u);d?d.location=w:location.href=w,d=null,setTimeout(function(){g.revokeObjectURL(w)},4e4)}});o.saveAs=l.saveAs=l,r.exports=l})})(V$);var q$=V$.exports;class $Ne extends Hr{constructor(e){super(e),this.name="Export",this.atomType="Export",this.description="Export Atom, let's you choose a type of file to Export.",this.value=null,this.type=null,this.addIO("input","geometry",this,"geometry",""),this.setValues(e),this.importIndex=0}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${I.widthToPixels(this.radius)}px Work Sans Bold`,I.c.fillText("G",I.widthToPixels(this.x-this.radius/3),I.heightToPixels(this.y)+this.height/3),I.c.fill(),I.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;let e=this.findIOValue("geometry"),t=this.type;I.cad.visExport(this.uniqueID,e,t).then(n=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}createLevaInputs(){let e={};const t=["STL","SVG","STEP"];return e[this.uniqueID+"file_ops"]={value:t[this.importIndex],options:t,label:"File Type",onChange:n=>{this.importIndex=t.indexOf(n),this.type!=t[this.importIndex]&&(this.type=t[this.importIndex],this.updateValue())}},e["Download File"]=Oc(()=>this.exportFile()),e}exportFile(){let e=this.type;I.cad.downExport(this.uniqueID,e).then(t=>{q$.saveAs(t,I.currentMolecule.name+"."+e.toLowerCase())}).catch(this.alertingErrorHandler())}}const XNe={ROBOTO:"https://fonts.gstatic.com/s/roboto/v15/W5F8_SL0XFawnjxHGsZjJA.ttf",NOTOSANS:"http://fonts.gstatic.com/s/notosansdisplay/v20/RLplK4fy6r6tOBEJg0IAKzqdFZVZxokvfn_BDLxR.ttf",ANONYMOUSPRO:"http://fonts.gstatic.com/s/anonymouspro/v14/rP2Bp2a15UIB7Un-bOeISG3pLlw89CH98Ko.ttf",MONSERRAT:"http://fonts.gstatic.com/s/montserrat/v15/JTURjIg1_i6t8kCHKm45_dJE3gnD-w.ttf"};let YNe=class extends Hr{constructor(r){super(r),this.name="Text",this.atomType="Text",this.description="Creates a new text sketch.",this.fontFamily="ROBOTO",this.addIO("input","Font Size",this,"number",10),this.addIO("input","Text",this,"string","Lorem Ipsum"),this.addIO("output","geometry",this,"geometry",""),this.setValues(r)}beginPropagation(r=!1){this.inputs.forEach(e=>{e.beginPropagation()})}draw(){super.draw(),I.c.beginPath(),I.c.fillStyle="#484848",I.c.font=`${I.widthToPixels(this.radius)}px Work Sans Bold`,I.c.fillText("T",I.widthToPixels(this.x-this.radius/3),I.heightToPixels(this.y)+this.height/3),I.c.fill(),I.c.closePath()}createLevaInputs(){let r={};this.inputs&&this.inputs.map(t=>{const n=()=>t.connectors.length>0;t.valueType!=="geometry"&&(r[this.uniqueID+t.name]={value:t.value,label:t.name,step:.25,disabled:n(),onChange:i=>{t.value!==i&&t.setValue(i)}})});const e=XNe;return r["Font Family"]={options:Object.keys(e),label:"Font Family",onChange:t=>{this.fontFamily=t,this.updateValue()}},r}updateValue(){super.updateValue();var r=this.findIOValue("Font Size"),e=this.findIOValue("Text");let t=this.fontFamily;I.cad.text(this.uniqueID,e,r,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}serialize(){var r=super.serialize(),e=[];return this.inputs.forEach(t=>{if(t.connectors.length>0){var n={name:t.name,ioValue:t.getValue()};e.push(n)}}),r.ioValues=e,r.fontFamily=this.fontFamily,r}};class JNe{constructor(){this.canvas=null,this.c=null,this.availableTypes={intersection:{creator:NNe,atomType:"Intersection",atomCategory:"Interactions"},difference:{creator:ONe,atomType:"Difference",atomCategory:"Interactions"},union:{creator:S2e,atomType:"Join",atomCategory:"Interactions"},group:{creator:WNe,atomType:"Group",atomCategory:"None"},loft:{creator:T2e,atomType:"Loft",atomCategory:"Interactions"},shrinkWrap:{creator:C2e,atomType:"ShrinkWrap",atomCategory:"Interactions"},readme:{creator:BNe,atomType:"Readme",atomCategory:"Tags"},addBOMTag:{creator:zNe,atomType:"Add-BOM-Tag",atomCategory:"Tags"},color:{creator:_2e,atomType:"Color",atomCategory:"Actions"},tag:{creator:TNe,atomType:"Tag",atomCategory:"Tags"},extracttag:{creator:INe,atomType:"ExtractTag",atomCategory:"Tags"},cutLayout:{creator:E2e,atomType:"CutLayout",atomCategory:"Tags"},regularPolygon:{creator:DNe,atomType:"RegularPolygon",atomCategory:"Shapes"},costant:{creator:RNe,atomType:"Constant",atomCategory:"Inputs"},circle:{creator:M2e,atomType:"Circle",atomCategory:"Shapes"},text:{creator:YNe,atomType:"Text",atomCategory:"Shapes"},rectangle:{creator:A2e,atomType:"Rectangle",atomCategory:"Shapes"},molecule:{creator:uy,atomType:"Molecule",atomCategory:"Shapes"},input:{creator:FNe,atomType:"Input",atomCategory:"Inputs"},equation:{creator:PNe,atomType:"Equation",atomCategory:"Inputs"},code:{creator:qNe,atomType:"Code",atomCategory:"Inputs"},rotate:{creator:UNe,atomType:"Rotate",atomCategory:"Actions"},extrude:{creator:kNe,atomType:"Extrude",atomCategory:"Actions"},move:{creator:D2e,atomType:"Move",atomCategory:"Actions"},GeneticAlgorithm:{creator:LNe,atomType:"GeneticAlgorithm",atomCategory:"Actions"},gcode:{creator:VNe,atomType:"Gcode",atomCategory:"ImportExport"},import:{creator:GNe,atomType:"Import",atomCategory:"ImportExport"},export:{creator:$Ne,atomType:"Export",atomCategory:"ImportExport"},githubmolecule:{creator:jNe,atomType:"GitHubMolecule",atomCategory:"ImportExport"},output:{creator:HNe,atomType:"Output"}},this.currentMolecule,this.currentUser,this.currentRepoName,this.currentRepo,this.loadedRepo,this.topLevelMolecule,this.touchInterface=!1,this.cad=null,this.totalAtomCount=0,this.numberOfAtomsToLoad=0,this.fork=!1,this.ctrlDown=!1,this.atomsSelected=[],this.circleSegmentSize=2,this.displayProcessing=!1,this.cancelLastDisplayWorker=function(){},this.displayGrid=!0,this.displayAxis=!0,this.displayTriangles=!0,this.displayEdges=!0;const e=XW(m2e);this.limitedEvaluate=e.evaluate,this.lastClick,e.import({import:function(){throw new Error("Function import is disabled")},createUnit:function(){throw new Error("Function createUnit is disabled")},evaluate:function(){throw new Error("Function evaluate is disabled")},parse:function(){throw new Error("Function parse is disabled")},simplify:function(){throw new Error("Function simplify is disabled")},derivative:function(){throw new Error("Function derivative is disabled")}},{override:!0})}constrainToCanvasBorders(e,t){return[Math.max(0,Math.min(1,e)),Math.max(0,Math.min(1,t))]}constrainToCanvasBordersPixels(e,t){return[Math.max(0,Math.min(this.canvas.current.width,e)),Math.max(0,Math.min(this.canvas.current.height,t))]}widthToPixels(e){return this.canvas.current.width*e}pixelsToWidth(e){return 1/(this.canvas.current.width/e)}heightToPixels(e){return this.canvas.current.height*e}pixelsToHeight(e){return 1/(this.canvas.current.height/e)}toBinaryStr(e){const t=new TextEncoder().encode(e);return String.fromCharCode(...t)}writeToDisplay(e,t=!1){console.log("Write to display not set")}generateUniqueID(){const e=new Date().getTime(),t=Math.floor(Math.random()*1e3);return e+t}incrementVariableName(e,t){if(t.inputs.find(n=>n.name===e)){let n=e.match(/\d+(?=\D*$)/);const i=parseInt(n[0])+1,a=e.replace(new RegExp(n[0]+"(?=D*$)"),i);return this.incrementVariableName(a,t)}else return e}distBetweenPoints(e,t,n,i){var a=Math.pow(e-t,2),o=Math.pow(n-i,2),s=Math.sqrt(a+o);return s}}const I=new JNe,x6={CC0:`Creative Commons Legal Code

CC0 1.0 Universal

    CREATIVE COMMONS CORPORATION IS NOT A LAW FIRM AND DOES NOT PROVIDE
    LEGAL SERVICES. DISTRIBUTION OF THIS DOCUMENT DOES NOT CREATE AN
    ATTORNEY-CLIENT RELATIONSHIP. CREATIVE COMMONS PROVIDES THIS
    INFORMATION ON AN "AS-IS" BASIS. CREATIVE COMMONS MAKES NO WARRANTIES
    REGARDING THE USE OF THIS DOCUMENT OR THE INFORMATION OR WORKS
    PROVIDED HEREUNDER, AND DISCLAIMS LIABILITY FOR DAMAGES RESULTING FROM
    THE USE OF THIS DOCUMENT OR THE INFORMATION OR WORKS PROVIDED
    HEREUNDER.

Statement of Purpose

The laws of most jurisdictions throughout the world automatically confer
exclusive Copyright and Related Rights (defined below) upon the creator
and subsequent owner(s) (each and all, an "owner") of an original work of
authorship and/or a database (each, a "Work").

Certain owners wish to permanently relinquish those rights to a Work for
the purpose of contributing to a commons of creative, cultural and
scientific works ("Commons") that the public can reliably and without fear
of later claims of infringement build upon, modify, incorporate in other
works, reuse and redistribute as freely as possible in any form whatsoever
and for any purposes, including without limitation commercial purposes.
These owners may contribute to the Commons to promote the ideal of a free
culture and the further production of creative, cultural and scientific
works, or to gain reputation or greater distribution for their Work in
part through the use and efforts of others.

For these and/or other purposes and motivations, and without any
expectation of additional consideration or compensation, the person
associating CC0 with a Work (the "Affirmer"), to the extent that he or she
is an owner of Copyright and Related Rights in the Work, voluntarily
elects to apply CC0 to the Work and publicly distribute the Work under its
terms, with knowledge of his or her Copyright and Related Rights in the
Work and the meaning and intended legal effect of CC0 on those rights.

1. Copyright and Related Rights. A Work made available under CC0 may be
protected by copyright and related or neighboring rights ("Copyright and
Related Rights"). Copyright and Related Rights include, but are not
limited to, the following:

  i. the right to reproduce, adapt, distribute, perform, display,
     communicate, and translate a Work;
 ii. moral rights retained by the original author(s) and/or performer(s);
iii. publicity and privacy rights pertaining to a person's image or
     likeness depicted in a Work;
 iv. rights protecting against unfair competition in regards to a Work,
     subject to the limitations in paragraph 4(a), below;
  v. rights protecting the extraction, dissemination, use and reuse of data
     in a Work;
 vi. database rights (such as those arising under Directive 96/9/EC of the
     European Parliament and of the Council of 11 March 1996 on the legal
     protection of databases, and under any national implementation
     thereof, including any amended or successor version of such
     directive); and
vii. other similar, equivalent or corresponding rights throughout the
     world based on applicable law or treaty, and any national
     implementations thereof.

2. Waiver. To the greatest extent permitted by, but not in contravention
of, applicable law, Affirmer hereby overtly, fully, permanently,
irrevocably and unconditionally waives, abandons, and surrenders all of
Affirmer's Copyright and Related Rights and associated claims and causes
of action, whether now known or unknown (including existing as well as
future claims and causes of action), in the Work (i) in all territories
worldwide, (ii) for the maximum duration provided by applicable law or
treaty (including future time extensions), (iii) in any current or future
medium and for any number of copies, and (iv) for any purpose whatsoever,
including without limitation commercial, advertising or promotional
purposes (the "Waiver"). Affirmer makes the Waiver for the benefit of each
member of the public at large and to the detriment of Affirmer's heirs and
successors, fully intending that such Waiver shall not be subject to
revocation, rescission, cancellation, termination, or any other legal or
equitable action to disrupt the quiet enjoyment of the Work by the public
as contemplated by Affirmer's express Statement of Purpose.

3. Public License Fallback. Should any part of the Waiver for any reason
be judged legally invalid or ineffective under applicable law, then the
Waiver shall be preserved to the maximum extent permitted taking into
account Affirmer's express Statement of Purpose. In addition, to the
extent the Waiver is so judged Affirmer hereby grants to each affected
person a royalty-free, non transferable, non sublicensable, non exclusive,
irrevocable and unconditional license to exercise Affirmer's Copyright and
Related Rights in the Work (i) in all territories worldwide, (ii) for the
maximum duration provided by applicable law or treaty (including future
time extensions), (iii) in any current or future medium and for any number
of copies, and (iv) for any purpose whatsoever, including without
limitation commercial, advertising or promotional purposes (the
"License"). The License shall be deemed effective as of the date CC0 was
applied by Affirmer to the Work. Should any part of the License for any
reason be judged legally invalid or ineffective under applicable law, such
partial invalidity or ineffectiveness shall not invalidate the remainder
of the License, and in such case Affirmer hereby affirms that he or she
will not (i) exercise any of his or her remaining Copyright and Related
Rights in the Work or (ii) assert any associated claims and causes of
action with respect to the Work, in either case contrary to Affirmer's
express Statement of Purpose.

4. Limitations and Disclaimers.

 a. No trademark or patent rights held by Affirmer are waived, abandoned,
    surrendered, licensed or otherwise affected by this document.
 b. Affirmer offers the Work as-is and makes no representations or
    warranties of any kind concerning the Work, express, implied,
    statutory or otherwise, including without limitation warranties of
    title, merchantability, fitness for a particular purpose, non
    infringement, or the absence of latent or other defects, accuracy, or
    the present or absence of errors, whether or not discoverable, all to
    the greatest extent permissible under applicable law.
 c. Affirmer disclaims responsibility for clearing rights of other persons
    that may apply to the Work or any use thereof, including without
    limitation any person's Copyright and Related Rights in the Work.
    Further, Affirmer disclaims responsibility for obtaining any necessary
    consents, permissions or other rights required for any use of the
    Work.
 d. Affirmer understands and acknowledges that Creative Commons is not a
    party to this document and has no duty or obligation with respect to
    this CC0 or use of the Work.`,"CC-BY":`Attribution 4.0 International

=======================================================================

Creative Commons Corporation ("Creative Commons") is not a law firm and
does not provide legal services or legal advice. Distribution of
Creative Commons public licenses does not create a lawyer-client or
other relationship. Creative Commons makes its licenses and related
information available on an "as-is" basis. Creative Commons gives no
warranties regarding its licenses, any material licensed under their
terms and conditions, or any related information. Creative Commons
disclaims all liability for damages resulting from their use to the
fullest extent possible.

Using Creative Commons Public Licenses

Creative Commons public licenses provide a standard set of terms and
conditions that creators and other rights holders may use to share
original works of authorship and other material subject to copyright
and certain other rights specified in the public license below. The
following considerations are for informational purposes only, are not
exhaustive, and do not form part of our licenses.

     Considerations for licensors: Our public licenses are
     intended for use by those authorized to give the public
     permission to use material in ways otherwise restricted by
     copyright and certain other rights. Our licenses are
     irrevocable. Licensors should read and understand the terms
     and conditions of the license they choose before applying it.
     Licensors should also secure all rights necessary before
     applying our licenses so that the public can reuse the
     material as expected. Licensors should clearly mark any
     material not subject to the license. This includes other CC-
     licensed material, or material used under an exception or
     limitation to copyright. More considerations for licensors:
	wiki.creativecommons.org/Considerations_for_licensors

     Considerations for the public: By using one of our public
     licenses, a licensor grants the public permission to use the
     licensed material under specified terms and conditions. If
     the licensor's permission is not necessary for any reason--for
     example, because of any applicable exception or limitation to
     copyright--then that use is not regulated by the license. Our
     licenses grant only permissions under copyright and certain
     other rights that a licensor has authority to grant. Use of
     the licensed material may still be restricted for other
     reasons, including because others have copyright or other
     rights in the material. A licensor may make special requests,
     such as asking that all changes be marked or described.
     Although not required by our licenses, you are encouraged to
     respect those requests where reasonable. More_considerations
     for the public:
	wiki.creativecommons.org/Considerations_for_licensees

=======================================================================

Creative Commons Attribution 4.0 International Public License

By exercising the Licensed Rights (defined below), You accept and agree
to be bound by the terms and conditions of this Creative Commons
Attribution 4.0 International Public License ("Public License"). To the
extent this Public License may be interpreted as a contract, You are
granted the Licensed Rights in consideration of Your acceptance of
these terms and conditions, and the Licensor grants You such rights in
consideration of benefits the Licensor receives from making the
Licensed Material available under these terms and conditions.


Section 1 -- Definitions.

  a. Adapted Material means material subject to Copyright and Similar
     Rights that is derived from or based upon the Licensed Material
     and in which the Licensed Material is translated, altered,
     arranged, transformed, or otherwise modified in a manner requiring
     permission under the Copyright and Similar Rights held by the
     Licensor. For purposes of this Public License, where the Licensed
     Material is a musical work, performance, or sound recording,
     Adapted Material is always produced where the Licensed Material is
     synched in timed relation with a moving image.

  b. Adapter's License means the license You apply to Your Copyright
     and Similar Rights in Your contributions to Adapted Material in
     accordance with the terms and conditions of this Public License.

  c. Copyright and Similar Rights means copyright and/or similar rights
     closely related to copyright including, without limitation,
     performance, broadcast, sound recording, and Sui Generis Database
     Rights, without regard to how the rights are labeled or
     categorized. For purposes of this Public License, the rights
     specified in Section 2(b)(1)-(2) are not Copyright and Similar
     Rights.

  d. Effective Technological Measures means those measures that, in the
     absence of proper authority, may not be circumvented under laws
     fulfilling obligations under Article 11 of the WIPO Copyright
     Treaty adopted on December 20, 1996, and/or similar international
     agreements.

  e. Exceptions and Limitations means fair use, fair dealing, and/or
     any other exception or limitation to Copyright and Similar Rights
     that applies to Your use of the Licensed Material.

  f. Licensed Material means the artistic or literary work, database,
     or other material to which the Licensor applied this Public
     License.

  g. Licensed Rights means the rights granted to You subject to the
     terms and conditions of this Public License, which are limited to
     all Copyright and Similar Rights that apply to Your use of the
     Licensed Material and that the Licensor has authority to license.

  h. Licensor means the individual(s) or entity(ies) granting rights
     under this Public License.

  i. Share means to provide material to the public by any means or
     process that requires permission under the Licensed Rights, such
     as reproduction, public display, public performance, distribution,
     dissemination, communication, or importation, and to make material
     available to the public including in ways that members of the
     public may access the material from a place and at a time
     individually chosen by them.

  j. Sui Generis Database Rights means rights other than copyright
     resulting from Directive 96/9/EC of the European Parliament and of
     the Council of 11 March 1996 on the legal protection of databases,
     as amended and/or succeeded, as well as other essentially
     equivalent rights anywhere in the world.

  k. You means the individual or entity exercising the Licensed Rights
     under this Public License. Your has a corresponding meaning.


Section 2 -- Scope.

  a. License grant.

       1. Subject to the terms and conditions of this Public License,
          the Licensor hereby grants You a worldwide, royalty-free,
          non-sublicensable, non-exclusive, irrevocable license to
          exercise the Licensed Rights in the Licensed Material to:

            a. reproduce and Share the Licensed Material, in whole or
               in part; and

            b. produce, reproduce, and Share Adapted Material.

       2. Exceptions and Limitations. For the avoidance of doubt, where
          Exceptions and Limitations apply to Your use, this Public
          License does not apply, and You do not need to comply with
          its terms and conditions.

       3. Term. The term of this Public License is specified in Section
          6(a).

       4. Media and formats; technical modifications allowed. The
          Licensor authorizes You to exercise the Licensed Rights in
          all media and formats whether now known or hereafter created,
          and to make technical modifications necessary to do so. The
          Licensor waives and/or agrees not to assert any right or
          authority to forbid You from making technical modifications
          necessary to exercise the Licensed Rights, including
          technical modifications necessary to circumvent Effective
          Technological Measures. For purposes of this Public License,
          simply making modifications authorized by this Section 2(a)
          (4) never produces Adapted Material.

       5. Downstream recipients.

            a. Offer from the Licensor -- Licensed Material. Every
               recipient of the Licensed Material automatically
               receives an offer from the Licensor to exercise the
               Licensed Rights under the terms and conditions of this
               Public License.

            b. No downstream restrictions. You may not offer or impose
               any additional or different terms or conditions on, or
               apply any Effective Technological Measures to, the
               Licensed Material if doing so restricts exercise of the
               Licensed Rights by any recipient of the Licensed
               Material.

       6. No endorsement. Nothing in this Public License constitutes or
          may be construed as permission to assert or imply that You
          are, or that Your use of the Licensed Material is, connected
          with, or sponsored, endorsed, or granted official status by,
          the Licensor or others designated to receive attribution as
          provided in Section 3(a)(1)(A)(i).

  b. Other rights.

       1. Moral rights, such as the right of integrity, are not
          licensed under this Public License, nor are publicity,
          privacy, and/or other similar personality rights; however, to
          the extent possible, the Licensor waives and/or agrees not to
          assert any such rights held by the Licensor to the limited
          extent necessary to allow You to exercise the Licensed
          Rights, but not otherwise.

       2. Patent and trademark rights are not licensed under this
          Public License.

       3. To the extent possible, the Licensor waives any right to
          collect royalties from You for the exercise of the Licensed
          Rights, whether directly or through a collecting society
          under any voluntary or waivable statutory or compulsory
          licensing scheme. In all other cases the Licensor expressly
          reserves any right to collect such royalties.


Section 3 -- License Conditions.

Your exercise of the Licensed Rights is expressly made subject to the
following conditions.

  a. Attribution.

       1. If You Share the Licensed Material (including in modified
          form), You must:

            a. retain the following if it is supplied by the Licensor
               with the Licensed Material:

                 i. identification of the creator(s) of the Licensed
                    Material and any others designated to receive
                    attribution, in any reasonable manner requested by
                    the Licensor (including by pseudonym if
                    designated);

                ii. a copyright notice;

               iii. a notice that refers to this Public License;

                iv. a notice that refers to the disclaimer of
                    warranties;

                 v. a URI or hyperlink to the Licensed Material to the
                    extent reasonably practicable;

            b. indicate if You modified the Licensed Material and
               retain an indication of any previous modifications; and

            c. indicate the Licensed Material is licensed under this
               Public License, and include the text of, or the URI or
               hyperlink to, this Public License.

       2. You may satisfy the conditions in Section 3(a)(1) in any
          reasonable manner based on the medium, means, and context in
          which You Share the Licensed Material. For example, it may be
          reasonable to satisfy the conditions by providing a URI or
          hyperlink to a resource that includes the required
          information.

       3. If requested by the Licensor, You must remove any of the
          information required by Section 3(a)(1)(A) to the extent
          reasonably practicable.

       4. If You Share Adapted Material You produce, the Adapter's
          License You apply must not prevent recipients of the Adapted
          Material from complying with this Public License.


Section 4 -- Sui Generis Database Rights.

Where the Licensed Rights include Sui Generis Database Rights that
apply to Your use of the Licensed Material:

  a. for the avoidance of doubt, Section 2(a)(1) grants You the right
     to extract, reuse, reproduce, and Share all or a substantial
     portion of the contents of the database;

  b. if You include all or a substantial portion of the database
     contents in a database in which You have Sui Generis Database
     Rights, then the database in which You have Sui Generis Database
     Rights (but not its individual contents) is Adapted Material; and

  c. You must comply with the conditions in Section 3(a) if You Share
     all or a substantial portion of the contents of the database.

For the avoidance of doubt, this Section 4 supplements and does not
replace Your obligations under this Public License where the Licensed
Rights include other Copyright and Similar Rights.


Section 5 -- Disclaimer of Warranties and Limitation of Liability.

  a. UNLESS OTHERWISE SEPARATELY UNDERTAKEN BY THE LICENSOR, TO THE
     EXTENT POSSIBLE, THE LICENSOR OFFERS THE LICENSED MATERIAL AS-IS
     AND AS-AVAILABLE, AND MAKES NO REPRESENTATIONS OR WARRANTIES OF
     ANY KIND CONCERNING THE LICENSED MATERIAL, WHETHER EXPRESS,
     IMPLIED, STATUTORY, OR OTHER. THIS INCLUDES, WITHOUT LIMITATION,
     WARRANTIES OF TITLE, MERCHANTABILITY, FITNESS FOR A PARTICULAR
     PURPOSE, NON-INFRINGEMENT, ABSENCE OF LATENT OR OTHER DEFECTS,
     ACCURACY, OR THE PRESENCE OR ABSENCE OF ERRORS, WHETHER OR NOT
     KNOWN OR DISCOVERABLE. WHERE DISCLAIMERS OF WARRANTIES ARE NOT
     ALLOWED IN FULL OR IN PART, THIS DISCLAIMER MAY NOT APPLY TO YOU.

  b. TO THE EXTENT POSSIBLE, IN NO EVENT WILL THE LICENSOR BE LIABLE
     TO YOU ON ANY LEGAL THEORY (INCLUDING, WITHOUT LIMITATION,
     NEGLIGENCE) OR OTHERWISE FOR ANY DIRECT, SPECIAL, INDIRECT,
     INCIDENTAL, CONSEQUENTIAL, PUNITIVE, EXEMPLARY, OR OTHER LOSSES,
     COSTS, EXPENSES, OR DAMAGES ARISING OUT OF THIS PUBLIC LICENSE OR
     USE OF THE LICENSED MATERIAL, EVEN IF THE LICENSOR HAS BEEN
     ADVISED OF THE POSSIBILITY OF SUCH LOSSES, COSTS, EXPENSES, OR
     DAMAGES. WHERE A LIMITATION OF LIABILITY IS NOT ALLOWED IN FULL OR
     IN PART, THIS LIMITATION MAY NOT APPLY TO YOU.

  c. The disclaimer of warranties and limitation of liability provided
     above shall be interpreted in a manner that, to the extent
     possible, most closely approximates an absolute disclaimer and
     waiver of all liability.


Section 6 -- Term and Termination.

  a. This Public License applies for the term of the Copyright and
     Similar Rights licensed here. However, if You fail to comply with
     this Public License, then Your rights under this Public License
     terminate automatically.

  b. Where Your right to use the Licensed Material has terminated under
     Section 6(a), it reinstates:

       1. automatically as of the date the violation is cured, provided
          it is cured within 30 days of Your discovery of the
          violation; or

       2. upon express reinstatement by the Licensor.

     For the avoidance of doubt, this Section 6(b) does not affect any
     right the Licensor may have to seek remedies for Your violations
     of this Public License.

  c. For the avoidance of doubt, the Licensor may also offer the
     Licensed Material under separate terms or conditions or stop
     distributing the Licensed Material at any time; however, doing so
     will not terminate this Public License.

  d. Sections 1, 5, 6, 7, and 8 survive termination of this Public
     License.


Section 7 -- Other Terms and Conditions.

  a. The Licensor shall not be bound by any additional or different
     terms or conditions communicated by You unless expressly agreed.

  b. Any arrangements, understandings, or agreements regarding the
     Licensed Material not stated herein are separate from and
     independent of the terms and conditions of this Public License.


Section 8 -- Interpretation.

  a. For the avoidance of doubt, this Public License does not, and
     shall not be interpreted to, reduce, limit, restrict, or impose
     conditions on any use of the Licensed Material that could lawfully
     be made without permission under this Public License.

  b. To the extent possible, if any provision of this Public License is
     deemed unenforceable, it shall be automatically reformed to the
     minimum extent necessary to make it enforceable. If the provision
     cannot be reformed, it shall be severed from this Public License
     without affecting the enforceability of the remaining terms and
     conditions.

  c. No term or condition of this Public License will be waived and no
     failure to comply consented to unless expressly agreed to by the
     Licensor.

  d. Nothing in this Public License constitutes or may be interpreted
     as a limitation upon, or waiver of, any privileges and immunities
     that apply to the Licensor or You, including from the legal
     processes of any jurisdiction or authority.


=======================================================================

Creative Commons is not a party to its public
licenses. Notwithstanding, Creative Commons may elect to apply one of
its public licenses to material it publishes and in those instances
will be considered the “Licensor.” The text of the Creative Commons
public licenses is dedicated to the public domain under the CC0 Public
Domain Dedication. Except for the limited purpose of indicating that
material is shared under a Creative Commons public license or as
otherwise permitted by the Creative Commons policies published at
creativecommons.org/policies, Creative Commons does not authorize the
use of the trademark "Creative Commons" or any other trademark or logo
of Creative Commons without its prior written consent including,
without limitation, in connection with any unauthorized modifications
to any of its public licenses or any other arrangements,
understandings, or agreements concerning use of licensed material. For
the avoidance of doubt, this paragraph does not form part of the
public licenses.

Creative Commons may be contacted at creativecommons.org.`};function w6(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Bt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w6(Object(t),!0).forEach(function(n){fn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):w6(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ZNe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function S6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,MW(n.key),n)}}function KNe(r,e,t){return e&&S6(r.prototype,e),t&&S6(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function hD(r,e){return hD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},hD(r,e)}function QNe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&hD(r,e)}function RS(r){return RS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},RS(r)}function W$(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W$=function(){return!!r})()}function eOe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function tOe(r,e){if(e&&(xd(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eOe(r)}function rOe(r){var e=W$();return function(){var t,n=RS(r);if(e){var i=RS(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return tOe(this,t)}}function dD(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function nOe(r){if(Array.isArray(r))return dD(r)}function iOe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function G$(r,e){if(r){if(typeof r=="string")return dD(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?dD(r,e):void 0}}function aOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ap(r){return nOe(r)||iOe(r)||G$(r)||aOe()}function oOe(r){if(r.sheet)return r.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===r)return document.styleSheets[e]}function sOe(r){var e=document.createElement("style");return e.setAttribute("data-emotion",r.key),r.nonce!==void 0&&e.setAttribute("nonce",r.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var lOe=function(){function r(t){var n=this;this._insertTag=function(i){var a;n.tags.length===0?n.insertionPoint?a=n.insertionPoint.nextSibling:n.prepend?a=n.container.firstChild:a=n.before:a=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,a),n.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=r.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(sOe(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var i=oOe(n);try{i.insertRule(t,i.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach(function(t){return t.parentNode&&t.parentNode.removeChild(t)}),this.tags=[],this.ctr=0},r}(),$i="-ms-",PS="-moz-",Nr="-webkit-",$$="comm",JN="rule",ZN="decl",uOe="@import",X$="@keyframes",cOe="@layer",hOe=Math.abs,ZM=String.fromCharCode,dOe=Object.assign;function fOe(r,e){return Ei(r,0)^45?(((e<<2^Ei(r,0))<<2^Ei(r,1))<<2^Ei(r,2))<<2^Ei(r,3):0}function Y$(r){return r.trim()}function pOe(r,e){return(r=e.exec(r))?r[0]:r}function Or(r,e,t){return r.replace(e,t)}function fD(r,e){return r.indexOf(e)}function Ei(r,e){return r.charCodeAt(e)|0}function rv(r,e,t){return r.slice(e,t)}function el(r){return r.length}function KN(r){return r.length}function pb(r,e){return e.push(r),r}function mOe(r,e){return r.map(e).join("")}var KM=1,Kp=1,J$=0,Ka=0,$n=0,Rm="";function QM(r,e,t,n,i,a,o){return{value:r,root:e,parent:t,type:n,props:i,children:a,line:KM,column:Kp,length:o,return:""}}function xg(r,e){return dOe(QM("",null,null,"",null,null,0),r,{length:-r.length},e)}function gOe(){return $n}function vOe(){return $n=Ka>0?Ei(Rm,--Ka):0,Kp--,$n===10&&(Kp=1,KM--),$n}function wo(){return $n=Ka<J$?Ei(Rm,Ka++):0,Kp++,$n===10&&(Kp=1,KM++),$n}function pl(){return Ei(Rm,Ka)}function Zx(){return Ka}function cy(r,e){return rv(Rm,r,e)}function nv(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Z$(r){return KM=Kp=1,J$=el(Rm=r),Ka=0,[]}function K$(r){return Rm="",r}function Kx(r){return Y$(cy(Ka-1,pD(r===91?r+2:r===40?r+1:r)))}function yOe(r){for(;($n=pl())&&$n<33;)wo();return nv(r)>2||nv($n)>3?"":" "}function bOe(r,e){for(;--e&&wo()&&!($n<48||$n>102||$n>57&&$n<65||$n>70&&$n<97););return cy(r,Zx()+(e<6&&pl()==32&&wo()==32))}function pD(r){for(;wo();)switch($n){case r:return Ka;case 34:case 39:r!==34&&r!==39&&pD($n);break;case 40:r===41&&pD(r);break;case 92:wo();break}return Ka}function xOe(r,e){for(;wo()&&r+$n!==57&&!(r+$n===84&&pl()===47););return"/*"+cy(e,Ka-1)+"*"+ZM(r===47?r:wo())}function wOe(r){for(;!nv(pl());)wo();return cy(r,Ka)}function SOe(r){return K$(Qx("",null,null,null,[""],r=Z$(r),0,[0],r))}function Qx(r,e,t,n,i,a,o,s,l){for(var u=0,c=0,h=o,d=0,f=0,p=0,v=1,y=1,g=1,w=0,b="",m=i,x=a,S=n,E=b;y;)switch(p=w,w=wo()){case 40:if(p!=108&&Ei(E,h-1)==58){fD(E+=Or(Kx(w),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:E+=Kx(w);break;case 9:case 10:case 13:case 32:E+=yOe(p);break;case 92:E+=bOe(Zx()-1,7);continue;case 47:switch(pl()){case 42:case 47:pb(MOe(xOe(wo(),Zx()),e,t),l);break;default:E+="/"}break;case 123*v:s[u++]=el(E)*g;case 125*v:case 59:case 0:switch(w){case 0:case 125:y=0;case 59+c:g==-1&&(E=Or(E,/\f/g,"")),f>0&&el(E)-h&&pb(f>32?_6(E+";",n,t,h-1):_6(Or(E," ","")+";",n,t,h-2),l);break;case 59:E+=";";default:if(pb(S=M6(E,e,t,u,c,i,s,b,m=[],x=[],h),a),w===123)if(c===0)Qx(E,e,S,S,m,a,h,s,x);else switch(d===99&&Ei(E,3)===110?100:d){case 100:case 108:case 109:case 115:Qx(r,S,S,n&&pb(M6(r,S,S,0,0,i,s,b,i,m=[],h),x),i,x,h,s,n?m:x);break;default:Qx(E,S,S,S,[""],x,0,s,x)}}u=c=f=0,v=g=1,b=E="",h=o;break;case 58:h=1+el(E),f=p;default:if(v<1){if(w==123)--v;else if(w==125&&v++==0&&vOe()==125)continue}switch(E+=ZM(w),w*v){case 38:g=c>0?1:(E+="\f",-1);break;case 44:s[u++]=(el(E)-1)*g,g=1;break;case 64:pl()===45&&(E+=Kx(wo())),d=pl(),c=h=el(b=E+=wOe(Zx())),w++;break;case 45:p===45&&el(E)==2&&(v=0)}}return a}function M6(r,e,t,n,i,a,o,s,l,u,c){for(var h=i-1,d=i===0?a:[""],f=KN(d),p=0,v=0,y=0;p<n;++p)for(var g=0,w=rv(r,h+1,h=hOe(v=o[p])),b=r;g<f;++g)(b=Y$(v>0?d[g]+" "+w:Or(w,/&\f/g,d[g])))&&(l[y++]=b);return QM(r,e,t,i===0?JN:s,l,u,c)}function MOe(r,e,t){return QM(r,e,t,$$,ZM(gOe()),rv(r,2,-2),0)}function _6(r,e,t,n){return QM(r,e,t,ZN,rv(r,0,n),rv(r,n+1,-1),n)}function Tp(r,e){for(var t="",n=KN(r),i=0;i<n;i++)t+=e(r[i],i,r,e)||"";return t}function _Oe(r,e,t,n){switch(r.type){case cOe:if(r.children.length)break;case uOe:case ZN:return r.return=r.return||r.value;case $$:return"";case X$:return r.return=r.value+"{"+Tp(r.children,n)+"}";case JN:r.value=r.props.join(",")}return el(t=Tp(r.children,n))?r.return=r.value+"{"+t+"}":""}function EOe(r){var e=KN(r);return function(t,n,i,a){for(var o="",s=0;s<e;s++)o+=r[s](t,n,i,a)||"";return o}}function COe(r){return function(e){e.root||(e=e.return)&&r(e)}}function AOe(r){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=r(t)),e[t]}}var TOe=function(r,e,t){for(var n=0,i=0;n=i,i=pl(),n===38&&i===12&&(e[t]=1),!nv(i);)wo();return cy(r,Ka)},DOe=function(r,e){var t=-1,n=44;do switch(nv(n)){case 0:n===38&&pl()===12&&(e[t]=1),r[t]+=TOe(Ka-1,e,t);break;case 2:r[t]+=Kx(n);break;case 4:if(n===44){r[++t]=pl()===58?"&\f":"",e[t]=r[t].length;break}default:r[t]+=ZM(n)}while(n=wo());return r},kOe=function(r,e){return K$(DOe(Z$(r),e))},E6=new WeakMap,NOe=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var e=r.value,t=r.parent,n=r.column===t.column&&r.line===t.line;t.type!=="rule";)if(t=t.parent,!t)return;if(!(r.props.length===1&&e.charCodeAt(0)!==58&&!E6.get(t))&&!n){E6.set(r,!0);for(var i=[],a=kOe(e,i),o=t.props,s=0,l=0;s<a.length;s++)for(var u=0;u<o.length;u++,l++)r.props[l]=i[s]?a[s].replace(/&\f/g,o[u]):o[u]+" "+a[s]}}},OOe=function(r){if(r.type==="decl"){var e=r.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(r.return="",r.value="")}};function Q$(r,e){switch(fOe(r,e)){case 5103:return Nr+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Nr+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Nr+r+PS+r+$i+r+r;case 6828:case 4268:return Nr+r+$i+r+r;case 6165:return Nr+r+$i+"flex-"+r+r;case 5187:return Nr+r+Or(r,/(\w+).+(:[^]+)/,Nr+"box-$1$2"+$i+"flex-$1$2")+r;case 5443:return Nr+r+$i+"flex-item-"+Or(r,/flex-|-self/,"")+r;case 4675:return Nr+r+$i+"flex-line-pack"+Or(r,/align-content|flex-|-self/,"")+r;case 5548:return Nr+r+$i+Or(r,"shrink","negative")+r;case 5292:return Nr+r+$i+Or(r,"basis","preferred-size")+r;case 6060:return Nr+"box-"+Or(r,"-grow","")+Nr+r+$i+Or(r,"grow","positive")+r;case 4554:return Nr+Or(r,/([^-])(transform)/g,"$1"+Nr+"$2")+r;case 6187:return Or(Or(Or(r,/(zoom-|grab)/,Nr+"$1"),/(image-set)/,Nr+"$1"),r,"")+r;case 5495:case 3959:return Or(r,/(image-set\([^]*)/,Nr+"$1$`$1");case 4968:return Or(Or(r,/(.+:)(flex-)?(.*)/,Nr+"box-pack:$3"+$i+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Nr+r+r;case 4095:case 3583:case 4068:case 2532:return Or(r,/(.+)-inline(.+)/,Nr+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(el(r)-1-e>6)switch(Ei(r,e+1)){case 109:if(Ei(r,e+4)!==45)break;case 102:return Or(r,/(.+:)(.+)-([^]+)/,"$1"+Nr+"$2-$3$1"+PS+(Ei(r,e+3)==108?"$3":"$2-$3"))+r;case 115:return~fD(r,"stretch")?Q$(Or(r,"stretch","fill-available"),e)+r:r}break;case 4949:if(Ei(r,e+1)!==115)break;case 6444:switch(Ei(r,el(r)-3-(~fD(r,"!important")&&10))){case 107:return Or(r,":",":"+Nr)+r;case 101:return Or(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Nr+(Ei(r,14)===45?"inline-":"")+"box$3$1"+Nr+"$2$3$1"+$i+"$2box$3")+r}break;case 5936:switch(Ei(r,e+11)){case 114:return Nr+r+$i+Or(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Nr+r+$i+Or(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Nr+r+$i+Or(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return Nr+r+$i+r+r}return r}var ROe=function(r,e,t,n){if(r.length>-1&&!r.return)switch(r.type){case ZN:r.return=Q$(r.value,r.length);break;case X$:return Tp([xg(r,{value:Or(r.value,"@","@"+Nr)})],n);case JN:if(r.length)return mOe(r.props,function(i){switch(pOe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Tp([xg(r,{props:[Or(i,/:(read-\w+)/,":"+PS+"$1")]})],n);case"::placeholder":return Tp([xg(r,{props:[Or(i,/:(plac\w+)/,":"+Nr+"input-$1")]}),xg(r,{props:[Or(i,/:(plac\w+)/,":"+PS+"$1")]}),xg(r,{props:[Or(i,/:(plac\w+)/,$i+"input-$1")]})],n)}return""})}},POe=[ROe],IOe=function(r){var e=r.key;if(e==="css"){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,function(p){var v=p.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var n=r.stylisPlugins||POe,i={},a,o=[];a=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(p){for(var v=p.getAttribute("data-emotion").split(" "),y=1;y<v.length;y++)i[v[y]]=!0;o.push(p)});var s,l=[NOe,OOe];{var u,c=[_Oe,COe(function(p){u.insert(p)})],h=EOe(l.concat(n,c)),d=function(p){return Tp(SOe(p),h)};s=function(p,v,y,g){u=y,d(p?p+"{"+v.styles+"}":v.styles),g&&(f.inserted[v.name]=!0)}}var f={key:e,sheet:new lOe({key:e,container:a,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:i,registered:{},insert:s};return f.sheet.hydrate(o),f},eX={exports:{}},Vr={};/** @license React v16.13.1
* react-is.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var bi=typeof Symbol=="function"&&Symbol.for,QN=bi?Symbol.for("react.element"):60103,eO=bi?Symbol.for("react.portal"):60106,e2=bi?Symbol.for("react.fragment"):60107,t2=bi?Symbol.for("react.strict_mode"):60108,r2=bi?Symbol.for("react.profiler"):60114,n2=bi?Symbol.for("react.provider"):60109,i2=bi?Symbol.for("react.context"):60110,tO=bi?Symbol.for("react.async_mode"):60111,a2=bi?Symbol.for("react.concurrent_mode"):60111,o2=bi?Symbol.for("react.forward_ref"):60112,s2=bi?Symbol.for("react.suspense"):60113,LOe=bi?Symbol.for("react.suspense_list"):60120,l2=bi?Symbol.for("react.memo"):60115,u2=bi?Symbol.for("react.lazy"):60116,FOe=bi?Symbol.for("react.block"):60121,BOe=bi?Symbol.for("react.fundamental"):60117,zOe=bi?Symbol.for("react.responder"):60118,UOe=bi?Symbol.for("react.scope"):60119;function To(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case QN:switch(r=r.type,r){case tO:case a2:case e2:case r2:case t2:case s2:return r;default:switch(r=r&&r.$$typeof,r){case i2:case o2:case u2:case l2:case n2:return r;default:return e}}case eO:return e}}}function tX(r){return To(r)===a2}Vr.AsyncMode=tO;Vr.ConcurrentMode=a2;Vr.ContextConsumer=i2;Vr.ContextProvider=n2;Vr.Element=QN;Vr.ForwardRef=o2;Vr.Fragment=e2;Vr.Lazy=u2;Vr.Memo=l2;Vr.Portal=eO;Vr.Profiler=r2;Vr.StrictMode=t2;Vr.Suspense=s2;Vr.isAsyncMode=function(r){return tX(r)||To(r)===tO};Vr.isConcurrentMode=tX;Vr.isContextConsumer=function(r){return To(r)===i2};Vr.isContextProvider=function(r){return To(r)===n2};Vr.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===QN};Vr.isForwardRef=function(r){return To(r)===o2};Vr.isFragment=function(r){return To(r)===e2};Vr.isLazy=function(r){return To(r)===u2};Vr.isMemo=function(r){return To(r)===l2};Vr.isPortal=function(r){return To(r)===eO};Vr.isProfiler=function(r){return To(r)===r2};Vr.isStrictMode=function(r){return To(r)===t2};Vr.isSuspense=function(r){return To(r)===s2};Vr.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===e2||r===a2||r===r2||r===t2||r===s2||r===LOe||typeof r=="object"&&r!==null&&(r.$$typeof===u2||r.$$typeof===l2||r.$$typeof===n2||r.$$typeof===i2||r.$$typeof===o2||r.$$typeof===BOe||r.$$typeof===zOe||r.$$typeof===UOe||r.$$typeof===FOe)};Vr.typeOf=To;eX.exports=Vr;var jOe=eX.exports,rX=jOe,HOe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},VOe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},nX={};nX[rX.ForwardRef]=HOe;nX[rX.Memo]=VOe;var qOe=!0;function WOe(r,e,t){var n="";return t.split(" ").forEach(function(i){r[i]!==void 0?e.push(r[i]+";"):n+=i+" "}),n}var iX=function(r,e,t){var n=r.key+"-"+e.name;(t===!1||qOe===!1)&&r.registered[n]===void 0&&(r.registered[n]=e.styles)},GOe=function(r,e,t){iX(r,e,t);var n=r.key+"-"+e.name;if(r.inserted[e.name]===void 0){var i=e;do r.insert(e===i?"."+n:"",i,r.sheet,!0),i=i.next;while(i!==void 0)}};function $Oe(r){for(var e=0,t,n=0,i=r.length;i>=4;++n,i-=4)t=r.charCodeAt(n)&255|(r.charCodeAt(++n)&255)<<8|(r.charCodeAt(++n)&255)<<16|(r.charCodeAt(++n)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(r.charCodeAt(n+2)&255)<<16;case 2:e^=(r.charCodeAt(n+1)&255)<<8;case 1:e^=r.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var XOe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},YOe=/[A-Z]|^ms/g,JOe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,aX=function(r){return r.charCodeAt(1)===45},C6=function(r){return r!=null&&typeof r!="boolean"},tC=AOe(function(r){return aX(r)?r:r.replace(YOe,"-$&").toLowerCase()}),A6=function(r,e){switch(r){case"animation":case"animationName":if(typeof e=="string")return e.replace(JOe,function(t,n,i){return tl={name:n,styles:i,next:tl},n})}return XOe[r]!==1&&!aX(r)&&typeof e=="number"&&e!==0?e+"px":e};function iv(r,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return tl={name:t.name,styles:t.styles,next:tl},t.name;if(t.styles!==void 0){var n=t.next;if(n!==void 0)for(;n!==void 0;)tl={name:n.name,styles:n.styles,next:tl},n=n.next;var i=t.styles+";";return i}return ZOe(r,e,t)}case"function":{if(r!==void 0){var a=tl,o=t(r);return tl=a,iv(r,e,o)}break}}return t}function ZOe(r,e,t){var n="";if(Array.isArray(t))for(var i=0;i<t.length;i++)n+=iv(r,e,t[i])+";";else for(var a in t){var o=t[a];if(typeof o!="object")C6(o)&&(n+=tC(a)+":"+A6(a,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var s=0;s<o.length;s++)C6(o[s])&&(n+=tC(a)+":"+A6(a,o[s])+";");else{var l=iv(r,e,o);switch(a){case"animation":case"animationName":{n+=tC(a)+":"+l+";";break}default:n+=a+"{"+l+"}"}}}return n}var T6=/label:\s*([^\s;\n{]+)\s*(;|$)/g,tl,oX=function(r,e,t){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var n=!0,i="";tl=void 0;var a=r[0];a==null||a.raw===void 0?(n=!1,i+=iv(t,e,a)):i+=a[0];for(var o=1;o<r.length;o++)i+=iv(t,e,r[o]),n&&(i+=a[o]);T6.lastIndex=0;for(var s="",l;(l=T6.exec(i))!==null;)s+="-"+l[1];var u=$Oe(i)+s;return{name:u,styles:i,next:tl}},KOe=function(r){return r()},QOe=xw.useInsertionEffect?xw.useInsertionEffect:!1,eRe=QOe||KOe,rO={}.hasOwnProperty,sX=j.createContext(typeof HTMLElement<"u"?IOe({key:"css"}):null);sX.Provider;var tRe=function(r){return j.forwardRef(function(e,t){var n=j.useContext(sX);return r(e,n,t)})},rRe=j.createContext({}),mD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",nRe=function(r,e){var t={};for(var n in e)rO.call(e,n)&&(t[n]=e[n]);return t[mD]=r,t},iRe=function(r){var e=r.cache,t=r.serialized,n=r.isStringTag;return iX(e,t,n),eRe(function(){return GOe(e,t,n)}),null},aRe=tRe(function(r,e,t){var n=r.css;typeof n=="string"&&e.registered[n]!==void 0&&(n=e.registered[n]);var i=r[mD],a=[n],o="";typeof r.className=="string"?o=WOe(e.registered,a,r.className):r.className!=null&&(o=r.className+" ");var s=oX(a,void 0,j.useContext(rRe));o+=e.key+"-"+s.name;var l={};for(var u in r)rO.call(r,u)&&u!=="css"&&u!==mD&&(l[u]=r[u]);return l.ref=t,l.className=o,j.createElement(j.Fragment,null,j.createElement(iRe,{cache:e,serialized:s,isStringTag:typeof i=="string"}),j.createElement(i,l))}),oRe=aRe,zt=function(r,e){var t=arguments;if(e==null||!rO.call(e,"css"))return j.createElement.apply(void 0,t);var n=t.length,i=new Array(n);i[0]=oRe,i[1]=nRe(r,e);for(var a=2;a<n;a++)i[a]=t[a];return j.createElement.apply(null,i)};function nO(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return oX(e)}var sRe=function(){var r=nO.apply(void 0,arguments),e="animation-"+r.name;return{name:e,styles:"@keyframes "+e+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function lRe(r){if(Array.isArray(r))return r}function uRe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=a.call(t)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function cRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cu(r,e){return lRe(r)||uRe(r,e)||G$(r,e)||cRe()}function lX(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function Cl(r,e){if(r==null)return{};var t,n,i=lX(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function hRe(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}var gD=j.useLayoutEffect,dRe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],IS=function(){};function fRe(r,e){return e?e[0]==="-"?r+e:r+"__"+e:r}function pRe(r,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];var a=[].concat(n);if(e&&r)for(var o in e)e.hasOwnProperty(o)&&e[o]&&a.push("".concat(fRe(r,o)));return a.filter(function(s){return s}).map(function(s){return String(s).trim()}).join(" ")}var LS=function(r){return MRe(r)?r.filter(Boolean):xd(r)==="object"&&r!==null?[r]:[]},uX=function(r){r.className,r.clearValue,r.cx,r.getStyles,r.getClassNames,r.getValue,r.hasValue,r.isMulti,r.isRtl,r.options,r.selectOption,r.selectProps,r.setValue,r.theme;var e=Cl(r,dRe);return Bt({},e)},On=function(r,e,t){var n=r.cx,i=r.getStyles,a=r.getClassNames,o=r.className;return{css:i(e,r),className:n(t??{},a(e,r),o)}};function c2(r){return[document.documentElement,document.body,window].indexOf(r)>-1}function mRe(r){return c2(r)?window.innerHeight:r.clientHeight}function cX(r){return c2(r)?window.pageYOffset:r.scrollTop}function FS(r,e){if(c2(r)){window.scrollTo(0,e);return}r.scrollTop=e}function gRe(r){var e=getComputedStyle(r),t=e.position==="absolute",n=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=r;i=i.parentElement;)if(e=getComputedStyle(i),!(t&&e.position==="static")&&n.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function vRe(r,e,t,n){return t*((r=r/n-1)*r*r+1)+e}function mb(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:IS,i=cX(r),a=e-i,o=10,s=0;function l(){s+=o;var u=vRe(s,i,a,t);FS(r,u),s<t?window.requestAnimationFrame(l):n(r)}l()}function D6(r,e){var t=r.getBoundingClientRect(),n=e.getBoundingClientRect(),i=e.offsetHeight/3;n.bottom+i>t.bottom?FS(r,Math.min(e.offsetTop+e.clientHeight-r.offsetHeight+i,r.scrollHeight)):n.top-i<t.top&&FS(r,Math.max(e.offsetTop-i,0))}function yRe(r){var e=r.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function k6(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function bRe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var hX=!1,xRe={get passive(){return hX=!0}},gb=typeof window<"u"?window:{};gb.addEventListener&&gb.removeEventListener&&(gb.addEventListener("p",IS,xRe),gb.removeEventListener("p",IS,!1));var wRe=hX;function SRe(r){return r!=null}function MRe(r){return Array.isArray(r)}function Yg(r,e,t){return r?e:t}var _Re=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var i=Object.entries(r).filter(function(a){var o=cu(a,1),s=o[0];return!t.includes(s)});return i.reduce(function(a,o){var s=cu(o,2),l=s[0],u=s[1];return a[l]=u,a},{})},ERe=["children","innerProps"],CRe=["children","innerProps"];function ARe(r){var e=r.maxHeight,t=r.menuEl,n=r.minHeight,i=r.placement,a=r.shouldScroll,o=r.isFixedPosition,s=r.controlHeight,l=gRe(t),u={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return u;var c=l.getBoundingClientRect(),h=c.height,d=t.getBoundingClientRect(),f=d.bottom,p=d.height,v=d.top,y=t.offsetParent.getBoundingClientRect(),g=y.top,w=o?window.innerHeight:mRe(l),b=cX(l),m=parseInt(getComputedStyle(t).marginBottom,10),x=parseInt(getComputedStyle(t).marginTop,10),S=g-x,E=w-v,A=S+b,T=h-b-v,C=f-w+b+m,D=b+v-x,O=160;switch(i){case"auto":case"bottom":if(E>=p)return{placement:"bottom",maxHeight:e};if(T>=p&&!o)return a&&mb(l,C,O),{placement:"bottom",maxHeight:e};if(!o&&T>=n||o&&E>=n){a&&mb(l,C,O);var U=o?E-m:T-m;return{placement:"bottom",maxHeight:U}}if(i==="auto"||o){var L=e,F=o?S:A;return F>=n&&(L=Math.min(F-m-s,e)),{placement:"top",maxHeight:L}}if(i==="bottom")return a&&FS(l,C),{placement:"bottom",maxHeight:e};break;case"top":if(S>=p)return{placement:"top",maxHeight:e};if(A>=p&&!o)return a&&mb(l,D,O),{placement:"top",maxHeight:e};if(!o&&A>=n||o&&S>=n){var k=e;return(!o&&A>=n||o&&S>=n)&&(k=o?S-x:A-x),a&&mb(l,D,O),{placement:"top",maxHeight:k}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return u}function TRe(r){var e={bottom:"top",top:"bottom"};return r?e[r]:"bottom"}var dX=function(r){return r==="auto"?"bottom":r},DRe=function(r,e){var t,n=r.placement,i=r.theme,a=i.borderRadius,o=i.spacing,s=i.colors;return Bt((t={label:"menu"},fn(t,TRe(n),"100%"),fn(t,"position","absolute"),fn(t,"width","100%"),fn(t,"zIndex",1),t),e?{}:{backgroundColor:s.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},fX=j.createContext(null),kRe=function(r){var e=r.children,t=r.minMenuHeight,n=r.maxMenuHeight,i=r.menuPlacement,a=r.menuPosition,o=r.menuShouldScrollIntoView,s=r.theme,l=j.useContext(fX)||{},u=l.setPortalPlacement,c=j.useRef(null),h=j.useState(n),d=cu(h,2),f=d[0],p=d[1],v=j.useState(null),y=cu(v,2),g=y[0],w=y[1],b=s.spacing.controlHeight;return gD(function(){var m=c.current;if(m){var x=a==="fixed",S=o&&!x,E=ARe({maxHeight:n,menuEl:m,minHeight:t,placement:i,shouldScroll:S,isFixedPosition:x,controlHeight:b});p(E.maxHeight),w(E.placement),u==null||u(E.placement)}},[n,i,a,o,t,u,b]),e({ref:c,placerProps:Bt(Bt({},r),{},{placement:g||dX(i),maxHeight:f})})},NRe=function(r){var e=r.children,t=r.innerRef,n=r.innerProps;return zt("div",lt({},On(r,"menu",{menu:!0}),{ref:t},n),e)},ORe=NRe,RRe=function(r,e){var t=r.maxHeight,n=r.theme.spacing.baseUnit;return Bt({maxHeight:t,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},e?{}:{paddingBottom:n,paddingTop:n})},PRe=function(r){var e=r.children,t=r.innerProps,n=r.innerRef,i=r.isMulti;return zt("div",lt({},On(r,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:n},t),e)},pX=function(r,e){var t=r.theme,n=t.spacing.baseUnit,i=t.colors;return Bt({textAlign:"center"},e?{}:{color:i.neutral40,padding:"".concat(n*2,"px ").concat(n*3,"px")})},IRe=pX,LRe=pX,FRe=function(r){var e=r.children,t=e===void 0?"No options":e,n=r.innerProps,i=Cl(r,ERe);return zt("div",lt({},On(Bt(Bt({},i),{},{children:t,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),t)},BRe=function(r){var e=r.children,t=e===void 0?"Loading...":e,n=r.innerProps,i=Cl(r,CRe);return zt("div",lt({},On(Bt(Bt({},i),{},{children:t,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),t)},zRe=function(r){var e=r.rect,t=r.offset,n=r.position;return{left:e.left,position:n,top:t,width:e.width,zIndex:1}},URe=function(r){var e=r.appendTo,t=r.children,n=r.controlElement,i=r.innerProps,a=r.menuPlacement,o=r.menuPosition,s=j.useRef(null),l=j.useRef(null),u=j.useState(dX(a)),c=cu(u,2),h=c[0],d=c[1],f=j.useMemo(function(){return{setPortalPlacement:d}},[]),p=j.useState(null),v=cu(p,2),y=v[0],g=v[1],w=j.useCallback(function(){if(n){var S=yRe(n),E=o==="fixed"?0:window.pageYOffset,A=S[h]+E;(A!==(y==null?void 0:y.offset)||S.left!==(y==null?void 0:y.rect.left)||S.width!==(y==null?void 0:y.rect.width))&&g({offset:A,rect:S})}},[n,o,h,y==null?void 0:y.offset,y==null?void 0:y.rect.left,y==null?void 0:y.rect.width]);gD(function(){w()},[w]);var b=j.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),n&&s.current&&(l.current=wG(n,s.current,w,{elementResize:"ResizeObserver"in window}))},[n,w]);gD(function(){b()},[b]);var m=j.useCallback(function(S){s.current=S,b()},[b]);if(!e&&o!=="fixed"||!y)return null;var x=zt("div",lt({ref:m},On(Bt(Bt({},r),{},{offset:y.offset,position:o,rect:y.rect}),"menuPortal",{"menu-portal":!0}),i),t);return zt(fX.Provider,{value:f},e?fm.createPortal(x,e):x)},jRe=function(r){var e=r.isDisabled,t=r.isRtl;return{label:"container",direction:t?"rtl":void 0,pointerEvents:e?"none":void 0,position:"relative"}},HRe=function(r){var e=r.children,t=r.innerProps,n=r.isDisabled,i=r.isRtl;return zt("div",lt({},On(r,"container",{"--is-disabled":n,"--is-rtl":i}),t),e)},VRe=function(r,e){var t=r.theme.spacing,n=r.isMulti,i=r.hasValue,a=r.selectProps.controlShouldRenderValue;return Bt({alignItems:"center",display:n&&i&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},e?{}:{padding:"".concat(t.baseUnit/2,"px ").concat(t.baseUnit*2,"px")})},qRe=function(r){var e=r.children,t=r.innerProps,n=r.isMulti,i=r.hasValue;return zt("div",lt({},On(r,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":i}),t),e)},WRe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},GRe=function(r){var e=r.children,t=r.innerProps;return zt("div",lt({},On(r,"indicatorsContainer",{indicators:!0}),t),e)},N6,$Re=["size"],XRe=["innerProps","isRtl","size"],YRe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},mX=function(r){var e=r.size,t=Cl(r,$Re);return zt("svg",lt({height:e,width:e,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:YRe},t))},iO=function(r){return zt(mX,lt({size:20},r),zt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},gX=function(r){return zt(mX,lt({size:20},r),zt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},vX=function(r,e){var t=r.isFocused,n=r.theme,i=n.spacing.baseUnit,a=n.colors;return Bt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},e?{}:{color:t?a.neutral60:a.neutral20,padding:i*2,":hover":{color:t?a.neutral80:a.neutral40}})},JRe=vX,ZRe=function(r){var e=r.children,t=r.innerProps;return zt("div",lt({},On(r,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),t),e||zt(gX,null))},KRe=vX,QRe=function(r){var e=r.children,t=r.innerProps;return zt("div",lt({},On(r,"clearIndicator",{indicator:!0,"clear-indicator":!0}),t),e||zt(iO,null))},ePe=function(r,e){var t=r.isDisabled,n=r.theme,i=n.spacing.baseUnit,a=n.colors;return Bt({label:"indicatorSeparator",alignSelf:"stretch",width:1},e?{}:{backgroundColor:t?a.neutral10:a.neutral20,marginBottom:i*2,marginTop:i*2})},tPe=function(r){var e=r.innerProps;return zt("span",lt({},e,On(r,"indicatorSeparator",{"indicator-separator":!0})))},rPe=sRe(N6||(N6=hRe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),nPe=function(r,e){var t=r.isFocused,n=r.size,i=r.theme,a=i.colors,o=i.spacing.baseUnit;return Bt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},e?{}:{color:t?a.neutral60:a.neutral20,padding:o*2})},rC=function(r){var e=r.delay,t=r.offset;return zt("span",{css:nO({animation:"".concat(rPe," 1s ease-in-out ").concat(e,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:t?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},iPe=function(r){var e=r.innerProps,t=r.isRtl,n=r.size,i=n===void 0?4:n,a=Cl(r,XRe);return zt("div",lt({},On(Bt(Bt({},a),{},{innerProps:e,isRtl:t,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),e),zt(rC,{delay:0,offset:t}),zt(rC,{delay:160,offset:!0}),zt(rC,{delay:320,offset:!t}))},aPe=function(r,e){var t=r.isDisabled,n=r.isFocused,i=r.theme,a=i.colors,o=i.borderRadius,s=i.spacing;return Bt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:s.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},e?{}:{backgroundColor:t?a.neutral5:a.neutral0,borderColor:t?a.neutral10:n?a.primary:a.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:n?a.primary:a.neutral30}})},oPe=function(r){var e=r.children,t=r.isDisabled,n=r.isFocused,i=r.innerRef,a=r.innerProps,o=r.menuIsOpen;return zt("div",lt({ref:i},On(r,"control",{control:!0,"control--is-disabled":t,"control--is-focused":n,"control--menu-is-open":o}),a,{"aria-disabled":t||void 0}),e)},sPe=oPe,lPe=["data"],uPe=function(r,e){var t=r.theme.spacing;return e?{}:{paddingBottom:t.baseUnit*2,paddingTop:t.baseUnit*2}},cPe=function(r){var e=r.children,t=r.cx,n=r.getStyles,i=r.getClassNames,a=r.Heading,o=r.headingProps,s=r.innerProps,l=r.label,u=r.theme,c=r.selectProps;return zt("div",lt({},On(r,"group",{group:!0}),s),zt(a,lt({},o,{selectProps:c,theme:u,getStyles:n,getClassNames:i,cx:t}),l),zt("div",null,e))},hPe=function(r,e){var t=r.theme,n=t.colors,i=t.spacing;return Bt({label:"group",cursor:"default",display:"block"},e?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:i.baseUnit*3,paddingRight:i.baseUnit*3,textTransform:"uppercase"})},dPe=function(r){var e=uX(r);e.data;var t=Cl(e,lPe);return zt("div",lt({},On(r,"groupHeading",{"group-heading":!0}),t))},fPe=cPe,pPe=["innerRef","isDisabled","isHidden","inputClassName"],mPe=function(r,e){var t=r.isDisabled,n=r.value,i=r.theme,a=i.spacing,o=i.colors;return Bt(Bt({visibility:t?"hidden":"visible",transform:n?"translateZ(0)":""},gPe),e?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:o.neutral80})},yX={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},gPe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Bt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},yX)},vPe=function(r){return Bt({label:"input",color:"inherit",background:0,opacity:r?0:1,width:"100%"},yX)},yPe=function(r){var e=r.cx,t=r.value,n=uX(r),i=n.innerRef,a=n.isDisabled,o=n.isHidden,s=n.inputClassName,l=Cl(n,pPe);return zt("div",lt({},On(r,"input",{"input-container":!0}),{"data-value":t||""}),zt("input",lt({className:e({input:!0},s),ref:i,style:vPe(o),disabled:a},l)))},bPe=yPe,xPe=function(r,e){var t=r.theme,n=t.spacing,i=t.borderRadius,a=t.colors;return Bt({label:"multiValue",display:"flex",minWidth:0},e?{}:{backgroundColor:a.neutral10,borderRadius:i/2,margin:n.baseUnit/2})},wPe=function(r,e){var t=r.theme,n=t.borderRadius,i=t.colors,a=r.cropWithEllipsis;return Bt({overflow:"hidden",textOverflow:a||a===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},e?{}:{borderRadius:n/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},SPe=function(r,e){var t=r.theme,n=t.spacing,i=t.borderRadius,a=t.colors,o=r.isFocused;return Bt({alignItems:"center",display:"flex"},e?{}:{borderRadius:i/2,backgroundColor:o?a.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},bX=function(r){var e=r.children,t=r.innerProps;return zt("div",t,e)},MPe=bX,_Pe=bX;function EPe(r){var e=r.children,t=r.innerProps;return zt("div",lt({role:"button"},t),e||zt(iO,{size:14}))}var CPe=function(r){var e=r.children,t=r.components,n=r.data,i=r.innerProps,a=r.isDisabled,o=r.removeProps,s=r.selectProps,l=t.Container,u=t.Label,c=t.Remove;return zt(l,{data:n,innerProps:Bt(Bt({},On(r,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),i),selectProps:s},zt(u,{data:n,innerProps:Bt({},On(r,"multiValueLabel",{"multi-value__label":!0})),selectProps:s},e),zt(c,{data:n,innerProps:Bt(Bt({},On(r,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(e||"option")},o),selectProps:s}))},APe=CPe,TPe=function(r,e){var t=r.isDisabled,n=r.isFocused,i=r.isSelected,a=r.theme,o=a.spacing,s=a.colors;return Bt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},e?{}:{backgroundColor:i?s.primary:n?s.primary25:"transparent",color:t?s.neutral20:i?s.neutral0:"inherit",padding:"".concat(o.baseUnit*2,"px ").concat(o.baseUnit*3,"px"),":active":{backgroundColor:t?void 0:i?s.primary:s.primary50}})},DPe=function(r){var e=r.children,t=r.isDisabled,n=r.isFocused,i=r.isSelected,a=r.innerRef,o=r.innerProps;return zt("div",lt({},On(r,"option",{option:!0,"option--is-disabled":t,"option--is-focused":n,"option--is-selected":i}),{ref:a,"aria-disabled":t},o),e)},kPe=DPe,NPe=function(r,e){var t=r.theme,n=t.spacing,i=t.colors;return Bt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},e?{}:{color:i.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},OPe=function(r){var e=r.children,t=r.innerProps;return zt("div",lt({},On(r,"placeholder",{placeholder:!0}),t),e)},RPe=OPe,PPe=function(r,e){var t=r.isDisabled,n=r.theme,i=n.spacing,a=n.colors;return Bt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e?{}:{color:t?a.neutral40:a.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},IPe=function(r){var e=r.children,t=r.isDisabled,n=r.innerProps;return zt("div",lt({},On(r,"singleValue",{"single-value":!0,"single-value--is-disabled":t}),n),e)},LPe=IPe,FPe={ClearIndicator:QRe,Control:sPe,DropdownIndicator:ZRe,DownChevron:gX,CrossIcon:iO,Group:fPe,GroupHeading:dPe,IndicatorsContainer:GRe,IndicatorSeparator:tPe,Input:bPe,LoadingIndicator:iPe,Menu:ORe,MenuList:PRe,MenuPortal:URe,LoadingMessage:BRe,NoOptionsMessage:FRe,MultiValue:APe,MultiValueContainer:MPe,MultiValueLabel:_Pe,MultiValueRemove:EPe,Option:kPe,Placeholder:RPe,SelectContainer:HRe,SingleValue:LPe,ValueContainer:qRe},BPe=function(r){return Bt(Bt({},FPe),r.components)},O6=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function zPe(r,e){return!!(r===e||O6(r)&&O6(e))}function UPe(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(!zPe(r[t],e[t]))return!1;return!0}function jPe(r,e){e===void 0&&(e=UPe);var t=null;function n(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var o=r.apply(this,i);return t={lastResult:o,lastArgs:i,lastThis:this},o}return n.clear=function(){t=null},n}var HPe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},VPe=function(r){return zt("span",lt({css:HPe},r))},R6=VPe,qPe={guidance:function(r){var e=r.isSearchable,t=r.isMulti,n=r.tabSelectsValue,i=r.context,a=r.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return a?"".concat(r["aria-label"]||"Select"," is focused ").concat(e?",type to refine list":"",", press Down to open the menu, ").concat(t?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(r){var e=r.action,t=r.label,n=t===void 0?"":t,i=r.labels,a=r.isDisabled;switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return a?"option ".concat(n," is disabled. Select another option."):"option ".concat(n,", selected.");default:return""}},onFocus:function(r){var e=r.context,t=r.focused,n=r.options,i=r.label,a=i===void 0?"":i,o=r.selectValue,s=r.isDisabled,l=r.isSelected,u=r.isAppleDevice,c=function(f,p){return f&&f.length?"".concat(f.indexOf(p)+1," of ").concat(f.length):""};if(e==="value"&&o)return"value ".concat(a," focused, ").concat(c(o,t),".");if(e==="menu"&&u){var h=s?" disabled":"",d="".concat(l?" selected":"").concat(h);return"".concat(a).concat(d,", ").concat(c(n,t),".")}return""},onFilter:function(r){var e=r.inputValue,t=r.resultsMessage;return"".concat(t).concat(e?" for search term "+e:"",".")}},WPe=function(r){var e=r.ariaSelection,t=r.focusedOption,n=r.focusedValue,i=r.focusableOptions,a=r.isFocused,o=r.selectValue,s=r.selectProps,l=r.id,u=r.isAppleDevice,c=s.ariaLiveMessages,h=s.getOptionLabel,d=s.inputValue,f=s.isMulti,p=s.isOptionDisabled,v=s.isSearchable,y=s.menuIsOpen,g=s.options,w=s.screenReaderStatus,b=s.tabSelectsValue,m=s.isLoading,x=s["aria-label"],S=s["aria-live"],E=j.useMemo(function(){return Bt(Bt({},qPe),c||{})},[c]),A=j.useMemo(function(){var L="";if(e&&E.onChange){var F=e.option,k=e.options,R=e.removedValue,z=e.removedValues,B=e.value,X=function(se){return Array.isArray(se)?null:se},Z=R||F||X(B),Q=Z?h(Z):"",J=k||z||void 0,ne=J?J.map(h):[],fe=Bt({isDisabled:Z&&p(Z,o),label:Q,labels:ne},e);L=E.onChange(fe)}return L},[e,E,p,o,h]),T=j.useMemo(function(){var L="",F=t||n,k=!!(t&&o&&o.includes(t));if(F&&E.onFocus){var R={focused:F,label:h(F),isDisabled:p(F,o),isSelected:k,options:i,context:F===t?"menu":"value",selectValue:o,isAppleDevice:u};L=E.onFocus(R)}return L},[t,n,h,p,E,i,o,u]),C=j.useMemo(function(){var L="";if(y&&g.length&&!m&&E.onFilter){var F=w({count:i.length});L=E.onFilter({inputValue:d,resultsMessage:F})}return L},[i,d,y,E,g,w,m]),D=(e==null?void 0:e.action)==="initial-input-focus",O=j.useMemo(function(){var L="";if(E.guidance){var F=n?"value":y?"menu":"input";L=E.guidance({"aria-label":x,context:F,isDisabled:t&&p(t,o),isMulti:f,isSearchable:v,tabSelectsValue:b,isInitialFocus:D})}return L},[x,t,n,f,p,v,y,E,o,b,D]),U=zt(j.Fragment,null,zt("span",{id:"aria-selection"},A),zt("span",{id:"aria-focused"},T),zt("span",{id:"aria-results"},C),zt("span",{id:"aria-guidance"},O));return zt(j.Fragment,null,zt(R6,{id:l},D&&U),zt(R6,{"aria-live":S,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!D&&U))},GPe=WPe,vD=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],$Pe=new RegExp("["+vD.map(function(r){return r.letters}).join("")+"]","g"),xX={};for(var nC=0;nC<vD.length;nC++)for(var iC=vD[nC],aC=0;aC<iC.letters.length;aC++)xX[iC.letters[aC]]=iC.base;var wX=function(r){return r.replace($Pe,function(e){return xX[e]})},XPe=jPe(wX),P6=function(r){return r.replace(/^\s+|\s+$/g,"")},YPe=function(r){return"".concat(r.label," ").concat(r.value)},JPe=function(r){return function(e,t){if(e.data.__isNew__)return!0;var n=Bt({ignoreCase:!0,ignoreAccents:!0,stringify:YPe,trim:!0,matchFrom:"any"},r),i=n.ignoreCase,a=n.ignoreAccents,o=n.stringify,s=n.trim,l=n.matchFrom,u=s?P6(t):t,c=s?P6(o(e)):o(e);return i&&(u=u.toLowerCase(),c=c.toLowerCase()),a&&(u=XPe(u),c=wX(c)),l==="start"?c.substr(0,u.length)===u:c.indexOf(u)>-1}},ZPe=["innerRef"];function KPe(r){var e=r.innerRef,t=Cl(r,ZPe),n=_Re(t,"onExited","in","enter","exit","appear");return zt("input",lt({ref:e},n,{css:nO({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var QPe=function(r){r.cancelable&&r.preventDefault(),r.stopPropagation()};function eIe(r){var e=r.isEnabled,t=r.onBottomArrive,n=r.onBottomLeave,i=r.onTopArrive,a=r.onTopLeave,o=j.useRef(!1),s=j.useRef(!1),l=j.useRef(0),u=j.useRef(null),c=j.useCallback(function(y,g){if(u.current!==null){var w=u.current,b=w.scrollTop,m=w.scrollHeight,x=w.clientHeight,S=u.current,E=g>0,A=m-x-b,T=!1;A>g&&o.current&&(n&&n(y),o.current=!1),E&&s.current&&(a&&a(y),s.current=!1),E&&g>A?(t&&!o.current&&t(y),S.scrollTop=m,T=!0,o.current=!0):!E&&-g>b&&(i&&!s.current&&i(y),S.scrollTop=0,T=!0,s.current=!0),T&&QPe(y)}},[t,n,i,a]),h=j.useCallback(function(y){c(y,y.deltaY)},[c]),d=j.useCallback(function(y){l.current=y.changedTouches[0].clientY},[]),f=j.useCallback(function(y){var g=l.current-y.changedTouches[0].clientY;c(y,g)},[c]),p=j.useCallback(function(y){if(y){var g=wRe?{passive:!1}:!1;y.addEventListener("wheel",h,g),y.addEventListener("touchstart",d,g),y.addEventListener("touchmove",f,g)}},[f,d,h]),v=j.useCallback(function(y){y&&(y.removeEventListener("wheel",h,!1),y.removeEventListener("touchstart",d,!1),y.removeEventListener("touchmove",f,!1))},[f,d,h]);return j.useEffect(function(){if(e){var y=u.current;return p(y),function(){v(y)}}},[e,p,v]),function(y){u.current=y}}var I6=["boxSizing","height","overflow","paddingRight","position"],L6={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function F6(r){r.preventDefault()}function B6(r){r.stopPropagation()}function z6(){var r=this.scrollTop,e=this.scrollHeight,t=r+this.offsetHeight;r===0?this.scrollTop=1:t===e&&(this.scrollTop=r-1)}function U6(){return"ontouchstart"in window||navigator.maxTouchPoints}var j6=!!(typeof window<"u"&&window.document&&window.document.createElement),wg=0,ff={capture:!1,passive:!1};function tIe(r){var e=r.isEnabled,t=r.accountForScrollbars,n=t===void 0?!0:t,i=j.useRef({}),a=j.useRef(null),o=j.useCallback(function(l){if(j6){var u=document.body,c=u&&u.style;if(n&&I6.forEach(function(p){var v=c&&c[p];i.current[p]=v}),n&&wg<1){var h=parseInt(i.current.paddingRight,10)||0,d=document.body?document.body.clientWidth:0,f=window.innerWidth-d+h||0;Object.keys(L6).forEach(function(p){var v=L6[p];c&&(c[p]=v)}),c&&(c.paddingRight="".concat(f,"px"))}u&&U6()&&(u.addEventListener("touchmove",F6,ff),l&&(l.addEventListener("touchstart",z6,ff),l.addEventListener("touchmove",B6,ff))),wg+=1}},[n]),s=j.useCallback(function(l){if(j6){var u=document.body,c=u&&u.style;wg=Math.max(wg-1,0),n&&wg<1&&I6.forEach(function(h){var d=i.current[h];c&&(c[h]=d)}),u&&U6()&&(u.removeEventListener("touchmove",F6,ff),l&&(l.removeEventListener("touchstart",z6,ff),l.removeEventListener("touchmove",B6,ff)))}},[n]);return j.useEffect(function(){if(e){var l=a.current;return o(l),function(){s(l)}}},[e,o,s]),function(l){a.current=l}}var rIe=function(r){var e=r.target;return e.ownerDocument.activeElement&&e.ownerDocument.activeElement.blur()},nIe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function iIe(r){var e=r.children,t=r.lockEnabled,n=r.captureEnabled,i=n===void 0?!0:n,a=r.onBottomArrive,o=r.onBottomLeave,s=r.onTopArrive,l=r.onTopLeave,u=eIe({isEnabled:i,onBottomArrive:a,onBottomLeave:o,onTopArrive:s,onTopLeave:l}),c=tIe({isEnabled:t}),h=function(d){u(d),c(d)};return zt(j.Fragment,null,t&&zt("div",{onClick:rIe,css:nIe}),e(h))}var aIe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},oIe=function(r){var e=r.name,t=r.onFocus;return zt("input",{required:!0,name:e,tabIndex:-1,"aria-hidden":"true",onFocus:t,css:aIe,value:"",onChange:function(){}})},sIe=oIe;function aO(r){var e;return typeof window<"u"&&window.navigator!=null?r.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function lIe(){return aO(/^iPhone/i)}function SX(){return aO(/^Mac/i)}function uIe(){return aO(/^iPad/i)||SX()&&navigator.maxTouchPoints>1}function cIe(){return lIe()||uIe()}function hIe(){return SX()||cIe()}var dIe=function(r){return r.label},MX=function(r){return r.label},_X=function(r){return r.value},fIe=function(r){return!!r.isDisabled},pIe={clearIndicator:KRe,container:jRe,control:aPe,dropdownIndicator:JRe,group:uPe,groupHeading:hPe,indicatorsContainer:WRe,indicatorSeparator:ePe,input:mPe,loadingIndicator:nPe,loadingMessage:LRe,menu:DRe,menuList:RRe,menuPortal:zRe,multiValue:xPe,multiValueLabel:wPe,multiValueRemove:SPe,noOptionsMessage:IRe,option:TPe,placeholder:NPe,singleValue:PPe,valueContainer:VRe},mIe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},gIe=4,EX=4,vIe=38,yIe=EX*2,bIe={baseUnit:EX,controlHeight:vIe,menuGutter:yIe},oC={borderRadius:gIe,colors:mIe,spacing:bIe},xIe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:k6(),captureMenuScroll:!k6(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:JPe(),formatGroupLabel:dIe,getOptionLabel:MX,getOptionValue:_X,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:fIe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!bRe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(r){var e=r.count;return"".concat(e," result").concat(e!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function H6(r,e,t,n){var i=TX(r,e,t),a=DX(r,e,t),o=AX(r,e),s=BS(r,e);return{type:"option",data:e,isDisabled:i,isSelected:a,label:o,value:s,index:n}}function ew(r,e){return r.options.map(function(t,n){if("options"in t){var i=t.options.map(function(o,s){return H6(r,o,e,s)}).filter(function(o){return q6(r,o)});return i.length>0?{type:"group",data:t,options:i,index:n}:void 0}var a=H6(r,t,e,n);return q6(r,a)?a:void 0}).filter(SRe)}function CX(r){return r.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Ap(t.options.map(function(n){return n.data}))):e.push(t.data),e},[])}function V6(r,e){return r.reduce(function(t,n){return n.type==="group"?t.push.apply(t,Ap(n.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(n.index,"-").concat(i.index)}}))):t.push({data:n.data,id:"".concat(e,"-").concat(n.index)}),t},[])}function wIe(r,e){return CX(ew(r,e))}function q6(r,e){var t=r.inputValue,n=t===void 0?"":t,i=e.data,a=e.isSelected,o=e.label,s=e.value;return(!NX(r)||!a)&&kX(r,{label:o,value:s,data:i},n)}function SIe(r,e){var t=r.focusedValue,n=r.selectValue,i=n.indexOf(t);if(i>-1){var a=e.indexOf(t);if(a>-1)return t;if(i<e.length)return e[i]}return null}function MIe(r,e){var t=r.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var sC=function(r,e){var t,n=(t=r.find(function(i){return i.data===e}))===null||t===void 0?void 0:t.id;return n||null},AX=function(r,e){return r.getOptionLabel(e)},BS=function(r,e){return r.getOptionValue(e)};function TX(r,e,t){return typeof r.isOptionDisabled=="function"?r.isOptionDisabled(e,t):!1}function DX(r,e,t){if(t.indexOf(e)>-1)return!0;if(typeof r.isOptionSelected=="function")return r.isOptionSelected(e,t);var n=BS(r,e);return t.some(function(i){return BS(r,i)===n})}function kX(r,e,t){return r.filterOption?r.filterOption(e,t):!0}var NX=function(r){var e=r.hideSelectedOptions,t=r.isMulti;return e===void 0?t:e},_Ie=1,OX=function(r){QNe(t,r);var e=rOe(t);function t(n){var i;if(ZNe(this,t),i=e.call(this,n),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=hIe(),i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,u){var c=i.props,h=c.onChange,d=c.name;u.name=d,i.ariaOnChange(l,u),h(l,u)},i.setValue=function(l,u,c){var h=i.props,d=h.closeMenuOnSelect,f=h.isMulti,p=h.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:p}),d&&(i.setState({inputIsHiddenAfterUpdate:!f}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:u,option:c})},i.selectOption=function(l){var u=i.props,c=u.blurInputOnSelect,h=u.isMulti,d=u.name,f=i.state.selectValue,p=h&&i.isOptionSelected(l,f),v=i.isOptionDisabled(l,f);if(p){var y=i.getOptionValue(l);i.setValue(f.filter(function(g){return i.getOptionValue(g)!==y}),"deselect-option",l)}else if(!v)h?i.setValue([].concat(Ap(f),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:d});return}c&&i.blurInput()},i.removeValue=function(l){var u=i.props.isMulti,c=i.state.selectValue,h=i.getOptionValue(l),d=c.filter(function(p){return i.getOptionValue(p)!==h}),f=Yg(u,d,d[0]||null);i.onChange(f,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(Yg(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,u=i.state.selectValue,c=u[u.length-1],h=u.slice(0,u.length-1),d=Yg(l,h,h[0]||null);i.onChange(d,{action:"pop-value",removedValue:c})},i.getFocusedOptionId=function(l){return sC(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return V6(ew(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return pRe.apply(void 0,[i.props.classNamePrefix].concat(u))},i.getOptionLabel=function(l){return AX(i.props,l)},i.getOptionValue=function(l){return BS(i.props,l)},i.getStyles=function(l,u){var c=i.props.unstyled,h=pIe[l](u,c);h.boxSizing="border-box";var d=i.props.styles[l];return d?d(h,u):h},i.getClassNames=function(l,u){var c,h;return(c=(h=i.props.classNames)[l])===null||c===void 0?void 0:c.call(h,u)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return BPe(i.props)},i.buildCategorizedOptions=function(){return ew(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return CX(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,u){i.setState({ariaSelection:Bt({value:l},u)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var u=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():u&&i.openMenu("first"):(u&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var u=i.props,c=u.isMulti,h=u.menuIsOpen;i.focusInput(),h?(i.setState({inputIsHiddenAfterUpdate:!c}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&c2(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var u=l.touches,c=u&&u.item(0);c&&(i.initialTouchX=c.clientX,i.initialTouchY=c.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var u=l.touches,c=u&&u.item(0);if(c){var h=Math.abs(c.clientX-i.initialTouchX),d=Math.abs(c.clientY-i.initialTouchY),f=5;i.userIsDragging=h>f||d>f}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var u=i.props.inputValue,c=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(c,{action:"input-change",prevInputValue:u}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var u=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:u}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var u=i.getFocusableOptions(),c=u.indexOf(l);i.setState({focusedOption:l,focusedOptionId:c>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return NX(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var u=i.props,c=u.isMulti,h=u.backspaceRemovesValue,d=u.escapeClearsValue,f=u.inputValue,p=u.isClearable,v=u.isDisabled,y=u.menuIsOpen,g=u.onKeyDown,w=u.tabSelectsValue,b=u.openMenuOnFocus,m=i.state,x=m.focusedOption,S=m.focusedValue,E=m.selectValue;if(!v&&!(typeof g=="function"&&(g(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!c||f)return;i.focusValue("previous");break;case"ArrowRight":if(!c||f)return;i.focusValue("next");break;case"Delete":case"Backspace":if(f)return;if(S)i.removeValue(S);else{if(!h)return;c?i.popValue():p&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!y||!w||!x||b&&i.isOptionSelected(x,E))return;i.selectOption(x);break;case"Enter":if(l.keyCode===229)break;if(y){if(!x||i.isComposing)return;i.selectOption(x);break}return;case"Escape":y?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:f}),i.onMenuClose()):p&&d&&i.clearValue();break;case" ":if(f)return;if(!y){i.openMenu("first");break}if(!x)return;i.selectOption(x);break;case"ArrowUp":y?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":y?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!y)return;i.focusOption("pageup");break;case"PageDown":if(!y)return;i.focusOption("pagedown");break;case"Home":if(!y)return;i.focusOption("first");break;case"End":if(!y)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++_Ie),i.state.selectValue=LS(n.value),n.menuIsOpen&&i.state.selectValue.length){var a=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),s=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=a,i.state.focusedOption=o[s],i.state.focusedOptionId=sC(a,o[s])}return i}return KNe(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&D6(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(n){var i=this.props,a=i.isDisabled,o=i.menuIsOpen,s=this.state.isFocused;(s&&!a&&n.isDisabled||s&&o&&!n.menuIsOpen)&&this.focusInput(),s&&a&&!n.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!s&&!a&&n.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(D6(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(n,i){this.props.onInputChange(n,i)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(n){var i=this,a=this.state,o=a.selectValue,s=a.isFocused,l=this.buildFocusableOptions(),u=n==="first"?0:l.length-1;if(!this.props.isMulti){var c=l.indexOf(o[0]);c>-1&&(u=c)}this.scrollToFocusedOptionOnUpdate=!(s&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:l[u],focusedOptionId:this.getFocusedOptionId(l[u])},function(){return i.onMenuOpen()})}},{key:"focusValue",value:function(n){var i=this.state,a=i.selectValue,o=i.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var s=a.indexOf(o);o||(s=-1);var l=a.length-1,u=-1;if(a.length){switch(n){case"previous":s===0?u=0:s===-1?u=l:u=s-1;break;case"next":s>-1&&s<l&&(u=s+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:a[u]})}}}},{key:"focusOption",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",i=this.props.pageSize,a=this.state.focusedOption,o=this.getFocusableOptions();if(o.length){var s=0,l=o.indexOf(a);a||(l=-1),n==="up"?s=l>0?l-1:o.length-1:n==="down"?s=(l+1)%o.length:n==="pageup"?(s=l-i,s<0&&(s=0)):n==="pagedown"?(s=l+i,s>o.length-1&&(s=o.length-1)):n==="last"&&(s=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[s],focusedValue:null,focusedOptionId:this.getFocusedOptionId(o[s])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(oC):Bt(Bt({},oC),this.props.theme):oC}},{key:"getCommonProps",value:function(){var n=this.clearValue,i=this.cx,a=this.getStyles,o=this.getClassNames,s=this.getValue,l=this.selectOption,u=this.setValue,c=this.props,h=c.isMulti,d=c.isRtl,f=c.options,p=this.hasValue();return{clearValue:n,cx:i,getStyles:a,getClassNames:o,getValue:s,hasValue:p,isMulti:h,isRtl:d,options:f,selectOption:l,selectProps:c,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var n=this.state.selectValue;return n.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var n=this.props,i=n.isClearable,a=n.isMulti;return i===void 0?a:i}},{key:"isOptionDisabled",value:function(n,i){return TX(this.props,n,i)}},{key:"isOptionSelected",value:function(n,i){return DX(this.props,n,i)}},{key:"filterOption",value:function(n,i){return kX(this.props,n,i)}},{key:"formatOptionLabel",value:function(n,i){if(typeof this.props.formatOptionLabel=="function"){var a=this.props.inputValue,o=this.state.selectValue;return this.props.formatOptionLabel(n,{context:i,inputValue:a,selectValue:o})}else return this.getOptionLabel(n)}},{key:"formatGroupLabel",value:function(n){return this.props.formatGroupLabel(n)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var n=this.props,i=n.isDisabled,a=n.isSearchable,o=n.inputId,s=n.inputValue,l=n.tabIndex,u=n.form,c=n.menuIsOpen,h=n.required,d=this.getComponents(),f=d.Input,p=this.state,v=p.inputIsHidden,y=p.ariaSelection,g=this.commonProps,w=o||this.getElementId("input"),b=Bt(Bt(Bt({"aria-autocomplete":"list","aria-expanded":c,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},c&&{"aria-controls":this.getElementId("listbox")}),!a&&{"aria-readonly":!0}),this.hasValue()?(y==null?void 0:y.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return a?j.createElement(f,lt({},g,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:i,isHidden:v,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:l,form:u,type:"text",value:s},b)):j.createElement(KPe,lt({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:IS,onFocus:this.onInputFocus,disabled:i,tabIndex:l,inputMode:"none",form:u,value:""},b))}},{key:"renderPlaceholderOrValue",value:function(){var n=this,i=this.getComponents(),a=i.MultiValue,o=i.MultiValueContainer,s=i.MultiValueLabel,l=i.MultiValueRemove,u=i.SingleValue,c=i.Placeholder,h=this.commonProps,d=this.props,f=d.controlShouldRenderValue,p=d.isDisabled,v=d.isMulti,y=d.inputValue,g=d.placeholder,w=this.state,b=w.selectValue,m=w.focusedValue,x=w.isFocused;if(!this.hasValue()||!f)return y?null:j.createElement(c,lt({},h,{key:"placeholder",isDisabled:p,isFocused:x,innerProps:{id:this.getElementId("placeholder")}}),g);if(v)return b.map(function(E,A){var T=E===m,C="".concat(n.getOptionLabel(E),"-").concat(n.getOptionValue(E));return j.createElement(a,lt({},h,{components:{Container:o,Label:s,Remove:l},isFocused:T,isDisabled:p,key:C,index:A,removeProps:{onClick:function(){return n.removeValue(E)},onTouchEnd:function(){return n.removeValue(E)},onMouseDown:function(D){D.preventDefault()}},data:E}),n.formatOptionLabel(E,"value"))});if(y)return null;var S=b[0];return j.createElement(u,lt({},h,{data:S,isDisabled:p}),this.formatOptionLabel(S,"value"))}},{key:"renderClearIndicator",value:function(){var n=this.getComponents(),i=n.ClearIndicator,a=this.commonProps,o=this.props,s=o.isDisabled,l=o.isLoading,u=this.state.isFocused;if(!this.isClearable()||!i||s||!this.hasValue()||l)return null;var c={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return j.createElement(i,lt({},a,{innerProps:c,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var n=this.getComponents(),i=n.LoadingIndicator,a=this.commonProps,o=this.props,s=o.isDisabled,l=o.isLoading,u=this.state.isFocused;if(!i||!l)return null;var c={"aria-hidden":"true"};return j.createElement(i,lt({},a,{innerProps:c,isDisabled:s,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var n=this.getComponents(),i=n.DropdownIndicator,a=n.IndicatorSeparator;if(!i||!a)return null;var o=this.commonProps,s=this.props.isDisabled,l=this.state.isFocused;return j.createElement(a,lt({},o,{isDisabled:s,isFocused:l}))}},{key:"renderDropdownIndicator",value:function(){var n=this.getComponents(),i=n.DropdownIndicator;if(!i)return null;var a=this.commonProps,o=this.props.isDisabled,s=this.state.isFocused,l={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return j.createElement(i,lt({},a,{innerProps:l,isDisabled:o,isFocused:s}))}},{key:"renderMenu",value:function(){var n=this,i=this.getComponents(),a=i.Group,o=i.GroupHeading,s=i.Menu,l=i.MenuList,u=i.MenuPortal,c=i.LoadingMessage,h=i.NoOptionsMessage,d=i.Option,f=this.commonProps,p=this.state.focusedOption,v=this.props,y=v.captureMenuScroll,g=v.inputValue,w=v.isLoading,b=v.loadingMessage,m=v.minMenuHeight,x=v.maxMenuHeight,S=v.menuIsOpen,E=v.menuPlacement,A=v.menuPosition,T=v.menuPortalTarget,C=v.menuShouldBlockScroll,D=v.menuShouldScrollIntoView,O=v.noOptionsMessage,U=v.onMenuScrollToTop,L=v.onMenuScrollToBottom;if(!S)return null;var F=function(Z,Q){var J=Z.type,ne=Z.data,fe=Z.isDisabled,se=Z.isSelected,ye=Z.label,De=Z.value,pe=p===ne,Te=fe?void 0:function(){return n.onOptionHover(ne)},be=fe?void 0:function(){return n.selectOption(ne)},re="".concat(n.getElementId("option"),"-").concat(Q),Re={id:re,onClick:be,onMouseMove:Te,onMouseOver:Te,tabIndex:-1,role:"option","aria-selected":n.isAppleDevice?void 0:se};return j.createElement(d,lt({},f,{innerProps:Re,data:ne,isDisabled:fe,isSelected:se,key:re,label:ye,type:J,value:De,isFocused:pe,innerRef:pe?n.getFocusedOptionRef:void 0}),n.formatOptionLabel(Z.data,"menu"))},k;if(this.hasOptions())k=this.getCategorizedOptions().map(function(Z){if(Z.type==="group"){var Q=Z.data,J=Z.options,ne=Z.index,fe="".concat(n.getElementId("group"),"-").concat(ne),se="".concat(fe,"-heading");return j.createElement(a,lt({},f,{key:fe,data:Q,options:J,Heading:o,headingProps:{id:se,data:Z.data},label:n.formatGroupLabel(Z.data)}),Z.options.map(function(ye){return F(ye,"".concat(ne,"-").concat(ye.index))}))}else if(Z.type==="option")return F(Z,"".concat(Z.index))});else if(w){var R=b({inputValue:g});if(R===null)return null;k=j.createElement(c,f,R)}else{var z=O({inputValue:g});if(z===null)return null;k=j.createElement(h,f,z)}var B={minMenuHeight:m,maxMenuHeight:x,menuPlacement:E,menuPosition:A,menuShouldScrollIntoView:D},X=j.createElement(kRe,lt({},f,B),function(Z){var Q=Z.ref,J=Z.placerProps,ne=J.placement,fe=J.maxHeight;return j.createElement(s,lt({},f,B,{innerRef:Q,innerProps:{onMouseDown:n.onMenuMouseDown,onMouseMove:n.onMenuMouseMove},isLoading:w,placement:ne}),j.createElement(iIe,{captureEnabled:y,onTopArrive:U,onBottomArrive:L,lockEnabled:C},function(se){return j.createElement(l,lt({},f,{innerRef:function(ye){n.getMenuListRef(ye),se(ye)},innerProps:{role:"listbox","aria-multiselectable":f.isMulti,id:n.getElementId("listbox")},isLoading:w,maxHeight:fe,focusedOption:p}),k)}))});return T||A==="fixed"?j.createElement(u,lt({},f,{appendTo:T,controlElement:this.controlRef,menuPlacement:E,menuPosition:A}),X):X}},{key:"renderFormField",value:function(){var n=this,i=this.props,a=i.delimiter,o=i.isDisabled,s=i.isMulti,l=i.name,u=i.required,c=this.state.selectValue;if(u&&!this.hasValue()&&!o)return j.createElement(sIe,{name:l,onFocus:this.onValueInputFocus});if(!(!l||o))if(s)if(a){var h=c.map(function(p){return n.getOptionValue(p)}).join(a);return j.createElement("input",{name:l,type:"hidden",value:h})}else{var d=c.length>0?c.map(function(p,v){return j.createElement("input",{key:"i-".concat(v),name:l,type:"hidden",value:n.getOptionValue(p)})}):j.createElement("input",{name:l,type:"hidden",value:""});return j.createElement("div",null,d)}else{var f=c[0]?this.getOptionValue(c[0]):"";return j.createElement("input",{name:l,type:"hidden",value:f})}}},{key:"renderLiveRegion",value:function(){var n=this.commonProps,i=this.state,a=i.ariaSelection,o=i.focusedOption,s=i.focusedValue,l=i.isFocused,u=i.selectValue,c=this.getFocusableOptions();return j.createElement(GPe,lt({},n,{id:this.getElementId("live-region"),ariaSelection:a,focusedOption:o,focusedValue:s,isFocused:l,selectValue:u,focusableOptions:c,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var n=this.getComponents(),i=n.Control,a=n.IndicatorsContainer,o=n.SelectContainer,s=n.ValueContainer,l=this.props,u=l.className,c=l.id,h=l.isDisabled,d=l.menuIsOpen,f=this.state.isFocused,p=this.commonProps=this.getCommonProps();return j.createElement(o,lt({},p,{className:u,innerProps:{id:c,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:f}),this.renderLiveRegion(),j.createElement(i,lt({},p,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:f,menuIsOpen:d}),j.createElement(s,lt({},p,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),j.createElement(a,lt({},p,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(n,i){var a=i.prevProps,o=i.clearFocusValueOnUpdate,s=i.inputIsHiddenAfterUpdate,l=i.ariaSelection,u=i.isFocused,c=i.prevWasFocused,h=i.instancePrefix,d=n.options,f=n.value,p=n.menuIsOpen,v=n.inputValue,y=n.isMulti,g=LS(f),w={};if(a&&(f!==a.value||d!==a.options||p!==a.menuIsOpen||v!==a.inputValue)){var b=p?wIe(n,g):[],m=p?V6(ew(n,g),"".concat(h,"-option")):[],x=o?SIe(i,g):null,S=MIe(i,b),E=sC(m,S);w={selectValue:g,focusedOption:S,focusedOptionId:E,focusableOptionsWithIds:m,focusedValue:x,clearFocusValueOnUpdate:!1}}var A=s!=null&&n!==a?{inputIsHidden:s,inputIsHiddenAfterUpdate:void 0}:{},T=l,C=u&&c;return u&&!C&&(T={value:Yg(y,g,g[0]||null),options:g,action:"initial-input-focus"},C=!c),(l==null?void 0:l.action)==="initial-input-focus"&&(T=null),Bt(Bt(Bt({},w),A),{},{prevProps:n,ariaSelection:T,prevWasFocused:C})}}]),t}(j.Component);OX.defaultProps=xIe;var EIe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function CIe(r){var e=r.defaultInputValue,t=e===void 0?"":e,n=r.defaultMenuIsOpen,i=n===void 0?!1:n,a=r.defaultValue,o=a===void 0?null:a,s=r.inputValue,l=r.menuIsOpen,u=r.onChange,c=r.onInputChange,h=r.onMenuClose,d=r.onMenuOpen,f=r.value,p=Cl(r,EIe),v=j.useState(s!==void 0?s:t),y=cu(v,2),g=y[0],w=y[1],b=j.useState(l!==void 0?l:i),m=cu(b,2),x=m[0],S=m[1],E=j.useState(f!==void 0?f:o),A=cu(E,2),T=A[0],C=A[1],D=j.useCallback(function(z,B){typeof u=="function"&&u(z,B),C(z)},[u]),O=j.useCallback(function(z,B){var X;typeof c=="function"&&(X=c(z,B)),w(X!==void 0?X:z)},[c]),U=j.useCallback(function(){typeof d=="function"&&d(),S(!0)},[d]),L=j.useCallback(function(){typeof h=="function"&&h(),S(!1)},[h]),F=s!==void 0?s:g,k=l!==void 0?l:x,R=f!==void 0?f:T;return Bt(Bt({},p),{},{inputValue:F,menuIsOpen:k,onChange:D,onInputChange:O,onMenuClose:L,onMenuOpen:U,value:R})}var AIe=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],W6=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=String(r).toLowerCase(),i=String(t.getOptionValue(e)).toLowerCase(),a=String(t.getOptionLabel(e)).toLowerCase();return i===n||a===n},lC={formatCreateLabel:function(r){return'Create "'.concat(r,'"')},isValidNewOption:function(r,e,t,n){return!(!r||e.some(function(i){return W6(r,i,n)})||t.some(function(i){return W6(r,i,n)}))},getNewOptionData:function(r,e){return{label:e,value:r,__isNew__:!0}}};function TIe(r){var e=r.allowCreateWhileLoading,t=e===void 0?!1:e,n=r.createOptionPosition,i=n===void 0?"last":n,a=r.formatCreateLabel,o=a===void 0?lC.formatCreateLabel:a,s=r.isValidNewOption,l=s===void 0?lC.isValidNewOption:s,u=r.getNewOptionData,c=u===void 0?lC.getNewOptionData:u,h=r.onCreateOption,d=r.options,f=d===void 0?[]:d,p=r.onChange,v=Cl(r,AIe),y=v.getOptionValue,g=y===void 0?_X:y,w=v.getOptionLabel,b=w===void 0?MX:w,m=v.inputValue,x=v.isLoading,S=v.isMulti,E=v.value,A=v.name,T=j.useMemo(function(){return l(m,LS(E),f,{getOptionValue:g,getOptionLabel:b})?c(m,o(m)):void 0},[o,c,b,g,m,l,f,E]),C=j.useMemo(function(){return(t||!x)&&T?i==="first"?[T].concat(Ap(f)):[].concat(Ap(f),[T]):f},[t,i,x,T,f]),D=j.useCallback(function(O,U){if(U.action!=="select-option")return p(O,U);var L=Array.isArray(O)?O:[O];if(L[L.length-1]===T){if(h)h(m);else{var F=c(m,m),k={action:"create-option",name:A,option:F};p(Yg(S,[].concat(Ap(LS(E)),[F]),F),k)}return}p(O,U)},[c,m,S,A,T,h,p,E]);return Bt(Bt({},v),{},{options:C,onChange:D})}var DIe=j.forwardRef(function(r,e){var t=CIe(r),n=TIe(t);return j.createElement(OX,lt({ref:e},n))}),kIe=DIe;const tw=[{value:"abundance-tool",label:"Abundance tool"},{value:"examples",label:"Example"},{value:"furniture",label:"Furniture"},{value:"hardware",label:"Hardware"},{value:"project",label:"Project"}],RX=r=>{var e=null,t=null,n=`###### Note: Do not edit this file directly, it is automatically generated from the CAD model 
# Bill Of Materials 
 |Part|Number Needed|Price|Source| 
 |----|----------|-----|-----|`,i="###### Note: Do not edit this file directly, it is automatically generated from the CAD model";const a=r.authorizedUserOcto,o=r.setExportPopUp,s=r.exporting,l=[];Object.keys(x6).forEach(x=>{l.push(x)});const u=mm(),c=j.useRef(),h=j.useRef(),d=j.useRef(),f=j.useRef(),p=j.useRef(),[v,y]=j.useState(!1),[g,w]=j.useState(0),b=async([x,S,E,A,T],C,D)=>{S.push("abundance-project"),C!==void 0&&D?(I.topLevelMolecule=C,C.topLevel=!0):I.topLevelMolecule=new uy({x:0,y:0,topLevel:!0,name:x,atomType:"Molecule",uniqueID:I.generateUniqueID(),unitsKey:T}),I.currentMolecule=I.topLevelMolecule,await a.request("POST /user/repos",{name:x,description:E,headers:{"X-GitHub-Api-Version":"2022-11-28"}}).catch(O=>{window.alert("Error creating project. That name might be taken already. Please try again with a different name."),y(!1)}).then(O=>{w(10),t=O.data.name,e=I.currentUser,I.currentRepo=O.data;var U=I.topLevelMolecule.serialize();U.filetypeVersion=1;const L=window.btoa(JSON.stringify(U,null,4));a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"project.abundance",message:"Initialize repo",content:L}).then(F=>{w(20);var k=window.btoa(n);a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"BillOfMaterials.md",message:"initialize BOM",content:k}).then(()=>{w(30),k=window.btoa(i),a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"README.md",message:"initialize README",content:k}).then(()=>{w(40),a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"project.svg",message:"SVG Picture",content:""}).then(()=>{w(50),a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:".gitattributes",message:"Create gitattributes",content:window.btoa("data binary")}).then(()=>{w(60),a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"data.json",message:"Data file",content:""}).then(()=>{w(80),a.rest.repos.createOrUpdateFileContents({owner:e,repo:t,path:"LICENSE.txt",message:"Establish license",content:window.btoa(I.toBinaryStr(x6[A]))}).then(()=>{w(90),a.rest.repos.replaceAllTopics({owner:e,repo:t,names:S}).then(()=>{o(!1),u(`/${I.currentRepo.id}`)})})})})})})})})})},m=async x=>{x.preventDefault(),y(!0);const S=c.current.value,E=h.current.getValue(),A=d.current.value,T=[],C=f.current.value,D=p.current.value;if(E.forEach(U=>{T.push(U.value)}),I.currentMolecule)var O=I.currentMolecule;b([S,T,A,C,D],O,s)};return ue.jsx(ue.Fragment,{children:ue.jsx("div",{className:"login-page export-div",children:ue.jsxs("div",{className:"form animate fadeInUp one",children:[ue.jsx("button",{style:{width:"3%",display:"block"},onClick:()=>{o(!1)},className:"closeButton",children:ue.jsx("img",{})}),ue.jsxs("form",{onSubmit:x=>{m(x)},children:[ue.jsx("h2",{children:"Create a New Project"}),ue.jsx("label",{htmlFor:"project-name",children:"Project Name"}),ue.jsx("input",{name:"Project Name",placeholder:"Project Name",ref:c,required:!0}),ue.jsx("label",{htmlFor:"license-options",children:"License"}),ue.jsx("select",{id:"license-options",ref:f,children:l.map(x=>ue.jsx("option",{value:x,children:x},x))}),ue.jsx("label",{htmlFor:"measure-units",children:"Units"}),ue.jsxs("select",{id:"measure-units",ref:p,children:[ue.jsx("option",{value:"Inches",children:"Inches"},"inchesop"),ue.jsx("option",{value:"MM",children:"MM"},"millop")]}),ue.jsx("label",{htmlFor:"project-description",children:"Project Description"}),ue.jsx("input",{placeholder:"Project Description",ref:d}),ue.jsx("label",{htmlFor:"project-topics",children:"Project Topics"}),ue.jsx(kIe,{defaultValue:[tw[0],tw[1]],isMulti:!0,name:"Project Topics",options:tw,className:"basic-multi-select",classNamePrefix:"select",ref:h}),ue.jsx("button",{className:"submit-button",disabled:v,type:"submit",children:v?g+"%":"Submit/Export to Github"})]})]})})})};var G6=null;const NIe=r=>ue.jsx("div",{className:"login-page",children:ue.jsxs("div",{className:"form animate fadeInUp one",children:[ue.jsxs("div",{id:"gitSide",className:"logindiv",children:[ue.jsx("img",{className:"logo",src:"/imgs/abundance_logo.png",alt:"logo"}),ue.jsx("div",{id:"welcome",children:ue.jsx("img",{src:"/imgs/abundance_lettering.png",alt:"logo",style:{width:"300px"}})}),ue.jsxs("p",{style:{padding:"0 20px"},children:["Abundance projects are stored through GitHub. You control your files."," "]}),ue.jsxs("form",{className:"login-form",children:[ue.jsx("button",{type:"button",id:"loginButton",className:"submit-btn",onClick:r.tryLogin,style:{height:"40px"},children:"Login With GitHub"}),ue.jsxs("p",{className:"message",children:["Don't have an account?"," ",ue.jsx("a",{href:"https://github.com/join",children:"Create a free account"})]})]})]}),ue.jsxs("div",{id:"nonGitSide",className:"logindiv curiousBrowse",children:[ue.jsx("p",{style:{justifyContent:"flex-start",display:"inline"},children:"Check out what others have designed in Abundance"}),ue.jsx("button",{type:"button",onClick:()=>{r.setBrowsing(!0)},className:"submit-btn",id:"browseNonGit",style:{padding:"0 30px"},children:"Browse all projects"})]})]})}),OIe=r=>{const[e,t]=j.useState([]),[n,i]=j.useState("thumb"),[a,o]=j.useState("Name");let s=r.searchBarValue;return j.useEffect(()=>{var l;r.user==""||r.userBrowsing?l=s+" topic:abundance-project":l=s+" user:"+r.user+" topic:abundance-project fork:true",G6=new fu,G6.rest.search.repos({q:l}).then(u=>{var c=[];u.data.items.forEach(h=>{c.push(h)}),t([...c])}).catch(u=>{window.alert("Error loading projects. Please wait a few minutes then try again.")})},[r.userBrowsing,s]),ue.jsxs(ue.Fragment,{children:[ue.jsxs("div",{style:{flexDirection:"row",height:"30px",widht:"50%",margin:"-25px 0 10px 20px",display:"flex"},children:[ue.jsx("button",{className:"list_thumb_button",onClick:()=>i("list"),children:ue.jsx("img",{src:"/imgs/list.svg",alt:"list_search",style:{width:"20px",marginRight:"5px",opacity:"0.8"}})},"list-filter-button"),ue.jsx("button",{className:"list_thumb_button",onClick:()=>i("thumb"),children:ue.jsx("img",{src:"/imgs/thumbnail.svg",alt:"thumb_search",style:{width:"20px",marginRight:"5px",opacity:"0.8"}})},"thumb-filter-button"),ue.jsxs("label",{htmlFor:"order-by",children:[ue.jsx("img",{src:"/imgs/sort.svg",alt:"Sort by",style:{width:"15px"}}),ue.jsxs("select",{className:"order_dropdown",id:"order-by",onChange:l=>o(l.target.value),children:[ue.jsx("option",{value:"byName",children:"Name"},"name_order"),ue.jsx("option",{value:"byForks",children:"Forks"},"forks_order"),ue.jsx("option",{value:"byStars",children:"Stars"},"stars_order"),ue.jsx("option",{value:"byOwnerName",children:"Creator"},"owner_order"),ue.jsx("option",{value:"byDateCreated",children:"Date Created"},"date_order")]})]})]}),ue.jsx(RIe,{browseType:n,nodes:e,orderType:a})]})},RIe=r=>{const e=r.nodes,t=r.browseType,n=r.orderType,i=({node:l})=>ue.jsxs("div",{className:"project",id:l.name,onClick:()=>{I.currentRepo=l},children:[ue.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l.name}),ue.jsx("img",{className:"project_image",src:"https://raw.githubusercontent.com/"+l.full_name+"/master/project.svg?sanitize=true",onError:({currentTarget:u})=>{u.onerror=null,u.src="/imgs/defaultThumbnail.svg"},alt:l.name}),ue.jsxs("div",{style:{display:"inline"},children:[ue.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(.7)"},width:"16",height:"16",children:ue.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})}),ue.jsx("p",{style:{fontSize:".7em",display:"inline"},children:l.stargazers_count})]})]},l.id),a=l=>ue.jsxs("div",{className:"project_list",id:l.node.id,onClick:()=>{I.currentRepo=l.node},children:[ue.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l.node.name}),ue.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l.node.owner.login}),ue.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"70%"},children:l.node.forks_count}),ue.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l.node.created_at}),ue.jsxs("div",{style:{width:"10%",display:"flex",flexDirection:"row"},children:[ue.jsx("p",{style:{fontSize:"1em"},children:l.node.stargazers_count}),ue.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(1)"},width:"16",height:"16",children:ue.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})})]})]},l.node.id);var o={byName:function(l,u){return l.name<u.name?-1:l.name>u.name?1:0},byForks:function(l,u){return u.forks_count-l.forks_count},byStars:function(l,u){return u.stargazers_count-l.stargazers_count},byOwnerName:function(l,u){return l.owner.login<u.owner.login?-1:l.owner.login>u.owner.login?1:0},byDateCreated:function(l,u){return new Date(l.created_at)>new Date(u.created_at)?-1:new Date(l.created_at)<new Date(u.created_at)?1:0}};const s={forks_count:"Forks",stargazers_count:"#",created_at:"Date Created",owner:{login:"Creator"},name:"Name"};return ue.jsx(ue.Fragment,{children:ue.jsxs("div",{className:"project-item-div",children:[t=="list"?ue.jsx(a,{node:s}):null,e.sort(o[n]).map(l=>ue.jsx($w,{to:l.owner.login==I.currentUser?`/${l.id}`:`/run/${l.id}`,children:t=="list"?ue.jsx(a,{node:l}):ue.jsx(i,{node:l})},l.id))]})})},$6=r=>{const[e,t]=j.useState(""),n=r.exportPopUp,i=r.setExportPopUp,a=r.authorizedUserOcto,o=()=>{const l=()=>{r.setBrowsing(!r.userBrowsing)},u=c=>{c.code=="Enter"&&t(c.target.value)};return ue.jsxs(ue.Fragment,{children:[r.isloggedIn?ue.jsxs("div",{className:"top_browse_menu",children:[ue.jsxs("div",{onClick:()=>{i(!0)},className:"newProjectDiv",children:[ue.jsx("span",{style:{alignSelf:"center"},children:"Start a new project"}),ue.jsx("img",{src:"/imgs/defaultThumbnail.svg",style:{height:"80%",float:"left"}})]}),ue.jsxs("div",{className:"newProjectDiv",onClick:()=>l(),children:[ue.jsx("span",{style:{alignSelf:"center"},children:r.userBrowsing?"Return to my Projects":"Browse Other Projects"}),ue.jsx("img",{src:"/imgs/defaultThumbnail.svg",style:{height:"80%",float:"right"}})]})]}):null,ue.jsxs("div",{className:"search-bar-div",children:[ue.jsx("input",{type:"text",placeholder:e,onKeyDown:c=>{u(c)},className:"menu_search searchButton",id:"project_search"},"project-search-bar"),ue.jsx("button",{className:"list_thumb_button",children:ue.jsx("img",{src:"/imgs/search_icon.svg",alt:"search",style:{width:"20px",color:"white",marginRight:"5px",opacity:"0.5"}})})]}),ue.jsx(OIe,{searchBarValue:e,user:r.user,userBrowsing:r.userBrowsing})]})},s=l=>{window.open(l,"_blank","noreferrer")};return ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"middleBrowse",style:{marginTop:"35px"},children:ue.jsxs("div",{id:"welcome",style:{display:"flex",margin:"10px",alignItems:"center"},children:[ue.jsx("img",{src:"/imgs/abundance_logo.png",alt:"logo",style:{width:"40px",height:"40px",borderRadius:"50%"}}),ue.jsx("img",{src:"/imgs/abundance_lettering.png",alt:"logo",style:{height:"20px",padding:"10px"}}),r.isloggedIn?null:ue.jsxs(ue.Fragment,{children:[ue.jsx("button",{className:"form browseButton githubSign",id:"loginButton2",onClick:r.tryLogin,style:{width:"90px",fontSize:".7rem",marginLeft:"auto"},children:"Login"}),ue.jsx("button",{className:"form browseButton githubSign",onClick:()=>s("https://github.com/join"),style:{width:"130px",fontSize:".7rem",marginLeft:"5px"},children:"Create an Account"})]})]})}),n?ue.jsx(RX,{setExportPopUp:i,authorizedUserOcto:a,exporting:!1}):ue.jsx(o,{})]})};function PIe(r){const[e,t]=j.useState(!1),n=r.exportPopUp,i=r.setExportPopUp,a=r.authorizedUserOcto;var o=I.currentUser;let s;return r.authorizedUserOcto&&!e?s=ue.jsx($6,{user:o,authorizedUserOcto:a,userBrowsing:e,setBrowsing:t,isloggedIn:r.isloggedIn,exportPopUp:n,setExportPopUp:i}):e?s=ue.jsx($6,{user:"",userBrowsing:e,authorizedUserOcto:a,setBrowsing:t,isloggedIn:r.isloggedIn,tryLogin:r.tryLogin}):s=ue.jsx(NIe,{tryLogin:r.tryLogin,setBrowsing:t}),ue.jsxs("div",{className:"login-popup",id:"projects-popup",style:{padding:"0",border:"10px solid #3e3d3d"},children:[ue.jsxs("div",{children:[" ",I.currentRepo?ue.jsx($w,{to:`/${I.currentRepo.id}`,children:ue.jsx("button",{className:"closeButton",children:ue.jsx("img",{})})}):null]}),s]})}/**
* @license
* Copyright 2010-2023 Three.js Authors
* SPDX-License-Identifier: MIT
*/const h2="161",Ph={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ih={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},PX=0,yD=1,IX=2,IIe=3,LX=0,d2=1,g0=2,ms=3,Mu=0,_a=1,xs=2,hu=0,sd=1,bD=2,xD=3,wD=4,FX=5,hc=100,BX=101,zX=102,SD=103,MD=104,UX=200,jX=201,HX=202,VX=203,zS=204,US=205,qX=206,WX=207,GX=208,$X=209,XX=210,YX=211,JX=212,ZX=213,KX=214,QX=0,eY=1,tY=2,av=3,rY=4,nY=5,iY=6,aY=7,hy=0,oY=1,sY=2,ml=0,lY=1,uY=2,cY=3,oO=4,hY=5,dY=6,_D="attached",fY="detached",f2=300,_u=301,Gc=302,ov=303,sv=304,Pm=306,lv=1e3,Ji=1001,uv=1002,zn=1003,jS=1004,LIe=1004,zh=1005,FIe=1005,sn=1006,v0=1007,BIe=1007,sl=1008,zIe=1008,gl=1009,pY=1010,mY=1011,p2=1012,sO=1013,iu=1014,po=1015,Md=1016,lO=1017,uO=1018,Rc=1020,gY=1021,ya=1023,vY=1024,yY=1025,Pc=1026,_d=1027,bY=1028,cO=1029,xY=1030,hO=1031,dO=1033,rw=33776,nw=33777,iw=33778,aw=33779,ED=35840,CD=35841,AD=35842,TD=35843,fO=36196,DD=37492,kD=37496,ND=37808,OD=37809,RD=37810,PD=37811,ID=37812,LD=37813,FD=37814,BD=37815,zD=37816,UD=37817,jD=37818,HD=37819,VD=37820,qD=37821,ow=36492,WD=36494,GD=36495,wY=36283,$D=36284,XD=36285,YD=36286,SY=2200,MY=2201,_Y=2202,cv=2300,hv=2301,sw=2302,Jh=2400,Zh=2401,dv=2402,m2=2500,pO=2501,UIe=0,jIe=1,HIe=2,mO=3e3,Ic=3001,EY=3200,CY=3201,sh=0,AY=1,mo="",ri="srgb",_l="srgb-linear",g2="display-p3",dy="display-p3-linear",fv="linear",en="srgb",pv="rec709",mv="p3",VIe=0,Lh=7680,qIe=7681,WIe=7682,GIe=7683,$Ie=34055,XIe=34056,YIe=5386,JIe=512,ZIe=513,KIe=514,QIe=515,eLe=516,tLe=517,rLe=518,JD=519,TY=512,DY=513,kY=514,gO=515,NY=516,OY=517,RY=518,PY=519,gv=35044,nLe=35048,iLe=35040,aLe=35045,oLe=35049,sLe=35041,lLe=35046,uLe=35050,cLe=35042,hLe="100",ZD="300 es",HS=1035,ll=2e3,vv=2001;class Al{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const n=this._listeners[e];if(n!==void 0){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const n=t.slice(0);for(let i=0,a=n.length;i<a;i++)n[i].call(this,e);e.target=null}}}const qi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let X6=1234567;const ld=Math.PI/180,Qp=180/Math.PI;function So(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(qi[r&255]+qi[r>>8&255]+qi[r>>16&255]+qi[r>>24&255]+"-"+qi[e&255]+qi[e>>8&255]+"-"+qi[e>>16&15|64]+qi[e>>24&255]+"-"+qi[t&63|128]+qi[t>>8&255]+"-"+qi[t>>16&255]+qi[t>>24&255]+qi[n&255]+qi[n>>8&255]+qi[n>>16&255]+qi[n>>24&255]).toLowerCase()}function kn(r,e,t){return Math.max(e,Math.min(t,r))}function vO(r,e){return(r%e+e)%e}function dLe(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function fLe(r,e,t){return r!==e?(t-r)/(e-r):0}function y0(r,e,t){return(1-t)*r+t*e}function pLe(r,e,t,n){return y0(r,e,1-Math.exp(-t*n))}function mLe(r,e=1){return e-Math.abs(vO(r,e*2)-e)}function gLe(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function vLe(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function yLe(r,e){return r+Math.floor(Math.random()*(e-r+1))}function bLe(r,e){return r+Math.random()*(e-r)}function xLe(r){return r*(.5-Math.random())}function wLe(r){r!==void 0&&(X6=r);let e=X6+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function SLe(r){return r*ld}function MLe(r){return r*Qp}function KD(r){return(r&r-1)===0&&r!==0}function _Le(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function VS(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function ELe(r,e,t,n,i){const a=Math.cos,o=Math.sin,s=a(t/2),l=o(t/2),u=a((e+n)/2),c=o((e+n)/2),h=a((e-n)/2),d=o((e-n)/2),f=a((n-e)/2),p=o((n-e)/2);switch(i){case"XYX":r.set(s*c,l*h,l*d,s*u);break;case"YZY":r.set(l*d,s*c,l*h,s*u);break;case"ZXZ":r.set(l*h,l*d,s*c,s*u);break;case"XZX":r.set(s*c,l*p,l*f,s*u);break;case"YXY":r.set(l*f,s*c,l*p,s*u);break;case"ZYZ":r.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ba(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function sr(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const CLe={DEG2RAD:ld,RAD2DEG:Qp,generateUUID:So,clamp:kn,euclideanModulo:vO,mapLinear:dLe,inverseLerp:fLe,lerp:y0,damp:pLe,pingpong:mLe,smoothstep:gLe,smootherstep:vLe,randInt:yLe,randFloat:bLe,randFloatSpread:xLe,seededRandom:wLe,degToRad:SLe,radToDeg:MLe,isPowerOfTwo:KD,ceilPowerOfTwo:_Le,floorPowerOfTwo:VS,setQuaternionFromProperEuler:ELe,normalize:sr,denormalize:ba};class Qe{constructor(e=0,t=0){Qe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(kn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),a=this.x-e.x,o=this.y-e.y;return this.x=a*n-o*i+e.x,this.y=a*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class fr{constructor(e,t,n,i,a,o,s,l,u){fr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,a,o,s,l,u)}set(e,t,n,i,a,o,s,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=a,c[5]=l,c[6]=n,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,a=this.elements,o=n[0],s=n[3],l=n[6],u=n[1],c=n[4],h=n[7],d=n[2],f=n[5],p=n[8],v=i[0],y=i[3],g=i[6],w=i[1],b=i[4],m=i[7],x=i[2],S=i[5],E=i[8];return a[0]=o*v+s*w+l*x,a[3]=o*y+s*b+l*S,a[6]=o*g+s*m+l*E,a[1]=u*v+c*w+h*x,a[4]=u*y+c*b+h*S,a[7]=u*g+c*m+h*E,a[2]=d*v+f*w+p*x,a[5]=d*y+f*b+p*S,a[8]=d*g+f*m+p*E,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*s*u-n*a*c+n*s*l+i*a*u-i*o*l}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*o-s*u,d=s*l-c*a,f=u*a-o*l,p=t*h+n*d+i*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/p;return e[0]=h*v,e[1]=(i*u-c*n)*v,e[2]=(s*n-i*o)*v,e[3]=d*v,e[4]=(c*t-i*l)*v,e[5]=(i*a-s*t)*v,e[6]=f*v,e[7]=(n*l-u*t)*v,e[8]=(o*t-n*a)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,a,o,s){const l=Math.cos(a),u=Math.sin(a);return this.set(n*l,n*u,-n*(l*o+u*s)+o+e,-i*u,i*l,-i*(-u*o+l*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(uC.makeScale(e,t)),this}rotate(e){return this.premultiply(uC.makeRotation(-e)),this}translate(e,t){return this.premultiply(uC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const uC=new fr;function IY(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const ALe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function lp(r,e){return new ALe[r](e)}function yv(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function LY(){const r=yv("canvas");return r.style.display="block",r}const Y6={};function ud(r){r in Y6||(Y6[r]=!0,console.warn(r))}const J6=new fr().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Z6=new fr().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),vb={[_l]:{transfer:fv,primaries:pv,toReference:r=>r,fromReference:r=>r},[ri]:{transfer:en,primaries:pv,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[dy]:{transfer:fv,primaries:mv,toReference:r=>r.applyMatrix3(Z6),fromReference:r=>r.applyMatrix3(J6)},[g2]:{transfer:en,primaries:mv,toReference:r=>r.convertSRGBToLinear().applyMatrix3(Z6),fromReference:r=>r.applyMatrix3(J6).convertLinearToSRGB()}},TLe=new Set([_l,dy]),Ir={enabled:!0,_workingColorSpace:_l,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!TLe.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const n=vb[e].toReference,i=vb[t].fromReference;return i(n(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return vb[r].primaries},getTransfer:function(r){return r===mo?fv:vb[r].transfer}};function Dp(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function cC(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let pf;class yO{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{pf===void 0&&(pf=yv("canvas")),pf.width=e.width,pf.height=e.height;const n=pf.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=pf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=yv("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),a=i.data;for(let o=0;o<a.length;o++)a[o]=Dp(a[o]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Dp(t[n]/255)*255):t[n]=Dp(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let DLe=0;class Kh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:DLe++}),this.uuid=So(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let o=0,s=i.length;o<s;o++)i[o].isDataTexture?a.push(hC(i[o].image)):a.push(hC(i[o]))}else a=hC(i);n.url=a}return t||(e.images[this.uuid]=n),n}}function hC(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?yO.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let kLe=0;class Sn extends Al{constructor(e=Sn.DEFAULT_IMAGE,t=Sn.DEFAULT_MAPPING,n=Ji,i=Ji,a=sn,o=sl,s=ya,l=gl,u=Sn.DEFAULT_ANISOTROPY,c=mo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:kLe++}),this.uuid=So(),this.name="",this.source=new Kh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=a,this.minFilter=o,this.anisotropy=u,this.format=s,this.internalFormat=null,this.type=l,this.offset=new Qe(0,0),this.repeat=new Qe(1,1),this.center=new Qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new fr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(ud("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===Ic?ri:mo),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==f2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case lv:e.x=e.x-Math.floor(e.x);break;case Ji:e.x=e.x<0?0:1;break;case uv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case lv:e.y=e.y-Math.floor(e.y);break;case Ji:e.y=e.y<0?0:1;break;case uv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return ud("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ri?Ic:mO}set encoding(e){ud("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ic?ri:mo}}Sn.DEFAULT_IMAGE=null;Sn.DEFAULT_MAPPING=f2;Sn.DEFAULT_ANISOTROPY=1;class Fr{constructor(e=0,t=0,n=0,i=1){Fr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,a=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*a,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*a,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*a,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,a;const o=e.elements,s=o[0],l=o[4],u=o[8],c=o[1],h=o[5],d=o[9],f=o[2],p=o[6],v=o[10];if(Math.abs(l-c)<.01&&Math.abs(u-f)<.01&&Math.abs(d-p)<.01){if(Math.abs(l+c)<.1&&Math.abs(u+f)<.1&&Math.abs(d+p)<.1&&Math.abs(s+h+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const g=(s+1)/2,w=(h+1)/2,b=(v+1)/2,m=(l+c)/4,x=(u+f)/4,S=(d+p)/4;return g>w&&g>b?g<.01?(n=0,i=.707106781,a=.707106781):(n=Math.sqrt(g),i=m/n,a=x/n):w>b?w<.01?(n=.707106781,i=0,a=.707106781):(i=Math.sqrt(w),n=m/i,a=S/i):b<.01?(n=.707106781,i=.707106781,a=0):(a=Math.sqrt(b),n=x/a,i=S/a),this.set(n,i,a,t),this}let y=Math.sqrt((p-d)*(p-d)+(u-f)*(u-f)+(c-l)*(c-l));return Math.abs(y)<.001&&(y=1),this.x=(p-d)/y,this.y=(u-f)/y,this.z=(c-l)/y,this.w=Math.acos((s+h+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class FY extends Al{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Fr(0,0,e,t),this.scissorTest=!1,this.viewport=new Fr(0,0,e,t);const i={width:e,height:t,depth:1};n.encoding!==void 0&&(ud("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Ic?ri:mo),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:sn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new Sn(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Kh(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class es extends FY{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class v2 extends Sn{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=zn,this.minFilter=zn,this.wrapR=Ji,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class NLe extends es{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new v2(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class bO extends Sn{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=zn,this.minFilter=zn,this.wrapR=Ji,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class OLe extends es{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new bO(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class RLe extends es{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const a=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=a.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,a=this.texture.length;i<a;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class yi{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,a,o,s){let l=n[i+0],u=n[i+1],c=n[i+2],h=n[i+3];const d=a[o+0],f=a[o+1],p=a[o+2],v=a[o+3];if(s===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h;return}if(s===1){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=v;return}if(h!==v||l!==d||u!==f||c!==p){let y=1-s;const g=l*d+u*f+c*p+h*v,w=g>=0?1:-1,b=1-g*g;if(b>Number.EPSILON){const x=Math.sqrt(b),S=Math.atan2(x,g*w);y=Math.sin(y*S)/x,s=Math.sin(s*S)/x}const m=s*w;if(l=l*y+d*m,u=u*y+f*m,c=c*y+p*m,h=h*y+v*m,y===1-s){const x=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=x,u*=x,c*=x,h*=x}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,i,a,o){const s=n[i],l=n[i+1],u=n[i+2],c=n[i+3],h=a[o],d=a[o+1],f=a[o+2],p=a[o+3];return e[t]=s*p+c*h+l*f-u*d,e[t+1]=l*p+c*d+u*h-s*f,e[t+2]=u*p+c*f+s*d-l*h,e[t+3]=c*p-s*h-l*d-u*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,a=e._z,o=e._order,s=Math.cos,l=Math.sin,u=s(n/2),c=s(i/2),h=s(a/2),d=l(n/2),f=l(i/2),p=l(a/2);switch(o){case"XYZ":this._x=d*c*h+u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h-d*f*p;break;case"YXZ":this._x=d*c*h+u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h+d*f*p;break;case"ZXY":this._x=d*c*h-u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h-d*f*p;break;case"ZYX":this._x=d*c*h-u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h+d*f*p;break;case"YZX":this._x=d*c*h+u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h-d*f*p;break;case"XZY":this._x=d*c*h-u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],a=t[8],o=t[1],s=t[5],l=t[9],u=t[2],c=t[6],h=t[10],d=n+s+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(c-l)*f,this._y=(a-u)*f,this._z=(o-i)*f}else if(n>s&&n>h){const f=2*Math.sqrt(1+n-s-h);this._w=(c-l)/f,this._x=.25*f,this._y=(i+o)/f,this._z=(a+u)/f}else if(s>h){const f=2*Math.sqrt(1+s-n-h);this._w=(a-u)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(l+c)/f}else{const f=2*Math.sqrt(1+h-n-s);this._w=(o-i)/f,this._x=(a+u)/f,this._y=(l+c)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(kn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,a=e._z,o=e._w,s=t._x,l=t._y,u=t._z,c=t._w;return this._x=n*c+o*s+i*u-a*l,this._y=i*c+o*l+a*s-n*u,this._z=a*c+o*u+n*l-i*s,this._w=o*c-n*s-i*l-a*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,a=this._z,o=this._w;let s=o*e._w+n*e._x+i*e._y+a*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=i,this._z=a,this;const l=1-s*s;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*n+t*this._x,this._y=f*i+t*this._y,this._z=f*a+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,s),h=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=i*h+this._y*d,this._z=a*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(a),n*Math.cos(a),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class me{constructor(e=0,t=0,n=0){me.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(K6.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(K6.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*i,this.y=a[1]*t+a[4]*n+a[7]*i,this.z=a[2]*t+a[5]*n+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,a=e.elements,o=1/(a[3]*t+a[7]*n+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*i+a[12])*o,this.y=(a[1]*t+a[5]*n+a[9]*i+a[13])*o,this.z=(a[2]*t+a[6]*n+a[10]*i+a[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,a=e.x,o=e.y,s=e.z,l=e.w,u=2*(o*i-s*n),c=2*(s*t-a*i),h=2*(a*n-o*t);return this.x=t+l*u+o*h-s*c,this.y=n+l*c+s*u-a*h,this.z=i+l*h+a*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i,this.y=a[1]*t+a[5]*n+a[9]*i,this.z=a[2]*t+a[6]*n+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,a=e.z,o=t.x,s=t.y,l=t.z;return this.x=i*l-a*s,this.y=a*o-n*l,this.z=n*s-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return dC.copy(this).projectOnVector(e),this.sub(dC)}reflect(e){return this.sub(dC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(kn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const dC=new me,K6=new yi;class Ea{constructor(e=new me(1/0,1/0,1/0),t=new me(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(hs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(hs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=hs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const a=n.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let o=0,s=a.count;o<s;o++)e.isMesh===!0?e.getVertexPosition(o,hs):hs.fromBufferAttribute(a,o),hs.applyMatrix4(e.matrixWorld),this.expandByPoint(hs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),yb.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),yb.copy(n.boundingBox)),yb.applyMatrix4(e.matrixWorld),this.union(yb)}const i=e.children;for(let a=0,o=i.length;a<o;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,hs),hs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Sg),bb.subVectors(this.max,Sg),mf.subVectors(e.a,Sg),gf.subVectors(e.b,Sg),vf.subVectors(e.c,Sg),$u.subVectors(gf,mf),Xu.subVectors(vf,gf),wh.subVectors(mf,vf);let t=[0,-$u.z,$u.y,0,-Xu.z,Xu.y,0,-wh.z,wh.y,$u.z,0,-$u.x,Xu.z,0,-Xu.x,wh.z,0,-wh.x,-$u.y,$u.x,0,-Xu.y,Xu.x,0,-wh.y,wh.x,0];return!fC(t,mf,gf,vf,bb)||(t=[1,0,0,0,1,0,0,0,1],!fC(t,mf,gf,vf,bb))?!1:(xb.crossVectors($u,Xu),t=[xb.x,xb.y,xb.z],fC(t,mf,gf,vf,bb))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,hs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(hs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Hl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Hl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Hl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Hl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Hl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Hl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Hl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Hl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Hl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Hl=[new me,new me,new me,new me,new me,new me,new me,new me],hs=new me,yb=new Ea,mf=new me,gf=new me,vf=new me,$u=new me,Xu=new me,wh=new me,Sg=new me,bb=new me,xb=new me,Sh=new me;function fC(r,e,t,n,i){for(let a=0,o=r.length-3;a<=o;a+=3){Sh.fromArray(r,a);const s=i.x*Math.abs(Sh.x)+i.y*Math.abs(Sh.y)+i.z*Math.abs(Sh.z),l=e.dot(Sh),u=t.dot(Sh),c=n.dot(Sh);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}const PLe=new Ea,Mg=new me,pC=new me;class ea{constructor(e=new me,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):PLe.setFromPoints(e).getCenter(n);let i=0;for(let a=0,o=e.length;a<o;a++)i=Math.max(i,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Mg.subVectors(e,this.center);const t=Mg.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Mg,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(pC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Mg.copy(e.center).add(pC)),this.expandByPoint(Mg.copy(e.center).sub(pC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Vl=new me,mC=new me,wb=new me,Yu=new me,gC=new me,Sb=new me,vC=new me;class Ud{constructor(e=new me,t=new me(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Vl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Vl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Vl.copy(this.origin).addScaledVector(this.direction,t),Vl.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){mC.copy(e).add(t).multiplyScalar(.5),wb.copy(t).sub(e).normalize(),Yu.copy(this.origin).sub(mC);const a=e.distanceTo(t)*.5,o=-this.direction.dot(wb),s=Yu.dot(this.direction),l=-Yu.dot(wb),u=Yu.lengthSq(),c=Math.abs(1-o*o);let h,d,f,p;if(c>0)if(h=o*l-s,d=o*s-l,p=a*c,h>=0)if(d>=-p)if(d<=p){const v=1/c;h*=v,d*=v,f=h*(h+o*d+2*s)+d*(o*h+d+2*l)+u}else d=a,h=Math.max(0,-(o*d+s)),f=-h*h+d*(d+2*l)+u;else d=-a,h=Math.max(0,-(o*d+s)),f=-h*h+d*(d+2*l)+u;else d<=-p?(h=Math.max(0,-(-o*a+s)),d=h>0?-a:Math.min(Math.max(-a,-l),a),f=-h*h+d*(d+2*l)+u):d<=p?(h=0,d=Math.min(Math.max(-a,-l),a),f=d*(d+2*l)+u):(h=Math.max(0,-(o*a+s)),d=h>0?a:Math.min(Math.max(-a,-l),a),f=-h*h+d*(d+2*l)+u);else d=o>0?-a:a,h=Math.max(0,-(o*d+s)),f=-h*h+d*(d+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(mC).addScaledVector(wb,d),f}intersectSphere(e,t){Vl.subVectors(e.center,this.origin);const n=Vl.dot(this.direction),i=Vl.dot(Vl)-n*n,a=e.radius*e.radius;if(i>a)return null;const o=Math.sqrt(a-i),s=n-o,l=n+o;return l<0?null:s<0?this.at(l,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,a,o,s,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,d=this.origin;return u>=0?(n=(e.min.x-d.x)*u,i=(e.max.x-d.x)*u):(n=(e.max.x-d.x)*u,i=(e.min.x-d.x)*u),c>=0?(a=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(a=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),n>o||a>i||((a>n||isNaN(n))&&(n=a),(o<i||isNaN(i))&&(i=o),h>=0?(s=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(s=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),n>l||s>i)||((s>n||n!==n)&&(n=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Vl)!==null}intersectTriangle(e,t,n,i,a){gC.subVectors(t,e),Sb.subVectors(n,e),vC.crossVectors(gC,Sb);let o=this.direction.dot(vC),s;if(o>0){if(i)return null;s=1}else if(o<0)s=-1,o=-o;else return null;Yu.subVectors(this.origin,e);const l=s*this.direction.dot(Sb.crossVectors(Yu,Sb));if(l<0)return null;const u=s*this.direction.dot(gC.cross(Yu));if(u<0||l+u>o)return null;const c=-s*Yu.dot(vC);return c<0?null:this.at(c/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Yt{constructor(e,t,n,i,a,o,s,l,u,c,h,d,f,p,v,y){Yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,a,o,s,l,u,c,h,d,f,p,v,y)}set(e,t,n,i,a,o,s,l,u,c,h,d,f,p,v,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=a,g[5]=o,g[9]=s,g[13]=l,g[2]=u,g[6]=c,g[10]=h,g[14]=d,g[3]=f,g[7]=p,g[11]=v,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/yf.setFromMatrixColumn(e,0).length(),a=1/yf.setFromMatrixColumn(e,1).length(),o=1/yf.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,a=e.z,o=Math.cos(n),s=Math.sin(n),l=Math.cos(i),u=Math.sin(i),c=Math.cos(a),h=Math.sin(a);if(e.order==="XYZ"){const d=o*c,f=o*h,p=s*c,v=s*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=f+p*u,t[5]=d-v*u,t[9]=-s*l,t[2]=v-d*u,t[6]=p+f*u,t[10]=o*l}else if(e.order==="YXZ"){const d=l*c,f=l*h,p=u*c,v=u*h;t[0]=d+v*s,t[4]=p*s-f,t[8]=o*u,t[1]=o*h,t[5]=o*c,t[9]=-s,t[2]=f*s-p,t[6]=v+d*s,t[10]=o*l}else if(e.order==="ZXY"){const d=l*c,f=l*h,p=u*c,v=u*h;t[0]=d-v*s,t[4]=-o*h,t[8]=p+f*s,t[1]=f+p*s,t[5]=o*c,t[9]=v-d*s,t[2]=-o*u,t[6]=s,t[10]=o*l}else if(e.order==="ZYX"){const d=o*c,f=o*h,p=s*c,v=s*h;t[0]=l*c,t[4]=p*u-f,t[8]=d*u+v,t[1]=l*h,t[5]=v*u+d,t[9]=f*u-p,t[2]=-u,t[6]=s*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*u,p=s*l,v=s*u;t[0]=l*c,t[4]=v-d*h,t[8]=p*h+f,t[1]=h,t[5]=o*c,t[9]=-s*c,t[2]=-u*c,t[6]=f*h+p,t[10]=d-v*h}else if(e.order==="XZY"){const d=o*l,f=o*u,p=s*l,v=s*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=d*h+v,t[5]=o*c,t[9]=f*h-p,t[2]=p*h-f,t[6]=s*c,t[10]=v*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ILe,e,LLe)}lookAt(e,t,n){const i=this.elements;return io.subVectors(e,t),io.lengthSq()===0&&(io.z=1),io.normalize(),Ju.crossVectors(n,io),Ju.lengthSq()===0&&(Math.abs(n.z)===1?io.x+=1e-4:io.z+=1e-4,io.normalize(),Ju.crossVectors(n,io)),Ju.normalize(),Mb.crossVectors(io,Ju),i[0]=Ju.x,i[4]=Mb.x,i[8]=io.x,i[1]=Ju.y,i[5]=Mb.y,i[9]=io.y,i[2]=Ju.z,i[6]=Mb.z,i[10]=io.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,a=this.elements,o=n[0],s=n[4],l=n[8],u=n[12],c=n[1],h=n[5],d=n[9],f=n[13],p=n[2],v=n[6],y=n[10],g=n[14],w=n[3],b=n[7],m=n[11],x=n[15],S=i[0],E=i[4],A=i[8],T=i[12],C=i[1],D=i[5],O=i[9],U=i[13],L=i[2],F=i[6],k=i[10],R=i[14],z=i[3],B=i[7],X=i[11],Z=i[15];return a[0]=o*S+s*C+l*L+u*z,a[4]=o*E+s*D+l*F+u*B,a[8]=o*A+s*O+l*k+u*X,a[12]=o*T+s*U+l*R+u*Z,a[1]=c*S+h*C+d*L+f*z,a[5]=c*E+h*D+d*F+f*B,a[9]=c*A+h*O+d*k+f*X,a[13]=c*T+h*U+d*R+f*Z,a[2]=p*S+v*C+y*L+g*z,a[6]=p*E+v*D+y*F+g*B,a[10]=p*A+v*O+y*k+g*X,a[14]=p*T+v*U+y*R+g*Z,a[3]=w*S+b*C+m*L+x*z,a[7]=w*E+b*D+m*F+x*B,a[11]=w*A+b*O+m*k+x*X,a[15]=w*T+b*U+m*R+x*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],a=e[12],o=e[1],s=e[5],l=e[9],u=e[13],c=e[2],h=e[6],d=e[10],f=e[14],p=e[3],v=e[7],y=e[11],g=e[15];return p*(+a*l*h-i*u*h-a*s*d+n*u*d+i*s*f-n*l*f)+v*(+t*l*f-t*u*d+a*o*d-i*o*f+i*u*c-a*l*c)+y*(+t*u*h-t*s*f-a*o*h+n*o*f+a*s*c-n*u*c)+g*(-i*s*c-t*l*h+t*s*d+i*o*h-n*o*d+n*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],v=e[13],y=e[14],g=e[15],w=h*y*u-v*d*u+v*l*f-s*y*f-h*l*g+s*d*g,b=p*d*u-c*y*u-p*l*f+o*y*f+c*l*g-o*d*g,m=c*v*u-p*h*u+p*s*f-o*v*f-c*s*g+o*h*g,x=p*h*l-c*v*l-p*s*d+o*v*d+c*s*y-o*h*y,S=t*w+n*b+i*m+a*x;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/S;return e[0]=w*E,e[1]=(v*d*a-h*y*a-v*i*f+n*y*f+h*i*g-n*d*g)*E,e[2]=(s*y*a-v*l*a+v*i*u-n*y*u-s*i*g+n*l*g)*E,e[3]=(h*l*a-s*d*a-h*i*u+n*d*u+s*i*f-n*l*f)*E,e[4]=b*E,e[5]=(c*y*a-p*d*a+p*i*f-t*y*f-c*i*g+t*d*g)*E,e[6]=(p*l*a-o*y*a-p*i*u+t*y*u+o*i*g-t*l*g)*E,e[7]=(o*d*a-c*l*a+c*i*u-t*d*u-o*i*f+t*l*f)*E,e[8]=m*E,e[9]=(p*h*a-c*v*a-p*n*f+t*v*f+c*n*g-t*h*g)*E,e[10]=(o*v*a-p*s*a+p*n*u-t*v*u-o*n*g+t*s*g)*E,e[11]=(c*s*a-o*h*a-c*n*u+t*h*u+o*n*f-t*s*f)*E,e[12]=x*E,e[13]=(c*v*i-p*h*i+p*n*d-t*v*d-c*n*y+t*h*y)*E,e[14]=(p*s*i-o*v*i-p*n*l+t*v*l+o*n*y-t*s*y)*E,e[15]=(o*h*i-c*s*i+c*n*l-t*h*l-o*n*d+t*s*d)*E,this}scale(e){const t=this.elements,n=e.x,i=e.y,a=e.z;return t[0]*=n,t[4]*=i,t[8]*=a,t[1]*=n,t[5]*=i,t[9]*=a,t[2]*=n,t[6]*=i,t[10]*=a,t[3]*=n,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),a=1-n,o=e.x,s=e.y,l=e.z,u=a*o,c=a*s;return this.set(u*o+n,u*s-i*l,u*l+i*s,0,u*s+i*l,c*s+n,c*l-i*o,0,u*l-i*s,c*l+i*o,a*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,a,o){return this.set(1,n,a,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,a=t._x,o=t._y,s=t._z,l=t._w,u=a+a,c=o+o,h=s+s,d=a*u,f=a*c,p=a*h,v=o*c,y=o*h,g=s*h,w=l*u,b=l*c,m=l*h,x=n.x,S=n.y,E=n.z;return i[0]=(1-(v+g))*x,i[1]=(f+m)*x,i[2]=(p-b)*x,i[3]=0,i[4]=(f-m)*S,i[5]=(1-(d+g))*S,i[6]=(y+w)*S,i[7]=0,i[8]=(p+b)*E,i[9]=(y-w)*E,i[10]=(1-(d+v))*E,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let a=yf.set(i[0],i[1],i[2]).length();const o=yf.set(i[4],i[5],i[6]).length(),s=yf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],ds.copy(this);const l=1/a,u=1/o,c=1/s;return ds.elements[0]*=l,ds.elements[1]*=l,ds.elements[2]*=l,ds.elements[4]*=u,ds.elements[5]*=u,ds.elements[6]*=u,ds.elements[8]*=c,ds.elements[9]*=c,ds.elements[10]*=c,t.setFromRotationMatrix(ds),n.x=a,n.y=o,n.z=s,this}makePerspective(e,t,n,i,a,o,s=ll){const l=this.elements,u=2*a/(t-e),c=2*a/(n-i),h=(t+e)/(t-e),d=(n+i)/(n-i);let f,p;if(s===ll)f=-(o+a)/(o-a),p=-2*o*a/(o-a);else if(s===vv)f=-o/(o-a),p=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,i,a,o,s=ll){const l=this.elements,u=1/(t-e),c=1/(n-i),h=1/(o-a),d=(t+e)*u,f=(n+i)*c;let p,v;if(s===ll)p=(o+a)*h,v=-2*h;else if(s===vv)p=a*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=v,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const yf=new me,ds=new Yt,ILe=new me(0,0,0),LLe=new me(1,1,1),Ju=new me,Mb=new me,io=new me,Q6=new Yt,e8=new yi;class fy{constructor(e=0,t=0,n=0,i=fy.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],h=i[2],d=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(kn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-kn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(kn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-kn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(kn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,f));break;case"XZY":this._z=Math.asin(-kn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Q6.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Q6,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return e8.setFromEuler(this),this.setFromQuaternion(e8,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}fy.DEFAULT_ORDER="XYZ";class cd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let FLe=0;const t8=new me,bf=new yi,ql=new Yt,_b=new me,_g=new me,BLe=new me,zLe=new yi,r8=new me(1,0,0),n8=new me(0,1,0),i8=new me(0,0,1),ULe={type:"added"},jLe={type:"removed"};class Mr extends Al{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:FLe++}),this.uuid=So(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mr.DEFAULT_UP.clone();const e=new me,t=new fy,n=new yi,i=new me(1,1,1);function a(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(a),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Yt},normalMatrix:{value:new fr}}),this.matrix=new Yt,this.matrixWorld=new Yt,this.matrixAutoUpdate=Mr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Mr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new cd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return bf.setFromAxisAngle(e,t),this.quaternion.multiply(bf),this}rotateOnWorldAxis(e,t){return bf.setFromAxisAngle(e,t),this.quaternion.premultiply(bf),this}rotateX(e){return this.rotateOnAxis(r8,e)}rotateY(e){return this.rotateOnAxis(n8,e)}rotateZ(e){return this.rotateOnAxis(i8,e)}translateOnAxis(e,t){return t8.copy(e).applyQuaternion(this.quaternion),this.position.add(t8.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(r8,e)}translateY(e){return this.translateOnAxis(n8,e)}translateZ(e){return this.translateOnAxis(i8,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ql.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?_b.copy(e):_b.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),_g.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ql.lookAt(_g,_b,this.up):ql.lookAt(_b,_g,this.up),this.quaternion.setFromRotationMatrix(ql),i&&(ql.extractRotation(i.matrixWorld),bf.setFromRotationMatrix(ql),this.quaternion.premultiply(bf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ULe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(jLe)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ql.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ql.multiply(e.parent.matrixWorld)),e.applyMatrix4(ql),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let a=0,o=i.length;a<o;a++)i[a].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_g,e,BLe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_g,zLe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const a=t[n];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let a=0,o=i.length;a<o;a++){const s=i[a];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(s=>({boxInitialized:s.boxInitialized,boxMin:s.box.min.toArray(),boxMax:s.box.max.toArray(),sphereInitialized:s.sphereInitialized,sphereRadius:s.sphere.radius,sphereCenter:s.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function a(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];a(e.shapes,h)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,u=this.material.length;l<u;l++)s.push(a(e.materials,this.material[l]));i.material=s}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(a(e.animations,l))}}if(t){const s=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),p=o(e.nodes);s.length>0&&(n.geometries=s),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),c.length>0&&(n.images=c),h.length>0&&(n.shapes=h),d.length>0&&(n.skeletons=d),f.length>0&&(n.animations=f),p.length>0&&(n.nodes=p)}return n.object=i,n;function o(s){const l=[];for(const u in s){const c=s[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Mr.DEFAULT_UP=new me(0,1,0);Mr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Mr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const fs=new me,Wl=new me,yC=new me,Gl=new me,xf=new me,wf=new me,a8=new me,bC=new me,xC=new me,wC=new me;class go{constructor(e=new me,t=new me,n=new me){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),fs.subVectors(e,t),i.cross(fs);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,n,i,a){fs.subVectors(i,t),Wl.subVectors(n,t),yC.subVectors(e,t);const o=fs.dot(fs),s=fs.dot(Wl),l=fs.dot(yC),u=Wl.dot(Wl),c=Wl.dot(yC),h=o*u-s*s;if(h===0)return a.set(0,0,0),null;const d=1/h,f=(u*l-s*c)*d,p=(o*c-s*l)*d;return a.set(1-f-p,p,f)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Gl)===null?!1:Gl.x>=0&&Gl.y>=0&&Gl.x+Gl.y<=1}static getInterpolation(e,t,n,i,a,o,s,l){return this.getBarycoord(e,t,n,i,Gl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,Gl.x),l.addScaledVector(o,Gl.y),l.addScaledVector(s,Gl.z),l)}static isFrontFacing(e,t,n,i){return fs.subVectors(n,t),Wl.subVectors(e,t),fs.cross(Wl).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return fs.subVectors(this.c,this.b),Wl.subVectors(this.a,this.b),fs.cross(Wl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return go.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return go.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,a){return go.getInterpolation(e,this.a,this.b,this.c,t,n,i,a)}containsPoint(e){return go.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return go.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,a=this.c;let o,s;xf.subVectors(i,n),wf.subVectors(a,n),bC.subVectors(e,n);const l=xf.dot(bC),u=wf.dot(bC);if(l<=0&&u<=0)return t.copy(n);xC.subVectors(e,i);const c=xf.dot(xC),h=wf.dot(xC);if(c>=0&&h<=c)return t.copy(i);const d=l*h-c*u;if(d<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(n).addScaledVector(xf,o);wC.subVectors(e,a);const f=xf.dot(wC),p=wf.dot(wC);if(p>=0&&f<=p)return t.copy(a);const v=f*u-l*p;if(v<=0&&u>=0&&p<=0)return s=u/(u-p),t.copy(n).addScaledVector(wf,s);const y=c*p-f*h;if(y<=0&&h-c>=0&&f-p>=0)return a8.subVectors(a,i),s=(h-c)/(h-c+(f-p)),t.copy(i).addScaledVector(a8,s);const g=1/(y+v+d);return o=v*g,s=d*g,t.copy(n).addScaledVector(xf,o).addScaledVector(wf,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const BY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zu={h:0,s:0,l:0},Eb={h:0,s:0,l:0};function SC(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class wt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ri){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ir.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Ir.workingColorSpace){return this.r=e,this.g=t,this.b=n,Ir.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Ir.workingColorSpace){if(e=vO(e,1),t=kn(t,0,1),n=kn(n,0,1),t===0)this.r=this.g=this.b=n;else{const a=n<=.5?n*(1+t):n+t-n*t,o=2*n-a;this.r=SC(o,a,e+1/3),this.g=SC(o,a,e),this.b=SC(o,a,e-1/3)}return Ir.toWorkingColorSpace(this,i),this}setStyle(e,t=ri){function n(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const o=i[1],s=i[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ri){const n=BY[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Dp(e.r),this.g=Dp(e.g),this.b=Dp(e.b),this}copyLinearToSRGB(e){return this.r=cC(e.r),this.g=cC(e.g),this.b=cC(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ri){return Ir.fromWorkingColorSpace(Wi.copy(this),e),Math.round(kn(Wi.r*255,0,255))*65536+Math.round(kn(Wi.g*255,0,255))*256+Math.round(kn(Wi.b*255,0,255))}getHexString(e=ri){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ir.workingColorSpace){Ir.fromWorkingColorSpace(Wi.copy(this),t);const n=Wi.r,i=Wi.g,a=Wi.b,o=Math.max(n,i,a),s=Math.min(n,i,a);let l,u;const c=(s+o)/2;if(s===o)l=0,u=0;else{const h=o-s;switch(u=c<=.5?h/(o+s):h/(2-o-s),o){case n:l=(i-a)/h+(i<a?6:0);break;case i:l=(a-n)/h+2;break;case a:l=(n-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Ir.workingColorSpace){return Ir.fromWorkingColorSpace(Wi.copy(this),t),e.r=Wi.r,e.g=Wi.g,e.b=Wi.b,e}getStyle(e=ri){Ir.fromWorkingColorSpace(Wi.copy(this),e);const t=Wi.r,n=Wi.g,i=Wi.b;return e!==ri?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(Zu),this.setHSL(Zu.h+e,Zu.s+t,Zu.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Zu),e.getHSL(Eb);const n=y0(Zu.h,Eb.h,t),i=y0(Zu.s,Eb.s,t),a=y0(Zu.l,Eb.l,t);return this.setHSL(n,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,a=e.elements;return this.r=a[0]*t+a[3]*n+a[6]*i,this.g=a[1]*t+a[4]*n+a[7]*i,this.b=a[2]*t+a[5]*n+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Wi=new wt;wt.NAMES=BY;let HLe=0;class Li extends Al{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:HLe++}),this.uuid=So(),this.name="",this.type="Material",this.blending=sd,this.side=Mu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=zS,this.blendDst=US,this.blendEquation=hc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new wt(0,0,0),this.blendAlpha=0,this.depthFunc=av,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=JD,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Lh,this.stencilZFail=Lh,this.stencilZPass=Lh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==sd&&(n.blending=this.blending),this.side!==Mu&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==zS&&(n.blendSrc=this.blendSrc),this.blendDst!==US&&(n.blendDst=this.blendDst),this.blendEquation!==hc&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==av&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==JD&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Lh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Lh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Lh&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(a){const o=[];for(const s in a){const l=a[s];delete l.metadata,o.push(l)}return o}if(t){const a=i(e.textures),o=i(e.images);a.length>0&&(n.textures=a),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let a=0;a!==i;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class lh extends Li{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ql=VLe();function VLe(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(n[l]=0,n[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(n[l]=1024>>-u-14,n[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(n[l]=u+15<<10,n[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(n[l]=31744,n[l|256]=64512,i[l]=24,i[l|256]=24):(n[l]=31744,n[l|256]=64512,i[l]=13,i[l|256]=13)}const a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,a[l]=u|c}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(s[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:a,exponentTable:o,offsetTable:s}}function Ba(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=kn(r,-65504,65504),Ql.floatView[0]=r;const e=Ql.uint32View[0],t=e>>23&511;return Ql.baseTable[t]+((e&8388607)>>Ql.shiftTable[t])}function Jg(r){const e=r>>10;return Ql.uint32View[0]=Ql.mantissaTable[Ql.offsetTable[e]+(r&1023)]+Ql.exponentTable[e],Ql.floatView[0]}const qLe={toHalfFloat:Ba,fromHalfFloat:Jg},Gn=new me,Cb=new Qe;class jr{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=gv,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=po,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return ud("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Cb.fromBufferAttribute(this,t),Cb.applyMatrix3(e),this.setXY(t,Cb.x,Cb.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Gn.fromBufferAttribute(this,t),Gn.applyMatrix3(e),this.setXYZ(t,Gn.x,Gn.y,Gn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Gn.fromBufferAttribute(this,t),Gn.applyMatrix4(e),this.setXYZ(t,Gn.x,Gn.y,Gn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Gn.fromBufferAttribute(this,t),Gn.applyNormalMatrix(e),this.setXYZ(t,Gn.x,Gn.y,Gn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Gn.fromBufferAttribute(this,t),Gn.transformDirection(e),this.setXYZ(t,Gn.x,Gn.y,Gn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ba(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=sr(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ba(t,this.array)),t}setX(e,t){return this.normalized&&(t=sr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ba(t,this.array)),t}setY(e,t){return this.normalized&&(t=sr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ba(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ba(t,this.array)),t}setW(e,t){return this.normalized&&(t=sr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=sr(t,this.array),n=sr(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=sr(t,this.array),n=sr(n,this.array),i=sr(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,a){return e*=this.itemSize,this.normalized&&(t=sr(t,this.array),n=sr(n,this.array),i=sr(i,this.array),a=sr(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==gv&&(e.usage=this.usage),e}}class WLe extends jr{constructor(e,t,n){super(new Int8Array(e),t,n)}}class GLe extends jr{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class $Le extends jr{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class XLe extends jr{constructor(e,t,n){super(new Int16Array(e),t,n)}}class xO extends jr{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class YLe extends jr{constructor(e,t,n){super(new Int32Array(e),t,n)}}class wO extends jr{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class JLe extends jr{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Jg(this.array[e*this.itemSize]);return this.normalized&&(t=ba(t,this.array)),t}setX(e,t){return this.normalized&&(t=sr(t,this.array)),this.array[e*this.itemSize]=Ba(t),this}getY(e){let t=Jg(this.array[e*this.itemSize+1]);return this.normalized&&(t=ba(t,this.array)),t}setY(e,t){return this.normalized&&(t=sr(t,this.array)),this.array[e*this.itemSize+1]=Ba(t),this}getZ(e){let t=Jg(this.array[e*this.itemSize+2]);return this.normalized&&(t=ba(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sr(t,this.array)),this.array[e*this.itemSize+2]=Ba(t),this}getW(e){let t=Jg(this.array[e*this.itemSize+3]);return this.normalized&&(t=ba(t,this.array)),t}setW(e,t){return this.normalized&&(t=sr(t,this.array)),this.array[e*this.itemSize+3]=Ba(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=sr(t,this.array),n=sr(n,this.array)),this.array[e+0]=Ba(t),this.array[e+1]=Ba(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=sr(t,this.array),n=sr(n,this.array),i=sr(i,this.array)),this.array[e+0]=Ba(t),this.array[e+1]=Ba(n),this.array[e+2]=Ba(i),this}setXYZW(e,t,n,i,a){return e*=this.itemSize,this.normalized&&(t=sr(t,this.array),n=sr(n,this.array),i=sr(i,this.array),a=sr(a,this.array)),this.array[e+0]=Ba(t),this.array[e+1]=Ba(n),this.array[e+2]=Ba(i),this.array[e+3]=Ba(a),this}}class Tt extends jr{constructor(e,t,n){super(new Float32Array(e),t,n)}}class ZLe extends jr{constructor(e,t,n){super(new Float64Array(e),t,n)}}let KLe=0;const Bo=new Yt,MC=new Mr,Sf=new me,ao=new Ea,Eg=new Ea,pi=new me;class or extends Al{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:KLe++}),this.uuid=So(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(IY(e)?wO:xO)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const a=new fr().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Bo.makeRotationFromQuaternion(e),this.applyMatrix4(Bo),this}rotateX(e){return Bo.makeRotationX(e),this.applyMatrix4(Bo),this}rotateY(e){return Bo.makeRotationY(e),this.applyMatrix4(Bo),this}rotateZ(e){return Bo.makeRotationZ(e),this.applyMatrix4(Bo),this}translate(e,t,n){return Bo.makeTranslation(e,t,n),this.applyMatrix4(Bo),this}scale(e,t,n){return Bo.makeScale(e,t,n),this.applyMatrix4(Bo),this}lookAt(e){return MC.lookAt(e),MC.updateMatrix(),this.applyMatrix4(MC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Sf).negate(),this.translate(Sf.x,Sf.y,Sf.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Tt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ea);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new me(-1/0,-1/0,-1/0),new me(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const a=t[n];ao.setFromBufferAttribute(a),this.morphTargetsRelative?(pi.addVectors(this.boundingBox.min,ao.min),this.boundingBox.expandByPoint(pi),pi.addVectors(this.boundingBox.max,ao.max),this.boundingBox.expandByPoint(pi)):(this.boundingBox.expandByPoint(ao.min),this.boundingBox.expandByPoint(ao.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ea);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new me,1/0);return}if(e){const n=this.boundingSphere.center;if(ao.setFromBufferAttribute(e),t)for(let a=0,o=t.length;a<o;a++){const s=t[a];Eg.setFromBufferAttribute(s),this.morphTargetsRelative?(pi.addVectors(ao.min,Eg.min),ao.expandByPoint(pi),pi.addVectors(ao.max,Eg.max),ao.expandByPoint(pi)):(ao.expandByPoint(Eg.min),ao.expandByPoint(Eg.max))}ao.getCenter(n);let i=0;for(let a=0,o=e.count;a<o;a++)pi.fromBufferAttribute(e,a),i=Math.max(i,n.distanceToSquared(pi));if(t)for(let a=0,o=t.length;a<o;a++){const s=t[a],l=this.morphTargetsRelative;for(let u=0,c=s.count;u<c;u++)pi.fromBufferAttribute(s,u),l&&(Sf.fromBufferAttribute(e,u),pi.add(Sf)),i=Math.max(i,n.distanceToSquared(pi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,a=t.normal.array,o=t.uv.array,s=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new jr(new Float32Array(4*s),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let C=0;C<s;C++)u[C]=new me,c[C]=new me;const h=new me,d=new me,f=new me,p=new Qe,v=new Qe,y=new Qe,g=new me,w=new me;function b(C,D,O){h.fromArray(i,C*3),d.fromArray(i,D*3),f.fromArray(i,O*3),p.fromArray(o,C*2),v.fromArray(o,D*2),y.fromArray(o,O*2),d.sub(h),f.sub(h),v.sub(p),y.sub(p);const U=1/(v.x*y.y-y.x*v.y);isFinite(U)&&(g.copy(d).multiplyScalar(y.y).addScaledVector(f,-v.y).multiplyScalar(U),w.copy(f).multiplyScalar(v.x).addScaledVector(d,-y.x).multiplyScalar(U),u[C].add(g),u[D].add(g),u[O].add(g),c[C].add(w),c[D].add(w),c[O].add(w))}let m=this.groups;m.length===0&&(m=[{start:0,count:n.length}]);for(let C=0,D=m.length;C<D;++C){const O=m[C],U=O.start,L=O.count;for(let F=U,k=U+L;F<k;F+=3)b(n[F+0],n[F+1],n[F+2])}const x=new me,S=new me,E=new me,A=new me;function T(C){E.fromArray(a,C*3),A.copy(E);const D=u[C];x.copy(D),x.sub(E.multiplyScalar(E.dot(D))).normalize(),S.crossVectors(A,D);const O=S.dot(c[C])<0?-1:1;l[C*4]=x.x,l[C*4+1]=x.y,l[C*4+2]=x.z,l[C*4+3]=O}for(let C=0,D=m.length;C<D;++C){const O=m[C],U=O.start,L=O.count;for(let F=U,k=U+L;F<k;F+=3)T(n[F+0]),T(n[F+1]),T(n[F+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new jr(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,f=n.count;d<f;d++)n.setXYZ(d,0,0,0);const i=new me,a=new me,o=new me,s=new me,l=new me,u=new me,c=new me,h=new me;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),v=e.getX(d+1),y=e.getX(d+2);i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,y),c.subVectors(o,a),h.subVectors(i,a),c.cross(h),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,v),u.fromBufferAttribute(n,y),s.add(c),l.add(c),u.add(c),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(y,u.x,u.y,u.z)}else for(let d=0,f=t.count;d<f;d+=3)i.fromBufferAttribute(t,d+0),a.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),c.subVectors(o,a),h.subVectors(i,a),c.cross(h),n.setXYZ(d+0,c.x,c.y,c.z),n.setXYZ(d+1,c.x,c.y,c.z),n.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)pi.fromBufferAttribute(e,t),pi.normalize(),e.setXYZ(t,pi.x,pi.y,pi.z)}toNonIndexed(){function e(s,l){const u=s.array,c=s.itemSize,h=s.normalized,d=new u.constructor(l.length*c);let f=0,p=0;for(let v=0,y=l.length;v<y;v++){s.isInterleavedBufferAttribute?f=l[v]*s.data.stride+s.offset:f=l[v]*c;for(let g=0;g<c;g++)d[p++]=u[f++]}return new jr(d,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new or,n=this.index.array,i=this.attributes;for(const s in i){const l=i[s],u=e(l,n);t.setAttribute(s,u)}const a=this.morphAttributes;for(const s in a){const l=[],u=a[s];for(let c=0,h=u.length;c<h;c++){const d=u[c],f=e(d,n);l.push(f)}t.morphAttributes[s]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,l=o.length;s<l;s++){const u=o[s];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const u=n[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,d=u.length;h<d;h++){const f=u[h];c.push(f.toJSON(e.data))}c.length>0&&(i[l]=c,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const a=e.morphAttributes;for(const u in a){const c=[],h=a[u];for(let d=0,f=h.length;d<f;d++)c.push(h[d].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const o8=new Yt,Mh=new Ud,Ab=new ea,s8=new me,Mf=new me,_f=new me,Ef=new me,_C=new me,Tb=new me,Db=new Qe,kb=new Qe,Nb=new Qe,l8=new me,u8=new me,c8=new me,Ob=new me,Rb=new me;class Yn extends Mr{constructor(e=new or,t=new lh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,a=n.length;i<a;i++){const o=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,a=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(a&&s){Tb.set(0,0,0);for(let l=0,u=a.length;l<u;l++){const c=s[l],h=a[l];c!==0&&(_C.fromBufferAttribute(h,e),o?Tb.addScaledVector(_C,c):Tb.addScaledVector(_C.sub(t),c))}t.add(Tb)}return t}raycast(e,t){const n=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Ab.copy(n.boundingSphere),Ab.applyMatrix4(a),Mh.copy(e.ray).recast(e.near),!(Ab.containsPoint(Mh.origin)===!1&&(Mh.intersectSphere(Ab,s8)===null||Mh.origin.distanceToSquared(s8)>(e.far-e.near)**2))&&(o8.copy(a).invert(),Mh.copy(e.ray).applyMatrix4(o8),!(n.boundingBox!==null&&Mh.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Mh)))}_computeIntersections(e,t,n){let i;const a=this.geometry,o=this.material,s=a.index,l=a.attributes.position,u=a.attributes.uv,c=a.attributes.uv1,h=a.attributes.normal,d=a.groups,f=a.drawRange;if(s!==null)if(Array.isArray(o))for(let p=0,v=d.length;p<v;p++){const y=d[p],g=o[y.materialIndex],w=Math.max(y.start,f.start),b=Math.min(s.count,Math.min(y.start+y.count,f.start+f.count));for(let m=w,x=b;m<x;m+=3){const S=s.getX(m),E=s.getX(m+1),A=s.getX(m+2);i=Pb(this,g,e,n,u,c,h,S,E,A),i&&(i.faceIndex=Math.floor(m/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),v=Math.min(s.count,f.start+f.count);for(let y=p,g=v;y<g;y+=3){const w=s.getX(y),b=s.getX(y+1),m=s.getX(y+2);i=Pb(this,o,e,n,u,c,h,w,b,m),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,v=d.length;p<v;p++){const y=d[p],g=o[y.materialIndex],w=Math.max(y.start,f.start),b=Math.min(l.count,Math.min(y.start+y.count,f.start+f.count));for(let m=w,x=b;m<x;m+=3){const S=m,E=m+1,A=m+2;i=Pb(this,g,e,n,u,c,h,S,E,A),i&&(i.faceIndex=Math.floor(m/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),v=Math.min(l.count,f.start+f.count);for(let y=p,g=v;y<g;y+=3){const w=y,b=y+1,m=y+2;i=Pb(this,o,e,n,u,c,h,w,b,m),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function QLe(r,e,t,n,i,a,o,s){let l;if(e.side===_a?l=n.intersectTriangle(o,a,i,!0,s):l=n.intersectTriangle(i,a,o,e.side===Mu,s),l===null)return null;Rb.copy(s),Rb.applyMatrix4(r.matrixWorld);const u=t.ray.origin.distanceTo(Rb);return u<t.near||u>t.far?null:{distance:u,point:Rb.clone(),object:r}}function Pb(r,e,t,n,i,a,o,s,l,u){r.getVertexPosition(s,Mf),r.getVertexPosition(l,_f),r.getVertexPosition(u,Ef);const c=QLe(r,e,t,n,Mf,_f,Ef,Ob);if(c){i&&(Db.fromBufferAttribute(i,s),kb.fromBufferAttribute(i,l),Nb.fromBufferAttribute(i,u),c.uv=go.getInterpolation(Ob,Mf,_f,Ef,Db,kb,Nb,new Qe)),a&&(Db.fromBufferAttribute(a,s),kb.fromBufferAttribute(a,l),Nb.fromBufferAttribute(a,u),c.uv1=go.getInterpolation(Ob,Mf,_f,Ef,Db,kb,Nb,new Qe),c.uv2=c.uv1),o&&(l8.fromBufferAttribute(o,s),u8.fromBufferAttribute(o,l),c8.fromBufferAttribute(o,u),c.normal=go.getInterpolation(Ob,Mf,_f,Ef,l8,u8,c8,new me),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const h={a:s,b:l,c:u,normal:new me,materialIndex:0};go.getNormal(Mf,_f,Ef,h.normal),c.face=h}return c}class jd extends or{constructor(e=1,t=1,n=1,i=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:a,depthSegments:o};const s=this;i=Math.floor(i),a=Math.floor(a),o=Math.floor(o);const l=[],u=[],c=[],h=[];let d=0,f=0;p("z","y","x",-1,-1,n,t,e,o,a,0),p("z","y","x",1,-1,n,t,-e,o,a,1),p("x","z","y",1,1,e,n,t,i,o,2),p("x","z","y",1,-1,e,n,-t,i,o,3),p("x","y","z",1,-1,e,t,n,i,a,4),p("x","y","z",-1,-1,e,t,-n,i,a,5),this.setIndex(l),this.setAttribute("position",new Tt(u,3)),this.setAttribute("normal",new Tt(c,3)),this.setAttribute("uv",new Tt(h,2));function p(v,y,g,w,b,m,x,S,E,A,T){const C=m/E,D=x/A,O=m/2,U=x/2,L=S/2,F=E+1,k=A+1;let R=0,z=0;const B=new me;for(let X=0;X<k;X++){const Z=X*D-U;for(let Q=0;Q<F;Q++){const J=Q*C-O;B[v]=J*w,B[y]=Z*b,B[g]=L,u.push(B.x,B.y,B.z),B[v]=0,B[y]=0,B[g]=S>0?1:-1,c.push(B.x,B.y,B.z),h.push(Q/E),h.push(1-X/A),R+=1}}for(let X=0;X<A;X++)for(let Z=0;Z<E;Z++){const Q=d+Z+F*X,J=d+Z+F*(X+1),ne=d+(Z+1)+F*(X+1),fe=d+(Z+1)+F*X;l.push(Q,J,fe),l.push(J,ne,fe),z+=6}s.addGroup(f,z,T),f+=z,d+=R}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function em(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function pa(r){const e={};for(let t=0;t<r.length;t++){const n=em(r[t]);for(const i in n)e[i]=n[i]}return e}function e4e(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function zY(r){return r.getRenderTarget()===null?r.outputColorSpace:Ir.workingColorSpace}const UY={clone:em,merge:pa};var t4e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,r4e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ts extends Li{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=t4e,this.fragmentShader=r4e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=em(e.uniforms),this.uniformsGroups=e4e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class py extends Mr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Yt,this.projectionMatrix=new Yt,this.projectionMatrixInverse=new Yt,this.coordinateSystem=ll}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ku=new me,h8=new Qe,d8=new Qe;class Nn extends py{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Qp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ld*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Qp*2*Math.atan(Math.tan(ld*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Ku.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ku.x,Ku.y).multiplyScalar(-e/Ku.z),Ku.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Ku.x,Ku.y).multiplyScalar(-e/Ku.z)}getViewSize(e,t){return this.getViewBounds(e,h8,d8),t.subVectors(d8,h8)}setViewOffset(e,t,n,i,a,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ld*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,a=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;a+=o.offsetX*i/l,t-=o.offsetY*n/u,i*=o.width/l,n*=o.height/u}const s=this.filmOffset;s!==0&&(a+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Cf=-90,Af=1;class jY extends Mr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Nn(Cf,Af,e,t);i.layers=this.layers,this.add(i);const a=new Nn(Cf,Af,e,t);a.layers=this.layers,this.add(a);const o=new Nn(Cf,Af,e,t);o.layers=this.layers,this.add(o);const s=new Nn(Cf,Af,e,t);s.layers=this.layers,this.add(s);const l=new Nn(Cf,Af,e,t);l.layers=this.layers,this.add(l);const u=new Nn(Cf,Af,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,a,o,s,l]=t;for(const u of t)this.remove(u);if(e===ll)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===vv)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,o,s,l,u,c]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const v=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,a),e.setRenderTarget(n,1,i),e.render(t,o),e.setRenderTarget(n,2,i),e.render(t,s),e.setRenderTarget(n,3,i),e.render(t,l),e.setRenderTarget(n,4,i),e.render(t,u),n.texture.generateMipmaps=v,e.setRenderTarget(n,5,i),e.render(t,c),e.setRenderTarget(h,d,f),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class my extends Sn{constructor(e,t,n,i,a,o,s,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:_u,super(e,t,n,i,a,o,s,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class HY extends es{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];t.encoding!==void 0&&(ud("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ic?ri:mo),this.texture=new my(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:sn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new jd(5,5,5),a=new ts({name:"CubemapFromEquirect",uniforms:em(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:_a,blending:hu});a.uniforms.tEquirect.value=t;const o=new Yn(i,a),s=t.minFilter;return t.minFilter===sl&&(t.minFilter=sn),new jY(1,10,this).update(e,o),t.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const a=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(a)}}const EC=new me,n4e=new me,i4e=new fr;let Zl=class{constructor(r=new me(1,0,0),e=0){this.isPlane=!0,this.normal=r,this.constant=e}set(r,e){return this.normal.copy(r),this.constant=e,this}setComponents(r,e,t,n){return this.normal.set(r,e,t),this.constant=n,this}setFromNormalAndCoplanarPoint(r,e){return this.normal.copy(r),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(r,e,t){const n=EC.subVectors(t,e).cross(n4e.subVectors(r,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,r),this}copy(r){return this.normal.copy(r.normal),this.constant=r.constant,this}normalize(){const r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(r){return this.normal.dot(r)+this.constant}distanceToSphere(r){return this.distanceToPoint(r.center)-r.radius}projectPoint(r,e){return e.copy(r).addScaledVector(this.normal,-this.distanceToPoint(r))}intersectLine(r,e){const t=r.delta(EC),n=this.normal.dot(t);if(n===0)return this.distanceToPoint(r.start)===0?e.copy(r.start):null;const i=-(r.start.dot(this.normal)+this.constant)/n;return i<0||i>1?null:e.copy(r.start).addScaledVector(t,i)}intersectsLine(r){const e=this.distanceToPoint(r.start),t=this.distanceToPoint(r.end);return e<0&&t>0||t<0&&e>0}intersectsBox(r){return r.intersectsPlane(this)}intersectsSphere(r){return r.intersectsPlane(this)}coplanarPoint(r){return r.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(r,e){const t=e||i4e.getNormalMatrix(r),n=this.coplanarPoint(EC).applyMatrix4(r),i=this.normal.applyMatrix3(t).normalize();return this.constant=-n.dot(i),this}translate(r){return this.constant-=r.dot(this.normal),this}equals(r){return r.normal.equals(this.normal)&&r.constant===this.constant}clone(){return new this.constructor().copy(this)}};const _h=new ea,Ib=new me;class gy{constructor(e=new Zl,t=new Zl,n=new Zl,i=new Zl,a=new Zl,o=new Zl){this.planes=[e,t,n,i,a,o]}set(e,t,n,i,a,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(a),s[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=ll){const n=this.planes,i=e.elements,a=i[0],o=i[1],s=i[2],l=i[3],u=i[4],c=i[5],h=i[6],d=i[7],f=i[8],p=i[9],v=i[10],y=i[11],g=i[12],w=i[13],b=i[14],m=i[15];if(n[0].setComponents(l-a,d-u,y-f,m-g).normalize(),n[1].setComponents(l+a,d+u,y+f,m+g).normalize(),n[2].setComponents(l+o,d+c,y+p,m+w).normalize(),n[3].setComponents(l-o,d-c,y-p,m-w).normalize(),n[4].setComponents(l-s,d-h,y-v,m-b).normalize(),t===ll)n[5].setComponents(l+s,d+h,y+v,m+b).normalize();else if(t===vv)n[5].setComponents(s,h,v,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_h.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),_h.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_h)}intersectsSprite(e){return _h.center.set(0,0,0),_h.radius=.7071067811865476,_h.applyMatrix4(e.matrixWorld),this.intersectsSphere(_h)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Ib.x=i.normal.x>0?e.max.x:e.min.x,Ib.y=i.normal.y>0?e.max.y:e.min.y,Ib.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ib)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function VY(){let r=null,e=!1,t=null,n=null;function i(a,o){t(a,o),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){r=a}}}function a4e(r,e){const t=e.isWebGL2,n=new WeakMap;function i(u,c){const h=u.array,d=u.usage,f=h.byteLength,p=r.createBuffer();r.bindBuffer(c,p),r.bufferData(c,h,d),u.onUploadCallback();let v;if(h instanceof Float32Array)v=r.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)v=r.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=r.UNSIGNED_SHORT;else if(h instanceof Int16Array)v=r.SHORT;else if(h instanceof Uint32Array)v=r.UNSIGNED_INT;else if(h instanceof Int32Array)v=r.INT;else if(h instanceof Int8Array)v=r.BYTE;else if(h instanceof Uint8Array)v=r.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)v=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:p,type:v,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version,size:f}}function a(u,c,h){const d=c.array,f=c._updateRange,p=c.updateRanges;if(r.bindBuffer(h,u),f.count===-1&&p.length===0&&r.bufferSubData(h,0,d),p.length!==0){for(let v=0,y=p.length;v<y;v++){const g=p[v];t?r.bufferSubData(h,g.start*d.BYTES_PER_ELEMENT,d,g.start,g.count):r.bufferSubData(h,g.start*d.BYTES_PER_ELEMENT,d.subarray(g.start,g.start+g.count))}c.clearUpdateRanges()}f.count!==-1&&(t?r.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):r.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),c.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),n.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=n.get(u);c&&(r.deleteBuffer(c.buffer),n.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const d=n.get(u);(!d||d.version<u.version)&&n.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=n.get(u);if(h===void 0)n.set(u,i(u,c));else if(h.version<u.version){if(h.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");a(h.buffer,u,c),h.version=u.version}}return{get:o,remove:s,update:l}}class Im extends or{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const a=e/2,o=t/2,s=Math.floor(n),l=Math.floor(i),u=s+1,c=l+1,h=e/s,d=t/l,f=[],p=[],v=[],y=[];for(let g=0;g<c;g++){const w=g*d-o;for(let b=0;b<u;b++){const m=b*h-a;p.push(m,-w,0),v.push(0,0,1),y.push(b/s),y.push(1-g/l)}}for(let g=0;g<l;g++)for(let w=0;w<s;w++){const b=w+u*g,m=w+u*(g+1),x=w+1+u*(g+1),S=w+1+u*g;f.push(b,m,S),f.push(m,x,S)}this.setIndex(f),this.setAttribute("position",new Tt(p,3)),this.setAttribute("normal",new Tt(v,3)),this.setAttribute("uv",new Tt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Im(e.width,e.height,e.widthSegments,e.heightSegments)}}var o4e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,s4e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,l4e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,u4e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,c4e=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,h4e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,d4e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,f4e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,p4e=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,m4e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,g4e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,v4e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,y4e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,b4e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,x4e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,w4e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,S4e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,M4e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,_4e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,E4e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,C4e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,A4e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,T4e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,D4e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,k4e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,N4e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,O4e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,R4e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,P4e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,I4e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,L4e="gl_FragColor = linearToOutputTexel( gl_FragColor );",F4e=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,B4e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,z4e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,U4e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,j4e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,H4e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,V4e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,q4e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,W4e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,G4e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,$4e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,X4e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Y4e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,J4e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Z4e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,K4e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Q4e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,eFe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,tFe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,rFe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,nFe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,iFe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,aFe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,oFe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,sFe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lFe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,uFe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,cFe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hFe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,dFe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,fFe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,pFe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,mFe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gFe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vFe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,yFe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,bFe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,xFe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,wFe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,SFe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,MFe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,_Fe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,EFe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,CFe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,AFe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,TFe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,DFe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,kFe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,NFe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,OFe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,RFe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,PFe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,IFe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,LFe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,FFe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,BFe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,zFe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,UFe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,jFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,HFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,VFe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,qFe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,WFe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,GFe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,$Fe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,XFe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,YFe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,JFe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ZFe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,KFe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,QFe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,e5e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,t5e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,r5e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,n5e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,i5e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const a5e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,o5e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,s5e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,l5e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,u5e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,c5e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,h5e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,d5e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,f5e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,p5e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,m5e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,g5e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,v5e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,y5e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,b5e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,x5e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,w5e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,S5e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,M5e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,_5e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,E5e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,C5e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,A5e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,T5e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,D5e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,k5e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,N5e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,O5e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,R5e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,P5e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,I5e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,L5e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,F5e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,B5e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cr={alphahash_fragment:o4e,alphahash_pars_fragment:s4e,alphamap_fragment:l4e,alphamap_pars_fragment:u4e,alphatest_fragment:c4e,alphatest_pars_fragment:h4e,aomap_fragment:d4e,aomap_pars_fragment:f4e,batching_pars_vertex:p4e,batching_vertex:m4e,begin_vertex:g4e,beginnormal_vertex:v4e,bsdfs:y4e,iridescence_fragment:b4e,bumpmap_pars_fragment:x4e,clipping_planes_fragment:w4e,clipping_planes_pars_fragment:S4e,clipping_planes_pars_vertex:M4e,clipping_planes_vertex:_4e,color_fragment:E4e,color_pars_fragment:C4e,color_pars_vertex:A4e,color_vertex:T4e,common:D4e,cube_uv_reflection_fragment:k4e,defaultnormal_vertex:N4e,displacementmap_pars_vertex:O4e,displacementmap_vertex:R4e,emissivemap_fragment:P4e,emissivemap_pars_fragment:I4e,colorspace_fragment:L4e,colorspace_pars_fragment:F4e,envmap_fragment:B4e,envmap_common_pars_fragment:z4e,envmap_pars_fragment:U4e,envmap_pars_vertex:j4e,envmap_physical_pars_fragment:Q4e,envmap_vertex:H4e,fog_vertex:V4e,fog_pars_vertex:q4e,fog_fragment:W4e,fog_pars_fragment:G4e,gradientmap_pars_fragment:$4e,lightmap_fragment:X4e,lightmap_pars_fragment:Y4e,lights_lambert_fragment:J4e,lights_lambert_pars_fragment:Z4e,lights_pars_begin:K4e,lights_toon_fragment:eFe,lights_toon_pars_fragment:tFe,lights_phong_fragment:rFe,lights_phong_pars_fragment:nFe,lights_physical_fragment:iFe,lights_physical_pars_fragment:aFe,lights_fragment_begin:oFe,lights_fragment_maps:sFe,lights_fragment_end:lFe,logdepthbuf_fragment:uFe,logdepthbuf_pars_fragment:cFe,logdepthbuf_pars_vertex:hFe,logdepthbuf_vertex:dFe,map_fragment:fFe,map_pars_fragment:pFe,map_particle_fragment:mFe,map_particle_pars_fragment:gFe,metalnessmap_fragment:vFe,metalnessmap_pars_fragment:yFe,morphcolor_vertex:bFe,morphnormal_vertex:xFe,morphtarget_pars_vertex:wFe,morphtarget_vertex:SFe,normal_fragment_begin:MFe,normal_fragment_maps:_Fe,normal_pars_fragment:EFe,normal_pars_vertex:CFe,normal_vertex:AFe,normalmap_pars_fragment:TFe,clearcoat_normal_fragment_begin:DFe,clearcoat_normal_fragment_maps:kFe,clearcoat_pars_fragment:NFe,iridescence_pars_fragment:OFe,opaque_fragment:RFe,packing:PFe,premultiplied_alpha_fragment:IFe,project_vertex:LFe,dithering_fragment:FFe,dithering_pars_fragment:BFe,roughnessmap_fragment:zFe,roughnessmap_pars_fragment:UFe,shadowmap_pars_fragment:jFe,shadowmap_pars_vertex:HFe,shadowmap_vertex:VFe,shadowmask_pars_fragment:qFe,skinbase_vertex:WFe,skinning_pars_vertex:GFe,skinning_vertex:$Fe,skinnormal_vertex:XFe,specularmap_fragment:YFe,specularmap_pars_fragment:JFe,tonemapping_fragment:ZFe,tonemapping_pars_fragment:KFe,transmission_fragment:QFe,transmission_pars_fragment:e5e,uv_pars_fragment:t5e,uv_pars_vertex:r5e,uv_vertex:n5e,worldpos_vertex:i5e,background_vert:a5e,background_frag:o5e,backgroundCube_vert:s5e,backgroundCube_frag:l5e,cube_vert:u5e,cube_frag:c5e,depth_vert:h5e,depth_frag:d5e,distanceRGBA_vert:f5e,distanceRGBA_frag:p5e,equirect_vert:m5e,equirect_frag:g5e,linedashed_vert:v5e,linedashed_frag:y5e,meshbasic_vert:b5e,meshbasic_frag:x5e,meshlambert_vert:w5e,meshlambert_frag:S5e,meshmatcap_vert:M5e,meshmatcap_frag:_5e,meshnormal_vert:E5e,meshnormal_frag:C5e,meshphong_vert:A5e,meshphong_frag:T5e,meshphysical_vert:D5e,meshphysical_frag:k5e,meshtoon_vert:N5e,meshtoon_frag:O5e,points_vert:R5e,points_frag:P5e,shadow_vert:I5e,shadow_frag:L5e,sprite_vert:F5e,sprite_frag:B5e},pt={common:{diffuse:{value:new wt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new fr},alphaMap:{value:null},alphaMapTransform:{value:new fr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new fr}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new fr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new fr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new fr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new fr},normalScale:{value:new Qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new fr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new fr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new fr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new fr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new fr},alphaTest:{value:0},uvTransform:{value:new fr}},sprite:{diffuse:{value:new wt(16777215)},opacity:{value:1},center:{value:new Qe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new fr},alphaMap:{value:null},alphaMapTransform:{value:new fr},alphaTest:{value:0}}},bs={basic:{uniforms:pa([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.fog]),vertexShader:cr.meshbasic_vert,fragmentShader:cr.meshbasic_frag},lambert:{uniforms:pa([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,pt.lights,{emissive:{value:new wt(0)}}]),vertexShader:cr.meshlambert_vert,fragmentShader:cr.meshlambert_frag},phong:{uniforms:pa([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,pt.lights,{emissive:{value:new wt(0)},specular:{value:new wt(1118481)},shininess:{value:30}}]),vertexShader:cr.meshphong_vert,fragmentShader:cr.meshphong_frag},standard:{uniforms:pa([pt.common,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.roughnessmap,pt.metalnessmap,pt.fog,pt.lights,{emissive:{value:new wt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cr.meshphysical_vert,fragmentShader:cr.meshphysical_frag},toon:{uniforms:pa([pt.common,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.gradientmap,pt.fog,pt.lights,{emissive:{value:new wt(0)}}]),vertexShader:cr.meshtoon_vert,fragmentShader:cr.meshtoon_frag},matcap:{uniforms:pa([pt.common,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,{matcap:{value:null}}]),vertexShader:cr.meshmatcap_vert,fragmentShader:cr.meshmatcap_frag},points:{uniforms:pa([pt.points,pt.fog]),vertexShader:cr.points_vert,fragmentShader:cr.points_frag},dashed:{uniforms:pa([pt.common,pt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cr.linedashed_vert,fragmentShader:cr.linedashed_frag},depth:{uniforms:pa([pt.common,pt.displacementmap]),vertexShader:cr.depth_vert,fragmentShader:cr.depth_frag},normal:{uniforms:pa([pt.common,pt.bumpmap,pt.normalmap,pt.displacementmap,{opacity:{value:1}}]),vertexShader:cr.meshnormal_vert,fragmentShader:cr.meshnormal_frag},sprite:{uniforms:pa([pt.sprite,pt.fog]),vertexShader:cr.sprite_vert,fragmentShader:cr.sprite_frag},background:{uniforms:{uvTransform:{value:new fr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:cr.background_vert,fragmentShader:cr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:cr.backgroundCube_vert,fragmentShader:cr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cr.cube_vert,fragmentShader:cr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cr.equirect_vert,fragmentShader:cr.equirect_frag},distanceRGBA:{uniforms:pa([pt.common,pt.displacementmap,{referencePosition:{value:new me},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cr.distanceRGBA_vert,fragmentShader:cr.distanceRGBA_frag},shadow:{uniforms:pa([pt.lights,pt.fog,{color:{value:new wt(0)},opacity:{value:1}}]),vertexShader:cr.shadow_vert,fragmentShader:cr.shadow_frag}};bs.physical={uniforms:pa([bs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new fr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new fr},clearcoatNormalScale:{value:new Qe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new fr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new fr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new fr},sheen:{value:0},sheenColor:{value:new wt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new fr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new fr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new fr},transmissionSamplerSize:{value:new Qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new fr},attenuationDistance:{value:0},attenuationColor:{value:new wt(0)},specularColor:{value:new wt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new fr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new fr},anisotropyVector:{value:new Qe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new fr}}]),vertexShader:cr.meshphysical_vert,fragmentShader:cr.meshphysical_frag};const Lb={r:0,b:0,g:0};function z5e(r,e,t,n,i,a,o){const s=new wt(0);let l=a===!0?0:1,u,c,h=null,d=0,f=null;function p(y,g){let w=!1,b=g.isScene===!0?g.background:null;b&&b.isTexture&&(b=(g.backgroundBlurriness>0?t:e).get(b)),b===null?v(s,l):b&&b.isColor&&(v(b,1),w=!0);const m=r.xr.getEnvironmentBlendMode();m==="additive"?n.buffers.color.setClear(0,0,0,1,o):m==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(r.autoClear||w)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Pm)?(c===void 0&&(c=new Yn(new jd(1,1,1),new ts({name:"BackgroundCubeMaterial",uniforms:em(bs.backgroundCube.uniforms),vertexShader:bs.backgroundCube.vertexShader,fragmentShader:bs.backgroundCube.fragmentShader,side:_a,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(x,S,E){this.matrixWorld.copyPosition(E.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=b,c.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=Ir.getTransfer(b.colorSpace)!==en,(h!==b||d!==b.version||f!==r.toneMapping)&&(c.material.needsUpdate=!0,h=b,d=b.version,f=r.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null)):b&&b.isTexture&&(u===void 0&&(u=new Yn(new Im(2,2),new ts({name:"BackgroundMaterial",uniforms:em(bs.background.uniforms),vertexShader:bs.background.vertexShader,fragmentShader:bs.background.fragmentShader,side:Mu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=b,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=Ir.getTransfer(b.colorSpace)!==en,b.matrixAutoUpdate===!0&&b.updateMatrix(),u.material.uniforms.uvTransform.value.copy(b.matrix),(h!==b||d!==b.version||f!==r.toneMapping)&&(u.material.needsUpdate=!0,h=b,d=b.version,f=r.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null))}function v(y,g){y.getRGB(Lb,zY(r)),n.buffers.color.setClear(Lb.r,Lb.g,Lb.b,g,o)}return{getClearColor:function(){return s},setClearColor:function(y,g=1){s.set(y),l=g,v(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,v(s,l)},render:p}}function U5e(r,e,t,n){const i=r.getParameter(r.MAX_VERTEX_ATTRIBS),a=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||a!==null,s={},l=y(null);let u=l,c=!1;function h(L,F,k,R,z){let B=!1;if(o){const X=v(R,k,F);u!==X&&(u=X,f(u.object)),B=g(L,R,k,z),B&&w(L,R,k,z)}else{const X=F.wireframe===!0;(u.geometry!==R.id||u.program!==k.id||u.wireframe!==X)&&(u.geometry=R.id,u.program=k.id,u.wireframe=X,B=!0)}z!==null&&t.update(z,r.ELEMENT_ARRAY_BUFFER),(B||c)&&(c=!1,A(L,F,k,R),z!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.get(z).buffer))}function d(){return n.isWebGL2?r.createVertexArray():a.createVertexArrayOES()}function f(L){return n.isWebGL2?r.bindVertexArray(L):a.bindVertexArrayOES(L)}function p(L){return n.isWebGL2?r.deleteVertexArray(L):a.deleteVertexArrayOES(L)}function v(L,F,k){const R=k.wireframe===!0;let z=s[L.id];z===void 0&&(z={},s[L.id]=z);let B=z[F.id];B===void 0&&(B={},z[F.id]=B);let X=B[R];return X===void 0&&(X=y(d()),B[R]=X),X}function y(L){const F=[],k=[],R=[];for(let z=0;z<i;z++)F[z]=0,k[z]=0,R[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:k,attributeDivisors:R,object:L,attributes:{},index:null}}function g(L,F,k,R){const z=u.attributes,B=F.attributes;let X=0;const Z=k.getAttributes();for(const Q in Z)if(Z[Q].location>=0){const J=z[Q];let ne=B[Q];if(ne===void 0&&(Q==="instanceMatrix"&&L.instanceMatrix&&(ne=L.instanceMatrix),Q==="instanceColor"&&L.instanceColor&&(ne=L.instanceColor)),J===void 0||J.attribute!==ne||ne&&J.data!==ne.data)return!0;X++}return u.attributesNum!==X||u.index!==R}function w(L,F,k,R){const z={},B=F.attributes;let X=0;const Z=k.getAttributes();for(const Q in Z)if(Z[Q].location>=0){let J=B[Q];J===void 0&&(Q==="instanceMatrix"&&L.instanceMatrix&&(J=L.instanceMatrix),Q==="instanceColor"&&L.instanceColor&&(J=L.instanceColor));const ne={};ne.attribute=J,J&&J.data&&(ne.data=J.data),z[Q]=ne,X++}u.attributes=z,u.attributesNum=X,u.index=R}function b(){const L=u.newAttributes;for(let F=0,k=L.length;F<k;F++)L[F]=0}function m(L){x(L,0)}function x(L,F){const k=u.newAttributes,R=u.enabledAttributes,z=u.attributeDivisors;k[L]=1,R[L]===0&&(r.enableVertexAttribArray(L),R[L]=1),z[L]!==F&&((n.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,F),z[L]=F)}function S(){const L=u.newAttributes,F=u.enabledAttributes;for(let k=0,R=F.length;k<R;k++)F[k]!==L[k]&&(r.disableVertexAttribArray(k),F[k]=0)}function E(L,F,k,R,z,B,X){X===!0?r.vertexAttribIPointer(L,F,k,z,B):r.vertexAttribPointer(L,F,k,R,z,B)}function A(L,F,k,R){if(n.isWebGL2===!1&&(L.isInstancedMesh||R.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const z=R.attributes,B=k.getAttributes(),X=F.defaultAttributeValues;for(const Z in B){const Q=B[Z];if(Q.location>=0){let J=z[Z];if(J===void 0&&(Z==="instanceMatrix"&&L.instanceMatrix&&(J=L.instanceMatrix),Z==="instanceColor"&&L.instanceColor&&(J=L.instanceColor)),J!==void 0){const ne=J.normalized,fe=J.itemSize,se=t.get(J);if(se===void 0)continue;const ye=se.buffer,De=se.type,pe=se.bytesPerElement,Te=n.isWebGL2===!0&&(De===r.INT||De===r.UNSIGNED_INT||J.gpuType===sO);if(J.isInterleavedBufferAttribute){const be=J.data,re=be.stride,Re=J.offset;if(be.isInstancedInterleavedBuffer){for(let ze=0;ze<Q.locationSize;ze++)x(Q.location+ze,be.meshPerAttribute);L.isInstancedMesh!==!0&&R._maxInstanceCount===void 0&&(R._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let ze=0;ze<Q.locationSize;ze++)m(Q.location+ze);r.bindBuffer(r.ARRAY_BUFFER,ye);for(let ze=0;ze<Q.locationSize;ze++)E(Q.location+ze,fe/Q.locationSize,De,ne,re*pe,(Re+fe/Q.locationSize*ze)*pe,Te)}else{if(J.isInstancedBufferAttribute){for(let be=0;be<Q.locationSize;be++)x(Q.location+be,J.meshPerAttribute);L.isInstancedMesh!==!0&&R._maxInstanceCount===void 0&&(R._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let be=0;be<Q.locationSize;be++)m(Q.location+be);r.bindBuffer(r.ARRAY_BUFFER,ye);for(let be=0;be<Q.locationSize;be++)E(Q.location+be,fe/Q.locationSize,De,ne,fe*pe,fe/Q.locationSize*be*pe,Te)}}else if(X!==void 0){const ne=X[Z];if(ne!==void 0)switch(ne.length){case 2:r.vertexAttrib2fv(Q.location,ne);break;case 3:r.vertexAttrib3fv(Q.location,ne);break;case 4:r.vertexAttrib4fv(Q.location,ne);break;default:r.vertexAttrib1fv(Q.location,ne)}}}}S()}function T(){O();for(const L in s){const F=s[L];for(const k in F){const R=F[k];for(const z in R)p(R[z].object),delete R[z];delete F[k]}delete s[L]}}function C(L){if(s[L.id]===void 0)return;const F=s[L.id];for(const k in F){const R=F[k];for(const z in R)p(R[z].object),delete R[z];delete F[k]}delete s[L.id]}function D(L){for(const F in s){const k=s[F];if(k[L.id]===void 0)continue;const R=k[L.id];for(const z in R)p(R[z].object),delete R[z];delete k[L.id]}}function O(){U(),c=!0,u!==l&&(u=l,f(u.object))}function U(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:O,resetDefaultState:U,dispose:T,releaseStatesOfGeometry:C,releaseStatesOfProgram:D,initAttributes:b,enableAttribute:m,disableUnusedAttributes:S}}function j5e(r,e,t,n){const i=n.isWebGL2;let a;function o(c){a=c}function s(c,h){r.drawArrays(a,c,h),t.update(h,a,1)}function l(c,h,d){if(d===0)return;let f,p;if(i)f=r,p="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[p](a,c,h,d),t.update(h,a,d)}function u(c,h,d){if(d===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<d;p++)this.render(c[p],h[p]);else{f.multiDrawArraysWEBGL(a,c,0,h,0,d);let p=0;for(let v=0;v<d;v++)p+=h[v];t.update(p,a,1)}}this.setMode=o,this.render=s,this.renderInstances=l,this.renderMultiDraw=u}function H5e(r,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");n=r.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function a(E){if(E==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return E==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&r.constructor.name==="WebGL2RenderingContext";let s=t.precision!==void 0?t.precision:"highp";const l=a(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const u=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,h=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),d=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=r.getParameter(r.MAX_TEXTURE_SIZE),p=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),v=r.getParameter(r.MAX_VERTEX_ATTRIBS),y=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),g=r.getParameter(r.MAX_VARYING_VECTORS),w=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),b=d>0,m=o||e.has("OES_texture_float"),x=b&&m,S=o?r.getParameter(r.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:v,maxVertexUniforms:y,maxVaryings:g,maxFragmentUniforms:w,vertexTextures:b,floatFragmentTextures:m,floatVertexTextures:x,maxSamples:S}}function V5e(r){const e=this;let t=null,n=0,i=!1,a=!1;const o=new Zl,s=new fr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||n!==0||i;return i=d,n=h.length,f},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(h,d){t=c(h,d,0)},this.setState=function(h,d,f){const p=h.clippingPlanes,v=h.clipIntersection,y=h.clipShadows,g=r.get(h);if(!i||p===null||p.length===0||a&&!y)a?c(null):u();else{const w=a?0:n,b=w*4;let m=g.clippingState||null;l.value=m,m=c(p,d,b,f);for(let x=0;x!==b;++x)m[x]=t[x];g.clippingState=m,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=w}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(h,d,f,p){const v=h!==null?h.length:0;let y=null;if(v!==0){if(y=l.value,p!==!0||y===null){const g=f+v*4,w=d.matrixWorldInverse;s.getNormalMatrix(w),(y===null||y.length<g)&&(y=new Float32Array(g));for(let b=0,m=f;b!==v;++b,m+=4)o.copy(h[b]).applyMatrix4(w,s),o.normal.toArray(y,m),y[m+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function q5e(r){let e=new WeakMap;function t(o,s){return s===ov?o.mapping=_u:s===sv&&(o.mapping=Gc),o}function n(o){if(o&&o.isTexture){const s=o.mapping;if(s===ov||s===sv)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new HY(l.height);return u.fromEquirectangularTexture(r,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const s=o.target;s.removeEventListener("dispose",i);const l=e.get(s);l!==void 0&&(e.delete(s),l.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}let au=class extends py{constructor(r=-1,e=1,t=1,n=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=r,this.right=e,this.top=t,this.bottom=n,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(r,e){return super.copy(r,e),this.left=r.left,this.right=r.right,this.top=r.top,this.bottom=r.bottom,this.near=r.near,this.far=r.far,this.zoom=r.zoom,this.view=r.view===null?null:Object.assign({},r.view),this}setViewOffset(r,e,t,n,i,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=e,this.view.offsetX=t,this.view.offsetY=n,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const r=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let i=t-r,a=t+r,o=n+e,s=n-e;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=l*this.view.offsetX,a=i+l*this.view.width,o-=u*this.view.offsetY,s=o-u*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(r){const e=super.toJSON(r);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}};const up=4,f8=[.125,.215,.35,.446,.526,.582],Uh=20,CC=new au,p8=new wt;let AC=null,TC=0,DC=0;const Fh=(1+Math.sqrt(5))/2,Tf=1/Fh,m8=[new me(1,1,1),new me(-1,1,1),new me(1,1,-1),new me(-1,1,-1),new me(0,Fh,Tf),new me(0,Fh,-Tf),new me(Tf,0,Fh),new me(-Tf,0,Fh),new me(Fh,Tf,0),new me(-Fh,Tf,0)];class QD{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){AC=this._renderer.getRenderTarget(),TC=this._renderer.getActiveCubeFace(),DC=this._renderer.getActiveMipmapLevel(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,n,i,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=y8(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=v8(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(AC,TC,DC),e.scissorTest=!1,Fb(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===_u||e.mapping===Gc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),AC=this._renderer.getRenderTarget(),TC=this._renderer.getActiveCubeFace(),DC=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:sn,minFilter:sn,generateMipmaps:!1,type:Md,format:ya,colorSpace:_l,depthBuffer:!1},i=g8(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=g8(e,t,n);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=W5e(a)),this._blurMaterial=G5e(a,e,t)}return i}_compileMaterial(e){const t=new Yn(this._lodPlanes[0],e);this._renderer.compile(t,CC)}_sceneToCubeUV(e,t,n,i){const a=new Nn(90,1,t,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear,c=l.toneMapping;l.getClearColor(p8),l.toneMapping=ml,l.autoClear=!1;const h=new lh({name:"PMREM.Background",side:_a,depthWrite:!1,depthTest:!1}),d=new Yn(new jd,h);let f=!1;const p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,f=!0):(h.color.copy(p8),f=!0);for(let v=0;v<6;v++){const y=v%3;y===0?(a.up.set(0,o[v],0),a.lookAt(s[v],0,0)):y===1?(a.up.set(0,0,o[v]),a.lookAt(0,s[v],0)):(a.up.set(0,o[v],0),a.lookAt(0,0,s[v]));const g=this._cubeSize;Fb(i,y*g,v>2?g:0,g,g),l.setRenderTarget(i),f&&l.render(d,a),l.render(e,a)}d.geometry.dispose(),d.material.dispose(),l.toneMapping=c,l.autoClear=u,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===_u||e.mapping===Gc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=y8()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=v8());const a=i?this._cubemapMaterial:this._equirectMaterial,o=new Yn(this._lodPlanes[0],a),s=a.uniforms;s.envMap.value=e;const l=this._cubeSize;Fb(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,CC)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=m8[(i-1)%m8.length];this._blur(e,i-1,i,a,o)}t.autoClear=n}_blur(e,t,n,i,a){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",a),this._halfBlur(o,e,n,n,i,"longitudinal",a)}_halfBlur(e,t,n,i,a,o,s){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new Yn(this._lodPlanes[i],u),d=u.uniforms,f=this._sizeLods[n]-1,p=isFinite(a)?Math.PI/(2*f):2*Math.PI/(2*Uh-1),v=a/p,y=isFinite(a)?1+Math.floor(c*v):Uh;y>Uh&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Uh}`);const g=[];let w=0;for(let E=0;E<Uh;++E){const A=E/v,T=Math.exp(-A*A/2);g.push(T),E===0?w+=T:E<y&&(w+=2*T)}for(let E=0;E<g.length;E++)g[E]=g[E]/w;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=g,d.latitudinal.value=o==="latitudinal",s&&(d.poleAxis.value=s);const{_lodMax:b}=this;d.dTheta.value=p,d.mipInt.value=b-n;const m=this._sizeLods[i],x=3*m*(i>b-up?i-b+up:0),S=4*(this._cubeSize-m);Fb(t,x,S,3*m,2*m),l.setRenderTarget(t),l.render(h,CC)}}function W5e(r){const e=[],t=[],n=[];let i=r;const a=r-up+1+f8.length;for(let o=0;o<a;o++){const s=Math.pow(2,i);t.push(s);let l=1/s;o>r-up?l=f8[o-r+up-1]:o===0&&(l=0),n.push(l);const u=1/(s-2),c=-u,h=1+u,d=[c,c,h,c,h,h,c,c,h,h,c,h],f=6,p=6,v=3,y=2,g=1,w=new Float32Array(v*p*f),b=new Float32Array(y*p*f),m=new Float32Array(g*p*f);for(let S=0;S<f;S++){const E=S%3*2/3-1,A=S>2?0:-1,T=[E,A,0,E+2/3,A,0,E+2/3,A+1,0,E,A,0,E+2/3,A+1,0,E,A+1,0];w.set(T,v*p*S),b.set(d,y*p*S);const C=[S,S,S,S,S,S];m.set(C,g*p*S)}const x=new or;x.setAttribute("position",new jr(w,v)),x.setAttribute("uv",new jr(b,y)),x.setAttribute("faceIndex",new jr(m,g)),e.push(x),i>up&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function g8(r,e,t){const n=new es(r,e,t);return n.texture.mapping=Pm,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Fb(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function G5e(r,e,t){const n=new Float32Array(Uh),i=new me(0,1,0);return new ts({name:"SphericalGaussianBlur",defines:{n:Uh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:SO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:hu,depthTest:!1,depthWrite:!1})}function v8(){return new ts({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:SO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:hu,depthTest:!1,depthWrite:!1})}function y8(){return new ts({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:SO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:hu,depthTest:!1,depthWrite:!1})}function SO(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function $5e(r){let e=new WeakMap,t=null;function n(s){if(s&&s.isTexture){const l=s.mapping,u=l===ov||l===sv,c=l===_u||l===Gc;if(u||c)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let h=e.get(s);return t===null&&(t=new QD(r)),h=u?t.fromEquirectangular(s,h):t.fromCubemap(s,h),e.set(s,h),h.texture}else{if(e.has(s))return e.get(s).texture;{const h=s.image;if(u&&h&&h.height>0||c&&h&&i(h)){t===null&&(t=new QD(r));const d=u?t.fromEquirectangular(s):t.fromCubemap(s);return e.set(s,d),s.addEventListener("dispose",a),d.texture}else return null}}}return s}function i(s){let l=0;const u=6;for(let c=0;c<u;c++)s[c]!==void 0&&l++;return l===u}function a(s){const l=s.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function X5e(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function Y5e(r,e,t,n){const i={},a=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);for(const p in d.morphAttributes){const v=d.morphAttributes[p];for(let y=0,g=v.length;y<g;y++)e.remove(v[y])}d.removeEventListener("dispose",o),delete i[d.id];const f=a.get(d);f&&(e.remove(f),a.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function s(h,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const p in d)e.update(d[p],r.ARRAY_BUFFER);const f=h.morphAttributes;for(const p in f){const v=f[p];for(let y=0,g=v.length;y<g;y++)e.update(v[y],r.ARRAY_BUFFER)}}function u(h){const d=[],f=h.index,p=h.attributes.position;let v=0;if(f!==null){const w=f.array;v=f.version;for(let b=0,m=w.length;b<m;b+=3){const x=w[b+0],S=w[b+1],E=w[b+2];d.push(x,S,S,E,E,x)}}else if(p!==void 0){const w=p.array;v=p.version;for(let b=0,m=w.length/3-1;b<m;b+=3){const x=b+0,S=b+1,E=b+2;d.push(x,S,S,E,E,x)}}else return;const y=new(IY(d)?wO:xO)(d,1);y.version=v;const g=a.get(h);g&&e.remove(g),a.set(h,y)}function c(h){const d=a.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&u(h)}else u(h);return a.get(h)}return{get:s,update:l,getWireframeAttribute:c}}function J5e(r,e,t,n){const i=n.isWebGL2;let a;function o(f){a=f}let s,l;function u(f){s=f.type,l=f.bytesPerElement}function c(f,p){r.drawElements(a,p,s,f*l),t.update(p,a,1)}function h(f,p,v){if(v===0)return;let y,g;if(i)y=r,g="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[g](a,p,s,f*l,v),t.update(p,a,v)}function d(f,p,v){if(v===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let g=0;g<v;g++)this.render(f[g]/l,p[g]);else{y.multiDrawElementsWEBGL(a,p,0,s,f,0,v);let g=0;for(let w=0;w<v;w++)g+=p[w];t.update(g,a,1)}}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=h,this.renderMultiDraw=d}function Z5e(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,o,s){switch(t.calls++,o){case r.TRIANGLES:t.triangles+=s*(a/3);break;case r.LINES:t.lines+=s*(a/2);break;case r.LINE_STRIP:t.lines+=s*(a-1);break;case r.LINE_LOOP:t.lines+=s*a;break;case r.POINTS:t.points+=s*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function K5e(r,e){return r[0]-e[0]}function Q5e(r,e){return Math.abs(e[1])-Math.abs(r[1])}function eBe(r,e,t){const n={},i=new Float32Array(8),a=new WeakMap,o=new Fr,s=[];for(let u=0;u<8;u++)s[u]=[u,0];function l(u,c,h){const d=u.morphTargetInfluences;if(e.isWebGL2===!0){const f=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=f!==void 0?f.length:0;let v=a.get(c);if(v===void 0||v.count!==p){let w=function(){U.dispose(),a.delete(c),c.removeEventListener("dispose",w)};v!==void 0&&v.texture.dispose();const b=c.morphAttributes.position!==void 0,m=c.morphAttributes.normal!==void 0,x=c.morphAttributes.color!==void 0,S=c.morphAttributes.position||[],E=c.morphAttributes.normal||[],A=c.morphAttributes.color||[];let T=0;b===!0&&(T=1),m===!0&&(T=2),x===!0&&(T=3);let C=c.attributes.position.count*T,D=1;C>e.maxTextureSize&&(D=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const O=new Float32Array(C*D*4*p),U=new v2(O,C,D,p);U.type=po,U.needsUpdate=!0;const L=T*4;for(let F=0;F<p;F++){const k=S[F],R=E[F],z=A[F],B=C*D*4*F;for(let X=0;X<k.count;X++){const Z=X*L;b===!0&&(o.fromBufferAttribute(k,X),O[B+Z+0]=o.x,O[B+Z+1]=o.y,O[B+Z+2]=o.z,O[B+Z+3]=0),m===!0&&(o.fromBufferAttribute(R,X),O[B+Z+4]=o.x,O[B+Z+5]=o.y,O[B+Z+6]=o.z,O[B+Z+7]=0),x===!0&&(o.fromBufferAttribute(z,X),O[B+Z+8]=o.x,O[B+Z+9]=o.y,O[B+Z+10]=o.z,O[B+Z+11]=z.itemSize===4?o.w:1)}}v={count:p,texture:U,size:new Qe(C,D)},a.set(c,v),c.addEventListener("dispose",w)}let y=0;for(let w=0;w<d.length;w++)y+=d[w];const g=c.morphTargetsRelative?1:1-y;h.getUniforms().setValue(r,"morphTargetBaseInfluence",g),h.getUniforms().setValue(r,"morphTargetInfluences",d),h.getUniforms().setValue(r,"morphTargetsTexture",v.texture,t),h.getUniforms().setValue(r,"morphTargetsTextureSize",v.size)}else{const f=d===void 0?0:d.length;let p=n[c.id];if(p===void 0||p.length!==f){p=[];for(let b=0;b<f;b++)p[b]=[b,0];n[c.id]=p}for(let b=0;b<f;b++){const m=p[b];m[0]=b,m[1]=d[b]}p.sort(Q5e);for(let b=0;b<8;b++)b<f&&p[b][1]?(s[b][0]=p[b][0],s[b][1]=p[b][1]):(s[b][0]=Number.MAX_SAFE_INTEGER,s[b][1]=0);s.sort(K5e);const v=c.morphAttributes.position,y=c.morphAttributes.normal;let g=0;for(let b=0;b<8;b++){const m=s[b],x=m[0],S=m[1];x!==Number.MAX_SAFE_INTEGER&&S?(v&&c.getAttribute("morphTarget"+b)!==v[x]&&c.setAttribute("morphTarget"+b,v[x]),y&&c.getAttribute("morphNormal"+b)!==y[x]&&c.setAttribute("morphNormal"+b,y[x]),i[b]=S,g+=S):(v&&c.hasAttribute("morphTarget"+b)===!0&&c.deleteAttribute("morphTarget"+b),y&&c.hasAttribute("morphNormal"+b)===!0&&c.deleteAttribute("morphNormal"+b),i[b]=0)}const w=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(r,"morphTargetBaseInfluence",w),h.getUniforms().setValue(r,"morphTargetInfluences",i)}}return{update:l}}function tBe(r,e,t,n){let i=new WeakMap;function a(l){const u=n.render.frame,c=l.geometry,h=e.get(l,c);if(i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),i.get(l)!==u&&(t.update(l.instanceMatrix,r.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,r.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const d=l.skeleton;i.get(d)!==u&&(d.update(),i.set(d,u))}return h}function o(){i=new WeakMap}function s(l){const u=l.target;u.removeEventListener("dispose",s),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:a,dispose:o}}class y2 extends Sn{constructor(e,t,n,i,a,o,s,l,u,c){if(c=c!==void 0?c:Pc,c!==Pc&&c!==_d)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===Pc&&(n=iu),n===void 0&&c===_d&&(n=Rc),super(null,i,a,o,s,l,c,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=s!==void 0?s:zn,this.minFilter=l!==void 0?l:zn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const qY=new Sn,WY=new y2(1,1);WY.compareFunction=gO;const GY=new v2,$Y=new bO,XY=new my,b8=[],x8=[],w8=new Float32Array(16),S8=new Float32Array(9),M8=new Float32Array(4);function Lm(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let a=b8[i];if(a===void 0&&(a=new Float32Array(i),b8[i]=a),e!==0){n.toArray(a,0);for(let o=1,s=0;o!==e;++o)s+=t,r[o].toArray(a,s)}return a}function si(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function li(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function b2(r,e){let t=x8[e];t===void 0&&(t=new Int32Array(e),x8[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function rBe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function nBe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(si(t,e))return;r.uniform2fv(this.addr,e),li(t,e)}}function iBe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(si(t,e))return;r.uniform3fv(this.addr,e),li(t,e)}}function aBe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(si(t,e))return;r.uniform4fv(this.addr,e),li(t,e)}}function oBe(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(si(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),li(t,e)}else{if(si(t,n))return;M8.set(n),r.uniformMatrix2fv(this.addr,!1,M8),li(t,n)}}function sBe(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(si(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),li(t,e)}else{if(si(t,n))return;S8.set(n),r.uniformMatrix3fv(this.addr,!1,S8),li(t,n)}}function lBe(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(si(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),li(t,e)}else{if(si(t,n))return;w8.set(n),r.uniformMatrix4fv(this.addr,!1,w8),li(t,n)}}function uBe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function cBe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(si(t,e))return;r.uniform2iv(this.addr,e),li(t,e)}}function hBe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(si(t,e))return;r.uniform3iv(this.addr,e),li(t,e)}}function dBe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(si(t,e))return;r.uniform4iv(this.addr,e),li(t,e)}}function fBe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function pBe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(si(t,e))return;r.uniform2uiv(this.addr,e),li(t,e)}}function mBe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(si(t,e))return;r.uniform3uiv(this.addr,e),li(t,e)}}function gBe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(si(t,e))return;r.uniform4uiv(this.addr,e),li(t,e)}}function vBe(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);const a=this.type===r.SAMPLER_2D_SHADOW?WY:qY;t.setTexture2D(e||a,i)}function yBe(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||$Y,i)}function bBe(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||XY,i)}function xBe(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||GY,i)}function wBe(r){switch(r){case 5126:return rBe;case 35664:return nBe;case 35665:return iBe;case 35666:return aBe;case 35674:return oBe;case 35675:return sBe;case 35676:return lBe;case 5124:case 35670:return uBe;case 35667:case 35671:return cBe;case 35668:case 35672:return hBe;case 35669:case 35673:return dBe;case 5125:return fBe;case 36294:return pBe;case 36295:return mBe;case 36296:return gBe;case 35678:case 36198:case 36298:case 36306:case 35682:return vBe;case 35679:case 36299:case 36307:return yBe;case 35680:case 36300:case 36308:case 36293:return bBe;case 36289:case 36303:case 36311:case 36292:return xBe}}function SBe(r,e){r.uniform1fv(this.addr,e)}function MBe(r,e){const t=Lm(e,this.size,2);r.uniform2fv(this.addr,t)}function _Be(r,e){const t=Lm(e,this.size,3);r.uniform3fv(this.addr,t)}function EBe(r,e){const t=Lm(e,this.size,4);r.uniform4fv(this.addr,t)}function CBe(r,e){const t=Lm(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function ABe(r,e){const t=Lm(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function TBe(r,e){const t=Lm(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function DBe(r,e){r.uniform1iv(this.addr,e)}function kBe(r,e){r.uniform2iv(this.addr,e)}function NBe(r,e){r.uniform3iv(this.addr,e)}function OBe(r,e){r.uniform4iv(this.addr,e)}function RBe(r,e){r.uniform1uiv(this.addr,e)}function PBe(r,e){r.uniform2uiv(this.addr,e)}function IBe(r,e){r.uniform3uiv(this.addr,e)}function LBe(r,e){r.uniform4uiv(this.addr,e)}function FBe(r,e,t){const n=this.cache,i=e.length,a=b2(t,i);si(n,a)||(r.uniform1iv(this.addr,a),li(n,a));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||qY,a[o])}function BBe(r,e,t){const n=this.cache,i=e.length,a=b2(t,i);si(n,a)||(r.uniform1iv(this.addr,a),li(n,a));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||$Y,a[o])}function zBe(r,e,t){const n=this.cache,i=e.length,a=b2(t,i);si(n,a)||(r.uniform1iv(this.addr,a),li(n,a));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||XY,a[o])}function UBe(r,e,t){const n=this.cache,i=e.length,a=b2(t,i);si(n,a)||(r.uniform1iv(this.addr,a),li(n,a));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||GY,a[o])}function jBe(r){switch(r){case 5126:return SBe;case 35664:return MBe;case 35665:return _Be;case 35666:return EBe;case 35674:return CBe;case 35675:return ABe;case 35676:return TBe;case 5124:case 35670:return DBe;case 35667:case 35671:return kBe;case 35668:case 35672:return NBe;case 35669:case 35673:return OBe;case 5125:return RBe;case 36294:return PBe;case 36295:return IBe;case 36296:return LBe;case 35678:case 36198:case 36298:case 36306:case 35682:return FBe;case 35679:case 36299:case 36307:return BBe;case 35680:case 36300:case 36308:case 36293:return zBe;case 36289:case 36303:case 36311:case 36292:return UBe}}class HBe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=wBe(t.type)}}class VBe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=jBe(t.type)}}class qBe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let a=0,o=i.length;a!==o;++a){const s=i[a];s.setValue(e,t[s.id],n)}}}const kC=/(\w+)(\])?(\[|\.)?/g;function _8(r,e){r.seq.push(e),r.map[e.id]=e}function WBe(r,e,t){const n=r.name,i=n.length;for(kC.lastIndex=0;;){const a=kC.exec(n),o=kC.lastIndex;let s=a[1];const l=a[2]==="]",u=a[3];if(l&&(s=s|0),u===void 0||u==="["&&o+2===i){_8(t,u===void 0?new HBe(s,r,e):new VBe(s,r,e));break}else{let c=t.map[s];c===void 0&&(c=new qBe(s),_8(t,c)),t=c}}}class lw{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const a=e.getActiveUniform(t,i),o=e.getUniformLocation(t,a.name);WBe(a,o,this)}}setValue(e,t,n,i){const a=this.map[t];a!==void 0&&a.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let a=0,o=t.length;a!==o;++a){const s=t[a],l=n[s.id];l.needsUpdate!==!1&&s.setValue(e,l.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,a=e.length;i!==a;++i){const o=e[i];o.id in t&&n.push(o)}return n}}function E8(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const GBe=37297;let $Be=0;function XBe(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let o=i;o<a;o++){const s=o+1;n.push(`${s===e?">":" "} ${s}: ${t[o]}`)}return n.join(`
`)}function YBe(r){const e=Ir.getPrimaries(Ir.workingColorSpace),t=Ir.getPrimaries(r);let n;switch(e===t?n="":e===mv&&t===pv?n="LinearDisplayP3ToLinearSRGB":e===pv&&t===mv&&(n="LinearSRGBToLinearDisplayP3"),r){case _l:case dy:return[n,"LinearTransferOETF"];case ri:case g2:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[n,"LinearTransferOETF"]}}function C8(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const o=parseInt(a[1]);return t.toUpperCase()+`

`+i+`

`+XBe(r.getShaderSource(e),o)}else return i}function JBe(r,e){const t=YBe(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function ZBe(r,e){let t;switch(e){case lY:t="Linear";break;case uY:t="Reinhard";break;case cY:t="OptimizedCineon";break;case oO:t="ACESFilmic";break;case dY:t="AgX";break;case hY:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function KBe(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.normalMapTangentSpace||r.clearcoatNormalMap||r.flatShading||r.alphaToCoverage||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(cp).join(`
`)}function QBe(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(cp).join(`
`)}function eze(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function tze(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const a=r.getActiveAttrib(e,i),o=a.name;let s=1;a.type===r.FLOAT_MAT2&&(s=2),a.type===r.FLOAT_MAT3&&(s=3),a.type===r.FLOAT_MAT4&&(s=4),t[o]={type:a.type,location:r.getAttribLocation(e,o),locationSize:s}}return t}function cp(r){return r!==""}function A8(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function T8(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const rze=/^[ \t]*#include +<([\w\d./]+)>/gm;function e3(r){return r.replace(rze,ize)}const nze=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function ize(r,e){let t=cr[e];if(t===void 0){const n=nze.get(e);if(n!==void 0)t=cr[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return e3(t)}const aze=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function D8(r){return r.replace(aze,oze)}function oze(r,e,t,n){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function k8(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	`;return r.isWebGL2&&(e+=`precision ${r.precision} sampler3D;
		precision ${r.precision} sampler2DArray;
		precision ${r.precision} sampler2DShadow;
		precision ${r.precision} samplerCubeShadow;
		precision ${r.precision} sampler2DArrayShadow;
		precision ${r.precision} isampler2D;
		precision ${r.precision} isampler3D;
		precision ${r.precision} isamplerCube;
		precision ${r.precision} isampler2DArray;
		precision ${r.precision} usampler2D;
		precision ${r.precision} usampler3D;
		precision ${r.precision} usamplerCube;
		precision ${r.precision} usampler2DArray;
		`),r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function sze(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===d2?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===g0?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===ms&&(e="SHADOWMAP_TYPE_VSM"),e}function lze(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case _u:case Gc:e="ENVMAP_TYPE_CUBE";break;case Pm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function uze(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Gc:e="ENVMAP_MODE_REFRACTION";break}return e}function cze(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case hy:e="ENVMAP_BLENDING_MULTIPLY";break;case oY:e="ENVMAP_BLENDING_MIX";break;case sY:e="ENVMAP_BLENDING_ADD";break}return e}function hze(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function dze(r,e,t,n){const i=r.getContext(),a=t.defines;let o=t.vertexShader,s=t.fragmentShader;const l=sze(t),u=lze(t),c=uze(t),h=cze(t),d=hze(t),f=t.isWebGL2?"":KBe(t),p=QBe(t),v=eze(a),y=i.createProgram();let g,w,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(cp).join(`
`),g.length>0&&(g+=`
`),w=[f,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(cp).join(`
`),w.length>0&&(w+=`
`)):(g=[k8(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(cp).join(`
`),w=[f,k8(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ml?"#define TONE_MAPPING":"",t.toneMapping!==ml?cr.tonemapping_pars_fragment:"",t.toneMapping!==ml?ZBe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",cr.colorspace_pars_fragment,JBe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(cp).join(`
`)),o=e3(o),o=A8(o,t),o=T8(o,t),s=e3(s),s=A8(s,t),s=T8(s,t),o=D8(o),s=D8(s),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,g=[p,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,w=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===ZD?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ZD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const m=b+g+o,x=b+w+s,S=E8(i,i.VERTEX_SHADER,m),E=E8(i,i.FRAGMENT_SHADER,x);i.attachShader(y,S),i.attachShader(y,E),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function A(O){if(r.debug.checkShaderErrors){const U=i.getProgramInfoLog(y).trim(),L=i.getShaderInfoLog(S).trim(),F=i.getShaderInfoLog(E).trim();let k=!0,R=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(k=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,y,S,E);else{const z=C8(i,S,"vertex"),B=C8(i,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Material Name: `+O.name+`
Material Type: `+O.type+`

Program Info Log: `+U+`
`+z+`
`+B)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(L===""||F==="")&&(R=!1);R&&(O.diagnostics={runnable:k,programLog:U,vertexShader:{log:L,prefix:g},fragmentShader:{log:F,prefix:w}})}i.deleteShader(S),i.deleteShader(E),T=new lw(i,y),C=tze(i,y)}let T;this.getUniforms=function(){return T===void 0&&A(this),T};let C;this.getAttributes=function(){return C===void 0&&A(this),C};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=i.getProgramParameter(y,GBe)),D},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=$Be++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=E,this}let fze=0;class pze{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(a)===!1&&(o.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new mze(e),t.set(e,n)),n}}class mze{constructor(e){this.id=fze++,this.code=e,this.usedTimes=0}}function gze(r,e,t,n,i,a,o){const s=new cd,l=new pze,u=new Set,c=[],h=i.isWebGL2,d=i.logarithmicDepthBuffer,f=i.vertexTextures;let p=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(C){return u.add(C),C===0?"uv":`uv${C}`}function g(C,D,O,U,L){const F=U.fog,k=L.geometry,R=C.isMeshStandardMaterial?U.environment:null,z=(C.isMeshStandardMaterial?t:e).get(C.envMap||R),B=z&&z.mapping===Pm?z.image.height:null,X=v[C.type];C.precision!==null&&(p=i.getMaxPrecision(C.precision),p!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",p,"instead."));const Z=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,Q=Z!==void 0?Z.length:0;let J=0;k.morphAttributes.position!==void 0&&(J=1),k.morphAttributes.normal!==void 0&&(J=2),k.morphAttributes.color!==void 0&&(J=3);let ne,fe,se,ye;if(X){const Ee=bs[X];ne=Ee.vertexShader,fe=Ee.fragmentShader}else ne=C.vertexShader,fe=C.fragmentShader,l.update(C),se=l.getVertexShaderID(C),ye=l.getFragmentShaderID(C);const De=r.getRenderTarget(),pe=L.isInstancedMesh===!0,Te=L.isBatchedMesh===!0,be=!!C.map,re=!!C.matcap,Re=!!z,ze=!!C.aoMap,K=!!C.lightMap,ie=!!C.bumpMap,_e=!!C.normalMap,oe=!!C.displacementMap,G=!!C.emissiveMap,W=!!C.metalnessMap,ce=!!C.roughnessMap,Ce=C.anisotropy>0,$=C.clearcoat>0,ee=C.iridescence>0,ge=C.sheen>0,xe=C.transmission>0,Ne=Ce&&!!C.anisotropyMap,Fe=$&&!!C.clearcoatMap,We=$&&!!C.clearcoatNormalMap,ke=$&&!!C.clearcoatRoughnessMap,it=ee&&!!C.iridescenceMap,Je=ee&&!!C.iridescenceThicknessMap,st=ge&&!!C.sheenColorMap,we=ge&&!!C.sheenRoughnessMap,Pe=!!C.specularMap,et=!!C.specularColorMap,V=!!C.specularIntensityMap,Me=xe&&!!C.transmissionMap,Le=xe&&!!C.thicknessMap,Ze=!!C.gradientMap,he=!!C.alphaMap,Xe=C.alphaTest>0,H=!!C.alphaHash,te=!!C.extensions;let le=ml;C.toneMapped&&(De===null||De.isXRRenderTarget===!0)&&(le=r.toneMapping);const ve={isWebGL2:h,shaderID:X,shaderType:C.type,shaderName:C.name,vertexShader:ne,fragmentShader:fe,defines:C.defines,customVertexShaderID:se,customFragmentShaderID:ye,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:p,batching:Te,instancing:pe,instancingColor:pe&&L.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:De===null?r.outputColorSpace:De.isXRRenderTarget===!0?De.texture.colorSpace:_l,alphaToCoverage:!!C.alphaToCoverage,map:be,matcap:re,envMap:Re,envMapMode:Re&&z.mapping,envMapCubeUVHeight:B,aoMap:ze,lightMap:K,bumpMap:ie,normalMap:_e,displacementMap:f&&oe,emissiveMap:G,normalMapObjectSpace:_e&&C.normalMapType===AY,normalMapTangentSpace:_e&&C.normalMapType===sh,metalnessMap:W,roughnessMap:ce,anisotropy:Ce,anisotropyMap:Ne,clearcoat:$,clearcoatMap:Fe,clearcoatNormalMap:We,clearcoatRoughnessMap:ke,iridescence:ee,iridescenceMap:it,iridescenceThicknessMap:Je,sheen:ge,sheenColorMap:st,sheenRoughnessMap:we,specularMap:Pe,specularColorMap:et,specularIntensityMap:V,transmission:xe,transmissionMap:Me,thicknessMap:Le,gradientMap:Ze,opaque:C.transparent===!1&&C.blending===sd&&C.alphaToCoverage===!1,alphaMap:he,alphaTest:Xe,alphaHash:H,combine:C.combine,mapUv:be&&y(C.map.channel),aoMapUv:ze&&y(C.aoMap.channel),lightMapUv:K&&y(C.lightMap.channel),bumpMapUv:ie&&y(C.bumpMap.channel),normalMapUv:_e&&y(C.normalMap.channel),displacementMapUv:oe&&y(C.displacementMap.channel),emissiveMapUv:G&&y(C.emissiveMap.channel),metalnessMapUv:W&&y(C.metalnessMap.channel),roughnessMapUv:ce&&y(C.roughnessMap.channel),anisotropyMapUv:Ne&&y(C.anisotropyMap.channel),clearcoatMapUv:Fe&&y(C.clearcoatMap.channel),clearcoatNormalMapUv:We&&y(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ke&&y(C.clearcoatRoughnessMap.channel),iridescenceMapUv:it&&y(C.iridescenceMap.channel),iridescenceThicknessMapUv:Je&&y(C.iridescenceThicknessMap.channel),sheenColorMapUv:st&&y(C.sheenColorMap.channel),sheenRoughnessMapUv:we&&y(C.sheenRoughnessMap.channel),specularMapUv:Pe&&y(C.specularMap.channel),specularColorMapUv:et&&y(C.specularColorMap.channel),specularIntensityMapUv:V&&y(C.specularIntensityMap.channel),transmissionMapUv:Me&&y(C.transmissionMap.channel),thicknessMapUv:Le&&y(C.thicknessMap.channel),alphaMapUv:he&&y(C.alphaMap.channel),vertexTangents:!!k.attributes.tangent&&(_e||Ce),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!k.attributes.color&&k.attributes.color.itemSize===4,pointsUvs:L.isPoints===!0&&!!k.attributes.uv&&(be||he),fog:!!F,useFog:C.fog===!0,fogExp2:!!F&&F.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:L.isSkinnedMesh===!0,morphTargets:k.morphAttributes.position!==void 0,morphNormals:k.morphAttributes.normal!==void 0,morphColors:k.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:J,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:r.shadowMap.enabled&&O.length>0,shadowMapType:r.shadowMap.type,toneMapping:le,useLegacyLights:r._useLegacyLights,decodeVideoTexture:be&&C.map.isVideoTexture===!0&&Ir.getTransfer(C.map.colorSpace)===en,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===xs,flipSided:C.side===_a,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:te&&C.extensions.derivatives===!0,extensionFragDepth:te&&C.extensions.fragDepth===!0,extensionDrawBuffers:te&&C.extensions.drawBuffers===!0,extensionShaderTextureLOD:te&&C.extensions.shaderTextureLOD===!0,extensionClipCullDistance:te&&C.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:te&&C.extensions.multiDraw===!0&&n.has("WEBGL_multi_draw"),rendererExtensionFragDepth:h||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||n.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return ve.vertexUv1s=u.has(1),ve.vertexUv2s=u.has(2),ve.vertexUv3s=u.has(3),u.clear(),ve}function w(C){const D=[];if(C.shaderID?D.push(C.shaderID):(D.push(C.customVertexShaderID),D.push(C.customFragmentShaderID)),C.defines!==void 0)for(const O in C.defines)D.push(O),D.push(C.defines[O]);return C.isRawShaderMaterial===!1&&(b(D,C),m(D,C),D.push(r.outputColorSpace)),D.push(C.customProgramCacheKey),D.join()}function b(C,D){C.push(D.precision),C.push(D.outputColorSpace),C.push(D.envMapMode),C.push(D.envMapCubeUVHeight),C.push(D.mapUv),C.push(D.alphaMapUv),C.push(D.lightMapUv),C.push(D.aoMapUv),C.push(D.bumpMapUv),C.push(D.normalMapUv),C.push(D.displacementMapUv),C.push(D.emissiveMapUv),C.push(D.metalnessMapUv),C.push(D.roughnessMapUv),C.push(D.anisotropyMapUv),C.push(D.clearcoatMapUv),C.push(D.clearcoatNormalMapUv),C.push(D.clearcoatRoughnessMapUv),C.push(D.iridescenceMapUv),C.push(D.iridescenceThicknessMapUv),C.push(D.sheenColorMapUv),C.push(D.sheenRoughnessMapUv),C.push(D.specularMapUv),C.push(D.specularColorMapUv),C.push(D.specularIntensityMapUv),C.push(D.transmissionMapUv),C.push(D.thicknessMapUv),C.push(D.combine),C.push(D.fogExp2),C.push(D.sizeAttenuation),C.push(D.morphTargetsCount),C.push(D.morphAttributeCount),C.push(D.numDirLights),C.push(D.numPointLights),C.push(D.numSpotLights),C.push(D.numSpotLightMaps),C.push(D.numHemiLights),C.push(D.numRectAreaLights),C.push(D.numDirLightShadows),C.push(D.numPointLightShadows),C.push(D.numSpotLightShadows),C.push(D.numSpotLightShadowsWithMaps),C.push(D.numLightProbes),C.push(D.shadowMapType),C.push(D.toneMapping),C.push(D.numClippingPlanes),C.push(D.numClipIntersection),C.push(D.depthPacking)}function m(C,D){s.disableAll(),D.isWebGL2&&s.enable(0),D.supportsVertexTextures&&s.enable(1),D.instancing&&s.enable(2),D.instancingColor&&s.enable(3),D.matcap&&s.enable(4),D.envMap&&s.enable(5),D.normalMapObjectSpace&&s.enable(6),D.normalMapTangentSpace&&s.enable(7),D.clearcoat&&s.enable(8),D.iridescence&&s.enable(9),D.alphaTest&&s.enable(10),D.vertexColors&&s.enable(11),D.vertexAlphas&&s.enable(12),D.vertexUv1s&&s.enable(13),D.vertexUv2s&&s.enable(14),D.vertexUv3s&&s.enable(15),D.vertexTangents&&s.enable(16),D.anisotropy&&s.enable(17),D.alphaHash&&s.enable(18),D.batching&&s.enable(19),C.push(s.mask),s.disableAll(),D.fog&&s.enable(0),D.useFog&&s.enable(1),D.flatShading&&s.enable(2),D.logarithmicDepthBuffer&&s.enable(3),D.skinning&&s.enable(4),D.morphTargets&&s.enable(5),D.morphNormals&&s.enable(6),D.morphColors&&s.enable(7),D.premultipliedAlpha&&s.enable(8),D.shadowMapEnabled&&s.enable(9),D.useLegacyLights&&s.enable(10),D.doubleSided&&s.enable(11),D.flipSided&&s.enable(12),D.useDepthPacking&&s.enable(13),D.dithering&&s.enable(14),D.transmission&&s.enable(15),D.sheen&&s.enable(16),D.opaque&&s.enable(17),D.pointsUvs&&s.enable(18),D.decodeVideoTexture&&s.enable(19),D.alphaToCoverage&&s.enable(20),C.push(s.mask)}function x(C){const D=v[C.type];let O;if(D){const U=bs[D];O=UY.clone(U.uniforms)}else O=C.uniforms;return O}function S(C,D){let O;for(let U=0,L=c.length;U<L;U++){const F=c[U];if(F.cacheKey===D){O=F,++O.usedTimes;break}}return O===void 0&&(O=new dze(r,D,C,a),c.push(O)),O}function E(C){if(--C.usedTimes===0){const D=c.indexOf(C);c[D]=c[c.length-1],c.pop(),C.destroy()}}function A(C){l.remove(C)}function T(){l.dispose()}return{getParameters:g,getProgramCacheKey:w,getUniforms:x,acquireProgram:S,releaseProgram:E,releaseShaderCache:A,programs:c,dispose:T}}function vze(){let r=new WeakMap;function e(a){let o=r.get(a);return o===void 0&&(o={},r.set(a,o)),o}function t(a){r.delete(a)}function n(a,o,s){r.get(a)[o]=s}function i(){r=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function yze(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function N8(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function O8(){const r=[];let e=0;const t=[],n=[],i=[];function a(){e=0,t.length=0,n.length=0,i.length=0}function o(h,d,f,p,v,y){let g=r[e];return g===void 0?(g={id:h.id,object:h,geometry:d,material:f,groupOrder:p,renderOrder:h.renderOrder,z:v,group:y},r[e]=g):(g.id=h.id,g.object=h,g.geometry=d,g.material=f,g.groupOrder=p,g.renderOrder=h.renderOrder,g.z=v,g.group=y),e++,g}function s(h,d,f,p,v,y){const g=o(h,d,f,p,v,y);f.transmission>0?n.push(g):f.transparent===!0?i.push(g):t.push(g)}function l(h,d,f,p,v,y){const g=o(h,d,f,p,v,y);f.transmission>0?n.unshift(g):f.transparent===!0?i.unshift(g):t.unshift(g)}function u(h,d){t.length>1&&t.sort(h||yze),n.length>1&&n.sort(d||N8),i.length>1&&i.sort(d||N8)}function c(){for(let h=e,d=r.length;h<d;h++){const f=r[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:n,transparent:i,init:a,push:s,unshift:l,finish:c,sort:u}}function bze(){let r=new WeakMap;function e(n,i){const a=r.get(n);let o;return a===void 0?(o=new O8,r.set(n,[o])):i>=a.length?(o=new O8,a.push(o)):o=a[i],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function xze(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new me,color:new wt};break;case"SpotLight":t={position:new me,direction:new me,color:new wt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new me,color:new wt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new me,skyColor:new wt,groundColor:new wt};break;case"RectAreaLight":t={color:new wt,position:new me,halfWidth:new me,halfHeight:new me};break}return r[e.id]=t,t}}}function wze(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let Sze=0;function Mze(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function _ze(r,e){const t=new xze,n=wze(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new me);const a=new me,o=new Yt,s=new Yt;function l(c,h){let d=0,f=0,p=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let v=0,y=0,g=0,w=0,b=0,m=0,x=0,S=0,E=0,A=0,T=0;c.sort(Mze);const C=h===!0?Math.PI:1;for(let O=0,U=c.length;O<U;O++){const L=c[O],F=L.color,k=L.intensity,R=L.distance,z=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)d+=F.r*k*C,f+=F.g*k*C,p+=F.b*k*C;else if(L.isLightProbe){for(let B=0;B<9;B++)i.probe[B].addScaledVector(L.sh.coefficients[B],k);T++}else if(L.isDirectionalLight){const B=t.get(L);if(B.color.copy(L.color).multiplyScalar(L.intensity*C),L.castShadow){const X=L.shadow,Z=n.get(L);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,i.directionalShadow[v]=Z,i.directionalShadowMap[v]=z,i.directionalShadowMatrix[v]=L.shadow.matrix,m++}i.directional[v]=B,v++}else if(L.isSpotLight){const B=t.get(L);B.position.setFromMatrixPosition(L.matrixWorld),B.color.copy(F).multiplyScalar(k*C),B.distance=R,B.coneCos=Math.cos(L.angle),B.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),B.decay=L.decay,i.spot[g]=B;const X=L.shadow;if(L.map&&(i.spotLightMap[E]=L.map,E++,X.updateMatrices(L),L.castShadow&&A++),i.spotLightMatrix[g]=X.matrix,L.castShadow){const Z=n.get(L);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,i.spotShadow[g]=Z,i.spotShadowMap[g]=z,S++}g++}else if(L.isRectAreaLight){const B=t.get(L);B.color.copy(F).multiplyScalar(k),B.halfWidth.set(L.width*.5,0,0),B.halfHeight.set(0,L.height*.5,0),i.rectArea[w]=B,w++}else if(L.isPointLight){const B=t.get(L);if(B.color.copy(L.color).multiplyScalar(L.intensity*C),B.distance=L.distance,B.decay=L.decay,L.castShadow){const X=L.shadow,Z=n.get(L);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,Z.shadowCameraNear=X.camera.near,Z.shadowCameraFar=X.camera.far,i.pointShadow[y]=Z,i.pointShadowMap[y]=z,i.pointShadowMatrix[y]=L.shadow.matrix,x++}i.point[y]=B,y++}else if(L.isHemisphereLight){const B=t.get(L);B.skyColor.copy(L.color).multiplyScalar(k*C),B.groundColor.copy(L.groundColor).multiplyScalar(k*C),i.hemi[b]=B,b++}}w>0&&(e.isWebGL2?r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=pt.LTC_FLOAT_1,i.rectAreaLTC2=pt.LTC_FLOAT_2):(i.rectAreaLTC1=pt.LTC_HALF_1,i.rectAreaLTC2=pt.LTC_HALF_2):r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=pt.LTC_FLOAT_1,i.rectAreaLTC2=pt.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=pt.LTC_HALF_1,i.rectAreaLTC2=pt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=d,i.ambient[1]=f,i.ambient[2]=p;const D=i.hash;(D.directionalLength!==v||D.pointLength!==y||D.spotLength!==g||D.rectAreaLength!==w||D.hemiLength!==b||D.numDirectionalShadows!==m||D.numPointShadows!==x||D.numSpotShadows!==S||D.numSpotMaps!==E||D.numLightProbes!==T)&&(i.directional.length=v,i.spot.length=g,i.rectArea.length=w,i.point.length=y,i.hemi.length=b,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=x,i.pointShadowMap.length=x,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=x,i.spotLightMatrix.length=S+E-A,i.spotLightMap.length=E,i.numSpotLightShadowsWithMaps=A,i.numLightProbes=T,D.directionalLength=v,D.pointLength=y,D.spotLength=g,D.rectAreaLength=w,D.hemiLength=b,D.numDirectionalShadows=m,D.numPointShadows=x,D.numSpotShadows=S,D.numSpotMaps=E,D.numLightProbes=T,i.version=Sze++)}function u(c,h){let d=0,f=0,p=0,v=0,y=0;const g=h.matrixWorldInverse;for(let w=0,b=c.length;w<b;w++){const m=c[w];if(m.isDirectionalLight){const x=i.directional[d];x.direction.setFromMatrixPosition(m.matrixWorld),a.setFromMatrixPosition(m.target.matrixWorld),x.direction.sub(a),x.direction.transformDirection(g),d++}else if(m.isSpotLight){const x=i.spot[p];x.position.setFromMatrixPosition(m.matrixWorld),x.position.applyMatrix4(g),x.direction.setFromMatrixPosition(m.matrixWorld),a.setFromMatrixPosition(m.target.matrixWorld),x.direction.sub(a),x.direction.transformDirection(g),p++}else if(m.isRectAreaLight){const x=i.rectArea[v];x.position.setFromMatrixPosition(m.matrixWorld),x.position.applyMatrix4(g),s.identity(),o.copy(m.matrixWorld),o.premultiply(g),s.extractRotation(o),x.halfWidth.set(m.width*.5,0,0),x.halfHeight.set(0,m.height*.5,0),x.halfWidth.applyMatrix4(s),x.halfHeight.applyMatrix4(s),v++}else if(m.isPointLight){const x=i.point[f];x.position.setFromMatrixPosition(m.matrixWorld),x.position.applyMatrix4(g),f++}else if(m.isHemisphereLight){const x=i.hemi[y];x.direction.setFromMatrixPosition(m.matrixWorld),x.direction.transformDirection(g),y++}}}return{setup:l,setupView:u,state:i}}function R8(r,e){const t=new _ze(r,e),n=[],i=[];function a(){n.length=0,i.length=0}function o(c){n.push(c)}function s(c){i.push(c)}function l(c){t.setup(n,c)}function u(c){t.setupView(n,c)}return{init:a,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:s}}function Eze(r,e){let t=new WeakMap;function n(a,o=0){const s=t.get(a);let l;return s===void 0?(l=new R8(r,e),t.set(a,[l])):o>=s.length?(l=new R8(r,e),s.push(l)):l=s[o],l}function i(){t=new WeakMap}return{get:n,dispose:i}}class MO extends Li{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=EY,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class _O extends Li{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Cze=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Aze=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Tze(r,e,t){let n=new gy;const i=new Qe,a=new Qe,o=new Fr,s=new MO({depthPacking:CY}),l=new _O,u={},c=t.maxTextureSize,h={[Mu]:_a,[_a]:Mu,[xs]:xs},d=new ts({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qe},radius:{value:4}},vertexShader:Cze,fragmentShader:Aze}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new or;p.setAttribute("position",new jr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Yn(p,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=d2;let g=this.type;this.render=function(S,E,A){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||S.length===0)return;const T=r.getRenderTarget(),C=r.getActiveCubeFace(),D=r.getActiveMipmapLevel(),O=r.state;O.setBlending(hu),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const U=g!==ms&&this.type===ms,L=g===ms&&this.type!==ms;for(let F=0,k=S.length;F<k;F++){const R=S[F],z=R.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",R,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;i.copy(z.mapSize);const B=z.getFrameExtents();if(i.multiply(B),a.copy(z.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/B.x),i.x=a.x*B.x,z.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/B.y),i.y=a.y*B.y,z.mapSize.y=a.y)),z.map===null||U===!0||L===!0){const Z=this.type!==ms?{minFilter:zn,magFilter:zn}:{};z.map!==null&&z.map.dispose(),z.map=new es(i.x,i.y,Z),z.map.texture.name=R.name+".shadowMap",z.camera.updateProjectionMatrix()}r.setRenderTarget(z.map),r.clear();const X=z.getViewportCount();for(let Z=0;Z<X;Z++){const Q=z.getViewport(Z);o.set(a.x*Q.x,a.y*Q.y,a.x*Q.z,a.y*Q.w),O.viewport(o),z.updateMatrices(R,Z),n=z.getFrustum(),m(E,A,z.camera,R,this.type)}z.isPointLightShadow!==!0&&this.type===ms&&w(z,A),z.needsUpdate=!1}g=this.type,y.needsUpdate=!1,r.setRenderTarget(T,C,D)};function w(S,E){const A=e.update(v);d.defines.VSM_SAMPLES!==S.blurSamples&&(d.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new es(i.x,i.y)),d.uniforms.shadow_pass.value=S.map.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,r.setRenderTarget(S.mapPass),r.clear(),r.renderBufferDirect(E,null,A,d,v,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,r.setRenderTarget(S.map),r.clear(),r.renderBufferDirect(E,null,A,f,v,null)}function b(S,E,A,T){let C=null;const D=A.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(D!==void 0)C=D;else if(C=A.isPointLight===!0?l:s,r.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0||E.map&&E.alphaTest>0){const O=C.uuid,U=E.uuid;let L=u[O];L===void 0&&(L={},u[O]=L);let F=L[U];F===void 0&&(F=C.clone(),L[U]=F,E.addEventListener("dispose",x)),C=F}if(C.visible=E.visible,C.wireframe=E.wireframe,T===ms?C.side=E.shadowSide!==null?E.shadowSide:E.side:C.side=E.shadowSide!==null?E.shadowSide:h[E.side],C.alphaMap=E.alphaMap,C.alphaTest=E.alphaTest,C.map=E.map,C.clipShadows=E.clipShadows,C.clippingPlanes=E.clippingPlanes,C.clipIntersection=E.clipIntersection,C.displacementMap=E.displacementMap,C.displacementScale=E.displacementScale,C.displacementBias=E.displacementBias,C.wireframeLinewidth=E.wireframeLinewidth,C.linewidth=E.linewidth,A.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const O=r.properties.get(C);O.light=A}return C}function m(S,E,A,T,C){if(S.visible===!1)return;if(S.layers.test(E.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&C===ms)&&(!S.frustumCulled||n.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,S.matrixWorld);const O=e.update(S),U=S.material;if(Array.isArray(U)){const L=O.groups;for(let F=0,k=L.length;F<k;F++){const R=L[F],z=U[R.materialIndex];if(z&&z.visible){const B=b(S,z,T,C);S.onBeforeShadow(r,S,E,A,O,B,R),r.renderBufferDirect(A,null,O,B,S,R),S.onAfterShadow(r,S,E,A,O,B,R)}}}else if(U.visible){const L=b(S,U,T,C);S.onBeforeShadow(r,S,E,A,O,L,null),r.renderBufferDirect(A,null,O,L,S,null),S.onAfterShadow(r,S,E,A,O,L,null)}}const D=S.children;for(let O=0,U=D.length;O<U;O++)m(D[O],E,A,T,C)}function x(S){S.target.removeEventListener("dispose",x);for(const E in u){const A=u[E],T=S.target.uuid;T in A&&(A[T].dispose(),delete A[T])}}}function Dze(r,e,t){const n=t.isWebGL2;function i(){let he=!1;const Xe=new Fr;let H=null;const te=new Fr(0,0,0,0);return{setMask:function(le){H!==le&&!he&&(r.colorMask(le,le,le,le),H=le)},setLocked:function(le){he=le},setClear:function(le,ve,Ee,Oe,He){He===!0&&(le*=Oe,ve*=Oe,Ee*=Oe),Xe.set(le,ve,Ee,Oe),te.equals(Xe)===!1&&(r.clearColor(le,ve,Ee,Oe),te.copy(Xe))},reset:function(){he=!1,H=null,te.set(-1,0,0,0)}}}function a(){let he=!1,Xe=null,H=null,te=null;return{setTest:function(le){le?pe(r.DEPTH_TEST):Te(r.DEPTH_TEST)},setMask:function(le){Xe!==le&&!he&&(r.depthMask(le),Xe=le)},setFunc:function(le){if(H!==le){switch(le){case QX:r.depthFunc(r.NEVER);break;case eY:r.depthFunc(r.ALWAYS);break;case tY:r.depthFunc(r.LESS);break;case av:r.depthFunc(r.LEQUAL);break;case rY:r.depthFunc(r.EQUAL);break;case nY:r.depthFunc(r.GEQUAL);break;case iY:r.depthFunc(r.GREATER);break;case aY:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}H=le}},setLocked:function(le){he=le},setClear:function(le){te!==le&&(r.clearDepth(le),te=le)},reset:function(){he=!1,Xe=null,H=null,te=null}}}function o(){let he=!1,Xe=null,H=null,te=null,le=null,ve=null,Ee=null,Oe=null,He=null;return{setTest:function($e){he||($e?pe(r.STENCIL_TEST):Te(r.STENCIL_TEST))},setMask:function($e){Xe!==$e&&!he&&(r.stencilMask($e),Xe=$e)},setFunc:function($e,rt,ft){(H!==$e||te!==rt||le!==ft)&&(r.stencilFunc($e,rt,ft),H=$e,te=rt,le=ft)},setOp:function($e,rt,ft){(ve!==$e||Ee!==rt||Oe!==ft)&&(r.stencilOp($e,rt,ft),ve=$e,Ee=rt,Oe=ft)},setLocked:function($e){he=$e},setClear:function($e){He!==$e&&(r.clearStencil($e),He=$e)},reset:function(){he=!1,Xe=null,H=null,te=null,le=null,ve=null,Ee=null,Oe=null,He=null}}}const s=new i,l=new a,u=new o,c=new WeakMap,h=new WeakMap;let d={},f={},p=new WeakMap,v=[],y=null,g=!1,w=null,b=null,m=null,x=null,S=null,E=null,A=null,T=new wt(0,0,0),C=0,D=!1,O=null,U=null,L=null,F=null,k=null;const R=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,B=0;const X=r.getParameter(r.VERSION);X.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(X)[1]),z=B>=1):X.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),z=B>=2);let Z=null,Q={};const J=r.getParameter(r.SCISSOR_BOX),ne=r.getParameter(r.VIEWPORT),fe=new Fr().fromArray(J),se=new Fr().fromArray(ne);function ye(he,Xe,H,te){const le=new Uint8Array(4),ve=r.createTexture();r.bindTexture(he,ve),r.texParameteri(he,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(he,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let Ee=0;Ee<H;Ee++)n&&(he===r.TEXTURE_3D||he===r.TEXTURE_2D_ARRAY)?r.texImage3D(Xe,0,r.RGBA,1,1,te,0,r.RGBA,r.UNSIGNED_BYTE,le):r.texImage2D(Xe+Ee,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,le);return ve}const De={};De[r.TEXTURE_2D]=ye(r.TEXTURE_2D,r.TEXTURE_2D,1),De[r.TEXTURE_CUBE_MAP]=ye(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(De[r.TEXTURE_2D_ARRAY]=ye(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),De[r.TEXTURE_3D]=ye(r.TEXTURE_3D,r.TEXTURE_3D,1,1)),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),pe(r.DEPTH_TEST),l.setFunc(av),oe(!1),G(yD),pe(r.CULL_FACE),ie(hu);function pe(he){d[he]!==!0&&(r.enable(he),d[he]=!0)}function Te(he){d[he]!==!1&&(r.disable(he),d[he]=!1)}function be(he,Xe){return f[he]!==Xe?(r.bindFramebuffer(he,Xe),f[he]=Xe,n&&(he===r.DRAW_FRAMEBUFFER&&(f[r.FRAMEBUFFER]=Xe),he===r.FRAMEBUFFER&&(f[r.DRAW_FRAMEBUFFER]=Xe)),!0):!1}function re(he,Xe){let H=v,te=!1;if(he)if(H=p.get(Xe),H===void 0&&(H=[],p.set(Xe,H)),he.isWebGLMultipleRenderTargets){const le=he.texture;if(H.length!==le.length||H[0]!==r.COLOR_ATTACHMENT0){for(let ve=0,Ee=le.length;ve<Ee;ve++)H[ve]=r.COLOR_ATTACHMENT0+ve;H.length=le.length,te=!0}}else H[0]!==r.COLOR_ATTACHMENT0&&(H[0]=r.COLOR_ATTACHMENT0,te=!0);else H[0]!==r.BACK&&(H[0]=r.BACK,te=!0);te&&(t.isWebGL2?r.drawBuffers(H):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(H))}function Re(he){return y!==he?(r.useProgram(he),y=he,!0):!1}const ze={[hc]:r.FUNC_ADD,[BX]:r.FUNC_SUBTRACT,[zX]:r.FUNC_REVERSE_SUBTRACT};if(n)ze[SD]=r.MIN,ze[MD]=r.MAX;else{const he=e.get("EXT_blend_minmax");he!==null&&(ze[SD]=he.MIN_EXT,ze[MD]=he.MAX_EXT)}const K={[UX]:r.ZERO,[jX]:r.ONE,[HX]:r.SRC_COLOR,[zS]:r.SRC_ALPHA,[XX]:r.SRC_ALPHA_SATURATE,[GX]:r.DST_COLOR,[qX]:r.DST_ALPHA,[VX]:r.ONE_MINUS_SRC_COLOR,[US]:r.ONE_MINUS_SRC_ALPHA,[$X]:r.ONE_MINUS_DST_COLOR,[WX]:r.ONE_MINUS_DST_ALPHA,[YX]:r.CONSTANT_COLOR,[JX]:r.ONE_MINUS_CONSTANT_COLOR,[ZX]:r.CONSTANT_ALPHA,[KX]:r.ONE_MINUS_CONSTANT_ALPHA};function ie(he,Xe,H,te,le,ve,Ee,Oe,He,$e){if(he===hu){g===!0&&(Te(r.BLEND),g=!1);return}if(g===!1&&(pe(r.BLEND),g=!0),he!==FX){if(he!==w||$e!==D){if((b!==hc||S!==hc)&&(r.blendEquation(r.FUNC_ADD),b=hc,S=hc),$e)switch(he){case sd:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case bD:r.blendFunc(r.ONE,r.ONE);break;case xD:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case wD:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}else switch(he){case sd:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case bD:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case xD:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case wD:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}m=null,x=null,E=null,A=null,T.set(0,0,0),C=0,w=he,D=$e}return}le=le||Xe,ve=ve||H,Ee=Ee||te,(Xe!==b||le!==S)&&(r.blendEquationSeparate(ze[Xe],ze[le]),b=Xe,S=le),(H!==m||te!==x||ve!==E||Ee!==A)&&(r.blendFuncSeparate(K[H],K[te],K[ve],K[Ee]),m=H,x=te,E=ve,A=Ee),(Oe.equals(T)===!1||He!==C)&&(r.blendColor(Oe.r,Oe.g,Oe.b,He),T.copy(Oe),C=He),w=he,D=!1}function _e(he,Xe){he.side===xs?Te(r.CULL_FACE):pe(r.CULL_FACE);let H=he.side===_a;Xe&&(H=!H),oe(H),he.blending===sd&&he.transparent===!1?ie(hu):ie(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.blendColor,he.blendAlpha,he.premultipliedAlpha),l.setFunc(he.depthFunc),l.setTest(he.depthTest),l.setMask(he.depthWrite),s.setMask(he.colorWrite);const te=he.stencilWrite;u.setTest(te),te&&(u.setMask(he.stencilWriteMask),u.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),u.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),ce(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?pe(r.SAMPLE_ALPHA_TO_COVERAGE):Te(r.SAMPLE_ALPHA_TO_COVERAGE)}function oe(he){O!==he&&(he?r.frontFace(r.CW):r.frontFace(r.CCW),O=he)}function G(he){he!==PX?(pe(r.CULL_FACE),he!==U&&(he===yD?r.cullFace(r.BACK):he===IX?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):Te(r.CULL_FACE),U=he}function W(he){he!==L&&(z&&r.lineWidth(he),L=he)}function ce(he,Xe,H){he?(pe(r.POLYGON_OFFSET_FILL),(F!==Xe||k!==H)&&(r.polygonOffset(Xe,H),F=Xe,k=H)):Te(r.POLYGON_OFFSET_FILL)}function Ce(he){he?pe(r.SCISSOR_TEST):Te(r.SCISSOR_TEST)}function $(he){he===void 0&&(he=r.TEXTURE0+R-1),Z!==he&&(r.activeTexture(he),Z=he)}function ee(he,Xe,H){H===void 0&&(Z===null?H=r.TEXTURE0+R-1:H=Z);let te=Q[H];te===void 0&&(te={type:void 0,texture:void 0},Q[H]=te),(te.type!==he||te.texture!==Xe)&&(Z!==H&&(r.activeTexture(H),Z=H),r.bindTexture(he,Xe||De[he]),te.type=he,te.texture=Xe)}function ge(){const he=Q[Z];he!==void 0&&he.type!==void 0&&(r.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function xe(){try{r.compressedTexImage2D.apply(r,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ne(){try{r.compressedTexImage3D.apply(r,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Fe(){try{r.texSubImage2D.apply(r,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function We(){try{r.texSubImage3D.apply(r,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function ke(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function it(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Je(){try{r.texStorage2D.apply(r,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function st(){try{r.texStorage3D.apply(r,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function we(){try{r.texImage2D.apply(r,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Pe(){try{r.texImage3D.apply(r,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function et(he){fe.equals(he)===!1&&(r.scissor(he.x,he.y,he.z,he.w),fe.copy(he))}function V(he){se.equals(he)===!1&&(r.viewport(he.x,he.y,he.z,he.w),se.copy(he))}function Me(he,Xe){let H=h.get(Xe);H===void 0&&(H=new WeakMap,h.set(Xe,H));let te=H.get(he);te===void 0&&(te=r.getUniformBlockIndex(Xe,he.name),H.set(he,te))}function Le(he,Xe){const H=h.get(Xe).get(he);c.get(Xe)!==H&&(r.uniformBlockBinding(Xe,H,he.__bindingPointIndex),c.set(Xe,H))}function Ze(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),n===!0&&(r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),d={},Z=null,Q={},f={},p=new WeakMap,v=[],y=null,g=!1,w=null,b=null,m=null,x=null,S=null,E=null,A=null,T=new wt(0,0,0),C=0,D=!1,O=null,U=null,L=null,F=null,k=null,fe.set(0,0,r.canvas.width,r.canvas.height),se.set(0,0,r.canvas.width,r.canvas.height),s.reset(),l.reset(),u.reset()}return{buffers:{color:s,depth:l,stencil:u},enable:pe,disable:Te,bindFramebuffer:be,drawBuffers:re,useProgram:Re,setBlending:ie,setMaterial:_e,setFlipSided:oe,setCullFace:G,setLineWidth:W,setPolygonOffset:ce,setScissorTest:Ce,activeTexture:$,bindTexture:ee,unbindTexture:ge,compressedTexImage2D:xe,compressedTexImage3D:Ne,texImage2D:we,texImage3D:Pe,updateUBOMapping:Me,uniformBlockBinding:Le,texStorage2D:Je,texStorage3D:st,texSubImage2D:Fe,texSubImage3D:We,compressedTexSubImage2D:ke,compressedTexSubImage3D:it,scissor:et,viewport:V,reset:Ze}}function kze(r,e,t,n,i,a,o){const s=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(G,W){return f?new OffscreenCanvas(G,W):yv("canvas")}function v(G,W,ce,Ce){let $=1;if((G.width>Ce||G.height>Ce)&&($=Ce/Math.max(G.width,G.height)),$<1||W===!0)if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap){const ee=W?VS:Math.floor,ge=ee($*G.width),xe=ee($*G.height);h===void 0&&(h=p(ge,xe));const Ne=ce?p(ge,xe):h;return Ne.width=ge,Ne.height=xe,Ne.getContext("2d").drawImage(G,0,0,ge,xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+ge+"x"+xe+")."),Ne}else return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G;return G}function y(G){return KD(G.width)&&KD(G.height)}function g(G){return s?!1:G.wrapS!==Ji||G.wrapT!==Ji||G.minFilter!==zn&&G.minFilter!==sn}function w(G,W){return G.generateMipmaps&&W&&G.minFilter!==zn&&G.minFilter!==sn}function b(G){r.generateMipmap(G)}function m(G,W,ce,Ce,$=!1){if(s===!1)return W;if(G!==null){if(r[G]!==void 0)return r[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let ee=W;if(W===r.RED&&(ce===r.FLOAT&&(ee=r.R32F),ce===r.HALF_FLOAT&&(ee=r.R16F),ce===r.UNSIGNED_BYTE&&(ee=r.R8)),W===r.RED_INTEGER&&(ce===r.UNSIGNED_BYTE&&(ee=r.R8UI),ce===r.UNSIGNED_SHORT&&(ee=r.R16UI),ce===r.UNSIGNED_INT&&(ee=r.R32UI),ce===r.BYTE&&(ee=r.R8I),ce===r.SHORT&&(ee=r.R16I),ce===r.INT&&(ee=r.R32I)),W===r.RG&&(ce===r.FLOAT&&(ee=r.RG32F),ce===r.HALF_FLOAT&&(ee=r.RG16F),ce===r.UNSIGNED_BYTE&&(ee=r.RG8)),W===r.RGBA){const ge=$?fv:Ir.getTransfer(Ce);ce===r.FLOAT&&(ee=r.RGBA32F),ce===r.HALF_FLOAT&&(ee=r.RGBA16F),ce===r.UNSIGNED_BYTE&&(ee=ge===en?r.SRGB8_ALPHA8:r.RGBA8),ce===r.UNSIGNED_SHORT_4_4_4_4&&(ee=r.RGBA4),ce===r.UNSIGNED_SHORT_5_5_5_1&&(ee=r.RGB5_A1)}return(ee===r.R16F||ee===r.R32F||ee===r.RG16F||ee===r.RG32F||ee===r.RGBA16F||ee===r.RGBA32F)&&e.get("EXT_color_buffer_float"),ee}function x(G,W,ce){return w(G,ce)===!0||G.isFramebufferTexture&&G.minFilter!==zn&&G.minFilter!==sn?Math.log2(Math.max(W.width,W.height))+1:G.mipmaps!==void 0&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?W.mipmaps.length:1}function S(G){return G===zn||G===jS||G===zh?r.NEAREST:r.LINEAR}function E(G){const W=G.target;W.removeEventListener("dispose",E),T(W),W.isVideoTexture&&c.delete(W)}function A(G){const W=G.target;W.removeEventListener("dispose",A),D(W)}function T(G){const W=n.get(G);if(W.__webglInit===void 0)return;const ce=G.source,Ce=d.get(ce);if(Ce){const $=Ce[W.__cacheKey];$.usedTimes--,$.usedTimes===0&&C(G),Object.keys(Ce).length===0&&d.delete(ce)}n.remove(G)}function C(G){const W=n.get(G);r.deleteTexture(W.__webglTexture);const ce=G.source,Ce=d.get(ce);delete Ce[W.__cacheKey],o.memory.textures--}function D(G){const W=G.texture,ce=n.get(G),Ce=n.get(W);if(Ce.__webglTexture!==void 0&&(r.deleteTexture(Ce.__webglTexture),o.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let $=0;$<6;$++){if(Array.isArray(ce.__webglFramebuffer[$]))for(let ee=0;ee<ce.__webglFramebuffer[$].length;ee++)r.deleteFramebuffer(ce.__webglFramebuffer[$][ee]);else r.deleteFramebuffer(ce.__webglFramebuffer[$]);ce.__webglDepthbuffer&&r.deleteRenderbuffer(ce.__webglDepthbuffer[$])}else{if(Array.isArray(ce.__webglFramebuffer))for(let $=0;$<ce.__webglFramebuffer.length;$++)r.deleteFramebuffer(ce.__webglFramebuffer[$]);else r.deleteFramebuffer(ce.__webglFramebuffer);if(ce.__webglDepthbuffer&&r.deleteRenderbuffer(ce.__webglDepthbuffer),ce.__webglMultisampledFramebuffer&&r.deleteFramebuffer(ce.__webglMultisampledFramebuffer),ce.__webglColorRenderbuffer)for(let $=0;$<ce.__webglColorRenderbuffer.length;$++)ce.__webglColorRenderbuffer[$]&&r.deleteRenderbuffer(ce.__webglColorRenderbuffer[$]);ce.__webglDepthRenderbuffer&&r.deleteRenderbuffer(ce.__webglDepthRenderbuffer)}if(G.isWebGLMultipleRenderTargets)for(let $=0,ee=W.length;$<ee;$++){const ge=n.get(W[$]);ge.__webglTexture&&(r.deleteTexture(ge.__webglTexture),o.memory.textures--),n.remove(W[$])}n.remove(W),n.remove(G)}let O=0;function U(){O=0}function L(){const G=O;return G>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+i.maxTextures),O+=1,G}function F(G){const W=[];return W.push(G.wrapS),W.push(G.wrapT),W.push(G.wrapR||0),W.push(G.magFilter),W.push(G.minFilter),W.push(G.anisotropy),W.push(G.internalFormat),W.push(G.format),W.push(G.type),W.push(G.generateMipmaps),W.push(G.premultiplyAlpha),W.push(G.flipY),W.push(G.unpackAlignment),W.push(G.colorSpace),W.join()}function k(G,W){const ce=n.get(G);if(G.isVideoTexture&&_e(G),G.isRenderTargetTexture===!1&&G.version>0&&ce.__version!==G.version){const Ce=G.image;if(Ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{fe(ce,G,W);return}}t.bindTexture(r.TEXTURE_2D,ce.__webglTexture,r.TEXTURE0+W)}function R(G,W){const ce=n.get(G);if(G.version>0&&ce.__version!==G.version){fe(ce,G,W);return}t.bindTexture(r.TEXTURE_2D_ARRAY,ce.__webglTexture,r.TEXTURE0+W)}function z(G,W){const ce=n.get(G);if(G.version>0&&ce.__version!==G.version){fe(ce,G,W);return}t.bindTexture(r.TEXTURE_3D,ce.__webglTexture,r.TEXTURE0+W)}function B(G,W){const ce=n.get(G);if(G.version>0&&ce.__version!==G.version){se(ce,G,W);return}t.bindTexture(r.TEXTURE_CUBE_MAP,ce.__webglTexture,r.TEXTURE0+W)}const X={[lv]:r.REPEAT,[Ji]:r.CLAMP_TO_EDGE,[uv]:r.MIRRORED_REPEAT},Z={[zn]:r.NEAREST,[jS]:r.NEAREST_MIPMAP_NEAREST,[zh]:r.NEAREST_MIPMAP_LINEAR,[sn]:r.LINEAR,[v0]:r.LINEAR_MIPMAP_NEAREST,[sl]:r.LINEAR_MIPMAP_LINEAR},Q={[TY]:r.NEVER,[PY]:r.ALWAYS,[DY]:r.LESS,[gO]:r.LEQUAL,[kY]:r.EQUAL,[RY]:r.GEQUAL,[NY]:r.GREATER,[OY]:r.NOTEQUAL};function J(G,W,ce){if(W.type===po&&e.has("OES_texture_float_linear")===!1&&(W.magFilter===sn||W.magFilter===v0||W.magFilter===zh||W.magFilter===sl||W.minFilter===sn||W.minFilter===v0||W.minFilter===zh||W.minFilter===sl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),ce?(r.texParameteri(G,r.TEXTURE_WRAP_S,X[W.wrapS]),r.texParameteri(G,r.TEXTURE_WRAP_T,X[W.wrapT]),(G===r.TEXTURE_3D||G===r.TEXTURE_2D_ARRAY)&&r.texParameteri(G,r.TEXTURE_WRAP_R,X[W.wrapR]),r.texParameteri(G,r.TEXTURE_MAG_FILTER,Z[W.magFilter]),r.texParameteri(G,r.TEXTURE_MIN_FILTER,Z[W.minFilter])):(r.texParameteri(G,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(G,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(G===r.TEXTURE_3D||G===r.TEXTURE_2D_ARRAY)&&r.texParameteri(G,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),(W.wrapS!==Ji||W.wrapT!==Ji)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(G,r.TEXTURE_MAG_FILTER,S(W.magFilter)),r.texParameteri(G,r.TEXTURE_MIN_FILTER,S(W.minFilter)),W.minFilter!==zn&&W.minFilter!==sn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),W.compareFunction&&(r.texParameteri(G,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(G,r.TEXTURE_COMPARE_FUNC,Q[W.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ce=e.get("EXT_texture_filter_anisotropic");if(W.magFilter===zn||W.minFilter!==zh&&W.minFilter!==sl||W.type===po&&e.has("OES_texture_float_linear")===!1||s===!1&&W.type===Md&&e.has("OES_texture_half_float_linear")===!1)return;(W.anisotropy>1||n.get(W).__currentAnisotropy)&&(r.texParameterf(G,Ce.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,i.getMaxAnisotropy())),n.get(W).__currentAnisotropy=W.anisotropy)}}function ne(G,W){let ce=!1;G.__webglInit===void 0&&(G.__webglInit=!0,W.addEventListener("dispose",E));const Ce=W.source;let $=d.get(Ce);$===void 0&&($={},d.set(Ce,$));const ee=F(W);if(ee!==G.__cacheKey){$[ee]===void 0&&($[ee]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,ce=!0),$[ee].usedTimes++;const ge=$[G.__cacheKey];ge!==void 0&&($[G.__cacheKey].usedTimes--,ge.usedTimes===0&&C(W)),G.__cacheKey=ee,G.__webglTexture=$[ee].texture}return ce}function fe(G,W,ce){let Ce=r.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(Ce=r.TEXTURE_2D_ARRAY),W.isData3DTexture&&(Ce=r.TEXTURE_3D);const $=ne(G,W),ee=W.source;t.bindTexture(Ce,G.__webglTexture,r.TEXTURE0+ce);const ge=n.get(ee);if(ee.version!==ge.__version||$===!0){t.activeTexture(r.TEXTURE0+ce);const xe=Ir.getPrimaries(Ir.workingColorSpace),Ne=W.colorSpace===mo?null:Ir.getPrimaries(W.colorSpace),Fe=W.colorSpace===mo||xe===Ne?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,W.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,W.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);const We=g(W)&&y(W.image)===!1;let ke=v(W.image,We,!1,i.maxTextureSize);ke=oe(W,ke);const it=y(ke)||s,Je=a.convert(W.format,W.colorSpace);let st=a.convert(W.type),we=m(W.internalFormat,Je,st,W.colorSpace,W.isVideoTexture);J(Ce,W,it);let Pe;const et=W.mipmaps,V=s&&W.isVideoTexture!==!0&&we!==fO,Me=ge.__version===void 0||$===!0,Le=ee.dataReady,Ze=x(W,ke,it);if(W.isDepthTexture)we=r.DEPTH_COMPONENT,s?W.type===po?we=r.DEPTH_COMPONENT32F:W.type===iu?we=r.DEPTH_COMPONENT24:W.type===Rc?we=r.DEPTH24_STENCIL8:we=r.DEPTH_COMPONENT16:W.type===po&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),W.format===Pc&&we===r.DEPTH_COMPONENT&&W.type!==p2&&W.type!==iu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),W.type=iu,st=a.convert(W.type)),W.format===_d&&we===r.DEPTH_COMPONENT&&(we=r.DEPTH_STENCIL,W.type!==Rc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),W.type=Rc,st=a.convert(W.type))),Me&&(V?t.texStorage2D(r.TEXTURE_2D,1,we,ke.width,ke.height):t.texImage2D(r.TEXTURE_2D,0,we,ke.width,ke.height,0,Je,st,null));else if(W.isDataTexture)if(et.length>0&&it){V&&Me&&t.texStorage2D(r.TEXTURE_2D,Ze,we,et[0].width,et[0].height);for(let he=0,Xe=et.length;he<Xe;he++)Pe=et[he],V?Le&&t.texSubImage2D(r.TEXTURE_2D,he,0,0,Pe.width,Pe.height,Je,st,Pe.data):t.texImage2D(r.TEXTURE_2D,he,we,Pe.width,Pe.height,0,Je,st,Pe.data);W.generateMipmaps=!1}else V?(Me&&t.texStorage2D(r.TEXTURE_2D,Ze,we,ke.width,ke.height),Le&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,ke.width,ke.height,Je,st,ke.data)):t.texImage2D(r.TEXTURE_2D,0,we,ke.width,ke.height,0,Je,st,ke.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){V&&Me&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Ze,we,et[0].width,et[0].height,ke.depth);for(let he=0,Xe=et.length;he<Xe;he++)Pe=et[he],W.format!==ya?Je!==null?V?Le&&t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,he,0,0,0,Pe.width,Pe.height,ke.depth,Je,Pe.data,0,0):t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,he,we,Pe.width,Pe.height,ke.depth,0,Pe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):V?Le&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,he,0,0,0,Pe.width,Pe.height,ke.depth,Je,st,Pe.data):t.texImage3D(r.TEXTURE_2D_ARRAY,he,we,Pe.width,Pe.height,ke.depth,0,Je,st,Pe.data)}else{V&&Me&&t.texStorage2D(r.TEXTURE_2D,Ze,we,et[0].width,et[0].height);for(let he=0,Xe=et.length;he<Xe;he++)Pe=et[he],W.format!==ya?Je!==null?V?Le&&t.compressedTexSubImage2D(r.TEXTURE_2D,he,0,0,Pe.width,Pe.height,Je,Pe.data):t.compressedTexImage2D(r.TEXTURE_2D,he,we,Pe.width,Pe.height,0,Pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):V?Le&&t.texSubImage2D(r.TEXTURE_2D,he,0,0,Pe.width,Pe.height,Je,st,Pe.data):t.texImage2D(r.TEXTURE_2D,he,we,Pe.width,Pe.height,0,Je,st,Pe.data)}else if(W.isDataArrayTexture)V?(Me&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Ze,we,ke.width,ke.height,ke.depth),Le&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,ke.width,ke.height,ke.depth,Je,st,ke.data)):t.texImage3D(r.TEXTURE_2D_ARRAY,0,we,ke.width,ke.height,ke.depth,0,Je,st,ke.data);else if(W.isData3DTexture)V?(Me&&t.texStorage3D(r.TEXTURE_3D,Ze,we,ke.width,ke.height,ke.depth),Le&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,ke.width,ke.height,ke.depth,Je,st,ke.data)):t.texImage3D(r.TEXTURE_3D,0,we,ke.width,ke.height,ke.depth,0,Je,st,ke.data);else if(W.isFramebufferTexture){if(Me)if(V)t.texStorage2D(r.TEXTURE_2D,Ze,we,ke.width,ke.height);else{let he=ke.width,Xe=ke.height;for(let H=0;H<Ze;H++)t.texImage2D(r.TEXTURE_2D,H,we,he,Xe,0,Je,st,null),he>>=1,Xe>>=1}}else if(et.length>0&&it){V&&Me&&t.texStorage2D(r.TEXTURE_2D,Ze,we,et[0].width,et[0].height);for(let he=0,Xe=et.length;he<Xe;he++)Pe=et[he],V?Le&&t.texSubImage2D(r.TEXTURE_2D,he,0,0,Je,st,Pe):t.texImage2D(r.TEXTURE_2D,he,we,Je,st,Pe);W.generateMipmaps=!1}else V?(Me&&t.texStorage2D(r.TEXTURE_2D,Ze,we,ke.width,ke.height),Le&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,Je,st,ke)):t.texImage2D(r.TEXTURE_2D,0,we,Je,st,ke);w(W,it)&&b(Ce),ge.__version=ee.version,W.onUpdate&&W.onUpdate(W)}G.__version=W.version}function se(G,W,ce){if(W.image.length!==6)return;const Ce=ne(G,W),$=W.source;t.bindTexture(r.TEXTURE_CUBE_MAP,G.__webglTexture,r.TEXTURE0+ce);const ee=n.get($);if($.version!==ee.__version||Ce===!0){t.activeTexture(r.TEXTURE0+ce);const ge=Ir.getPrimaries(Ir.workingColorSpace),xe=W.colorSpace===mo?null:Ir.getPrimaries(W.colorSpace),Ne=W.colorSpace===mo||ge===xe?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,W.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,W.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ne);const Fe=W.isCompressedTexture||W.image[0].isCompressedTexture,We=W.image[0]&&W.image[0].isDataTexture,ke=[];for(let he=0;he<6;he++)!Fe&&!We?ke[he]=v(W.image[he],!1,!0,i.maxCubemapSize):ke[he]=We?W.image[he].image:W.image[he],ke[he]=oe(W,ke[he]);const it=ke[0],Je=y(it)||s,st=a.convert(W.format,W.colorSpace),we=a.convert(W.type),Pe=m(W.internalFormat,st,we,W.colorSpace),et=s&&W.isVideoTexture!==!0,V=ee.__version===void 0||Ce===!0,Me=$.dataReady;let Le=x(W,it,Je);J(r.TEXTURE_CUBE_MAP,W,Je);let Ze;if(Fe){et&&V&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Le,Pe,it.width,it.height);for(let he=0;he<6;he++){Ze=ke[he].mipmaps;for(let Xe=0;Xe<Ze.length;Xe++){const H=Ze[Xe];W.format!==ya?st!==null?et?Me&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe,0,0,H.width,H.height,st,H.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe,Pe,H.width,H.height,0,H.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):et?Me&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe,0,0,H.width,H.height,st,we,H.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe,Pe,H.width,H.height,0,st,we,H.data)}}}else{Ze=W.mipmaps,et&&V&&(Ze.length>0&&Le++,t.texStorage2D(r.TEXTURE_CUBE_MAP,Le,Pe,ke[0].width,ke[0].height));for(let he=0;he<6;he++)if(We){et?Me&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,ke[he].width,ke[he].height,st,we,ke[he].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,Pe,ke[he].width,ke[he].height,0,st,we,ke[he].data);for(let Xe=0;Xe<Ze.length;Xe++){const H=Ze[Xe].image[he].image;et?Me&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe+1,0,0,H.width,H.height,st,we,H.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe+1,Pe,H.width,H.height,0,st,we,H.data)}}else{et?Me&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,st,we,ke[he]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,Pe,st,we,ke[he]);for(let Xe=0;Xe<Ze.length;Xe++){const H=Ze[Xe];et?Me&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe+1,0,0,st,we,H.image[he]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+he,Xe+1,Pe,st,we,H.image[he])}}}w(W,Je)&&b(r.TEXTURE_CUBE_MAP),ee.__version=$.version,W.onUpdate&&W.onUpdate(W)}G.__version=W.version}function ye(G,W,ce,Ce,$,ee){const ge=a.convert(ce.format,ce.colorSpace),xe=a.convert(ce.type),Ne=m(ce.internalFormat,ge,xe,ce.colorSpace);if(!n.get(W).__hasExternalTextures){const Fe=Math.max(1,W.width>>ee),We=Math.max(1,W.height>>ee);$===r.TEXTURE_3D||$===r.TEXTURE_2D_ARRAY?t.texImage3D($,ee,Ne,Fe,We,W.depth,0,ge,xe,null):t.texImage2D($,ee,Ne,Fe,We,0,ge,xe,null)}t.bindFramebuffer(r.FRAMEBUFFER,G),ie(W)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Ce,$,n.get(ce).__webglTexture,0,K(W)):($===r.TEXTURE_2D||$>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&$<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Ce,$,n.get(ce).__webglTexture,ee),t.bindFramebuffer(r.FRAMEBUFFER,null)}function De(G,W,ce){if(r.bindRenderbuffer(r.RENDERBUFFER,G),W.depthBuffer&&!W.stencilBuffer){let Ce=s===!0?r.DEPTH_COMPONENT24:r.DEPTH_COMPONENT16;if(ce||ie(W)){const $=W.depthTexture;$&&$.isDepthTexture&&($.type===po?Ce=r.DEPTH_COMPONENT32F:$.type===iu&&(Ce=r.DEPTH_COMPONENT24));const ee=K(W);ie(W)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,ee,Ce,W.width,W.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,ee,Ce,W.width,W.height)}else r.renderbufferStorage(r.RENDERBUFFER,Ce,W.width,W.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,G)}else if(W.depthBuffer&&W.stencilBuffer){const Ce=K(W);ce&&ie(W)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Ce,r.DEPTH24_STENCIL8,W.width,W.height):ie(W)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ce,r.DEPTH24_STENCIL8,W.width,W.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,W.width,W.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,G)}else{const Ce=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let $=0;$<Ce.length;$++){const ee=Ce[$],ge=a.convert(ee.format,ee.colorSpace),xe=a.convert(ee.type),Ne=m(ee.internalFormat,ge,xe,ee.colorSpace),Fe=K(W);ce&&ie(W)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Fe,Ne,W.width,W.height):ie(W)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Fe,Ne,W.width,W.height):r.renderbufferStorage(r.RENDERBUFFER,Ne,W.width,W.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function pe(G,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,G),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),k(W.depthTexture,0);const ce=n.get(W.depthTexture).__webglTexture,Ce=K(W);if(W.depthTexture.format===Pc)ie(W)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,ce,0,Ce):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,ce,0);else if(W.depthTexture.format===_d)ie(W)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,ce,0,Ce):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,ce,0);else throw new Error("Unknown depthTexture format")}function Te(G){const W=n.get(G),ce=G.isWebGLCubeRenderTarget===!0;if(G.depthTexture&&!W.__autoAllocateDepthBuffer){if(ce)throw new Error("target.depthTexture not supported in Cube render targets");pe(W.__webglFramebuffer,G)}else if(ce){W.__webglDepthbuffer=[];for(let Ce=0;Ce<6;Ce++)t.bindFramebuffer(r.FRAMEBUFFER,W.__webglFramebuffer[Ce]),W.__webglDepthbuffer[Ce]=r.createRenderbuffer(),De(W.__webglDepthbuffer[Ce],G,!1)}else t.bindFramebuffer(r.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer=r.createRenderbuffer(),De(W.__webglDepthbuffer,G,!1);t.bindFramebuffer(r.FRAMEBUFFER,null)}function be(G,W,ce){const Ce=n.get(G);W!==void 0&&ye(Ce.__webglFramebuffer,G,G.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),ce!==void 0&&Te(G)}function re(G){const W=G.texture,ce=n.get(G),Ce=n.get(W);G.addEventListener("dispose",A),G.isWebGLMultipleRenderTargets!==!0&&(Ce.__webglTexture===void 0&&(Ce.__webglTexture=r.createTexture()),Ce.__version=W.version,o.memory.textures++);const $=G.isWebGLCubeRenderTarget===!0,ee=G.isWebGLMultipleRenderTargets===!0,ge=y(G)||s;if($){ce.__webglFramebuffer=[];for(let xe=0;xe<6;xe++)if(s&&W.mipmaps&&W.mipmaps.length>0){ce.__webglFramebuffer[xe]=[];for(let Ne=0;Ne<W.mipmaps.length;Ne++)ce.__webglFramebuffer[xe][Ne]=r.createFramebuffer()}else ce.__webglFramebuffer[xe]=r.createFramebuffer()}else{if(s&&W.mipmaps&&W.mipmaps.length>0){ce.__webglFramebuffer=[];for(let xe=0;xe<W.mipmaps.length;xe++)ce.__webglFramebuffer[xe]=r.createFramebuffer()}else ce.__webglFramebuffer=r.createFramebuffer();if(ee)if(i.drawBuffers){const xe=G.texture;for(let Ne=0,Fe=xe.length;Ne<Fe;Ne++){const We=n.get(xe[Ne]);We.__webglTexture===void 0&&(We.__webglTexture=r.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&G.samples>0&&ie(G)===!1){const xe=ee?W:[W];ce.__webglMultisampledFramebuffer=r.createFramebuffer(),ce.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,ce.__webglMultisampledFramebuffer);for(let Ne=0;Ne<xe.length;Ne++){const Fe=xe[Ne];ce.__webglColorRenderbuffer[Ne]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,ce.__webglColorRenderbuffer[Ne]);const We=a.convert(Fe.format,Fe.colorSpace),ke=a.convert(Fe.type),it=m(Fe.internalFormat,We,ke,Fe.colorSpace,G.isXRRenderTarget===!0),Je=K(G);r.renderbufferStorageMultisample(r.RENDERBUFFER,Je,it,G.width,G.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ne,r.RENDERBUFFER,ce.__webglColorRenderbuffer[Ne])}r.bindRenderbuffer(r.RENDERBUFFER,null),G.depthBuffer&&(ce.__webglDepthRenderbuffer=r.createRenderbuffer(),De(ce.__webglDepthRenderbuffer,G,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if($){t.bindTexture(r.TEXTURE_CUBE_MAP,Ce.__webglTexture),J(r.TEXTURE_CUBE_MAP,W,ge);for(let xe=0;xe<6;xe++)if(s&&W.mipmaps&&W.mipmaps.length>0)for(let Ne=0;Ne<W.mipmaps.length;Ne++)ye(ce.__webglFramebuffer[xe][Ne],G,W,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ne);else ye(ce.__webglFramebuffer[xe],G,W,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0);w(W,ge)&&b(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ee){const xe=G.texture;for(let Ne=0,Fe=xe.length;Ne<Fe;Ne++){const We=xe[Ne],ke=n.get(We);t.bindTexture(r.TEXTURE_2D,ke.__webglTexture),J(r.TEXTURE_2D,We,ge),ye(ce.__webglFramebuffer,G,We,r.COLOR_ATTACHMENT0+Ne,r.TEXTURE_2D,0),w(We,ge)&&b(r.TEXTURE_2D)}t.unbindTexture()}else{let xe=r.TEXTURE_2D;if((G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(s?xe=G.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(xe,Ce.__webglTexture),J(xe,W,ge),s&&W.mipmaps&&W.mipmaps.length>0)for(let Ne=0;Ne<W.mipmaps.length;Ne++)ye(ce.__webglFramebuffer[Ne],G,W,r.COLOR_ATTACHMENT0,xe,Ne);else ye(ce.__webglFramebuffer,G,W,r.COLOR_ATTACHMENT0,xe,0);w(W,ge)&&b(xe),t.unbindTexture()}G.depthBuffer&&Te(G)}function Re(G){const W=y(G)||s,ce=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let Ce=0,$=ce.length;Ce<$;Ce++){const ee=ce[Ce];if(w(ee,W)){const ge=G.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,xe=n.get(ee).__webglTexture;t.bindTexture(ge,xe),b(ge),t.unbindTexture()}}}function ze(G){if(s&&G.samples>0&&ie(G)===!1){const W=G.isWebGLMultipleRenderTargets?G.texture:[G.texture],ce=G.width,Ce=G.height;let $=r.COLOR_BUFFER_BIT;const ee=[],ge=G.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,xe=n.get(G),Ne=G.isWebGLMultipleRenderTargets===!0;if(Ne)for(let Fe=0;Fe<W.length;Fe++)t.bindFramebuffer(r.FRAMEBUFFER,xe.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Fe,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,xe.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Fe,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,xe.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,xe.__webglFramebuffer);for(let Fe=0;Fe<W.length;Fe++){ee.push(r.COLOR_ATTACHMENT0+Fe),G.depthBuffer&&ee.push(ge);const We=xe.__ignoreDepthValues!==void 0?xe.__ignoreDepthValues:!1;if(We===!1&&(G.depthBuffer&&($|=r.DEPTH_BUFFER_BIT),G.stencilBuffer&&($|=r.STENCIL_BUFFER_BIT)),Ne&&r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,xe.__webglColorRenderbuffer[Fe]),We===!0&&(r.invalidateFramebuffer(r.READ_FRAMEBUFFER,[ge]),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[ge])),Ne){const ke=n.get(W[Fe]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,ke,0)}r.blitFramebuffer(0,0,ce,Ce,0,0,ce,Ce,$,r.NEAREST),u&&r.invalidateFramebuffer(r.READ_FRAMEBUFFER,ee)}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),Ne)for(let Fe=0;Fe<W.length;Fe++){t.bindFramebuffer(r.FRAMEBUFFER,xe.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Fe,r.RENDERBUFFER,xe.__webglColorRenderbuffer[Fe]);const We=n.get(W[Fe]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,xe.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Fe,r.TEXTURE_2D,We,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,xe.__webglMultisampledFramebuffer)}}function K(G){return Math.min(i.maxSamples,G.samples)}function ie(G){const W=n.get(G);return s&&G.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function _e(G){const W=o.render.frame;c.get(G)!==W&&(c.set(G,W),G.update())}function oe(G,W){const ce=G.colorSpace,Ce=G.format,$=G.type;return G.isCompressedTexture===!0||G.isVideoTexture===!0||G.format===HS||ce!==_l&&ce!==mo&&(Ir.getTransfer(ce)===en?s===!1?e.has("EXT_sRGB")===!0&&Ce===ya?(G.format=HS,G.minFilter=sn,G.generateMipmaps=!1):W=yO.sRGBToLinear(W):(Ce!==ya||$!==gl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ce)),W}this.allocateTextureUnit=L,this.resetTextureUnits=U,this.setTexture2D=k,this.setTexture2DArray=R,this.setTexture3D=z,this.setTextureCube=B,this.rebindTextures=be,this.setupRenderTarget=re,this.updateRenderTargetMipmap=Re,this.updateMultisampleRenderTarget=ze,this.setupDepthRenderbuffer=Te,this.setupFrameBufferTexture=ye,this.useMultisampledRTT=ie}function YY(r,e,t){const n=t.isWebGL2;function i(a,o=mo){let s;const l=Ir.getTransfer(o);if(a===gl)return r.UNSIGNED_BYTE;if(a===lO)return r.UNSIGNED_SHORT_4_4_4_4;if(a===uO)return r.UNSIGNED_SHORT_5_5_5_1;if(a===pY)return r.BYTE;if(a===mY)return r.SHORT;if(a===p2)return r.UNSIGNED_SHORT;if(a===sO)return r.INT;if(a===iu)return r.UNSIGNED_INT;if(a===po)return r.FLOAT;if(a===Md)return n?r.HALF_FLOAT:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(a===gY)return r.ALPHA;if(a===ya)return r.RGBA;if(a===vY)return r.LUMINANCE;if(a===yY)return r.LUMINANCE_ALPHA;if(a===Pc)return r.DEPTH_COMPONENT;if(a===_d)return r.DEPTH_STENCIL;if(a===HS)return s=e.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(a===bY)return r.RED;if(a===cO)return r.RED_INTEGER;if(a===xY)return r.RG;if(a===hO)return r.RG_INTEGER;if(a===dO)return r.RGBA_INTEGER;if(a===rw||a===nw||a===iw||a===aw)if(l===en)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(a===rw)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===nw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===iw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===aw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(a===rw)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===nw)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===iw)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===aw)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===ED||a===CD||a===AD||a===TD)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(a===ED)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===CD)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===AD)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===TD)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===fO)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===DD||a===kD)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(a===DD)return l===en?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(a===kD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===ND||a===OD||a===RD||a===PD||a===ID||a===LD||a===FD||a===BD||a===zD||a===UD||a===jD||a===HD||a===VD||a===qD)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(a===ND)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===OD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===RD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===PD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===ID)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===LD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===FD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===BD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===zD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===UD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===jD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===HD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===VD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===qD)return l===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===ow||a===WD||a===GD)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(a===ow)return l===en?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(a===WD)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(a===GD)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(a===wY||a===$D||a===XD||a===YD)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(a===ow)return s.COMPRESSED_RED_RGTC1_EXT;if(a===$D)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===XD)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===YD)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===Rc?n?r.UNSIGNED_INT_24_8:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):r[a]!==void 0?r[a]:null}return{convert:i}}class JY extends Nn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class hp extends Mr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Nze={type:"move"};class NC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new hp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new hp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new me,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new me),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new hp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new me,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new me),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,a=null,o=null;const s=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const v of e.hand.values()){const y=t.getJointPose(v,n),g=this._getHandJoint(u,v);y!==null&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=y.radius),g.visible=y!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],d=c.position.distanceTo(h.position),f=.02,p=.005;u.inputState.pinching&&d>f+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=f-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));s!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&a!==null&&(i=a),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Nze)))}return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new hp;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const Oze=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Rze=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Pze{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const i=new Sn,a=e.properties.get(i);a.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}render(e,t){if(this.texture!==null){if(this.mesh===null){const n=t.cameras[0].viewport,i=new ts({extensions:{fragDepth:!0},vertexShader:Oze,fragmentShader:Rze,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Yn(new Im(20,20),i)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class Ize extends Al{constructor(e,t){super();const n=this;let i=null,a=1,o=null,s="local-floor",l=1,u=null,c=null,h=null,d=null,f=null,p=null;const v=new Pze,y=t.getContextAttributes();let g=null,w=null;const b=[],m=[],x=new Qe;let S=null;const E=new Nn;E.layers.enable(1),E.viewport=new Fr;const A=new Nn;A.layers.enable(2),A.viewport=new Fr;const T=[E,A],C=new JY;C.layers.enable(1),C.layers.enable(2);let D=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ne){let fe=b[ne];return fe===void 0&&(fe=new NC,b[ne]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(ne){let fe=b[ne];return fe===void 0&&(fe=new NC,b[ne]=fe),fe.getGripSpace()},this.getHand=function(ne){let fe=b[ne];return fe===void 0&&(fe=new NC,b[ne]=fe),fe.getHandSpace()};function U(ne){const fe=m.indexOf(ne.inputSource);if(fe===-1)return;const se=b[fe];se!==void 0&&(se.update(ne.inputSource,ne.frame,u||o),se.dispatchEvent({type:ne.type,data:ne.inputSource}))}function L(){i.removeEventListener("select",U),i.removeEventListener("selectstart",U),i.removeEventListener("selectend",U),i.removeEventListener("squeeze",U),i.removeEventListener("squeezestart",U),i.removeEventListener("squeezeend",U),i.removeEventListener("end",L),i.removeEventListener("inputsourceschange",F);for(let ne=0;ne<b.length;ne++){const fe=m[ne];fe!==null&&(m[ne]=null,b[ne].disconnect(fe))}D=null,O=null,v.reset(),e.setRenderTarget(g),f=null,d=null,h=null,i=null,w=null,J.stop(),n.isPresenting=!1,e.setPixelRatio(S),e.setSize(x.width,x.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ne){a=ne,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ne){s=ne,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(ne){u=ne},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(ne){if(i=ne,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",U),i.addEventListener("selectstart",U),i.addEventListener("selectend",U),i.addEventListener("squeeze",U),i.addEventListener("squeezestart",U),i.addEventListener("squeezeend",U),i.addEventListener("end",L),i.addEventListener("inputsourceschange",F),y.xrCompatible!==!0&&await t.makeXRCompatible(),S=e.getPixelRatio(),e.getSize(x),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const fe={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:a};f=new XRWebGLLayer(i,t,fe),i.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),w=new es(f.framebufferWidth,f.framebufferHeight,{format:ya,type:gl,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let fe=null,se=null,ye=null;y.depth&&(ye=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,fe=y.stencil?_d:Pc,se=y.stencil?Rc:iu);const De={colorFormat:t.RGBA8,depthFormat:ye,scaleFactor:a};h=new XRWebGLBinding(i,t),d=h.createProjectionLayer(De),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),w=new es(d.textureWidth,d.textureHeight,{format:ya,type:gl,depthTexture:new y2(d.textureWidth,d.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,fe),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const pe=e.properties.get(w);pe.__ignoreDepthValues=d.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(s),J.setContext(i),J.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function F(ne){for(let fe=0;fe<ne.removed.length;fe++){const se=ne.removed[fe],ye=m.indexOf(se);ye>=0&&(m[ye]=null,b[ye].disconnect(se))}for(let fe=0;fe<ne.added.length;fe++){const se=ne.added[fe];let ye=m.indexOf(se);if(ye===-1){for(let pe=0;pe<b.length;pe++)if(pe>=m.length){m.push(se),ye=pe;break}else if(m[pe]===null){m[pe]=se,ye=pe;break}if(ye===-1)break}const De=b[ye];De&&De.connect(se)}}const k=new me,R=new me;function z(ne,fe,se){k.setFromMatrixPosition(fe.matrixWorld),R.setFromMatrixPosition(se.matrixWorld);const ye=k.distanceTo(R),De=fe.projectionMatrix.elements,pe=se.projectionMatrix.elements,Te=De[14]/(De[10]-1),be=De[14]/(De[10]+1),re=(De[9]+1)/De[5],Re=(De[9]-1)/De[5],ze=(De[8]-1)/De[0],K=(pe[8]+1)/pe[0],ie=Te*ze,_e=Te*K,oe=ye/(-ze+K),G=oe*-ze;fe.matrixWorld.decompose(ne.position,ne.quaternion,ne.scale),ne.translateX(G),ne.translateZ(oe),ne.matrixWorld.compose(ne.position,ne.quaternion,ne.scale),ne.matrixWorldInverse.copy(ne.matrixWorld).invert();const W=Te+oe,ce=be+oe,Ce=ie-G,$=_e+(ye-G),ee=re*be/ce*W,ge=Re*be/ce*W;ne.projectionMatrix.makePerspective(Ce,$,ee,ge,W,ce),ne.projectionMatrixInverse.copy(ne.projectionMatrix).invert()}function B(ne,fe){fe===null?ne.matrixWorld.copy(ne.matrix):ne.matrixWorld.multiplyMatrices(fe.matrixWorld,ne.matrix),ne.matrixWorldInverse.copy(ne.matrixWorld).invert()}this.updateCamera=function(ne){if(i===null)return;v.texture!==null&&(ne.near=v.depthNear,ne.far=v.depthFar),C.near=A.near=E.near=ne.near,C.far=A.far=E.far=ne.far,(D!==C.near||O!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),D=C.near,O=C.far,E.near=D,E.far=O,A.near=D,A.far=O,E.updateProjectionMatrix(),A.updateProjectionMatrix(),ne.updateProjectionMatrix());const fe=ne.parent,se=C.cameras;B(C,fe);for(let ye=0;ye<se.length;ye++)B(se[ye],fe);se.length===2?z(C,E,A):C.projectionMatrix.copy(E.projectionMatrix),X(ne,C,fe)};function X(ne,fe,se){se===null?ne.matrix.copy(fe.matrixWorld):(ne.matrix.copy(se.matrixWorld),ne.matrix.invert(),ne.matrix.multiply(fe.matrixWorld)),ne.matrix.decompose(ne.position,ne.quaternion,ne.scale),ne.updateMatrixWorld(!0),ne.projectionMatrix.copy(fe.projectionMatrix),ne.projectionMatrixInverse.copy(fe.projectionMatrixInverse),ne.isPerspectiveCamera&&(ne.fov=Qp*2*Math.atan(1/ne.projectionMatrix.elements[5]),ne.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(ne){l=ne,d!==null&&(d.fixedFoveation=ne),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=ne)},this.hasDepthSensing=function(){return v.texture!==null};let Z=null;function Q(ne,fe){if(c=fe.getViewerPose(u||o),p=fe,c!==null){const se=c.views;f!==null&&(e.setRenderTargetFramebuffer(w,f.framebuffer),e.setRenderTarget(w));let ye=!1;se.length!==C.cameras.length&&(C.cameras.length=0,ye=!0);for(let pe=0;pe<se.length;pe++){const Te=se[pe];let be=null;if(f!==null)be=f.getViewport(Te);else{const Re=h.getViewSubImage(d,Te);be=Re.viewport,pe===0&&(e.setRenderTargetTextures(w,Re.colorTexture,d.ignoreDepthValues?void 0:Re.depthStencilTexture),e.setRenderTarget(w))}let re=T[pe];re===void 0&&(re=new Nn,re.layers.enable(pe),re.viewport=new Fr,T[pe]=re),re.matrix.fromArray(Te.transform.matrix),re.matrix.decompose(re.position,re.quaternion,re.scale),re.projectionMatrix.fromArray(Te.projectionMatrix),re.projectionMatrixInverse.copy(re.projectionMatrix).invert(),re.viewport.set(be.x,be.y,be.width,be.height),pe===0&&(C.matrix.copy(re.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),ye===!0&&C.cameras.push(re)}const De=i.enabledFeatures;if(De&&De.includes("depth-sensing")){const pe=h.getDepthInformation(se[0]);pe&&pe.isValid&&pe.texture&&v.init(e,pe,i.renderState)}}for(let se=0;se<b.length;se++){const ye=m[se],De=b[se];ye!==null&&De!==void 0&&De.update(ye,fe,u||o)}v.render(e,C),Z&&Z(ne,fe),fe.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:fe}),p=null}const J=new VY;J.setAnimationLoop(Q),this.setAnimationLoop=function(ne){Z=ne},this.dispose=function(){}}}function Lze(r,e){function t(y,g){y.matrixAutoUpdate===!0&&y.updateMatrix(),g.value.copy(y.matrix)}function n(y,g){g.color.getRGB(y.fogColor.value,zY(r)),g.isFog?(y.fogNear.value=g.near,y.fogFar.value=g.far):g.isFogExp2&&(y.fogDensity.value=g.density)}function i(y,g,w,b,m){g.isMeshBasicMaterial||g.isMeshLambertMaterial?a(y,g):g.isMeshToonMaterial?(a(y,g),h(y,g)):g.isMeshPhongMaterial?(a(y,g),c(y,g)):g.isMeshStandardMaterial?(a(y,g),d(y,g),g.isMeshPhysicalMaterial&&f(y,g,m)):g.isMeshMatcapMaterial?(a(y,g),p(y,g)):g.isMeshDepthMaterial?a(y,g):g.isMeshDistanceMaterial?(a(y,g),v(y,g)):g.isMeshNormalMaterial?a(y,g):g.isLineBasicMaterial?(o(y,g),g.isLineDashedMaterial&&s(y,g)):g.isPointsMaterial?l(y,g,w,b):g.isSpriteMaterial?u(y,g):g.isShadowMaterial?(y.color.value.copy(g.color),y.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function a(y,g){y.opacity.value=g.opacity,g.color&&y.diffuse.value.copy(g.color),g.emissive&&y.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.bumpMap&&(y.bumpMap.value=g.bumpMap,t(g.bumpMap,y.bumpMapTransform),y.bumpScale.value=g.bumpScale,g.side===_a&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,t(g.normalMap,y.normalMapTransform),y.normalScale.value.copy(g.normalScale),g.side===_a&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,t(g.displacementMap,y.displacementMapTransform),y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,y.emissiveMapTransform)),g.specularMap&&(y.specularMap.value=g.specularMap,t(g.specularMap,y.specularMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest);const w=e.get(g).envMap;if(w&&(y.envMap.value=w,y.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=g.reflectivity,y.ior.value=g.ior,y.refractionRatio.value=g.refractionRatio),g.lightMap){y.lightMap.value=g.lightMap;const b=r._useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=g.lightMapIntensity*b,t(g.lightMap,y.lightMapTransform)}g.aoMap&&(y.aoMap.value=g.aoMap,y.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,y.aoMapTransform))}function o(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform))}function s(y,g){y.dashSize.value=g.dashSize,y.totalSize.value=g.dashSize+g.gapSize,y.scale.value=g.scale}function l(y,g,w,b){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.size.value=g.size*w,y.scale.value=b*.5,g.map&&(y.map.value=g.map,t(g.map,y.uvTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function u(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.rotation.value=g.rotation,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function c(y,g){y.specular.value.copy(g.specular),y.shininess.value=Math.max(g.shininess,1e-4)}function h(y,g){g.gradientMap&&(y.gradientMap.value=g.gradientMap)}function d(y,g){y.metalness.value=g.metalness,g.metalnessMap&&(y.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,y.metalnessMapTransform)),y.roughness.value=g.roughness,g.roughnessMap&&(y.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,y.roughnessMapTransform)),e.get(g).envMap&&(y.envMapIntensity.value=g.envMapIntensity)}function f(y,g,w){y.ior.value=g.ior,g.sheen>0&&(y.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),y.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(y.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,y.sheenColorMapTransform)),g.sheenRoughnessMap&&(y.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,y.sheenRoughnessMapTransform))),g.clearcoat>0&&(y.clearcoat.value=g.clearcoat,y.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(y.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,y.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(y.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===_a&&y.clearcoatNormalScale.value.negate())),g.iridescence>0&&(y.iridescence.value=g.iridescence,y.iridescenceIOR.value=g.iridescenceIOR,y.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(y.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,y.iridescenceMapTransform)),g.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),g.transmission>0&&(y.transmission.value=g.transmission,y.transmissionSamplerMap.value=w.texture,y.transmissionSamplerSize.value.set(w.width,w.height),g.transmissionMap&&(y.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,y.transmissionMapTransform)),y.thickness.value=g.thickness,g.thicknessMap&&(y.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=g.attenuationDistance,y.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(y.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(y.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=g.specularIntensity,y.specularColor.value.copy(g.specularColor),g.specularColorMap&&(y.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,y.specularColorMapTransform)),g.specularIntensityMap&&(y.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,y.specularIntensityMapTransform))}function p(y,g){g.matcap&&(y.matcap.value=g.matcap)}function v(y,g){const w=e.get(g).light;y.referencePosition.value.setFromMatrixPosition(w.matrixWorld),y.nearDistance.value=w.shadow.camera.near,y.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Fze(r,e,t,n){let i={},a={},o=[];const s=t.isWebGL2?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(w,b){const m=b.program;n.uniformBlockBinding(w,m)}function u(w,b){let m=i[w.id];m===void 0&&(p(w),m=c(w),i[w.id]=m,w.addEventListener("dispose",y));const x=b.program;n.updateUBOMapping(w,x);const S=e.render.frame;a[w.id]!==S&&(d(w),a[w.id]=S)}function c(w){const b=h();w.__bindingPointIndex=b;const m=r.createBuffer(),x=w.__size,S=w.usage;return r.bindBuffer(r.UNIFORM_BUFFER,m),r.bufferData(r.UNIFORM_BUFFER,x,S),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,b,m),m}function h(){for(let w=0;w<s;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(w){const b=i[w.id],m=w.uniforms,x=w.__cache;r.bindBuffer(r.UNIFORM_BUFFER,b);for(let S=0,E=m.length;S<E;S++){const A=Array.isArray(m[S])?m[S]:[m[S]];for(let T=0,C=A.length;T<C;T++){const D=A[T];if(f(D,S,T,x)===!0){const O=D.__offset,U=Array.isArray(D.value)?D.value:[D.value];let L=0;for(let F=0;F<U.length;F++){const k=U[F],R=v(k);typeof k=="number"||typeof k=="boolean"?(D.__data[0]=k,r.bufferSubData(r.UNIFORM_BUFFER,O+L,D.__data)):k.isMatrix3?(D.__data[0]=k.elements[0],D.__data[1]=k.elements[1],D.__data[2]=k.elements[2],D.__data[3]=0,D.__data[4]=k.elements[3],D.__data[5]=k.elements[4],D.__data[6]=k.elements[5],D.__data[7]=0,D.__data[8]=k.elements[6],D.__data[9]=k.elements[7],D.__data[10]=k.elements[8],D.__data[11]=0):(k.toArray(D.__data,L),L+=R.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,O,D.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function f(w,b,m,x){const S=w.value,E=b+"_"+m;if(x[E]===void 0)return typeof S=="number"||typeof S=="boolean"?x[E]=S:x[E]=S.clone(),!0;{const A=x[E];if(typeof S=="number"||typeof S=="boolean"){if(A!==S)return x[E]=S,!0}else if(A.equals(S)===!1)return A.copy(S),!0}return!1}function p(w){const b=w.uniforms;let m=0;const x=16;for(let E=0,A=b.length;E<A;E++){const T=Array.isArray(b[E])?b[E]:[b[E]];for(let C=0,D=T.length;C<D;C++){const O=T[C],U=Array.isArray(O.value)?O.value:[O.value];for(let L=0,F=U.length;L<F;L++){const k=U[L],R=v(k),z=m%x;z!==0&&x-z<R.boundary&&(m+=x-z),O.__data=new Float32Array(R.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=m,m+=R.storage}}}const S=m%x;return S>0&&(m+=x-S),w.__size=m,w.__cache={},this}function v(w){const b={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(b.boundary=4,b.storage=4):w.isVector2?(b.boundary=8,b.storage=8):w.isVector3||w.isColor?(b.boundary=16,b.storage=12):w.isVector4?(b.boundary=16,b.storage=16):w.isMatrix3?(b.boundary=48,b.storage=48):w.isMatrix4?(b.boundary=64,b.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),b}function y(w){const b=w.target;b.removeEventListener("dispose",y);const m=o.indexOf(b.__bindingPointIndex);o.splice(m,1),r.deleteBuffer(i[b.id]),delete i[b.id],delete a[b.id]}function g(){for(const w in i)r.deleteBuffer(i[w]);o=[],i={},a={}}return{bind:l,update:u,dispose:g}}class EO{constructor(e={}){const{canvas:t=LY(),context:n=null,depth:i=!0,stencil:a=!0,alpha:o=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let d;n!==null?d=n.getContextAttributes().alpha:d=o;const f=new Uint32Array(4),p=new Int32Array(4);let v=null,y=null;const g=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ri,this._useLegacyLights=!1,this.toneMapping=ml,this.toneMappingExposure=1;const b=this;let m=!1,x=0,S=0,E=null,A=-1,T=null;const C=new Fr,D=new Fr;let O=null;const U=new wt(0);let L=0,F=t.width,k=t.height,R=1,z=null,B=null;const X=new Fr(0,0,F,k),Z=new Fr(0,0,F,k);let Q=!1;const J=new gy;let ne=!1,fe=!1,se=null;const ye=new Yt,De=new Qe,pe=new me,Te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function be(){return E===null?R:1}let re=n;function Re(de,Ie){for(let je=0;je<de.length;je++){const Ve=de[je],qe=t.getContext(Ve,Ie);if(qe!==null)return qe}return null}try{const de={alpha:!0,depth:i,stencil:a,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${h2}`),t.addEventListener("webglcontextlost",Ze,!1),t.addEventListener("webglcontextrestored",he,!1),t.addEventListener("webglcontextcreationerror",Xe,!1),re===null){const Ie=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&Ie.shift(),re=Re(Ie,de),re===null)throw Re(Ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&re instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),re.getShaderPrecisionFormat===void 0&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(de){throw console.error("THREE.WebGLRenderer: "+de.message),de}let ze,K,ie,_e,oe,G,W,ce,Ce,$,ee,ge,xe,Ne,Fe,We,ke,it,Je,st,we,Pe,et,V;function Me(){ze=new X5e(re),K=new H5e(re,ze,e),ze.init(K),Pe=new YY(re,ze,K),ie=new Dze(re,ze,K),_e=new Z5e(re),oe=new vze,G=new kze(re,ze,ie,oe,K,Pe,_e),W=new q5e(b),ce=new $5e(b),Ce=new a4e(re,K),et=new U5e(re,ze,Ce,K),$=new Y5e(re,Ce,_e,et),ee=new tBe(re,$,Ce,_e),Je=new eBe(re,K,G),We=new V5e(oe),ge=new gze(b,W,ce,ze,K,et,We),xe=new Lze(b,oe),Ne=new bze,Fe=new Eze(ze,K),it=new z5e(b,W,ce,ie,ee,d,l),ke=new Tze(b,ee,K),V=new Fze(re,_e,K,ie),st=new j5e(re,ze,_e,K),we=new J5e(re,ze,_e,K),_e.programs=ge.programs,b.capabilities=K,b.extensions=ze,b.properties=oe,b.renderLists=Ne,b.shadowMap=ke,b.state=ie,b.info=_e}Me();const Le=new Ize(b,re);this.xr=Le,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const de=ze.get("WEBGL_lose_context");de&&de.loseContext()},this.forceContextRestore=function(){const de=ze.get("WEBGL_lose_context");de&&de.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(de){de!==void 0&&(R=de,this.setSize(F,k,!1))},this.getSize=function(de){return de.set(F,k)},this.setSize=function(de,Ie,je=!0){if(Le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=de,k=Ie,t.width=Math.floor(de*R),t.height=Math.floor(Ie*R),je===!0&&(t.style.width=de+"px",t.style.height=Ie+"px"),this.setViewport(0,0,de,Ie)},this.getDrawingBufferSize=function(de){return de.set(F*R,k*R).floor()},this.setDrawingBufferSize=function(de,Ie,je){F=de,k=Ie,R=je,t.width=Math.floor(de*je),t.height=Math.floor(Ie*je),this.setViewport(0,0,de,Ie)},this.getCurrentViewport=function(de){return de.copy(C)},this.getViewport=function(de){return de.copy(X)},this.setViewport=function(de,Ie,je,Ve){de.isVector4?X.set(de.x,de.y,de.z,de.w):X.set(de,Ie,je,Ve),ie.viewport(C.copy(X).multiplyScalar(R).floor())},this.getScissor=function(de){return de.copy(Z)},this.setScissor=function(de,Ie,je,Ve){de.isVector4?Z.set(de.x,de.y,de.z,de.w):Z.set(de,Ie,je,Ve),ie.scissor(D.copy(Z).multiplyScalar(R).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(de){ie.setScissorTest(Q=de)},this.setOpaqueSort=function(de){z=de},this.setTransparentSort=function(de){B=de},this.getClearColor=function(de){return de.copy(it.getClearColor())},this.setClearColor=function(){it.setClearColor.apply(it,arguments)},this.getClearAlpha=function(){return it.getClearAlpha()},this.setClearAlpha=function(){it.setClearAlpha.apply(it,arguments)},this.clear=function(de=!0,Ie=!0,je=!0){let Ve=0;if(de){let qe=!1;if(E!==null){const dt=E.texture.format;qe=dt===dO||dt===hO||dt===cO}if(qe){const dt=E.texture.type,At=dt===gl||dt===iu||dt===p2||dt===Rc||dt===lO||dt===uO,kt=it.getClearColor(),ct=it.getClearAlpha(),Ot=kt.r,Ut=kt.g,Rt=kt.b;At?(f[0]=Ot,f[1]=Ut,f[2]=Rt,f[3]=ct,re.clearBufferuiv(re.COLOR,0,f)):(p[0]=Ot,p[1]=Ut,p[2]=Rt,p[3]=ct,re.clearBufferiv(re.COLOR,0,p))}else Ve|=re.COLOR_BUFFER_BIT}Ie&&(Ve|=re.DEPTH_BUFFER_BIT),je&&(Ve|=re.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),re.clear(Ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ze,!1),t.removeEventListener("webglcontextrestored",he,!1),t.removeEventListener("webglcontextcreationerror",Xe,!1),Ne.dispose(),Fe.dispose(),oe.dispose(),W.dispose(),ce.dispose(),ee.dispose(),et.dispose(),V.dispose(),ge.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",He),Le.removeEventListener("sessionend",$e),se&&(se.dispose(),se=null),rt.stop()};function Ze(de){de.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function he(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const de=_e.autoReset,Ie=ke.enabled,je=ke.autoUpdate,Ve=ke.needsUpdate,qe=ke.type;Me(),_e.autoReset=de,ke.enabled=Ie,ke.autoUpdate=je,ke.needsUpdate=Ve,ke.type=qe}function Xe(de){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",de.statusMessage)}function H(de){const Ie=de.target;Ie.removeEventListener("dispose",H),te(Ie)}function te(de){le(de),oe.remove(de)}function le(de){const Ie=oe.get(de).programs;Ie!==void 0&&(Ie.forEach(function(je){ge.releaseProgram(je)}),de.isShaderMaterial&&ge.releaseShaderCache(de))}this.renderBufferDirect=function(de,Ie,je,Ve,qe,dt){Ie===null&&(Ie=Te);const At=qe.isMesh&&qe.matrixWorld.determinant()<0,kt=Bs(de,Ie,je,Ve,qe);ie.setMaterial(Ve,At);let ct=je.index,Ot=1;if(Ve.wireframe===!0){if(ct=$.getWireframeAttribute(je),ct===void 0)return;Ot=2}const Ut=je.drawRange,Rt=je.attributes.position;let Kr=Ut.start*Ot,qr=(Ut.start+Ut.count)*Ot;dt!==null&&(Kr=Math.max(Kr,dt.start*Ot),qr=Math.min(qr,(dt.start+dt.count)*Ot)),ct!==null?(Kr=Math.max(Kr,0),qr=Math.min(qr,ct.count)):Rt!=null&&(Kr=Math.max(Kr,0),qr=Math.min(qr,Rt.count));const Pn=qr-Kr;if(Pn<0||Pn===1/0)return;et.setup(qe,Ve,kt,je,ct);let vr,Xt=st;if(ct!==null&&(vr=Ce.get(ct),Xt=we,Xt.setIndex(vr)),qe.isMesh)Ve.wireframe===!0?(ie.setLineWidth(Ve.wireframeLinewidth*be()),Xt.setMode(re.LINES)):Xt.setMode(re.TRIANGLES);else if(qe.isLine){let Jt=Ve.linewidth;Jt===void 0&&(Jt=1),ie.setLineWidth(Jt*be()),qe.isLineSegments?Xt.setMode(re.LINES):qe.isLineLoop?Xt.setMode(re.LINE_LOOP):Xt.setMode(re.LINE_STRIP)}else qe.isPoints?Xt.setMode(re.POINTS):qe.isSprite&&Xt.setMode(re.TRIANGLES);if(qe.isBatchedMesh)Xt.renderMultiDraw(qe._multiDrawStarts,qe._multiDrawCounts,qe._multiDrawCount);else if(qe.isInstancedMesh)Xt.renderInstances(Kr,Pn,qe.count);else if(je.isInstancedBufferGeometry){const Jt=je._maxInstanceCount!==void 0?je._maxInstanceCount:1/0,Hn=Math.min(je.instanceCount,Jt);Xt.renderInstances(Kr,Pn,Hn)}else Xt.render(Kr,Pn)};function ve(de,Ie,je){de.transparent===!0&&de.side===xs&&de.forceSinglePass===!1?(de.side=_a,de.needsUpdate=!0,Rn(de,Ie,je),de.side=Mu,de.needsUpdate=!0,Rn(de,Ie,je),de.side=xs):Rn(de,Ie,je)}this.compile=function(de,Ie,je=null){je===null&&(je=de),y=Fe.get(je),y.init(),w.push(y),je.traverseVisible(function(qe){qe.isLight&&qe.layers.test(Ie.layers)&&(y.pushLight(qe),qe.castShadow&&y.pushShadow(qe))}),de!==je&&de.traverseVisible(function(qe){qe.isLight&&qe.layers.test(Ie.layers)&&(y.pushLight(qe),qe.castShadow&&y.pushShadow(qe))}),y.setupLights(b._useLegacyLights);const Ve=new Set;return de.traverse(function(qe){const dt=qe.material;if(dt)if(Array.isArray(dt))for(let At=0;At<dt.length;At++){const kt=dt[At];ve(kt,je,qe),Ve.add(kt)}else ve(dt,je,qe),Ve.add(dt)}),w.pop(),y=null,Ve},this.compileAsync=function(de,Ie,je=null){const Ve=this.compile(de,Ie,je);return new Promise(qe=>{function dt(){if(Ve.forEach(function(At){oe.get(At).currentProgram.isReady()&&Ve.delete(At)}),Ve.size===0){qe(de);return}setTimeout(dt,10)}ze.get("KHR_parallel_shader_compile")!==null?dt():setTimeout(dt,10)})};let Ee=null;function Oe(de){Ee&&Ee(de)}function He(){rt.stop()}function $e(){rt.start()}const rt=new VY;rt.setAnimationLoop(Oe),typeof self<"u"&&rt.setContext(self),this.setAnimationLoop=function(de){Ee=de,Le.setAnimationLoop(de),de===null?rt.stop():rt.start()},Le.addEventListener("sessionstart",He),Le.addEventListener("sessionend",$e),this.render=function(de,Ie){if(Ie!==void 0&&Ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;de.matrixWorldAutoUpdate===!0&&de.updateMatrixWorld(),Ie.parent===null&&Ie.matrixWorldAutoUpdate===!0&&Ie.updateMatrixWorld(),Le.enabled===!0&&Le.isPresenting===!0&&(Le.cameraAutoUpdate===!0&&Le.updateCamera(Ie),Ie=Le.getCamera()),de.isScene===!0&&de.onBeforeRender(b,de,Ie,E),y=Fe.get(de,w.length),y.init(),w.push(y),ye.multiplyMatrices(Ie.projectionMatrix,Ie.matrixWorldInverse),J.setFromProjectionMatrix(ye),fe=this.localClippingEnabled,ne=We.init(this.clippingPlanes,fe),v=Ne.get(de,g.length),v.init(),g.push(v),ft(de,Ie,0,b.sortObjects),v.finish(),b.sortObjects===!0&&v.sort(z,B),this.info.render.frame++,ne===!0&&We.beginShadows();const je=y.state.shadowsArray;if(ke.render(je,de,Ie),ne===!0&&We.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Le.enabled===!1||Le.isPresenting===!1||Le.hasDepthSensing()===!1)&&it.render(v,de),y.setupLights(b._useLegacyLights),Ie.isArrayCamera){const Ve=Ie.cameras;for(let qe=0,dt=Ve.length;qe<dt;qe++){const At=Ve[qe];Mt(v,de,At,At.viewport)}}else Mt(v,de,Ie);E!==null&&(G.updateMultisampleRenderTarget(E),G.updateRenderTargetMipmap(E)),de.isScene===!0&&de.onAfterRender(b,de,Ie),et.resetDefaultState(),A=-1,T=null,w.pop(),w.length>0?y=w[w.length-1]:y=null,g.pop(),g.length>0?v=g[g.length-1]:v=null};function ft(de,Ie,je,Ve){if(de.visible===!1)return;if(de.layers.test(Ie.layers)){if(de.isGroup)je=de.renderOrder;else if(de.isLOD)de.autoUpdate===!0&&de.update(Ie);else if(de.isLight)y.pushLight(de),de.castShadow&&y.pushShadow(de);else if(de.isSprite){if(!de.frustumCulled||J.intersectsSprite(de)){Ve&&pe.setFromMatrixPosition(de.matrixWorld).applyMatrix4(ye);const dt=ee.update(de),At=de.material;At.visible&&v.push(de,dt,At,je,pe.z,null)}}else if((de.isMesh||de.isLine||de.isPoints)&&(!de.frustumCulled||J.intersectsObject(de))){const dt=ee.update(de),At=de.material;if(Ve&&(de.boundingSphere!==void 0?(de.boundingSphere===null&&de.computeBoundingSphere(),pe.copy(de.boundingSphere.center)):(dt.boundingSphere===null&&dt.computeBoundingSphere(),pe.copy(dt.boundingSphere.center)),pe.applyMatrix4(de.matrixWorld).applyMatrix4(ye)),Array.isArray(At)){const kt=dt.groups;for(let ct=0,Ot=kt.length;ct<Ot;ct++){const Ut=kt[ct],Rt=At[Ut.materialIndex];Rt&&Rt.visible&&v.push(de,dt,Rt,je,pe.z,Ut)}}else At.visible&&v.push(de,dt,At,je,pe.z,null)}}const qe=de.children;for(let dt=0,At=qe.length;dt<At;dt++)ft(qe[dt],Ie,je,Ve)}function Mt(de,Ie,je,Ve){const qe=de.opaque,dt=de.transmissive,At=de.transparent;y.setupLightsView(je),ne===!0&&We.setGlobalState(b.clippingPlanes,je),dt.length>0&&nt(qe,dt,Ie,je),Ve&&ie.viewport(C.copy(Ve)),qe.length>0&&xt(qe,Ie,je),dt.length>0&&xt(dt,Ie,je),At.length>0&&xt(At,Ie,je),ie.buffers.depth.setTest(!0),ie.buffers.depth.setMask(!0),ie.buffers.color.setMask(!0),ie.setPolygonOffset(!1)}function nt(de,Ie,je,Ve){if((je.isScene===!0?je.overrideMaterial:null)!==null)return;const qe=K.isWebGL2;se===null&&(se=new es(1,1,{generateMipmaps:!0,type:ze.has("EXT_color_buffer_half_float")?Md:gl,minFilter:sl,samples:qe?4:0})),b.getDrawingBufferSize(De),qe?se.setSize(De.x,De.y):se.setSize(VS(De.x),VS(De.y));const dt=b.getRenderTarget();b.setRenderTarget(se),b.getClearColor(U),L=b.getClearAlpha(),L<1&&b.setClearColor(16777215,.5),b.clear();const At=b.toneMapping;b.toneMapping=ml,xt(de,je,Ve),G.updateMultisampleRenderTarget(se),G.updateRenderTargetMipmap(se);let kt=!1;for(let ct=0,Ot=Ie.length;ct<Ot;ct++){const Ut=Ie[ct],Rt=Ut.object,Kr=Ut.geometry,qr=Ut.material,Pn=Ut.group;if(qr.side===xs&&Rt.layers.test(Ve.layers)){const vr=qr.side;qr.side=_a,qr.needsUpdate=!0,$t(Rt,je,Ve,Kr,qr,Pn),qr.side=vr,qr.needsUpdate=!0,kt=!0}}kt===!0&&(G.updateMultisampleRenderTarget(se),G.updateRenderTargetMipmap(se)),b.setRenderTarget(dt),b.setClearColor(U,L),b.toneMapping=At}function xt(de,Ie,je){const Ve=Ie.isScene===!0?Ie.overrideMaterial:null;for(let qe=0,dt=de.length;qe<dt;qe++){const At=de[qe],kt=At.object,ct=At.geometry,Ot=Ve===null?At.material:Ve,Ut=At.group;kt.layers.test(je.layers)&&$t(kt,Ie,je,ct,Ot,Ut)}}function $t(de,Ie,je,Ve,qe,dt){de.onBeforeRender(b,Ie,je,Ve,qe,dt),de.modelViewMatrix.multiplyMatrices(je.matrixWorldInverse,de.matrixWorld),de.normalMatrix.getNormalMatrix(de.modelViewMatrix),qe.onBeforeRender(b,Ie,je,Ve,de,dt),qe.transparent===!0&&qe.side===xs&&qe.forceSinglePass===!1?(qe.side=_a,qe.needsUpdate=!0,b.renderBufferDirect(je,Ie,Ve,qe,de,dt),qe.side=Mu,qe.needsUpdate=!0,b.renderBufferDirect(je,Ie,Ve,qe,de,dt),qe.side=xs):b.renderBufferDirect(je,Ie,Ve,qe,de,dt),de.onAfterRender(b,Ie,je,Ve,qe,dt)}function Rn(de,Ie,je){Ie.isScene!==!0&&(Ie=Te);const Ve=oe.get(de),qe=y.state.lights,dt=y.state.shadowsArray,At=qe.state.version,kt=ge.getParameters(de,qe.state,dt,Ie,je),ct=ge.getProgramCacheKey(kt);let Ot=Ve.programs;Ve.environment=de.isMeshStandardMaterial?Ie.environment:null,Ve.fog=Ie.fog,Ve.envMap=(de.isMeshStandardMaterial?ce:W).get(de.envMap||Ve.environment),Ot===void 0&&(de.addEventListener("dispose",H),Ot=new Map,Ve.programs=Ot);let Ut=Ot.get(ct);if(Ut!==void 0){if(Ve.currentProgram===Ut&&Ve.lightsStateVersion===At)return Zr(de,kt),Ut}else kt.uniforms=ge.getUniforms(de),de.onBuild(je,kt,b),de.onBeforeCompile(kt,b),Ut=ge.acquireProgram(kt,ct),Ot.set(ct,Ut),Ve.uniforms=kt.uniforms;const Rt=Ve.uniforms;return(!de.isShaderMaterial&&!de.isRawShaderMaterial||de.clipping===!0)&&(Rt.clippingPlanes=We.uniform),Zr(de,kt),Ve.needsLights=xi(de),Ve.lightsStateVersion=At,Ve.needsLights&&(Rt.ambientLightColor.value=qe.state.ambient,Rt.lightProbe.value=qe.state.probe,Rt.directionalLights.value=qe.state.directional,Rt.directionalLightShadows.value=qe.state.directionalShadow,Rt.spotLights.value=qe.state.spot,Rt.spotLightShadows.value=qe.state.spotShadow,Rt.rectAreaLights.value=qe.state.rectArea,Rt.ltc_1.value=qe.state.rectAreaLTC1,Rt.ltc_2.value=qe.state.rectAreaLTC2,Rt.pointLights.value=qe.state.point,Rt.pointLightShadows.value=qe.state.pointShadow,Rt.hemisphereLights.value=qe.state.hemi,Rt.directionalShadowMap.value=qe.state.directionalShadowMap,Rt.directionalShadowMatrix.value=qe.state.directionalShadowMatrix,Rt.spotShadowMap.value=qe.state.spotShadowMap,Rt.spotLightMatrix.value=qe.state.spotLightMatrix,Rt.spotLightMap.value=qe.state.spotLightMap,Rt.pointShadowMap.value=qe.state.pointShadowMap,Rt.pointShadowMatrix.value=qe.state.pointShadowMatrix),Ve.currentProgram=Ut,Ve.uniformsList=null,Ut}function En(de){if(de.uniformsList===null){const Ie=de.currentProgram.getUniforms();de.uniformsList=lw.seqWithValue(Ie.seq,de.uniforms)}return de.uniformsList}function Zr(de,Ie){const je=oe.get(de);je.outputColorSpace=Ie.outputColorSpace,je.batching=Ie.batching,je.instancing=Ie.instancing,je.instancingColor=Ie.instancingColor,je.skinning=Ie.skinning,je.morphTargets=Ie.morphTargets,je.morphNormals=Ie.morphNormals,je.morphColors=Ie.morphColors,je.morphTargetsCount=Ie.morphTargetsCount,je.numClippingPlanes=Ie.numClippingPlanes,je.numIntersection=Ie.numClipIntersection,je.vertexAlphas=Ie.vertexAlphas,je.vertexTangents=Ie.vertexTangents,je.toneMapping=Ie.toneMapping}function Bs(de,Ie,je,Ve,qe){Ie.isScene!==!0&&(Ie=Te),G.resetTextureUnits();const dt=Ie.fog,At=Ve.isMeshStandardMaterial?Ie.environment:null,kt=E===null?b.outputColorSpace:E.isXRRenderTarget===!0?E.texture.colorSpace:_l,ct=(Ve.isMeshStandardMaterial?ce:W).get(Ve.envMap||At),Ot=Ve.vertexColors===!0&&!!je.attributes.color&&je.attributes.color.itemSize===4,Ut=!!je.attributes.tangent&&(!!Ve.normalMap||Ve.anisotropy>0),Rt=!!je.morphAttributes.position,Kr=!!je.morphAttributes.normal,qr=!!je.morphAttributes.color;let Pn=ml;Ve.toneMapped&&(E===null||E.isXRRenderTarget===!0)&&(Pn=b.toneMapping);const vr=je.morphAttributes.position||je.morphAttributes.normal||je.morphAttributes.color,Xt=vr!==void 0?vr.length:0,Jt=oe.get(Ve),Hn=y.state.lights;if(ne===!0&&(fe===!0||de!==T)){const la=de===T&&Ve.id===A;We.setState(Ve,de,la)}let ci=!1;Ve.version===Jt.__version?(Jt.needsLights&&Jt.lightsStateVersion!==Hn.state.version||Jt.outputColorSpace!==kt||qe.isBatchedMesh&&Jt.batching===!1||!qe.isBatchedMesh&&Jt.batching===!0||qe.isInstancedMesh&&Jt.instancing===!1||!qe.isInstancedMesh&&Jt.instancing===!0||qe.isSkinnedMesh&&Jt.skinning===!1||!qe.isSkinnedMesh&&Jt.skinning===!0||qe.isInstancedMesh&&Jt.instancingColor===!0&&qe.instanceColor===null||qe.isInstancedMesh&&Jt.instancingColor===!1&&qe.instanceColor!==null||Jt.envMap!==ct||Ve.fog===!0&&Jt.fog!==dt||Jt.numClippingPlanes!==void 0&&(Jt.numClippingPlanes!==We.numPlanes||Jt.numIntersection!==We.numIntersection)||Jt.vertexAlphas!==Ot||Jt.vertexTangents!==Ut||Jt.morphTargets!==Rt||Jt.morphNormals!==Kr||Jt.morphColors!==qr||Jt.toneMapping!==Pn||K.isWebGL2===!0&&Jt.morphTargetsCount!==Xt)&&(ci=!0):(ci=!0,Jt.__version=Ve.version);let sa=Jt.currentProgram;ci===!0&&(sa=Rn(Ve,Ie,qe));let Ol=!1,Vn=!1,Lu=!1;const Zn=sa.getUniforms(),zs=Jt.uniforms;if(ie.useProgram(sa.program)&&(Ol=!0,Vn=!0,Lu=!0),Ve.id!==A&&(A=Ve.id,Vn=!0),Ol||T!==de){Zn.setValue(re,"projectionMatrix",de.projectionMatrix),Zn.setValue(re,"viewMatrix",de.matrixWorldInverse);const la=Zn.map.cameraPosition;la!==void 0&&la.setValue(re,pe.setFromMatrixPosition(de.matrixWorld)),K.logarithmicDepthBuffer&&Zn.setValue(re,"logDepthBufFC",2/(Math.log(de.far+1)/Math.LN2)),(Ve.isMeshPhongMaterial||Ve.isMeshToonMaterial||Ve.isMeshLambertMaterial||Ve.isMeshBasicMaterial||Ve.isMeshStandardMaterial||Ve.isShaderMaterial)&&Zn.setValue(re,"isOrthographic",de.isOrthographicCamera===!0),T!==de&&(T=de,Vn=!0,Lu=!0)}if(qe.isSkinnedMesh){Zn.setOptional(re,qe,"bindMatrix"),Zn.setOptional(re,qe,"bindMatrixInverse");const la=qe.skeleton;la&&(K.floatVertexTextures?(la.boneTexture===null&&la.computeBoneTexture(),Zn.setValue(re,"boneTexture",la.boneTexture,G)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}qe.isBatchedMesh&&(Zn.setOptional(re,qe,"batchingTexture"),Zn.setValue(re,"batchingTexture",qe._matricesTexture,G));const Fu=je.morphAttributes;if((Fu.position!==void 0||Fu.normal!==void 0||Fu.color!==void 0&&K.isWebGL2===!0)&&Je.update(qe,je,sa),(Vn||Jt.receiveShadow!==qe.receiveShadow)&&(Jt.receiveShadow=qe.receiveShadow,Zn.setValue(re,"receiveShadow",qe.receiveShadow)),Ve.isMeshGouraudMaterial&&Ve.envMap!==null&&(zs.envMap.value=ct,zs.flipEnvMap.value=ct.isCubeTexture&&ct.isRenderTargetTexture===!1?-1:1),Vn&&(Zn.setValue(re,"toneMappingExposure",b.toneMappingExposure),Jt.needsLights&&Iu(zs,Lu),dt&&Ve.fog===!0&&xe.refreshFogUniforms(zs,dt),xe.refreshMaterialUniforms(zs,Ve,R,k,se),lw.upload(re,En(Jt),zs,G)),Ve.isShaderMaterial&&Ve.uniformsNeedUpdate===!0&&(lw.upload(re,En(Jt),zs,G),Ve.uniformsNeedUpdate=!1),Ve.isSpriteMaterial&&Zn.setValue(re,"center",qe.center),Zn.setValue(re,"modelViewMatrix",qe.modelViewMatrix),Zn.setValue(re,"normalMatrix",qe.normalMatrix),Zn.setValue(re,"modelMatrix",qe.matrixWorld),Ve.isShaderMaterial||Ve.isRawShaderMaterial){const la=Ve.uniformsGroups;for(let ua=0,e_=la.length;ua<e_;ua++)if(K.isWebGL2){const ky=la[ua];V.update(ky,sa),V.bind(ky,sa)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return sa}function Iu(de,Ie){de.ambientLightColor.needsUpdate=Ie,de.lightProbe.needsUpdate=Ie,de.directionalLights.needsUpdate=Ie,de.directionalLightShadows.needsUpdate=Ie,de.pointLights.needsUpdate=Ie,de.pointLightShadows.needsUpdate=Ie,de.spotLights.needsUpdate=Ie,de.spotLightShadows.needsUpdate=Ie,de.rectAreaLights.needsUpdate=Ie,de.hemisphereLights.needsUpdate=Ie}function xi(de){return de.isMeshLambertMaterial||de.isMeshToonMaterial||de.isMeshPhongMaterial||de.isMeshStandardMaterial||de.isShadowMaterial||de.isShaderMaterial&&de.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(de,Ie,je){oe.get(de.texture).__webglTexture=Ie,oe.get(de.depthTexture).__webglTexture=je;const Ve=oe.get(de);Ve.__hasExternalTextures=!0,Ve.__hasExternalTextures&&(Ve.__autoAllocateDepthBuffer=je===void 0,Ve.__autoAllocateDepthBuffer||ze.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ve.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(de,Ie){const je=oe.get(de);je.__webglFramebuffer=Ie,je.__useDefaultFramebuffer=Ie===void 0},this.setRenderTarget=function(de,Ie=0,je=0){E=de,x=Ie,S=je;let Ve=!0,qe=null,dt=!1,At=!1;if(de){const kt=oe.get(de);kt.__useDefaultFramebuffer!==void 0?(ie.bindFramebuffer(re.FRAMEBUFFER,null),Ve=!1):kt.__webglFramebuffer===void 0?G.setupRenderTarget(de):kt.__hasExternalTextures&&G.rebindTextures(de,oe.get(de.texture).__webglTexture,oe.get(de.depthTexture).__webglTexture);const ct=de.texture;(ct.isData3DTexture||ct.isDataArrayTexture||ct.isCompressedArrayTexture)&&(At=!0);const Ot=oe.get(de).__webglFramebuffer;de.isWebGLCubeRenderTarget?(Array.isArray(Ot[Ie])?qe=Ot[Ie][je]:qe=Ot[Ie],dt=!0):K.isWebGL2&&de.samples>0&&G.useMultisampledRTT(de)===!1?qe=oe.get(de).__webglMultisampledFramebuffer:Array.isArray(Ot)?qe=Ot[je]:qe=Ot,C.copy(de.viewport),D.copy(de.scissor),O=de.scissorTest}else C.copy(X).multiplyScalar(R).floor(),D.copy(Z).multiplyScalar(R).floor(),O=Q;if(ie.bindFramebuffer(re.FRAMEBUFFER,qe)&&K.drawBuffers&&Ve&&ie.drawBuffers(de,qe),ie.viewport(C),ie.scissor(D),ie.setScissorTest(O),dt){const kt=oe.get(de.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,kt.__webglTexture,je)}else if(At){const kt=oe.get(de.texture),ct=Ie||0;re.framebufferTextureLayer(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,kt.__webglTexture,je||0,ct)}A=-1},this.readRenderTargetPixels=function(de,Ie,je,Ve,qe,dt,At){if(!(de&&de.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let kt=oe.get(de).__webglFramebuffer;if(de.isWebGLCubeRenderTarget&&At!==void 0&&(kt=kt[At]),kt){ie.bindFramebuffer(re.FRAMEBUFFER,kt);try{const ct=de.texture,Ot=ct.format,Ut=ct.type;if(Ot!==ya&&Pe.convert(Ot)!==re.getParameter(re.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Rt=Ut===Md&&(ze.has("EXT_color_buffer_half_float")||K.isWebGL2&&ze.has("EXT_color_buffer_float"));if(Ut!==gl&&Pe.convert(Ut)!==re.getParameter(re.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ut===po&&(K.isWebGL2||ze.has("OES_texture_float")||ze.has("WEBGL_color_buffer_float")))&&!Rt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ie>=0&&Ie<=de.width-Ve&&je>=0&&je<=de.height-qe&&re.readPixels(Ie,je,Ve,qe,Pe.convert(Ot),Pe.convert(Ut),dt)}finally{const ct=E!==null?oe.get(E).__webglFramebuffer:null;ie.bindFramebuffer(re.FRAMEBUFFER,ct)}}},this.copyFramebufferToTexture=function(de,Ie,je=0){const Ve=Math.pow(2,-je),qe=Math.floor(Ie.image.width*Ve),dt=Math.floor(Ie.image.height*Ve);G.setTexture2D(Ie,0),re.copyTexSubImage2D(re.TEXTURE_2D,je,0,0,de.x,de.y,qe,dt),ie.unbindTexture()},this.copyTextureToTexture=function(de,Ie,je,Ve=0){const qe=Ie.image.width,dt=Ie.image.height,At=Pe.convert(je.format),kt=Pe.convert(je.type);G.setTexture2D(je,0),re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,je.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,je.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,je.unpackAlignment),Ie.isDataTexture?re.texSubImage2D(re.TEXTURE_2D,Ve,de.x,de.y,qe,dt,At,kt,Ie.image.data):Ie.isCompressedTexture?re.compressedTexSubImage2D(re.TEXTURE_2D,Ve,de.x,de.y,Ie.mipmaps[0].width,Ie.mipmaps[0].height,At,Ie.mipmaps[0].data):re.texSubImage2D(re.TEXTURE_2D,Ve,de.x,de.y,At,kt,Ie.image),Ve===0&&je.generateMipmaps&&re.generateMipmap(re.TEXTURE_2D),ie.unbindTexture()},this.copyTextureToTexture3D=function(de,Ie,je,Ve,qe=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const dt=de.max.x-de.min.x+1,At=de.max.y-de.min.y+1,kt=de.max.z-de.min.z+1,ct=Pe.convert(Ve.format),Ot=Pe.convert(Ve.type);let Ut;if(Ve.isData3DTexture)G.setTexture3D(Ve,0),Ut=re.TEXTURE_3D;else if(Ve.isDataArrayTexture||Ve.isCompressedArrayTexture)G.setTexture2DArray(Ve,0),Ut=re.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,Ve.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ve.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,Ve.unpackAlignment);const Rt=re.getParameter(re.UNPACK_ROW_LENGTH),Kr=re.getParameter(re.UNPACK_IMAGE_HEIGHT),qr=re.getParameter(re.UNPACK_SKIP_PIXELS),Pn=re.getParameter(re.UNPACK_SKIP_ROWS),vr=re.getParameter(re.UNPACK_SKIP_IMAGES),Xt=je.isCompressedTexture?je.mipmaps[qe]:je.image;re.pixelStorei(re.UNPACK_ROW_LENGTH,Xt.width),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,Xt.height),re.pixelStorei(re.UNPACK_SKIP_PIXELS,de.min.x),re.pixelStorei(re.UNPACK_SKIP_ROWS,de.min.y),re.pixelStorei(re.UNPACK_SKIP_IMAGES,de.min.z),je.isDataTexture||je.isData3DTexture?re.texSubImage3D(Ut,qe,Ie.x,Ie.y,Ie.z,dt,At,kt,ct,Ot,Xt.data):je.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),re.compressedTexSubImage3D(Ut,qe,Ie.x,Ie.y,Ie.z,dt,At,kt,ct,Xt.data)):re.texSubImage3D(Ut,qe,Ie.x,Ie.y,Ie.z,dt,At,kt,ct,Ot,Xt),re.pixelStorei(re.UNPACK_ROW_LENGTH,Rt),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,Kr),re.pixelStorei(re.UNPACK_SKIP_PIXELS,qr),re.pixelStorei(re.UNPACK_SKIP_ROWS,Pn),re.pixelStorei(re.UNPACK_SKIP_IMAGES,vr),qe===0&&Ve.generateMipmaps&&re.generateMipmap(Ut),ie.unbindTexture()},this.initTexture=function(de){de.isCubeTexture?G.setTextureCube(de,0):de.isData3DTexture?G.setTexture3D(de,0):de.isDataArrayTexture||de.isCompressedArrayTexture?G.setTexture2DArray(de,0):G.setTexture2D(de,0),ie.unbindTexture()},this.resetState=function(){x=0,S=0,E=null,ie.reset(),et.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ll}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===g2?"display-p3":"srgb",t.unpackColorSpace=Ir.workingColorSpace===dy?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ri?Ic:mO}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ic?ri:_l}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class ZY extends EO{}ZY.prototype.isWebGL1Renderer=!0;class x2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new wt(e),this.density=t}clone(){return new x2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class w2{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new wt(e),this.near=t,this.far=n}clone(){return new w2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class bv extends Mr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class S2{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=gv,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=So()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return ud("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=So()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=So()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fa=new me;class Ed{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)fa.fromBufferAttribute(this,t),fa.applyMatrix4(e),this.setXYZ(t,fa.x,fa.y,fa.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)fa.fromBufferAttribute(this,t),fa.applyNormalMatrix(e),this.setXYZ(t,fa.x,fa.y,fa.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)fa.fromBufferAttribute(this,t),fa.transformDirection(e),this.setXYZ(t,fa.x,fa.y,fa.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=ba(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=sr(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=sr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=sr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=sr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=sr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ba(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ba(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ba(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ba(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=sr(t,this.array),n=sr(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=sr(t,this.array),n=sr(n,this.array),i=sr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=sr(t,this.array),n=sr(n,this.array),i=sr(i,this.array),a=sr(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new jr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ed(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class CO extends Li{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new wt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Df;const Cg=new me,kf=new me,Nf=new me,Of=new Qe,Ag=new Qe,KY=new Yt,Bb=new me,Tg=new me,zb=new me,P8=new Qe,OC=new Qe,I8=new Qe;class QY extends Mr{constructor(e=new CO){if(super(),this.isSprite=!0,this.type="Sprite",Df===void 0){Df=new or;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new S2(t,5);Df.setIndex([0,1,2,0,2,3]),Df.setAttribute("position",new Ed(n,3,0,!1)),Df.setAttribute("uv",new Ed(n,2,3,!1))}this.geometry=Df,this.material=e,this.center=new Qe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),kf.setFromMatrixScale(this.matrixWorld),KY.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Nf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&kf.multiplyScalar(-Nf.z);const n=this.material.rotation;let i,a;n!==0&&(a=Math.cos(n),i=Math.sin(n));const o=this.center;Ub(Bb.set(-.5,-.5,0),Nf,o,kf,i,a),Ub(Tg.set(.5,-.5,0),Nf,o,kf,i,a),Ub(zb.set(.5,.5,0),Nf,o,kf,i,a),P8.set(0,0),OC.set(1,0),I8.set(1,1);let s=e.ray.intersectTriangle(Bb,Tg,zb,!1,Cg);if(s===null&&(Ub(Tg.set(-.5,.5,0),Nf,o,kf,i,a),OC.set(0,1),s=e.ray.intersectTriangle(Bb,zb,Tg,!1,Cg),s===null))return;const l=e.ray.origin.distanceTo(Cg);l<e.near||l>e.far||t.push({distance:l,point:Cg.clone(),uv:go.getInterpolation(Cg,Bb,Tg,zb,P8,OC,I8,new Qe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Ub(r,e,t,n,i,a){Of.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(Ag.x=a*Of.x-i*Of.y,Ag.y=i*Of.x+a*Of.y):Ag.copy(Of),r.copy(e),r.x+=Ag.x,r.y+=Ag.y,r.applyMatrix4(KY)}const jb=new me,L8=new me;class eJ extends Mr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const a=t[n];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let a;for(a=0;a<i.length&&!(t<i[a].distance);a++);return i.splice(a,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),e<a)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){jb.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(jb);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){jb.setFromMatrixPosition(e.matrixWorld),L8.setFromMatrixPosition(this.matrixWorld);const n=jb.distanceTo(L8)/e.zoom;t[0].object.visible=!0;let i,a;for(i=1,a=t.length;i<a;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),n>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,a=n.length;i<a;i++){const o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const F8=new me,B8=new Fr,z8=new Fr,Bze=new me,U8=new Yt,Hb=new me,RC=new ea,j8=new Yt,PC=new Ud;class tJ extends Yn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=_D,this.bindMatrix=new Yt,this.bindMatrixInverse=new Yt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ea),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Hb),this.boundingBox.expandByPoint(Hb)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ea),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Hb),this.boundingSphere.expandByPoint(Hb)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),RC.copy(this.boundingSphere),RC.applyMatrix4(i),e.ray.intersectsSphere(RC)!==!1&&(j8.copy(i).invert(),PC.copy(e.ray).applyMatrix4(j8),!(this.boundingBox!==null&&PC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,PC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Fr,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===_D?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===fY?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;B8.fromBufferAttribute(i.attributes.skinIndex,e),z8.fromBufferAttribute(i.attributes.skinWeight,e),F8.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const o=z8.getComponent(a);if(o!==0){const s=B8.getComponent(a);U8.multiplyMatrices(n.bones[s].matrixWorld,n.boneInverses[s]),t.addScaledVector(Bze.copy(F8).applyMatrix4(U8),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class AO extends Mr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class hd extends Sn{constructor(e=null,t=1,n=1,i,a,o,s,l,u=zn,c=zn,h,d){super(null,o,s,l,u,c,i,a,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const H8=new Yt,zze=new Yt;class M2{constructor(e=[],t=[]){this.uuid=So(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Yt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Yt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let a=0,o=e.length;a<o;a++){const s=e[a]?e[a].matrixWorld:zze;H8.multiplyMatrices(s,t[a]),H8.toArray(n,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new M2(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new hd(t,e,e,ya,po);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const a=e.bones[n];let o=t[a];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),o=new AO),this.bones.push(o),this.boneInverses.push(new Yt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,a=t.length;i<a;i++){const o=t[i];e.bones.push(o.uuid);const s=n[i];e.boneInverses.push(s.toArray())}return e}}class tm extends jr{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Rf=new Yt,V8=new Yt,Vb=[],q8=new Ea,Uze=new Yt,Dg=new Yn,kg=new ea;class rJ extends Yn{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new tm(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Uze)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ea),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Rf),q8.copy(e.boundingBox).applyMatrix4(Rf),this.boundingBox.union(q8)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ea),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Rf),kg.copy(e.boundingSphere).applyMatrix4(Rf),this.boundingSphere.union(kg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Dg.geometry=this.geometry,Dg.material=this.material,Dg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),kg.copy(this.boundingSphere),kg.applyMatrix4(n),e.ray.intersectsSphere(kg)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,Rf),V8.multiplyMatrices(n,Rf),Dg.matrixWorld=V8,Dg.raycast(e,Vb);for(let o=0,s=Vb.length;o<s;o++){const l=Vb[o];l.instanceId=a,l.object=this,t.push(l)}Vb.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new tm(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function jze(r,e){return r.z-e.z}function Hze(r,e){return e.z-r.z}class Vze{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const n=this.pool,i=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});const a=n[this.index];i.push(a),this.index++,a.start=e.start,a.count=e.count,a.z=t}reset(){this.list.length=0,this.index=0}}const Pf="batchId",Qu=new Yt,W8=new Yt,qze=new Yt,G8=new Yt,IC=new gy,qb=new Ea,Eh=new ea,Ng=new me,LC=new Vze,Gi=new Yn,Wb=[];function Wze(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let a=0;a<i;a++)for(let o=0;o<n;o++)e.setComponent(a+t,o,r.getComponent(a,o))}else e.array.set(r.array,t*n);e.needsUpdate=!0}class nJ extends Yn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,n=t*2,i){super(new or,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new hd(t,e,e,ya,po);this._matricesTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxGeometryCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const l=e.getAttribute(s),{array:u,itemSize:c,normalized:h}=l,d=new u.constructor(n*c),f=new l.constructor(d,c,h);f.setUsage(l.usage),t.setAttribute(s,f)}if(e.getIndex()!==null){const s=n>65536?new Uint32Array(a):new Uint16Array(a);t.setIndex(new jr(s,1))}const o=i>65536?new Uint32Array(n):new Uint16Array(n);t.setAttribute(Pf,new jr(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Pf))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Pf}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(n===Pf)continue;if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),a=t.getAttribute(n);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ea);const e=this._geometryCount,t=this.boundingBox,n=this._active;t.makeEmpty();for(let i=0;i<e;i++)n[i]!==!1&&(this.getMatrixAt(i,Qu),this.getBoundingBoxAt(i,qb).applyMatrix4(Qu),t.union(qb))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ea);const e=this._geometryCount,t=this.boundingSphere,n=this._active;t.makeEmpty();for(let i=0;i<e;i++)n[i]!==!1&&(this.getMatrixAt(i,Qu),this.getBoundingSphereAt(i,Eh).applyMatrix4(Qu),t.union(Eh))}addGeometry(e,t=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let a=null;const o=this._reservedRanges,s=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(a=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,a===null?i.vertexStart=0:i.vertexStart=a.vertexStart+a.vertexCount;const u=e.getIndex(),c=u!==null;if(c&&(n===-1?i.indexCount=u.count:i.indexCount=n,a===null?i.indexStart=0:i.indexStart=a.indexStart+a.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const h=this._visibility,d=this._active,f=this._matricesTexture,p=this._matricesTexture.image.data;h.push(!0),d.push(!0);const v=this._geometryCount;this._geometryCount++,qze.toArray(p,v*16),f.needsUpdate=!0,o.push(i),s.push({start:c?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Ea,sphereInitialized:!1,sphere:new ea});const y=this.geometry.getAttribute(Pf);for(let g=0;g<i.vertexCount;g++)y.setX(i.vertexStart+g,v);return y.needsUpdate=!0,this.setGeometryAt(v,e),v}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,a=n.getIndex(),o=t.getIndex(),s=this._reservedRanges[e];if(i&&o.count>s.indexCount||t.attributes.position.count>s.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=s.vertexStart,u=s.vertexCount;for(const f in n.attributes){if(f===Pf)continue;const p=t.getAttribute(f),v=n.getAttribute(f);Wze(p,v,l);const y=p.itemSize;for(let g=p.count,w=u;g<w;g++){const b=l+g;for(let m=0;m<y;m++)v.setComponent(b,m,0)}v.needsUpdate=!0}if(i){const f=s.indexStart;for(let p=0;p<o.count;p++)a.setX(f+p,l+o.getX(p));for(let p=o.count,v=s.indexCount;p<v;p++)a.setX(f+p,l);a.needsUpdate=!0}const c=this._bounds[e];t.boundingBox!==null?(c.box.copy(t.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,t.boundingSphere!==null?(c.sphere.copy(t.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const h=this._drawRanges[e],d=t.getAttribute("position");return h.count=i?o.count:d.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const n=this._bounds[e],i=n.box,a=this.geometry;if(n.boxInitialized===!1){i.makeEmpty();const o=a.index,s=a.attributes.position,l=this._drawRanges[e];for(let u=l.start,c=l.start+l.count;u<c;u++){let h=u;o&&(h=o.getX(h)),i.expandByPoint(Ng.fromBufferAttribute(s,h))}n.boxInitialized=!0}return t.copy(i),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const n=this._bounds[e],i=n.sphere,a=this.geometry;if(n.sphereInitialized===!1){i.makeEmpty(),this.getBoundingBoxAt(e,qb),qb.getCenter(i.center);const o=a.index,s=a.attributes.position,l=this._drawRanges[e];let u=0;for(let c=l.start,h=l.start+l.count;c<h;c++){let d=c;o&&(d=o.getX(d)),Ng.fromBufferAttribute(s,d),u=Math.max(u,i.center.distanceToSquared(Ng))}i.radius=Math.sqrt(u),n.sphereInitialized=!0}return t.copy(i),t}setMatrixAt(e,t){const n=this._active,i=this._matricesTexture,a=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||n[e]===!1?this:(t.toArray(a,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const n=this._active,i=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||n[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const n=this._visibility,i=this._active,a=this._geometryCount;return e>=a||i[e]===!1||n[e]===t?this:(n[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,n=this._active,i=this._geometryCount;return e>=i||n[e]===!1?!1:t[e]}raycast(e,t){const n=this._visibility,i=this._active,a=this._drawRanges,o=this._geometryCount,s=this.matrixWorld,l=this.geometry;Gi.material=this.material,Gi.geometry.index=l.index,Gi.geometry.attributes=l.attributes,Gi.geometry.boundingBox===null&&(Gi.geometry.boundingBox=new Ea),Gi.geometry.boundingSphere===null&&(Gi.geometry.boundingSphere=new ea);for(let u=0;u<o;u++){if(!n[u]||!i[u])continue;const c=a[u];Gi.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(u,Gi.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Gi.geometry.boundingBox),this.getBoundingSphereAt(u,Gi.geometry.boundingSphere),Gi.raycast(e,Wb);for(let h=0,d=Wb.length;h<d;h++){const f=Wb[h];f.object=this,f.batchId=u,t.push(f)}Wb.length=0}Gi.material=null,Gi.geometry.index=null,Gi.geometry.attributes={},Gi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,n,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),s=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,u=this._visibility,c=this._multiDrawStarts,h=this._multiDrawCounts,d=this._drawRanges,f=this.perObjectFrustumCulled;f&&(G8.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),IC.setFromProjectionMatrix(G8,e.coordinateSystem));let p=0;if(this.sortObjects){W8.copy(this.matrixWorld).invert(),Ng.setFromMatrixPosition(n.matrixWorld).applyMatrix4(W8);for(let g=0,w=u.length;g<w;g++)if(u[g]&&l[g]){this.getMatrixAt(g,Qu),this.getBoundingSphereAt(g,Eh).applyMatrix4(Qu);let b=!1;if(f&&(b=!IC.intersectsSphere(Eh)),!b){const m=Ng.distanceTo(Eh.center);LC.push(d[g],m)}}const v=LC.list,y=this.customSort;y===null?v.sort(a.transparent?Hze:jze):y.call(this,v,n);for(let g=0,w=v.length;g<w;g++){const b=v[g];c[p]=b.start*s,h[p]=b.count,p++}LC.reset()}else for(let v=0,y=u.length;v<y;v++)if(u[v]&&l[v]){let g=!1;if(f&&(this.getMatrixAt(v,Qu),this.getBoundingSphereAt(v,Eh).applyMatrix4(Qu),g=!IC.intersectsSphere(Eh)),!g){const w=d[v];c[p]=w.start*s,h[p]=w.count,p++}}this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,a,o){this.onBeforeRender(e,null,i,a,o)}}class Pa extends Li{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new wt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const $8=new me,X8=new me,Y8=new Yt,FC=new Ud,Gb=new ea;let $c=class extends Mr{constructor(r=new or,e=new Pa){super(),this.isLine=!0,this.type="Line",this.geometry=r,this.material=e,this.updateMorphTargets()}copy(r,e){return super.copy(r,e),this.material=Array.isArray(r.material)?r.material.slice():r.material,this.geometry=r.geometry,this}computeLineDistances(){const r=this.geometry;if(r.index===null){const e=r.attributes.position,t=[0];for(let n=1,i=e.count;n<i;n++)$8.fromBufferAttribute(e,n-1),X8.fromBufferAttribute(e,n),t[n]=t[n-1],t[n]+=$8.distanceTo(X8);r.setAttribute("lineDistance",new Tt(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(r,e){const t=this.geometry,n=this.matrixWorld,i=r.params.Line.threshold,a=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),Gb.copy(t.boundingSphere),Gb.applyMatrix4(n),Gb.radius+=i,r.ray.intersectsSphere(Gb)===!1)return;Y8.copy(n).invert(),FC.copy(r.ray).applyMatrix4(Y8);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new me,u=new me,c=new me,h=new me,d=this.isLineSegments?2:1,f=t.index,p=t.attributes.position;if(f!==null){const v=Math.max(0,a.start),y=Math.min(f.count,a.start+a.count);for(let g=v,w=y-1;g<w;g+=d){const b=f.getX(g),m=f.getX(g+1);if(l.fromBufferAttribute(p,b),u.fromBufferAttribute(p,m),FC.distanceSqToSegment(l,u,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const x=r.ray.origin.distanceTo(h);x<r.near||x>r.far||e.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,a.start),y=Math.min(p.count,a.start+a.count);for(let g=v,w=y-1;g<w;g+=d){if(l.fromBufferAttribute(p,g),u.fromBufferAttribute(p,g+1),FC.distanceSqToSegment(l,u,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const b=r.ray.origin.distanceTo(h);b<r.near||b>r.far||e.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const r=this.geometry.morphAttributes,e=Object.keys(r);if(e.length>0){const t=r[e[0]];if(t!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++){const a=t[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=n}}}}};const J8=new me,Z8=new me;class Tl extends $c{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,a=t.count;i<a;i+=2)J8.fromBufferAttribute(t,i),Z8.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+J8.distanceTo(Z8);e.setAttribute("lineDistance",new Tt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class iJ extends $c{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class TO extends Li{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new wt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const K8=new Yt,t3=new Ud,$b=new ea,Xb=new me;class aJ extends Mr{constructor(e=new or,t=new TO){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),$b.copy(n.boundingSphere),$b.applyMatrix4(i),$b.radius+=a,e.ray.intersectsSphere($b)===!1)return;K8.copy(i).invert(),t3.copy(e.ray).applyMatrix4(K8);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,u=n.index,c=n.attributes.position;if(u!==null){const h=Math.max(0,o.start),d=Math.min(u.count,o.start+o.count);for(let f=h,p=d;f<p;f++){const v=u.getX(f);Xb.fromBufferAttribute(c,v),Q8(Xb,v,l,i,e,t,this)}}else{const h=Math.max(0,o.start),d=Math.min(c.count,o.start+o.count);for(let f=h,p=d;f<p;f++)Xb.fromBufferAttribute(c,f),Q8(Xb,f,l,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,a=n.length;i<a;i++){const o=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}}function Q8(r,e,t,n,i,a,o){const s=t3.distanceSqToPoint(r);if(s<t){const l=new me;t3.closestPointToPoint(r,l),l.applyMatrix4(n);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:o})}}class Gze extends Sn{constructor(e,t,n,i,a,o,s,l,u){super(e,t,n,i,a,o,s,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:sn,this.magFilter=a!==void 0?a:sn,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class $ze extends Sn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=zn,this.minFilter=zn,this.generateMipmaps=!1,this.needsUpdate=!0}}class _2 extends Sn{constructor(e,t,n,i,a,o,s,l,u,c,h,d){super(null,o,s,l,u,c,i,a,h,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Xze extends _2{constructor(e,t,n,i,a,o){super(e,t,n,a,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Ji}}class Yze extends _2{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,_u),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class oJ extends Sn{constructor(e,t,n,i,a,o,s,l,u){super(e,t,n,i,a,o,s,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Is{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),a=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),a+=n.distanceTo(i),t.push(a),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const a=n.length;let o;t?o=t:o=e*n[a-1];let s=0,l=a-1,u;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),u=n[i]-o,u<0)s=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,n[i]===o)return i/(a-1);const c=n[i],h=n[i+1]-c,d=(o-c)/h;return(i+d)/(a-1)}getTangent(e,t){let n=e-1e-4,i=e+1e-4;n<0&&(n=0),i>1&&(i=1);const a=this.getPoint(n),o=this.getPoint(i),s=t||(a.isVector2?new Qe:new me);return s.copy(o).sub(a).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new me,i=[],a=[],o=[],s=new me,l=new Yt;for(let f=0;f<=e;f++){const p=f/e;i[f]=this.getTangentAt(p,new me)}a[0]=new me,o[0]=new me;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=u&&(u=c,n.set(1,0,0)),h<=u&&(u=h,n.set(0,1,0)),d<=u&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),a[0].crossVectors(i[0],s),o[0].crossVectors(i[0],a[0]);for(let f=1;f<=e;f++){if(a[f]=a[f-1].clone(),o[f]=o[f-1].clone(),s.crossVectors(i[f-1],i[f]),s.length()>Number.EPSILON){s.normalize();const p=Math.acos(kn(i[f-1].dot(i[f]),-1,1));a[f].applyMatrix4(l.makeRotationAxis(s,p))}o[f].crossVectors(i[f],a[f])}if(t===!0){let f=Math.acos(kn(a[0].dot(a[e]),-1,1));f/=e,i[0].dot(s.crossVectors(a[0],a[e]))>0&&(f=-f);for(let p=1;p<=e;p++)a[p].applyMatrix4(l.makeRotationAxis(i[p],f*p)),o[p].crossVectors(i[p],a[p])}return{tangents:i,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class E2 extends Is{constructor(e=0,t=0,n=1,i=1,a=0,o=Math.PI*2,s=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=s,this.aRotation=l}getPoint(e,t){const n=t||new Qe,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const o=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(o?a=0:a=i),this.aClockwise===!0&&!o&&(a===i?a=-i:a=a-i);const s=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(s),u=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,f=u-this.aY;l=d*c-f*h+this.aX,u=d*h+f*c+this.aY}return n.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class sJ extends E2{constructor(e,t,n,i,a,o){super(e,t,n,n,i,a,o),this.isArcCurve=!0,this.type="ArcCurve"}}function DO(){let r=0,e=0,t=0,n=0;function i(a,o,s,l){r=a,e=s,t=-3*a+3*o-2*s-l,n=2*a-2*o+s+l}return{initCatmullRom:function(a,o,s,l,u){i(o,s,u*(s-a),u*(l-o))},initNonuniformCatmullRom:function(a,o,s,l,u,c,h){let d=(o-a)/u-(s-a)/(u+c)+(s-o)/c,f=(s-o)/c-(l-o)/(c+h)+(l-s)/h;d*=c,f*=c,i(o,s,d,f)},calc:function(a){const o=a*a,s=o*a;return r+e*a+t*o+n*s}}}const Yb=new me,BC=new DO,zC=new DO,UC=new DO;class lJ extends Is{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new me){const n=t,i=this.points,a=i.length,o=(a-(this.closed?0:1))*e;let s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:l===0&&s===a-1&&(s=a-2,l=1);let u,c;this.closed||s>0?u=i[(s-1)%a]:(Yb.subVectors(i[0],i[1]).add(i[0]),u=Yb);const h=i[s%a],d=i[(s+1)%a];if(this.closed||s+2<a?c=i[(s+2)%a]:(Yb.subVectors(i[a-1],i[a-2]).add(i[a-1]),c=Yb),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(u.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(d),f),y=Math.pow(d.distanceToSquared(c),f);v<1e-4&&(v=1),p<1e-4&&(p=v),y<1e-4&&(y=v),BC.initNonuniformCatmullRom(u.x,h.x,d.x,c.x,p,v,y),zC.initNonuniformCatmullRom(u.y,h.y,d.y,c.y,p,v,y),UC.initNonuniformCatmullRom(u.z,h.z,d.z,c.z,p,v,y)}else this.curveType==="catmullrom"&&(BC.initCatmullRom(u.x,h.x,d.x,c.x,this.tension),zC.initCatmullRom(u.y,h.y,d.y,c.y,this.tension),UC.initCatmullRom(u.z,h.z,d.z,c.z,this.tension));return n.set(BC.calc(l),zC.calc(l),UC.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new me().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function eU(r,e,t,n,i){const a=(n-e)*.5,o=(i-t)*.5,s=r*r,l=r*s;return(2*t-2*n+a+o)*l+(-3*t+3*n-2*a-o)*s+a*r+t}function Jze(r,e){const t=1-r;return t*t*e}function Zze(r,e){return 2*(1-r)*r*e}function Kze(r,e){return r*r*e}function b0(r,e,t,n){return Jze(r,e)+Zze(r,t)+Kze(r,n)}function Qze(r,e){const t=1-r;return t*t*t*e}function e6e(r,e){const t=1-r;return 3*t*t*r*e}function t6e(r,e){return 3*(1-r)*r*r*e}function r6e(r,e){return r*r*r*e}function x0(r,e,t,n,i){return Qze(r,e)+e6e(r,t)+t6e(r,n)+r6e(r,i)}class kO extends Is{constructor(e=new Qe,t=new Qe,n=new Qe,i=new Qe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Qe){const n=t,i=this.v0,a=this.v1,o=this.v2,s=this.v3;return n.set(x0(e,i.x,a.x,o.x,s.x),x0(e,i.y,a.y,o.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uJ extends Is{constructor(e=new me,t=new me,n=new me,i=new me){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new me){const n=t,i=this.v0,a=this.v1,o=this.v2,s=this.v3;return n.set(x0(e,i.x,a.x,o.x,s.x),x0(e,i.y,a.y,o.y,s.y),x0(e,i.z,a.z,o.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class NO extends Is{constructor(e=new Qe,t=new Qe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Qe){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Qe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cJ extends Is{constructor(e=new me,t=new me){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new me){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new me){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OO extends Is{constructor(e=new Qe,t=new Qe,n=new Qe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Qe){const n=t,i=this.v0,a=this.v1,o=this.v2;return n.set(b0(e,i.x,a.x,o.x),b0(e,i.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RO extends Is{constructor(e=new me,t=new me,n=new me){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new me){const n=t,i=this.v0,a=this.v1,o=this.v2;return n.set(b0(e,i.x,a.x,o.x),b0(e,i.y,a.y,o.y),b0(e,i.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PO extends Is{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Qe){const n=t,i=this.points,a=(i.length-1)*e,o=Math.floor(a),s=a-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return n.set(eU(s,l.x,u.x,c.x,h.x),eU(s,l.y,u.y,c.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Qe().fromArray(i))}return this}}var qS=Object.freeze({__proto__:null,ArcCurve:sJ,CatmullRomCurve3:lJ,CubicBezierCurve:kO,CubicBezierCurve3:uJ,EllipseCurve:E2,LineCurve:NO,LineCurve3:cJ,QuadraticBezierCurve:OO,QuadraticBezierCurve3:RO,SplineCurve:PO});class hJ extends Is{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new qS[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=n){const o=i[a]-n,s=this.curves[a],l=s.getLength(),u=l===0?0:1-o/l;return s.getPointAt(u,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,a=this.curves;i<a.length;i++){const o=a[i],s=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(s);for(let u=0;u<l.length;u++){const c=l[u];n&&n.equals(c)||(t.push(c),n=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new qS[i.type]().fromJSON(i))}return this}}class xv extends hJ{constructor(e){super(),this.type="Path",this.currentPoint=new Qe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new NO(this.currentPoint.clone(),new Qe(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const a=new OO(this.currentPoint.clone(),new Qe(e,t),new Qe(n,i));return this.curves.push(a),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,a,o){const s=new kO(this.currentPoint.clone(),new Qe(e,t),new Qe(n,i),new Qe(a,o));return this.curves.push(s),this.currentPoint.set(a,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new PO(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,a,o){const s=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+s,t+l,n,i,a,o),this}absarc(e,t,n,i,a,o){return this.absellipse(e,t,n,n,i,a,o),this}ellipse(e,t,n,i,a,o,s,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,n,i,a,o,s,l),this}absellipse(e,t,n,i,a,o,s,l){const u=new E2(e,t,n,i,a,o,s,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class vy extends or{constructor(e=[new Qe(0,-.5),new Qe(.5,0),new Qe(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=kn(i,0,Math.PI*2);const a=[],o=[],s=[],l=[],u=[],c=1/t,h=new me,d=new Qe,f=new me,p=new me,v=new me;let y=0,g=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:y=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,f.x=g*1,f.y=-y,f.z=g*0,v.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:y=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,f.x=g*1,f.y=-y,f.z=g*0,p.copy(f),f.x+=v.x,f.y+=v.y,f.z+=v.z,f.normalize(),l.push(f.x,f.y,f.z),v.copy(p)}for(let w=0;w<=t;w++){const b=n+w*c*i,m=Math.sin(b),x=Math.cos(b);for(let S=0;S<=e.length-1;S++){h.x=e[S].x*m,h.y=e[S].y,h.z=e[S].x*x,o.push(h.x,h.y,h.z),d.x=w/t,d.y=S/(e.length-1),s.push(d.x,d.y);const E=l[3*S+0]*m,A=l[3*S+1],T=l[3*S+0]*x;u.push(E,A,T)}}for(let w=0;w<t;w++)for(let b=0;b<e.length-1;b++){const m=b+w*e.length,x=m,S=m+e.length,E=m+e.length+1,A=m+1;a.push(x,S,A),a.push(E,A,S)}this.setIndex(a),this.setAttribute("position",new Tt(o,3)),this.setAttribute("uv",new Tt(s,2)),this.setAttribute("normal",new Tt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vy(e.points,e.segments,e.phiStart,e.phiLength)}}class C2 extends vy{constructor(e=1,t=1,n=4,i=8){const a=new xv;a.absarc(0,-t/2,e,Math.PI*1.5,0),a.absarc(0,t/2,e,0,Math.PI*.5),super(a.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new C2(e.radius,e.length,e.capSegments,e.radialSegments)}}class A2 extends or{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const a=[],o=[],s=[],l=[],u=new me,c=new Qe;o.push(0,0,0),s.push(0,0,1),l.push(.5,.5);for(let h=0,d=3;h<=t;h++,d+=3){const f=n+h/t*i;u.x=e*Math.cos(f),u.y=e*Math.sin(f),o.push(u.x,u.y,u.z),s.push(0,0,1),c.x=(o[d]/e+1)/2,c.y=(o[d+1]/e+1)/2,l.push(c.x,c.y)}for(let h=1;h<=t;h++)a.push(h,h+1,0);this.setIndex(a),this.setAttribute("position",new Tt(o,3)),this.setAttribute("normal",new Tt(s,3)),this.setAttribute("uv",new Tt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new A2(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Fm extends or{constructor(e=1,t=1,n=1,i=32,a=1,o=!1,s=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l};const u=this;i=Math.floor(i),a=Math.floor(a);const c=[],h=[],d=[],f=[];let p=0;const v=[],y=n/2;let g=0;w(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(c),this.setAttribute("position",new Tt(h,3)),this.setAttribute("normal",new Tt(d,3)),this.setAttribute("uv",new Tt(f,2));function w(){const m=new me,x=new me;let S=0;const E=(t-e)/n;for(let A=0;A<=a;A++){const T=[],C=A/a,D=C*(t-e)+e;for(let O=0;O<=i;O++){const U=O/i,L=U*l+s,F=Math.sin(L),k=Math.cos(L);x.x=D*F,x.y=-C*n+y,x.z=D*k,h.push(x.x,x.y,x.z),m.set(F,E,k).normalize(),d.push(m.x,m.y,m.z),f.push(U,1-C),T.push(p++)}v.push(T)}for(let A=0;A<i;A++)for(let T=0;T<a;T++){const C=v[T][A],D=v[T+1][A],O=v[T+1][A+1],U=v[T][A+1];c.push(C,D,U),c.push(D,O,U),S+=6}u.addGroup(g,S,0),g+=S}function b(m){const x=p,S=new Qe,E=new me;let A=0;const T=m===!0?e:t,C=m===!0?1:-1;for(let O=1;O<=i;O++)h.push(0,y*C,0),d.push(0,C,0),f.push(.5,.5),p++;const D=p;for(let O=0;O<=i;O++){const U=O/i*l+s,L=Math.cos(U),F=Math.sin(U);E.x=T*F,E.y=y*C,E.z=T*L,h.push(E.x,E.y,E.z),d.push(0,C,0),S.x=L*.5+.5,S.y=F*.5*C+.5,f.push(S.x,S.y),p++}for(let O=0;O<i;O++){const U=x+O,L=D+O;m===!0?c.push(L,L+1,U):c.push(L+1,L,U),A+=3}u.addGroup(g,A,m===!0?1:2),g+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class T2 extends Fm{constructor(e=1,t=1,n=32,i=1,a=!1,o=0,s=Math.PI*2){super(0,e,t,n,i,a,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s}}static fromJSON(e){return new T2(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class uh extends or{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const a=[],o=[];s(i),u(n),c(),this.setAttribute("position",new Tt(a,3)),this.setAttribute("normal",new Tt(a.slice(),3)),this.setAttribute("uv",new Tt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function s(w){const b=new me,m=new me,x=new me;for(let S=0;S<t.length;S+=3)f(t[S+0],b),f(t[S+1],m),f(t[S+2],x),l(b,m,x,w)}function l(w,b,m,x){const S=x+1,E=[];for(let A=0;A<=S;A++){E[A]=[];const T=w.clone().lerp(m,A/S),C=b.clone().lerp(m,A/S),D=S-A;for(let O=0;O<=D;O++)O===0&&A===S?E[A][O]=T:E[A][O]=T.clone().lerp(C,O/D)}for(let A=0;A<S;A++)for(let T=0;T<2*(S-A)-1;T++){const C=Math.floor(T/2);T%2===0?(d(E[A][C+1]),d(E[A+1][C]),d(E[A][C])):(d(E[A][C+1]),d(E[A+1][C+1]),d(E[A+1][C]))}}function u(w){const b=new me;for(let m=0;m<a.length;m+=3)b.x=a[m+0],b.y=a[m+1],b.z=a[m+2],b.normalize().multiplyScalar(w),a[m+0]=b.x,a[m+1]=b.y,a[m+2]=b.z}function c(){const w=new me;for(let b=0;b<a.length;b+=3){w.x=a[b+0],w.y=a[b+1],w.z=a[b+2];const m=y(w)/2/Math.PI+.5,x=g(w)/Math.PI+.5;o.push(m,1-x)}p(),h()}function h(){for(let w=0;w<o.length;w+=6){const b=o[w+0],m=o[w+2],x=o[w+4],S=Math.max(b,m,x),E=Math.min(b,m,x);S>.9&&E<.1&&(b<.2&&(o[w+0]+=1),m<.2&&(o[w+2]+=1),x<.2&&(o[w+4]+=1))}}function d(w){a.push(w.x,w.y,w.z)}function f(w,b){const m=w*3;b.x=e[m+0],b.y=e[m+1],b.z=e[m+2]}function p(){const w=new me,b=new me,m=new me,x=new me,S=new Qe,E=new Qe,A=new Qe;for(let T=0,C=0;T<a.length;T+=9,C+=6){w.set(a[T+0],a[T+1],a[T+2]),b.set(a[T+3],a[T+4],a[T+5]),m.set(a[T+6],a[T+7],a[T+8]),S.set(o[C+0],o[C+1]),E.set(o[C+2],o[C+3]),A.set(o[C+4],o[C+5]),x.copy(w).add(b).add(m).divideScalar(3);const D=y(x);v(S,C+0,w,D),v(E,C+2,b,D),v(A,C+4,m,D)}}function v(w,b,m,x){x<0&&w.x===1&&(o[b]=w.x-1),m.x===0&&m.z===0&&(o[b]=x/2/Math.PI+.5)}function y(w){return Math.atan2(w.z,-w.x)}function g(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uh(e.vertices,e.indices,e.radius,e.details)}}class D2 extends uh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new D2(e.radius,e.detail)}}const Jb=new me,Zb=new me,jC=new me,Kb=new go;class IO extends or{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const n=Math.pow(10,4),i=Math.cos(ld*t),a=e.getIndex(),o=e.getAttribute("position"),s=a?a.count:o.count,l=[0,0,0],u=["a","b","c"],c=new Array(3),h={},d=[];for(let f=0;f<s;f+=3){a?(l[0]=a.getX(f),l[1]=a.getX(f+1),l[2]=a.getX(f+2)):(l[0]=f,l[1]=f+1,l[2]=f+2);const{a:p,b:v,c:y}=Kb;if(p.fromBufferAttribute(o,l[0]),v.fromBufferAttribute(o,l[1]),y.fromBufferAttribute(o,l[2]),Kb.getNormal(jC),c[0]=`${Math.round(p.x*n)},${Math.round(p.y*n)},${Math.round(p.z*n)}`,c[1]=`${Math.round(v.x*n)},${Math.round(v.y*n)},${Math.round(v.z*n)}`,c[2]=`${Math.round(y.x*n)},${Math.round(y.y*n)},${Math.round(y.z*n)}`,!(c[0]===c[1]||c[1]===c[2]||c[2]===c[0]))for(let g=0;g<3;g++){const w=(g+1)%3,b=c[g],m=c[w],x=Kb[u[g]],S=Kb[u[w]],E=`${b}_${m}`,A=`${m}_${b}`;A in h&&h[A]?(jC.dot(h[A].normal)<=i&&(d.push(x.x,x.y,x.z),d.push(S.x,S.y,S.z)),h[A]=null):E in h||(h[E]={index0:l[g],index1:l[w],normal:jC.clone()})}}for(const f in h)if(h[f]){const{index0:p,index1:v}=h[f];Jb.fromBufferAttribute(o,p),Zb.fromBufferAttribute(o,v),d.push(Jb.x,Jb.y,Jb.z),d.push(Zb.x,Zb.y,Zb.z)}this.setAttribute("position",new Tt(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class dd extends xv{constructor(e){super(e),this.uuid=So(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new xv().fromJSON(i))}return this}}const n6e={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let a=dJ(r,0,i,t,!0);const o=[];if(!a||a.next===a.prev)return o;let s,l,u,c,h,d,f;if(n&&(a=l6e(r,e,a,t)),r.length>80*t){s=u=r[0],l=c=r[1];for(let p=t;p<i;p+=t)h=r[p],d=r[p+1],h<s&&(s=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);f=Math.max(u-s,c-l),f=f!==0?32767/f:0}return wv(a,o,t,s,l,f,0),o}};function dJ(r,e,t,n,i){let a,o;if(i===b6e(r,e,t,n)>0)for(a=e;a<t;a+=n)o=tU(a,r[a],r[a+1],o);else for(a=t-n;a>=e;a-=n)o=tU(a,r[a],r[a+1],o);return o&&k2(o,o.next)&&(Mv(o),o=o.next),o}function Cd(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(k2(t,t.next)||bn(t.prev,t,t.next)===0)){if(Mv(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function wv(r,e,t,n,i,a,o){if(!r)return;!o&&a&&f6e(r,n,i,a);let s=r,l,u;for(;r.prev!==r.next;){if(l=r.prev,u=r.next,a?a6e(r,n,i,a):i6e(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(u.i/t|0),Mv(r),r=u.next,s=u.next;continue}if(r=u,r===s){o?o===1?(r=o6e(Cd(r),e,t),wv(r,e,t,n,i,a,2)):o===2&&s6e(r,e,t,n,i,a):wv(Cd(r),e,t,n,i,a,1);break}}}function i6e(r){const e=r.prev,t=r,n=r.next;if(bn(e,t,n)>=0)return!1;const i=e.x,a=t.x,o=n.x,s=e.y,l=t.y,u=n.y,c=i<a?i<o?i:o:a<o?a:o,h=s<l?s<u?s:u:l<u?l:u,d=i>a?i>o?i:o:a>o?a:o,f=s>l?s>u?s:u:l>u?l:u;let p=n.next;for(;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&dp(i,s,a,l,o,u,p.x,p.y)&&bn(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function a6e(r,e,t,n){const i=r.prev,a=r,o=r.next;if(bn(i,a,o)>=0)return!1;const s=i.x,l=a.x,u=o.x,c=i.y,h=a.y,d=o.y,f=s<l?s<u?s:u:l<u?l:u,p=c<h?c<d?c:d:h<d?h:d,v=s>l?s>u?s:u:l>u?l:u,y=c>h?c>d?c:d:h>d?h:d,g=r3(f,p,e,t,n),w=r3(v,y,e,t,n);let b=r.prevZ,m=r.nextZ;for(;b&&b.z>=g&&m&&m.z<=w;){if(b.x>=f&&b.x<=v&&b.y>=p&&b.y<=y&&b!==i&&b!==o&&dp(s,c,l,h,u,d,b.x,b.y)&&bn(b.prev,b,b.next)>=0||(b=b.prevZ,m.x>=f&&m.x<=v&&m.y>=p&&m.y<=y&&m!==i&&m!==o&&dp(s,c,l,h,u,d,m.x,m.y)&&bn(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;b&&b.z>=g;){if(b.x>=f&&b.x<=v&&b.y>=p&&b.y<=y&&b!==i&&b!==o&&dp(s,c,l,h,u,d,b.x,b.y)&&bn(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;m&&m.z<=w;){if(m.x>=f&&m.x<=v&&m.y>=p&&m.y<=y&&m!==i&&m!==o&&dp(s,c,l,h,u,d,m.x,m.y)&&bn(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function o6e(r,e,t){let n=r;do{const i=n.prev,a=n.next.next;!k2(i,a)&&fJ(i,n,n.next,a)&&Sv(i,a)&&Sv(a,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(a.i/t|0),Mv(n),Mv(n.next),n=r=a),n=n.next}while(n!==r);return Cd(n)}function s6e(r,e,t,n,i,a){let o=r;do{let s=o.next.next;for(;s!==o.prev;){if(o.i!==s.i&&g6e(o,s)){let l=pJ(o,s);o=Cd(o,o.next),l=Cd(l,l.next),wv(o,e,t,n,i,a,0),wv(l,e,t,n,i,a,0);return}s=s.next}o=o.next}while(o!==r)}function l6e(r,e,t,n){const i=[];let a,o,s,l,u;for(a=0,o=e.length;a<o;a++)s=e[a]*n,l=a<o-1?e[a+1]*n:r.length,u=dJ(r,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push(m6e(u));for(i.sort(u6e),a=0;a<i.length;a++)t=c6e(i[a],t);return t}function u6e(r,e){return r.x-e.x}function c6e(r,e){const t=h6e(r,e);if(!t)return e;const n=pJ(t,r);return Cd(n,n.next),Cd(t,t.next)}function h6e(r,e){let t=e,n=-1/0,i;const a=r.x,o=r.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=a&&d>n&&(n=d,i=t.x<t.next.x?t:t.next,d===a))return i}t=t.next}while(t!==e);if(!i)return null;const s=i,l=i.x,u=i.y;let c=1/0,h;t=i;do a>=t.x&&t.x>=l&&a!==t.x&&dp(o<u?a:n,o,l,u,o<u?n:a,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(a-t.x),Sv(t,r)&&(h<c||h===c&&(t.x>i.x||t.x===i.x&&d6e(i,t)))&&(i=t,c=h)),t=t.next;while(t!==s);return i}function d6e(r,e){return bn(r.prev,r,e.prev)<0&&bn(e.next,r,r.next)<0}function f6e(r,e,t,n){let i=r;do i.z===0&&(i.z=r3(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,p6e(i)}function p6e(r){let e,t,n,i,a,o,s,l,u=1;do{for(t=r,r=null,a=null,o=0;t;){for(o++,n=t,s=0,e=0;e<u&&(s++,n=n.nextZ,!!n);e++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,s--):(i=n,n=n.nextZ,l--),a?a.nextZ=i:r=i,i.prevZ=a,a=i;t=n}a.nextZ=null,u*=2}while(o>1);return r}function r3(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function m6e(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function dp(r,e,t,n,i,a,o,s){return(i-o)*(e-s)>=(r-o)*(a-s)&&(r-o)*(n-s)>=(t-o)*(e-s)&&(t-o)*(a-s)>=(i-o)*(n-s)}function g6e(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!v6e(r,e)&&(Sv(r,e)&&Sv(e,r)&&y6e(r,e)&&(bn(r.prev,r,e.prev)||bn(r,e.prev,e))||k2(r,e)&&bn(r.prev,r,r.next)>0&&bn(e.prev,e,e.next)>0)}function bn(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function k2(r,e){return r.x===e.x&&r.y===e.y}function fJ(r,e,t,n){const i=ex(bn(r,e,t)),a=ex(bn(r,e,n)),o=ex(bn(t,n,r)),s=ex(bn(t,n,e));return!!(i!==a&&o!==s||i===0&&Qb(r,t,e)||a===0&&Qb(r,n,e)||o===0&&Qb(t,r,n)||s===0&&Qb(t,e,n))}function Qb(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function ex(r){return r>0?1:r<0?-1:0}function v6e(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&fJ(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Sv(r,e){return bn(r.prev,r,r.next)<0?bn(r,e,r.next)>=0&&bn(r,r.prev,e)>=0:bn(r,e,r.prev)<0||bn(r,r.next,e)<0}function y6e(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,a=(r.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function pJ(r,e){const t=new n3(r.i,r.x,r.y),n=new n3(e.i,e.x,e.y),i=r.next,a=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,a.next=n,n.prev=a,n}function tU(r,e,t,n){const i=new n3(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Mv(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function n3(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function b6e(r,e,t,n){let i=0;for(let a=e,o=t-n;a<t;a+=n)i+=(r[o]-r[a])*(r[a+1]+r[o+1]),o=a;return i}class vl{static area(e){const t=e.length;let n=0;for(let i=t-1,a=0;a<t;i=a++)n+=e[i].x*e[a].y-e[a].x*e[i].y;return n*.5}static isClockWise(e){return vl.area(e)<0}static triangulateShape(e,t){const n=[],i=[],a=[];rU(e),nU(n,e);let o=e.length;t.forEach(rU);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,nU(n,t[l]);const s=n6e.triangulate(n,i);for(let l=0;l<s.length;l+=3)a.push(s.slice(l,l+3));return a}}function rU(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function nU(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class N2 extends or{constructor(e=new dd([new Qe(.5,.5),new Qe(-.5,.5),new Qe(-.5,-.5),new Qe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],a=[];for(let s=0,l=e.length;s<l;s++){const u=e[s];o(u)}this.setAttribute("position",new Tt(i,3)),this.setAttribute("uv",new Tt(a,2)),this.computeVertexNormals();function o(s){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:f-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:x6e;let b,m=!1,x,S,E,A;g&&(b=g.getSpacedPoints(c),m=!0,d=!1,x=g.computeFrenetFrames(c,!1),S=new me,E=new me,A=new me),d||(y=0,f=0,p=0,v=0);const T=s.extractPoints(u);let C=T.shape;const D=T.holes;if(!vl.isClockWise(C)){C=C.reverse();for(let be=0,re=D.length;be<re;be++){const Re=D[be];vl.isClockWise(Re)&&(D[be]=Re.reverse())}}const O=vl.triangulateShape(C,D),U=C;for(let be=0,re=D.length;be<re;be++){const Re=D[be];C=C.concat(Re)}function L(be,re,Re){return re||console.error("THREE.ExtrudeGeometry: vec does not exist"),be.clone().addScaledVector(re,Re)}const F=C.length,k=O.length;function R(be,re,Re){let ze,K,ie;const _e=be.x-re.x,oe=be.y-re.y,G=Re.x-be.x,W=Re.y-be.y,ce=_e*_e+oe*oe,Ce=_e*W-oe*G;if(Math.abs(Ce)>Number.EPSILON){const $=Math.sqrt(ce),ee=Math.sqrt(G*G+W*W),ge=re.x-oe/$,xe=re.y+_e/$,Ne=Re.x-W/ee,Fe=Re.y+G/ee,We=((Ne-ge)*W-(Fe-xe)*G)/(_e*W-oe*G);ze=ge+_e*We-be.x,K=xe+oe*We-be.y;const ke=ze*ze+K*K;if(ke<=2)return new Qe(ze,K);ie=Math.sqrt(ke/2)}else{let $=!1;_e>Number.EPSILON?G>Number.EPSILON&&($=!0):_e<-Number.EPSILON?G<-Number.EPSILON&&($=!0):Math.sign(oe)===Math.sign(W)&&($=!0),$?(ze=-oe,K=_e,ie=Math.sqrt(ce)):(ze=_e,K=oe,ie=Math.sqrt(ce/2))}return new Qe(ze/ie,K/ie)}const z=[];for(let be=0,re=U.length,Re=re-1,ze=be+1;be<re;be++,Re++,ze++)Re===re&&(Re=0),ze===re&&(ze=0),z[be]=R(U[be],U[Re],U[ze]);const B=[];let X,Z=z.concat();for(let be=0,re=D.length;be<re;be++){const Re=D[be];X=[];for(let ze=0,K=Re.length,ie=K-1,_e=ze+1;ze<K;ze++,ie++,_e++)ie===K&&(ie=0),_e===K&&(_e=0),X[ze]=R(Re[ze],Re[ie],Re[_e]);B.push(X),Z=Z.concat(X)}for(let be=0;be<y;be++){const re=be/y,Re=f*Math.cos(re*Math.PI/2),ze=p*Math.sin(re*Math.PI/2)+v;for(let K=0,ie=U.length;K<ie;K++){const _e=L(U[K],z[K],ze);se(_e.x,_e.y,-Re)}for(let K=0,ie=D.length;K<ie;K++){const _e=D[K];X=B[K];for(let oe=0,G=_e.length;oe<G;oe++){const W=L(_e[oe],X[oe],ze);se(W.x,W.y,-Re)}}}const Q=p+v;for(let be=0;be<F;be++){const re=d?L(C[be],Z[be],Q):C[be];m?(E.copy(x.normals[0]).multiplyScalar(re.x),S.copy(x.binormals[0]).multiplyScalar(re.y),A.copy(b[0]).add(E).add(S),se(A.x,A.y,A.z)):se(re.x,re.y,0)}for(let be=1;be<=c;be++)for(let re=0;re<F;re++){const Re=d?L(C[re],Z[re],Q):C[re];m?(E.copy(x.normals[be]).multiplyScalar(Re.x),S.copy(x.binormals[be]).multiplyScalar(Re.y),A.copy(b[be]).add(E).add(S),se(A.x,A.y,A.z)):se(Re.x,Re.y,h/c*be)}for(let be=y-1;be>=0;be--){const re=be/y,Re=f*Math.cos(re*Math.PI/2),ze=p*Math.sin(re*Math.PI/2)+v;for(let K=0,ie=U.length;K<ie;K++){const _e=L(U[K],z[K],ze);se(_e.x,_e.y,h+Re)}for(let K=0,ie=D.length;K<ie;K++){const _e=D[K];X=B[K];for(let oe=0,G=_e.length;oe<G;oe++){const W=L(_e[oe],X[oe],ze);m?se(W.x,W.y+b[c-1].y,b[c-1].x+Re):se(W.x,W.y,h+Re)}}}J(),ne();function J(){const be=i.length/3;if(d){let re=0,Re=F*re;for(let ze=0;ze<k;ze++){const K=O[ze];ye(K[2]+Re,K[1]+Re,K[0]+Re)}re=c+y*2,Re=F*re;for(let ze=0;ze<k;ze++){const K=O[ze];ye(K[0]+Re,K[1]+Re,K[2]+Re)}}else{for(let re=0;re<k;re++){const Re=O[re];ye(Re[2],Re[1],Re[0])}for(let re=0;re<k;re++){const Re=O[re];ye(Re[0]+F*c,Re[1]+F*c,Re[2]+F*c)}}n.addGroup(be,i.length/3-be,0)}function ne(){const be=i.length/3;let re=0;fe(U,re),re+=U.length;for(let Re=0,ze=D.length;Re<ze;Re++){const K=D[Re];fe(K,re),re+=K.length}n.addGroup(be,i.length/3-be,1)}function fe(be,re){let Re=be.length;for(;--Re>=0;){const ze=Re;let K=Re-1;K<0&&(K=be.length-1);for(let ie=0,_e=c+y*2;ie<_e;ie++){const oe=F*ie,G=F*(ie+1),W=re+ze+oe,ce=re+K+oe,Ce=re+K+G,$=re+ze+G;De(W,ce,Ce,$)}}}function se(be,re,Re){l.push(be),l.push(re),l.push(Re)}function ye(be,re,Re){pe(be),pe(re),pe(Re);const ze=i.length/3,K=w.generateTopUV(n,i,ze-3,ze-2,ze-1);Te(K[0]),Te(K[1]),Te(K[2])}function De(be,re,Re,ze){pe(be),pe(re),pe(ze),pe(re),pe(Re),pe(ze);const K=i.length/3,ie=w.generateSideWallUV(n,i,K-6,K-3,K-2,K-1);Te(ie[0]),Te(ie[1]),Te(ie[3]),Te(ie[1]),Te(ie[2]),Te(ie[3])}function pe(be){i.push(l[be*3+0]),i.push(l[be*3+1]),i.push(l[be*3+2])}function Te(be){a.push(be.x),a.push(be.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return w6e(t,n,e)}static fromJSON(e,t){const n=[];for(let a=0,o=e.shapes.length;a<o;a++){const s=t[e.shapes[a]];n.push(s)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new qS[i.type]().fromJSON(i)),new N2(n,e.options)}}const x6e={generateTopUV:function(r,e,t,n,i){const a=e[t*3],o=e[t*3+1],s=e[n*3],l=e[n*3+1],u=e[i*3],c=e[i*3+1];return[new Qe(a,o),new Qe(s,l),new Qe(u,c)]},generateSideWallUV:function(r,e,t,n,i,a){const o=e[t*3],s=e[t*3+1],l=e[t*3+2],u=e[n*3],c=e[n*3+1],h=e[n*3+2],d=e[i*3],f=e[i*3+1],p=e[i*3+2],v=e[a*3],y=e[a*3+1],g=e[a*3+2];return Math.abs(s-c)<Math.abs(o-u)?[new Qe(o,1-l),new Qe(u,1-h),new Qe(d,1-p),new Qe(v,1-g)]:[new Qe(s,1-l),new Qe(c,1-h),new Qe(f,1-p),new Qe(y,1-g)]}};function w6e(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const a=r[n];t.shapes.push(a.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class O2 extends uh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new O2(e.radius,e.detail)}}class yy extends uh{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yy(e.radius,e.detail)}}class R2 extends or{constructor(e=.5,t=1,n=32,i=1,a=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:a,thetaLength:o},n=Math.max(3,n),i=Math.max(1,i);const s=[],l=[],u=[],c=[];let h=e;const d=(t-e)/i,f=new me,p=new Qe;for(let v=0;v<=i;v++){for(let y=0;y<=n;y++){const g=a+y/n*o;f.x=h*Math.cos(g),f.y=h*Math.sin(g),l.push(f.x,f.y,f.z),u.push(0,0,1),p.x=(f.x/t+1)/2,p.y=(f.y/t+1)/2,c.push(p.x,p.y)}h+=d}for(let v=0;v<i;v++){const y=v*(n+1);for(let g=0;g<n;g++){const w=g+y,b=w,m=w+n+1,x=w+n+2,S=w+1;s.push(b,m,S),s.push(m,x,S)}}this.setIndex(s),this.setAttribute("position",new Tt(l,3)),this.setAttribute("normal",new Tt(u,3)),this.setAttribute("uv",new Tt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new R2(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class P2 extends or{constructor(e=new dd([new Qe(0,.5),new Qe(-.5,-.5),new Qe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],a=[],o=[];let s=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(s,l,c),s+=l,l=0;this.setIndex(n),this.setAttribute("position",new Tt(i,3)),this.setAttribute("normal",new Tt(a,3)),this.setAttribute("uv",new Tt(o,2));function u(c){const h=i.length/3,d=c.extractPoints(t);let f=d.shape;const p=d.holes;vl.isClockWise(f)===!1&&(f=f.reverse());for(let y=0,g=p.length;y<g;y++){const w=p[y];vl.isClockWise(w)===!0&&(p[y]=w.reverse())}const v=vl.triangulateShape(f,p);for(let y=0,g=p.length;y<g;y++){const w=p[y];f=f.concat(w)}for(let y=0,g=f.length;y<g;y++){const w=f[y];i.push(w.x,w.y,0),a.push(0,0,1),o.push(w.x,w.y)}for(let y=0,g=v.length;y<g;y++){const w=v[y],b=w[0]+h,m=w[1]+h,x=w[2]+h;n.push(b,m,x),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return S6e(t,e)}static fromJSON(e,t){const n=[];for(let i=0,a=e.shapes.length;i<a;i++){const o=t[e.shapes[i]];n.push(o)}return new P2(n,e.curveSegments)}}function S6e(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class by extends or{constructor(e=1,t=32,n=16,i=0,a=Math.PI*2,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:a,thetaStart:o,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+s,Math.PI);let u=0;const c=[],h=new me,d=new me,f=[],p=[],v=[],y=[];for(let g=0;g<=n;g++){const w=[],b=g/n;let m=0;g===0&&o===0?m=.5/t:g===n&&l===Math.PI&&(m=-.5/t);for(let x=0;x<=t;x++){const S=x/t;h.x=-e*Math.cos(i+S*a)*Math.sin(o+b*s),h.y=e*Math.cos(o+b*s),h.z=e*Math.sin(i+S*a)*Math.sin(o+b*s),p.push(h.x,h.y,h.z),d.copy(h).normalize(),v.push(d.x,d.y,d.z),y.push(S+m,1-b),w.push(u++)}c.push(w)}for(let g=0;g<n;g++)for(let w=0;w<t;w++){const b=c[g][w+1],m=c[g][w],x=c[g+1][w],S=c[g+1][w+1];(g!==0||o>0)&&f.push(b,m,S),(g!==n-1||l<Math.PI)&&f.push(m,x,S)}this.setIndex(f),this.setAttribute("position",new Tt(p,3)),this.setAttribute("normal",new Tt(v,3)),this.setAttribute("uv",new Tt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new by(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class I2 extends uh{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new I2(e.radius,e.detail)}}class L2 extends or{constructor(e=1,t=.4,n=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:a},n=Math.floor(n),i=Math.floor(i);const o=[],s=[],l=[],u=[],c=new me,h=new me,d=new me;for(let f=0;f<=n;f++)for(let p=0;p<=i;p++){const v=p/i*a,y=f/n*Math.PI*2;h.x=(e+t*Math.cos(y))*Math.cos(v),h.y=(e+t*Math.cos(y))*Math.sin(v),h.z=t*Math.sin(y),s.push(h.x,h.y,h.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),d.subVectors(h,c).normalize(),l.push(d.x,d.y,d.z),u.push(p/i),u.push(f/n)}for(let f=1;f<=n;f++)for(let p=1;p<=i;p++){const v=(i+1)*f+p-1,y=(i+1)*(f-1)+p-1,g=(i+1)*(f-1)+p,w=(i+1)*f+p;o.push(v,y,w),o.push(y,g,w)}this.setIndex(o),this.setAttribute("position",new Tt(s,3)),this.setAttribute("normal",new Tt(l,3)),this.setAttribute("uv",new Tt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new L2(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class F2 extends or{constructor(e=1,t=.4,n=64,i=8,a=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:a,q:o},n=Math.floor(n),i=Math.floor(i);const s=[],l=[],u=[],c=[],h=new me,d=new me,f=new me,p=new me,v=new me,y=new me,g=new me;for(let b=0;b<=n;++b){const m=b/n*a*Math.PI*2;w(m,a,o,e,f),w(m+.01,a,o,e,p),y.subVectors(p,f),g.addVectors(p,f),v.crossVectors(y,g),g.crossVectors(v,y),v.normalize(),g.normalize();for(let x=0;x<=i;++x){const S=x/i*Math.PI*2,E=-t*Math.cos(S),A=t*Math.sin(S);h.x=f.x+(E*g.x+A*v.x),h.y=f.y+(E*g.y+A*v.y),h.z=f.z+(E*g.z+A*v.z),l.push(h.x,h.y,h.z),d.subVectors(h,f).normalize(),u.push(d.x,d.y,d.z),c.push(b/n),c.push(x/i)}}for(let b=1;b<=n;b++)for(let m=1;m<=i;m++){const x=(i+1)*(b-1)+(m-1),S=(i+1)*b+(m-1),E=(i+1)*b+m,A=(i+1)*(b-1)+m;s.push(x,S,A),s.push(S,E,A)}this.setIndex(s),this.setAttribute("position",new Tt(l,3)),this.setAttribute("normal",new Tt(u,3)),this.setAttribute("uv",new Tt(c,2));function w(b,m,x,S,E){const A=Math.cos(b),T=Math.sin(b),C=x/m*b,D=Math.cos(C);E.x=S*(2+D)*.5*A,E.y=S*(2+D)*T*.5,E.z=S*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new F2(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class B2 extends or{constructor(e=new RO(new me(-1,-1,0),new me(-1,1,0),new me(1,1,0)),t=64,n=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:a};const o=e.computeFrenetFrames(t,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new me,l=new me,u=new Qe;let c=new me;const h=[],d=[],f=[],p=[];v(),this.setIndex(p),this.setAttribute("position",new Tt(h,3)),this.setAttribute("normal",new Tt(d,3)),this.setAttribute("uv",new Tt(f,2));function v(){for(let b=0;b<t;b++)y(b);y(a===!1?t:0),w(),g()}function y(b){c=e.getPointAt(b/t,c);const m=o.normals[b],x=o.binormals[b];for(let S=0;S<=i;S++){const E=S/i*Math.PI*2,A=Math.sin(E),T=-Math.cos(E);l.x=T*m.x+A*x.x,l.y=T*m.y+A*x.y,l.z=T*m.z+A*x.z,l.normalize(),d.push(l.x,l.y,l.z),s.x=c.x+n*l.x,s.y=c.y+n*l.y,s.z=c.z+n*l.z,h.push(s.x,s.y,s.z)}}function g(){for(let b=1;b<=t;b++)for(let m=1;m<=i;m++){const x=(i+1)*(b-1)+(m-1),S=(i+1)*b+(m-1),E=(i+1)*b+m,A=(i+1)*(b-1)+m;p.push(x,S,A),p.push(S,E,A)}}function w(){for(let b=0;b<=t;b++)for(let m=0;m<=i;m++)u.x=b/t,u.y=m/i,f.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new B2(new qS[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class LO extends or{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new me,a=new me;if(e.index!==null){const o=e.attributes.position,s=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:s.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const h=l[u],d=h.start,f=h.count;for(let p=d,v=d+f;p<v;p+=3)for(let y=0;y<3;y++){const g=s.getX(p+y),w=s.getX(p+(y+1)%3);i.fromBufferAttribute(o,g),a.fromBufferAttribute(o,w),iU(i,a,n)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}}else{const o=e.attributes.position;for(let s=0,l=o.count/3;s<l;s++)for(let u=0;u<3;u++){const c=3*s+u,h=3*s+(u+1)%3;i.fromBufferAttribute(o,c),a.fromBufferAttribute(o,h),iU(i,a,n)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Tt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function iU(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var aU=Object.freeze({__proto__:null,BoxGeometry:jd,CapsuleGeometry:C2,CircleGeometry:A2,ConeGeometry:T2,CylinderGeometry:Fm,DodecahedronGeometry:D2,EdgesGeometry:IO,ExtrudeGeometry:N2,IcosahedronGeometry:O2,LatheGeometry:vy,OctahedronGeometry:yy,PlaneGeometry:Im,PolyhedronGeometry:uh,RingGeometry:R2,ShapeGeometry:P2,SphereGeometry:by,TetrahedronGeometry:I2,TorusGeometry:L2,TorusKnotGeometry:F2,TubeGeometry:B2,WireframeGeometry:LO});class mJ extends Li{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new wt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class gJ extends ts{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class FO extends Li{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new wt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vJ extends FO{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Qe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return kn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new wt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new wt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new wt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class yJ extends Li{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new wt(16777215),this.specular=new wt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bJ extends Li{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new wt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class xJ extends Li{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class wJ extends Li{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SJ extends Li{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new wt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sh,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MJ extends Pa{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Qh(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function _J(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function EJ(r){function e(i,a){return r[i]-r[a]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function i3(r,e,t){const n=r.length,i=new r.constructor(n);for(let a=0,o=0;o!==n;++a){const s=t[a]*e;for(let l=0;l!==e;++l)i[o++]=r[s+l]}return i}function BO(r,e,t,n){let i=1,a=r[0];for(;a!==void 0&&a[n]===void 0;)a=r[i++];if(a===void 0)return;let o=a[n];if(o!==void 0)if(Array.isArray(o))do o=a[n],o!==void 0&&(e.push(a.time),t.push.apply(t,o)),a=r[i++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[n],o!==void 0&&(e.push(a.time),o.toArray(t,t.length)),a=r[i++];while(a!==void 0);else do o=a[n],o!==void 0&&(e.push(a.time),t.push(o)),a=r[i++];while(a!==void 0)}function M6e(r,e,t,n,i=30){const a=r.clone();a.name=e;const o=[];for(let l=0;l<a.tracks.length;++l){const u=a.tracks[l],c=u.getValueSize(),h=[],d=[];for(let f=0;f<u.times.length;++f){const p=u.times[f]*i;if(!(p<t||p>=n)){h.push(u.times[f]);for(let v=0;v<c;++v)d.push(u.values[f*c+v])}}h.length!==0&&(u.times=Qh(h,u.times.constructor),u.values=Qh(d,u.values.constructor),o.push(u))}a.tracks=o;let s=1/0;for(let l=0;l<a.tracks.length;++l)s>a.tracks[l].times[0]&&(s=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*s);return a.resetDuration(),a}function _6e(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,a=e/n;for(let o=0;o<i;++o){const s=t.tracks[o],l=s.ValueTypeName;if(l==="bool"||l==="string")continue;const u=r.tracks.find(function(g){return g.name===s.name&&g.ValueTypeName===l});if(u===void 0)continue;let c=0;const h=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let d=0;const f=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const p=s.times.length-1;let v;if(a<=s.times[0]){const g=c,w=h-c;v=s.values.slice(g,w)}else if(a>=s.times[p]){const g=p*h+c,w=g+h-c;v=s.values.slice(g,w)}else{const g=s.createInterpolant(),w=c,b=h-c;g.evaluate(a),v=g.resultBuffer.slice(w,b)}l==="quaternion"&&new yi().fromArray(v).normalize().conjugate().toArray(v);const y=u.times.length;for(let g=0;g<y;++g){const w=g*f+d;if(l==="quaternion")yi.multiplyQuaternionsFlat(u.values,w,v,0,u.values,w);else{const b=f-d*2;for(let m=0;m<b;++m)u.values[w+m]-=v[m]}}}return r.blendMode=pO,r}const E6e={convertArray:Qh,isTypedArray:_J,getKeyframeOrder:EJ,sortedArray:i3,flattenJSON:BO,subclip:M6e,makeClipAdditive:_6e};class xy{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],a=t[n-1];e:{t:{let o;r:{n:if(!(e<i)){for(let s=n+2;;){if(i===void 0){if(e<a)break n;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(a=i,i=t[++n],e<i)break t}o=t.length;break r}if(!(e>=a)){const s=t[1];e<s&&(n=2,a=s);for(let l=n-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=a,a=t[--n-1],e>=a)break t}o=n,n=0;break r}break e}for(;n<o;){const s=n+o>>>1;e<t[s]?o=s:n=s+1}if(i=t[n],a=t[n-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,i)}return this.interpolate_(n,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=e*i;for(let o=0;o!==i;++o)t[o]=n[a+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CJ extends xy{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Jh,endingEnd:Jh}}intervalChanged_(e,t,n){const i=this.parameterPositions;let a=e-2,o=e+1,s=i[a],l=i[o];if(s===void 0)switch(this.getSettings_().endingStart){case Zh:a=e,s=2*t-n;break;case dv:a=i.length-2,s=t+i[a]-i[a+1];break;default:a=e,s=n}if(l===void 0)switch(this.getSettings_().endingEnd){case Zh:o=e,l=2*n-t;break;case dv:o=1,l=n+i[1]-i[0];break;default:o=e-1,l=t}const u=(n-t)*.5,c=this.valueSize;this._weightPrev=u/(t-s),this._weightNext=u/(l-n),this._offsetPrev=a*c,this._offsetNext=o*c}interpolate_(e,t,n,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,u=l-s,c=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(n-t)/(i-t),v=p*p,y=v*p,g=-d*y+2*d*v-d*p,w=(1+d)*y+(-1.5-2*d)*v+(-.5+d)*p+1,b=(-1-f)*y+(1.5+f)*v+.5*p,m=f*y-f*v;for(let x=0;x!==s;++x)a[x]=g*o[c+x]+w*o[u+x]+b*o[l+x]+m*o[h+x];return a}}class zO extends xy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,u=l-s,c=(n-t)/(i-t),h=1-c;for(let d=0;d!==s;++d)a[d]=o[u+d]*h+o[l+d]*c;return a}}class AJ extends xy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ls{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Qh(t,this.TimeBufferType),this.values=Qh(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Qh(e.times,Array),values:Qh(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new AJ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new zO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CJ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case cv:t=this.InterpolantFactoryMethodDiscrete;break;case hv:t=this.InterpolantFactoryMethodLinear;break;case sw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return cv;case this.InterpolantFactoryMethodLinear:return hv;case this.InterpolantFactoryMethodSmooth:return sw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let a=0,o=i-1;for(;a!==i&&n[a]<e;)++a;for(;o!==-1&&n[o]>t;)--o;if(++o,a!==0||o!==i){a>=o&&(o=Math.max(o,1),a=o-1);const s=this.getValueSize();this.times=n.slice(a,o),this.values=this.values.slice(a*s,o*s)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,a=n.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==a;s++){const l=n[s];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,o),e=!1;break}o=l}if(i!==void 0&&_J(i))for(let s=0,l=i.length;s!==l;++s){const u=i[s];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===sw,a=e.length-1;let o=1;for(let s=1;s<a;++s){let l=!1;const u=e[s],c=e[s+1];if(u!==c&&(s!==1||u!==e[0]))if(i)l=!0;else{const h=s*n,d=h-n,f=h+n;for(let p=0;p!==n;++p){const v=t[h+p];if(v!==t[d+p]||v!==t[f+p]){l=!0;break}}}if(l){if(s!==o){e[o]=e[s];const h=s*n,d=o*n;for(let f=0;f!==n;++f)t[d+f]=t[h+f]}++o}}if(a>0){e[o]=e[a];for(let s=a*n,l=o*n,u=0;u!==n;++u)t[l+u]=t[s+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ls.prototype.TimeBufferType=Float32Array;Ls.prototype.ValueBufferType=Float32Array;Ls.prototype.DefaultInterpolation=hv;class Hd extends Ls{}Hd.prototype.ValueTypeName="bool";Hd.prototype.ValueBufferType=Array;Hd.prototype.DefaultInterpolation=cv;Hd.prototype.InterpolantFactoryMethodLinear=void 0;Hd.prototype.InterpolantFactoryMethodSmooth=void 0;class UO extends Ls{}UO.prototype.ValueTypeName="color";class _v extends Ls{}_v.prototype.ValueTypeName="number";class TJ extends xy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=(n-t)/(i-t);let u=e*s;for(let c=u+s;u!==c;u+=4)yi.slerpFlat(a,0,o,u-s,o,u,l);return a}}class Bm extends Ls{InterpolantFactoryMethodLinear(e){return new TJ(this.times,this.values,this.getValueSize(),e)}}Bm.prototype.ValueTypeName="quaternion";Bm.prototype.DefaultInterpolation=hv;Bm.prototype.InterpolantFactoryMethodSmooth=void 0;class Vd extends Ls{}Vd.prototype.ValueTypeName="string";Vd.prototype.ValueBufferType=Array;Vd.prototype.DefaultInterpolation=cv;Vd.prototype.InterpolantFactoryMethodLinear=void 0;Vd.prototype.InterpolantFactoryMethodSmooth=void 0;class Ev extends Ls{}Ev.prototype.ValueTypeName="vector";class Cv{constructor(e,t=-1,n,i=m2){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=So(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,s=n.length;o!==s;++o)t.push(A6e(n[o]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,o=n.length;a!==o;++a)t.push(Ls.toJSON(n[a]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const a=t.length,o=[];for(let s=0;s<a;s++){let l=[],u=[];l.push((s+a-1)%a,s,(s+1)%a),u.push(0,1,0);const c=EJ(l);l=i3(l,1,c),u=i3(u,1,c),!i&&l[0]===0&&(l.push(a),u.push(u[0])),o.push(new _v(".morphTargetInfluences["+t[s].name+"]",l,u).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},a=/^([\w-]*?)([\d]+)$/;for(let s=0,l=e.length;s<l;s++){const u=e[s],c=u.name.match(a);if(c&&c.length>1){const h=c[1];let d=i[h];d||(i[h]=d=[]),d.push(u)}}const o=[];for(const s in i)o.push(this.CreateFromMorphTargetSequence(s,i[s],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(c,h,d,f,p){if(d.length!==0){const v=[],y=[];BO(d,v,y,f),v.length!==0&&p.push(new c(h,v,y))}},i=[],a=e.name||"default",o=e.fps||30,s=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let c=0;c<u.length;c++){const h=u[c].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let f;for(f=0;f<h.length;f++)if(h[f].morphTargets)for(let p=0;p<h[f].morphTargets.length;p++)d[h[f].morphTargets[p]]=-1;for(const p in d){const v=[],y=[];for(let g=0;g!==h[f].morphTargets.length;++g){const w=h[f];v.push(w.time),y.push(w.morphTarget===p?1:0)}i.push(new _v(".morphTargetInfluence["+p+"]",v,y))}l=d.length*o}else{const d=".bones["+t[c].name+"]";n(Ev,d+".position",h,"pos",i),n(Bm,d+".quaternion",h,"rot",i),n(Ev,d+".scale",h,"scl",i)}}return i.length===0?null:new this(a,l,i,s)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function C6e(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _v;case"vector":case"vector2":case"vector3":case"vector4":return Ev;case"color":return UO;case"quaternion":return Bm;case"bool":case"boolean":return Hd;case"string":return Vd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function A6e(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=C6e(r.type);if(r.times===void 0){const t=[],n=[];BO(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const ou={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class jO{constructor(e,t,n){const i=this;let a=!1,o=0,s=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){s++,a===!1&&i.onStart!==void 0&&i.onStart(c,o,s),a=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,s),o===s&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,d=u.length;h<d;h+=2){const f=u[h],p=u[h+1];if(f.global&&(f.lastIndex=0),f.test(c))return p}return null}}}const DJ=new jO;class Qa{constructor(e){this.manager=e!==void 0?e:DJ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,a){n.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Qa.DEFAULT_MATERIAL_NAME="__DEFAULT";const $l={};class T6e extends Error{constructor(e,t){super(e),this.response=t}}class Eu extends Qa{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=ou.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if($l[e]!==void 0){$l[e].push({onLoad:t,onProgress:n,onError:i});return}$l[e]=[],$l[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=$l[e],h=u.body.getReader(),d=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),f=d?parseInt(d):0,p=f!==0;let v=0;const y=new ReadableStream({start(g){w();function w(){h.read().then(({done:b,value:m})=>{if(b)g.close();else{v+=m.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:v,total:f});for(let S=0,E=c.length;S<E;S++){const A=c[S];A.onProgress&&A.onProgress(x)}g.enqueue(m),w()}})}}});return new Response(y)}else throw new T6e(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,s));case"json":return u.json();default:if(s===void 0)return u.text();{const c=/charset="?([^;"\s]*)"?/i.exec(s),h=c&&c[1]?c[1].toLowerCase():void 0,d=new TextDecoder(h);return u.arrayBuffer().then(f=>d.decode(f))}}}).then(u=>{ou.add(e,u);const c=$l[e];delete $l[e];for(let h=0,d=c.length;h<d;h++){const f=c[h];f.onLoad&&f.onLoad(u)}}).catch(u=>{const c=$l[e];if(c===void 0)throw this.manager.itemError(e),u;delete $l[e];for(let h=0,d=c.length;h<d;h++){const f=c[h];f.onError&&f.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class D6e extends Qa{constructor(e){super(e)}load(e,t,n,i){const a=this,o=new Eu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(s){try{t(a.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Cv.parse(e[n]);t.push(i)}return t}}class k6e extends Qa{constructor(e){super(e)}load(e,t,n,i){const a=this,o=[],s=new _2,l=new Eu(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(a.withCredentials);let u=0;function c(h){l.load(e[h],function(d){const f=a.parse(d,!0);o[h]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},u+=1,u===6&&(f.mipmapCount===1&&(s.minFilter=sn),s.image=o,s.format=f.format,s.needsUpdate=!0,t&&t(s))},n,i)}if(Array.isArray(e))for(let h=0,d=e.length;h<d;++h)c(h);else l.load(e,function(h){const d=a.parse(h,!0);if(d.isCubemap){const f=d.mipmaps.length/d.mipmapCount;for(let p=0;p<f;p++){o[p]={mipmaps:[]};for(let v=0;v<d.mipmapCount;v++)o[p].mipmaps.push(d.mipmaps[p*d.mipmapCount+v]),o[p].format=d.format,o[p].width=d.width,o[p].height=d.height}s.image=o}else s.image.width=d.width,s.image.height=d.height,s.mipmaps=d.mipmaps;d.mipmapCount===1&&(s.minFilter=sn),s.format=d.format,s.needsUpdate=!0,t&&t(s)},n,i);return s}}class Av extends Qa{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=ou.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;const s=yv("img");function l(){c(),ou.add(e,this),t&&t(this),a.manager.itemEnd(e)}function u(h){c(),i&&i(h),a.manager.itemError(e),a.manager.itemEnd(e)}function c(){s.removeEventListener("load",l,!1),s.removeEventListener("error",u,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),a.manager.itemStart(e),s.src=e,s}}class N6e extends Qa{constructor(e){super(e)}load(e,t,n,i){const a=new my;a.colorSpace=ri;const o=new Av(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function l(u){o.load(e[u],function(c){a.images[u]=c,s++,s===6&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return a}}class O6e extends Qa{constructor(e){super(e)}load(e,t,n,i){const a=this,o=new hd,s=new Eu(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(a.withCredentials),s.load(e,function(l){let u;try{u=a.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Ji,o.wrapT=u.wrapT!==void 0?u.wrapT:Ji,o.magFilter=u.magFilter!==void 0?u.magFilter:sn,o.minFilter=u.minFilter!==void 0?u.minFilter:sn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=sl),u.mipmapCount===1&&(o.minFilter=sn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},n,i),o}}class R6e extends Qa{constructor(e){super(e)}load(e,t,n,i){const a=new Sn,o=new Av(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(s){a.image=s,a.needsUpdate=!0,t!==void 0&&t(a)},n,i),a}}class ch extends Mr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new wt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class kJ extends ch{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Mr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new wt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const HC=new Yt,oU=new me,sU=new me;class HO{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Qe(512,512),this.map=null,this.mapPass=null,this.matrix=new Yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new gy,this._frameExtents=new Qe(1,1),this._viewportCount=1,this._viewports=[new Fr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;oU.setFromMatrixPosition(e.matrixWorld),t.position.copy(oU),sU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(sU),t.updateMatrixWorld(),HC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(HC),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(HC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class P6e extends HO{constructor(){super(new Nn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Qp*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(n!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class NJ extends ch{constructor(e,t,n=0,i=Math.PI/3,a=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Mr.DEFAULT_UP),this.updateMatrix(),this.target=new Mr,this.distance=n,this.angle=i,this.penumbra=a,this.decay=o,this.map=null,this.shadow=new P6e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const lU=new Yt,Og=new me,VC=new me;class I6e extends HO{constructor(){super(new Nn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Qe(4,2),this._viewportCount=6,this._viewports=[new Fr(2,1,1,1),new Fr(0,1,1,1),new Fr(3,1,1,1),new Fr(1,1,1,1),new Fr(3,0,1,1),new Fr(1,0,1,1)],this._cubeDirections=[new me(1,0,0),new me(-1,0,0),new me(0,0,1),new me(0,0,-1),new me(0,1,0),new me(0,-1,0)],this._cubeUps=[new me(0,1,0),new me(0,1,0),new me(0,1,0),new me(0,1,0),new me(0,0,1),new me(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),Og.setFromMatrixPosition(e.matrixWorld),n.position.copy(Og),VC.copy(n.position),VC.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(VC),n.updateMatrixWorld(),i.makeTranslation(-Og.x,-Og.y,-Og.z),lU.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lU)}}class OJ extends ch{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new I6e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class L6e extends HO{constructor(){super(new au(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class RJ extends ch{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Mr.DEFAULT_UP),this.updateMatrix(),this.target=new Mr,this.shadow=new L6e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class PJ extends ch{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class IJ extends ch{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class LJ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new me)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,a=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*a),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*i)),t.addScaledVector(o[5],1.092548*(i*a)),t.addScaledVector(o[6],.315392*(3*a*a-1)),t.addScaledVector(o[7],1.092548*(n*a)),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,a=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*a),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*i),t.addScaledVector(o[5],2*.429043*i*a),t.addScaledVector(o[6],.743125*a*a-.247708),t.addScaledVector(o[7],2*.429043*n*a),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-i*i)}}class FJ extends ch{constructor(e=new LJ,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class z2 extends Qa{constructor(e){super(e),this.textures={}}load(e,t,n,i){const a=this,o=new Eu(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(s){try{t(a.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const i=z2.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new wt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const o=e.uniforms[a];switch(i.uniforms[a]={},o.type){case"t":i.uniforms[a].value=n(o.value);break;case"c":i.uniforms[a].value=new wt().setHex(o.value);break;case"v2":i.uniforms[a].value=new Qe().fromArray(o.value);break;case"v3":i.uniforms[a].value=new me().fromArray(o.value);break;case"v4":i.uniforms[a].value=new Fr().fromArray(o.value);break;case"m3":i.uniforms[a].value=new fr().fromArray(o.value);break;case"m4":i.uniforms[a].value=new Yt().fromArray(o.value);break;default:i.uniforms[a].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new Qe().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Qe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:mJ,SpriteMaterial:CO,RawShaderMaterial:gJ,ShaderMaterial:ts,PointsMaterial:TO,MeshPhysicalMaterial:vJ,MeshStandardMaterial:FO,MeshPhongMaterial:yJ,MeshToonMaterial:bJ,MeshNormalMaterial:xJ,MeshLambertMaterial:wJ,MeshDepthMaterial:MO,MeshDistanceMaterial:_O,MeshBasicMaterial:lh,MeshMatcapMaterial:SJ,LineDashedMaterial:MJ,LineBasicMaterial:Pa,Material:Li};return new t[e]}}class a3{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class BJ extends or{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class zJ extends Qa{constructor(e){super(e)}load(e,t,n,i){const a=this,o=new Eu(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(s){try{t(a.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(d,f){if(t[f]!==void 0)return t[f];const p=d.interleavedBuffers[f],v=a(d,p.buffer),y=lp(p.type,v),g=new S2(y,p.stride);return g.uuid=p.uuid,t[f]=g,g}function a(d,f){if(n[f]!==void 0)return n[f];const p=d.arrayBuffers[f],v=new Uint32Array(p).buffer;return n[f]=v,v}const o=e.isInstancedBufferGeometry?new BJ:new or,s=e.data.index;if(s!==void 0){const d=lp(s.type,s.array);o.setIndex(new jr(d,1))}const l=e.data.attributes;for(const d in l){const f=l[d];let p;if(f.isInterleavedBufferAttribute){const v=i(e.data,f.data);p=new Ed(v,f.itemSize,f.offset,f.normalized)}else{const v=lp(f.type,f.array),y=f.isInstancedBufferAttribute?tm:jr;p=new y(v,f.itemSize,f.normalized)}f.name!==void 0&&(p.name=f.name),f.usage!==void 0&&p.setUsage(f.usage),o.setAttribute(d,p)}const u=e.data.morphAttributes;if(u)for(const d in u){const f=u[d],p=[];for(let v=0,y=f.length;v<y;v++){const g=f[v];let w;if(g.isInterleavedBufferAttribute){const b=i(e.data,g.data);w=new Ed(b,g.itemSize,g.offset,g.normalized)}else{const b=lp(g.type,g.array);w=new jr(b,g.itemSize,g.normalized)}g.name!==void 0&&(w.name=g.name),p.push(w)}o.morphAttributes[d]=p}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const c=e.data.groups||e.data.drawcalls||e.data.offsets;if(c!==void 0)for(let d=0,f=c.length;d!==f;++d){const p=c[d];o.addGroup(p.start,p.count,p.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const d=new me;h.center!==void 0&&d.fromArray(h.center),o.boundingSphere=new ea(d,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class F6e extends Qa{constructor(e){super(e)}load(e,t,n,i){const a=this,o=this.path===""?a3.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const s=new Eu(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(u,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?a3.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new Eu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const o=await a.loadAsync(e,t),s=JSON.parse(o),l=s.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(s)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),s=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,s),u=this.parseObject(e.object,a,l,s,n),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let h=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),a=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,s,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const a=new dd().fromJSON(e[n]);t[a.uuid]=a}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,o=e.length;a<o;a++){const s=new M2().fromJSON(e[a],i);n[s.uuid]=s}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new zJ;for(let a=0,o=e.length;a<o;a++){let s;const l=e[a];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(l);break;default:l.type in aU?s=aU[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}s.uuid=l.uuid,l.name!==void 0&&(s.name=l.name),l.userData!==void 0&&(s.userData=l.userData),n[l.uuid]=s}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const a=new z2;a.setTextures(t);for(let o=0,s=e.length;o<s;o++){const l=e[o];n[l.uuid]===void 0&&(n[l.uuid]=a.parse(l)),i[l.uuid]=n[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],a=Cv.parse(i);t[a.uuid]=a}return t}parseImages(e,t){const n=this,i={};let a;function o(l){return n.manager.itemStart(l),a.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function s(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return o(c)}else return l.data?{data:lp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new jO(t);a=new Av(l),a.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const h=e[u],d=h.url;if(Array.isArray(d)){const f=[];for(let p=0,v=d.length;p<v;p++){const y=d[p],g=s(y);g!==null&&(g instanceof HTMLImageElement?f.push(g):f.push(new hd(g.data,g.width,g.height)))}i[h.uuid]=new Kh(f)}else{const f=s(h.url);i[h.uuid]=new Kh(f)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function a(o){if(typeof o=="string"){const s=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s)?s:t.resourcePath+s;return await i.loadAsync(l)}else return o.data?{data:lp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Av(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,s=e.length;o<s;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let h=0,d=u.length;h<d;h++){const f=u[h],p=await a(f);p!==null&&(p instanceof HTMLImageElement?c.push(p):c.push(new hd(p.data,p.width,p.height)))}n[l.uuid]=new Kh(c)}else{const c=await a(l.url);n[l.uuid]=new Kh(c)}}}return n}parseTextures(e,t){function n(a,o){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),o[a])}const i={};if(e!==void 0)for(let a=0,o=e.length;a<o;a++){const s=e[a];s.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),t[s.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const l=t[s.image],u=l.data;let c;Array.isArray(u)?(c=new my,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new hd:c=new Sn,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=s.uuid,s.name!==void 0&&(c.name=s.name),s.mapping!==void 0&&(c.mapping=n(s.mapping,B6e)),s.channel!==void 0&&(c.channel=s.channel),s.offset!==void 0&&c.offset.fromArray(s.offset),s.repeat!==void 0&&c.repeat.fromArray(s.repeat),s.center!==void 0&&c.center.fromArray(s.center),s.rotation!==void 0&&(c.rotation=s.rotation),s.wrap!==void 0&&(c.wrapS=n(s.wrap[0],uU),c.wrapT=n(s.wrap[1],uU)),s.format!==void 0&&(c.format=s.format),s.internalFormat!==void 0&&(c.internalFormat=s.internalFormat),s.type!==void 0&&(c.type=s.type),s.colorSpace!==void 0&&(c.colorSpace=s.colorSpace),s.encoding!==void 0&&(c.encoding=s.encoding),s.minFilter!==void 0&&(c.minFilter=n(s.minFilter,cU)),s.magFilter!==void 0&&(c.magFilter=n(s.magFilter,cU)),s.anisotropy!==void 0&&(c.anisotropy=s.anisotropy),s.flipY!==void 0&&(c.flipY=s.flipY),s.generateMipmaps!==void 0&&(c.generateMipmaps=s.generateMipmaps),s.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=s.premultiplyAlpha),s.unpackAlignment!==void 0&&(c.unpackAlignment=s.unpackAlignment),s.compareFunction!==void 0&&(c.compareFunction=s.compareFunction),s.userData!==void 0&&(c.userData=s.userData),i[s.uuid]=c}return i}parseObject(e,t,n,i,a){let o;function s(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const f=[];for(let p=0,v=d.length;p<v;p++){const y=d[p];n[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),f.push(n[y])}return f}return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),n[d]}}function u(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let c,h;switch(e.type){case"Scene":o=new bv,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new wt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new w2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new x2(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Nn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new au(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new PJ(e.color,e.intensity);break;case"DirectionalLight":o=new RJ(e.color,e.intensity);break;case"PointLight":o=new OJ(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new IJ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new NJ(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new kJ(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new FJ().fromJSON(e);break;case"SkinnedMesh":c=s(e.geometry),h=l(e.material),o=new tJ(c,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=s(e.geometry),h=l(e.material),o=new Yn(c,h);break;case"InstancedMesh":c=s(e.geometry),h=l(e.material);const d=e.count,f=e.instanceMatrix,p=e.instanceColor;o=new rJ(c,h,d),o.instanceMatrix=new tm(new Float32Array(f.array),16),p!==void 0&&(o.instanceColor=new tm(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":c=s(e.geometry),h=l(e.material),o=new nJ(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=c,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(v=>{const y=new Ea;y.min.fromArray(v.boxMin),y.max.fromArray(v.boxMax);const g=new ea;return g.radius=v.sphereRadius,g.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:y,sphereInitialized:v.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":o=new eJ;break;case"Line":o=new $c(s(e.geometry),l(e.material));break;case"LineLoop":o=new iJ(s(e.geometry),l(e.material));break;case"LineSegments":o=new Tl(s(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new aJ(s(e.geometry),l(e.material));break;case"Sprite":o=new QY(l(e.material));break;case"Group":o=new hp;break;case"Bone":o=new AO;break;default:o=new Mr}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let f=0;f<d.length;f++)o.add(this.parseObject(d[f],t,n,i,a))}if(e.animations!==void 0){const d=e.animations;for(let f=0;f<d.length;f++){const p=d[f];o.animations.push(a[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let f=0;f<d.length;f++){const p=d[f],v=o.getObjectByProperty("uuid",p.object);v!==void 0&&o.addLevel(v,p.distance,p.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}}const B6e={UVMapping:f2,CubeReflectionMapping:_u,CubeRefractionMapping:Gc,EquirectangularReflectionMapping:ov,EquirectangularRefractionMapping:sv,CubeUVReflectionMapping:Pm},uU={RepeatWrapping:lv,ClampToEdgeWrapping:Ji,MirroredRepeatWrapping:uv},cU={NearestFilter:zn,NearestMipmapNearestFilter:jS,NearestMipmapLinearFilter:zh,LinearFilter:sn,LinearMipmapNearestFilter:v0,LinearMipmapLinearFilter:sl};class z6e extends Qa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=ou.get(e);if(o!==void 0){if(a.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),a.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o}const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader;const l=fetch(e,s).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(u){return ou.add(e,u),t&&t(u),a.manager.itemEnd(e),u}).catch(function(u){i&&i(u),ou.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});ou.add(e,l),a.manager.itemStart(e)}}let tx;class VO{static getContext(){return tx===void 0&&(tx=new(window.AudioContext||window.webkitAudioContext)),tx}static setContext(e){tx=e}}class U6e extends Qa{constructor(e){super(e)}load(e,t,n,i){const a=this,o=new Eu(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);VO.getContext().decodeAudioData(u,function(c){t(c)}).catch(s)}catch(u){s(u)}},n,i);function s(l){i?i(l):console.error(l),a.manager.itemError(e)}}}const hU=new Yt,dU=new Yt,Ch=new Yt;class j6e{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Nn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Nn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ch.copy(e.projectionMatrix);const n=t.eyeSep/2,i=n*t.near/t.focus,a=t.near*Math.tan(ld*t.fov*.5)/t.zoom;let o,s;dU.elements[12]=-n,hU.elements[12]=n,o=-a*t.aspect+i,s=a*t.aspect+i,Ch.elements[0]=2*t.near/(s-o),Ch.elements[8]=(s+o)/(s-o),this.cameraL.projectionMatrix.copy(Ch),o=-a*t.aspect-i,s=a*t.aspect-i,Ch.elements[0]=2*t.near/(s-o),Ch.elements[8]=(s+o)/(s-o),this.cameraR.projectionMatrix.copy(Ch)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(dU),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(hU)}}class qO{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=fU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=fU();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function fU(){return(typeof performance>"u"?Date:performance).now()}const Ah=new me,pU=new yi,H6e=new me,Th=new me;class V6e extends Mr{constructor(){super(),this.type="AudioListener",this.context=VO.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new qO}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ah,pU,H6e),Th.set(0,0,-1).applyQuaternion(pU),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ah.x,i),t.positionY.linearRampToValueAtTime(Ah.y,i),t.positionZ.linearRampToValueAtTime(Ah.z,i),t.forwardX.linearRampToValueAtTime(Th.x,i),t.forwardY.linearRampToValueAtTime(Th.y,i),t.forwardZ.linearRampToValueAtTime(Th.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(Ah.x,Ah.y,Ah.z),t.setOrientation(Th.x,Th.y,Th.z,n.x,n.y,n.z)}}class UJ extends Mr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Dh=new me,mU=new yi,q6e=new me,kh=new me;class W6e extends UJ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Dh,mU,q6e),kh.set(0,0,1).applyQuaternion(mU);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Dh.x,n),t.positionY.linearRampToValueAtTime(Dh.y,n),t.positionZ.linearRampToValueAtTime(Dh.z,n),t.orientationX.linearRampToValueAtTime(kh.x,n),t.orientationY.linearRampToValueAtTime(kh.y,n),t.orientationZ.linearRampToValueAtTime(kh.z,n)}else t.setPosition(Dh.x,Dh.y,Dh.z),t.setOrientation(kh.x,kh.y,kh.z)}}class G6e{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class jJ{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,a,o;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,a=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let s=0;s!==i;++s)n[a+s]=n[s];o=t}else{o+=t;const s=t/o;this._mixBufferRegion(n,a,0,s,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=t*this._origIndex;this._mixBufferRegion(n,i,l,1-a,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){s.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let a=n,o=i;a!==o;++a)t[a]=t[i+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,a){if(i>=.5)for(let o=0;o!==a;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){yi.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,a){const o=this._workIndex*a;yi.multiplyQuaternionsFlat(e,o,e,t,e,n),yi.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,a){const o=1-i;for(let s=0;s!==a;++s){const l=t+s;e[l]=e[l]*o+e[n+s]*i}}_lerpAdditive(e,t,n,i,a){for(let o=0;o!==a;++o){const s=t+o;e[s]=e[s]+e[n+o]*i}}}const WO="\\[\\]\\.:\\/",$6e=new RegExp("["+WO+"]","g"),GO="[^"+WO+"]",X6e="[^"+WO.replace("\\.","")+"]",Y6e=/((?:WC+[\/:])*)/.source.replace("WC",GO),J6e=/(WCOD+)?/.source.replace("WCOD",X6e),Z6e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",GO),K6e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",GO),Q6e=new RegExp("^"+Y6e+J6e+Z6e+K6e+"$"),e8e=["material","materials","bones","map"];class t8e{constructor(e,t,n){const i=n||_r.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=n.length;i!==a;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class _r{constructor(e,t,n){this.path=t,this.parsedPath=n||_r.parseTrackName(t),this.node=_r.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new _r.Composite(e,t,n):new _r(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace($6e,"")}static parseTrackName(e){const t=Q6e.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=n.nodeName.substring(i+1);e8e.indexOf(a)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=a)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(a){for(let o=0;o<a.length;o++){const s=a[o];if(s.name===t||s.uuid===t)return s;const l=n(s.children);if(l)return l}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=_r.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_r.Composite=t8e;_r.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};_r.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};_r.prototype.GetterByBindingType=[_r.prototype._getValue_direct,_r.prototype._getValue_array,_r.prototype._getValue_arrayElement,_r.prototype._getValue_toArray];_r.prototype.SetterByBindingTypeAndVersioning=[[_r.prototype._setValue_direct,_r.prototype._setValue_direct_setNeedsUpdate,_r.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_r.prototype._setValue_array,_r.prototype._setValue_array_setNeedsUpdate,_r.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_r.prototype._setValue_arrayElement,_r.prototype._setValue_arrayElement_setNeedsUpdate,_r.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_r.prototype._setValue_fromArray,_r.prototype._setValue_fromArray_setNeedsUpdate,_r.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class r8e{constructor(){this.isAnimationObjectGroup=!0,this.uuid=So(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length;let s,l=e.length,u=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const d=arguments[c],f=d.uuid;let p=t[f];if(p===void 0){p=l++,t[f]=p,e.push(d);for(let v=0,y=o;v!==y;++v)a[v].push(new _r(d,n[v],i[v]))}else if(p<u){s=e[p];const v=--u,y=e[v];t[y.uuid]=p,e[p]=y,t[f]=v,e[v]=d;for(let g=0,w=o;g!==w;++g){const b=a[g],m=b[v];let x=b[p];b[p]=m,x===void 0&&(x=new _r(d,n[g],i[g])),b[v]=x}}else e[p]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let a=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=a){const h=a++,d=e[h];t[d.uuid]=c,e[c]=d,t[u]=h,e[h]=l;for(let f=0,p=i;f!==p;++f){const v=n[f],y=v[h],g=v[c];v[c]=y,v[h]=g}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let a=this.nCachedObjects_,o=e.length;for(let s=0,l=arguments.length;s!==l;++s){const u=arguments[s],c=u.uuid,h=t[c];if(h!==void 0)if(delete t[c],h<a){const d=--a,f=e[d],p=--o,v=e[p];t[f.uuid]=h,e[h]=f,t[v.uuid]=d,e[d]=v,e.pop();for(let y=0,g=i;y!==g;++y){const w=n[y],b=w[d],m=w[p];w[h]=b,w[d]=m,w.pop()}}else{const d=--o,f=e[d];d>0&&(t[f.uuid]=h),e[h]=f,e.pop();for(let p=0,v=i;p!==v;++p){const y=n[p];y[h]=y[d],y.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const a=this._bindings;if(i!==void 0)return a[i];const o=this._paths,s=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,h=new Array(u);i=a.length,n[e]=i,o.push(e),s.push(t),a.push(h);for(let d=c,f=l.length;d!==f;++d){const p=l[d];h[d]=new _r(p,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length-1,l=o[s],u=e[s];t[u]=n,o[n]=l,o.pop(),a[n]=a[s],a.pop(),i[n]=i[s],i.pop()}}}class HJ{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const a=t.tracks,o=a.length,s=new Array(o),l={endingStart:Jh,endingEnd:Jh};for(let u=0;u!==o;++u){const c=a[u].createInterpolant(null);s[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=MY,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,a=e._clip.duration,o=a/i,s=i/a;e.warp(1,o,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,a=i.time,o=this.timeScale;let s=this._timeScaleInterpolant;s===null&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const l=s.parameterPositions,u=s.sampleValues;return l[0]=a,l[1]=a+n,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case pO:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulateAdditive(s);break;case m2:default:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(i,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,a=this._loopCount;const o=n===_Y;if(e===0)return a===-1?i:o&&(a&1)===1?t-i:i;if(n===SY){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const s=Math.floor(i/t);i-=t*s,a+=Math.abs(s);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(o&&(a&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Zh,i.endingEnd=Zh):(e?i.endingStart=this.zeroSlopeAtStart?Zh:Jh:i.endingStart=dv,t?i.endingEnd=this.zeroSlopeAtEnd?Zh:Jh:i.endingEnd=dv)}_scheduleFading(e,t,n){const i=this._mixer,a=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,l=o.sampleValues;return s[0]=a,l[0]=t,s[1]=a+e,l[1]=n,this}}const n8e=new Float32Array(1);class i8e extends Al{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,a=i.length,o=e._propertyBindings,s=e._interpolants,l=n.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let h=0;h!==a;++h){const d=i[h],f=d.name;let p=c[f];if(p!==void 0)++p.referenceCount,o[h]=p;else{if(p=o[h],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}const v=t&&t._propertyBindings[h].binding.parsedPath;p=new jJ(_r.create(n,f,v),d.ValueTypeName,d.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[h]=p}s[h].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,a=this._actionsByClip;let o=a[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=o;else{const s=o.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,o=this._actionsByClip,s=o[a],l=s.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const h=s.actionByRoot,d=(e._localRoot||this._root).uuid;delete h[d],l.length===0&&delete o[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,a=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[n]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,a=n.path,o=this._bindingsByRootAndName,s=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete s[a],Object.keys(s).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new zO(new Float32Array(2),new Float32Array(2),1,n8e),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=n,t[n]=a}clipAction(e,t,n){const i=t||this._root,a=i.uuid;let o=typeof e=="string"?Cv.findByName(i,e):e;const s=o!==null?o.uuid:e,l=this._actionsByClip[s];let u=null;if(n===void 0&&(o!==null?n=o.blendMode:n=m2),l!==void 0){const h=l.actionByRoot[a];if(h!==void 0&&h.blendMode===n)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new HJ(this,o,t,n);return this._bindAction(c,u),this._addInactiveAction(c,s,a),c}existingAction(e,t){const n=t||this._root,i=n.uuid,a=typeof e=="string"?Cv.findByName(n,e):e,o=a?a.uuid:e,s=this._actionsByClip[o];return s!==void 0&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,a=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==n;++u)t[u]._update(i,e,a,o);const s=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)s[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,a=i[n];if(a!==void 0){const o=a.knownActions;for(let s=0,l=o.length;s!==l;++s){const u=o[s];this._deactivateAction(u);const c=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const s=n[o].actionByRoot,l=s[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const o in a){const s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class $O{constructor(e){this.value=e}clone(){return new $O(this.value.clone===void 0?this.value:this.value.clone())}}let a8e=0;class o8e extends Al{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:a8e++}),this.name="",this.usage=gv,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const a=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<a.length;o++)this.uniforms.push(a[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class s8e extends S2{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class l8e{constructor(e,t,n,i,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class XO{constructor(e,t,n=0,i=1/0){this.ray=new Ud(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new cd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return o3(e,this,n,t),n.sort(gU),n}intersectObjects(e,t=!0,n=[]){for(let i=0,a=e.length;i<a;i++)o3(e[i],this,n,t);return n.sort(gU),n}}function gU(r,e){return r.distance-e.distance}function o3(r,e,t,n){if(r.layers.test(e.layers)&&r.raycast(e,t),n===!0){const i=r.children;for(let a=0,o=i.length;a<o;a++)o3(i[a],e,t,!0)}}class s3{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(kn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class u8e{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const vU=new Qe;class c8e{constructor(e=new Qe(1/0,1/0),t=new Qe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=vU.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vU).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const yU=new me,rx=new me;class h8e{constructor(e=new me,t=new me){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){yU.subVectors(e,this.start),rx.subVectors(this.end,this.start);const n=rx.dot(rx);let i=rx.dot(yU)/n;return t&&(i=kn(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const bU=new me;class d8e extends Mr{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new or,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,s=1,l=32;o<l;o++,s++){const u=o/l*Math.PI*2,c=s/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}n.setAttribute("position",new Tt(i,3));const a=new Pa({fog:!1,toneMapped:!1});this.cone=new Tl(n,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),bU.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(bU),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ec=new me,nx=new Yt,qC=new Yt;class f8e extends Tl{constructor(e){const t=VJ(e),n=new or,i=[],a=[],o=new wt(0,0,1),s=new wt(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(o.r,o.g,o.b),a.push(s.r,s.g,s.b))}n.setAttribute("position",new Tt(i,3)),n.setAttribute("color",new Tt(a,3));const l=new Pa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");qC.copy(this.root.matrixWorld).invert();for(let a=0,o=0;a<t.length;a++){const s=t[a];s.parent&&s.parent.isBone&&(nx.multiplyMatrices(qC,s.matrixWorld),ec.setFromMatrixPosition(nx),i.setXYZ(o,ec.x,ec.y,ec.z),nx.multiplyMatrices(qC,s.parent.matrixWorld),ec.setFromMatrixPosition(nx),i.setXYZ(o+1,ec.x,ec.y,ec.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function VJ(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,VJ(r.children[t]));return e}class p8e extends Yn{constructor(e,t,n){const i=new by(t,4,2),a=new lh({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const m8e=new me,xU=new wt,wU=new wt;class g8e extends Mr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new yy(t);i.rotateY(Math.PI*.5),this.material=new lh({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),o=new Float32Array(a.count*3);i.setAttribute("color",new jr(o,3)),this.add(new Yn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");xU.copy(this.light.color),wU.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const a=n<i/2?xU:wU;t.setXYZ(n,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(m8e.setFromMatrixPosition(this.light.matrixWorld).negate())}}class v8e extends Tl{constructor(e=10,t=10,n=4473924,i=8947848){n=new wt(n),i=new wt(i);const a=t/2,o=e/t,s=e/2,l=[],u=[];for(let d=0,f=0,p=-s;d<=t;d++,p+=o){l.push(-s,0,p,s,0,p),l.push(p,0,-s,p,0,s);const v=d===a?n:i;v.toArray(u,f),f+=3,v.toArray(u,f),f+=3,v.toArray(u,f),f+=3,v.toArray(u,f),f+=3}const c=new or;c.setAttribute("position",new Tt(l,3)),c.setAttribute("color",new Tt(u,3));const h=new Pa({vertexColors:!0,toneMapped:!1});super(c,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class y8e extends Tl{constructor(e=10,t=16,n=8,i=64,a=4473924,o=8947848){a=new wt(a),o=new wt(o);const s=[],l=[];if(t>1)for(let h=0;h<t;h++){const d=h/t*(Math.PI*2),f=Math.sin(d)*e,p=Math.cos(d)*e;s.push(0,0,0),s.push(f,0,p);const v=h&1?a:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let h=0;h<n;h++){const d=h&1?a:o,f=e-e/n*h;for(let p=0;p<i;p++){let v=p/i*(Math.PI*2),y=Math.sin(v)*f,g=Math.cos(v)*f;s.push(y,0,g),l.push(d.r,d.g,d.b),v=(p+1)/i*(Math.PI*2),y=Math.sin(v)*f,g=Math.cos(v)*f,s.push(y,0,g),l.push(d.r,d.g,d.b)}}const u=new or;u.setAttribute("position",new Tt(s,3)),u.setAttribute("color",new Tt(l,3));const c=new Pa({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const SU=new me,ix=new me,MU=new me;class b8e extends Mr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new or;i.setAttribute("position",new Tt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new Pa({fog:!1,toneMapped:!1});this.lightPlane=new $c(i,a),this.add(this.lightPlane),i=new or,i.setAttribute("position",new Tt([0,0,0,0,0,1],3)),this.targetLine=new $c(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),SU.setFromMatrixPosition(this.light.matrixWorld),ix.setFromMatrixPosition(this.light.target.matrixWorld),MU.subVectors(ix,SU),this.lightPlane.lookAt(ix),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ix),this.targetLine.scale.z=MU.length()}}const ax=new me,An=new py;class x8e extends Tl{constructor(e){const t=new or,n=new Pa({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],o={};s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4");function s(p,v){l(p),l(v)}function l(p){i.push(0,0,0),a.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(i.length/3-1)}t.setAttribute("position",new Tt(i,3)),t.setAttribute("color",new Tt(a,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new wt(16755200),c=new wt(16711680),h=new wt(43775),d=new wt(16777215),f=new wt(3355443);this.setColors(u,c,h,d,f)}setColors(e,t,n,i,a){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;An.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ln("c",t,e,An,0,0,-1),Ln("t",t,e,An,0,0,1),Ln("n1",t,e,An,-n,-i,-1),Ln("n2",t,e,An,n,-i,-1),Ln("n3",t,e,An,-n,i,-1),Ln("n4",t,e,An,n,i,-1),Ln("f1",t,e,An,-n,-i,1),Ln("f2",t,e,An,n,-i,1),Ln("f3",t,e,An,-n,i,1),Ln("f4",t,e,An,n,i,1),Ln("u1",t,e,An,n*.7,i*1.1,-1),Ln("u2",t,e,An,-n*.7,i*1.1,-1),Ln("u3",t,e,An,0,i*2,-1),Ln("cf1",t,e,An,-n,0,1),Ln("cf2",t,e,An,n,0,1),Ln("cf3",t,e,An,0,-i,1),Ln("cf4",t,e,An,0,i,1),Ln("cn1",t,e,An,-n,0,-1),Ln("cn2",t,e,An,n,0,-1),Ln("cn3",t,e,An,0,-i,-1),Ln("cn4",t,e,An,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ln(r,e,t,n,i,a,o){ax.set(i,a,o).unproject(n);const s=e[r];if(s!==void 0){const l=t.getAttribute("position");for(let u=0,c=s.length;u<c;u++)l.setXYZ(s[u],ax.x,ax.y,ax.z)}}const ox=new Ea;class w8e extends Tl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),a=new or;a.setIndex(new jr(n,1)),a.setAttribute("position",new jr(i,3)),super(a,new Pa({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ox.setFromObject(this.object),ox.isEmpty())return;const t=ox.min,n=ox.max,i=this.geometry.attributes.position,a=i.array;a[0]=n.x,a[1]=n.y,a[2]=n.z,a[3]=t.x,a[4]=n.y,a[5]=n.z,a[6]=t.x,a[7]=t.y,a[8]=n.z,a[9]=n.x,a[10]=t.y,a[11]=n.z,a[12]=n.x,a[13]=n.y,a[14]=t.z,a[15]=t.x,a[16]=n.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=n.x,a[22]=t.y,a[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class S8e extends Tl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new or;a.setIndex(new jr(n,1)),a.setAttribute("position",new Tt(i,3)),super(a,new Pa({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class M8e extends $c{constructor(e,t=1,n=16776960){const i=n,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new or;o.setAttribute("position",new Tt(a,3)),o.computeBoundingSphere(),super(o,new Pa({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const s=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new or;l.setAttribute("position",new Tt(s,3)),l.computeBoundingSphere(),this.add(new Yn(l,new lh({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _U=new me;let sx,WC;class _8e extends Mr{constructor(e=new me(0,0,1),t=new me(0,0,0),n=1,i=16776960,a=n*.2,o=a*.2){super(),this.type="ArrowHelper",sx===void 0&&(sx=new or,sx.setAttribute("position",new Tt([0,0,0,0,1,0],3)),WC=new Fm(0,.5,1,5,1),WC.translate(0,-.5,0)),this.position.copy(t),this.line=new $c(sx,new Pa({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Yn(WC,new lh({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,a,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{_U.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(_U,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class E8e extends Tl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new or;i.setAttribute("position",new Tt(t,3)),i.setAttribute("color",new Tt(n,3));const a=new Pa({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,t,n){const i=new wt,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(t),i.toArray(a,6),i.toArray(a,9),i.set(n),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class C8e{constructor(){this.type="ShapePath",this.color=new wt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new xv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,a,o){return this.currentPath.bezierCurveTo(e,t,n,i,a,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const w=[];for(let b=0,m=g.length;b<m;b++){const x=g[b],S=new dd;S.curves=x.curves,w.push(S)}return w}function n(g,w){const b=w.length;let m=!1;for(let x=b-1,S=0;S<b;x=S++){let E=w[x],A=w[S],T=A.x-E.x,C=A.y-E.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(E=w[S],T=-T,A=w[x],C=-C),g.y<E.y||g.y>A.y)continue;if(g.y===E.y){if(g.x===E.x)return!0}else{const D=C*(g.x-E.x)-T*(g.y-E.y);if(D===0)return!0;if(D<0)continue;m=!m}}else{if(g.y!==E.y)continue;if(A.x<=g.x&&g.x<=E.x||E.x<=g.x&&g.x<=A.x)return!0}}return m}const i=vl.isClockWise,a=this.subPaths;if(a.length===0)return[];let o,s,l;const u=[];if(a.length===1)return s=a[0],l=new dd,l.curves=s.curves,u.push(l),u;let c=!i(a[0].getPoints());c=e?!c:c;const h=[],d=[];let f=[],p=0,v;d[p]=void 0,f[p]=[];for(let g=0,w=a.length;g<w;g++)s=a[g],v=s.getPoints(),o=i(v),o=e?!o:o,o?(!c&&d[p]&&p++,d[p]={s:new dd,p:v},d[p].s.curves=s.curves,c&&p++,f[p]=[]):f[p].push({h:s,p:v[0]});if(!d[0])return t(a);if(d.length>1){let g=!1,w=0;for(let b=0,m=d.length;b<m;b++)h[b]=[];for(let b=0,m=d.length;b<m;b++){const x=f[b];for(let S=0;S<x.length;S++){const E=x[S];let A=!0;for(let T=0;T<d.length;T++)n(E.p,d[T].p)&&(b!==T&&w++,A?(A=!1,h[T].push(E)):g=!0);A&&h[b].push(E)}}w>0&&g===!1&&(f=h)}let y;for(let g=0,w=d.length;g<w;g++){l=d[g].s,u.push(l),y=f[g];for(let b=0,m=y.length;b<m;b++)l.holes.push(y[b].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:h2}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=h2);const A8e=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:oO,AddEquation:hc,AddOperation:sY,AdditiveAnimationBlendMode:pO,AdditiveBlending:bD,AgXToneMapping:dY,AlphaFormat:gY,AlwaysCompare:PY,AlwaysDepth:eY,AlwaysStencilFunc:JD,AmbientLight:PJ,AnimationAction:HJ,AnimationClip:Cv,AnimationLoader:D6e,AnimationMixer:i8e,AnimationObjectGroup:r8e,AnimationUtils:E6e,ArcCurve:sJ,ArrayCamera:JY,ArrowHelper:_8e,AttachedBindMode:_D,Audio:UJ,AudioAnalyser:G6e,AudioContext:VO,AudioListener:V6e,AudioLoader:U6e,AxesHelper:E8e,BackSide:_a,BasicDepthPacking:EY,BasicShadowMap:LX,BatchedMesh:nJ,Bone:AO,BooleanKeyframeTrack:Hd,Box2:c8e,Box3:Ea,Box3Helper:S8e,BoxGeometry:jd,BoxHelper:w8e,BufferAttribute:jr,BufferGeometry:or,BufferGeometryLoader:zJ,ByteType:pY,Cache:ou,Camera:py,CameraHelper:x8e,CanvasTexture:oJ,CapsuleGeometry:C2,CatmullRomCurve3:lJ,CineonToneMapping:cY,CircleGeometry:A2,ClampToEdgeWrapping:Ji,Clock:qO,Color:wt,ColorKeyframeTrack:UO,ColorManagement:Ir,CompressedArrayTexture:Xze,CompressedCubeTexture:Yze,CompressedTexture:_2,CompressedTextureLoader:k6e,ConeGeometry:T2,ConstantAlphaFactor:ZX,ConstantColorFactor:YX,CubeCamera:jY,CubeReflectionMapping:_u,CubeRefractionMapping:Gc,CubeTexture:my,CubeTextureLoader:N6e,CubeUVReflectionMapping:Pm,CubicBezierCurve:kO,CubicBezierCurve3:uJ,CubicInterpolant:CJ,CullFaceBack:yD,CullFaceFront:IX,CullFaceFrontBack:IIe,CullFaceNone:PX,Curve:Is,CurvePath:hJ,CustomBlending:FX,CustomToneMapping:hY,CylinderGeometry:Fm,Cylindrical:u8e,Data3DTexture:bO,DataArrayTexture:v2,DataTexture:hd,DataTextureLoader:O6e,DataUtils:qLe,DecrementStencilOp:GIe,DecrementWrapStencilOp:XIe,DefaultLoadingManager:DJ,DepthFormat:Pc,DepthStencilFormat:_d,DepthTexture:y2,DetachedBindMode:fY,DirectionalLight:RJ,DirectionalLightHelper:b8e,DiscreteInterpolant:AJ,DisplayP3ColorSpace:g2,DodecahedronGeometry:D2,DoubleSide:xs,DstAlphaFactor:qX,DstColorFactor:GX,DynamicCopyUsage:uLe,DynamicDrawUsage:nLe,DynamicReadUsage:oLe,EdgesGeometry:IO,EllipseCurve:E2,EqualCompare:kY,EqualDepth:rY,EqualStencilFunc:KIe,EquirectangularReflectionMapping:ov,EquirectangularRefractionMapping:sv,Euler:fy,EventDispatcher:Al,ExtrudeGeometry:N2,FileLoader:Eu,Float16BufferAttribute:JLe,Float32BufferAttribute:Tt,Float64BufferAttribute:ZLe,FloatType:po,Fog:w2,FogExp2:x2,FramebufferTexture:$ze,FrontSide:Mu,Frustum:gy,GLBufferAttribute:l8e,GLSL1:hLe,GLSL3:ZD,GreaterCompare:NY,GreaterDepth:iY,GreaterEqualCompare:RY,GreaterEqualDepth:nY,GreaterEqualStencilFunc:rLe,GreaterStencilFunc:eLe,GridHelper:v8e,Group:hp,HalfFloatType:Md,HemisphereLight:kJ,HemisphereLightHelper:g8e,IcosahedronGeometry:O2,ImageBitmapLoader:z6e,ImageLoader:Av,ImageUtils:yO,IncrementStencilOp:WIe,IncrementWrapStencilOp:$Ie,InstancedBufferAttribute:tm,InstancedBufferGeometry:BJ,InstancedInterleavedBuffer:s8e,InstancedMesh:rJ,Int16BufferAttribute:XLe,Int32BufferAttribute:YLe,Int8BufferAttribute:WLe,IntType:sO,InterleavedBuffer:S2,InterleavedBufferAttribute:Ed,Interpolant:xy,InterpolateDiscrete:cv,InterpolateLinear:hv,InterpolateSmooth:sw,InvertStencilOp:YIe,KeepStencilOp:Lh,KeyframeTrack:Ls,LOD:eJ,LatheGeometry:vy,Layers:cd,LessCompare:DY,LessDepth:tY,LessEqualCompare:gO,LessEqualDepth:av,LessEqualStencilFunc:QIe,LessStencilFunc:ZIe,Light:ch,LightProbe:FJ,Line:$c,Line3:h8e,LineBasicMaterial:Pa,LineCurve:NO,LineCurve3:cJ,LineDashedMaterial:MJ,LineLoop:iJ,LineSegments:Tl,LinearDisplayP3ColorSpace:dy,LinearEncoding:mO,LinearFilter:sn,LinearInterpolant:zO,LinearMipMapLinearFilter:zIe,LinearMipMapNearestFilter:BIe,LinearMipmapLinearFilter:sl,LinearMipmapNearestFilter:v0,LinearSRGBColorSpace:_l,LinearToneMapping:lY,LinearTransfer:fv,Loader:Qa,LoaderUtils:a3,LoadingManager:jO,LoopOnce:SY,LoopPingPong:_Y,LoopRepeat:MY,LuminanceAlphaFormat:yY,LuminanceFormat:vY,MOUSE:Ph,Material:Li,MaterialLoader:z2,MathUtils:CLe,Matrix3:fr,Matrix4:Yt,MaxEquation:MD,Mesh:Yn,MeshBasicMaterial:lh,MeshDepthMaterial:MO,MeshDistanceMaterial:_O,MeshLambertMaterial:wJ,MeshMatcapMaterial:SJ,MeshNormalMaterial:xJ,MeshPhongMaterial:yJ,MeshPhysicalMaterial:vJ,MeshStandardMaterial:FO,MeshToonMaterial:bJ,MinEquation:SD,MirroredRepeatWrapping:uv,MixOperation:oY,MultiplyBlending:wD,MultiplyOperation:hy,NearestFilter:zn,NearestMipMapLinearFilter:FIe,NearestMipMapNearestFilter:LIe,NearestMipmapLinearFilter:zh,NearestMipmapNearestFilter:jS,NeverCompare:TY,NeverDepth:QX,NeverStencilFunc:JIe,NoBlending:hu,NoColorSpace:mo,NoToneMapping:ml,NormalAnimationBlendMode:m2,NormalBlending:sd,NotEqualCompare:OY,NotEqualDepth:aY,NotEqualStencilFunc:tLe,NumberKeyframeTrack:_v,Object3D:Mr,ObjectLoader:F6e,ObjectSpaceNormalMap:AY,OctahedronGeometry:yy,OneFactor:jX,OneMinusConstantAlphaFactor:KX,OneMinusConstantColorFactor:JX,OneMinusDstAlphaFactor:WX,OneMinusDstColorFactor:$X,OneMinusSrcAlphaFactor:US,OneMinusSrcColorFactor:VX,OrthographicCamera:au,P3Primaries:mv,PCFShadowMap:d2,PCFSoftShadowMap:g0,PMREMGenerator:QD,Path:xv,PerspectiveCamera:Nn,Plane:Zl,PlaneGeometry:Im,PlaneHelper:M8e,PointLight:OJ,PointLightHelper:p8e,Points:aJ,PointsMaterial:TO,PolarGridHelper:y8e,PolyhedronGeometry:uh,PositionalAudio:W6e,PropertyBinding:_r,PropertyMixer:jJ,QuadraticBezierCurve:OO,QuadraticBezierCurve3:RO,Quaternion:yi,QuaternionKeyframeTrack:Bm,QuaternionLinearInterpolant:TJ,RED_GREEN_RGTC2_Format:XD,RED_RGTC1_Format:wY,REVISION:h2,RGBADepthPacking:CY,RGBAFormat:ya,RGBAIntegerFormat:dO,RGBA_ASTC_10x10_Format:HD,RGBA_ASTC_10x5_Format:zD,RGBA_ASTC_10x6_Format:UD,RGBA_ASTC_10x8_Format:jD,RGBA_ASTC_12x10_Format:VD,RGBA_ASTC_12x12_Format:qD,RGBA_ASTC_4x4_Format:ND,RGBA_ASTC_5x4_Format:OD,RGBA_ASTC_5x5_Format:RD,RGBA_ASTC_6x5_Format:PD,RGBA_ASTC_6x6_Format:ID,RGBA_ASTC_8x5_Format:LD,RGBA_ASTC_8x6_Format:FD,RGBA_ASTC_8x8_Format:BD,RGBA_BPTC_Format:ow,RGBA_ETC2_EAC_Format:kD,RGBA_PVRTC_2BPPV1_Format:TD,RGBA_PVRTC_4BPPV1_Format:AD,RGBA_S3TC_DXT1_Format:nw,RGBA_S3TC_DXT3_Format:iw,RGBA_S3TC_DXT5_Format:aw,RGB_BPTC_SIGNED_Format:WD,RGB_BPTC_UNSIGNED_Format:GD,RGB_ETC1_Format:fO,RGB_ETC2_Format:DD,RGB_PVRTC_2BPPV1_Format:CD,RGB_PVRTC_4BPPV1_Format:ED,RGB_S3TC_DXT1_Format:rw,RGFormat:xY,RGIntegerFormat:hO,RawShaderMaterial:gJ,Ray:Ud,Raycaster:XO,Rec709Primaries:pv,RectAreaLight:IJ,RedFormat:bY,RedIntegerFormat:cO,ReinhardToneMapping:uY,RenderTarget:FY,RepeatWrapping:lv,ReplaceStencilOp:qIe,ReverseSubtractEquation:zX,RingGeometry:R2,SIGNED_RED_GREEN_RGTC2_Format:YD,SIGNED_RED_RGTC1_Format:$D,SRGBColorSpace:ri,SRGBTransfer:en,Scene:bv,ShaderChunk:cr,ShaderLib:bs,ShaderMaterial:ts,ShadowMaterial:mJ,Shape:dd,ShapeGeometry:P2,ShapePath:C8e,ShapeUtils:vl,ShortType:mY,Skeleton:M2,SkeletonHelper:f8e,SkinnedMesh:tJ,Source:Kh,Sphere:ea,SphereGeometry:by,Spherical:s3,SphericalHarmonics3:LJ,SplineCurve:PO,SpotLight:NJ,SpotLightHelper:d8e,Sprite:QY,SpriteMaterial:CO,SrcAlphaFactor:zS,SrcAlphaSaturateFactor:XX,SrcColorFactor:HX,StaticCopyUsage:lLe,StaticDrawUsage:gv,StaticReadUsage:aLe,StereoCamera:j6e,StreamCopyUsage:cLe,StreamDrawUsage:iLe,StreamReadUsage:sLe,StringKeyframeTrack:Vd,SubtractEquation:BX,SubtractiveBlending:xD,TOUCH:Ih,TangentSpaceNormalMap:sh,TetrahedronGeometry:I2,Texture:Sn,TextureLoader:R6e,TorusGeometry:L2,TorusKnotGeometry:F2,Triangle:go,TriangleFanDrawMode:HIe,TriangleStripDrawMode:jIe,TrianglesDrawMode:UIe,TubeGeometry:B2,UVMapping:f2,Uint16BufferAttribute:xO,Uint32BufferAttribute:wO,Uint8BufferAttribute:GLe,Uint8ClampedBufferAttribute:$Le,Uniform:$O,UniformsGroup:o8e,UniformsLib:pt,UniformsUtils:UY,UnsignedByteType:gl,UnsignedInt248Type:Rc,UnsignedIntType:iu,UnsignedShort4444Type:lO,UnsignedShort5551Type:uO,UnsignedShortType:p2,VSMShadowMap:ms,Vector2:Qe,Vector3:me,Vector4:Fr,VectorKeyframeTrack:Ev,VideoTexture:Gze,WebGL1Renderer:ZY,WebGL3DRenderTarget:OLe,WebGLArrayRenderTarget:NLe,WebGLCoordinateSystem:ll,WebGLCubeRenderTarget:HY,WebGLMultipleRenderTargets:RLe,WebGLRenderTarget:es,WebGLRenderer:EO,WebGLUtils:YY,WebGPUCoordinateSystem:vv,WireframeGeometry:LO,WrapAroundEnding:dv,ZeroCurvatureEnding:Jh,ZeroFactor:UX,ZeroSlopeEnding:Zh,ZeroStencilOp:VIe,_SRGBAFormat:HS,createCanvasElement:LY,sRGBEncoding:Ic},Symbol.toStringTag,{value:"Module"}));var qJ={exports:{}},qd={};/**
* @license React
* react-reconciler-constants.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/qd.ConcurrentRoot=1;qd.ContinuousEventPriority=4;qd.DefaultEventPriority=16;qd.DiscreteEventPriority=1;qd.IdleEventPriority=536870912;qd.LegacyRoot=0;qJ.exports=qd;var fp=qJ.exports,WJ={exports:{}},GJ={exports:{}},$J={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(r){function e(z,B){var X=z.length;z.push(B);e:for(;0<X;){var Z=X-1>>>1,Q=z[Z];if(0<i(Q,B))z[Z]=B,z[X]=Q,X=Z;else break e}}function t(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var B=z[0],X=z.pop();if(X!==B){z[0]=X;e:for(var Z=0,Q=z.length,J=Q>>>1;Z<J;){var ne=2*(Z+1)-1,fe=z[ne],se=ne+1,ye=z[se];if(0>i(fe,X))se<Q&&0>i(ye,fe)?(z[Z]=ye,z[se]=X,Z=se):(z[Z]=fe,z[ne]=X,Z=ne);else if(se<Q&&0>i(ye,X))z[Z]=ye,z[se]=X,Z=se;else break e}}return B}function i(z,B){var X=z.sortIndex-B.sortIndex;return X!==0?X:z.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();r.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var B=t(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=z)n(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=t(u)}}function m(z){if(v=!1,b(z),!p)if(t(l)!==null)p=!0,k(x);else{var B=t(u);B!==null&&R(m,B.startTime-z)}}function x(z,B){p=!1,v&&(v=!1,g(A),A=-1),f=!0;var X=d;try{for(b(B),h=t(l);h!==null&&(!(h.expirationTime>B)||z&&!D());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,d=h.priorityLevel;var Q=Z(h.expirationTime<=B);B=r.unstable_now(),typeof Q=="function"?h.callback=Q:h===t(l)&&n(l),b(B)}else n(l);h=t(l)}if(h!==null)var J=!0;else{var ne=t(u);ne!==null&&R(m,ne.startTime-B),J=!1}return J}finally{h=null,d=X,f=!1}}var S=!1,E=null,A=-1,T=5,C=-1;function D(){return!(r.unstable_now()-C<T)}function O(){if(E!==null){var z=r.unstable_now();C=z;var B=!0;try{B=E(!0,z)}finally{B?U():(S=!1,E=null)}}else S=!1}var U;if(typeof w=="function")U=function(){w(O)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,F=L.port2;L.port1.onmessage=O,U=function(){F.postMessage(null)}}else U=function(){y(O,0)};function k(z){E=z,S||(S=!0,U())}function R(z,B){A=y(function(){z(r.unstable_now())},B)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(z){z.callback=null},r.unstable_continueExecution=function(){p||f||(p=!0,k(x))},r.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(z){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var X=d;d=B;try{return z()}finally{d=X}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(z,B){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=d;d=z;try{return B()}finally{d=X}},r.unstable_scheduleCallback=function(z,B,X){var Z=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Z+X:Z):X=Z,z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=X+Q,z={id:c++,callback:B,priorityLevel:z,startTime:X,expirationTime:Q,sortIndex:-1},X>Z?(z.sortIndex=X,e(u,z),t(l)===null&&z===t(u)&&(v?(g(A),A=-1):v=!0,R(m,X-Z))):(z.sortIndex=Q,e(l,z),p||f||(p=!0,k(x))),z},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(z){var B=d;return function(){var X=d;d=B;try{return z.apply(this,arguments)}finally{d=X}}}})($J);GJ.exports=$J;var l3=GJ.exports;/**
* @license React
* react-reconciler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var T8e=function(r){var e={},t=j,n=l3,i=Object.assign;function a(M){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+M,N=1;N<arguments.length;N++)_+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+M+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,s=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),m=Symbol.iterator;function x(M){return M===null||typeof M!="object"?null:(M=m&&M[m]||M["@@iterator"],typeof M=="function"?M:null)}function S(M){if(M==null)return null;if(typeof M=="function")return M.displayName||M.name||null;if(typeof M=="string")return M;switch(M){case u:return"Fragment";case l:return"Portal";case h:return"Profiler";case c:return"StrictMode";case v:return"Suspense";case y:return"SuspenseList"}if(typeof M=="object")switch(M.$$typeof){case f:return(M.displayName||"Context")+".Consumer";case d:return(M._context.displayName||"Context")+".Provider";case p:var _=M.render;return M=M.displayName,M||(M=_.displayName||_.name||"",M=M!==""?"ForwardRef("+M+")":"ForwardRef"),M;case g:return _=M.displayName||null,_!==null?_:S(M.type)||"Memo";case w:_=M._payload,M=M._init;try{return S(M(_))}catch{}}return null}function E(M){var _=M.type;switch(M.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return M=_.render,M=M.displayName||M.name||"",_.displayName||(M!==""?"ForwardRef("+M+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(_);case 8:return _===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function A(M){var _=M,N=M;if(M.alternate)for(;_.return;)_=_.return;else{M=_;do _=M,_.flags&4098&&(N=_.return),M=_.return;while(M)}return _.tag===3?N:null}function T(M){if(A(M)!==M)throw Error(a(188))}function C(M){var _=M.alternate;if(!_){if(_=A(M),_===null)throw Error(a(188));return _!==M?null:M}for(var N=M,P=_;;){var q=N.return;if(q===null)break;var Y=q.alternate;if(Y===null){if(P=q.return,P!==null){N=P;continue}break}if(q.child===Y.child){for(Y=q.child;Y;){if(Y===N)return T(q),M;if(Y===P)return T(q),_;Y=Y.sibling}throw Error(a(188))}if(N.return!==P.return)N=q,P=Y;else{for(var Se=!1,Be=q.child;Be;){if(Be===N){Se=!0,N=q,P=Y;break}if(Be===P){Se=!0,P=q,N=Y;break}Be=Be.sibling}if(!Se){for(Be=Y.child;Be;){if(Be===N){Se=!0,N=Y,P=q;break}if(Be===P){Se=!0,P=Y,N=q;break}Be=Be.sibling}if(!Se)throw Error(a(189))}}if(N.alternate!==P)throw Error(a(190))}if(N.tag!==3)throw Error(a(188));return N.stateNode.current===N?M:_}function D(M){return M=C(M),M!==null?O(M):null}function O(M){if(M.tag===5||M.tag===6)return M;for(M=M.child;M!==null;){var _=O(M);if(_!==null)return _;M=M.sibling}return null}function U(M){if(M.tag===5||M.tag===6)return M;for(M=M.child;M!==null;){if(M.tag!==4){var _=U(M);if(_!==null)return _}M=M.sibling}return null}var L=Array.isArray,F=r.getPublicInstance,k=r.getRootHostContext,R=r.getChildHostContext,z=r.prepareForCommit,B=r.resetAfterCommit,X=r.createInstance,Z=r.appendInitialChild,Q=r.finalizeInitialChildren,J=r.prepareUpdate,ne=r.shouldSetTextContent,fe=r.createTextInstance,se=r.scheduleTimeout,ye=r.cancelTimeout,De=r.noTimeout,pe=r.isPrimaryRenderer,Te=r.supportsMutation,be=r.supportsPersistence,re=r.supportsHydration,Re=r.getInstanceFromNode,ze=r.preparePortalMount,K=r.getCurrentEventPriority,ie=r.detachDeletedInstance,_e=r.supportsMicrotasks,oe=r.scheduleMicrotask,G=r.supportsTestSelectors,W=r.findFiberRoot,ce=r.getBoundingRect,Ce=r.getTextContent,$=r.isHiddenSubtree,ee=r.matchAccessibilityRole,ge=r.setFocusIfFocusable,xe=r.setupIntersectionObserver,Ne=r.appendChild,Fe=r.appendChildToContainer,We=r.commitTextUpdate,ke=r.commitMount,it=r.commitUpdate,Je=r.insertBefore,st=r.insertInContainerBefore,we=r.removeChild,Pe=r.removeChildFromContainer,et=r.resetTextContent,V=r.hideInstance,Me=r.hideTextInstance,Le=r.unhideInstance,Ze=r.unhideTextInstance,he=r.clearContainer,Xe=r.cloneInstance,H=r.createContainerChildSet,te=r.appendChildToContainerChildSet,le=r.finalizeContainerChildren,ve=r.replaceContainerChildren,Ee=r.cloneHiddenInstance,Oe=r.cloneHiddenTextInstance,He=r.canHydrateInstance,$e=r.canHydrateTextInstance,rt=r.canHydrateSuspenseInstance,ft=r.isSuspenseInstancePending,Mt=r.isSuspenseInstanceFallback,nt=r.registerSuspenseInstanceRetry,xt=r.getNextHydratableSibling,$t=r.getFirstHydratableChild,Rn=r.getFirstHydratableChildWithinContainer,En=r.getFirstHydratableChildWithinSuspenseInstance,Zr=r.hydrateInstance,Bs=r.hydrateTextInstance,Iu=r.hydrateSuspenseInstance,xi=r.getNextHydratableInstanceAfterSuspenseInstance,de=r.commitHydratedContainer,Ie=r.commitHydratedSuspenseInstance,je=r.clearSuspenseBoundary,Ve=r.clearSuspenseBoundaryFromContainer,qe=r.shouldDeleteUnhydratedTailInstances,dt=r.didNotMatchHydratedContainerTextInstance,At=r.didNotMatchHydratedTextInstance,kt;function ct(M){if(kt===void 0)try{throw Error()}catch(N){var _=N.stack.trim().match(/\n( *(at )?)/);kt=_&&_[1]||""}return`
`+kt+M}var Ot=!1;function Ut(M,_){if(!M||Ot)return"";Ot=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(ht){var P=ht}Reflect.construct(M,[],_)}else{try{_.call()}catch(ht){P=ht}M.call(_.prototype)}else{try{throw Error()}catch(ht){P=ht}M()}}catch(ht){if(ht&&P&&typeof ht.stack=="string"){for(var q=ht.stack.split(`
`),Y=P.stack.split(`
`),Se=q.length-1,Be=Y.length-1;1<=Se&&0<=Be&&q[Se]!==Y[Be];)Be--;for(;1<=Se&&0<=Be;Se--,Be--)if(q[Se]!==Y[Be]){if(Se!==1||Be!==1)do if(Se--,Be--,0>Be||q[Se]!==Y[Be]){var Ke=`
`+q[Se].replace(" at new "," at ");return M.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",M.displayName)),Ke}while(1<=Se&&0<=Be);break}}}finally{Ot=!1,Error.prepareStackTrace=N}return(M=M?M.displayName||M.name:"")?ct(M):""}var Rt=Object.prototype.hasOwnProperty,Kr=[],qr=-1;function Pn(M){return{current:M}}function vr(M){0>qr||(M.current=Kr[qr],Kr[qr]=null,qr--)}function Xt(M,_){qr++,Kr[qr]=M.current,M.current=_}var Jt={},Hn=Pn(Jt),ci=Pn(!1),sa=Jt;function Ol(M,_){var N=M.type.contextTypes;if(!N)return Jt;var P=M.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===_)return P.__reactInternalMemoizedMaskedChildContext;var q={},Y;for(Y in N)q[Y]=_[Y];return P&&(M=M.stateNode,M.__reactInternalMemoizedUnmaskedChildContext=_,M.__reactInternalMemoizedMaskedChildContext=q),q}function Vn(M){return M=M.childContextTypes,M!=null}function Lu(){vr(ci),vr(Hn)}function Zn(M,_,N){if(Hn.current!==Jt)throw Error(a(168));Xt(Hn,_),Xt(ci,N)}function zs(M,_,N){var P=M.stateNode;if(_=_.childContextTypes,typeof P.getChildContext!="function")return N;P=P.getChildContext();for(var q in P)if(!(q in _))throw Error(a(108,E(M)||"Unknown",q));return i({},N,P)}function Fu(M){return M=(M=M.stateNode)&&M.__reactInternalMemoizedMergedChildContext||Jt,sa=Hn.current,Xt(Hn,M),Xt(ci,ci.current),!0}function la(M,_,N){var P=M.stateNode;if(!P)throw Error(a(169));N?(M=zs(M,_,sa),P.__reactInternalMemoizedMergedChildContext=M,vr(ci),vr(Hn),Xt(Hn,M)):vr(ci),Xt(ci,N)}var ua=Math.clz32?Math.clz32:wee,e_=Math.log,ky=Math.LN2;function wee(M){return M>>>=0,M===0?32:31-(e_(M)/ky|0)|0}var Ny=64,Oy=4194304;function Hm(M){switch(M&-M){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return M&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return M&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return M}}function Ry(M,_){var N=M.pendingLanes;if(N===0)return 0;var P=0,q=M.suspendedLanes,Y=M.pingedLanes,Se=N&268435455;if(Se!==0){var Be=Se&~q;Be!==0?P=Hm(Be):(Y&=Se,Y!==0&&(P=Hm(Y)))}else Se=N&~q,Se!==0?P=Hm(Se):Y!==0&&(P=Hm(Y));if(P===0)return 0;if(_!==0&&_!==P&&!(_&q)&&(q=P&-P,Y=_&-_,q>=Y||q===16&&(Y&4194240)!==0))return _;if(P&4&&(P|=N&16),_=M.entangledLanes,_!==0)for(M=M.entanglements,_&=P;0<_;)N=31-ua(_),q=1<<N,P|=M[N],_&=~q;return P}function See(M,_){switch(M){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mee(M,_){for(var N=M.suspendedLanes,P=M.pingedLanes,q=M.expirationTimes,Y=M.pendingLanes;0<Y;){var Se=31-ua(Y),Be=1<<Se,Ke=q[Se];Ke===-1?(!(Be&N)||Be&P)&&(q[Se]=See(Be,_)):Ke<=_&&(M.expiredLanes|=Be),Y&=~Be}}function t_(M){return M=M.pendingLanes&-1073741825,M!==0?M:M&1073741824?1073741824:0}function r_(M){for(var _=[],N=0;31>N;N++)_.push(M);return _}function Vm(M,_,N){M.pendingLanes|=_,_!==536870912&&(M.suspendedLanes=0,M.pingedLanes=0),M=M.eventTimes,_=31-ua(_),M[_]=N}function _ee(M,_){var N=M.pendingLanes&~_;M.pendingLanes=_,M.suspendedLanes=0,M.pingedLanes=0,M.expiredLanes&=_,M.mutableReadLanes&=_,M.entangledLanes&=_,_=M.entanglements;var P=M.eventTimes;for(M=M.expirationTimes;0<N;){var q=31-ua(N),Y=1<<q;_[q]=0,P[q]=-1,M[q]=-1,N&=~Y}}function n_(M,_){var N=M.entangledLanes|=_;for(M=M.entanglements;N;){var P=31-ua(N),q=1<<P;q&_|M[P]&_&&(M[P]|=_),N&=~q}}var Ar=0;function TR(M){return M&=-M,1<M?4<M?M&268435455?16:536870912:4:1}var i_=n.unstable_scheduleCallback,DR=n.unstable_cancelCallback,Eee=n.unstable_shouldYield,Cee=n.unstable_requestPaint,hi=n.unstable_now,a_=n.unstable_ImmediatePriority,Aee=n.unstable_UserBlockingPriority,o_=n.unstable_NormalPriority,Tee=n.unstable_IdlePriority,Py=null,Us=null;function Dee(M){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(Py,M,void 0,(M.current.flags&128)===128)}catch{}}function kee(M,_){return M===_&&(M!==0||1/M===1/_)||M!==M&&_!==_}var js=typeof Object.is=="function"?Object.is:kee,Rl=null,Iy=!1,s_=!1;function kR(M){Rl===null?Rl=[M]:Rl.push(M)}function Nee(M){Iy=!0,kR(M)}function Hs(){if(!s_&&Rl!==null){s_=!0;var M=0,_=Ar;try{var N=Rl;for(Ar=1;M<N.length;M++){var P=N[M];do P=P(!0);while(P!==null)}Rl=null,Iy=!1}catch(q){throw Rl!==null&&(Rl=Rl.slice(M+1)),i_(a_,Hs),q}finally{Ar=_,s_=!1}}return null}var Oee=o.ReactCurrentBatchConfig;function Ly(M,_){if(js(M,_))return!0;if(typeof M!="object"||M===null||typeof _!="object"||_===null)return!1;var N=Object.keys(M),P=Object.keys(_);if(N.length!==P.length)return!1;for(P=0;P<N.length;P++){var q=N[P];if(!Rt.call(_,q)||!js(M[q],_[q]))return!1}return!0}function Ree(M){switch(M.tag){case 5:return ct(M.type);case 16:return ct("Lazy");case 13:return ct("Suspense");case 19:return ct("SuspenseList");case 0:case 2:case 15:return M=Ut(M.type,!1),M;case 11:return M=Ut(M.type.render,!1),M;case 1:return M=Ut(M.type,!0),M;default:return""}}function ls(M,_){if(M&&M.defaultProps){_=i({},_),M=M.defaultProps;for(var N in M)_[N]===void 0&&(_[N]=M[N]);return _}return _}var Fy=Pn(null),By=null,Gd=null,l_=null;function u_(){l_=Gd=By=null}function NR(M,_,N){pe?(Xt(Fy,_._currentValue),_._currentValue=N):(Xt(Fy,_._currentValue2),_._currentValue2=N)}function c_(M){var _=Fy.current;vr(Fy),pe?M._currentValue=_:M._currentValue2=_}function h_(M,_,N){for(;M!==null;){var P=M.alternate;if((M.childLanes&_)!==_?(M.childLanes|=_,P!==null&&(P.childLanes|=_)):P!==null&&(P.childLanes&_)!==_&&(P.childLanes|=_),M===N)break;M=M.return}}function $d(M,_){By=M,l_=Gd=null,M=M.dependencies,M!==null&&M.firstContext!==null&&(M.lanes&_&&(ro=!0),M.firstContext=null)}function Do(M){var _=pe?M._currentValue:M._currentValue2;if(l_!==M)if(M={context:M,memoizedValue:_,next:null},Gd===null){if(By===null)throw Error(a(308));Gd=M,By.dependencies={lanes:0,firstContext:M}}else Gd=Gd.next=M;return _}var Vs=null,Bu=!1;function d_(M){M.updateQueue={baseState:M.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OR(M,_){M=M.updateQueue,_.updateQueue===M&&(_.updateQueue={baseState:M.baseState,firstBaseUpdate:M.firstBaseUpdate,lastBaseUpdate:M.lastBaseUpdate,shared:M.shared,effects:M.effects})}function Pl(M,_){return{eventTime:M,lane:_,tag:0,payload:null,callback:null,next:null}}function zu(M,_){var N=M.updateQueue;N!==null&&(N=N.shared,qn!==null&&M.mode&1&&!(pr&2)?(M=N.interleaved,M===null?(_.next=_,Vs===null?Vs=[N]:Vs.push(N)):(_.next=M.next,M.next=_),N.interleaved=_):(M=N.pending,M===null?_.next=_:(_.next=M.next,M.next=_),N.pending=_))}function zy(M,_,N){if(_=_.updateQueue,_!==null&&(_=_.shared,(N&4194240)!==0)){var P=_.lanes;P&=M.pendingLanes,N|=P,_.lanes=N,n_(M,N)}}function RR(M,_){var N=M.updateQueue,P=M.alternate;if(P!==null&&(P=P.updateQueue,N===P)){var q=null,Y=null;if(N=N.firstBaseUpdate,N!==null){do{var Se={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};Y===null?q=Y=Se:Y=Y.next=Se,N=N.next}while(N!==null);Y===null?q=Y=_:Y=Y.next=_}else q=Y=_;N={baseState:P.baseState,firstBaseUpdate:q,lastBaseUpdate:Y,shared:P.shared,effects:P.effects},M.updateQueue=N;return}M=N.lastBaseUpdate,M===null?N.firstBaseUpdate=_:M.next=_,N.lastBaseUpdate=_}function Uy(M,_,N,P){var q=M.updateQueue;Bu=!1;var Y=q.firstBaseUpdate,Se=q.lastBaseUpdate,Be=q.shared.pending;if(Be!==null){q.shared.pending=null;var Ke=Be,ht=Ke.next;Ke.next=null,Se===null?Y=ht:Se.next=ht,Se=Ke;var _t=M.alternate;_t!==null&&(_t=_t.updateQueue,Be=_t.lastBaseUpdate,Be!==Se&&(Be===null?_t.firstBaseUpdate=ht:Be.next=ht,_t.lastBaseUpdate=Ke))}if(Y!==null){var nr=q.baseState;Se=0,_t=ht=Ke=null,Be=Y;do{var Vt=Be.lane,$r=Be.eventTime;if((P&Vt)===Vt){_t!==null&&(_t=_t.next={eventTime:$r,lane:0,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null});e:{var Pt=M,ji=Be;switch(Vt=_,$r=N,ji.tag){case 1:if(Pt=ji.payload,typeof Pt=="function"){nr=Pt.call($r,nr,Vt);break e}nr=Pt;break e;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=ji.payload,Vt=typeof Pt=="function"?Pt.call($r,nr,Vt):Pt,Vt==null)break e;nr=i({},nr,Vt);break e;case 2:Bu=!0}}Be.callback!==null&&Be.lane!==0&&(M.flags|=64,Vt=q.effects,Vt===null?q.effects=[Be]:Vt.push(Be))}else $r={eventTime:$r,lane:Vt,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},_t===null?(ht=_t=$r,Ke=nr):_t=_t.next=$r,Se|=Vt;if(Be=Be.next,Be===null){if(Be=q.shared.pending,Be===null)break;Vt=Be,Be=Vt.next,Vt.next=null,q.lastBaseUpdate=Vt,q.shared.pending=null}}while(!0);if(_t===null&&(Ke=nr),q.baseState=Ke,q.firstBaseUpdate=ht,q.lastBaseUpdate=_t,_=q.shared.interleaved,_!==null){q=_;do Se|=q.lane,q=q.next;while(q!==_)}else Y===null&&(q.shared.lanes=0);rf|=Se,M.lanes=Se,M.memoizedState=nr}}function PR(M,_,N){if(M=_.effects,_.effects=null,M!==null)for(_=0;_<M.length;_++){var P=M[_],q=P.callback;if(q!==null){if(P.callback=null,P=N,typeof q!="function")throw Error(a(191,q));q.call(P)}}}var IR=new t.Component().refs;function f_(M,_,N,P){_=M.memoizedState,N=N(P,_),N=N==null?_:i({},_,N),M.memoizedState=N,M.lanes===0&&(M.updateQueue.baseState=N)}var jy={isMounted:function(M){return(M=M._reactInternals)?A(M)===M:!1},enqueueSetState:function(M,_,N){M=M._reactInternals;var P=ha(),q=Hu(M),Y=Pl(P,q);Y.payload=_,N!=null&&(Y.callback=N),zu(M,Y),_=Po(M,q,P),_!==null&&zy(_,M,q)},enqueueReplaceState:function(M,_,N){M=M._reactInternals;var P=ha(),q=Hu(M),Y=Pl(P,q);Y.tag=1,Y.payload=_,N!=null&&(Y.callback=N),zu(M,Y),_=Po(M,q,P),_!==null&&zy(_,M,q)},enqueueForceUpdate:function(M,_){M=M._reactInternals;var N=ha(),P=Hu(M),q=Pl(N,P);q.tag=2,_!=null&&(q.callback=_),zu(M,q),_=Po(M,P,N),_!==null&&zy(_,M,P)}};function LR(M,_,N,P,q,Y,Se){return M=M.stateNode,typeof M.shouldComponentUpdate=="function"?M.shouldComponentUpdate(P,Y,Se):_.prototype&&_.prototype.isPureReactComponent?!Ly(N,P)||!Ly(q,Y):!0}function FR(M,_,N){var P=!1,q=Jt,Y=_.contextType;return typeof Y=="object"&&Y!==null?Y=Do(Y):(q=Vn(_)?sa:Hn.current,P=_.contextTypes,Y=(P=P!=null)?Ol(M,q):Jt),_=new _(N,Y),M.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=jy,M.stateNode=_,_._reactInternals=M,P&&(M=M.stateNode,M.__reactInternalMemoizedUnmaskedChildContext=q,M.__reactInternalMemoizedMaskedChildContext=Y),_}function BR(M,_,N,P){M=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(N,P),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(N,P),_.state!==M&&jy.enqueueReplaceState(_,_.state,null)}function p_(M,_,N,P){var q=M.stateNode;q.props=N,q.state=M.memoizedState,q.refs=IR,d_(M);var Y=_.contextType;typeof Y=="object"&&Y!==null?q.context=Do(Y):(Y=Vn(_)?sa:Hn.current,q.context=Ol(M,Y)),q.state=M.memoizedState,Y=_.getDerivedStateFromProps,typeof Y=="function"&&(f_(M,_,Y,N),q.state=M.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(_=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),_!==q.state&&jy.enqueueReplaceState(q,q.state,null),Uy(M,N,q,P),q.state=M.memoizedState),typeof q.componentDidMount=="function"&&(M.flags|=4194308)}var Xd=[],Yd=0,Hy=null,Vy=0,ko=[],No=0,dh=null,Il=1,Ll="";function fh(M,_){Xd[Yd++]=Vy,Xd[Yd++]=Hy,Hy=M,Vy=_}function zR(M,_,N){ko[No++]=Il,ko[No++]=Ll,ko[No++]=dh,dh=M;var P=Il;M=Ll;var q=32-ua(P)-1;P&=~(1<<q),N+=1;var Y=32-ua(_)+q;if(30<Y){var Se=q-q%5;Y=(P&(1<<Se)-1).toString(32),P>>=Se,q-=Se,Il=1<<32-ua(_)+q|N<<q|P,Ll=Y+M}else Il=1<<Y|N<<q|P,Ll=M}function m_(M){M.return!==null&&(fh(M,1),zR(M,1,0))}function g_(M){for(;M===Hy;)Hy=Xd[--Yd],Xd[Yd]=null,Vy=Xd[--Yd],Xd[Yd]=null;for(;M===dh;)dh=ko[--No],ko[No]=null,Ll=ko[--No],ko[No]=null,Il=ko[--No],ko[No]=null}var eo=null,to=null,cn=!1,qm=!1,us=null;function UR(M,_){var N=Io(5,null,null,0);N.elementType="DELETED",N.stateNode=_,N.return=M,_=M.deletions,_===null?(M.deletions=[N],M.flags|=16):_.push(N)}function jR(M,_){switch(M.tag){case 5:return _=He(_,M.type,M.pendingProps),_!==null?(M.stateNode=_,eo=M,to=$t(_),!0):!1;case 6:return _=$e(_,M.pendingProps),_!==null?(M.stateNode=_,eo=M,to=null,!0):!1;case 13:if(_=rt(_),_!==null){var N=dh!==null?{id:Il,overflow:Ll}:null;return M.memoizedState={dehydrated:_,treeContext:N,retryLane:1073741824},N=Io(18,null,null,0),N.stateNode=_,N.return=M,M.child=N,eo=M,to=null,!0}return!1;default:return!1}}function v_(M){return(M.mode&1)!==0&&(M.flags&128)===0}function y_(M){if(cn){var _=to;if(_){var N=_;if(!jR(M,_)){if(v_(M))throw Error(a(418));_=xt(N);var P=eo;_&&jR(M,_)?UR(P,N):(M.flags=M.flags&-4097|2,cn=!1,eo=M)}}else{if(v_(M))throw Error(a(418));M.flags=M.flags&-4097|2,cn=!1,eo=M}}}function HR(M){for(M=M.return;M!==null&&M.tag!==5&&M.tag!==3&&M.tag!==13;)M=M.return;eo=M}function Wm(M){if(!re||M!==eo)return!1;if(!cn)return HR(M),cn=!0,!1;if(M.tag!==3&&(M.tag!==5||qe(M.type)&&!ne(M.type,M.memoizedProps))){var _=to;if(_){if(v_(M)){for(M=to;M;)M=xt(M);throw Error(a(418))}for(;_;)UR(M,_),_=xt(_)}}if(HR(M),M.tag===13){if(!re)throw Error(a(316));if(M=M.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(a(317));to=xi(M)}else to=eo?xt(M.stateNode):null;return!0}function Jd(){re&&(to=eo=null,qm=cn=!1)}function b_(M){us===null?us=[M]:us.push(M)}function Gm(M,_,N){if(M=N.ref,M!==null&&typeof M!="function"&&typeof M!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(a(309));var P=N.stateNode}if(!P)throw Error(a(147,M));var q=P,Y=""+M;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===Y?_.ref:(_=function(Se){var Be=q.refs;Be===IR&&(Be=q.refs={}),Se===null?delete Be[Y]:Be[Y]=Se},_._stringRef=Y,_)}if(typeof M!="string")throw Error(a(284));if(!N._owner)throw Error(a(290,M))}return M}function qy(M,_){throw M=Object.prototype.toString.call(_),Error(a(31,M==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":M))}function VR(M){var _=M._init;return _(M._payload)}function qR(M){function _(Ge,Ue){if(M){var Ye=Ge.deletions;Ye===null?(Ge.deletions=[Ue],Ge.flags|=16):Ye.push(Ue)}}function N(Ge,Ue){if(!M)return null;for(;Ue!==null;)_(Ge,Ue),Ue=Ue.sibling;return null}function P(Ge,Ue){for(Ge=new Map;Ue!==null;)Ue.key!==null?Ge.set(Ue.key,Ue):Ge.set(Ue.index,Ue),Ue=Ue.sibling;return Ge}function q(Ge,Ue){return Ge=qu(Ge,Ue),Ge.index=0,Ge.sibling=null,Ge}function Y(Ge,Ue,Ye){return Ge.index=Ye,M?(Ye=Ge.alternate,Ye!==null?(Ye=Ye.index,Ye<Ue?(Ge.flags|=2,Ue):Ye):(Ge.flags|=2,Ue)):(Ge.flags|=1048576,Ue)}function Se(Ge){return M&&Ge.alternate===null&&(Ge.flags|=2),Ge}function Be(Ge,Ue,Ye,yt){return Ue===null||Ue.tag!==6?(Ue=tE(Ye,Ge.mode,yt),Ue.return=Ge,Ue):(Ue=q(Ue,Ye),Ue.return=Ge,Ue)}function Ke(Ge,Ue,Ye,yt){var It=Ye.type;return It===u?_t(Ge,Ue,Ye.props.children,yt,Ye.key):Ue!==null&&(Ue.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===w&&VR(It)===Ue.type)?(yt=q(Ue,Ye.props),yt.ref=Gm(Ge,Ue,Ye),yt.return=Ge,yt):(yt=w1(Ye.type,Ye.key,Ye.props,null,Ge.mode,yt),yt.ref=Gm(Ge,Ue,Ye),yt.return=Ge,yt)}function ht(Ge,Ue,Ye,yt){return Ue===null||Ue.tag!==4||Ue.stateNode.containerInfo!==Ye.containerInfo||Ue.stateNode.implementation!==Ye.implementation?(Ue=rE(Ye,Ge.mode,yt),Ue.return=Ge,Ue):(Ue=q(Ue,Ye.children||[]),Ue.return=Ge,Ue)}function _t(Ge,Ue,Ye,yt,It){return Ue===null||Ue.tag!==7?(Ue=xh(Ye,Ge.mode,yt,It),Ue.return=Ge,Ue):(Ue=q(Ue,Ye),Ue.return=Ge,Ue)}function nr(Ge,Ue,Ye){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return Ue=tE(""+Ue,Ge.mode,Ye),Ue.return=Ge,Ue;if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case s:return Ye=w1(Ue.type,Ue.key,Ue.props,null,Ge.mode,Ye),Ye.ref=Gm(Ge,null,Ue),Ye.return=Ge,Ye;case l:return Ue=rE(Ue,Ge.mode,Ye),Ue.return=Ge,Ue;case w:var yt=Ue._init;return nr(Ge,yt(Ue._payload),Ye)}if(L(Ue)||x(Ue))return Ue=xh(Ue,Ge.mode,Ye,null),Ue.return=Ge,Ue;qy(Ge,Ue)}return null}function Vt(Ge,Ue,Ye,yt){var It=Ue!==null?Ue.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return It!==null?null:Be(Ge,Ue,""+Ye,yt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case s:return Ye.key===It?Ke(Ge,Ue,Ye,yt):null;case l:return Ye.key===It?ht(Ge,Ue,Ye,yt):null;case w:return It=Ye._init,Vt(Ge,Ue,It(Ye._payload),yt)}if(L(Ye)||x(Ye))return It!==null?null:_t(Ge,Ue,Ye,yt,null);qy(Ge,Ye)}return null}function $r(Ge,Ue,Ye,yt,It){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return Ge=Ge.get(Ye)||null,Be(Ue,Ge,""+yt,It);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case s:return Ge=Ge.get(yt.key===null?Ye:yt.key)||null,Ke(Ue,Ge,yt,It);case l:return Ge=Ge.get(yt.key===null?Ye:yt.key)||null,ht(Ue,Ge,yt,It);case w:var dr=yt._init;return $r(Ge,Ue,Ye,dr(yt._payload),It)}if(L(yt)||x(yt))return Ge=Ge.get(Ye)||null,_t(Ue,Ge,yt,It,null);qy(Ue,yt)}return null}function Pt(Ge,Ue,Ye,yt){for(var It=null,dr=null,ir=Ue,Tr=Ue=0,fi=null;ir!==null&&Tr<Ye.length;Tr++){ir.index>Tr?(fi=ir,ir=null):fi=ir.sibling;var Dr=Vt(Ge,ir,Ye[Tr],yt);if(Dr===null){ir===null&&(ir=fi);break}M&&ir&&Dr.alternate===null&&_(Ge,ir),Ue=Y(Dr,Ue,Tr),dr===null?It=Dr:dr.sibling=Dr,dr=Dr,ir=fi}if(Tr===Ye.length)return N(Ge,ir),cn&&fh(Ge,Tr),It;if(ir===null){for(;Tr<Ye.length;Tr++)ir=nr(Ge,Ye[Tr],yt),ir!==null&&(Ue=Y(ir,Ue,Tr),dr===null?It=ir:dr.sibling=ir,dr=ir);return cn&&fh(Ge,Tr),It}for(ir=P(Ge,ir);Tr<Ye.length;Tr++)fi=$r(ir,Ge,Tr,Ye[Tr],yt),fi!==null&&(M&&fi.alternate!==null&&ir.delete(fi.key===null?Tr:fi.key),Ue=Y(fi,Ue,Tr),dr===null?It=fi:dr.sibling=fi,dr=fi);return M&&ir.forEach(function(Wu){return _(Ge,Wu)}),cn&&fh(Ge,Tr),It}function ji(Ge,Ue,Ye,yt){var It=x(Ye);if(typeof It!="function")throw Error(a(150));if(Ye=It.call(Ye),Ye==null)throw Error(a(151));for(var dr=It=null,ir=Ue,Tr=Ue=0,fi=null,Dr=Ye.next();ir!==null&&!Dr.done;Tr++,Dr=Ye.next()){ir.index>Tr?(fi=ir,ir=null):fi=ir.sibling;var Wu=Vt(Ge,ir,Dr.value,yt);if(Wu===null){ir===null&&(ir=fi);break}M&&ir&&Wu.alternate===null&&_(Ge,ir),Ue=Y(Wu,Ue,Tr),dr===null?It=Wu:dr.sibling=Wu,dr=Wu,ir=fi}if(Dr.done)return N(Ge,ir),cn&&fh(Ge,Tr),It;if(ir===null){for(;!Dr.done;Tr++,Dr=Ye.next())Dr=nr(Ge,Dr.value,yt),Dr!==null&&(Ue=Y(Dr,Ue,Tr),dr===null?It=Dr:dr.sibling=Dr,dr=Dr);return cn&&fh(Ge,Tr),It}for(ir=P(Ge,ir);!Dr.done;Tr++,Dr=Ye.next())Dr=$r(ir,Ge,Tr,Dr.value,yt),Dr!==null&&(M&&Dr.alternate!==null&&ir.delete(Dr.key===null?Tr:Dr.key),Ue=Y(Dr,Ue,Tr),dr===null?It=Dr:dr.sibling=Dr,dr=Dr);return M&&ir.forEach(function(ute){return _(Ge,ute)}),cn&&fh(Ge,Tr),It}function Lo(Ge,Ue,Ye,yt){if(typeof Ye=="object"&&Ye!==null&&Ye.type===u&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case s:e:{for(var It=Ye.key,dr=Ue;dr!==null;){if(dr.key===It){if(It=Ye.type,It===u){if(dr.tag===7){N(Ge,dr.sibling),Ue=q(dr,Ye.props.children),Ue.return=Ge,Ge=Ue;break e}}else if(dr.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===w&&VR(It)===dr.type){N(Ge,dr.sibling),Ue=q(dr,Ye.props),Ue.ref=Gm(Ge,dr,Ye),Ue.return=Ge,Ge=Ue;break e}N(Ge,dr);break}else _(Ge,dr);dr=dr.sibling}Ye.type===u?(Ue=xh(Ye.props.children,Ge.mode,yt,Ye.key),Ue.return=Ge,Ge=Ue):(yt=w1(Ye.type,Ye.key,Ye.props,null,Ge.mode,yt),yt.ref=Gm(Ge,Ue,Ye),yt.return=Ge,Ge=yt)}return Se(Ge);case l:e:{for(dr=Ye.key;Ue!==null;){if(Ue.key===dr)if(Ue.tag===4&&Ue.stateNode.containerInfo===Ye.containerInfo&&Ue.stateNode.implementation===Ye.implementation){N(Ge,Ue.sibling),Ue=q(Ue,Ye.children||[]),Ue.return=Ge,Ge=Ue;break e}else{N(Ge,Ue);break}else _(Ge,Ue);Ue=Ue.sibling}Ue=rE(Ye,Ge.mode,yt),Ue.return=Ge,Ge=Ue}return Se(Ge);case w:return dr=Ye._init,Lo(Ge,Ue,dr(Ye._payload),yt)}if(L(Ye))return Pt(Ge,Ue,Ye,yt);if(x(Ye))return ji(Ge,Ue,Ye,yt);qy(Ge,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"?(Ye=""+Ye,Ue!==null&&Ue.tag===6?(N(Ge,Ue.sibling),Ue=q(Ue,Ye),Ue.return=Ge,Ge=Ue):(N(Ge,Ue),Ue=tE(Ye,Ge.mode,yt),Ue.return=Ge,Ge=Ue),Se(Ge)):N(Ge,Ue)}return Lo}var Zd=qR(!0),WR=qR(!1),$m={},Oo=Pn($m),Xm=Pn($m),Kd=Pn($m);function qs(M){if(M===$m)throw Error(a(174));return M}function x_(M,_){Xt(Kd,_),Xt(Xm,M),Xt(Oo,$m),M=k(_),vr(Oo),Xt(Oo,M)}function Qd(){vr(Oo),vr(Xm),vr(Kd)}function GR(M){var _=qs(Kd.current),N=qs(Oo.current);_=R(N,M.type,_),N!==_&&(Xt(Xm,M),Xt(Oo,_))}function w_(M){Xm.current===M&&(vr(Oo),vr(Xm))}var mn=Pn(0);function Wy(M){for(var _=M;_!==null;){if(_.tag===13){var N=_.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||ft(N)||Mt(N)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===M)break;for(;_.sibling===null;){if(_.return===null||_.return===M)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var S_=[];function M_(){for(var M=0;M<S_.length;M++){var _=S_[M];pe?_._workInProgressVersionPrimary=null:_._workInProgressVersionSecondary=null}S_.length=0}var Gy=o.ReactCurrentDispatcher,Ro=o.ReactCurrentBatchConfig,ef=0,Cn=null,Bi=null,di=null,$y=!1,Ym=!1,Jm=0,Pee=0;function zi(){throw Error(a(321))}function __(M,_){if(_===null)return!1;for(var N=0;N<_.length&&N<M.length;N++)if(!js(M[N],_[N]))return!1;return!0}function E_(M,_,N,P,q,Y){if(ef=Y,Cn=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Gy.current=M===null||M.memoizedState===null?Bee:zee,M=N(P,q),Ym){Y=0;do{if(Ym=!1,Jm=0,25<=Y)throw Error(a(301));Y+=1,di=Bi=null,_.updateQueue=null,Gy.current=Uee,M=N(P,q)}while(Ym)}if(Gy.current=Ky,_=Bi!==null&&Bi.next!==null,ef=0,di=Bi=Cn=null,$y=!1,_)throw Error(a(300));return M}function C_(){var M=Jm!==0;return Jm=0,M}function Fl(){var M={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?Cn.memoizedState=di=M:di=di.next=M,di}function Ws(){if(Bi===null){var M=Cn.alternate;M=M!==null?M.memoizedState:null}else M=Bi.next;var _=di===null?Cn.memoizedState:di.next;if(_!==null)di=_,Bi=M;else{if(M===null)throw Error(a(310));Bi=M,M={memoizedState:Bi.memoizedState,baseState:Bi.baseState,baseQueue:Bi.baseQueue,queue:Bi.queue,next:null},di===null?Cn.memoizedState=di=M:di=di.next=M}return di}function ph(M,_){return typeof _=="function"?_(M):_}function Xy(M){var _=Ws(),N=_.queue;if(N===null)throw Error(a(311));N.lastRenderedReducer=M;var P=Bi,q=P.baseQueue,Y=N.pending;if(Y!==null){if(q!==null){var Se=q.next;q.next=Y.next,Y.next=Se}P.baseQueue=q=Y,N.pending=null}if(q!==null){Y=q.next,P=P.baseState;var Be=Se=null,Ke=null,ht=Y;do{var _t=ht.lane;if((ef&_t)===_t)Ke!==null&&(Ke=Ke.next={lane:0,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null}),P=ht.hasEagerState?ht.eagerState:M(P,ht.action);else{var nr={lane:_t,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null};Ke===null?(Be=Ke=nr,Se=P):Ke=Ke.next=nr,Cn.lanes|=_t,rf|=_t}ht=ht.next}while(ht!==null&&ht!==Y);Ke===null?Se=P:Ke.next=Be,js(P,_.memoizedState)||(ro=!0),_.memoizedState=P,_.baseState=Se,_.baseQueue=Ke,N.lastRenderedState=P}if(M=N.interleaved,M!==null){q=M;do Y=q.lane,Cn.lanes|=Y,rf|=Y,q=q.next;while(q!==M)}else q===null&&(N.lanes=0);return[_.memoizedState,N.dispatch]}function Yy(M){var _=Ws(),N=_.queue;if(N===null)throw Error(a(311));N.lastRenderedReducer=M;var P=N.dispatch,q=N.pending,Y=_.memoizedState;if(q!==null){N.pending=null;var Se=q=q.next;do Y=M(Y,Se.action),Se=Se.next;while(Se!==q);js(Y,_.memoizedState)||(ro=!0),_.memoizedState=Y,_.baseQueue===null&&(_.baseState=Y),N.lastRenderedState=Y}return[Y,P]}function $R(){}function XR(M,_){var N=Cn,P=Ws(),q=_(),Y=!js(P.memoizedState,q);if(Y&&(P.memoizedState=q,ro=!0),P=P.queue,Km(ZR.bind(null,N,P,M),[M]),P.getSnapshot!==_||Y||di!==null&&di.memoizedState.tag&1){if(N.flags|=2048,Zm(9,JR.bind(null,N,P,q,_),void 0,null),qn===null)throw Error(a(349));ef&30||YR(N,_,q)}return q}function YR(M,_,N){M.flags|=16384,M={getSnapshot:_,value:N},_=Cn.updateQueue,_===null?(_={lastEffect:null,stores:null},Cn.updateQueue=_,_.stores=[M]):(N=_.stores,N===null?_.stores=[M]:N.push(M))}function JR(M,_,N,P){_.value=N,_.getSnapshot=P,KR(_)&&Po(M,1,-1)}function ZR(M,_,N){return N(function(){KR(_)&&Po(M,1,-1)})}function KR(M){var _=M.getSnapshot;M=M.value;try{var N=_();return!js(M,N)}catch{return!0}}function A_(M){var _=Fl();return typeof M=="function"&&(M=M()),_.memoizedState=_.baseState=M,M={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ph,lastRenderedState:M},_.queue=M,M=M.dispatch=Fee.bind(null,Cn,M),[_.memoizedState,M]}function Zm(M,_,N,P){return M={tag:M,create:_,destroy:N,deps:P,next:null},_=Cn.updateQueue,_===null?(_={lastEffect:null,stores:null},Cn.updateQueue=_,_.lastEffect=M.next=M):(N=_.lastEffect,N===null?_.lastEffect=M.next=M:(P=N.next,N.next=M,M.next=P,_.lastEffect=M)),M}function QR(){return Ws().memoizedState}function Jy(M,_,N,P){var q=Fl();Cn.flags|=M,q.memoizedState=Zm(1|_,N,void 0,P===void 0?null:P)}function Zy(M,_,N,P){var q=Ws();P=P===void 0?null:P;var Y=void 0;if(Bi!==null){var Se=Bi.memoizedState;if(Y=Se.destroy,P!==null&&__(P,Se.deps)){q.memoizedState=Zm(_,N,Y,P);return}}Cn.flags|=M,q.memoizedState=Zm(1|_,N,Y,P)}function T_(M,_){return Jy(8390656,8,M,_)}function Km(M,_){return Zy(2048,8,M,_)}function eP(M,_){return Zy(4,2,M,_)}function tP(M,_){return Zy(4,4,M,_)}function rP(M,_){if(typeof _=="function")return M=M(),_(M),function(){_(null)};if(_!=null)return M=M(),_.current=M,function(){_.current=null}}function nP(M,_,N){return N=N!=null?N.concat([M]):null,Zy(4,4,rP.bind(null,_,M),N)}function D_(){}function iP(M,_){var N=Ws();_=_===void 0?null:_;var P=N.memoizedState;return P!==null&&_!==null&&__(_,P[1])?P[0]:(N.memoizedState=[M,_],M)}function aP(M,_){var N=Ws();_=_===void 0?null:_;var P=N.memoizedState;return P!==null&&_!==null&&__(_,P[1])?P[0]:(M=M(),N.memoizedState=[M,_],M)}function Iee(M,_){var N=Ar;Ar=N!==0&&4>N?N:4,M(!0);var P=Ro.transition;Ro.transition={};try{M(!1),_()}finally{Ar=N,Ro.transition=P}}function oP(){return Ws().memoizedState}function Lee(M,_,N){var P=Hu(M);N={lane:P,action:N,hasEagerState:!1,eagerState:null,next:null},sP(M)?lP(_,N):(uP(M,_,N),N=ha(),M=Po(M,P,N),M!==null&&cP(M,_,P))}function Fee(M,_,N){var P=Hu(M),q={lane:P,action:N,hasEagerState:!1,eagerState:null,next:null};if(sP(M))lP(_,q);else{uP(M,_,q);var Y=M.alternate;if(M.lanes===0&&(Y===null||Y.lanes===0)&&(Y=_.lastRenderedReducer,Y!==null))try{var Se=_.lastRenderedState,Be=Y(Se,N);if(q.hasEagerState=!0,q.eagerState=Be,js(Be,Se))return}catch{}finally{}N=ha(),M=Po(M,P,N),M!==null&&cP(M,_,P)}}function sP(M){var _=M.alternate;return M===Cn||_!==null&&_===Cn}function lP(M,_){Ym=$y=!0;var N=M.pending;N===null?_.next=_:(_.next=N.next,N.next=_),M.pending=_}function uP(M,_,N){qn!==null&&M.mode&1&&!(pr&2)?(M=_.interleaved,M===null?(N.next=N,Vs===null?Vs=[_]:Vs.push(_)):(N.next=M.next,M.next=N),_.interleaved=N):(M=_.pending,M===null?N.next=N:(N.next=M.next,M.next=N),_.pending=N)}function cP(M,_,N){if(N&4194240){var P=_.lanes;P&=M.pendingLanes,N|=P,_.lanes=N,n_(M,N)}}var Ky={readContext:Do,useCallback:zi,useContext:zi,useEffect:zi,useImperativeHandle:zi,useInsertionEffect:zi,useLayoutEffect:zi,useMemo:zi,useReducer:zi,useRef:zi,useState:zi,useDebugValue:zi,useDeferredValue:zi,useTransition:zi,useMutableSource:zi,useSyncExternalStore:zi,useId:zi,unstable_isNewReconciler:!1},Bee={readContext:Do,useCallback:function(M,_){return Fl().memoizedState=[M,_===void 0?null:_],M},useContext:Do,useEffect:T_,useImperativeHandle:function(M,_,N){return N=N!=null?N.concat([M]):null,Jy(4194308,4,rP.bind(null,_,M),N)},useLayoutEffect:function(M,_){return Jy(4194308,4,M,_)},useInsertionEffect:function(M,_){return Jy(4,2,M,_)},useMemo:function(M,_){var N=Fl();return _=_===void 0?null:_,M=M(),N.memoizedState=[M,_],M},useReducer:function(M,_,N){var P=Fl();return _=N!==void 0?N(_):_,P.memoizedState=P.baseState=_,M={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:M,lastRenderedState:_},P.queue=M,M=M.dispatch=Lee.bind(null,Cn,M),[P.memoizedState,M]},useRef:function(M){var _=Fl();return M={current:M},_.memoizedState=M},useState:A_,useDebugValue:D_,useDeferredValue:function(M){var _=A_(M),N=_[0],P=_[1];return T_(function(){var q=Ro.transition;Ro.transition={};try{P(M)}finally{Ro.transition=q}},[M]),N},useTransition:function(){var M=A_(!1),_=M[0];return M=Iee.bind(null,M[1]),Fl().memoizedState=M,[_,M]},useMutableSource:function(){},useSyncExternalStore:function(M,_,N){var P=Cn,q=Fl();if(cn){if(N===void 0)throw Error(a(407));N=N()}else{if(N=_(),qn===null)throw Error(a(349));ef&30||YR(P,_,N)}q.memoizedState=N;var Y={value:N,getSnapshot:_};return q.queue=Y,T_(ZR.bind(null,P,Y,M),[M]),P.flags|=2048,Zm(9,JR.bind(null,P,Y,N,_),void 0,null),N},useId:function(){var M=Fl(),_=qn.identifierPrefix;if(cn){var N=Ll,P=Il;N=(P&~(1<<32-ua(P)-1)).toString(32)+N,_=":"+_+"R"+N,N=Jm++,0<N&&(_+="H"+N.toString(32)),_+=":"}else N=Pee++,_=":"+_+"r"+N.toString(32)+":";return M.memoizedState=_},unstable_isNewReconciler:!1},zee={readContext:Do,useCallback:iP,useContext:Do,useEffect:Km,useImperativeHandle:nP,useInsertionEffect:eP,useLayoutEffect:tP,useMemo:aP,useReducer:Xy,useRef:QR,useState:function(){return Xy(ph)},useDebugValue:D_,useDeferredValue:function(M){var _=Xy(ph),N=_[0],P=_[1];return Km(function(){var q=Ro.transition;Ro.transition={};try{P(M)}finally{Ro.transition=q}},[M]),N},useTransition:function(){var M=Xy(ph)[0],_=Ws().memoizedState;return[M,_]},useMutableSource:$R,useSyncExternalStore:XR,useId:oP,unstable_isNewReconciler:!1},Uee={readContext:Do,useCallback:iP,useContext:Do,useEffect:Km,useImperativeHandle:nP,useInsertionEffect:eP,useLayoutEffect:tP,useMemo:aP,useReducer:Yy,useRef:QR,useState:function(){return Yy(ph)},useDebugValue:D_,useDeferredValue:function(M){var _=Yy(ph),N=_[0],P=_[1];return Km(function(){var q=Ro.transition;Ro.transition={};try{P(M)}finally{Ro.transition=q}},[M]),N},useTransition:function(){var M=Yy(ph)[0],_=Ws().memoizedState;return[M,_]},useMutableSource:$R,useSyncExternalStore:XR,useId:oP,unstable_isNewReconciler:!1};function k_(M,_){try{var N="",P=_;do N+=Ree(P),P=P.return;while(P);var q=N}catch(Y){q=`
Error generating stack: `+Y.message+`
`+Y.stack}return{value:M,source:_,stack:q}}function N_(M,_){try{console.error(_.value)}catch(N){setTimeout(function(){throw N})}}var jee=typeof WeakMap=="function"?WeakMap:Map;function hP(M,_,N){N=Pl(-1,N),N.tag=3,N.payload={element:null};var P=_.value;return N.callback=function(){p1||(p1=!0,X_=P),N_(M,_)},N}function dP(M,_,N){N=Pl(-1,N),N.tag=3;var P=M.type.getDerivedStateFromError;if(typeof P=="function"){var q=_.value;N.payload=function(){return P(q)},N.callback=function(){N_(M,_)}}var Y=M.stateNode;return Y!==null&&typeof Y.componentDidCatch=="function"&&(N.callback=function(){N_(M,_),typeof P!="function"&&(Uu===null?Uu=new Set([this]):Uu.add(this));var Se=_.stack;this.componentDidCatch(_.value,{componentStack:Se!==null?Se:""})}),N}function fP(M,_,N){var P=M.pingCache;if(P===null){P=M.pingCache=new jee;var q=new Set;P.set(_,q)}else q=P.get(_),q===void 0&&(q=new Set,P.set(_,q));q.has(N)||(q.add(N),M=tte.bind(null,M,_,N),_.then(M,M))}function pP(M){do{var _;if((_=M.tag===13)&&(_=M.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return M;M=M.return}while(M!==null);return null}function mP(M,_,N,P,q){return M.mode&1?(M.flags|=65536,M.lanes=q,M):(M===_?M.flags|=65536:(M.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(_=Pl(-1,1),_.tag=2,zu(N,_))),N.lanes|=1),M)}function Gs(M){M.flags|=4}function gP(M,_){if(M!==null&&M.child===_.child)return!0;if(_.flags&16)return!1;for(M=_.child;M!==null;){if(M.flags&12854||M.subtreeFlags&12854)return!1;M=M.sibling}return!0}var Qm,eg,Qy,e1;if(Te)Qm=function(M,_){for(var N=_.child;N!==null;){if(N.tag===5||N.tag===6)Z(M,N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===_)break;for(;N.sibling===null;){if(N.return===null||N.return===_)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},eg=function(){},Qy=function(M,_,N,P,q){if(M=M.memoizedProps,M!==P){var Y=_.stateNode,Se=qs(Oo.current);N=J(Y,N,M,P,q,Se),(_.updateQueue=N)&&Gs(_)}},e1=function(M,_,N,P){N!==P&&Gs(_)};else if(be){Qm=function(M,_,N,P){for(var q=_.child;q!==null;){if(q.tag===5){var Y=q.stateNode;N&&P&&(Y=Ee(Y,q.type,q.memoizedProps,q)),Z(M,Y)}else if(q.tag===6)Y=q.stateNode,N&&P&&(Y=Oe(Y,q.memoizedProps,q)),Z(M,Y);else if(q.tag!==4){if(q.tag===22&&q.memoizedState!==null)Y=q.child,Y!==null&&(Y.return=q),Qm(M,q,!0,!0);else if(q.child!==null){q.child.return=q,q=q.child;continue}}if(q===_)break;for(;q.sibling===null;){if(q.return===null||q.return===_)return;q=q.return}q.sibling.return=q.return,q=q.sibling}};var vP=function(M,_,N,P){for(var q=_.child;q!==null;){if(q.tag===5){var Y=q.stateNode;N&&P&&(Y=Ee(Y,q.type,q.memoizedProps,q)),te(M,Y)}else if(q.tag===6)Y=q.stateNode,N&&P&&(Y=Oe(Y,q.memoizedProps,q)),te(M,Y);else if(q.tag!==4){if(q.tag===22&&q.memoizedState!==null)Y=q.child,Y!==null&&(Y.return=q),vP(M,q,!0,!0);else if(q.child!==null){q.child.return=q,q=q.child;continue}}if(q===_)break;for(;q.sibling===null;){if(q.return===null||q.return===_)return;q=q.return}q.sibling.return=q.return,q=q.sibling}};eg=function(M,_){var N=_.stateNode;if(!gP(M,_)){M=N.containerInfo;var P=H(M);vP(P,_,!1,!1),N.pendingChildren=P,Gs(_),le(M,P)}},Qy=function(M,_,N,P,q){var Y=M.stateNode,Se=M.memoizedProps;if((M=gP(M,_))&&Se===P)_.stateNode=Y;else{var Be=_.stateNode,Ke=qs(Oo.current),ht=null;Se!==P&&(ht=J(Be,N,Se,P,q,Ke)),M&&ht===null?_.stateNode=Y:(Y=Xe(Y,ht,N,Se,P,_,M,Be),Q(Y,N,P,q,Ke)&&Gs(_),_.stateNode=Y,M?Gs(_):Qm(Y,_,!1,!1))}},e1=function(M,_,N,P){N!==P?(M=qs(Kd.current),N=qs(Oo.current),_.stateNode=fe(P,M,N,_),Gs(_)):_.stateNode=M.stateNode}}else eg=function(){},Qy=function(){},e1=function(){};function tg(M,_){if(!cn)switch(M.tailMode){case"hidden":_=M.tail;for(var N=null;_!==null;)_.alternate!==null&&(N=_),_=_.sibling;N===null?M.tail=null:N.sibling=null;break;case"collapsed":N=M.tail;for(var P=null;N!==null;)N.alternate!==null&&(P=N),N=N.sibling;P===null?_||M.tail===null?M.tail=null:M.tail.sibling=null:P.sibling=null}}function Ui(M){var _=M.alternate!==null&&M.alternate.child===M.child,N=0,P=0;if(_)for(var q=M.child;q!==null;)N|=q.lanes|q.childLanes,P|=q.subtreeFlags&14680064,P|=q.flags&14680064,q.return=M,q=q.sibling;else for(q=M.child;q!==null;)N|=q.lanes|q.childLanes,P|=q.subtreeFlags,P|=q.flags,q.return=M,q=q.sibling;return M.subtreeFlags|=P,M.childLanes=N,_}function Hee(M,_,N){var P=_.pendingProps;switch(g_(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ui(_),null;case 1:return Vn(_.type)&&Lu(),Ui(_),null;case 3:return P=_.stateNode,Qd(),vr(ci),vr(Hn),M_(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(M===null||M.child===null)&&(Wm(_)?Gs(_):M===null||M.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,us!==null&&(Z_(us),us=null))),eg(M,_),Ui(_),null;case 5:w_(_),N=qs(Kd.current);var q=_.type;if(M!==null&&_.stateNode!=null)Qy(M,_,q,P,N),M.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!P){if(_.stateNode===null)throw Error(a(166));return Ui(_),null}if(M=qs(Oo.current),Wm(_)){if(!re)throw Error(a(175));M=Zr(_.stateNode,_.type,_.memoizedProps,N,M,_,!qm),_.updateQueue=M,M!==null&&Gs(_)}else{var Y=X(q,P,N,M,_);Qm(Y,_,!1,!1),_.stateNode=Y,Q(Y,q,P,N,M)&&Gs(_)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return Ui(_),null;case 6:if(M&&_.stateNode!=null)e1(M,_,M.memoizedProps,P);else{if(typeof P!="string"&&_.stateNode===null)throw Error(a(166));if(M=qs(Kd.current),N=qs(Oo.current),Wm(_)){if(!re)throw Error(a(176));if(M=_.stateNode,P=_.memoizedProps,(N=Bs(M,P,_,!qm))&&(q=eo,q!==null))switch(Y=(q.mode&1)!==0,q.tag){case 3:dt(q.stateNode.containerInfo,M,P,Y);break;case 5:At(q.type,q.memoizedProps,q.stateNode,M,P,Y)}N&&Gs(_)}else _.stateNode=fe(P,M,N,_)}return Ui(_),null;case 13:if(vr(mn),P=_.memoizedState,cn&&to!==null&&_.mode&1&&!(_.flags&128)){for(M=to;M;)M=xt(M);return Jd(),_.flags|=98560,_}if(P!==null&&P.dehydrated!==null){if(P=Wm(_),M===null){if(!P)throw Error(a(318));if(!re)throw Error(a(344));if(M=_.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(a(317));Iu(M,_)}else Jd(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;return Ui(_),null}return us!==null&&(Z_(us),us=null),_.flags&128?(_.lanes=N,_):(P=P!==null,N=!1,M===null?Wm(_):N=M.memoizedState!==null,P&&!N&&(_.child.flags|=8192,_.mode&1&&(M===null||mn.current&1?Kn===0&&(Kn=3):Q_())),_.updateQueue!==null&&(_.flags|=4),Ui(_),null);case 4:return Qd(),eg(M,_),M===null&&ze(_.stateNode.containerInfo),Ui(_),null;case 10:return c_(_.type._context),Ui(_),null;case 17:return Vn(_.type)&&Lu(),Ui(_),null;case 19:if(vr(mn),q=_.memoizedState,q===null)return Ui(_),null;if(P=(_.flags&128)!==0,Y=q.rendering,Y===null)if(P)tg(q,!1);else{if(Kn!==0||M!==null&&M.flags&128)for(M=_.child;M!==null;){if(Y=Wy(M),Y!==null){for(_.flags|=128,tg(q,!1),M=Y.updateQueue,M!==null&&(_.updateQueue=M,_.flags|=4),_.subtreeFlags=0,M=N,P=_.child;P!==null;)N=P,q=M,N.flags&=14680066,Y=N.alternate,Y===null?(N.childLanes=0,N.lanes=q,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=Y.childLanes,N.lanes=Y.lanes,N.child=Y.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=Y.memoizedProps,N.memoizedState=Y.memoizedState,N.updateQueue=Y.updateQueue,N.type=Y.type,q=Y.dependencies,N.dependencies=q===null?null:{lanes:q.lanes,firstContext:q.firstContext}),P=P.sibling;return Xt(mn,mn.current&1|2),_.child}M=M.sibling}q.tail!==null&&hi()>$_&&(_.flags|=128,P=!0,tg(q,!1),_.lanes=4194304)}else{if(!P)if(M=Wy(Y),M!==null){if(_.flags|=128,P=!0,M=M.updateQueue,M!==null&&(_.updateQueue=M,_.flags|=4),tg(q,!0),q.tail===null&&q.tailMode==="hidden"&&!Y.alternate&&!cn)return Ui(_),null}else 2*hi()-q.renderingStartTime>$_&&N!==1073741824&&(_.flags|=128,P=!0,tg(q,!1),_.lanes=4194304);q.isBackwards?(Y.sibling=_.child,_.child=Y):(M=q.last,M!==null?M.sibling=Y:_.child=Y,q.last=Y)}return q.tail!==null?(_=q.tail,q.rendering=_,q.tail=_.sibling,q.renderingStartTime=hi(),_.sibling=null,M=mn.current,Xt(mn,P?M&1|2:M&1),_):(Ui(_),null);case 22:case 23:return K_(),P=_.memoizedState!==null,M!==null&&M.memoizedState!==null!==P&&(_.flags|=8192),P&&_.mode&1?no&1073741824&&(Ui(_),Te&&_.subtreeFlags&6&&(_.flags|=8192)):Ui(_),null;case 24:return null;case 25:return null}throw Error(a(156,_.tag))}var Vee=o.ReactCurrentOwner,ro=!1;function ca(M,_,N,P){_.child=M===null?WR(_,null,N,P):Zd(_,M.child,N,P)}function yP(M,_,N,P,q){N=N.render;var Y=_.ref;return $d(_,q),P=E_(M,_,N,P,Y,q),N=C_(),M!==null&&!ro?(_.updateQueue=M.updateQueue,_.flags&=-2053,M.lanes&=~q,Bl(M,_,q)):(cn&&N&&m_(_),_.flags|=1,ca(M,_,P,q),_.child)}function bP(M,_,N,P,q){if(M===null){var Y=N.type;return typeof Y=="function"&&!eE(Y)&&Y.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(_.tag=15,_.type=Y,xP(M,_,Y,P,q)):(M=w1(N.type,null,P,_,_.mode,q),M.ref=_.ref,M.return=_,_.child=M)}if(Y=M.child,!(M.lanes&q)){var Se=Y.memoizedProps;if(N=N.compare,N=N!==null?N:Ly,N(Se,P)&&M.ref===_.ref)return Bl(M,_,q)}return _.flags|=1,M=qu(Y,P),M.ref=_.ref,M.return=_,_.child=M}function xP(M,_,N,P,q){if(M!==null&&Ly(M.memoizedProps,P)&&M.ref===_.ref)if(ro=!1,(M.lanes&q)!==0)M.flags&131072&&(ro=!0);else return _.lanes=M.lanes,Bl(M,_,q);return O_(M,_,N,P,q)}function wP(M,_,N){var P=_.pendingProps,q=P.children,Y=M!==null?M.memoizedState:null;if(P.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null},Xt(tf,no),no|=N;else if(N&1073741824)_.memoizedState={baseLanes:0,cachePool:null},P=Y!==null?Y.baseLanes:N,Xt(tf,no),no|=P;else return M=Y!==null?Y.baseLanes|N:N,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:M,cachePool:null},_.updateQueue=null,Xt(tf,no),no|=M,null;else Y!==null?(P=Y.baseLanes|N,_.memoizedState=null):P=N,Xt(tf,no),no|=P;return ca(M,_,q,N),_.child}function SP(M,_){var N=_.ref;(M===null&&N!==null||M!==null&&M.ref!==N)&&(_.flags|=512,_.flags|=2097152)}function O_(M,_,N,P,q){var Y=Vn(N)?sa:Hn.current;return Y=Ol(_,Y),$d(_,q),N=E_(M,_,N,P,Y,q),P=C_(),M!==null&&!ro?(_.updateQueue=M.updateQueue,_.flags&=-2053,M.lanes&=~q,Bl(M,_,q)):(cn&&P&&m_(_),_.flags|=1,ca(M,_,N,q),_.child)}function MP(M,_,N,P,q){if(Vn(N)){var Y=!0;Fu(_)}else Y=!1;if($d(_,q),_.stateNode===null)M!==null&&(M.alternate=null,_.alternate=null,_.flags|=2),FR(_,N,P),p_(_,N,P,q),P=!0;else if(M===null){var Se=_.stateNode,Be=_.memoizedProps;Se.props=Be;var Ke=Se.context,ht=N.contextType;typeof ht=="object"&&ht!==null?ht=Do(ht):(ht=Vn(N)?sa:Hn.current,ht=Ol(_,ht));var _t=N.getDerivedStateFromProps,nr=typeof _t=="function"||typeof Se.getSnapshotBeforeUpdate=="function";nr||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(Be!==P||Ke!==ht)&&BR(_,Se,P,ht),Bu=!1;var Vt=_.memoizedState;Se.state=Vt,Uy(_,P,Se,q),Ke=_.memoizedState,Be!==P||Vt!==Ke||ci.current||Bu?(typeof _t=="function"&&(f_(_,N,_t,P),Ke=_.memoizedState),(Be=Bu||LR(_,N,Be,P,Vt,Ke,ht))?(nr||typeof Se.UNSAFE_componentWillMount!="function"&&typeof Se.componentWillMount!="function"||(typeof Se.componentWillMount=="function"&&Se.componentWillMount(),typeof Se.UNSAFE_componentWillMount=="function"&&Se.UNSAFE_componentWillMount()),typeof Se.componentDidMount=="function"&&(_.flags|=4194308)):(typeof Se.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=P,_.memoizedState=Ke),Se.props=P,Se.state=Ke,Se.context=ht,P=Be):(typeof Se.componentDidMount=="function"&&(_.flags|=4194308),P=!1)}else{Se=_.stateNode,OR(M,_),Be=_.memoizedProps,ht=_.type===_.elementType?Be:ls(_.type,Be),Se.props=ht,nr=_.pendingProps,Vt=Se.context,Ke=N.contextType,typeof Ke=="object"&&Ke!==null?Ke=Do(Ke):(Ke=Vn(N)?sa:Hn.current,Ke=Ol(_,Ke));var $r=N.getDerivedStateFromProps;(_t=typeof $r=="function"||typeof Se.getSnapshotBeforeUpdate=="function")||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(Be!==nr||Vt!==Ke)&&BR(_,Se,P,Ke),Bu=!1,Vt=_.memoizedState,Se.state=Vt,Uy(_,P,Se,q);var Pt=_.memoizedState;Be!==nr||Vt!==Pt||ci.current||Bu?(typeof $r=="function"&&(f_(_,N,$r,P),Pt=_.memoizedState),(ht=Bu||LR(_,N,ht,P,Vt,Pt,Ke)||!1)?(_t||typeof Se.UNSAFE_componentWillUpdate!="function"&&typeof Se.componentWillUpdate!="function"||(typeof Se.componentWillUpdate=="function"&&Se.componentWillUpdate(P,Pt,Ke),typeof Se.UNSAFE_componentWillUpdate=="function"&&Se.UNSAFE_componentWillUpdate(P,Pt,Ke)),typeof Se.componentDidUpdate=="function"&&(_.flags|=4),typeof Se.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof Se.componentDidUpdate!="function"||Be===M.memoizedProps&&Vt===M.memoizedState||(_.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||Be===M.memoizedProps&&Vt===M.memoizedState||(_.flags|=1024),_.memoizedProps=P,_.memoizedState=Pt),Se.props=P,Se.state=Pt,Se.context=Ke,P=ht):(typeof Se.componentDidUpdate!="function"||Be===M.memoizedProps&&Vt===M.memoizedState||(_.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||Be===M.memoizedProps&&Vt===M.memoizedState||(_.flags|=1024),P=!1)}return R_(M,_,N,P,Y,q)}function R_(M,_,N,P,q,Y){SP(M,_);var Se=(_.flags&128)!==0;if(!P&&!Se)return q&&la(_,N,!1),Bl(M,_,Y);P=_.stateNode,Vee.current=_;var Be=Se&&typeof N.getDerivedStateFromError!="function"?null:P.render();return _.flags|=1,M!==null&&Se?(_.child=Zd(_,M.child,null,Y),_.child=Zd(_,null,Be,Y)):ca(M,_,Be,Y),_.memoizedState=P.state,q&&la(_,N,!0),_.child}function _P(M){var _=M.stateNode;_.pendingContext?Zn(M,_.pendingContext,_.pendingContext!==_.context):_.context&&Zn(M,_.context,!1),x_(M,_.containerInfo)}function EP(M,_,N,P,q){return Jd(),b_(q),_.flags|=256,ca(M,_,N,P),_.child}var t1={dehydrated:null,treeContext:null,retryLane:0};function r1(M){return{baseLanes:M,cachePool:null}}function CP(M,_,N){var P=_.pendingProps,q=mn.current,Y=!1,Se=(_.flags&128)!==0,Be;if((Be=Se)||(Be=M!==null&&M.memoizedState===null?!1:(q&2)!==0),Be?(Y=!0,_.flags&=-129):(M===null||M.memoizedState!==null)&&(q|=1),Xt(mn,q&1),M===null)return y_(_),M=_.memoizedState,M!==null&&(M=M.dehydrated,M!==null)?(_.mode&1?Mt(M)?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(q=P.children,M=P.fallback,Y?(P=_.mode,Y=_.child,q={mode:"hidden",children:q},!(P&1)&&Y!==null?(Y.childLanes=0,Y.pendingProps=q):Y=S1(q,P,0,null),M=xh(M,P,N,null),Y.return=_,M.return=_,Y.sibling=M,_.child=Y,_.child.memoizedState=r1(N),_.memoizedState=t1,M):P_(_,q));if(q=M.memoizedState,q!==null){if(Be=q.dehydrated,Be!==null){if(Se)return _.flags&256?(_.flags&=-257,n1(M,_,N,Error(a(422)))):_.memoizedState!==null?(_.child=M.child,_.flags|=128,null):(Y=P.fallback,q=_.mode,P=S1({mode:"visible",children:P.children},q,0,null),Y=xh(Y,q,N,null),Y.flags|=2,P.return=_,Y.return=_,P.sibling=Y,_.child=P,_.mode&1&&Zd(_,M.child,null,N),_.child.memoizedState=r1(N),_.memoizedState=t1,Y);if(!(_.mode&1))_=n1(M,_,N,null);else if(Mt(Be))_=n1(M,_,N,Error(a(419)));else if(P=(N&M.childLanes)!==0,ro||P){if(P=qn,P!==null){switch(N&-N){case 4:Y=2;break;case 16:Y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Y=32;break;case 536870912:Y=268435456;break;default:Y=0}P=Y&(P.suspendedLanes|N)?0:Y,P!==0&&P!==q.retryLane&&(q.retryLane=P,Po(M,P,-1))}Q_(),_=n1(M,_,N,Error(a(421)))}else ft(Be)?(_.flags|=128,_.child=M.child,_=rte.bind(null,M),nt(Be,_),_=null):(N=q.treeContext,re&&(to=En(Be),eo=_,cn=!0,us=null,qm=!1,N!==null&&(ko[No++]=Il,ko[No++]=Ll,ko[No++]=dh,Il=N.id,Ll=N.overflow,dh=_)),_=P_(_,_.pendingProps.children),_.flags|=4096);return _}return Y?(P=TP(M,_,P.children,P.fallback,N),Y=_.child,q=M.child.memoizedState,Y.memoizedState=q===null?r1(N):{baseLanes:q.baseLanes|N,cachePool:null},Y.childLanes=M.childLanes&~N,_.memoizedState=t1,P):(N=AP(M,_,P.children,N),_.memoizedState=null,N)}return Y?(P=TP(M,_,P.children,P.fallback,N),Y=_.child,q=M.child.memoizedState,Y.memoizedState=q===null?r1(N):{baseLanes:q.baseLanes|N,cachePool:null},Y.childLanes=M.childLanes&~N,_.memoizedState=t1,P):(N=AP(M,_,P.children,N),_.memoizedState=null,N)}function P_(M,_){return _=S1({mode:"visible",children:_},M.mode,0,null),_.return=M,M.child=_}function AP(M,_,N,P){var q=M.child;return M=q.sibling,N=qu(q,{mode:"visible",children:N}),!(_.mode&1)&&(N.lanes=P),N.return=_,N.sibling=null,M!==null&&(P=_.deletions,P===null?(_.deletions=[M],_.flags|=16):P.push(M)),_.child=N}function TP(M,_,N,P,q){var Y=_.mode;M=M.child;var Se=M.sibling,Be={mode:"hidden",children:N};return!(Y&1)&&_.child!==M?(N=_.child,N.childLanes=0,N.pendingProps=Be,_.deletions=null):(N=qu(M,Be),N.subtreeFlags=M.subtreeFlags&14680064),Se!==null?P=qu(Se,P):(P=xh(P,Y,q,null),P.flags|=2),P.return=_,N.return=_,N.sibling=P,_.child=N,P}function n1(M,_,N,P){return P!==null&&b_(P),Zd(_,M.child,null,N),M=P_(_,_.pendingProps.children),M.flags|=2,_.memoizedState=null,M}function DP(M,_,N){M.lanes|=_;var P=M.alternate;P!==null&&(P.lanes|=_),h_(M.return,_,N)}function I_(M,_,N,P,q){var Y=M.memoizedState;Y===null?M.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:P,tail:N,tailMode:q}:(Y.isBackwards=_,Y.rendering=null,Y.renderingStartTime=0,Y.last=P,Y.tail=N,Y.tailMode=q)}function kP(M,_,N){var P=_.pendingProps,q=P.revealOrder,Y=P.tail;if(ca(M,_,P.children,N),P=mn.current,P&2)P=P&1|2,_.flags|=128;else{if(M!==null&&M.flags&128)e:for(M=_.child;M!==null;){if(M.tag===13)M.memoizedState!==null&&DP(M,N,_);else if(M.tag===19)DP(M,N,_);else if(M.child!==null){M.child.return=M,M=M.child;continue}if(M===_)break e;for(;M.sibling===null;){if(M.return===null||M.return===_)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}P&=1}if(Xt(mn,P),!(_.mode&1))_.memoizedState=null;else switch(q){case"forwards":for(N=_.child,q=null;N!==null;)M=N.alternate,M!==null&&Wy(M)===null&&(q=N),N=N.sibling;N=q,N===null?(q=_.child,_.child=null):(q=N.sibling,N.sibling=null),I_(_,!1,q,N,Y);break;case"backwards":for(N=null,q=_.child,_.child=null;q!==null;){if(M=q.alternate,M!==null&&Wy(M)===null){_.child=q;break}M=q.sibling,q.sibling=N,N=q,q=M}I_(_,!0,N,null,Y);break;case"together":I_(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Bl(M,_,N){if(M!==null&&(_.dependencies=M.dependencies),rf|=_.lanes,!(N&_.childLanes))return null;if(M!==null&&_.child!==M.child)throw Error(a(153));if(_.child!==null){for(M=_.child,N=qu(M,M.pendingProps),_.child=N,N.return=_;M.sibling!==null;)M=M.sibling,N=N.sibling=qu(M,M.pendingProps),N.return=_;N.sibling=null}return _.child}function qee(M,_,N){switch(_.tag){case 3:_P(_),Jd();break;case 5:GR(_);break;case 1:Vn(_.type)&&Fu(_);break;case 4:x_(_,_.stateNode.containerInfo);break;case 10:NR(_,_.type._context,_.memoizedProps.value);break;case 13:var P=_.memoizedState;if(P!==null)return P.dehydrated!==null?(Xt(mn,mn.current&1),_.flags|=128,null):N&_.child.childLanes?CP(M,_,N):(Xt(mn,mn.current&1),M=Bl(M,_,N),M!==null?M.sibling:null);Xt(mn,mn.current&1);break;case 19:if(P=(N&_.childLanes)!==0,M.flags&128){if(P)return kP(M,_,N);_.flags|=128}var q=_.memoizedState;if(q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),Xt(mn,mn.current),P)break;return null;case 22:case 23:return _.lanes=0,wP(M,_,N)}return Bl(M,_,N)}function Wee(M,_){switch(g_(_),_.tag){case 1:return Vn(_.type)&&Lu(),M=_.flags,M&65536?(_.flags=M&-65537|128,_):null;case 3:return Qd(),vr(ci),vr(Hn),M_(),M=_.flags,M&65536&&!(M&128)?(_.flags=M&-65537|128,_):null;case 5:return w_(_),null;case 13:if(vr(mn),M=_.memoizedState,M!==null&&M.dehydrated!==null){if(_.alternate===null)throw Error(a(340));Jd()}return M=_.flags,M&65536?(_.flags=M&-65537|128,_):null;case 19:return vr(mn),null;case 4:return Qd(),null;case 10:return c_(_.type._context),null;case 22:case 23:return K_(),null;case 24:return null;default:return null}}var i1=!1,mh=!1,Gee=typeof WeakSet=="function"?WeakSet:Set,vt=null;function a1(M,_){var N=M.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(P){Fa(M,_,P)}else N.current=null}function NP(M,_,N){try{N()}catch(P){Fa(M,_,P)}}var OP=!1;function $ee(M,_){for(z(M.containerInfo),vt=_;vt!==null;)if(M=vt,_=M.child,(M.subtreeFlags&1028)!==0&&_!==null)_.return=M,vt=_;else for(;vt!==null;){M=vt;try{var N=M.alternate;if(M.flags&1024)switch(M.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var P=N.memoizedProps,q=N.memoizedState,Y=M.stateNode,Se=Y.getSnapshotBeforeUpdate(M.elementType===M.type?P:ls(M.type,P),q);Y.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:Te&&he(M.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Be){Fa(M,M.return,Be)}if(_=M.sibling,_!==null){_.return=M.return,vt=_;break}vt=M.return}return N=OP,OP=!1,N}function gh(M,_,N){var P=_.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var q=P=P.next;do{if((q.tag&M)===M){var Y=q.destroy;q.destroy=void 0,Y!==void 0&&NP(_,N,Y)}q=q.next}while(q!==P)}}function rg(M,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var N=_=_.next;do{if((N.tag&M)===M){var P=N.create;N.destroy=P()}N=N.next}while(N!==_)}}function L_(M){var _=M.ref;if(_!==null){var N=M.stateNode;switch(M.tag){case 5:M=F(N);break;default:M=N}typeof _=="function"?_(M):_.current=M}}function RP(M,_,N){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(Py,_)}catch{}switch(_.tag){case 0:case 11:case 14:case 15:if(M=_.updateQueue,M!==null&&(M=M.lastEffect,M!==null)){var P=M=M.next;do{var q=P,Y=q.destroy;q=q.tag,Y!==void 0&&(q&2||q&4)&&NP(_,N,Y),P=P.next}while(P!==M)}break;case 1:if(a1(_,N),M=_.stateNode,typeof M.componentWillUnmount=="function")try{M.props=_.memoizedProps,M.state=_.memoizedState,M.componentWillUnmount()}catch(Se){Fa(_,N,Se)}break;case 5:a1(_,N);break;case 4:Te?zP(M,_,N):be&&be&&(_=_.stateNode.containerInfo,N=H(_),ve(_,N))}}function PP(M,_,N){for(var P=_;;)if(RP(M,P,N),P.child===null||Te&&P.tag===4){if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return}P.sibling.return=P.return,P=P.sibling}else P.child.return=P,P=P.child}function IP(M){var _=M.alternate;_!==null&&(M.alternate=null,IP(_)),M.child=null,M.deletions=null,M.sibling=null,M.tag===5&&(_=M.stateNode,_!==null&&ie(_)),M.stateNode=null,M.return=null,M.dependencies=null,M.memoizedProps=null,M.memoizedState=null,M.pendingProps=null,M.stateNode=null,M.updateQueue=null}function LP(M){return M.tag===5||M.tag===3||M.tag===4}function FP(M){e:for(;;){for(;M.sibling===null;){if(M.return===null||LP(M.return))return null;M=M.return}for(M.sibling.return=M.return,M=M.sibling;M.tag!==5&&M.tag!==6&&M.tag!==18;){if(M.flags&2||M.child===null||M.tag===4)continue e;M.child.return=M,M=M.child}if(!(M.flags&2))return M.stateNode}}function BP(M){if(Te){e:{for(var _=M.return;_!==null;){if(LP(_))break e;_=_.return}throw Error(a(160))}var N=_;switch(N.tag){case 5:_=N.stateNode,N.flags&32&&(et(_),N.flags&=-33),N=FP(M),B_(M,N,_);break;case 3:case 4:_=N.stateNode.containerInfo,N=FP(M),F_(M,N,_);break;default:throw Error(a(161))}}}function F_(M,_,N){var P=M.tag;if(P===5||P===6)M=M.stateNode,_?st(N,M,_):Fe(N,M);else if(P!==4&&(M=M.child,M!==null))for(F_(M,_,N),M=M.sibling;M!==null;)F_(M,_,N),M=M.sibling}function B_(M,_,N){var P=M.tag;if(P===5||P===6)M=M.stateNode,_?Je(N,M,_):Ne(N,M);else if(P!==4&&(M=M.child,M!==null))for(B_(M,_,N),M=M.sibling;M!==null;)B_(M,_,N),M=M.sibling}function zP(M,_,N){for(var P=_,q=!1,Y,Se;;){if(!q){q=P.return;e:for(;;){if(q===null)throw Error(a(160));switch(Y=q.stateNode,q.tag){case 5:Se=!1;break e;case 3:Y=Y.containerInfo,Se=!0;break e;case 4:Y=Y.containerInfo,Se=!0;break e}q=q.return}q=!0}if(P.tag===5||P.tag===6)PP(M,P,N),Se?Pe(Y,P.stateNode):we(Y,P.stateNode);else if(P.tag===18)Se?Ve(Y,P.stateNode):je(Y,P.stateNode);else if(P.tag===4){if(P.child!==null){Y=P.stateNode.containerInfo,Se=!0,P.child.return=P,P=P.child;continue}}else if(RP(M,P,N),P.child!==null){P.child.return=P,P=P.child;continue}if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return,P.tag===4&&(q=!1)}P.sibling.return=P.return,P=P.sibling}}function z_(M,_){if(Te){switch(_.tag){case 0:case 11:case 14:case 15:gh(3,_,_.return),rg(3,_),gh(5,_,_.return);return;case 1:return;case 5:var N=_.stateNode;if(N!=null){var P=_.memoizedProps;M=M!==null?M.memoizedProps:P;var q=_.type,Y=_.updateQueue;_.updateQueue=null,Y!==null&&it(N,Y,q,M,P,_)}return;case 6:if(_.stateNode===null)throw Error(a(162));N=_.memoizedProps,We(_.stateNode,M!==null?M.memoizedProps:N,N);return;case 3:re&&M!==null&&M.memoizedState.isDehydrated&&de(_.stateNode.containerInfo);return;case 12:return;case 13:o1(_);return;case 19:o1(_);return;case 17:return}throw Error(a(163))}switch(_.tag){case 0:case 11:case 14:case 15:gh(3,_,_.return),rg(3,_),gh(5,_,_.return);return;case 12:return;case 13:o1(_);return;case 19:o1(_);return;case 3:re&&M!==null&&M.memoizedState.isDehydrated&&de(_.stateNode.containerInfo);break;case 22:case 23:return}e:if(be){switch(_.tag){case 1:case 5:case 6:break e;case 3:case 4:_=_.stateNode,ve(_.containerInfo,_.pendingChildren);break e}throw Error(a(163))}}function o1(M){var _=M.updateQueue;if(_!==null){M.updateQueue=null;var N=M.stateNode;N===null&&(N=M.stateNode=new Gee),_.forEach(function(P){var q=nte.bind(null,M,P);N.has(P)||(N.add(P),P.then(q,q))})}}function Xee(M,_){for(vt=_;vt!==null;){_=vt;var N=_.deletions;if(N!==null)for(var P=0;P<N.length;P++){var q=N[P];try{var Y=M;Te?zP(Y,q,_):PP(Y,q,_);var Se=q.alternate;Se!==null&&(Se.return=null),q.return=null}catch(It){Fa(q,_,It)}}if(N=_.child,_.subtreeFlags&12854&&N!==null)N.return=_,vt=N;else for(;vt!==null;){_=vt;try{var Be=_.flags;if(Be&32&&Te&&et(_.stateNode),Be&512){var Ke=_.alternate;if(Ke!==null){var ht=Ke.ref;ht!==null&&(typeof ht=="function"?ht(null):ht.current=null)}}if(Be&8192)switch(_.tag){case 13:if(_.memoizedState!==null){var _t=_.alternate;(_t===null||_t.memoizedState===null)&&(G_=hi())}break;case 22:var nr=_.memoizedState!==null,Vt=_.alternate,$r=Vt!==null&&Vt.memoizedState!==null;if(N=_,Te){e:if(P=N,q=nr,Y=null,Te)for(var Pt=P;;){if(Pt.tag===5){if(Y===null){Y=Pt;var ji=Pt.stateNode;q?V(ji):Le(Pt.stateNode,Pt.memoizedProps)}}else if(Pt.tag===6){if(Y===null){var Lo=Pt.stateNode;q?Me(Lo):Ze(Lo,Pt.memoizedProps)}}else if((Pt.tag!==22&&Pt.tag!==23||Pt.memoizedState===null||Pt===P)&&Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===P)break;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===P)break e;Y===Pt&&(Y=null),Pt=Pt.return}Y===Pt&&(Y=null),Pt.sibling.return=Pt.return,Pt=Pt.sibling}}if(nr&&!$r&&N.mode&1){vt=N;for(var Ge=N.child;Ge!==null;){for(N=vt=Ge;vt!==null;){P=vt;var Ue=P.child;switch(P.tag){case 0:case 11:case 14:case 15:gh(4,P,P.return);break;case 1:a1(P,P.return);var Ye=P.stateNode;if(typeof Ye.componentWillUnmount=="function"){var yt=P.return;try{Ye.props=P.memoizedProps,Ye.state=P.memoizedState,Ye.componentWillUnmount()}catch(It){Fa(P,yt,It)}}break;case 5:a1(P,P.return);break;case 22:if(P.memoizedState!==null){HP(N);continue}}Ue!==null?(Ue.return=P,vt=Ue):HP(N)}Ge=Ge.sibling}}}switch(Be&4102){case 2:BP(_),_.flags&=-3;break;case 6:BP(_),_.flags&=-3,z_(_.alternate,_);break;case 4096:_.flags&=-4097;break;case 4100:_.flags&=-4097,z_(_.alternate,_);break;case 4:z_(_.alternate,_)}}catch(It){Fa(_,_.return,It)}if(N=_.sibling,N!==null){N.return=_.return,vt=N;break}vt=_.return}}}function Yee(M,_,N){vt=M,UP(M)}function UP(M,_,N){for(var P=(M.mode&1)!==0;vt!==null;){var q=vt,Y=q.child;if(q.tag===22&&P){var Se=q.memoizedState!==null||i1;if(!Se){var Be=q.alternate,Ke=Be!==null&&Be.memoizedState!==null||mh;Be=i1;var ht=mh;if(i1=Se,(mh=Ke)&&!ht)for(vt=q;vt!==null;)Se=vt,Ke=Se.child,Se.tag===22&&Se.memoizedState!==null?VP(q):Ke!==null?(Ke.return=Se,vt=Ke):VP(q);for(;Y!==null;)vt=Y,UP(Y),Y=Y.sibling;vt=q,i1=Be,mh=ht}jP(M)}else q.subtreeFlags&8772&&Y!==null?(Y.return=q,vt=Y):jP(M)}}function jP(M){for(;vt!==null;){var _=vt;if(_.flags&8772){var N=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:mh||rg(5,_);break;case 1:var P=_.stateNode;if(_.flags&4&&!mh)if(N===null)P.componentDidMount();else{var q=_.elementType===_.type?N.memoizedProps:ls(_.type,N.memoizedProps);P.componentDidUpdate(q,N.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var Y=_.updateQueue;Y!==null&&PR(_,Y,P);break;case 3:var Se=_.updateQueue;if(Se!==null){if(N=null,_.child!==null)switch(_.child.tag){case 5:N=F(_.child.stateNode);break;case 1:N=_.child.stateNode}PR(_,Se,N)}break;case 5:var Be=_.stateNode;N===null&&_.flags&4&&ke(Be,_.type,_.memoizedProps,_);break;case 6:break;case 4:break;case 12:break;case 13:if(re&&_.memoizedState===null){var Ke=_.alternate;if(Ke!==null){var ht=Ke.memoizedState;if(ht!==null){var _t=ht.dehydrated;_t!==null&&Ie(_t)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}mh||_.flags&512&&L_(_)}catch(nr){Fa(_,_.return,nr)}}if(_===M){vt=null;break}if(N=_.sibling,N!==null){N.return=_.return,vt=N;break}vt=_.return}}function HP(M){for(;vt!==null;){var _=vt;if(_===M){vt=null;break}var N=_.sibling;if(N!==null){N.return=_.return,vt=N;break}vt=_.return}}function VP(M){for(;vt!==null;){var _=vt;try{switch(_.tag){case 0:case 11:case 15:var N=_.return;try{rg(4,_)}catch(Ke){Fa(_,N,Ke)}break;case 1:var P=_.stateNode;if(typeof P.componentDidMount=="function"){var q=_.return;try{P.componentDidMount()}catch(Ke){Fa(_,q,Ke)}}var Y=_.return;try{L_(_)}catch(Ke){Fa(_,Y,Ke)}break;case 5:var Se=_.return;try{L_(_)}catch(Ke){Fa(_,Se,Ke)}}}catch(Ke){Fa(_,_.return,Ke)}if(_===M){vt=null;break}var Be=_.sibling;if(Be!==null){Be.return=_.return,vt=Be;break}vt=_.return}}var s1=0,l1=1,u1=2,c1=3,h1=4;if(typeof Symbol=="function"&&Symbol.for){var ng=Symbol.for;s1=ng("selector.component"),l1=ng("selector.has_pseudo_class"),u1=ng("selector.role"),c1=ng("selector.test_id"),h1=ng("selector.text")}function U_(M){var _=Re(M);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(a(364));return _}if(M=W(M),M===null)throw Error(a(362));return M.stateNode.current}function j_(M,_){switch(_.$$typeof){case s1:if(M.type===_.value)return!0;break;case l1:e:{_=_.value,M=[M,0];for(var N=0;N<M.length;){var P=M[N++],q=M[N++],Y=_[q];if(P.tag!==5||!$(P)){for(;Y!=null&&j_(P,Y);)q++,Y=_[q];if(q===_.length){_=!0;break e}else for(P=P.child;P!==null;)M.push(P,q),P=P.sibling}}_=!1}return _;case u1:if(M.tag===5&&ee(M.stateNode,_.value))return!0;break;case h1:if((M.tag===5||M.tag===6)&&(M=Ce(M),M!==null&&0<=M.indexOf(_.value)))return!0;break;case c1:if(M.tag===5&&(M=M.memoizedProps["data-testname"],typeof M=="string"&&M.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function H_(M){switch(M.$$typeof){case s1:return"<"+(S(M.value)||"Unknown")+">";case l1:return":has("+(H_(M)||"")+")";case u1:return'[role="'+M.value+'"]';case h1:return'"'+M.value+'"';case c1:return'[data-testname="'+M.value+'"]';default:throw Error(a(365))}}function qP(M,_){var N=[];M=[M,0];for(var P=0;P<M.length;){var q=M[P++],Y=M[P++],Se=_[Y];if(q.tag!==5||!$(q)){for(;Se!=null&&j_(q,Se);)Y++,Se=_[Y];if(Y===_.length)N.push(q);else for(q=q.child;q!==null;)M.push(q,Y),q=q.sibling}}return N}function V_(M,_){if(!G)throw Error(a(363));M=U_(M),M=qP(M,_),_=[],M=Array.from(M);for(var N=0;N<M.length;){var P=M[N++];if(P.tag===5)$(P)||_.push(P.stateNode);else for(P=P.child;P!==null;)M.push(P),P=P.sibling}return _}var Jee=Math.ceil,d1=o.ReactCurrentDispatcher,q_=o.ReactCurrentOwner,In=o.ReactCurrentBatchConfig,pr=0,qn=null,Wn=null,wi=0,no=0,tf=Pn(0),Kn=0,ig=null,rf=0,f1=0,W_=0,ag=null,Ia=null,G_=0,$_=1/0;function nf(){$_=hi()+500}var p1=!1,X_=null,Uu=null,m1=!1,ju=null,g1=0,og=0,Y_=null,v1=-1,y1=0;function ha(){return pr&6?hi():v1!==-1?v1:v1=hi()}function Hu(M){return M.mode&1?pr&2&&wi!==0?wi&-wi:Oee.transition!==null?(y1===0&&(M=Ny,Ny<<=1,!(Ny&4194240)&&(Ny=64),y1=M),y1):(M=Ar,M!==0?M:K()):1}function Po(M,_,N){if(50<og)throw og=0,Y_=null,Error(a(185));var P=b1(M,_);return P===null?null:(Vm(P,_,N),(!(pr&2)||P!==qn)&&(P===qn&&(!(pr&2)&&(f1|=_),Kn===4&&Vu(P,wi)),La(P,N),_===1&&pr===0&&!(M.mode&1)&&(nf(),Iy&&Hs())),P)}function b1(M,_){M.lanes|=_;var N=M.alternate;for(N!==null&&(N.lanes|=_),N=M,M=M.return;M!==null;)M.childLanes|=_,N=M.alternate,N!==null&&(N.childLanes|=_),N=M,M=M.return;return N.tag===3?N.stateNode:null}function La(M,_){var N=M.callbackNode;Mee(M,_);var P=Ry(M,M===qn?wi:0);if(P===0)N!==null&&DR(N),M.callbackNode=null,M.callbackPriority=0;else if(_=P&-P,M.callbackPriority!==_){if(N!=null&&DR(N),_===1)M.tag===0?Nee(GP.bind(null,M)):kR(GP.bind(null,M)),_e?oe(function(){pr===0&&Hs()}):i_(a_,Hs),N=null;else{switch(TR(P)){case 1:N=a_;break;case 4:N=Aee;break;case 16:N=o_;break;case 536870912:N=Tee;break;default:N=o_}N=tI(N,WP.bind(null,M))}M.callbackPriority=_,M.callbackNode=N}}function WP(M,_){if(v1=-1,y1=0,pr&6)throw Error(a(327));var N=M.callbackNode;if(bh()&&M.callbackNode!==N)return null;var P=Ry(M,M===qn?wi:0);if(P===0)return null;if(P&30||P&M.expiredLanes||_)_=x1(M,P);else{_=P;var q=pr;pr|=2;var Y=YP();(qn!==M||wi!==_)&&(nf(),vh(M,_));do try{Qee();break}catch(Be){XP(M,Be)}while(!0);u_(),d1.current=Y,pr=q,Wn!==null?_=0:(qn=null,wi=0,_=Kn)}if(_!==0){if(_===2&&(q=t_(M),q!==0&&(P=q,_=J_(M,q))),_===1)throw N=ig,vh(M,0),Vu(M,P),La(M,hi()),N;if(_===6)Vu(M,P);else{if(q=M.current.alternate,!(P&30)&&!Zee(q)&&(_=x1(M,P),_===2&&(Y=t_(M),Y!==0&&(P=Y,_=J_(M,Y))),_===1))throw N=ig,vh(M,0),Vu(M,P),La(M,hi()),N;switch(M.finishedWork=q,M.finishedLanes=P,_){case 0:case 1:throw Error(a(345));case 2:yh(M,Ia);break;case 3:if(Vu(M,P),(P&130023424)===P&&(_=G_+500-hi(),10<_)){if(Ry(M,0)!==0)break;if(q=M.suspendedLanes,(q&P)!==P){ha(),M.pingedLanes|=M.suspendedLanes&q;break}M.timeoutHandle=se(yh.bind(null,M,Ia),_);break}yh(M,Ia);break;case 4:if(Vu(M,P),(P&4194240)===P)break;for(_=M.eventTimes,q=-1;0<P;){var Se=31-ua(P);Y=1<<Se,Se=_[Se],Se>q&&(q=Se),P&=~Y}if(P=q,P=hi()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*Jee(P/1960))-P,10<P){M.timeoutHandle=se(yh.bind(null,M,Ia),P);break}yh(M,Ia);break;case 5:yh(M,Ia);break;default:throw Error(a(329))}}}return La(M,hi()),M.callbackNode===N?WP.bind(null,M):null}function J_(M,_){var N=ag;return M.current.memoizedState.isDehydrated&&(vh(M,_).flags|=256),M=x1(M,_),M!==2&&(_=Ia,Ia=N,_!==null&&Z_(_)),M}function Z_(M){Ia===null?Ia=M:Ia.push.apply(Ia,M)}function Zee(M){for(var _=M;;){if(_.flags&16384){var N=_.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var P=0;P<N.length;P++){var q=N[P],Y=q.getSnapshot;q=q.value;try{if(!js(Y(),q))return!1}catch{return!1}}}if(N=_.child,_.subtreeFlags&16384&&N!==null)N.return=_,_=N;else{if(_===M)break;for(;_.sibling===null;){if(_.return===null||_.return===M)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Vu(M,_){for(_&=~W_,_&=~f1,M.suspendedLanes|=_,M.pingedLanes&=~_,M=M.expirationTimes;0<_;){var N=31-ua(_),P=1<<N;M[N]=-1,_&=~P}}function GP(M){if(pr&6)throw Error(a(327));bh();var _=Ry(M,0);if(!(_&1))return La(M,hi()),null;var N=x1(M,_);if(M.tag!==0&&N===2){var P=t_(M);P!==0&&(_=P,N=J_(M,P))}if(N===1)throw N=ig,vh(M,0),Vu(M,_),La(M,hi()),N;if(N===6)throw Error(a(345));return M.finishedWork=M.current.alternate,M.finishedLanes=_,yh(M,Ia),La(M,hi()),null}function $P(M){ju!==null&&ju.tag===0&&!(pr&6)&&bh();var _=pr;pr|=1;var N=In.transition,P=Ar;try{if(In.transition=null,Ar=1,M)return M()}finally{Ar=P,In.transition=N,pr=_,!(pr&6)&&Hs()}}function K_(){no=tf.current,vr(tf)}function vh(M,_){M.finishedWork=null,M.finishedLanes=0;var N=M.timeoutHandle;if(N!==De&&(M.timeoutHandle=De,ye(N)),Wn!==null)for(N=Wn.return;N!==null;){var P=N;switch(g_(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&Lu();break;case 3:Qd(),vr(ci),vr(Hn),M_();break;case 5:w_(P);break;case 4:Qd();break;case 13:vr(mn);break;case 19:vr(mn);break;case 10:c_(P.type._context);break;case 22:case 23:K_()}N=N.return}if(qn=M,Wn=M=qu(M.current,null),wi=no=_,Kn=0,ig=null,W_=f1=rf=0,Ia=ag=null,Vs!==null){for(_=0;_<Vs.length;_++)if(N=Vs[_],P=N.interleaved,P!==null){N.interleaved=null;var q=P.next,Y=N.pending;if(Y!==null){var Se=Y.next;Y.next=q,P.next=Se}N.pending=P}Vs=null}return M}function XP(M,_){do{var N=Wn;try{if(u_(),Gy.current=Ky,$y){for(var P=Cn.memoizedState;P!==null;){var q=P.queue;q!==null&&(q.pending=null),P=P.next}$y=!1}if(ef=0,di=Bi=Cn=null,Ym=!1,Jm=0,q_.current=null,N===null||N.return===null){Kn=1,ig=_,Wn=null;break}e:{var Y=M,Se=N.return,Be=N,Ke=_;if(_=wi,Be.flags|=32768,Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var ht=Ke,_t=Be,nr=_t.tag;if(!(_t.mode&1)&&(nr===0||nr===11||nr===15)){var Vt=_t.alternate;Vt?(_t.updateQueue=Vt.updateQueue,_t.memoizedState=Vt.memoizedState,_t.lanes=Vt.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var $r=pP(Se);if($r!==null){$r.flags&=-257,mP($r,Se,Be,Y,_),$r.mode&1&&fP(Y,ht,_),_=$r,Ke=ht;var Pt=_.updateQueue;if(Pt===null){var ji=new Set;ji.add(Ke),_.updateQueue=ji}else Pt.add(Ke);break e}else{if(!(_&1)){fP(Y,ht,_),Q_();break e}Ke=Error(a(426))}}else if(cn&&Be.mode&1){var Lo=pP(Se);if(Lo!==null){!(Lo.flags&65536)&&(Lo.flags|=256),mP(Lo,Se,Be,Y,_),b_(Ke);break e}}Y=Ke,Kn!==4&&(Kn=2),ag===null?ag=[Y]:ag.push(Y),Ke=k_(Ke,Be),Be=Se;do{switch(Be.tag){case 3:Be.flags|=65536,_&=-_,Be.lanes|=_;var Ge=hP(Be,Ke,_);RR(Be,Ge);break e;case 1:Y=Ke;var Ue=Be.type,Ye=Be.stateNode;if(!(Be.flags&128)&&(typeof Ue.getDerivedStateFromError=="function"||Ye!==null&&typeof Ye.componentDidCatch=="function"&&(Uu===null||!Uu.has(Ye)))){Be.flags|=65536,_&=-_,Be.lanes|=_;var yt=dP(Be,Y,_);RR(Be,yt);break e}}Be=Be.return}while(Be!==null)}ZP(N)}catch(It){_=It,Wn===N&&N!==null&&(Wn=N=N.return);continue}break}while(!0)}function YP(){var M=d1.current;return d1.current=Ky,M===null?Ky:M}function Q_(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),qn===null||!(rf&268435455)&&!(f1&268435455)||Vu(qn,wi)}function x1(M,_){var N=pr;pr|=2;var P=YP();qn===M&&wi===_||vh(M,_);do try{Kee();break}catch(q){XP(M,q)}while(!0);if(u_(),pr=N,d1.current=P,Wn!==null)throw Error(a(261));return qn=null,wi=0,Kn}function Kee(){for(;Wn!==null;)JP(Wn)}function Qee(){for(;Wn!==null&&!Eee();)JP(Wn)}function JP(M){var _=eI(M.alternate,M,no);M.memoizedProps=M.pendingProps,_===null?ZP(M):Wn=_,q_.current=null}function ZP(M){var _=M;do{var N=_.alternate;if(M=_.return,_.flags&32768){if(N=Wee(N,_),N!==null){N.flags&=32767,Wn=N;return}if(M!==null)M.flags|=32768,M.subtreeFlags=0,M.deletions=null;else{Kn=6,Wn=null;return}}else if(N=Hee(N,_,no),N!==null){Wn=N;return}if(_=_.sibling,_!==null){Wn=_;return}Wn=_=M}while(_!==null);Kn===0&&(Kn=5)}function yh(M,_){var N=Ar,P=In.transition;try{In.transition=null,Ar=1,ete(M,_,N)}finally{In.transition=P,Ar=N}return null}function ete(M,_,N){do bh();while(ju!==null);if(pr&6)throw Error(a(327));var P=M.finishedWork,q=M.finishedLanes;if(P===null)return null;if(M.finishedWork=null,M.finishedLanes=0,P===M.current)throw Error(a(177));M.callbackNode=null,M.callbackPriority=0;var Y=P.lanes|P.childLanes;if(_ee(M,Y),M===qn&&(Wn=qn=null,wi=0),!(P.subtreeFlags&2064)&&!(P.flags&2064)||m1||(m1=!0,tI(o_,function(){return bh(),null})),Y=(P.flags&15990)!==0,P.subtreeFlags&15990||Y){Y=In.transition,In.transition=null;var Se=Ar;Ar=1;var Be=pr;pr|=4,q_.current=null,$ee(M,P),Xee(M,P),B(M.containerInfo),M.current=P,Yee(P),Cee(),pr=Be,Ar=Se,In.transition=Y}else M.current=P;if(m1&&(m1=!1,ju=M,g1=q),Y=M.pendingLanes,Y===0&&(Uu=null),Dee(P.stateNode),La(M,hi()),_!==null)for(N=M.onRecoverableError,P=0;P<_.length;P++)N(_[P]);if(p1)throw p1=!1,M=X_,X_=null,M;return g1&1&&M.tag!==0&&bh(),Y=M.pendingLanes,Y&1?M===Y_?og++:(og=0,Y_=M):og=0,Hs(),null}function bh(){if(ju!==null){var M=TR(g1),_=In.transition,N=Ar;try{if(In.transition=null,Ar=16>M?16:M,ju===null)var P=!1;else{if(M=ju,ju=null,g1=0,pr&6)throw Error(a(331));var q=pr;for(pr|=4,vt=M.current;vt!==null;){var Y=vt,Se=Y.child;if(vt.flags&16){var Be=Y.deletions;if(Be!==null){for(var Ke=0;Ke<Be.length;Ke++){var ht=Be[Ke];for(vt=ht;vt!==null;){var _t=vt;switch(_t.tag){case 0:case 11:case 15:gh(8,_t,Y)}var nr=_t.child;if(nr!==null)nr.return=_t,vt=nr;else for(;vt!==null;){_t=vt;var Vt=_t.sibling,$r=_t.return;if(IP(_t),_t===ht){vt=null;break}if(Vt!==null){Vt.return=$r,vt=Vt;break}vt=$r}}}var Pt=Y.alternate;if(Pt!==null){var ji=Pt.child;if(ji!==null){Pt.child=null;do{var Lo=ji.sibling;ji.sibling=null,ji=Lo}while(ji!==null)}}vt=Y}}if(Y.subtreeFlags&2064&&Se!==null)Se.return=Y,vt=Se;else e:for(;vt!==null;){if(Y=vt,Y.flags&2048)switch(Y.tag){case 0:case 11:case 15:gh(9,Y,Y.return)}var Ge=Y.sibling;if(Ge!==null){Ge.return=Y.return,vt=Ge;break e}vt=Y.return}}var Ue=M.current;for(vt=Ue;vt!==null;){Se=vt;var Ye=Se.child;if(Se.subtreeFlags&2064&&Ye!==null)Ye.return=Se,vt=Ye;else e:for(Se=Ue;vt!==null;){if(Be=vt,Be.flags&2048)try{switch(Be.tag){case 0:case 11:case 15:rg(9,Be)}}catch(It){Fa(Be,Be.return,It)}if(Be===Se){vt=null;break e}var yt=Be.sibling;if(yt!==null){yt.return=Be.return,vt=yt;break e}vt=Be.return}}if(pr=q,Hs(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(Py,M)}catch{}P=!0}return P}finally{Ar=N,In.transition=_}}return!1}function KP(M,_,N){_=k_(N,_),_=hP(M,_,1),zu(M,_),_=ha(),M=b1(M,1),M!==null&&(Vm(M,1,_),La(M,_))}function Fa(M,_,N){if(M.tag===3)KP(M,M,N);else for(;_!==null;){if(_.tag===3){KP(_,M,N);break}else if(_.tag===1){var P=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(Uu===null||!Uu.has(P))){M=k_(N,M),M=dP(_,M,1),zu(_,M),M=ha(),_=b1(_,1),_!==null&&(Vm(_,1,M),La(_,M));break}}_=_.return}}function tte(M,_,N){var P=M.pingCache;P!==null&&P.delete(_),_=ha(),M.pingedLanes|=M.suspendedLanes&N,qn===M&&(wi&N)===N&&(Kn===4||Kn===3&&(wi&130023424)===wi&&500>hi()-G_?vh(M,0):W_|=N),La(M,_)}function QP(M,_){_===0&&(M.mode&1?(_=Oy,Oy<<=1,!(Oy&130023424)&&(Oy=4194304)):_=1);var N=ha();M=b1(M,_),M!==null&&(Vm(M,_,N),La(M,N))}function rte(M){var _=M.memoizedState,N=0;_!==null&&(N=_.retryLane),QP(M,N)}function nte(M,_){var N=0;switch(M.tag){case 13:var P=M.stateNode,q=M.memoizedState;q!==null&&(N=q.retryLane);break;case 19:P=M.stateNode;break;default:throw Error(a(314))}P!==null&&P.delete(_),QP(M,N)}var eI;eI=function(M,_,N){if(M!==null)if(M.memoizedProps!==_.pendingProps||ci.current)ro=!0;else{if(!(M.lanes&N)&&!(_.flags&128))return ro=!1,qee(M,_,N);ro=!!(M.flags&131072)}else ro=!1,cn&&_.flags&1048576&&zR(_,Vy,_.index);switch(_.lanes=0,_.tag){case 2:var P=_.type;M!==null&&(M.alternate=null,_.alternate=null,_.flags|=2),M=_.pendingProps;var q=Ol(_,Hn.current);$d(_,N),q=E_(null,_,P,M,q,N);var Y=C_();return _.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Vn(P)?(Y=!0,Fu(_)):Y=!1,_.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,d_(_),q.updater=jy,_.stateNode=q,q._reactInternals=_,p_(_,P,M,N),_=R_(null,_,P,!0,Y,N)):(_.tag=0,cn&&Y&&m_(_),ca(null,_,q,N),_=_.child),_;case 16:P=_.elementType;e:{switch(M!==null&&(M.alternate=null,_.alternate=null,_.flags|=2),M=_.pendingProps,q=P._init,P=q(P._payload),_.type=P,q=_.tag=ate(P),M=ls(P,M),q){case 0:_=O_(null,_,P,M,N);break e;case 1:_=MP(null,_,P,M,N);break e;case 11:_=yP(null,_,P,M,N);break e;case 14:_=bP(null,_,P,ls(P.type,M),N);break e}throw Error(a(306,P,""))}return _;case 0:return P=_.type,q=_.pendingProps,q=_.elementType===P?q:ls(P,q),O_(M,_,P,q,N);case 1:return P=_.type,q=_.pendingProps,q=_.elementType===P?q:ls(P,q),MP(M,_,P,q,N);case 3:e:{if(_P(_),M===null)throw Error(a(387));P=_.pendingProps,Y=_.memoizedState,q=Y.element,OR(M,_),Uy(_,P,null,N);var Se=_.memoizedState;if(P=Se.element,re&&Y.isDehydrated)if(Y={element:P,isDehydrated:!1,cache:Se.cache,transitions:Se.transitions},_.updateQueue.baseState=Y,_.memoizedState=Y,_.flags&256){q=Error(a(423)),_=EP(M,_,P,N,q);break e}else if(P!==q){q=Error(a(424)),_=EP(M,_,P,N,q);break e}else for(re&&(to=Rn(_.stateNode.containerInfo),eo=_,cn=!0,us=null,qm=!1),N=WR(_,null,P,N),_.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(Jd(),P===q){_=Bl(M,_,N);break e}ca(M,_,P,N)}_=_.child}return _;case 5:return GR(_),M===null&&y_(_),P=_.type,q=_.pendingProps,Y=M!==null?M.memoizedProps:null,Se=q.children,ne(P,q)?Se=null:Y!==null&&ne(P,Y)&&(_.flags|=32),SP(M,_),ca(M,_,Se,N),_.child;case 6:return M===null&&y_(_),null;case 13:return CP(M,_,N);case 4:return x_(_,_.stateNode.containerInfo),P=_.pendingProps,M===null?_.child=Zd(_,null,P,N):ca(M,_,P,N),_.child;case 11:return P=_.type,q=_.pendingProps,q=_.elementType===P?q:ls(P,q),yP(M,_,P,q,N);case 7:return ca(M,_,_.pendingProps,N),_.child;case 8:return ca(M,_,_.pendingProps.children,N),_.child;case 12:return ca(M,_,_.pendingProps.children,N),_.child;case 10:e:{if(P=_.type._context,q=_.pendingProps,Y=_.memoizedProps,Se=q.value,NR(_,P,Se),Y!==null)if(js(Y.value,Se)){if(Y.children===q.children&&!ci.current){_=Bl(M,_,N);break e}}else for(Y=_.child,Y!==null&&(Y.return=_);Y!==null;){var Be=Y.dependencies;if(Be!==null){Se=Y.child;for(var Ke=Be.firstContext;Ke!==null;){if(Ke.context===P){if(Y.tag===1){Ke=Pl(-1,N&-N),Ke.tag=2;var ht=Y.updateQueue;if(ht!==null){ht=ht.shared;var _t=ht.pending;_t===null?Ke.next=Ke:(Ke.next=_t.next,_t.next=Ke),ht.pending=Ke}}Y.lanes|=N,Ke=Y.alternate,Ke!==null&&(Ke.lanes|=N),h_(Y.return,N,_),Be.lanes|=N;break}Ke=Ke.next}}else if(Y.tag===10)Se=Y.type===_.type?null:Y.child;else if(Y.tag===18){if(Se=Y.return,Se===null)throw Error(a(341));Se.lanes|=N,Be=Se.alternate,Be!==null&&(Be.lanes|=N),h_(Se,N,_),Se=Y.sibling}else Se=Y.child;if(Se!==null)Se.return=Y;else for(Se=Y;Se!==null;){if(Se===_){Se=null;break}if(Y=Se.sibling,Y!==null){Y.return=Se.return,Se=Y;break}Se=Se.return}Y=Se}ca(M,_,q.children,N),_=_.child}return _;case 9:return q=_.type,P=_.pendingProps.children,$d(_,N),q=Do(q),P=P(q),_.flags|=1,ca(M,_,P,N),_.child;case 14:return P=_.type,q=ls(P,_.pendingProps),q=ls(P.type,q),bP(M,_,P,q,N);case 15:return xP(M,_,_.type,_.pendingProps,N);case 17:return P=_.type,q=_.pendingProps,q=_.elementType===P?q:ls(P,q),M!==null&&(M.alternate=null,_.alternate=null,_.flags|=2),_.tag=1,Vn(P)?(M=!0,Fu(_)):M=!1,$d(_,N),FR(_,P,q),p_(_,P,q,N),R_(null,_,P,!0,M,N);case 19:return kP(M,_,N);case 22:return wP(M,_,N)}throw Error(a(156,_.tag))};function tI(M,_){return i_(M,_)}function ite(M,_,N,P){this.tag=M,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Io(M,_,N,P){return new ite(M,_,N,P)}function eE(M){return M=M.prototype,!(!M||!M.isReactComponent)}function ate(M){if(typeof M=="function")return eE(M)?1:0;if(M!=null){if(M=M.$$typeof,M===p)return 11;if(M===g)return 14}return 2}function qu(M,_){var N=M.alternate;return N===null?(N=Io(M.tag,_,M.key,M.mode),N.elementType=M.elementType,N.type=M.type,N.stateNode=M.stateNode,N.alternate=M,M.alternate=N):(N.pendingProps=_,N.type=M.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=M.flags&14680064,N.childLanes=M.childLanes,N.lanes=M.lanes,N.child=M.child,N.memoizedProps=M.memoizedProps,N.memoizedState=M.memoizedState,N.updateQueue=M.updateQueue,_=M.dependencies,N.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},N.sibling=M.sibling,N.index=M.index,N.ref=M.ref,N}function w1(M,_,N,P,q,Y){var Se=2;if(P=M,typeof M=="function")eE(M)&&(Se=1);else if(typeof M=="string")Se=5;else e:switch(M){case u:return xh(N.children,q,Y,_);case c:Se=8,q|=8;break;case h:return M=Io(12,N,_,q|2),M.elementType=h,M.lanes=Y,M;case v:return M=Io(13,N,_,q),M.elementType=v,M.lanes=Y,M;case y:return M=Io(19,N,_,q),M.elementType=y,M.lanes=Y,M;case b:return S1(N,q,Y,_);default:if(typeof M=="object"&&M!==null)switch(M.$$typeof){case d:Se=10;break e;case f:Se=9;break e;case p:Se=11;break e;case g:Se=14;break e;case w:Se=16,P=null;break e}throw Error(a(130,M==null?M:typeof M,""))}return _=Io(Se,N,_,q),_.elementType=M,_.type=P,_.lanes=Y,_}function xh(M,_,N,P){return M=Io(7,M,P,_),M.lanes=N,M}function S1(M,_,N,P){return M=Io(22,M,P,_),M.elementType=b,M.lanes=N,M.stateNode={},M}function tE(M,_,N){return M=Io(6,M,null,_),M.lanes=N,M}function rE(M,_,N){return _=Io(4,M.children!==null?M.children:[],M.key,_),_.lanes=N,_.stateNode={containerInfo:M.containerInfo,pendingChildren:null,implementation:M.implementation},_}function ote(M,_,N,P,q){this.tag=_,this.containerInfo=M,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=De,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=r_(0),this.expirationTimes=r_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=r_(0),this.identifierPrefix=P,this.onRecoverableError=q,re&&(this.mutableSourceEagerHydrationData=null)}function rI(M,_,N,P,q,Y,Se,Be,Ke){return M=new ote(M,_,N,Be,Ke),_===1?(_=1,Y===!0&&(_|=8)):_=0,Y=Io(3,null,null,_),M.current=Y,Y.stateNode=M,Y.memoizedState={element:P,isDehydrated:N,cache:null,transitions:null},d_(Y),M}function nI(M){if(!M)return Jt;M=M._reactInternals;e:{if(A(M)!==M||M.tag!==1)throw Error(a(170));var _=M;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Vn(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(a(171))}if(M.tag===1){var N=M.type;if(Vn(N))return zs(M,N,_)}return _}function iI(M){var _=M._reactInternals;if(_===void 0)throw typeof M.render=="function"?Error(a(188)):(M=Object.keys(M).join(","),Error(a(268,M)));return M=D(_),M===null?null:M.stateNode}function aI(M,_){if(M=M.memoizedState,M!==null&&M.dehydrated!==null){var N=M.retryLane;M.retryLane=N!==0&&N<_?N:_}}function nE(M,_){aI(M,_),(M=M.alternate)&&aI(M,_)}function ste(M){return M=D(M),M===null?null:M.stateNode}function lte(){return null}return e.attemptContinuousHydration=function(M){if(M.tag===13){var _=ha();Po(M,134217728,_),nE(M,134217728)}},e.attemptHydrationAtCurrentPriority=function(M){if(M.tag===13){var _=ha(),N=Hu(M);Po(M,N,_),nE(M,N)}},e.attemptSynchronousHydration=function(M){switch(M.tag){case 3:var _=M.stateNode;if(_.current.memoizedState.isDehydrated){var N=Hm(_.pendingLanes);N!==0&&(n_(_,N|1),La(_,hi()),!(pr&6)&&(nf(),Hs()))}break;case 13:var P=ha();$P(function(){return Po(M,1,P)}),nE(M,1)}},e.batchedUpdates=function(M,_){var N=pr;pr|=1;try{return M(_)}finally{pr=N,pr===0&&(nf(),Iy&&Hs())}},e.createComponentSelector=function(M){return{$$typeof:s1,value:M}},e.createContainer=function(M,_,N,P,q,Y,Se){return rI(M,_,!1,null,N,P,q,Y,Se)},e.createHasPseudoClassSelector=function(M){return{$$typeof:l1,value:M}},e.createHydrationContainer=function(M,_,N,P,q,Y,Se,Be,Ke){return M=rI(N,P,!0,M,q,Y,Se,Be,Ke),M.context=nI(null),N=M.current,P=ha(),q=Hu(N),Y=Pl(P,q),Y.callback=_??null,zu(N,Y),M.current.lanes=q,Vm(M,q,P),La(M,P),M},e.createPortal=function(M,_,N){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:P==null?null:""+P,children:M,containerInfo:_,implementation:N}},e.createRoleSelector=function(M){return{$$typeof:u1,value:M}},e.createTestNameSelector=function(M){return{$$typeof:c1,value:M}},e.createTextSelector=function(M){return{$$typeof:h1,value:M}},e.deferredUpdates=function(M){var _=Ar,N=In.transition;try{return In.transition=null,Ar=16,M()}finally{Ar=_,In.transition=N}},e.discreteUpdates=function(M,_,N,P,q){var Y=Ar,Se=In.transition;try{return In.transition=null,Ar=1,M(_,N,P,q)}finally{Ar=Y,In.transition=Se,pr===0&&nf()}},e.findAllNodes=V_,e.findBoundingRects=function(M,_){if(!G)throw Error(a(363));_=V_(M,_),M=[];for(var N=0;N<_.length;N++)M.push(ce(_[N]));for(_=M.length-1;0<_;_--){N=M[_];for(var P=N.x,q=P+N.width,Y=N.y,Se=Y+N.height,Be=_-1;0<=Be;Be--)if(_!==Be){var Ke=M[Be],ht=Ke.x,_t=ht+Ke.width,nr=Ke.y,Vt=nr+Ke.height;if(P>=ht&&Y>=nr&&q<=_t&&Se<=Vt){M.splice(_,1);break}else if(P!==ht||N.width!==Ke.width||Vt<Y||nr>Se){if(!(Y!==nr||N.height!==Ke.height||_t<P||ht>q)){ht>P&&(Ke.width+=ht-P,Ke.x=P),_t<q&&(Ke.width=q-ht),M.splice(_,1);break}}else{nr>Y&&(Ke.height+=nr-Y,Ke.y=Y),Vt<Se&&(Ke.height=Se-nr),M.splice(_,1);break}}}return M},e.findHostInstance=iI,e.findHostInstanceWithNoPortals=function(M){return M=C(M),M=M!==null?U(M):null,M===null?null:M.stateNode},e.findHostInstanceWithWarning=function(M){return iI(M)},e.flushControlled=function(M){var _=pr;pr|=1;var N=In.transition,P=Ar;try{In.transition=null,Ar=1,M()}finally{Ar=P,In.transition=N,pr=_,pr===0&&(nf(),Hs())}},e.flushPassiveEffects=bh,e.flushSync=$P,e.focusWithin=function(M,_){if(!G)throw Error(a(363));for(M=U_(M),_=qP(M,_),_=Array.from(_),M=0;M<_.length;){var N=_[M++];if(!$(N)){if(N.tag===5&&ge(N.stateNode))return!0;for(N=N.child;N!==null;)_.push(N),N=N.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Ar},e.getFindAllNodesFailureDescription=function(M,_){if(!G)throw Error(a(363));var N=0,P=[];M=[U_(M),0];for(var q=0;q<M.length;){var Y=M[q++],Se=M[q++],Be=_[Se];if((Y.tag!==5||!$(Y))&&(j_(Y,Be)&&(P.push(H_(Be)),Se++,Se>N&&(N=Se)),Se<_.length))for(Y=Y.child;Y!==null;)M.push(Y,Se),Y=Y.sibling}if(N<_.length){for(M=[];N<_.length;N++)M.push(H_(_[N]));return`findAllNodes was able to match part of the selector:
  `+(P.join(" > ")+`

No matching component was found for:
  `)+M.join(" > ")}return null},e.getPublicRootInstance=function(M){if(M=M.current,!M.child)return null;switch(M.child.tag){case 5:return F(M.child.stateNode);default:return M.child.stateNode}},e.injectIntoDevTools=function(M){if(M={bundleType:M.bundleType,version:M.version,rendererPackageName:M.rendererPackageName,rendererConfig:M.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:ste,findFiberByHostInstance:M.findFiberByHostInstance||lte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")M=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)M=!0;else{try{Py=_.inject(M),Us=_}catch{}M=!!_.checkDCE}}return M},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(M,_,N,P){if(!G)throw Error(a(363));M=V_(M,_);var q=xe(M,N,P).disconnect;return{disconnect:function(){q()}}},e.registerMutableSourceForHydration=function(M,_){var N=_._getVersion;N=N(_._source),M.mutableSourceEagerHydrationData==null?M.mutableSourceEagerHydrationData=[_,N]:M.mutableSourceEagerHydrationData.push(_,N)},e.runWithPriority=function(M,_){var N=Ar;try{return Ar=M,_()}finally{Ar=N}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(M,_,N,P){var q=_.current,Y=ha(),Se=Hu(q);return N=nI(N),_.context===null?_.context=N:_.pendingContext=N,_=Pl(Y,Se),_.payload={element:M},P=P===void 0?null:P,P!==null&&(_.callback=P),zu(q,_),M=Po(q,Se,Y),M!==null&&zy(M,q,Se),Se},e};WJ.exports=T8e;var D8e=WJ.exports;const k8e=is(D8e),YO={},N8e=r=>void Object.assign(YO,r);function O8e(r,e){function t(u,{args:c=[],attach:h,...d},f){let p=`${u[0].toUpperCase()}${u.slice(1)}`,v;if(u==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=d.object;v=Vf(y,{type:u,root:f,attach:h,primitive:!0})}else{const y=YO[p];if(!y)throw new Error(`R3F: ${p} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(c))throw new Error("R3F: The args prop must be an array!");v=Vf(new y(...c),{type:u,root:f,attach:h,memoizedProps:{args:c}})}return v.__r3f.attach===void 0&&(v instanceof or?v.__r3f.attach="geometry":v instanceof Li&&(v.__r3f.attach="material")),p!=="inject"&&XC(v,d),v}function n(u,c){let h=!1;if(c){var d,f;(d=c.__r3f)!=null&&d.attach?$C(u,c,c.__r3f.attach):c.isObject3D&&u.isObject3D&&(u.add(c),h=!0),h||(f=u.__r3f)==null||f.objects.push(c),c.__r3f||Vf(c,{}),c.__r3f.parent=u,c3(c),qf(c)}}function i(u,c,h){let d=!1;if(c){var f,p;if((f=c.__r3f)!=null&&f.attach)$C(u,c,c.__r3f.attach);else if(c.isObject3D&&u.isObject3D){c.parent=u,c.dispatchEvent({type:"added"});const v=u.children.filter(g=>g!==c),y=v.indexOf(h);u.children=[...v.slice(0,y),c,...v.slice(y)],d=!0}d||(p=u.__r3f)==null||p.objects.push(c),c.__r3f||Vf(c,{}),c.__r3f.parent=u,c3(c),qf(c)}}function a(u,c,h=!1){u&&[...u].forEach(d=>o(c,d,h))}function o(u,c,h){if(c){var d,f,p;if(c.__r3f&&(c.__r3f.parent=null),(d=u.__r3f)!=null&&d.objects&&(u.__r3f.objects=u.__r3f.objects.filter(b=>b!==c)),(f=c.__r3f)!=null&&f.attach)DU(u,c,c.__r3f.attach);else if(c.isObject3D&&u.isObject3D){var v;u.remove(c),(v=c.__r3f)!=null&&v.root&&z8e(uw(c),c)}const g=(p=c.__r3f)==null?void 0:p.primitive,w=!g&&(h===void 0?c.dispose!==null:h);if(!g){var y;a((y=c.__r3f)==null?void 0:y.objects,c,w),a(c.children,c,w)}if(delete c.__r3f,w&&c.dispose&&c.type!=="Scene"){const b=()=>{try{c.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?l3.unstable_scheduleCallback(l3.unstable_IdlePriority,b):b()}qf(u)}}function s(u,c,h,d){var f;const p=(f=u.__r3f)==null?void 0:f.parent;if(!p)return;const v=t(c,h,u.__r3f.root);if(u.children){for(const y of u.children)y.__r3f&&n(v,y);u.children=u.children.filter(y=>!y.__r3f)}u.__r3f.objects.forEach(y=>n(v,y)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(p,u),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),n(p,v),v.raycast&&v.__r3f.eventCount&&uw(v).getState().internal.interaction.push(v),[d,d.alternate].forEach(y=>{y!==null&&(y.stateNode=v,y.ref&&(typeof y.ref=="function"?y.ref(v):y.ref.current=v))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:k8e({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,c)=>{if(!c)return;const h=u.getState().scene;h.__r3f&&(h.__r3f.root=u,n(h,c))},removeChildFromContainer:(u,c)=>{c&&o(u.getState().scene,c)},insertInContainerBefore:(u,c,h)=>{if(!c||!h)return;const d=u.getState().scene;d.__r3f&&i(d,c,h)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var c;return!!((c=u==null?void 0:u.__r3f)!=null?c:{}).handlers},prepareUpdate(u,c,h,d){var f;if(((f=u==null?void 0:u.__r3f)!=null?f:{}).primitive&&d.object&&d.object!==u)return[!0];{const{args:p=[],children:v,...y}=d,{args:g=[],children:w,...b}=h;if(!Array.isArray(p))throw new Error("R3F: the args prop must be an array!");if(p.some((x,S)=>x!==g[S]))return[!0];const m=eZ(u,y,b,!0);return m.changes.length?[!1,m]:null}},commitUpdate(u,[c,h],d,f,p,v){c?s(u,d,p,v):XC(u,h)},commitMount(u,c,h,d){var f;const p=(f=u.__r3f)!=null?f:{};u.raycast&&p.handlers&&p.eventCount&&uw(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Vf(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var c;const{attach:h,parent:d}=(c=u.__r3f)!=null?c:{};h&&d&&DU(d,u,h),u.isObject3D&&(u.visible=!1),qf(u)},unhideInstance(u,c){var h;const{attach:d,parent:f}=(h=u.__r3f)!=null?h:{};d&&f&&$C(f,u,d),(u.isObject3D&&c.visible==null||c.visible)&&(u.visible=!0),qf(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():fp.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&hn.fun(performance.now)?performance.now:hn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:hn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:hn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:XC}}var EU,CU;const GC=r=>"colorSpace"in r||"outputColorSpace"in r,XJ=()=>{var r;return(r=YO.ColorManagement)!=null?r:null},YJ=r=>r&&r.isOrthographicCamera,R8e=r=>r&&r.hasOwnProperty("current"),wy=typeof window<"u"&&((EU=window.document)!=null&&EU.createElement||((CU=window.navigator)==null?void 0:CU.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function JJ(r){const e=j.useRef(r);return wy(()=>void(e.current=r),[r]),e}function P8e({set:r}){return wy(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class ZJ extends j.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}ZJ.getDerivedStateFromError=()=>({error:!0});const KJ="__default",AU=new Map,I8e=r=>r&&!!r.memoized&&!!r.changes;function QJ(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}const Rg=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()};function uw(r){let e=r.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const hn={obj:r=>r===Object(r)&&!hn.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(hn.str(r)||hn.num(r))return r===e;const a=hn.obj(r);if(a&&n==="reference")return r===e;const o=hn.arr(r);if(o&&t==="reference")return r===e;if((o||a)&&r===e)return!0;let s;for(s in r)if(!(s in e))return!1;if(a&&t==="shallow"&&n==="shallow"){for(s in i?e:r)if(!hn.equ(r[s],e[s],{strict:i,objects:"reference"}))return!1}else for(s in i?e:r)if(r[s]!==e[s])return!1;if(hn.und(s)){if(o&&r.length===0&&e.length===0||a&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function L8e(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function Vf(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function u3(r,e){let t=r;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((a,o)=>a[o],r),{target:t,key:i}}else return{target:t,key:e}}const TU=/-\d+$/;function $C(r,e,t){if(hn.str(t)){if(TU.test(t)){const a=t.replace(TU,""),{target:o,key:s}=u3(r,a);Array.isArray(o[s])||(o[s]=[])}const{target:n,key:i}=u3(r,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(r,e)}function DU(r,e,t){var n,i;if(hn.str(t)){const{target:a,key:o}=u3(r,t),s=e.__r3f.previousAttach;s===void 0?delete a[o]:a[o]=s}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(r,e);(i=e.__r3f)==null||delete i.previousAttach}function eZ(r,{children:e,key:t,ref:n,...i},{children:a,key:o,ref:s,...l}={},u=!1){var c;const h=(c=r==null?void 0:r.__r3f)!=null?c:{},d=Object.entries(i),f=[];if(u){const v=Object.keys(l);for(let y=0;y<v.length;y++)i.hasOwnProperty(v[y])||d.unshift([v[y],KJ+"remove"])}d.forEach(([v,y])=>{var g;if((g=r.__r3f)!=null&&g.primitive&&v==="object"||hn.equ(y,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return f.push([v,y,!0,[]]);let w=[];v.includes("-")&&(w=v.split("-")),f.push([v,y,!1,w]);for(const b in i){const m=i[b];b.startsWith(`${v}-`)&&f.push([b,m,!1,b.split("-")])}});const p={...i};return h.memoizedProps&&h.memoizedProps.args&&(p.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(p.attach=h.memoizedProps.attach),{memoized:p,changes:f}}const F8e=typeof process<"u"&&!1;function XC(r,e){var t,n,i;const a=(t=r.__r3f)!=null?t:{},o=a.root,s=(n=o==null||o.getState==null?void 0:o.getState())!=null?n:{},{memoized:l,changes:u}=I8e(e)?e:eZ(r,e),c=a.eventCount;r.__r3f&&(r.__r3f.memoizedProps=l);for(let h=0;h<u.length;h++){let[d,f,p,v]=u[h];if(GC(r)){const w="srgb",b="srgb-linear";d==="encoding"?(d="colorSpace",f=f===3001?w:b):d==="outputEncoding"&&(d="outputColorSpace",f=f===3001?w:b)}let y=r,g=y[d];if(v.length&&(g=v.reduce((w,b)=>w[b],r),!(g&&g.set))){const[w,...b]=v.reverse();y=b.reverse().reduce((m,x)=>m[x],r),d=w}if(f===KJ+"remove")if(y.constructor){let w=AU.get(y.constructor);w||(w=new y.constructor,AU.set(y.constructor,w)),f=w[d]}else f=0;if(p)f?a.handlers[d]=f:delete a.handlers[d],a.eventCount=Object.keys(a.handlers).length;else if(g&&g.set&&(g.copy||g instanceof cd)){if(Array.isArray(f))g.fromArray?g.fromArray(f):g.set(...f);else if(g.copy&&f&&f.constructor&&(F8e?g.constructor.name===f.constructor.name:g.constructor===f.constructor))g.copy(f);else if(f!==void 0){const w=g instanceof wt;!w&&g.setScalar?g.setScalar(f):g instanceof cd&&f instanceof cd?g.mask=f.mask:g.set(f),!XJ()&&!s.linear&&w&&g.convertSRGBToLinear()}}else if(y[d]=f,y[d]instanceof Sn&&y[d].format===ya&&y[d].type===gl){const w=y[d];GC(w)&&GC(s.gl)?w.colorSpace=s.gl.outputColorSpace:w.encoding=s.gl.outputEncoding}qf(r)}if(a.parent&&r.raycast&&c!==a.eventCount){const h=uw(r).getState().internal,d=h.interaction.indexOf(r);d>-1&&h.interaction.splice(d,1),a.eventCount&&h.interaction.push(r)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=r.__r3f)!=null&&i.parent&&c3(r),r}function qf(r){var e,t;const n=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function c3(r){r.onUpdate==null||r.onUpdate(r)}function tZ(r,e){r.manual||(YJ(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function lx(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function B8e(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return fp.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return fp.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return fp.ContinuousEventPriority;default:return fp.DefaultEventPriority}}function rZ(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function z8e(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{rZ(t.capturedMap,e,n,i)})}function U8e(r){function e(l){const{internal:u}=r.getState(),c=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+c]}))}function n(l,u){const c=r.getState(),h=new Set,d=[],f=u?u(c.internal.interaction):c.internal.interaction;for(let g=0;g<f.length;g++){const w=Rg(f[g]);w&&(w.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function p(g){const w=Rg(g);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var b;w.events.compute==null||w.events.compute(l,w,(b=w.previousRoot)==null?void 0:b.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(g,!0):[]}let v=f.flatMap(p).sort((g,w)=>{const b=Rg(g.object),m=Rg(w.object);return!b||!m?g.distance-w.distance:m.events.priority-b.events.priority||g.distance-w.distance}).filter(g=>{const w=lx(g);return h.has(w)?!1:(h.add(w),!0)});c.events.filter&&(v=c.events.filter(v,c));for(const g of v){let w=g.object;for(;w;){var y;(y=w.__r3f)!=null&&y.eventCount&&d.push({...g,eventObject:w}),w=w.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let g of c.internal.capturedMap.get(l.pointerId).values())h.has(lx(g.intersection))||d.push(g.intersection);return d}function i(l,u,c,h){const d=r.getState();if(l.length){const f={stopped:!1};for(const p of l){const v=Rg(p.object)||d,{raycaster:y,pointer:g,camera:w,internal:b}=v,m=new me(g.x,g.y,0).unproject(w),x=C=>{var D,O;return(D=(O=b.capturedMap.get(C))==null?void 0:O.has(p.eventObject))!=null?D:!1},S=C=>{const D={intersection:p,target:u.target};b.capturedMap.has(C)?b.capturedMap.get(C).set(p.eventObject,D):b.capturedMap.set(C,new Map([[p.eventObject,D]])),u.target.setPointerCapture(C)},E=C=>{const D=b.capturedMap.get(C);D&&rZ(b.capturedMap,p.eventObject,D,C)};let A={};for(let C in u){let D=u[C];typeof D!="function"&&(A[C]=D)}let T={...p,...A,pointer:g,intersections:l,stopped:f.stopped,delta:c,unprojectedPoint:m,ray:y.ray,camera:w,stopPropagation(){const C="pointerId"in u&&b.capturedMap.get(u.pointerId);if((!C||C.has(p.eventObject))&&(T.stopped=f.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(D=>D.eventObject===p.eventObject))){const D=l.slice(0,l.indexOf(p));a([...D,p])}},target:{hasPointerCapture:x,setPointerCapture:S,releasePointerCapture:E},currentTarget:{hasPointerCapture:x,setPointerCapture:S,releasePointerCapture:E},nativeEvent:u};if(h(T),f.stopped===!0)break}}return l}function a(l){const{internal:u}=r.getState();for(const c of u.hovered.values())if(!l.length||!l.find(h=>h.object===c.object&&h.index===c.index&&h.instanceId===c.instanceId)){const h=c.eventObject.__r3f,d=h==null?void 0:h.handlers;if(u.hovered.delete(lx(c)),h!=null&&h.eventCount){const f={...c,intersections:l};d.onPointerOut==null||d.onPointerOut(f),d.onPointerLeave==null||d.onPointerLeave(f)}}}function o(l,u){for(let c=0;c<u.length;c++){const h=u[c].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function s(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return u=>{const{internal:c}=r.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),a([]))})}}return function(u){const{onPointerMissed:c,internal:h}=r.getState();h.lastEvent.current=u;const d=l==="onPointerMove",f=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",p=n(u,d?t:void 0),v=f?e(u):0;l==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=p.map(g=>g.eventObject)),f&&!p.length&&v<=2&&(o(u,h.interaction),c&&c(u)),d&&a(p);function y(g){const w=g.eventObject,b=w.__r3f,m=b==null?void 0:b.handlers;if(b!=null&&b.eventCount)if(d){if(m.onPointerOver||m.onPointerEnter||m.onPointerOut||m.onPointerLeave){const x=lx(g),S=h.hovered.get(x);S?S.stopped&&g.stopPropagation():(h.hovered.set(x,g),m.onPointerOver==null||m.onPointerOver(g),m.onPointerEnter==null||m.onPointerEnter(g))}m.onPointerMove==null||m.onPointerMove(g)}else{const x=m[l];x?(!f||h.initialHits.includes(w))&&(o(u,h.interaction.filter(S=>!h.initialHits.includes(S))),x(g)):f&&h.initialHits.includes(w)&&o(u,h.interaction.filter(S=>!h.initialHits.includes(S)))}}i(p,u,v,y)}}return{handlePointer:s}}const j8e=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],nZ=r=>!!(r!=null&&r.render),JO=j.createContext(null),H8e=(r,e)=>{const t=$N((s,l)=>{const u=new me,c=new me,h=new me;function d(y=l().camera,g=c,w=l().size){const{width:b,height:m,top:x,left:S}=w,E=b/m;g instanceof me?h.copy(g):h.set(...g);const A=y.getWorldPosition(u).distanceTo(h);if(YJ(y))return{width:b/y.zoom,height:m/y.zoom,top:x,left:S,factor:1,distance:A,aspect:E};{const T=y.fov*Math.PI/180,C=2*Math.tan(T/2)*A,D=C*(b/m);return{width:D,height:C,top:x,left:S,factor:b/D,distance:A,aspect:E}}}let f;const p=y=>s(g=>({performance:{...g.performance,current:y}})),v=new Qe;return{set:s,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>r(l(),y),advance:(y,g)=>e(y,g,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new qO,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();f&&clearTimeout(f),y.performance.current!==y.performance.min&&p(y.performance.min),f=setTimeout(()=>p(l().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:y=>s(g=>({...g,events:{...g.events,...y}})),setSize:(y,g,w,b,m)=>{const x=l().camera,S={width:y,height:g,top:b||0,left:m||0,updateStyle:w};s(E=>({size:S,viewport:{...E.viewport,...d(x,c,S)}}))},setDpr:y=>s(g=>{const w=QJ(y);return{viewport:{...g.viewport,dpr:w,initialDpr:g.viewport.initialDpr||w}}}),setFrameloop:(y="always")=>{const g=l().clock;g.stop(),g.elapsedTime=0,y!=="never"&&(g.start(),g.elapsedTime=0),s(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:j.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,g,w)=>{const b=l().internal;return b.priority=b.priority+(g>0?1:0),b.subscribers.push({ref:y,priority:g,store:w}),b.subscribers=b.subscribers.sort((m,x)=>m.priority-x.priority),()=>{const m=l().internal;m!=null&&m.subscribers&&(m.priority=m.priority-(g>0?1:0),m.subscribers=m.subscribers.filter(x=>x.ref!==y))}}}}}),n=t.getState();let i=n.size,a=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:s,size:l,viewport:u,gl:c,set:h}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==a){var d;i=l,a=u.dpr,tZ(s,l),c.setPixelRatio(u.dpr);const f=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,f)}s!==o&&(o=s,h(f=>({viewport:{...f.viewport,...f.viewport.getCurrentViewport(s)}})))}),t.subscribe(s=>r(s)),t};let ux,V8e=new Set,q8e=new Set,W8e=new Set;function YC(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function Pg(r,e){switch(r){case"before":return YC(V8e,e);case"after":return YC(q8e,e);case"tail":return YC(W8e,e)}}let JC,ZC;function KC(r,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),JC=e.internal.subscribers,ux=0;ux<JC.length;ux++)ZC=JC[ux],ZC.ref.current(ZC.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function G8e(r){let e=!1,t,n,i;function a(l){n=requestAnimationFrame(a),e=!0,t=0,Pg("before",l);for(const c of r.values()){var u;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(t+=KC(l,i))}if(Pg("after",l),t===0)return Pg("tail",l),e=!1,cancelAnimationFrame(n)}function o(l,u=1){var c;if(!l)return r.forEach(h=>o(h.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(a)))}function s(l,u=!0,c,h){if(u&&Pg("before",l),c)KC(l,c,h);else for(const d of r.values())KC(l,d.store.getState());u&&Pg("after",l)}return{loop:a,invalidate:o,advance:s}}function ZO(){const r=j.useContext(JO);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Dn(r=t=>t,e){return ZO()(r,e)}function U2(r,e=0){const t=ZO(),n=t.getState().internal.subscribe,i=JJ(r);return wy(()=>n(i,e,t),[e,n,t]),null}const rm=new Map,{invalidate:kU,advance:NU}=G8e(rm),{reconciler:Tv,applyProps:If}=O8e(rm,B8e),Lf={objects:"shallow",strict:!1},$8e=(r,e)=>{const t=typeof r=="function"?r(e):r;return nZ(t)?t:new EO({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function X8e(r,e){const t=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(e){const{width:n,height:i,top:a,left:o,updateStyle:s=t}=e;return{width:n,height:i,top:a,left:o,updateStyle:s}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:n,height:i,top:a,left:o}=r.parentElement.getBoundingClientRect();return{width:n,height:i,top:a,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Y8e(r){const e=rm.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=n||H8e(kU,NU),o=t||Tv.createContainer(a,fp.ConcurrentRoot,null,!1,null,"",i,null);e||rm.set(r,{fiber:o,store:a});let s,l=!1,u;return{configure(c={}){let{gl:h,size:d,scene:f,events:p,onCreated:v,shadows:y=!1,linear:g=!1,flat:w=!1,legacy:b=!1,orthographic:m=!1,frameloop:x="always",dpr:S=[1,2],performance:E,raycaster:A,camera:T,onPointerMissed:C}=c,D=a.getState(),O=D.gl;D.gl||D.set({gl:O=$8e(h,r)});let U=D.raycaster;U||D.set({raycaster:U=new XO});const{params:L,...F}=A||{};if(hn.equ(F,U,Lf)||If(U,{...F}),hn.equ(L,U.params,Lf)||If(U,{params:{...U.params,...L}}),!D.camera||D.camera===u&&!hn.equ(u,T,Lf)){u=T;const X=T instanceof py,Z=X?T:m?new au(0,0,0,0,.1,1e3):new Nn(75,0,.1,1e3);X||(Z.position.z=5,T&&If(Z,T),!D.camera&&!(T!=null&&T.rotation)&&Z.lookAt(0,0,0)),D.set({camera:Z}),U.camera=Z}if(!D.scene){let X;f instanceof bv?X=f:(X=new bv,f&&If(X,f)),D.set({scene:Vf(X)})}if(!D.xr){var k;const X=(J,ne)=>{const fe=a.getState();fe.frameloop!=="never"&&NU(J,!0,fe,ne)},Z=()=>{const J=a.getState();J.gl.xr.enabled=J.gl.xr.isPresenting,J.gl.xr.setAnimationLoop(J.gl.xr.isPresenting?X:null),J.gl.xr.isPresenting||kU(J)},Q={connect(){const J=a.getState().gl;J.xr.addEventListener("sessionstart",Z),J.xr.addEventListener("sessionend",Z)},disconnect(){const J=a.getState().gl;J.xr.removeEventListener("sessionstart",Z),J.xr.removeEventListener("sessionend",Z)}};typeof((k=O.xr)==null?void 0:k.addEventListener)=="function"&&Q.connect(),D.set({xr:Q})}if(O.shadowMap){const X=O.shadowMap.enabled,Z=O.shadowMap.type;if(O.shadowMap.enabled=!!y,hn.boo(y))O.shadowMap.type=g0;else if(hn.str(y)){var R;const Q={basic:LX,percentage:d2,soft:g0,variance:ms};O.shadowMap.type=(R=Q[y])!=null?R:g0}else hn.obj(y)&&Object.assign(O.shadowMap,y);(X!==O.shadowMap.enabled||Z!==O.shadowMap.type)&&(O.shadowMap.needsUpdate=!0)}const z=XJ();z&&("enabled"in z?z.enabled=!b:"legacyMode"in z&&(z.legacyMode=b)),If(O,{outputEncoding:g?3e3:3001,toneMapping:w?ml:oO}),D.legacy!==b&&D.set(()=>({legacy:b})),D.linear!==g&&D.set(()=>({linear:g})),D.flat!==w&&D.set(()=>({flat:w})),h&&!hn.fun(h)&&!nZ(h)&&!hn.equ(h,O,Lf)&&If(O,h),p&&!D.events.handlers&&D.set({events:p(a)});const B=X8e(r,d);return hn.equ(B,D.size,Lf)||D.setSize(B.width,B.height,B.updateStyle,B.top,B.left),S&&D.viewport.dpr!==QJ(S)&&D.setDpr(S),D.frameloop!==x&&D.setFrameloop(x),D.onPointerMissed||D.set({onPointerMissed:C}),E&&!hn.equ(E,D.performance,Lf)&&D.set(X=>({performance:{...X.performance,...E}})),s=v,l=!0,this},render(c){return l||this.configure(),Tv.updateContainer(j.createElement(J8e,{store:a,children:c,onCreated:s,rootElement:r}),o,null,()=>{}),a},unmount(){iZ(r)}}}function J8e({store:r,children:e,onCreated:t,rootElement:n}){return wy(()=>{const i=r.getState();i.set(a=>({internal:{...a.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),j.createElement(JO.Provider,{value:r},e)}function iZ(r,e){const t=rm.get(r),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Tv.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var a,o,s,l;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(o=a.renderLists)==null||o.dispose==null||o.dispose(),(s=i.gl)==null||s.forceContextLoss==null||s.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),L8e(i),rm.delete(r)}catch{}},500)})}}function Z8e(r,e,t){return j.createElement(K8e,{key:e.uuid,children:r,container:e,state:t})}function K8e({state:r={},children:e,container:t}){const{events:n,size:i,...a}=r,o=ZO(),[s]=j.useState(()=>new XO),[l]=j.useState(()=>new Qe),u=j.useCallback((h,d)=>{const f={...h};Object.keys(h).forEach(v=>{(j8e.includes(v)||h[v]!==d[v]&&d[v])&&delete f[v]});let p;if(d&&i){const v=d.camera;p=h.viewport.getCurrentViewport(v,new me,i),v!==h.camera&&tZ(v,i)}return{...f,scene:t,raycaster:s,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...d==null?void 0:d.events,...n},size:{...h.size,...i},viewport:{...h.viewport,...p},...a}},[r]),[c]=j.useState(()=>{const h=o.getState();return $N((d,f)=>({...h,scene:t,raycaster:s,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...n},size:{...h.size,...i},...a,set:d,get:f,setEvents:p=>d(v=>({...v,events:{...v.events,...p}}))}))});return j.useEffect(()=>{const h=o.subscribe(d=>c.setState(f=>u(d,f)));return()=>{h(),c.destroy()}},[]),j.useEffect(()=>{c.setState(h=>u(o.getState(),h))},[u]),j.createElement(j.Fragment,null,Tv.createPortal(j.createElement(JO.Provider,{value:c},e),c,null))}Tv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:j.version});function h3(r,e,t){var n,i,a,o,s;e==null&&(e=100);function l(){var c=Date.now()-o;c<e&&c>=0?n=setTimeout(l,e-c):(n=null,t||(s=r.apply(a,i),a=i=null))}var u=function(){a=this,i=arguments,o=Date.now();var c=t&&!n;return n||(n=setTimeout(l,e)),c&&(s=r.apply(a,i),a=i=null),s};return u.clear=function(){n&&(clearTimeout(n),n=null)},u.flush=function(){n&&(s=r.apply(a,i),a=i=null,clearTimeout(n),n=null)},u}h3.debounce=h3;var Q8e=h3;const OU=is(Q8e);function eUe(r){let{debounce:e,scroll:t,polyfill:n,offsetSize:i}=r===void 0?{debounce:0,scroll:!1,offsetSize:!1}:r;const a=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,s]=j.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=j.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,h=j.useRef(!1);j.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[d,f,p]=j.useMemo(()=>{const w=()=>{if(!l.current.element)return;const{left:b,top:m,width:x,height:S,bottom:E,right:A,x:T,y:C}=l.current.element.getBoundingClientRect(),D={left:b,top:m,width:x,height:S,bottom:E,right:A,x:T,y:C};l.current.element instanceof HTMLElement&&i&&(D.height=l.current.element.offsetHeight,D.width=l.current.element.offsetWidth),Object.freeze(D),h.current&&!iUe(l.current.lastBounds,D)&&s(l.current.lastBounds=D)};return[w,c?OU(w,c):w,u?OU(w,u):w]},[s,i,u,c]);function v(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new a(p),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(w=>w.addEventListener("scroll",p,{capture:!0,passive:!0})))}const g=w=>{!w||w===l.current.element||(v(),l.current.element=w,l.current.scrollContainers=aZ(w),y())};return rUe(p,!!t),tUe(f),j.useEffect(()=>{v(),y()},[t,p,f]),j.useEffect(()=>v,[]),[g,o,d]}function tUe(r){j.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function rUe(r,e){j.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function aZ(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(a=>a==="auto"||a==="scroll")&&e.push(r),[...e,...aZ(r.parentElement)]}const nUe=["x","y","top","bottom","left","right","width","height"],iUe=(r,e)=>nUe.every(t=>r[t]===e[t]);var aUe=Object.defineProperty,oUe=Object.defineProperties,sUe=Object.getOwnPropertyDescriptors,RU=Object.getOwnPropertySymbols,lUe=Object.prototype.hasOwnProperty,uUe=Object.prototype.propertyIsEnumerable,PU=(r,e,t)=>e in r?aUe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,IU=(r,e)=>{for(var t in e||(e={}))lUe.call(e,t)&&PU(r,t,e[t]);if(RU)for(var t of RU(e))uUe.call(e,t)&&PU(r,t,e[t]);return r},cUe=(r,e)=>oUe(r,sUe(e)),LU,FU;typeof window<"u"&&((LU=window.document)!=null&&LU.createElement||((FU=window.navigator)==null?void 0:FU.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function oZ(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=r.child;for(;n;){const i=oZ(n,e,t);if(i)return i;n=n.sibling}}function sZ(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const BU=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=BU;return}return BU.apply(this,arguments)};const KO=sZ(j.createContext(null));class lZ extends j.Component{render(){return j.createElement(KO.Provider,{value:this._reactInternals},this.props.children)}}function hUe(){const r=j.useContext(KO);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=j.useId();return j.useMemo(()=>{for(const t of[r,r==null?void 0:r.alternate]){if(!t)continue;const n=oZ(t,!1,i=>{let a=i.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(n)return n}},[r,e])}function dUe(){const r=hUe(),[e]=j.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const n=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;n&&n!==KO&&!e.has(n)&&e.set(n,j.useContext(sZ(n)))}t=t.return}return e}function fUe(){const r=dUe();return j.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>j.createElement(e,null,j.createElement(t.Provider,cUe(IU({},n),{value:r.get(t)}))),e=>j.createElement(lZ,IU({},e))),[r])}const QC={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function pUe(r){const{handlePointer:e}=U8e(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(QC).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:a}=r.getState();a.disconnect==null||a.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((n=a.handlers)!=null?n:[]).forEach(([o,s])=>{const[l,u]=QC[o];t.addEventListener(l,s,{passive:u})})},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([a,o])=>{if(n&&n.connected instanceof HTMLElement){const[s]=QC[a];n.connected.removeEventListener(s,o)}}),t(a=>({events:{...a.events,connected:void 0}}))}}}}const mUe=j.forwardRef(function({children:r,fallback:e,resize:t,style:n,gl:i,events:a=pUe,eventSource:o,eventPrefix:s,shadows:l,linear:u,flat:c,legacy:h,orthographic:d,frameloop:f,dpr:p,performance:v,raycaster:y,camera:g,scene:w,onPointerMissed:b,onCreated:m,...x},S){j.useMemo(()=>N8e(A8e),[]);const E=fUe(),[A,T]=eUe({scroll:!0,debounce:{scroll:50,resize:0},...t}),C=j.useRef(null),D=j.useRef(null);j.useImperativeHandle(S,()=>C.current);const O=JJ(b),[U,L]=j.useState(!1),[F,k]=j.useState(!1);if(U)throw U;if(F)throw F;const R=j.useRef(null);wy(()=>{const B=C.current;T.width>0&&T.height>0&&B&&(R.current||(R.current=Y8e(B)),R.current.configure({gl:i,events:a,shadows:l,linear:u,flat:c,legacy:h,orthographic:d,frameloop:f,dpr:p,performance:v,raycaster:y,camera:g,scene:w,size:T,onPointerMissed:(...X)=>O.current==null?void 0:O.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(o?R8e(o)?o.current:o:D.current),s&&X.setEvents({compute:(Z,Q)=>{const J=Z[s+"X"],ne=Z[s+"Y"];Q.pointer.set(J/Q.size.width*2-1,-(ne/Q.size.height)*2+1),Q.raycaster.setFromCamera(Q.pointer,Q.camera)}}),m==null||m(X)}}),R.current.render(j.createElement(E,null,j.createElement(ZJ,{set:k},j.createElement(j.Suspense,{fallback:j.createElement(P8e,{set:L})},r)))))}),j.useEffect(()=>{const B=C.current;if(B)return()=>iZ(B)},[]);const z=o?"none":"auto";return j.createElement("div",lt({ref:D,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:z,...n}},x),j.createElement("div",{ref:A,style:{width:"100%",height:"100%"}},j.createElement("canvas",{ref:C,style:{display:"block"}},e)))}),gUe=j.forwardRef(function(r,e){return j.createElement(lZ,null,j.createElement(mUe,lt({},r,{ref:e})))});var vUe=Object.defineProperty,yUe=(r,e,t)=>e in r?vUe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Zt=(r,e,t)=>(yUe(r,typeof e!="symbol"?e+"":e,t),t);const cx=new Ud,zU=new Zl,bUe=Math.cos(70*(Math.PI/180)),UU=(r,e)=>(r%e+e)%e;let xUe=class extends Al{constructor(r,e){super(),Zt(this,"object"),Zt(this,"domElement"),Zt(this,"enabled",!0),Zt(this,"target",new me),Zt(this,"minDistance",0),Zt(this,"maxDistance",1/0),Zt(this,"minZoom",0),Zt(this,"maxZoom",1/0),Zt(this,"minPolarAngle",0),Zt(this,"maxPolarAngle",Math.PI),Zt(this,"minAzimuthAngle",-1/0),Zt(this,"maxAzimuthAngle",1/0),Zt(this,"enableDamping",!1),Zt(this,"dampingFactor",.05),Zt(this,"enableZoom",!0),Zt(this,"zoomSpeed",1),Zt(this,"enableRotate",!0),Zt(this,"rotateSpeed",1),Zt(this,"enablePan",!0),Zt(this,"panSpeed",1),Zt(this,"screenSpacePanning",!0),Zt(this,"keyPanSpeed",7),Zt(this,"zoomToCursor",!1),Zt(this,"autoRotate",!1),Zt(this,"autoRotateSpeed",2),Zt(this,"reverseOrbit",!1),Zt(this,"reverseHorizontalOrbit",!1),Zt(this,"reverseVerticalOrbit",!1),Zt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Zt(this,"mouseButtons",{LEFT:Ph.ROTATE,MIDDLE:Ph.DOLLY,RIGHT:Ph.PAN}),Zt(this,"touches",{ONE:Ih.ROTATE,TWO:Ih.DOLLY_PAN}),Zt(this,"target0"),Zt(this,"position0"),Zt(this,"zoom0"),Zt(this,"_domElementKeyEvents",null),Zt(this,"getPolarAngle"),Zt(this,"getAzimuthalAngle"),Zt(this,"setPolarAngle"),Zt(this,"setAzimuthalAngle"),Zt(this,"getDistance"),Zt(this,"listenToKeyEvents"),Zt(this,"stopListenToKeyEvents"),Zt(this,"saveState"),Zt(this,"reset"),Zt(this,"update"),Zt(this,"connect"),Zt(this,"dispose"),this.object=r,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=we=>{let Pe=UU(we,2*Math.PI),et=u.phi;et<0&&(et+=2*Math.PI),Pe<0&&(Pe+=2*Math.PI);let V=Math.abs(Pe-et);2*Math.PI-V<V&&(Pe<et?Pe+=2*Math.PI:et+=2*Math.PI),c.phi=Pe-et,t.update()},this.setAzimuthalAngle=we=>{let Pe=UU(we,2*Math.PI),et=u.theta;et<0&&(et+=2*Math.PI),Pe<0&&(Pe+=2*Math.PI);let V=Math.abs(Pe-et);2*Math.PI-V<V&&(Pe<et?Pe+=2*Math.PI:et+=2*Math.PI),c.theta=Pe-et,t.update()},this.getDistance=()=>t.object.position.distanceTo(t.target),this.listenToKeyEvents=we=>{we.addEventListener("keydown",xe),this._domElementKeyEvents=we},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",xe),this._domElementKeyEvents=null},this.saveState=()=>{t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=()=>{t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(n),t.update(),s=o.NONE},this.update=(()=>{const we=new me,Pe=new me(0,1,0),et=new yi().setFromUnitVectors(r.up,Pe),V=et.clone().invert(),Me=new me,Le=new yi,Ze=2*Math.PI;return function(){const he=t.object.position;et.setFromUnitVectors(r.up,Pe),V.copy(et).invert(),we.copy(he).sub(t.target),we.applyQuaternion(et),u.setFromVector3(we),t.autoRotate&&s===o.NONE&&U(D()),t.enableDamping?(u.theta+=c.theta*t.dampingFactor,u.phi+=c.phi*t.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi);let Xe=t.minAzimuthAngle,H=t.maxAzimuthAngle;isFinite(Xe)&&isFinite(H)&&(Xe<-Math.PI?Xe+=Ze:Xe>Math.PI&&(Xe-=Ze),H<-Math.PI?H+=Ze:H>Math.PI&&(H-=Ze),Xe<=H?u.theta=Math.max(Xe,Math.min(H,u.theta)):u.theta=u.theta>(Xe+H)/2?Math.max(Xe,u.theta):Math.min(H,u.theta)),u.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,u.phi)),u.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(d,t.dampingFactor):t.target.add(d),t.zoomToCursor&&A||t.object.isOrthographicCamera?u.radius=Z(u.radius):u.radius=Z(u.radius*h),we.setFromSpherical(u),we.applyQuaternion(V),he.copy(t.target).add(we),t.object.matrixAutoUpdate||t.object.updateMatrix(),t.object.lookAt(t.target),t.enableDamping===!0?(c.theta*=1-t.dampingFactor,c.phi*=1-t.dampingFactor,d.multiplyScalar(1-t.dampingFactor)):(c.set(0,0,0),d.set(0,0,0));let te=!1;if(t.zoomToCursor&&A){let le=null;if(t.object instanceof Nn&&t.object.isPerspectiveCamera){const ve=we.length();le=Z(ve*h);const Ee=ve-le;t.object.position.addScaledVector(S,Ee),t.object.updateMatrixWorld()}else if(t.object.isOrthographicCamera){const ve=new me(E.x,E.y,0);ve.unproject(t.object),t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/h)),t.object.updateProjectionMatrix(),te=!0;const Ee=new me(E.x,E.y,0);Ee.unproject(t.object),t.object.position.sub(Ee).add(ve),t.object.updateMatrixWorld(),le=we.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;le!==null&&(t.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(le).add(t.object.position):(cx.origin.copy(t.object.position),cx.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(cx.direction))<bUe?r.lookAt(t.target):(zU.setFromNormalAndCoplanarPoint(t.object.up,t.target),cx.intersectPlane(zU,t.target))))}else t.object instanceof au&&t.object.isOrthographicCamera&&(te=h!==1,te&&(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/h)),t.object.updateProjectionMatrix()));return h=1,A=!1,te||Me.distanceToSquared(t.object.position)>l||8*(1-Le.dot(t.object.quaternion))>l?(t.dispatchEvent(n),Me.copy(t.object.position),Le.copy(t.object.quaternion),te=!1,!0):!1}})(),this.connect=we=>{we===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),t.domElement=we,t.domElement.style.touchAction="none",t.domElement.addEventListener("contextmenu",We),t.domElement.addEventListener("pointerdown",W),t.domElement.addEventListener("pointercancel",Ce),t.domElement.addEventListener("wheel",ge)},this.dispose=()=>{var we,Pe,et,V,Me,Le;t.domElement&&(t.domElement.style.touchAction="auto"),(we=t.domElement)==null||we.removeEventListener("contextmenu",We),(Pe=t.domElement)==null||Pe.removeEventListener("pointerdown",W),(et=t.domElement)==null||et.removeEventListener("pointercancel",Ce),(V=t.domElement)==null||V.removeEventListener("wheel",ge),(Me=t.domElement)==null||Me.ownerDocument.removeEventListener("pointermove",ce),(Le=t.domElement)==null||Le.ownerDocument.removeEventListener("pointerup",Ce),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",xe)};const t=this,n={type:"change"},i={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=o.NONE;const l=1e-6,u=new s3,c=new s3;let h=1;const d=new me,f=new Qe,p=new Qe,v=new Qe,y=new Qe,g=new Qe,w=new Qe,b=new Qe,m=new Qe,x=new Qe,S=new me,E=new Qe;let A=!1;const T=[],C={};function D(){return 2*Math.PI/60/60*t.autoRotateSpeed}function O(){return Math.pow(.95,t.zoomSpeed)}function U(we){t.reverseOrbit||t.reverseHorizontalOrbit?c.theta+=we:c.theta-=we}function L(we){t.reverseOrbit||t.reverseVerticalOrbit?c.phi+=we:c.phi-=we}const F=(()=>{const we=new me;return function(Pe,et){we.setFromMatrixColumn(et,0),we.multiplyScalar(-Pe),d.add(we)}})(),k=(()=>{const we=new me;return function(Pe,et){t.screenSpacePanning===!0?we.setFromMatrixColumn(et,1):(we.setFromMatrixColumn(et,0),we.crossVectors(t.object.up,we)),we.multiplyScalar(Pe),d.add(we)}})(),R=(()=>{const we=new me;return function(Pe,et){const V=t.domElement;if(V&&t.object instanceof Nn&&t.object.isPerspectiveCamera){const Me=t.object.position;we.copy(Me).sub(t.target);let Le=we.length();Le*=Math.tan(t.object.fov/2*Math.PI/180),F(2*Pe*Le/V.clientHeight,t.object.matrix),k(2*et*Le/V.clientHeight,t.object.matrix)}else V&&t.object instanceof au&&t.object.isOrthographicCamera?(F(Pe*(t.object.right-t.object.left)/t.object.zoom/V.clientWidth,t.object.matrix),k(et*(t.object.top-t.object.bottom)/t.object.zoom/V.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function z(we){t.object instanceof Nn&&t.object.isPerspectiveCamera||t.object instanceof au&&t.object.isOrthographicCamera?h/=we:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function B(we){t.object instanceof Nn&&t.object.isPerspectiveCamera||t.object instanceof au&&t.object.isOrthographicCamera?h*=we:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function X(we){if(!t.zoomToCursor||!t.domElement)return;A=!0;const Pe=t.domElement.getBoundingClientRect(),et=we.clientX-Pe.left,V=we.clientY-Pe.top,Me=Pe.width,Le=Pe.height;E.x=et/Me*2-1,E.y=-(V/Le)*2+1,S.set(E.x,E.y,1).unproject(t.object).sub(t.object.position).normalize()}function Z(we){return Math.max(t.minDistance,Math.min(t.maxDistance,we))}function Q(we){f.set(we.clientX,we.clientY)}function J(we){X(we),b.set(we.clientX,we.clientY)}function ne(we){y.set(we.clientX,we.clientY)}function fe(we){p.set(we.clientX,we.clientY),v.subVectors(p,f).multiplyScalar(t.rotateSpeed);const Pe=t.domElement;Pe&&(U(2*Math.PI*v.x/Pe.clientHeight),L(2*Math.PI*v.y/Pe.clientHeight)),f.copy(p),t.update()}function se(we){m.set(we.clientX,we.clientY),x.subVectors(m,b),x.y>0?z(O()):x.y<0&&B(O()),b.copy(m),t.update()}function ye(we){g.set(we.clientX,we.clientY),w.subVectors(g,y).multiplyScalar(t.panSpeed),R(w.x,w.y),y.copy(g),t.update()}function De(we){X(we),we.deltaY<0?B(O()):we.deltaY>0&&z(O()),t.update()}function pe(we){let Pe=!1;switch(we.code){case t.keys.UP:R(0,t.keyPanSpeed),Pe=!0;break;case t.keys.BOTTOM:R(0,-t.keyPanSpeed),Pe=!0;break;case t.keys.LEFT:R(t.keyPanSpeed,0),Pe=!0;break;case t.keys.RIGHT:R(-t.keyPanSpeed,0),Pe=!0;break}Pe&&(we.preventDefault(),t.update())}function Te(){if(T.length==1)f.set(T[0].pageX,T[0].pageY);else{const we=.5*(T[0].pageX+T[1].pageX),Pe=.5*(T[0].pageY+T[1].pageY);f.set(we,Pe)}}function be(){if(T.length==1)y.set(T[0].pageX,T[0].pageY);else{const we=.5*(T[0].pageX+T[1].pageX),Pe=.5*(T[0].pageY+T[1].pageY);y.set(we,Pe)}}function re(){const we=T[0].pageX-T[1].pageX,Pe=T[0].pageY-T[1].pageY,et=Math.sqrt(we*we+Pe*Pe);b.set(0,et)}function Re(){t.enableZoom&&re(),t.enablePan&&be()}function ze(){t.enableZoom&&re(),t.enableRotate&&Te()}function K(we){if(T.length==1)p.set(we.pageX,we.pageY);else{const et=st(we),V=.5*(we.pageX+et.x),Me=.5*(we.pageY+et.y);p.set(V,Me)}v.subVectors(p,f).multiplyScalar(t.rotateSpeed);const Pe=t.domElement;Pe&&(U(2*Math.PI*v.x/Pe.clientHeight),L(2*Math.PI*v.y/Pe.clientHeight)),f.copy(p)}function ie(we){if(T.length==1)g.set(we.pageX,we.pageY);else{const Pe=st(we),et=.5*(we.pageX+Pe.x),V=.5*(we.pageY+Pe.y);g.set(et,V)}w.subVectors(g,y).multiplyScalar(t.panSpeed),R(w.x,w.y),y.copy(g)}function _e(we){const Pe=st(we),et=we.pageX-Pe.x,V=we.pageY-Pe.y,Me=Math.sqrt(et*et+V*V);m.set(0,Me),x.set(0,Math.pow(m.y/b.y,t.zoomSpeed)),z(x.y),b.copy(m)}function oe(we){t.enableZoom&&_e(we),t.enablePan&&ie(we)}function G(we){t.enableZoom&&_e(we),t.enableRotate&&K(we)}function W(we){var Pe,et;t.enabled!==!1&&(T.length===0&&((Pe=t.domElement)==null||Pe.ownerDocument.addEventListener("pointermove",ce),(et=t.domElement)==null||et.ownerDocument.addEventListener("pointerup",Ce)),ke(we),we.pointerType==="touch"?Ne(we):$(we))}function ce(we){t.enabled!==!1&&(we.pointerType==="touch"?Fe(we):ee(we))}function Ce(we){var Pe,et,V;it(we),T.length===0&&((Pe=t.domElement)==null||Pe.releasePointerCapture(we.pointerId),(et=t.domElement)==null||et.ownerDocument.removeEventListener("pointermove",ce),(V=t.domElement)==null||V.ownerDocument.removeEventListener("pointerup",Ce)),t.dispatchEvent(a),s=o.NONE}function $(we){let Pe;switch(we.button){case 0:Pe=t.mouseButtons.LEFT;break;case 1:Pe=t.mouseButtons.MIDDLE;break;case 2:Pe=t.mouseButtons.RIGHT;break;default:Pe=-1}switch(Pe){case Ph.DOLLY:if(t.enableZoom===!1)return;J(we),s=o.DOLLY;break;case Ph.ROTATE:if(we.ctrlKey||we.metaKey||we.shiftKey){if(t.enablePan===!1)return;ne(we),s=o.PAN}else{if(t.enableRotate===!1)return;Q(we),s=o.ROTATE}break;case Ph.PAN:if(we.ctrlKey||we.metaKey||we.shiftKey){if(t.enableRotate===!1)return;Q(we),s=o.ROTATE}else{if(t.enablePan===!1)return;ne(we),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&t.dispatchEvent(i)}function ee(we){if(t.enabled!==!1)switch(s){case o.ROTATE:if(t.enableRotate===!1)return;fe(we);break;case o.DOLLY:if(t.enableZoom===!1)return;se(we);break;case o.PAN:if(t.enablePan===!1)return;ye(we);break}}function ge(we){t.enabled===!1||t.enableZoom===!1||s!==o.NONE&&s!==o.ROTATE||(we.preventDefault(),t.dispatchEvent(i),De(we),t.dispatchEvent(a))}function xe(we){t.enabled===!1||t.enablePan===!1||pe(we)}function Ne(we){switch(Je(we),T.length){case 1:switch(t.touches.ONE){case Ih.ROTATE:if(t.enableRotate===!1)return;Te(),s=o.TOUCH_ROTATE;break;case Ih.PAN:if(t.enablePan===!1)return;be(),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(t.touches.TWO){case Ih.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Re(),s=o.TOUCH_DOLLY_PAN;break;case Ih.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;ze(),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&t.dispatchEvent(i)}function Fe(we){switch(Je(we),s){case o.TOUCH_ROTATE:if(t.enableRotate===!1)return;K(we),t.update();break;case o.TOUCH_PAN:if(t.enablePan===!1)return;ie(we),t.update();break;case o.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;oe(we),t.update();break;case o.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;G(we),t.update();break;default:s=o.NONE}}function We(we){t.enabled!==!1&&we.preventDefault()}function ke(we){T.push(we)}function it(we){delete C[we.pointerId];for(let Pe=0;Pe<T.length;Pe++)if(T[Pe].pointerId==we.pointerId){T.splice(Pe,1);return}}function Je(we){let Pe=C[we.pointerId];Pe===void 0&&(Pe=new Qe,C[we.pointerId]=Pe),Pe.set(we.pageX,we.pageY)}function st(we){const Pe=we.pointerId===T[0].pointerId?T[1]:T[0];return C[Pe.pointerId]}e!==void 0&&this.connect(e),this.update()}};function wUe(r,e,t){const n=Dn(d=>d.size),i=Dn(d=>d.viewport),a=typeof r=="number"?r:n.width*i.dpr,o=n.height*i.dpr,s=(typeof r=="number"?t:r)||{},{samples:l=0,depth:u,...c}=s,h=j.useMemo(()=>{const d=new es(a,o,{minFilter:sn,magFilter:sn,type:Md,...c});return u&&(d.depthTexture=new y2(a,o,po)),d.samples=l,d},[]);return j.useLayoutEffect(()=>{h.setSize(a,o),l&&(h.samples=l)},[l,h,a,o]),j.useEffect(()=>()=>h.dispose(),[]),h}const SUe=r=>typeof r=="function",MUe=j.forwardRef(({envMap:r,resolution:e=256,frames:t=1/0,children:n,makeDefault:i,...a},o)=>{const s=Dn(({set:y})=>y),l=Dn(({camera:y})=>y),u=Dn(({size:y})=>y),c=j.useRef(null);j.useImperativeHandle(o,()=>c.current,[]);const h=j.useRef(null),d=wUe(e);j.useLayoutEffect(()=>{a.manual||c.current.updateProjectionMatrix()},[u,a]),j.useLayoutEffect(()=>{c.current.updateProjectionMatrix()}),j.useLayoutEffect(()=>{if(i){const y=l;return s(()=>({camera:c.current})),()=>s(()=>({camera:y}))}},[c,i,s]);let f=0,p=null;const v=SUe(n);return U2(y=>{v&&(t===1/0||f<t)&&(h.current.visible=!1,y.gl.setRenderTarget(d),p=y.scene.background,r&&(y.scene.background=r),y.gl.render(y.scene,c.current),y.scene.background=p,y.gl.setRenderTarget(null),h.current.visible=!0,f++)}),j.createElement(j.Fragment,null,j.createElement("orthographicCamera",lt({left:u.width/-2,right:u.width/2,top:u.height/2,bottom:u.height/-2,ref:c},a),!v&&n),j.createElement("group",{ref:h},v&&n(d.texture)))}),_Ue=j.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:a=!1,onChange:o,onStart:s,onEnd:l,...u},c)=>{const h=Dn(S=>S.invalidate),d=Dn(S=>S.camera),f=Dn(S=>S.gl),p=Dn(S=>S.events),v=Dn(S=>S.setEvents),y=Dn(S=>S.set),g=Dn(S=>S.get),w=Dn(S=>S.performance),b=e||d,m=n||p.connected||f.domElement,x=j.useMemo(()=>new xUe(b),[b]);return U2(()=>{x.enabled&&x.update()},-1),j.useEffect(()=>(a&&x.connect(a===!0?m:a),x.connect(m),()=>void x.dispose()),[a,m,t,x,h]),j.useEffect(()=>{const S=T=>{h(),t&&w.regress(),o&&o(T)},E=T=>{s&&s(T)},A=T=>{l&&l(T)};return x.addEventListener("change",S),x.addEventListener("start",E),x.addEventListener("end",A),()=>{x.removeEventListener("start",E),x.removeEventListener("end",A),x.removeEventListener("change",S)}},[o,s,l,x,h,v]),j.useEffect(()=>{if(r){const S=g().controls;return y({controls:x}),()=>y({controls:S})}},[r,x]),j.createElement("primitive",lt({ref:c,object:x,enableDamping:i},u))});function EUe({defaultScene:r,defaultCamera:e,renderPriority:t=1}){const{gl:n,scene:i,camera:a}=Dn();let o;return U2(()=>{o=n.autoClear,t===1&&(n.autoClear=!0,n.render(r,e)),n.autoClear=!1,n.clearDepth(),n.render(i,a),n.autoClear=o},t),j.createElement("group",{onPointerOver:()=>null})}function CUe({children:r,renderPriority:e=1}){const{scene:t,camera:n}=Dn(),[i]=j.useState(()=>new bv);return j.createElement(j.Fragment,null,Z8e(j.createElement(j.Fragment,null,r,j.createElement(EUe,{defaultScene:t,defaultCamera:n,renderPriority:e})),i,{events:{priority:e+1}}))}const uZ=j.createContext({}),AUe=()=>j.useContext(uZ),TUe=2*Math.PI,eA=new Mr,jU=new Yt,[Ff,tA]=[new yi,new yi],HU=new me,VU=new me,DUe=r=>"minPolarAngle"in r,kUe=({alignment:r="bottom-right",margin:e=[80,80],renderPriority:t=1,onUpdate:n,onTarget:i,children:a})=>{const o=Dn(S=>S.size),s=Dn(S=>S.camera),l=Dn(S=>S.controls),u=Dn(S=>S.invalidate),c=j.useRef(null),h=j.useRef(null),d=j.useRef(!1),f=j.useRef(0),p=j.useRef(new me(0,0,0)),v=j.useRef(new me(0,0,0));j.useEffect(()=>{v.current.copy(s.up)},[s]);const y=j.useCallback(S=>{d.current=!0,(l||i)&&(p.current=(l==null?void 0:l.target)||(i==null?void 0:i())),f.current=s.position.distanceTo(HU),Ff.copy(s.quaternion),VU.copy(S).multiplyScalar(f.current).add(HU),eA.lookAt(VU),eA.up.copy(s.up),tA.copy(eA.quaternion),u()},[l,s,i,u]);U2((S,E)=>{if(h.current&&c.current){var A;if(d.current)if(Ff.angleTo(tA)<.01)d.current=!1,DUe(l)&&s.up.copy(v.current);else{const T=E*TUe;Ff.rotateTowards(tA,T),s.position.set(0,0,1).applyQuaternion(Ff).multiplyScalar(f.current).add(p.current),s.up.set(0,1,0).applyQuaternion(Ff).normalize(),s.quaternion.copy(Ff),n?n():l&&l.update(),u()}jU.copy(s.matrix).invert(),(A=c.current)==null||A.quaternion.setFromRotationMatrix(jU)}});const g=j.useMemo(()=>({tweenCamera:y}),[y]),[w,b]=e,m=r.endsWith("-center")?0:r.endsWith("-left")?-o.width/2+w:o.width/2-w,x=r.startsWith("center-")?0:r.startsWith("top-")?o.height/2-b:-o.height/2+b;return j.createElement(CUe,{renderPriority:t},j.createElement(uZ.Provider,{value:g},j.createElement(MUe,{makeDefault:!0,ref:h,position:[0,0,200]}),j.createElement("group",{ref:c,position:[m,x,0]},a)))};function rA({scale:r=[.8,.05,.05],color:e,rotation:t}){return j.createElement("group",{rotation:t},j.createElement("mesh",{position:[.4,0,0]},j.createElement("boxGeometry",{args:r}),j.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function Bf({onClick:r,font:e,disabled:t,arcStyle:n,label:i,labelColor:a,axisHeadScale:o=1,...s}){const l=Dn(v=>v.gl),u=j.useMemo(()=>{const v=document.createElement("canvas");v.width=64,v.height=64;const y=v.getContext("2d");return y.beginPath(),y.arc(32,32,16,0,2*Math.PI),y.closePath(),y.fillStyle=n,y.fill(),i&&(y.font=e,y.textAlign="center",y.fillStyle=a,y.fillText(i,32,41)),new oJ(v)},[n,i,a,e]),[c,h]=j.useState(!1),d=(i?1:.75)*(c?1.2:1)*o,f=v=>{v.stopPropagation(),h(!0)},p=v=>{v.stopPropagation(),h(!1)};return j.createElement("sprite",lt({scale:d,onPointerOver:t?void 0:f,onPointerOut:t?void 0:r||p},s),j.createElement("spriteMaterial",{map:u,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:i?1:.75,toneMapped:!1}))}const NUe=({hideNegativeAxes:r,hideAxisHeads:e,disabled:t,font:n="18px Inter var, Arial, sans-serif",axisColors:i=["#ff2060","#20df80","#2080ff"],axisHeadScale:a=1,axisScale:o,labels:s=["X","Y","Z"],labelColor:l="#000",onClick:u,...c})=>{const[h,d,f]=i,{tweenCamera:p}=AUe(),v={font:n,disabled:t,labelColor:l,onClick:u,axisHeadScale:a,onPointerDown:t?void 0:y=>{p(y.object.position),y.stopPropagation()}};return j.createElement("group",lt({scale:40},c),j.createElement(rA,{color:h,rotation:[0,0,0],scale:o}),j.createElement(rA,{color:d,rotation:[0,0,Math.PI/2],scale:o}),j.createElement(rA,{color:f,rotation:[0,-Math.PI/2,0],scale:o}),!e&&j.createElement(j.Fragment,null,j.createElement(Bf,lt({arcStyle:h,position:[1,0,0],label:s[0]},v)),j.createElement(Bf,lt({arcStyle:d,position:[0,1,0],label:s[1]},v)),j.createElement(Bf,lt({arcStyle:f,position:[0,0,1],label:s[2]},v)),!r&&j.createElement(j.Fragment,null,j.createElement(Bf,lt({arcStyle:h,position:[-1,0,0]},v)),j.createElement(Bf,lt({arcStyle:d,position:[0,-1,0]},v)),j.createElement(Bf,lt({arcStyle:f,position:[0,0,-1]},v)))))};function OUe(r,e){const t=r+"Geometry";return j.forwardRef(({args:n,children:i,...a},o)=>{const s=j.useRef(null);return j.useImperativeHandle(o,()=>s.current),j.useLayoutEffect(()=>{}),j.createElement("mesh",lt({ref:s},a),j.createElement(t,{attach:"geometry",args:n}),i)})}const RUe=OUe("plane"),PUe=function({size1:r=1,size2:e=1e3,color:t=new wt("#efe3fd"),distance:n=1e3,axes:i="xyz"}={}){const a=i.substr(0,2);return new ts({side:xs,uniforms:{uSize1:{value:r},uSize2:{value:e},uColor:{value:t},uDistance:{value:n}},transparent:!0,vertexShader:`
           
           varying vec3 worldPosition;
		   
           uniform float uDistance;
           
           void main() {
           
                vec3 pos = position.${i} * uDistance;
                pos.${a} += cameraPosition.${a};
                
                worldPosition = pos;
                
                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
           
           }
           `,fragmentShader:`
           
           varying vec3 worldPosition;
           
           uniform float uSize1;
           uniform float uSize2;
           uniform vec3 uColor;
           uniform float uDistance;
            
            
            
            float getGrid(float size) {
            
                vec2 r = worldPosition.${a} / size;
                
                
                vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
                float line = min(grid.x, grid.y);
                
            
                return 1.0 - min(line, 1.0);
            }
            
           void main() {
           
                
                  float d = 1.0 - min(distance(cameraPosition.${a}, worldPosition.${a}) / uDistance, 1.0);
                
                  float g1 = getGrid(uSize1);
                  float g2 = getGrid(uSize2);
                  
                  
                  gl_FragColor = vec4(uColor.rgb, mix(g2, g1, g1) * pow(d, 3.0));
                  gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);
                
                  if ( gl_FragColor.a <= 0.0 ) discard;
                
           
           }
           
           `,extensions:{derivatives:!0}})},IUe=()=>{const r=j.useRef(PUe());return ue.jsx(RUe,{material:r.current})},LUe=Ae.memo(Ae.forwardRef(function({axesParam:r,enableDamping:e},t){return ue.jsxs(ue.Fragment,{children:[ue.jsx(_Ue,{ref:t,panSpeed:1.5,zoomSpeed:.5,enableDamping:e}),r&&ue.jsx(kUe,{alignment:"bottom-right",margin:[70,100],onTarget:()=>{var n;return(n=t==null?void 0:t.current)==null?void 0:n.target},onUpdate:()=>{var n;(n=t.current)==null||n.update()},children:ue.jsx(NUe,{font:"18px Inter var, HKGrotesk, sans-serif"})})]})}));Mr.DEFAULT_UP.set(0,0,1);function cZ({children:r,...e}){const t=Math.min(window.devicePixelRatio,2);let n=e.outdatedMesh?"#ababab":"#f5f5f5";return ue.jsx(j.Suspense,{fallback:null,children:ue.jsxs(gUe,{id:"threeCanvas",style:{backgroundColor:n},dpr:t,frameloop:"demand",orthographic:!0,camera:{fov:75,near:.1,far:1e3,position:[50,50,60],zoom:7},shadows:!0,children:[e.gridParam?ue.jsx(IUe,{}):null,ue.jsx(LUe,{axesParam:e.axesParam,enableDamping:!1}),ue.jsx("ambientLight",{intensity:.5}),e.outdatedMesh?ue.jsx("directionalLight",{color:"grey",intensity:.2,position:[50,50,50]}):ue.jsx("directionalLight",{position:[50,50,50]}),e.outdatedMesh?null:ue.jsx("ambientLight",{intensity:.5}),r]})})}function FUe(r,e,t){if(r.clearGroups(),delete r.userData.faceGroups,r.setIndex(e.triangles),r.setAttribute("position",new Tt(e.vertices,3)),e.faceGroups){let n=new Set;r.userData.faceGroups=e.faceGroups,e.faceGroups.forEach(({start:i,count:a,faceId:o})=>{r.addGroup(i,a,n.has(o)?1:0)})}else r.addGroup(0,e.triangles.length,0);e.normals&&e.normals.length?r.setAttribute("normal",new Tt(e.normals,3)):r.computeVertexNormals(),r.computeBoundingBox()}function hZ(r,e,t){if(r.clearGroups(),delete r.userData.edgeGroups,r.setAttribute("position",new Tt(e.lines,3)),!!e)if(e.edgeGroups){let n=new Set;r.userData.edgeGroups=e.edgeGroups,e.edgeGroups.forEach(({start:i,count:a,edgeId:o})=>{r.addGroup(i,a,n.has(o)?1:0)})}else r.addGroup(0,e.lines.length/3,0)}function dZ(r,e){r.clearGroups(),delete r.userData.edgeGroups,r.copy(new IO(e,2))}const fZ=Ae.memo(function({mesh:r,isSolid:e,setOutdatedMesh:t}){const{invalidate:n}=Dn(),[i,a]=j.useState([]);return j.useLayoutEffect(()=>{let o=[];r.map(s=>{const l=new or,u=new or;s.faces&&FUe(l,s.faces),s.edges?hZ(u,s.edges):s.faces&&dZ(u,l);const c=l,h=u,d=s.color;o.push({body:c,lines:h,color:d})}),a(o),n()},[r,n]),j.useEffect(()=>()=>{t(!1),n()},[n]),ue.jsx(ue.Fragment,{children:i.map((o,s)=>ue.jsxs("group",{children:[e?ue.jsx("mesh",{geometry:o.body,children:ue.jsx("meshStandardMaterial",{color:o.color,opacity:.5,polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1},"material"+o.color)},"mesh"+o.color):null,ue.jsx("lineSegments",{geometry:o.lines},"lines"+o.color),ue.jsx("lineSegments",{geometry:o.lines,children:ue.jsx("lineBasicMaterial",{color:"#3c5a6e",opacity:"1",linewidth:8})},"linesmesh"+o.color)]},"group"+o.color+s))})}),pZ=Ae.memo(function({mesh:r}){const{invalidate:e}=Dn(),[t,n]=j.useState([]);return j.useLayoutEffect(()=>{let i=[];r.map(a=>{const o=new LO;a.edges?hZ(o,a.edges):a.faces&&dZ(o);const s=o;i.push({lines:s,color:a.color})}),n(i),e()},[r,e]),j.useEffect(()=>()=>{e()},[e]),ue.jsx(ue.Fragment,{children:t.map((i,a)=>ue.jsx("group",{children:ue.jsx("lineSegments",{geometry:i.lines,children:ue.jsx("lineBasicMaterial",{color:"#3c5a6e",opacity:".75"})})},"groupwire"+i.color+a))})});function mZ(r){const[e,t]=j.useState(r.run),n=()=>{t(!e)};if(I.currentRepo)return e?ue.jsx(ue.Fragment,{children:ue.jsx($w,{to:r.isItOwned?`/${I.currentRepo.id}`:"/",onClick:n,children:ue.jsx("label",{title:"Create/Run Mode",className:"switch_run",children:ue.jsxs("button",{style:{width:"100px",backgroundColor:"#3F4243",borderRadius:"12px",display:"flex"},children:[ue.jsx("svg",{width:"12",height:"8",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",className:"leva-c-cHvNmv",style:{transform:"rotate(90deg)",alignSelf:"center",fill:"#c4a3d5"},children:ue.jsx("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"})}),ue.jsx("p",{style:{fontSize:"12px",padding:"0 5px 0 5px",color:"#c4a3d5",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:r.isItOwned?"Create Mode":"Browse Projects"})]})})},I.currentRepo.id)}):ue.jsx(ue.Fragment,{children:ue.jsx($w,{to:I.currentRepo?`/run/${I.currentRepo.id}`:"/run",onClick:n,style:{position:"absolute"},children:ue.jsx("label",{title:"Create/Run Mode",className:"switch",children:ue.jsxs("button",{style:{width:"100px",backgroundColor:"#3F4243",borderRadius:"12px",display:"flex"},children:[ue.jsx("p",{style:{fontSize:"12px",padding:"0 5px 0 5px",color:"#c4a3d5",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:"Run Mode"}),ue.jsx("svg",{width:"12",height:"8",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",className:"leva-c-cHvNmv",style:{transform:"rotate(-90deg)",alignSelf:"center",fill:"#c4a3d5"},children:ue.jsx("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"})})]})})},I.currentRepo?I.currentRepo.id:null)})}const gZ=function({activeAtom:r,run:e,setGrid:t,setAxes:n,setWire:i,setSolid:a,compiledBom:o}){let s={};const l=QE(),u=QE(),c=QE(),[h,d]=j.useState(!0);j.useEffect(()=>{const v=setTimeout(()=>{d(!1)},0);return()=>clearTimeout(v)},[]),r!==null&&(s=r.createLevaInputs()),r.atomType=="Molecule"&&(o=r.createLevaBom());const f=j.useMemo(()=>({...o}),[o]),p=j.useMemo(()=>({...s}),[s]);return fb(()=>({description:{label:"Description",value:r.description,rows:6,disabled:!1}}),{store:l},[r]),fb(()=>f,{store:c},[r]),fb(()=>p,{store:l},[r]),fb("Grid",{grid:{value:!0,label:"Grid",onChange:v=>{t(v)}},axes:{value:!0,label:"Axes",onChange:v=>{n(v)}},wire:{value:!0,label:"Output Wire",onChange:v=>{i(v)}},solid:{value:!0,label:"Solid",onChange:v=>{a(v)}}},{store:u}),j.useEffect(()=>()=>{l.dispose()},[r]),ue.jsxs(ue.Fragment,{children:[" ",ue.jsx("div",{className:e?"paramEditorDivRun":"paramEditorDiv",children:ue.jsx(eC,{store:l,neverHide:!0,collapsed:{collapsed:h,onChange:v=>{d(v)}},hideCopyButton:!0,fill:!0,titleBar:{title:r.name||I.currentRepo.name,drag:!1},theme:{colors:{elevation1:"#3F4243",elevation2:"var(--bg-color)",elevation3:"#C4A3D5",highlight1:"#C4A3D5",highlight2:"#ededed",highlight3:"#ededed",accent1:"#C4A3D5",accent2:"#88748F",accent3:"#88748F",vivid1:"red"}}})}),ue.jsx("div",{className:e?"gridEditorDivRun":"gridEditorDiv",children:ue.jsx(eC,{store:u,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Render Settings",drag:!1},theme:{colors:{elevation1:"#3F4243",elevation2:"var(--bg-color)",elevation3:"#C4A3D5",highlight1:"#C4A3D5",highlight2:"#ededed",highlight3:"#ededed",accent1:"#C4A3D5",accent2:"#88748F",accent3:"#88748F",vivid1:"red"}}})}),r.atomType=="Molecule"?ue.jsx("div",{className:e?"bomEditorDivRun":"bomEditorDiv",children:ue.jsx(eC,{store:c,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Bill of Materials",drag:!1},theme:{colors:{elevation1:"#3F4243",elevation2:"var(--bg-color)",elevation3:"#C4A3D5",highlight1:"#C4A3D5",highlight2:"#ededed",highlight3:"#ededed",accent1:"#C4A3D5",accent2:"#88748F",accent3:"#88748F",vivid1:"red"}}})}):null]})};function vZ(r){const e=n=>{I.cad.visExport(r.activeAtom.uniqueID,r.activeAtom.uniqueID,n).then(i=>{I.cad.downExport(r.activeAtom.uniqueID,n).then(a=>{q$.saveAs(a,I.currentMolecule.name+"."+n.toLowerCase())}).catch("Error downloading export file")}).catch("Error creating export geometry")},t=r.dialogContent;return ue.jsx(ue.Fragment,{children:ue.jsxs("dialog",{open:r.shareDialog,style:{display:"flex"},className:"share-dialog",children:[t=="share"?ue.jsxs("div",{style:{display:"flex",margin:"10px"},children:[ue.jsx("p",{children:"Use this link to share this project:"}),ue.jsxs("a",{style:{margin:"16px"},href:"/run/"+I.currentRepo.id,target:"_blank",children:["/run/",I.currentRepo.id]})]}):t=="export"?ue.jsxs("div",{style:{display:"flex",margin:"10px"},children:[ue.jsx("p",{children:"Export as:"}),ue.jsxs("button",{autoFocus:!0,onClick:()=>e("STL"),children:[" ","STL"]}),ue.jsxs("button",{autoFocus:!0,onClick:()=>e("STEP"),children:[" ","STEP"]}),ue.jsxs("button",{autoFocus:!0,onClick:()=>e("SVG"),children:[" ","SVG"]})]}):null,ue.jsx("a",{className:"closeButton",onClick:()=>r.setShareDialog(!1)})]})})}let BUe=ue.jsx("svg",{fill:"#c4a3d5",height:"30px",width:"30px",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 227.216 227.216",xmlSpace:"preserve",children:ue.jsx("path",{d:`M175.897,141.476c-13.249,0-25.11,6.044-32.98,15.518l-51.194-29.066c1.592-4.48,2.467-9.297,2.467-14.317
c0-5.019-0.875-9.836-2.467-14.316l51.19-29.073c7.869,9.477,19.732,15.523,32.982,15.523c23.634,0,42.862-19.235,42.862-42.879
C218.759,19.229,199.531,0,175.897,0C152.26,0,133.03,19.229,133.03,42.865c0,5.02,0.874,9.838,2.467,14.319L84.304,86.258
c-7.869-9.472-19.729-15.514-32.975-15.514c-23.64,0-42.873,19.229-42.873,42.866c0,23.636,19.233,42.865,42.873,42.865
c13.246,0,25.105-6.042,32.974-15.513l51.194,29.067c-1.593,4.481-2.468,9.3-2.468,14.321c0,23.636,19.23,42.865,42.867,42.865
c23.634,0,42.862-19.23,42.862-42.865C218.759,160.71,199.531,141.476,175.897,141.476z M175.897,15
c15.363,0,27.862,12.5,27.862,27.865c0,15.373-12.499,27.879-27.862,27.879c-15.366,0-27.867-12.506-27.867-27.879
C148.03,27.5,160.531,15,175.897,15z M51.33,141.476c-15.369,0-27.873-12.501-27.873-27.865c0-15.366,12.504-27.866,27.873-27.866
c15.363,0,27.861,12.5,27.861,27.866C79.191,128.975,66.692,141.476,51.33,141.476z M175.897,212.216
c-15.366,0-27.867-12.501-27.867-27.865c0-15.37,12.501-27.875,27.867-27.875c15.363,0,27.862,12.505,27.862,27.875
C203.759,199.715,191.26,212.216,175.897,212.216z`})}),zUe=ue.jsx("svg",{width:"35px",height:"35px",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:ue.jsx("path",{d:"M11.245 4.174C11.4765 3.50808 11.5922 3.17513 11.7634 3.08285C11.9115 3.00298 12.0898 3.00298 12.238 3.08285C12.4091 3.17513 12.5248 3.50808 12.7563 4.174L14.2866 8.57639C14.3525 8.76592 14.3854 8.86068 14.4448 8.93125C14.4972 8.99359 14.5641 9.04218 14.6396 9.07278C14.725 9.10743 14.8253 9.10947 15.0259 9.11356L19.6857 9.20852C20.3906 9.22288 20.743 9.23007 20.8837 9.36432C21.0054 9.48051 21.0605 9.65014 21.0303 9.81569C20.9955 10.007 20.7146 10.2199 20.1528 10.6459L16.4387 13.4616C16.2788 13.5829 16.1989 13.6435 16.1501 13.7217C16.107 13.7909 16.0815 13.8695 16.0757 13.9507C16.0692 14.0427 16.0982 14.1387 16.1563 14.3308L17.506 18.7919C17.7101 19.4667 17.8122 19.8041 17.728 19.9793C17.6551 20.131 17.5108 20.2358 17.344 20.2583C17.1513 20.2842 16.862 20.0829 16.2833 19.6802L12.4576 17.0181C12.2929 16.9035 12.2106 16.8462 12.1211 16.8239C12.042 16.8043 11.9593 16.8043 11.8803 16.8239C11.7908 16.8462 11.7084 16.9035 11.5437 17.0181L7.71805 19.6802C7.13937 20.0829 6.85003 20.2842 6.65733 20.2583C6.49056 20.2358 6.34626 20.131 6.27337 19.9793C6.18915 19.8041 6.29123 19.4667 6.49538 18.7919L7.84503 14.3308C7.90313 14.1387 7.93218 14.0427 7.92564 13.9507C7.91986 13.8695 7.89432 13.7909 7.85123 13.7217C7.80246 13.6435 7.72251 13.5829 7.56262 13.4616L3.84858 10.6459C3.28678 10.2199 3.00588 10.007 2.97101 9.81569C2.94082 9.65014 2.99594 9.48051 3.11767 9.36432C3.25831 9.23007 3.61074 9.22289 4.31559 9.20852L8.9754 9.11356C9.176 9.10947 9.27631 9.10743 9.36177 9.07278C9.43726 9.04218 9.50414 8.99359 9.55657 8.93125C9.61593 8.86068 9.64887 8.76592 9.71475 8.57639L11.245 4.174Z",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),UUe=ue.jsx("svg",{width:"45px",height:"45px",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:ue.jsx("path",{d:"M7 5C7 3.89543 7.89543 3 9 3C10.1046 3 11 3.89543 11 5C11 5.74028 10.5978 6.38663 10 6.73244V14.0396H11.7915C12.8961 14.0396 13.7915 13.1441 13.7915 12.0396V10.7838C13.1823 10.4411 12.7708 9.78837 12.7708 9.03955C12.7708 7.93498 13.6662 7.03955 14.7708 7.03955C15.8753 7.03955 16.7708 7.93498 16.7708 9.03955C16.7708 9.77123 16.3778 10.4111 15.7915 10.7598V12.0396C15.7915 14.2487 14.0006 16.0396 11.7915 16.0396H10V17.2676C10.5978 17.6134 11 18.2597 11 19C11 20.1046 10.1046 21 9 21C7.89543 21 7 20.1046 7 19C7 18.2597 7.4022 17.6134 8 17.2676V6.73244C7.4022 6.38663 7 5.74028 7 5Z",fill:"#c4a3d5"})}),jUe=ue.jsxs("svg",{width:"30px",height:"30px",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[ue.jsx("path",{d:"M10.5 11L17 11",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),ue.jsx("path",{d:"M7 11H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),ue.jsx("path",{d:"M7 7.5H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),ue.jsx("path",{d:"M7 14.5H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),ue.jsx("path",{d:"M17 14.5H16M10.5 14.5H13.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),ue.jsx("path",{d:"M17 7.5H14M10.5 7.5H11.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),ue.jsx("path",{d:"M21 7V6.37006C21 5.17705 21 4.58055 20.842 4.09946C20.5425 3.18719 19.8468 2.47096 18.9606 2.16261C18.4933 2 17.9139 2 16.755 2H7.24502C6.08614 2 5.50671 2 5.03939 2.16261C4.15322 2.47096 3.45748 3.18719 3.15795 4.09946C3 4.58055 3 5.17705 3 6.37006V15M21 11V20.3742C21 21.2324 20.015 21.6878 19.3919 21.1176C19.0258 20.7826 18.4742 20.7826 18.1081 21.1176L17.625 21.5597C16.9834 22.1468 16.0166 22.1468 15.375 21.5597C14.7334 20.9726 13.7666 20.9726 13.125 21.5597C12.4834 22.1468 11.5166 22.1468 10.875 21.5597C10.2334 20.9726 9.26659 20.9726 8.625 21.5597C7.98341 22.1468 7.01659 22.1468 6.375 21.5597L5.8919 21.1176C5.52583 20.7826 4.97417 20.7826 4.6081 21.1176C3.985 21.6878 3 21.2324 3 20.3742V19",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"})]}),HUe=ue.jsx("svg",{width:"30px",height:"30px",fill:"none",viewBox:"0 0 23 23",xmlns:"http://www.w3.org/2000/svg",children:ue.jsx("path",{fill:"#c4a3d5",d:"M8.71,7.71,11,5.41V15a1,1,0,0,0,2,0V5.41l2.29,2.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42l-4-4a1,1,0,0,0-.33-.21,1,1,0,0,0-.76,0,1,1,0,0,0-.33.21l-4,4A1,1,0,1,0,8.71,7.71ZM21,14a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v4a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V15A1,1,0,0,0,21,14Z"})});function VUe(r){let[e,t]=j.useState(!1),[n,i]=j.useState(""),a=r.authorizedUserOcto;var o=mm();const s=function(h){var d=I.currentRepo.owner.login,f=I.currentRepo.name;document.getElementById("Star-button").style.backgroundColor="gray",h.rest.activity.starRepoForAuthenticatedUser({owner:d,repo:f}).then(()=>{console.log("starred")})},l=async function(h){var d=I.currentRepo.owner.login,f=I.currentRepo.name;h.request("GET /repos/{owner}/{repo}",{owner:d,repo:f}).then(p=>{h.rest.repos.createFork({owner:d,repo:f}).then(()=>{var v=I.currentUser;h.request("GET /repos/{owner}/{repo}",{owner:v,repo:f}).then(y=>{I.currentRepo=y.data,h.rest.repos.replaceAllTopics({owner:v,repo:I.currentRepo.name,names:["abundance-project"]}),o(`/${I.currentRepo.id}`)})})})},u=function(){r.tryLogin().then(h=>{s(h)})},c=function(){r.tryLogin().then(h=>{l(h)})};return ue.jsxs(ue.Fragment,{children:[e?ue.jsx(vZ,{setShareDialog:t,dialogContent:n,activeAtom:r.activeAtom}):null,ue.jsxs("div",{className:"run-navigation",children:[ue.jsx("button",{onClick:()=>{i("share"),t(!0)},className:" run-navigation-button",id:"Share-button",children:BUe}),ue.jsx("button",{className:" run-navigation-button",id:"Fork-button",onClick:()=>{a?l(a):c()},children:UUe}),ue.jsx("button",{className:" run-navigation-button",id:"Star-button",onClick:()=>{a?s(a):u()},children:zUe}),ue.jsx("button",{onClick:()=>{i("export"),t(!0)},className:" run-navigation-button",id:"Export-button",children:HUe}),ue.jsx("button",{className:" run-navigation-button",id:"Bill-button",onClick:()=>{console.log("open compiled bill of materials ")},children:jUe})]})]})}function qUe(){const[r,e]=j.useState({width:void 0,height:void 0});return j.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),r}function WUe(r){const e=j.useRef(500);let t=r.displayProps.mesh,n=r.displayProps.wireMesh;const[i,a]=j.useState(!0),[o,s]=j.useState(!0),[l,u]=j.useState(!1),[c,h]=j.useState(!0),[d,f]=j.useState(!0),p=r.props.authorizedUserOcto,v=r.props.setActiveAtom,y=r.props.activeAtom,g=r.props.tryLogin,w=qUe();mm();const{id:b}=aV();return j.useEffect(()=>{I.canvas=e,I.c=e.current.getContext("2d");var m=new fu;m.request("GET /repositories/:id",{id:b}).then(x=>{I.currentRepo=x.data,(!I.loadedRepo||I.currentRepo.name!==I.loadedRepo.name)&&(I.topLevelMolecule=new uy({x:0,y:0,topLevel:!0,atomType:"Molecule"}),I.currentMolecule=I.topLevelMolecule,r.props.loadProject(I.currentRepo))}),I.currentRepo&&I.currentRepo.owner.login==I.currentUser&&u(!0)},[]),ue.jsxs(ue.Fragment,{children:[ue.jsx("canvas",{style:{display:"none"},ref:e,id:"flow-canvas",tabIndex:0}),ue.jsx(mZ,{run:!0,authorizedUserOcto:p,isItOwned:l}),y?ue.jsx(gZ,{run:!0,setActiveAtom:v,activeAtom:y,setGrid:a,setAxes:s,setWire:h,setSolid:f}):null,ue.jsx(VUe,{authorizedUserOcto:p,tryLogin:g,activeAtom:y}),I.currentRepo?ue.jsxs("div",{className:"info_run_div",children:[ue.jsx("p",{children:"Project Name: "+I.currentRepo.name}),ue.jsx("p",{children:"Repo Owner: "+I.currentRepo.owner.login})]}):null,ue.jsx("div",{className:"runContainer",children:ue.jsx("div",{className:"jscad-container",style:{width:w.width,height:w.height},children:ue.jsx("section",{id:"threeDView",style:{height:w.height},children:n?ue.jsxs(cZ,{gridParam:i,axesParam:o,outdatedMesh:r.displayProps.outdatedMesh,children:[c?ue.jsx(pZ,{mesh:n}):null,ue.jsx(fZ,{mesh:t,isSolid:d,setOutdatedMesh:r.displayProps.setOutdatedMesh})]}):ue.jsx("div",{style:{display:"flex",alignItems:"center",fontSize:"1em"},children:"Loading..."})})})})]})}function GUe(r){let e=r.currentMoleculeTop,[t,n]=j.useState(!1);const i=mm(),a=[{id:"Open",buttonFunc:()=>{i("/")},icon:"Open.svg"},{id:"GitHub",buttonFunc:()=>{window.open(I.currentRepo.html_url)},icon:"GitHub.svg"},{id:"Read Me",buttonFunc:()=>{var u=I.currentRepo.html_url+"/blob/master/README.md";window.open(u)},icon:"Open.svg"},{id:"Bill of Materials",buttonFunc:()=>{var u=I.currentRepo.html_url+"/blob/master/BillOfMaterials.md";window.open(u)},icon:"Open.svg"},{id:"Share",buttonFunc:()=>{n(!0)},icon:"Open.svg"},{id:"Save Project",buttonFunc:()=>{r.setSavePopUp(!0),r.saveProject(r.setSaveState)},icon:"Open.svg"},{id:"Pull Request",buttonFunc:()=>{window.open("https://github.com/"+I.currentRepo.full_name+"/compare/"+I.currentRepo.default_branch+"..."+I.currentRepo.owner.login+":"+I.currentRepo.default_branch)},icon:"Export.svg"},{id:"Export",buttonFunc:()=>{r.setExportPopUp(!0)},icon:"Open.svg"},{id:"Delete Project",buttonFunc:()=>{var u=I.currentRepo.html_url+"/settings";window.open(u)},icon:"Open.svg"}],o=()=>ue.jsx(ue.Fragment,{children:ue.jsx("button",{className:"nav-bar go-up-button menu-nav-button",onClick:()=>{I.currentMolecule.goToParentMolecule(),r.setActiveAtom(I.currentMolecule)},children:ue.jsx("img",{className:"nav-img thumnail-logo",src:"/imgs/Go Up.svg",title:""},"")})}),s=u=>{if(u.saveState===100){var c=2e3;setTimeout(function(){u.setSavePopUp(!1)},c)}return ue.jsx(ue.Fragment,{children:ue.jsx("div",{className:"save-bar",children:ue.jsx("div",{className:"progress",children:ue.jsx("div",{className:"progress-done","data-done":"70",style:{width:u.saveState+"%",opacity:"1"},children:u.saveState!==100?u.saveState+"%":"Project Saved!"})})})})},l=u=>{const[c,h]=j.useState(!1),d=j.useRef();return j.useEffect(()=>{const f=p=>{c&&d.current&&!d.current.contains(p.target)&&h(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[c]),ue.jsx(ue.Fragment,{children:ue.jsxs("nav",{ref:d,className:"navbar",children:[ue.jsx("button",{className:"toggle menu-nav-button",onClick:()=>h(f=>!f),children:c?ue.jsx("img",{className:`thumnail-logo nav-img ${u.currentMoleculeTop?"":" rotati-right"}`,src:"/imgs/three-menu.svg"}):ue.jsx("img",{className:`thumnail-logo nav-img  ${u.currentMoleculeTop?"rotati":" rotati-plus "}`,src:"/imgs/three-menu.svg"})}),ue.jsx("ul",{className:`menu-nav${c?" show-menu":""}`,children:a.map((f,p)=>ue.jsx("button",{className:"menu-nav-button",children:ue.jsx("img",{className:" thumnail-logo",alt:f,src:"/imgs/"+f.id+".svg",title:f.id+"-button",onClick:f.buttonFunc},f.id)},f.id))})]})})};return ue.jsxs(ue.Fragment,{children:[r.savePopUp?ue.jsx(s,{saveState:r.saveState,savePopUp:r.savePopUp,setSavePopUp:r.setSavePopUp}):null,t?ue.jsx(vZ,{setShareDialog:n}):null,e?ue.jsx(o,{}):null,ue.jsx(l,{currentMoleculeTop:e})]})}const $Ue=j.memo(GUe);function XUe(r){return this.startDeg+this.rotateUnit*r}function YUe(r){return-(this.rotateDeg(r)+this.unskewDeg)}function JUe(r){var e=-(r.totalAngle-180)/2,t={top:e,left:e-90,right:e+90,bottom:e+180};return r.start!==void 0?r.start:t[r.position]}const ZUe=3;function KUe(r,e){var t=r*r*2;return Math.sqrt(t)*e+ZUe}function QUe(r){var e=r*2,t=-e/2;return e+="px",t+="px",{width:e,height:e,marginLeft:t,marginTop:t}}function e9e(r){var e=r.diameter,t=-r.diameter/2;return e+="px",t+="px",{width:e,height:e,marginLeft:t,marginTop:t}}const t9e=10;function r9e(r){var e=r.diameter,t=-r.diameter/2;return e+="px",t+="px",{width:e,height:e,marginRight:t,marginBottom:t}}function n9e(r){var e=r.diameter/2+"px";return{width:e,height:e}}const i9e=.41;function a9e(r){return r*i9e-t9e+"px"}function d3(r){this._config=r;var e=this.config=r,t=e.menus.length,n=e.totalAngle===360?t:t-1;this.radius=r.diameter/2,this.coverRadius=KUe(this.radius,r.percent),this.clickZoneRadius=this.radius-this.coverRadius,this.listSize=n9e(r),this.clickZoneSize=r9e(r),this.menuSize=e9e(r),this.coverSize=QUe(this.coverRadius),this.startDeg=JUe(r),this.centralDeg=(e.totalAngle-e.spaceDeg*n)/t,this.rotateUnit=this.centralDeg+e.spaceDeg,this.skewDeg=90-this.centralDeg,this.unskewDeg=-(90-this.centralDeg/2),this.textTop=a9e(this.clickZoneRadius)}d3.prototype={constructor:d3,rotateDeg:XUe,horizontalDeg:YUe};function o9e(r){this._config.menus.forEach(function(e,t){this._createList(r,e,t)},this)}function s9e(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function l9e(r){this.style.removeProperty(r)}function u9e(r,e,t){this.style.setProperty(r,e,t)}function c9e(r,e,t){var n=e.apply(this,arguments);n==null?this.style.removeProperty(r):this.style.setProperty(r,n,t)}function rn(r,e,t,n){var i;return arguments.length>1?(t==null?l9e:typeof t=="function"?c9e:u9e).call(r,e,t,""):s9e(i=r).getComputedStyle(i,null).getPropertyValue(e)}function h9e(r,e,t){var n=document.createElement("li");rn(n,"width",this._calc.listSize.width),rn(n,"height",this._calc.listSize.height),rn(n,"transform","rotate("+this._calc.rotateDeg(t)+"deg) skew("+this._calc.skewDeg+"deg)"),r.appendChild(n),this._createAnchor(n,e,t)}function yZ(r){return r.trim().split(/^|\s+/)}function QO(r){return r.classList||new bZ(r)}function bZ(r){this._node=r,this._names=yZ(r.getAttribute("class")||"")}bZ.prototype={add:function(r){var e=this._names.indexOf(r);e<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var e=this._names.indexOf(r);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};function xZ(r,e){for(var t=QO(r),n=-1,i=e.length;++n<i;)t.add(e[n])}function wZ(r,e){for(var t=QO(r),n=-1,i=e.length;++n<i;)t.remove(e[n])}function d9e(r){xZ(this,r)}function f9e(r){wZ(this,r)}function p9e(r,e){(e.apply(this,arguments)?xZ:wZ)(this,r)}function Cu(r,e,t){var n=yZ(e+"");if(arguments.length<2){for(var i=QO(this),a=-1,o=n.length;++a<o;)if(!i.contains(n[a]))return!1;return!0}(typeof t=="function"?p9e:t?d9e:f9e).call(r,n,t)}var m9e={_current:0,getNew:function(){return this._current++,this._current}};function jh(r,e,t,n){var i=r,a="sheetStyles",o=document.head||document.getElementsByTagName("head")[0],s=document.getElementById(a)||document.createElement("style");s.id=a;var l="s-S"+m9e.getNew();return i.className+=" "+l,s.innerHTML+=" ."+l+(n?":"+n:"")+"{"+e+":"+t+"}",o.appendChild(s),this}function rc(r,e,t,n){r.addEventListener(e,function(i){t.call(this,i,n)})}function g9e(){var r=this._container;Cu(r,"circular-menu",!0),rn(r,"width",this._calc.menuSize.width),rn(r,"height",this._calc.menuSize.height),rn(r,"margin-top",this._calc.menuSize.marginTop),rn(r,"margin-left",this._calc.menuSize.marginLeft);var e=this;rc(r,"click",function(n){n.toElement===r&&e._cMenu.hide()}),setTimeout(function(){rn(r,"display","block")},100),jh(r,"width",this._calc.coverSize.width,"after"),jh(r,"height",this._calc.coverSize.height,"after"),jh(r,"margin-left",this._calc.coverSize.marginLeft,"after"),jh(r,"margin-top",this._calc.coverSize.marginTop,"after"),jh(r,"border","3px solid "+this._config.pageBackground,"after");var t=r.appendChild(document.createElement("ul"));this._createLists(t)}function v9e(r){return r instanceof Array&&r.length!==0}function qU(r){return r instanceof Function?r():!!r}function y9e(r,e){e&&(e instanceof Object?(r.href=e.url,r.target=e.blank?"_blank":""):r.href=e)}var WU=null;function b9e(r,e,t){var n=this,i=null,a=document.createElement("a");y9e(a,e.href),a.setDisabled=function(){Cu(a,"disabled",qU(e.disabled))},this._anchors.push(a),rn(a,"width",this._calc.clickZoneSize.width),rn(a,"height",this._calc.clickZoneSize.height),rn(a,"right",this._calc.clickZoneSize.marginRight),rn(a,"bottom",this._calc.clickZoneSize.marginBottom),rn(a,"transform","skew("+-this._calc.skewDeg+"deg) rotate("+this._calc.unskewDeg+"deg) scale(1)"),Cu(a,"disabled",qU(e.disabled));var o=this._config.percent*100+"%";jh(a,"background","radial-gradient(transparent "+o+", "+this._config.background+" "+o+")"),jh(a,"background","radial-gradient(transparent "+o+", "+this._config.backgroundHover+" "+o+")","hover");function s(u,c){c.click&&c.click.call(this,u,c),n._config.hideAfterClick&&(n._cMenu.hide(),n._cMenu._pMenu&&n._cMenu._pMenu.hide(),l&&l.hide())}if(rc(a,"mouseenter",function(){var u=document.createElement("div");u.textContent=e.icon,u.classList.add("tooltip"),u.id=e.icon+"text";const c=u.textContent.length*2.7;document.querySelector("body").appendChild(u),rn(u,"top",n._container.offsetTop+n._calc.radius-10+"px"),rn(u,"left",n._container.offsetLeft+n._calc.radius-c+"px")}),rc(a,"click",s,e),rc(a,"mouseleave",function(){document.getElementById(e.icon+"text").remove()}),r.appendChild(a),this._createHorizontal(a,e,t),v9e(e.menus)){var l=this._createSubMenu(n,e.menus,t);let u=!1;rc(a,"mouseenter",function(){u=!0,WU=setTimeout(function(){u&&l.styles({top:n._container.offsetTop+n._calc.radius+"px",left:n._container.offsetLeft+n._calc.radius+"px"}).show()},400)}),rc(a,"mouseleave",function(c){l._container.contains(c.toElement)||(u=!1,i=setTimeout(function(){l.hide()},100))}),rc(l._container,"mouseenter",function(){clearTimeout(WU),clearTimeout(i)}),rc(l._container,"mouseleave",function(c){u=!1,(!a.contains(c.toElement)||c.toElement.children[0]===a)&&l.hide()})}}const x9e=.65,w9e=.2,GU=13;function f3(r){return r===void 0?!1:typeof r=="string"?r!=="":r.length&&r[0]!==""}function S9e(r){return typeof r=="string"?r:r[0]}function M9e(r){return typeof r=="string"?null:r[1]}function _9e(r,e,t){if(f3(e.icon)){var n=document.createElement("span"),i=S9e(e.icon),a=M9e(e.icon);Cu(n,i+" cm-icon",!0),rn(n,"color",a);var o=this._calc.clickZoneRadius*x9e-GU+"px",s=this._calc.clickZoneRadius*w9e-GU+"px";rn(n,"width",o),rn(n,"height",o),rn(n,"font-size",o),rn(n,"margin-top",s),r.appendChild(n)}}const E9e="3px",C9e="-3px";function A9e(r,e,t){var n=document.createElement("span");n.textContent=e.title,Cu(n,"text",!0),rn(n,"margin-top",f3(e.icon)?E9e:this._calc.textTop),rn(n,"top",f3(e.icon)?C9e:0),r.appendChild(n)}function T9e(r,e,t){var n=document.createElement("div");Cu(n,"horizontal",!0),this._config.horizontal&&rn(n,"transform","rotate("+this._calc.horizontalDeg(t)+"deg)"),r.appendChild(n),this._createIcon(n,e,t),this._createText(n,e,t)}function SZ(){var r={},e=!1,t=0,n=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(e=arguments[0],t++);for(var i=function(o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e&&Object.prototype.toString.call(o[s])==="[object Object]"?r[s]=extend(!0,r[s],o[s]):r[s]=o[s])};t<n;t++){var a=arguments[t];i(a)}return r}const D9e=5/3,k9e=.45,N9e=.618;function O9e(r,e,t){var n=document.createElement("div");Cu(n,"circular-sub-menu",!0),this._container.parentNode.insertBefore(n,this._container);var i=this._calc.centralDeg*N9e*e.length,a=this._calc.rotateDeg(t)-i/2+this._calc.centralDeg/2,o=SZ(this._config,{totalAngle:i,percent:k9e,diameter:this._config.diameter*D9e,start:a,animation:"into",menus:e});return new Dv(n,r._cMenu).config(o)}function p3(r,e){this._cMenu=r,this._container=r._container,this._config=e,this._calc=new d3(e),this._anchors=[]}p3.prototype={constructor:p3,createMenu:g9e,_createLists:o9e,_createList:h9e,_createAnchor:b9e,_createText:A9e,_createHorizontal:T9e,_createIcon:_9e,_createSubMenu:O9e};const R9e={totalAngle:360,spaceDeg:0,background:"#323232",backgroundHover:"#515151",pageBackground:"transparent",percent:.32,diameter:300,position:"top",horizontal:!0,animation:"into",hideAfterClick:!0};function P9e(r){return r=SZ(R9e,r),this._creator=new p3(this,r),this._creator.createMenu(),this}function I9e(r){!(r instanceof Array)||r.length!==2||(rn(this._container,"left",r[0]+"px"),rn(this._container,"top",r[1]+"px"))}function L9e(){this._creator._anchors.forEach(function(r){r.setDisabled()})}function F9e(r){return L9e.call(this),I9e.call(this,r),Cu(this._container,"opened-nav",!0),this}function B9e(){return Cu(this._container,"opened-nav",!1),this}function z9e(r){if(!r instanceof Object)return this;for(var e in r)r.hasOwnProperty(e)&&rn(this._container,e,r[e]);return this}function Dv(r,e){this._container=r,e&&(this._pMenu=e)}Dv.prototype={constructor:Dv,config:P9e,show:F9e,hide:B9e,styles:z9e};function U9e(r){return typeof r=="string"?new Dv(document.querySelector(r)):new Dv(r)}var nA=null,Hh;const j9e=(r,e)=>{nA=r;const t=i=>{var a=[];for(var o in I.availableTypes){var s=I.availableTypes[o];if(s.atomCategory===i){var l=new Object;l.title=`${s.atomType}`,l.icon=`${s.atomType}`,l.name=s.atomType,l.click=function(u,c){if(c.icon==="GitHubMolecule"){const h=parseInt(Hh._container.style.left,10),d=parseInt(Hh._container.style.top,10);I.lastClick=[h,d],e(!0)}else e(!1),u.target.id=c.name,n(u)},a.push(l)}}return a};Hh=U9e(nA.current).config({hideAfterClick:!0,percent:.15,menus:[{title:"Actions",icon:"Actions",menus:t("Actions")},{title:"Inputs",icon:"Inputs",menus:t("Inputs")},{title:"Tags",icon:"Tags",menus:t("Tags")},{title:"Import/Export",icon:"Import-Export",menus:t("ImportExport")},{title:"Shapes",icon:"Shapes",menus:t("Shapes")},{title:"Interactions",icon:"Interaction",menus:t("Interactions")}]}),document.getElementById("flow-canvas").addEventListener("contextmenu",i=>{i.preventDefault()}),nA.current.addEventListener("contextmenu",i=>{i.preventDefault()});function n(i){let a=i.target.id;const o=parseInt(Hh._container.style.left,10),s=parseInt(Hh._container.style.top,10);I.currentMolecule.placeAtom({x:I.pixelsToWidth(o),y:I.pixelsToHeight(s),parent:I.currentMolecule,atomType:a,uniqueID:I.generateUniqueID()},!0)}};function H9e(r){let e="";var[t,n]=j.useState([]),[i,a]=j.useState(!1);const o=j.useRef(null);function s(w,b){I.currentMolecule.loadGithubMoleculeByID(b.id),r.setSearchingGitHub(!1),n([])}const l=function(){var w=e+" topic:abundance-project "+o.current.value;new fu().request("GET /search/repositories",{q:w,per_page:50,headers:{accept:"application/vnd.github.mercy-preview+json"}}).then(b=>{let m=[];b.data.items.forEach(x=>{m.push(x)}),n(m),a(!1)})},u=function(w){w.key==="Enter"&&(a(!0),l())},c=function(w){e=w.target.value},[h,d]=j.useState(!1),[f,p]=j.useState({}),v=(w,b)=>{p(w),d(!0)},y=()=>{p({}),d(!1)},g=function(){return t.map((w,b)=>ue.jsx("li",{onClick:m=>s(m,w),onMouseEnter:()=>v(w),onMouseLeave:()=>y(),children:w.name},w.id))};return ue.jsx(ue.Fragment,{children:r.searchingGitHub?ue.jsxs("div",{className:"search-container",children:[ue.jsxs("div",{id:"git_search",style:{top:I.lastClick[1]+"px",left:I.lastClick[0]+"px"},children:[ue.jsx("input",{type:"text",id:"menuInput",onKeyDown:u,onChange:c,placeholder:"Search for atom..",className:"menu_search_canvas"}),ue.jsx("label",{htmlFor:"id_select",children:" Topic "}),ue.jsxs("select",{ref:o,id:"searchType",className:"menu_search_canvas",children:[" ",ue.jsx("option",{value:""},"empty-topic"),tw.map(w=>ue.jsx("option",{value:w.value,children:w.label},w.label))]}),ue.jsx(g,{})]}),h?ue.jsxs("div",{className:"GitProjectInfoPanel",style:{top:I.lastClick[1]-50+"px",left:I.lastClick[0]-350+"px"},children:[ue.jsxs("div",{className:"GitInfoLeft",children:[ue.jsx("img",{src:"/imgs/defaultThumbnail.svg"}),ue.jsxs("div",{style:{display:"flex"},children:[ue.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(.7)"},width:"16",height:"16",children:ue.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})}),ue.jsx("p",{children:f.stargazers_count})]})]}),ue.jsxs("div",{className:"GitInfo",children:[ue.jsxs("span",{children:["Project Name: ",f.name]}),ue.jsxs("span",{children:["Owner: ",f.owner.login]}),ue.jsxs("span",{children:["Description: ",f.description||null]}),ue.jsx("span",{children:"PLACEHOLDER FOR README"}),ue.jsx("span",{children:"Tags: PLACEHOLDER FOR tags or categories"})]})]}):null]}):null})}function MZ(){const r=document.getElementById("flow-canvas");r.width=window.innerWidth,r.height=window.innerHeight*.45}window.addEventListener("resize",()=>{MZ()},!1);const V9e=j.memo(function(r){let e=r.props.loadProject,t=r.props.setActiveAtom,n=r.props.shortCuts;const[i,a]=j.useState(!1),o=j.useRef(null),s=j.useRef(null);j.useEffect(()=>{I.canvas=o,I.c=o.current.getContext("2d"),(!I.loadedRepo||I.currentRepo.name!==I.loadedRepo.name)&&(I.topLevelMolecule=new uy({x:0,y:0,topLevel:!0,atomType:"Molecule"}),I.currentMolecule=I.topLevelMolecule,e(I.currentRepo)),I.currentMolecule.nodesOnTheScreen.forEach(v=>{v.update()})},[]);const l=()=>{I.c.clearRect(0,0,I.canvas.current.width,I.canvas.current.height),I.currentMolecule.nodesOnTheScreen.forEach(v=>{v.update()})},u=v=>{I.currentMolecule.nodesOnTheScreen.forEach(y=>{y.mouseMove(v.clientX,v.clientY)})},c=v=>{(v.key=="Backspace"||v.key=="Delete")&&(I.atomsSelected=[],I.currentMolecule.copy(),I.atomsSelected.forEach(y=>{I.currentMolecule.nodesOnTheScreen.forEach(g=>{g.uniqueID==y.uniqueID&&g.deleteNode()})})),(v.key=="Control"||v.key=="Meta")&&(I.ctrlDown=!0),I.ctrlDown&&n.hasOwnProperty([v.key])&&(v.preventDefault(),v.key=="c"&&(I.atomsSelected=[],I.currentMolecule.copy()),v.key=="v"&&I.atomsSelected.forEach(y=>{let g=I.generateUniqueID();y.uniqueID=g,y.atomType=="Molecule",y=I.currentMolecule.remapIDs(y),I.currentMolecule.placeAtom(y,!0)}),v.key=="g"?a(!0):I.currentMolecule.placeAtom({parentMolecule:I.currentMolecule,x:.5,y:.5,parent:I.currentMolecule,atomType:`${n[v.key]}`,uniqueID:I.generateUniqueID()},!0)),I.currentMolecule.nodesOnTheScreen.forEach(y=>{y.keyPress(v.key)})},h=v=>{(v.key=="Control"||v.key=="Meta")&&(I.ctrlDown=!1)},d=v=>{var y;if("which"in v?y=v.which==3:"button"in v&&(y=v.button==2),y){var g=!1;Hh.show([v.clientX,v.clientY],g);return}else{Hh.hide(),a(!1);var w=!1;I.currentMolecule.nodesOnTheScreen.forEach(b=>{let m;m=b.clickDown(v.clientX,v.clientY,w),m!==void 0&&(t(m),I.currentMolecule.selected=!1,w=!0)}),w||(t(I.currentMolecule),I.currentMolecule.selected=!0,I.currentMolecule.sendToRender())}},f=v=>{I.currentMolecule.nodesOnTheScreen.forEach(y=>{y.doubleClick(v.clientX,v.clientY)}),t(I.currentMolecule)},p=v=>{I.currentMolecule.nodesOnTheScreen.forEach(y=>{y.clickUp(v.clientX,v.clientY)}),I.currentMolecule.clickUp(v.clientX,v.clientY)};return j.useEffect(()=>{o.current.getContext("2d");let v;const y=()=>{l(),v=window.requestAnimationFrame(y)};return y(),()=>{window.cancelAnimationFrame(v)}},[l]),j.useEffect(()=>{MZ()},[]),j.useEffect(()=>{j9e(s,a)},[]),ue.jsxs(ue.Fragment,{children:[ue.jsx("canvas",{ref:o,id:"flow-canvas",tabIndex:0,onMouseMove:u,onMouseDown:d,onMouseUp:p,onDoubleClick:f,onKeyUp:h,onKeyDown:c}),ue.jsx("div",{children:ue.jsx("p",{className:"repo-name",style:{position:"absolute",zIndex:"5",top:"1%",right:"55px",color:"rgb(255 255 255 / 34%)"},children:I.currentRepo.name})}),ue.jsxs("div",{children:[ue.jsx("div",{id:"circle-menu1",className:"cn-menu1",ref:s}),ue.jsx(H9e,{searchingGitHub:i,setSearchingGitHub:a})]})]})});function q9e(){const[r,e]=j.useState({width:0,height:0});return j.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),r}const W9e=j.memo(function(r){let e=r.displayProps.mesh,t=r.displayProps.wireMesh;const n=q9e();return ue.jsxs(ue.Fragment,{children:[ue.jsxs("div",{className:"jscad-container",style:{width:n.width*1,height:n.height*.6},children:[ue.jsx("section",{id:"threeDView",style:{width:n.width*1,height:n.height*.6},children:t?ue.jsxs(cZ,{gridParam:r.props.gridParam,axesParam:r.props.axesParam,outdatedMesh:r.displayProps.outdatedMesh,children:[r.props.wireParam?ue.jsx(pZ,{mesh:t}):null,ue.jsx(fZ,{mesh:e,isSolid:r.props.solidParam,setOutdatedMesh:r.displayProps.setOutdatedMesh})]}):ue.jsx("div",{style:{display:"flex",alignItems:"center",fontSize:"2em"},children:"Loading..."})}),ue.jsxs("div",{className:"container arrow-up",children:[ue.jsx("input",{type:"checkbox",className:"custom"}),ue.jsx("div",{className:"dots"})]}),ue.jsx("div",{id:"viewer_bar"})]}),ue.jsx("div",{id:"bottom_bar"})]})});class kr{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=nm(this,e,t);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),il.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=nm(this,e,t);let n=[];return this.decompose(e,t,n,0),il.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new w0(this),a=new w0(e);for(let o=t,s=t;;){if(i.next(o),a.next(o),o=0,i.lineBreak!=a.lineBreak||i.done!=a.done||i.value!=a.value)return!1;if(s+=i.value.length,i.done||s>=n)return!0}}iter(e=1){return new w0(this,e)}iterRange(e,t=this.length){return new _Z(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new EZ(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?kr.empty:e.length<=32?new Bn(e):il.from(Bn.split(e,[]))}}class Bn extends kr{constructor(e,t=G9e(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let a=0;;a++){let o=this.text[a],s=i+o.length;if((t?n:s)>=e)return new $9e(i,s,n,o);i=s+1,n++}}decompose(e,t,n,i){let a=e<=0&&t>=this.length?this:new Bn($U(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=n.pop(),s=cw(a.text,o.text.slice(),0,a.length);if(s.length<=32)n.push(new Bn(s,o.length+a.length));else{let l=s.length>>1;n.push(new Bn(s.slice(0,l)),new Bn(s.slice(l)))}}else n.push(a)}replace(e,t,n){if(!(n instanceof Bn))return super.replace(e,t,n);[e,t]=nm(this,e,t);let i=cw(this.text,cw(n.text,$U(this.text,0,e)),t),a=this.length+n.length-(t-e);return i.length<=32?new Bn(i,a):il.from(Bn.split(i,[]),a)}sliceString(e,t=this.length,n=`
`){[e,t]=nm(this,e,t);let i="";for(let a=0,o=0;a<=t&&o<this.text.length;o++){let s=this.text[o],l=a+s.length;a>e&&o&&(i+=n),e<l&&t>a&&(i+=s.slice(Math.max(0,e-a),t-a)),a=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let a of e)n.push(a),i+=a.length+1,n.length==32&&(t.push(new Bn(n,i)),n=[],i=-1);return i>-1&&t.push(new Bn(n,i)),t}}class il extends kr{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,i){for(let a=0;;a++){let o=this.children[a],s=i+o.length,l=n+o.lines-1;if((t?l:s)>=e)return o.lineInner(e,t,n,i);i=s+1,n=l+1}}decompose(e,t,n,i){for(let a=0,o=0;o<=t&&a<this.children.length;a++){let s=this.children[a],l=o+s.length;if(e<=l&&t>=o){let u=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!u?n.push(s):s.decompose(e-o,t-o,n,u)}o=l+1}}replace(e,t,n){if([e,t]=nm(this,e,t),n.lines<this.lines)for(let i=0,a=0;i<this.children.length;i++){let o=this.children[i],s=a+o.length;if(e>=a&&t<=s){let l=o.replace(e-a,t-a,n),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[i]=l,new il(c,this.length-(t-e)+n.length)}return super.replace(a,s,l)}a=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){[e,t]=nm(this,e,t);let i="";for(let a=0,o=0;a<this.children.length&&o<=t;a++){let s=this.children[a],l=o+s.length;o>e&&a&&(i+=n),e<l&&t>o&&(i+=s.sliceString(e-o,t-o,n)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof il))return 0;let n=0,[i,a,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,a+=t){if(i==o||a==s)return n;let l=this.children[i],u=e.children[a];if(l!=u)return n+l.scanIdentical(u,t);n+=l.length+1}}static from(e,t=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let f of e)n+=f.lines;if(n<32){let f=[];for(let p of e)p.flatten(f);return new Bn(f,t)}let i=Math.max(32,n>>5),a=i<<1,o=i>>1,s=[],l=0,u=-1,c=[];function h(f){let p;if(f.lines>a&&f instanceof il)for(let v of f.children)h(v);else f.lines>o&&(l>o||!l)?(d(),s.push(f)):f instanceof Bn&&l&&(p=c[c.length-1])instanceof Bn&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new Bn(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>i&&d(),l+=f.lines,u+=f.length+1,c.push(f))}function d(){l!=0&&(s.push(c.length==1?c[0]:il.from(c,u)),u=-1,l=c.length=0)}for(let f of e)h(f);return d(),s.length==1?s[0]:new il(s,t)}}kr.empty=new Bn([""],0);function G9e(r){let e=-1;for(let t of r)e+=t.length+1;return e}function cw(r,e,t=0,n=1e9){for(let i=0,a=0,o=!0;a<r.length&&i<=n;a++){let s=r[a],l=i+s.length;l>=t&&(l>n&&(s=s.slice(0,n-i)),i<t&&(s=s.slice(t-i)),o?(e[e.length-1]+=s,o=!1):e.push(s)),i=l+1}return e}function $U(r,e,t){return cw(r,[""],e,t)}class w0{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Bn?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],a=this.offsets[n],o=a>>1,s=i instanceof Bn?i.text.length:i.children.length;if(o==(t>0?s:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Bn){let l=i.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Bn?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class _Z{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new w0(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class EZ{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(kr.prototype[Symbol.iterator]=function(){return this.iter()},w0.prototype[Symbol.iterator]=_Z.prototype[Symbol.iterator]=EZ.prototype[Symbol.iterator]=function(){return this});class $9e{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}}function nm(r,e,t){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,t))]}let kp="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<kp.length;r++)kp[r]+=kp[r-1];function X9e(r){for(let e=1;e<kp.length;e+=2)if(kp[e]>r)return kp[e-1]<=r;return!1}function XU(r){return r>=127462&&r<=127487}const YU=8205;function Oi(r,e,t=!0,n=!0){return(t?CZ:Y9e)(r,e,n)}function CZ(r,e,t){if(e==r.length)return e;e&&AZ(r.charCodeAt(e))&&TZ(r.charCodeAt(e-1))&&e--;let n=Ai(r,e);for(e+=Vo(n);e<r.length;){let i=Ai(r,e);if(n==YU||i==YU||t&&X9e(i))e+=Vo(i),n=i;else if(XU(i)){let a=0,o=e-2;for(;o>=0&&XU(Ai(r,o));)a++,o-=2;if(a%2==0)break;e+=2}else break}return e}function Y9e(r,e,t){for(;e>0;){let n=CZ(r,e-2,t);if(n<e)return n;e--}return 0}function AZ(r){return r>=56320&&r<57344}function TZ(r){return r>=55296&&r<56320}function Ai(r,e){let t=r.charCodeAt(e);if(!TZ(t)||e+1==r.length)return t;let n=r.charCodeAt(e+1);return AZ(n)?(t-55296<<10)+(n-56320)+65536:t}function eR(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function Vo(r){return r<65536?1:2}const m3=/\r\n?|\n/;var xa=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(xa||(xa={}));class yl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,i=0;t<this.sections.length;){let a=this.sections[t++],o=this.sections[t++];o<0?(e(n,i,a),i+=a):i+=o,n+=a}}iterChangedRanges(e,t=!1){g3(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];i<0?e.push(n,i):e.push(i,n)}return new yl(e)}composeDesc(e){return this.empty?e:e.empty?this:DZ(this,e)}mapDesc(e,t=!1){return e.empty?this:v3(this,e,t)}mapPos(e,t=-1,n=xa.Simple){let i=0,a=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],l=this.sections[o++],u=i+s;if(l<0){if(u>e)return a+(e-i);a+=s}else{if(n!=xa.Simple&&u>=e&&(n==xa.TrackDel&&i<e&&u>e||n==xa.TrackBefore&&i<e||n==xa.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!s)return e==i||t<0?a:a+l;a+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return a}touchesRange(e,t=e){for(let n=0,i=0;n<this.sections.length&&i<=t;){let a=this.sections[n++],o=this.sections[n++],s=i+a;if(o>=0&&i<=t&&s>=e)return i<e&&s>t?"cover":!0;i=s}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new yl(e)}static create(e){return new yl(e)}}class ni extends yl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return g3(this,(t,n,i,a,o)=>e=e.replace(i,i+(n-t),o),!1),e}mapDesc(e,t=!1){return v3(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let i=0,a=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s>=0){t[i]=s,t[i+1]=o;let l=i>>1;for(;n.length<l;)n.push(kr.empty);n.push(o?e.slice(a,a+o):kr.empty)}a+=o}return new ni(t,n)}compose(e){return this.empty?e:e.empty?this:DZ(this,e,!0)}map(e,t=!1){return e.empty?this:v3(this,e,t,!0)}iterChanges(e,t=!1){g3(this,e,t)}get desc(){return yl.create(this.sections)}filter(e){let t=[],n=[],i=[],a=new kv(this);e:for(let o=0,s=0;;){let l=o==e.length?1e9:e[o++];for(;s<l||s==l&&a.len==0;){if(a.done)break e;let c=Math.min(a.len,l-s);Xi(i,c,-1);let h=a.ins==-1?-1:a.off==0?a.ins:0;Xi(t,c,h),h>0&&bc(n,t,a.text),a.forward(c),s+=c}let u=e[o++];for(;s<u;){if(a.done)break e;let c=Math.min(a.len,u-s);Xi(t,c,-1),Xi(i,c,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(c),s+=c}}return{changes:new ni(t,n),filtered:yl.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let i=[],a=[],o=0,s=null;function l(c=!1){if(!c&&!i.length)return;o<t&&Xi(i,t-o,-1);let h=new ni(i,a);s=s?s.compose(h.map(s)):h,i=[],a=[],o=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof ni){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),s=s?s.compose(c.map(s)):c}else{let{from:h,to:d=h,insert:f}=c;if(h>d||h<0||d>t)throw new RangeError(`Invalid change range ${h} to ${d} (in doc of length ${t})`);let p=f?typeof f=="string"?kr.of(f.split(n||m3)):f:kr.empty,v=p.length;if(h==d&&v==0)return;h<o&&l(),h>o&&Xi(i,h-o,-1),Xi(i,d-h,v),bc(a,i,p),o=d}}return u(e),l(!s),s}static empty(e){return new ni(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let i=0;i<e.length;i++){let a=e[i];if(typeof a=="number")t.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((o,s)=>s&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)t.push(a[0],0);else{for(;n.length<i;)n.push(kr.empty);n[i]=kr.of(a.slice(1)),t.push(a[0],n[i].length)}}}return new ni(t,n)}static createSet(e,t){return new ni(e,t)}}function Xi(r,e,t,n=!1){if(e==0&&t<=0)return;let i=r.length-2;i>=0&&t<=0&&t==r[i+1]?r[i]+=e:e==0&&r[i]==0?r[i+1]+=t:n?(r[i]+=e,r[i+1]+=t):r.push(e,t)}function bc(r,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<n;)r.push(kr.empty);r.push(t)}}function g3(r,e,t){let n=r.inserted;for(let i=0,a=0,o=0;o<r.sections.length;){let s=r.sections[o++],l=r.sections[o++];if(l<0)i+=s,a+=s;else{let u=i,c=a,h=kr.empty;for(;u+=s,c+=l,l&&n&&(h=h.append(n[o-2>>1])),!(t||o==r.sections.length||r.sections[o+1]<0);)s=r.sections[o++],l=r.sections[o++];e(i,u,a,c,h),i=u,a=c}}}function v3(r,e,t,n=!1){let i=[],a=n?[]:null,o=new kv(r),s=new kv(e);for(let l=-1;;)if(o.ins==-1&&s.ins==-1){let u=Math.min(o.len,s.len);Xi(i,u,-1),o.forward(u),s.forward(u)}else if(s.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(s.len<o.len||s.len==o.len&&!t))){let u=s.len;for(Xi(i,s.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(Xi(i,0,o.ins),a&&bc(a,i,o.text),l=o.i),o.forward(c),u-=c}s.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(s.ins==-1){let h=Math.min(c,s.len);u+=h,c-=h,s.forward(h)}else if(s.ins==0&&s.len<c)c-=s.len,s.next();else break;Xi(i,u,l<o.i?o.ins:0),a&&l<o.i&&bc(a,i,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&s.done)return a?ni.createSet(i,a):yl.create(i);throw new Error("Mismatched change set lengths")}}function DZ(r,e,t=!1){let n=[],i=t?[]:null,a=new kv(r),o=new kv(e);for(let s=!1;;){if(a.done&&o.done)return i?ni.createSet(n,i):yl.create(n);if(a.ins==0)Xi(n,a.len,0,s),a.next();else if(o.len==0&&!o.done)Xi(n,0,o.ins,s),i&&bc(i,n,o.text),o.next();else{if(a.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(a.len2,o.len),u=n.length;if(a.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Xi(n,l,c,s),i&&c&&bc(i,n,o.text)}else o.ins==-1?(Xi(n,a.off?0:a.len,l,s),i&&bc(i,n,a.textBit(l))):(Xi(n,a.off?0:a.len,o.off?0:o.ins,s),i&&!o.off&&bc(i,n,o.text));s=(a.ins>l||o.ins>=0&&o.len>l)&&(s||n.length>u),a.forward2(l),o.forward(l)}}}}class kv{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?kr.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?kr.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ed{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new ed(n,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return at.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return at.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return at.range(e.anchor,e.head)}static create(e,t,n){return new ed(e,t,n)}}class at{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:at.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new at([this.main],0)}addRange(e,t=!0){return at.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,at.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new at(e.ranges.map(t=>ed.fromJSON(t)),e.main)}static single(e,t=e){return new at([at.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let a=e[i];if(a.empty?a.from<=n:a.from<n)return at.normalized(e.slice(),t);n=a.to}return new at(e,t)}static cursor(e,t=0,n,i){return ed.create(e,e,(t==0?0:t<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(e,t,n,i){let a=(n??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?ed.create(t,e,48|a):ed.create(e,t,(t>e?8:0)|a)}static normalized(e,t=0){let n=e[t];e.sort((i,a)=>i.from-a.from),t=e.indexOf(n);for(let i=1;i<e.length;i++){let a=e[i],o=e[i-1];if(a.empty?a.from<=o.to:a.from<o.to){let s=o.from,l=Math.max(a.to,o.to);i<=t&&t--,e.splice(--i,2,a.anchor>a.head?at.range(l,s):at.range(s,l))}}return new at(e,t)}}function kZ(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let tR=0;class Dt{constructor(e,t,n,i,a){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=tR++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}get reader(){return this}static define(e={}){return new Dt(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:rR),!!e.static,e.enables)}of(e){return new hw([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new hw(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new hw(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function rR(r,e){return r==e||r.length==e.length&&r.every((t,n)=>t===e[n])}class hw{constructor(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=tR++}dynamicSlot(e){var t;let n=this.value,i=this.facet.compareInput,a=this.id,o=e[a]>>1,s=this.type==2,l=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?u=!0:((t=e[h.id])!==null&&t!==void 0?t:1)&1||c.push(e[h.id]);return{create(h){return h.values[o]=n(h),1},update(h,d){if(l&&d.docChanged||u&&(d.docChanged||d.selection)||y3(h,c)){let f=n(h);if(s?!JU(f,h.values[o],i):!i(f,h.values[o]))return h.values[o]=f,1}return 0},reconfigure:(h,d)=>{let f,p=d.config.address[a];if(p!=null){let v=GS(d,p);if(this.dependencies.every(y=>y instanceof Dt?d.facet(y)===h.facet(y):y instanceof Fi?d.field(y,!1)==h.field(y,!1):!0)||(s?JU(f=n(h),v,i):i(f=n(h),v)))return h.values[o]=v,0}else f=n(h);return h.values[o]=f,1}}}}function JU(r,e,t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!t(r[n],e[n]))return!1;return!0}function y3(r,e){let t=!1;for(let n of e)S0(r,n)&1&&(t=!0);return t}function J9e(r,e,t){let n=t.map(l=>r[l.id]),i=t.map(l=>l.type),a=n.filter(l=>!(l&1)),o=r[e.id]>>1;function s(l){let u=[];for(let c=0;c<n.length;c++){let h=GS(l,n[c]);if(i[c]==2)for(let d of h)u.push(d);else u.push(h)}return e.combine(u)}return{create(l){for(let u of n)S0(l,u);return l.values[o]=s(l),1},update(l,u){if(!y3(l,a))return 0;let c=s(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=y3(l,n),h=u.config.facets[e.id],d=u.facet(e);if(h&&!c&&rR(t,h))return l.values[o]=d,0;let f=s(l);return e.compare(f,d)?(l.values[o]=d,0):(l.values[o]=f,1)}}}const ZU=Dt.define({static:!0});class Fi{constructor(e,t,n,i,a){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=a,this.provides=void 0}static define(e){let t=new Fi(tR++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(ZU).find(n=>n.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,i)=>{let a=n.values[t],o=this.updateF(a,i);return this.compareF(a,o)?0:(n.values[t]=o,1)},reconfigure:(n,i)=>i.config.address[this.id]!=null?(n.values[t]=i.field(this),0):(n.values[t]=this.create(n),1)}}init(e){return[this,ZU.of({field:this,create:e})]}get extension(){return this}}const Vh={lowest:4,low:3,default:2,high:1,highest:0};function Ig(r){return e=>new NZ(e,r)}const Wd={highest:Ig(Vh.highest),high:Ig(Vh.high),default:Ig(Vh.default),low:Ig(Vh.low),lowest:Ig(Vh.lowest)};class NZ{constructor(e,t){this.inner=e,this.prec=t}}class j2{of(e){return new b3(this,e)}reconfigure(e){return j2.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class b3{constructor(e,t){this.compartment=e,this.inner=t}}class WS{constructor(e,t,n,i,a,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=a,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let i=[],a=Object.create(null),o=new Map;for(let d of Z9e(e,t,o))d instanceof Fi?i.push(d):(a[d.facet.id]||(a[d.facet.id]=[])).push(d);let s=Object.create(null),l=[],u=[];for(let d of i)s[d.id]=u.length<<1,u.push(f=>d.slot(f));let c=n==null?void 0:n.config.facets;for(let d in a){let f=a[d],p=f[0].facet,v=c&&c[d]||[];if(f.every(y=>y.type==0))if(s[p.id]=l.length<<1|1,rR(v,f))l.push(n.facet(p));else{let y=p.combine(f.map(g=>g.value));l.push(n&&p.compare(y,n.facet(p))?n.facet(p):y)}else{for(let y of f)y.type==0?(s[y.id]=l.length<<1|1,l.push(y.value)):(s[y.id]=u.length<<1,u.push(g=>y.dynamicSlot(g)));s[p.id]=u.length<<1,u.push(y=>J9e(y,p,f))}}let h=u.map(d=>d(s));return new WS(e,o,h,s,l,a)}}function Z9e(r,e,t){let n=[[],[],[],[],[]],i=new Map;function a(o,s){let l=i.get(o);if(l!=null){if(l<=s)return;let u=n[l].indexOf(o);u>-1&&n[l].splice(u,1),o instanceof b3&&t.delete(o.compartment)}if(i.set(o,s),Array.isArray(o))for(let u of o)a(u,s);else if(o instanceof b3){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;t.set(o.compartment,u),a(u,s)}else if(o instanceof NZ)a(o.inner,o.prec);else if(o instanceof Fi)n[s].push(o),o.provides&&a(o.provides,s);else if(o instanceof hw)n[s].push(o),o.facet.extensions&&a(o.facet.extensions,Vh.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(u,s)}}return a(r,Vh.default),n.reduce((o,s)=>o.concat(s))}function S0(r,e){if(e&1)return 2;let t=e>>1,n=r.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;r.status[t]=4;let i=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|i}function GS(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const OZ=Dt.define(),x3=Dt.define({combine:r=>r.some(e=>e),static:!0}),RZ=Dt.define({combine:r=>r.length?r[0]:void 0,static:!0}),PZ=Dt.define(),IZ=Dt.define(),LZ=Dt.define(),FZ=Dt.define({combine:r=>r.length?r[0]:!1});class Dl{constructor(e,t){this.type=e,this.value=t}static define(){return new K9e}}class K9e{of(e){return new Dl(this,e)}}class Q9e{constructor(e){this.map=e}of(e){return new hr(this,e)}}class hr{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new hr(this.type,t)}is(e){return this.type==e}static define(e={}){return new Q9e(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let i of e){let a=i.map(t);a&&n.push(a)}return n}}hr.reconfigure=hr.define();hr.appendConfig=hr.define();class oi{constructor(e,t,n,i,a,o){this.startState=e,this.changes=t,this.selection=n,this.effects=i,this.annotations=a,this.scrollIntoView=o,this._doc=null,this._state=null,n&&kZ(n,t.newLength),a.some(s=>s.type==oi.time)||(this.annotations=a.concat(oi.time.of(Date.now())))}static create(e,t,n,i,a,o){return new oi(e,t,n,i,a,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(oi.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}oi.time=Dl.define();oi.userEvent=Dl.define();oi.addToHistory=Dl.define();oi.remote=Dl.define();function e7e(r,e){let t=[];for(let n=0,i=0;;){let a,o;if(n<r.length&&(i==e.length||e[i]>=r[n]))a=r[n++],o=r[n++];else if(i<e.length)a=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<a?t.push(a,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function BZ(r,e,t){var n;let i,a,o;return t?(i=e.changes,a=ni.empty(e.changes.length),o=r.changes.compose(e.changes)):(i=e.changes.map(r.changes),a=r.changes.mapDesc(e.changes,!0),o=r.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(a):(n=r.selection)===null||n===void 0?void 0:n.map(i),effects:hr.mapEffects(r.effects,i).concat(hr.mapEffects(e.effects,a)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function w3(r,e,t){let n=e.selection,i=Np(e.annotations);return e.userEvent&&(i=i.concat(oi.userEvent.of(e.userEvent))),{changes:e.changes instanceof ni?e.changes:ni.of(e.changes||[],t,r.facet(RZ)),selection:n&&(n instanceof at?n:at.single(n.anchor,n.head)),effects:Np(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function zZ(r,e,t){let n=w3(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(t=!1);let o=!!e[a].sequential;n=BZ(n,w3(r,e[a],o?n.changes.newLength:r.doc.length),o)}let i=oi.create(r,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return r7e(t?t7e(i):i)}function t7e(r){let e=r.startState,t=!0;for(let i of e.facet(PZ)){let a=i(r);if(a===!1){t=!1;break}Array.isArray(a)&&(t=t===!0?a:e7e(t,a))}if(t!==!0){let i,a;if(t===!1)a=r.changes.invertedDesc,i=ni.empty(e.doc.length);else{let o=r.changes.filter(t);i=o.changes,a=o.filtered.mapDesc(o.changes).invertedDesc}r=oi.create(e,i,r.selection&&r.selection.map(a),hr.mapEffects(r.effects,a),r.annotations,r.scrollIntoView)}let n=e.facet(IZ);for(let i=n.length-1;i>=0;i--){let a=n[i](r);a instanceof oi?r=a:Array.isArray(a)&&a.length==1&&a[0]instanceof oi?r=a[0]:r=zZ(e,Np(a),!1)}return r}function r7e(r){let e=r.startState,t=e.facet(LZ),n=r;for(let i=t.length-1;i>=0;i--){let a=t[i](r);a&&Object.keys(a).length&&(n=BZ(n,w3(e,a,r.changes.newLength),!0))}return n==r?r:oi.create(e,r.changes,r.selection,n.effects,n.annotations,n.scrollIntoView)}const n7e=[];function Np(r){return r==null?n7e:Array.isArray(r)?r:[r]}var pn=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(pn||(pn={}));const i7e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let S3;try{S3=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function a7e(r){if(S3)return S3.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||i7e.test(t)))return!0}return!1}function o7e(r){return e=>{if(!/\S/.test(e))return pn.Space;if(a7e(e))return pn.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return pn.Word;return pn.Other}}class br{constructor(e,t,n,i,a,o){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=a,o&&(o._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)S0(this,s<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return S0(this,n),GS(this,n)}update(...e){return zZ(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:i}=t;for(let s of e.effects)s.is(j2.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,u)=>i.set(u,l)),t=null),i.set(s.value.compartment,s.value.extension)):s.is(hr.reconfigure)?(t=null,n=s.value):s.is(hr.appendConfig)&&(t=null,n=Np(n).concat(s.value));let a;t?a=e.startState.values.slice():(t=WS.resolve(n,i,this),a=new br(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(s,l)=>l.reconfigure(s,this),null).values);let o=e.startState.facet(x3)?e.newSelection:e.newSelection.asSingle();new br(t,e.newDoc,o,a,(s,l)=>l.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:at.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),a=[n.range],o=Np(n.effects);for(let s=1;s<t.ranges.length;s++){let l=e(t.ranges[s]),u=this.changes(l.changes),c=u.map(i);for(let d=0;d<s;d++)a[d]=a[d].map(c);let h=i.mapDesc(u,!0);a.push(l.range.map(h)),i=i.compose(c),o=hr.mapEffects(o,c).concat(hr.mapEffects(Np(l.effects),h))}return{changes:i,selection:at.create(a,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ni?e:ni.of(e,this.doc.length,this.facet(br.lineSeparator))}toText(e){return kr.of(e.split(this.facet(br.lineSeparator)||m3))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(S0(this,t),GS(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof Fi&&this.config.address[i.id]!=null&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let a in n)if(Object.prototype.hasOwnProperty.call(e,a)){let o=n[a],s=e[a];i.push(o.init(l=>o.spec.fromJSON(s,l)))}}return br.create({doc:e.doc,selection:at.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=WS.resolve(e.extensions||[],new Map),n=e.doc instanceof kr?e.doc:kr.of((e.doc||"").split(t.staticFacet(br.lineSeparator)||m3)),i=e.selection?e.selection instanceof at?e.selection:at.single(e.selection.anchor,e.selection.head):at.single(0);return kZ(i,n.length),t.staticFacet(x3)||(i=i.asSingle()),new br(t,n,i,t.dynamicSlots.map(()=>null),(a,o)=>o.create(a),null)}get tabSize(){return this.facet(br.tabSize)}get lineBreak(){return this.facet(br.lineSeparator)||`
`}get readOnly(){return this.facet(FZ)}phrase(e,...t){for(let n of this.facet(br.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let a=+(i||1);return!a||a>t.length?n:t[a-1]})),e}languageDataAt(e,t,n=-1){let i=[];for(let a of this.facet(OZ))for(let o of a(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return o7e(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:i}=this.doc.lineAt(e),a=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let l=Oi(t,o,!1);if(a(t.slice(l,o))!=pn.Word)break;o=l}for(;s<i;){let l=Oi(t,s);if(a(t.slice(s,l))!=pn.Word)break;s=l}return o==s?null:at.range(o+n,s+n)}}br.allowMultipleSelections=x3;br.tabSize=Dt.define({combine:r=>r.length?r[0]:4});br.lineSeparator=RZ;br.readOnly=FZ;br.phrases=Dt.define({compare(r,e){let t=Object.keys(r),n=Object.keys(e);return t.length==n.length&&t.every(i=>r[i]==e[i])}});br.languageData=OZ;br.changeFilter=PZ;br.transactionFilter=IZ;br.transactionExtender=LZ;j2.reconfigure=hr.define();function kl(r,e,t={}){let n={};for(let i of r)for(let a of Object.keys(i)){let o=i[a],s=n[a];if(s===void 0)n[a]=o;else if(!(s===o||o===void 0))if(Object.hasOwnProperty.call(t,a))n[a]=t[a](s,o);else throw new Error("Config merge conflict for field "+a)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}class Ad{eq(e){return this==e}range(e,t=e){return M3.create(e,t,this)}}Ad.prototype.startSide=Ad.prototype.endSide=0;Ad.prototype.point=!1;Ad.prototype.mapMode=xa.TrackDel;let M3=class UZ{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new UZ(e,t,n)}};function _3(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class nR{constructor(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,i=0){let a=n?this.to:this.from;for(let o=i,s=a.length;;){if(o==s)return o;let l=o+s>>1,u=a[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return u>=0?o:s;u>=0?s=l:o=l+1}}between(e,t,n,i){for(let a=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,a);a<o;a++)if(i(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,t){let n=[],i=[],a=[],o=-1,s=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,h=this.to[l]+e,d,f;if(c==h){let p=t.mapPos(c,u.startSide,u.mapMode);if(p==null||(d=f=p,u.startSide!=u.endSide&&(f=t.mapPos(c,u.endSide),f<d)))continue}else if(d=t.mapPos(c,u.startSide),f=t.mapPos(h,u.endSide),d>f||d==f&&u.startSide>0&&u.endSide<=0)continue;(f-d||u.endSide-u.startSide)<0||(o<0&&(o=d),u.point&&(s=Math.max(s,f-d)),n.push(u),i.push(d-o),a.push(f-o))}return{mapped:n.length?new nR(i,a,n,s):null,pos:o}}}class Er{constructor(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}static create(e,t,n,i){return new Er(e,t,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:i=0,filterTo:a=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(n&&(t=t.slice().sort(_3)),this.isEmpty)return t.length?Er.of(t):this;let s=new jZ(this,null,-1).goto(0),l=0,u=[],c=new Xc;for(;s.value||l<t.length;)if(l<t.length&&(s.from-t[l].from||s.startSide-t[l].value.startSide)>=0){let h=t[l++];c.addInner(h.from,h.to,h.value)||u.push(h)}else s.rangeIndex==1&&s.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(s.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(s.chunkIndex)||a<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||i>s.to||a<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||u.push(M3.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?Er.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],i=-1;for(let o=0;o<this.chunk.length;o++){let s=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(s,s+l.length);if(u===!1)i=Math.max(i,l.maxPoint),t.push(l),n.push(e.mapPos(s));else if(u===!0){let{mapped:c,pos:h}=l.map(s,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),n.push(h))}}let a=this.nextLayer.map(e);return t.length==0?a:new Er(n,t,a||Er.empty,i)}between(e,t,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let a=this.chunkPos[i],o=this.chunk[i];if(t>=a&&e<=a+o.length&&o.between(a,e-a,t-a,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return Nv.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Nv.from(e).goto(t)}static compare(e,t,n,i,a=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=a),s=t.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=a),l=KU(o,s,n),u=new Lg(o,l,a),c=new Lg(s,l,a);n.iterGaps((h,d,f)=>QU(u,h,c,d,f,i)),n.empty&&n.length==0&&QU(u,0,c,0,0,i)}static eq(e,t,n=0,i){i==null&&(i=999999999);let a=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(a.length!=o.length)return!1;if(!a.length)return!0;let s=KU(a,o),l=new Lg(a,s,0).goto(n),u=new Lg(o,s,0).goto(n);for(;;){if(l.to!=u.to||!E3(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,t,n,i,a=-1){let o=new Lg(e,null,a).goto(t),s=t,l=o.openStart;for(;;){let u=Math.min(o.to,n);if(o.point){let c=o.activeForPoint(o.to),h=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);i.point(s,u,o.point,c,h,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>s&&(i.span(s,u,o.active,l),l=o.openEnd(u));if(o.to>n)return l+(o.point&&o.to>n?1:0);s=o.to,o.next()}}static of(e,t=!1){let n=new Xc;for(let i of e instanceof M3?[e]:t?s7e(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return Er.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=Er.empty;i=i.nextLayer)t=new Er(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}Er.empty=new Er([],[],null,-1);function s7e(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let n=r[t];if(_3(e,n)>0)return r.slice().sort(_3);e=n}return r}Er.empty.nextLayer=Er.empty;class Xc{finishChunk(e){this.chunks.push(new nR(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new Xc)).add(e,t,n)}addInner(e,t,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Er.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Er.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function KU(r,e,t){let n=new Map;for(let a of r)for(let o=0;o<a.chunk.length;o++)a.chunk[o].maxPoint<=0&&n.set(a.chunk[o],a.chunkPos[o]);let i=new Set;for(let a of e)for(let o=0;o<a.chunk.length;o++){let s=n.get(a.chunk[o]);s!=null&&(t?t.mapPos(s):s)==a.chunkPos[o]&&!(t!=null&&t.touchesRange(s,s+a.chunk[o].length))&&i.add(a.chunk[o])}return i}class jZ{constructor(e,t,n,i=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Nv{constructor(e){this.heap=e}static from(e,t=null,n=-1){let i=[];for(let a=0;a<e.length;a++)for(let o=e[a];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&i.push(new jZ(o,t,n,a));return i.length==1?i[0]:new Nv(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)iA(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)iA(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),iA(this.heap,0)}}}function iA(r,e){for(let t=r[e];;){let n=(e<<1)+1;if(n>=r.length)break;let i=r[n];if(n+1<r.length&&i.compare(r[n+1])>=0&&(i=r[n+1],n++),t.compare(i)<0)break;r[n]=t,r[e]=i,e=n}}class Lg{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Nv.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){hx(this.active,e),hx(this.activeTo,e),hx(this.activeRank,e),this.minActive=e9(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:i,rank:a}=this.cursor;for(;t<this.activeRank.length&&(a-this.activeRank[t]||i-this.activeTo[t])>0;)t++;dx(this.active,t,n),dx(this.activeTo,t,i),dx(this.activeRank,t,a),e&&dx(e,t,this.cursor.from),this.minActive=e9(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&hx(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function QU(r,e,t,n,i,a){r.goto(e),t.goto(n);let o=n+i,s=n,l=n-e;for(;;){let u=r.to+l-t.to||r.endSide-t.endSide,c=u<0?r.to+l:t.to,h=Math.min(c,o);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&E3(r.activeForPoint(r.to),t.activeForPoint(t.to))||a.comparePoint(s,h,r.point,t.point):h>s&&!E3(r.active,t.active)&&a.compareRange(s,h,r.active,t.active),c>o)break;s=c,u<=0&&r.next(),u>=0&&t.next()}}function E3(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function hx(r,e){for(let t=e,n=r.length-1;t<n;t++)r[t]=r[t+1];r.pop()}function dx(r,e,t){for(let n=r.length-1;n>=e;n--)r[n+1]=r[n];r[e]=t}function e9(r,e){let t=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||r[i].endSide-r[t].endSide)<0&&(t=i,n=e[i]);return t}function zm(r,e,t=r.length){let n=0;for(let i=0;i<t;)r.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=Oi(r,i));return n}function C3(r,e,t,n){for(let i=0,a=0;;){if(a>=e)return i;if(i==r.length)break;a+=r.charCodeAt(i)==9?t-a%t:1,i=Oi(r,i)}return n===!0?-1:r.length}const A3="ͼ",t9=typeof Symbol>"u"?"__"+A3:Symbol.for(A3),T3=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),r9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Yc{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function a(o,s,l,u){let c=[],h=/^@(\w+)\b/.exec(o[0]),d=h&&h[1]=="keyframes";if(h&&s==null)return l.push(o[0]+";");for(let f in s){let p=s[f];if(/&/.test(f))a(f.split(/,\s*/).map(v=>o.map(y=>v.replace(/&/,y))).reduce((v,y)=>v.concat(y)),p,l);else if(p&&typeof p=="object"){if(!h)throw new RangeError("The value of a property ("+f+") should be a primitive value.");a(i(f),p,c,d)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+p+";")}(c.length||d)&&l.push((n&&!h&&!u?o.map(n):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)a(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=r9[t9]||1;return r9[t9]=e+1,A3+e.toString(36)}static mount(e,t,n){let i=e[T3],a=n&&n.nonce;i?a&&i.setNonce(a):i=new l7e(e,a),i.mount(Array.isArray(t)?t:[t],e)}}let n9=new Map;class l7e{constructor(e,t){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let a=n9.get(n);if(a)return e[T3]=a;this.sheet=new i.CSSStyleSheet,n9.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[T3]=this}mount(e,t){let n=this.sheet,i=0,a=0;for(let o=0;o<e.length;o++){let s=e[o],l=this.modules.indexOf(s);if(l<a&&l>-1&&(this.modules.splice(l,1),a--,l=-1),l==-1){if(this.modules.splice(a++,0,s),n)for(let u=0;u<s.rules.length;u++)n.insertRule(s.rules[u],i++)}else{for(;a<l;)i+=this.modules[a++].rules.length;i+=s.rules.length,a++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let s=t.head||t;this.styleTag.parentNode!=s&&s.insertBefore(this.styleTag,s.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Jc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ov={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},u7e=typeof navigator<"u"&&/Mac/.test(navigator.platform),c7e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ti=0;Ti<10;Ti++)Jc[48+Ti]=Jc[96+Ti]=String(Ti);for(var Ti=1;Ti<=24;Ti++)Jc[Ti+111]="F"+Ti;for(var Ti=65;Ti<=90;Ti++)Jc[Ti]=String.fromCharCode(Ti+32),Ov[Ti]=String.fromCharCode(Ti);for(var aA in Jc)Ov.hasOwnProperty(aA)||(Ov[aA]=Jc[aA]);function h7e(r){var e=u7e&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||c7e&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?Ov:Jc)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Rv(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function D3(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function d7e(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function dw(r,e){if(!e.anchorNode)return!1;try{return D3(r,e.anchorNode)}catch{return!1}}function im(r){return r.nodeType==3?Dd(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function M0(r,e,t,n){return t?i9(r,e,t,n,-1)||i9(r,e,t,n,1):!1}function Td(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function $S(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function i9(r,e,t,n,i){for(;;){if(r==t&&e==n)return!0;if(e==(i<0?0:Au(r))){if(r.nodeName=="DIV")return!1;let a=r.parentNode;if(!a||a.nodeType!=1)return!1;e=Td(r)+(i<0?0:1),r=a}else if(r.nodeType==1){if(r=r.childNodes[e+(i<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=i<0?Au(r):0}else return!1}}function Au(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function H2(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function f7e(r){let e=r.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function HZ(r,e){let t=e.width/r.offsetWidth,n=e.height/r.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-r.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-r.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function p7e(r,e,t,n,i,a,o,s){let l=r.ownerDocument,u=l.defaultView||window;for(let c=r,h=!1;c&&!h;)if(c.nodeType==1){let d,f=c==l.body,p=1,v=1;if(f)d=f7e(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let w=c.getBoundingClientRect();({scaleX:p,scaleY:v}=HZ(c,w)),d={left:w.left,right:w.left+c.clientWidth*p,top:w.top,bottom:w.top+c.clientHeight*v}}let y=0,g=0;if(i=="nearest")e.top<d.top?(g=-(d.top-e.top+o),t>0&&e.bottom>d.bottom+g&&(g=e.bottom-d.bottom+g+o)):e.bottom>d.bottom&&(g=e.bottom-d.bottom+o,t<0&&e.top-g<d.top&&(g=-(d.top+g-e.top+o)));else{let w=e.bottom-e.top,b=d.bottom-d.top;g=(i=="center"&&w<=b?e.top+w/2-b/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-b+o)-d.top}if(n=="nearest"?e.left<d.left?(y=-(d.left-e.left+a),t>0&&e.right>d.right+y&&(y=e.right-d.right+y+a)):e.right>d.right&&(y=e.right-d.right+a,t<0&&e.left<d.left+y&&(y=-(d.left+y-e.left+a))):y=(n=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:n=="start"==s?e.left-a:e.right-(d.right-d.left)+a)-d.left,y||g)if(f)u.scrollBy(y,g);else{let w=0,b=0;if(g){let m=c.scrollTop;c.scrollTop+=g/v,b=(c.scrollTop-m)*v}if(y){let m=c.scrollLeft;c.scrollLeft+=y/p,w=(c.scrollLeft-m)*p}e={left:e.left-w,top:e.top-b,right:e.right-w,bottom:e.bottom-b},w&&Math.abs(w-y)<1&&(n="nearest"),b&&Math.abs(b-g)<1&&(i="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function m7e(r){let e=r.ownerDocument;for(let t=r.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class g7e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?Au(t):0),n,Math.min(e.focusOffset,n?Au(n):0))}set(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i}}let zf=null;function VZ(r){if(r.setActive)return r.setActive();if(zf)return r.focus(zf);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(zf==null?{get preventScroll(){return zf={preventScroll:!0},!0}}:void 0),!zf){zf=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],a=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=a&&(n.scrollLeft=a)}}}let a9;function Dd(r,e,t=e){let n=a9||(a9=document.createRange());return n.setEnd(r,t),n.setStart(r,e),n}function Op(r,e,t,n){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};n&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=n);let a=new KeyboardEvent("keydown",i);a.synthetic=!0,r.dispatchEvent(a);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,r.dispatchEvent(o),a.defaultPrevented||o.defaultPrevented}function v7e(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function qZ(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function y7e(r,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,Au(t));;)if(n){if(t.nodeType!=1)return!1;let i=t.childNodes[n-1];i.contentEditable=="false"?n--:(t=i,n=Au(t))}else{if(t==r)return!0;n=Td(t),t=t.parentNode}}function WZ(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function GZ(r,e){for(let t=r,n=e;;){if(t.nodeType==3&&n>0)return{node:t,offset:n};if(t.nodeType==1&&n>0){if(t.contentEditable=="false")return null;t=t.childNodes[n-1],n=Au(t)}else if(t.parentNode&&!$S(t))n=Td(t),t=t.parentNode;else return null}}function $Z(r,e){for(let t=r,n=e;;){if(t.nodeType==3&&n<t.nodeValue.length)return{node:t,offset:n};if(t.nodeType==1&&n<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[n],n=0}else if(t.parentNode&&!$S(t))n=Td(t)+1,t=t.parentNode;else return null}}class Zi{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new Zi(e.parentNode,Td(e),t)}static after(e,t){return new Zi(e.parentNode,Td(e)+1,t)}}const iR=[];class Yr{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,i=null,a;for(let o of this.children){if(o.flags&7){if(!o.dom&&(a=i?i.nextSibling:n.firstChild)){let s=Yr.get(a);(!s||!s.parent&&s.canReuseDOM(o))&&o.reuseDOM(a)}o.sync(e,t),o.flags&=-8}if(a=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&a!=o.dom&&(t.written=!0),o.dom.parentNode==n)for(;a&&a!=o.dom;)a=o9(a);else n.insertBefore(o.dom,a);i=o.dom}for(a=i?i.nextSibling:n.firstChild,a&&t&&t.node==n&&(t.written=!0);a;)a=o9(a)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let i=Au(e)==0?0:t==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;i==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?i=-1:i=1),e=a}i<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Yr.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,a=0;;i++){let o=this.children[i];if(o.dom==n)return a;a+=o.length+o.breakAfter}}domBoundsAround(e,t,n=0){let i=-1,a=-1,o=-1,s=-1;for(let l=0,u=n,c=n;l<this.children.length;l++){let h=this.children[l],d=u+h.length;if(u<e&&d>t)return h.domBoundsAround(e,t,u);if(d>=e&&i==-1&&(i=l,a=u),u>t&&h.dom.parentNode==this.dom){o=l,s=c;break}c=d,u=d+h.breakAfter}return{from:a,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=iR){this.markDirty();for(let i=e;i<t;i++){let a=this.children[i];a.parent==this&&n.indexOf(a)<0&&a.destroy()}this.children.splice(e,t-e,...n);for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new XZ(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,i,a,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Yr.prototype.breakAfter=0;function o9(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class XZ{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function YZ(r,e,t,n,i,a,o,s,l){let{children:u}=r,c=u.length?u[e]:null,h=a.length?a[a.length-1]:null,d=h?h.breakAfter:o;if(!(e==n&&c&&!o&&!d&&a.length<2&&c.merge(t,i,a.length?h:null,t==0,s,l))){if(n<u.length){let f=u[n];f&&(i<f.length||f.breakAfter&&h!=null&&h.breakAfter)?(e==n&&(f=f.split(i),i=0),!d&&h&&f.merge(0,i,h,!0,0,l)?a[a.length-1]=f:((i||f.children.length&&!f.children[0].length)&&f.merge(0,i,null,!1,0,l),a.push(f))):f!=null&&f.breakAfter&&(h?h.breakAfter=1:o=1),n++}for(c&&(c.breakAfter=o,t>0&&(!o&&a.length&&c.merge(t,c.length,a[0],!1,s,0)?c.breakAfter=a.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,s,0),e++));e<n&&a.length;)if(u[n-1].become(a[a.length-1]))n--,a.pop(),l=a.length?0:s;else if(u[e].become(a[0]))e++,a.shift(),s=a.length?0:l;else break;!a.length&&e&&n<u.length&&!u[e-1].breakAfter&&u[n].merge(0,0,u[e-1],!1,s,l)&&e--,(e<n||a.length)&&r.replaceChildren(e,n,a)}}function JZ(r,e,t,n,i,a){let o=r.childCursor(),{i:s,off:l}=o.findPos(t,1),{i:u,off:c}=o.findPos(e,-1),h=e-t;for(let d of n)h+=d.length;r.length+=h,YZ(r,u,c,s,l,n,0,i,a)}let Ha=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},k3=typeof document<"u"?document:{documentElement:{style:{}}};const N3=/Edge\/(\d+)/.exec(Ha.userAgent),ZZ=/MSIE \d/.test(Ha.userAgent),O3=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ha.userAgent),V2=!!(ZZ||O3||N3),s9=!V2&&/gecko\/(\d+)/i.test(Ha.userAgent),oA=!V2&&/Chrome\/(\d+)/.exec(Ha.userAgent),l9="webkitFontSmoothing"in k3.documentElement.style,KZ=!V2&&/Apple Computer/.test(Ha.vendor),u9=KZ&&(/Mobile\/\w+/.test(Ha.userAgent)||Ha.maxTouchPoints>2);var Ct={mac:u9||/Mac/.test(Ha.platform),windows:/Win/.test(Ha.platform),linux:/Linux|X11/.test(Ha.platform),ie:V2,ie_version:ZZ?k3.documentMode||6:O3?+O3[1]:N3?+N3[1]:0,gecko:s9,gecko_version:s9?+(/Firefox\/(\d+)/.exec(Ha.userAgent)||[0,0])[1]:0,chrome:!!oA,chrome_version:oA?+oA[1]:0,ios:u9,android:/Android\b/.test(Ha.userAgent),webkit:l9,safari:KZ,webkit_version:l9?+(/\bAppleWebKit\/(\d+)/.exec(Ha.userAgent)||[0,0])[1]:0,tabSize:k3.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const b7e=256;class Ds extends Yr{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof Ds)||this.length-(t-e)+n.length>b7e||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Ds(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Zi(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return x7e(this.dom,e,t)}}class Tu extends Yr{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let i of t)i.setParent(this)}setAttrs(e){if(qZ(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,i,a,o){return n&&(!(n instanceof Tu&&n.mark.eq(this.mark))||e&&a<=0||t<this.length&&o<=0)?!1:(JZ(this,e,t,n?n.children.slice():[],a-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,i=-1,a=0;for(let s of this.children){let l=n+s.length;l>e&&t.push(n<e?s.split(e-n):s),i<0&&n>=e&&(i=a),n=l,a++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Tu(this.mark,t,o)}domAtPos(e){return QZ(this,e)}coordsAt(e,t){return tK(this,e,t)}}function x7e(r,e,t){let n=r.nodeValue.length;e>n&&(e=n);let i=e,a=e,o=0;e==0&&t<0||e==n&&t>=0?Ct.chrome||Ct.gecko||(e?(i--,o=1):a<n&&(a++,o=-1)):t<0?i--:a<n&&a++;let s=Dd(r,i,a).getClientRects();if(!s.length)return null;let l=s[(o?o<0:t>=0)?0:s.length-1];return Ct.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(s,u=>u.width)||l),o?H2(l,o<0):l||null}class xc extends Yr{static create(e,t,n){return new xc(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=xc.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,i,a,o){return n&&(!(n instanceof xc)||!this.widget.compare(n.widget)||e>0&&a<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof xc&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return kr.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):kr.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Zi.before(this.dom):Zi.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let i=this.dom.getClientRects(),a=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let s=o?i.length-1:0;a=i[s],!(e>0?s==0:s==i.length-1||a.top<a.bottom);s+=o?-1:1);return H2(a,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class am extends Yr{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof am&&e.side==this.side}split(){return new am(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Zi.before(this.dom):Zi.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return kr.empty}get isHidden(){return!0}}Ds.prototype.children=xc.prototype.children=am.prototype.children=iR;function QZ(r,e){let t=r.dom,{children:n}=r,i=0;for(let a=0;i<n.length;i++){let o=n[i],s=a+o.length;if(!(s==a&&o.getSide()<=0)){if(e>a&&e<s&&o.dom.parentNode==t)return o.domAtPos(e-a);if(e<=a)break;a=s}}for(let a=i;a>0;a--){let o=n[a-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let a=i;a<n.length;a++){let o=n[a];if(o.dom.parentNode==t)return o.domAtPos(0)}return new Zi(t,0)}function eK(r,e,t){let n,{children:i}=r;t>0&&e instanceof Tu&&i.length&&(n=i[i.length-1])instanceof Tu&&n.mark.eq(e.mark)?eK(n,e.children[0],t-1):(i.push(e),e.setParent(r)),r.length+=e.length}function tK(r,e,t){let n=null,i=-1,a=null,o=-1;function s(u,c){for(let h=0,d=0;h<u.children.length&&d<=c;h++){let f=u.children[h],p=d+f.length;p>=c&&(f.children.length?s(f,c-d):(!a||a.isHidden&&t>0)&&(p>c||d==p&&f.getSide()>0)?(a=f,o=c-d):(d<c||d==p&&f.getSide()<0&&!f.isHidden)&&(n=f,i=c-d)),d=p}}s(r,e);let l=(t<0?n:a)||n||a;return l?l.coordsAt(Math.max(0,l==n?i:o),t):w7e(r)}function w7e(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let t=im(e);return t[t.length-1]||null}function R3(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}const c9=Object.create(null);function aR(r,e,t){if(r==e)return!0;r||(r=c9),e||(e=c9);let n=Object.keys(r),i=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let a of n)if(a!=t&&(i.indexOf(a)==-1||r[a]!==e[a]))return!1;return!0}function P3(r,e,t){let n=!1;if(e)for(let i in e)t&&i in t||(n=!0,i=="style"?r.style.cssText="":r.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(n=!0,i=="style"?r.style.cssText=t[i]:r.setAttribute(i,t[i]));return n}function S7e(r){let e=Object.create(null);for(let t=0;t<r.attributes.length;t++){let n=r.attributes[t];e[n.name]=n.value}return e}class Qn extends Yr{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,i,a,o){if(n){if(!(n instanceof Qn))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),JZ(this,e,t,n?n.children.slice():[],a,o),!0}split(e){let t=new Qn;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:i}=this.childPos(e);i&&(t.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let a=n;a<this.children.length;a++)t.append(this.children[a],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){aR(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){eK(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=R3(t,this.attrs||{})),n&&(this.attrs=R3({class:n},this.attrs||{}))}domAtPos(e){return QZ(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(qZ(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(P3(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Yr.get(i)instanceof Tu;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=Yr.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!Ct.ios||!this.children.some(a=>a instanceof Ds))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof Ds)||/[^ -~]/.test(n.text))return null;let i=im(n.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=tK(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,a=n.bottom-n.top;if(Math.abs(a-i.lineHeight)<2&&i.textHeight<a){let o=(a-i.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(e){return!1}covers(){return!0}static find(e,t){for(let n=0,i=0;n<e.children.length;n++){let a=e.children[n],o=i+a.length;if(o>=t){if(a instanceof Qn)return a;if(o>t)break}i=o+a.breakAfter}return null}}class du extends Yr{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,i,a,o){return n&&(!(n instanceof du)||!this.widget.compare(n.widget)||e>0&&a<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Zi.before(this.dom):Zi.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new du(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return iR}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):kr.empty}domBoundsAround(){return null}become(e){return e instanceof du&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class Pu{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ca=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(Ca||(Ca={}));class jt extends Ad{constructor(e,t,n,i){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Sy(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Zc(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:a,end:o}=rK(e,t);n=(a?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new Zc(e,n,i,t,e.widget||null,!0)}static line(e){return new My(e)}static set(e,t=!1){return Er.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}jt.none=Er.empty;class Sy extends jt{constructor(e){let{start:t,end:n}=rK(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof Sy&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&aR(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Sy.prototype.point=!1;class My extends jt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof My&&this.spec.class==e.spec.class&&aR(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}My.prototype.mapMode=xa.TrackBefore;My.prototype.point=!0;class Zc extends jt{constructor(e,t,n,i,a,o){super(t,n,a,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?xa.TrackBefore:xa.TrackAfter:xa.TrackDel}get type(){return this.startSide!=this.endSide?Ca.WidgetRange:this.startSide<=0?Ca.WidgetBefore:Ca.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Zc&&M7e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Zc.prototype.point=!0;function rK(r,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=r;return t==null&&(t=r.inclusive),n==null&&(n=r.inclusive),{start:t??e,end:n??e}}function M7e(r,e){return r==e||!!(r&&e&&r.compare(e))}function I3(r,e,t,n=0){let i=t.length-1;i>=0&&t[i]+n>=r?t[i]=Math.max(t[i],e):t.push(r,e)}class _0{constructor(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof du&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Qn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(fx(new am(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof du)&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:o,done:s}=this.cursor.next(this.skip);if(this.skip=0,s)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(fx(new Ds(this.text.slice(this.textOff,this.textOff+i)),t),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,n,i,a,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Zc){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(n instanceof Zc)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new du(n.widget||om.block,s,n));else{let l=xc.create(n.widget||om.inline,s,s?0:n.startSide),u=this.atCursorPos&&!l.isEditable&&a<=i.length&&(e<t||n.startSide>0),c=!l.isEditable&&(e<t||a>i.length||n.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(h.append(fx(new am(1),i),a),a=i.length+Math.max(0,a-i.length)),h.append(fx(l,i),a),this.atCursorPos=c,this.pendingBuffer=c?e<t||a>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=a)}static build(e,t,n,i,a){let o=new _0(e,t,n,a);return o.openEnd=Er.spans(i,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function fx(r,e){for(let t of e)r=new Tu(t,[r],r.length);return r}class om extends Pu{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}om.inline=new om("span");om.block=new om("div");var un=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(un||(un={}));const kd=un.LTR,oR=un.RTL;function nK(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const _7e=nK("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),E7e=nK("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),L3=Object.create(null),Ys=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);L3[e]=t,L3[t]=-e}function iK(r){return r<=247?_7e[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?E7e[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}const C7e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class wc{get dir(){return this.level%2?oR:kd}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,i){let a=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(a<0||(i!=0?i<0?s.from<t:s.to>t:e[a].level>s.level))&&(a=o)}}if(a<0)throw new RangeError("Index out of range");return a}}function aK(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++){let n=r[t],i=e[t];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!aK(n.inner,i.inner))return!1}return!0}const Xr=[];function A7e(r,e,t,n,i){for(let a=0;a<=n.length;a++){let o=a?n[a-1].to:e,s=a<n.length?n[a].from:t,l=a?256:i;for(let u=o,c=l,h=l;u<s;u++){let d=iK(r.charCodeAt(u));d==512?d=c:d==8&&h==4&&(d=16),Xr[u]=d==4?2:d,d&7&&(h=d),c=d}for(let u=o,c=l,h=l;u<s;u++){let d=Xr[u];if(d==128)u<s-1&&c==Xr[u+1]&&c&24?d=Xr[u]=c:Xr[u]=256;else if(d==64){let f=u+1;for(;f<s&&Xr[f]==64;)f++;let p=u&&c==8||f<t&&Xr[f]==8?h==1?1:8:256;for(let v=u;v<f;v++)Xr[v]=p;u=f-1}else d==8&&h==1&&(Xr[u]=1);c=d,d&7&&(h=d)}}}function T7e(r,e,t,n,i){let a=i==1?2:1;for(let o=0,s=0,l=0;o<=n.length;o++){let u=o?n[o-1].to:e,c=o<n.length?n[o].from:t;for(let h=u,d,f,p;h<c;h++)if(f=L3[d=r.charCodeAt(h)])if(f<0){for(let v=s-3;v>=0;v-=3)if(Ys[v+1]==-f){let y=Ys[v+2],g=y&2?i:y&4?y&1?a:i:0;g&&(Xr[h]=Xr[Ys[v]]=g),s=v;break}}else{if(Ys.length==189)break;Ys[s++]=h,Ys[s++]=d,Ys[s++]=l}else if((p=Xr[h])==2||p==1){let v=p==i;l=v?0:1;for(let y=s-3;y>=0;y-=3){let g=Ys[y+2];if(g&2)break;if(v)Ys[y+2]|=2;else{if(g&4)break;Ys[y+2]|=4}}}}}function D7e(r,e,t,n){for(let i=0,a=n;i<=t.length;i++){let o=i?t[i-1].to:r,s=i<t.length?t[i].from:e;for(let l=o;l<s;){let u=Xr[l];if(u==256){let c=l+1;for(;;)if(c==s){if(i==t.length)break;c=t[i++].to,s=i<t.length?t[i].from:e}else if(Xr[c]==256)c++;else break;let h=a==1,d=(c<e?Xr[c]:n)==1,f=h==d?h?1:2:n;for(let p=c,v=i,y=v?t[v-1].to:r;p>l;)p==y&&(p=t[--v].from,y=v?t[v-1].to:r),Xr[--p]=f;l=c}else a=u,l++}}}function F3(r,e,t,n,i,a,o){let s=n%2?2:1;if(n%2==i%2)for(let l=e,u=0;l<t;){let c=!0,h=!1;if(u==a.length||l<a[u].from){let v=Xr[l];v!=s&&(c=!1,h=v==16)}let d=!c&&s==1?[]:null,f=c?n:n+1,p=l;e:for(;;)if(u<a.length&&p==a[u].from){if(h)break e;let v=a[u];if(!c)for(let y=v.to,g=u+1;;){if(y==t)break e;if(g<a.length&&a[g].from==y)y=a[g++].to;else{if(Xr[y]==s)break e;break}}if(u++,d)d.push(v);else{v.from>l&&o.push(new wc(l,v.from,f));let y=v.direction==kd!=!(f%2);B3(r,y?n+1:n,i,v.inner,v.from,v.to,o),l=v.to}p=v.to}else{if(p==t||(c?Xr[p]!=s:Xr[p]==s))break;p++}d?F3(r,l,p,n+1,i,d,o):l<p&&o.push(new wc(l,p,f)),l=p}else for(let l=t,u=a.length;l>e;){let c=!0,h=!1;if(!u||l>a[u-1].to){let v=Xr[l-1];v!=s&&(c=!1,h=v==16)}let d=!c&&s==1?[]:null,f=c?n:n+1,p=l;e:for(;;)if(u&&p==a[u-1].to){if(h)break e;let v=a[--u];if(!c)for(let y=v.from,g=u;;){if(y==e)break e;if(g&&a[g-1].to==y)y=a[--g].from;else{if(Xr[y-1]==s)break e;break}}if(d)d.push(v);else{v.to<l&&o.push(new wc(v.to,l,f));let y=v.direction==kd!=!(f%2);B3(r,y?n+1:n,i,v.inner,v.from,v.to,o),l=v.from}p=v.from}else{if(p==e||(c?Xr[p-1]!=s:Xr[p-1]==s))break;p--}d?F3(r,p,l,n+1,i,d,o):p<l&&o.push(new wc(p,l,f)),l=p}}function B3(r,e,t,n,i,a,o){let s=e%2?2:1;A7e(r,i,a,n,s),T7e(r,i,a,n,s),D7e(i,a,n,s),F3(r,i,a,e,t,n,o)}function k7e(r,e,t){if(!r)return[new wc(0,0,e==oR?1:0)];if(e==kd&&!t.length&&!C7e.test(r))return oK(r.length);if(t.length)for(;r.length>Xr.length;)Xr[Xr.length]=256;let n=[],i=e==kd?0:1;return B3(r,i,i,t,0,r.length,n),n}function oK(r){return[new wc(0,r,0)]}let sK="";function N7e(r,e,t,n,i){var a;let o=n.head-r.from,s=wc.find(e,o,(a=n.bidiLevel)!==null&&a!==void 0?a:-1,n.assoc),l=e[s],u=l.side(i,t);if(o==u){let d=s+=i?1:-1;if(d<0||d>=e.length)return null;l=e[s=d],o=l.side(!i,t),u=l.side(i,t)}let c=Oi(r.text,o,l.forward(i,t));(c<l.from||c>l.to)&&(c=u),sK=r.text.slice(Math.min(o,c),Math.max(o,c));let h=s==(i?e.length-1:0)?null:e[s+(i?1:-1)];return h&&c==u&&h.level+(i?0:1)<l.level?at.cursor(h.side(!i,t)+r.from,h.forward(i,t)?1:-1,h.level):at.cursor(c+r.from,l.forward(i,t)?-1:1,l.level)}function O7e(r,e,t){for(let n=e;n<t;n++){let i=iK(r.charCodeAt(n));if(i==1)return kd;if(i==2||i==4)return oR}return kd}const lK=Dt.define(),uK=Dt.define(),cK=Dt.define(),hK=Dt.define(),z3=Dt.define(),dK=Dt.define(),fK=Dt.define(),pK=Dt.define({combine:r=>r.some(e=>e)}),mK=Dt.define({combine:r=>r.some(e=>e)}),gK=Dt.define();class Rp{constructor(e,t="nearest",n="nearest",i=5,a=5,o=!1){this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=a,this.isSnapshot=o}map(e){return e.empty?this:new Rp(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Rp(at.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const px=hr.define({map:(r,e)=>r.map(e)}),vK=hr.define();function Ga(r,e,t){let n=r.facet(hK);n.length?n[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const q2=Dt.define({combine:r=>r.length?r[0]:!0});let R7e=0;const Zg=Dt.define();class jn{constructor(e,t,n,i,a){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.extension=a(this)}static define(e,t){const{eventHandlers:n,eventObservers:i,provide:a,decorations:o}=t||{};return new jn(R7e++,e,n,i,s=>{let l=[Zg.of(s)];return o&&l.push(Pv.of(u=>{let c=u.plugin(s);return c?o(c):jt.none})),a&&l.push(a(s)),l})}static fromClass(e,t){return jn.define(n=>new e(n),t)}}class sA{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Ga(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Ga(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){Ga(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const yK=Dt.define(),sR=Dt.define(),Pv=Dt.define(),bK=Dt.define(),lR=Dt.define(),xK=Dt.define();function h9(r,e){let t=r.state.facet(xK);if(!t.length)return t;let n=t.map(a=>a instanceof Function?a(r):a),i=[];return Er.spans(n,e.from,e.to,{point(){},span(a,o,s,l){let u=a-e.from,c=o-e.from,h=i;for(let d=s.length-1;d>=0;d--,l--){let f=s[d].spec.bidiIsolate,p;if(f==null&&(f=O7e(e.text,u,c)),l>0&&h.length&&(p=h[h.length-1]).to==u&&p.direction==f)p.to=c,h=p.inner;else{let v={from:u,to:c,direction:f,inner:[]};h.push(v),h=v.inner}}}}),i}const wK=Dt.define();function SK(r){let e=0,t=0,n=0,i=0;for(let a of r.state.facet(wK)){let o=a(r);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:n,bottom:i}}const Kg=Dt.define();class Yo{constructor(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}join(e){return new Yo(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let i=0,a=0,o=0,s=0;;i++){let l=i==e.length?null:e[i],u=o-s,c=l?l.fromB:1e9;for(;a<t.length&&t[a]<c;){let h=t[a],d=t[a+1],f=Math.max(s,h),p=Math.min(c,d);if(f<=p&&new Yo(f+u,p+u,f,p).addToSet(n),d>c)break;a+=2}if(!l)return n;new Yo(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),o=l.toA,s=l.toB}}}class XS{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=ni.empty(this.startState.doc.length);for(let a of n)this.changes=this.changes.compose(a.changes);let i=[];this.changes.iterChangedRanges((a,o,s,l)=>i.push(new Yo(a,o,s,l))),this.changedRanges=i}static create(e,t,n){return new XS(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class d9 extends Yr{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=jt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Qn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Yo(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!U7e(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let a=i>-1?I7e(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;n=new Yo(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(n.slice())}this.hasComposition=a?{from:a.range.fromB,to:a.range.toB}:null,(Ct.ie||Ct.chrome)&&!a&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,s=this.updateDeco(),l=B7e(o,s,e.changes);return n=Yo.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,a),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ct.chrome||Ct.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof du&&o.widget instanceof f9&&a.push(o.dom);i.updateGaps(a)}updateChildren(e,t,n){let i=n?n.range.addToSet(e.slice()):e,a=this.childCursor(t);for(let o=i.length-1;;o--){let s=o>=0?i[o]:null;if(!s)break;let{fromA:l,toA:u,fromB:c,toB:h}=s,d,f,p,v;if(n&&n.range.fromB<h&&n.range.toB>c){let m=_0.build(this.view.state.doc,c,n.range.fromB,this.decorations,this.dynamicDecorationMap),x=_0.build(this.view.state.doc,n.range.toB,h,this.decorations,this.dynamicDecorationMap);f=m.breakAtStart,p=m.openStart,v=x.openEnd;let S=this.compositionView(n);x.breakAtStart?S.breakAfter=1:x.content.length&&S.merge(S.length,S.length,x.content[0],!1,x.openStart,0)&&(S.breakAfter=x.content[0].breakAfter,x.content.shift()),m.content.length&&S.merge(0,0,m.content[m.content.length-1],!0,0,m.openEnd)&&m.content.pop(),d=m.content.concat(S).concat(x.content)}else({content:d,breakAtStart:f,openStart:p,openEnd:v}=_0.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:y,off:g}=a.findPos(u,1),{i:w,off:b}=a.findPos(l,-1);YZ(this,w,b,y,g,d,f,p,v)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let n of t.effects)n.is(vK)&&(this.editContextFormatting=n.value)}compositionView(e){let t=new Ds(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Tu(i,[t],t.length);let n=new Qn;return n.append(t,0),n}fixCompositionDOM(e){let t=(a,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let s=Yr.get(a);s&&s!=o&&(s.dom=null),o.setDOM(a)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];t(e.line,i);for(let a=e.marks.length-1;a>=-1;a--)n=i.childPos(n.off,1),i=i.children[n.i],t(a>=0?e.marks[a].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,a=!i&&dw(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||t||a))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(s.anchor)),u=s.empty?l:this.moveToLine(this.domAtPos(s.head));if(Ct.gecko&&s.empty&&!this.hasComposition&&P7e(l)){let h=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(h,l.node.childNodes[l.offset]||null)),l=u=new Zi(h,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!M0(l.node,l.offset,c.anchorNode,c.anchorOffset)||!M0(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,s))&&(this.view.observer.ignore(()=>{Ct.android&&Ct.chrome&&this.dom.contains(c.focusNode)&&z7e(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Rv(this.view.root);if(h)if(s.empty){if(Ct.gecko){let d=L7e(l.node,l.offset);if(d&&d!=3){let f=(d==1?GZ:$Z)(l.node,l.offset);f&&(l=new Zi(f.node,f.offset))}}h.collapse(l.node,l.offset),s.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=s.bidiLevel)}else if(h.extend){h.collapse(l.node,l.offset);try{h.extend(u.node,u.offset)}catch{}}else{let d=document.createRange();s.anchor>s.head&&([l,u]=[u,l]),d.setEnd(u.node,u.offset),d.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(d)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Zi(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Zi(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&M0(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=Rv(e.root),{anchorNode:i,anchorOffset:a}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=Qn.find(this,t.head);if(!o)return;let s=o.posAtStart;if(t.head==s||t.head==s+o.length)return;let l=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&n.collapse(i,a)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let i=e.offset;!n&&i<t.childNodes.length;i++){let a=Yr.get(t.childNodes[i]);a instanceof Qn&&(n=a.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let a=Yr.get(t.childNodes[i]);a instanceof Qn&&(n=a.domAtPos(a.length))}return n?new Zi(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=Yr.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(n<i.length||i instanceof Qn)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,i=0;for(let a=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],l=a-s.breakAfter,u=l-s.length;if(l<e)break;if(u<=e&&(u<e||s.covers(-1))&&(l>e||s.covers(1))&&(!n||s instanceof Qn&&!(n instanceof Qn&&t>=0)))n=s,i=u;else if(n&&u==e&&l==e&&s instanceof du&&Math.abs(t)<2){if(s.deco.startSide<0)break;o&&(n=null)}a=u}return n?n.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Qn))return null;for(;i.children.length;){let{i:s,off:l}=i.childPos(n,1);for(;;s++){if(s==i.children.length)return null;if((i=i.children[s]).length)break}n=l}if(!(i instanceof Ds))return null;let a=Oi(i.text,n);if(a==n)return null;let o=Dd(i.dom,n,a).getClientRects();for(let s=0;s<o.length;s++){let l=o[s];if(s==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:i}=e,a=this.view.contentDOM.clientWidth,o=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,l=this.view.textDirection==un.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],d=u+h.length;if(d>i)break;if(u>=n){let f=h.dom.getBoundingClientRect();if(t.push(f.height),o){let p=h.dom.lastChild,v=p?im(p):[];if(v.length){let y=v[v.length-1],g=l?y.right-f.left:f.right-y.left;g>s&&(s=g,this.minWidth=a,this.minWidthFrom=u,this.minWidthTo=d)}}}u=d+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?un.RTL:un.LTR}measureTextSize(){for(let a of this.children)if(a instanceof Qn){let o=a.measureTextSize();if(o)return o}let e=document.createElement("div"),t,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let a=im(e.firstChild)[0];t=e.getBoundingClientRect().height,n=a?a.width/27:7,i=a?a.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new XZ(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,i=0;;i++){let a=i==t.viewports.length?null:t.viewports[i],o=a?a.from-1:this.length;if(o>n){let s=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(jt.replace({widget:new f9(s),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!a)break;n=a.to+1}return jt.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Pv).map(a=>(this.dynamicDecorationMap[e++]=typeof a=="function")?a(this.view):a),n=!1,i=this.view.state.facet(bK).map((a,o)=>{let s=typeof a=="function";return s&&(n=!0),s?a(this.view):a});for(i.length&&(this.dynamicDecorationMap[e++]=n,t.push(Er.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(gK))try{if(u(this.view,e.range,e))return!0}catch(c){Ga(this.view.state,c,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!n)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let a=SK(this.view),o={left:n.left-a.left,top:n.top-a.top,right:n.right+a.right,bottom:n.bottom+a.bottom},{offsetWidth:s,offsetHeight:l}=this.view.scrollDOM;p7e(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==un.LTR)}}function P7e(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}class f9 extends Pu{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function MK(r,e){let t=r.observer.selectionRange;if(!t.focusNode)return null;let n=GZ(t.focusNode,t.focusOffset),i=$Z(t.focusNode,t.focusOffset),a=n||i;if(i&&n&&i.node!=n.node){let s=Yr.get(i.node);if(!s||s instanceof Ds&&s.text!=i.node.nodeValue)a=i;else if(r.docView.lastCompositionAfterCursor){let l=Yr.get(n.node);!l||l instanceof Ds&&l.text!=n.node.nodeValue||(a=i)}}if(r.docView.lastCompositionAfterCursor=a!=n,!a)return null;let o=e-a.offset;return{from:o,to:o+a.node.nodeValue.length,node:a.node}}function I7e(r,e,t){let n=MK(r,t);if(!n)return null;let{node:i,from:a,to:o}=n,s=i.nodeValue;if(/[\n\r]/.test(s)||r.state.doc.sliceString(n.from,n.to)!=s)return null;let l=e.invertedDesc,u=new Yo(l.mapPos(a),l.mapPos(o),a,o),c=[];for(let h=i.parentNode;;h=h.parentNode){let d=Yr.get(h);if(d instanceof Tu)c.push({node:h,deco:d.mark});else{if(d instanceof Qn||h.nodeName=="DIV"&&h.parentNode==r.contentDOM)return{range:u,text:i,marks:c,line:h};if(h!=r.contentDOM)c.push({node:h,deco:new Sy({inclusive:!0,attributes:S7e(h),tagName:h.tagName.toLowerCase()})});else return null}}}function L7e(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let F7e=class{constructor(){this.changes=[]}compareRange(r,e){I3(r,e,this.changes)}comparePoint(r,e){I3(r,e,this.changes)}};function B7e(r,e,t){let n=new F7e;return Er.compare(r,e,t,n),n.changes}function z7e(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function U7e(r,e){let t=!1;return e&&r.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(t=!0)}),t}function j7e(r,e,t=1){let n=r.charCategorizer(e),i=r.doc.lineAt(e),a=e-i.from;if(i.length==0)return at.cursor(e);a==0?t=1:a==i.length&&(t=-1);let o=a,s=a;t<0?o=Oi(i.text,a,!1):s=Oi(i.text,a);let l=n(i.text.slice(o,s));for(;o>0;){let u=Oi(i.text,o,!1);if(n(i.text.slice(u,o))!=l)break;o=u}for(;s<i.length;){let u=Oi(i.text,s);if(n(i.text.slice(s,u))!=l)break;s=u}return at.range(o+i.from,s+i.from)}function H7e(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function V7e(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function lA(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function p9(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function m9(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function U3(r,e,t){let n,i,a,o,s=!1,l,u,c,h;for(let p=r.firstChild;p;p=p.nextSibling){let v=im(p);for(let y=0;y<v.length;y++){let g=v[y];i&&lA(i,g)&&(g=p9(m9(g,i.bottom),i.top));let w=H7e(e,g),b=V7e(t,g);if(w==0&&b==0)return p.nodeType==3?g9(p,e,t):U3(p,e,t);if(!n||o>b||o==b&&a>w){n=p,i=g,a=w,o=b;let m=b?t<g.top?-1:1:w?e<g.left?-1:1:0;s=!m||(m>0?y<v.length-1:y>0)}w==0?t>g.bottom&&(!c||c.bottom<g.bottom)?(l=p,c=g):t<g.top&&(!h||h.top>g.top)&&(u=p,h=g):c&&lA(c,g)?c=m9(c,g.bottom):h&&lA(h,g)&&(h=p9(h,g.top))}}if(c&&c.bottom>=t?(n=l,i=c):h&&h.top<=t&&(n=u,i=h),!n)return{node:r,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(n.nodeType==3)return g9(n,d,t);if(s&&n.contentEditable!="false")return U3(n,d,t);let f=Array.prototype.indexOf.call(r.childNodes,n)+(e>=(i.left+i.right)/2?1:0);return{node:r,offset:f}}function g9(r,e,t){let n=r.nodeValue.length,i=-1,a=1e9,o=0;for(let s=0;s<n;s++){let l=Dd(r,s,s+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let h=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<a){let d=e>=(c.left+c.right)/2,f=d;if((Ct.chrome||Ct.gecko)&&Dd(r,s).getBoundingClientRect().left==c.right&&(f=!d),h<=0)return{node:r,offset:s+(f?1:0)};i=s+(f?1:0),a=h}}}return{node:r,offset:i>-1?i:o>0?r.nodeValue.length:0}}function _K(r,e,t,n=-1){var i,a;let o=r.contentDOM.getBoundingClientRect(),s=o.top+r.viewState.paddingTop,l,{docHeight:u}=r.viewState,{x:c,y:h}=e,d=h-s;if(d<0)return 0;if(d>u)return r.state.doc.length;for(let m=r.viewState.heightOracle.textHeight/2,x=!1;l=r.elementAtHeight(d),l.type!=Ca.Text;)for(;d=n>0?l.bottom+m:l.top-m,!(d>=0&&d<=u);){if(x)return t?null:0;x=!0,n=-n}h=s+d;let f=l.from;if(f<r.viewport.from)return r.viewport.from==0?0:t?null:v9(r,o,l,c,h);if(f>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:t?null:v9(r,o,l,c,h);let p=r.dom.ownerDocument,v=r.root.elementFromPoint?r.root:p,y=v.elementFromPoint(c,h);y&&!r.contentDOM.contains(y)&&(y=null),y||(c=Math.max(o.left+1,Math.min(o.right-1,c)),y=v.elementFromPoint(c,h),y&&!r.contentDOM.contains(y)&&(y=null));let g,w=-1;if(y&&((i=r.docView.nearest(y))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let m=p.caretPositionFromPoint(c,h);m&&({offsetNode:g,offset:w}=m)}else if(p.caretRangeFromPoint){let m=p.caretRangeFromPoint(c,h);m&&({startContainer:g,startOffset:w}=m,(!r.contentDOM.contains(g)||Ct.safari&&q7e(g,w,c)||Ct.chrome&&W7e(g,w,c))&&(g=void 0))}}if(!g||!r.docView.dom.contains(g)){let m=Qn.find(r.docView,f);if(!m)return d>l.top+l.height/2?l.to:l.from;({node:g,offset:w}=U3(m.dom,c,h))}let b=r.docView.nearest(g);if(!b)return null;if(b.isWidget&&((a=b.dom)===null||a===void 0?void 0:a.nodeType)==1){let m=b.dom.getBoundingClientRect();return e.y<m.top||e.y<=m.bottom&&e.x<=(m.left+m.right)/2?b.posAtStart:b.posAtEnd}else return b.localPosFromDOM(g,w)+b.posAtStart}function v9(r,e,t,n,i){let a=Math.round((n-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let s=r.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(r.defaultLineHeight-s)*.5)/s);a+=l*r.viewState.heightOracle.lineLength}let o=r.state.sliceDoc(t.from,t.to);return t.from+C3(o,a,r.state.tabSize)}function q7e(r,e,t){let n;if(r.nodeType!=3||e!=(n=r.nodeValue.length))return!1;for(let i=r.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Dd(r,n-1,n).getBoundingClientRect().left>t}function W7e(r,e,t){if(e!=0)return!1;for(let i=r;;){let a=i.parentNode;if(!a||a.nodeType!=1||a.firstChild!=i)return!1;if(a.classList.contains("cm-line"))break;i=a}let n=r.nodeType==1?r.getBoundingClientRect():Dd(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function j3(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type)){for(let n of t.type)if(n.to>e||n.to==e&&(n.to==t.to||n.type==Ca.Text))return n}return t}function G7e(r,e,t,n){let i=j3(r,e.head),a=!n||i.type!=Ca.Text||!(r.lineWrapping||i.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(a){let o=r.dom.getBoundingClientRect(),s=r.textDirectionAt(i.from),l=r.posAtCoords({x:t==(s==un.LTR)?o.right-1:o.left+1,y:(a.top+a.bottom)/2});if(l!=null)return at.cursor(l,t?-1:1)}return at.cursor(t?i.to:i.from,t?-1:1)}function y9(r,e,t,n){let i=r.state.doc.lineAt(e.head),a=r.bidiSpans(i),o=r.textDirectionAt(i.from);for(let s=e,l=null;;){let u=N7e(i,a,o,s,t),c=sK;if(!u){if(i.number==(t?r.state.doc.lines:1))return s;c=`
`,i=r.state.doc.line(i.number+(t?1:-1)),a=r.bidiSpans(i),u=r.visualLineSide(i,!t)}if(l){if(!l(c))return s}else{if(!n)return u;l=n(c)}s=u}}function $7e(r,e,t){let n=r.state.charCategorizer(e),i=n(t);return a=>{let o=n(a);return i==pn.Space&&(i=o),i==o}}function X7e(r,e,t,n){let i=e.head,a=t?1:-1;if(i==(t?r.state.doc.length:0))return at.cursor(i,e.assoc);let o=e.goalColumn,s,l=r.contentDOM.getBoundingClientRect(),u=r.coordsAtPos(i,e.assoc||-1),c=r.documentTop;if(u)o==null&&(o=u.left-l.left),s=a<0?u.top:u.bottom;else{let f=r.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,r.defaultCharacterWidth*(i-f.from))),s=(a<0?f.top:f.bottom)+c}let h=l.left+o,d=n??r.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=s+(d+f)*a,v=_K(r,{x:h,y:p},!1,a);if(p<l.top||p>l.bottom||(a<0?v<i:v>i)){let y=r.docView.coordsForChar(v),g=!y||p<y.top?-1:1;return at.cursor(v,g,void 0,o)}}}function fw(r,e,t){for(;;){let n=0;for(let i of r)i.between(e-1,e+1,(a,o,s)=>{if(e>a&&e<o){let l=n||t||(e-a<o-e?-1:1);e=l<0?a:o,n=l}});if(!n)return e}}function uA(r,e,t){let n=fw(r.state.facet(lR).map(i=>i(r)),t.from,e.head>t.from?-1:1);return n==t.from?t:at.cursor(n,n<t.from?1:-1)}class Y7e{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ct.safari&&e.contentDOM.addEventListener("input",()=>null),Ct.gecko&&hje(e.contentDOM.ownerDocument)}handleEvent(e){!nje(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,t);for(let i of n.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=J7e(e),n=this.handlers,i=this.view.contentDOM;for(let a in t)if(a!="scroll"){let o=!t[a].handlers.length,s=n[a];s&&o!=!s.handlers.length&&(i.removeEventListener(a,this.handleEvent),s=null),s||i.addEventListener(a,this.handleEvent,{passive:o})}for(let a in n)a!="scroll"&&!t[a]&&i.removeEventListener(a,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&CK.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ct.android&&Ct.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Ct.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=EK.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||Z7e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Op(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ct.safari&&!Ct.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function b9(r,e){return(t,n)=>{try{return e.call(r,n,t)}catch(i){Ga(t.state,i)}}}function J7e(r){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of r){let i=n.spec;if(i&&i.domEventHandlers)for(let a in i.domEventHandlers){let o=i.domEventHandlers[a];o&&t(a).handlers.push(b9(n.value,o))}if(i&&i.domEventObservers)for(let a in i.domEventObservers){let o=i.domEventObservers[a];o&&t(a).observers.push(b9(n.value,o))}}for(let n in ks)t(n).handlers.push(ks[n]);for(let n in rs)t(n).observers.push(rs[n]);return e}const EK=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Z7e="dthko",CK=[16,17,18,20,91,92,224,225],mx=6;function gx(r){return Math.max(0,r)*.7+8}function K7e(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class Q7e{constructor(e,t,n,i){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=m7e(e.contentDOM),this.atoms=e.state.facet(lR).map(o=>o(e));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(br.allowMultipleSelections)&&eje(e,t),this.dragging=rje(e,t)&&kK(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&K7e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,a=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=SK(this.view);e.clientX-o.left<=a.left+mx?n=-gx(a.left-e.clientX):e.clientX+o.right>=a.right-mx&&(n=gx(e.clientX-a.right)),e.clientY-o.top<=a.top+mx?i=-gx(a.top-e.clientY):e.clientY+o.bottom>=a.bottom-mx&&(i=gx(e.clientY-a.bottom)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],a=null;if(i.empty){let o=fw(this.atoms,i.from,0);o!=i.from&&(a=at.cursor(o,-1))}else{let o=fw(this.atoms,i.from,-1),s=fw(this.atoms,i.to,1);(o!=i.from||s!=i.to)&&(a=at.range(i.from==i.anchor?o:s,i.from==i.head?o:s))}a&&(t||(t=e.ranges.slice()),t[n]=a)}return t?at.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function eje(r,e){let t=r.state.facet(lK);return t.length?t[0](e):Ct.mac?e.metaKey:e.ctrlKey}function tje(r,e){let t=r.state.facet(uK);return t.length?t[0](e):Ct.mac?!e.altKey:!e.ctrlKey}function rje(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let n=Rv(r.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let a=0;a<i.length;a++){let o=i[a];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function nje(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=Yr.get(t))&&n.ignoreEvent(e))return!1;return!0}const ks=Object.create(null),rs=Object.create(null),AK=Ct.ie&&Ct.ie_version<15||Ct.ios&&Ct.webkit_version<604;function ije(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),TK(r,t.value)},50)}function TK(r,e){let{state:t}=r,n,i=1,a=t.toText(e),o=a.lines==t.selection.ranges.length;if(H3!=null&&t.selection.ranges.every(s=>s.empty)&&H3==a.toString()){let s=-1;n=t.changeByRange(l=>{let u=t.doc.lineAt(l.from);if(u.from==s)return{range:l};s=u.from;let c=t.toText((o?a.line(i++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:c},range:at.cursor(l.from+c.length)}})}else o?n=t.changeByRange(s=>{let l=a.line(i++);return{changes:{from:s.from,to:s.to,insert:l.text},range:at.cursor(s.from+l.length)}}):n=t.replaceSelection(a);r.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}rs.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};ks.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&r.inputState.tabFocusMode!=0&&(r.inputState.tabFocusMode=Date.now()+2e3),!1);rs.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};rs.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};ks.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of r.state.facet(cK))if(t=n(r,e),t)break;if(!t&&e.button==0&&(t=sje(r,e)),t){let n=!r.hasFocus;r.inputState.startMouseSelection(new Q7e(r,e,t,n)),n&&r.observer.ignore(()=>{VZ(r.contentDOM);let a=r.root.activeElement;a&&!a.contains(r.contentDOM)&&a.blur()});let i=r.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function x9(r,e,t,n){if(n==1)return at.cursor(e,t);if(n==2)return j7e(r.state,e,t);{let i=Qn.find(r.docView,e),a=r.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:a.from,s=i?i.posAtEnd:a.to;return s<r.state.doc.length&&s==a.to&&s++,at.range(o,s)}}let DK=(r,e)=>r>=e.top&&r<=e.bottom,w9=(r,e,t)=>DK(e,t)&&r>=t.left&&r<=t.right;function aje(r,e,t,n){let i=Qn.find(r.docView,e);if(!i)return 1;let a=e-i.posAtStart;if(a==0)return 1;if(a==i.length)return-1;let o=i.coordsAt(a,-1);if(o&&w9(t,n,o))return-1;let s=i.coordsAt(a,1);return s&&w9(t,n,s)?1:o&&DK(n,o)?-1:1}function S9(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:aje(r,t,e.clientX,e.clientY)}}const oje=Ct.ie&&Ct.ie_version<=11;let M9=null,_9=0,E9=0;function kK(r){if(!oje)return r.detail;let e=M9,t=E9;return M9=r,E9=Date.now(),_9=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(_9+1)%3:1}function sje(r,e){let t=S9(r,e),n=kK(e),i=r.state.selection;return{update(a){a.docChanged&&(t.pos=a.changes.mapPos(t.pos),i=i.map(a.changes))},get(a,o,s){let l=S9(r,a),u,c=x9(r,l.pos,l.bias,n);if(t.pos!=l.pos&&!o){let h=x9(r,t.pos,t.bias,n),d=Math.min(h.from,c.from),f=Math.max(h.to,c.to);c=d<c.from?at.range(d,f):at.range(f,d)}return o?i.replaceRange(i.main.extend(c.from,c.to)):s&&n==1&&i.ranges.length>1&&(u=lje(i,l.pos))?u:s?i.addRange(c):at.create([c])}}}function lje(r,e){for(let t=0;t<r.ranges.length;t++){let{from:n,to:i}=r.ranges[t];if(n<=e&&i>=e)return at.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}return null}ks.dragstart=(r,e)=>{let{selection:{main:t}}=r.state;if(e.target.draggable){let i=r.docView.nearest(e.target);if(i&&i.isWidget){let a=i.posAtStart,o=a+i.length;(a>=t.to||o<=t.from)&&(t=at.range(a,o))}}let{inputState:n}=r;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};ks.dragend=r=>(r.inputState.draggedContent=null,!1);function C9(r,e,t,n){if(!t)return;let i=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:a}=r.inputState,o=n&&a&&tje(r,e)?{from:a.from,to:a.to}:null,s={from:i,insert:t},l=r.state.changes(o?[o,s]:s);r.focus(),r.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),r.inputState.draggedContent=null}ks.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),i=0,a=()=>{++i==t.length&&C9(r,e,n.filter(o=>o!=null).join(r.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let s=new FileReader;s.onerror=a,s.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(s.result)||(n[o]=s.result),a()},s.readAsText(t[o])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return C9(r,e,n,!0),!0}return!1};ks.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let t=AK?null:e.clipboardData;return t?(TK(r,t.getData("text/plain")||t.getData("text/uri-list")),!0):(ije(r),!1)};function uje(r,e){let t=r.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),r.focus()},50)}function cje(r){let e=[],t=[],n=!1;for(let i of r.selection.ranges)i.empty||(e.push(r.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:a}of r.selection.ranges){let o=r.doc.lineAt(a);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(r.doc.length,o.to+1)})),i=o.number}n=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:n}}let H3=null;ks.copy=ks.cut=(r,e)=>{let{text:t,ranges:n,linewise:i}=cje(r.state);if(!t&&!i)return!1;H3=i?t:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let a=AK?null:e.clipboardData;return a?(a.clearData(),a.setData("text/plain",t),!0):(uje(r,t),!1)};const NK=Dl.define();function OK(r,e){let t=[];for(let n of r.facet(fK)){let i=n(r,e);i&&t.push(i)}return t?r.update({effects:t,annotations:NK.of(!0)}):null}function RK(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let t=OK(r.state,e);t?r.dispatch(t):r.update([])}},10)}rs.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),RK(r)};rs.blur=r=>{r.observer.clearSelectionRange(),RK(r)};rs.compositionstart=rs.compositionupdate=r=>{r.observer.editContext||(r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0))};rs.compositionend=r=>{r.observer.editContext||(r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,Ct.chrome&&Ct.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50))};rs.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};ks.beforeinput=(r,e)=>{var t;let n;if(Ct.chrome&&Ct.android&&(n=EK.find(i=>i.inputType==e.inputType))&&(r.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>i+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return Ct.ios&&e.inputType=="deleteContentForward"&&r.observer.flushSoon(),Ct.safari&&e.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>rs.compositionend(r,e),20),!1};const A9=new Set;function hje(r){A9.has(r)||(A9.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const T9=["pre-wrap","normal","pre-line","break-spaces"];class dje{constructor(e){this.lineWrapping=e,this.doc=kr.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return T9.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,n,i,a,o){let s=T9.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=a,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class fje{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class al{constructor(e,t,n,i,a){this.from=e,this.length=t,this.top=n,this.height=i,this._content=a}get type(){return typeof this._content=="number"?Ca.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Zc?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new al(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var on=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(on||(on={}));const pw=.001;class Aa{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>pw&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return Aa.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,i){let a=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:l,toA:u,fromB:c,toB:h}=i[s],d=a.lineAt(l,on.ByPosNoHeight,n.setDoc(t),0,0),f=d.to>=u?d:a.lineAt(u,on.ByPosNoHeight,n,0,0);for(h+=f.to-u,u=f.to;s>0&&d.from<=i[s-1].toA;)l=i[s-1].fromA,c=i[s-1].fromB,s--,l<d.from&&(d=a.lineAt(l,on.ByPosNoHeight,n,0,0));c+=d.from-l,l=d.from;let p=uR.build(n.setDoc(o),e,c,h);a=a.replace(l,u,p)}return a.updateHeight(n,0)}static empty(){return new uo(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,i=0,a=0;for(;;)if(t==n)if(i>a*2){let s=e[t-1];s.break?e.splice(--t,1,s.left,null,s.right):e.splice(--t,1,s.left,s.right),n+=1+s.break,i-=s.size}else if(a>i*2){let s=e[n];s.break?e.splice(n,1,s.left,null,s.right):e.splice(n,1,s.left,s.right),n+=2+s.break,a-=s.size}else break;else if(i<a){let s=e[t++];s&&(i+=s.size)}else{let s=e[--n];s&&(a+=s.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,n++),new pje(Aa.of(e.slice(0,t)),o,Aa.of(e.slice(n)))}}Aa.prototype.size=1;class PK extends Aa{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,i){return new al(i,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,i,a){return this.blockAt(0,n,i,a)}forEachLine(e,t,n,i,a,o){e<=a+this.length&&t>=a&&o(this.blockAt(0,n,i,a))}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class uo extends PK{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,i){return new al(i,this.length,n,this.height,this.breaks)}replace(e,t,n){let i=n[0];return n.length==1&&(i instanceof uo||i instanceof _i&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof _i?i=new uo(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Aa.of(n)}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class _i extends Aa{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,a=i-n+1,o,s=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*a);o=l/a,this.length>a+1&&(s=(this.height-l)/(this.length-a-1))}else o=this.height/a;return{firstLine:n,lastLine:i,perLine:o,perChar:s}}blockAt(e,t,n,i){let{firstLine:a,lastLine:o,perLine:s,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let u=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),c=t.doc.lineAt(u),h=s+c.length*l,d=Math.max(n,e-h/2);return new al(c.from,c.length,d,h,0)}else{let u=Math.max(0,Math.min(o-a,Math.floor((e-n)/s))),{from:c,length:h}=t.doc.line(a+u);return new al(c,h,n+s*u,s,0)}}lineAt(e,t,n,i,a){if(t==on.ByHeight)return this.blockAt(e,n,i,a);if(t==on.ByPosNoHeight){let{from:f,to:p}=n.doc.lineAt(e);return new al(f,p-f,0,0,0)}let{firstLine:o,perLine:s,perChar:l}=this.heightMetrics(n,a),u=n.doc.lineAt(e),c=s+u.length*l,h=u.number-o,d=i+s*h+l*(u.from-a-h);return new al(u.from,u.length,Math.max(i,Math.min(d,i+this.height-c)),c,0)}forEachLine(e,t,n,i,a,o){e=Math.max(e,a),t=Math.min(t,a+this.length);let{firstLine:s,perLine:l,perChar:u}=this.heightMetrics(n,a);for(let c=e,h=i;c<=t;){let d=n.doc.lineAt(c);if(c==e){let p=d.number-s;h+=l*p+u*(e-a-p)}let f=l+u*d.length;o(new al(d.from,d.length,h,f,0)),h+=f,c=d.to+1}}replace(e,t,n){let i=this.length-t;if(i>0){let a=n[n.length-1];a instanceof _i?n[n.length-1]=new _i(a.length+i):n.push(null,new _i(i-1))}if(e>0){let a=n[0];a instanceof _i?n[0]=new _i(e+a.length):n.unshift(new _i(e-1),null)}return Aa.of(n)}decomposeLeft(e,t){t.push(new _i(e-1),null)}decomposeRight(e,t){t.push(null,new _i(this.length-e-1))}updateHeight(e,t=0,n=!1,i){let a=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],s=Math.max(t,i.from),l=-1;for(i.from>t&&o.push(new _i(i.from-t-1).updateHeight(e,t));s<=a&&i.more;){let c=e.doc.lineAt(s).length;o.length&&o.push(null);let h=i.heights[i.index++];l==-1?l=h:Math.abs(h-l)>=pw&&(l=-2);let d=new uo(c,h);d.outdated=!1,o.push(d),s+=c+1}s<=a&&o.push(null,new _i(a-s).updateHeight(e,s));let u=Aa.of(o);return(l<0||Math.abs(u.height-this.height)>=pw||Math.abs(l-this.heightMetrics(e,t).perLine)>=pw)&&(e.heightChanged=!0),u}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class pje extends Aa{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,i){let a=n+this.left.height;return e<a?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,a,i+this.left.length+this.break)}lineAt(e,t,n,i,a){let o=i+this.left.height,s=a+this.left.length+this.break,l=t==on.ByHeight?e<o:e<s,u=l?this.left.lineAt(e,t,n,i,a):this.right.lineAt(e,t,n,o,s);if(this.break||(l?u.to<s:u.from>s))return u;let c=t==on.ByPosNoHeight?on.ByPosNoHeight:on.ByPos;return l?u.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,i,a).join(u)}forEachLine(e,t,n,i,a,o){let s=i+this.left.height,l=a+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,n,i,a,o),t>=l&&this.right.forEachLine(e,t,n,s,l,o);else{let u=this.lineAt(l,on.ByPos,n,i,a);e<u.from&&this.left.forEachLine(e,u.from-1,n,i,a,o),u.to>=e&&u.from<=t&&o(u),t>u.to&&this.right.forEachLine(u.to+1,t,n,s,l,o)}}replace(e,t,n){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));let a=[];e>0&&this.decomposeLeft(e,a);let o=a.length;for(let s of n)a.push(s);if(e>0&&D9(a,o-1),t<this.length){let s=a.length;this.decomposeRight(t,a),D9(a,s)}return Aa.of(a)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Aa.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,i){let{left:a,right:o}=this,s=t+a.length+this.break,l=null;return i&&i.from<=t+a.length&&i.more?l=a=a.updateHeight(e,t,n,i):a.updateHeight(e,t,n),i&&i.from<=s+o.length&&i.more?l=o=o.updateHeight(e,s,n,i):o.updateHeight(e,s,n),l?this.balanced(a,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function D9(r,e){let t,n;r[e]==null&&(t=r[e-1])instanceof _i&&(n=r[e+1])instanceof _i&&r.splice(e-1,3,new _i(t.length+1+n.length))}const mje=5;class uR{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof uo?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new uo(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,a=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new PK(o,i,n)):(o||a||i>=mje)&&this.addLineDeco(i,a,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new uo(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new _i(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof uo)return e;let t=new uo(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof uo)&&!this.isCovered?this.nodes.push(new uo(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof uo&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,t,n,i){let a=new uR(n,e);return Er.spans(t,n,i,a,0),a.finish(n)}}function gje(r,e,t){let n=new vje;return Er.compare(r,e,t,n,0),n.changes}class vje{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&I3(e,t,this.changes,5)}}function yje(r,e){let t=r.getBoundingClientRect(),n=r.ownerDocument,i=n.defaultView||window,a=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),s=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let u=r.parentNode;u&&u!=n.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let d=c.getBoundingClientRect();a=Math.max(a,d.left),o=Math.min(o,d.right),s=Math.max(s,d.top),l=u==r.parentNode?d.bottom:Math.min(l,d.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:a-t.left,right:Math.max(a,o)-t.left,top:s-(t.top+e),bottom:Math.max(s,l)-(t.top+e)}}function bje(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class cA{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],a=t[n];if(i.from!=a.from||i.to!=a.to||i.size!=a.size)return!1}return!0}draw(e,t){return jt.replace({widget:new xje(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class xje extends Pu{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class k9{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=N9,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=un.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(sR).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new dje(t),this.stateDeco=e.facet(Pv).filter(n=>typeof n!="function"),this.heightMap=Aa.empty().applyChanges(this.stateDeco,kr.empty,this.heightOracle.setDoc(e.doc),[new Yo(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=jt.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let i=n?t.head:t.anchor;if(!e.some(({from:a,to:o})=>i>=a&&i<=o)){let{from:a,to:o}=this.lineBlockAt(i);e.push(new vx(a,o))}}return this.viewports=e.sort((n,i)=>n.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?N9:new cR(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Qg(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Pv).filter(c=>typeof c!="function");let i=e.changedRanges,a=Yo.extendWithRanges(i,gje(n,this.stateDeco,e?e.changes:ni.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=o&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(mK)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,a=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?un.RTL:un.LTR;let o=this.heightOracle.mustRefreshForWrapping(a),s=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let u=0,c=0;if(s.width&&s.height){let{scaleX:m,scaleY:x}=HZ(t,s);(m>.005&&Math.abs(this.scaleX-m)>.005||x>.005&&Math.abs(this.scaleY-x)>.005)&&(this.scaleX=m,this.scaleY=x,u|=8,o=l=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,d=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=d)&&(this.paddingTop=h,this.paddingBottom=d,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=WZ(e.scrollDOM);let p=(this.printing?bje:yje)(t,this.paddingTop),v=p.top-this.pixelViewport.top,y=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let w=s.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let m=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(m)&&(o=!0),o||i.lineWrapping&&Math.abs(w-this.contentDOMWidth)>i.charWidth){let{lineHeight:x,charWidth:S,textHeight:E}=e.docView.measureTextSize();o=x>0&&i.refresh(a,x,S,E,w/S,m),o&&(e.docView.minWidth=0,u|=8)}v>0&&y>0?c=Math.max(v,y):v<0&&y<0&&(c=Math.min(v,y)),i.heightChanged=!1;for(let x of this.viewports){let S=x.from==this.viewport.from?m:e.docView.measureVisibleLineHeights(x);this.heightMap=(o?Aa.empty().applyChanges(this.stateDeco,kr.empty,this.heightOracle,[new Yo(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new fje(x.from,S))}i.heightChanged&&(u|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,a=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,l=new vx(i.lineAt(o-n*1e3,on.ByHeight,a,0,0).from,i.lineAt(s+(1-n)*1e3,on.ByHeight,a,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(u,on.ByPos,a,0,0),d;t.y=="center"?d=(h.top+h.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<l.from?d=h.top:d=h.bottom-c,l=new vx(i.lineAt(d-1e3/2,on.ByHeight,a,0,0).from,i.lineAt(d+c+1e3/2,on.ByHeight,a,0,0).to)}}return l}mapViewport(e,t){let n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new vx(this.heightMap.lineAt(n,on.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,on.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,on.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(t,on.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(e==0||i<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||a>=s+Math.max(10,Math.min(n,250)))&&i>o-2*1e3&&a<s+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let i of e)t.touchesRange(i.from,i.to)||n.push(new cA(t.mapPos(i.from),t.mapPos(i.to),i.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,a=i>>1,o=i<<1;if(this.defaultTextDirection!=un.LTR&&!n)return[];let s=[],l=(c,h,d,f)=>{if(h-c<a)return;let p=this.state.selection.main,v=[p.from];p.empty||v.push(p.to);for(let g of v)if(g>c&&g<h){l(c,g-10,d,f),l(g+10,h,d,f);return}let y=Sje(e,g=>g.from>=d.from&&g.to<=d.to&&Math.abs(g.from-c)<a&&Math.abs(g.to-h)<a&&!v.some(w=>g.from<w&&g.to>w));if(!y){if(h<d.to&&t&&n&&t.visibleRanges.some(g=>g.from<=h&&g.to>=h)){let g=t.moveToLineBoundary(at.cursor(h),!1,!0).head;g>c&&(h=g)}y=new cA(c,h,this.gapSize(d,c,h,f))}s.push(y)},u=c=>{if(c.length<o||c.type!=Ca.Text)return;let h=wje(c.from,c.to,this.stateDeco);if(h.total<o)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,f,p;if(n){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,g;if(d!=null){let w=bx(h,d),b=((this.visibleBottom-this.visibleTop)/2+v)/c.height;y=w-b,g=w+b}else y=(this.visibleTop-c.top-v)/c.height,g=(this.visibleBottom-c.top+v)/c.height;f=yx(h,y),p=yx(h,g)}else{let v=h.total*this.heightOracle.charWidth,y=i*this.heightOracle.charWidth,g,w;if(d!=null){let b=bx(h,d),m=((this.pixelViewport.right-this.pixelViewport.left)/2+y)/v;g=b-m,w=b+m}else g=(this.pixelViewport.left-y)/v,w=(this.pixelViewport.right+y)/v;f=yx(h,g),p=yx(h,w)}f>c.from&&l(c.from,f,c,h),p<c.to&&l(p,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return s}gapSize(e,t,n,i){let a=bx(i,n)-bx(i,t);return this.heightOracle.lineWrapping?e.height*a:i.total*this.heightOracle.charWidth*a}updateLineGaps(e){cA.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=jt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Er.spans(e,this.viewport.from,this.viewport.to,{span(i,a){t.push({from:i,to:a})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,a)=>i.from!=t[a].from||i.to!=t[a].to);return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Qg(this.heightMap.lineAt(e,on.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Qg(this.heightMap.lineAt(this.scaler.fromDOM(e),on.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Qg(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class vx{constructor(e,t){this.from=e,this.to=t}}function wje(r,e,t){let n=[],i=r,a=0;return Er.spans(t,r,e,{span(){},point(o,s){o>i&&(n.push({from:i,to:o}),a+=o-i),i=s}},20),i<e&&(n.push({from:i,to:e}),a+=e-i),{total:a,ranges:n}}function yx({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(r*t);for(let i=0;;i++){let{from:a,to:o}=e[i],s=o-a;if(n<=s)return a+n;n-=s}}function bx(r,e){let t=0;for(let{from:n,to:i}of r.ranges){if(e<=i){t+=e-n;break}t+=i-n}return t/r.total}function Sje(r,e){for(let t of r)if(e(t))return t}const N9={toDOM(r){return r},fromDOM(r){return r},scale:1,eq(r){return r==this}};class cR{constructor(e,t,n){let i=0,a=0,o=0;this.viewports=n.map(({from:s,to:l})=>{let u=t.lineAt(s,on.ByPos,e,0,0).top,c=t.lineAt(l,on.ByPos,e,0,0).bottom;return i+=c-u,{from:s,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let s of this.viewports)s.domTop=o+(s.top-a)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),a=s.bottom}toDOM(e){for(let t=0,n=0,i=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.top)return i+(e-n)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);n=a.bottom,i=a.domBottom}}fromDOM(e){for(let t=0,n=0,i=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.domTop)return n+(e-i)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);n=a.bottom,i=a.domBottom}}eq(e){return e instanceof cR?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to):!1}}function Qg(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),n=e.toDOM(r.bottom);return new al(r.from,r.length,t,n-t,Array.isArray(r._content)?r._content.map(i=>Qg(i,e)):r._content)}const xx=Dt.define({combine:r=>r.join(" ")}),V3=Dt.define({combine:r=>r.indexOf(!0)>-1}),q3=Yc.newName(),IK=Yc.newName(),LK=Yc.newName(),FK={"&light":"."+IK,"&dark":"."+LK};function W3(r,e,t){return new Yc(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return r;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):r+" "+n}})}const Mje=W3("."+q3,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},FK),e0="￿";class _je{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(br.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=e0}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let a=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let s=Yr.get(i),l=Yr.get(o);(s&&l?s.breakAfter:(s?s.breakAfter:$S(i))||$S(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>a)&&this.lineBreak(),i=o}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,o=1,s;if(this.lineSeparator?(a=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(s=i.exec(t))&&(a=s.index,o=s[0].length),this.append(t.slice(n,a<0?t.length:a)),a<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);n=a+o}}readNode(e){if(e.cmIgnore)return;let t=Yr.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(Eje(e,n.node,n.offset)?t:0))}}function Eje(r,e,t){for(;;){if(!e||t<Au(e))return!1;if(e==r)return!0;t=Td(e)+1,e=e.parentNode}}class O9{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Cje{constructor(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:a,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let s=a||o?[]:Dje(e),l=new _je(s,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=kje(s,this.bounds.from)}else{let s=e.observer.selectionRange,l=a&&a.node==s.focusNode&&a.offset==s.focusOffset||!D3(e.contentDOM,s.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(s.focusNode,s.focusOffset),u=o&&o.node==s.anchorNode&&o.offset==s.anchorOffset||!D3(e.contentDOM,s.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(s.anchorNode,s.anchorOffset),c=e.viewport;if((Ct.ios||Ct.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(l,u),d=Math.max(l,u),f=c.from-h,p=c.to-d;(f==0||f==1||h==0)&&(p==0||p==-1||d==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=at.single(u,l)}}}function BK(r,e){let t,{newSel:n}=e,i=r.state.selection.main,a=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:s}=e.bounds,l=i.from,u=null;(a===8||Ct.android&&e.text.length<s-o)&&(l=i.to,u="end");let c=Tje(r.state.doc.sliceString(o,s,e0),e.text,l-o,u);c&&(Ct.chrome&&a==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==e0+e0&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:kr.of(e.text.slice(c.from,c.toB).split(e0))})}else n&&(!r.hasFocus&&r.state.facet(q2)||n.main.eq(i))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!i.empty&&n&&n.main.empty?t={from:i.from,to:i.to,insert:r.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:r.state.doc.slice(i.from,t.from).append(t.insert).append(r.state.doc.slice(t.to,i.to))}:(Ct.mac||Ct.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=at.single(n.main.anchor-1,n.main.head-1)),t={from:i.from,to:i.to,insert:kr.of([" "])}):Ct.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&r.lineWrapping&&(n&&(n=at.single(n.main.anchor-1,n.main.head-1)),t={from:i.from,to:i.to,insert:kr.of([" "])}),t)return zK(r,t,n,a);if(n&&!n.main.eq(i)){let o=!1,s="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(o=!0),s=r.inputState.lastSelectionOrigin),r.dispatch({selection:n,scrollIntoView:o,userEvent:s}),!0}else return!1}function zK(r,e,t,n=-1){if(Ct.ios&&r.inputState.flushIOSKey(e))return!0;let i=r.state.selection.main;if(Ct.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&r.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Op(r.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Op(r.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Op(r.contentDOM,"Delete",46)))return!0;let a=e.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let o,s=()=>o||(o=Aje(r,e,t));return r.state.facet(dK).some(l=>l(r,e.from,e.to,a,s))||r.dispatch(s()),!0}function Aje(r,e,t){let n,i=r.state,a=i.selection.main;if(e.from>=a.from&&e.to<=a.to&&e.to-e.from>=(a.to-a.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let s=a.from<e.from?i.sliceDoc(a.from,e.from):"",l=a.to>e.to?i.sliceDoc(e.to,a.to):"";n=i.replaceSelection(r.state.toText(s+e.insert.sliceString(0,void 0,r.state.lineBreak)+l))}else{let s=i.changes(e),l=t&&t.main.to<=s.newLength?t.main:void 0;if(i.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=a.to&&e.to>=a.to-10){let u=r.state.sliceDoc(e.from,e.to),c,h=t&&MK(r,t.main.head);if(h){let p=e.insert.length-(e.to-e.from);c={from:h.from,to:h.to-p}}else c=r.state.doc.lineAt(a.head);let d=a.to-e.to,f=a.to-a.from;n=i.changeByRange(p=>{if(p.from==a.from&&p.to==a.to)return{changes:s,range:l||p.map(s)};let v=p.to-d,y=v-u.length;if(p.to-p.from!=f||r.state.sliceDoc(y,v)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let g=i.changes({from:y,to:v,insert:e.insert}),w=p.to-a.to;return{changes:g,range:l?at.range(Math.max(0,l.anchor+w),Math.max(0,l.head+w)):p.map(g)}})}else n={changes:s,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,o+=".compose",r.inputState.compositionFirstChange&&(o+=".start",r.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:o,scrollIntoView:!0})}function Tje(r,e,t,n){let i=Math.min(r.length,e.length),a=0;for(;a<i&&r.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==i&&r.length==e.length)return null;let o=r.length,s=e.length;for(;o>0&&s>0&&r.charCodeAt(o-1)==e.charCodeAt(s-1);)o--,s--;if(n=="end"){let l=Math.max(0,a-Math.min(o,s));t-=o+l-a}if(o<a&&r.length<e.length){let l=t<=a&&t>=o?a-t:0;a-=l,s=a+(s-o),o=a}else if(s<a){let l=t<=a&&t>=s?a-t:0;a-=l,o=a+(o-s),s=a}return{from:a,toA:o,toB:s}}function Dje(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:a}=r.observer.selectionRange;return t&&(e.push(new O9(t,n)),(i!=t||a!=n)&&e.push(new O9(i,a))),e}function kje(r,e){if(r.length==0)return null;let t=r[0].pos,n=r.length==2?r[1].pos:t;return t>-1&&n>-1?at.single(t+e,n+e):null}const Nje={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},hA=Ct.ie&&Ct.ie_version<=11;class Oje{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new g7e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(Ct.ie&&Ct.ie_version<=11||Ct.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&(this.editContext=new Pje(e),e.contentDOM.editContext=this.editContext.editContext),hA&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){e.type=="change"&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(q2)?n.root.activeElement!=this.dom:!dw(n.dom,i))return;let a=i.anchorNode&&n.docView.nearest(i.anchorNode);if(a&&a.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Ct.ie&&Ct.ie_version<=11||Ct.android&&Ct.chrome)&&!n.state.selection.main.empty&&i.focusNode&&M0(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Rv(e.root);if(!t)return!1;let n=Ct.safari&&e.root.nodeType==11&&d7e(this.dom.ownerDocument)==this.dom&&Rje(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let i=dw(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&y7e(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Nje),hA&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),hA&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let i=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&Op(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,i=!1;for(let a of e){let o=this.readMutation(a);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:n}=o:(t=Math.min(o.from,t),n=Math.max(o.to,n)))}return{from:t,to:n,typeOver:i}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),i=this.selectionChanged&&dw(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let a=new Cje(this.view,e,t,n);return this.view.docView.domChanged={newSel:a.newSel?a.newSel.main:null},a}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,i=BK(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=R9(t,e.previousSibling||e.target.previousSibling,-1),i=R9(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&this.editContext.update(e)}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function R9(r,e,t){for(;e;){let n=Yr.get(e);if(n&&n.parent==r)return n;let i=e.parentNode;e=i!=r.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function P9(r,e){let t=e.startContainer,n=e.startOffset,i=e.endContainer,a=e.endOffset,o=r.docView.domAtPos(r.state.selection.main.anchor);return M0(o.node,o.offset,i,a)&&([t,n,i,a]=[i,a,t,n]),{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:a}}function Rje(r,e){if(e.getComposedRanges){let i=e.getComposedRanges(r.root)[0];if(i)return P9(r,i)}let t=null;function n(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",n,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",n,!0),t?P9(r,t):null}class Pje{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});t.addEventListener("textupdate",n=>{let{anchor:i}=e.state.selection.main,a={from:this.toEditorPos(n.updateRangeStart),to:this.toEditorPos(n.updateRangeEnd),insert:kr.of(n.text.split(`
`))};a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),!(a.from==a.to&&!a.insert.length)&&(this.pendingContextChange=a,zK(e,a,at.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd))),this.pendingContextChange&&this.revertPending(e.state))}),t.addEventListener("characterboundsupdate",n=>{let i=[],a=null;for(let o=this.toEditorPos(n.rangeStart),s=this.toEditorPos(n.rangeEnd);o<s;o++){let l=e.coordsForChar(o);a=l&&new DOMRect(l.left,l.right,l.right-l.left,l.bottom-l.top)||a||new DOMRect,i.push(a)}t.updateCharacterBounds(n.rangeStart,i)}),t.addEventListener("textformatupdate",n=>{let i=[];for(let a of n.getTextFormats()){let o=a.underlineStyle,s=a.underlineThickness;if(o!="None"&&s!="None"){let l=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${s=="Thin"?1:2}px`;i.push(jt.mark({attributes:{style:l}}).range(this.toEditorPos(a.rangeStart),this.toEditorPos(a.rangeEnd)))}}e.dispatch({effects:vK.of(jt.set(i))})}),t.addEventListener("compositionstart",()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)}),t.addEventListener("compositionend",()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null}),this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let i=Rv(n.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,i=this.pendingContextChange;return e.changes.iterChanges((a,o,s,l,u)=>{if(n)return;let c=u.length-(o-a);if(i&&o>=i.to)if(i.from==a&&i.to==o&&i.insert.eq(u)){i=this.pendingContextChange=null,t+=c;return}else i=null,this.revertPending(e.state);if(a+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(a<this.to){if(a<this.from||o>this.to||this.to-this.from+u.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(a),this.toContextPos(o),u.toString()),this.to+=c}t+=c}),i&&!n&&this.revertPending(e.state),!n}update(e){!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.to+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(n,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}}class bt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(n=>n.forEach(i=>t(i,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||v7e(e.parent)||document,this.viewState=new k9(e.state||br.create(e)),e.scrollTo&&e.scrollTo.is(px)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Zg).map(n=>new sA(n));for(let n of this.plugins)n.update(this);this.observer=new Oje(this),this.inputState=new Y7e(this),this.inputState.ensureHandlers(this.plugins),this.docView=new d9(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let t=e.length==1&&e[0]instanceof oi?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,i,a=this.state;for(let d of e){if(d.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=d.state}if(this.destroyed){this.viewState.state=a;return}let o=this.hasFocus,s=0,l=null;e.some(d=>d.annotation(NK))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=OK(a,o),l||(s=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(c=null)):this.observer.clear(),a.facet(br.phrases)!=this.state.facet(br.phrases))return this.setState(a);i=XS.create(this,a,e),i.flags|=s;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(h&&(h=h.map(d.changes)),d.scrollIntoView){let{main:f}=d.state.selection;h=new Rp(f.empty?f:at.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of d.effects)f.is(px)&&(h=f.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=YS.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Kg)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(xx)!=i.state.facet(xx)&&(this.viewState.mustMeasureContent=!0),(t||n||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let d of this.state.facet(z3))try{d(i)}catch(f){Ga(this.state,f,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!BK(this,c)&&u.force&&Op(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new k9(e),this.plugins=e.facet(Zg).map(n=>new sA(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new d9(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Zg),n=e.state.facet(Zg);if(t!=n){let i=[];for(let a of n){let o=t.indexOf(a);if(o<0)i.push(new sA(a));else{let s=this.plugins[o];s.mustUpdate=e,i.push(s)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(n){Ga(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:a,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let s=0;;s++){if(o<0)if(WZ(n))a=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(i);a=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(s>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return Ga(this.state,p),I9}}),h=XS.create(this,this.state,[]),d=!1;h.flags|=l,t?t.flags|=l:t=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),d=this.docView.update(h),d&&this.docViewUpdate());for(let f=0;f<u.length;f++)if(c[f]!=I9)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){Ga(this.state,p)}if(d&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let f=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-o;if(f>1||f<-1){i=i+f,n.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let s of this.state.facet(z3))s(t)}get themeClasses(){return q3+" "+(this.state.facet(V3)?LK:IK)+" "+this.state.facet(xx)}updateAttrs(){let e=L9(this,yK,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(q2)?"true":"false",class:"cm-content",style:`${Ct.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),L9(this,sR,t);let n=this.observer.ignore(()=>{let i=P3(this.contentDOM,this.contentAttrs,t),a=P3(this.dom,this.editorAttrs,e);return i||a});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let i of n.effects)if(i.is(bt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Kg);let e=this.state.facet(bt.cspNonce);Yc.mount(this.root,this.styleModules.concat(Mje).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return uA(this,e,y9(this,e,t,n))}moveByGroup(e,t){return uA(this,e,y9(this,e,t,n=>$7e(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),a=n[t?n.length-1:0];return at.cursor(a.side(t,i)+e.from,a.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,n=!0){return G7e(this,e,t,n)}moveVertically(e,t,n){return uA(this,e,X7e(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),_K(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),a=this.bidiSpans(i),o=a[wc.find(a,e-i.from,-1,t)];return H2(n,o.dir==un.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(pK)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Ije)return oK(e.length);let t=this.textDirectionAt(e.from),n;for(let a of this.bidiCache)if(a.from==e.from&&a.dir==t&&(a.fresh||aK(a.isolates,n=h9(this,e))))return a.order;n||(n=h9(this,e));let i=k7e(e.text,t,n);return this.bidiCache.push(new YS(e.from,e.to,t,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ct.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{VZ(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return px.of(new Rp(typeof e=="number"?at.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return px.of(new Rp(at.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return jn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return jn.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=Yc.newName(),i=[xx.of(n),Kg.of(W3(`.${n}`,e))];return t&&t.dark&&i.push(V3.of(!0)),i}static baseTheme(e){return Wd.lowest(Kg.of(W3("."+q3,e,FK)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),i=n&&Yr.get(n)||Yr.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}bt.styleModule=Kg;bt.inputHandler=dK;bt.scrollHandler=gK;bt.focusChangeEffect=fK;bt.perLineTextDirection=pK;bt.exceptionSink=hK;bt.updateListener=z3;bt.editable=q2;bt.mouseSelectionStyle=cK;bt.dragMovesSelection=uK;bt.clickAddsSelectionRange=lK;bt.decorations=Pv;bt.outerDecorations=bK;bt.atomicRanges=lR;bt.bidiIsolatedRanges=xK;bt.scrollMargins=wK;bt.darkTheme=V3;bt.cspNonce=Dt.define({combine:r=>r.length?r[0]:""});bt.contentAttributes=sR;bt.editorAttributes=yK;bt.lineWrapping=bt.contentAttributes.of({class:"cm-lineWrapping"});bt.announce=hr.define();const Ije=4096,I9={};class YS{constructor(e,t,n,i,a,o){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=a,this.order=o}static update(e,t){if(t.empty&&!e.some(a=>a.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:un.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let o=e[a];o.dir==i&&!t.touchesRange(o.from,o.to)&&n.push(new YS(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function L9(r,e,t){for(let n=r.state.facet(e),i=n.length-1;i>=0;i--){let a=n[i],o=typeof a=="function"?a(r):a;o&&R3(o,t)}return t}const Lje=Ct.mac?"mac":Ct.windows?"win":Ct.linux?"linux":"key";function Fje(r,e){const t=r.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let i,a,o,s;for(let l=0;l<t.length-1;++l){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))s=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))a=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?s=!0:a=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(n="Alt-"+n),a&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function wx(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const Bje=Wd.default(bt.domEventHandlers({keydown(r,e){return jK(UK(e.state),r,e,"editor")}})),_y=Dt.define({enables:Bje}),F9=new WeakMap;function UK(r){let e=r.facet(_y),t=F9.get(e);return t||F9.set(e,t=jje(e.reduce((n,i)=>n.concat(i),[]))),t}function zje(r,e,t){return jK(UK(r.state),e,r,t)}let dc=null;const Uje=4e3;function jje(r,e=Lje){let t=Object.create(null),n=Object.create(null),i=(o,s)=>{let l=n[o];if(l==null)n[o]=s;else if(l!=s)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},a=(o,s,l,u,c)=>{var h,d;let f=t[o]||(t[o]=Object.create(null)),p=s.split(/ (?!$)/).map(g=>Fje(g,e));for(let g=1;g<p.length;g++){let w=p.slice(0,g).join(" ");i(w,!0),f[w]||(f[w]={preventDefault:!0,stopPropagation:!1,run:[b=>{let m=dc={view:b,prefix:w,scope:o};return setTimeout(()=>{dc==m&&(dc=null)},Uje),!0}]})}let v=p.join(" ");i(v,!1);let y=f[v]||(f[v]={preventDefault:!1,stopPropagation:!1,run:((d=(h=f._any)===null||h===void 0?void 0:h.run)===null||d===void 0?void 0:d.slice())||[]});l&&y.run.push(l),u&&(y.preventDefault=!0),c&&(y.stopPropagation=!0)};for(let o of r){let s=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of s){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let d in c)c[d].run.push(f=>h(f,G3))}let l=o[e]||o.key;if(l)for(let u of s)a(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&a(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}let G3=null;function jK(r,e,t,n){G3=e;let i=h7e(e),a=Ai(i,0),o=Vo(a)==i.length&&i!=" ",s="",l=!1,u=!1,c=!1;dc&&dc.view==t&&dc.scope==n&&(s=dc.prefix+" ",CK.indexOf(e.keyCode)<0&&(u=!0,dc=null));let h=new Set,d=y=>{if(y){for(let g of y.run)if(!h.has(g)&&(h.add(g),g(t)))return y.stopPropagation&&(c=!0),!0;y.preventDefault&&(y.stopPropagation&&(c=!0),u=!0)}return!1},f=r[n],p,v;return f&&(d(f[s+wx(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ct.windows&&e.ctrlKey&&e.altKey)&&(p=Jc[e.keyCode])&&p!=i?(d(f[s+wx(p,e,!0)])||e.shiftKey&&(v=Ov[e.keyCode])!=i&&v!=p&&d(f[s+wx(v,e,!1)]))&&(l=!0):o&&e.shiftKey&&d(f[s+wx(i,e,!0)])&&(l=!0),!l&&d(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),G3=null,l}class Ey{constructor(e,t,n,i,a){this.className=e,this.left=t,this.top=n,this.width=i,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let a=HK(e);return[new Ey(t,i.left-a.left,i.top-a.top,null,i.bottom-i.top)]}else return Hje(e,t,n)}}function HK(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==un.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function B9(r,e,t,n){let i=r.coordsAtPos(e,t*2);if(!i)return n;let a=r.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,s=r.posAtCoords({x:a.left+1,y:o}),l=r.posAtCoords({x:a.right-1,y:o});return s==null||l==null?n:{from:Math.max(n.from,Math.min(s,l)),to:Math.min(n.to,Math.max(s,l))}}function Hje(r,e,t){if(t.to<=r.viewport.from||t.from>=r.viewport.to)return[];let n=Math.max(t.from,r.viewport.from),i=Math.min(t.to,r.viewport.to),a=r.textDirection==un.LTR,o=r.contentDOM,s=o.getBoundingClientRect(),l=HK(r),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),h=s.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=s.right-(c?parseInt(c.paddingRight):0),f=j3(r,n),p=j3(r,i),v=f.type==Ca.Text?f:null,y=p.type==Ca.Text?p:null;if(v&&(r.lineWrapping||f.widgetLineBreaks)&&(v=B9(r,n,1,v)),y&&(r.lineWrapping||p.widgetLineBreaks)&&(y=B9(r,i,-1,y)),v&&y&&v.from==y.from&&v.to==y.to)return w(b(t.from,t.to,v));{let x=v?b(t.from,null,v):m(f,!1),S=y?b(null,t.to,y):m(p,!0),E=[];return(v||f).to<(y||p).from-(v&&y?1:0)||f.widgetLineBreaks>1&&x.bottom+r.defaultLineHeight/2<S.top?E.push(g(h,x.bottom,d,S.top)):x.bottom<S.top&&r.elementAtHeight((x.bottom+S.top)/2).type==Ca.Text&&(x.bottom=S.top=(x.bottom+S.top)/2),w(x).concat(E).concat(w(S))}function g(x,S,E,A){return new Ey(e,x-l.left,S-l.top-.01,E-x,A-S+.01)}function w({top:x,bottom:S,horizontal:E}){let A=[];for(let T=0;T<E.length;T+=2)A.push(g(E[T],x,E[T+1],S));return A}function b(x,S,E){let A=1e9,T=-1e9,C=[];function D(L,F,k,R,z){let B=r.coordsAtPos(L,L==E.to?-2:2),X=r.coordsAtPos(k,k==E.from?2:-2);!B||!X||(A=Math.min(B.top,X.top,A),T=Math.max(B.bottom,X.bottom,T),z==un.LTR?C.push(a&&F?h:B.left,a&&R?d:X.right):C.push(!a&&R?h:X.left,!a&&F?d:B.right))}let O=x??E.from,U=S??E.to;for(let L of r.visibleRanges)if(L.to>O&&L.from<U)for(let F=Math.max(L.from,O),k=Math.min(L.to,U);;){let R=r.state.doc.lineAt(F);for(let z of r.bidiSpans(R)){let B=z.from+R.from,X=z.to+R.from;if(B>=k)break;X>F&&D(Math.max(B,F),x==null&&B<=O,Math.min(X,k),S==null&&X>=U,z.dir)}if(F=R.to+1,F>=k)break}return C.length==0&&D(O,x==null,U,S==null,r.textDirection),{top:A,bottom:T,horizontal:C}}function m(x,S){let E=s.top+(S?x.top:x.bottom);return{top:E,bottom:E,horizontal:[]}}}function Vje(r,e){return r.constructor==e.constructor&&r.eq(e)}class qje{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(mw)!=e.state.facet(mw)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(mw);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!Vje(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[n].constructor&&i.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const mw=Dt.define();function VK(r){return[jn.define(e=>new qje(e,r)),mw.of(r)]}const qK=!Ct.ios,Iv=Dt.define({combine(r){return kl(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Wje(r={}){return[Iv.of(r),Gje,$je,Xje,mK.of(!0)]}function WK(r){return r.startState.facet(Iv)!=r.state.facet(Iv)}const Gje=VK({above:!0,markers(r){let{state:e}=r,t=e.facet(Iv),n=[];for(let i of e.selection.ranges){let a=i==e.selection.main;if(i.empty?!a||qK:t.drawRangeCursor){let o=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",s=i.empty?i:at.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Ey.forRange(r,o,s))n.push(l)}}return n},update(r,e){r.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=WK(r);return t&&z9(r.state,e),r.docChanged||r.selectionSet||t},mount(r,e){z9(e.state,r)},class:"cm-cursorLayer"});function z9(r,e){e.style.animationDuration=r.facet(Iv).cursorBlinkRate+"ms"}const $je=VK({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:Ey.forRange(r,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||WK(r)},class:"cm-selectionLayer"}),$3={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};qK&&($3[".cm-line"].caretColor=$3[".cm-content"].caretColor="transparent !important");const Xje=Wd.highest(bt.theme($3)),GK=hr.define({map(r,e){return r==null?null:e.mapPos(r)}}),t0=Fi.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,n)=>n.is(GK)?n.value:t,r)}}),Yje=jn.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(t0);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(t0)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(t0),t=e!=null&&r.coordsAtPos(e);if(!t)return null;let n=r.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+r.scrollDOM.scrollLeft*r.scaleX,top:t.top-n.top+r.scrollDOM.scrollTop*r.scaleY,height:t.bottom-t.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/t+"px",this.cursor.style.height=r.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(t0)!=r&&this.view.dispatch({effects:GK.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Jje(){return[t0,Yje]}function U9(r,e,t,n,i){e.lastIndex=0;for(let a=r.iterRange(t,n),o=t,s;!a.next().done;o+=a.value.length)if(!a.lineBreak)for(;s=e.exec(a.value);)i(o+s.index,s)}function Zje(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let n=[];for(let{from:i,to:a}of t)i=Math.max(r.state.doc.lineAt(i).from,i-e),a=Math.min(r.state.doc.lineAt(a).to,a+e),n.length&&n[n.length-1].to>=i?n[n.length-1].to=a:n.push({from:i,to:a});return n}class Kje{constructor(e){const{regexp:t,decoration:n,decorate:i,boundary:a,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(s,l,u,c)=>i(c,u,u+s[0].length,s,l);else if(typeof n=="function")this.addMatch=(s,l,u,c)=>{let h=n(s,l,u);h&&c(u,u+s[0].length,h)};else if(n)this.addMatch=(s,l,u,c)=>c(u,u+s[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=o}createDeco(e){let t=new Xc,n=t.add.bind(t);for(let{from:i,to:a}of Zje(e,this.maxLength))U9(e.state.doc,this.regexp,i,a,(o,s)=>this.addMatch(s,e,o,n));return t.finish()}updateDeco(e,t){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((a,o,s,l)=>{l>e.view.viewport.from&&s<e.view.viewport.to&&(n=Math.min(s,n),i=Math.max(l,i))}),e.viewportChanged||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t}updateRange(e,t,n,i){for(let a of e.visibleRanges){let o=Math.max(a.from,n),s=Math.min(a.to,i);if(s>o){let l=e.state.doc.lineAt(o),u=l.to<s?e.state.doc.lineAt(s):l,c=Math.max(a.from,l.from),h=Math.min(a.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;s<u.to;s++)if(this.boundary.test(u.text[s-u.from])){h=s;break}}let d=[],f,p=(v,y,g)=>d.push(g.range(v,y));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<h-l.from;)this.addMatch(f,e,f.index+l.from,p);else U9(e.state.doc,this.regexp,c,h,(v,y)=>this.addMatch(y,e,v,p));t=t.update({filterFrom:c,filterTo:h,filter:(v,y)=>v<c||y>h,add:d})}}return t}}const X3=/x/.unicode!=null?"gu":"g",Qje=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,X3),eHe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let dA=null;function tHe(){var r;if(dA==null&&typeof document<"u"&&document.body){let e=document.body.style;dA=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return dA||!1}const gw=Dt.define({combine(r){let e=kl(r,{render:null,specialChars:Qje,addSpecialChars:null});return(e.replaceTabs=!tHe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,X3)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,X3)),e}});function rHe(r={}){return[gw.of(r),nHe()]}let j9=null;function nHe(){return j9||(j9=jn.fromClass(class{constructor(r){this.view=r,this.decorations=jt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(gw)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new Kje({regexp:r.specialChars,decoration:(e,t,n)=>{let{doc:i}=t.state,a=Ai(e[0],0);if(a==9){let o=i.lineAt(n),s=t.state.tabSize,l=zm(o.text,s,n-o.from);return jt.replace({widget:new sHe((s-l%s)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=jt.replace({widget:new oHe(r,a)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(gw);r.startState.facet(gw)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const iHe="•";function aHe(r){return r>=32?iHe:r==10?"␤":String.fromCharCode(9216+r)}class oHe extends Pu{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=aHe(this.code),n=e.state.phrase("Control character")+" "+(eHe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;let a=document.createElement("span");return a.textContent=t,a.title=n,a.setAttribute("aria-label",n),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class sHe extends Pu{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function lHe(){return cHe}const uHe=jt.line({class:"cm-activeLine"}),cHe=jn.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let n of r.state.selection.ranges){let i=r.lineBlockAt(n.head);i.from>e&&(t.push(uHe.range(i.from)),e=i.from)}return jt.set(t)}},{decorations:r=>r.decorations});class hHe extends Pu{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?im(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),i=H2(t[0],n.direction!="rtl"),a=parseInt(n.lineHeight);return i.bottom-i.top>a*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+a}:i}ignoreEvent(){return!1}}function dHe(r){return jn.fromClass(class{constructor(e){this.view=e,this.placeholder=r?jt.set([jt.widget({widget:new hHe(r),side:1}).range(0)]):jt.none}get decorations(){return this.view.state.doc.length?jt.none:this.placeholder}},{decorations:e=>e.decorations})}const Y3=2e3;function fHe(r,e,t){let n=Math.min(e.line,t.line),i=Math.max(e.line,t.line),a=[];if(e.off>Y3||t.off>Y3||e.col<0||t.col<0){let o=Math.min(e.off,t.off),s=Math.max(e.off,t.off);for(let l=n;l<=i;l++){let u=r.doc.line(l);u.length<=s&&a.push(at.range(u.from+o,u.to+s))}}else{let o=Math.min(e.col,t.col),s=Math.max(e.col,t.col);for(let l=n;l<=i;l++){let u=r.doc.line(l),c=C3(u.text,o,r.tabSize,!0);if(c<0)a.push(at.cursor(u.to));else{let h=C3(u.text,s,r.tabSize);a.push(at.range(u.from+c,u.from+h))}}}return a}function pHe(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}function H9(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),n=r.state.doc.lineAt(t),i=t-n.from,a=i>Y3?-1:i==n.length?pHe(r,e.clientX):zm(n.text,r.state.tabSize,t-n.from);return{line:n.number,col:a,off:i}}function mHe(r,e){let t=H9(r,e),n=r.state.selection;return t?{update(i){if(i.docChanged){let a=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(a);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},n=n.map(i.changes)}},get(i,a,o){let s=H9(r,i);if(!s)return n;let l=fHe(r.state,t,s);return l.length?o?at.create(l.concat(n.ranges)):at.create(l):n}}:null}function gHe(r){let e=t=>t.altKey&&t.button==0;return bt.mouseSelectionStyle.of((t,n)=>e(n)?mHe(t,n):null)}const vHe={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},yHe={style:"cursor: crosshair"};function bHe(r={}){let[e,t]=vHe[r.key||"Alt"],n=jn.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[n,bt.contentAttributes.of(i=>{var a;return!((a=i.plugin(n))===null||a===void 0)&&a.isDown?yHe:null})]}const Fg="-10000px";class $K{constructor(e,t,n,i){this.facet=t,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let a=null;this.tooltipViews=this.tooltips.map(o=>a=n(o,a))}update(e,t){var n;let i=e.state.facet(this.facet),a=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],s=t?[]:null;for(let l=0;l<a.length;l++){let u=a[l],c=-1;if(u){for(let h=0;h<this.tooltips.length;h++){let d=this.tooltips[h];d&&d.create==u.create&&(c=h)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),s&&(s[l]=!!u.above);else{let h=o[l]=this.tooltipViews[c];s&&(s[l]=t[c]),h.update&&h.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return t&&(s.forEach((l,u)=>t[u]=l),t.length=s.length),this.input=i,this.tooltips=a,this.tooltipViews=o,!0}}function xHe(r){let{win:e}=r;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const fA=Dt.define({combine:r=>{var e,t,n;return{position:Ct.ios?"absolute":((e=r.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=r.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||xHe}}}),V9=new WeakMap,hR=jn.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(fA);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new $K(r,dR,(t,n)=>this.createTooltip(t,n),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let t=e||r.geometryChanged,n=r.state.facet(fA);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r,e){let t=r.create(this.view),n=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),r.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Fg,t.dom.style.left="0px",this.container.insertBefore(t.dom,n),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var r,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(r=n.destroy)===null||r===void 0||r.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect(),e=1,t=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(Ct.gecko)n=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==Fg&&i.style.left=="0px"){let a=i.getBoundingClientRect();n=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(n||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,t=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((i,a)=>{let o=this.manager.tooltipViews[a];return o.getCoords?o.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(fA).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:n}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let s of this.manager.tooltipViews)s.dom.style.position="absolute"}let{editor:t,space:n,scaleX:i,scaleY:a}=r,o=[];for(let s=0;s<this.manager.tooltips.length;s++){let l=this.manager.tooltips[s],u=this.manager.tooltipViews[s],{dom:c}=u,h=r.pos[s],d=r.size[s];if(!h||h.bottom<=Math.max(t.top,n.top)||h.top>=Math.min(t.bottom,n.bottom)||h.right<Math.max(t.left,n.left)-.1||h.left>Math.min(t.right,n.right)+.1){c.style.top=Fg;continue}let f=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,v=d.right-d.left,y=(e=V9.get(u))!==null&&e!==void 0?e:d.bottom-d.top,g=u.offset||SHe,w=this.view.textDirection==un.LTR,b=d.width>n.right-n.left?w?n.left:n.right-d.width:w?Math.min(h.left-(f?14:0)+g.x,n.right-v):Math.max(n.left,h.left-v+(f?14:0)-g.x),m=this.above[s];!l.strictSide&&(m?h.top-(d.bottom-d.top)-g.y<n.top:h.bottom+(d.bottom-d.top)+g.y>n.bottom)&&m==n.bottom-h.bottom>h.top-n.top&&(m=this.above[s]=!m);let x=(m?h.top-n.top:n.bottom-h.bottom)-p;if(x<y&&u.resize!==!1){if(x<this.view.defaultLineHeight){c.style.top=Fg;continue}V9.set(u,y),c.style.height=(y=x)/a+"px"}else c.style.height&&(c.style.height="");let S=m?h.top-y-p-g.y:h.bottom+p+g.y,E=b+v;if(u.overlap!==!0)for(let A of o)A.left<E&&A.right>b&&A.top<S+y&&A.bottom>S&&(S=m?A.top-y-2-p:A.bottom+p+2);if(this.position=="absolute"?(c.style.top=(S-r.parent.top)/a+"px",c.style.left=(b-r.parent.left)/i+"px"):(c.style.top=S/a+"px",c.style.left=b/i+"px"),f){let A=h.left+(w?g.x:-g.x)-(b+14-7);f.style.left=A/i+"px"}u.overlap!==!0&&o.push({left:b,top:S,right:E,bottom:S+y}),c.classList.toggle("cm-tooltip-above",m),c.classList.toggle("cm-tooltip-below",!m),u.positioned&&u.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=Fg}},{eventObservers:{scroll(){this.maybeMeasure()}}}),wHe=bt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),SHe={x:0,y:0},dR=Dt.define({enables:[hR,wHe]}),JS=Dt.define({combine:r=>r.reduce((e,t)=>e.concat(t),[])});class W2{static create(e){return new W2(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new $K(e,JS,(t,n)=>this.createHostedView(t,n),t=>t.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let i=n[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const MHe=dR.compute([JS],r=>{let e=r.facet(JS);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var n;return(n=t.end)!==null&&n!==void 0?n:t.pos})),create:W2.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class _He{constructor(e,t,n,i,a){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let i,a=1;if(n instanceof xc)i=n.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let s=e.coordsAtPos(i);if(!s||t.y<s.top||t.y>s.bottom||t.x<s.left-e.defaultCharacterWidth||t.x>s.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=l&&l.dir==un.RTL?-1:1;a=t.x<s.left?-u:u}let o=this.source(e,i,a);if(o!=null&&o.then){let s=this.pending={pos:i};o.then(l=>{this.pending==s&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Ga(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(hR),t=e?e.manager.tooltips.findIndex(n=>n.create==W2.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:a}=this;if(i.length&&a&&!EHe(a.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,s=(n=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&n!==void 0?n:o;(o==s?this.view.posAtCoords(this.lastMove)!=o:!CHe(this.view,o,s,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Sx=4;function EHe(r,e){let t=r.getBoundingClientRect();return e.clientX>=t.left-Sx&&e.clientX<=t.right+Sx&&e.clientY>=t.top-Sx&&e.clientY<=t.bottom+Sx}function CHe(r,e,t,n,i,a){let o=r.scrollDOM.getBoundingClientRect(),s=r.documentTop+r.documentPadding.top+r.contentHeight;if(o.left>n||o.right<n||o.top>i||Math.min(o.bottom,s)<i)return!1;let l=r.posAtCoords({x:n,y:i},!1);return l>=e&&l<=t}function AHe(r,e={}){let t=hr.define(),n=Fi.define({create(){return[]},update(i,a){if(i.length&&(e.hideOnChange&&(a.docChanged||a.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(a,o))),a.docChanged)){let o=[];for(let s of i){let l=a.changes.mapPos(s.pos,-1,xa.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),s);u.pos=l,u.end!=null&&(u.end=a.changes.mapPos(u.end)),o.push(u)}}i=o}for(let o of a.effects)o.is(t)&&(i=o.value),o.is(THe)&&(i=[]);return i},provide:i=>JS.from(i)});return[n,jn.define(i=>new _He(i,r,n,t,e.hoverTime||300)),MHe]}function XK(r,e){let t=r.plugin(hR);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const THe=hr.define(),q9=Dt.define({combine(r){let e,t;for(let n of r)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Lv(r,e){let t=r.plugin(YK),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const YK=jn.fromClass(class{constructor(r){this.input=r.state.facet(Fv),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet(q9);this.top=new Mx(r,!0,e.topContainer),this.bottom=new Mx(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet(q9);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Mx(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Mx(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(Fv);if(t!=this.input){let n=t.filter(l=>l),i=[],a=[],o=[],s=[];for(let l of n){let u=this.specs.indexOf(l),c;u<0?(c=l(r.view),s.push(c)):(c=this.panels[u],c.update&&c.update(r)),i.push(c),(c.top?a:o).push(c)}this.specs=n,this.panels=i,this.top.sync(a),this.bottom.sync(o);for(let l of s)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>bt.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Mx{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=W9(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=W9(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function W9(r){let e=r.nextSibling;return r.remove(),e}const Fv=Dt.define({enables:YK});class Du extends Ad{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Du.prototype.elementClass="";Du.prototype.toDOM=void 0;Du.prototype.mapMode=xa.TrackBefore;Du.prototype.startSide=Du.prototype.endSide=-1;Du.prototype.point=!0;const vw=Dt.define(),DHe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Er.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},E0=Dt.define();function kHe(r){return[JK(),E0.of(Object.assign(Object.assign({},DHe),r))]}const G9=Dt.define({combine:r=>r.some(e=>e)});function JK(r){return[NHe]}const NHe=jn.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(E0).map(e=>new X9(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(G9),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(G9)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=Er.iter(this.view.state.facet(vw),this.view.viewport.from),n=[],i=this.gutters.map(a=>new OHe(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(a.type)){let o=!0;for(let s of a.type)if(s.type==Ca.Text&&o){J3(t,n,s.from);for(let l of i)l.line(this.view,s,n);o=!1}else if(s.widget)for(let l of i)l.widget(this.view,s)}else if(a.type==Ca.Text){J3(t,n,a.from);for(let o of i)o.line(this.view,a,n)}else if(a.widget)for(let o of i)o.widget(this.view,a);for(let a of i)a.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(E0),t=r.state.facet(E0),n=r.docChanged||r.heightChanged||r.viewportChanged||!Er.eq(r.startState.facet(vw),r.state.facet(vw),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(r)&&(n=!0);else{n=!0;let i=[];for(let a of t){let o=e.indexOf(a);o<0?i.push(new X9(this.view,a)):(this.gutters[o].update(r),i.push(this.gutters[o]))}for(let a of this.gutters)a.dom.remove(),i.indexOf(a)<0&&a.destroy();for(let a of i)this.dom.appendChild(a.dom);this.gutters=i}return n}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>bt.scrollMargins.of(e=>{let t=e.plugin(r);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==un.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function $9(r){return Array.isArray(r)?r:[r]}function J3(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class OHe{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=Er.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:i}=this,a=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let s=new ZK(e,o,a,n);i.elements.push(s),i.dom.appendChild(s.dom)}else i.elements[this.i].update(e,o,a,n);this.height=t.bottom,this.i++}line(e,t,n){let i=[];J3(this.cursor,i,t.from),n.length&&(i=i.concat(n));let a=this.gutter.config.lineMarker(e,t,i);a&&i.unshift(a);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t);n&&this.addElement(e,t,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class X9{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,i=>{let a=i.target,o;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let l=a.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let s=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[n](e,s,i)&&i.preventDefault()});this.markers=$9(t.markers(e)),t.initialSpacer&&(this.spacer=new ZK(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=$9(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let n=e.view.viewport;return!Er.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class ZK{constructor(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}update(e,t,n,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),RHe(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let n="cm-gutterElement",i=this.dom.firstChild;for(let a=0,o=0;;){let s=o,l=a<t.length?t[a++]:null,u=!1;if(l){let c=l.elementClass;c&&(n+=" "+c);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){s=h,u=!0;break}}else s=this.markers.length;for(;o<s;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function RHe(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}const PHe=Dt.define(),pp=Dt.define({combine(r){return kl(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let i in t){let a=n[i],o=t[i];n[i]=a?(s,l,u)=>a(s,l,u)||o(s,l,u):o}return n}})}});class pA extends Du{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function mA(r,e){return r.state.facet(pp).formatNumber(e,r.state)}const IHe=E0.compute([pp],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(PHe)},lineMarker(e,t,n){return n.some(i=>i.toDOM)?null:new pA(mA(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(pp)!=e.state.facet(pp),initialSpacer(e){return new pA(mA(e,Y9(e.state.doc.lines)))},updateSpacer(e,t){let n=mA(t.view,Y9(t.view.state.doc.lines));return n==e.number?e:new pA(n)},domEventHandlers:r.facet(pp).domEventHandlers}));function LHe(r={}){return[pp.of(r),JK(),IHe]}function Y9(r){let e=9;for(;e<r;)e=e*10+9;return e}const FHe=new class extends Du{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},BHe=vw.compute(["selection"],r=>{let e=[],t=-1;for(let n of r.selection.ranges){let i=r.doc.lineAt(n.head).from;i>t&&(t=i,e.push(FHe.range(i)))}return Er.of(e)});function zHe(){return BHe}const UHe=1024;let jHe=0;class gA{constructor(e,t){this.from=e,this.to=t}}class wr{constructor(e={}){this.id=jHe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ns.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}wr.closedBy=new wr({deserialize:r=>r.split(" ")});wr.openedBy=new wr({deserialize:r=>r.split(" ")});wr.group=new wr({deserialize:r=>r.split(" ")});wr.isolate=new wr({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});wr.contextHash=new wr({perNode:!0});wr.lookAhead=new wr({perNode:!0});wr.mounted=new wr({perNode:!0});class ZS{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[wr.mounted.id]}}const HHe=Object.create(null);class ns{constructor(e,t,n,i=0){this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):HHe,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new ns(e.name||"",t,e.id,n);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(i)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[a[0].id]=a[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(wr.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return n=>{for(let i=n.prop(wr.group),a=-1;a<(i?i.length:0);a++){let o=t[a<0?n.name:i[a]];if(o)return o}}}}ns.none=new ns("",Object.create(null),0,8);const _x=new WeakMap,J9=new WeakMap;var Di;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Di||(Di={}));class Qi{constructor(e,t,n,i,a){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,a&&a.length){this.props=Object.create(null);for(let[o,s]of a)this.props[typeof o=="number"?o:o.id]=s}}toString(){let e=ZS.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let i=n.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new K3(this.topNode,e)}cursorAt(e,t=0,n=0){let i=_x.get(this)||this.topNode,a=new K3(i);return a.moveTo(e,t),_x.set(this,a._tree),a}get topNode(){return new Jo(this,0,0,null)}resolve(e,t=0){let n=Bv(_x.get(this)||this.topNode,e,t,!1);return _x.set(this,n),n}resolveInner(e,t=0){let n=Bv(J9.get(this)||this.topNode,e,t,!0);return J9.set(this,n),n}resolveStack(e,t=0){return WHe(this,e,t)}iterate(e){let{enter:t,leave:n,from:i=0,to:a=this.length}=e,o=e.mode||0,s=(o&Di.IncludeAnonymous)>0;for(let l=this.cursor(o|Di.IncludeAnonymous);;){let u=!1;if(l.from<=a&&l.to>=i&&(!s&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&n&&(s||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:mR(ns.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,i)=>new Qi(this.type,t,n,i,this.propValues),e.makeTree||((t,n,i)=>new Qi(ns.none,t,n,i)))}static build(e){return GHe(e)}}Qi.empty=new Qi(ns.none,[],[],0);class fR{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new fR(this.buffer,this.index)}}class Kc{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return ns.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],a=i.name;if(/\W/.test(a)&&!i.isError&&(a=JSON.stringify(a)),e+=4,n==e)return a;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return a+"("+o.join(",")+")"}findChild(e,t,n,i,a){let{buffer:o}=this,s=-1;for(let l=e;l!=t&&!(KK(a,i,o[l+1],o[l+2])&&(s=l,n>0));l=o[l+3]);return s}slice(e,t,n){let i=this.buffer,a=new Uint16Array(t-e),o=0;for(let s=e,l=0;s<t;){a[l++]=i[s++],a[l++]=i[s++]-n;let u=a[l++]=i[s++]-n;a[l++]=i[s++]-e,o=Math.max(o,u)}return new Kc(a,o,this.set)}}function KK(r,e,t,n){switch(r){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function Bv(r,e,t,n){for(var i;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!n&&r instanceof Jo&&r.index<0?null:r.parent;if(!o)return r;r=o}let a=n?0:Di.IgnoreOverlays;if(n)for(let o=r,s=o.parent;s;o=s,s=o.parent)o instanceof Jo&&o.index<0&&((i=s.enter(e,t,a))===null||i===void 0?void 0:i.from)!=o.from&&(r=s);for(;;){let o=r.enter(e,t,a);if(!o)return r;r=o}}class QK{cursor(e=0){return new K3(this,e)}getChild(e,t=null,n=null){let i=Z9(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return Z9(this,e,t,n)}resolve(e,t=0){return Bv(this,e,t,!1)}resolveInner(e,t=0){return Bv(this,e,t,!0)}matchContext(e){return Z3(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}get node(){return this}get next(){return this.parent}}class Jo extends QK{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i,a=0){for(let o=this;;){for(let{children:s,positions:l}=o._tree,u=t>0?s.length:-1;e!=u;e+=t){let c=s[e],h=l[e]+o.from;if(KK(i,n,h,h+c.length)){if(c instanceof Kc){if(a&Di.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,t,n-h,i);if(d>-1)return new Sc(new VHe(o,c,e,h),null,d)}else if(a&Di.IncludeAnonymous||!c.type.isAnonymous||pR(c)){let d;if(!(a&Di.IgnoreMounts)&&(d=ZS.get(c))&&!d.overlay)return new Jo(d.tree,h,e,o);let f=new Jo(c,h,e,o);return a&Di.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(t<0?c.children.length-1:0,t,n,i)}}}if(a&Di.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let i;if(!(n&Di.IgnoreOverlays)&&(i=ZS.get(this._tree))&&i.overlay){let a=e-this.from;for(let{from:o,to:s}of i.overlay)if((t>0?o<=a:o<a)&&(t<0?s>=a:s>a))return new Jo(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Z9(r,e,t,n){let i=r.cursor(),a=[];if(!i.firstChild())return a;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return a}for(;;){if(n!=null&&i.type.is(n))return a;if(i.type.is(e)&&a.push(i.node),!i.nextSibling())return n==null?a:[]}}function Z3(r,e,t=e.length-1){for(let n=r.parent;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class VHe{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class Sc extends QK{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return a<0?null:new Sc(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Di.ExcludeBuffers)return null;let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return a<0?null:new Sc(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Sc(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Sc(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,a=n.buffer[this.index+3];if(a>i){let o=n.buffer[this.index+1];e.push(n.slice(i,a,o)),t.push(0)}return new Qi(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function eQ(r){if(!r.length)return null;let e=0,t=r[0];for(let a=1;a<r.length;a++){let o=r[a];(o.from>t.from||o.to<t.to)&&(t=o,e=a)}let n=t instanceof Jo&&t.index<0?null:t.parent,i=r.slice();return n?i[e]=n:i.splice(e,1),new qHe(i,t)}class qHe{constructor(e,t){this.heads=e,this.node=t}get next(){return eQ(this.heads)}}function WHe(r,e,t){let n=r.resolveInner(e,t),i=null;for(let a=n instanceof Jo?n:n.context.parent;a;a=a.parent)if(a.index<0){let o=a.parent;(i||(i=[n])).push(o.resolve(e,t)),a=o}else{let o=ZS.get(a.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let s=new Jo(o.tree,o.overlay[0].from+a.from,-1,a);(i||(i=[n])).push(Bv(s,e,t,!1))}}return i?eQ(i):n}class K3{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Jo)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof Jo?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,a=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&Di.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Di.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Di.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(i.buffer.buffer[a+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let a=t+e,o=e<0?-1:n._tree.children.length;a!=o;a+=e){let s=n._tree.children[a];if(this.mode&Di.IncludeAnonymous||s instanceof Kc||!s.type.isAnonymous||pR(s))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,a=this.stack.length;a>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,n=a+1;break e}i=this.stack[--a]}for(let i=n;i<this.stack.length;i++)t=new Sc(this.buffer,t,this.stack[i]);return this.bufferNode=new Sc(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return Z3(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,a=this.stack.length-1;i>=0;a--){if(a<0)return Z3(this.node,e,i);let o=n[t.buffer[this.stack[a]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function pR(r){return r.children.some(e=>e instanceof Kc||!e.type.isAnonymous||pR(e))}function GHe(r){var e;let{buffer:t,nodeSet:n,maxBufferLength:i=UHe,reused:a=[],minRepeatType:o=n.types.length}=r,s=Array.isArray(t)?new fR(t,t.length):t,l=n.types,u=0,c=0;function h(x,S,E,A,T,C){let{id:D,start:O,end:U,size:L}=s,F=c;for(;L<0;)if(s.next(),L==-1){let X=a[D];E.push(X),A.push(O-x);return}else if(L==-3){u=D;return}else if(L==-4){c=D;return}else throw new RangeError(`Unrecognized record size: ${L}`);let k=l[D],R,z,B=O-x;if(U-O<=i&&(z=y(s.pos-S,T))){let X=new Uint16Array(z.size-z.skip),Z=s.pos-z.size,Q=X.length;for(;s.pos>Z;)Q=g(z.start,X,Q);R=new Kc(X,U-z.start,n),B=z.start-x}else{let X=s.pos-L;s.next();let Z=[],Q=[],J=D>=o?D:-1,ne=0,fe=U;for(;s.pos>X;)J>=0&&s.id==J&&s.size>=0?(s.end<=fe-i&&(p(Z,Q,O,ne,s.end,fe,J,F),ne=Z.length,fe=s.end),s.next()):C>2500?d(O,X,Z,Q):h(O,X,Z,Q,J,C+1);if(J>=0&&ne>0&&ne<Z.length&&p(Z,Q,O,ne,O,fe,J,F),Z.reverse(),Q.reverse(),J>-1&&ne>0){let se=f(k);R=mR(k,Z,Q,0,Z.length,0,U-O,se,se)}else R=v(k,Z,Q,U-O,F-U)}E.push(R),A.push(B)}function d(x,S,E,A){let T=[],C=0,D=-1;for(;s.pos>S;){let{id:O,start:U,end:L,size:F}=s;if(F>4)s.next();else{if(D>-1&&U<D)break;D<0&&(D=L-i),T.push(O,U,L),C++,s.next()}}if(C){let O=new Uint16Array(C*4),U=T[T.length-2];for(let L=T.length-3,F=0;L>=0;L-=3)O[F++]=T[L],O[F++]=T[L+1]-U,O[F++]=T[L+2]-U,O[F++]=F;E.push(new Kc(O,T[2]-U,n)),A.push(U-x)}}function f(x){return(S,E,A)=>{let T=0,C=S.length-1,D,O;if(C>=0&&(D=S[C])instanceof Qi){if(!C&&D.type==x&&D.length==A)return D;(O=D.prop(wr.lookAhead))&&(T=E[C]+D.length+O)}return v(x,S,E,A,T)}}function p(x,S,E,A,T,C,D,O){let U=[],L=[];for(;x.length>A;)U.push(x.pop()),L.push(S.pop()+E-T);x.push(v(n.types[D],U,L,C-T,O-C)),S.push(T-E)}function v(x,S,E,A,T=0,C){if(u){let D=[wr.contextHash,u];C=C?[D].concat(C):[D]}if(T>25){let D=[wr.lookAhead,T];C=C?[D].concat(C):[D]}return new Qi(x,S,E,A,C)}function y(x,S){let E=s.fork(),A=0,T=0,C=0,D=E.end-i,O={size:0,start:0,skip:0};e:for(let U=E.pos-x;E.pos>U;){let L=E.size;if(E.id==S&&L>=0){O.size=A,O.start=T,O.skip=C,C+=4,A+=4,E.next();continue}let F=E.pos-L;if(L<0||F<U||E.start<D)break;let k=E.id>=o?4:0,R=E.start;for(E.next();E.pos>F;){if(E.size<0)if(E.size==-3)k+=4;else break e;else E.id>=o&&(k+=4);E.next()}T=R,A+=L,C+=k}return(S<0||A==x)&&(O.size=A,O.start=T,O.skip=C),O.size>4?O:void 0}function g(x,S,E){let{id:A,start:T,end:C,size:D}=s;if(s.next(),D>=0&&A<o){let O=E;if(D>4){let U=s.pos-(D-4);for(;s.pos>U;)E=g(x,S,E)}S[--E]=O,S[--E]=C-x,S[--E]=T-x,S[--E]=A}else D==-3?u=A:D==-4&&(c=A);return E}let w=[],b=[];for(;s.pos>0;)h(r.start||0,r.bufferStart||0,w,b,-1,0);let m=(e=r.length)!==null&&e!==void 0?e:w.length?b[0]+w[0].length:0;return new Qi(l[r.topID],w.reverse(),b.reverse(),m)}const K9=new WeakMap;function yw(r,e){if(!r.isAnonymous||e instanceof Kc||e.type!=r)return 1;let t=K9.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=r||!(n instanceof Qi)){t=1;break}t+=yw(r,n)}K9.set(e,t)}return t}function mR(r,e,t,n,i,a,o,s,l){let u=0;for(let p=n;p<i;p++)u+=yw(r,e[p]);let c=Math.ceil(u*1.5/8),h=[],d=[];function f(p,v,y,g,w){for(let b=y;b<g;){let m=b,x=v[b],S=yw(r,p[b]);for(b++;b<g;b++){let E=yw(r,p[b]);if(S+E>=c)break;S+=E}if(b==m+1){if(S>c){let E=p[m];f(E.children,E.positions,0,E.children.length,v[m]+w);continue}h.push(p[m])}else{let E=v[b-1]+p[b-1].length-x;h.push(mR(r,p,v,m,b,x,E,null,l))}d.push(x+w-a)}}return f(e,t,n,i,0),(s||l)(h,d,o)}class fd{constructor(e,t,n,i,a=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(a?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let i=[new fd(0,e.length,e,0,!1,n)];for(let a of t)a.to>e.length&&i.push(a);return i}static applyChanges(e,t,n=128){if(!t.length)return e;let i=[],a=1,o=e.length?e[0]:null;for(let s=0,l=0,u=0;;s++){let c=s<t.length?t[s]:null,h=c?c.fromA:1e9;if(h-l>=n)for(;o&&o.from<h;){let d=o;if(l>=d.from||h<=d.to||u){let f=Math.max(d.from,l)-u,p=Math.min(d.to,h)-u;d=f>=p?null:new fd(f,p,d.tree,d.offset+u,s>0,!!c)}if(d&&i.push(d),o.to>h)break;o=a<e.length?e[a++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}class $He{startParse(e,t,n){return typeof e=="string"&&(e=new XHe(e)),n=n?n.length?n.map(i=>new gA(i.from,i.to)):[new gA(0,0)]:[new gA(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let a=i.advance();if(a)return a}}}class XHe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new wr({perNode:!0});let YHe=0;class rl{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=YHe++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new rl([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new KS;return t=>t.modified.indexOf(e)>-1?t:KS.get(t.base||t,t.modified.concat(e).sort((n,i)=>n.id-i.id))}}let JHe=0;class KS{constructor(){this.instances=[],this.id=JHe++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(s=>s.base==e&&ZHe(t,s.modified));if(n)return n;let i=[],a=new rl(i,e,t);for(let s of t)s.instances.push(a);let o=KHe(t);for(let s of e.set)if(!s.modified.length)for(let l of o)i.push(KS.get(s,l));return a}}function ZHe(r,e){return r.length==e.length&&r.every((t,n)=>t==e[n])}function KHe(r){let e=[[]];for(let t=0;t<r.length;t++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(r[t]));return e.sort((t,n)=>n.length-t.length)}function QHe(r){let e=Object.create(null);for(let t in r){let n=r[t];Array.isArray(n)||(n=[n]);for(let i of t.split(" "))if(i){let a=[],o=2,s=i;for(let h=0;;){if(s=="..."&&h>0&&h+3==i.length){o=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!d)throw new RangeError("Invalid path: "+i);if(a.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),h+=d[0].length,h==i.length)break;let f=i[h++];if(h==i.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+i);s=i.slice(h)}let l=a.length-1,u=a[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new QS(n,o,l>0?a.slice(0,l):null);e[u]=c.sort(e[u])}}return tQ.add(e)}const tQ=new wr;class QS{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}QS.empty=new QS([],2,null);function rQ(r,e){let t=Object.create(null);for(let a of r)if(!Array.isArray(a.tag))t[a.tag.id]=a.class;else for(let o of a.tag)t[o.id]=a.class;let{scope:n,all:i=null}=e||{};return{style:a=>{let o=i;for(let s of a)for(let l of s.set){let u=t[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:n}}function eVe(r,e){let t=null;for(let n of r){let i=n.style(e);i&&(t=t?t+" "+i:i)}return t}function tVe(r,e,t,n=0,i=r.length){let a=new rVe(n,Array.isArray(e)?e:[e],t);a.highlightRange(r.cursor(),n,i,"",a.highlighters),a.flush(i)}class rVe{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,i,a){let{type:o,from:s,to:l}=e;if(s>=n||l<=t)return;o.isTop&&(a=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=i,c=nVe(e)||QS.empty,h=eVe(a,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(t,s),u),c.opaque)return;let d=e.tree&&e.tree.prop(wr.mounted);if(d&&d.overlay){let f=e.node.enter(d.overlay[0].from+s,1),p=this.highlighters.filter(y=>!y.scope||y.scope(d.tree.type)),v=e.firstChild();for(let y=0,g=s;;y++){let w=y<d.overlay.length?d.overlay[y]:null,b=w?w.from+s:l,m=Math.max(t,g),x=Math.min(n,b);if(m<x&&v)for(;e.from<x&&(this.highlightRange(e,m,x,i,a),this.startSpan(Math.min(x,e.to),u),!(e.to>=b||!e.nextSibling())););if(!w||b>n)break;g=w.to+s,g>t&&(this.highlightRange(f.cursor(),Math.max(t,w.from+s),Math.min(n,g),"",p),this.startSpan(Math.min(n,g),u))}v&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,a),this.startSpan(Math.min(n,e.to),u)}while(e.nextSibling());e.parent()}}}function nVe(r){let e=r.type.prop(tQ);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const mt=rl.define,Ex=mt(),sc=mt(),Q9=mt(sc),e7=mt(sc),lc=mt(),Cx=mt(lc),vA=mt(lc),Ks=mt(),Nh=mt(Ks),Js=mt(),Zs=mt(),Q3=mt(),Bg=mt(Q3),Ax=mt(),tt={comment:Ex,lineComment:mt(Ex),blockComment:mt(Ex),docComment:mt(Ex),name:sc,variableName:mt(sc),typeName:Q9,tagName:mt(Q9),propertyName:e7,attributeName:mt(e7),className:mt(sc),labelName:mt(sc),namespace:mt(sc),macroName:mt(sc),literal:lc,string:Cx,docString:mt(Cx),character:mt(Cx),attributeValue:mt(Cx),number:vA,integer:mt(vA),float:mt(vA),bool:mt(lc),regexp:mt(lc),escape:mt(lc),color:mt(lc),url:mt(lc),keyword:Js,self:mt(Js),null:mt(Js),atom:mt(Js),unit:mt(Js),modifier:mt(Js),operatorKeyword:mt(Js),controlKeyword:mt(Js),definitionKeyword:mt(Js),moduleKeyword:mt(Js),operator:Zs,derefOperator:mt(Zs),arithmeticOperator:mt(Zs),logicOperator:mt(Zs),bitwiseOperator:mt(Zs),compareOperator:mt(Zs),updateOperator:mt(Zs),definitionOperator:mt(Zs),typeOperator:mt(Zs),controlOperator:mt(Zs),punctuation:Q3,separator:mt(Q3),bracket:Bg,angleBracket:mt(Bg),squareBracket:mt(Bg),paren:mt(Bg),brace:mt(Bg),content:Ks,heading:Nh,heading1:mt(Nh),heading2:mt(Nh),heading3:mt(Nh),heading4:mt(Nh),heading5:mt(Nh),heading6:mt(Nh),contentSeparator:mt(Ks),list:mt(Ks),quote:mt(Ks),emphasis:mt(Ks),strong:mt(Ks),link:mt(Ks),monospace:mt(Ks),strikethrough:mt(Ks),inserted:mt(),deleted:mt(),changed:mt(),invalid:mt(),meta:Ax,documentMeta:mt(Ax),annotation:mt(Ax),processingInstruction:mt(Ax),definition:rl.defineModifier(),constant:rl.defineModifier(),function:rl.defineModifier(),standard:rl.defineModifier(),local:rl.defineModifier(),special:rl.defineModifier()};rQ([{tag:tt.link,class:"tok-link"},{tag:tt.heading,class:"tok-heading"},{tag:tt.emphasis,class:"tok-emphasis"},{tag:tt.strong,class:"tok-strong"},{tag:tt.keyword,class:"tok-keyword"},{tag:tt.atom,class:"tok-atom"},{tag:tt.bool,class:"tok-bool"},{tag:tt.url,class:"tok-url"},{tag:tt.labelName,class:"tok-labelName"},{tag:tt.inserted,class:"tok-inserted"},{tag:tt.deleted,class:"tok-deleted"},{tag:tt.literal,class:"tok-literal"},{tag:tt.string,class:"tok-string"},{tag:tt.number,class:"tok-number"},{tag:[tt.regexp,tt.escape,tt.special(tt.string)],class:"tok-string2"},{tag:tt.variableName,class:"tok-variableName"},{tag:tt.local(tt.variableName),class:"tok-variableName tok-local"},{tag:tt.definition(tt.variableName),class:"tok-variableName tok-definition"},{tag:tt.special(tt.variableName),class:"tok-variableName2"},{tag:tt.definition(tt.propertyName),class:"tok-propertyName tok-definition"},{tag:tt.typeName,class:"tok-typeName"},{tag:tt.namespace,class:"tok-namespace"},{tag:tt.className,class:"tok-className"},{tag:tt.macroName,class:"tok-macroName"},{tag:tt.propertyName,class:"tok-propertyName"},{tag:tt.operator,class:"tok-operator"},{tag:tt.comment,class:"tok-comment"},{tag:tt.meta,class:"tok-meta"},{tag:tt.invalid,class:"tok-invalid"},{tag:tt.punctuation,class:"tok-punctuation"}]);var yA;const r0=new wr,iVe=new wr;class ul{constructor(e,t,n=[],i=""){this.data=e,this.name=i,br.prototype.hasOwnProperty("tree")||Object.defineProperty(br.prototype,"tree",{get(){return na(this)}}),this.parser=t,this.extension=[Qc.of(this),br.languageData.of((a,o,s)=>{let l=t7(a,o,s),u=l.type.prop(r0);if(!u)return[];let c=a.facet(u),h=l.type.prop(iVe);if(h){let d=l.resolve(o-l.from,s);for(let f of h)if(f.test(d,a)){let p=a.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(n)}isActiveAt(e,t,n=-1){return t7(e,t,n).type.prop(r0)==this.data}findRegions(e){let t=e.facet(Qc);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(a,o)=>{if(a.prop(r0)==this.data){n.push({from:o,to:o+a.length});return}let s=a.prop(wr.mounted);if(s){if(s.tree.prop(r0)==this.data){if(s.overlay)for(let l of s.overlay)n.push({from:l.from+o,to:l.to+o});else n.push({from:o,to:o+a.length});return}else if(s.overlay){let l=n.length;if(i(s.tree,s.overlay[0].from+o),n.length>l)return}}for(let l=0;l<a.children.length;l++){let u=a.children[l];u instanceof Qi&&i(u,a.positions[l]+o)}};return i(na(e),0),n}get allowsNesting(){return!0}}ul.setState=hr.define();function t7(r,e,t){let n=r.facet(Qc),i=na(r).topNode;if(!n||n.allowsNesting)for(let a=i;a;a=a.enter(e,t,Di.ExcludeBuffers))a.type.isTop&&(i=a);return i}function na(r){let e=r.field(ul.state,!1);return e?e.tree:Qi.empty}class aVe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let zg=null;class eM{constructor(e,t,n=[],i,a,o,s,l){this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=a,this.viewport=o,this.skipped=s,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new eM(e,t,[],Qi.empty,0,n,[],null)}startParse(){return this.parser.startParse(new aVe(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Qi.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(fd.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(fd.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=zg;zg=this;try{return e()}finally{zg=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=r7(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:a,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,h,d)=>l.push({fromA:u,toA:c,fromB:h,toB:d})),n=fd.applyChanges(n,l),i=Qi.empty,a=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&s.push({from:c,to:h})}}}return new eM(this.parser,t,n,i,a,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:a}=this.skipped[n];i<e.to&&a>e.from&&(this.fragments=r7(this.fragments,i,a),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends $He{createParse(t,n,i){let a=i[0].from,o=i[i.length-1].to;return{parsedPos:a,advance(){let s=zg;if(s){for(let l of i)s.tempSkipped.push(l);e&&(s.scheduleOn=s.scheduleOn?Promise.all([s.scheduleOn,e]):e)}return this.parsedPos=o,new Qi(ns.none,[],[],o-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return zg}}function r7(r,e,t){return fd.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class sm{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new sm(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=eM.create(e.facet(Qc).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new sm(n)}}ul.state=Fi.define({create:sm.init,update(r,e){for(let t of e.effects)if(t.is(ul.setState))return t.value;return e.startState.facet(Qc)!=e.state.facet(Qc)?sm.init(e.state):r.apply(e)}});let nQ=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(nQ=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const bA=typeof navigator<"u"&&!((yA=navigator.scheduling)===null||yA===void 0)&&yA.isInputPending?()=>navigator.scheduling.isInputPending():null,oVe=jn.fromClass(class{constructor(r){this.view=r,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(r){let e=this.view.state.field(ul.state).context;(e.updateViewport(r.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(r.docChanged||r.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:r}=this.view,e=r.field(ul.state);(e.tree!=e.context.tree||!e.context.isDone(r.doc.length))&&(this.working=nQ(this.work))}work(r){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:t,viewport:{to:n}}=this.view,i=t.field(ul.state);if(i.tree==i.context.tree&&i.context.isDone(n+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,r&&!bA?Math.max(25,r.timeRemaining()-5):1e9),o=i.context.treeLen<n&&t.doc.length>n+1e3,s=i.context.work(()=>bA&&bA()||Date.now()>a,n+(o?0:1e5));this.chunkBudget-=Date.now()-e,(s||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:ul.setState.of(new sm(i.context))})),this.chunkBudget>0&&!(s&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(r){r.scheduleOn&&(this.workScheduled++,r.scheduleOn.then(()=>this.scheduleWork()).catch(e=>Ga(this.view.state,e)).then(()=>this.workScheduled--),r.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Qc=Dt.define({combine(r){return r.length?r[0]:null},enables:r=>[ul.state,oVe,bt.contentAttributes.compute([r],e=>{let t=e.facet(r);return t&&t.name?{"data-language":t.name}:{}})]}),sVe=Dt.define(),G2=Dt.define({combine:r=>{if(!r.length)return"  ";let e=r[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return e}});function tM(r){let e=r.facet(G2);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function zv(r,e){let t="",n=r.tabSize,i=r.facet(G2)[0];if(i=="	"){for(;e>=n;)t+="	",e-=n;i=" "}for(let a=0;a<e;a++)t+=i;return t}function gR(r,e){r instanceof br&&(r=new $2(r));for(let n of r.state.facet(sVe)){let i=n(r,e);if(i!==void 0)return i}let t=na(r.state);return t.length>=e?uVe(r,t,e):null}class $2{constructor(e,t={}){this.state=e,this.options=t,this.unit=tM(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:a}=this.options;return i!=null&&i>=n.from&&i<=n.to?a&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,t);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,t=1){let{text:n,from:i}=this.lineAt(e,t),a=this.countColumn(n,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(a+=o-this.countColumn(n,n.search(/\S|$/))),a}countColumn(e,t=e.length){return zm(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:i}=this.lineAt(e,t),a=this.options.overrideIndentation;if(a){let o=a(i);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const lVe=new wr;function uVe(r,e,t){let n=e.resolveStack(t),i=n.node.enterUnfinishedNodesBefore(t);if(i!=n.node){let a=[];for(let o=i;o!=n.node;o=o.parent)a.push(o);for(let o=a.length-1;o>=0;o--)n={node:a[o],next:n}}return iQ(n,r,t)}function iQ(r,e,t){for(let n=r;n;n=n.next){let i=hVe(n.node);if(i)return i(vR.create(e,t,n))}return 0}function cVe(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function hVe(r){let e=r.type.prop(lVe);if(e)return e;let t=r.firstChild,n;if(t&&(n=t.type.prop(wr.closedBy))){let i=r.lastChild,a=i&&n.indexOf(i.name)>-1;return o=>mVe(o,!0,1,void 0,a&&!cVe(o)?i.from:void 0)}return r.parent==null?dVe:null}function dVe(){return 0}class vR extends $2{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new vR(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(fVe(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return iQ(this.context.next,this.base,this.pos)}}function fVe(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function pVe(r){let e=r.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let i=r.options.simulateBreak,a=r.state.doc.lineAt(t.from),o=i==null||i<=a.from?a.to:Math.min(a.to,i);for(let s=t.to;;){let l=e.childAfter(s);if(!l||l==n)return null;if(!l.type.isSkipped)return l.from<o?t:null;s=l.to}}function mVe(r,e,t,n,i){let a=r.textAfter,o=a.match(/^\s*/)[0].length,s=i==r.pos+o,l=pVe(r);return l?s?r.column(l.from):r.column(l.to):r.baseIndent+(s?0:r.unit*t)}const gVe=200;function vVe(){return br.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:n}=r.newSelection.main,i=t.lineAt(n);if(n>i.from+gVe)return r;let a=t.sliceString(i.from,n);if(!e.some(u=>u.test(a)))return r;let{state:o}=r,s=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==s)continue;s=c.from;let h=gR(o,c.from);if(h==null)continue;let d=/^\s*/.exec(c.text)[0],f=zv(o,h);d!=f&&l.push({from:c.from,to:c.from+d.length,insert:f})}return l.length?[r,{changes:l,sequential:!0}]:r})}const yVe=Dt.define(),bVe=new wr;function xVe(r,e,t){let n=na(r);if(n.length<t)return null;let i=n.resolveStack(t,1),a=null;for(let o=i;o;o=o.next){let s=o.node;if(s.to<=t||s.from>t)continue;if(a&&s.from<e)break;let l=s.type.prop(bVe);if(l&&(s.to<n.length-50||n.length==r.doc.length||!wVe(s))){let u=l(s,r);u&&u.from<=t&&u.from>=e&&u.to>t&&(a=u)}}return a}function wVe(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function rM(r,e,t){for(let n of r.facet(yVe)){let i=n(r,e,t);if(i)return i}return xVe(r,e,t)}function aQ(r,e){let t=e.mapPos(r.from,1),n=e.mapPos(r.to,-1);return t>=n?void 0:{from:t,to:n}}const X2=hr.define({map:aQ}),Cy=hr.define({map:aQ});function oQ(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(r.lineBlockAt(t));return e}const Nd=Fi.define({create(){return jt.none},update(r,e){r=r.map(e.changes);for(let t of e.effects)if(t.is(X2)&&!SVe(r,t.value.from,t.value.to)){let{preparePlaceholder:n}=e.state.facet(uQ),i=n?jt.replace({widget:new DVe(n(e.state,t.value))}):n7;r=r.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(Cy)&&(r=r.update({filter:(n,i)=>t.value.from!=n||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:n}=e.selection.main;r.between(n,n,(i,a)=>{i<n&&a>n&&(t=!0)}),t&&(r=r.update({filterFrom:n,filterTo:n,filter:(i,a)=>a<=n||i>=n}))}return r},provide:r=>bt.decorations.from(r),toJSON(r,e){let t=[];return r.between(0,e.doc.length,(n,i)=>{t.push(n,i)}),t},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<r.length;){let n=r[t++],i=r[t++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(n7.range(n,i))}return jt.set(e,!0)}});function nM(r,e,t){var n;let i=null;return(n=r.field(Nd,!1))===null||n===void 0||n.between(e,t,(a,o)=>{(!i||i.from>a)&&(i={from:a,to:o})}),i}function SVe(r,e,t){let n=!1;return r.between(e,e,(i,a)=>{i==e&&a==t&&(n=!0)}),n}function sQ(r,e){return r.field(Nd,!1)?e:e.concat(hr.appendConfig.of(cQ()))}const MVe=r=>{for(let e of oQ(r)){let t=rM(r.state,e.from,e.to);if(t)return r.dispatch({effects:sQ(r.state,[X2.of(t),lQ(r,t)])}),!0}return!1},_Ve=r=>{if(!r.state.field(Nd,!1))return!1;let e=[];for(let t of oQ(r)){let n=nM(r.state,t.from,t.to);n&&e.push(Cy.of(n),lQ(r,n,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function lQ(r,e,t=!0){let n=r.state.doc.lineAt(e.from).number,i=r.state.doc.lineAt(e.to).number;return bt.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${r.state.phrase("to")} ${i}.`)}const EVe=r=>{let{state:e}=r,t=[];for(let n=0;n<e.doc.length;){let i=r.lineBlockAt(n),a=rM(e,i.from,i.to);a&&t.push(X2.of(a)),n=(a?r.lineBlockAt(a.to):i).to+1}return t.length&&r.dispatch({effects:sQ(r.state,t)}),!!t.length},CVe=r=>{let e=r.state.field(Nd,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(n,i)=>{t.push(Cy.of({from:n,to:i}))}),r.dispatch({effects:t}),!0},AVe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:MVe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:_Ve},{key:"Ctrl-Alt-[",run:EVe},{key:"Ctrl-Alt-]",run:CVe}],TVe={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},uQ=Dt.define({combine(r){return kl(r,TVe)}});function cQ(r){return[Nd,OVe]}function hQ(r,e){let{state:t}=r,n=t.facet(uQ),i=o=>{let s=r.lineBlockAt(r.posAtDOM(o.target)),l=nM(r.state,s.from,s.to);l&&r.dispatch({effects:Cy.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(r,i,e);let a=document.createElement("span");return a.textContent=n.placeholderText,a.setAttribute("aria-label",t.phrase("folded code")),a.title=t.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=i,a}const n7=jt.replace({widget:new class extends Pu{toDOM(r){return hQ(r,null)}}});class DVe extends Pu{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return hQ(e,this.value)}}const kVe={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class xA extends Du{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function NVe(r={}){let e=Object.assign(Object.assign({},kVe),r),t=new xA(e,!0),n=new xA(e,!1),i=jn.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Qc)!=o.state.facet(Qc)||o.startState.field(Nd,!1)!=o.state.field(Nd,!1)||na(o.startState)!=na(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let s=new Xc;for(let l of o.viewportLineBlocks){let u=nM(o.state,l.from,l.to)?n:rM(o.state,l.from,l.to)?t:null;u&&s.add(l.from,l.from,u)}return s.finish()}}),{domEventHandlers:a}=e;return[i,kHe({class:"cm-foldGutter",markers(o){var s;return((s=o.plugin(i))===null||s===void 0?void 0:s.markers)||Er.empty},initialSpacer(){return new xA(e,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:(o,s,l)=>{if(a.click&&a.click(o,s,l))return!0;let u=nM(o.state,s.from,s.to);if(u)return o.dispatch({effects:Cy.of(u)}),!0;let c=rM(o.state,s.from,s.to);return c?(o.dispatch({effects:X2.of(c)}),!0):!1}})}),cQ()]}const OVe=bt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ay{constructor(e,t){this.specs=e;let n;function i(s){let l=Yc.newName();return(n||(n=Object.create(null)))["."+l]=s,l}const a=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof ul?s=>s.prop(r0)==o.data:o?s=>s==o:void 0,this.style=rQ(e.map(s=>({tag:s.tag,class:s.class||i(Object.assign({},s,{tag:null}))})),{all:a}).style,this.module=n?new Yc(n):null,this.themeType=t.themeType}static define(e,t){return new Ay(e,t||{})}}const ek=Dt.define(),dQ=Dt.define({combine(r){return r.length?[r[0]]:null}});function wA(r){let e=r.facet(ek);return e.length?e:r.facet(dQ)}function fQ(r,e){let t=[PVe],n;return r instanceof Ay&&(r.module&&t.push(bt.styleModule.of(r.module)),n=r.themeType),e!=null&&e.fallback?t.push(dQ.of(r)):n?t.push(ek.computeN([bt.darkTheme],i=>i.facet(bt.darkTheme)==(n=="dark")?[r]:[])):t.push(ek.of(r)),t}class RVe{constructor(e){this.markCache=Object.create(null),this.tree=na(e.state),this.decorations=this.buildDeco(e,wA(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=na(e.state),n=wA(e.state),i=n!=wA(e.startState),{viewport:a}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<a.to&&!i&&t.type==this.tree.type&&o>=a.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=a.to)}buildDeco(e,t){if(!t||!this.tree.length)return jt.none;let n=new Xc;for(let{from:i,to:a}of e.visibleRanges)tVe(this.tree,t,(o,s,l)=>{n.add(o,s,this.markCache[l]||(this.markCache[l]=jt.mark({class:l})))},i,a);return n.finish()}}const PVe=Wd.high(jn.fromClass(RVe,{decorations:r=>r.decorations})),IVe=Ay.define([{tag:tt.meta,color:"#404740"},{tag:tt.link,textDecoration:"underline"},{tag:tt.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tt.emphasis,fontStyle:"italic"},{tag:tt.strong,fontWeight:"bold"},{tag:tt.strikethrough,textDecoration:"line-through"},{tag:tt.keyword,color:"#708"},{tag:[tt.atom,tt.bool,tt.url,tt.contentSeparator,tt.labelName],color:"#219"},{tag:[tt.literal,tt.inserted],color:"#164"},{tag:[tt.string,tt.deleted],color:"#a11"},{tag:[tt.regexp,tt.escape,tt.special(tt.string)],color:"#e40"},{tag:tt.definition(tt.variableName),color:"#00f"},{tag:tt.local(tt.variableName),color:"#30a"},{tag:[tt.typeName,tt.namespace],color:"#085"},{tag:tt.className,color:"#167"},{tag:[tt.special(tt.variableName),tt.macroName],color:"#256"},{tag:tt.definition(tt.propertyName),color:"#00c"},{tag:tt.comment,color:"#940"},{tag:tt.invalid,color:"#f00"}]),LVe=bt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),pQ=1e4,mQ="()[]{}",gQ=Dt.define({combine(r){return kl(r,{afterCursor:!0,brackets:mQ,maxScanDistance:pQ,renderMatch:zVe})}}),FVe=jt.mark({class:"cm-matchingBracket"}),BVe=jt.mark({class:"cm-nonmatchingBracket"});function zVe(r){let e=[],t=r.matched?FVe:BVe;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}const UVe=Fi.define({create(){return jt.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],n=e.state.facet(gQ);for(let i of e.state.selection.ranges){if(!i.empty)continue;let a=cl(e.state,i.head,-1,n)||i.head>0&&cl(e.state,i.head-1,1,n)||n.afterCursor&&(cl(e.state,i.head,1,n)||i.head<e.state.doc.length&&cl(e.state,i.head+1,-1,n));a&&(t=t.concat(n.renderMatch(a,e.state)))}return jt.set(t,!0)},provide:r=>bt.decorations.from(r)}),jVe=[UVe,LVe];function HVe(r={}){return[gQ.of(r),jVe]}const VVe=new wr;function tk(r,e,t){let n=r.prop(e<0?wr.openedBy:wr.closedBy);if(n)return n;if(r.name.length==1){let i=t.indexOf(r.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function rk(r){let e=r.type.prop(VVe);return e?e(r.node):r}function cl(r,e,t,n={}){let i=n.maxScanDistance||pQ,a=n.brackets||mQ,o=na(r),s=o.resolveInner(e,t);for(let l=s;l;l=l.parent){let u=tk(l.type,t,a);if(u&&l.from<l.to){let c=rk(l);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return qVe(r,e,t,l,c,u,a)}}return WVe(r,e,t,o,s.type,i,a)}function qVe(r,e,t,n,i,a,o){let s=n.parent,l={from:i.from,to:i.to},u=0,c=s==null?void 0:s.cursor();if(c&&(t<0?c.childBefore(n.from):c.childAfter(n.to)))do if(t<0?c.to<=n.from:c.from>=n.to){if(u==0&&a.indexOf(c.type.name)>-1&&c.from<c.to){let h=rk(c);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(tk(c.type,t,o))u++;else if(tk(c.type,-t,o)){if(u==0){let h=rk(c);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function WVe(r,e,t,n,i,a,o){let s=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),l=o.indexOf(s);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=r.doc.iterRange(e,t>0?r.doc.length:0),h=0;for(let d=0;!c.next().done&&d<=a;){let f=c.value;t<0&&(d+=f.length);let p=e+d*t;for(let v=t>0?0:f.length-1,y=t>0?f.length:-1;v!=y;v+=t){let g=o.indexOf(f[v]);if(!(g<0||n.resolveInner(p+v,1).type!=i))if(g%2==0==t>0)h++;else{if(h==1)return{start:u,end:{from:p+v,to:p+v+1},matched:g>>1==l>>1};h--}}t>0&&(d+=f.length)}return c.done?{start:u,matched:!1}:null}const GVe=Object.create(null),i7=[ns.none],a7=[],o7=Object.create(null),$Ve=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])$Ve[r]=XVe(GVe,e);function SA(r,e){a7.indexOf(r)>-1||(a7.push(r),console.warn(e))}function XVe(r,e){let t=[];for(let s of e.split(" ")){let l=[];for(let u of s.split(".")){let c=r[u]||tt[u];c?typeof c=="function"?l.length?l=l.map(c):SA(u,`Modifier ${u} used at start of tag`):l.length?SA(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:SA(u,`Unknown highlighting tag ${u}`)}for(let u of l)t.push(u)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+t.map(s=>s.id),a=o7[i];if(a)return a.id;let o=o7[i]=ns.define({id:i7.length,name:n,props:[QHe({[n]:t})]});return i7.push(o),o.id}un.RTL,un.LTR;const YVe=r=>{let{state:e}=r,t=e.doc.lineAt(e.selection.main.from),n=bR(r.state,t.from);return n.line?JVe(r):n.block?KVe(r):!1};function yR(r,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let i=r(e,t);return i?(n(t.update(i)),!0):!1}}const JVe=yR(tqe,0),ZVe=yR(vQ,0),KVe=yR((r,e)=>vQ(r,e,eqe(e)),0);function bR(r,e){let t=r.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Ug=50;function QVe(r,{open:e,close:t},n,i){let a=r.sliceDoc(n-Ug,n),o=r.sliceDoc(i,i+Ug),s=/\s*$/.exec(a)[0].length,l=/^\s*/.exec(o)[0].length,u=a.length-s;if(a.slice(u-e.length,u)==e&&o.slice(l,l+t.length)==t)return{open:{pos:n-s,margin:s&&1},close:{pos:i+l,margin:l&&1}};let c,h;i-n<=2*Ug?c=h=r.sliceDoc(n,i):(c=r.sliceDoc(n,n+Ug),h=r.sliceDoc(i-Ug,i));let d=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(h)[0].length,p=h.length-f-t.length;return c.slice(d,d+e.length)==e&&h.slice(p,p+t.length)==t?{open:{pos:n+d+e.length,margin:/\s/.test(c.charAt(d+e.length))?1:0},close:{pos:i-f-t.length,margin:/\s/.test(h.charAt(p-1))?1:0}}:null}function eqe(r){let e=[];for(let t of r.selection.ranges){let n=r.doc.lineAt(t.from),i=t.to<=n.to?n:r.doc.lineAt(t.to),a=e.length-1;a>=0&&e[a].to>n.from?e[a].to=i.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return e}function vQ(r,e,t=e.selection.ranges){let n=t.map(a=>bR(e,a.from).block);if(!n.every(a=>a))return null;let i=t.map((a,o)=>QVe(e,n[o],a.from,a.to));if(r!=2&&!i.every(a=>a))return{changes:e.changes(t.map((a,o)=>i[o]?[]:[{from:a.from,insert:n[o].open+" "},{from:a.to,insert:" "+n[o].close}]))};if(r!=1&&i.some(a=>a)){let a=[];for(let o=0,s;o<i.length;o++)if(s=i[o]){let l=n[o],{open:u,close:c}=s;a.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:a}}return null}function tqe(r,e,t=e.selection.ranges){let n=[],i=-1;for(let{from:a,to:o}of t){let s=n.length,l=1e9,u=bR(e,a).line;if(u){for(let c=a;c<=o;){let h=e.doc.lineAt(c);if(h.from>i&&(a==o||o>h.from)){i=h.from;let d=/^\s*/.exec(h.text)[0].length,f=d==h.length,p=h.text.slice(d,d+u.length)==u?d:-1;d<h.text.length&&d<l&&(l=d),n.push({line:h,comment:p,token:u,indent:d,empty:f,single:!1})}c=h.to+1}if(l<1e9)for(let c=s;c<n.length;c++)n[c].indent<n[c].line.text.length&&(n[c].indent=l);n.length==s+1&&(n[s].single=!0)}}if(r!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:s,token:l,indent:u,empty:c,single:h}of n)(h||!c)&&a.push({from:s.from+u,insert:l+" "});let o=e.changes(a);return{changes:o,selection:e.selection.map(o,1)}}else if(r!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:o,comment:s,token:l}of n)if(s>=0){let u=o.from+s,c=u+l.length;o.text[c-o.from]==" "&&c++,a.push({from:u,to:c})}return{changes:a}}return null}const nk=Dl.define(),rqe=Dl.define(),nqe=Dt.define(),yQ=Dt.define({combine(r){return kl(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,i)=>e(n,i)||t(n,i)})}}),bQ=Fi.define({create(){return hl.empty},update(r,e){let t=e.state.facet(yQ),n=e.annotation(nk);if(n){let l=$a.fromTransaction(e,n.selection),u=n.side,c=u==0?r.undone:r.done;return l?c=iM(c,c.length,t.minDepth,l):c=SQ(c,e.startState.selection),new hl(u==0?n.rest:c,u==0?c:n.rest)}let i=e.annotation(rqe);if((i=="full"||i=="before")&&(r=r.isolate()),e.annotation(oi.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let a=$a.fromTransaction(e),o=e.annotation(oi.time),s=e.annotation(oi.userEvent);return a?r=r.addChanges(a,o,s,t,e):e.selection&&(r=r.addSelection(e.startState.selection,o,s,t.newGroupDelay)),(i=="full"||i=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new hl(r.done.map($a.fromJSON),r.undone.map($a.fromJSON))}});function iqe(r={}){return[bQ,yQ.of(r),bt.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?xQ:e.inputType=="historyRedo"?ik:null;return n?(e.preventDefault(),n(t)):!1}})]}function Y2(r,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let i=t.field(bQ,!1);if(!i)return!1;let a=i.pop(r,t,e);return a?(n(a),!0):!1}}const xQ=Y2(0,!1),ik=Y2(1,!1),aqe=Y2(0,!0),oqe=Y2(1,!0);class $a{constructor(e,t,n,i,a){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=a}setSelAfter(e){return new $a(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new $a(e.changes&&ni.fromJSON(e.changes),[],e.mapped&&yl.fromJSON(e.mapped),e.startSelection&&at.fromJSON(e.startSelection),e.selectionsAfter.map(at.fromJSON))}static fromTransaction(e,t){let n=Go;for(let i of e.startState.facet(nqe)){let a=i(e);a.length&&(n=n.concat(a))}return!n.length&&e.changes.empty?null:new $a(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Go)}static selection(e){return new $a(void 0,Go,void 0,void 0,e)}}function iM(r,e,t,n){let i=e+1>t+20?e-t-1:0,a=r.slice(i,e);return a.push(n),a}function sqe(r,e){let t=[],n=!1;return r.iterChangedRanges((i,a)=>t.push(i,a)),e.iterChangedRanges((i,a,o,s)=>{for(let l=0;l<t.length;){let u=t[l++],c=t[l++];s>=u&&o<=c&&(n=!0)}}),n}function lqe(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function wQ(r,e){return r.length?e.length?r.concat(e):r:e}const Go=[],uqe=200;function SQ(r,e){if(r.length){let t=r[r.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-uqe));return n.length&&n[n.length-1].eq(e)?r:(n.push(e),iM(r,r.length-1,1e9,t.setSelAfter(n)))}else return[$a.selection([e])]}function cqe(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function MA(r,e){if(!r.length)return r;let t=r.length,n=Go;for(;t;){let i=hqe(r[t-1],e,n);if(i.changes&&!i.changes.empty||i.effects.length){let a=r.slice(0,t);return a[t-1]=i,a}else e=i.mapped,t--,n=i.selectionsAfter}return n.length?[$a.selection(n)]:Go}function hqe(r,e,t){let n=wQ(r.selectionsAfter.length?r.selectionsAfter.map(s=>s.map(e)):Go,t);if(!r.changes)return $a.selection(n);let i=r.changes.map(e),a=e.mapDesc(r.changes,!0),o=r.mapped?r.mapped.composeDesc(a):a;return new $a(i,hr.mapEffects(r.effects,e),o,r.startSelection.map(a),n)}const dqe=/^(input\.type|delete)($|\.)/;class hl{constructor(e,t,n=0,i=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new hl(this.done,this.undone):this}addChanges(e,t,n,i,a){let o=this.done,s=o[o.length-1];return s&&s.changes&&!s.changes.empty&&e.changes&&(!n||dqe.test(n))&&(!s.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(a,sqe(s.changes,e.changes))||n=="input.type.compose")?o=iM(o,o.length-1,i.minDepth,new $a(e.changes.compose(s.changes),wQ(e.effects,s.effects),s.mapped,s.startSelection,Go)):o=iM(o,o.length,i.minDepth,e),new hl(o,Go,t,n)}addSelection(e,t,n,i){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:Go;return a.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&lqe(a[a.length-1],e)?this:new hl(SQ(this.done,e),this.undone,t,n)}addMapping(e){return new hl(MA(this.done,e),MA(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=e==0?this.done:this.undone;if(i.length==0)return null;let a=i[i.length-1],o=a.selectionsAfter[0]||t.selection;if(n&&a.selectionsAfter.length)return t.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:nk.of({side:e,rest:cqe(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let s=i.length==1?Go:i.slice(0,i.length-1);return a.mapped&&(s=MA(s,a.mapped)),t.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:nk.of({side:e,rest:s,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}hl.empty=new hl(Go,Go);const fqe=[{key:"Mod-z",run:xQ,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ik,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ik,preventDefault:!0},{key:"Mod-u",run:aqe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:oqe,preventDefault:!0}];function Um(r,e){return at.create(r.ranges.map(e),r.mainIndex)}function Nl(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Fs({state:r,dispatch:e},t){let n=Um(r.selection,t);return n.eq(r.selection,!0)?!1:(e(Nl(r,n)),!0)}function J2(r,e){return at.cursor(e?r.to:r.from)}function MQ(r,e){return Fs(r,t=>t.empty?r.moveByChar(t,e):J2(t,e))}function oa(r){return r.textDirectionAt(r.state.selection.main.head)==un.LTR}const _Q=r=>MQ(r,!oa(r)),EQ=r=>MQ(r,oa(r));function CQ(r,e){return Fs(r,t=>t.empty?r.moveByGroup(t,e):J2(t,e))}const pqe=r=>CQ(r,!oa(r)),mqe=r=>CQ(r,oa(r));function gqe(r,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function Z2(r,e,t){let n=na(r).resolveInner(e.head),i=t?wr.closedBy:wr.openedBy;for(let l=e.head;;){let u=t?n.childAfter(l):n.childBefore(l);if(!u)break;gqe(r,u,i)?n=u:l=t?u.to:u.from}let a=n.type.prop(i),o,s;return a&&(o=t?cl(r,n.from,1):cl(r,n.to,-1))&&o.matched?s=t?o.end.to:o.end.from:s=t?n.to:n.from,at.cursor(s,t?-1:1)}const vqe=r=>Fs(r,e=>Z2(r.state,e,!oa(r))),yqe=r=>Fs(r,e=>Z2(r.state,e,oa(r)));function AQ(r,e){return Fs(r,t=>{if(!t.empty)return J2(t,e);let n=r.moveVertically(t,e);return n.head!=t.head?n:r.moveToLineBoundary(t,e)})}const TQ=r=>AQ(r,!1),DQ=r=>AQ(r,!0);function kQ(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,t=0,n=0,i;if(e){for(let a of r.state.facet(bt.scrollMargins)){let o=a(r);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(n=Math.max(o==null?void 0:o.bottom,n))}i=r.scrollDOM.clientHeight-t-n}else i=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:n,selfScroll:e,height:Math.max(r.defaultLineHeight,i-5)}}function NQ(r,e){let t=kQ(r),{state:n}=r,i=Um(n.selection,o=>o.empty?r.moveVertically(o,e,t.height):J2(o,e));if(i.eq(n.selection))return!1;let a;if(t.selfScroll){let o=r.coordsAtPos(n.selection.main.head),s=r.scrollDOM.getBoundingClientRect(),l=s.top+t.marginTop,u=s.bottom-t.marginBottom;o&&o.top>l&&o.bottom<u&&(a=bt.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return r.dispatch(Nl(n,i),{effects:a}),!0}const s7=r=>NQ(r,!1),ak=r=>NQ(r,!0);function hh(r,e,t){let n=r.lineBlockAt(e.head),i=r.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?n.to:n.from)&&(i=r.moveToLineBoundary(e,t,!1)),!t&&i.head==n.from&&n.length){let a=/^\s*/.exec(r.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;a&&e.head!=n.from+a&&(i=at.cursor(n.from+a))}return i}const bqe=r=>Fs(r,e=>hh(r,e,!0)),xqe=r=>Fs(r,e=>hh(r,e,!1)),wqe=r=>Fs(r,e=>hh(r,e,!oa(r))),Sqe=r=>Fs(r,e=>hh(r,e,oa(r))),Mqe=r=>Fs(r,e=>at.cursor(r.lineBlockAt(e.head).from,1)),_qe=r=>Fs(r,e=>at.cursor(r.lineBlockAt(e.head).to,-1));function Eqe(r,e,t){let n=!1,i=Um(r.selection,a=>{let o=cl(r,a.head,-1)||cl(r,a.head,1)||a.head>0&&cl(r,a.head-1,1)||a.head<r.doc.length&&cl(r,a.head+1,-1);if(!o||!o.end)return a;n=!0;let s=o.start.from==a.head?o.end.to:o.end.from;return at.cursor(s)});return n?(e(Nl(r,i)),!0):!1}const Cqe=({state:r,dispatch:e})=>Eqe(r,e);function ss(r,e){let t=Um(r.state.selection,n=>{let i=e(n);return at.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(r.state.selection)?!1:(r.dispatch(Nl(r.state,t)),!0)}function OQ(r,e){return ss(r,t=>r.moveByChar(t,e))}const RQ=r=>OQ(r,!oa(r)),PQ=r=>OQ(r,oa(r));function IQ(r,e){return ss(r,t=>r.moveByGroup(t,e))}const Aqe=r=>IQ(r,!oa(r)),Tqe=r=>IQ(r,oa(r)),Dqe=r=>ss(r,e=>Z2(r.state,e,!oa(r))),kqe=r=>ss(r,e=>Z2(r.state,e,oa(r)));function LQ(r,e){return ss(r,t=>r.moveVertically(t,e))}const FQ=r=>LQ(r,!1),BQ=r=>LQ(r,!0);function zQ(r,e){return ss(r,t=>r.moveVertically(t,e,kQ(r).height))}const l7=r=>zQ(r,!1),u7=r=>zQ(r,!0),Nqe=r=>ss(r,e=>hh(r,e,!0)),Oqe=r=>ss(r,e=>hh(r,e,!1)),Rqe=r=>ss(r,e=>hh(r,e,!oa(r))),Pqe=r=>ss(r,e=>hh(r,e,oa(r))),Iqe=r=>ss(r,e=>at.cursor(r.lineBlockAt(e.head).from)),Lqe=r=>ss(r,e=>at.cursor(r.lineBlockAt(e.head).to)),c7=({state:r,dispatch:e})=>(e(Nl(r,{anchor:0})),!0),h7=({state:r,dispatch:e})=>(e(Nl(r,{anchor:r.doc.length})),!0),d7=({state:r,dispatch:e})=>(e(Nl(r,{anchor:r.selection.main.anchor,head:0})),!0),f7=({state:r,dispatch:e})=>(e(Nl(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),Fqe=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),Bqe=({state:r,dispatch:e})=>{let t=K2(r).map(({from:n,to:i})=>at.range(n,Math.min(i+1,r.doc.length)));return e(r.update({selection:at.create(t),userEvent:"select"})),!0},zqe=({state:r,dispatch:e})=>{let t=Um(r.selection,n=>{var i;let a=na(r).resolveStack(n.from,1);for(let o=a;o;o=o.next){let{node:s}=o;if((s.from<n.from&&s.to>=n.to||s.to>n.to&&s.from<=n.from)&&!((i=s.parent)===null||i===void 0)&&i.parent)return at.range(s.to,s.from)}return n});return e(Nl(r,t)),!0},Uqe=({state:r,dispatch:e})=>{let t=r.selection,n=null;return t.ranges.length>1?n=at.create([t.main]):t.main.empty||(n=at.create([at.cursor(t.main.head)])),n?(e(Nl(r,n)),!0):!1};function Ty(r,e){if(r.state.readOnly)return!1;let t="delete.selection",{state:n}=r,i=n.changeByRange(a=>{let{from:o,to:s}=a;if(o==s){let l=e(a);l<o?(t="delete.backward",l=Tx(r,l,!1)):l>o&&(t="delete.forward",l=Tx(r,l,!0)),o=Math.min(o,l),s=Math.max(s,l)}else o=Tx(r,o,!1),s=Tx(r,s,!0);return o==s?{range:a}:{changes:{from:o,to:s},range:at.cursor(o,o<a.head?-1:1)}});return i.changes.empty?!1:(r.dispatch(n.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?bt.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Tx(r,e,t){if(r instanceof bt)for(let n of r.state.facet(bt.atomicRanges).map(i=>i(r)))n.between(e,e,(i,a)=>{i<e&&a>e&&(e=t?a:i)});return e}const UQ=(r,e,t)=>Ty(r,n=>{let i=n.from,{state:a}=r,o=a.doc.lineAt(i),s,l;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(s=o.text.slice(0,i-o.from))){if(s[s.length-1]=="	")return i-1;let u=zm(s,a.tabSize),c=u%tM(a)||tM(a);for(let h=0;h<c&&s[s.length-1-h]==" ";h++)i--;l=i}else l=Oi(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?a.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=Oi(o.text,l-o.from,!1,!1)+o.from);return l}),ok=r=>UQ(r,!1,!0),jQ=r=>UQ(r,!0,!1),HQ=(r,e)=>Ty(r,t=>{let n=t.head,{state:i}=r,a=i.doc.lineAt(n),o=i.charCategorizer(n);for(let s=null;;){if(n==(e?a.to:a.from)){n==t.head&&a.number!=(e?i.doc.lines:1)&&(n+=e?1:-1);break}let l=Oi(a.text,n-a.from,e)+a.from,u=a.text.slice(Math.min(n,l)-a.from,Math.max(n,l)-a.from),c=o(u);if(s!=null&&c!=s)break;(u!=" "||n!=t.head)&&(s=c),n=l}return n}),VQ=r=>HQ(r,!1),jqe=r=>HQ(r,!0),Hqe=r=>Ty(r,e=>{let t=r.lineBlockAt(e.head).to;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),Vqe=r=>Ty(r,e=>{let t=r.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),qqe=r=>Ty(r,e=>{let t=r.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),Wqe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:kr.of(["",""])},range:at.cursor(n.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},Gqe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(n=>{if(!n.empty||n.from==0||n.from==r.doc.length)return{range:n};let i=n.from,a=r.doc.lineAt(i),o=i==a.from?i-1:Oi(a.text,i-a.from,!1)+a.from,s=i==a.to?i+1:Oi(a.text,i-a.from,!0)+a.from;return{changes:{from:o,to:s,insert:r.doc.slice(i,s).append(r.doc.slice(o,i))},range:at.cursor(s)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function K2(r){let e=[],t=-1;for(let n of r.selection.ranges){let i=r.doc.lineAt(n.from),a=r.doc.lineAt(n.to);if(!n.empty&&n.to==a.from&&(a=r.doc.lineAt(n.to-1)),t>=i.number){let o=e[e.length-1];o.to=a.to,o.ranges.push(n)}else e.push({from:i.from,to:a.to,ranges:[n]});t=a.number+1}return e}function qQ(r,e,t){if(r.readOnly)return!1;let n=[],i=[];for(let a of K2(r)){if(t?a.to==r.doc.length:a.from==0)continue;let o=r.doc.lineAt(t?a.to+1:a.from-1),s=o.length+1;if(t){n.push({from:a.to,to:o.to},{from:a.from,insert:o.text+r.lineBreak});for(let l of a.ranges)i.push(at.range(Math.min(r.doc.length,l.anchor+s),Math.min(r.doc.length,l.head+s)))}else{n.push({from:o.from,to:a.from},{from:a.to,insert:r.lineBreak+o.text});for(let l of a.ranges)i.push(at.range(l.anchor-s,l.head-s))}}return n.length?(e(r.update({changes:n,scrollIntoView:!0,selection:at.create(i,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const $qe=({state:r,dispatch:e})=>qQ(r,e,!1),Xqe=({state:r,dispatch:e})=>qQ(r,e,!0);function WQ(r,e,t){if(r.readOnly)return!1;let n=[];for(let i of K2(r))t?n.push({from:i.from,insert:r.doc.slice(i.from,i.to)+r.lineBreak}):n.push({from:i.to,insert:r.lineBreak+r.doc.slice(i.from,i.to)});return e(r.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Yqe=({state:r,dispatch:e})=>WQ(r,e,!1),Jqe=({state:r,dispatch:e})=>WQ(r,e,!0),Zqe=r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes(K2(e).map(({from:i,to:a})=>(i>0?i--:a<e.doc.length&&a++,{from:i,to:a}))),n=Um(e.selection,i=>{let a;if(r.lineWrapping){let o=r.lineBlockAt(i.head),s=r.coordsAtPos(i.head,i.assoc||1);s&&(a=o.bottom+r.documentTop-s.bottom+r.defaultLineHeight/2)}return r.moveVertically(i,!0,a)}).map(t);return r.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Kqe(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=na(r).resolveInner(e),n=t.childBefore(e),i=t.childAfter(e),a;return n&&i&&n.to<=e&&i.from>=e&&(a=n.type.prop(wr.closedBy))&&a.indexOf(i.name)>-1&&r.doc.lineAt(n.to).from==r.doc.lineAt(i.from).from&&!/\S/.test(r.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const Qqe=GQ(!1),eWe=GQ(!0);function GQ(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{let{from:a,to:o}=i,s=e.doc.lineAt(a),l=!r&&a==o&&Kqe(e,a);r&&(a=o=(o<=s.to?s:e.doc.lineAt(o)).to);let u=new $2(e,{simulateBreak:a,simulateDoubleBreak:!!l}),c=gR(u,a);for(c==null&&(c=zm(/^\s*/.exec(e.doc.lineAt(a).text)[0],e.tabSize));o<s.to&&/\s/.test(s.text[o-s.from]);)o++;l?{from:a,to:o}=l:a>s.from&&a<s.from+100&&!/\S/.test(s.text.slice(0,a))&&(a=s.from);let h=["",zv(e,c)];return l&&h.push(zv(e,u.lineIndent(s.from,-1))),{changes:{from:a,to:o,insert:kr.of(h)},range:at.cursor(a+1+h[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function xR(r,e){let t=-1;return r.changeByRange(n=>{let i=[];for(let o=n.from;o<=n.to;){let s=r.doc.lineAt(o);s.number>t&&(n.empty||n.to>s.from)&&(e(s,i,n),t=s.number),o=s.to+1}let a=r.changes(i);return{changes:i,range:at.range(a.mapPos(n.anchor,1),a.mapPos(n.head,1))}})}const tWe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),n=new $2(r,{overrideIndentation:a=>t[a]??-1}),i=xR(r,(a,o,s)=>{let l=gR(n,a.from);if(l==null)return;/\S/.test(a.text)||(l=0);let u=/^\s*/.exec(a.text)[0],c=zv(r,l);(u!=c||s.from<a.from+u.length)&&(t[a.from]=l,o.push({from:a.from,to:a.from+u.length,insert:c}))});return i.changes.empty||e(r.update(i,{userEvent:"indent"})),!0},$Q=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(xR(r,(t,n)=>{n.push({from:t.from,insert:r.facet(G2)})}),{userEvent:"input.indent"})),!0),XQ=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(xR(r,(t,n)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let a=zm(i,r.tabSize),o=0,s=zv(r,Math.max(0,a-tM(r)));for(;o<i.length&&o<s.length&&i.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+i.length,insert:s.slice(o)})}),{userEvent:"delete.dedent"})),!0),rWe=r=>(r.setTabFocusMode(),!0),nWe=[{key:"Ctrl-b",run:_Q,shift:RQ,preventDefault:!0},{key:"Ctrl-f",run:EQ,shift:PQ},{key:"Ctrl-p",run:TQ,shift:FQ},{key:"Ctrl-n",run:DQ,shift:BQ},{key:"Ctrl-a",run:Mqe,shift:Iqe},{key:"Ctrl-e",run:_qe,shift:Lqe},{key:"Ctrl-d",run:jQ},{key:"Ctrl-h",run:ok},{key:"Ctrl-k",run:Hqe},{key:"Ctrl-Alt-h",run:VQ},{key:"Ctrl-o",run:Wqe},{key:"Ctrl-t",run:Gqe},{key:"Ctrl-v",run:ak}],iWe=[{key:"ArrowLeft",run:_Q,shift:RQ,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:pqe,shift:Aqe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:wqe,shift:Rqe,preventDefault:!0},{key:"ArrowRight",run:EQ,shift:PQ,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:mqe,shift:Tqe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Sqe,shift:Pqe,preventDefault:!0},{key:"ArrowUp",run:TQ,shift:FQ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:c7,shift:d7},{mac:"Ctrl-ArrowUp",run:s7,shift:l7},{key:"ArrowDown",run:DQ,shift:BQ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:h7,shift:f7},{mac:"Ctrl-ArrowDown",run:ak,shift:u7},{key:"PageUp",run:s7,shift:l7},{key:"PageDown",run:ak,shift:u7},{key:"Home",run:xqe,shift:Oqe,preventDefault:!0},{key:"Mod-Home",run:c7,shift:d7},{key:"End",run:bqe,shift:Nqe,preventDefault:!0},{key:"Mod-End",run:h7,shift:f7},{key:"Enter",run:Qqe},{key:"Mod-a",run:Fqe},{key:"Backspace",run:ok,shift:ok},{key:"Delete",run:jQ},{key:"Mod-Backspace",mac:"Alt-Backspace",run:VQ},{key:"Mod-Delete",mac:"Alt-Delete",run:jqe},{mac:"Mod-Backspace",run:Vqe},{mac:"Mod-Delete",run:qqe}].concat(nWe.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),YQ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:vqe,shift:Dqe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:yqe,shift:kqe},{key:"Alt-ArrowUp",run:$qe},{key:"Shift-Alt-ArrowUp",run:Yqe},{key:"Alt-ArrowDown",run:Xqe},{key:"Shift-Alt-ArrowDown",run:Jqe},{key:"Escape",run:Uqe},{key:"Mod-Enter",run:eWe},{key:"Alt-l",mac:"Ctrl-l",run:Bqe},{key:"Mod-i",run:zqe,preventDefault:!0},{key:"Mod-[",run:XQ},{key:"Mod-]",run:$Q},{key:"Mod-Alt-\\",run:tWe},{key:"Shift-Mod-k",run:Zqe},{key:"Shift-Mod-\\",run:Cqe},{key:"Mod-/",run:YVe},{key:"Alt-A",run:ZVe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:rWe}].concat(iWe),aWe={key:"Tab",run:$Q,shift:XQ};function tn(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];typeof i=="string"?r.setAttribute(n,i):i!=null&&(r[n]=i)}e++}for(;e<arguments.length;e++)JQ(r,arguments[e]);return r}function JQ(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)JQ(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}const p7=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class lm{constructor(e,t,n=0,i=e.length,a,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=a?s=>a(p7(s)):p7,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ai(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=eR(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Vo(e);let i=this.normalize(t);for(let a=0,o=n;;a++){let s=i.charCodeAt(a),l=this.match(s,o,this.bufferPos+this.bufferStart);if(a==i.length-1){if(l)return this.value=l,this;break}o==n&&a<t.length&&t.charCodeAt(a)==s&&o++}}}match(e,t,n){let i=null;for(let a=0;a<this.matches.length;a+=2){let o=this.matches[a],s=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[a+1],to:n}:(this.matches[a]++,s=!0)),s||(this.matches.splice(a,2),a-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:n}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(lm.prototype[Symbol.iterator]=function(){return this});const ZQ={from:-1,to:-1,match:/.*/.exec("")},wR="gm"+(/x/.unicode==null?"":"u");class KQ{constructor(e,t,n,i=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=ZQ,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new QQ(e,t,n,i,a);this.re=new RegExp(t,wR+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=aM(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=aM(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const _A=new WeakMap;class Pp{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let i=_A.get(e);if(!i||i.from>=n||i.to<=t){let s=new Pp(t,e.sliceString(t,n));return _A.set(e,s),s}if(i.from==t&&i.to==n)return i;let{text:a,from:o}=i;return o>t&&(a=e.sliceString(t,o)+a,o=t),i.to<n&&(a+=e.sliceString(i.to,n)),_A.set(e,new Pp(o,a)),new Pp(t,a.slice(t-o,n-o))}}class QQ{constructor(e,t,n,i,a){this.text=e,this.to=a,this.done=!1,this.value=ZQ,this.matchPos=aM(e,i),this.re=new RegExp(t,wR+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=Pp.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let n=this.flat.from+t.index,i=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this.matchPos=aM(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Pp.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(KQ.prototype[Symbol.iterator]=QQ.prototype[Symbol.iterator]=function(){return this});function oWe(r){try{return new RegExp(r,wR),!0}catch{return!1}}function aM(r,e){if(e>=r.length)return e;let t=r.lineAt(e),n;for(;e<t.to&&(n=t.text.charCodeAt(e-t.from))>=56320&&n<57344;)e++;return e}function sk(r){let e=String(r.state.doc.lineAt(r.state.selection.main.head).number),t=tn("input",{class:"cm-textfield",name:"line",value:e}),n=tn("form",{class:"cm-gotoLine",onkeydown:a=>{a.keyCode==27?(a.preventDefault(),r.dispatch({effects:oM.of(!1)}),r.focus()):a.keyCode==13&&(a.preventDefault(),i())},onsubmit:a=>{a.preventDefault(),i()}},tn("label",r.state.phrase("Go to line"),": ",t)," ",tn("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function i(){let a=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!a)return;let{state:o}=r,s=o.doc.lineAt(o.selection.main.head),[,l,u,c,h]=a,d=c?+c.slice(1):0,f=u?+u:s.number;if(u&&h){let y=f/100;l&&(y=y*(l=="-"?-1:1)+s.number/o.doc.lines),f=Math.round(o.doc.lines*y)}else u&&l&&(f=f*(l=="-"?-1:1)+s.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,f))),v=at.cursor(p.from+Math.max(0,Math.min(d,p.length)));r.dispatch({effects:[oM.of(!1),bt.scrollIntoView(v.from,{y:"center"})],selection:v}),r.focus()}return{dom:n}}const oM=hr.define(),m7=Fi.define({create(){return!0},update(r,e){for(let t of e.effects)t.is(oM)&&(r=t.value);return r},provide:r=>Fv.from(r,e=>e?sk:null)}),sWe=r=>{let e=Lv(r,sk);if(!e){let t=[oM.of(!0)];r.state.field(m7,!1)==null&&t.push(hr.appendConfig.of([m7,lWe])),r.dispatch({effects:t}),e=Lv(r,sk)}return e&&e.dom.querySelector("input").select(),!0},lWe=bt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),uWe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},cWe=Dt.define({combine(r){return kl(r,uWe,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function hWe(r){return[gWe,mWe]}const dWe=jt.mark({class:"cm-selectionMatch"}),fWe=jt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function g7(r,e,t,n){return(t==0||r(e.sliceDoc(t-1,t))!=pn.Word)&&(n==e.doc.length||r(e.sliceDoc(n,n+1))!=pn.Word)}function pWe(r,e,t,n){return r(e.sliceDoc(t,t+1))==pn.Word&&r(e.sliceDoc(n-1,n))==pn.Word}const mWe=jn.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(cWe),{state:t}=r,n=t.selection;if(n.ranges.length>1)return jt.none;let i=n.main,a,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return jt.none;let l=t.wordAt(i.head);if(!l)return jt.none;o=t.charCategorizer(i.head),a=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return jt.none;if(e.wholeWords){if(a=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(g7(o,t,i.from,i.to)&&pWe(o,t,i.from,i.to)))return jt.none}else if(a=t.sliceDoc(i.from,i.to),!a)return jt.none}let s=[];for(let l of r.visibleRanges){let u=new lm(t.doc,a,l.from,l.to);for(;!u.next().done;){let{from:c,to:h}=u.value;if((!o||g7(o,t,c,h))&&(i.empty&&c<=i.from&&h>=i.to?s.push(fWe.range(c,h)):(c>=i.to||h<=i.from)&&s.push(dWe.range(c,h)),s.length>e.maxMatches))return jt.none}}return jt.set(s)}},{decorations:r=>r.decorations}),gWe=bt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),vWe=({state:r,dispatch:e})=>{let{selection:t}=r,n=at.create(t.ranges.map(i=>r.wordAt(i.head)||at.cursor(i.head)),t.mainIndex);return n.eq(t)?!1:(e(r.update({selection:n})),!0)};function yWe(r,e){let{main:t,ranges:n}=r.selection,i=r.wordAt(t.head),a=i&&i.from==t.from&&i.to==t.to;for(let o=!1,s=new lm(r.doc,e,n[n.length-1].to);;)if(s.next(),s.done){if(o)return null;s=new lm(r.doc,e,0,Math.max(0,n[n.length-1].from-1)),o=!0}else{if(o&&n.some(l=>l.from==s.value.from))continue;if(a){let l=r.wordAt(s.value.from);if(!l||l.from!=s.value.from||l.to!=s.value.to)continue}return s.value}}const bWe=({state:r,dispatch:e})=>{let{ranges:t}=r.selection;if(t.some(a=>a.from===a.to))return vWe({state:r,dispatch:e});let n=r.sliceDoc(t[0].from,t[0].to);if(r.selection.ranges.some(a=>r.sliceDoc(a.from,a.to)!=n))return!1;let i=yWe(r,n);return i?(e(r.update({selection:r.selection.addRange(at.range(i.from,i.to),!1),effects:bt.scrollIntoView(i.to)})),!0):!1},jm=Dt.define({combine(r){return kl(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new NWe(e),scrollToMatch:e=>bt.scrollIntoView(e)})}});class eee{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||oWe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new MWe(this):new wWe(this)}getCursor(e,t=0,n){let i=e.doc?e:br.create({doc:e});return n==null&&(n=i.doc.length),this.regexp?Gf(this,i,t,n):Wf(this,i,t,n)}}class tee{constructor(e){this.spec=e}}function Wf(r,e,t,n){return new lm(e.doc,r.unquoted,t,n,r.caseSensitive?void 0:i=>i.toLowerCase(),r.wholeWord?xWe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function xWe(r,e){return(t,n,i,a)=>((a>t||a+i.length<n)&&(a=Math.max(0,t-2),i=r.sliceString(a,Math.min(r.length,n+2))),(e(sM(i,t-a))!=pn.Word||e(lM(i,t-a))!=pn.Word)&&(e(lM(i,n-a))!=pn.Word||e(sM(i,n-a))!=pn.Word))}class wWe extends tee{constructor(e){super(e)}nextMatch(e,t,n){let i=Wf(this.spec,e,n,e.doc.length).nextOverlapping();return i.done&&(i=Wf(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=n;;){let a=Math.max(t,i-1e4-this.spec.unquoted.length),o=Wf(this.spec,e,a,i),s=null;for(;!o.nextOverlapping().done;)s=o.value;if(s)return s;if(a==t)return null;i-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=Wf(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let a=Wf(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}function Gf(r,e,t,n){return new KQ(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?SWe(e.charCategorizer(e.selection.main.head)):void 0},t,n)}function sM(r,e){return r.slice(Oi(r,e,!1),e)}function lM(r,e){return r.slice(e,Oi(r,e))}function SWe(r){return(e,t,n)=>!n[0].length||(r(sM(n.input,n.index))!=pn.Word||r(lM(n.input,n.index))!=pn.Word)&&(r(lM(n.input,n.index+n[0].length))!=pn.Word||r(sM(n.input,n.index+n[0].length))!=pn.Word)}class MWe extends tee{nextMatch(e,t,n){let i=Gf(this.spec,e,n,e.doc.length).next();return i.done&&(i=Gf(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=1;;i++){let a=Math.max(t,n-i*1e4),o=Gf(this.spec,e,a,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(a==t||s.from>a+10))return s;if(a==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:t)}matchAll(e,t){let n=Gf(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let a=Gf(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}const Uv=hr.define(),SR=hr.define(),Lc=Fi.define({create(r){return new EA(lk(r).create(),null)},update(r,e){for(let t of e.effects)t.is(Uv)?r=new EA(t.value.create(),r.panel):t.is(SR)&&(r=new EA(r.query,t.value?MR:null));return r},provide:r=>Fv.from(r,e=>e.panel)});class EA{constructor(e,t){this.query=e,this.panel=t}}const _We=jt.mark({class:"cm-searchMatch"}),EWe=jt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),CWe=jn.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(Lc))}update(r){let e=r.state.field(Lc);(e!=r.startState.field(Lc)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return jt.none;let{view:t}=this,n=new Xc;for(let i=0,a=t.visibleRanges,o=a.length;i<o;i++){let{from:s,to:l}=a[i];for(;i<o-1&&l>a[i+1].from-2*250;)l=a[++i].to;r.highlight(t.state,s,l,(u,c)=>{let h=t.state.selection.ranges.some(d=>d.from==u&&d.to==c);n.add(u,c,h?EWe:_We)})}return n.finish()}},{decorations:r=>r.decorations});function Dy(r){return e=>{let t=e.state.field(Lc,!1);return t&&t.query.spec.valid?r(e,t):iee(e)}}const uM=Dy((r,{query:e})=>{let{to:t}=r.state.selection.main,n=e.nextMatch(r.state,t,t);if(!n)return!1;let i=at.single(n.from,n.to),a=r.state.facet(jm);return r.dispatch({selection:i,effects:[_R(r,n),a.scrollToMatch(i.main,r)],userEvent:"select.search"}),nee(r),!0}),cM=Dy((r,{query:e})=>{let{state:t}=r,{from:n}=t.selection.main,i=e.prevMatch(t,n,n);if(!i)return!1;let a=at.single(i.from,i.to),o=r.state.facet(jm);return r.dispatch({selection:a,effects:[_R(r,i),o.scrollToMatch(a.main,r)],userEvent:"select.search"}),nee(r),!0}),AWe=Dy((r,{query:e})=>{let t=e.matchAll(r.state,1e3);return!t||!t.length?!1:(r.dispatch({selection:at.create(t.map(n=>at.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),TWe=({state:r,dispatch:e})=>{let t=r.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:n,to:i}=t.main,a=[],o=0;for(let s=new lm(r.doc,r.sliceDoc(n,i));!s.next().done;){if(a.length>1e3)return!1;s.value.from==n&&(o=a.length),a.push(at.range(s.value.from,s.value.to))}return e(r.update({selection:at.create(a,o),userEvent:"select.search.matches"})),!0},v7=Dy((r,{query:e})=>{let{state:t}=r,{from:n,to:i}=t.selection.main;if(t.readOnly)return!1;let a=e.nextMatch(t,n,n);if(!a)return!1;let o=[],s,l,u=[];if(a.from==n&&a.to==i&&(l=t.toText(e.getReplacement(a)),o.push({from:a.from,to:a.to,insert:l}),a=e.nextMatch(t,a.from,a.to),u.push(bt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(n).number)+"."))),a){let c=o.length==0||o[0].from>=a.to?0:a.to-a.from-l.length;s=at.single(a.from-c,a.to-c),u.push(_R(r,a)),u.push(t.facet(jm).scrollToMatch(s.main,r))}return r.dispatch({changes:o,selection:s,effects:u,userEvent:"input.replace"}),!0}),DWe=Dy((r,{query:e})=>{if(r.state.readOnly)return!1;let t=e.matchAll(r.state,1e9).map(i=>{let{from:a,to:o}=i;return{from:a,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let n=r.state.phrase("replaced $ matches",t.length)+".";return r.dispatch({changes:t,effects:bt.announce.of(n),userEvent:"input.replace.all"}),!0});function MR(r){return r.state.facet(jm).createPanel(r)}function lk(r,e){var t,n,i,a,o;let s=r.selection.main,l=s.empty||s.to>s.from+100?"":r.sliceDoc(s.from,s.to);if(e&&!l)return e;let u=r.facet(jm);return new eee({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(a=e==null?void 0:e.regexp)!==null&&a!==void 0?a:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function ree(r){let e=Lv(r,MR);return e&&e.dom.querySelector("[main-field]")}function nee(r){let e=ree(r);e&&e==r.root.activeElement&&e.select()}const iee=r=>{let e=r.state.field(Lc,!1);if(e&&e.panel){let t=ree(r);if(t&&t!=r.root.activeElement){let n=lk(r.state,e.query.spec);n.valid&&r.dispatch({effects:Uv.of(n)}),t.focus(),t.select()}}else r.dispatch({effects:[SR.of(!0),e?Uv.of(lk(r.state,e.query.spec)):hr.appendConfig.of(RWe)]});return!0},aee=r=>{let e=r.state.field(Lc,!1);if(!e||!e.panel)return!1;let t=Lv(r,MR);return t&&t.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:SR.of(!1)}),!0},kWe=[{key:"Mod-f",run:iee,scope:"editor search-panel"},{key:"F3",run:uM,shift:cM,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:uM,shift:cM,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:aee,scope:"editor search-panel"},{key:"Mod-Shift-l",run:TWe},{key:"Mod-Alt-g",run:sWe},{key:"Mod-d",run:bWe,preventDefault:!0}];class NWe{constructor(e){this.view=e;let t=this.query=e.state.field(Lc).query.spec;this.commit=this.commit.bind(this),this.searchField=tn("input",{value:t.search,placeholder:oo(e,"Find"),"aria-label":oo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=tn("input",{value:t.replace,placeholder:oo(e,"Replace"),"aria-label":oo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=tn("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=tn("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=tn("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function n(i,a,o){return tn("button",{class:"cm-button",name:i,onclick:a,type:"button"},o)}this.dom=tn("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>uM(e),[oo(e,"next")]),n("prev",()=>cM(e),[oo(e,"previous")]),n("select",()=>AWe(e),[oo(e,"all")]),tn("label",null,[this.caseField,oo(e,"match case")]),tn("label",null,[this.reField,oo(e,"regexp")]),tn("label",null,[this.wordField,oo(e,"by word")]),...e.state.readOnly?[]:[tn("br"),this.replaceField,n("replace",()=>v7(e),[oo(e,"replace")]),n("replaceAll",()=>DWe(e),[oo(e,"replace all")])],tn("button",{name:"close",onclick:()=>aee(e),"aria-label":oo(e,"close"),type:"button"},["×"])])}commit(){let e=new eee({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Uv.of(e)}))}keydown(e){zje(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?cM:uM)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),v7(this.view))}update(e){for(let t of e.transactions)for(let n of t.effects)n.is(Uv)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(jm).top}}function oo(r,e){return r.state.phrase(e)}const Dx=30,kx=/[\s\.,:;?!]/;function _R(r,{from:e,to:t}){let n=r.state.doc.lineAt(e),i=r.state.doc.lineAt(t).to,a=Math.max(n.from,e-Dx),o=Math.min(i,t+Dx),s=r.state.sliceDoc(a,o);if(a!=n.from){for(let l=0;l<Dx;l++)if(!kx.test(s[l+1])&&kx.test(s[l])){s=s.slice(l);break}}if(o!=i){for(let l=s.length-1;l>s.length-Dx;l--)if(!kx.test(s[l-1])&&kx.test(s[l])){s=s.slice(0,l);break}}return bt.announce.of(`${r.state.phrase("current match")}. ${s} ${r.state.phrase("on line")} ${n.number}.`)}const OWe=bt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),RWe=[Lc,Wd.low(CWe),OWe];class oee{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=na(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),a=i.search(see(e,!1));return a<0?null:{from:n+a,to:this.pos,text:i.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function y7(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function PWe(r){let e=Object.create(null),t=Object.create(null);for(let{label:i}of r){e[i[0]]=!0;for(let a=1;a<i.length;a++)t[i[a]]=!0}let n=y7(e)+y7(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function IWe(r){let e=r.map(i=>typeof i=="string"?{label:i}:i),[t,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:PWe(e);return i=>{let a=i.matchBefore(n);return a||i.explicit?{from:a?a.from:i.pos,options:e,validFor:t}:null}}class b7{constructor(e,t,n,i){this.completion=e,this.source=t,this.match=n,this.score=i}}function Fc(r){return r.selection.main.from}function see(r,e){var t;let{source:n}=r,i=e&&n[0]!="^",a=n[n.length-1]!="$";return!i&&!a?r:new RegExp(`${i?"^":""}(?:${n})${a?"$":""}`,(t=r.flags)!==null&&t!==void 0?t:r.ignoreCase?"i":"")}const lee=Dl.define();function LWe(r,e,t,n){let{main:i}=r.selection,a=t-i.from,o=n-i.from;return Object.assign(Object.assign({},r.changeByRange(s=>s!=i&&t!=n&&r.sliceDoc(s.from+a,s.from+o)!=r.sliceDoc(t,n)?{range:s}:{changes:{from:s.from+a,to:n==i.from?s.to:s.from+o,insert:e},range:at.cursor(s.from+a+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const x7=new WeakMap;function FWe(r){if(!Array.isArray(r))return r;let e=x7.get(r);return e||x7.set(r,e=IWe(r)),e}const hM=hr.define(),jv=hr.define();class BWe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=Ai(e,t),i=Vo(n);this.chars.push(n);let a=e.slice(t,t+i),o=a.toUpperCase();this.folded.push(Ai(o==a?a.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:i,precise:a,byWord:o}=this;if(t.length==1){let w=Ai(e,0),b=Vo(w),m=b==e.length?0:-100;if(w!=t[0])if(w==n[0])m+=-200;else return null;return this.ret(m,[0,b])}let s=e.indexOf(this.pattern);if(s==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,u=0;if(s<0){for(let w=0,b=Math.min(e.length,200);w<b&&u<l;){let m=Ai(e,w);(m==t[u]||m==n[u])&&(i[u++]=w),w+=Vo(m)}if(u<l)return null}let c=0,h=0,d=!1,f=0,p=-1,v=-1,y=/[a-z]/.test(e),g=!0;for(let w=0,b=Math.min(e.length,200),m=0;w<b&&h<l;){let x=Ai(e,w);s<0&&(c<l&&x==t[c]&&(a[c++]=w),f<l&&(x==t[f]||x==n[f]?(f==0&&(p=w),v=w+1,f++):f=0));let S,E=x<255?x>=48&&x<=57||x>=97&&x<=122?2:x>=65&&x<=90?1:0:(S=eR(x))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!w||E==1&&y||m==0&&E!=0)&&(t[h]==x||n[h]==x&&(d=!0)?o[h++]=w:o.length&&(g=!1)),m=E,w+=Vo(x)}return h==l&&o[0]==0&&g?this.result(-100+(d?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(v==e.length?0:-100),[0,v]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):f==l?this.ret(-900-e.length,[p,v]):h==l?this.result(-100+(d?-200:0)+-700+(g?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,n){let i=[],a=0;for(let o of t){let s=o+(this.astral?Vo(Ai(n,o)):1);a&&i[a-1]==o?i[a-1]=s:(i[a++]=o,i[a++]=s)}return this.ret(e-n.length,i)}}class zWe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const ki=Dt.define({combine(r){return kl(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:UWe,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>w7(e(n),t(n)),optionClass:(e,t)=>n=>w7(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function w7(r,e){return r?e?r+" "+e:r:e}function UWe(r,e,t,n,i,a){let o=r.textDirection==un.RTL,s=o,l=!1,u="top",c,h,d=e.left-i.left,f=i.right-e.right,p=n.right-n.left,v=n.bottom-n.top;if(s&&d<Math.min(p,f)?s=!1:!s&&f<Math.min(p,d)&&(s=!0),p<=(s?d:f))c=Math.max(i.top,Math.min(t.top,i.bottom-v))-e.top,h=Math.min(400,s?d:f);else{l=!0,h=Math.min(400,(o?e.right:i.right-e.left)-30);let w=i.bottom-e.bottom;w>=v||w>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let y=(e.bottom-e.top)/a.offsetHeight,g=(e.right-e.left)/a.offsetWidth;return{style:`${u}: ${c/y}px; max-width: ${h/g}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":s?"left":"right")}}function jWe(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,i,a){let o=document.createElement("span");o.className="cm-completionLabel";let s=t.displayLabel||t.label,l=0;for(let u=0;u<a.length;){let c=a[u++],h=a[u++];c>l&&o.appendChild(document.createTextNode(s.slice(l,c)));let d=o.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(s.slice(c,h))),d.className="cm-completionMatchedText",l=h}return l<s.length&&o.appendChild(document.createTextNode(s.slice(l))),o},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function CA(r,e,t){if(r<=t)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let n=Math.floor((r-e)/t);return{from:r-(n+1)*t,to:r-n*t}}class HWe{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:a,selected:o}=i.open,s=e.state.facet(ki);this.optionContent=jWe(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=CA(a.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(t).open;for(let c=l.target,h;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(h=/-(\d+)$/.exec(c.id))&&+h[1]<u.length){this.applyCompletion(e,u[+h[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(ki).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:jv.of(null)})}),this.showOptions(a,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:a,selected:o,disabled:s}=n.open;(!i.open||i.open.options!=a)&&(this.range=CA(a.length,o,e.state.facet(ki).maxRenderedOptions),this.showOptions(a,n.id)),this.updateSel(),s!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of t.split(" "))n&&this.dom.classList.add(n);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=CA(t.options.length,t.selected,this.view.state.facet(ki).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:i}=n;if(!i)return;let a=typeof i=="string"?document.createTextNode(i):i(n);if(!a)return;"then"in a?a.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,n)}).catch(o=>Ga(this.view.state,o,"completion info")):this.addInfoPane(a,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:a}=e;n.appendChild(i),this.infoDestroy=a||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&qWe(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),a=this.space;if(!a){let o=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(a.bottom,t.bottom)-10||i.bottom<Math.max(a.top,t.top)+10?null:this.view.state.facet(ki).positionInfo(this.view,t,i,n,a,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let o=n.from;o<n.to;o++){let{completion:s,match:l}=e[o],{section:u}=s;if(u){let d=typeof u=="string"?u:u.name;if(d!=a&&(o>n.from||n.from==0))if(a=d,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let f=i.appendChild(document.createElement("completion-section"));f.textContent=d}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let h=this.optionClass(s);h&&(c.className=h);for(let d of this.optionContent){let f=d(s,this.view.state,this.view,l);f&&c.appendChild(f)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function VWe(r,e){return t=>new HWe(t,r,e)}function qWe(r,e){let t=r.getBoundingClientRect(),n=e.getBoundingClientRect(),i=t.height/r.offsetHeight;n.top<t.top?r.scrollTop-=(t.top-n.top)/i:n.bottom>t.bottom&&(r.scrollTop+=(n.bottom-t.bottom)/i)}function S7(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function WWe(r,e){let t=[],n=null,i=u=>{t.push(u);let{section:c}=u.completion;if(c){n||(n=[]);let h=typeof c=="string"?c:c.name;n.some(d=>d.name==h)||n.push(typeof c=="string"?{name:h}:c)}},a=e.facet(ki);for(let u of r)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)i(new b7(h,u.source,c?c(h):[],1e9-t.length));else{let h=e.sliceDoc(u.from,u.to),d,f=a.filterStrict?new zWe(h):new BWe(h);for(let p of u.result.options)if(d=f.match(p.label)){let v=p.displayLabel?c?c(p,d.matched):[]:d.matched;i(new b7(p,u.source,v,d.score+(p.boost||0)))}}}if(n){let u=Object.create(null),c=0,h=(d,f)=>{var p,v;return((p=d.rank)!==null&&p!==void 0?p:1e9)-((v=f.rank)!==null&&v!==void 0?v:1e9)||(d.name<f.name?-1:1)};for(let d of n.sort(h))c-=1e5,u[d.name]=c;for(let d of t){let{section:f}=d.completion;f&&(d.score+=u[typeof f=="string"?f:f.name])}}let o=[],s=null,l=a.compareCompletions;for(let u of t.sort((c,h)=>h.score-c.score||l(c.completion,h.completion))){let c=u.completion;!s||s.label!=c.label||s.detail!=c.detail||s.type!=null&&c.type!=null&&s.type!=c.type||s.apply!=c.apply||s.boost!=c.boost?o.push(u):S7(u.completion)>S7(s)&&(o[o.length-1]=u),s=u.completion}return o}class mp{constructor(e,t,n,i,a,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=a,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new mp(this.options,M7(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,i,a){let o=WWe(e,t);if(!o.length)return i&&e.some(l=>l.state==1)?new mp(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let s=t.facet(ki).selectOnOpen?0:-1;if(i&&i.selected!=s&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){s=u;break}}return new mp(o,M7(n,s),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:JWe,above:a.aboveCursor},i?i.timestamp:Date.now(),s,!1)}map(e){return new mp(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class dM{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new dM(XWe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(ki),i=(n.override||t.languageDataAt("autocomplete",Fc(t)).map(FWe)).map(o=>(this.active.find(s=>s.source==o)||new va(o,this.active.some(s=>s.state!=0)?1:0)).update(e,n));i.length==this.active.length&&i.every((o,s)=>o==this.active[s])&&(i=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||i.some(o=>o.hasResult()&&e.changes.touchesRange(o.from,o.to))||!GWe(i,this.active)?a=mp.build(i,t,this.id,a,n):a&&a.disabled&&!i.some(o=>o.state==1)&&(a=null),!a&&i.every(o=>o.state!=1)&&i.some(o=>o.hasResult())&&(i=i.map(o=>o.hasResult()?new va(o.source,0):o));for(let o of e.effects)o.is(cee)&&(a=a&&a.setSelected(o.value,this.id));return i==this.active&&a==this.open?this:new dM(i,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:$We}}function GWe(r,e){if(r==e)return!0;for(let t=0,n=0;;){for(;t<r.length&&!r[t].hasResult;)t++;for(;n<e.length&&!e[n].hasResult;)n++;let i=t==r.length,a=n==e.length;if(i||a)return i==a;if(r[t++].result!=e[n++].result)return!1}}const $We={"aria-autocomplete":"list"};function M7(r,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(t["aria-activedescendant"]=r+"-"+e),t}const XWe=[];function uk(r,e){if(r.isUserEvent("input.complete")){let t=r.annotation(lee);if(t&&e.activateOnCompletion(t))return"input"}return r.isUserEvent("input.type")?"input":r.isUserEvent("delete.backward")?"delete":null}class va{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=uk(e,t),i=this;n?i=i.handleUserEvent(e,n,t):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new va(i.source,0));for(let a of e.effects)if(a.is(hM))i=new va(i.source,1,a.value?Fc(e.state):-1);else if(a.is(jv))i=new va(i.source,0);else if(a.is(uee))for(let o of a.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,t,n){return t=="delete"||!n.activateOnTyping?this.map(e.changes):new va(this.source,1)}handleChange(e){return e.changes.touchesRange(Fc(e.startState))?new va(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new va(this.source,this.state,e.mapPos(this.explicitPos))}}class Ip extends va{constructor(e,t,n,i,a){super(e,2,t),this.result=n,this.from=i,this.to=a}hasResult(){return!0}handleUserEvent(e,t,n){var i;let a=this.result;a.map&&!e.changes.empty&&(a=a.map(a,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),l=Fc(e.state);if((this.explicitPos<0?l<=o:l<this.from)||l>s||!a||t=="delete"&&Fc(e.startState)==this.from)return new va(this.source,t=="input"&&n.activateOnTyping?1:0);let u=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return YWe(a.validFor,e.state,o,s)?new Ip(this.source,u,a,o,s):a.update&&(a=a.update(a,o,s,new oee(e.state,l,u>=0)))?new Ip(this.source,u,a,a.from,(i=a.to)!==null&&i!==void 0?i:Fc(e.state)):new va(this.source,1,u)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new va(this.source,0):this.map(e.changes)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Ip(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new va(this.source,0)}}function YWe(r,e,t,n){if(!r)return!1;let i=e.sliceDoc(t,n);return typeof r=="function"?r(i,t,n,e):see(r,!0).test(i)}const uee=hr.define({map(r,e){return r.map(t=>t.map(e))}}),cee=hr.define(),Va=Fi.define({create(){return dM.start()},update(r,e){return r.update(e)},provide:r=>[dR.from(r,e=>e.tooltip),bt.contentAttributes.from(r,e=>e.attrs)]});function ER(r,e){const t=e.completion.apply||e.completion.label;let n=r.state.field(Va).active.find(i=>i.source==e.source);return n instanceof Ip?(typeof t=="string"?r.dispatch(Object.assign(Object.assign({},LWe(r.state,t,n.from,n.to)),{annotations:lee.of(e.completion)})):t(r,e.completion,n.from,n.to),!0):!1}const JWe=VWe(Va,ER);function Nx(r,e="option"){return t=>{let n=t.state.field(Va,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<t.state.facet(ki).interactionDelay)return!1;let i=1,a;e=="page"&&(a=XK(t,n.open.tooltip))&&(i=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,s=n.open.selected>-1?n.open.selected+i*(r?1:-1):r?0:o-1;return s<0?s=e=="page"?0:o-1:s>=o&&(s=e=="page"?o-1:0),t.dispatch({effects:cee.of(s)}),!0}}const ZWe=r=>{let e=r.state.field(Va,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<r.state.facet(ki).interactionDelay?!1:ER(r,e.open.options[e.open.selected])},KWe=r=>r.state.field(Va,!1)?(r.dispatch({effects:hM.of(!0)}),!0):!1,QWe=r=>{let e=r.state.field(Va,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(r.dispatch({effects:jv.of(null)}),!0)};class eGe{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const tGe=50,rGe=1e3,nGe=jn.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of r.state.field(Va).active)e.state==1&&this.startQuery(e)}update(r){let e=r.state.field(Va),t=r.state.facet(ki);if(!r.selectionSet&&!r.docChanged&&r.startState.field(Va)==e)return;let n=r.transactions.some(a=>(a.selection||a.docChanged)&&!uk(a,t));for(let a=0;a<this.running.length;a++){let o=this.running[a];if(n||o.updates.length+r.transactions.length>tGe&&Date.now()-o.time>rGe){for(let s of o.context.abortListeners)try{s()}catch(l){Ga(this.view.state,l)}o.context.abortListeners=null,this.running.splice(a--,1)}else o.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(a=>a.effects.some(o=>o.is(hM)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(a=>a.state==1&&!this.running.some(o=>o.active.source==a.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let a of r.transactions)uk(a,t)=="input"?this.composing=2:this.composing==2&&a.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,e=r.field(Va);for(let t of e.active)t.state==1&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t)}startQuery(r){let{state:e}=this.view,t=Fc(e),n=new oee(e,t,r.explicitPos==t),i=new eGe(r,n);this.running.push(i),Promise.resolve(r.source(n)).then(a=>{i.context.aborted||(i.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:jv.of(null)}),Ga(this.view.state,a)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(ki).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(ki);for(let n=0;n<this.running.length;n++){let i=this.running[n];if(i.done===void 0)continue;if(this.running.splice(n--,1),i.done){let o=new Ip(i.active.source,i.active.explicitPos,i.done,i.done.from,(r=i.done.to)!==null&&r!==void 0?r:Fc(i.updates.length?i.updates[0].startState:this.view.state));for(let s of i.updates)o=o.update(s,t);if(o.hasResult()){e.push(o);continue}}let a=this.view.state.field(Va).active.find(o=>o.source==i.active.source);if(a&&a.state==1)if(i.done==null){let o=new va(i.active.source,0);for(let s of i.updates)o=o.update(s,t);o.state!=1&&e.push(o)}else this.startQuery(a)}e.length&&this.view.dispatch({effects:uee.of(e)})}},{eventHandlers:{blur(r){let e=this.view.state.field(Va,!1);if(e&&e.tooltip&&this.view.state.facet(ki).closeOnBlur){let t=e.open&&XK(this.view,e.open.tooltip);(!t||!t.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:jv.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:hM.of(!1)}),20),this.composing=0}}}),iGe=typeof navigator=="object"&&/Win/.test(navigator.platform),aGe=Wd.highest(bt.domEventHandlers({keydown(r,e){let t=e.state.field(Va,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||r.key.length>1||r.ctrlKey&&!(iGe&&r.altKey)||r.metaKey)return!1;let n=t.open.options[t.open.selected],i=t.active.find(o=>o.source==n.source),a=n.completion.commitCharacters||i.result.commitCharacters;return a&&a.indexOf(r.key)>-1&&ER(e,n),!1}})),oGe=bt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Hv={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},td=hr.define({map(r,e){return e.mapPos(r,-1,xa.TrackAfter)??void 0}}),CR=new class extends Ad{};CR.startSide=1;CR.endSide=-1;const hee=Fi.define({create(){return Er.empty},update(r,e){if(r=r.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);r=r.update({filter:n=>n>=t.from&&n<=t.to})}for(let t of e.effects)t.is(td)&&(r=r.update({add:[CR.range(t.value,t.value+1)]}));return r}});function sGe(){return[uGe,hee]}const AA="()[]{}<>";function dee(r){for(let e=0;e<AA.length;e+=2)if(AA.charCodeAt(e)==r)return AA.charAt(e+1);return eR(r<128?r:r+1)}function fee(r,e){return r.languageDataAt("closeBrackets",e)[0]||Hv}const lGe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),uGe=bt.inputHandler.of((r,e,t,n)=>{if((lGe?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let i=r.state.selection.main;if(n.length>2||n.length==2&&Vo(Ai(n,0))==1||e!=i.from||t!=i.to)return!1;let a=dGe(r.state,n);return a?(r.dispatch(a),!0):!1}),cGe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=fee(r,r.selection.main.head).brackets||Hv.brackets,n=null,i=r.changeByRange(a=>{if(a.empty){let o=fGe(r.doc,a.head);for(let s of t)if(s==o&&Q2(r.doc,a.head)==dee(Ai(s,0)))return{changes:{from:a.head-s.length,to:a.head+s.length},range:at.cursor(a.head-s.length)}}return{range:n=a}});return n||e(r.update(i,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},hGe=[{key:"Backspace",run:cGe}];function dGe(r,e){let t=fee(r,r.selection.main.head),n=t.brackets||Hv.brackets;for(let i of n){let a=dee(Ai(i,0));if(e==i)return a==i?gGe(r,i,n.indexOf(i+i+i)>-1,t):pGe(r,i,a,t.before||Hv.before);if(e==a&&pee(r,r.selection.main.from))return mGe(r,i,a)}return null}function pee(r,e){let t=!1;return r.field(hee).between(0,r.doc.length,n=>{n==e&&(t=!0)}),t}function Q2(r,e){let t=r.sliceString(e,e+2);return t.slice(0,Vo(Ai(t,0)))}function fGe(r,e){let t=r.sliceString(e-2,e);return Vo(Ai(t,0))==t.length?t:t.slice(1)}function pGe(r,e,t,n){let i=null,a=r.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:td.of(o.to+e.length),range:at.range(o.anchor+e.length,o.head+e.length)};let s=Q2(r.doc,o.head);return!s||/\s/.test(s)||n.indexOf(s)>-1?{changes:{insert:e+t,from:o.head},effects:td.of(o.head+e.length),range:at.cursor(o.head+e.length)}:{range:i=o}});return i?null:r.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function mGe(r,e,t){let n=null,i=r.changeByRange(a=>a.empty&&Q2(r.doc,a.head)==t?{changes:{from:a.head,to:a.head+t.length,insert:t},range:at.cursor(a.head+t.length)}:n={range:a});return n?null:r.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function gGe(r,e,t,n){let i=n.stringPrefixes||Hv.stringPrefixes,a=null,o=r.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:e,from:s.to}],effects:td.of(s.to+e.length),range:at.range(s.anchor+e.length,s.head+e.length)};let l=s.head,u=Q2(r.doc,l),c;if(u==e){if(_7(r,l))return{changes:{insert:e+e,from:l},effects:td.of(l+e.length),range:at.cursor(l+e.length)};if(pee(r,l)){let h=t&&r.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:at.cursor(l+h.length)}}}else{if(t&&r.sliceDoc(l-2*e.length,l)==e+e&&(c=E7(r,l-2*e.length,i))>-1&&_7(r,c))return{changes:{insert:e+e+e+e,from:l},effects:td.of(l+e.length),range:at.cursor(l+e.length)};if(r.charCategorizer(l)(u)!=pn.Word&&E7(r,l,i)>-1&&!vGe(r,l,e,i))return{changes:{insert:e+e,from:l},effects:td.of(l+e.length),range:at.cursor(l+e.length)}}return{range:a=s}});return a?null:r.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function _7(r,e){let t=na(r).resolveInner(e+1);return t.parent&&t.from==e}function vGe(r,e,t,n){let i=na(r).resolveInner(e,-1),a=n.reduce((o,s)=>Math.max(o,s.length),0);for(let o=0;o<5;o++){let s=r.sliceDoc(i.from,Math.min(i.to,i.from+t.length+a)),l=s.indexOf(t);if(!l||l>-1&&n.indexOf(s.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>t.length+l;){if(r.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function E7(r,e,t){let n=r.charCategorizer(e);if(n(r.sliceDoc(e-1,e))!=pn.Word)return e;for(let i of t){let a=e-i.length;if(r.sliceDoc(a,e)==i&&n(r.sliceDoc(a-1,a))!=pn.Word)return a}return-1}function yGe(r={}){return[aGe,Va,ki.of(r),nGe,bGe,oGe]}const mee=[{key:"Ctrl-Space",run:KWe},{key:"Escape",run:QWe},{key:"ArrowDown",run:Nx(!0)},{key:"ArrowUp",run:Nx(!1)},{key:"PageDown",run:Nx(!0,"page")},{key:"PageUp",run:Nx(!1,"page")},{key:"Enter",run:ZWe}],bGe=Wd.highest(_y.computeN([ki],r=>r.facet(ki).defaultKeymap?[mee]:[]));class xGe{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class qh{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let i=e,a=n.facet(Vv).markerFilter;a&&(i=a(i,n));let o=jt.set(i.map(s=>s.from==s.to||s.from==s.to-1&&n.doc.lineAt(s.from).to==s.from?jt.widget({widget:new DGe(s),diagnostic:s}).range(s.from):jt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+s.severity+(s.markClass?" "+s.markClass:"")},diagnostic:s,inclusive:!0}).range(s.from,s.to)),!0);return new qh(o,t,um(o))}}function um(r,e=null,t=0){let n=null;return r.between(t,1e9,(i,a,{spec:o})=>{if(!(e&&o.diagnostic!=e))return n=new xGe(i,a,o.diagnostic),!1}),n}function wGe(r,e){let t=e.pos,n=e.end||t,i=r.state.facet(Vv).hideOn(r,t,n);if(i!=null)return i;let a=r.startState.doc.lineAt(e.pos);return!!(r.effects.some(o=>o.is(gee))||r.changes.touchesRange(a.from,Math.max(a.to,n)))}function SGe(r,e){return r.field(yo,!1)?e:e.concat(hr.appendConfig.of(OGe))}const gee=hr.define(),AR=hr.define(),vee=hr.define(),yo=Fi.define({create(){return new qh(jt.none,null,null)},update(r,e){if(e.docChanged&&r.diagnostics.size){let t=r.diagnostics.map(e.changes),n=null,i=r.panel;if(r.selected){let a=e.changes.mapPos(r.selected.from,1);n=um(t,r.selected.diagnostic,a)||um(t,null,a)}!t.size&&i&&e.state.facet(Vv).autoPanel&&(i=null),r=new qh(t,i,n)}for(let t of e.effects)if(t.is(gee)){let n=e.state.facet(Vv).autoPanel?t.value.length?qv.open:null:r.panel;r=qh.init(t.value,n,e.state)}else t.is(AR)?r=new qh(r.diagnostics,t.value?qv.open:null,r.selected):t.is(vee)&&(r=new qh(r.diagnostics,r.panel,t.value));return r},provide:r=>[Fv.from(r,e=>e.panel),bt.decorations.from(r,e=>e.diagnostics)]}),MGe=jt.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function _Ge(r,e,t){let{diagnostics:n}=r.state.field(yo),i=[],a=2e8,o=0;n.between(e-(t<0?1:0),e+(t>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||t>0)&&(e<u||t<0))&&(i.push(c.diagnostic),a=Math.min(l,a),o=Math.max(u,o))});let s=r.state.facet(Vv).tooltipFilter;return s&&(i=s(i,r.state)),i.length?{pos:a,end:o,above:r.state.doc.lineAt(a).to<o,create(){return{dom:EGe(r,i)}}}:null}function EGe(r,e){return tn("ul",{class:"cm-tooltip-lint"},e.map(t=>bee(r,t,!1)))}const CGe=r=>{let e=r.state.field(yo,!1);(!e||!e.panel)&&r.dispatch({effects:SGe(r.state,[AR.of(!0)])});let t=Lv(r,qv.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},C7=r=>{let e=r.state.field(yo,!1);return!e||!e.panel?!1:(r.dispatch({effects:AR.of(!1)}),!0)},AGe=r=>{let e=r.state.field(yo,!1);if(!e)return!1;let t=r.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(r.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},TGe=[{key:"Mod-Shift-m",run:CGe,preventDefault:!0},{key:"F8",run:AGe}],Vv=Dt.define({combine(r){return Object.assign({sources:r.map(e=>e.source).filter(e=>e!=null)},kl(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))}});function yee(r){let e=[];if(r)e:for(let{name:t}of r){for(let n=0;n<t.length;n++){let i=t[n];if(/[a-zA-Z]/.test(i)&&!e.some(a=>a.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function bee(r,e,t){var n;let i=t?yee(e.actions):[];return tn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},tn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(r):e.message),(n=e.actions)===null||n===void 0?void 0:n.map((a,o)=>{let s=!1,l=d=>{if(d.preventDefault(),s)return;s=!0;let f=um(r.state.field(yo).diagnostics,e);f&&a.apply(r,f.from,f.to)},{name:u}=a,c=i[o]?u.indexOf(i[o]):-1,h=c<0?u:[u.slice(0,c),tn("u",u.slice(c,c+1)),u.slice(c+1)];return tn("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},h)}),e.source&&tn("div",{class:"cm-diagnosticSource"},e.source))}class DGe extends Pu{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return tn("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class A7{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=bee(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class qv{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)C7(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],o=yee(a.actions);for(let s=0;s<o.length;s++)if(o[s].toUpperCase().charCodeAt(0)==i.keyCode){let l=um(this.view.state.field(yo).diagnostics,a);l&&a.actions[s].apply(e,l.from,l.to)}}else return;i.preventDefault()},n=i=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(i.target)&&this.moveSelection(a)};this.list=tn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=tn("div",{class:"cm-panel-lint"},this.list,tn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>C7(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(yo).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(yo),n=0,i=!1,a=null;for(e.between(0,this.view.state.doc.length,(o,s,{spec:l})=>{let u=-1,c;for(let h=n;h<this.items.length;h++)if(this.items[h].diagnostic==l.diagnostic){u=h;break}u<0?(c=new A7(this.view,l.diagnostic),this.items.splice(n,0,c),i=!0):(c=this.items[u],u>n&&(this.items.splice(n,u-n),i=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),a=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new A7(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:s})=>{let l=s.height/this.list.offsetHeight;o.top<s.top?this.list.scrollTop-=(s.top-o.top)/l:o.bottom>s.bottom&&(this.list.scrollTop+=(o.bottom-s.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(yo),n=um(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:vee.of(n)})}static open(e){return new qv(e)}}function kGe(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function Ox(r){return kGe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const NGe=bt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ox("#d11")},".cm-lintRange-warning":{backgroundImage:Ox("orange")},".cm-lintRange-info":{backgroundImage:Ox("#999")},".cm-lintRange-hint":{backgroundImage:Ox("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),OGe=[yo,bt.decorations.compute([yo],r=>{let{selected:e,panel:t}=r.field(yo);return!e||!t||e.from==e.to?jt.none:jt.set([MGe.range(e.from,e.to)])}),AHe(_Ge,{hideOn:wGe}),NGe];var T7=function(r){r===void 0&&(r={});var{crosshairCursor:e=!1}=r,t=[];r.closeBracketsKeymap!==!1&&(t=t.concat(hGe)),r.defaultKeymap!==!1&&(t=t.concat(YQ)),r.searchKeymap!==!1&&(t=t.concat(kWe)),r.historyKeymap!==!1&&(t=t.concat(fqe)),r.foldKeymap!==!1&&(t=t.concat(AVe)),r.completionKeymap!==!1&&(t=t.concat(mee)),r.lintKeymap!==!1&&(t=t.concat(TGe));var n=[];return r.lineNumbers!==!1&&n.push(LHe()),r.highlightActiveLineGutter!==!1&&n.push(zHe()),r.highlightSpecialChars!==!1&&n.push(rHe()),r.history!==!1&&n.push(iqe()),r.foldGutter!==!1&&n.push(NVe()),r.drawSelection!==!1&&n.push(Wje()),r.dropCursor!==!1&&n.push(Jje()),r.allowMultipleSelections!==!1&&n.push(br.allowMultipleSelections.of(!0)),r.indentOnInput!==!1&&n.push(vVe()),r.syntaxHighlighting!==!1&&n.push(fQ(IVe,{fallback:!0})),r.bracketMatching!==!1&&n.push(HVe()),r.closeBrackets!==!1&&n.push(sGe()),r.autocompletion!==!1&&n.push(yGe()),r.rectangularSelection!==!1&&n.push(gHe()),e!==!1&&n.push(bHe()),r.highlightActiveLine!==!1&&n.push(lHe()),r.highlightSelectionMatches!==!1&&n.push(hWe()),r.tabSize&&typeof r.tabSize=="number"&&n.push(G2.of(" ".repeat(r.tabSize))),n.concat([_y.of(t.flat())]).filter(Boolean)};const RGe="#e5c07b",D7="#e06c75",PGe="#56b6c2",IGe="#ffffff",bw="#abb2bf",ck="#7d8799",LGe="#61afef",FGe="#98c379",k7="#d19a66",BGe="#c678dd",zGe="#21252b",N7="#2c313a",O7="#282c34",TA="#353a42",UGe="#3E4451",R7="#528bff",jGe=bt.theme({"&":{color:bw,backgroundColor:O7},".cm-content":{caretColor:R7},".cm-cursor, .cm-dropCursor":{borderLeftColor:R7},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:UGe},".cm-panels":{backgroundColor:zGe,color:bw},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:O7,color:ck,border:"none"},".cm-activeLineGutter":{backgroundColor:N7},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:TA},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:TA,borderBottomColor:TA},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:N7,color:bw}}},{dark:!0}),HGe=Ay.define([{tag:tt.keyword,color:BGe},{tag:[tt.name,tt.deleted,tt.character,tt.propertyName,tt.macroName],color:D7},{tag:[tt.function(tt.variableName),tt.labelName],color:LGe},{tag:[tt.color,tt.constant(tt.name),tt.standard(tt.name)],color:k7},{tag:[tt.definition(tt.name),tt.separator],color:bw},{tag:[tt.typeName,tt.className,tt.number,tt.changed,tt.annotation,tt.modifier,tt.self,tt.namespace],color:RGe},{tag:[tt.operator,tt.operatorKeyword,tt.url,tt.escape,tt.regexp,tt.link,tt.special(tt.string)],color:PGe},{tag:[tt.meta,tt.comment],color:ck},{tag:tt.strong,fontWeight:"bold"},{tag:tt.emphasis,fontStyle:"italic"},{tag:tt.strikethrough,textDecoration:"line-through"},{tag:tt.link,color:ck,textDecoration:"underline"},{tag:tt.heading,fontWeight:"bold",color:D7},{tag:[tt.atom,tt.bool,tt.special(tt.variableName)],color:k7},{tag:[tt.processingInstruction,tt.string,tt.inserted],color:FGe},{tag:tt.invalid,color:IGe}]),VGe=[jGe,fQ(HGe)];var qGe=bt.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),WGe=function(r){r===void 0&&(r={});var{indentWithTab:e=!0,editable:t=!0,readOnly:n=!1,theme:i="light",placeholder:a="",basicSetup:o=!0}=r,s=[];switch(e&&s.unshift(_y.of([aWe])),o&&(typeof o=="boolean"?s.unshift(T7()):s.unshift(T7(o))),a&&s.unshift(dHe(a)),i){case"light":s.push(qGe);break;case"dark":s.push(VGe);break;case"none":break;default:s.push(i);break}return t===!1&&s.push(bt.editable.of(!1)),n&&s.push(br.readOnly.of(!0)),[...s]},GGe=r=>({line:r.state.doc.lineAt(r.state.selection.main.from),lineCount:r.state.doc.lines,lineBreak:r.state.lineBreak,length:r.state.doc.length,readOnly:r.state.readOnly,tabSize:r.state.tabSize,selection:r.state.selection,selectionAsSingle:r.state.selection.asSingle().main,ranges:r.state.selection.ranges,selectionCode:r.state.sliceDoc(r.state.selection.main.from,r.state.selection.main.to),selections:r.state.selection.ranges.map(e=>r.state.sliceDoc(e.from,e.to)),selectedText:r.state.selection.ranges.some(e=>!e.empty)}),P7=Dl.define(),$Ge=[];function XGe(r){var{value:e,selection:t,onChange:n,onStatistics:i,onCreateEditor:a,onUpdate:o,extensions:s=$Ge,autoFocus:l,theme:u="light",height:c=null,minHeight:h=null,maxHeight:d=null,width:f=null,minWidth:p=null,maxWidth:v=null,placeholder:y="",editable:g=!0,readOnly:w=!1,indentWithTab:b=!0,basicSetup:m=!0,root:x,initialState:S}=r,[E,A]=j.useState(),[T,C]=j.useState(),[D,O]=j.useState(),U=bt.theme({"&":{height:c,minHeight:h,maxHeight:d,width:f,minWidth:p,maxWidth:v},"& .cm-scroller":{height:"100% !important"}}),L=bt.updateListener.of(R=>{if(R.docChanged&&typeof n=="function"&&!R.transactions.some(X=>X.annotation(P7))){var z=R.state.doc,B=z.toString();n(B,R)}i&&i(GGe(R))}),F=WGe({theme:u,editable:g,readOnly:w,placeholder:y,indentWithTab:b,basicSetup:m}),k=[L,U,...F];return o&&typeof o=="function"&&k.push(bt.updateListener.of(o)),k=k.concat(s),j.useEffect(()=>{if(E&&!D){var R={doc:e,selection:t,extensions:k},z=S?br.fromJSON(S.json,R,S.fields):br.create(R);if(O(z),!T){var B=new bt({state:z,parent:E,root:x});C(B),a&&a(B,z)}}return()=>{T&&(O(void 0),C(void 0))}},[E,D]),j.useEffect(()=>A(r.container),[r.container]),j.useEffect(()=>()=>{T&&(T.destroy(),C(void 0))},[T]),j.useEffect(()=>{l&&T&&T.focus()},[l,T]),j.useEffect(()=>{T&&T.dispatch({effects:hr.reconfigure.of(k)})},[u,s,c,h,d,f,p,v,y,g,w,b,m,n,o]),j.useEffect(()=>{if(e!==void 0){var R=T?T.state.doc.toString():"";T&&e!==R&&T.dispatch({changes:{from:0,to:R.length,insert:e||""},annotations:[P7.of(!0)]})}},[e,T]),{state:D,setState:O,view:T,setView:C,container:E,setContainer:A}}var YGe=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],xee=j.forwardRef((r,e)=>{var{className:t,value:n="",selection:i,extensions:a=[],onChange:o,onStatistics:s,onCreateEditor:l,onUpdate:u,autoFocus:c,theme:h="light",height:d,minHeight:f,maxHeight:p,width:v,minWidth:y,maxWidth:g,basicSetup:w,placeholder:b,indentWithTab:m,editable:x,readOnly:S,root:E,initialState:A}=r,T=lX(r,YGe),C=j.useRef(null),{state:D,view:O,container:U}=XGe({container:C.current,root:E,value:n,autoFocus:c,theme:h,height:d,minHeight:f,maxHeight:p,width:v,minWidth:y,maxWidth:g,basicSetup:w,placeholder:b,indentWithTab:m,editable:x,readOnly:S,selection:i,onChange:o,onStatistics:s,onCreateEditor:l,onUpdate:u,extensions:a,initialState:A});if(j.useImperativeHandle(e,()=>({editor:C.current,state:D,view:O}),[C,U,D,O]),typeof n!="string")throw new Error("value must be typeof string but got "+typeof n);var L=typeof h=="string"?"cm-theme-"+h:"cm-theme";return ue.jsx("div",lt({ref:C,className:""+L+(t?" "+t:"")},T))});xee.displayName="CodeMirror";function JGe(r){const[e,t]=j.useState(""),n=[_y.of(YQ)];j.useEffect(()=>{r.activeAtom!=null&&t(r.activeAtom.code)},[r.activeAtom]);function i(){document.getElementById("code-window").classList.add("code-off")}return ue.jsxs("div",{id:"code-window",className:" code-off login-page code-window-div",children:[ue.jsx(xee,{width:"100%",extensions:n,value:e,onChange:a=>{t(a)},theme:"dark"}),ue.jsx("button",{type:"button",onClick:()=>r.activeAtom.updateCode(e),style:{display:"none"},id:"save-code-button",children:"Save Code"}),ue.jsx("button",{type:"button",style:{display:"none"},id:"close-code-button",onClick:()=>i(),children:"Close Editor"})]})}function ZGe(r){const e=mm();let t=r.props.authorizedUserOcto,n=r.props.activeAtom,i=r.props.setActiveAtom;const a=r.props.exportPopUp,o=r.props.setExportPopUp,[s,l]=j.useState(!0),[u,c]=j.useState(!0),[h,d]=j.useState(!0),[f,p]=j.useState(!0),[v,y]=j.useState(0),[g,w]=j.useState(!1);j.useState(0);const[b,m]=j.useState(!1);var x={a:"Assembly",b:"Loft",c:"Copy",d:"Difference",e:"Extrude",g:"GitHub",i:"Input",j:"Translate",r:"Rotate",u:"Rectangle",l:"Circle",m:"Molecule",s:"Save",v:"Paste",x:"Equation",y:"Code",z:"Undo"};j.useEffect(()=>{n&&n.atomType=="Molecule"&&m(!n.topLevel)},[n]),j.useEffect(()=>(window.addEventListener("keydown",S),()=>{window.removeEventListener("keydown",S)})),j.useEffect(()=>{const R=setInterval(()=>{w(!0),F(y)},12e4);return()=>clearInterval(R)},[]);const S=R=>{R.metaKey&&R.key=="s"&&(R.preventDefault(),w(!0),F(y))};let E=r.displayProps.cad,A=r.displayProps.setMesh,T=r.displayProps.mesh,C=r.displayProps.setWireMesh,D=r.displayProps.wireMesh;const O=async function(R,{owner:z,repo:B,base:X,changes:Z},Q){Q(35),X||R.request("GET /repos/{owner}/{repo}",{owner:z,repo:B}).then(J=>{Q(40),X=J.data.default_branch,R.rest.repos.listCommits({owner:z,repo:B,sha:X,per_page:1}).then(ne=>{Q(50);let fe=ne.data[0].sha;const se=ne.data[0].commit.tree.sha;R.rest.git.createTree({owner:z,repo:B,base_tree:se,tree:Object.keys(Z.files).map(ye=>Z.files[ye]!=null?{path:ye,mode:"100644",content:Z.files[ye]}:{path:ye,mode:"100644",sha:null})}).then(ye=>{Q(60);const De=ye.data.sha;R.rest.git.createCommit({owner:z,repo:B,message:Z.commit,tree:De,parents:[fe]}).then(pe=>{Q(80),fe=pe.data.sha,R.rest.git.updateRef({owner:z,repo:B,sha:fe,ref:"heads/"+X,force:!0}).then(Te=>{Q(90),console.warn("Project saved"),Q(100)})})})})})},U=async function(R){var z=new FileReader;z.onload=function(B){let X=B.target.result.split(",")[1];t.rest.repos.createOrUpdateFileContents({owner:I.currentUser,repo:I.currentRepoName,path:R.name,message:"Import File",content:X}).then(Z=>{n.updateFile(R,Z.data.content.sha),F(y)})},z.readAsDataURL(R)},L=async function(R,z){console.log("deleting file"),t.rest.repos.deleteFile({owner:I.currentUser,repo:I.currentRepoName,path:R,message:"Deleted node",sha:z})},F=async R=>{console.log(I.topLevelMolecule),R(5);let z;z=await I.topLevelMolecule.generateProjectThumbnail().catch(Re=>{console.error("Error generating final project thumbnail: ",Re)}),R(10);var B=I.topLevelMolecule.serialize();B.filetypeVersion=1;const X=JSON.stringify(B,null,4);var Z=`###### Note: Do not edit this file directly, it is automatically generated from the CAD model 
# Bill Of Materials 
 |Part|Number Needed|Price|Source| 
 |----|----------|-----|-----|`,Q=Z,J=I.topLevelMolecule.compiledBom,ne=0,fe=0;J.length>0&&J.forEach(Re=>{ne+=Re.numberNeeded,fe+=Re.costUSD,Q=Q+`
|`+Re.BOMitemName+"|"+Re.numberNeeded+"|$"+Re.costUSD.toFixed(2)+"||"}),Q=Q+`
|Total: |`+ne+"|$"+fe.toFixed(2)+"| |",Q=Q+`

 3xCOG MSRP: $`+(3*fe).toFixed(2);var se="###### Note: Do not edit this file directly, it is automatically generated from the CAD model",ye=se+`

# `+I.currentRepoName+`

![](/project.svg)

`;R(20);let De=await I.topLevelMolecule.requestReadme(),pe=" ";De.forEach(Re=>{pe=pe.concat(Re.readMeText)+`

`}),ye=ye+`

`+pe+`

`;let Te={"BillOfMaterials.md":Q,"README.md":ye,"project.abundance":X};const be=De;let re;be&&be.forEach(Re=>{Re.svg!=null&&(Te["readme"+Re.uniqueID+".svg"]=Re.svg,re=Re.svg)}),Te["project.svg"]=z||re||"",R(30),O(t,{owner:I.currentUser,repo:I.currentRepo.name,changes:{files:Te,commit:"Autosave"}},R)};if(t){if(I.currentRepo.owner.login==I.currentRepo.owner.login)return ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{id:"headerBar",children:ue.jsx("img",{className:"thumnail-logo",src:"/imgs/abundance_logo.png",alt:"logo"})}),a?ue.jsx(RX,{setExportPopUp:o,exporting:!0,authorizedUserOcto:t}):null,ue.jsx(mZ,{run:!1}),ue.jsx("button",{className:"round-button",style:{width:"20px",height:"20px",borderRadius:"50%",position:"absolute",top:"44%",right:"1%",opacity:"0.5",transform:"translate(-50%, -50%)"},onClick:()=>{console.log(Object.entries(x).map(([R,z])=>`${R}: ${z}`).join(`
`))}}),ue.jsx($Ue,{authorizedUserOcto:t,savePopUp:g,setSavePopUp:w,saveProject:F,setExportPopUp:o,saveState:v,setSaveState:y,currentMoleculeTop:b,setActiveAtom:i}),ue.jsx(JGe,{activeAtom:n}),ue.jsx("input",{type:"file",id:"fileLoaderInput",style:{display:"none"},onChange:R=>{let z=R.target.files[0];U(z)}}),ue.jsx("input",{type:"button",id:"fileDeleteInput",style:{display:"none"},onClick:()=>{L(n.fileName,n.sha)}}),ue.jsx(V9e,{props:{activeAtom:n,loadProject:r.props.loadProject,setActiveAtom:i,setSavePopUp:w,setSaveState:y,setTop:m,shortCuts:x},displayProps:{setMesh:A,cad:E,setWireMesh:C}}),ue.jsxs("div",{className:"parent flex-parent",id:"lowerHalf",children:[n?ue.jsx(gZ,{activeAtom:n,setActiveAtom:i,setGrid:l,setAxes:c,setWire:d,setSolid:p}):null,ue.jsx(W9e,{props:{gridParam:s,axesParam:u,wireParam:h,solidParam:f,setSaveState:y,setSaveState:y},displayProps:{mesh:T,wireMesh:D,outdatedMesh:r.displayProps.outdatedMesh,setOutdatedMesh:r.displayProps.setOutdatedMesh}})]})]});e(`/run/${I.currentRepo.id}`)}else{console.warn("You are not logged in");const{id:R}=aV();var k=new fu;k.request("GET /repositories/:id",{id:R}).then(z=>{I.currentRepoName=z.data.name,I.currentRepo=z.data})}}function KGe(r){return new Worker("/assets/worker-D2fDphTQ.js",{name:r==null?void 0:r.name})}var Uf=null;const jf=pV(new KGe);function QGe(){const[r,e]=j.useState(5),[t,n]=j.useState({}),[i,a]=j.useState(null),[o,s]=j.useState(!1);j.useEffect(()=>{jf.createMesh(r).then(y=>n(y)),jf.createMesh(r).then(y=>a(y))},[r]);const[l,u]=j.useState(!1),[c,h]=j.useState(null),[d,f]=j.useState(!1);j.useEffect(()=>{I.writeToDisplay=(y,g=!1)=>{console.log("write to display running "+y),s(!0),jf.generateDisplayMesh(y).then(w=>{n(w),s(!1)}).catch(w=>{console.error("Can't display Mesh "+w)}),jf.generateDisplayMesh(I.currentMolecule.output.value).then(w=>a(w)).catch(w=>{console.error("Can't comput Wireframe/No output "+w)})},I.cad=jf});const p=function(){return new Promise((y,g)=>{window.location.href.includes("private")?kE.OAuth.initialize("6CQQE8MMCBFjdWEjevnTBMCQpsw"):kE.OAuth.initialize("BYP9iFpD7aTV9SDhnalvhZ4fwD8"),kE.OAuth.popup("github").then(w=>{Uf=new fu({auth:w.access_token}),Uf.request("GET /user",{}).then(b=>{I.currentUser=b.data.login,I.currentUser&&(u(!0),y(Uf))})})})},v=function(y){I.loadedRepo=y,I.currentRepoName=y.name,I.currentRepo=y,I.totalAtomCount=0,I.numberOfAtomsToLoad=0,I.startTime=new Date().getTime();var g=new fu;g.request("GET /repos/{owner}/{repo}/contents/project.abundance",{owner:y.owner.login,repo:y.name}).then(w=>{let b=JSON.parse(atob(w.data.content));b.filetypeVersion==1?I.topLevelMolecule.deserialize(b):I.topLevelMolecule.deserialize(convertFromOldFormat(b)),h(I.currentMolecule),I.currentMolecule.selected=!0})};return ue.jsx("main",{children:ue.jsx(Rie,{children:ue.jsxs(Cie,{children:[ue.jsx(Wx,{exact:!0,path:"/",element:ue.jsx(PIe,{authorizedUserOcto:Uf,tryLogin:p,setIsLoggedIn:u,isloggedIn:l,exportPopUp:d,setExportPopUp:f})}),ue.jsx(Wx,{path:"/:id",element:ue.jsx(ZGe,{props:{activeAtom:c,setActiveAtom:h,authorizedUserOcto:Uf,tryLogin:p,loadProject:v,exportPopUp:d,setExportPopUp:f},displayProps:{mesh:t,setMesh:n,size:r,cad:jf,wireMesh:i,setWireMesh:a,outdatedMesh:o,setOutdatedMesh:s}})}),ue.jsx(Wx,{path:"/run/:id",element:ue.jsx(WUe,{props:{isloggedIn:l,setActiveAtom:h,activeAtom:I.currentMolecule,authorizedUserOcto:Uf,tryLogin:p,loadProject:v},displayProps:{mesh:t,wireMesh:i,outdatedMesh:o,setOutdatedMesh:s}})})]})})})}const e$e=DA.createRoot(document.getElementById("root"));e$e.render(ue.jsx(Ae.StrictMode,{children:ue.jsx(QGe,{})}));
